(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function Su(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function A$(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var H6={exports:{}},i2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LU;function joe(){if(LU)return i2;LU=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var s=null;if(o!==void 0&&(s=""+o),r.key!==void 0&&(s=""+r.key),"key"in r){o={};for(var a in r)a!=="key"&&(o[a]=r[a])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:o}}return i2.Fragment=e,i2.jsx=t,i2.jsxs=t,i2}var zU;function Noe(){return zU||(zU=1,H6.exports=joe()),H6.exports}var te=Noe(),Z6={exports:{}},qr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FU;function Goe(){if(FU)return qr;FU=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function E(De){return De===null||typeof De!="object"?null:(De=x&&De[x]||De["@@iterator"],typeof De=="function"?De:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,z={};function Q(De,Ge,Te){this.props=De,this.context=Ge,this.refs=z,this.updater=Te||R}Q.prototype.isReactComponent={},Q.prototype.setState=function(De,Ge){if(typeof De!="object"&&typeof De!="function"&&De!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,De,Ge,"setState")},Q.prototype.forceUpdate=function(De){this.updater.enqueueForceUpdate(this,De,"forceUpdate")};function Y(){}Y.prototype=Q.prototype;function H(De,Ge,Te){this.props=De,this.context=Ge,this.refs=z,this.updater=Te||R}var Z=H.prototype=new Y;Z.constructor=H,P(Z,Q.prototype),Z.isPureReactComponent=!0;var J=Array.isArray;function $(){}var G={H:null,A:null,T:null,S:null},oe=Object.prototype.hasOwnProperty;function ue(De,Ge,Te){var xt=Te.ref;return{$$typeof:n,type:De,key:Ge,ref:xt!==void 0?xt:null,props:Te}}function xe(De,Ge){return ue(De.type,Ge,De.props)}function ge(De){return typeof De=="object"&&De!==null&&De.$$typeof===n}function Ie(De){var Ge={"=":"=0",":":"=2"};return"$"+De.replace(/[=:]/g,function(Te){return Ge[Te]})}var Me=/\/+/g;function ke(De,Ge){return typeof De=="object"&&De!==null&&De.key!=null?Ie(""+De.key):Ge.toString(36)}function je(De){switch(De.status){case"fulfilled":return De.value;case"rejected":throw De.reason;default:switch(typeof De.status=="string"?De.then($,$):(De.status="pending",De.then(function(Ge){De.status==="pending"&&(De.status="fulfilled",De.value=Ge)},function(Ge){De.status==="pending"&&(De.status="rejected",De.reason=Ge)})),De.status){case"fulfilled":return De.value;case"rejected":throw De.reason}}throw De}function Be(De,Ge,Te,xt,st){var Tt=typeof De;(Tt==="undefined"||Tt==="boolean")&&(De=null);var Lt=!1;if(De===null)Lt=!0;else switch(Tt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(De.$$typeof){case n:case e:Lt=!0;break;case m:return Lt=De._init,Be(Lt(De._payload),Ge,Te,xt,st)}}if(Lt)return st=st(De),Lt=xt===""?"."+ke(De,0):xt,J(st)?(Te="",Lt!=null&&(Te=Lt.replace(Me,"$&/")+"/"),Be(st,Ge,Te,"",function(Ee){return Ee})):st!=null&&(ge(st)&&(st=xe(st,Te+(st.key==null||De&&De.key===st.key?"":(""+st.key).replace(Me,"$&/")+"/")+Lt)),Ge.push(st)),1;Lt=0;var Ue=xt===""?".":xt+":";if(J(De))for(var Oe=0;Oe<De.length;Oe++)xt=De[Oe],Tt=Ue+ke(xt,Oe),Lt+=Be(xt,Ge,Te,Tt,st);else if(Oe=E(De),typeof Oe=="function")for(De=Oe.call(De),Oe=0;!(xt=De.next()).done;)xt=xt.value,Tt=Ue+ke(xt,Oe++),Lt+=Be(xt,Ge,Te,Tt,st);else if(Tt==="object"){if(typeof De.then=="function")return Be(je(De),Ge,Te,xt,st);throw Ge=String(De),Error("Objects are not valid as a React child (found: "+(Ge==="[object Object]"?"object with keys {"+Object.keys(De).join(", ")+"}":Ge)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function Ye(De,Ge,Te){if(De==null)return De;var xt=[],st=0;return Be(De,xt,"","",function(Tt){return Ge.call(Te,Tt,st++)}),xt}function At(De){if(De._status===-1){var Ge=De._result;Ge=Ge(),Ge.then(function(Te){(De._status===0||De._status===-1)&&(De._status=1,De._result=Te)},function(Te){(De._status===0||De._status===-1)&&(De._status=2,De._result=Te)}),De._status===-1&&(De._status=0,De._result=Ge)}if(De._status===1)return De._result.default;throw De._result}var yt=typeof reportError=="function"?reportError:function(De){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof De=="object"&&De!==null&&typeof De.message=="string"?String(De.message):String(De),error:De});if(!window.dispatchEvent(Ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",De);return}console.error(De)},Le={map:Ye,forEach:function(De,Ge,Te){Ye(De,function(){Ge.apply(this,arguments)},Te)},count:function(De){var Ge=0;return Ye(De,function(){Ge++}),Ge},toArray:function(De){return Ye(De,function(Ge){return Ge})||[]},only:function(De){if(!ge(De))throw Error("React.Children.only expected to receive a single React element child.");return De}};return qr.Activity=v,qr.Children=Le,qr.Component=Q,qr.Fragment=t,qr.Profiler=r,qr.PureComponent=H,qr.StrictMode=i,qr.Suspense=c,qr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,qr.__COMPILER_RUNTIME={__proto__:null,c:function(De){return G.H.useMemoCache(De)}},qr.cache=function(De){return function(){return De.apply(null,arguments)}},qr.cacheSignal=function(){return null},qr.cloneElement=function(De,Ge,Te){if(De==null)throw Error("The argument must be a React element, but you passed "+De+".");var xt=P({},De.props),st=De.key;if(Ge!=null)for(Tt in Ge.key!==void 0&&(st=""+Ge.key),Ge)!oe.call(Ge,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&Ge.ref===void 0||(xt[Tt]=Ge[Tt]);var Tt=arguments.length-2;if(Tt===1)xt.children=Te;else if(1<Tt){for(var Lt=Array(Tt),Ue=0;Ue<Tt;Ue++)Lt[Ue]=arguments[Ue+2];xt.children=Lt}return ue(De.type,st,xt)},qr.createContext=function(De){return De={$$typeof:s,_currentValue:De,_currentValue2:De,_threadCount:0,Provider:null,Consumer:null},De.Provider=De,De.Consumer={$$typeof:o,_context:De},De},qr.createElement=function(De,Ge,Te){var xt,st={},Tt=null;if(Ge!=null)for(xt in Ge.key!==void 0&&(Tt=""+Ge.key),Ge)oe.call(Ge,xt)&&xt!=="key"&&xt!=="__self"&&xt!=="__source"&&(st[xt]=Ge[xt]);var Lt=arguments.length-2;if(Lt===1)st.children=Te;else if(1<Lt){for(var Ue=Array(Lt),Oe=0;Oe<Lt;Oe++)Ue[Oe]=arguments[Oe+2];st.children=Ue}if(De&&De.defaultProps)for(xt in Lt=De.defaultProps,Lt)st[xt]===void 0&&(st[xt]=Lt[xt]);return ue(De,Tt,st)},qr.createRef=function(){return{current:null}},qr.forwardRef=function(De){return{$$typeof:a,render:De}},qr.isValidElement=ge,qr.lazy=function(De){return{$$typeof:m,_payload:{_status:-1,_result:De},_init:At}},qr.memo=function(De,Ge){return{$$typeof:h,type:De,compare:Ge===void 0?null:Ge}},qr.startTransition=function(De){var Ge=G.T,Te={};G.T=Te;try{var xt=De(),st=G.S;st!==null&&st(Te,xt),typeof xt=="object"&&xt!==null&&typeof xt.then=="function"&&xt.then($,yt)}catch(Tt){yt(Tt)}finally{Ge!==null&&Te.types!==null&&(Ge.types=Te.types),G.T=Ge}},qr.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},qr.use=function(De){return G.H.use(De)},qr.useActionState=function(De,Ge,Te){return G.H.useActionState(De,Ge,Te)},qr.useCallback=function(De,Ge){return G.H.useCallback(De,Ge)},qr.useContext=function(De){return G.H.useContext(De)},qr.useDebugValue=function(){},qr.useDeferredValue=function(De,Ge){return G.H.useDeferredValue(De,Ge)},qr.useEffect=function(De,Ge){return G.H.useEffect(De,Ge)},qr.useEffectEvent=function(De){return G.H.useEffectEvent(De)},qr.useId=function(){return G.H.useId()},qr.useImperativeHandle=function(De,Ge,Te){return G.H.useImperativeHandle(De,Ge,Te)},qr.useInsertionEffect=function(De,Ge){return G.H.useInsertionEffect(De,Ge)},qr.useLayoutEffect=function(De,Ge){return G.H.useLayoutEffect(De,Ge)},qr.useMemo=function(De,Ge){return G.H.useMemo(De,Ge)},qr.useOptimistic=function(De,Ge){return G.H.useOptimistic(De,Ge)},qr.useReducer=function(De,Ge,Te){return G.H.useReducer(De,Ge,Te)},qr.useRef=function(De){return G.H.useRef(De)},qr.useState=function(De){return G.H.useState(De)},qr.useSyncExternalStore=function(De,Ge,Te){return G.H.useSyncExternalStore(De,Ge,Te)},qr.useTransition=function(){return G.H.useTransition()},qr.version="19.2.0",qr}var jU;function Ba(){return jU||(jU=1,Z6.exports=Goe()),Z6.exports}var _t=Ba();const En=Su(_t);var h$={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rx=En.createContext&&En.createContext(h$),Qoe=["attr","size","title"];function Woe(n,e){if(n==null)return{};var t=qoe(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function qoe(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Iw(){return Iw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Iw.apply(this,arguments)}function NU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function kw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(t),!0).forEach(function(i){Yoe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):NU(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Yoe(n,e,t){return e=Voe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Voe(n){var e=$oe(n,"string");return typeof e=="symbol"?e:e+""}function $oe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function d$(n){return n&&n.map((e,t)=>En.createElement(e.tag,kw({key:t},e.attr),d$(e.child)))}function Bo(n){return e=>En.createElement(Hoe,Iw({attr:kw({},n.attr)},e),d$(n.child))}function Hoe(n){var e=t=>{var{attr:i,size:r,title:o}=n,s=Woe(n,Qoe),a=r||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),En.createElement("svg",Iw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,s,{className:c,style:kw(kw({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&En.createElement("title",null,o),n.children)};return rx!==void 0?En.createElement(rx.Consumer,null,t=>e(t)):e(h$)}var X6={exports:{}},r2={},J6={exports:{}},eB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GU;function Zoe(){return GU||(GU=1,(function(n){function e(Be,Ye){var At=Be.length;Be.push(Ye);e:for(;0<At;){var yt=At-1>>>1,Le=Be[yt];if(0<r(Le,Ye))Be[yt]=Ye,Be[At]=Le,At=yt;else break e}}function t(Be){return Be.length===0?null:Be[0]}function i(Be){if(Be.length===0)return null;var Ye=Be[0],At=Be.pop();if(At!==Ye){Be[0]=At;e:for(var yt=0,Le=Be.length,De=Le>>>1;yt<De;){var Ge=2*(yt+1)-1,Te=Be[Ge],xt=Ge+1,st=Be[xt];if(0>r(Te,At))xt<Le&&0>r(st,Te)?(Be[yt]=st,Be[xt]=At,yt=xt):(Be[yt]=Te,Be[Ge]=At,yt=Ge);else if(xt<Le&&0>r(st,At))Be[yt]=st,Be[xt]=At,yt=xt;else break e}}return Ye}function r(Be,Ye){var At=Be.sortIndex-Ye.sortIndex;return At!==0?At:Be.id-Ye.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var c=[],h=[],m=1,v=null,x=3,E=!1,R=!1,P=!1,z=!1,Q=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function Z(Be){for(var Ye=t(h);Ye!==null;){if(Ye.callback===null)i(h);else if(Ye.startTime<=Be)i(h),Ye.sortIndex=Ye.expirationTime,e(c,Ye);else break;Ye=t(h)}}function J(Be){if(P=!1,Z(Be),!R)if(t(c)!==null)R=!0,$||($=!0,Ie());else{var Ye=t(h);Ye!==null&&je(J,Ye.startTime-Be)}}var $=!1,G=-1,oe=5,ue=-1;function xe(){return z?!0:!(n.unstable_now()-ue<oe)}function ge(){if(z=!1,$){var Be=n.unstable_now();ue=Be;var Ye=!0;try{e:{R=!1,P&&(P=!1,Y(G),G=-1),E=!0;var At=x;try{t:{for(Z(Be),v=t(c);v!==null&&!(v.expirationTime>Be&&xe());){var yt=v.callback;if(typeof yt=="function"){v.callback=null,x=v.priorityLevel;var Le=yt(v.expirationTime<=Be);if(Be=n.unstable_now(),typeof Le=="function"){v.callback=Le,Z(Be),Ye=!0;break t}v===t(c)&&i(c),Z(Be)}else i(c);v=t(c)}if(v!==null)Ye=!0;else{var De=t(h);De!==null&&je(J,De.startTime-Be),Ye=!1}}break e}finally{v=null,x=At,E=!1}Ye=void 0}}finally{Ye?Ie():$=!1}}}var Ie;if(typeof H=="function")Ie=function(){H(ge)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,ke=Me.port2;Me.port1.onmessage=ge,Ie=function(){ke.postMessage(null)}}else Ie=function(){Q(ge,0)};function je(Be,Ye){G=Q(function(){Be(n.unstable_now())},Ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Be){Be.callback=null},n.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<Be?Math.floor(1e3/Be):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(Be){switch(x){case 1:case 2:case 3:var Ye=3;break;default:Ye=x}var At=x;x=Ye;try{return Be()}finally{x=At}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(Be,Ye){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var At=x;x=Be;try{return Ye()}finally{x=At}},n.unstable_scheduleCallback=function(Be,Ye,At){var yt=n.unstable_now();switch(typeof At=="object"&&At!==null?(At=At.delay,At=typeof At=="number"&&0<At?yt+At:yt):At=yt,Be){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=At+Le,Be={id:m++,callback:Ye,priorityLevel:Be,startTime:At,expirationTime:Le,sortIndex:-1},At>yt?(Be.sortIndex=At,e(h,Be),t(c)===null&&Be===t(h)&&(P?(Y(G),G=-1):P=!0,je(J,At-yt))):(Be.sortIndex=Le,e(c,Be),R||E||(R=!0,$||($=!0,Ie()))),Be},n.unstable_shouldYield=xe,n.unstable_wrapCallback=function(Be){var Ye=x;return function(){var At=x;x=Ye;try{return Be.apply(this,arguments)}finally{x=At}}}})(eB)),eB}var QU;function Xoe(){return QU||(QU=1,J6.exports=Zoe()),J6.exports}var tB={exports:{}},FA={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WU;function Joe(){if(WU)return FA;WU=1;var n=Ba();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(c,h,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:c,containerInfo:h,implementation:m}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return FA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,FA.createPortal=function(c,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(c,h,null,m)},FA.flushSync=function(c){var h=s.T,m=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=h,i.p=m,i.d.f()}},FA.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(c,h))},FA.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},FA.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var m=h.as,v=a(m,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?i.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:E}):m==="script"&&i.d.X(c,{crossOrigin:v,integrity:x,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},FA.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=a(h.as,h.crossOrigin);i.d.M(c,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(c)},FA.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,v=a(m,h.crossOrigin);i.d.L(c,m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},FA.preloadModule=function(c,h){if(typeof c=="string")if(h){var m=a(h.as,h.crossOrigin);i.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(c)},FA.requestFormReset=function(c){i.d.r(c)},FA.unstable_batchedUpdates=function(c,h){return c(h)},FA.useFormState=function(c,h,m){return s.H.useFormState(c,h,m)},FA.useFormStatus=function(){return s.H.useHostTransitionStatus()},FA.version="19.2.0",FA}var qU;function $R(){if(qU)return tB.exports;qU=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tB.exports=Joe(),tB.exports}var YU;function ese(){if(YU)return r2;YU=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Xoe(),e=Ba(),t=$R();function i(A){var g="https://react.dev/errors/"+A;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+A+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function o(A){var g=A,_=A;if(A.alternate)for(;g.return;)g=g.return;else{A=g;do g=A,(g.flags&4098)!==0&&(_=g.return),A=g.return;while(A)}return g.tag===3?_:null}function s(A){if(A.tag===13){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function a(A){if(A.tag===31){var g=A.memoizedState;if(g===null&&(A=A.alternate,A!==null&&(g=A.memoizedState)),g!==null)return g.dehydrated}return null}function c(A){if(o(A)!==A)throw Error(i(188))}function h(A){var g=A.alternate;if(!g){if(g=o(A),g===null)throw Error(i(188));return g!==A?null:A}for(var _=A,O=g;;){var j=_.return;if(j===null)break;var V=j.alternate;if(V===null){if(O=j.return,O!==null){_=O;continue}break}if(j.child===V.child){for(V=j.child;V;){if(V===_)return c(j),A;if(V===O)return c(j),g;V=V.sibling}throw Error(i(188))}if(_.return!==O.return)_=j,O=V;else{for(var ve=!1,qe=j.child;qe;){if(qe===_){ve=!0,_=j,O=V;break}if(qe===O){ve=!0,O=j,_=V;break}qe=qe.sibling}if(!ve){for(qe=V.child;qe;){if(qe===_){ve=!0,_=V,O=j;break}if(qe===O){ve=!0,O=V,_=j;break}qe=qe.sibling}if(!ve)throw Error(i(189))}}if(_.alternate!==O)throw Error(i(190))}if(_.tag!==3)throw Error(i(188));return _.stateNode.current===_?A:g}function m(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A;for(A=A.child;A!==null;){if(g=m(A),g!==null)return g;A=A.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),H=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function Ie(A){return A===null||typeof A!="object"?null:(A=ge&&A[ge]||A["@@iterator"],typeof A=="function"?A:null)}var Me=Symbol.for("react.client.reference");function ke(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Me?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case P:return"Fragment";case Q:return"Profiler";case z:return"StrictMode";case J:return"Suspense";case $:return"SuspenseList";case ue:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case R:return"Portal";case H:return A.displayName||"Context";case Y:return(A._context.displayName||"Context")+".Consumer";case Z:var g=A.render;return A=A.displayName,A||(A=g.displayName||g.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case G:return g=A.displayName||null,g!==null?g:ke(A.type)||"Memo";case oe:g=A._payload,A=A._init;try{return ke(A(g))}catch{}}return null}var je=Array.isArray,Be=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,At={pending:!1,data:null,method:null,action:null},yt=[],Le=-1;function De(A){return{current:A}}function Ge(A){0>Le||(A.current=yt[Le],yt[Le]=null,Le--)}function Te(A,g){Le++,yt[Le]=A.current,A.current=g}var xt=De(null),st=De(null),Tt=De(null),Lt=De(null);function Ue(A,g){switch(Te(Tt,g),Te(st,A),Te(xt,null),g.nodeType){case 9:case 11:A=(A=g.documentElement)&&(A=A.namespaceURI)?bg(A):0;break;default:if(A=g.tagName,g=g.namespaceURI)g=bg(g),A=$a(g,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}Ge(xt),Te(xt,A)}function Oe(){Ge(xt),Ge(st),Ge(Tt)}function Ee(A){A.memoizedState!==null&&Te(Lt,A);var g=xt.current,_=$a(g,A.type);g!==_&&(Te(st,A),Te(xt,_))}function Ve(A){st.current===A&&(Ge(xt),Ge(st)),Lt.current===A&&(Ge(Lt),Zt._currentValue=At)}var mt,pt;function Ct(A){if(mt===void 0)try{throw Error()}catch(_){var g=_.stack.trim().match(/\n( *(at )?)/);mt=g&&g[1]||"",pt=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mt+A+pt}var Rt=!1;function Kt(A,g){if(!A||Rt)return"";Rt=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(g){var pn=function(){throw Error()};if(Object.defineProperty(pn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pn,[])}catch(rn){var Xt=rn}Reflect.construct(A,[],pn)}else{try{pn.call()}catch(rn){Xt=rn}A.call(pn.prototype)}}else{try{throw Error()}catch(rn){Xt=rn}(pn=A())&&typeof pn.catch=="function"&&pn.catch(function(){})}}catch(rn){if(rn&&Xt&&typeof rn.stack=="string")return[rn.stack,Xt.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=O.DetermineComponentFrameRoot(),ve=V[0],qe=V[1];if(ve&&qe){var bt=ve.split(`
`),Vt=qe.split(`
`);for(j=O=0;O<bt.length&&!bt[O].includes("DetermineComponentFrameRoot");)O++;for(;j<Vt.length&&!Vt[j].includes("DetermineComponentFrameRoot");)j++;if(O===bt.length||j===Vt.length)for(O=bt.length-1,j=Vt.length-1;1<=O&&0<=j&&bt[O]!==Vt[j];)j--;for(;1<=O&&0<=j;O--,j--)if(bt[O]!==Vt[j]){if(O!==1||j!==1)do if(O--,j--,0>j||bt[O]!==Vt[j]){var un=`
`+bt[O].replace(" at new "," at ");return A.displayName&&un.includes("<anonymous>")&&(un=un.replace("<anonymous>",A.displayName)),un}while(1<=O&&0<=j);break}}}finally{Rt=!1,Error.prepareStackTrace=_}return(_=A?A.displayName||A.name:"")?Ct(_):""}function on(A,g){switch(A.tag){case 26:case 27:case 5:return Ct(A.type);case 16:return Ct("Lazy");case 13:return A.child!==g&&g!==null?Ct("Suspense Fallback"):Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 15:return Kt(A.type,!1);case 11:return Kt(A.type.render,!1);case 1:return Kt(A.type,!0);case 31:return Ct("Activity");default:return""}}function qn(A){try{var g="",_=null;do g+=on(A,_),_=A,A=A.return;while(A);return g}catch(O){return`
Error generating stack: `+O.message+`
`+O.stack}}var Qn=Object.prototype.hasOwnProperty,xi=n.unstable_scheduleCallback,Kn=n.unstable_cancelCallback,Un=n.unstable_shouldYield,Cn=n.unstable_requestPaint,ei=n.unstable_now,Dn=n.unstable_getCurrentPriorityLevel,It=n.unstable_ImmediatePriority,Ce=n.unstable_UserBlockingPriority,re=n.unstable_NormalPriority,le=n.unstable_LowPriority,he=n.unstable_IdlePriority,se=n.log,Ae=n.unstable_setDisableYieldValue,be=null,We=null;function et(A){if(typeof se=="function"&&Ae(A),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(be,A)}catch{}}var Pe=Math.clz32?Math.clz32:at,Ze=Math.log,y=Math.LN2;function at(A){return A>>>=0,A===0?32:31-(Ze(A)/y|0)|0}var Pt=256,Mt=262144,en=4194304;function dt(A){var g=A&42;if(g!==0)return g;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return A&261888;case 262144:case 524288:case 1048576:case 2097152:return A&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Zn(A,g,_){var O=A.pendingLanes;if(O===0)return 0;var j=0,V=A.suspendedLanes,ve=A.pingedLanes;A=A.warmLanes;var qe=O&134217727;return qe!==0?(O=qe&~V,O!==0?j=dt(O):(ve&=qe,ve!==0?j=dt(ve):_||(_=qe&~A,_!==0&&(j=dt(_))))):(qe=O&~V,qe!==0?j=dt(qe):ve!==0?j=dt(ve):_||(_=O&~A,_!==0&&(j=dt(_)))),j===0?0:g!==0&&g!==j&&(g&V)===0&&(V=j&-j,_=g&-g,V>=_||V===32&&(_&4194048)!==0)?g:j}function gi(A,g){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&g)===0}function Tn(A,g){switch(A){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var A=en;return en<<=1,(en&62914560)===0&&(en=4194304),A}function si(A){for(var g=[],_=0;31>_;_++)g.push(A);return g}function ir(A,g){A.pendingLanes|=g,g!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function Di(A,g,_,O,j,V){var ve=A.pendingLanes;A.pendingLanes=_,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=_,A.entangledLanes&=_,A.errorRecoveryDisabledLanes&=_,A.shellSuspendCounter=0;var qe=A.entanglements,bt=A.expirationTimes,Vt=A.hiddenUpdates;for(_=ve&~_;0<_;){var un=31-Pe(_),pn=1<<un;qe[un]=0,bt[un]=-1;var Xt=Vt[un];if(Xt!==null)for(Vt[un]=null,un=0;un<Xt.length;un++){var rn=Xt[un];rn!==null&&(rn.lane&=-536870913)}_&=~pn}O!==0&&gr(A,O,0),V!==0&&j===0&&A.tag!==0&&(A.suspendedLanes|=V&~(ve&~g))}function gr(A,g,_){A.pendingLanes|=g,A.suspendedLanes&=~g;var O=31-Pe(g);A.entangledLanes|=g,A.entanglements[O]=A.entanglements[O]|1073741824|_&261930}function Oi(A,g){var _=A.entangledLanes|=g;for(A=A.entanglements;_;){var O=31-Pe(_),j=1<<O;j&g|A[O]&g&&(A[O]|=g),_&=~j}}function Ri(A,g){var _=g&-g;return _=(_&42)!==0?1:cr(_),(_&(A.suspendedLanes|g))!==0?0:_}function cr(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function nn(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function Pi(){var A=Ye.p;return A!==0?A:(A=window.event,A===void 0?32:wl(A.type))}function $o(A,g){var _=Ye.p;try{return Ye.p=A,g()}finally{Ye.p=_}}var Ks=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Ks,mn="__reactProps$"+Ks,Ni="__reactContainer$"+Ks,ri="__reactEvents$"+Ks,nl="__reactListeners$"+Ks,Xc="__reactHandles$"+Ks,kl="__reactResources$"+Ks,Ki="__reactMarker$"+Ks;function Jl(A){delete A[Vr],delete A[mn],delete A[ri],delete A[nl],delete A[Xc]}function po(A){var g=A[Vr];if(g)return g;for(var _=A.parentNode;_;){if(g=_[Ni]||_[Vr]){if(_=g.alternate,g.child!==null||_!==null&&_.child!==null)for(A=dy(A);A!==null;){if(_=A[Vr])return _;A=dy(A)}return g}A=_,_=A.parentNode}return null}function Oa(A){if(A=A[Vr]||A[Ni]){var g=A.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return A}return null}function eu(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A.stateNode;throw Error(i(33))}function da(A){var g=A[kl];return g||(g=A[kl]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Ho(A){A[Ki]=!0}var Tl=new Set,Zo={};function Wi(A,g){Rl(A,g),Rl(A+"Capture",g)}function Rl(A,g){for(Zo[A]=g,A=0;A<g.length;A++)Tl.add(g[A])}var rs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dl={},tu={};function Eu(A){return Qn.call(tu,A)?!0:Qn.call(Dl,A)?!1:rs.test(A)?tu[A]=!0:(Dl[A]=!0,!1)}function Jc(A,g,_){if(Eu(g))if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":A.removeAttribute(g);return;case"boolean":var O=g.toLowerCase().slice(0,5);if(O!=="data-"&&O!=="aria-"){A.removeAttribute(g);return}}A.setAttribute(g,""+_)}}function tc(A,g,_){if(_===null)A.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(g);return}A.setAttribute(g,""+_)}}function ml(A,g,_,O){if(O===null)A.removeAttribute(_);else{switch(typeof O){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(_);return}A.setAttributeNS(g,_,""+O)}}function Oo(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function nc(A){var g=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function nu(A,g,_){var O=Object.getOwnPropertyDescriptor(A.constructor.prototype,g);if(!A.hasOwnProperty(g)&&typeof O<"u"&&typeof O.get=="function"&&typeof O.set=="function"){var j=O.get,V=O.set;return Object.defineProperty(A,g,{configurable:!0,get:function(){return j.call(this)},set:function(ve){_=""+ve,V.call(this,ve)}}),Object.defineProperty(A,g,{enumerable:O.enumerable}),{getValue:function(){return _},setValue:function(ve){_=""+ve},stopTracking:function(){A._valueTracker=null,delete A[g]}}}}function Ec(A){if(!A._valueTracker){var g=nc(A)?"checked":"value";A._valueTracker=nu(A,g,""+A[g])}}function ic(A){if(!A)return!1;var g=A._valueTracker;if(!g)return!0;var _=g.getValue(),O="";return A&&(O=nc(A)?A.checked?"true":"false":A.value),A=O,A!==_?(g.setValue(A),!0):!1}function Bc(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Dh=/[\n"\\]/g;function fa(A){return A.replace(Dh,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function rc(A,g,_,O,j,V,ve,qe){A.name="",ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"?A.type=ve:A.removeAttribute("type"),g!=null?ve==="number"?(g===0&&A.value===""||A.value!=g)&&(A.value=""+Oo(g)):A.value!==""+Oo(g)&&(A.value=""+Oo(g)):ve!=="submit"&&ve!=="reset"||A.removeAttribute("value"),g!=null?eA(A,ve,Oo(g)):_!=null?eA(A,ve,Oo(_)):O!=null&&A.removeAttribute("value"),j==null&&V!=null&&(A.defaultChecked=!!V),j!=null&&(A.checked=j&&typeof j!="function"&&typeof j!="symbol"),qe!=null&&typeof qe!="function"&&typeof qe!="symbol"&&typeof qe!="boolean"?A.name=""+Oo(qe):A.removeAttribute("name")}function il(A,g,_,O,j,V,ve,qe){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(A.type=V),g!=null||_!=null){if(!(V!=="submit"&&V!=="reset"||g!=null)){Ec(A);return}_=_!=null?""+Oo(_):"",g=g!=null?""+Oo(g):_,qe||g===A.value||(A.value=g),A.defaultValue=g}O=O??j,O=typeof O!="function"&&typeof O!="symbol"&&!!O,A.checked=qe?A.checked:!!O,A.defaultChecked=!!O,ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"&&(A.name=ve),Ec(A)}function eA(A,g,_){g==="number"&&Bc(A.ownerDocument)===A||A.defaultValue===""+_||(A.defaultValue=""+_)}function iu(A,g,_,O){if(A=A.options,g){g={};for(var j=0;j<_.length;j++)g["$"+_[j]]=!0;for(_=0;_<A.length;_++)j=g.hasOwnProperty("$"+A[_].value),A[_].selected!==j&&(A[_].selected=j),j&&O&&(A[_].defaultSelected=!0)}else{for(_=""+Oo(_),g=null,j=0;j<A.length;j++){if(A[j].value===_){A[j].selected=!0,O&&(A[j].defaultSelected=!0);return}g!==null||A[j].disabled||(g=A[j])}g!==null&&(g.selected=!0)}}function Fa(A,g,_){if(g!=null&&(g=""+Oo(g),g!==A.value&&(A.value=g),_==null)){A.defaultValue!==g&&(A.defaultValue=g);return}A.defaultValue=_!=null?""+Oo(_):""}function Ms(A,g,_,O){if(g==null){if(O!=null){if(_!=null)throw Error(i(92));if(je(O)){if(1<O.length)throw Error(i(93));O=O[0]}_=O}_==null&&(_=""),g=_}_=Oo(g),A.defaultValue=_,O=A.textContent,O===_&&O!==""&&O!==null&&(A.value=O),Ec(A)}function Io(A,g){if(g){var _=A.firstChild;if(_&&_===A.lastChild&&_.nodeType===3){_.nodeValue=g;return}}A.textContent=g}var ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ou(A,g,_){var O=g.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?O?A.setProperty(g,""):g==="float"?A.cssFloat="":A[g]="":O?A.setProperty(g,_):typeof _!="number"||_===0||ru.has(g)?g==="float"?A.cssFloat=_:A[g]=(""+_).trim():A[g]=_+"px"}function Us(A,g,_){if(g!=null&&typeof g!="object")throw Error(i(62));if(A=A.style,_!=null){for(var O in _)!_.hasOwnProperty(O)||g!=null&&g.hasOwnProperty(O)||(O.indexOf("--")===0?A.setProperty(O,""):O==="float"?A.cssFloat="":A[O]="");for(var j in g)O=g[j],g.hasOwnProperty(j)&&_[j]!==O&&ou(A,j,O)}else for(var V in g)g.hasOwnProperty(V)&&ou(A,V,g[V])}function ja(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ji=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gi(A){return rl.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}function Na(){}var Xo=null;function su(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Ko=null,oo=null;function ws(A){var g=Oa(A);if(g&&(A=g.stateNode)){var _=A[mn]||null;e:switch(A=g.stateNode,g.type){case"input":if(rc(A,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),g=_.name,_.type==="radio"&&g!=null){for(_=A;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+fa(""+g)+'"][type="radio"]'),g=0;g<_.length;g++){var O=_[g];if(O!==A&&O.form===A.form){var j=O[mn]||null;if(!j)throw Error(i(90));rc(O,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(g=0;g<_.length;g++)O=_[g],O.form===A.form&&ic(O)}break e;case"textarea":Fa(A,_.value,_.defaultValue);break e;case"select":g=_.value,g!=null&&iu(A,!!_.multiple,g,!1)}}}var Mo=!1;function _o(A,g,_){if(Mo)return A(g,_);Mo=!0;try{var O=A(g);return O}finally{if(Mo=!1,(Ko!==null||oo!==null)&&(V1(),Ko&&(g=Ko,A=oo,oo=Ko=null,ws(g),A)))for(g=0;g<A.length;g++)ws(A[g])}}function au(A,g){var _=A.stateNode;if(_===null)return null;var O=_[mn]||null;if(O===null)return null;_=O[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(A=A.type,O=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!O;break e;default:A=!1}if(A)return null;if(_&&typeof _!="function")throw Error(i(231,g,typeof _));return _}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),os=!1;if(mo)try{var so={};Object.defineProperty(so,"passive",{get:function(){os=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{os=!1}var ol=null,Pl=null,ji=null;function ki(){if(ji)return ji;var A,g=Pl,_=g.length,O,j="value"in ol?ol.value:ol.textContent,V=j.length;for(A=0;A<_&&g[A]===j[A];A++);var ve=_-A;for(O=1;O<=ve&&g[_-O]===j[V-O];O++);return ji=j.slice(A,1<O?1-O:void 0)}function X(A){var g=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&g===13&&(A=13)):A=g,A===10&&(A=13),32<=A||A===13?A:0}function me(){return!0}function Ne(){return!1}function wt(A){function g(_,O,j,V,ve){this._reactName=_,this._targetInst=j,this.type=O,this.nativeEvent=V,this.target=ve,this.currentTarget=null;for(var qe in A)A.hasOwnProperty(qe)&&(_=A[qe],this[qe]=_?_(V):V[qe]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?me:Ne,this.isPropagationStopped=Ne,this}return v(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=me)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=me)},persist:function(){},isPersistent:me}),g}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bn=wt(hn),li=v({},hn,{view:0,detail:0}),Ui=wt(li),wi,Si,fr,ao=v({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ph,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==fr&&(fr&&A.type==="mousemove"?(wi=A.screenX-fr.screenX,Si=A.screenY-fr.screenY):Si=wi=0,fr=A),wi)},movementY:function(A){return"movementY"in A?A.movementY:Si}}),br=wt(ao),yr=v({},ao,{dataTransfer:0}),eo=wt(yr),Uo=v({},li,{relatedTarget:0}),Or=wt(Uo),Ss=v({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),ZA=wt(Ss),gl=v({},hn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),kr=wt(gl),_1=v({},hn,{data:0}),lu=wt(_1),uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ea={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yA(A){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(A):(A=ea[A])?!!g[A]:!1}function Ph(){return yA}var Es=v({},li,{key:function(A){if(A.key){var g=uu[A.key]||A.key;if(g!=="Unidentified")return g}return A.type==="keypress"?(A=X(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Rm[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ph,charCode:function(A){return A.type==="keypress"?X(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?X(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Bu=wt(Es),Bf=v({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xp=wt(Bf),oc=v({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ph}),x1=wt(oc),Dm=v({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),pv=wt(Dm),Dd=v({},ao,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Of=wt(Dd),XA=v({},hn,{newState:0,oldState:0}),h0=wt(XA),Pm=[9,13,27,32],Kl=mo&&"CompositionEvent"in window,Pd=null;mo&&"documentMode"in document&&(Pd=document.documentMode);var If=mo&&"TextEvent"in window&&!Pd,Kh=mo&&(!Kl||Pd&&8<Pd&&11>=Pd),kf=" ",Mp=!1;function Kd(A,g){switch(A){case"keyup":return Pm.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M1(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Oc=!1;function sc(A,g){switch(A){case"compositionend":return M1(g);case"keypress":return g.which!==32?null:(Mp=!0,kf);case"textInput":return A=g.data,A===kf&&Mp?null:A;default:return null}}function Km(A,g){if(Oc)return A==="compositionend"||!Kl&&Kd(A,g)?(A=ki(),ji=Pl=ol=null,Oc=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Kh&&g.locale!=="ko"?null:g.data;default:return null}}var Tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wp(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g==="input"?!!Tf[A.type]:g==="textarea"}function Rf(A,g,_,O){Ko?oo?oo.push(O):oo=[O]:Ko=O,g=mg(g,"onChange"),0<g.length&&(_=new Bn("onChange","change",null,_,O),A.push({event:_,listeners:g}))}var Df=null,Pf=null;function w1(A){MC(A,0)}function Sp(A){var g=eu(A);if(ic(g))return A}function tA(A,g){if(A==="change")return g}var Uh=!1;if(mo){var Um;if(mo){var Ud="oninput"in document;if(!Ud){var Lm=document.createElement("div");Lm.setAttribute("oninput","return;"),Ud=typeof Lm.oninput=="function"}Um=Ud}else Um=!1;Uh=Um&&(!document.documentMode||9<document.documentMode)}function Lh(){Df&&(Df.detachEvent("onpropertychange",vA),Pf=Df=null)}function vA(A){if(A.propertyName==="value"&&Sp(Pf)){var g=[];Rf(g,Pf,A,su(A)),_o(w1,g)}}function zm(A,g,_){A==="focusin"?(Lh(),Df=g,Pf=_,Df.attachEvent("onpropertychange",vA)):A==="focusout"&&Lh()}function S1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Sp(Pf)}function d0(A,g){if(A==="click")return Sp(g)}function f0(A,g){if(A==="input"||A==="change")return Sp(g)}function zh(A,g){return A===g&&(A!==0||1/A===1/g)||A!==A&&g!==g}var Ls=typeof Object.is=="function"?Object.is:zh;function JA(A,g){if(Ls(A,g))return!0;if(typeof A!="object"||A===null||typeof g!="object"||g===null)return!1;var _=Object.keys(A),O=Object.keys(g);if(_.length!==O.length)return!1;for(O=0;O<_.length;O++){var j=_[O];if(!Qn.call(g,j)||!Ls(A[j],g[j]))return!1}return!0}function nA(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Fm(A,g){var _=nA(A);A=0;for(var O;_;){if(_.nodeType===3){if(O=A+_.textContent.length,A<=g&&O>=g)return{node:_,offset:g-A};A=O}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=nA(_)}}function jm(A,g){return A&&g?A===g?!0:A&&A.nodeType===3?!1:g&&g.nodeType===3?jm(A,g.parentNode):"contains"in A?A.contains(g):A.compareDocumentPosition?!!(A.compareDocumentPosition(g)&16):!1:!1}function Nm(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var g=Bc(A.document);g instanceof A.HTMLIFrameElement;){try{var _=typeof g.contentWindow.location.href=="string"}catch{_=!1}if(_)A=g.contentWindow;else break;g=Bc(A.document)}return g}function Gm(A){var g=A&&A.nodeName&&A.nodeName.toLowerCase();return g&&(g==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||g==="textarea"||A.contentEditable==="true")}var Nr=mo&&"documentMode"in document&&11>=document.documentMode,kt=null,sn=null,tn=null,hi=!1;function vr(A,g,_){var O=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;hi||kt==null||kt!==Bc(O)||(O=kt,"selectionStart"in O&&Gm(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),tn&&JA(tn,O)||(tn=O,O=mg(sn,"onSelect"),0<O.length&&(g=new Bn("onSelect","select",null,g,_),A.push({event:g,listeners:O}),g.target=kt)))}function $r(A,g){var _={};return _[A.toLowerCase()]=g.toLowerCase(),_["Webkit"+A]="webkit"+g,_["Moz"+A]="moz"+g,_}var Bs={animationend:$r("Animation","AnimationEnd"),animationiteration:$r("Animation","AnimationIteration"),animationstart:$r("Animation","AnimationStart"),transitionrun:$r("Transition","TransitionRun"),transitionstart:$r("Transition","TransitionStart"),transitioncancel:$r("Transition","TransitionCancel"),transitionend:$r("Transition","TransitionEnd")},jo={},Ep={};mo&&(Ep=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function bA(A){if(jo[A])return jo[A];if(!Bs[A])return A;var g=Bs[A],_;for(_ in g)if(g.hasOwnProperty(_)&&_ in Ep)return jo[A]=g[_];return A}var Ul=bA("animationend"),Fh=bA("animationiteration"),Qm=bA("animationstart"),Ic=bA("transitionrun"),jh=bA("transitionstart"),eh=bA("transitioncancel"),Tr=bA("transitionend"),p0=new Map,Bp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bp.push("scrollEnd");function Ll(A,g){p0.set(A,g),Wi(g,[A])}var CA=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},cu=[],th=0,_A=0;function Ou(){for(var A=th,g=_A=th=0;g<A;){var _=cu[g];cu[g++]=null;var O=cu[g];cu[g++]=null;var j=cu[g];cu[g++]=null;var V=cu[g];if(cu[g++]=null,O!==null&&j!==null){var ve=O.pending;ve===null?j.next=j:(j.next=ve.next,ve.next=j),O.pending=j}V!==0&&Wm(_,j,V)}}function Nh(A,g,_,O){cu[th++]=A,cu[th++]=g,cu[th++]=_,cu[th++]=O,_A|=O,A.lanes|=O,A=A.alternate,A!==null&&(A.lanes|=O)}function nh(A,g,_,O){return Nh(A,g,_,O),Ld(A)}function Au(A,g){return Nh(A,null,null,g),Ld(A)}function Wm(A,g,_){A.lanes|=_;var O=A.alternate;O!==null&&(O.lanes|=_);for(var j=!1,V=A.return;V!==null;)V.childLanes|=_,O=V.alternate,O!==null&&(O.childLanes|=_),V.tag===22&&(A=V.stateNode,A===null||A._visibility&1||(j=!0)),A=V,V=V.return;return A.tag===3?(V=A.stateNode,j&&g!==null&&(j=31-Pe(_),A=V.hiddenUpdates,O=A[j],O===null?A[j]=[g]:O.push(g),g.lane=_|536870912),V):null}function Ld(A){if(50<sa)throw sa=0,I0=null,Error(i(185));for(var g=A.return;g!==null;)A=g,g=A.return;return A.tag===3?A.stateNode:null}var lr={};function zd(A,g,_,O){this.tag=A,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yl(A,g,_,O){return new zd(A,g,_,O)}function xA(A){return A=A.prototype,!(!A||!A.isReactComponent)}function zl(A,g){var _=A.alternate;return _===null?(_=yl(A.tag,g,A.key,A.mode),_.elementType=A.elementType,_.type=A.type,_.stateNode=A.stateNode,_.alternate=A,A.alternate=_):(_.pendingProps=g,_.type=A.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=A.flags&65011712,_.childLanes=A.childLanes,_.lanes=A.lanes,_.child=A.child,_.memoizedProps=A.memoizedProps,_.memoizedState=A.memoizedState,_.updateQueue=A.updateQueue,g=A.dependencies,_.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},_.sibling=A.sibling,_.index=A.index,_.ref=A.ref,_.refCleanup=A.refCleanup,_}function m0(A,g){A.flags&=65011714;var _=A.alternate;return _===null?(A.childLanes=0,A.lanes=g,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=_.childLanes,A.lanes=_.lanes,A.child=_.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=_.memoizedProps,A.memoizedState=_.memoizedState,A.updateQueue=_.updateQueue,A.type=_.type,g=_.dependencies,A.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),A}function qm(A,g,_,O,j,V){var ve=0;if(O=A,typeof A=="function")xA(A)&&(ve=1);else if(typeof A=="string")ve=we(A,_,xt.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case ue:return A=yl(31,_,g,j),A.elementType=ue,A.lanes=V,A;case P:return Gh(_.children,j,V,g);case z:ve=8,j|=24;break;case Q:return A=yl(12,_,g,j|2),A.elementType=Q,A.lanes=V,A;case J:return A=yl(13,_,g,j),A.elementType=J,A.lanes=V,A;case $:return A=yl(19,_,g,j),A.elementType=$,A.lanes=V,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case H:ve=10;break e;case Y:ve=9;break e;case Z:ve=11;break e;case G:ve=14;break e;case oe:ve=16,O=null;break e}ve=29,_=Error(i(130,A===null?"null":typeof A,"")),O=null}return g=yl(ve,_,g,j),g.elementType=A,g.type=O,g.lanes=V,g}function Gh(A,g,_,O){return A=yl(7,A,O,g),A.lanes=_,A}function ih(A,g,_){return A=yl(6,A,null,g),A.lanes=_,A}function Qh(A){var g=yl(18,null,null,0);return g.stateNode=A,g}function Wh(A,g,_){return g=yl(4,A.children!==null?A.children:[],A.key,g),g.lanes=_,g.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},g}var Op=new WeakMap;function Fl(A,g){if(typeof A=="object"&&A!==null){var _=Op.get(A);return _!==void 0?_:(g={value:A,source:g,stack:qn(g)},Op.set(A,g),g)}return{value:A,source:g,stack:qn(g)}}var qh=[],Fd=0,ps=null,zs=0,hu=[],vl=0,kc=null,iA=1,bl="";function ac(A,g){qh[Fd++]=zs,qh[Fd++]=ps,ps=A,zs=g}function Ip(A,g,_){hu[vl++]=iA,hu[vl++]=bl,hu[vl++]=kc,kc=A;var O=iA;A=bl;var j=32-Pe(O)-1;O&=~(1<<j),_+=1;var V=32-Pe(g)+j;if(30<V){var ve=j-j%5;V=(O&(1<<ve)-1).toString(32),O>>=ve,j-=ve,iA=1<<32-Pe(g)+j|_<<j|O,bl=V+A}else iA=1<<V|_<<j|O,bl=A}function rA(A){A.return!==null&&(ac(A,1),Ip(A,1,0))}function rh(A){for(;A===ps;)ps=qh[--Fd],qh[Fd]=null,zs=qh[--Fd],qh[Fd]=null;for(;A===kc;)kc=hu[--vl],hu[vl]=null,bl=hu[--vl],hu[vl]=null,iA=hu[--vl],hu[vl]=null}function Yh(A,g){hu[vl++]=iA,hu[vl++]=bl,hu[vl++]=kc,iA=g.id,bl=g.overflow,kc=A}var ta=null,lo=null,Gr=!1,MA=null,du=!1,ss=Error(i(519));function Iu(A){var g=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oA(Fl(g,A)),ss}function jl(A){var g=A.stateNode,_=A.type,O=A.memoizedProps;switch(g[Vr]=A,g[mn]=O,_){case"dialog":Ao("cancel",g),Ao("close",g);break;case"iframe":case"object":case"embed":Ao("load",g);break;case"video":case"audio":for(_=0;_<L0.length;_++)Ao(L0[_],g);break;case"source":Ao("error",g);break;case"img":case"image":case"link":Ao("error",g),Ao("load",g);break;case"details":Ao("toggle",g);break;case"input":Ao("invalid",g),il(g,O.value,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name,!0);break;case"select":Ao("invalid",g);break;case"textarea":Ao("invalid",g),Ms(g,O.value,O.defaultValue,O.children)}_=O.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||g.textContent===""+_||O.suppressHydrationWarning===!0||Gv(g.textContent,_)?(O.popover!=null&&(Ao("beforetoggle",g),Ao("toggle",g)),O.onScroll!=null&&Ao("scroll",g),O.onScrollEnd!=null&&Ao("scrollend",g),O.onClick!=null&&(g.onclick=Na),g=!0):g=!1,g||Iu(A,!0)}function Vh(A){for(ta=A.return;ta;)switch(ta.tag){case 5:case 31:case 13:du=!1;return;case 27:case 3:du=!0;return;default:ta=ta.return}}function wA(A){if(A!==ta)return!1;if(!Gr)return Vh(A),Gr=!0,!1;var g=A.tag,_;if((_=g!==3&&g!==27)&&((_=g===5)&&(_=A.type,_=!(_!=="form"&&_!=="button")||of(A.type,A.memoizedProps)),_=!_),_&&lo&&Iu(A),Vh(A),g===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));lo=qv(A)}else if(g===31){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));lo=qv(A)}else g===27?(g=lo,rr(A.type)?(A=hy,hy=null,lo=A):lo=g):lo=ta?jc(A.stateNode.nextSibling):null;return!0}function Qe(){lo=ta=null,Gr=!1}function lc(){var A=MA;return A!==null&&(fc===null?fc=A:fc.push.apply(fc,A),MA=null),A}function oA(A){MA===null?MA=[A]:MA.push(A)}var Ga=De(null),Ar=null,SA=null;function EA(A,g,_){Te(Ga,g._currentValue),g._currentValue=_}function sA(A){A._currentValue=Ga.current,Ge(Ga)}function BA(A,g,_){for(;A!==null;){var O=A.alternate;if((A.childLanes&g)!==g?(A.childLanes|=g,O!==null&&(O.childLanes|=g)):O!==null&&(O.childLanes&g)!==g&&(O.childLanes|=g),A===_)break;A=A.return}}function kp(A,g,_,O){var j=A.child;for(j!==null&&(j.return=A);j!==null;){var V=j.dependencies;if(V!==null){var ve=j.child;V=V.firstContext;e:for(;V!==null;){var qe=V;V=j;for(var bt=0;bt<g.length;bt++)if(qe.context===g[bt]){V.lanes|=_,qe=V.alternate,qe!==null&&(qe.lanes|=_),BA(V.return,_,A),O||(ve=null);break e}V=qe.next}}else if(j.tag===18){if(ve=j.return,ve===null)throw Error(i(341));ve.lanes|=_,V=ve.alternate,V!==null&&(V.lanes|=_),BA(ve,_,A),ve=null}else ve=j.child;if(ve!==null)ve.return=j;else for(ve=j;ve!==null;){if(ve===A){ve=null;break}if(j=ve.sibling,j!==null){j.return=ve.return,ve=j;break}ve=ve.return}j=ve}}function uc(A,g,_,O){A=null;for(var j=g,V=!1;j!==null;){if(!V){if((j.flags&524288)!==0)V=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var ve=j.alternate;if(ve===null)throw Error(i(387));if(ve=ve.memoizedProps,ve!==null){var qe=j.type;Ls(j.pendingProps.value,ve.value)||(A!==null?A.push(qe):A=[qe])}}else if(j===Lt.current){if(ve=j.alternate,ve===null)throw Error(i(387));ve.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(A!==null?A.push(Zt):A=[Zt])}j=j.return}A!==null&&kp(g,A,_,O),g.flags|=262144}function oh(A){for(A=A.firstContext;A!==null;){if(!Ls(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function $h(A){Ar=A,SA=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function sl(A){return g0(Ar,A)}function cc(A,g){return Ar===null&&$h(A),g0(A,g)}function g0(A,g){var _=g._currentValue;if(g={context:g,memoizedValue:_,next:null},SA===null){if(A===null)throw Error(i(308));SA=g,A.dependencies={lanes:0,firstContext:g},A.flags|=524288}else SA=SA.next=g;return _}var E1=typeof AbortController<"u"?AbortController:function(){var A=[],g=this.signal={aborted:!1,addEventListener:function(_,O){A.push(O)}};this.abort=function(){g.aborted=!0,A.forEach(function(_){return _()})}},B1=n.unstable_scheduleCallback,Kf=n.unstable_NormalPriority,as={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fs(){return{controller:new E1,data:new Map,refCount:0}}function Ia(A){A.refCount--,A.refCount===0&&B1(Kf,function(){A.controller.abort()})}var Nl=null,Ym=0,Gl=0,fu=null;function Hh(A,g){if(Nl===null){var _=Nl=[];Ym=0,Gl=Yl(),fu={status:"pending",value:void 0,then:function(O){_.push(O)}}}return Ym++,g.then(Vm,Vm),g}function Vm(){if(--Ym===0&&Nl!==null){fu!==null&&(fu.status="fulfilled");var A=Nl;Nl=null,Gl=0,fu=null;for(var g=0;g<A.length;g++)(0,A[g])()}}function mv(A,g){var _=[],O={status:"pending",value:null,reason:null,then:function(j){_.push(j)}};return A.then(function(){O.status="fulfilled",O.value=g;for(var j=0;j<_.length;j++)(0,_[j])(g)},function(j){for(O.status="rejected",O.reason=j,j=0;j<_.length;j++)(0,_[j])(void 0)}),O}var ku=Be.S;Be.S=function(A,g){gC=ei(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Hh(A,g),ku!==null&&ku(A,g)};var Zh=De(null);function aA(){var A=Zh.current;return A!==null?A:cs.pooledCache}function Tc(A,g){g===null?Te(Zh,Zh.current):Te(Zh,g.pool)}function Hn(){var A=aA();return A===null?null:{parent:as._currentValue,pool:A}}var jd=Error(i(460)),OA=Error(i(474)),Uf=Error(i(542)),Xh={then:function(){}};function sh(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Lf(A,g,_){switch(_=A[_],_===void 0?A.push(g):_!==g&&(g.then(Na,Na),g=_),g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,zf(A),A;default:if(typeof g.status=="string")g.then(Na,Na);else{if(A=cs,A!==null&&100<A.shellSuspendCounter)throw Error(i(482));A=g,A.status="pending",A.then(function(O){if(g.status==="pending"){var j=g;j.status="fulfilled",j.value=O}},function(O){if(g.status==="pending"){var j=g;j.status="rejected",j.reason=O}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,zf(A),A}throw pu=g,jd}}function er(A){try{var g=A._init;return g(A._payload)}catch(_){throw _!==null&&typeof _=="object"&&typeof _.then=="function"?(pu=_,jd):_}}var pu=null;function y0(){if(pu===null)throw Error(i(459));var A=pu;return pu=null,A}function zf(A){if(A===jd||A===Uf)throw Error(i(483))}var Nd=null,Tu=0;function ah(A){var g=Tu;return Tu+=1,Nd===null&&(Nd=[]),Lf(Nd,A,g)}function Ru(A,g){g=g.props.ref,A.ref=g!==void 0?g:null}function Ql(A,g){throw g.$$typeof===x?Error(i(525)):(A=Object.prototype.toString.call(g),Error(i(31,A==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":A)))}function v0(A){function g(Dt,Et){if(A){var qt=Dt.deletions;qt===null?(Dt.deletions=[Et],Dt.flags|=16):qt.push(Et)}}function _(Dt,Et){if(!A)return null;for(;Et!==null;)g(Dt,Et),Et=Et.sibling;return null}function O(Dt){for(var Et=new Map;Dt!==null;)Dt.key!==null?Et.set(Dt.key,Dt):Et.set(Dt.index,Dt),Dt=Dt.sibling;return Et}function j(Dt,Et){return Dt=zl(Dt,Et),Dt.index=0,Dt.sibling=null,Dt}function V(Dt,Et,qt){return Dt.index=qt,A?(qt=Dt.alternate,qt!==null?(qt=qt.index,qt<Et?(Dt.flags|=67108866,Et):qt):(Dt.flags|=67108866,Et)):(Dt.flags|=1048576,Et)}function ve(Dt){return A&&Dt.alternate===null&&(Dt.flags|=67108866),Dt}function qe(Dt,Et,qt,dn){return Et===null||Et.tag!==6?(Et=ih(qt,Dt.mode,dn),Et.return=Dt,Et):(Et=j(Et,qt),Et.return=Dt,Et)}function bt(Dt,Et,qt,dn){var Xi=qt.type;return Xi===P?un(Dt,Et,qt.props.children,dn,qt.key):Et!==null&&(Et.elementType===Xi||typeof Xi=="object"&&Xi!==null&&Xi.$$typeof===oe&&er(Xi)===Et.type)?(Et=j(Et,qt.props),Ru(Et,qt),Et.return=Dt,Et):(Et=qm(qt.type,qt.key,qt.props,null,Dt.mode,dn),Ru(Et,qt),Et.return=Dt,Et)}function Vt(Dt,Et,qt,dn){return Et===null||Et.tag!==4||Et.stateNode.containerInfo!==qt.containerInfo||Et.stateNode.implementation!==qt.implementation?(Et=Wh(qt,Dt.mode,dn),Et.return=Dt,Et):(Et=j(Et,qt.children||[]),Et.return=Dt,Et)}function un(Dt,Et,qt,dn,Xi){return Et===null||Et.tag!==7?(Et=Gh(qt,Dt.mode,dn,Xi),Et.return=Dt,Et):(Et=j(Et,qt),Et.return=Dt,Et)}function pn(Dt,Et,qt){if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return Et=ih(""+Et,Dt.mode,qt),Et.return=Dt,Et;if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case E:return qt=qm(Et.type,Et.key,Et.props,null,Dt.mode,qt),Ru(qt,Et),qt.return=Dt,qt;case R:return Et=Wh(Et,Dt.mode,qt),Et.return=Dt,Et;case oe:return Et=er(Et),pn(Dt,Et,qt)}if(je(Et)||Ie(Et))return Et=Gh(Et,Dt.mode,qt,null),Et.return=Dt,Et;if(typeof Et.then=="function")return pn(Dt,ah(Et),qt);if(Et.$$typeof===H)return pn(Dt,cc(Dt,Et),qt);Ql(Dt,Et)}return null}function Xt(Dt,Et,qt,dn){var Xi=Et!==null?Et.key:null;if(typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint")return Xi!==null?null:qe(Dt,Et,""+qt,dn);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case E:return qt.key===Xi?bt(Dt,Et,qt,dn):null;case R:return qt.key===Xi?Vt(Dt,Et,qt,dn):null;case oe:return qt=er(qt),Xt(Dt,Et,qt,dn)}if(je(qt)||Ie(qt))return Xi!==null?null:un(Dt,Et,qt,dn,null);if(typeof qt.then=="function")return Xt(Dt,Et,ah(qt),dn);if(qt.$$typeof===H)return Xt(Dt,Et,cc(Dt,qt),dn);Ql(Dt,qt)}return null}function rn(Dt,Et,qt,dn,Xi){if(typeof dn=="string"&&dn!==""||typeof dn=="number"||typeof dn=="bigint")return Dt=Dt.get(qt)||null,qe(Et,Dt,""+dn,Xi);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case E:return Dt=Dt.get(dn.key===null?qt:dn.key)||null,bt(Et,Dt,dn,Xi);case R:return Dt=Dt.get(dn.key===null?qt:dn.key)||null,Vt(Et,Dt,dn,Xi);case oe:return dn=er(dn),rn(Dt,Et,qt,dn,Xi)}if(je(dn)||Ie(dn))return Dt=Dt.get(qt)||null,un(Et,Dt,dn,Xi,null);if(typeof dn.then=="function")return rn(Dt,Et,qt,ah(dn),Xi);if(dn.$$typeof===H)return rn(Dt,Et,qt,cc(Et,dn),Xi);Ql(Et,dn)}return null}function Ii(Dt,Et,qt,dn){for(var Xi=null,zo=null,ni=Et,nr=Et=0,Lr=null;ni!==null&&nr<qt.length;nr++){ni.index>nr?(Lr=ni,ni=null):Lr=ni.sibling;var zr=Xt(Dt,ni,qt[nr],dn);if(zr===null){ni===null&&(ni=Lr);break}A&&ni&&zr.alternate===null&&g(Dt,ni),Et=V(zr,Et,nr),zo===null?Xi=zr:zo.sibling=zr,zo=zr,ni=Lr}if(nr===qt.length)return _(Dt,ni),Gr&&ac(Dt,nr),Xi;if(ni===null){for(;nr<qt.length;nr++)ni=pn(Dt,qt[nr],dn),ni!==null&&(Et=V(ni,Et,nr),zo===null?Xi=ni:zo.sibling=ni,zo=ni);return Gr&&ac(Dt,nr),Xi}for(ni=O(ni);nr<qt.length;nr++)Lr=rn(ni,Dt,nr,qt[nr],dn),Lr!==null&&(A&&Lr.alternate!==null&&ni.delete(Lr.key===null?nr:Lr.key),Et=V(Lr,Et,nr),zo===null?Xi=Lr:zo.sibling=Lr,zo=Lr);return A&&ni.forEach(function(Qc){return g(Dt,Qc)}),Gr&&ac(Dt,nr),Xi}function or(Dt,Et,qt,dn){if(qt==null)throw Error(i(151));for(var Xi=null,zo=null,ni=Et,nr=Et=0,Lr=null,zr=qt.next();ni!==null&&!zr.done;nr++,zr=qt.next()){ni.index>nr?(Lr=ni,ni=null):Lr=ni.sibling;var Qc=Xt(Dt,ni,zr.value,dn);if(Qc===null){ni===null&&(ni=Lr);break}A&&ni&&Qc.alternate===null&&g(Dt,ni),Et=V(Qc,Et,nr),zo===null?Xi=Qc:zo.sibling=Qc,zo=Qc,ni=Lr}if(zr.done)return _(Dt,ni),Gr&&ac(Dt,nr),Xi;if(ni===null){for(;!zr.done;nr++,zr=qt.next())zr=pn(Dt,zr.value,dn),zr!==null&&(Et=V(zr,Et,nr),zo===null?Xi=zr:zo.sibling=zr,zo=zr);return Gr&&ac(Dt,nr),Xi}for(ni=O(ni);!zr.done;nr++,zr=qt.next())zr=rn(ni,Dt,nr,zr.value,dn),zr!==null&&(A&&zr.alternate!==null&&ni.delete(zr.key===null?nr:zr.key),Et=V(zr,Et,nr),zo===null?Xi=zr:zo.sibling=zr,zo=zr);return A&&ni.forEach(function(pd){return g(Dt,pd)}),Gr&&ac(Dt,nr),Xi}function Cs(Dt,Et,qt,dn){if(typeof qt=="object"&&qt!==null&&qt.type===P&&qt.key===null&&(qt=qt.props.children),typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case E:e:{for(var Xi=qt.key;Et!==null;){if(Et.key===Xi){if(Xi=qt.type,Xi===P){if(Et.tag===7){_(Dt,Et.sibling),dn=j(Et,qt.props.children),dn.return=Dt,Dt=dn;break e}}else if(Et.elementType===Xi||typeof Xi=="object"&&Xi!==null&&Xi.$$typeof===oe&&er(Xi)===Et.type){_(Dt,Et.sibling),dn=j(Et,qt.props),Ru(dn,qt),dn.return=Dt,Dt=dn;break e}_(Dt,Et);break}else g(Dt,Et);Et=Et.sibling}qt.type===P?(dn=Gh(qt.props.children,Dt.mode,dn,qt.key),dn.return=Dt,Dt=dn):(dn=qm(qt.type,qt.key,qt.props,null,Dt.mode,dn),Ru(dn,qt),dn.return=Dt,Dt=dn)}return ve(Dt);case R:e:{for(Xi=qt.key;Et!==null;){if(Et.key===Xi)if(Et.tag===4&&Et.stateNode.containerInfo===qt.containerInfo&&Et.stateNode.implementation===qt.implementation){_(Dt,Et.sibling),dn=j(Et,qt.children||[]),dn.return=Dt,Dt=dn;break e}else{_(Dt,Et);break}else g(Dt,Et);Et=Et.sibling}dn=Wh(qt,Dt.mode,dn),dn.return=Dt,Dt=dn}return ve(Dt);case oe:return qt=er(qt),Cs(Dt,Et,qt,dn)}if(je(qt))return Ii(Dt,Et,qt,dn);if(Ie(qt)){if(Xi=Ie(qt),typeof Xi!="function")throw Error(i(150));return qt=Xi.call(qt),or(Dt,Et,qt,dn)}if(typeof qt.then=="function")return Cs(Dt,Et,ah(qt),dn);if(qt.$$typeof===H)return Cs(Dt,Et,cc(Dt,qt),dn);Ql(Dt,qt)}return typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint"?(qt=""+qt,Et!==null&&Et.tag===6?(_(Dt,Et.sibling),dn=j(Et,qt),dn.return=Dt,Dt=dn):(_(Dt,Et),dn=ih(qt,Dt.mode,dn),dn.return=Dt,Dt=dn),ve(Dt)):_(Dt,Et)}return function(Dt,Et,qt,dn){try{Tu=0;var Xi=Cs(Dt,Et,qt,dn);return Nd=null,Xi}catch(ni){if(ni===jd||ni===Uf)throw ni;var zo=yl(29,ni,null,Dt.mode);return zo.lanes=dn,zo.return=Dt,zo}finally{}}}var lh=v0(!0),$m=v0(!1),Rc=!1;function al(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wo(A,g){A=A.updateQueue,g.updateQueue===A&&(g.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function Jh(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Du(A,g,_){var O=A.updateQueue;if(O===null)return null;if(O=O.shared,(xo&2)!==0){var j=O.pending;return j===null?g.next=g:(g.next=j.next,j.next=g),O.pending=g,g=Ld(A),Wm(A,null,_),g}return Nh(A,O,g,_),Ld(A)}function ed(A,g,_){if(g=g.updateQueue,g!==null&&(g=g.shared,(_&4194048)!==0)){var O=g.lanes;O&=A.pendingLanes,_|=O,g.lanes=_,Oi(A,_)}}function Ff(A,g){var _=A.updateQueue,O=A.alternate;if(O!==null&&(O=O.updateQueue,_===O)){var j=null,V=null;if(_=_.firstBaseUpdate,_!==null){do{var ve={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};V===null?j=V=ve:V=V.next=ve,_=_.next}while(_!==null);V===null?j=V=g:V=V.next=g}else j=V=g;_={baseState:O.baseState,firstBaseUpdate:j,lastBaseUpdate:V,shared:O.shared,callbacks:O.callbacks},A.updateQueue=_;return}A=_.lastBaseUpdate,A===null?_.firstBaseUpdate=g:A.next=g,_.lastBaseUpdate=g}var pa=!1;function uh(){if(pa){var A=fu;if(A!==null)throw A}}function ch(A,g,_,O){pa=!1;var j=A.updateQueue;Rc=!1;var V=j.firstBaseUpdate,ve=j.lastBaseUpdate,qe=j.shared.pending;if(qe!==null){j.shared.pending=null;var bt=qe,Vt=bt.next;bt.next=null,ve===null?V=Vt:ve.next=Vt,ve=bt;var un=A.alternate;un!==null&&(un=un.updateQueue,qe=un.lastBaseUpdate,qe!==ve&&(qe===null?un.firstBaseUpdate=Vt:qe.next=Vt,un.lastBaseUpdate=bt))}if(V!==null){var pn=j.baseState;ve=0,un=Vt=bt=null,qe=V;do{var Xt=qe.lane&-536870913,rn=Xt!==qe.lane;if(rn?(go&Xt)===Xt:(O&Xt)===Xt){Xt!==0&&Xt===Gl&&(pa=!0),un!==null&&(un=un.next={lane:0,tag:qe.tag,payload:qe.payload,callback:null,next:null});e:{var Ii=A,or=qe;Xt=g;var Cs=_;switch(or.tag){case 1:if(Ii=or.payload,typeof Ii=="function"){pn=Ii.call(Cs,pn,Xt);break e}pn=Ii;break e;case 3:Ii.flags=Ii.flags&-65537|128;case 0:if(Ii=or.payload,Xt=typeof Ii=="function"?Ii.call(Cs,pn,Xt):Ii,Xt==null)break e;pn=v({},pn,Xt);break e;case 2:Rc=!0}}Xt=qe.callback,Xt!==null&&(A.flags|=64,rn&&(A.flags|=8192),rn=j.callbacks,rn===null?j.callbacks=[Xt]:rn.push(Xt))}else rn={lane:Xt,tag:qe.tag,payload:qe.payload,callback:qe.callback,next:null},un===null?(Vt=un=rn,bt=pn):un=un.next=rn,ve|=Xt;if(qe=qe.next,qe===null){if(qe=j.shared.pending,qe===null)break;rn=qe,qe=rn.next,rn.next=null,j.lastBaseUpdate=rn,j.shared.pending=null}}while(!0);un===null&&(bt=pn),j.baseState=bt,j.firstBaseUpdate=Vt,j.lastBaseUpdate=un,V===null&&(j.shared.lanes=0),$f|=ve,A.lanes=ve,A.memoizedState=pn}}function ka(A,g){if(typeof A!="function")throw Error(i(191,A));A.call(g)}function Ah(A,g){var _=A.callbacks;if(_!==null)for(A.callbacks=null,A=0;A<_.length;A++)ka(_[A],g)}var ti=De(null),bi=De(0);function td(A,g){A=LA,Te(bi,A),Te(ti,g),LA=A|g.baseLanes}function Qa(){Te(bi,LA),Te(ti,ti.current)}function hh(){LA=bi.current,Ge(ti),Ge(bi)}var ls=De(null),Ac=null;function ll(A){var g=A.alternate;Te(Os,Os.current&1),Te(ls,A),Ac===null&&(g===null||ti.current!==null||g.memoizedState!==null)&&(Ac=A)}function jf(A){Te(Os,Os.current),Te(ls,A),Ac===null&&(Ac=A)}function O1(A){A.tag===22?(Te(Os,Os.current),Te(ls,A),Ac===null&&(Ac=A)):Cl()}function Cl(){Te(Os,Os.current),Te(ls,ls.current)}function Pu(A){Ge(ls),Ac===A&&(Ac=null),Ge(Os)}var Os=De(0);function us(A){for(var g=A;g!==null;){if(g.tag===13){var _=g.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||Ay(_)||_h(_)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var uo=0,Sr=null,So=null,ko=null,nd=!1,IA=!1,kA=!1,TA=0,id=0,hc=null,Gd=0;function ms(){throw Error(i(321))}function Qd(A,g){if(g===null)return!1;for(var _=0;_<g.length&&_<A.length;_++)if(!Ls(A[_],g[_]))return!1;return!0}function RA(A,g,_,O,j,V){return uo=V,Sr=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Be.H=A===null||A.memoizedState===null?ph:lA,kA=!1,V=_(O,j),kA=!1,IA&&(V=Wd(g,_,O,j)),Tp(A),V}function Tp(A){Be.H=fh;var g=So!==null&&So.next!==null;if(uo=0,ko=So=Sr=null,nd=!1,id=0,hc=null,g)throw Error(i(300));A===null||oa||(A=A.dependencies,A!==null&&oh(A)&&(oa=!0))}function Wd(A,g,_,O){Sr=A;var j=0;do{if(IA&&(hc=null),id=0,IA=!1,25<=j)throw Error(i(301));if(j+=1,ko=So=null,A.updateQueue!=null){var V=A.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}Be.H=Nf,V=g(_,O)}while(IA);return V}function Hm(){var A=Be.H,g=A.useState()[0];return g=typeof g.then=="function"?k(g):g,A=A.useState()[0],(So!==null?So.memoizedState:null)!==A&&(Sr.flags|=1024),g}function qd(){var A=TA!==0;return TA=0,A}function B(A,g,_){g.updateQueue=A.updateQueue,g.flags&=-2053,A.lanes&=~_}function l(A){if(nd){for(A=A.memoizedState;A!==null;){var g=A.queue;g!==null&&(g.pending=null),A=A.next}nd=!1}uo=0,ko=So=Sr=null,IA=!1,id=TA=0,hc=null}function p(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ko===null?Sr.memoizedState=ko=A:ko=ko.next=A,ko}function C(){if(So===null){var A=Sr.alternate;A=A!==null?A.memoizedState:null}else A=So.next;var g=ko===null?Sr.memoizedState:ko.next;if(g!==null)ko=g,So=A;else{if(A===null)throw Sr.alternate===null?Error(i(467)):Error(i(310));So=A,A={memoizedState:So.memoizedState,baseState:So.baseState,baseQueue:So.baseQueue,queue:So.queue,next:null},ko===null?Sr.memoizedState=ko=A:ko=ko.next=A}return ko}function S(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function k(A){var g=id;return id+=1,hc===null&&(hc=[]),A=Lf(hc,A,g),g=Sr,(ko===null?g.memoizedState:ko.next)===null&&(g=g.alternate,Be.H=g===null||g.memoizedState===null?ph:lA),A}function K(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return k(A);if(A.$$typeof===H)return sl(A)}throw Error(i(438,String(A)))}function N(A){var g=null,_=Sr.updateQueue;if(_!==null&&(g=_.memoCache),g==null){var O=Sr.alternate;O!==null&&(O=O.updateQueue,O!==null&&(O=O.memoCache,O!=null&&(g={data:O.data.map(function(j){return j.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),_===null&&(_=S(),Sr.updateQueue=_),_.memoCache=g,_=g.data[g.index],_===void 0)for(_=g.data[g.index]=Array(A),O=0;O<A;O++)_[O]=xe;return g.index++,_}function q(A,g){return typeof g=="function"?g(A):g}function ie(A){var g=C();return ae(g,So,A)}function ae(A,g,_){var O=A.queue;if(O===null)throw Error(i(311));O.lastRenderedReducer=_;var j=A.baseQueue,V=O.pending;if(V!==null){if(j!==null){var ve=j.next;j.next=V.next,V.next=ve}g.baseQueue=j=V,O.pending=null}if(V=A.baseState,j===null)A.memoizedState=V;else{g=j.next;var qe=ve=null,bt=null,Vt=g,un=!1;do{var pn=Vt.lane&-536870913;if(pn!==Vt.lane?(go&pn)===pn:(uo&pn)===pn){var Xt=Vt.revertLane;if(Xt===0)bt!==null&&(bt=bt.next={lane:0,revertLane:0,gesture:null,action:Vt.action,hasEagerState:Vt.hasEagerState,eagerState:Vt.eagerState,next:null}),pn===Gl&&(un=!0);else if((uo&Xt)===Xt){Vt=Vt.next,Xt===Gl&&(un=!0);continue}else pn={lane:0,revertLane:Vt.revertLane,gesture:null,action:Vt.action,hasEagerState:Vt.hasEagerState,eagerState:Vt.eagerState,next:null},bt===null?(qe=bt=pn,ve=V):bt=bt.next=pn,Sr.lanes|=Xt,$f|=Xt;pn=Vt.action,kA&&_(V,pn),V=Vt.hasEagerState?Vt.eagerState:_(V,pn)}else Xt={lane:pn,revertLane:Vt.revertLane,gesture:Vt.gesture,action:Vt.action,hasEagerState:Vt.hasEagerState,eagerState:Vt.eagerState,next:null},bt===null?(qe=bt=Xt,ve=V):bt=bt.next=Xt,Sr.lanes|=pn,$f|=pn;Vt=Vt.next}while(Vt!==null&&Vt!==g);if(bt===null?ve=V:bt.next=qe,!Ls(V,A.memoizedState)&&(oa=!0,un&&(_=fu,_!==null)))throw _;A.memoizedState=V,A.baseState=ve,A.baseQueue=bt,O.lastRenderedState=V}return j===null&&(O.lanes=0),[A.memoizedState,O.dispatch]}function ye(A){var g=C(),_=g.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=A;var O=_.dispatch,j=_.pending,V=g.memoizedState;if(j!==null){_.pending=null;var ve=j=j.next;do V=A(V,ve.action),ve=ve.next;while(ve!==j);Ls(V,g.memoizedState)||(oa=!0),g.memoizedState=V,g.baseQueue===null&&(g.baseState=V),_.lastRenderedState=V}return[V,O]}function pe(A,g,_){var O=Sr,j=C(),V=Gr;if(V){if(_===void 0)throw Error(i(407));_=_()}else _=g();var ve=!Ls((So||j).memoizedState,_);if(ve&&(j.memoizedState=_,oa=!0),j=j.queue,hr(Xe.bind(null,O,j,A),[A]),j.getSnapshot!==g||ve||ko!==null&&ko.memoizedState.tag&1){if(O.flags|=2048,$n(9,{destroy:void 0},Fe.bind(null,O,j,_,g),null),cs===null)throw Error(i(349));V||(uo&127)!==0||Se(O,g,_)}return _}function Se(A,g,_){A.flags|=16384,A={getSnapshot:g,value:_},g=Sr.updateQueue,g===null?(g=S(),Sr.updateQueue=g,g.stores=[A]):(_=g.stores,_===null?g.stores=[A]:_.push(A))}function Fe(A,g,_,O){g.value=_,g.getSnapshot=O,$e(g)&&tt(A)}function Xe(A,g,_){return _(function(){$e(g)&&tt(A)})}function $e(A){var g=A.getSnapshot;A=A.value;try{var _=g();return!Ls(A,_)}catch{return!0}}function tt(A){var g=Au(A,2);g!==null&&Fu(g,A,2)}function it(A){var g=p();if(typeof A=="function"){var _=A;if(A=_(),kA){et(!0);try{_()}finally{et(!1)}}}return g.memoizedState=g.baseState=A,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:q,lastRenderedState:A},g}function ct(A,g,_,O){return A.baseState=_,ae(A,So,typeof O=="function"?O:q)}function rt(A,g,_,O,j){if(gu(A))throw Error(i(485));if(A=g.action,A!==null){var V={payload:j,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ve){V.listeners.push(ve)}};Be.T!==null?_(!0):V.isTransition=!1,O(V),_=g.pending,_===null?(V.next=g.pending=V,ht(g,V)):(V.next=_.next,g.pending=_.next=V)}}function ht(A,g){var _=g.action,O=g.payload,j=A.state;if(g.isTransition){var V=Be.T,ve={};Be.T=ve;try{var qe=_(j,O),bt=Be.S;bt!==null&&bt(ve,qe),ft(A,g,qe)}catch(Vt){St(A,g,Vt)}finally{V!==null&&ve.types!==null&&(V.types=ve.types),Be.T=V}}else try{V=_(j,O),ft(A,g,V)}catch(Vt){St(A,g,Vt)}}function ft(A,g,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(O){ot(A,g,O)},function(O){return St(A,g,O)}):ot(A,g,_)}function ot(A,g,_){g.status="fulfilled",g.value=_,Wt(g),A.state=_,g=A.pending,g!==null&&(_=g.next,_===g?A.pending=null:(_=_.next,g.next=_,ht(A,_)))}function St(A,g,_){var O=A.pending;if(A.pending=null,O!==null){O=O.next;do g.status="rejected",g.reason=_,Wt(g),g=g.next;while(g!==O)}A.action=null}function Wt(A){A=A.listeners;for(var g=0;g<A.length;g++)(0,A[g])()}function Ut(A,g){return g}function jt(A,g){if(Gr){var _=cs.formState;if(_!==null){e:{var O=Sr;if(Gr){if(lo){t:{for(var j=lo,V=du;j.nodeType!==8;){if(!V){j=null;break t}if(j=jc(j.nextSibling),j===null){j=null;break t}}V=j.data,j=V==="F!"||V==="F"?j:null}if(j){lo=jc(j.nextSibling),O=j.data==="F!";break e}}Iu(O)}O=!1}O&&(g=_[0])}}return _=p(),_.memoizedState=_.baseState=g,O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ut,lastRenderedState:g},_.queue=O,_=Ns.bind(null,Sr,O),O.dispatch=_,O=it(!1),V=Uu.bind(null,Sr,!1,O.queue),O=p(),j={state:g,dispatch:null,action:A,pending:null},O.queue=j,_=rt.bind(null,Sr,j,V,_),j.dispatch=_,O.memoizedState=A,[g,_,!1]}function Qt(A){var g=C();return On(g,So,A)}function On(A,g,_){if(g=ae(A,g,Ut)[0],A=ie(q)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var O=k(g)}catch(ve){throw ve===jd?Uf:ve}else O=g;g=C();var j=g.queue,V=j.dispatch;return _!==g.memoizedState&&(Sr.flags|=2048,$n(9,{destroy:void 0},In.bind(null,j,_),null)),[O,V,A]}function In(A,g){A.action=g}function ln(A){var g=C(),_=So;if(_!==null)return On(g,_,A);C(),g=g.memoizedState,_=C();var O=_.queue.dispatch;return _.memoizedState=A,[g,O,!1]}function $n(A,g,_,O){return A={tag:A,create:_,deps:O,inst:g,next:null},g=Sr.updateQueue,g===null&&(g=S(),Sr.updateQueue=g),_=g.lastEffect,_===null?g.lastEffect=A.next=A:(O=_.next,_.next=A,A.next=O,g.lastEffect=A),A}function Hi(){return C().memoizedState}function Er(A,g,_,O){var j=p();Sr.flags|=A,j.memoizedState=$n(1|g,{destroy:void 0},_,O===void 0?null:O)}function Lo(A,g,_,O){var j=C();O=O===void 0?null:O;var V=j.memoizedState.inst;So!==null&&O!==null&&Qd(O,So.memoizedState.deps)?j.memoizedState=$n(g,V,_,O):(Sr.flags|=A,j.memoizedState=$n(1|g,V,_,O))}function No(A,g){Er(8390656,8,A,g)}function hr(A,g){Lo(2048,8,A,g)}function Jo(A){Sr.flags|=4;var g=Sr.updateQueue;if(g===null)g=S(),Sr.updateQueue=g,g.events=[A];else{var _=g.events;_===null?g.events=[A]:_.push(A)}}function Ta(A){var g=C().memoizedState;return Jo({ref:g,nextImpl:A}),function(){if((xo&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}function Is(A,g){return Lo(4,2,A,g)}function Ra(A,g){return Lo(4,4,A,g)}function js(A,g){if(typeof g=="function"){A=A();var _=g(A);return function(){typeof _=="function"?_():g(null)}}if(g!=null)return A=A(),g.current=A,function(){g.current=null}}function na(A,g,_){_=_!=null?_.concat([A]):null,Lo(4,4,js.bind(null,g,A),_)}function ma(){}function DA(A,g){var _=C();g=g===void 0?null:g;var O=_.memoizedState;return g!==null&&Qd(g,O[1])?O[0]:(_.memoizedState=[A,g],A)}function ia(A,g){var _=C();g=g===void 0?null:g;var O=_.memoizedState;if(g!==null&&Qd(g,O[1]))return O[0];if(O=A(),kA){et(!0);try{A()}finally{et(!1)}}return _.memoizedState=[O,g],O}function ul(A,g,_){return _===void 0||(uo&1073741824)!==0&&(go&261930)===0?A.memoizedState=g:(A.memoizedState=_,A=kv(),Sr.lanes|=A,$f|=A,_)}function dh(A,g,_,O){return Ls(_,g)?_:ti.current!==null?(A=ul(A,_,O),Ls(A,g)||(oa=!0),A):(uo&42)===0||(uo&1073741824)!==0&&(go&261930)===0?(oa=!0,A.memoizedState=_):(A=kv(),Sr.lanes|=A,$f|=A,g)}function rd(A,g,_,O,j){var V=Ye.p;Ye.p=V!==0&&8>V?V:8;var ve=Be.T,qe={};Be.T=qe,Uu(A,!1,g,_);try{var bt=j(),Vt=Be.S;if(Vt!==null&&Vt(qe,bt),bt!==null&&typeof bt=="object"&&typeof bt.then=="function"){var un=mv(bt,O);Pc(A,g,un,zc(A))}else Pc(A,g,O,zc(A))}catch(pn){Pc(A,g,{then:function(){},status:"rejected",reason:pn},zc())}finally{Ye.p=V,ve!==null&&qe.types!==null&&(ve.types=qe.types),Be.T=ve}}function od(){}function mu(A,g,_,O){if(A.tag!==5)throw Error(i(476));var j=_l(A).queue;rd(A,j,g,At,_===null?od:function(){return cl(A),_(O)})}function _l(A){var g=A.memoizedState;if(g!==null)return g;g={memoizedState:At,baseState:At,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:q,lastRenderedState:At},next:null};var _={};return g.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:q,lastRenderedState:_},next:null},A.memoizedState=g,A=A.alternate,A!==null&&(A.memoizedState=g),g}function cl(A){var g=_l(A);g.next===null&&(g=A.alternate.memoizedState),Pc(A,g.next.queue,{},zc())}function Dc(){return sl(Zt)}function sd(){return C().memoizedState}function gs(){return C().memoizedState}function ra(A){for(var g=A.return;g!==null;){switch(g.tag){case 24:case 3:var _=zc();A=Jh(_);var O=Du(g,A,_);O!==null&&(Fu(O,g,_),ed(O,g,_)),g={cache:Fs()},A.payload=g;return}g=g.return}}function Ku(A,g,_){var O=zc();_={lane:O,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},gu(A)?Kc(g,_):(_=nh(A,g,_,O),_!==null&&(Fu(_,A,O),Rp(_,g,O)))}function Ns(A,g,_){var O=zc();Pc(A,g,_,O)}function Pc(A,g,_,O){var j={lane:O,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null};if(gu(A))Kc(g,j);else{var V=A.alternate;if(A.lanes===0&&(V===null||V.lanes===0)&&(V=g.lastRenderedReducer,V!==null))try{var ve=g.lastRenderedState,qe=V(ve,_);if(j.hasEagerState=!0,j.eagerState=qe,Ls(qe,ve))return Nh(A,g,j,0),cs===null&&Ou(),!1}catch{}finally{}if(_=nh(A,g,j,O),_!==null)return Fu(_,A,O),Rp(_,g,O),!0}return!1}function Uu(A,g,_,O){if(O={lane:2,revertLane:Yl(),gesture:null,action:O,hasEagerState:!1,eagerState:null,next:null},gu(A)){if(g)throw Error(i(479))}else g=nh(A,_,O,2),g!==null&&Fu(g,A,2)}function gu(A){var g=A.alternate;return A===Sr||g!==null&&g===Sr}function Kc(A,g){IA=nd=!0;var _=A.pending;_===null?g.next=g:(g.next=_.next,_.next=g),A.pending=g}function Rp(A,g,_){if((_&4194048)!==0){var O=g.lanes;O&=A.pendingLanes,_|=O,g.lanes=_,Oi(A,_)}}var fh={readContext:sl,use:K,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useLayoutEffect:ms,useInsertionEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useSyncExternalStore:ms,useId:ms,useHostTransitionStatus:ms,useFormState:ms,useActionState:ms,useOptimistic:ms,useMemoCache:ms,useCacheRefresh:ms};fh.useEffectEvent=ms;var ph={readContext:sl,use:K,useCallback:function(A,g){return p().memoizedState=[A,g===void 0?null:g],A},useContext:sl,useEffect:No,useImperativeHandle:function(A,g,_){_=_!=null?_.concat([A]):null,Er(4194308,4,js.bind(null,g,A),_)},useLayoutEffect:function(A,g){return Er(4194308,4,A,g)},useInsertionEffect:function(A,g){Er(4,2,A,g)},useMemo:function(A,g){var _=p();g=g===void 0?null:g;var O=A();if(kA){et(!0);try{A()}finally{et(!1)}}return _.memoizedState=[O,g],O},useReducer:function(A,g,_){var O=p();if(_!==void 0){var j=_(g);if(kA){et(!0);try{_(g)}finally{et(!1)}}}else j=g;return O.memoizedState=O.baseState=j,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:j},O.queue=A,A=A.dispatch=Ku.bind(null,Sr,A),[O.memoizedState,A]},useRef:function(A){var g=p();return A={current:A},g.memoizedState=A},useState:function(A){A=it(A);var g=A.queue,_=Ns.bind(null,Sr,g);return g.dispatch=_,[A.memoizedState,_]},useDebugValue:ma,useDeferredValue:function(A,g){var _=p();return ul(_,A,g)},useTransition:function(){var A=it(!1);return A=rd.bind(null,Sr,A.queue,!0,!1),p().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,g,_){var O=Sr,j=p();if(Gr){if(_===void 0)throw Error(i(407));_=_()}else{if(_=g(),cs===null)throw Error(i(349));(go&127)!==0||Se(O,g,_)}j.memoizedState=_;var V={value:_,getSnapshot:g};return j.queue=V,No(Xe.bind(null,O,V,A),[A]),O.flags|=2048,$n(9,{destroy:void 0},Fe.bind(null,O,V,_,g),null),_},useId:function(){var A=p(),g=cs.identifierPrefix;if(Gr){var _=bl,O=iA;_=(O&~(1<<32-Pe(O)-1)).toString(32)+_,g="_"+g+"R_"+_,_=TA++,0<_&&(g+="H"+_.toString(32)),g+="_"}else _=Gd++,g="_"+g+"r_"+_.toString(32)+"_";return A.memoizedState=g},useHostTransitionStatus:Dc,useFormState:jt,useActionState:jt,useOptimistic:function(A){var g=p();g.memoizedState=g.baseState=A;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=_,g=Uu.bind(null,Sr,!0,_),_.dispatch=g,[A,g]},useMemoCache:N,useCacheRefresh:function(){return p().memoizedState=ra.bind(null,Sr)},useEffectEvent:function(A){var g=p(),_={impl:A};return g.memoizedState=_,function(){if((xo&2)!==0)throw Error(i(440));return _.impl.apply(void 0,arguments)}}},lA={readContext:sl,use:K,useCallback:DA,useContext:sl,useEffect:hr,useImperativeHandle:na,useInsertionEffect:Is,useLayoutEffect:Ra,useMemo:ia,useReducer:ie,useRef:Hi,useState:function(){return ie(q)},useDebugValue:ma,useDeferredValue:function(A,g){var _=C();return dh(_,So.memoizedState,A,g)},useTransition:function(){var A=ie(q)[0],g=C().memoizedState;return[typeof A=="boolean"?A:k(A),g]},useSyncExternalStore:pe,useId:sd,useHostTransitionStatus:Dc,useFormState:Qt,useActionState:Qt,useOptimistic:function(A,g){var _=C();return ct(_,So,A,g)},useMemoCache:N,useCacheRefresh:gs};lA.useEffectEvent=Ta;var Nf={readContext:sl,use:K,useCallback:DA,useContext:sl,useEffect:hr,useImperativeHandle:na,useInsertionEffect:Is,useLayoutEffect:Ra,useMemo:ia,useReducer:ye,useRef:Hi,useState:function(){return ye(q)},useDebugValue:ma,useDeferredValue:function(A,g){var _=C();return So===null?ul(_,A,g):dh(_,So.memoizedState,A,g)},useTransition:function(){var A=ye(q)[0],g=C().memoizedState;return[typeof A=="boolean"?A:k(A),g]},useSyncExternalStore:pe,useId:sd,useHostTransitionStatus:Dc,useFormState:ln,useActionState:ln,useOptimistic:function(A,g){var _=C();return So!==null?ct(_,So,A,g):(_.baseState=A,[A,_.queue.dispatch])},useMemoCache:N,useCacheRefresh:gs};Nf.useEffectEvent=Ta;function Gf(A,g,_,O){g=A.memoizedState,_=_(O,g),_=_==null?g:v({},g,_),A.memoizedState=_,A.lanes===0&&(A.updateQueue.baseState=_)}var mh={enqueueSetState:function(A,g,_){A=A._reactInternals;var O=zc(),j=Jh(O);j.payload=g,_!=null&&(j.callback=_),g=Du(A,j,O),g!==null&&(Fu(g,A,O),ed(g,A,O))},enqueueReplaceState:function(A,g,_){A=A._reactInternals;var O=zc(),j=Jh(O);j.tag=1,j.payload=g,_!=null&&(j.callback=_),g=Du(A,j,O),g!==null&&(Fu(g,A,O),ed(g,A,O))},enqueueForceUpdate:function(A,g){A=A._reactInternals;var _=zc(),O=Jh(_);O.tag=2,g!=null&&(O.callback=g),g=Du(A,O,_),g!==null&&(Fu(g,A,_),ed(g,A,_))}};function Zm(A,g,_,O,j,V,ve){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(O,V,ve):g.prototype&&g.prototype.isPureReactComponent?!JA(_,O)||!JA(j,V):!0}function uA(A,g,_,O){A=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(_,O),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(_,O),g.state!==A&&mh.enqueueReplaceState(g,g.state,null)}function Wa(A,g){var _=g;if("ref"in g){_={};for(var O in g)O!=="ref"&&(_[O]=g[O])}if(A=A.defaultProps){_===g&&(_=v({},_));for(var j in A)_[j]===void 0&&(_[j]=A[j])}return _}function I1(A){CA(A)}function gv(A){console.error(A)}function k1(A){CA(A)}function Xm(A,g){try{var _=A.onUncaughtError;_(g.value,{componentStack:g.stack})}catch(O){setTimeout(function(){throw O})}}function b0(A,g,_){try{var O=A.onCaughtError;O(_.value,{componentStack:_.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function T1(A,g,_){return _=Jh(_),_.tag=3,_.payload={element:null},_.callback=function(){Xm(A,g)},_}function ad(A){return A=Jh(A),A.tag=3,A}function Jm(A,g,_,O){var j=_.type.getDerivedStateFromError;if(typeof j=="function"){var V=O.value;A.payload=function(){return j(V)},A.callback=function(){b0(g,_,O)}}var ve=_.stateNode;ve!==null&&typeof ve.componentDidCatch=="function"&&(A.callback=function(){b0(g,_,O),typeof j!="function"&&(Jd===null?Jd=new Set([this]):Jd.add(this));var qe=O.stack;this.componentDidCatch(O.value,{componentStack:qe!==null?qe:""})})}function yv(A,g,_,O,j){if(_.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){if(g=_.alternate,g!==null&&uc(g,_,j,!0),_=ls.current,_!==null){switch(_.tag){case 31:case 13:return Ac===null?$1():_.alternate===null&&ya===0&&(ya=3),_.flags&=-257,_.flags|=65536,_.lanes=j,O===Xh?_.flags|=16384:(g=_.updateQueue,g===null?_.updateQueue=new Set([O]):g.add(O),P0(A,O,j)),!1;case 22:return _.flags|=65536,O===Xh?_.flags|=16384:(g=_.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([O])},_.updateQueue=g):(_=g.retryQueue,_===null?g.retryQueue=new Set([O]):_.add(O)),P0(A,O,j)),!1}throw Error(i(435,_.tag))}return P0(A,O,j),$1(),!1}if(Gr)return g=ls.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=j,O!==ss&&(A=Error(i(422),{cause:O}),oA(Fl(A,_)))):(O!==ss&&(g=Error(i(423),{cause:O}),oA(Fl(g,_))),A=A.current.alternate,A.flags|=65536,j&=-j,A.lanes|=j,O=Fl(O,_),j=T1(A.stateNode,O,j),Ff(A,j),ya!==4&&(ya=2)),!1;var V=Error(i(520),{cause:O});if(V=Fl(V,_),qp===null?qp=[V]:qp.push(V),ya!==4&&(ya=2),g===null)return!0;O=Fl(O,_),_=g;do{switch(_.tag){case 3:return _.flags|=65536,A=j&-j,_.lanes|=A,A=T1(_.stateNode,O,A),Ff(_,A),!1;case 1:if(g=_.type,V=_.stateNode,(_.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Jd===null||!Jd.has(V))))return _.flags|=65536,j&=-j,_.lanes|=j,j=ad(j),Jm(j,A,_,O),Ff(_,j),!1}_=_.return}while(_!==null);return!1}var Dp=Error(i(461)),oa=!1;function ga(A,g,_,O){g.child=A===null?$m(g,null,_,O):lh(g,A.child,_,O)}function qi(A,g,_,O,j){_=_.render;var V=g.ref;if("ref"in O){var ve={};for(var qe in O)qe!=="ref"&&(ve[qe]=O[qe])}else ve=O;return $h(g),O=RA(A,g,_,ve,V,j),qe=qd(),A!==null&&!oa?(B(A,g,j),KA(A,g,j)):(Gr&&qe&&rA(g),g.flags|=1,ga(A,g,O,j),g.child)}function C0(A,g,_,O,j){if(A===null){var V=_.type;return typeof V=="function"&&!xA(V)&&V.defaultProps===void 0&&_.compare===null?(g.tag=15,g.type=V,Yd(A,g,V,O,j)):(A=qm(_.type,null,O,g,g.mode,j),A.ref=g.ref,A.return=g,g.child=A)}if(V=A.child,!K1(A,j)){var ve=V.memoizedProps;if(_=_.compare,_=_!==null?_:JA,_(ve,O)&&A.ref===g.ref)return KA(A,g,j)}return g.flags|=1,A=zl(V,O),A.ref=g.ref,A.return=g,g.child=A}function Yd(A,g,_,O,j){if(A!==null){var V=A.memoizedProps;if(JA(V,O)&&A.ref===g.ref)if(oa=!1,g.pendingProps=O=V,K1(A,j))(A.flags&131072)!==0&&(oa=!0);else return g.lanes=A.lanes,KA(A,g,j)}return eg(A,g,_,O,j)}function gh(A,g,_,O){var j=O.children,V=A!==null?A.memoizedState:null;if(A===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),O.mode==="hidden"){if((g.flags&128)!==0){if(V=V!==null?V.baseLanes|_:_,A!==null){for(O=g.child=A.child,j=0;O!==null;)j=j|O.lanes|O.childLanes,O=O.sibling;O=j&~V}else O=0,g.child=null;return R1(A,g,V,_,O)}if((_&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},A!==null&&Tc(g,V!==null?V.cachePool:null),V!==null?td(g,V):Qa(),O1(g);else return O=g.lanes=536870912,R1(A,g,V!==null?V.baseLanes|_:_,_,O)}else V!==null?(Tc(g,V.cachePool),td(g,V),Cl(),g.memoizedState=null):(A!==null&&Tc(g,null),Qa(),Cl());return ga(A,g,j,_),g.child}function Qf(A,g){return A!==null&&A.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function R1(A,g,_,O,j){var V=aA();return V=V===null?null:{parent:as._currentValue,pool:V},g.memoizedState={baseLanes:_,cachePool:V},A!==null&&Tc(g,null),Qa(),O1(g),A!==null&&uc(A,g,O,!0),g.childLanes=j,null}function _0(A,g){return g=M0({mode:g.mode,children:g.children},A.mode),g.ref=A.ref,A.child=g,g.return=A,g}function yu(A,g,_){return lh(g,A.child,null,_),A=_0(g,g.pendingProps),A.flags|=2,Pu(g),g.memoizedState=null,A}function $x(A,g,_){var O=g.pendingProps,j=(g.flags&128)!==0;if(g.flags&=-129,A===null){if(Gr){if(O.mode==="hidden")return A=_0(g,O),g.lanes=536870912,Qf(null,A);if(jf(g),(A=lo)?(A=EC(A,du),A=A!==null&&A.data==="&"?A:null,A!==null&&(g.memoizedState={dehydrated:A,treeContext:kc!==null?{id:iA,overflow:bl}:null,retryLane:536870912,hydrationErrors:null},_=Qh(A),_.return=g,g.child=_,ta=g,lo=null)):A=null,A===null)throw Iu(g);return g.lanes=536870912,null}return _0(g,O)}var V=A.memoizedState;if(V!==null){var ve=V.dehydrated;if(jf(g),j)if(g.flags&256)g.flags&=-257,g=yu(A,g,_);else if(g.memoizedState!==null)g.child=A.child,g.flags|=128,g=null;else throw Error(i(558));else if(oa||uc(A,g,_,!1),j=(_&A.childLanes)!==0,oa||j){if(O=cs,O!==null&&(ve=Ri(O,_),ve!==0&&ve!==V.retryLane))throw V.retryLane=ve,Au(A,ve),Fu(O,A,ve),Dp;$1(),g=yu(A,g,_)}else A=V.treeContext,lo=jc(ve.nextSibling),ta=g,Gr=!0,MA=null,du=!1,A!==null&&Yh(g,A),g=_0(g,O),g.flags|=4096;return g}return A=zl(A.child,{mode:O.mode,children:O.children}),A.ref=g.ref,g.child=A,A.return=g,A}function x0(A,g){var _=g.ref;if(_===null)A!==null&&A.ref!==null&&(g.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(i(284));(A===null||A.ref!==_)&&(g.flags|=4194816)}}function eg(A,g,_,O,j){return $h(g),_=RA(A,g,_,O,void 0,j),O=qd(),A!==null&&!oa?(B(A,g,j),KA(A,g,j)):(Gr&&O&&rA(g),g.flags|=1,ga(A,g,_,j),g.child)}function vv(A,g,_,O,j,V){return $h(g),g.updateQueue=null,_=Wd(g,O,_,j),Tp(A),O=qd(),A!==null&&!oa?(B(A,g,V),KA(A,g,V)):(Gr&&O&&rA(g),g.flags|=1,ga(A,g,_,V),g.child)}function D1(A,g,_,O,j){if($h(g),g.stateNode===null){var V=lr,ve=_.contextType;typeof ve=="object"&&ve!==null&&(V=sl(ve)),V=new _(O,V),g.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=mh,g.stateNode=V,V._reactInternals=g,V=g.stateNode,V.props=O,V.state=g.memoizedState,V.refs={},al(g),ve=_.contextType,V.context=typeof ve=="object"&&ve!==null?sl(ve):lr,V.state=g.memoizedState,ve=_.getDerivedStateFromProps,typeof ve=="function"&&(Gf(g,_,ve,O),V.state=g.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(ve=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),ve!==V.state&&mh.enqueueReplaceState(V,V.state,null),ch(g,O,V,j),uh(),V.state=g.memoizedState),typeof V.componentDidMount=="function"&&(g.flags|=4194308),O=!0}else if(A===null){V=g.stateNode;var qe=g.memoizedProps,bt=Wa(_,qe);V.props=bt;var Vt=V.context,un=_.contextType;ve=lr,typeof un=="object"&&un!==null&&(ve=sl(un));var pn=_.getDerivedStateFromProps;un=typeof pn=="function"||typeof V.getSnapshotBeforeUpdate=="function",qe=g.pendingProps!==qe,un||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(qe||Vt!==ve)&&uA(g,V,O,ve),Rc=!1;var Xt=g.memoizedState;V.state=Xt,ch(g,O,V,j),uh(),Vt=g.memoizedState,qe||Xt!==Vt||Rc?(typeof pn=="function"&&(Gf(g,_,pn,O),Vt=g.memoizedState),(bt=Rc||Zm(g,_,bt,O,Xt,Vt,ve))?(un||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(g.flags|=4194308)):(typeof V.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=O,g.memoizedState=Vt),V.props=O,V.state=Vt,V.context=ve,O=bt):(typeof V.componentDidMount=="function"&&(g.flags|=4194308),O=!1)}else{V=g.stateNode,wo(A,g),ve=g.memoizedProps,un=Wa(_,ve),V.props=un,pn=g.pendingProps,Xt=V.context,Vt=_.contextType,bt=lr,typeof Vt=="object"&&Vt!==null&&(bt=sl(Vt)),qe=_.getDerivedStateFromProps,(Vt=typeof qe=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ve!==pn||Xt!==bt)&&uA(g,V,O,bt),Rc=!1,Xt=g.memoizedState,V.state=Xt,ch(g,O,V,j),uh();var rn=g.memoizedState;ve!==pn||Xt!==rn||Rc||A!==null&&A.dependencies!==null&&oh(A.dependencies)?(typeof qe=="function"&&(Gf(g,_,qe,O),rn=g.memoizedState),(un=Rc||Zm(g,_,un,O,Xt,rn,bt)||A!==null&&A.dependencies!==null&&oh(A.dependencies))?(Vt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(O,rn,bt),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(O,rn,bt)),typeof V.componentDidUpdate=="function"&&(g.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof V.componentDidUpdate!="function"||ve===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ve===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=1024),g.memoizedProps=O,g.memoizedState=rn),V.props=O,V.state=rn,V.context=bt,O=un):(typeof V.componentDidUpdate!="function"||ve===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ve===A.memoizedProps&&Xt===A.memoizedState||(g.flags|=1024),O=!1)}return V=O,x0(A,g),O=(g.flags&128)!==0,V||O?(V=g.stateNode,_=O&&typeof _.getDerivedStateFromError!="function"?null:V.render(),g.flags|=1,A!==null&&O?(g.child=lh(g,A.child,null,j),g.child=lh(g,null,_,j)):ga(A,g,_,j),g.memoizedState=V.state,A=g.child):A=KA(A,g,j),A}function aC(A,g,_,O){return Qe(),g.flags|=256,ga(A,g,_,O),g.child}var bv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function P1(A){return{baseLanes:A,cachePool:Hn()}}function PA(A,g,_){return A=A!==null?A.childLanes&~_:0,g&&(A|=cA),A}function Lu(A,g,_){var O=g.pendingProps,j=!1,V=(g.flags&128)!==0,ve;if((ve=V)||(ve=A!==null&&A.memoizedState===null?!1:(Os.current&2)!==0),ve&&(j=!0,g.flags&=-129),ve=(g.flags&32)!==0,g.flags&=-33,A===null){if(Gr){if(j?ll(g):Cl(),(A=lo)?(A=EC(A,du),A=A!==null&&A.data!=="&"?A:null,A!==null&&(g.memoizedState={dehydrated:A,treeContext:kc!==null?{id:iA,overflow:bl}:null,retryLane:536870912,hydrationErrors:null},_=Qh(A),_.return=g,g.child=_,ta=g,lo=null)):A=null,A===null)throw Iu(g);return _h(A)?g.lanes=32:g.lanes=536870912,null}var qe=O.children;return O=O.fallback,j?(Cl(),j=g.mode,qe=M0({mode:"hidden",children:qe},j),O=Gh(O,j,_,null),qe.return=g,O.return=g,qe.sibling=O,g.child=qe,O=g.child,O.memoizedState=P1(_),O.childLanes=PA(A,ve,_),g.memoizedState=bv,Qf(null,O)):(ll(g),Pp(g,qe))}var bt=A.memoizedState;if(bt!==null&&(qe=bt.dehydrated,qe!==null)){if(V)g.flags&256?(ll(g),g.flags&=-257,g=Kp(A,g,_)):g.memoizedState!==null?(Cl(),g.child=A.child,g.flags|=128,g=null):(Cl(),qe=O.fallback,j=g.mode,O=M0({mode:"visible",children:O.children},j),qe=Gh(qe,j,_,null),qe.flags|=2,O.return=g,qe.return=g,O.sibling=qe,g.child=O,lh(g,A.child,null,_),O=g.child,O.memoizedState=P1(_),O.childLanes=PA(A,ve,_),g.memoizedState=bv,g=Qf(null,O));else if(ll(g),_h(qe)){if(ve=qe.nextSibling&&qe.nextSibling.dataset,ve)var Vt=ve.dgst;ve=Vt,O=Error(i(419)),O.stack="",O.digest=ve,oA({value:O,source:null,stack:null}),g=Kp(A,g,_)}else if(oa||uc(A,g,_,!1),ve=(_&A.childLanes)!==0,oa||ve){if(ve=cs,ve!==null&&(O=Ri(ve,_),O!==0&&O!==bt.retryLane))throw bt.retryLane=O,Au(A,O),Fu(ve,A,O),Dp;Ay(qe)||$1(),g=Kp(A,g,_)}else Ay(qe)?(g.flags|=192,g.child=A.child,g=null):(A=bt.treeContext,lo=jc(qe.nextSibling),ta=g,Gr=!0,MA=null,du=!1,A!==null&&Yh(g,A),g=Pp(g,O.children),g.flags|=4096);return g}return j?(Cl(),qe=O.fallback,j=g.mode,bt=A.child,Vt=bt.sibling,O=zl(bt,{mode:"hidden",children:O.children}),O.subtreeFlags=bt.subtreeFlags&65011712,Vt!==null?qe=zl(Vt,qe):(qe=Gh(qe,j,_,null),qe.flags|=2),qe.return=g,O.return=g,O.sibling=qe,g.child=O,Qf(null,O),O=g.child,qe=A.child.memoizedState,qe===null?qe=P1(_):(j=qe.cachePool,j!==null?(bt=as._currentValue,j=j.parent!==bt?{parent:bt,pool:bt}:j):j=Hn(),qe={baseLanes:qe.baseLanes|_,cachePool:j}),O.memoizedState=qe,O.childLanes=PA(A,ve,_),g.memoizedState=bv,Qf(A.child,O)):(ll(g),_=A.child,A=_.sibling,_=zl(_,{mode:"visible",children:O.children}),_.return=g,_.sibling=null,A!==null&&(ve=g.deletions,ve===null?(g.deletions=[A],g.flags|=16):ve.push(A)),g.child=_,g.memoizedState=null,_)}function Pp(A,g){return g=M0({mode:"visible",children:g},A.mode),g.return=A,A.child=g}function M0(A,g){return A=yl(22,A,null,g),A.lanes=0,A}function Kp(A,g,_){return lh(g,A.child,null,_),A=Pp(g,g.pendingProps.children),A.flags|=2,g.memoizedState=null,A}function tg(A,g,_){A.lanes|=g;var O=A.alternate;O!==null&&(O.lanes|=g),BA(A.return,g,_)}function vu(A,g,_,O,j,V){var ve=A.memoizedState;ve===null?A.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:O,tail:_,tailMode:j,treeForkCount:V}:(ve.isBackwards=g,ve.rendering=null,ve.renderingStartTime=0,ve.last=O,ve.tail=_,ve.tailMode=j,ve.treeForkCount=V)}function Up(A,g,_){var O=g.pendingProps,j=O.revealOrder,V=O.tail;O=O.children;var ve=Os.current,qe=(ve&2)!==0;if(qe?(ve=ve&1|2,g.flags|=128):ve&=1,Te(Os,ve),ga(A,g,O,_),O=Gr?zs:0,!qe&&A!==null&&(A.flags&128)!==0)e:for(A=g.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&tg(A,_,g);else if(A.tag===19)tg(A,_,g);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===g)break e;for(;A.sibling===null;){if(A.return===null||A.return===g)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}switch(j){case"forwards":for(_=g.child,j=null;_!==null;)A=_.alternate,A!==null&&us(A)===null&&(j=_),_=_.sibling;_=j,_===null?(j=g.child,g.child=null):(j=_.sibling,_.sibling=null),vu(g,!1,j,_,V,O);break;case"backwards":case"unstable_legacy-backwards":for(_=null,j=g.child,g.child=null;j!==null;){if(A=j.alternate,A!==null&&us(A)===null){g.child=j;break}A=j.sibling,j.sibling=_,_=j,j=A}vu(g,!0,_,null,V,O);break;case"together":vu(g,!1,null,null,void 0,O);break;default:g.memoizedState=null}return g.child}function KA(A,g,_){if(A!==null&&(g.dependencies=A.dependencies),$f|=g.lanes,(_&g.childLanes)===0)if(A!==null){if(uc(A,g,_,!1),(_&g.childLanes)===0)return null}else return null;if(A!==null&&g.child!==A.child)throw Error(i(153));if(g.child!==null){for(A=g.child,_=zl(A,A.pendingProps),g.child=_,_.return=g;A.sibling!==null;)A=A.sibling,_=_.sibling=zl(A,A.pendingProps),_.return=g;_.sibling=null}return g.child}function K1(A,g){return(A.lanes&g)!==0?!0:(A=A.dependencies,!!(A!==null&&oh(A)))}function lC(A,g,_){switch(g.tag){case 3:Ue(g,g.stateNode.containerInfo),EA(g,as,A.memoizedState.cache),Qe();break;case 27:case 5:Ee(g);break;case 4:Ue(g,g.stateNode.containerInfo);break;case 10:EA(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,jf(g),null;break;case 13:var O=g.memoizedState;if(O!==null)return O.dehydrated!==null?(ll(g),g.flags|=128,null):(_&g.child.childLanes)!==0?Lu(A,g,_):(ll(g),A=KA(A,g,_),A!==null?A.sibling:null);ll(g);break;case 19:var j=(A.flags&128)!==0;if(O=(_&g.childLanes)!==0,O||(uc(A,g,_,!1),O=(_&g.childLanes)!==0),j){if(O)return Up(A,g,_);g.flags|=128}if(j=g.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Te(Os,Os.current),O)break;return null;case 22:return g.lanes=0,gh(A,g,_,g.pendingProps);case 24:EA(g,as,A.memoizedState.cache)}return KA(A,g,_)}function uC(A,g,_){if(A!==null)if(A.memoizedProps!==g.pendingProps)oa=!0;else{if(!K1(A,_)&&(g.flags&128)===0)return oa=!1,lC(A,g,_);oa=(A.flags&131072)!==0}else oa=!1,Gr&&(g.flags&1048576)!==0&&Ip(g,zs,g.index);switch(g.lanes=0,g.tag){case 16:e:{var O=g.pendingProps;if(A=er(g.elementType),g.type=A,typeof A=="function")xA(A)?(O=Wa(A,O),g.tag=1,g=D1(null,g,A,O,_)):(g.tag=0,g=eg(null,g,A,O,_));else{if(A!=null){var j=A.$$typeof;if(j===Z){g.tag=11,g=qi(null,g,A,O,_);break e}else if(j===G){g.tag=14,g=C0(null,g,A,O,_);break e}}throw g=ke(A)||A,Error(i(306,g,""))}}return g;case 0:return eg(A,g,g.type,g.pendingProps,_);case 1:return O=g.type,j=Wa(O,g.pendingProps),D1(A,g,O,j,_);case 3:e:{if(Ue(g,g.stateNode.containerInfo),A===null)throw Error(i(387));O=g.pendingProps;var V=g.memoizedState;j=V.element,wo(A,g),ch(g,O,null,_);var ve=g.memoizedState;if(O=ve.cache,EA(g,as,O),O!==V.cache&&kp(g,[as],_,!0),uh(),O=ve.element,V.isDehydrated)if(V={element:O,isDehydrated:!1,cache:ve.cache},g.updateQueue.baseState=V,g.memoizedState=V,g.flags&256){g=aC(A,g,O,_);break e}else if(O!==j){j=Fl(Error(i(424)),g),oA(j),g=aC(A,g,O,_);break e}else{switch(A=g.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(lo=jc(A.firstChild),ta=g,Gr=!0,MA=null,du=!0,_=$m(g,null,O,_),g.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(Qe(),O===j){g=KA(A,g,_);break e}ga(A,g,O,_)}g=g.child}return g;case 26:return x0(A,g),A===null?(_=kC(g.type,null,g.pendingProps,null))?g.memoizedState=_:Gr||(_=g.type,A=g.pendingProps,O=j0(Tt.current).createElement(_),O[Vr]=g,O[mn]=A,Va(O,_,A),Ho(O),g.stateNode=O):g.memoizedState=kC(g.type,A.memoizedProps,g.pendingProps,A.memoizedState),null;case 27:return Ee(g),A===null&&Gr&&(O=g.stateNode=BC(g.type,g.pendingProps,Tt.current),ta=g,du=!0,j=lo,rr(g.type)?(hy=j,lo=jc(O.firstChild)):lo=j),ga(A,g,g.pendingProps.children,_),x0(A,g),A===null&&(g.flags|=4194304),g.child;case 5:return A===null&&Gr&&((j=O=lo)&&(O=cy(O,g.type,g.pendingProps,du),O!==null?(g.stateNode=O,ta=g,lo=jc(O.firstChild),du=!1,j=!0):j=!1),j||Iu(g)),Ee(g),j=g.type,V=g.pendingProps,ve=A!==null?A.memoizedProps:null,O=V.children,of(j,V)?O=null:ve!==null&&of(j,ve)&&(g.flags|=32),g.memoizedState!==null&&(j=RA(A,g,Hm,null,null,_),Zt._currentValue=j),x0(A,g),ga(A,g,O,_),g.child;case 6:return A===null&&Gr&&((A=_=lo)&&(_=ts(_,g.pendingProps,du),_!==null?(g.stateNode=_,ta=g,lo=null,A=!0):A=!1),A||Iu(g)),null;case 13:return Lu(A,g,_);case 4:return Ue(g,g.stateNode.containerInfo),O=g.pendingProps,A===null?g.child=lh(g,null,O,_):ga(A,g,O,_),g.child;case 11:return qi(A,g,g.type,g.pendingProps,_);case 7:return ga(A,g,g.pendingProps,_),g.child;case 8:return ga(A,g,g.pendingProps.children,_),g.child;case 12:return ga(A,g,g.pendingProps.children,_),g.child;case 10:return O=g.pendingProps,EA(g,g.type,O.value),ga(A,g,O.children,_),g.child;case 9:return j=g.type._context,O=g.pendingProps.children,$h(g),j=sl(j),O=O(j),g.flags|=1,ga(A,g,O,_),g.child;case 14:return C0(A,g,g.type,g.pendingProps,_);case 15:return Yd(A,g,g.type,g.pendingProps,_);case 19:return Up(A,g,_);case 31:return $x(A,g,_);case 22:return gh(A,g,_,g.pendingProps);case 24:return $h(g),O=sl(as),A===null?(j=aA(),j===null&&(j=cs,V=Fs(),j.pooledCache=V,V.refCount++,V!==null&&(j.pooledCacheLanes|=_),j=V),g.memoizedState={parent:O,cache:j},al(g),EA(g,as,j)):((A.lanes&_)!==0&&(wo(A,g),ch(g,null,null,_),uh()),j=A.memoizedState,V=g.memoizedState,j.parent!==O?(j={parent:O,cache:O},g.memoizedState=j,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=j),EA(g,as,O)):(O=V.cache,EA(g,as,O),O!==j.cache&&kp(g,[as],_,!0))),ga(A,g,g.pendingProps.children,_),g.child;case 29:throw g.pendingProps}throw Error(i(156,g.tag))}function Vd(A){A.flags|=4}function U1(A,g,_,O,j){if((g=(A.mode&32)!==0)&&(g=!1),g){if(A.flags|=16777216,(j&335544128)===j)if(A.stateNode.complete)A.flags|=8192;else if(k0())A.flags|=8192;else throw pu=Xh,OA}else A.flags&=-16777217}function Cv(A,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!Re(g))if(k0())A.flags|=8192;else throw pu=Xh,OA}function Lp(A,g){g!==null&&(A.flags|=4),A.flags&16384&&(g=A.tag!==22?zn():536870912,A.lanes|=g,Wp|=g)}function ng(A,g){if(!Gr)switch(A.tailMode){case"hidden":g=A.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?A.tail=null:_.sibling=null;break;case"collapsed":_=A.tail;for(var O=null;_!==null;)_.alternate!==null&&(O=_),_=_.sibling;O===null?g||A.tail===null?A.tail=null:A.tail.sibling=null:O.sibling=null}}function ys(A){var g=A.alternate!==null&&A.alternate.child===A.child,_=0,O=0;if(g)for(var j=A.child;j!==null;)_|=j.lanes|j.childLanes,O|=j.subtreeFlags&65011712,O|=j.flags&65011712,j.return=A,j=j.sibling;else for(j=A.child;j!==null;)_|=j.lanes|j.childLanes,O|=j.subtreeFlags,O|=j.flags,j.return=A,j=j.sibling;return A.subtreeFlags|=O,A.childLanes=_,g}function cC(A,g,_){var O=g.pendingProps;switch(rh(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(g),null;case 1:return ys(g),null;case 3:return _=g.stateNode,O=null,A!==null&&(O=A.memoizedState.cache),g.memoizedState.cache!==O&&(g.flags|=2048),sA(as),Oe(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(A===null||A.child===null)&&(wA(g)?Vd(g):A===null||A.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,lc())),ys(g),null;case 26:var j=g.type,V=g.memoizedState;return A===null?(Vd(g),V!==null?(ys(g),Cv(g,V)):(ys(g),U1(g,j,null,O,_))):V?V!==A.memoizedState?(Vd(g),ys(g),Cv(g,V)):(ys(g),g.flags&=-16777217):(A=A.memoizedProps,A!==O&&Vd(g),ys(g),U1(g,j,A,O,_)),null;case 27:if(Ve(g),_=Tt.current,j=g.type,A!==null&&g.stateNode!=null)A.memoizedProps!==O&&Vd(g);else{if(!O){if(g.stateNode===null)throw Error(i(166));return ys(g),null}A=xt.current,wA(g)?jl(g):(A=BC(j,O,_),g.stateNode=A,Vd(g))}return ys(g),null;case 5:if(Ve(g),j=g.type,A!==null&&g.stateNode!=null)A.memoizedProps!==O&&Vd(g);else{if(!O){if(g.stateNode===null)throw Error(i(166));return ys(g),null}if(V=xt.current,wA(g))jl(g);else{var ve=j0(Tt.current);switch(V){case 1:V=ve.createElementNS("http://www.w3.org/2000/svg",j);break;case 2:V=ve.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;default:switch(j){case"svg":V=ve.createElementNS("http://www.w3.org/2000/svg",j);break;case"math":V=ve.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;case"script":V=ve.createElement("div"),V.innerHTML="<script><\/script>",V=V.removeChild(V.firstChild);break;case"select":V=typeof O.is=="string"?ve.createElement("select",{is:O.is}):ve.createElement("select"),O.multiple?V.multiple=!0:O.size&&(V.size=O.size);break;default:V=typeof O.is=="string"?ve.createElement(j,{is:O.is}):ve.createElement(j)}}V[Vr]=g,V[mn]=O;e:for(ve=g.child;ve!==null;){if(ve.tag===5||ve.tag===6)V.appendChild(ve.stateNode);else if(ve.tag!==4&&ve.tag!==27&&ve.child!==null){ve.child.return=ve,ve=ve.child;continue}if(ve===g)break e;for(;ve.sibling===null;){if(ve.return===null||ve.return===g)break e;ve=ve.return}ve.sibling.return=ve.return,ve=ve.sibling}g.stateNode=V;e:switch(Va(V,j,O),j){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}O&&Vd(g)}}return ys(g),U1(g,g.type,A===null?null:A.memoizedProps,g.pendingProps,_),null;case 6:if(A&&g.stateNode!=null)A.memoizedProps!==O&&Vd(g);else{if(typeof O!="string"&&g.stateNode===null)throw Error(i(166));if(A=Tt.current,wA(g)){if(A=g.stateNode,_=g.memoizedProps,O=null,j=ta,j!==null)switch(j.tag){case 27:case 5:O=j.memoizedProps}A[Vr]=g,A=!!(A.nodeValue===_||O!==null&&O.suppressHydrationWarning===!0||Gv(A.nodeValue,_)),A||Iu(g,!0)}else A=j0(A).createTextNode(O),A[Vr]=g,g.stateNode=A}return ys(g),null;case 31:if(_=g.memoizedState,A===null||A.memoizedState!==null){if(O=wA(g),_!==null){if(A===null){if(!O)throw Error(i(318));if(A=g.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(557));A[Vr]=g}else Qe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ys(g),A=!1}else _=lc(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=_),A=!0;if(!A)return g.flags&256?(Pu(g),g):(Pu(g),null);if((g.flags&128)!==0)throw Error(i(558))}return ys(g),null;case 13:if(O=g.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(j=wA(g),O!==null&&O.dehydrated!==null){if(A===null){if(!j)throw Error(i(318));if(j=g.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(i(317));j[Vr]=g}else Qe(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ys(g),j=!1}else j=lc(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=j),j=!0;if(!j)return g.flags&256?(Pu(g),g):(Pu(g),null)}return Pu(g),(g.flags&128)!==0?(g.lanes=_,g):(_=O!==null,A=A!==null&&A.memoizedState!==null,_&&(O=g.child,j=null,O.alternate!==null&&O.alternate.memoizedState!==null&&O.alternate.memoizedState.cachePool!==null&&(j=O.alternate.memoizedState.cachePool.pool),V=null,O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(V=O.memoizedState.cachePool.pool),V!==j&&(O.flags|=2048)),_!==A&&_&&(g.child.flags|=8192),Lp(g,g.updateQueue),ys(g),null);case 4:return Oe(),A===null&&iy(g.stateNode.containerInfo),ys(g),null;case 10:return sA(g.type),ys(g),null;case 19:if(Ge(Os),O=g.memoizedState,O===null)return ys(g),null;if(j=(g.flags&128)!==0,V=O.rendering,V===null)if(j)ng(O,!1);else{if(ya!==0||A!==null&&(A.flags&128)!==0)for(A=g.child;A!==null;){if(V=us(A),V!==null){for(g.flags|=128,ng(O,!1),A=V.updateQueue,g.updateQueue=A,Lp(g,A),g.subtreeFlags=0,A=_,_=g.child;_!==null;)m0(_,A),_=_.sibling;return Te(Os,Os.current&1|2),Gr&&ac(g,O.treeForkCount),g.child}A=A.sibling}O.tail!==null&&ei()>ud&&(g.flags|=128,j=!0,ng(O,!1),g.lanes=4194304)}else{if(!j)if(A=us(V),A!==null){if(g.flags|=128,j=!0,A=A.updateQueue,g.updateQueue=A,Lp(g,A),ng(O,!0),O.tail===null&&O.tailMode==="hidden"&&!V.alternate&&!Gr)return ys(g),null}else 2*ei()-O.renderingStartTime>ud&&_!==536870912&&(g.flags|=128,j=!0,ng(O,!1),g.lanes=4194304);O.isBackwards?(V.sibling=g.child,g.child=V):(A=O.last,A!==null?A.sibling=V:g.child=V,O.last=V)}return O.tail!==null?(A=O.tail,O.rendering=A,O.tail=A.sibling,O.renderingStartTime=ei(),A.sibling=null,_=Os.current,Te(Os,j?_&1|2:_&1),Gr&&ac(g,O.treeForkCount),A):(ys(g),null);case 22:case 23:return Pu(g),hh(),O=g.memoizedState!==null,A!==null?A.memoizedState!==null!==O&&(g.flags|=8192):O&&(g.flags|=8192),O?(_&536870912)!==0&&(g.flags&128)===0&&(ys(g),g.subtreeFlags&6&&(g.flags|=8192)):ys(g),_=g.updateQueue,_!==null&&Lp(g,_.retryQueue),_=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(_=A.memoizedState.cachePool.pool),O=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(O=g.memoizedState.cachePool.pool),O!==_&&(g.flags|=2048),A!==null&&Ge(Zh),null;case 24:return _=null,A!==null&&(_=A.memoizedState.cache),g.memoizedState.cache!==_&&(g.flags|=2048),sA(as),ys(g),null;case 25:return null;case 30:return null}throw Error(i(156,g.tag))}function w0(A,g){switch(rh(g),g.tag){case 1:return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 3:return sA(as),Oe(),A=g.flags,(A&65536)!==0&&(A&128)===0?(g.flags=A&-65537|128,g):null;case 26:case 27:case 5:return Ve(g),null;case 31:if(g.memoizedState!==null){if(Pu(g),g.alternate===null)throw Error(i(340));Qe()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 13:if(Pu(g),A=g.memoizedState,A!==null&&A.dehydrated!==null){if(g.alternate===null)throw Error(i(340));Qe()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 19:return Ge(Os),null;case 4:return Oe(),null;case 10:return sA(g.type),null;case 22:case 23:return Pu(g),hh(),A!==null&&Ge(Zh),A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 24:return sA(as),null;case 25:return null;default:return null}}function L1(A,g){switch(rh(g),g.tag){case 3:sA(as),Oe();break;case 26:case 27:case 5:Ve(g);break;case 4:Oe();break;case 31:g.memoizedState!==null&&Pu(g);break;case 13:Pu(g);break;case 19:Ge(Os);break;case 10:sA(g.type);break;case 22:case 23:Pu(g),hh(),A!==null&&Ge(Zh);break;case 24:sA(as)}}function $d(A,g){try{var _=g.updateQueue,O=_!==null?_.lastEffect:null;if(O!==null){var j=O.next;_=j;do{if((_.tag&A)===A){O=void 0;var V=_.create,ve=_.inst;O=V(),ve.destroy=O}_=_.next}while(_!==j)}}catch(qe){Go(g,g.return,qe)}}function yh(A,g,_){try{var O=g.updateQueue,j=O!==null?O.lastEffect:null;if(j!==null){var V=j.next;O=V;do{if((O.tag&A)===A){var ve=O.inst,qe=ve.destroy;if(qe!==void 0){ve.destroy=void 0,j=g;var bt=_,Vt=qe;try{Vt()}catch(un){Go(j,bt,un)}}}O=O.next}while(O!==V)}}catch(un){Go(g,g.return,un)}}function ig(A){var g=A.updateQueue;if(g!==null){var _=A.stateNode;try{Ah(g,_)}catch(O){Go(A,A.return,O)}}}function Hd(A,g,_){_.props=Wa(A.type,A.memoizedProps),_.state=A.memoizedState;try{_.componentWillUnmount()}catch(O){Go(A,g,O)}}function Wl(A,g){try{var _=A.ref;if(_!==null){switch(A.tag){case 26:case 27:case 5:var O=A.stateNode;break;case 30:O=A.stateNode;break;default:O=A.stateNode}typeof _=="function"?A.refCleanup=_(O):_.current=O}}catch(j){Go(A,g,j)}}function zu(A,g){var _=A.ref,O=A.refCleanup;if(_!==null)if(typeof O=="function")try{O()}catch(j){Go(A,g,j)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(j){Go(A,g,j)}else _.current=null}function AC(A){var g=A.type,_=A.memoizedProps,O=A.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":_.autoFocus&&O.focus();break e;case"img":_.src?O.src=_.src:_.srcSet&&(O.srcset=_.srcSet)}}catch(j){Go(A,A.return,j)}}function z1(A,g,_){try{var O=A.stateNode;Hp(O,A.type,_,g),O[mn]=g}catch(j){Go(A,A.return,j)}}function hC(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&rr(A.type)||A.tag===4}function _v(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||hC(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&rr(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function xv(A,g,_){var O=A.tag;if(O===5||O===6)A=A.stateNode,g?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(A,g):(g=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,g.appendChild(A),_=_._reactRootContainer,_!=null||g.onclick!==null||(g.onclick=Na));else if(O!==4&&(O===27&&rr(A.type)&&(_=A.stateNode,g=null),A=A.child,A!==null))for(xv(A,g,_),A=A.sibling;A!==null;)xv(A,g,_),A=A.sibling}function F1(A,g,_){var O=A.tag;if(O===5||O===6)A=A.stateNode,g?_.insertBefore(A,g):_.appendChild(A);else if(O!==4&&(O===27&&rr(A.type)&&(_=A.stateNode),A=A.child,A!==null))for(F1(A,g,_),A=A.sibling;A!==null;)F1(A,g,_),A=A.sibling}function j1(A){var g=A.stateNode,_=A.memoizedProps;try{for(var O=A.type,j=g.attributes;j.length;)g.removeAttributeNode(j[0]);Va(g,O,_),g[Vr]=A,g[mn]=_}catch(V){Go(A,A.return,V)}}var Zd=!1,qa=!1,zp=!1,dC=typeof WeakSet=="function"?WeakSet:Set,Qr=null;function rg(A,g){if(A=A.containerInfo,vg=Fi,A=Nm(A),Gm(A)){if("selectionStart"in A)var _={start:A.selectionStart,end:A.selectionEnd};else e:{_=(_=A.ownerDocument)&&_.defaultView||window;var O=_.getSelection&&_.getSelection();if(O&&O.rangeCount!==0){_=O.anchorNode;var j=O.anchorOffset,V=O.focusNode;O=O.focusOffset;try{_.nodeType,V.nodeType}catch{_=null;break e}var ve=0,qe=-1,bt=-1,Vt=0,un=0,pn=A,Xt=null;t:for(;;){for(var rn;pn!==_||j!==0&&pn.nodeType!==3||(qe=ve+j),pn!==V||O!==0&&pn.nodeType!==3||(bt=ve+O),pn.nodeType===3&&(ve+=pn.nodeValue.length),(rn=pn.firstChild)!==null;)Xt=pn,pn=rn;for(;;){if(pn===A)break t;if(Xt===_&&++Vt===j&&(qe=ve),Xt===V&&++un===O&&(bt=ve),(rn=pn.nextSibling)!==null)break;pn=Xt,Xt=pn.parentNode}pn=rn}_=qe===-1||bt===-1?null:{start:qe,end:bt}}else _=null}_=_||{start:0,end:0}}else _=null;for(ay={focusedElem:A,selectionRange:_},Fi=!1,Qr=g;Qr!==null;)if(g=Qr,A=g.child,(g.subtreeFlags&1028)!==0&&A!==null)A.return=g,Qr=A;else for(;Qr!==null;){switch(g=Qr,V=g.alternate,A=g.flags,g.tag){case 0:if((A&4)!==0&&(A=g.updateQueue,A=A!==null?A.events:null,A!==null))for(_=0;_<A.length;_++)j=A[_],j.ref.impl=j.nextImpl;break;case 11:case 15:break;case 1:if((A&1024)!==0&&V!==null){A=void 0,_=g,j=V.memoizedProps,V=V.memoizedState,O=_.stateNode;try{var Ii=Wa(_.type,j);A=O.getSnapshotBeforeUpdate(Ii,V),O.__reactInternalSnapshotBeforeUpdate=A}catch(or){Go(_,_.return,or)}}break;case 3:if((A&1024)!==0){if(A=g.stateNode.containerInfo,_=A.nodeType,_===9)Zp(A);else if(_===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":Zp(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(i(163))}if(A=g.sibling,A!==null){A.return=g.return,Qr=A;break}Qr=g.return}}function N1(A,g,_){var O=_.flags;switch(_.tag){case 0:case 11:case 15:Xd(A,_),O&4&&$d(5,_);break;case 1:if(Xd(A,_),O&4)if(A=_.stateNode,g===null)try{A.componentDidMount()}catch(ve){Go(_,_.return,ve)}else{var j=Wa(_.type,g.memoizedProps);g=g.memoizedState;try{A.componentDidUpdate(j,g,A.__reactInternalSnapshotBeforeUpdate)}catch(ve){Go(_,_.return,ve)}}O&64&&ig(_),O&512&&Wl(_,_.return);break;case 3:if(Xd(A,_),O&64&&(A=_.updateQueue,A!==null)){if(g=null,_.child!==null)switch(_.child.tag){case 27:case 5:g=_.child.stateNode;break;case 1:g=_.child.stateNode}try{Ah(A,g)}catch(ve){Go(_,_.return,ve)}}break;case 27:g===null&&O&4&&j1(_);case 26:case 5:Xd(A,_),g===null&&O&4&&AC(_),O&512&&Wl(_,_.return);break;case 12:Xd(A,_);break;case 31:Xd(A,_),O&4&&Fp(A,_);break;case 13:Xd(A,_),O&4&&G1(A,_),O&64&&(A=_.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(_=J1.bind(null,_),Vl(A,_))));break;case 22:if(O=_.memoizedState!==null||Zd,!O){g=g!==null&&g.memoizedState!==null||qa,j=Zd;var V=qa;Zd=O,(qa=g)&&!V?Uc(A,_,(_.subtreeFlags&8772)!==0):Xd(A,_),Zd=j,qa=V}break;case 30:break;default:Xd(A,_)}}function og(A){var g=A.alternate;g!==null&&(A.alternate=null,og(g)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(g=A.stateNode,g!==null&&Jl(g)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var vs=null,ql=!1;function ld(A,g,_){for(_=_.child;_!==null;)Mv(A,g,_),_=_.sibling}function Mv(A,g,_){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(be,_)}catch{}switch(_.tag){case 26:qa||zu(_,g),ld(A,g,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:qa||zu(_,g);var O=vs,j=ql;rr(_.type)&&(vs=_.stateNode,ql=!1),ld(A,g,_),Cg(_.stateNode),vs=O,ql=j;break;case 5:qa||zu(_,g);case 6:if(O=vs,j=ql,vs=null,ld(A,g,_),vs=O,ql=j,vs!==null)if(ql)try{(vs.nodeType===9?vs.body:vs.nodeName==="HTML"?vs.ownerDocument.body:vs).removeChild(_.stateNode)}catch(V){Go(_,g,V)}else try{vs.removeChild(_.stateNode)}catch(V){Go(_,g,V)}break;case 18:vs!==null&&(ql?(A=vs,uy(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,_.stateNode),Wu(A)):uy(vs,_.stateNode));break;case 4:O=vs,j=ql,vs=_.stateNode.containerInfo,ql=!0,ld(A,g,_),vs=O,ql=j;break;case 0:case 11:case 14:case 15:yh(2,_,g),qa||yh(4,_,g),ld(A,g,_);break;case 1:qa||(zu(_,g),O=_.stateNode,typeof O.componentWillUnmount=="function"&&Hd(_,g,O)),ld(A,g,_);break;case 21:ld(A,g,_);break;case 22:qa=(O=qa)||_.memoizedState!==null,ld(A,g,_),qa=O;break;default:ld(A,g,_)}}function Fp(A,g){if(g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null))){A=A.dehydrated;try{Wu(A)}catch(_){Go(g,g.return,_)}}}function G1(A,g){if(g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Wu(A)}catch(_){Go(g,g.return,_)}}function sg(A){switch(A.tag){case 31:case 13:case 19:var g=A.stateNode;return g===null&&(g=A.stateNode=new dC),g;case 22:return A=A.stateNode,g=A._retryCache,g===null&&(g=A._retryCache=new dC),g;default:throw Error(i(435,A.tag))}}function jp(A,g){var _=sg(A);g.forEach(function(O){if(!_.has(O)){_.add(O);var j=Jx.bind(null,A,O);O.then(j,j)}})}function xl(A,g){var _=g.deletions;if(_!==null)for(var O=0;O<_.length;O++){var j=_[O],V=A,ve=g,qe=ve;e:for(;qe!==null;){switch(qe.tag){case 27:if(rr(qe.type)){vs=qe.stateNode,ql=!1;break e}break;case 5:vs=qe.stateNode,ql=!1;break e;case 3:case 4:vs=qe.stateNode.containerInfo,ql=!0;break e}qe=qe.return}if(vs===null)throw Error(i(160));Mv(V,ve,j),vs=null,ql=!1,V=j.alternate,V!==null&&(V.return=null),j.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)fC(g,A),g=g.sibling}var dc=null;function fC(A,g){var _=A.alternate,O=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:xl(g,A),Gs(A),O&4&&(yh(3,A,A.return),$d(3,A),yh(5,A,A.return));break;case 1:xl(g,A),Gs(A),O&512&&(qa||_===null||zu(_,_.return)),O&64&&Zd&&(A=A.updateQueue,A!==null&&(O=A.callbacks,O!==null&&(_=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=_===null?O:_.concat(O))));break;case 26:var j=dc;if(xl(g,A),Gs(A),O&512&&(qa||_===null||zu(_,_.return)),O&4){var V=_!==null?_.memoizedState:null;if(O=A.memoizedState,_===null)if(O===null)if(A.stateNode===null){e:{O=A.type,_=A.memoizedProps,j=j.ownerDocument||j;t:switch(O){case"title":V=j.getElementsByTagName("title")[0],(!V||V[Ki]||V[Vr]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=j.createElement(O),j.head.insertBefore(V,j.querySelector("head > title"))),Va(V,O,_),V[Vr]=A,Ho(V),O=V;break e;case"link":var ve=ce("link","href",j).get(O+(_.href||""));if(ve){for(var qe=0;qe<ve.length;qe++)if(V=ve[qe],V.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&V.getAttribute("rel")===(_.rel==null?null:_.rel)&&V.getAttribute("title")===(_.title==null?null:_.title)&&V.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){ve.splice(qe,1);break t}}V=j.createElement(O),Va(V,O,_),j.head.appendChild(V);break;case"meta":if(ve=ce("meta","content",j).get(O+(_.content||""))){for(qe=0;qe<ve.length;qe++)if(V=ve[qe],V.getAttribute("content")===(_.content==null?null:""+_.content)&&V.getAttribute("name")===(_.name==null?null:_.name)&&V.getAttribute("property")===(_.property==null?null:_.property)&&V.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&V.getAttribute("charset")===(_.charSet==null?null:_.charSet)){ve.splice(qe,1);break t}}V=j.createElement(O),Va(V,O,_),j.head.appendChild(V);break;default:throw Error(i(468,O))}V[Vr]=A,Ho(V),O=V}A.stateNode=O}else _e(j,A.type,A.stateNode);else A.stateNode=D(j,O,A.memoizedProps);else V!==O?(V===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):V.count--,O===null?_e(j,A.type,A.stateNode):D(j,O,A.memoizedProps)):O===null&&A.stateNode!==null&&z1(A,A.memoizedProps,_.memoizedProps)}break;case 27:xl(g,A),Gs(A),O&512&&(qa||_===null||zu(_,_.return)),_!==null&&O&4&&z1(A,A.memoizedProps,_.memoizedProps);break;case 5:if(xl(g,A),Gs(A),O&512&&(qa||_===null||zu(_,_.return)),A.flags&32){j=A.stateNode;try{Io(j,"")}catch(Ii){Go(A,A.return,Ii)}}O&4&&A.stateNode!=null&&(j=A.memoizedProps,z1(A,j,_!==null?_.memoizedProps:j)),O&1024&&(zp=!0);break;case 6:if(xl(g,A),Gs(A),O&4){if(A.stateNode===null)throw Error(i(162));O=A.memoizedProps,_=A.stateNode;try{_.nodeValue=O}catch(Ii){Go(A,A.return,Ii)}}break;case 3:if(ne=null,j=dc,dc=N0(g.containerInfo),xl(g,A),dc=j,Gs(A),O&4&&_!==null&&_.memoizedState.isDehydrated)try{Wu(g.containerInfo)}catch(Ii){Go(A,A.return,Ii)}zp&&(zp=!1,Wf(A));break;case 4:O=dc,dc=N0(A.stateNode.containerInfo),xl(g,A),Gs(A),dc=O;break;case 12:xl(g,A),Gs(A);break;case 31:xl(g,A),Gs(A),O&4&&(O=A.updateQueue,O!==null&&(A.updateQueue=null,jp(A,O)));break;case 13:xl(g,A),Gs(A),A.child.flags&8192&&A.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(ug=ei()),O&4&&(O=A.updateQueue,O!==null&&(A.updateQueue=null,jp(A,O)));break;case 22:j=A.memoizedState!==null;var bt=_!==null&&_.memoizedState!==null,Vt=Zd,un=qa;if(Zd=Vt||j,qa=un||bt,xl(g,A),qa=un,Zd=Vt,Gs(A),O&8192)e:for(g=A.stateNode,g._visibility=j?g._visibility&-2:g._visibility|1,j&&(_===null||bt||Zd||qa||qf(A)),_=null,g=A;;){if(g.tag===5||g.tag===26){if(_===null){bt=_=g;try{if(V=bt.stateNode,j)ve=V.style,typeof ve.setProperty=="function"?ve.setProperty("display","none","important"):ve.display="none";else{qe=bt.stateNode;var pn=bt.memoizedProps.style,Xt=pn!=null&&pn.hasOwnProperty("display")?pn.display:null;qe.style.display=Xt==null||typeof Xt=="boolean"?"":(""+Xt).trim()}}catch(Ii){Go(bt,bt.return,Ii)}}}else if(g.tag===6){if(_===null){bt=g;try{bt.stateNode.nodeValue=j?"":bt.memoizedProps}catch(Ii){Go(bt,bt.return,Ii)}}}else if(g.tag===18){if(_===null){bt=g;try{var rn=bt.stateNode;j?ju(rn,!0):ju(bt.stateNode,!1)}catch(Ii){Go(bt,bt.return,Ii)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===A)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break e;for(;g.sibling===null;){if(g.return===null||g.return===A)break e;_===g&&(_=null),g=g.return}_===g&&(_=null),g.sibling.return=g.return,g=g.sibling}O&4&&(O=A.updateQueue,O!==null&&(_=O.retryQueue,_!==null&&(O.retryQueue=null,jp(A,_))));break;case 19:xl(g,A),Gs(A),O&4&&(O=A.updateQueue,O!==null&&(A.updateQueue=null,jp(A,O)));break;case 30:break;case 21:break;default:xl(g,A),Gs(A)}}function Gs(A){var g=A.flags;if(g&2){try{for(var _,O=A.return;O!==null;){if(hC(O)){_=O;break}O=O.return}if(_==null)throw Error(i(160));switch(_.tag){case 27:var j=_.stateNode,V=_v(A);F1(A,V,j);break;case 5:var ve=_.stateNode;_.flags&32&&(Io(ve,""),_.flags&=-33);var qe=_v(A);F1(A,qe,ve);break;case 3:case 4:var bt=_.stateNode.containerInfo,Vt=_v(A);xv(A,Vt,bt);break;default:throw Error(i(161))}}catch(un){Go(A,A.return,un)}A.flags&=-3}g&4096&&(A.flags&=-4097)}function Wf(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var g=A;Wf(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),A=A.sibling}}function Xd(A,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)N1(A,g.alternate,g),g=g.sibling}function qf(A){for(A=A.child;A!==null;){var g=A;switch(g.tag){case 0:case 11:case 14:case 15:yh(4,g,g.return),qf(g);break;case 1:zu(g,g.return);var _=g.stateNode;typeof _.componentWillUnmount=="function"&&Hd(g,g.return,_),qf(g);break;case 27:Cg(g.stateNode);case 26:case 5:zu(g,g.return),qf(g);break;case 22:g.memoizedState===null&&qf(g);break;case 30:qf(g);break;default:qf(g)}A=A.sibling}}function Uc(A,g,_){for(_=_&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var O=g.alternate,j=A,V=g,ve=V.flags;switch(V.tag){case 0:case 11:case 15:Uc(j,V,_),$d(4,V);break;case 1:if(Uc(j,V,_),O=V,j=O.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(Vt){Go(O,O.return,Vt)}if(O=V,j=O.updateQueue,j!==null){var qe=O.stateNode;try{var bt=j.shared.hiddenCallbacks;if(bt!==null)for(j.shared.hiddenCallbacks=null,j=0;j<bt.length;j++)ka(bt[j],qe)}catch(Vt){Go(O,O.return,Vt)}}_&&ve&64&&ig(V),Wl(V,V.return);break;case 27:j1(V);case 26:case 5:Uc(j,V,_),_&&O===null&&ve&4&&AC(V),Wl(V,V.return);break;case 12:Uc(j,V,_);break;case 31:Uc(j,V,_),_&&ve&4&&Fp(j,V);break;case 13:Uc(j,V,_),_&&ve&4&&G1(j,V);break;case 22:V.memoizedState===null&&Uc(j,V,_),Wl(V,V.return);break;case 30:break;default:Uc(j,V,_)}g=g.sibling}}function S0(A,g){var _=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(_=A.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==_&&(A!=null&&A.refCount++,_!=null&&Ia(_))}function Q1(A,g){A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Ia(A))}function UA(A,g,_,O){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)pC(A,g,_,O),g=g.sibling}function pC(A,g,_,O){var j=g.flags;switch(g.tag){case 0:case 11:case 15:UA(A,g,_,O),j&2048&&$d(9,g);break;case 1:UA(A,g,_,O);break;case 3:UA(A,g,_,O),j&2048&&(A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Ia(A)));break;case 12:if(j&2048){UA(A,g,_,O),A=g.stateNode;try{var V=g.memoizedProps,ve=V.id,qe=V.onPostCommit;typeof qe=="function"&&qe(ve,g.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(bt){Go(g,g.return,bt)}}else UA(A,g,_,O);break;case 31:UA(A,g,_,O);break;case 13:UA(A,g,_,O);break;case 23:break;case 22:V=g.stateNode,ve=g.alternate,g.memoizedState!==null?V._visibility&2?UA(A,g,_,O):E0(A,g):V._visibility&2?UA(A,g,_,O):(V._visibility|=2,Yf(A,g,_,O,(g.subtreeFlags&10256)!==0||!1)),j&2048&&S0(ve,g);break;case 24:UA(A,g,_,O),j&2048&&Q1(g.alternate,g);break;default:UA(A,g,_,O)}}function Yf(A,g,_,O,j){for(j=j&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var V=A,ve=g,qe=_,bt=O,Vt=ve.flags;switch(ve.tag){case 0:case 11:case 15:Yf(V,ve,qe,bt,j),$d(8,ve);break;case 23:break;case 22:var un=ve.stateNode;ve.memoizedState!==null?un._visibility&2?Yf(V,ve,qe,bt,j):E0(V,ve):(un._visibility|=2,Yf(V,ve,qe,bt,j)),j&&Vt&2048&&S0(ve.alternate,ve);break;case 24:Yf(V,ve,qe,bt,j),j&&Vt&2048&&Q1(ve.alternate,ve);break;default:Yf(V,ve,qe,bt,j)}g=g.sibling}}function E0(A,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var _=A,O=g,j=O.flags;switch(O.tag){case 22:E0(_,O),j&2048&&S0(O.alternate,O);break;case 24:E0(_,O),j&2048&&Q1(O.alternate,O);break;default:E0(_,O)}g=g.sibling}}var B0=8192;function ag(A,g,_){if(A.subtreeFlags&B0)for(A=A.child;A!==null;)Np(A,g,_),A=A.sibling}function Np(A,g,_){switch(A.tag){case 26:ag(A,g,_),A.flags&B0&&A.memoizedState!==null&&ze(_,dc,A.memoizedState,A.memoizedProps);break;case 5:ag(A,g,_);break;case 3:case 4:var O=dc;dc=N0(A.stateNode.containerInfo),ag(A,g,_),dc=O;break;case 22:A.memoizedState===null&&(O=A.alternate,O!==null&&O.memoizedState!==null?(O=B0,B0=16777216,ag(A,g,_),B0=O):ag(A,g,_));break;default:ag(A,g,_)}}function mC(A){var g=A.alternate;if(g!==null&&(A=g.child,A!==null)){g.child=null;do g=A.sibling,A.sibling=null,A=g;while(A!==null)}}function O0(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var O=g[_];Qr=O,Sv(O,A)}mC(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)wv(A),A=A.sibling}function wv(A){switch(A.tag){case 0:case 11:case 15:O0(A),A.flags&2048&&yh(9,A,A.return);break;case 3:O0(A);break;case 12:O0(A);break;case 22:var g=A.stateNode;A.memoizedState!==null&&g._visibility&2&&(A.return===null||A.return.tag!==13)?(g._visibility&=-3,W1(A)):O0(A);break;default:O0(A)}}function W1(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var _=0;_<g.length;_++){var O=g[_];Qr=O,Sv(O,A)}mC(A)}for(A=A.child;A!==null;){switch(g=A,g.tag){case 0:case 11:case 15:yh(8,g,g.return),W1(g);break;case 22:_=g.stateNode,_._visibility&2&&(_._visibility&=-3,W1(g));break;default:W1(g)}A=A.sibling}}function Sv(A,g){for(;Qr!==null;){var _=Qr;switch(_.tag){case 0:case 11:case 15:yh(8,_,g);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var O=_.memoizedState.cachePool.pool;O!=null&&O.refCount++}break;case 24:Ia(_.memoizedState.cache)}if(O=_.child,O!==null)O.return=_,Qr=O;else e:for(_=A;Qr!==null;){O=Qr;var j=O.sibling,V=O.return;if(og(O),O===_){Qr=null;break e}if(j!==null){j.return=V,Qr=j;break e}Qr=V}}}var Hx={getCacheForType:function(A){var g=sl(as),_=g.data.get(A);return _===void 0&&(_=A(),g.data.set(A,_)),_},cacheSignal:function(){return sl(as).controller.signal}},Ev=typeof WeakMap=="function"?WeakMap:Map,xo=0,cs=null,co=null,go=0,es=0,Lc=null,Vf=!1,lg=!1,Gp=!1,LA=0,ya=0,$f=0,Qp=0,Bv=0,cA=0,Wp=0,qp=null,fc=null,q1=!1,ug=0,gC=0,ud=1/0,Y1=null,Jd=null,Ml=0,Hf=null,cg=null,cd=0,Ov=0,Iv=null,Ag=null,sa=0,I0=null;function zc(){return(xo&2)!==0&&go!==0?go&-go:Be.T!==null?Yl():Pi()}function kv(){if(cA===0)if((go&536870912)===0||Gr){var A=Mt;Mt<<=1,(Mt&3932160)===0&&(Mt=262144),cA=A}else cA=536870912;return A=ls.current,A!==null&&(A.flags|=32),cA}function Fu(A,g,_){(A===cs&&(es===2||es===9)||A.cancelPendingCommit!==null)&&(hg(A,0),ef(A,go,cA,!1)),ir(A,_),((xo&2)===0||A!==cs)&&(A===cs&&((xo&2)===0&&(Qp|=_),ya===4&&ef(A,go,cA,!1)),bh(A))}function Yp(A,g,_){if((xo&6)!==0)throw Error(i(327));var O=!_&&(g&127)===0&&(g&A.expiredLanes)===0||gi(A,g),j=O?_C(A,g):Dv(A,g,!0),V=O;do{if(j===0){lg&&!O&&ef(A,g,0,!1);break}else{if(_=A.current.alternate,V&&!yC(_)){j=Dv(A,g,!1),V=!1;continue}if(j===2){if(V=g,A.errorRecoveryDisabledLanes&V)var ve=0;else ve=A.pendingLanes&-536870913,ve=ve!==0?ve:ve&536870912?536870912:0;if(ve!==0){g=ve;e:{var qe=A;j=qp;var bt=qe.current.memoizedState.isDehydrated;if(bt&&(hg(qe,ve).flags|=256),ve=Dv(qe,ve,!1),ve!==2){if(Gp&&!bt){qe.errorRecoveryDisabledLanes|=V,Qp|=V,j=4;break e}V=fc,fc=j,V!==null&&(fc===null?fc=V:fc.push.apply(fc,V))}j=ve}if(V=!1,j!==2)continue}}if(j===1){hg(A,0),ef(A,g,0,!0);break}e:{switch(O=A,V=j,V){case 0:case 1:throw Error(i(345));case 4:if((g&4194048)!==g)break;case 6:ef(O,g,cA,!Vf);break e;case 2:fc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((g&62914560)===g&&(j=ug+300-ei(),10<j)){if(ef(O,g,cA,!Vf),Zn(O,0,!0)!==0)break e;cd=g,O.timeoutHandle=Qv(Tv.bind(null,O,_,fc,Y1,q1,g,cA,Qp,Wp,Vf,V,"Throttled",-0,0),j);break e}Tv(O,_,fc,Y1,q1,g,cA,Qp,Wp,Vf,V,null,-0,0)}}break}while(!0);bh(A)}function Tv(A,g,_,O,j,V,ve,qe,bt,Vt,un,pn,Xt,rn){if(A.timeoutHandle=-1,pn=g.subtreeFlags,pn&8192||(pn&16785408)===16785408){pn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Na},Np(g,V,pn);var Ii=(V&62914560)===V?ug-ei():(V&4194048)===V?gC-ei():0;if(Ii=nt(pn,Ii),Ii!==null){cd=V,A.cancelPendingCommit=Ii(T0.bind(null,A,g,V,_,O,j,ve,qe,bt,un,pn,null,Xt,rn)),ef(A,V,ve,!Vt);return}}T0(A,g,V,_,O,j,ve,qe,bt)}function yC(A){for(var g=A;;){var _=g.tag;if((_===0||_===11||_===15)&&g.flags&16384&&(_=g.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var O=0;O<_.length;O++){var j=_[O],V=j.getSnapshot;j=j.value;try{if(!Ls(V(),j))return!1}catch{return!1}}if(_=g.child,g.subtreeFlags&16384&&_!==null)_.return=g,g=_;else{if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function ef(A,g,_,O){g&=~Bv,g&=~Qp,A.suspendedLanes|=g,A.pingedLanes&=~g,O&&(A.warmLanes|=g),O=A.expirationTimes;for(var j=g;0<j;){var V=31-Pe(j),ve=1<<V;O[V]=-1,j&=~ve}_!==0&&gr(A,_,g)}function V1(){return(xo&6)===0?($p(0),!1):!0}function Rv(){if(co!==null){if(es===0)var A=co.return;else A=co,SA=Ar=null,l(A),Nd=null,Tu=0,A=co;for(;A!==null;)L1(A.alternate,A),A=A.return;co=null}}function hg(A,g){var _=A.timeoutHandle;_!==-1&&(A.timeoutHandle=-1,n2(_)),_=A.cancelPendingCommit,_!==null&&(A.cancelPendingCommit=null,_()),cd=0,Rv(),cs=A,co=_=zl(A.current,null),go=g,es=0,Lc=null,Vf=!1,lg=gi(A,g),Gp=!1,Wp=cA=Bv=Qp=$f=ya=0,fc=qp=null,q1=!1,(g&8)!==0&&(g|=g&32);var O=A.entangledLanes;if(O!==0)for(A=A.entanglements,O&=g;0<O;){var j=31-Pe(O),V=1<<j;g|=A[j],O&=~V}return LA=g,Ou(),_}function vC(A,g){Sr=null,Be.H=fh,g===jd||g===Uf?(g=y0(),es=3):g===OA?(g=y0(),es=4):es=g===Dp?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Lc=g,co===null&&(ya=1,Xm(A,Fl(g,A.current)))}function k0(){var A=ls.current;return A===null?!0:(go&4194048)===go?Ac===null:(go&62914560)===go||(go&536870912)!==0?A===Ac:!1}function bC(){var A=Be.H;return Be.H=fh,A===null?fh:A}function CC(){var A=Be.A;return Be.A=Hx,A}function $1(){ya=4,Vf||(go&4194048)!==go&&ls.current!==null||(lg=!0),($f&134217727)===0&&(Qp&134217727)===0||cs===null||ef(cs,go,cA,!1)}function Dv(A,g,_){var O=xo;xo|=2;var j=bC(),V=CC();(cs!==A||go!==g)&&(Y1=null,hg(A,g)),g=!1;var ve=ya;e:do try{if(es!==0&&co!==null){var qe=co,bt=Lc;switch(es){case 8:Rv(),ve=6;break e;case 3:case 2:case 9:case 6:ls.current===null&&(g=!0);var Vt=es;if(es=0,Lc=null,Ad(A,qe,bt,Vt),_&&lg){ve=0;break e}break;default:Vt=es,es=0,Lc=null,Ad(A,qe,bt,Vt)}}Zx(),ve=ya;break}catch(un){vC(A,un)}while(!0);return g&&A.shellSuspendCounter++,SA=Ar=null,xo=O,Be.H=j,Be.A=V,co===null&&(cs=null,go=0,Ou()),ve}function Zx(){for(;co!==null;)Kv(co)}function _C(A,g){var _=xo;xo|=2;var O=bC(),j=CC();cs!==A||go!==g?(Y1=null,ud=ei()+500,hg(A,g)):lg=gi(A,g);e:do try{if(es!==0&&co!==null){g=co;var V=Lc;t:switch(es){case 1:es=0,Lc=null,Ad(A,g,V,1);break;case 2:case 9:if(sh(V)){es=0,Lc=null,tf(g);break}g=function(){es!==2&&es!==9||cs!==A||(es=7),bh(A)},V.then(g,g);break e;case 3:es=7;break e;case 4:es=5;break e;case 7:sh(V)?(es=0,Lc=null,tf(g)):(es=0,Lc=null,Ad(A,g,V,7));break;case 5:var ve=null;switch(co.tag){case 26:ve=co.memoizedState;case 5:case 27:var qe=co;if(ve?Re(ve):qe.stateNode.complete){es=0,Lc=null;var bt=qe.sibling;if(bt!==null)co=bt;else{var Vt=qe.return;Vt!==null?(co=Vt,nf(Vt)):co=null}break t}}es=0,Lc=null,Ad(A,g,V,5);break;case 6:es=0,Lc=null,Ad(A,g,V,6);break;case 8:Rv(),ya=6;break e;default:throw Error(i(462))}}Pv();break}catch(un){vC(A,un)}while(!0);return SA=Ar=null,Be.H=O,Be.A=j,xo=_,co!==null?0:(cs=null,go=0,Ou(),ya)}function Pv(){for(;co!==null&&!Un();)Kv(co)}function Kv(A){var g=uC(A.alternate,A,LA);A.memoizedProps=A.pendingProps,g===null?nf(A):co=g}function tf(A){var g=A,_=g.alternate;switch(g.tag){case 15:case 0:g=vv(_,g,g.pendingProps,g.type,void 0,go);break;case 11:g=vv(_,g,g.pendingProps,g.type.render,g.ref,go);break;case 5:l(g);default:L1(_,g),g=co=m0(g,LA),g=uC(_,g,LA)}A.memoizedProps=A.pendingProps,g===null?nf(A):co=g}function Ad(A,g,_,O){SA=Ar=null,l(g),Nd=null,Tu=0;var j=g.return;try{if(yv(A,j,g,_,go)){ya=1,Xm(A,Fl(_,A.current)),co=null;return}}catch(V){if(j!==null)throw co=j,V;ya=1,Xm(A,Fl(_,A.current)),co=null;return}g.flags&32768?(Gr||O===1?A=!0:lg||(go&536870912)!==0?A=!1:(Vf=A=!0,(O===2||O===9||O===3||O===6)&&(O=ls.current,O!==null&&O.tag===13&&(O.flags|=16384))),Zf(g,A)):nf(g)}function nf(A){var g=A;do{if((g.flags&32768)!==0){Zf(g,Vf);return}A=g.return;var _=cC(g.alternate,g,LA);if(_!==null){co=_;return}if(g=g.sibling,g!==null){co=g;return}co=g=A}while(g!==null);ya===0&&(ya=5)}function Zf(A,g){do{var _=w0(A.alternate,A);if(_!==null){_.flags&=32767,co=_;return}if(_=A.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!g&&(A=A.sibling,A!==null)){co=A;return}co=A=_}while(A!==null);ya=6,co=null}function T0(A,g,_,O,j,V,ve,qe,bt){A.cancelPendingCommit=null;do D0();while(Ml!==0);if((xo&6)!==0)throw Error(i(327));if(g!==null){if(g===A.current)throw Error(i(177));if(V=g.lanes|g.childLanes,V|=_A,Di(A,_,V,ve,qe,bt),A===cs&&(co=cs=null,go=0),cg=g,Hf=A,cd=_,Ov=V,Iv=j,Ag=O,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,e2(re,function(){return Z1(),null})):(A.callbackNode=null,A.callbackPriority=0),O=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||O){O=Be.T,Be.T=null,j=Ye.p,Ye.p=2,ve=xo,xo|=4;try{rg(A,g,_)}finally{xo=ve,Ye.p=j,Be.T=O}}Ml=1,Uv(),Lv(),R0()}}function Uv(){if(Ml===1){Ml=0;var A=Hf,g=cg,_=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||_){_=Be.T,Be.T=null;var O=Ye.p;Ye.p=2;var j=xo;xo|=4;try{fC(g,A);var V=ay,ve=Nm(A.containerInfo),qe=V.focusedElem,bt=V.selectionRange;if(ve!==qe&&qe&&qe.ownerDocument&&jm(qe.ownerDocument.documentElement,qe)){if(bt!==null&&Gm(qe)){var Vt=bt.start,un=bt.end;if(un===void 0&&(un=Vt),"selectionStart"in qe)qe.selectionStart=Vt,qe.selectionEnd=Math.min(un,qe.value.length);else{var pn=qe.ownerDocument||document,Xt=pn&&pn.defaultView||window;if(Xt.getSelection){var rn=Xt.getSelection(),Ii=qe.textContent.length,or=Math.min(bt.start,Ii),Cs=bt.end===void 0?or:Math.min(bt.end,Ii);!rn.extend&&or>Cs&&(ve=Cs,Cs=or,or=ve);var Dt=Fm(qe,or),Et=Fm(qe,Cs);if(Dt&&Et&&(rn.rangeCount!==1||rn.anchorNode!==Dt.node||rn.anchorOffset!==Dt.offset||rn.focusNode!==Et.node||rn.focusOffset!==Et.offset)){var qt=pn.createRange();qt.setStart(Dt.node,Dt.offset),rn.removeAllRanges(),or>Cs?(rn.addRange(qt),rn.extend(Et.node,Et.offset)):(qt.setEnd(Et.node,Et.offset),rn.addRange(qt))}}}}for(pn=[],rn=qe;rn=rn.parentNode;)rn.nodeType===1&&pn.push({element:rn,left:rn.scrollLeft,top:rn.scrollTop});for(typeof qe.focus=="function"&&qe.focus(),qe=0;qe<pn.length;qe++){var dn=pn[qe];dn.element.scrollLeft=dn.left,dn.element.scrollTop=dn.top}}Fi=!!vg,ay=vg=null}finally{xo=j,Ye.p=O,Be.T=_}}A.current=g,Ml=2}}function Lv(){if(Ml===2){Ml=0;var A=Hf,g=cg,_=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||_){_=Be.T,Be.T=null;var O=Ye.p;Ye.p=2;var j=xo;xo|=4;try{N1(A,g.alternate,g)}finally{xo=j,Ye.p=O,Be.T=_}}Ml=3}}function R0(){if(Ml===4||Ml===3){Ml=0,Cn();var A=Hf,g=cg,_=cd,O=Ag;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Ml=5:(Ml=0,cg=Hf=null,H1(A,A.pendingLanes));var j=A.pendingLanes;if(j===0&&(Jd=null),nn(_),g=g.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(be,g,void 0,(g.current.flags&128)===128)}catch{}if(O!==null){g=Be.T,j=Ye.p,Ye.p=2,Be.T=null;try{for(var V=A.onRecoverableError,ve=0;ve<O.length;ve++){var qe=O[ve];V(qe.value,{componentStack:qe.stack})}}finally{Be.T=g,Ye.p=j}}(cd&3)!==0&&D0(),bh(A),j=A.pendingLanes,(_&261930)!==0&&(j&42)!==0?A===I0?sa++:(sa=0,I0=A):sa=0,$p(0)}}function H1(A,g){(A.pooledCacheLanes&=g)===0&&(g=A.pooledCache,g!=null&&(A.pooledCache=null,Ia(g)))}function D0(){return Uv(),Lv(),R0(),Z1()}function Z1(){if(Ml!==5)return!1;var A=Hf,g=Ov;Ov=0;var _=nn(cd),O=Be.T,j=Ye.p;try{Ye.p=32>_?32:_,Be.T=null,_=Iv,Iv=null;var V=Hf,ve=cd;if(Ml=0,cg=Hf=null,cd=0,(xo&6)!==0)throw Error(i(331));var qe=xo;if(xo|=4,wv(V.current),pC(V,V.current,ve,_),xo=qe,$p(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(be,V)}catch{}return!0}finally{Ye.p=j,Be.T=O,H1(A,g)}}function X1(A,g,_){g=Fl(_,g),g=T1(A.stateNode,g,2),A=Du(A,g,2),A!==null&&(ir(A,2),bh(A))}function Go(A,g,_){if(A.tag===3)X1(A,A,_);else for(;g!==null;){if(g.tag===3){X1(g,A,_);break}else if(g.tag===1){var O=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(Jd===null||!Jd.has(O))){A=Fl(_,A),_=ad(2),O=Du(g,_,2),O!==null&&(Jm(_,O,g,A),ir(O,2),bh(O));break}}g=g.return}}function P0(A,g,_){var O=A.pingCache;if(O===null){O=A.pingCache=new Ev;var j=new Set;O.set(g,j)}else j=O.get(g),j===void 0&&(j=new Set,O.set(g,j));j.has(_)||(Gp=!0,j.add(_),A=Xx.bind(null,A,g,_),g.then(A,A))}function Xx(A,g,_){var O=A.pingCache;O!==null&&O.delete(g),A.pingedLanes|=A.suspendedLanes&_,A.warmLanes&=~_,cs===A&&(go&_)===_&&(ya===4||ya===3&&(go&62914560)===go&&300>ei()-ug?(xo&2)===0&&hg(A,0):Bv|=_,Wp===go&&(Wp=0)),bh(A)}function dg(A,g){g===0&&(g=zn()),A=Au(A,g),A!==null&&(ir(A,g),bh(A))}function J1(A){var g=A.memoizedState,_=0;g!==null&&(_=g.retryLane),dg(A,_)}function Jx(A,g){var _=0;switch(A.tag){case 31:case 13:var O=A.stateNode,j=A.memoizedState;j!==null&&(_=j.retryLane);break;case 19:O=A.stateNode;break;case 22:O=A.stateNode._retryCache;break;default:throw Error(i(314))}O!==null&&O.delete(g),dg(A,_)}function e2(A,g){return xi(A,g)}var fg=null,Vp=null,ey=!1,K0=!1,vh=!1,pc=0;function bh(A){A!==Vp&&A.next===null&&(Vp===null?fg=Vp=A:Vp=Vp.next=A),K0=!0,ey||(ey=!0,zv())}function $p(A,g){if(!vh&&K0){vh=!0;do for(var _=!1,O=fg;O!==null;){if(A!==0){var j=O.pendingLanes;if(j===0)var V=0;else{var ve=O.suspendedLanes,qe=O.pingedLanes;V=(1<<31-Pe(42|A)+1)-1,V&=j&~(ve&~qe),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(_=!0,ny(O,V))}else V=go,V=Zn(O,O===cs?V:0,O.cancelPendingCommit!==null||O.timeoutHandle!==-1),(V&3)===0||gi(O,V)||(_=!0,ny(O,V));O=O.next}while(_);vh=!1}}function t2(){U0()}function U0(){K0=ey=!1;var A=0;pc!==0&&wC()&&(A=pc);for(var g=ei(),_=null,O=fg;O!==null;){var j=O.next,V=ty(O,g);V===0?(O.next=null,_===null?fg=j:_.next=j,j===null&&(Vp=_)):(_=O,(A!==0||(V&3)!==0)&&(K0=!0)),O=j}Ml!==0&&Ml!==5||$p(A),pc!==0&&(pc=0)}function ty(A,g){for(var _=A.suspendedLanes,O=A.pingedLanes,j=A.expirationTimes,V=A.pendingLanes&-62914561;0<V;){var ve=31-Pe(V),qe=1<<ve,bt=j[ve];bt===-1?((qe&_)===0||(qe&O)!==0)&&(j[ve]=Tn(qe,g)):bt<=g&&(A.expiredLanes|=qe),V&=~qe}if(g=cs,_=go,_=Zn(A,A===g?_:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),O=A.callbackNode,_===0||A===g&&(es===2||es===9)||A.cancelPendingCommit!==null)return O!==null&&O!==null&&Kn(O),A.callbackNode=null,A.callbackPriority=0;if((_&3)===0||gi(A,_)){if(g=_&-_,g===A.callbackPriority)return g;switch(O!==null&&Kn(O),nn(_)){case 2:case 8:_=Ce;break;case 32:_=re;break;case 268435456:_=he;break;default:_=re}return O=xC.bind(null,A),_=xi(_,O),A.callbackPriority=g,A.callbackNode=_,g}return O!==null&&O!==null&&Kn(O),A.callbackPriority=2,A.callbackNode=null,2}function xC(A,g){if(Ml!==0&&Ml!==5)return A.callbackNode=null,A.callbackPriority=0,null;var _=A.callbackNode;if(D0()&&A.callbackNode!==_)return null;var O=go;return O=Zn(A,A===cs?O:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),O===0?null:(Yp(A,O,g),ty(A,ei()),A.callbackNode!=null&&A.callbackNode===_?xC.bind(null,A):null)}function ny(A,g){if(D0())return null;Yp(A,g,!0)}function zv(){Wv(function(){(xo&6)!==0?xi(It,t2):U0()})}function Yl(){if(pc===0){var A=Gl;A===0&&(A=Pt,Pt<<=1,(Pt&261888)===0&&(Pt=256)),pc=A}return pc}function Fv(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Gi(""+A)}function jv(A,g){var _=g.ownerDocument.createElement("input");return _.name=g.name,_.value=g.value,A.id&&_.setAttribute("form",A.id),g.parentNode.insertBefore(_,g),A=new FormData(A),_.parentNode.removeChild(_),A}function rf(A,g,_,O,j){if(g==="submit"&&_&&_.stateNode===j){var V=Fv((j[mn]||null).action),ve=O.submitter;ve&&(g=(g=ve[mn]||null)?Fv(g.formAction):ve.getAttribute("formAction"),g!==null&&(V=g,ve=null));var qe=new Bn("action","action",null,O,j);A.push({event:qe,listeners:[{instance:null,listener:function(){if(O.defaultPrevented){if(pc!==0){var bt=ve?jv(j,ve):new FormData(j);mu(_,{pending:!0,data:bt,method:j.method,action:V},null,bt)}}else typeof V=="function"&&(qe.preventDefault(),bt=ve?jv(j,ve):new FormData(j),mu(_,{pending:!0,data:bt,method:j.method,action:V},V,bt))},currentTarget:j}]})}}for(var Cr=0;Cr<Bp.length;Cr++){var pg=Bp[Cr],mc=pg.toLowerCase(),Ya=pg[0].toUpperCase()+pg.slice(1);Ll(mc,"on"+Ya)}Ll(Ul,"onAnimationEnd"),Ll(Fh,"onAnimationIteration"),Ll(Qm,"onAnimationStart"),Ll("dblclick","onDoubleClick"),Ll("focusin","onFocus"),Ll("focusout","onBlur"),Ll(Ic,"onTransitionRun"),Ll(jh,"onTransitionStart"),Ll(eh,"onTransitionCancel"),Ll(Tr,"onTransitionEnd"),Rl("onMouseEnter",["mouseout","mouseover"]),Rl("onMouseLeave",["mouseout","mouseover"]),Rl("onPointerEnter",["pointerout","pointerover"]),Rl("onPointerLeave",["pointerout","pointerover"]),Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var L0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(L0));function MC(A,g){g=(g&4)!==0;for(var _=0;_<A.length;_++){var O=A[_],j=O.event;O=O.listeners;e:{var V=void 0;if(g)for(var ve=O.length-1;0<=ve;ve--){var qe=O[ve],bt=qe.instance,Vt=qe.currentTarget;if(qe=qe.listener,bt!==V&&j.isPropagationStopped())break e;V=qe,j.currentTarget=Vt;try{V(j)}catch(un){CA(un)}j.currentTarget=null,V=bt}else for(ve=0;ve<O.length;ve++){if(qe=O[ve],bt=qe.instance,Vt=qe.currentTarget,qe=qe.listener,bt!==V&&j.isPropagationStopped())break e;V=qe,j.currentTarget=Vt;try{V(j)}catch(un){CA(un)}j.currentTarget=null,V=bt}}}}function Ao(A,g){var _=g[ri];_===void 0&&(_=g[ri]=new Set);var O=A+"__bubble";_.has(O)||(F0(g,A,2,!1),_.add(O))}function z0(A,g,_){var O=0;g&&(O|=4),F0(_,A,O,g)}var Ch="_reactListening"+Math.random().toString(36).slice(2);function iy(A){if(!A[Ch]){A[Ch]=!0,Tl.forEach(function(_){_!=="selectionchange"&&(Xf.has(_)||z0(_,!1,A),z0(_,!0,A))});var g=A.nodeType===9?A:A.ownerDocument;g===null||g[Ch]||(g[Ch]=!0,z0("selectionchange",!1,g))}}function F0(A,g,_,O){switch(wl(g)){case 2:var j=tr;break;case 8:j=Ti;break;default:j=ui}_=j.bind(null,g,_,A),j=void 0,!os||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(j=!0),O?j!==void 0?A.addEventListener(g,_,{capture:!0,passive:j}):A.addEventListener(g,_,!0):j!==void 0?A.addEventListener(g,_,{passive:j}):A.addEventListener(g,_,!1)}function ry(A,g,_,O,j){var V=O;if((g&1)===0&&(g&2)===0&&O!==null)e:for(;;){if(O===null)return;var ve=O.tag;if(ve===3||ve===4){var qe=O.stateNode.containerInfo;if(qe===j)break;if(ve===4)for(ve=O.return;ve!==null;){var bt=ve.tag;if((bt===3||bt===4)&&ve.stateNode.containerInfo===j)return;ve=ve.return}for(;qe!==null;){if(ve=po(qe),ve===null)return;if(bt=ve.tag,bt===5||bt===6||bt===26||bt===27){O=V=ve;continue e}qe=qe.parentNode}}O=O.return}_o(function(){var Vt=V,un=su(_),pn=[];e:{var Xt=p0.get(A);if(Xt!==void 0){var rn=Bn,Ii=A;switch(A){case"keypress":if(X(_)===0)break e;case"keydown":case"keyup":rn=Bu;break;case"focusin":Ii="focus",rn=Or;break;case"focusout":Ii="blur",rn=Or;break;case"beforeblur":case"afterblur":rn=Or;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rn=br;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rn=eo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rn=x1;break;case Ul:case Fh:case Qm:rn=ZA;break;case Tr:rn=pv;break;case"scroll":case"scrollend":rn=Ui;break;case"wheel":rn=Of;break;case"copy":case"cut":case"paste":rn=kr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rn=xp;break;case"toggle":case"beforetoggle":rn=h0}var or=(g&4)!==0,Cs=!or&&(A==="scroll"||A==="scrollend"),Dt=or?Xt!==null?Xt+"Capture":null:Xt;or=[];for(var Et=Vt,qt;Et!==null;){var dn=Et;if(qt=dn.stateNode,dn=dn.tag,dn!==5&&dn!==26&&dn!==27||qt===null||Dt===null||(dn=au(Et,Dt),dn!=null&&or.push(Fc(Et,dn,qt))),Cs)break;Et=Et.return}0<or.length&&(Xt=new rn(Xt,Ii,null,_,un),pn.push({event:Xt,listeners:or}))}}if((g&7)===0){e:{if(Xt=A==="mouseover"||A==="pointerover",rn=A==="mouseout"||A==="pointerout",Xt&&_!==Xo&&(Ii=_.relatedTarget||_.fromElement)&&(po(Ii)||Ii[Ni]))break e;if((rn||Xt)&&(Xt=un.window===un?un:(Xt=un.ownerDocument)?Xt.defaultView||Xt.parentWindow:window,rn?(Ii=_.relatedTarget||_.toElement,rn=Vt,Ii=Ii?po(Ii):null,Ii!==null&&(Cs=o(Ii),or=Ii.tag,Ii!==Cs||or!==5&&or!==27&&or!==6)&&(Ii=null)):(rn=null,Ii=Vt),rn!==Ii)){if(or=br,dn="onMouseLeave",Dt="onMouseEnter",Et="mouse",(A==="pointerout"||A==="pointerover")&&(or=xp,dn="onPointerLeave",Dt="onPointerEnter",Et="pointer"),Cs=rn==null?Xt:eu(rn),qt=Ii==null?Xt:eu(Ii),Xt=new or(dn,Et+"leave",rn,_,un),Xt.target=Cs,Xt.relatedTarget=qt,dn=null,po(un)===Vt&&(or=new or(Dt,Et+"enter",Ii,_,un),or.target=qt,or.relatedTarget=Cs,dn=or),Cs=dn,rn&&Ii)t:{for(or=gg,Dt=rn,Et=Ii,qt=0,dn=Dt;dn;dn=or(dn))qt++;dn=0;for(var Xi=Et;Xi;Xi=or(Xi))dn++;for(;0<qt-dn;)Dt=or(Dt),qt--;for(;0<dn-qt;)Et=or(Et),dn--;for(;qt--;){if(Dt===Et||Et!==null&&Dt===Et.alternate){or=Dt;break t}Dt=or(Dt),Et=or(Et)}or=null}else or=null;rn!==null&&Xs(pn,Xt,rn,or,!1),Ii!==null&&Cs!==null&&Xs(pn,Cs,Ii,or,!0)}}e:{if(Xt=Vt?eu(Vt):window,rn=Xt.nodeName&&Xt.nodeName.toLowerCase(),rn==="select"||rn==="input"&&Xt.type==="file")var zo=tA;else if(wp(Xt))if(Uh)zo=f0;else{zo=S1;var ni=zm}else rn=Xt.nodeName,!rn||rn.toLowerCase()!=="input"||Xt.type!=="checkbox"&&Xt.type!=="radio"?Vt&&ja(Vt.elementType)&&(zo=tA):zo=d0;if(zo&&(zo=zo(A,Vt))){Rf(pn,zo,_,un);break e}ni&&ni(A,Xt,Vt),A==="focusout"&&Vt&&Xt.type==="number"&&Vt.memoizedProps.value!=null&&eA(Xt,"number",Xt.value)}switch(ni=Vt?eu(Vt):window,A){case"focusin":(wp(ni)||ni.contentEditable==="true")&&(kt=ni,sn=Vt,tn=null);break;case"focusout":tn=sn=kt=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,vr(pn,_,un);break;case"selectionchange":if(Nr)break;case"keydown":case"keyup":vr(pn,_,un)}var nr;if(Kl)e:{switch(A){case"compositionstart":var Lr="onCompositionStart";break e;case"compositionend":Lr="onCompositionEnd";break e;case"compositionupdate":Lr="onCompositionUpdate";break e}Lr=void 0}else Oc?Kd(A,_)&&(Lr="onCompositionEnd"):A==="keydown"&&_.keyCode===229&&(Lr="onCompositionStart");Lr&&(Kh&&_.locale!=="ko"&&(Oc||Lr!=="onCompositionStart"?Lr==="onCompositionEnd"&&Oc&&(nr=ki()):(ol=un,Pl="value"in ol?ol.value:ol.textContent,Oc=!0)),ni=mg(Vt,Lr),0<ni.length&&(Lr=new lu(Lr,A,null,_,un),pn.push({event:Lr,listeners:ni}),nr?Lr.data=nr:(nr=M1(_),nr!==null&&(Lr.data=nr)))),(nr=If?sc(A,_):Km(A,_))&&(Lr=mg(Vt,"onBeforeInput"),0<Lr.length&&(ni=new lu("onBeforeInput","beforeinput",null,_,un),pn.push({event:ni,listeners:Lr}),ni.data=nr)),rf(pn,A,Vt,_,un)}MC(pn,g)})}function Fc(A,g,_){return{instance:A,listener:g,currentTarget:_}}function mg(A,g){for(var _=g+"Capture",O=[];A!==null;){var j=A,V=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||V===null||(j=au(A,_),j!=null&&O.unshift(Fc(A,j,V)),j=au(A,g),j!=null&&O.push(Fc(A,j,V))),A.tag===3)return O;A=A.return}return[]}function gg(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function Xs(A,g,_,O,j){for(var V=g._reactName,ve=[];_!==null&&_!==O;){var qe=_,bt=qe.alternate,Vt=qe.stateNode;if(qe=qe.tag,bt!==null&&bt===O)break;qe!==5&&qe!==26&&qe!==27||Vt===null||(bt=Vt,j?(Vt=au(_,V),Vt!=null&&ve.unshift(Fc(_,Vt,bt))):j||(Vt=au(_,V),Vt!=null&&ve.push(Fc(_,Vt,bt)))),_=_.return}ve.length!==0&&A.push({event:g,listeners:ve})}var Qs=/\r\n?/g,Nv=/\u0000|\uFFFD/g;function oy(A){return(typeof A=="string"?A:""+A).replace(Qs,`
`).replace(Nv,"")}function Gv(A,g){return g=oy(g),oy(A)===g}function Wr(A,g,_,O,j,V){switch(_){case"children":typeof O=="string"?g==="body"||g==="textarea"&&O===""||Io(A,O):(typeof O=="number"||typeof O=="bigint")&&g!=="body"&&Io(A,""+O);break;case"className":tc(A,"class",O);break;case"tabIndex":tc(A,"tabindex",O);break;case"dir":case"role":case"viewBox":case"width":case"height":tc(A,_,O);break;case"style":Us(A,O,V);break;case"data":if(g!=="object"){tc(A,"data",O);break}case"src":case"href":if(O===""&&(g!=="a"||_!=="href")){A.removeAttribute(_);break}if(O==null||typeof O=="function"||typeof O=="symbol"||typeof O=="boolean"){A.removeAttribute(_);break}O=Gi(""+O),A.setAttribute(_,O);break;case"action":case"formAction":if(typeof O=="function"){A.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(_==="formAction"?(g!=="input"&&Wr(A,g,"name",j.name,j,null),Wr(A,g,"formEncType",j.formEncType,j,null),Wr(A,g,"formMethod",j.formMethod,j,null),Wr(A,g,"formTarget",j.formTarget,j,null)):(Wr(A,g,"encType",j.encType,j,null),Wr(A,g,"method",j.method,j,null),Wr(A,g,"target",j.target,j,null)));if(O==null||typeof O=="symbol"||typeof O=="boolean"){A.removeAttribute(_);break}O=Gi(""+O),A.setAttribute(_,O);break;case"onClick":O!=null&&(A.onclick=Na);break;case"onScroll":O!=null&&Ao("scroll",A);break;case"onScrollEnd":O!=null&&Ao("scrollend",A);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(i(61));if(_=O.__html,_!=null){if(j.children!=null)throw Error(i(60));A.innerHTML=_}}break;case"multiple":A.multiple=O&&typeof O!="function"&&typeof O!="symbol";break;case"muted":A.muted=O&&typeof O!="function"&&typeof O!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(O==null||typeof O=="function"||typeof O=="boolean"||typeof O=="symbol"){A.removeAttribute("xlink:href");break}_=Gi(""+O),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":O!=null&&typeof O!="function"&&typeof O!="symbol"?A.setAttribute(_,""+O):A.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":O&&typeof O!="function"&&typeof O!="symbol"?A.setAttribute(_,""):A.removeAttribute(_);break;case"capture":case"download":O===!0?A.setAttribute(_,""):O!==!1&&O!=null&&typeof O!="function"&&typeof O!="symbol"?A.setAttribute(_,O):A.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":O!=null&&typeof O!="function"&&typeof O!="symbol"&&!isNaN(O)&&1<=O?A.setAttribute(_,O):A.removeAttribute(_);break;case"rowSpan":case"start":O==null||typeof O=="function"||typeof O=="symbol"||isNaN(O)?A.removeAttribute(_):A.setAttribute(_,O);break;case"popover":Ao("beforetoggle",A),Ao("toggle",A),Jc(A,"popover",O);break;case"xlinkActuate":ml(A,"http://www.w3.org/1999/xlink","xlink:actuate",O);break;case"xlinkArcrole":ml(A,"http://www.w3.org/1999/xlink","xlink:arcrole",O);break;case"xlinkRole":ml(A,"http://www.w3.org/1999/xlink","xlink:role",O);break;case"xlinkShow":ml(A,"http://www.w3.org/1999/xlink","xlink:show",O);break;case"xlinkTitle":ml(A,"http://www.w3.org/1999/xlink","xlink:title",O);break;case"xlinkType":ml(A,"http://www.w3.org/1999/xlink","xlink:type",O);break;case"xmlBase":ml(A,"http://www.w3.org/XML/1998/namespace","xml:base",O);break;case"xmlLang":ml(A,"http://www.w3.org/XML/1998/namespace","xml:lang",O);break;case"xmlSpace":ml(A,"http://www.w3.org/XML/1998/namespace","xml:space",O);break;case"is":Jc(A,"is",O);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=Ji.get(_)||_,Jc(A,_,O))}}function Jf(A,g,_,O,j,V){switch(_){case"style":Us(A,O,V);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(i(61));if(_=O.__html,_!=null){if(j.children!=null)throw Error(i(60));A.innerHTML=_}}break;case"children":typeof O=="string"?Io(A,O):(typeof O=="number"||typeof O=="bigint")&&Io(A,""+O);break;case"onScroll":O!=null&&Ao("scroll",A);break;case"onScrollEnd":O!=null&&Ao("scrollend",A);break;case"onClick":O!=null&&(A.onclick=Na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zo.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(j=_.endsWith("Capture"),g=_.slice(2,j?_.length-7:void 0),V=A[mn]||null,V=V!=null?V[_]:null,typeof V=="function"&&A.removeEventListener(g,V,j),typeof O=="function")){typeof V!="function"&&V!==null&&(_ in A?A[_]=null:A.hasAttribute(_)&&A.removeAttribute(_)),A.addEventListener(g,O,j);break e}_ in A?A[_]=O:O===!0?A.setAttribute(_,""):Jc(A,_,O)}}}function Va(A,g,_){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ao("error",A),Ao("load",A);var O=!1,j=!1,V;for(V in _)if(_.hasOwnProperty(V)){var ve=_[V];if(ve!=null)switch(V){case"src":O=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:Wr(A,g,V,ve,_,null)}}j&&Wr(A,g,"srcSet",_.srcSet,_,null),O&&Wr(A,g,"src",_.src,_,null);return;case"input":Ao("invalid",A);var qe=V=ve=j=null,bt=null,Vt=null;for(O in _)if(_.hasOwnProperty(O)){var un=_[O];if(un!=null)switch(O){case"name":j=un;break;case"type":ve=un;break;case"checked":bt=un;break;case"defaultChecked":Vt=un;break;case"value":V=un;break;case"defaultValue":qe=un;break;case"children":case"dangerouslySetInnerHTML":if(un!=null)throw Error(i(137,g));break;default:Wr(A,g,O,un,_,null)}}il(A,V,qe,bt,Vt,ve,j,!1);return;case"select":Ao("invalid",A),O=ve=V=null;for(j in _)if(_.hasOwnProperty(j)&&(qe=_[j],qe!=null))switch(j){case"value":V=qe;break;case"defaultValue":ve=qe;break;case"multiple":O=qe;default:Wr(A,g,j,qe,_,null)}g=V,_=ve,A.multiple=!!O,g!=null?iu(A,!!O,g,!1):_!=null&&iu(A,!!O,_,!0);return;case"textarea":Ao("invalid",A),V=j=O=null;for(ve in _)if(_.hasOwnProperty(ve)&&(qe=_[ve],qe!=null))switch(ve){case"value":O=qe;break;case"defaultValue":j=qe;break;case"children":V=qe;break;case"dangerouslySetInnerHTML":if(qe!=null)throw Error(i(91));break;default:Wr(A,g,ve,qe,_,null)}Ms(A,O,j,V);return;case"option":for(bt in _)if(_.hasOwnProperty(bt)&&(O=_[bt],O!=null))switch(bt){case"selected":A.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Wr(A,g,bt,O,_,null)}return;case"dialog":Ao("beforetoggle",A),Ao("toggle",A),Ao("cancel",A),Ao("close",A);break;case"iframe":case"object":Ao("load",A);break;case"video":case"audio":for(O=0;O<L0.length;O++)Ao(L0[O],A);break;case"image":Ao("error",A),Ao("load",A);break;case"details":Ao("toggle",A);break;case"embed":case"source":case"link":Ao("error",A),Ao("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Vt in _)if(_.hasOwnProperty(Vt)&&(O=_[Vt],O!=null))switch(Vt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,g));default:Wr(A,g,Vt,O,_,null)}return;default:if(ja(g)){for(un in _)_.hasOwnProperty(un)&&(O=_[un],O!==void 0&&Jf(A,g,un,O,_,void 0));return}}for(qe in _)_.hasOwnProperty(qe)&&(O=_[qe],O!=null&&Wr(A,g,qe,O,_,null))}function Hp(A,g,_,O){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,V=null,ve=null,qe=null,bt=null,Vt=null,un=null;for(rn in _){var pn=_[rn];if(_.hasOwnProperty(rn)&&pn!=null)switch(rn){case"checked":break;case"value":break;case"defaultValue":bt=pn;default:O.hasOwnProperty(rn)||Wr(A,g,rn,null,O,pn)}}for(var Xt in O){var rn=O[Xt];if(pn=_[Xt],O.hasOwnProperty(Xt)&&(rn!=null||pn!=null))switch(Xt){case"type":V=rn;break;case"name":j=rn;break;case"checked":Vt=rn;break;case"defaultChecked":un=rn;break;case"value":ve=rn;break;case"defaultValue":qe=rn;break;case"children":case"dangerouslySetInnerHTML":if(rn!=null)throw Error(i(137,g));break;default:rn!==pn&&Wr(A,g,Xt,rn,O,pn)}}rc(A,ve,qe,bt,Vt,un,V,j);return;case"select":rn=ve=qe=Xt=null;for(V in _)if(bt=_[V],_.hasOwnProperty(V)&&bt!=null)switch(V){case"value":break;case"multiple":rn=bt;default:O.hasOwnProperty(V)||Wr(A,g,V,null,O,bt)}for(j in O)if(V=O[j],bt=_[j],O.hasOwnProperty(j)&&(V!=null||bt!=null))switch(j){case"value":Xt=V;break;case"defaultValue":qe=V;break;case"multiple":ve=V;default:V!==bt&&Wr(A,g,j,V,O,bt)}g=qe,_=ve,O=rn,Xt!=null?iu(A,!!_,Xt,!1):!!O!=!!_&&(g!=null?iu(A,!!_,g,!0):iu(A,!!_,_?[]:"",!1));return;case"textarea":rn=Xt=null;for(qe in _)if(j=_[qe],_.hasOwnProperty(qe)&&j!=null&&!O.hasOwnProperty(qe))switch(qe){case"value":break;case"children":break;default:Wr(A,g,qe,null,O,j)}for(ve in O)if(j=O[ve],V=_[ve],O.hasOwnProperty(ve)&&(j!=null||V!=null))switch(ve){case"value":Xt=j;break;case"defaultValue":rn=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(91));break;default:j!==V&&Wr(A,g,ve,j,O,V)}Fa(A,Xt,rn);return;case"option":for(var Ii in _)if(Xt=_[Ii],_.hasOwnProperty(Ii)&&Xt!=null&&!O.hasOwnProperty(Ii))switch(Ii){case"selected":A.selected=!1;break;default:Wr(A,g,Ii,null,O,Xt)}for(bt in O)if(Xt=O[bt],rn=_[bt],O.hasOwnProperty(bt)&&Xt!==rn&&(Xt!=null||rn!=null))switch(bt){case"selected":A.selected=Xt&&typeof Xt!="function"&&typeof Xt!="symbol";break;default:Wr(A,g,bt,Xt,O,rn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var or in _)Xt=_[or],_.hasOwnProperty(or)&&Xt!=null&&!O.hasOwnProperty(or)&&Wr(A,g,or,null,O,Xt);for(Vt in O)if(Xt=O[Vt],rn=_[Vt],O.hasOwnProperty(Vt)&&Xt!==rn&&(Xt!=null||rn!=null))switch(Vt){case"children":case"dangerouslySetInnerHTML":if(Xt!=null)throw Error(i(137,g));break;default:Wr(A,g,Vt,Xt,O,rn)}return;default:if(ja(g)){for(var Cs in _)Xt=_[Cs],_.hasOwnProperty(Cs)&&Xt!==void 0&&!O.hasOwnProperty(Cs)&&Jf(A,g,Cs,void 0,O,Xt);for(un in O)Xt=O[un],rn=_[un],!O.hasOwnProperty(un)||Xt===rn||Xt===void 0&&rn===void 0||Jf(A,g,un,Xt,O,rn);return}}for(var Dt in _)Xt=_[Dt],_.hasOwnProperty(Dt)&&Xt!=null&&!O.hasOwnProperty(Dt)&&Wr(A,g,Dt,null,O,Xt);for(pn in O)Xt=O[pn],rn=_[pn],!O.hasOwnProperty(pn)||Xt===rn||Xt==null&&rn==null||Wr(A,g,pn,Xt,O,rn)}function sy(A){switch(A){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yg(){if(typeof performance.getEntriesByType=="function"){for(var A=0,g=0,_=performance.getEntriesByType("resource"),O=0;O<_.length;O++){var j=_[O],V=j.transferSize,ve=j.initiatorType,qe=j.duration;if(V&&qe&&sy(ve)){for(ve=0,qe=j.responseEnd,O+=1;O<_.length;O++){var bt=_[O],Vt=bt.startTime;if(Vt>qe)break;var un=bt.transferSize,pn=bt.initiatorType;un&&sy(pn)&&(bt=bt.responseEnd,ve+=un*(bt<qe?1:(qe-Vt)/(bt-Vt)))}if(--O,g+=8*(V+ve)/(j.duration/1e3),A++,10<A)break}}if(0<A)return g/A/1e6}return navigator.connection&&(A=navigator.connection.downlink,typeof A=="number")?A:5}var vg=null,ay=null;function j0(A){return A.nodeType===9?A:A.ownerDocument}function bg(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $a(A,g){if(A===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&g==="foreignObject"?0:A}function of(A,g){return A==="textarea"||A==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var ly=null;function wC(){var A=window.event;return A&&A.type==="popstate"?A===ly?!1:(ly=A,!0):(ly=null,!1)}var Qv=typeof setTimeout=="function"?setTimeout:void 0,n2=typeof clearTimeout=="function"?clearTimeout:void 0,SC=typeof Promise=="function"?Promise:void 0,Wv=typeof queueMicrotask=="function"?queueMicrotask:typeof SC<"u"?function(A){return SC.resolve(null).then(A).catch(hd)}:Qv;function hd(A){setTimeout(function(){throw A})}function rr(A){return A==="head"}function uy(A,g){var _=g,O=0;do{var j=_.nextSibling;if(A.removeChild(_),j&&j.nodeType===8)if(_=j.data,_==="/$"||_==="/&"){if(O===0){A.removeChild(j),Wu(g);return}O--}else if(_==="$"||_==="$?"||_==="$~"||_==="$!"||_==="&")O++;else if(_==="html")Cg(A.ownerDocument.documentElement);else if(_==="head"){_=A.ownerDocument.head,Cg(_);for(var V=_.firstChild;V;){var ve=V.nextSibling,qe=V.nodeName;V[Ki]||qe==="SCRIPT"||qe==="STYLE"||qe==="LINK"&&V.rel.toLowerCase()==="stylesheet"||_.removeChild(V),V=ve}}else _==="body"&&Cg(A.ownerDocument.body);_=j}while(_);Wu(g)}function ju(A,g){var _=A;A=0;do{var O=_.nextSibling;if(_.nodeType===1?g?(_._stashedDisplay=_.style.display,_.style.display="none"):(_.style.display=_._stashedDisplay||"",_.getAttribute("style")===""&&_.removeAttribute("style")):_.nodeType===3&&(g?(_._stashedText=_.nodeValue,_.nodeValue=""):_.nodeValue=_._stashedText||""),O&&O.nodeType===8)if(_=O.data,_==="/$"){if(A===0)break;A--}else _!=="$"&&_!=="$?"&&_!=="$~"&&_!=="$!"||A++;_=O}while(_)}function Zp(A){var g=A.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var _=g;switch(g=g.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":Zp(_),Jl(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}A.removeChild(_)}}function cy(A,g,_,O){for(;A.nodeType===1;){var j=_;if(A.nodeName.toLowerCase()!==g.toLowerCase()){if(!O&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(O){if(!A[Ki])switch(g){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(V=A.getAttribute("rel"),V==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(V!==j.rel||A.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||A.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||A.getAttribute("title")!==(j.title==null?null:j.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(V=A.getAttribute("src"),(V!==(j.src==null?null:j.src)||A.getAttribute("type")!==(j.type==null?null:j.type)||A.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&V&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(g==="input"&&A.type==="hidden"){var V=j.name==null?null:""+j.name;if(j.type==="hidden"&&A.getAttribute("name")===V)return A}else return A;if(A=jc(A.nextSibling),A===null)break}return null}function ts(A,g,_){if(g==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!_||(A=jc(A.nextSibling),A===null))return null;return A}function EC(A,g){for(;A.nodeType!==8;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!g||(A=jc(A.nextSibling),A===null))return null;return A}function Ay(A){return A.data==="$?"||A.data==="$~"}function _h(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState!=="loading"}function Vl(A,g){var _=A.ownerDocument;if(A.data==="$~")A._reactRetry=g;else if(A.data!=="$?"||_.readyState!=="loading")g();else{var O=function(){g(),_.removeEventListener("DOMContentLoaded",O)};_.addEventListener("DOMContentLoaded",O),A._reactRetry=O}}function jc(A){for(;A!=null;A=A.nextSibling){var g=A.nodeType;if(g===1||g===3)break;if(g===8){if(g=A.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return A}var hy=null;function qv(A){A=A.nextSibling;for(var g=0;A;){if(A.nodeType===8){var _=A.data;if(_==="/$"||_==="/&"){if(g===0)return jc(A.nextSibling);g--}else _!=="$"&&_!=="$!"&&_!=="$?"&&_!=="$~"&&_!=="&"||g++}A=A.nextSibling}return null}function dy(A){A=A.previousSibling;for(var g=0;A;){if(A.nodeType===8){var _=A.data;if(_==="$"||_==="$!"||_==="$?"||_==="$~"||_==="&"){if(g===0)return A;g--}else _!=="/$"&&_!=="/&"||g++}A=A.previousSibling}return null}function BC(A,g,_){switch(g=j0(_),A){case"html":if(A=g.documentElement,!A)throw Error(i(452));return A;case"head":if(A=g.head,!A)throw Error(i(453));return A;case"body":if(A=g.body,!A)throw Error(i(454));return A;default:throw Error(i(451))}}function Cg(A){for(var g=A.attributes;g.length;)A.removeAttributeNode(g[0]);Jl(A)}var AA=new Map,OC=new Set;function N0(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var xh=Ye.d;Ye.d={f:Yv,r:IC,D:py,C:Vv,L:my,m:G0,X:Nu,S:Al,M:$v};function Yv(){var A=xh.f(),g=V1();return A||g}function IC(A){var g=Oa(A);g!==null&&g.tag===5&&g.type==="form"?cl(g):xh.r(A)}var zA=typeof document>"u"?null:document;function fy(A,g,_){var O=zA;if(O&&typeof g=="string"&&g){var j=fa(g);j='link[rel="'+A+'"][href="'+j+'"]',typeof _=="string"&&(j+='[crossorigin="'+_+'"]'),OC.has(j)||(OC.add(j),A={rel:A,crossOrigin:_,href:g},O.querySelector(j)===null&&(g=O.createElement("link"),Va(g,"link",A),Ho(g),O.head.appendChild(g)))}}function py(A){xh.D(A),fy("dns-prefetch",A,null)}function Vv(A,g){xh.C(A,g),fy("preconnect",A,g)}function my(A,g,_){xh.L(A,g,_);var O=zA;if(O&&A&&g){var j='link[rel="preload"][as="'+fa(g)+'"]';g==="image"&&_&&_.imageSrcSet?(j+='[imagesrcset="'+fa(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(j+='[imagesizes="'+fa(_.imageSizes)+'"]')):j+='[href="'+fa(A)+'"]';var V=j;switch(g){case"style":V=f(A);break;case"script":V=M(A)}AA.has(V)||(A=v({rel:"preload",href:g==="image"&&_&&_.imageSrcSet?void 0:A,as:g},_),AA.set(V,A),O.querySelector(j)!==null||g==="style"&&O.querySelector(u(V))||g==="script"&&O.querySelector(I(V))||(g=O.createElement("link"),Va(g,"link",A),Ho(g),O.head.appendChild(g)))}}function G0(A,g){xh.m(A,g);var _=zA;if(_&&A){var O=g&&typeof g.as=="string"?g.as:"script",j='link[rel="modulepreload"][as="'+fa(O)+'"][href="'+fa(A)+'"]',V=j;switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=M(A)}if(!AA.has(V)&&(A=v({rel:"modulepreload",href:A},g),AA.set(V,A),_.querySelector(j)===null)){switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(I(V)))return}O=_.createElement("link"),Va(O,"link",A),Ho(O),_.head.appendChild(O)}}}function Al(A,g,_){xh.S(A,g,_);var O=zA;if(O&&A){var j=da(O).hoistableStyles,V=f(A);g=g||"default";var ve=j.get(V);if(!ve){var qe={loading:0,preload:null};if(ve=O.querySelector(u(V)))qe.loading=5;else{A=v({rel:"stylesheet",href:A,"data-precedence":g},_),(_=AA.get(V))&&F(A,_);var bt=ve=O.createElement("link");Ho(bt),Va(bt,"link",A),bt._p=new Promise(function(Vt,un){bt.onload=Vt,bt.onerror=un}),bt.addEventListener("load",function(){qe.loading|=1}),bt.addEventListener("error",function(){qe.loading|=2}),qe.loading|=4,U(ve,g,O)}ve={type:"stylesheet",instance:ve,count:1,state:qe},j.set(V,ve)}}}function Nu(A,g){xh.X(A,g);var _=zA;if(_&&A){var O=da(_).hoistableScripts,j=M(A),V=O.get(j);V||(V=_.querySelector(I(j)),V||(A=v({src:A,async:!0},g),(g=AA.get(j))&&ee(A,g),V=_.createElement("script"),Ho(V),Va(V,"link",A),_.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},O.set(j,V))}}function $v(A,g){xh.M(A,g);var _=zA;if(_&&A){var O=da(_).hoistableScripts,j=M(A),V=O.get(j);V||(V=_.querySelector(I(j)),V||(A=v({src:A,async:!0,type:"module"},g),(g=AA.get(j))&&ee(A,g),V=_.createElement("script"),Ho(V),Va(V,"link",A),_.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},O.set(j,V))}}function kC(A,g,_,O){var j=(j=Tt.current)?N0(j):null;if(!j)throw Error(i(446));switch(A){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(g=f(_.href),_=da(j).hoistableStyles,O=_.get(g),O||(O={type:"style",instance:null,count:0,state:null},_.set(g,O)),O):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){A=f(_.href);var V=da(j).hoistableStyles,ve=V.get(A);if(ve||(j=j.ownerDocument||j,ve={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(A,ve),(V=j.querySelector(u(A)))&&!V._p&&(ve.instance=V,ve.state.loading=5),AA.has(A)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},AA.set(A,_),V||b(j,A,_,ve.state))),g&&O===null)throw Error(i(528,""));return ve}if(g&&O!==null)throw Error(i(529,""));return null;case"script":return g=_.async,_=_.src,typeof _=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=M(_),_=da(j).hoistableScripts,O=_.get(g),O||(O={type:"script",instance:null,count:0,state:null},_.set(g,O)),O):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,A))}}function f(A){return'href="'+fa(A)+'"'}function u(A){return'link[rel="stylesheet"]['+A+"]"}function d(A){return v({},A,{"data-precedence":A.precedence,precedence:null})}function b(A,g,_,O){A.querySelector('link[rel="preload"][as="style"]['+g+"]")?O.loading=1:(g=A.createElement("link"),O.preload=g,g.addEventListener("load",function(){return O.loading|=1}),g.addEventListener("error",function(){return O.loading|=2}),Va(g,"link",_),Ho(g),A.head.appendChild(g))}function M(A){return'[src="'+fa(A)+'"]'}function I(A){return"script[async]"+A}function D(A,g,_){if(g.count++,g.instance===null)switch(g.type){case"style":var O=A.querySelector('style[data-href~="'+fa(_.href)+'"]');if(O)return g.instance=O,Ho(O),O;var j=v({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return O=(A.ownerDocument||A).createElement("style"),Ho(O),Va(O,"style",j),U(O,_.precedence,A),g.instance=O;case"stylesheet":j=f(_.href);var V=A.querySelector(u(j));if(V)return g.state.loading|=4,g.instance=V,Ho(V),V;O=d(_),(j=AA.get(j))&&F(O,j),V=(A.ownerDocument||A).createElement("link"),Ho(V);var ve=V;return ve._p=new Promise(function(qe,bt){ve.onload=qe,ve.onerror=bt}),Va(V,"link",O),g.state.loading|=4,U(V,_.precedence,A),g.instance=V;case"script":return V=M(_.src),(j=A.querySelector(I(V)))?(g.instance=j,Ho(j),j):(O=_,(j=AA.get(V))&&(O=v({},_),ee(O,j)),A=A.ownerDocument||A,j=A.createElement("script"),Ho(j),Va(j,"link",O),A.head.appendChild(j),g.instance=j);case"void":return null;default:throw Error(i(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(O=g.instance,g.state.loading|=4,U(O,_.precedence,A));return g.instance}function U(A,g,_){for(var O=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=O.length?O[O.length-1]:null,V=j,ve=0;ve<O.length;ve++){var qe=O[ve];if(qe.dataset.precedence===g)V=qe;else if(V!==j)break}V?V.parentNode.insertBefore(A,V.nextSibling):(g=_.nodeType===9?_.head:_,g.insertBefore(A,g.firstChild))}function F(A,g){A.crossOrigin==null&&(A.crossOrigin=g.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=g.referrerPolicy),A.title==null&&(A.title=g.title)}function ee(A,g){A.crossOrigin==null&&(A.crossOrigin=g.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=g.referrerPolicy),A.integrity==null&&(A.integrity=g.integrity)}var ne=null;function ce(A,g,_){if(ne===null){var O=new Map,j=ne=new Map;j.set(_,O)}else j=ne,O=j.get(_),O||(O=new Map,j.set(_,O));if(O.has(A))return O;for(O.set(A,null),_=_.getElementsByTagName(A),j=0;j<_.length;j++){var V=_[j];if(!(V[Ki]||V[Vr]||A==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var ve=V.getAttribute(g)||"";ve=A+ve;var qe=O.get(ve);qe?qe.push(V):O.set(ve,[V])}}return O}function _e(A,g,_){A=A.ownerDocument||A,A.head.insertBefore(_,g==="title"?A.querySelector("head > title"):null)}function we(A,g,_){if(_===1||g.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return A=g.disabled,typeof g.precedence=="string"&&A==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function Re(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}function ze(A,g,_,O){if(_.type==="stylesheet"&&(typeof O.media!="string"||matchMedia(O.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var j=f(O.href),V=g.querySelector(u(j));if(V){g=V._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(A.count++,A=Bt.bind(A),g.then(A,A)),_.state.loading|=4,_.instance=V,Ho(V);return}V=g.ownerDocument||g,O=d(O),(j=AA.get(j))&&F(O,j),V=V.createElement("link"),Ho(V);var ve=V;ve._p=new Promise(function(qe,bt){ve.onload=qe,ve.onerror=bt}),Va(V,"link",O),_.instance=V}A.stylesheets===null&&(A.stylesheets=new Map),A.stylesheets.set(_,g),(g=_.state.preload)&&(_.state.loading&3)===0&&(A.count++,_=Bt.bind(A),g.addEventListener("load",_),g.addEventListener("error",_))}}var He=0;function nt(A,g){return A.stylesheets&&A.count===0&&vt(A,A.stylesheets),0<A.count||0<A.imgCount?function(_){var O=setTimeout(function(){if(A.stylesheets&&vt(A,A.stylesheets),A.unsuspend){var V=A.unsuspend;A.unsuspend=null,V()}},6e4+g);0<A.imgBytes&&He===0&&(He=62500*yg());var j=setTimeout(function(){if(A.waitingForImages=!1,A.count===0&&(A.stylesheets&&vt(A,A.stylesheets),A.unsuspend)){var V=A.unsuspend;A.unsuspend=null,V()}},(A.imgBytes>He?50:800)+g);return A.unsuspend=_,function(){A.unsuspend=null,clearTimeout(O),clearTimeout(j)}}:null}function Bt(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vt(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var lt=null;function vt(A,g){A.stylesheets=null,A.unsuspend!==null&&(A.count++,lt=new Map,g.forEach(Nt,A),lt=null,Bt.call(A))}function Nt(A,g){if(!(g.state.loading&4)){var _=lt.get(A);if(_)var O=_.get(null);else{_=new Map,lt.set(A,_);for(var j=A.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<j.length;V++){var ve=j[V];(ve.nodeName==="LINK"||ve.getAttribute("media")!=="not all")&&(_.set(ve.dataset.precedence,ve),O=ve)}O&&_.set(null,O)}j=g.instance,ve=j.getAttribute("data-precedence"),V=_.get(ve)||O,V===O&&_.set(null,j),_.set(ve,j),this.count++,O=Bt.bind(this),j.addEventListener("load",O),j.addEventListener("error",O),V?V.parentNode.insertBefore(j,V.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(j,A.firstChild)),g.state.loading|=4}}var Zt={$$typeof:H,Provider:null,Consumer:null,_currentValue:At,_currentValue2:At,_threadCount:0};function fn(A,g,_,O,j,V,ve,qe,bt){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.hiddenUpdates=si(null),this.identifierPrefix=O,this.onUncaughtError=j,this.onCaughtError=V,this.onRecoverableError=ve,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=bt,this.incompleteTransitions=new Map}function Nn(A,g,_,O,j,V,ve,qe,bt,Vt,un,pn){return A=new fn(A,g,_,ve,bt,Vt,un,pn,qe),g=1,V===!0&&(g|=24),V=yl(3,null,null,g),A.current=V,V.stateNode=A,g=Fs(),g.refCount++,A.pooledCache=g,g.refCount++,V.memoizedState={element:O,isDehydrated:_,cache:g},al(V),A}function Rn(A){return A?(A=lr,A):lr}function Fn(A,g,_,O,j,V){j=Rn(j),O.context===null?O.context=j:O.pendingContext=j,O=Jh(g),O.payload={element:_},V=V===void 0?null:V,V!==null&&(O.callback=V),_=Du(A,O,g),_!==null&&(Fu(_,A,g),ed(_,A,g))}function Ci(A,g){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var _=A.retryLane;A.retryLane=_!==0&&_<g?_:g}}function Ln(A,g){Ci(A,g),(A=A.alternate)&&Ci(A,g)}function jn(A){if(A.tag===13||A.tag===31){var g=Au(A,67108864);g!==null&&Fu(g,A,67108864),Ln(A,67108864)}}function an(A){if(A.tag===13||A.tag===31){var g=zc();g=cr(g);var _=Au(A,g);_!==null&&Fu(_,A,g),Ln(A,g)}}var Fi=!0;function tr(A,g,_,O){var j=Be.T;Be.T=null;var V=Ye.p;try{Ye.p=2,ui(A,g,_,O)}finally{Ye.p=V,Be.T=j}}function Ti(A,g,_,O){var j=Be.T;Be.T=null;var V=Ye.p;try{Ye.p=8,ui(A,g,_,O)}finally{Ye.p=V,Be.T=j}}function ui(A,g,_,O){if(Fi){var j=Rr(O);if(j===null)ry(A,g,O,bs,_),Nc(A,O);else if(Qu(j,A,g,_,O))O.stopPropagation();else if(Nc(A,O),g&4&&-1<Gu.indexOf(A)){for(;j!==null;){var V=Oa(j);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var ve=dt(V.pendingLanes);if(ve!==0){var qe=V;for(qe.pendingLanes|=2,qe.entangledLanes|=2;ve;){var bt=1<<31-Pe(ve);qe.entanglements[1]|=bt,ve&=~bt}bh(V),(xo&6)===0&&(ud=ei()+500,$p(0))}}break;case 31:case 13:qe=Au(V,2),qe!==null&&Fu(qe,V,2),V1(),Ln(V,2)}if(V=Rr(O),V===null&&ry(A,g,O,bs,_),V===j)break;j=V}j!==null&&O.stopPropagation()}else ry(A,g,O,null,_)}}function Rr(A){return A=su(A),va(A)}var bs=null;function va(A){if(bs=null,A=po(A),A!==null){var g=o(A);if(g===null)A=null;else{var _=g.tag;if(_===13){if(A=s(g),A!==null)return A;A=null}else if(_===31){if(A=a(g),A!==null)return A;A=null}else if(_===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;A=null}else g!==A&&(A=null)}}return bs=A,null}function wl(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case It:return 2;case Ce:return 8;case re:case le:return 32;case he:return 268435456;default:return 32}default:return 32}}var gc=!1,Da=null,Ws=null,To=null,aa=new Map,ba=new Map,qs=[],Gu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nc(A,g){switch(A){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":aa.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":ba.delete(g.pointerId)}}function Ys(A,g,_,O,j,V){return A===null||A.nativeEvent!==V?(A={blockedOn:g,domEventName:_,eventSystemFlags:O,nativeEvent:V,targetContainers:[j]},g!==null&&(g=Oa(g),g!==null&&jn(g)),A):(A.eventSystemFlags|=O,g=A.targetContainers,j!==null&&g.indexOf(j)===-1&&g.push(j),A)}function Qu(A,g,_,O,j){switch(g){case"focusin":return Da=Ys(Da,A,g,_,O,j),!0;case"dragenter":return Ws=Ys(Ws,A,g,_,O,j),!0;case"mouseover":return To=Ys(To,A,g,_,O,j),!0;case"pointerover":var V=j.pointerId;return aa.set(V,Ys(aa.get(V)||null,A,g,_,O,j)),!0;case"gotpointercapture":return V=j.pointerId,ba.set(V,Ys(ba.get(V)||null,A,g,_,O,j)),!0}return!1}function Ca(A){var g=po(A.target);if(g!==null){var _=o(g);if(_!==null){if(g=_.tag,g===13){if(g=s(_),g!==null){A.blockedOn=g,$o(A.priority,function(){an(_)});return}}else if(g===31){if(g=a(_),g!==null){A.blockedOn=g,$o(A.priority,function(){an(_)});return}}else if(g===3&&_.stateNode.current.memoizedState.isDehydrated){A.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}A.blockedOn=null}function _a(A){if(A.blockedOn!==null)return!1;for(var g=A.targetContainers;0<g.length;){var _=Rr(A.nativeEvent);if(_===null){_=A.nativeEvent;var O=new _.constructor(_.type,_);Xo=O,_.target.dispatchEvent(O),Xo=null}else return g=Oa(_),g!==null&&jn(g),A.blockedOn=_,!1;g.shift()}return!0}function Ha(A,g,_){_a(A)&&_.delete(g)}function Pa(){gc=!1,Da!==null&&_a(Da)&&(Da=null),Ws!==null&&_a(Ws)&&(Ws=null),To!==null&&_a(To)&&(To=null),aa.forEach(Ha),ba.forEach(Ha)}function Ro(A,g){A.blockedOn===g&&(A.blockedOn=null,gc||(gc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Pa)))}var Gc=null;function Xp(A){Gc!==A&&(Gc=A,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Gc===A&&(Gc=null);for(var g=0;g<A.length;g+=3){var _=A[g],O=A[g+1],j=A[g+2];if(typeof O!="function"){if(va(O||_)===null)continue;break}var V=Oa(_);V!==null&&(A.splice(g,3),g-=3,mu(V,{pending:!0,data:j,method:_.method,action:O},O,j))}}))}function Wu(A){function g(bt){return Ro(bt,A)}Da!==null&&Ro(Da,A),Ws!==null&&Ro(Ws,A),To!==null&&Ro(To,A),aa.forEach(g),ba.forEach(g);for(var _=0;_<qs.length;_++){var O=qs[_];O.blockedOn===A&&(O.blockedOn=null)}for(;0<qs.length&&(_=qs[0],_.blockedOn===null);)Ca(_),_.blockedOn===null&&qs.shift();if(_=(A.ownerDocument||A).$$reactFormReplay,_!=null)for(O=0;O<_.length;O+=3){var j=_[O],V=_[O+1],ve=j[mn]||null;if(typeof V=="function")ve||Xp(_);else if(ve){var qe=null;if(V&&V.hasAttribute("formAction")){if(j=V,ve=V[mn]||null)qe=ve.formAction;else if(va(j)!==null)continue}else qe=ve.action;typeof qe=="function"?_[O+1]=qe:(_.splice(O,3),O-=3),Xp(_)}}}function yc(){function A(V){V.canIntercept&&V.info==="react-transition"&&V.intercept({handler:function(){return new Promise(function(ve){return j=ve})},focusReset:"manual",scroll:"manual"})}function g(){j!==null&&(j(),j=null),O||setTimeout(_,20)}function _(){if(!O&&!navigation.transition){var V=navigation.currentEntry;V&&V.url!=null&&navigation.navigate(V.url,{state:V.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var O=!1,j=null;return navigation.addEventListener("navigate",A),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(_,100),function(){O=!0,navigation.removeEventListener("navigate",A),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),j!==null&&(j(),j=null)}}}function dd(A){this._internalRoot=A}fd.prototype.render=dd.prototype.render=function(A){var g=this._internalRoot;if(g===null)throw Error(i(409));var _=g.current,O=zc();Fn(_,O,A,g,null,null)},fd.prototype.unmount=dd.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var g=A.containerInfo;Fn(A.current,2,null,A,null,null),V1(),g[Ni]=null}};function fd(A){this._internalRoot=A}fd.prototype.unstable_scheduleHydration=function(A){if(A){var g=Pi();A={blockedOn:null,target:A,priority:g};for(var _=0;_<qs.length&&g!==0&&g<qs[_].priority;_++);qs.splice(_,0,A),_===0&&Ca(A)}};var Jp=e.version;if(Jp!=="19.2.0")throw Error(i(527,Jp,"19.2.0"));Ye.findDOMNode=function(A){var g=A._reactInternals;if(g===void 0)throw typeof A.render=="function"?Error(i(188)):(A=Object.keys(A).join(","),Error(i(268,A)));return A=h(g),A=A!==null?m(A):null,A=A===null?null:A.stateNode,A};var _g={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Be,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{be=sf.inject(_g),We=sf}catch{}}return r2.createRoot=function(A,g){if(!r(A))throw Error(i(299));var _=!1,O="",j=I1,V=gv,ve=k1;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(O=g.identifierPrefix),g.onUncaughtError!==void 0&&(j=g.onUncaughtError),g.onCaughtError!==void 0&&(V=g.onCaughtError),g.onRecoverableError!==void 0&&(ve=g.onRecoverableError)),g=Nn(A,1,!1,null,null,_,O,null,j,V,ve,yc),A[Ni]=g.current,iy(A),new dd(g)},r2.hydrateRoot=function(A,g,_){if(!r(A))throw Error(i(299));var O=!1,j="",V=I1,ve=gv,qe=k1,bt=null;return _!=null&&(_.unstable_strictMode===!0&&(O=!0),_.identifierPrefix!==void 0&&(j=_.identifierPrefix),_.onUncaughtError!==void 0&&(V=_.onUncaughtError),_.onCaughtError!==void 0&&(ve=_.onCaughtError),_.onRecoverableError!==void 0&&(qe=_.onRecoverableError),_.formState!==void 0&&(bt=_.formState)),g=Nn(A,1,!0,g,_??null,O,j,bt,V,ve,qe,yc),g.context=Rn(null),_=g.current,O=zc(),O=cr(O),j=Jh(O),j.callback=null,Du(_,j,O),_=O,g.current.lanes=_,ir(g,_),bh(g),A[Ni]=g.current,iy(A),new fd(g)},r2.version="19.2.0",r2}var VU;function tse(){if(VU)return X6.exports;VU=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),X6.exports=ese(),X6.exports}var f$=tse();const nse="modulepreload",ise=function(n){return"/maputnik/"+n},$U={},TC=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var s=h;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");r=h(t.map(m=>{if(m=ise(m),m in $U)return;$U[m]=!0;const v=m.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const E=document.createElement("link");if(E.rel=v?"stylesheet":nse,v||(E.as="script"),E.crossOrigin="",E.href=m,c&&E.setAttribute("nonce",c),document.head.appendChild(E),v)return new Promise((R,P)=>{E.addEventListener("load",R),E.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},rse=(n,e,t)=>{const i=n[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},jr=n=>typeof n=="string",o2=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},HU=n=>n==null?"":""+n,ose=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},sse=/###/g,ZU=n=>n&&n.indexOf("###")>-1?n.replace(sse,"."):n,XU=n=>!n||jr(n),e3=(n,e,t)=>{const i=jr(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(XU(n))return{};const o=ZU(i[r]);!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++r}return XU(n)?{}:{obj:n,k:ZU(i[r])}},JU=(n,e,t)=>{const{obj:i,k:r}=e3(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let o=e[e.length-1],s=e.slice(0,e.length-1),a=e3(n,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=e3(n,s,Object),a?.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=t},ase=(n,e,t,i)=>{const{obj:r,k:o}=e3(n,e,Object);r[o]=r[o]||[],r[o].push(t)},Tw=(n,e)=>{const{obj:t,k:i}=e3(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},lse=(n,e,t)=>{const i=Tw(n,t);return i!==void 0?i:Tw(e,t)},p$=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?jr(n[i])||n[i]instanceof String||jr(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):p$(n[i],e[i],t):n[i]=e[i]);return n},RC=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var use={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const cse=n=>jr(n)?n.replace(/[&<>"'\/]/g,e=>use[e]):n;class Ase{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const hse=[" ",",","?","!",";"],dse=new Ase(20),fse=(n,e,t)=>{e=e||"",t=t||"";const i=hse.filter(s=>e.indexOf(s)<0&&t.indexOf(s)<0);if(i.length===0)return!0;const r=dse.getRegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!r.test(n);if(!o){const s=n.indexOf(t);s>0&&!r.test(n.substring(0,s))&&(o=!0)}return o},aT=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let o=0;o<i.length;){if(!r||typeof r!="object")return;let s,a="";for(let c=o;c<i.length;++c)if(c!==o&&(a+=t),a+=i[c],s=r[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<i.length-1)continue;o+=c-o+1;break}r=s}return r},O3=n=>n?.replace("_","-"),pse={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Rw{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||pse,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(jr(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Rw(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Rw(this.logger,e)}}var Lg=new Rw;class iE{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,o])=>{for(let s=0;s<o;s++)r.apply(r,[e,...t])})}}class eL extends iE{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,s=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],i&&(Array.isArray(i)?a.push(...i):jr(i)&&o?a.push(...i.split(o)):a.push(i)));const c=Tw(this.data,a);return!c&&!t&&!i&&e.indexOf(".")>-1&&(e=a[0],t=a[1],i=a.slice(2).join(".")),c||!s||!jr(i)?c:aT(this.data?.[e]?.[t],i,o)}addResource(e,t,i,r,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,t];i&&(a=a.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),JU(this.data,a,r),o.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const o in i)(jr(i[o])||Array.isArray(i[o]))&&this.addResource(e,t,o,i[o],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,o,s={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=i,i=t,t=a[1]),this.addNamespaces(t);let c=Tw(this.data,a)||{};s.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?p$(c,i,o):c={...c,...i},JU(this.data,a,c),s.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var m$={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(o=>{e=this.processors[o]?.process(e,t,i,r)??e}),e}};const g$=Symbol("i18next/PATH_KEY");function mse(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===g$?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Dw(n,e){const{[g$]:t}=n(mse());return t.join(e?.keySeparator??".")}const tL={},nB=n=>!jr(n)&&typeof n!="boolean"&&typeof n!="number";class Pw extends iE{constructor(e,t={}){super(),ose(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Lg.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const r=this.resolve(e,i);if(r?.res===void 0)return!1;const o=nB(r.res);return!(i.returnObjects===!1&&o)}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!fse(e,i,r);if(s&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:jr(o)?[o]:o};const h=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(h[0])>-1)&&(o=h.shift()),e=h.join(r)}return{key:e,namespaces:jr(o)?[o]:o}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=Dw(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const o=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],r),h=c[c.length-1];let m=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const v=r.lng||this.language,x=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return x?o?{res:`${h}${m}${a}`,usedKey:a,exactUsedKey:a,usedLng:v,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:`${h}${m}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:v,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:a;const E=this.resolve(e,r);let R=E?.res;const P=E?.usedKey||a,z=E?.exactUsedKey||a,Q=["[object Number]","[object Function]","[object RegExp]"],Y=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,H=!this.i18nFormat||this.i18nFormat.handleAsObject,Z=r.count!==void 0&&!jr(r.count),J=Pw.hasDefaultValue(r),$=Z?this.pluralResolver.getSuffix(v,r.count,r):"",G=r.ordinal&&Z?this.pluralResolver.getSuffix(v,r.count,{ordinal:!1}):"",oe=Z&&!r.ordinal&&r.count===0,ue=oe&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${$}`]||r[`defaultValue${G}`]||r.defaultValue;let xe=R;H&&!R&&J&&(xe=ue);const ge=nB(xe),Ie=Object.prototype.toString.apply(xe);if(H&&xe&&ge&&Q.indexOf(Ie)<0&&!(jr(Y)&&Array.isArray(xe))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Me=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,xe,{...r,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(E.res=Me,E.usedParams=this.getUsedParamsDetails(r),E):Me}if(s){const Me=Array.isArray(xe),ke=Me?[]:{},je=Me?z:P;for(const Be in xe)if(Object.prototype.hasOwnProperty.call(xe,Be)){const Ye=`${je}${s}${Be}`;J&&!R?ke[Be]=this.translate(Ye,{...r,defaultValue:nB(ue)?ue[Be]:void 0,joinArrays:!1,ns:c}):ke[Be]=this.translate(Ye,{...r,joinArrays:!1,ns:c}),ke[Be]===Ye&&(ke[Be]=xe[Be])}R=ke}}else if(H&&jr(Y)&&Array.isArray(R))R=R.join(Y),R&&(R=this.extendTranslation(R,e,r,i));else{let Me=!1,ke=!1;!this.isValidLookup(R)&&J&&(Me=!0,R=ue),this.isValidLookup(R)||(ke=!0,R=a);const Be=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ke?void 0:R,Ye=J&&ue!==R&&this.options.updateMissing;if(ke||Me||Ye){if(this.logger.log(Ye?"updateKey":"missingKey",v,h,a,Ye?ue:R),s){const De=this.resolve(a,{...r,keySeparator:!1});De&&De.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let At=[];const yt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&yt&&yt[0])for(let De=0;De<yt.length;De++)At.push(yt[De]);else this.options.saveMissingTo==="all"?At=this.languageUtils.toResolveHierarchy(r.lng||this.language):At.push(r.lng||this.language);const Le=(De,Ge,Te)=>{const xt=J&&Te!==R?Te:Be;this.options.missingKeyHandler?this.options.missingKeyHandler(De,h,Ge,xt,Ye,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(De,h,Ge,xt,Ye,r),this.emit("missingKey",De,h,Ge,R)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Z?At.forEach(De=>{const Ge=this.pluralResolver.getSuffixes(De,r);oe&&r[`defaultValue${this.options.pluralSeparator}zero`]&&Ge.indexOf(`${this.options.pluralSeparator}zero`)<0&&Ge.push(`${this.options.pluralSeparator}zero`),Ge.forEach(Te=>{Le([De],a+Te,r[`defaultValue${Te}`]||ue)})}):Le(At,a,ue))}R=this.extendTranslation(R,e,r,E,i),ke&&R===a&&this.options.appendNamespaceToMissingKey&&(R=`${h}${m}${a}`),(ke||Me)&&this.options.parseMissingKeyHandler&&(R=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${m}${a}`:a,Me?R:void 0,r))}return o?(E.res=R,E.usedParams=this.getUsedParamsDetails(r),E):R}extendTranslation(e,t,i,r,o){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=jr(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const v=e.match(this.interpolator.nestingRegexp);h=v&&v.length}let m=i.replace&&!jr(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,i.lng||this.language||r.usedLng,i),c){const v=e.match(this.interpolator.nestingRegexp),x=v&&v.length;h<x&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...v)=>o?.[0]===v[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):this.translate(...v,t),i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,a=jr(s)?[s]:s;return e!=null&&a?.length&&i.applyPostProcessor!==!1&&(e=m$.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,o,s,a;return jr(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const h=this.extractFromKey(c,t),m=h.key;r=m;let v=h.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const x=t.count!==void 0&&!jr(t.count),E=x&&!t.ordinal&&t.count===0,R=t.context!==void 0&&(jr(t.context)||typeof t.context=="number")&&t.context!=="",P=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(z=>{this.isValidLookup(i)||(a=z,!tL[`${P[0]}-${z}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(tL[`${P[0]}-${z}`]=!0,this.logger.warn(`key "${r}" for languages "${P.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),P.forEach(Q=>{if(this.isValidLookup(i))return;s=Q;const Y=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(Y,m,Q,z,t);else{let Z;x&&(Z=this.pluralResolver.getSuffix(Q,t.count,t));const J=`${this.options.pluralSeparator}zero`,$=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(t.ordinal&&Z.indexOf($)===0&&Y.push(m+Z.replace($,this.options.pluralSeparator)),Y.push(m+Z),E&&Y.push(m+J)),R){const G=`${m}${this.options.contextSeparator||"_"}${t.context}`;Y.push(G),x&&(t.ordinal&&Z.indexOf($)===0&&Y.push(G+Z.replace($,this.options.pluralSeparator)),Y.push(G+Z),E&&Y.push(G+J))}}let H;for(;H=Y.pop();)this.isValidLookup(i)||(o=H,i=this.getResource(Q,z,H,t))}))})}),{res:i,usedKey:r,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!jr(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const o of t)delete r[o]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class nL{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Lg.create("languageUtils")}getScriptPartFromCode(e){if(e=O3(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=O3(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(jr(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const o=this.getLanguagePartFromCode(i);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),jr(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],o=s=>{s&&(this.isSupportedCode(s)?r.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return jr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):jr(e)&&o(this.formatLanguageCode(e)),i.forEach(s=>{r.indexOf(s)<0&&o(this.formatLanguageCode(s))}),r}}const iL={zero:0,one:1,two:2,few:3,many:4,other:5},rL={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class gse{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Lg.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=O3(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:r});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),rL;if(!e.match(/-|_/))return rL;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,t)}return this.pluralRulesCache[o]=s,s}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,o)=>iL[r]-iL[o]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const oL=(n,e,t,i=".",r=!0)=>{let o=lse(n,e,t);return!o&&r&&jr(t)&&(o=aT(n,t,i),o===void 0&&(o=aT(e,t,i))),o},iB=n=>n.replace(/\$/g,"$$$$");class yse{constructor(e={}){this.logger=Lg.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:h,unescapeSuffix:m,unescapePrefix:v,nestingPrefix:x,nestingPrefixEscaped:E,nestingSuffix:R,nestingSuffixEscaped:P,nestingOptionsSeparator:z,maxReplaces:Q,alwaysFormat:Y}=e.interpolation;this.escape=t!==void 0?t:cse,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=o?RC(o):s||"{{",this.suffix=a?RC(a):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=m?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=x?RC(x):E||RC("$t("),this.nestingSuffix=R?RC(R):P||RC(")"),this.nestingOptionsSeparator=z||",",this.maxReplaces=Q||1e3,this.alwaysFormat=Y!==void 0?Y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let o,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=E=>{if(E.indexOf(this.formatSeparator)<0){const Q=oL(t,c,E,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Q,void 0,i,{...r,...t,interpolationkey:E}):Q}const R=E.split(this.formatSeparator),P=R.shift().trim(),z=R.join(this.formatSeparator).trim();return this.format(oL(t,c,P,this.options.keySeparator,this.options.ignoreJSONStructure),z,i,{...r,...t,interpolationkey:P})};this.resetRegExp();const m=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:E=>iB(E)},{regex:this.regexp,safeValue:E=>this.escapeValue?iB(this.escape(E)):iB(E)}].forEach(E=>{for(a=0;o=E.regex.exec(e);){const R=o[1].trim();if(s=h(R),s===void 0)if(typeof m=="function"){const z=m(e,o,r);s=jr(z)?z:""}else if(r&&Object.prototype.hasOwnProperty.call(r,R))s="";else if(v){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${R} for interpolating ${e}`),s="";else!jr(s)&&!this.useRawValueToEscape&&(s=HU(s));const P=E.safeValue(s);if(e=e.replace(o[0],P),v?(E.regex.lastIndex+=s.length,E.regex.lastIndex-=o[0].length):E.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,o,s;const a=(c,h)=>{const m=this.nestingOptionsSeparator;if(c.indexOf(m)<0)return c;const v=c.split(new RegExp(`${m}[ ]*{`));let x=`{${v[1]}`;c=v[0],x=this.interpolate(x,s);const E=x.match(/'/g),R=x.match(/"/g);((E?.length??0)%2===0&&!R||R.length%2!==0)&&(x=x.replace(/'/g,'"'));try{s=JSON.parse(x),h&&(s={...h,...s})}catch(P){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,P),`${c}${m}${x}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&!jr(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const h=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(h!==-1&&(c=r[1].slice(h).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),r[1]=r[1].slice(0,h)),o=t(a.call(this,r[1].trim(),s),s),o&&r[0]===e&&!jr(o))return o;jr(o)||(o=HU(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),o=""),c.length&&(o=c.reduce((m,v)=>this.format(m,v,i.lng,{...i,interpolationkey:r[1].trim()}),o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}const vse=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),m=a.trim();t[m]||(t[m]=h),h==="false"&&(t[m]=!1),h==="true"&&(t[m]=!0),isNaN(h)||(t[m]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},sL=n=>{const e={};return(t,i,r)=>{let o=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(o={...o,[r.interpolationkey]:void 0});const s=i+JSON.stringify(o);let a=e[s];return a||(a=n(O3(i),r),e[s]=a),a(t)}},bse=n=>(e,t,i)=>n(O3(t),i)(e);class Cse{constructor(e={}){this.logger=Lg.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?sL:bse;this.formats={number:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o});return a=>s.format(a)}),currency:i((r,o)=>{const s=new Intl.NumberFormat(r,{...o,style:"currency"});return a=>s.format(a)}),datetime:i((r,o)=>{const s=new Intl.DateTimeFormat(r,{...o});return a=>s.format(a)}),relativetime:i((r,o)=>{const s=new Intl.RelativeTimeFormat(r,{...o});return a=>s.format(a,o.range||"day")}),list:i((r,o)=>{const s=new Intl.ListFormat(r,{...o});return a=>s.format(a)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=sL(t)}format(e,t,i,r={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,c)=>{const{formatName:h,formatOptions:m}=vse(c);if(this.formats[h]){let v=a;try{const x=r?.formatParams?.[r.interpolationkey]||{},E=x.locale||x.lng||r.locale||r.lng||i;v=this.formats[h](a,E,{...m,...r,...x})}catch(x){this.logger.warn(x)}return v}else this.logger.warn(`there was no format function for ${h}`);return a},e)}}const _se=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class xse extends iE{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Lg.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const o={},s={},a={},c={};return e.forEach(h=>{let m=!0;t.forEach(v=>{const x=`${h}|${v}`;!i.reload&&this.store.hasResourceBundle(h,v)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?s[x]===void 0&&(s[x]=!0):(this.state[x]=1,m=!1,s[x]===void 0&&(s[x]=!0),o[x]===void 0&&(o[x]=!0),c[v]===void 0&&(c[v]=!0)))}),m||(a[h]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,t,i){const r=e.split("|"),o=r[0],s=r[1];t&&this.emit("failedLoading",o,s,t),!t&&i&&this.store.addResourceBundle(o,s,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const a={};this.queue.forEach(c=>{ase(c.loaded,[o],s),_se(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{a[h]||(a[h]={});const m=c.loaded[h];m.length&&m.forEach(v=>{a[h][v]===void 0&&(a[h][v]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,t,i,r=0,o=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:o,callback:s});return}this.readingCalls++;const a=(h,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(h&&m&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,o*2,s)},o);return}s(h,m)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const h=c(e,t);h&&typeof h.then=="function"?h.then(m=>a(null,m)).catch(a):a(null,h)}catch(h){a(h)}return}return c(e,t,a)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();jr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),jr(t)&&(t=[t]);const o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${t}loading namespace ${o} for language ${r} failed`,s),!s&&a&&this.logger.log(`${t}loaded namespace ${o} for language ${r}`,a),this.loaded(e,s,a)})}saveMissing(e,t,i,r,o,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const c={...s,isUpdate:o},h=this.backend.create.bind(this.backend);if(h.length<6)try{let m;h.length===5?m=h(e,t,i,r,c):m=h(e,t,i,r),m&&typeof m.then=="function"?m.then(v=>a(null,v)).catch(a):a(null,m)}catch(m){a(m)}else h(e,t,i,r,a,c)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const aL=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),jr(n[1])&&(e.defaultValue=n[1]),jr(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),lL=n=>(jr(n.ns)&&(n.ns=[n.ns]),jr(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),jr(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),D5=()=>{},Mse=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class I3 extends iE{constructor(e={},t){if(super(),this.options=lL(e),this.services={},this.logger=Lg,this.modules={external:[]},Mse(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(jr(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=aL();this.options={...i,...this.options,...lL(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Lg.init(r(this.modules.logger),this.options):Lg.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=Cse;const m=new nL(this.options);this.store=new eL(this.options.resources,this.options);const v=this.services;v.logger=Lg,v.resourceStore=this.store,v.languageUtils=m,v.pluralResolver=new gse(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(v.formatter=r(h),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new yse(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new xse(r(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(E,...R)=>{this.emit(E,...R)}),this.modules.languageDetector&&(v.languageDetector=r(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=r(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Pw(this.services,this.options),this.translator.on("*",(E,...R)=>{this.emit(E,...R)}),this.modules.external.forEach(E=>{E.init&&E.init(this)})}if(this.format=this.options.interpolation.format,t||(t=D5),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...m)=>this.store[h](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...m)=>(this.store[h](...m),this)});const a=o2(),c=()=>{const h=(m,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(v),t(m,v)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,t=D5){let i=t;const r=jr(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};r?s(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,t,i){const r=o2();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=D5),this.services.backendConnector.reload(e,t,o=>{r.resolve(),i(o)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&m$.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=o2();this.emit("languageChanging",e);const r=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?this.isLanguageChangingTo===e&&(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve((...h)=>this.t(...h)),t&&t(a,(...h)=>this.t(...h))},s=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=jr(a)?a:a&&a[0],h=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(jr(a)?[a]:a);h&&(this.language||r(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,m=>{o(m,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,t,i){const r=(o,s,...a)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([o,s].concat(a)):c={...s},c.lng=c.lng||r.lng,c.lngs=c.lngs||r.lngs,c.ns=c.ns||r.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||r.keyPrefix);const h=this.options.keySeparator||".";let m;return c.keyPrefix&&Array.isArray(o)?m=o.map(v=>(typeof v=="function"&&(v=Dw(v,{...this.options,...s})),`${c.keyPrefix}${h}${v}`)):(typeof o=="function"&&(o=Dw(o,{...this.options,...s})),m=c.keyPrefix?`${c.keyPrefix}${h}${o}`:o),this.t(m,c)};return jr(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const h=this.services.backendConnector.state[`${a}|${c}`];return h===-1||h===0||h===2};if(t.precheck){const a=t.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!r||s(o,e)))}loadNamespaces(e,t){const i=o2();return this.options.ns?(jr(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=o2();jr(e)&&(e=[e]);const r=this.options.preload||[],o=e.filter(s=>r.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=r.concat(o),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const o=r.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new nL(aL());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new I3(e,t)}cloneInstance(e={},t=D5){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new I3(r);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i){const a=Object.keys(this.store.data).reduce((c,h)=>(c[h]={...this.store.data[h]},c[h]=Object.keys(c[h]).reduce((m,v)=>(m[v]={...c[h][v]},m),c[h]),c),{});o.store=new eL(a,r),o.services.resourceStore=o.store}return o.translator=new Pw(o.services,r),o.translator.on("*",(a,...c)=>{o.emit(a,...c)}),o.init(r,t),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const gA=I3.createInstance();gA.createInstance=I3.createInstance;gA.createInstance;gA.dir;gA.init;gA.loadResources;gA.reloadResources;gA.use;gA.changeLanguage;gA.getFixedT;gA.t;gA.exists;gA.setDefaultNamespace;gA.hasLoadedNamespace;gA.loadNamespaces;gA.loadLanguages;const{slice:wse,forEach:Sse}=[];function Ese(n){return Sse.call(wse.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function Bse(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const uL=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Ose=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let o=`${n}=${r}`;if(i.maxAge>0){const s=i.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(i.domain){if(!uL.test(i.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${i.domain}`}if(i.path){if(!uL.test(i.path))throw new TypeError("option path is invalid");o+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(o+="; Partitioned"),o},cL={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=Ose(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var Ise={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return cL.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:o}=e;t&&typeof document<"u"&&cL.create(t,n,i,r,o)}},kse={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let s=0;s<o.length;s++){const a=o[s].indexOf("=");a>0&&o[s].substring(0,a)===e&&(t=o[s].substring(a+1))}}return t}},Tse={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(e){const s=o.split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===e&&(i=s[a].substring(c+1))}}if(i)return i;if(!i&&t>-1){const s=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let DC=null;const AL=()=>{if(DC!==null)return DC;try{if(DC=typeof window<"u"&&window.localStorage!==null,!DC)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{DC=!1}return DC};var Rse={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&AL())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&AL()&&window.localStorage.setItem(t,n)}};let PC=null;const hL=()=>{if(PC!==null)return PC;try{if(PC=typeof window<"u"&&window.sessionStorage!==null,!PC)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{PC=!1}return PC};var Dse={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&hL())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&hL()&&window.sessionStorage.setItem(t,n)}},Pse={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let o=0;o<t.length;o++)e.push(t[o]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},Kse={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},Use={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},Lse={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let y$=!1;try{document.cookie,y$=!0}catch{}const v$=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];y$||v$.splice(1,1);const zse=()=>({order:v$,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class b${constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Ese(t,this.options||{},zse()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Ise),this.addDetector(kse),this.addDetector(Rse),this.addDetector(Dse),this.addDetector(Pse),this.addDetector(Kse),this.addDetector(Use),this.addDetector(Lse),this.addDetector(Tse)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!Bse(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}b$.type="languageDetector";var Fse=function(e){return{type:"backend",init:function(i,r,o){},read:function(i,r,o){if(typeof e=="function"){if(e.length<3){try{var s=e(i,r);s&&typeof s.then=="function"?s.then(function(a){return o(null,a&&a.default||a)}).catch(o):o(null,s)}catch(a){o(a)}return}e(i,r,o);return}o(null,e&&e[i]&&e[i][r])}}},rB,dL;function jse(){return dL||(dL=1,rB={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),rB}var Nse=jse();const Gse=Su(Nse);var Qse=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function fL(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(Gse[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(Qse),o=null;(o=r.exec(n))!==null;)if(o[0].trim())if(o[1]){var s=o[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),e.attrs[a[0]]=a[1],r.lastIndex--}else o[2]&&(e.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return e}var Wse=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,qse=/^\s*$/,Yse=Object.create(null);function C$(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?(function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""})(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(C$,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Vse={parse:function(n,e){e||(e={}),e.components||(e.components=Yse);var t,i=[],r=[],o=-1,s=!1;if(n.indexOf("<")!==0){var a=n.indexOf("<");i.push({type:"text",content:a===-1?n:n.substring(0,a)})}return n.replace(Wse,function(c,h){if(s){if(c!=="</"+t.name+">")return;s=!1}var m,v=c.charAt(1)!=="/",x=c.startsWith("<!--"),E=h+c.length,R=n.charAt(E);if(x){var P=fL(c);return o<0?(i.push(P),i):((m=r[o]).children.push(P),i)}if(v&&(o++,(t=fL(c)).type==="tag"&&e.components[t.name]&&(t.type="component",s=!0),t.voidElement||s||!R||R==="<"||t.children.push({type:"text",content:n.slice(E,n.indexOf("<",E))}),o===0&&i.push(t),(m=r[o-1])&&m.children.push(t),r[o]=t),(!v||t.voidElement)&&(o>-1&&(t.voidElement||t.name===c.slice(2,-1))&&(o--,t=o===-1?i:r[o]),!s&&R!=="<"&&R)){m=o===-1?i:r[o].children;var z=n.indexOf("<",E),Q=n.slice(E,z===-1?void 0:z);qse.test(Q)&&(Q=" "),(z>-1&&o+m.length>=0||Q!==" ")&&m.push({type:"text",content:Q})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+C$("",t)},"")}};const XM=(n,e,t,i)=>{const r=[t,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);wf(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},pL={},rE=(n,e,t,i)=>{wf(t)&&pL[t]||(wf(t)&&(pL[t]=new Date),XM(n,e,t,i))},_$=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},lT=(n,e,t)=>{n.loadNamespaces(e,_$(n,t))},mL=(n,e,t,i)=>{if(wf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return lT(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,_$(n,i))},$se=(n,e,t={})=>!e.languages||!e.languages.length?(rE(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),Hse=n=>n.displayName||n.name||(wf(n)&&n.length>0?n:"Unknown"),wf=n=>typeof n=="string",Ky=n=>typeof n=="object"&&n!==null,Zse=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Xse={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Jse=n=>Xse[n],eae=n=>n.replace(Zse,Jse);let uT={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:eae};const tae=(n={})=>{uT={...uT,...n}},x$=()=>uT;let M$;const nae=n=>{M$=n},HR=()=>M$,oB=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},sB=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?M_(e):e},iae=n=>Array.isArray(n)&&n.every(_t.isValidElement),M_=n=>Array.isArray(n)?n:[n],rae=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},w$=(n,e,t,i)=>{if(!n)return"";let r="";const o=M_(n),s=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return o.forEach((a,c)=>{if(wf(a)){r+=`${a}`;return}if(_t.isValidElement(a)){const{props:h,type:m}=a,v=Object.keys(h).length,x=s.indexOf(m)>-1,E=h.children;if(!E&&x&&!v){r+=`<${m}/>`;return}if(!E&&(!x||v)||h.i18nIsDynamicList){r+=`<${c}></${c}>`;return}if(x&&v===1&&wf(E)){r+=`<${m}>${E}</${m}>`;return}const R=w$(E,e,t,i);r+=`<${c}>${R}</${c}>`;return}if(a===null){XM(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:i});return}if(Ky(a)){const{format:h,...m}=a,v=Object.keys(m);if(v.length===1){const x=h?`${v[0]}, ${h}`:v[0];r+=`{{${x}}}`;return}XM(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:i,child:a});return}XM(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:i,child:a})}),r},oae=(n,e=[],t={})=>{if(!n)return n;const i=Object.keys(t),r=[...e,...i];let o="",s=0;for(;s<n.length;)if(n[s]==="<"){let a=!1;const c=n.slice(s).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9-]*)>/);if(c){const h=c[1];(/^\d+$/.test(h)||r.includes(h))&&(a=!0,o+=c[0],s+=c[0].length)}if(!a){const h=n.slice(s).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(h){const m=h[1];(/^\d+$/.test(m)||r.includes(m))&&(a=!0,o+=h[0],s+=h[0].length)}}a||(o+="&lt;",s+=1)}else o+=n[s],s+=1;return o},sae=(n,e,t,i,r,o,s)=>{if(t==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],c=t&&new RegExp(a.map(Y=>`<${Y}`).join("|")).test(t);if(!n&&!e&&!c&&!s)return[t];const h=e??{},m=Y=>{M_(Y).forEach(Z=>{wf(Z)||(oB(Z)?m(sB(Z)):Ky(Z)&&!_t.isValidElement(Z)&&Object.assign(h,Z))})};m(n);const v=oae(t,a,h),x=Vse.parse(`<0>${v}</0>`),E={...h,...o},R=(Y,H,Z)=>{const J=sB(Y),$=z(J,H.children,Z);return iae(J)&&$.length===0||Y.props?.i18nIsDynamicList?J:$},P=(Y,H,Z,J,$)=>{Y.dummy?(Y.children=H,Z.push(_t.cloneElement(Y,{key:J},$?void 0:H))):Z.push(..._t.Children.map([Y],G=>{const oe={...G.props};return delete oe.i18nIsDynamicList,_t.createElement(G.type,{...oe,key:J,ref:G.props.ref??G.ref},$?null:H)}))},z=(Y,H,Z)=>{const J=M_(Y);return M_(H).reduce((G,oe,ue)=>{const xe=oe.children?.[0]?.content&&i.services.interpolator.interpolate(oe.children[0].content,E,i.language);if(oe.type==="tag"){let ge=J[parseInt(oe.name,10)];!ge&&e&&(ge=e[oe.name]),Z.length===1&&!ge&&(ge=Z[0][oe.name]),ge||(ge={});const Ie=Object.keys(oe.attrs).length!==0?rae({props:oe.attrs},ge):ge,Me=_t.isValidElement(Ie),ke=Me&&oB(oe,!0)&&!oe.voidElement,je=c&&Ky(Ie)&&Ie.dummy&&!Me,Be=Ky(e)&&Object.hasOwnProperty.call(e,oe.name);if(wf(Ie)){const Ye=i.services.interpolator.interpolate(Ie,E,i.language);G.push(Ye)}else if(oB(Ie)||ke){const Ye=R(Ie,oe,Z);P(Ie,Ye,G,ue)}else if(je){const Ye=z(J,oe.children,Z);P(Ie,Ye,G,ue)}else if(Number.isNaN(parseFloat(oe.name)))if(Be){const Ye=R(Ie,oe,Z);P(Ie,Ye,G,ue,oe.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(oe.name)>-1)if(oe.voidElement)G.push(_t.createElement(oe.name,{key:`${oe.name}-${ue}`}));else{const Ye=z(J,oe.children,Z);G.push(_t.createElement(oe.name,{key:`${oe.name}-${ue}`},Ye))}else if(oe.voidElement)G.push(`<${oe.name} />`);else{const Ye=z(J,oe.children,Z);G.push(`<${oe.name}>${Ye}</${oe.name}>`)}else if(Ky(Ie)&&!Me){const Ye=oe.children[0]?xe:null;Ye&&G.push(Ye)}else P(Ie,xe,G,ue,oe.children.length!==1||!xe)}else if(oe.type==="text"){const ge=r.transWrapTextNodes,Ie=s?r.unescape(i.services.interpolator.interpolate(oe.content,E,i.language)):i.services.interpolator.interpolate(oe.content,E,i.language);ge?G.push(_t.createElement(ge,{key:`${oe.name}-${ue}`},Ie)):G.push(Ie)}return G},[])},Q=z([{dummy:!0,children:n||[]}],x,M_(n||[]));return sB(Q[0])},S$=(n,e,t)=>{const i=n.key||e,r=_t.cloneElement(n,{key:i});if(!r.props||!r.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return r;function o(){return _t.createElement(_t.Fragment,null,r)}return _t.createElement(o,{key:i})},aae=(n,e)=>n.map((t,i)=>S$(t,i,e)),lae=(n,e)=>{const t={};return Object.keys(n).forEach(i=>{Object.assign(t,{[i]:S$(n[i],i,e)})}),t},uae=(n,e,t,i)=>n?Array.isArray(n)?aae(n,e):Ky(n)?lae(n,e):(rE(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:i}),null):null,cae=n=>!Ky(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function Aae({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:h,i18n:m,t:v,shouldUnescape:x,...E}){const R=m||HR();if(!R)return rE(R,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const P=v||R.t.bind(R)||(ke=>ke),z={...x$(),...R.options?.react};let Q=h||P.ns||R.options?.defaultNS;Q=wf(Q)?[Q]:Q||["translation"];const Y=w$(n,z,R,i),H=a||o?.defaultValue||Y||z.transEmptyNodeValue||(typeof i=="function"?Dw(i):i),{hashTransKey:Z}=z,J=i||(Z?Z(Y||H):Y||H);R.options?.interpolation?.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...R.options.interpolation.defaultVariables}:{...R.options.interpolation.defaultVariables});const $=s||e!==void 0&&!R.options?.interpolation?.alwaysFormat||!n?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},G={...o,context:r||o.context,count:e,...s,...$,defaultValue:a||o?.defaultValue,ns:Q},oe=J?P(J,G):H,ue=uae(c,oe,R,i);let xe=ue||n,ge=null;cae(ue)&&(ge=ue,xe=n);const Ie=sae(xe,ge,oe,R,z,G,x),Me=t??z.defaultTransParent;return Me?_t.createElement(Me,E,Ie):Ie}const hae={type:"3rdParty",init(n){tae(n.options.react),nae(n)}},E$=_t.createContext();class dae{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function Cb({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o={},values:s,defaults:a,components:c,ns:h,i18n:m,t:v,shouldUnescape:x,...E}){const{i18n:R,defaultNS:P}=_t.useContext(E$)||{},z=m||R||HR(),Q=v||z?.t.bind(z);return Aae({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:o,values:s,defaults:a,components:c,ns:h||Q?.ns||P||z?.options?.defaultNS,i18n:z,t:v,shouldUnescape:x,...E})}var aB={exports:{}},lB={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gL;function fae(){if(gL)return lB;gL=1;var n=Ba();function e(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,o=n.useLayoutEffect,s=n.useDebugValue;function a(v,x){var E=x(),R=i({inst:{value:E,getSnapshot:x}}),P=R[0].inst,z=R[1];return o(function(){P.value=E,P.getSnapshot=x,c(P)&&z({inst:P})},[v,E,x]),r(function(){return c(P)&&z({inst:P}),v(function(){c(P)&&z({inst:P})})},[v]),s(E),E}function c(v){var x=v.getSnapshot;v=v.value;try{var E=x();return!t(v,E)}catch{return!0}}function h(v,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:a;return lB.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,lB}var yL;function pae(){return yL||(yL=1,aB.exports=fae()),aB.exports}var mae=pae();const gae=(n,e)=>wf(e)?e:Ky(e)&&wf(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,yae={t:gae,ready:!1},vae=()=>()=>{},bae=(n,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:r}=_t.useContext(E$)||{},o=t||i||HR();o&&!o.reportNamespaces&&(o.reportNamespaces=new dae),o||rE(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const s=_t.useMemo(()=>({...x$(),...o?.options?.react,...e}),[o,e]),{useSuspense:a,keyPrefix:c}=s,h=_t.useMemo(()=>{const Z=r||o?.options?.defaultNS;return wf(Z)?[Z]:Z||["translation"]},[n,r,o]);o?.reportNamespaces?.addUsedNamespaces?.(h);const m=_t.useRef(0),v=_t.useCallback(Z=>{if(!o)return vae;const{bindI18n:J,bindI18nStore:$}=s,G=()=>{m.current+=1,Z()};return J&&o.on(J,G),$&&o.store.on($,G),()=>{J&&J.split(" ").forEach(oe=>o.off(oe,G)),$&&$.split(" ").forEach(oe=>o.store.off(oe,G))}},[o,s]),x=_t.useRef(),E=_t.useCallback(()=>{if(!o)return yae;const Z=!!(o.isInitialized||o.initializedStoreOnce)&&h.every(xe=>$se(xe,o,s)),J=e.lng||o.language,$=m.current,G=x.current;if(G&&G.ready===Z&&G.lng===J&&G.keyPrefix===c&&G.revision===$)return G;const ue={t:o.getFixedT(J,s.nsMode==="fallback"?h:h[0],c),ready:Z,lng:J,keyPrefix:c,revision:$};return x.current=ue,ue},[o,h,c,s,e.lng]),[R,P]=_t.useState(0),{t:z,ready:Q}=mae.useSyncExternalStore(v,E,E);_t.useEffect(()=>{if(o&&!Q&&!a){const Z=()=>P(J=>J+1);e.lng?mL(o,e.lng,h,Z):lT(o,h,Z)}},[o,e.lng,h,Q,a,R]);const Y=o||{},H=_t.useMemo(()=>{const Z=[z,Y,Q];return Z.t=z,Z.i18n=Y,Z.ready=Q,Z},[z,Y,Q]);if(o&&a&&!Q)throw new Promise(Z=>{const J=()=>Z();e.lng?mL(o,e.lng,h,J):lT(o,h,J)});return H},Fo=(n,e={})=>function(i){function r({forwardedRef:s,...a}){const[c,h,m]=bae(n,{...a,keyPrefix:e.keyPrefix}),v={...a,t:c,i18n:h,tReady:m};return e.withRef&&s?v.ref=s:!e.withRef&&s&&(v.forwardedRef=s),_t.createElement(i,v)}r.displayName=`withI18nextTranslation(${Hse(i)})`,r.WrappedComponent=i;const o=(s,a)=>_t.createElement(r,Object.assign({},s,{forwardedRef:a}));return e.withRef?_t.forwardRef(o):r};function ua(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="529ee327821ff95d86675c5d3e41229f0d9cb0df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"529ee327821ff95d86675c5d3e41229f0d9cb0df"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ua=function(){return s},s}ua();const B$=(ua().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});ua().s[1]++;gA.use(b$).use(Fse((n,e)=>(ua().f[0]++,ua().s[2]++,n==="en"?(ua().b[0][0]++,ua().s[3]++,{}):(ua().b[0][1]++,ua().s[4]++,rse(Object.assign({"./locales/de/translation.json":()=>(ua().f[1]++,ua().s[5]++,TC(()=>import("./translation-CQD4fuPu.js"),[])),"./locales/fr/translation.json":()=>(ua().f[2]++,ua().s[6]++,TC(()=>import("./translation-XoriI0W-.js"),[])),"./locales/he/translation.json":()=>(ua().f[3]++,ua().s[7]++,TC(()=>import("./translation-aD1CAGoy.js"),[])),"./locales/it/translation.json":()=>(ua().f[4]++,ua().s[8]++,TC(()=>import("./translation-CZ64AJ8H.js"),[])),"./locales/ja/translation.json":()=>(ua().f[5]++,ua().s[9]++,TC(()=>import("./translation-BhJ-ufwk.js"),[])),"./locales/zh/translation.json":()=>(ua().f[6]++,ua().s[10]++,TC(()=>import("./translation-BrzYPxJn.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(hae).init({supportedLngs:Object.keys(B$),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(ua().f[7]++,ua().s[11]++,n[0]==="en"){ua().b[1][0]++,ua().s[12]++;return}else ua().b[1][1]++;ua().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var O2={exports:{}};O2.exports;var vL;function Cae(){return vL||(vL=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",c="[object Date]",h="[object Error]",m="[object Function]",v="[object GeneratorFunction]",x="[object Map]",E="[object Number]",R="[object Object]",P="[object Promise]",z="[object RegExp]",Q="[object Set]",Y="[object String]",H="[object Symbol]",Z="[object WeakMap]",J="[object ArrayBuffer]",$="[object DataView]",G="[object Float32Array]",oe="[object Float64Array]",ue="[object Int8Array]",xe="[object Int16Array]",ge="[object Int32Array]",Ie="[object Uint8Array]",Me="[object Uint8ClampedArray]",ke="[object Uint16Array]",je="[object Uint32Array]",Be=/[\\^$.*+?()[\]{}|]/g,Ye=/\w*$/,At=/^\[object .+?Constructor\]$/,yt=/^(?:0|[1-9]\d*)$/,Le={};Le[o]=Le[s]=Le[J]=Le[$]=Le[a]=Le[c]=Le[G]=Le[oe]=Le[ue]=Le[xe]=Le[ge]=Le[x]=Le[E]=Le[R]=Le[z]=Le[Q]=Le[Y]=Le[H]=Le[Ie]=Le[Me]=Le[ke]=Le[je]=!0,Le[h]=Le[m]=Le[Z]=!1;var De=typeof window=="object"&&window&&window.Object===Object&&window,Ge=typeof self=="object"&&self&&self.Object===Object&&self,Te=De||Ge||Function("return this")(),xt=e&&!e.nodeType&&e,st=xt&&!0&&n&&!n.nodeType&&n,Tt=st&&st.exports===xt;function Lt(X,me){return X.set(me[0],me[1]),X}function Ue(X,me){return X.add(me),X}function Oe(X,me){for(var Ne=-1,wt=X?X.length:0;++Ne<wt&&me(X[Ne],Ne,X)!==!1;);return X}function Ee(X,me){for(var Ne=-1,wt=me.length,hn=X.length;++Ne<wt;)X[hn+Ne]=me[Ne];return X}function Ve(X,me,Ne,wt){for(var hn=-1,Bn=X?X.length:0;++hn<Bn;)Ne=me(Ne,X[hn],hn,X);return Ne}function mt(X,me){for(var Ne=-1,wt=Array(X);++Ne<X;)wt[Ne]=me(Ne);return wt}function pt(X,me){return X?.[me]}function Ct(X){var me=!1;if(X!=null&&typeof X.toString!="function")try{me=!!(X+"")}catch{}return me}function Rt(X){var me=-1,Ne=Array(X.size);return X.forEach(function(wt,hn){Ne[++me]=[hn,wt]}),Ne}function Kt(X,me){return function(Ne){return X(me(Ne))}}function on(X){var me=-1,Ne=Array(X.size);return X.forEach(function(wt){Ne[++me]=wt}),Ne}var qn=Array.prototype,Qn=Function.prototype,xi=Object.prototype,Kn=Te["__core-js_shared__"],Un=(function(){var X=/[^.]+$/.exec(Kn&&Kn.keys&&Kn.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""})(),Cn=Qn.toString,ei=xi.hasOwnProperty,Dn=xi.toString,It=RegExp("^"+Cn.call(ei).replace(Be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ce=Tt?Te.Buffer:void 0,re=Te.Symbol,le=Te.Uint8Array,he=Kt(Object.getPrototypeOf,Object),se=Object.create,Ae=xi.propertyIsEnumerable,be=qn.splice,We=Object.getOwnPropertySymbols,et=Ce?Ce.isBuffer:void 0,Pe=Kt(Object.keys,Object),Ze=Ms(Te,"DataView"),y=Ms(Te,"Map"),at=Ms(Te,"Promise"),Pt=Ms(Te,"Set"),Mt=Ms(Te,"WeakMap"),en=Ms(Object,"create"),dt=Xo(Ze),Zn=Xo(y),gi=Xo(at),Tn=Xo(Pt),zn=Xo(Mt),si=re?re.prototype:void 0,ir=si?si.valueOf:void 0;function Di(X){var me=-1,Ne=X?X.length:0;for(this.clear();++me<Ne;){var wt=X[me];this.set(wt[0],wt[1])}}function gr(){this.__data__=en?en(null):{}}function Oi(X){return this.has(X)&&delete this.__data__[X]}function Ri(X){var me=this.__data__;if(en){var Ne=me[X];return Ne===i?void 0:Ne}return ei.call(me,X)?me[X]:void 0}function cr(X){var me=this.__data__;return en?me[X]!==void 0:ei.call(me,X)}function nn(X,me){var Ne=this.__data__;return Ne[X]=en&&me===void 0?i:me,this}Di.prototype.clear=gr,Di.prototype.delete=Oi,Di.prototype.get=Ri,Di.prototype.has=cr,Di.prototype.set=nn;function Pi(X){var me=-1,Ne=X?X.length:0;for(this.clear();++me<Ne;){var wt=X[me];this.set(wt[0],wt[1])}}function $o(){this.__data__=[]}function Ks(X){var me=this.__data__,Ne=Rl(me,X);if(Ne<0)return!1;var wt=me.length-1;return Ne==wt?me.pop():be.call(me,Ne,1),!0}function Vr(X){var me=this.__data__,Ne=Rl(me,X);return Ne<0?void 0:me[Ne][1]}function mn(X){return Rl(this.__data__,X)>-1}function Ni(X,me){var Ne=this.__data__,wt=Rl(Ne,X);return wt<0?Ne.push([X,me]):Ne[wt][1]=me,this}Pi.prototype.clear=$o,Pi.prototype.delete=Ks,Pi.prototype.get=Vr,Pi.prototype.has=mn,Pi.prototype.set=Ni;function ri(X){var me=-1,Ne=X?X.length:0;for(this.clear();++me<Ne;){var wt=X[me];this.set(wt[0],wt[1])}}function nl(){this.__data__={hash:new Di,map:new(y||Pi),string:new Di}}function Xc(X){return Fa(this,X).delete(X)}function kl(X){return Fa(this,X).get(X)}function Ki(X){return Fa(this,X).has(X)}function Jl(X,me){return Fa(this,X).set(X,me),this}ri.prototype.clear=nl,ri.prototype.delete=Xc,ri.prototype.get=kl,ri.prototype.has=Ki,ri.prototype.set=Jl;function po(X){this.__data__=new Pi(X)}function Oa(){this.__data__=new Pi}function eu(X){return this.__data__.delete(X)}function da(X){return this.__data__.get(X)}function Ho(X){return this.__data__.has(X)}function Tl(X,me){var Ne=this.__data__;if(Ne instanceof Pi){var wt=Ne.__data__;if(!y||wt.length<t-1)return wt.push([X,me]),this;Ne=this.__data__=new ri(wt)}return Ne.set(X,me),this}po.prototype.clear=Oa,po.prototype.delete=eu,po.prototype.get=da,po.prototype.has=Ho,po.prototype.set=Tl;function Zo(X,me){var Ne=ws(X)||oo(X)?mt(X.length,String):[],wt=Ne.length,hn=!!wt;for(var Bn in X)ei.call(X,Bn)&&!(hn&&(Bn=="length"||Ji(Bn,wt)))&&Ne.push(Bn);return Ne}function Wi(X,me,Ne){var wt=X[me];(!(ei.call(X,me)&&Ko(wt,Ne))||Ne===void 0&&!(me in X))&&(X[me]=Ne)}function Rl(X,me){for(var Ne=X.length;Ne--;)if(Ko(X[Ne][0],me))return Ne;return-1}function rs(X,me){return X&&il(me,Pl(me),X)}function Dl(X,me,Ne,wt,hn,Bn,li){var Ui;if(wt&&(Ui=Bn?wt(X,hn,Bn,li):wt(X)),Ui!==void 0)return Ui;if(!so(X))return X;var wi=ws(X);if(wi){if(Ui=ou(X),!me)return rc(X,Ui)}else{var Si=ru(X),fr=Si==m||Si==v;if(au(X))return Oo(X,me);if(Si==R||Si==o||fr&&!Bn){if(Ct(X))return Bn?X:{};if(Ui=Us(fr?{}:X),!me)return eA(X,rs(Ui,X))}else{if(!Le[Si])return Bn?X:{};Ui=ja(X,Si,Dl,me)}}li||(li=new po);var ao=li.get(X);if(ao)return ao;if(li.set(X,Ui),!wi)var br=Ne?iu(X):Pl(X);return Oe(br||X,function(yr,eo){br&&(eo=yr,yr=X[eo]),Wi(Ui,eo,Dl(yr,me,Ne,wt,eo,X,li))}),Ui}function tu(X){return so(X)?se(X):{}}function Eu(X,me,Ne){var wt=me(X);return ws(X)?wt:Ee(wt,Ne(X))}function Jc(X){return Dn.call(X)}function tc(X){if(!so(X)||Gi(X))return!1;var me=mo(X)||Ct(X)?It:At;return me.test(Xo(X))}function ml(X){if(!Na(X))return Pe(X);var me=[];for(var Ne in Object(X))ei.call(X,Ne)&&Ne!="constructor"&&me.push(Ne);return me}function Oo(X,me){if(me)return X.slice();var Ne=new X.constructor(X.length);return X.copy(Ne),Ne}function nc(X){var me=new X.constructor(X.byteLength);return new le(me).set(new le(X)),me}function nu(X,me){var Ne=me?nc(X.buffer):X.buffer;return new X.constructor(Ne,X.byteOffset,X.byteLength)}function Ec(X,me,Ne){var wt=me?Ne(Rt(X),!0):Rt(X);return Ve(wt,Lt,new X.constructor)}function ic(X){var me=new X.constructor(X.source,Ye.exec(X));return me.lastIndex=X.lastIndex,me}function Bc(X,me,Ne){var wt=me?Ne(on(X),!0):on(X);return Ve(wt,Ue,new X.constructor)}function Dh(X){return ir?Object(ir.call(X)):{}}function fa(X,me){var Ne=me?nc(X.buffer):X.buffer;return new X.constructor(Ne,X.byteOffset,X.length)}function rc(X,me){var Ne=-1,wt=X.length;for(me||(me=Array(wt));++Ne<wt;)me[Ne]=X[Ne];return me}function il(X,me,Ne,wt){Ne||(Ne={});for(var hn=-1,Bn=me.length;++hn<Bn;){var li=me[hn],Ui=void 0;Wi(Ne,li,Ui===void 0?X[li]:Ui)}return Ne}function eA(X,me){return il(X,Io(X),me)}function iu(X){return Eu(X,Pl,Io)}function Fa(X,me){var Ne=X.__data__;return rl(me)?Ne[typeof me=="string"?"string":"hash"]:Ne.map}function Ms(X,me){var Ne=pt(X,me);return tc(Ne)?Ne:void 0}var Io=We?Kt(We,Object):ji,ru=Jc;(Ze&&ru(new Ze(new ArrayBuffer(1)))!=$||y&&ru(new y)!=x||at&&ru(at.resolve())!=P||Pt&&ru(new Pt)!=Q||Mt&&ru(new Mt)!=Z)&&(ru=function(X){var me=Dn.call(X),Ne=me==R?X.constructor:void 0,wt=Ne?Xo(Ne):void 0;if(wt)switch(wt){case dt:return $;case Zn:return x;case gi:return P;case Tn:return Q;case zn:return Z}return me});function ou(X){var me=X.length,Ne=X.constructor(me);return me&&typeof X[0]=="string"&&ei.call(X,"index")&&(Ne.index=X.index,Ne.input=X.input),Ne}function Us(X){return typeof X.constructor=="function"&&!Na(X)?tu(he(X)):{}}function ja(X,me,Ne,wt){var hn=X.constructor;switch(me){case J:return nc(X);case a:case c:return new hn(+X);case $:return nu(X,wt);case G:case oe:case ue:case xe:case ge:case Ie:case Me:case ke:case je:return fa(X,wt);case x:return Ec(X,wt,Ne);case E:case Y:return new hn(X);case z:return ic(X);case Q:return Bc(X,wt,Ne);case H:return Dh(X)}}function Ji(X,me){return me=me??r,!!me&&(typeof X=="number"||yt.test(X))&&X>-1&&X%1==0&&X<me}function rl(X){var me=typeof X;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?X!=="__proto__":X===null}function Gi(X){return!!Un&&Un in X}function Na(X){var me=X&&X.constructor,Ne=typeof me=="function"&&me.prototype||xi;return X===Ne}function Xo(X){if(X!=null){try{return Cn.call(X)}catch{}try{return X+""}catch{}}return""}function su(X){return Dl(X,!0,!0)}function Ko(X,me){return X===me||X!==X&&me!==me}function oo(X){return _o(X)&&ei.call(X,"callee")&&(!Ae.call(X,"callee")||Dn.call(X)==o)}var ws=Array.isArray;function Mo(X){return X!=null&&os(X.length)&&!mo(X)}function _o(X){return ol(X)&&Mo(X)}var au=et||ki;function mo(X){var me=so(X)?Dn.call(X):"";return me==m||me==v}function os(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=r}function so(X){var me=typeof X;return!!X&&(me=="object"||me=="function")}function ol(X){return!!X&&typeof X=="object"}function Pl(X){return Mo(X)?Zo(X):ml(X)}function ji(){return[]}function ki(){return!1}n.exports=su})(O2,O2.exports)),O2.exports}var _ae=Cae();const bL=Su(_ae);var uB,CL;function xae(){if(CL)return uB;CL=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype,c=a.toString;function h(P,z,Q){return P===P&&(Q!==void 0&&(P=P<=Q?P:Q),z!==void 0&&(P=P>=z?P:z)),P}function m(P){var z=typeof P;return!!P&&(z=="object"||z=="function")}function v(P){return!!P&&typeof P=="object"}function x(P){return typeof P=="symbol"||v(P)&&c.call(P)==e}function E(P){if(typeof P=="number")return P;if(x(P))return n;if(m(P)){var z=typeof P.valueOf=="function"?P.valueOf():P;P=m(z)?z+"":z}if(typeof P!="string")return P===0?P:+P;P=P.replace(t,"");var Q=r.test(P);return Q||o.test(P)?s(P.slice(2),Q?2:8):i.test(P)?n:+P}function R(P,z,Q){return Q===void 0&&(Q=z,z=void 0),Q!==void 0&&(Q=E(Q),Q=Q===Q?Q:0),z!==void 0&&(z=E(z),z=z===z?z:0),h(E(P),z,Q)}return uB=R,uB}var Mae=xae();const _L=Su(Mae);var cB={},s2={},xL;function wae(){if(xL)return s2;xL=1,s2.byteLength=a,s2.toByteArray=h,s2.fromByteArray=x;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function s(E){var R=E.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var P=E.indexOf("=");P===-1&&(P=R);var z=P===R?0:4-P%4;return[P,z]}function a(E){var R=s(E),P=R[0],z=R[1];return(P+z)*3/4-z}function c(E,R,P){return(R+P)*3/4-P}function h(E){var R,P=s(E),z=P[0],Q=P[1],Y=new t(c(E,z,Q)),H=0,Z=Q>0?z-4:z,J;for(J=0;J<Z;J+=4)R=e[E.charCodeAt(J)]<<18|e[E.charCodeAt(J+1)]<<12|e[E.charCodeAt(J+2)]<<6|e[E.charCodeAt(J+3)],Y[H++]=R>>16&255,Y[H++]=R>>8&255,Y[H++]=R&255;return Q===2&&(R=e[E.charCodeAt(J)]<<2|e[E.charCodeAt(J+1)]>>4,Y[H++]=R&255),Q===1&&(R=e[E.charCodeAt(J)]<<10|e[E.charCodeAt(J+1)]<<4|e[E.charCodeAt(J+2)]>>2,Y[H++]=R>>8&255,Y[H++]=R&255),Y}function m(E){return n[E>>18&63]+n[E>>12&63]+n[E>>6&63]+n[E&63]}function v(E,R,P){for(var z,Q=[],Y=R;Y<P;Y+=3)z=(E[Y]<<16&16711680)+(E[Y+1]<<8&65280)+(E[Y+2]&255),Q.push(m(z));return Q.join("")}function x(E){for(var R,P=E.length,z=P%3,Q=[],Y=16383,H=0,Z=P-z;H<Z;H+=Y)Q.push(v(E,H,H+Y>Z?Z:H+Y));return z===1?(R=E[P-1],Q.push(n[R>>2]+n[R<<4&63]+"==")):z===2&&(R=(E[P-2]<<8)+E[P-1],Q.push(n[R>>10]+n[R>>4&63]+n[R<<2&63]+"=")),Q.join("")}return s2}var P5={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var ML;function Sae(){return ML||(ML=1,P5.read=function(n,e,t,i,r){var o,s,a=r*8-i-1,c=(1<<a)-1,h=c>>1,m=-7,v=t?r-1:0,x=t?-1:1,E=n[e+v];for(v+=x,o=E&(1<<-m)-1,E>>=-m,m+=a;m>0;o=o*256+n[e+v],v+=x,m-=8);for(s=o&(1<<-m)-1,o>>=-m,m+=i;m>0;s=s*256+n[e+v],v+=x,m-=8);if(o===0)o=1-h;else{if(o===c)return s?NaN:(E?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-h}return(E?-1:1)*s*Math.pow(2,o-i)},P5.write=function(n,e,t,i,r,o){var s,a,c,h=o*8-r-1,m=(1<<h)-1,v=m>>1,x=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=i?0:o-1,R=i?1:-1,P=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=m):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+v>=1?e+=x/c:e+=x*Math.pow(2,1-v),e*c>=2&&(s++,c/=2),s+v>=m?(a=0,s=m):s+v>=1?(a=(e*c-1)*Math.pow(2,r),s=s+v):(a=e*Math.pow(2,v-1)*Math.pow(2,r),s=0));r>=8;n[t+E]=a&255,E+=R,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;n[t+E]=s&255,E+=R,s/=256,h-=8);n[t+E-R]|=P*128}),P5}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var wL;function Eae(){return wL||(wL=1,(function(n){const e=wae(),t=Sae(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=Y,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const Ce=new Uint8Array(1),re={foo:function(){return 42}};return Object.setPrototypeOf(re,Uint8Array.prototype),Object.setPrototypeOf(Ce,re),Ce.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(Ce){if(Ce>r)throw new RangeError('The value "'+Ce+'" is invalid for option "size"');const re=new Uint8Array(Ce);return Object.setPrototypeOf(re,a.prototype),re}function a(Ce,re,le){if(typeof Ce=="number"){if(typeof re=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(Ce)}return c(Ce,re,le)}a.poolSize=8192;function c(Ce,re,le){if(typeof Ce=="string")return x(Ce,re);if(ArrayBuffer.isView(Ce))return R(Ce);if(Ce==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ce);if(Un(Ce,ArrayBuffer)||Ce&&Un(Ce.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Un(Ce,SharedArrayBuffer)||Ce&&Un(Ce.buffer,SharedArrayBuffer)))return P(Ce,re,le);if(typeof Ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=Ce.valueOf&&Ce.valueOf();if(he!=null&&he!==Ce)return a.from(he,re,le);const se=z(Ce);if(se)return se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ce[Symbol.toPrimitive]=="function")return a.from(Ce[Symbol.toPrimitive]("string"),re,le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ce)}a.from=function(Ce,re,le){return c(Ce,re,le)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(Ce){if(typeof Ce!="number")throw new TypeError('"size" argument must be of type number');if(Ce<0)throw new RangeError('The value "'+Ce+'" is invalid for option "size"')}function m(Ce,re,le){return h(Ce),Ce<=0?s(Ce):re!==void 0?typeof le=="string"?s(Ce).fill(re,le):s(Ce).fill(re):s(Ce)}a.alloc=function(Ce,re,le){return m(Ce,re,le)};function v(Ce){return h(Ce),s(Ce<0?0:Q(Ce)|0)}a.allocUnsafe=function(Ce){return v(Ce)},a.allocUnsafeSlow=function(Ce){return v(Ce)};function x(Ce,re){if((typeof re!="string"||re==="")&&(re="utf8"),!a.isEncoding(re))throw new TypeError("Unknown encoding: "+re);const le=H(Ce,re)|0;let he=s(le);const se=he.write(Ce,re);return se!==le&&(he=he.slice(0,se)),he}function E(Ce){const re=Ce.length<0?0:Q(Ce.length)|0,le=s(re);for(let he=0;he<re;he+=1)le[he]=Ce[he]&255;return le}function R(Ce){if(Un(Ce,Uint8Array)){const re=new Uint8Array(Ce);return P(re.buffer,re.byteOffset,re.byteLength)}return E(Ce)}function P(Ce,re,le){if(re<0||Ce.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(Ce.byteLength<re+(le||0))throw new RangeError('"length" is outside of buffer bounds');let he;return re===void 0&&le===void 0?he=new Uint8Array(Ce):le===void 0?he=new Uint8Array(Ce,re):he=new Uint8Array(Ce,re,le),Object.setPrototypeOf(he,a.prototype),he}function z(Ce){if(a.isBuffer(Ce)){const re=Q(Ce.length)|0,le=s(re);return le.length===0||Ce.copy(le,0,0,re),le}if(Ce.length!==void 0)return typeof Ce.length!="number"||Cn(Ce.length)?s(0):E(Ce);if(Ce.type==="Buffer"&&Array.isArray(Ce.data))return E(Ce.data)}function Q(Ce){if(Ce>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return Ce|0}function Y(Ce){return+Ce!=Ce&&(Ce=0),a.alloc(+Ce)}a.isBuffer=function(re){return re!=null&&re._isBuffer===!0&&re!==a.prototype},a.compare=function(re,le){if(Un(re,Uint8Array)&&(re=a.from(re,re.offset,re.byteLength)),Un(le,Uint8Array)&&(le=a.from(le,le.offset,le.byteLength)),!a.isBuffer(re)||!a.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(re===le)return 0;let he=re.length,se=le.length;for(let Ae=0,be=Math.min(he,se);Ae<be;++Ae)if(re[Ae]!==le[Ae]){he=re[Ae],se=le[Ae];break}return he<se?-1:se<he?1:0},a.isEncoding=function(re){switch(String(re).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(re,le){if(!Array.isArray(re))throw new TypeError('"list" argument must be an Array of Buffers');if(re.length===0)return a.alloc(0);let he;if(le===void 0)for(le=0,he=0;he<re.length;++he)le+=re[he].length;const se=a.allocUnsafe(le);let Ae=0;for(he=0;he<re.length;++he){let be=re[he];if(Un(be,Uint8Array))Ae+be.length>se.length?(a.isBuffer(be)||(be=a.from(be)),be.copy(se,Ae)):Uint8Array.prototype.set.call(se,be,Ae);else if(a.isBuffer(be))be.copy(se,Ae);else throw new TypeError('"list" argument must be an Array of Buffers');Ae+=be.length}return se};function H(Ce,re){if(a.isBuffer(Ce))return Ce.length;if(ArrayBuffer.isView(Ce)||Un(Ce,ArrayBuffer))return Ce.byteLength;if(typeof Ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ce);const le=Ce.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&le===0)return 0;let se=!1;for(;;)switch(re){case"ascii":case"latin1":case"binary":return le;case"utf8":case"utf-8":return on(Ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le*2;case"hex":return le>>>1;case"base64":return xi(Ce).length;default:if(se)return he?-1:on(Ce).length;re=(""+re).toLowerCase(),se=!0}}a.byteLength=H;function Z(Ce,re,le){let he=!1;if((re===void 0||re<0)&&(re=0),re>this.length||((le===void 0||le>this.length)&&(le=this.length),le<=0)||(le>>>=0,re>>>=0,le<=re))return"";for(Ce||(Ce="utf8");;)switch(Ce){case"hex":return yt(this,re,le);case"utf8":case"utf-8":return ke(this,re,le);case"ascii":return Ye(this,re,le);case"latin1":case"binary":return At(this,re,le);case"base64":return Me(this,re,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,re,le);default:if(he)throw new TypeError("Unknown encoding: "+Ce);Ce=(Ce+"").toLowerCase(),he=!0}}a.prototype._isBuffer=!0;function J(Ce,re,le){const he=Ce[re];Ce[re]=Ce[le],Ce[le]=he}a.prototype.swap16=function(){const re=this.length;if(re%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let le=0;le<re;le+=2)J(this,le,le+1);return this},a.prototype.swap32=function(){const re=this.length;if(re%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let le=0;le<re;le+=4)J(this,le,le+3),J(this,le+1,le+2);return this},a.prototype.swap64=function(){const re=this.length;if(re%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let le=0;le<re;le+=8)J(this,le,le+7),J(this,le+1,le+6),J(this,le+2,le+5),J(this,le+3,le+4);return this},a.prototype.toString=function(){const re=this.length;return re===0?"":arguments.length===0?ke(this,0,re):Z.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(re){if(!a.isBuffer(re))throw new TypeError("Argument must be a Buffer");return this===re?!0:a.compare(this,re)===0},a.prototype.inspect=function(){let re="";const le=n.INSPECT_MAX_BYTES;return re=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(re+=" ... "),"<Buffer "+re+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(re,le,he,se,Ae){if(Un(re,Uint8Array)&&(re=a.from(re,re.offset,re.byteLength)),!a.isBuffer(re))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof re);if(le===void 0&&(le=0),he===void 0&&(he=re?re.length:0),se===void 0&&(se=0),Ae===void 0&&(Ae=this.length),le<0||he>re.length||se<0||Ae>this.length)throw new RangeError("out of range index");if(se>=Ae&&le>=he)return 0;if(se>=Ae)return-1;if(le>=he)return 1;if(le>>>=0,he>>>=0,se>>>=0,Ae>>>=0,this===re)return 0;let be=Ae-se,We=he-le;const et=Math.min(be,We),Pe=this.slice(se,Ae),Ze=re.slice(le,he);for(let y=0;y<et;++y)if(Pe[y]!==Ze[y]){be=Pe[y],We=Ze[y];break}return be<We?-1:We<be?1:0};function $(Ce,re,le,he,se){if(Ce.length===0)return-1;if(typeof le=="string"?(he=le,le=0):le>2147483647?le=2147483647:le<-2147483648&&(le=-2147483648),le=+le,Cn(le)&&(le=se?0:Ce.length-1),le<0&&(le=Ce.length+le),le>=Ce.length){if(se)return-1;le=Ce.length-1}else if(le<0)if(se)le=0;else return-1;if(typeof re=="string"&&(re=a.from(re,he)),a.isBuffer(re))return re.length===0?-1:G(Ce,re,le,he,se);if(typeof re=="number")return re=re&255,typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(Ce,re,le):Uint8Array.prototype.lastIndexOf.call(Ce,re,le):G(Ce,[re],le,he,se);throw new TypeError("val must be string, number or Buffer")}function G(Ce,re,le,he,se){let Ae=1,be=Ce.length,We=re.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(Ce.length<2||re.length<2)return-1;Ae=2,be/=2,We/=2,le/=2}function et(Ze,y){return Ae===1?Ze[y]:Ze.readUInt16BE(y*Ae)}let Pe;if(se){let Ze=-1;for(Pe=le;Pe<be;Pe++)if(et(Ce,Pe)===et(re,Ze===-1?0:Pe-Ze)){if(Ze===-1&&(Ze=Pe),Pe-Ze+1===We)return Ze*Ae}else Ze!==-1&&(Pe-=Pe-Ze),Ze=-1}else for(le+We>be&&(le=be-We),Pe=le;Pe>=0;Pe--){let Ze=!0;for(let y=0;y<We;y++)if(et(Ce,Pe+y)!==et(re,y)){Ze=!1;break}if(Ze)return Pe}return-1}a.prototype.includes=function(re,le,he){return this.indexOf(re,le,he)!==-1},a.prototype.indexOf=function(re,le,he){return $(this,re,le,he,!0)},a.prototype.lastIndexOf=function(re,le,he){return $(this,re,le,he,!1)};function oe(Ce,re,le,he){le=Number(le)||0;const se=Ce.length-le;he?(he=Number(he),he>se&&(he=se)):he=se;const Ae=re.length;he>Ae/2&&(he=Ae/2);let be;for(be=0;be<he;++be){const We=parseInt(re.substr(be*2,2),16);if(Cn(We))return be;Ce[le+be]=We}return be}function ue(Ce,re,le,he){return Kn(on(re,Ce.length-le),Ce,le,he)}function xe(Ce,re,le,he){return Kn(qn(re),Ce,le,he)}function ge(Ce,re,le,he){return Kn(xi(re),Ce,le,he)}function Ie(Ce,re,le,he){return Kn(Qn(re,Ce.length-le),Ce,le,he)}a.prototype.write=function(re,le,he,se){if(le===void 0)se="utf8",he=this.length,le=0;else if(he===void 0&&typeof le=="string")se=le,he=this.length,le=0;else if(isFinite(le))le=le>>>0,isFinite(he)?(he=he>>>0,se===void 0&&(se="utf8")):(se=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ae=this.length-le;if((he===void 0||he>Ae)&&(he=Ae),re.length>0&&(he<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");let be=!1;for(;;)switch(se){case"hex":return oe(this,re,le,he);case"utf8":case"utf-8":return ue(this,re,le,he);case"ascii":case"latin1":case"binary":return xe(this,re,le,he);case"base64":return ge(this,re,le,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,re,le,he);default:if(be)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),be=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Me(Ce,re,le){return re===0&&le===Ce.length?e.fromByteArray(Ce):e.fromByteArray(Ce.slice(re,le))}function ke(Ce,re,le){le=Math.min(Ce.length,le);const he=[];let se=re;for(;se<le;){const Ae=Ce[se];let be=null,We=Ae>239?4:Ae>223?3:Ae>191?2:1;if(se+We<=le){let et,Pe,Ze,y;switch(We){case 1:Ae<128&&(be=Ae);break;case 2:et=Ce[se+1],(et&192)===128&&(y=(Ae&31)<<6|et&63,y>127&&(be=y));break;case 3:et=Ce[se+1],Pe=Ce[se+2],(et&192)===128&&(Pe&192)===128&&(y=(Ae&15)<<12|(et&63)<<6|Pe&63,y>2047&&(y<55296||y>57343)&&(be=y));break;case 4:et=Ce[se+1],Pe=Ce[se+2],Ze=Ce[se+3],(et&192)===128&&(Pe&192)===128&&(Ze&192)===128&&(y=(Ae&15)<<18|(et&63)<<12|(Pe&63)<<6|Ze&63,y>65535&&y<1114112&&(be=y))}}be===null?(be=65533,We=1):be>65535&&(be-=65536,he.push(be>>>10&1023|55296),be=56320|be&1023),he.push(be),se+=We}return Be(he)}const je=4096;function Be(Ce){const re=Ce.length;if(re<=je)return String.fromCharCode.apply(String,Ce);let le="",he=0;for(;he<re;)le+=String.fromCharCode.apply(String,Ce.slice(he,he+=je));return le}function Ye(Ce,re,le){let he="";le=Math.min(Ce.length,le);for(let se=re;se<le;++se)he+=String.fromCharCode(Ce[se]&127);return he}function At(Ce,re,le){let he="";le=Math.min(Ce.length,le);for(let se=re;se<le;++se)he+=String.fromCharCode(Ce[se]);return he}function yt(Ce,re,le){const he=Ce.length;(!re||re<0)&&(re=0),(!le||le<0||le>he)&&(le=he);let se="";for(let Ae=re;Ae<le;++Ae)se+=ei[Ce[Ae]];return se}function Le(Ce,re,le){const he=Ce.slice(re,le);let se="";for(let Ae=0;Ae<he.length-1;Ae+=2)se+=String.fromCharCode(he[Ae]+he[Ae+1]*256);return se}a.prototype.slice=function(re,le){const he=this.length;re=~~re,le=le===void 0?he:~~le,re<0?(re+=he,re<0&&(re=0)):re>he&&(re=he),le<0?(le+=he,le<0&&(le=0)):le>he&&(le=he),le<re&&(le=re);const se=this.subarray(re,le);return Object.setPrototypeOf(se,a.prototype),se};function De(Ce,re,le){if(Ce%1!==0||Ce<0)throw new RangeError("offset is not uint");if(Ce+re>le)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(re,le,he){re=re>>>0,le=le>>>0,he||De(re,le,this.length);let se=this[re],Ae=1,be=0;for(;++be<le&&(Ae*=256);)se+=this[re+be]*Ae;return se},a.prototype.readUintBE=a.prototype.readUIntBE=function(re,le,he){re=re>>>0,le=le>>>0,he||De(re,le,this.length);let se=this[re+--le],Ae=1;for(;le>0&&(Ae*=256);)se+=this[re+--le]*Ae;return se},a.prototype.readUint8=a.prototype.readUInt8=function(re,le){return re=re>>>0,le||De(re,1,this.length),this[re]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(re,le){return re=re>>>0,le||De(re,2,this.length),this[re]|this[re+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(re,le){return re=re>>>0,le||De(re,2,this.length),this[re]<<8|this[re+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(re,le){return re=re>>>0,le||De(re,4,this.length),(this[re]|this[re+1]<<8|this[re+2]<<16)+this[re+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(re,le){return re=re>>>0,le||De(re,4,this.length),this[re]*16777216+(this[re+1]<<16|this[re+2]<<8|this[re+3])},a.prototype.readBigUInt64LE=Dn(function(re){re=re>>>0,pt(re,"offset");const le=this[re],he=this[re+7];(le===void 0||he===void 0)&&Ct(re,this.length-8);const se=le+this[++re]*2**8+this[++re]*2**16+this[++re]*2**24,Ae=this[++re]+this[++re]*2**8+this[++re]*2**16+he*2**24;return BigInt(se)+(BigInt(Ae)<<BigInt(32))}),a.prototype.readBigUInt64BE=Dn(function(re){re=re>>>0,pt(re,"offset");const le=this[re],he=this[re+7];(le===void 0||he===void 0)&&Ct(re,this.length-8);const se=le*2**24+this[++re]*2**16+this[++re]*2**8+this[++re],Ae=this[++re]*2**24+this[++re]*2**16+this[++re]*2**8+he;return(BigInt(se)<<BigInt(32))+BigInt(Ae)}),a.prototype.readIntLE=function(re,le,he){re=re>>>0,le=le>>>0,he||De(re,le,this.length);let se=this[re],Ae=1,be=0;for(;++be<le&&(Ae*=256);)se+=this[re+be]*Ae;return Ae*=128,se>=Ae&&(se-=Math.pow(2,8*le)),se},a.prototype.readIntBE=function(re,le,he){re=re>>>0,le=le>>>0,he||De(re,le,this.length);let se=le,Ae=1,be=this[re+--se];for(;se>0&&(Ae*=256);)be+=this[re+--se]*Ae;return Ae*=128,be>=Ae&&(be-=Math.pow(2,8*le)),be},a.prototype.readInt8=function(re,le){return re=re>>>0,le||De(re,1,this.length),this[re]&128?(255-this[re]+1)*-1:this[re]},a.prototype.readInt16LE=function(re,le){re=re>>>0,le||De(re,2,this.length);const he=this[re]|this[re+1]<<8;return he&32768?he|4294901760:he},a.prototype.readInt16BE=function(re,le){re=re>>>0,le||De(re,2,this.length);const he=this[re+1]|this[re]<<8;return he&32768?he|4294901760:he},a.prototype.readInt32LE=function(re,le){return re=re>>>0,le||De(re,4,this.length),this[re]|this[re+1]<<8|this[re+2]<<16|this[re+3]<<24},a.prototype.readInt32BE=function(re,le){return re=re>>>0,le||De(re,4,this.length),this[re]<<24|this[re+1]<<16|this[re+2]<<8|this[re+3]},a.prototype.readBigInt64LE=Dn(function(re){re=re>>>0,pt(re,"offset");const le=this[re],he=this[re+7];(le===void 0||he===void 0)&&Ct(re,this.length-8);const se=this[re+4]+this[re+5]*2**8+this[re+6]*2**16+(he<<24);return(BigInt(se)<<BigInt(32))+BigInt(le+this[++re]*2**8+this[++re]*2**16+this[++re]*2**24)}),a.prototype.readBigInt64BE=Dn(function(re){re=re>>>0,pt(re,"offset");const le=this[re],he=this[re+7];(le===void 0||he===void 0)&&Ct(re,this.length-8);const se=(le<<24)+this[++re]*2**16+this[++re]*2**8+this[++re];return(BigInt(se)<<BigInt(32))+BigInt(this[++re]*2**24+this[++re]*2**16+this[++re]*2**8+he)}),a.prototype.readFloatLE=function(re,le){return re=re>>>0,le||De(re,4,this.length),t.read(this,re,!0,23,4)},a.prototype.readFloatBE=function(re,le){return re=re>>>0,le||De(re,4,this.length),t.read(this,re,!1,23,4)},a.prototype.readDoubleLE=function(re,le){return re=re>>>0,le||De(re,8,this.length),t.read(this,re,!0,52,8)},a.prototype.readDoubleBE=function(re,le){return re=re>>>0,le||De(re,8,this.length),t.read(this,re,!1,52,8)};function Ge(Ce,re,le,he,se,Ae){if(!a.isBuffer(Ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(re>se||re<Ae)throw new RangeError('"value" argument is out of bounds');if(le+he>Ce.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(re,le,he,se){if(re=+re,le=le>>>0,he=he>>>0,!se){const We=Math.pow(2,8*he)-1;Ge(this,re,le,he,We,0)}let Ae=1,be=0;for(this[le]=re&255;++be<he&&(Ae*=256);)this[le+be]=re/Ae&255;return le+he},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(re,le,he,se){if(re=+re,le=le>>>0,he=he>>>0,!se){const We=Math.pow(2,8*he)-1;Ge(this,re,le,he,We,0)}let Ae=he-1,be=1;for(this[le+Ae]=re&255;--Ae>=0&&(be*=256);)this[le+Ae]=re/be&255;return le+he},a.prototype.writeUint8=a.prototype.writeUInt8=function(re,le,he){return re=+re,le=le>>>0,he||Ge(this,re,le,1,255,0),this[le]=re&255,le+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(re,le,he){return re=+re,le=le>>>0,he||Ge(this,re,le,2,65535,0),this[le]=re&255,this[le+1]=re>>>8,le+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(re,le,he){return re=+re,le=le>>>0,he||Ge(this,re,le,2,65535,0),this[le]=re>>>8,this[le+1]=re&255,le+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(re,le,he){return re=+re,le=le>>>0,he||Ge(this,re,le,4,4294967295,0),this[le+3]=re>>>24,this[le+2]=re>>>16,this[le+1]=re>>>8,this[le]=re&255,le+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(re,le,he){return re=+re,le=le>>>0,he||Ge(this,re,le,4,4294967295,0),this[le]=re>>>24,this[le+1]=re>>>16,this[le+2]=re>>>8,this[le+3]=re&255,le+4};function Te(Ce,re,le,he,se){mt(re,he,se,Ce,le,7);let Ae=Number(re&BigInt(4294967295));Ce[le++]=Ae,Ae=Ae>>8,Ce[le++]=Ae,Ae=Ae>>8,Ce[le++]=Ae,Ae=Ae>>8,Ce[le++]=Ae;let be=Number(re>>BigInt(32)&BigInt(4294967295));return Ce[le++]=be,be=be>>8,Ce[le++]=be,be=be>>8,Ce[le++]=be,be=be>>8,Ce[le++]=be,le}function xt(Ce,re,le,he,se){mt(re,he,se,Ce,le,7);let Ae=Number(re&BigInt(4294967295));Ce[le+7]=Ae,Ae=Ae>>8,Ce[le+6]=Ae,Ae=Ae>>8,Ce[le+5]=Ae,Ae=Ae>>8,Ce[le+4]=Ae;let be=Number(re>>BigInt(32)&BigInt(4294967295));return Ce[le+3]=be,be=be>>8,Ce[le+2]=be,be=be>>8,Ce[le+1]=be,be=be>>8,Ce[le]=be,le+8}a.prototype.writeBigUInt64LE=Dn(function(re,le=0){return Te(this,re,le,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Dn(function(re,le=0){return xt(this,re,le,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(re,le,he,se){if(re=+re,le=le>>>0,!se){const et=Math.pow(2,8*he-1);Ge(this,re,le,he,et-1,-et)}let Ae=0,be=1,We=0;for(this[le]=re&255;++Ae<he&&(be*=256);)re<0&&We===0&&this[le+Ae-1]!==0&&(We=1),this[le+Ae]=(re/be>>0)-We&255;return le+he},a.prototype.writeIntBE=function(re,le,he,se){if(re=+re,le=le>>>0,!se){const et=Math.pow(2,8*he-1);Ge(this,re,le,he,et-1,-et)}let Ae=he-1,be=1,We=0;for(this[le+Ae]=re&255;--Ae>=0&&(be*=256);)re<0&&We===0&&this[le+Ae+1]!==0&&(We=1),this[le+Ae]=(re/be>>0)-We&255;return le+he},a.prototype.writeInt8=function(re,le,he){return re=+re,le=le>>>0,he||Ge(this,re,le,1,127,-128),re<0&&(re=255+re+1),this[le]=re&255,le+1},a.prototype.writeInt16LE=function(re,le,he){return re=+re,le=le>>>0,he||Ge(this,re,le,2,32767,-32768),this[le]=re&255,this[le+1]=re>>>8,le+2},a.prototype.writeInt16BE=function(re,le,he){return re=+re,le=le>>>0,he||Ge(this,re,le,2,32767,-32768),this[le]=re>>>8,this[le+1]=re&255,le+2},a.prototype.writeInt32LE=function(re,le,he){return re=+re,le=le>>>0,he||Ge(this,re,le,4,2147483647,-2147483648),this[le]=re&255,this[le+1]=re>>>8,this[le+2]=re>>>16,this[le+3]=re>>>24,le+4},a.prototype.writeInt32BE=function(re,le,he){return re=+re,le=le>>>0,he||Ge(this,re,le,4,2147483647,-2147483648),re<0&&(re=4294967295+re+1),this[le]=re>>>24,this[le+1]=re>>>16,this[le+2]=re>>>8,this[le+3]=re&255,le+4},a.prototype.writeBigInt64LE=Dn(function(re,le=0){return Te(this,re,le,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Dn(function(re,le=0){return xt(this,re,le,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function st(Ce,re,le,he,se,Ae){if(le+he>Ce.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("Index out of range")}function Tt(Ce,re,le,he,se){return re=+re,le=le>>>0,se||st(Ce,re,le,4),t.write(Ce,re,le,he,23,4),le+4}a.prototype.writeFloatLE=function(re,le,he){return Tt(this,re,le,!0,he)},a.prototype.writeFloatBE=function(re,le,he){return Tt(this,re,le,!1,he)};function Lt(Ce,re,le,he,se){return re=+re,le=le>>>0,se||st(Ce,re,le,8),t.write(Ce,re,le,he,52,8),le+8}a.prototype.writeDoubleLE=function(re,le,he){return Lt(this,re,le,!0,he)},a.prototype.writeDoubleBE=function(re,le,he){return Lt(this,re,le,!1,he)},a.prototype.copy=function(re,le,he,se){if(!a.isBuffer(re))throw new TypeError("argument should be a Buffer");if(he||(he=0),!se&&se!==0&&(se=this.length),le>=re.length&&(le=re.length),le||(le=0),se>0&&se<he&&(se=he),se===he||re.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),re.length-le<se-he&&(se=re.length-le+he);const Ae=se-he;return this===re&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(le,he,se):Uint8Array.prototype.set.call(re,this.subarray(he,se),le),Ae},a.prototype.fill=function(re,le,he,se){if(typeof re=="string"){if(typeof le=="string"?(se=le,le=0,he=this.length):typeof he=="string"&&(se=he,he=this.length),se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!a.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(re.length===1){const be=re.charCodeAt(0);(se==="utf8"&&be<128||se==="latin1")&&(re=be)}}else typeof re=="number"?re=re&255:typeof re=="boolean"&&(re=Number(re));if(le<0||this.length<le||this.length<he)throw new RangeError("Out of range index");if(he<=le)return this;le=le>>>0,he=he===void 0?this.length:he>>>0,re||(re=0);let Ae;if(typeof re=="number")for(Ae=le;Ae<he;++Ae)this[Ae]=re;else{const be=a.isBuffer(re)?re:a.from(re,se),We=be.length;if(We===0)throw new TypeError('The value "'+re+'" is invalid for argument "value"');for(Ae=0;Ae<he-le;++Ae)this[Ae+le]=be[Ae%We]}return this};const Ue={};function Oe(Ce,re,le){Ue[Ce]=class extends le{constructor(){super(),Object.defineProperty(this,"message",{value:re.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ce}]`,this.stack,delete this.name}get code(){return Ce}set code(se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:se,writable:!0})}toString(){return`${this.name} [${Ce}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(Ce){return Ce?`${Ce} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(Ce,re){return`The "${Ce}" argument must be of type number. Received type ${typeof re}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(Ce,re,le){let he=`The value of "${Ce}" is out of range.`,se=le;return Number.isInteger(le)&&Math.abs(le)>2**32?se=Ee(String(le)):typeof le=="bigint"&&(se=String(le),(le>BigInt(2)**BigInt(32)||le<-(BigInt(2)**BigInt(32)))&&(se=Ee(se)),se+="n"),he+=` It must be ${re}. Received ${se}`,he},RangeError);function Ee(Ce){let re="",le=Ce.length;const he=Ce[0]==="-"?1:0;for(;le>=he+4;le-=3)re=`_${Ce.slice(le-3,le)}${re}`;return`${Ce.slice(0,le)}${re}`}function Ve(Ce,re,le){pt(re,"offset"),(Ce[re]===void 0||Ce[re+le]===void 0)&&Ct(re,Ce.length-(le+1))}function mt(Ce,re,le,he,se,Ae){if(Ce>le||Ce<re){const be=typeof re=="bigint"?"n":"";let We;throw re===0||re===BigInt(0)?We=`>= 0${be} and < 2${be} ** ${(Ae+1)*8}${be}`:We=`>= -(2${be} ** ${(Ae+1)*8-1}${be}) and < 2 ** ${(Ae+1)*8-1}${be}`,new Ue.ERR_OUT_OF_RANGE("value",We,Ce)}Ve(he,se,Ae)}function pt(Ce,re){if(typeof Ce!="number")throw new Ue.ERR_INVALID_ARG_TYPE(re,"number",Ce)}function Ct(Ce,re,le){throw Math.floor(Ce)!==Ce?(pt(Ce,le),new Ue.ERR_OUT_OF_RANGE("offset","an integer",Ce)):re<0?new Ue.ERR_BUFFER_OUT_OF_BOUNDS:new Ue.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${re}`,Ce)}const Rt=/[^+/0-9A-Za-z-_]/g;function Kt(Ce){if(Ce=Ce.split("=")[0],Ce=Ce.trim().replace(Rt,""),Ce.length<2)return"";for(;Ce.length%4!==0;)Ce=Ce+"=";return Ce}function on(Ce,re){re=re||1/0;let le;const he=Ce.length;let se=null;const Ae=[];for(let be=0;be<he;++be){if(le=Ce.charCodeAt(be),le>55295&&le<57344){if(!se){if(le>56319){(re-=3)>-1&&Ae.push(239,191,189);continue}else if(be+1===he){(re-=3)>-1&&Ae.push(239,191,189);continue}se=le;continue}if(le<56320){(re-=3)>-1&&Ae.push(239,191,189),se=le;continue}le=(se-55296<<10|le-56320)+65536}else se&&(re-=3)>-1&&Ae.push(239,191,189);if(se=null,le<128){if((re-=1)<0)break;Ae.push(le)}else if(le<2048){if((re-=2)<0)break;Ae.push(le>>6|192,le&63|128)}else if(le<65536){if((re-=3)<0)break;Ae.push(le>>12|224,le>>6&63|128,le&63|128)}else if(le<1114112){if((re-=4)<0)break;Ae.push(le>>18|240,le>>12&63|128,le>>6&63|128,le&63|128)}else throw new Error("Invalid code point")}return Ae}function qn(Ce){const re=[];for(let le=0;le<Ce.length;++le)re.push(Ce.charCodeAt(le)&255);return re}function Qn(Ce,re){let le,he,se;const Ae=[];for(let be=0;be<Ce.length&&!((re-=2)<0);++be)le=Ce.charCodeAt(be),he=le>>8,se=le%256,Ae.push(se),Ae.push(he);return Ae}function xi(Ce){return e.toByteArray(Kt(Ce))}function Kn(Ce,re,le,he){let se;for(se=0;se<he&&!(se+le>=re.length||se>=Ce.length);++se)re[se+le]=Ce[se];return se}function Un(Ce,re){return Ce instanceof re||Ce!=null&&Ce.constructor!=null&&Ce.constructor.name!=null&&Ce.constructor.name===re.name}function Cn(Ce){return Ce!==Ce}const ei=(function(){const Ce="0123456789abcdef",re=new Array(256);for(let le=0;le<16;++le){const he=le*16;for(let se=0;se<16;++se)re[he+se]=Ce[le]+Ce[se]}return re})();function Dn(Ce){return typeof BigInt>"u"?It:Ce}function It(){throw new Error("BigInt not supported")}})(cB)),cB}var Bae=Eae();const Oae=Su(Bae);var AB,SL;function Iae(){if(SL)return AB;SL=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",i="[object GeneratorFunction]",r="[object Symbol]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,a=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/[\\^$.*+?()[\]{}|]/g,m=/\\(\\)?/g,v=/^\[object .+?Constructor\]$/,x=typeof window=="object"&&window&&window.Object===Object&&window,E=typeof self=="object"&&self&&self.Object===Object&&self,R=x||E||Function("return this")();function P(Pe,Ze){return Pe?.[Ze]}function z(Pe){var Ze=!1;if(Pe!=null&&typeof Pe.toString!="function")try{Ze=!!(Pe+"")}catch{}return Ze}var Q=Array.prototype,Y=Function.prototype,H=Object.prototype,Z=R["__core-js_shared__"],J=(function(){var Pe=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return Pe?"Symbol(src)_1."+Pe:""})(),$=Y.toString,G=H.hasOwnProperty,oe=H.toString,ue=RegExp("^"+$.call(G).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=R.Symbol,ge=Q.splice,Ie=xi(R,"Map"),Me=xi(Object,"create"),ke=xe?xe.prototype:void 0,je=ke?ke.toString:void 0;function Be(Pe){var Ze=-1,y=Pe?Pe.length:0;for(this.clear();++Ze<y;){var at=Pe[Ze];this.set(at[0],at[1])}}function Ye(){this.__data__=Me?Me(null):{}}function At(Pe){return this.has(Pe)&&delete this.__data__[Pe]}function yt(Pe){var Ze=this.__data__;if(Me){var y=Ze[Pe];return y===e?void 0:y}return G.call(Ze,Pe)?Ze[Pe]:void 0}function Le(Pe){var Ze=this.__data__;return Me?Ze[Pe]!==void 0:G.call(Ze,Pe)}function De(Pe,Ze){var y=this.__data__;return y[Pe]=Me&&Ze===void 0?e:Ze,this}Be.prototype.clear=Ye,Be.prototype.delete=At,Be.prototype.get=yt,Be.prototype.has=Le,Be.prototype.set=De;function Ge(Pe){var Ze=-1,y=Pe?Pe.length:0;for(this.clear();++Ze<y;){var at=Pe[Ze];this.set(at[0],at[1])}}function Te(){this.__data__=[]}function xt(Pe){var Ze=this.__data__,y=Ct(Ze,Pe);if(y<0)return!1;var at=Ze.length-1;return y==at?Ze.pop():ge.call(Ze,y,1),!0}function st(Pe){var Ze=this.__data__,y=Ct(Ze,Pe);return y<0?void 0:Ze[y][1]}function Tt(Pe){return Ct(this.__data__,Pe)>-1}function Lt(Pe,Ze){var y=this.__data__,at=Ct(y,Pe);return at<0?y.push([Pe,Ze]):y[at][1]=Ze,this}Ge.prototype.clear=Te,Ge.prototype.delete=xt,Ge.prototype.get=st,Ge.prototype.has=Tt,Ge.prototype.set=Lt;function Ue(Pe){var Ze=-1,y=Pe?Pe.length:0;for(this.clear();++Ze<y;){var at=Pe[Ze];this.set(at[0],at[1])}}function Oe(){this.__data__={hash:new Be,map:new(Ie||Ge),string:new Be}}function Ee(Pe){return Qn(this,Pe).delete(Pe)}function Ve(Pe){return Qn(this,Pe).get(Pe)}function mt(Pe){return Qn(this,Pe).has(Pe)}function pt(Pe,Ze){return Qn(this,Pe).set(Pe,Ze),this}Ue.prototype.clear=Oe,Ue.prototype.delete=Ee,Ue.prototype.get=Ve,Ue.prototype.has=mt,Ue.prototype.set=pt;function Ct(Pe,Ze){for(var y=Pe.length;y--;)if(re(Pe[y][0],Ze))return y;return-1}function Rt(Pe,Ze){Ze=Kn(Ze,Pe)?[Ze]:qn(Ze);for(var y=0,at=Ze.length;Pe!=null&&y<at;)Pe=Pe[Dn(Ze[y++])];return y&&y==at?Pe:void 0}function Kt(Pe){if(!se(Pe)||Cn(Pe))return!1;var Ze=he(Pe)||z(Pe)?ue:v;return Ze.test(It(Pe))}function on(Pe){if(typeof Pe=="string")return Pe;if(be(Pe))return je?je.call(Pe):"";var Ze=Pe+"";return Ze=="0"&&1/Pe==-1/0?"-0":Ze}function qn(Pe){return le(Pe)?Pe:ei(Pe)}function Qn(Pe,Ze){var y=Pe.__data__;return Un(Ze)?y[typeof Ze=="string"?"string":"hash"]:y.map}function xi(Pe,Ze){var y=P(Pe,Ze);return Kt(y)?y:void 0}function Kn(Pe,Ze){if(le(Pe))return!1;var y=typeof Pe;return y=="number"||y=="symbol"||y=="boolean"||Pe==null||be(Pe)?!0:s.test(Pe)||!o.test(Pe)||Ze!=null&&Pe in Object(Ze)}function Un(Pe){var Ze=typeof Pe;return Ze=="string"||Ze=="number"||Ze=="symbol"||Ze=="boolean"?Pe!=="__proto__":Pe===null}function Cn(Pe){return!!J&&J in Pe}var ei=Ce(function(Pe){Pe=We(Pe);var Ze=[];return a.test(Pe)&&Ze.push(""),Pe.replace(c,function(y,at,Pt,Mt){Ze.push(Pt?Mt.replace(m,"$1"):at||y)}),Ze});function Dn(Pe){if(typeof Pe=="string"||be(Pe))return Pe;var Ze=Pe+"";return Ze=="0"&&1/Pe==-1/0?"-0":Ze}function It(Pe){if(Pe!=null){try{return $.call(Pe)}catch{}try{return Pe+""}catch{}}return""}function Ce(Pe,Ze){if(typeof Pe!="function"||Ze&&typeof Ze!="function")throw new TypeError(n);var y=function(){var at=arguments,Pt=Ze?Ze.apply(this,at):at[0],Mt=y.cache;if(Mt.has(Pt))return Mt.get(Pt);var en=Pe.apply(this,at);return y.cache=Mt.set(Pt,en),en};return y.cache=new(Ce.Cache||Ue),y}Ce.Cache=Ue;function re(Pe,Ze){return Pe===Ze||Pe!==Pe&&Ze!==Ze}var le=Array.isArray;function he(Pe){var Ze=se(Pe)?oe.call(Pe):"";return Ze==t||Ze==i}function se(Pe){var Ze=typeof Pe;return!!Pe&&(Ze=="object"||Ze=="function")}function Ae(Pe){return!!Pe&&typeof Pe=="object"}function be(Pe){return typeof Pe=="symbol"||Ae(Pe)&&oe.call(Pe)==r}function We(Pe){return Pe==null?"":on(Pe)}function et(Pe,Ze,y){var at=Pe==null?void 0:Rt(Pe,Ze);return at===void 0?y:at}return AB=et,AB}var kae=Iae();const Tae=Su(kae);var I2={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Rae=I2.exports,EL;function Dae(){return EL||(EL=1,(function(n,e){(function(){var t,i="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",v=1,x=2,E=4,R=1,P=2,z=1,Q=2,Y=4,H=8,Z=16,J=32,$=64,G=128,oe=256,ue=512,xe=30,ge="...",Ie=800,Me=16,ke=1,je=2,Be=3,Ye=1/0,At=9007199254740991,yt=17976931348623157e292,Le=NaN,De=4294967295,Ge=De-1,Te=De>>>1,xt=[["ary",G],["bind",z],["bindKey",Q],["curry",H],["curryRight",Z],["flip",ue],["partial",J],["partialRight",$],["rearg",oe]],st="[object Arguments]",Tt="[object Array]",Lt="[object AsyncFunction]",Ue="[object Boolean]",Oe="[object Date]",Ee="[object DOMException]",Ve="[object Error]",mt="[object Function]",pt="[object GeneratorFunction]",Ct="[object Map]",Rt="[object Number]",Kt="[object Null]",on="[object Object]",qn="[object Promise]",Qn="[object Proxy]",xi="[object RegExp]",Kn="[object Set]",Un="[object String]",Cn="[object Symbol]",ei="[object Undefined]",Dn="[object WeakMap]",It="[object WeakSet]",Ce="[object ArrayBuffer]",re="[object DataView]",le="[object Float32Array]",he="[object Float64Array]",se="[object Int8Array]",Ae="[object Int16Array]",be="[object Int32Array]",We="[object Uint8Array]",et="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Ze="[object Uint32Array]",y=/\b__p \+= '';/g,at=/\b(__p \+=) '' \+/g,Pt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mt=/&(?:amp|lt|gt|quot|#39);/g,en=/[&<>"']/g,dt=RegExp(Mt.source),Zn=RegExp(en.source),gi=/<%-([\s\S]+?)%>/g,Tn=/<%([\s\S]+?)%>/g,zn=/<%=([\s\S]+?)%>/g,si=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ir=/^\w*$/,Di=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gr=/[\\^$.*+?()[\]{}|]/g,Oi=RegExp(gr.source),Ri=/^\s+/,cr=/\s/,nn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pi=/\{\n\/\* \[wrapped with (.+)\] \*/,$o=/,? & /,Ks=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vr=/[()=,{}\[\]\/\s]/,mn=/\\(\\)?/g,Ni=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ri=/\w*$/,nl=/^[-+]0x[0-9a-f]+$/i,Xc=/^0b[01]+$/i,kl=/^\[object .+?Constructor\]$/,Ki=/^0o[0-7]+$/i,Jl=/^(?:0|[1-9]\d*)$/,po=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oa=/($^)/,eu=/['\n\r\u2028\u2029\\]/g,da="\\ud800-\\udfff",Ho="\\u0300-\\u036f",Tl="\\ufe20-\\ufe2f",Zo="\\u20d0-\\u20ff",Wi=Ho+Tl+Zo,Rl="\\u2700-\\u27bf",rs="a-z\\xdf-\\xf6\\xf8-\\xff",Dl="\\xac\\xb1\\xd7\\xf7",tu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Eu="\\u2000-\\u206f",Jc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tc="A-Z\\xc0-\\xd6\\xd8-\\xde",ml="\\ufe0e\\ufe0f",Oo=Dl+tu+Eu+Jc,nc="[']",nu="["+da+"]",Ec="["+Oo+"]",ic="["+Wi+"]",Bc="\\d+",Dh="["+Rl+"]",fa="["+rs+"]",rc="[^"+da+Oo+Bc+Rl+rs+tc+"]",il="\\ud83c[\\udffb-\\udfff]",eA="(?:"+ic+"|"+il+")",iu="[^"+da+"]",Fa="(?:\\ud83c[\\udde6-\\uddff]){2}",Ms="[\\ud800-\\udbff][\\udc00-\\udfff]",Io="["+tc+"]",ru="\\u200d",ou="(?:"+fa+"|"+rc+")",Us="(?:"+Io+"|"+rc+")",ja="(?:"+nc+"(?:d|ll|m|re|s|t|ve))?",Ji="(?:"+nc+"(?:D|LL|M|RE|S|T|VE))?",rl=eA+"?",Gi="["+ml+"]?",Na="(?:"+ru+"(?:"+[iu,Fa,Ms].join("|")+")"+Gi+rl+")*",Xo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",su="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ko=Gi+rl+Na,oo="(?:"+[Dh,Fa,Ms].join("|")+")"+Ko,ws="(?:"+[iu+ic+"?",ic,Fa,Ms,nu].join("|")+")",Mo=RegExp(nc,"g"),_o=RegExp(ic,"g"),au=RegExp(il+"(?="+il+")|"+ws+Ko,"g"),mo=RegExp([Io+"?"+fa+"+"+ja+"(?="+[Ec,Io,"$"].join("|")+")",Us+"+"+Ji+"(?="+[Ec,Io+ou,"$"].join("|")+")",Io+"?"+ou+"+"+ja,Io+"+"+Ji,su,Xo,Bc,oo].join("|"),"g"),os=RegExp("["+ru+da+Wi+ml+"]"),so=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ol=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Pl=-1,ji={};ji[le]=ji[he]=ji[se]=ji[Ae]=ji[be]=ji[We]=ji[et]=ji[Pe]=ji[Ze]=!0,ji[st]=ji[Tt]=ji[Ce]=ji[Ue]=ji[re]=ji[Oe]=ji[Ve]=ji[mt]=ji[Ct]=ji[Rt]=ji[on]=ji[xi]=ji[Kn]=ji[Un]=ji[Dn]=!1;var ki={};ki[st]=ki[Tt]=ki[Ce]=ki[re]=ki[Ue]=ki[Oe]=ki[le]=ki[he]=ki[se]=ki[Ae]=ki[be]=ki[Ct]=ki[Rt]=ki[on]=ki[xi]=ki[Kn]=ki[Un]=ki[Cn]=ki[We]=ki[et]=ki[Pe]=ki[Ze]=!0,ki[Ve]=ki[mt]=ki[Dn]=!1;var X={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ne={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hn=parseFloat,Bn=parseInt,li=typeof window=="object"&&window&&window.Object===Object&&window,Ui=typeof self=="object"&&self&&self.Object===Object&&self,wi=li||Ui||Function("return this")(),Si=e&&!e.nodeType&&e,fr=Si&&!0&&n&&!n.nodeType&&n,ao=fr&&fr.exports===Si,br=ao&&li.process,yr=(function(){try{var kt=fr&&fr.require&&fr.require("util").types;return kt||br&&br.binding&&br.binding("util")}catch{}})(),eo=yr&&yr.isArrayBuffer,Uo=yr&&yr.isDate,Or=yr&&yr.isMap,Ss=yr&&yr.isRegExp,ZA=yr&&yr.isSet,gl=yr&&yr.isTypedArray;function kr(kt,sn,tn){switch(tn.length){case 0:return kt.call(sn);case 1:return kt.call(sn,tn[0]);case 2:return kt.call(sn,tn[0],tn[1]);case 3:return kt.call(sn,tn[0],tn[1],tn[2])}return kt.apply(sn,tn)}function _1(kt,sn,tn,hi){for(var vr=-1,$r=kt==null?0:kt.length;++vr<$r;){var Bs=kt[vr];sn(hi,Bs,tn(Bs),kt)}return hi}function lu(kt,sn){for(var tn=-1,hi=kt==null?0:kt.length;++tn<hi&&sn(kt[tn],tn,kt)!==!1;);return kt}function uu(kt,sn){for(var tn=kt==null?0:kt.length;tn--&&sn(kt[tn],tn,kt)!==!1;);return kt}function Rm(kt,sn){for(var tn=-1,hi=kt==null?0:kt.length;++tn<hi;)if(!sn(kt[tn],tn,kt))return!1;return!0}function ea(kt,sn){for(var tn=-1,hi=kt==null?0:kt.length,vr=0,$r=[];++tn<hi;){var Bs=kt[tn];sn(Bs,tn,kt)&&($r[vr++]=Bs)}return $r}function yA(kt,sn){var tn=kt==null?0:kt.length;return!!tn&&XA(kt,sn,0)>-1}function Ph(kt,sn,tn){for(var hi=-1,vr=kt==null?0:kt.length;++hi<vr;)if(tn(sn,kt[hi]))return!0;return!1}function Es(kt,sn){for(var tn=-1,hi=kt==null?0:kt.length,vr=Array(hi);++tn<hi;)vr[tn]=sn(kt[tn],tn,kt);return vr}function Bu(kt,sn){for(var tn=-1,hi=sn.length,vr=kt.length;++tn<hi;)kt[vr+tn]=sn[tn];return kt}function Bf(kt,sn,tn,hi){var vr=-1,$r=kt==null?0:kt.length;for(hi&&$r&&(tn=kt[++vr]);++vr<$r;)tn=sn(tn,kt[vr],vr,kt);return tn}function xp(kt,sn,tn,hi){var vr=kt==null?0:kt.length;for(hi&&vr&&(tn=kt[--vr]);vr--;)tn=sn(tn,kt[vr],vr,kt);return tn}function oc(kt,sn){for(var tn=-1,hi=kt==null?0:kt.length;++tn<hi;)if(sn(kt[tn],tn,kt))return!0;return!1}var x1=Pd("length");function Dm(kt){return kt.split("")}function pv(kt){return kt.match(Ks)||[]}function Dd(kt,sn,tn){var hi;return tn(kt,function(vr,$r,Bs){if(sn(vr,$r,Bs))return hi=$r,!1}),hi}function Of(kt,sn,tn,hi){for(var vr=kt.length,$r=tn+(hi?1:-1);hi?$r--:++$r<vr;)if(sn(kt[$r],$r,kt))return $r;return-1}function XA(kt,sn,tn){return sn===sn?d0(kt,sn,tn):Of(kt,Pm,tn)}function h0(kt,sn,tn,hi){for(var vr=tn-1,$r=kt.length;++vr<$r;)if(hi(kt[vr],sn))return vr;return-1}function Pm(kt){return kt!==kt}function Kl(kt,sn){var tn=kt==null?0:kt.length;return tn?Mp(kt,sn)/tn:Le}function Pd(kt){return function(sn){return sn==null?t:sn[kt]}}function If(kt){return function(sn){return kt==null?t:kt[sn]}}function Kh(kt,sn,tn,hi,vr){return vr(kt,function($r,Bs,jo){tn=hi?(hi=!1,$r):sn(tn,$r,Bs,jo)}),tn}function kf(kt,sn){var tn=kt.length;for(kt.sort(sn);tn--;)kt[tn]=kt[tn].value;return kt}function Mp(kt,sn){for(var tn,hi=-1,vr=kt.length;++hi<vr;){var $r=sn(kt[hi]);$r!==t&&(tn=tn===t?$r:tn+$r)}return tn}function Kd(kt,sn){for(var tn=-1,hi=Array(kt);++tn<kt;)hi[tn]=sn(tn);return hi}function M1(kt,sn){return Es(sn,function(tn){return[tn,kt[tn]]})}function Oc(kt){return kt&&kt.slice(0,JA(kt)+1).replace(Ri,"")}function sc(kt){return function(sn){return kt(sn)}}function Km(kt,sn){return Es(sn,function(tn){return kt[tn]})}function Tf(kt,sn){return kt.has(sn)}function wp(kt,sn){for(var tn=-1,hi=kt.length;++tn<hi&&XA(sn,kt[tn],0)>-1;);return tn}function Rf(kt,sn){for(var tn=kt.length;tn--&&XA(sn,kt[tn],0)>-1;);return tn}function Df(kt,sn){for(var tn=kt.length,hi=0;tn--;)kt[tn]===sn&&++hi;return hi}var Pf=If(X),w1=If(me);function Sp(kt){return"\\"+wt[kt]}function tA(kt,sn){return kt==null?t:kt[sn]}function Uh(kt){return os.test(kt)}function Um(kt){return so.test(kt)}function Ud(kt){for(var sn,tn=[];!(sn=kt.next()).done;)tn.push(sn.value);return tn}function Lm(kt){var sn=-1,tn=Array(kt.size);return kt.forEach(function(hi,vr){tn[++sn]=[vr,hi]}),tn}function Lh(kt,sn){return function(tn){return kt(sn(tn))}}function vA(kt,sn){for(var tn=-1,hi=kt.length,vr=0,$r=[];++tn<hi;){var Bs=kt[tn];(Bs===sn||Bs===m)&&(kt[tn]=m,$r[vr++]=tn)}return $r}function zm(kt){var sn=-1,tn=Array(kt.size);return kt.forEach(function(hi){tn[++sn]=hi}),tn}function S1(kt){var sn=-1,tn=Array(kt.size);return kt.forEach(function(hi){tn[++sn]=[hi,hi]}),tn}function d0(kt,sn,tn){for(var hi=tn-1,vr=kt.length;++hi<vr;)if(kt[hi]===sn)return hi;return-1}function f0(kt,sn,tn){for(var hi=tn+1;hi--;)if(kt[hi]===sn)return hi;return hi}function zh(kt){return Uh(kt)?Fm(kt):x1(kt)}function Ls(kt){return Uh(kt)?jm(kt):Dm(kt)}function JA(kt){for(var sn=kt.length;sn--&&cr.test(kt.charAt(sn)););return sn}var nA=If(Ne);function Fm(kt){for(var sn=au.lastIndex=0;au.test(kt);)++sn;return sn}function jm(kt){return kt.match(au)||[]}function Nm(kt){return kt.match(mo)||[]}var Gm=(function kt(sn){sn=sn==null?wi:Nr.defaults(wi.Object(),sn,Nr.pick(wi,ol));var tn=sn.Array,hi=sn.Date,vr=sn.Error,$r=sn.Function,Bs=sn.Math,jo=sn.Object,Ep=sn.RegExp,bA=sn.String,Ul=sn.TypeError,Fh=tn.prototype,Qm=$r.prototype,Ic=jo.prototype,jh=sn["__core-js_shared__"],eh=Qm.toString,Tr=Ic.hasOwnProperty,p0=0,Bp=(function(){var w=/[^.]+$/.exec(jh&&jh.keys&&jh.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})(),Ll=Ic.toString,CA=eh.call(jo),cu=wi._,th=Ep("^"+eh.call(Tr).replace(gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_A=ao?sn.Buffer:t,Ou=sn.Symbol,Nh=sn.Uint8Array,nh=_A?_A.allocUnsafe:t,Au=Lh(jo.getPrototypeOf,jo),Wm=jo.create,Ld=Ic.propertyIsEnumerable,lr=Fh.splice,zd=Ou?Ou.isConcatSpreadable:t,yl=Ou?Ou.iterator:t,xA=Ou?Ou.toStringTag:t,zl=(function(){try{var w=gh(jo,"defineProperty");return w({},"",{}),w}catch{}})(),m0=sn.clearTimeout!==wi.clearTimeout&&sn.clearTimeout,qm=hi&&hi.now!==wi.Date.now&&hi.now,Gh=sn.setTimeout!==wi.setTimeout&&sn.setTimeout,ih=Bs.ceil,Qh=Bs.floor,Wh=jo.getOwnPropertySymbols,Op=_A?_A.isBuffer:t,Fl=sn.isFinite,qh=Fh.join,Fd=Lh(jo.keys,jo),ps=Bs.max,zs=Bs.min,hu=hi.now,vl=sn.parseInt,kc=Bs.random,iA=Fh.reverse,bl=gh(sn,"DataView"),ac=gh(sn,"Map"),Ip=gh(sn,"Promise"),rA=gh(sn,"Set"),rh=gh(sn,"WeakMap"),Yh=gh(jo,"create"),ta=rh&&new rh,lo={},Gr=zu(bl),MA=zu(ac),du=zu(Ip),ss=zu(rA),Iu=zu(rh),jl=Ou?Ou.prototype:t,Vh=jl?jl.valueOf:t,wA=jl?jl.toString:t;function Qe(w){if(Qs(w)&&!Cr(w)&&!(w instanceof Ar)){if(w instanceof Ga)return w;if(Tr.call(w,"__wrapped__"))return z1(w)}return new Ga(w)}var lc=(function(){function w(){}return function(T){if(!Xs(T))return{};if(Wm)return Wm(T);w.prototype=T;var W=new w;return w.prototype=t,W}})();function oA(){}function Ga(w,T){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=t}Qe.templateSettings={escape:gi,evaluate:Tn,interpolate:zn,variable:"",imports:{_:Qe}},Qe.prototype=oA.prototype,Qe.prototype.constructor=Qe,Ga.prototype=lc(oA.prototype),Ga.prototype.constructor=Ga;function Ar(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function SA(){var w=new Ar(this.__wrapped__);return w.__actions__=ia(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=ia(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=ia(this.__views__),w}function EA(){if(this.__filtered__){var w=new Ar(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function sA(){var w=this.__wrapped__.value(),T=this.__dir__,W=Cr(w),de=T<0,Ke=W?w.length:0,Je=$x(0,Ke,this.__views__),gt=Je.start,Ot=Je.end,Ft=Ot-gt,_n=de?Ot:gt-1,xn=this.__iteratees__,Pn=xn.length,di=0,Zi=zs(Ft,this.__takeCount__);if(!W||!de&&Ke==Ft&&Zi==Ft)return jt(w,this.__actions__);var _r=[];e:for(;Ft--&&di<Zi;){_n+=T;for(var yo=-1,xr=w[_n];++yo<Pn;){var Do=xn[yo],Qo=Do.iteratee,af=Do.type,Mh=Qo(xr);if(af==je)xr=Mh;else if(!Mh){if(af==ke)continue e;break e}}_r[di++]=xr}return _r}Ar.prototype=lc(oA.prototype),Ar.prototype.constructor=Ar;function BA(w){var T=-1,W=w==null?0:w.length;for(this.clear();++T<W;){var de=w[T];this.set(de[0],de[1])}}function kp(){this.__data__=Yh?Yh(null):{},this.size=0}function uc(w){var T=this.has(w)&&delete this.__data__[w];return this.size-=T?1:0,T}function oh(w){var T=this.__data__;if(Yh){var W=T[w];return W===c?t:W}return Tr.call(T,w)?T[w]:t}function $h(w){var T=this.__data__;return Yh?T[w]!==t:Tr.call(T,w)}function sl(w,T){var W=this.__data__;return this.size+=this.has(w)?0:1,W[w]=Yh&&T===t?c:T,this}BA.prototype.clear=kp,BA.prototype.delete=uc,BA.prototype.get=oh,BA.prototype.has=$h,BA.prototype.set=sl;function cc(w){var T=-1,W=w==null?0:w.length;for(this.clear();++T<W;){var de=w[T];this.set(de[0],de[1])}}function g0(){this.__data__=[],this.size=0}function E1(w){var T=this.__data__,W=pu(T,w);if(W<0)return!1;var de=T.length-1;return W==de?T.pop():lr.call(T,W,1),--this.size,!0}function B1(w){var T=this.__data__,W=pu(T,w);return W<0?t:T[W][1]}function Kf(w){return pu(this.__data__,w)>-1}function as(w,T){var W=this.__data__,de=pu(W,w);return de<0?(++this.size,W.push([w,T])):W[de][1]=T,this}cc.prototype.clear=g0,cc.prototype.delete=E1,cc.prototype.get=B1,cc.prototype.has=Kf,cc.prototype.set=as;function Fs(w){var T=-1,W=w==null?0:w.length;for(this.clear();++T<W;){var de=w[T];this.set(de[0],de[1])}}function Ia(){this.size=0,this.__data__={hash:new BA,map:new(ac||cc),string:new BA}}function Nl(w){var T=C0(this,w).delete(w);return this.size-=T?1:0,T}function Ym(w){return C0(this,w).get(w)}function Gl(w){return C0(this,w).has(w)}function fu(w,T){var W=C0(this,w),de=W.size;return W.set(w,T),this.size+=W.size==de?0:1,this}Fs.prototype.clear=Ia,Fs.prototype.delete=Nl,Fs.prototype.get=Ym,Fs.prototype.has=Gl,Fs.prototype.set=fu;function Hh(w){var T=-1,W=w==null?0:w.length;for(this.__data__=new Fs;++T<W;)this.add(w[T])}function Vm(w){return this.__data__.set(w,c),this}function mv(w){return this.__data__.has(w)}Hh.prototype.add=Hh.prototype.push=Vm,Hh.prototype.has=mv;function ku(w){var T=this.__data__=new cc(w);this.size=T.size}function Zh(){this.__data__=new cc,this.size=0}function aA(w){var T=this.__data__,W=T.delete(w);return this.size=T.size,W}function Tc(w){return this.__data__.get(w)}function Hn(w){return this.__data__.has(w)}function jd(w,T){var W=this.__data__;if(W instanceof cc){var de=W.__data__;if(!ac||de.length<r-1)return de.push([w,T]),this.size=++W.size,this;W=this.__data__=new Fs(de)}return W.set(w,T),this.size=W.size,this}ku.prototype.clear=Zh,ku.prototype.delete=aA,ku.prototype.get=Tc,ku.prototype.has=Hn,ku.prototype.set=jd;function OA(w,T){var W=Cr(w),de=!W&&rf(w),Ke=!W&&!de&&Xf(w),Je=!W&&!de&&!Ke&&of(w),gt=W||de||Ke||Je,Ot=gt?Kd(w.length,bA):[],Ft=Ot.length;for(var _n in w)(T||Tr.call(w,_n))&&!(gt&&(_n=="length"||Ke&&(_n=="offset"||_n=="parent")||Je&&(_n=="buffer"||_n=="byteLength"||_n=="byteOffset")||PA(_n,Ft)))&&Ot.push(_n);return Ot}function Uf(w){var T=w.length;return T?w[K(0,T-1)]:t}function Xh(w,T){return ig(ia(w),Ru(T,0,w.length))}function sh(w){return ig(ia(w))}function Lf(w,T,W){(W!==t&&!Yl(w[T],W)||W===t&&!(T in w))&&Tu(w,T,W)}function er(w,T,W){var de=w[T];(!(Tr.call(w,T)&&Yl(de,W))||W===t&&!(T in w))&&Tu(w,T,W)}function pu(w,T){for(var W=w.length;W--;)if(Yl(w[W][0],T))return W;return-1}function y0(w,T,W,de){return al(w,function(Ke,Je,gt){T(de,Ke,W(Ke),gt)}),de}function zf(w,T){return w&&ul(T,Al(T),w)}function Nd(w,T){return w&&ul(T,Nu(T),w)}function Tu(w,T,W){T=="__proto__"&&zl?zl(w,T,{configurable:!0,enumerable:!0,value:W,writable:!0}):w[T]=W}function ah(w,T){for(var W=-1,de=T.length,Ke=tn(de),Je=w==null;++W<de;)Ke[W]=Je?t:zA(w,T[W]);return Ke}function Ru(w,T,W){return w===w&&(W!==t&&(w=w<=W?w:W),T!==t&&(w=w>=T?w:T)),w}function Ql(w,T,W,de,Ke,Je){var gt,Ot=T&v,Ft=T&x,_n=T&E;if(W&&(gt=Ke?W(w,de,Ke,Je):W(w)),gt!==t)return gt;if(!Xs(w))return w;var xn=Cr(w);if(xn){if(gt=vv(w),!Ot)return ia(w,gt)}else{var Pn=yu(w),di=Pn==mt||Pn==pt;if(Xf(w))return No(w,Ot);if(Pn==on||Pn==st||di&&!Ke){if(gt=Ft||di?{}:D1(w),!Ot)return Ft?rd(w,Nd(gt,w)):dh(w,zf(gt,w))}else{if(!ki[Pn])return Ke?w:{};gt=aC(w,Pn,Ot)}}Je||(Je=new ku);var Zi=Je.get(w);if(Zi)return Zi;Je.set(w,gt),j0(w)?w.forEach(function(xr){gt.add(Ql(xr,T,W,xr,w,Je))}):Nv(w)&&w.forEach(function(xr,Do){gt.set(Do,Ql(xr,T,W,Do,w,Je))});var _r=_n?Ft?yv:Jm:Ft?Nu:Al,yo=xn?t:_r(w);return lu(yo||w,function(xr,Do){yo&&(Do=xr,xr=w[Do]),er(gt,Do,Ql(xr,T,W,Do,w,Je))}),gt}function v0(w){var T=Al(w);return function(W){return lh(W,w,T)}}function lh(w,T,W){var de=W.length;if(w==null)return!de;for(w=jo(w);de--;){var Ke=W[de],Je=T[Ke],gt=w[Ke];if(gt===t&&!(Ke in w)||!Je(gt))return!1}return!0}function $m(w,T,W){if(typeof w!="function")throw new Ul(s);return w0(function(){w.apply(t,W)},T)}function Rc(w,T,W,de){var Ke=-1,Je=yA,gt=!0,Ot=w.length,Ft=[],_n=T.length;if(!Ot)return Ft;W&&(T=Es(T,sc(W))),de?(Je=Ph,gt=!1):T.length>=r&&(Je=Tf,gt=!1,T=new Hh(T));e:for(;++Ke<Ot;){var xn=w[Ke],Pn=W==null?xn:W(xn);if(xn=de||xn!==0?xn:0,gt&&Pn===Pn){for(var di=_n;di--;)if(T[di]===Pn)continue e;Ft.push(xn)}else Je(T,Pn,de)||Ft.push(xn)}return Ft}var al=_l(ka),wo=_l(Ah,!0);function Jh(w,T){var W=!0;return al(w,function(de,Ke,Je){return W=!!T(de,Ke,Je),W}),W}function Du(w,T,W){for(var de=-1,Ke=w.length;++de<Ke;){var Je=w[de],gt=T(Je);if(gt!=null&&(Ot===t?gt===gt&&!$a(gt):W(gt,Ot)))var Ot=gt,Ft=Je}return Ft}function ed(w,T,W,de){var Ke=w.length;for(W=rr(W),W<0&&(W=-W>Ke?0:Ke+W),de=de===t||de>Ke?Ke:rr(de),de<0&&(de+=Ke),de=W>de?0:uy(de);W<de;)w[W++]=T;return w}function Ff(w,T){var W=[];return al(w,function(de,Ke,Je){T(de,Ke,Je)&&W.push(de)}),W}function pa(w,T,W,de,Ke){var Je=-1,gt=w.length;for(W||(W=P1),Ke||(Ke=[]);++Je<gt;){var Ot=w[Je];T>0&&W(Ot)?T>1?pa(Ot,T-1,W,de,Ke):Bu(Ke,Ot):de||(Ke[Ke.length]=Ot)}return Ke}var uh=cl(),ch=cl(!0);function ka(w,T){return w&&uh(w,T,Al)}function Ah(w,T){return w&&ch(w,T,Al)}function ti(w,T){return ea(T,function(W){return Fc(w[W])})}function bi(w,T){T=$n(T,w);for(var W=0,de=T.length;w!=null&&W<de;)w=w[Wl(T[W++])];return W&&W==de?w:t}function td(w,T,W){var de=T(w);return Cr(w)?de:Bu(de,W(w))}function Qa(w){return w==null?w===t?ei:Kt:xA&&xA in jo(w)?Qf(w):U1(w)}function hh(w,T){return w>T}function ls(w,T){return w!=null&&Tr.call(w,T)}function Ac(w,T){return w!=null&&T in jo(w)}function ll(w,T,W){return w>=zs(T,W)&&w<ps(T,W)}function jf(w,T,W){for(var de=W?Ph:yA,Ke=w[0].length,Je=w.length,gt=Je,Ot=tn(Je),Ft=1/0,_n=[];gt--;){var xn=w[gt];gt&&T&&(xn=Es(xn,sc(T))),Ft=zs(xn.length,Ft),Ot[gt]=!W&&(T||Ke>=120&&xn.length>=120)?new Hh(gt&&xn):t}xn=w[0];var Pn=-1,di=Ot[0];e:for(;++Pn<Ke&&_n.length<Ft;){var Zi=xn[Pn],_r=T?T(Zi):Zi;if(Zi=W||Zi!==0?Zi:0,!(di?Tf(di,_r):de(_n,_r,W))){for(gt=Je;--gt;){var yo=Ot[gt];if(!(yo?Tf(yo,_r):de(w[gt],_r,W)))continue e}di&&di.push(_r),_n.push(Zi)}}return _n}function O1(w,T,W,de){return ka(w,function(Ke,Je,gt){T(de,W(Ke),Je,gt)}),de}function Cl(w,T,W){T=$n(T,w),w=Lp(w,T);var de=w==null?w:w[Wl(Gs(T))];return de==null?t:kr(de,w,W)}function Pu(w){return Qs(w)&&Qa(w)==st}function Os(w){return Qs(w)&&Qa(w)==Ce}function us(w){return Qs(w)&&Qa(w)==Oe}function uo(w,T,W,de,Ke){return w===T?!0:w==null||T==null||!Qs(w)&&!Qs(T)?w!==w&&T!==T:Sr(w,T,W,de,uo,Ke)}function Sr(w,T,W,de,Ke,Je){var gt=Cr(w),Ot=Cr(T),Ft=gt?Tt:yu(w),_n=Ot?Tt:yu(T);Ft=Ft==st?on:Ft,_n=_n==st?on:_n;var xn=Ft==on,Pn=_n==on,di=Ft==_n;if(di&&Xf(w)){if(!Xf(T))return!1;gt=!0,xn=!1}if(di&&!xn)return Je||(Je=new ku),gt||of(w)?Xm(w,T,W,de,Ke,Je):b0(w,T,Ft,W,de,Ke,Je);if(!(W&R)){var Zi=xn&&Tr.call(w,"__wrapped__"),_r=Pn&&Tr.call(T,"__wrapped__");if(Zi||_r){var yo=Zi?w.value():w,xr=_r?T.value():T;return Je||(Je=new ku),Ke(yo,xr,W,de,Je)}}return di?(Je||(Je=new ku),T1(w,T,W,de,Ke,Je)):!1}function So(w){return Qs(w)&&yu(w)==Ct}function ko(w,T,W,de){var Ke=W.length,Je=Ke,gt=!de;if(w==null)return!Je;for(w=jo(w);Ke--;){var Ot=W[Ke];if(gt&&Ot[2]?Ot[1]!==w[Ot[0]]:!(Ot[0]in w))return!1}for(;++Ke<Je;){Ot=W[Ke];var Ft=Ot[0],_n=w[Ft],xn=Ot[1];if(gt&&Ot[2]){if(_n===t&&!(Ft in w))return!1}else{var Pn=new ku;if(de)var di=de(_n,xn,Ft,w,T,Pn);if(!(di===t?uo(xn,_n,R|P,de,Pn):di))return!1}}return!0}function nd(w){if(!Xs(w)||tg(w))return!1;var T=Fc(w)?th:kl;return T.test(zu(w))}function IA(w){return Qs(w)&&Qa(w)==xi}function kA(w){return Qs(w)&&yu(w)==Kn}function TA(w){return Qs(w)&&gg(w.length)&&!!ji[Qa(w)]}function id(w){return typeof w=="function"?w:w==null?yc:typeof w=="object"?Cr(w)?Tp(w[0],w[1]):RA(w):qe(w)}function hc(w){if(!Up(w))return Fd(w);var T=[];for(var W in jo(w))Tr.call(w,W)&&W!="constructor"&&T.push(W);return T}function Gd(w){if(!Xs(w))return Vd(w);var T=Up(w),W=[];for(var de in w)de=="constructor"&&(T||!Tr.call(w,de))||W.push(de);return W}function ms(w,T){return w<T}function Qd(w,T){var W=-1,de=mc(w)?tn(w.length):[];return al(w,function(Ke,Je,gt){de[++W]=T(Ke,Je,gt)}),de}function RA(w){var T=Yd(w);return T.length==1&&T[0][2]?K1(T[0][0],T[0][1]):function(W){return W===w||ko(W,w,T)}}function Tp(w,T){return Pp(w)&&KA(T)?K1(Wl(w),T):function(W){var de=zA(W,w);return de===t&&de===T?py(W,w):uo(T,de,R|P)}}function Wd(w,T,W,de,Ke){w!==T&&uh(T,function(Je,gt){if(Ke||(Ke=new ku),Xs(Je))Hm(w,T,gt,W,Wd,de,Ke);else{var Ot=de?de(ys(w,gt),Je,gt+"",w,T,Ke):t;Ot===t&&(Ot=Je),Lf(w,gt,Ot)}},Nu)}function Hm(w,T,W,de,Ke,Je,gt){var Ot=ys(w,W),Ft=ys(T,W),_n=gt.get(Ft);if(_n){Lf(w,W,_n);return}var xn=Je?Je(Ot,Ft,W+"",w,T,gt):t,Pn=xn===t;if(Pn){var di=Cr(Ft),Zi=!di&&Xf(Ft),_r=!di&&!Zi&&of(Ft);xn=Ft,di||Zi||_r?Cr(Ot)?xn=Ot:Ya(Ot)?xn=ia(Ot):Zi?(Pn=!1,xn=No(Ft,!0)):_r?(Pn=!1,xn=Ra(Ft,!0)):xn=[]:yg(Ft)||rf(Ft)?(xn=Ot,rf(Ot)?xn=Zp(Ot):(!Xs(Ot)||Fc(Ot))&&(xn=D1(Ft))):Pn=!1}Pn&&(gt.set(Ft,xn),Ke(xn,Ft,de,Je,gt),gt.delete(Ft)),Lf(w,W,xn)}function qd(w,T){var W=w.length;if(W)return T+=T<0?W:0,PA(T,W)?w[T]:t}function B(w,T,W){T.length?T=Es(T,function(Je){return Cr(Je)?function(gt){return bi(gt,Je.length===1?Je[0]:Je)}:Je}):T=[yc];var de=-1;T=Es(T,sc(qi()));var Ke=Qd(w,function(Je,gt,Ot){var Ft=Es(T,function(_n){return _n(Je)});return{criteria:Ft,index:++de,value:Je}});return kf(Ke,function(Je,gt){return na(Je,gt,W)})}function l(w,T){return p(w,T,function(W,de){return py(w,de)})}function p(w,T,W){for(var de=-1,Ke=T.length,Je={};++de<Ke;){var gt=T[de],Ot=bi(w,gt);W(Ot,gt)&&pe(Je,$n(gt,w),Ot)}return Je}function C(w){return function(T){return bi(T,w)}}function S(w,T,W,de){var Ke=de?h0:XA,Je=-1,gt=T.length,Ot=w;for(w===T&&(T=ia(T)),W&&(Ot=Es(w,sc(W)));++Je<gt;)for(var Ft=0,_n=T[Je],xn=W?W(_n):_n;(Ft=Ke(Ot,xn,Ft,de))>-1;)Ot!==w&&lr.call(Ot,Ft,1),lr.call(w,Ft,1);return w}function k(w,T){for(var W=w?T.length:0,de=W-1;W--;){var Ke=T[W];if(W==de||Ke!==Je){var Je=Ke;PA(Ke)?lr.call(w,Ke,1):St(w,Ke)}}return w}function K(w,T){return w+Qh(kc()*(T-w+1))}function N(w,T,W,de){for(var Ke=-1,Je=ps(ih((T-w)/(W||1)),0),gt=tn(Je);Je--;)gt[de?Je:++Ke]=w,w+=W;return gt}function q(w,T){var W="";if(!w||T<1||T>At)return W;do T%2&&(W+=w),T=Qh(T/2),T&&(w+=w);while(T);return W}function ie(w,T){return L1(Cv(w,T,yc),w+"")}function ae(w){return Uf(ze(w))}function ye(w,T){var W=ze(w);return ig(W,Ru(T,0,W.length))}function pe(w,T,W,de){if(!Xs(w))return w;T=$n(T,w);for(var Ke=-1,Je=T.length,gt=Je-1,Ot=w;Ot!=null&&++Ke<Je;){var Ft=Wl(T[Ke]),_n=W;if(Ft==="__proto__"||Ft==="constructor"||Ft==="prototype")return w;if(Ke!=gt){var xn=Ot[Ft];_n=de?de(xn,Ft,Ot):t,_n===t&&(_n=Xs(xn)?xn:PA(T[Ke+1])?[]:{})}er(Ot,Ft,_n),Ot=Ot[Ft]}return w}var Se=ta?function(w,T){return ta.set(w,T),w}:yc,Fe=zl?function(w,T){return zl(w,"toString",{configurable:!0,enumerable:!1,value:Ro(T),writable:!0})}:yc;function Xe(w){return ig(ze(w))}function $e(w,T,W){var de=-1,Ke=w.length;T<0&&(T=-T>Ke?0:Ke+T),W=W>Ke?Ke:W,W<0&&(W+=Ke),Ke=T>W?0:W-T>>>0,T>>>=0;for(var Je=tn(Ke);++de<Ke;)Je[de]=w[de+T];return Je}function tt(w,T){var W;return al(w,function(de,Ke,Je){return W=T(de,Ke,Je),!W}),!!W}function it(w,T,W){var de=0,Ke=w==null?de:w.length;if(typeof T=="number"&&T===T&&Ke<=Te){for(;de<Ke;){var Je=de+Ke>>>1,gt=w[Je];gt!==null&&!$a(gt)&&(W?gt<=T:gt<T)?de=Je+1:Ke=Je}return Ke}return ct(w,T,yc,W)}function ct(w,T,W,de){var Ke=0,Je=w==null?0:w.length;if(Je===0)return 0;T=W(T);for(var gt=T!==T,Ot=T===null,Ft=$a(T),_n=T===t;Ke<Je;){var xn=Qh((Ke+Je)/2),Pn=W(w[xn]),di=Pn!==t,Zi=Pn===null,_r=Pn===Pn,yo=$a(Pn);if(gt)var xr=de||_r;else _n?xr=_r&&(de||di):Ot?xr=_r&&di&&(de||!Zi):Ft?xr=_r&&di&&!Zi&&(de||!yo):Zi||yo?xr=!1:xr=de?Pn<=T:Pn<T;xr?Ke=xn+1:Je=xn}return zs(Je,Ge)}function rt(w,T){for(var W=-1,de=w.length,Ke=0,Je=[];++W<de;){var gt=w[W],Ot=T?T(gt):gt;if(!W||!Yl(Ot,Ft)){var Ft=Ot;Je[Ke++]=gt===0?0:gt}}return Je}function ht(w){return typeof w=="number"?w:$a(w)?Le:+w}function ft(w){if(typeof w=="string")return w;if(Cr(w))return Es(w,ft)+"";if($a(w))return wA?wA.call(w):"";var T=w+"";return T=="0"&&1/w==-Ye?"-0":T}function ot(w,T,W){var de=-1,Ke=yA,Je=w.length,gt=!0,Ot=[],Ft=Ot;if(W)gt=!1,Ke=Ph;else if(Je>=r){var _n=T?null:Zm(w);if(_n)return zm(_n);gt=!1,Ke=Tf,Ft=new Hh}else Ft=T?[]:Ot;e:for(;++de<Je;){var xn=w[de],Pn=T?T(xn):xn;if(xn=W||xn!==0?xn:0,gt&&Pn===Pn){for(var di=Ft.length;di--;)if(Ft[di]===Pn)continue e;T&&Ft.push(Pn),Ot.push(xn)}else Ke(Ft,Pn,W)||(Ft!==Ot&&Ft.push(Pn),Ot.push(xn))}return Ot}function St(w,T){return T=$n(T,w),w=Lp(w,T),w==null||delete w[Wl(Gs(T))]}function Wt(w,T,W,de){return pe(w,T,W(bi(w,T)),de)}function Ut(w,T,W,de){for(var Ke=w.length,Je=de?Ke:-1;(de?Je--:++Je<Ke)&&T(w[Je],Je,w););return W?$e(w,de?0:Je,de?Je+1:Ke):$e(w,de?Je+1:0,de?Ke:Je)}function jt(w,T){var W=w;return W instanceof Ar&&(W=W.value()),Bf(T,function(de,Ke){return Ke.func.apply(Ke.thisArg,Bu([de],Ke.args))},W)}function Qt(w,T,W){var de=w.length;if(de<2)return de?ot(w[0]):[];for(var Ke=-1,Je=tn(de);++Ke<de;)for(var gt=w[Ke],Ot=-1;++Ot<de;)Ot!=Ke&&(Je[Ke]=Rc(Je[Ke]||gt,w[Ot],T,W));return ot(pa(Je,1),T,W)}function On(w,T,W){for(var de=-1,Ke=w.length,Je=T.length,gt={};++de<Ke;){var Ot=de<Je?T[de]:t;W(gt,w[de],Ot)}return gt}function In(w){return Ya(w)?w:[]}function ln(w){return typeof w=="function"?w:yc}function $n(w,T){return Cr(w)?w:Pp(w,T)?[w]:Hd(ts(w))}var Hi=ie;function Er(w,T,W){var de=w.length;return W=W===t?de:W,!T&&W>=de?w:$e(w,T,W)}var Lo=m0||function(w){return wi.clearTimeout(w)};function No(w,T){if(T)return w.slice();var W=w.length,de=nh?nh(W):new w.constructor(W);return w.copy(de),de}function hr(w){var T=new w.constructor(w.byteLength);return new Nh(T).set(new Nh(w)),T}function Jo(w,T){var W=T?hr(w.buffer):w.buffer;return new w.constructor(W,w.byteOffset,w.byteLength)}function Ta(w){var T=new w.constructor(w.source,ri.exec(w));return T.lastIndex=w.lastIndex,T}function Is(w){return Vh?jo(Vh.call(w)):{}}function Ra(w,T){var W=T?hr(w.buffer):w.buffer;return new w.constructor(W,w.byteOffset,w.length)}function js(w,T){if(w!==T){var W=w!==t,de=w===null,Ke=w===w,Je=$a(w),gt=T!==t,Ot=T===null,Ft=T===T,_n=$a(T);if(!Ot&&!_n&&!Je&&w>T||Je&&gt&&Ft&&!Ot&&!_n||de&&gt&&Ft||!W&&Ft||!Ke)return 1;if(!de&&!Je&&!_n&&w<T||_n&&W&&Ke&&!de&&!Je||Ot&&W&&Ke||!gt&&Ke||!Ft)return-1}return 0}function na(w,T,W){for(var de=-1,Ke=w.criteria,Je=T.criteria,gt=Ke.length,Ot=W.length;++de<gt;){var Ft=js(Ke[de],Je[de]);if(Ft){if(de>=Ot)return Ft;var _n=W[de];return Ft*(_n=="desc"?-1:1)}}return w.index-T.index}function ma(w,T,W,de){for(var Ke=-1,Je=w.length,gt=W.length,Ot=-1,Ft=T.length,_n=ps(Je-gt,0),xn=tn(Ft+_n),Pn=!de;++Ot<Ft;)xn[Ot]=T[Ot];for(;++Ke<gt;)(Pn||Ke<Je)&&(xn[W[Ke]]=w[Ke]);for(;_n--;)xn[Ot++]=w[Ke++];return xn}function DA(w,T,W,de){for(var Ke=-1,Je=w.length,gt=-1,Ot=W.length,Ft=-1,_n=T.length,xn=ps(Je-Ot,0),Pn=tn(xn+_n),di=!de;++Ke<xn;)Pn[Ke]=w[Ke];for(var Zi=Ke;++Ft<_n;)Pn[Zi+Ft]=T[Ft];for(;++gt<Ot;)(di||Ke<Je)&&(Pn[Zi+W[gt]]=w[Ke++]);return Pn}function ia(w,T){var W=-1,de=w.length;for(T||(T=tn(de));++W<de;)T[W]=w[W];return T}function ul(w,T,W,de){var Ke=!W;W||(W={});for(var Je=-1,gt=T.length;++Je<gt;){var Ot=T[Je],Ft=de?de(W[Ot],w[Ot],Ot,W,w):t;Ft===t&&(Ft=w[Ot]),Ke?Tu(W,Ot,Ft):er(W,Ot,Ft)}return W}function dh(w,T){return ul(w,R1(w),T)}function rd(w,T){return ul(w,_0(w),T)}function od(w,T){return function(W,de){var Ke=Cr(W)?_1:y0,Je=T?T():{};return Ke(W,w,qi(de,2),Je)}}function mu(w){return ie(function(T,W){var de=-1,Ke=W.length,Je=Ke>1?W[Ke-1]:t,gt=Ke>2?W[2]:t;for(Je=w.length>3&&typeof Je=="function"?(Ke--,Je):t,gt&&Lu(W[0],W[1],gt)&&(Je=Ke<3?t:Je,Ke=1),T=jo(T);++de<Ke;){var Ot=W[de];Ot&&w(T,Ot,de,Je)}return T})}function _l(w,T){return function(W,de){if(W==null)return W;if(!mc(W))return w(W,de);for(var Ke=W.length,Je=T?Ke:-1,gt=jo(W);(T?Je--:++Je<Ke)&&de(gt[Je],Je,gt)!==!1;);return W}}function cl(w){return function(T,W,de){for(var Ke=-1,Je=jo(T),gt=de(T),Ot=gt.length;Ot--;){var Ft=gt[w?Ot:++Ke];if(W(Je[Ft],Ft,Je)===!1)break}return T}}function Dc(w,T,W){var de=T&z,Ke=ra(w);function Je(){var gt=this&&this!==wi&&this instanceof Je?Ke:w;return gt.apply(de?W:this,arguments)}return Je}function sd(w){return function(T){T=ts(T);var W=Uh(T)?Ls(T):t,de=W?W[0]:T.charAt(0),Ke=W?Er(W,1).join(""):T.slice(1);return de[w]()+Ke}}function gs(w){return function(T){return Bf(Qu(Zt(T).replace(Mo,"")),w,"")}}function ra(w){return function(){var T=arguments;switch(T.length){case 0:return new w;case 1:return new w(T[0]);case 2:return new w(T[0],T[1]);case 3:return new w(T[0],T[1],T[2]);case 4:return new w(T[0],T[1],T[2],T[3]);case 5:return new w(T[0],T[1],T[2],T[3],T[4]);case 6:return new w(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new w(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var W=lc(w.prototype),de=w.apply(W,T);return Xs(de)?de:W}}function Ku(w,T,W){var de=ra(w);function Ke(){for(var Je=arguments.length,gt=tn(Je),Ot=Je,Ft=ga(Ke);Ot--;)gt[Ot]=arguments[Ot];var _n=Je<3&&gt[0]!==Ft&&gt[Je-1]!==Ft?[]:vA(gt,Ft);if(Je-=_n.length,Je<W)return Gf(w,T,Uu,Ke.placeholder,t,gt,_n,t,t,W-Je);var xn=this&&this!==wi&&this instanceof Ke?de:w;return kr(xn,this,gt)}return Ke}function Ns(w){return function(T,W,de){var Ke=jo(T);if(!mc(T)){var Je=qi(W,3);T=Al(T),W=function(Ot){return Je(Ke[Ot],Ot,Ke)}}var gt=w(T,W,de);return gt>-1?Ke[Je?T[gt]:gt]:t}}function Pc(w){return ad(function(T){var W=T.length,de=W,Ke=Ga.prototype.thru;for(w&&T.reverse();de--;){var Je=T[de];if(typeof Je!="function")throw new Ul(s);if(Ke&&!gt&&oa(Je)=="wrapper")var gt=new Ga([],!0)}for(de=gt?de:W;++de<W;){Je=T[de];var Ot=oa(Je),Ft=Ot=="wrapper"?Dp(Je):t;Ft&&Kp(Ft[0])&&Ft[1]==(G|H|J|oe)&&!Ft[4].length&&Ft[9]==1?gt=gt[oa(Ft[0])].apply(gt,Ft[3]):gt=Je.length==1&&Kp(Je)?gt[Ot]():gt.thru(Je)}return function(){var _n=arguments,xn=_n[0];if(gt&&_n.length==1&&Cr(xn))return gt.plant(xn).value();for(var Pn=0,di=W?T[Pn].apply(this,_n):xn;++Pn<W;)di=T[Pn].call(this,di);return di}})}function Uu(w,T,W,de,Ke,Je,gt,Ot,Ft,_n){var xn=T&G,Pn=T&z,di=T&Q,Zi=T&(H|Z),_r=T&ue,yo=di?t:ra(w);function xr(){for(var Do=arguments.length,Qo=tn(Do),af=Do;af--;)Qo[af]=arguments[af];if(Zi)var Mh=ga(xr),lf=Df(Qo,Mh);if(de&&(Qo=ma(Qo,de,Ke,Zi)),Je&&(Qo=DA(Qo,Je,gt,Zi)),Do-=lf,Zi&&Do<_n){var bu=vA(Qo,Mh);return Gf(w,T,Uu,xr.placeholder,W,Qo,bu,Ot,Ft,_n-Do)}var em=Pn?W:this,Q0=di?em[w]:w;return Do=Qo.length,Ot?Qo=ng(Qo,Ot):_r&&Do>1&&Qo.reverse(),xn&&Ft<Do&&(Qo.length=Ft),this&&this!==wi&&this instanceof xr&&(Q0=yo||ra(Q0)),Q0.apply(em,Qo)}return xr}function gu(w,T){return function(W,de){return O1(W,w,T(de),{})}}function Kc(w,T){return function(W,de){var Ke;if(W===t&&de===t)return T;if(W!==t&&(Ke=W),de!==t){if(Ke===t)return de;typeof W=="string"||typeof de=="string"?(W=ft(W),de=ft(de)):(W=ht(W),de=ht(de)),Ke=w(W,de)}return Ke}}function Rp(w){return ad(function(T){return T=Es(T,sc(qi())),ie(function(W){var de=this;return w(T,function(Ke){return kr(Ke,de,W)})})})}function fh(w,T){T=T===t?" ":ft(T);var W=T.length;if(W<2)return W?q(T,w):T;var de=q(T,ih(w/zh(T)));return Uh(T)?Er(Ls(de),0,w).join(""):de.slice(0,w)}function ph(w,T,W,de){var Ke=T&z,Je=ra(w);function gt(){for(var Ot=-1,Ft=arguments.length,_n=-1,xn=de.length,Pn=tn(xn+Ft),di=this&&this!==wi&&this instanceof gt?Je:w;++_n<xn;)Pn[_n]=de[_n];for(;Ft--;)Pn[_n++]=arguments[++Ot];return kr(di,Ke?W:this,Pn)}return gt}function lA(w){return function(T,W,de){return de&&typeof de!="number"&&Lu(T,W,de)&&(W=de=t),T=hd(T),W===t?(W=T,T=0):W=hd(W),de=de===t?T<W?1:-1:hd(de),N(T,W,de,w)}}function Nf(w){return function(T,W){return typeof T=="string"&&typeof W=="string"||(T=ju(T),W=ju(W)),w(T,W)}}function Gf(w,T,W,de,Ke,Je,gt,Ot,Ft,_n){var xn=T&H,Pn=xn?gt:t,di=xn?t:gt,Zi=xn?Je:t,_r=xn?t:Je;T|=xn?J:$,T&=~(xn?$:J),T&Y||(T&=-4);var yo=[w,T,Ke,Zi,Pn,_r,di,Ot,Ft,_n],xr=W.apply(t,yo);return Kp(w)&&cC(xr,yo),xr.placeholder=de,$d(xr,w,T)}function mh(w){var T=Bs[w];return function(W,de){if(W=ju(W),de=de==null?0:zs(rr(de),292),de&&Fl(W)){var Ke=(ts(W)+"e").split("e"),Je=T(Ke[0]+"e"+(+Ke[1]+de));return Ke=(ts(Je)+"e").split("e"),+(Ke[0]+"e"+(+Ke[1]-de))}return T(W)}}var Zm=rA&&1/zm(new rA([,-0]))[1]==Ye?function(w){return new rA(w)}:_;function uA(w){return function(T){var W=yu(T);return W==Ct?Lm(T):W==Kn?S1(T):M1(T,w(T))}}function Wa(w,T,W,de,Ke,Je,gt,Ot){var Ft=T&Q;if(!Ft&&typeof w!="function")throw new Ul(s);var _n=de?de.length:0;if(_n||(T&=-97,de=Ke=t),gt=gt===t?gt:ps(rr(gt),0),Ot=Ot===t?Ot:rr(Ot),_n-=Ke?Ke.length:0,T&$){var xn=de,Pn=Ke;de=Ke=t}var di=Ft?t:Dp(w),Zi=[w,T,W,de,Ke,xn,Pn,Je,gt,Ot];if(di&&uC(Zi,di),w=Zi[0],T=Zi[1],W=Zi[2],de=Zi[3],Ke=Zi[4],Ot=Zi[9]=Zi[9]===t?Ft?0:w.length:ps(Zi[9]-_n,0),!Ot&&T&(H|Z)&&(T&=-25),!T||T==z)var _r=Dc(w,T,W);else T==H||T==Z?_r=Ku(w,T,Ot):(T==J||T==(z|J))&&!Ke.length?_r=ph(w,T,W,de):_r=Uu.apply(t,Zi);var yo=di?Se:cC;return $d(yo(_r,Zi),w,T)}function I1(w,T,W,de){return w===t||Yl(w,Ic[W])&&!Tr.call(de,W)?T:w}function gv(w,T,W,de,Ke,Je){return Xs(w)&&Xs(T)&&(Je.set(T,w),Wd(w,T,t,gv,Je),Je.delete(T)),w}function k1(w){return yg(w)?t:w}function Xm(w,T,W,de,Ke,Je){var gt=W&R,Ot=w.length,Ft=T.length;if(Ot!=Ft&&!(gt&&Ft>Ot))return!1;var _n=Je.get(w),xn=Je.get(T);if(_n&&xn)return _n==T&&xn==w;var Pn=-1,di=!0,Zi=W&P?new Hh:t;for(Je.set(w,T),Je.set(T,w);++Pn<Ot;){var _r=w[Pn],yo=T[Pn];if(de)var xr=gt?de(yo,_r,Pn,T,w,Je):de(_r,yo,Pn,w,T,Je);if(xr!==t){if(xr)continue;di=!1;break}if(Zi){if(!oc(T,function(Do,Qo){if(!Tf(Zi,Qo)&&(_r===Do||Ke(_r,Do,W,de,Je)))return Zi.push(Qo)})){di=!1;break}}else if(!(_r===yo||Ke(_r,yo,W,de,Je))){di=!1;break}}return Je.delete(w),Je.delete(T),di}function b0(w,T,W,de,Ke,Je,gt){switch(W){case re:if(w.byteLength!=T.byteLength||w.byteOffset!=T.byteOffset)return!1;w=w.buffer,T=T.buffer;case Ce:return!(w.byteLength!=T.byteLength||!Je(new Nh(w),new Nh(T)));case Ue:case Oe:case Rt:return Yl(+w,+T);case Ve:return w.name==T.name&&w.message==T.message;case xi:case Un:return w==T+"";case Ct:var Ot=Lm;case Kn:var Ft=de&R;if(Ot||(Ot=zm),w.size!=T.size&&!Ft)return!1;var _n=gt.get(w);if(_n)return _n==T;de|=P,gt.set(w,T);var xn=Xm(Ot(w),Ot(T),de,Ke,Je,gt);return gt.delete(w),xn;case Cn:if(Vh)return Vh.call(w)==Vh.call(T)}return!1}function T1(w,T,W,de,Ke,Je){var gt=W&R,Ot=Jm(w),Ft=Ot.length,_n=Jm(T),xn=_n.length;if(Ft!=xn&&!gt)return!1;for(var Pn=Ft;Pn--;){var di=Ot[Pn];if(!(gt?di in T:Tr.call(T,di)))return!1}var Zi=Je.get(w),_r=Je.get(T);if(Zi&&_r)return Zi==T&&_r==w;var yo=!0;Je.set(w,T),Je.set(T,w);for(var xr=gt;++Pn<Ft;){di=Ot[Pn];var Do=w[di],Qo=T[di];if(de)var af=gt?de(Qo,Do,di,T,w,Je):de(Do,Qo,di,w,T,Je);if(!(af===t?Do===Qo||Ke(Do,Qo,W,de,Je):af)){yo=!1;break}xr||(xr=di=="constructor")}if(yo&&!xr){var Mh=w.constructor,lf=T.constructor;Mh!=lf&&"constructor"in w&&"constructor"in T&&!(typeof Mh=="function"&&Mh instanceof Mh&&typeof lf=="function"&&lf instanceof lf)&&(yo=!1)}return Je.delete(w),Je.delete(T),yo}function ad(w){return L1(Cv(w,t,vs),w+"")}function Jm(w){return td(w,Al,R1)}function yv(w){return td(w,Nu,_0)}var Dp=ta?function(w){return ta.get(w)}:_;function oa(w){for(var T=w.name+"",W=lo[T],de=Tr.call(lo,T)?W.length:0;de--;){var Ke=W[de],Je=Ke.func;if(Je==null||Je==w)return Ke.name}return T}function ga(w){var T=Tr.call(Qe,"placeholder")?Qe:w;return T.placeholder}function qi(){var w=Qe.iteratee||dd;return w=w===dd?id:w,arguments.length?w(arguments[0],arguments[1]):w}function C0(w,T){var W=w.__data__;return M0(T)?W[typeof T=="string"?"string":"hash"]:W.map}function Yd(w){for(var T=Al(w),W=T.length;W--;){var de=T[W],Ke=w[de];T[W]=[de,Ke,KA(Ke)]}return T}function gh(w,T){var W=tA(w,T);return nd(W)?W:t}function Qf(w){var T=Tr.call(w,xA),W=w[xA];try{w[xA]=t;var de=!0}catch{}var Ke=Ll.call(w);return de&&(T?w[xA]=W:delete w[xA]),Ke}var R1=Wh?function(w){return w==null?[]:(w=jo(w),ea(Wh(w),function(T){return Ld.call(w,T)}))}:pn,_0=Wh?function(w){for(var T=[];w;)Bu(T,R1(w)),w=Au(w);return T}:pn,yu=Qa;(bl&&yu(new bl(new ArrayBuffer(1)))!=re||ac&&yu(new ac)!=Ct||Ip&&yu(Ip.resolve())!=qn||rA&&yu(new rA)!=Kn||rh&&yu(new rh)!=Dn)&&(yu=function(w){var T=Qa(w),W=T==on?w.constructor:t,de=W?zu(W):"";if(de)switch(de){case Gr:return re;case MA:return Ct;case du:return qn;case ss:return Kn;case Iu:return Dn}return T});function $x(w,T,W){for(var de=-1,Ke=W.length;++de<Ke;){var Je=W[de],gt=Je.size;switch(Je.type){case"drop":w+=gt;break;case"dropRight":T-=gt;break;case"take":T=zs(T,w+gt);break;case"takeRight":w=ps(w,T-gt);break}}return{start:w,end:T}}function x0(w){var T=w.match(Pi);return T?T[1].split($o):[]}function eg(w,T,W){T=$n(T,w);for(var de=-1,Ke=T.length,Je=!1;++de<Ke;){var gt=Wl(T[de]);if(!(Je=w!=null&&W(w,gt)))break;w=w[gt]}return Je||++de!=Ke?Je:(Ke=w==null?0:w.length,!!Ke&&gg(Ke)&&PA(gt,Ke)&&(Cr(w)||rf(w)))}function vv(w){var T=w.length,W=new w.constructor(T);return T&&typeof w[0]=="string"&&Tr.call(w,"index")&&(W.index=w.index,W.input=w.input),W}function D1(w){return typeof w.constructor=="function"&&!Up(w)?lc(Au(w)):{}}function aC(w,T,W){var de=w.constructor;switch(T){case Ce:return hr(w);case Ue:case Oe:return new de(+w);case re:return Jo(w,W);case le:case he:case se:case Ae:case be:case We:case et:case Pe:case Ze:return Ra(w,W);case Ct:return new de;case Rt:case Un:return new de(w);case xi:return Ta(w);case Kn:return new de;case Cn:return Is(w)}}function bv(w,T){var W=T.length;if(!W)return w;var de=W-1;return T[de]=(W>1?"& ":"")+T[de],T=T.join(W>2?", ":" "),w.replace(nn,`{
/* [wrapped with `+T+`] */
`)}function P1(w){return Cr(w)||rf(w)||!!(zd&&w&&w[zd])}function PA(w,T){var W=typeof w;return T=T??At,!!T&&(W=="number"||W!="symbol"&&Jl.test(w))&&w>-1&&w%1==0&&w<T}function Lu(w,T,W){if(!Xs(W))return!1;var de=typeof T;return(de=="number"?mc(W)&&PA(T,W.length):de=="string"&&T in W)?Yl(W[T],w):!1}function Pp(w,T){if(Cr(w))return!1;var W=typeof w;return W=="number"||W=="symbol"||W=="boolean"||w==null||$a(w)?!0:ir.test(w)||!si.test(w)||T!=null&&w in jo(T)}function M0(w){var T=typeof w;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?w!=="__proto__":w===null}function Kp(w){var T=oa(w),W=Qe[T];if(typeof W!="function"||!(T in Ar.prototype))return!1;if(w===W)return!0;var de=Dp(W);return!!de&&w===de[0]}function tg(w){return!!Bp&&Bp in w}var vu=jh?Fc:Xt;function Up(w){var T=w&&w.constructor,W=typeof T=="function"&&T.prototype||Ic;return w===W}function KA(w){return w===w&&!Xs(w)}function K1(w,T){return function(W){return W==null?!1:W[w]===T&&(T!==t||w in jo(W))}}function lC(w){var T=dg(w,function(de){return W.size===h&&W.clear(),de}),W=T.cache;return T}function uC(w,T){var W=w[1],de=T[1],Ke=W|de,Je=Ke<(z|Q|G),gt=de==G&&W==H||de==G&&W==oe&&w[7].length<=T[8]||de==(G|oe)&&T[7].length<=T[8]&&W==H;if(!(Je||gt))return w;de&z&&(w[2]=T[2],Ke|=W&z?0:Y);var Ot=T[3];if(Ot){var Ft=w[3];w[3]=Ft?ma(Ft,Ot,T[4]):Ot,w[4]=Ft?vA(w[3],m):T[4]}return Ot=T[5],Ot&&(Ft=w[5],w[5]=Ft?DA(Ft,Ot,T[6]):Ot,w[6]=Ft?vA(w[5],m):T[6]),Ot=T[7],Ot&&(w[7]=Ot),de&G&&(w[8]=w[8]==null?T[8]:zs(w[8],T[8])),w[9]==null&&(w[9]=T[9]),w[0]=T[0],w[1]=Ke,w}function Vd(w){var T=[];if(w!=null)for(var W in jo(w))T.push(W);return T}function U1(w){return Ll.call(w)}function Cv(w,T,W){return T=ps(T===t?w.length-1:T,0),function(){for(var de=arguments,Ke=-1,Je=ps(de.length-T,0),gt=tn(Je);++Ke<Je;)gt[Ke]=de[T+Ke];Ke=-1;for(var Ot=tn(T+1);++Ke<T;)Ot[Ke]=de[Ke];return Ot[T]=W(gt),kr(w,this,Ot)}}function Lp(w,T){return T.length<2?w:bi(w,$e(T,0,-1))}function ng(w,T){for(var W=w.length,de=zs(T.length,W),Ke=ia(w);de--;){var Je=T[de];w[de]=PA(Je,W)?Ke[Je]:t}return w}function ys(w,T){if(!(T==="constructor"&&typeof w[T]=="function")&&T!="__proto__")return w[T]}var cC=yh(Se),w0=Gh||function(w,T){return wi.setTimeout(w,T)},L1=yh(Fe);function $d(w,T,W){var de=T+"";return L1(w,bv(de,AC(x0(de),W)))}function yh(w){var T=0,W=0;return function(){var de=hu(),Ke=Me-(de-W);if(W=de,Ke>0){if(++T>=Ie)return arguments[0]}else T=0;return w.apply(t,arguments)}}function ig(w,T){var W=-1,de=w.length,Ke=de-1;for(T=T===t?de:T;++W<T;){var Je=K(W,Ke),gt=w[Je];w[Je]=w[W],w[W]=gt}return w.length=T,w}var Hd=lC(function(w){var T=[];return w.charCodeAt(0)===46&&T.push(""),w.replace(Di,function(W,de,Ke,Je){T.push(Ke?Je.replace(mn,"$1"):de||W)}),T});function Wl(w){if(typeof w=="string"||$a(w))return w;var T=w+"";return T=="0"&&1/w==-Ye?"-0":T}function zu(w){if(w!=null){try{return eh.call(w)}catch{}try{return w+""}catch{}}return""}function AC(w,T){return lu(xt,function(W){var de="_."+W[0];T&W[1]&&!yA(w,de)&&w.push(de)}),w.sort()}function z1(w){if(w instanceof Ar)return w.clone();var T=new Ga(w.__wrapped__,w.__chain__);return T.__actions__=ia(w.__actions__),T.__index__=w.__index__,T.__values__=w.__values__,T}function hC(w,T,W){(W?Lu(w,T,W):T===t)?T=1:T=ps(rr(T),0);var de=w==null?0:w.length;if(!de||T<1)return[];for(var Ke=0,Je=0,gt=tn(ih(de/T));Ke<de;)gt[Je++]=$e(w,Ke,Ke+=T);return gt}function _v(w){for(var T=-1,W=w==null?0:w.length,de=0,Ke=[];++T<W;){var Je=w[T];Je&&(Ke[de++]=Je)}return Ke}function xv(){var w=arguments.length;if(!w)return[];for(var T=tn(w-1),W=arguments[0],de=w;de--;)T[de-1]=arguments[de];return Bu(Cr(W)?ia(W):[W],pa(T,1))}var F1=ie(function(w,T){return Ya(w)?Rc(w,pa(T,1,Ya,!0)):[]}),j1=ie(function(w,T){var W=Gs(T);return Ya(W)&&(W=t),Ya(w)?Rc(w,pa(T,1,Ya,!0),qi(W,2)):[]}),Zd=ie(function(w,T){var W=Gs(T);return Ya(W)&&(W=t),Ya(w)?Rc(w,pa(T,1,Ya,!0),t,W):[]});function qa(w,T,W){var de=w==null?0:w.length;return de?(T=W||T===t?1:rr(T),$e(w,T<0?0:T,de)):[]}function zp(w,T,W){var de=w==null?0:w.length;return de?(T=W||T===t?1:rr(T),T=de-T,$e(w,0,T<0?0:T)):[]}function dC(w,T){return w&&w.length?Ut(w,qi(T,3),!0,!0):[]}function Qr(w,T){return w&&w.length?Ut(w,qi(T,3),!0):[]}function rg(w,T,W,de){var Ke=w==null?0:w.length;return Ke?(W&&typeof W!="number"&&Lu(w,T,W)&&(W=0,de=Ke),ed(w,T,W,de)):[]}function N1(w,T,W){var de=w==null?0:w.length;if(!de)return-1;var Ke=W==null?0:rr(W);return Ke<0&&(Ke=ps(de+Ke,0)),Of(w,qi(T,3),Ke)}function og(w,T,W){var de=w==null?0:w.length;if(!de)return-1;var Ke=de-1;return W!==t&&(Ke=rr(W),Ke=W<0?ps(de+Ke,0):zs(Ke,de-1)),Of(w,qi(T,3),Ke,!0)}function vs(w){var T=w==null?0:w.length;return T?pa(w,1):[]}function ql(w){var T=w==null?0:w.length;return T?pa(w,Ye):[]}function ld(w,T){var W=w==null?0:w.length;return W?(T=T===t?1:rr(T),pa(w,T)):[]}function Mv(w){for(var T=-1,W=w==null?0:w.length,de={};++T<W;){var Ke=w[T];de[Ke[0]]=Ke[1]}return de}function Fp(w){return w&&w.length?w[0]:t}function G1(w,T,W){var de=w==null?0:w.length;if(!de)return-1;var Ke=W==null?0:rr(W);return Ke<0&&(Ke=ps(de+Ke,0)),XA(w,T,Ke)}function sg(w){var T=w==null?0:w.length;return T?$e(w,0,-1):[]}var jp=ie(function(w){var T=Es(w,In);return T.length&&T[0]===w[0]?jf(T):[]}),xl=ie(function(w){var T=Gs(w),W=Es(w,In);return T===Gs(W)?T=t:W.pop(),W.length&&W[0]===w[0]?jf(W,qi(T,2)):[]}),dc=ie(function(w){var T=Gs(w),W=Es(w,In);return T=typeof T=="function"?T:t,T&&W.pop(),W.length&&W[0]===w[0]?jf(W,t,T):[]});function fC(w,T){return w==null?"":qh.call(w,T)}function Gs(w){var T=w==null?0:w.length;return T?w[T-1]:t}function Wf(w,T,W){var de=w==null?0:w.length;if(!de)return-1;var Ke=de;return W!==t&&(Ke=rr(W),Ke=Ke<0?ps(de+Ke,0):zs(Ke,de-1)),T===T?f0(w,T,Ke):Of(w,Pm,Ke,!0)}function Xd(w,T){return w&&w.length?qd(w,rr(T)):t}var qf=ie(Uc);function Uc(w,T){return w&&w.length&&T&&T.length?S(w,T):w}function S0(w,T,W){return w&&w.length&&T&&T.length?S(w,T,qi(W,2)):w}function Q1(w,T,W){return w&&w.length&&T&&T.length?S(w,T,t,W):w}var UA=ad(function(w,T){var W=w==null?0:w.length,de=ah(w,T);return k(w,Es(T,function(Ke){return PA(Ke,W)?+Ke:Ke}).sort(js)),de});function pC(w,T){var W=[];if(!(w&&w.length))return W;var de=-1,Ke=[],Je=w.length;for(T=qi(T,3);++de<Je;){var gt=w[de];T(gt,de,w)&&(W.push(gt),Ke.push(de))}return k(w,Ke),W}function Yf(w){return w==null?w:iA.call(w)}function E0(w,T,W){var de=w==null?0:w.length;return de?(W&&typeof W!="number"&&Lu(w,T,W)?(T=0,W=de):(T=T==null?0:rr(T),W=W===t?de:rr(W)),$e(w,T,W)):[]}function B0(w,T){return it(w,T)}function ag(w,T,W){return ct(w,T,qi(W,2))}function Np(w,T){var W=w==null?0:w.length;if(W){var de=it(w,T);if(de<W&&Yl(w[de],T))return de}return-1}function mC(w,T){return it(w,T,!0)}function O0(w,T,W){return ct(w,T,qi(W,2),!0)}function wv(w,T){var W=w==null?0:w.length;if(W){var de=it(w,T,!0)-1;if(Yl(w[de],T))return de}return-1}function W1(w){return w&&w.length?rt(w):[]}function Sv(w,T){return w&&w.length?rt(w,qi(T,2)):[]}function Hx(w){var T=w==null?0:w.length;return T?$e(w,1,T):[]}function Ev(w,T,W){return w&&w.length?(T=W||T===t?1:rr(T),$e(w,0,T<0?0:T)):[]}function xo(w,T,W){var de=w==null?0:w.length;return de?(T=W||T===t?1:rr(T),T=de-T,$e(w,T<0?0:T,de)):[]}function cs(w,T){return w&&w.length?Ut(w,qi(T,3),!1,!0):[]}function co(w,T){return w&&w.length?Ut(w,qi(T,3)):[]}var go=ie(function(w){return ot(pa(w,1,Ya,!0))}),es=ie(function(w){var T=Gs(w);return Ya(T)&&(T=t),ot(pa(w,1,Ya,!0),qi(T,2))}),Lc=ie(function(w){var T=Gs(w);return T=typeof T=="function"?T:t,ot(pa(w,1,Ya,!0),t,T)});function Vf(w){return w&&w.length?ot(w):[]}function lg(w,T){return w&&w.length?ot(w,qi(T,2)):[]}function Gp(w,T){return T=typeof T=="function"?T:t,w&&w.length?ot(w,t,T):[]}function LA(w){if(!(w&&w.length))return[];var T=0;return w=ea(w,function(W){if(Ya(W))return T=ps(W.length,T),!0}),Kd(T,function(W){return Es(w,Pd(W))})}function ya(w,T){if(!(w&&w.length))return[];var W=LA(w);return T==null?W:Es(W,function(de){return kr(T,t,de)})}var $f=ie(function(w,T){return Ya(w)?Rc(w,T):[]}),Qp=ie(function(w){return Qt(ea(w,Ya))}),Bv=ie(function(w){var T=Gs(w);return Ya(T)&&(T=t),Qt(ea(w,Ya),qi(T,2))}),cA=ie(function(w){var T=Gs(w);return T=typeof T=="function"?T:t,Qt(ea(w,Ya),t,T)}),Wp=ie(LA);function qp(w,T){return On(w||[],T||[],er)}function fc(w,T){return On(w||[],T||[],pe)}var q1=ie(function(w){var T=w.length,W=T>1?w[T-1]:t;return W=typeof W=="function"?(w.pop(),W):t,ya(w,W)});function ug(w){var T=Qe(w);return T.__chain__=!0,T}function gC(w,T){return T(w),w}function ud(w,T){return T(w)}var Y1=ad(function(w){var T=w.length,W=T?w[0]:0,de=this.__wrapped__,Ke=function(Je){return ah(Je,w)};return T>1||this.__actions__.length||!(de instanceof Ar)||!PA(W)?this.thru(Ke):(de=de.slice(W,+W+(T?1:0)),de.__actions__.push({func:ud,args:[Ke],thisArg:t}),new Ga(de,this.__chain__).thru(function(Je){return T&&!Je.length&&Je.push(t),Je}))});function Jd(){return ug(this)}function Ml(){return new Ga(this.value(),this.__chain__)}function Hf(){this.__values__===t&&(this.__values__=Wv(this.value()));var w=this.__index__>=this.__values__.length,T=w?t:this.__values__[this.__index__++];return{done:w,value:T}}function cg(){return this}function cd(w){for(var T,W=this;W instanceof oA;){var de=z1(W);de.__index__=0,de.__values__=t,T?Ke.__wrapped__=de:T=de;var Ke=de;W=W.__wrapped__}return Ke.__wrapped__=w,T}function Ov(){var w=this.__wrapped__;if(w instanceof Ar){var T=w;return this.__actions__.length&&(T=new Ar(this)),T=T.reverse(),T.__actions__.push({func:ud,args:[Yf],thisArg:t}),new Ga(T,this.__chain__)}return this.thru(Yf)}function Iv(){return jt(this.__wrapped__,this.__actions__)}var Ag=od(function(w,T,W){Tr.call(w,W)?++w[W]:Tu(w,W,1)});function sa(w,T,W){var de=Cr(w)?Rm:Jh;return W&&Lu(w,T,W)&&(T=t),de(w,qi(T,3))}function I0(w,T){var W=Cr(w)?ea:Ff;return W(w,qi(T,3))}var zc=Ns(N1),kv=Ns(og);function Fu(w,T){return pa(k0(w,T),1)}function Yp(w,T){return pa(k0(w,T),Ye)}function Tv(w,T,W){return W=W===t?1:rr(W),pa(k0(w,T),W)}function yC(w,T){var W=Cr(w)?lu:al;return W(w,qi(T,3))}function ef(w,T){var W=Cr(w)?uu:wo;return W(w,qi(T,3))}var V1=od(function(w,T,W){Tr.call(w,W)?w[W].push(T):Tu(w,W,[T])});function Rv(w,T,W,de){w=mc(w)?w:ze(w),W=W&&!de?rr(W):0;var Ke=w.length;return W<0&&(W=ps(Ke+W,0)),bg(w)?W<=Ke&&w.indexOf(T,W)>-1:!!Ke&&XA(w,T,W)>-1}var hg=ie(function(w,T,W){var de=-1,Ke=typeof T=="function",Je=mc(w)?tn(w.length):[];return al(w,function(gt){Je[++de]=Ke?kr(T,gt,W):Cl(gt,T,W)}),Je}),vC=od(function(w,T,W){Tu(w,W,T)});function k0(w,T){var W=Cr(w)?Es:Qd;return W(w,qi(T,3))}function bC(w,T,W,de){return w==null?[]:(Cr(T)||(T=T==null?[]:[T]),W=de?t:W,Cr(W)||(W=W==null?[]:[W]),B(w,T,W))}var CC=od(function(w,T,W){w[W?0:1].push(T)},function(){return[[],[]]});function $1(w,T,W){var de=Cr(w)?Bf:Kh,Ke=arguments.length<3;return de(w,qi(T,4),W,Ke,al)}function Dv(w,T,W){var de=Cr(w)?xp:Kh,Ke=arguments.length<3;return de(w,qi(T,4),W,Ke,wo)}function Zx(w,T){var W=Cr(w)?ea:Ff;return W(w,J1(qi(T,3)))}function _C(w){var T=Cr(w)?Uf:ae;return T(w)}function Pv(w,T,W){(W?Lu(w,T,W):T===t)?T=1:T=rr(T);var de=Cr(w)?Xh:ye;return de(w,T)}function Kv(w){var T=Cr(w)?sh:Xe;return T(w)}function tf(w){if(w==null)return 0;if(mc(w))return bg(w)?zh(w):w.length;var T=yu(w);return T==Ct||T==Kn?w.size:hc(w).length}function Ad(w,T,W){var de=Cr(w)?oc:tt;return W&&Lu(w,T,W)&&(T=t),de(w,qi(T,3))}var nf=ie(function(w,T){if(w==null)return[];var W=T.length;return W>1&&Lu(w,T[0],T[1])?T=[]:W>2&&Lu(T[0],T[1],T[2])&&(T=[T[0]]),B(w,pa(T,1),[])}),Zf=qm||function(){return wi.Date.now()};function T0(w,T){if(typeof T!="function")throw new Ul(s);return w=rr(w),function(){if(--w<1)return T.apply(this,arguments)}}function Uv(w,T,W){return T=W?t:T,T=w&&T==null?w.length:T,Wa(w,G,t,t,t,t,T)}function Lv(w,T){var W;if(typeof T!="function")throw new Ul(s);return w=rr(w),function(){return--w>0&&(W=T.apply(this,arguments)),w<=1&&(T=t),W}}var R0=ie(function(w,T,W){var de=z;if(W.length){var Ke=vA(W,ga(R0));de|=J}return Wa(w,de,T,W,Ke)}),H1=ie(function(w,T,W){var de=z|Q;if(W.length){var Ke=vA(W,ga(H1));de|=J}return Wa(T,de,w,W,Ke)});function D0(w,T,W){T=W?t:T;var de=Wa(w,H,t,t,t,t,t,T);return de.placeholder=D0.placeholder,de}function Z1(w,T,W){T=W?t:T;var de=Wa(w,Z,t,t,t,t,t,T);return de.placeholder=Z1.placeholder,de}function X1(w,T,W){var de,Ke,Je,gt,Ot,Ft,_n=0,xn=!1,Pn=!1,di=!0;if(typeof w!="function")throw new Ul(s);T=ju(T)||0,Xs(W)&&(xn=!!W.leading,Pn="maxWait"in W,Je=Pn?ps(ju(W.maxWait)||0,T):Je,di="trailing"in W?!!W.trailing:di);function Zi(bu){var em=de,Q0=Ke;return de=Ke=t,_n=bu,gt=w.apply(Q0,em),gt}function _r(bu){return _n=bu,Ot=w0(Do,T),xn?Zi(bu):gt}function yo(bu){var em=bu-Ft,Q0=bu-_n,UU=T-em;return Pn?zs(UU,Je-Q0):UU}function xr(bu){var em=bu-Ft,Q0=bu-_n;return Ft===t||em>=T||em<0||Pn&&Q0>=Je}function Do(){var bu=Zf();if(xr(bu))return Qo(bu);Ot=w0(Do,yo(bu))}function Qo(bu){return Ot=t,di&&de?Zi(bu):(de=Ke=t,gt)}function af(){Ot!==t&&Lo(Ot),_n=0,de=Ft=Ke=Ot=t}function Mh(){return Ot===t?gt:Qo(Zf())}function lf(){var bu=Zf(),em=xr(bu);if(de=arguments,Ke=this,Ft=bu,em){if(Ot===t)return _r(Ft);if(Pn)return Lo(Ot),Ot=w0(Do,T),Zi(Ft)}return Ot===t&&(Ot=w0(Do,T)),gt}return lf.cancel=af,lf.flush=Mh,lf}var Go=ie(function(w,T){return $m(w,1,T)}),P0=ie(function(w,T,W){return $m(w,ju(T)||0,W)});function Xx(w){return Wa(w,ue)}function dg(w,T){if(typeof w!="function"||T!=null&&typeof T!="function")throw new Ul(s);var W=function(){var de=arguments,Ke=T?T.apply(this,de):de[0],Je=W.cache;if(Je.has(Ke))return Je.get(Ke);var gt=w.apply(this,de);return W.cache=Je.set(Ke,gt)||Je,gt};return W.cache=new(dg.Cache||Fs),W}dg.Cache=Fs;function J1(w){if(typeof w!="function")throw new Ul(s);return function(){var T=arguments;switch(T.length){case 0:return!w.call(this);case 1:return!w.call(this,T[0]);case 2:return!w.call(this,T[0],T[1]);case 3:return!w.call(this,T[0],T[1],T[2])}return!w.apply(this,T)}}function Jx(w){return Lv(2,w)}var e2=Hi(function(w,T){T=T.length==1&&Cr(T[0])?Es(T[0],sc(qi())):Es(pa(T,1),sc(qi()));var W=T.length;return ie(function(de){for(var Ke=-1,Je=zs(de.length,W);++Ke<Je;)de[Ke]=T[Ke].call(this,de[Ke]);return kr(w,this,de)})}),fg=ie(function(w,T){var W=vA(T,ga(fg));return Wa(w,J,t,T,W)}),Vp=ie(function(w,T){var W=vA(T,ga(Vp));return Wa(w,$,t,T,W)}),ey=ad(function(w,T){return Wa(w,oe,t,t,t,T)});function K0(w,T){if(typeof w!="function")throw new Ul(s);return T=T===t?T:rr(T),ie(w,T)}function vh(w,T){if(typeof w!="function")throw new Ul(s);return T=T==null?0:ps(rr(T),0),ie(function(W){var de=W[T],Ke=Er(W,0,T);return de&&Bu(Ke,de),kr(w,this,Ke)})}function pc(w,T,W){var de=!0,Ke=!0;if(typeof w!="function")throw new Ul(s);return Xs(W)&&(de="leading"in W?!!W.leading:de,Ke="trailing"in W?!!W.trailing:Ke),X1(w,T,{leading:de,maxWait:T,trailing:Ke})}function bh(w){return Uv(w,1)}function $p(w,T){return fg(ln(T),w)}function t2(){if(!arguments.length)return[];var w=arguments[0];return Cr(w)?w:[w]}function U0(w){return Ql(w,E)}function ty(w,T){return T=typeof T=="function"?T:t,Ql(w,E,T)}function xC(w){return Ql(w,v|E)}function ny(w,T){return T=typeof T=="function"?T:t,Ql(w,v|E,T)}function zv(w,T){return T==null||lh(w,T,Al(T))}function Yl(w,T){return w===T||w!==w&&T!==T}var Fv=Nf(hh),jv=Nf(function(w,T){return w>=T}),rf=Pu((function(){return arguments})())?Pu:function(w){return Qs(w)&&Tr.call(w,"callee")&&!Ld.call(w,"callee")},Cr=tn.isArray,pg=eo?sc(eo):Os;function mc(w){return w!=null&&gg(w.length)&&!Fc(w)}function Ya(w){return Qs(w)&&mc(w)}function L0(w){return w===!0||w===!1||Qs(w)&&Qa(w)==Ue}var Xf=Op||Xt,MC=Uo?sc(Uo):us;function Ao(w){return Qs(w)&&w.nodeType===1&&!yg(w)}function z0(w){if(w==null)return!0;if(mc(w)&&(Cr(w)||typeof w=="string"||typeof w.splice=="function"||Xf(w)||of(w)||rf(w)))return!w.length;var T=yu(w);if(T==Ct||T==Kn)return!w.size;if(Up(w))return!hc(w).length;for(var W in w)if(Tr.call(w,W))return!1;return!0}function Ch(w,T){return uo(w,T)}function iy(w,T,W){W=typeof W=="function"?W:t;var de=W?W(w,T):t;return de===t?uo(w,T,t,W):!!de}function F0(w){if(!Qs(w))return!1;var T=Qa(w);return T==Ve||T==Ee||typeof w.message=="string"&&typeof w.name=="string"&&!yg(w)}function ry(w){return typeof w=="number"&&Fl(w)}function Fc(w){if(!Xs(w))return!1;var T=Qa(w);return T==mt||T==pt||T==Lt||T==Qn}function mg(w){return typeof w=="number"&&w==rr(w)}function gg(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=At}function Xs(w){var T=typeof w;return w!=null&&(T=="object"||T=="function")}function Qs(w){return w!=null&&typeof w=="object"}var Nv=Or?sc(Or):So;function oy(w,T){return w===T||ko(w,T,Yd(T))}function Gv(w,T,W){return W=typeof W=="function"?W:t,ko(w,T,Yd(T),W)}function Wr(w){return sy(w)&&w!=+w}function Jf(w){if(vu(w))throw new vr(o);return nd(w)}function Va(w){return w===null}function Hp(w){return w==null}function sy(w){return typeof w=="number"||Qs(w)&&Qa(w)==Rt}function yg(w){if(!Qs(w)||Qa(w)!=on)return!1;var T=Au(w);if(T===null)return!0;var W=Tr.call(T,"constructor")&&T.constructor;return typeof W=="function"&&W instanceof W&&eh.call(W)==CA}var vg=Ss?sc(Ss):IA;function ay(w){return mg(w)&&w>=-At&&w<=At}var j0=ZA?sc(ZA):kA;function bg(w){return typeof w=="string"||!Cr(w)&&Qs(w)&&Qa(w)==Un}function $a(w){return typeof w=="symbol"||Qs(w)&&Qa(w)==Cn}var of=gl?sc(gl):TA;function ly(w){return w===t}function wC(w){return Qs(w)&&yu(w)==Dn}function Qv(w){return Qs(w)&&Qa(w)==It}var n2=Nf(ms),SC=Nf(function(w,T){return w<=T});function Wv(w){if(!w)return[];if(mc(w))return bg(w)?Ls(w):ia(w);if(yl&&w[yl])return Ud(w[yl]());var T=yu(w),W=T==Ct?Lm:T==Kn?zm:ze;return W(w)}function hd(w){if(!w)return w===0?w:0;if(w=ju(w),w===Ye||w===-Ye){var T=w<0?-1:1;return T*yt}return w===w?w:0}function rr(w){var T=hd(w),W=T%1;return T===T?W?T-W:T:0}function uy(w){return w?Ru(rr(w),0,De):0}function ju(w){if(typeof w=="number")return w;if($a(w))return Le;if(Xs(w)){var T=typeof w.valueOf=="function"?w.valueOf():w;w=Xs(T)?T+"":T}if(typeof w!="string")return w===0?w:+w;w=Oc(w);var W=Xc.test(w);return W||Ki.test(w)?Bn(w.slice(2),W?2:8):nl.test(w)?Le:+w}function Zp(w){return ul(w,Nu(w))}function cy(w){return w?Ru(rr(w),-At,At):w===0?w:0}function ts(w){return w==null?"":ft(w)}var EC=mu(function(w,T){if(Up(T)||mc(T)){ul(T,Al(T),w);return}for(var W in T)Tr.call(T,W)&&er(w,W,T[W])}),Ay=mu(function(w,T){ul(T,Nu(T),w)}),_h=mu(function(w,T,W,de){ul(T,Nu(T),w,de)}),Vl=mu(function(w,T,W,de){ul(T,Al(T),w,de)}),jc=ad(ah);function hy(w,T){var W=lc(w);return T==null?W:zf(W,T)}var qv=ie(function(w,T){w=jo(w);var W=-1,de=T.length,Ke=de>2?T[2]:t;for(Ke&&Lu(T[0],T[1],Ke)&&(de=1);++W<de;)for(var Je=T[W],gt=Nu(Je),Ot=-1,Ft=gt.length;++Ot<Ft;){var _n=gt[Ot],xn=w[_n];(xn===t||Yl(xn,Ic[_n])&&!Tr.call(w,_n))&&(w[_n]=Je[_n])}return w}),dy=ie(function(w){return w.push(t,gv),kr(u,t,w)});function BC(w,T){return Dd(w,qi(T,3),ka)}function Cg(w,T){return Dd(w,qi(T,3),Ah)}function AA(w,T){return w==null?w:uh(w,qi(T,3),Nu)}function OC(w,T){return w==null?w:ch(w,qi(T,3),Nu)}function N0(w,T){return w&&ka(w,qi(T,3))}function xh(w,T){return w&&Ah(w,qi(T,3))}function Yv(w){return w==null?[]:ti(w,Al(w))}function IC(w){return w==null?[]:ti(w,Nu(w))}function zA(w,T,W){var de=w==null?t:bi(w,T);return de===t?W:de}function fy(w,T){return w!=null&&eg(w,T,ls)}function py(w,T){return w!=null&&eg(w,T,Ac)}var Vv=gu(function(w,T,W){T!=null&&typeof T.toString!="function"&&(T=Ll.call(T)),w[T]=W},Ro(yc)),my=gu(function(w,T,W){T!=null&&typeof T.toString!="function"&&(T=Ll.call(T)),Tr.call(w,T)?w[T].push(W):w[T]=[W]},qi),G0=ie(Cl);function Al(w){return mc(w)?OA(w):hc(w)}function Nu(w){return mc(w)?OA(w,!0):Gd(w)}function $v(w,T){var W={};return T=qi(T,3),ka(w,function(de,Ke,Je){Tu(W,T(de,Ke,Je),de)}),W}function kC(w,T){var W={};return T=qi(T,3),ka(w,function(de,Ke,Je){Tu(W,Ke,T(de,Ke,Je))}),W}var f=mu(function(w,T,W){Wd(w,T,W)}),u=mu(function(w,T,W,de){Wd(w,T,W,de)}),d=ad(function(w,T){var W={};if(w==null)return W;var de=!1;T=Es(T,function(Je){return Je=$n(Je,w),de||(de=Je.length>1),Je}),ul(w,yv(w),W),de&&(W=Ql(W,v|x|E,k1));for(var Ke=T.length;Ke--;)St(W,T[Ke]);return W});function b(w,T){return I(w,J1(qi(T)))}var M=ad(function(w,T){return w==null?{}:l(w,T)});function I(w,T){if(w==null)return{};var W=Es(yv(w),function(de){return[de]});return T=qi(T),p(w,W,function(de,Ke){return T(de,Ke[0])})}function D(w,T,W){T=$n(T,w);var de=-1,Ke=T.length;for(Ke||(Ke=1,w=t);++de<Ke;){var Je=w==null?t:w[Wl(T[de])];Je===t&&(de=Ke,Je=W),w=Fc(Je)?Je.call(w):Je}return w}function U(w,T,W){return w==null?w:pe(w,T,W)}function F(w,T,W,de){return de=typeof de=="function"?de:t,w==null?w:pe(w,T,W,de)}var ee=uA(Al),ne=uA(Nu);function ce(w,T,W){var de=Cr(w),Ke=de||Xf(w)||of(w);if(T=qi(T,4),W==null){var Je=w&&w.constructor;Ke?W=de?new Je:[]:Xs(w)?W=Fc(Je)?lc(Au(w)):{}:W={}}return(Ke?lu:ka)(w,function(gt,Ot,Ft){return T(W,gt,Ot,Ft)}),W}function _e(w,T){return w==null?!0:St(w,T)}function we(w,T,W){return w==null?w:Wt(w,T,ln(W))}function Re(w,T,W,de){return de=typeof de=="function"?de:t,w==null?w:Wt(w,T,ln(W),de)}function ze(w){return w==null?[]:Km(w,Al(w))}function He(w){return w==null?[]:Km(w,Nu(w))}function nt(w,T,W){return W===t&&(W=T,T=t),W!==t&&(W=ju(W),W=W===W?W:0),T!==t&&(T=ju(T),T=T===T?T:0),Ru(ju(w),T,W)}function Bt(w,T,W){return T=hd(T),W===t?(W=T,T=0):W=hd(W),w=ju(w),ll(w,T,W)}function lt(w,T,W){if(W&&typeof W!="boolean"&&Lu(w,T,W)&&(T=W=t),W===t&&(typeof T=="boolean"?(W=T,T=t):typeof w=="boolean"&&(W=w,w=t)),w===t&&T===t?(w=0,T=1):(w=hd(w),T===t?(T=w,w=0):T=hd(T)),w>T){var de=w;w=T,T=de}if(W||w%1||T%1){var Ke=kc();return zs(w+Ke*(T-w+hn("1e-"+((Ke+"").length-1))),T)}return K(w,T)}var vt=gs(function(w,T,W){return T=T.toLowerCase(),w+(W?Nt(T):T)});function Nt(w){return Ys(ts(w).toLowerCase())}function Zt(w){return w=ts(w),w&&w.replace(po,Pf).replace(_o,"")}function fn(w,T,W){w=ts(w),T=ft(T);var de=w.length;W=W===t?de:Ru(rr(W),0,de);var Ke=W;return W-=T.length,W>=0&&w.slice(W,Ke)==T}function Nn(w){return w=ts(w),w&&Zn.test(w)?w.replace(en,w1):w}function Rn(w){return w=ts(w),w&&Oi.test(w)?w.replace(gr,"\\$&"):w}var Fn=gs(function(w,T,W){return w+(W?"-":"")+T.toLowerCase()}),Ci=gs(function(w,T,W){return w+(W?" ":"")+T.toLowerCase()}),Ln=sd("toLowerCase");function jn(w,T,W){w=ts(w),T=rr(T);var de=T?zh(w):0;if(!T||de>=T)return w;var Ke=(T-de)/2;return fh(Qh(Ke),W)+w+fh(ih(Ke),W)}function an(w,T,W){w=ts(w),T=rr(T);var de=T?zh(w):0;return T&&de<T?w+fh(T-de,W):w}function Fi(w,T,W){w=ts(w),T=rr(T);var de=T?zh(w):0;return T&&de<T?fh(T-de,W)+w:w}function tr(w,T,W){return W||T==null?T=0:T&&(T=+T),vl(ts(w).replace(Ri,""),T||0)}function Ti(w,T,W){return(W?Lu(w,T,W):T===t)?T=1:T=rr(T),q(ts(w),T)}function ui(){var w=arguments,T=ts(w[0]);return w.length<3?T:T.replace(w[1],w[2])}var Rr=gs(function(w,T,W){return w+(W?"_":"")+T.toLowerCase()});function bs(w,T,W){return W&&typeof W!="number"&&Lu(w,T,W)&&(T=W=t),W=W===t?De:W>>>0,W?(w=ts(w),w&&(typeof T=="string"||T!=null&&!vg(T))&&(T=ft(T),!T&&Uh(w))?Er(Ls(w),0,W):w.split(T,W)):[]}var va=gs(function(w,T,W){return w+(W?" ":"")+Ys(T)});function wl(w,T,W){return w=ts(w),W=W==null?0:Ru(rr(W),0,w.length),T=ft(T),w.slice(W,W+T.length)==T}function gc(w,T,W){var de=Qe.templateSettings;W&&Lu(w,T,W)&&(T=t),w=ts(w),T=_h({},T,de,I1);var Ke=_h({},T.imports,de.imports,I1),Je=Al(Ke),gt=Km(Ke,Je),Ot,Ft,_n=0,xn=T.interpolate||Oa,Pn="__p += '",di=Ep((T.escape||Oa).source+"|"+xn.source+"|"+(xn===zn?Ni:Oa).source+"|"+(T.evaluate||Oa).source+"|$","g"),Zi="//# sourceURL="+(Tr.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Pl+"]")+`
`;w.replace(di,function(xr,Do,Qo,af,Mh,lf){return Qo||(Qo=af),Pn+=w.slice(_n,lf).replace(eu,Sp),Do&&(Ot=!0,Pn+=`' +
__e(`+Do+`) +
'`),Mh&&(Ft=!0,Pn+=`';
`+Mh+`;
__p += '`),Qo&&(Pn+=`' +
((__t = (`+Qo+`)) == null ? '' : __t) +
'`),_n=lf+xr.length,xr}),Pn+=`';
`;var _r=Tr.call(T,"variable")&&T.variable;if(!_r)Pn=`with (obj) {
`+Pn+`
}
`;else if(Vr.test(_r))throw new vr(a);Pn=(Ft?Pn.replace(y,""):Pn).replace(at,"$1").replace(Pt,"$1;"),Pn="function("+(_r||"obj")+`) {
`+(_r?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ot?", __e = _.escape":"")+(Ft?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Pn+`return __p
}`;var yo=Ca(function(){return $r(Je,Zi+"return "+Pn).apply(t,gt)});if(yo.source=Pn,F0(yo))throw yo;return yo}function Da(w){return ts(w).toLowerCase()}function Ws(w){return ts(w).toUpperCase()}function To(w,T,W){if(w=ts(w),w&&(W||T===t))return Oc(w);if(!w||!(T=ft(T)))return w;var de=Ls(w),Ke=Ls(T),Je=wp(de,Ke),gt=Rf(de,Ke)+1;return Er(de,Je,gt).join("")}function aa(w,T,W){if(w=ts(w),w&&(W||T===t))return w.slice(0,JA(w)+1);if(!w||!(T=ft(T)))return w;var de=Ls(w),Ke=Rf(de,Ls(T))+1;return Er(de,0,Ke).join("")}function ba(w,T,W){if(w=ts(w),w&&(W||T===t))return w.replace(Ri,"");if(!w||!(T=ft(T)))return w;var de=Ls(w),Ke=wp(de,Ls(T));return Er(de,Ke).join("")}function qs(w,T){var W=xe,de=ge;if(Xs(T)){var Ke="separator"in T?T.separator:Ke;W="length"in T?rr(T.length):W,de="omission"in T?ft(T.omission):de}w=ts(w);var Je=w.length;if(Uh(w)){var gt=Ls(w);Je=gt.length}if(W>=Je)return w;var Ot=W-zh(de);if(Ot<1)return de;var Ft=gt?Er(gt,0,Ot).join(""):w.slice(0,Ot);if(Ke===t)return Ft+de;if(gt&&(Ot+=Ft.length-Ot),vg(Ke)){if(w.slice(Ot).search(Ke)){var _n,xn=Ft;for(Ke.global||(Ke=Ep(Ke.source,ts(ri.exec(Ke))+"g")),Ke.lastIndex=0;_n=Ke.exec(xn);)var Pn=_n.index;Ft=Ft.slice(0,Pn===t?Ot:Pn)}}else if(w.indexOf(ft(Ke),Ot)!=Ot){var di=Ft.lastIndexOf(Ke);di>-1&&(Ft=Ft.slice(0,di))}return Ft+de}function Gu(w){return w=ts(w),w&&dt.test(w)?w.replace(Mt,nA):w}var Nc=gs(function(w,T,W){return w+(W?" ":"")+T.toUpperCase()}),Ys=sd("toUpperCase");function Qu(w,T,W){return w=ts(w),T=W?t:T,T===t?Um(w)?Nm(w):pv(w):w.match(T)||[]}var Ca=ie(function(w,T){try{return kr(w,t,T)}catch(W){return F0(W)?W:new vr(W)}}),_a=ad(function(w,T){return lu(T,function(W){W=Wl(W),Tu(w,W,R0(w[W],w))}),w});function Ha(w){var T=w==null?0:w.length,W=qi();return w=T?Es(w,function(de){if(typeof de[1]!="function")throw new Ul(s);return[W(de[0]),de[1]]}):[],ie(function(de){for(var Ke=-1;++Ke<T;){var Je=w[Ke];if(kr(Je[0],this,de))return kr(Je[1],this,de)}})}function Pa(w){return v0(Ql(w,v))}function Ro(w){return function(){return w}}function Gc(w,T){return w==null||w!==w?T:w}var Xp=Pc(),Wu=Pc(!0);function yc(w){return w}function dd(w){return id(typeof w=="function"?w:Ql(w,v))}function fd(w){return RA(Ql(w,v))}function Jp(w,T){return Tp(w,Ql(T,v))}var _g=ie(function(w,T){return function(W){return Cl(W,w,T)}}),sf=ie(function(w,T){return function(W){return Cl(w,W,T)}});function A(w,T,W){var de=Al(T),Ke=ti(T,de);W==null&&!(Xs(T)&&(Ke.length||!de.length))&&(W=T,T=w,w=this,Ke=ti(T,Al(T)));var Je=!(Xs(W)&&"chain"in W)||!!W.chain,gt=Fc(w);return lu(Ke,function(Ot){var Ft=T[Ot];w[Ot]=Ft,gt&&(w.prototype[Ot]=function(){var _n=this.__chain__;if(Je||_n){var xn=w(this.__wrapped__),Pn=xn.__actions__=ia(this.__actions__);return Pn.push({func:Ft,args:arguments,thisArg:w}),xn.__chain__=_n,xn}return Ft.apply(w,Bu([this.value()],arguments))})}),w}function g(){return wi._===this&&(wi._=cu),this}function _(){}function O(w){return w=rr(w),ie(function(T){return qd(T,w)})}var j=Rp(Es),V=Rp(Rm),ve=Rp(oc);function qe(w){return Pp(w)?Pd(Wl(w)):C(w)}function bt(w){return function(T){return w==null?t:bi(w,T)}}var Vt=lA(),un=lA(!0);function pn(){return[]}function Xt(){return!1}function rn(){return{}}function Ii(){return""}function or(){return!0}function Cs(w,T){if(w=rr(w),w<1||w>At)return[];var W=De,de=zs(w,De);T=qi(T),w-=De;for(var Ke=Kd(de,T);++W<w;)T(W);return Ke}function Dt(w){return Cr(w)?Es(w,Wl):$a(w)?[w]:ia(Hd(ts(w)))}function Et(w){var T=++p0;return ts(w)+T}var qt=Kc(function(w,T){return w+T},0),dn=mh("ceil"),Xi=Kc(function(w,T){return w/T},1),zo=mh("floor");function ni(w){return w&&w.length?Du(w,yc,hh):t}function nr(w,T){return w&&w.length?Du(w,qi(T,2),hh):t}function Lr(w){return Kl(w,yc)}function zr(w,T){return Kl(w,qi(T,2))}function Qc(w){return w&&w.length?Du(w,yc,ms):t}function pd(w,T){return w&&w.length?Du(w,qi(T,2),ms):t}var Koe=Kc(function(w,T){return w*T},1),Uoe=mh("round"),Loe=Kc(function(w,T){return w-T},0);function zoe(w){return w&&w.length?Mp(w,yc):0}function Foe(w,T){return w&&w.length?Mp(w,qi(T,2)):0}return Qe.after=T0,Qe.ary=Uv,Qe.assign=EC,Qe.assignIn=Ay,Qe.assignInWith=_h,Qe.assignWith=Vl,Qe.at=jc,Qe.before=Lv,Qe.bind=R0,Qe.bindAll=_a,Qe.bindKey=H1,Qe.castArray=t2,Qe.chain=ug,Qe.chunk=hC,Qe.compact=_v,Qe.concat=xv,Qe.cond=Ha,Qe.conforms=Pa,Qe.constant=Ro,Qe.countBy=Ag,Qe.create=hy,Qe.curry=D0,Qe.curryRight=Z1,Qe.debounce=X1,Qe.defaults=qv,Qe.defaultsDeep=dy,Qe.defer=Go,Qe.delay=P0,Qe.difference=F1,Qe.differenceBy=j1,Qe.differenceWith=Zd,Qe.drop=qa,Qe.dropRight=zp,Qe.dropRightWhile=dC,Qe.dropWhile=Qr,Qe.fill=rg,Qe.filter=I0,Qe.flatMap=Fu,Qe.flatMapDeep=Yp,Qe.flatMapDepth=Tv,Qe.flatten=vs,Qe.flattenDeep=ql,Qe.flattenDepth=ld,Qe.flip=Xx,Qe.flow=Xp,Qe.flowRight=Wu,Qe.fromPairs=Mv,Qe.functions=Yv,Qe.functionsIn=IC,Qe.groupBy=V1,Qe.initial=sg,Qe.intersection=jp,Qe.intersectionBy=xl,Qe.intersectionWith=dc,Qe.invert=Vv,Qe.invertBy=my,Qe.invokeMap=hg,Qe.iteratee=dd,Qe.keyBy=vC,Qe.keys=Al,Qe.keysIn=Nu,Qe.map=k0,Qe.mapKeys=$v,Qe.mapValues=kC,Qe.matches=fd,Qe.matchesProperty=Jp,Qe.memoize=dg,Qe.merge=f,Qe.mergeWith=u,Qe.method=_g,Qe.methodOf=sf,Qe.mixin=A,Qe.negate=J1,Qe.nthArg=O,Qe.omit=d,Qe.omitBy=b,Qe.once=Jx,Qe.orderBy=bC,Qe.over=j,Qe.overArgs=e2,Qe.overEvery=V,Qe.overSome=ve,Qe.partial=fg,Qe.partialRight=Vp,Qe.partition=CC,Qe.pick=M,Qe.pickBy=I,Qe.property=qe,Qe.propertyOf=bt,Qe.pull=qf,Qe.pullAll=Uc,Qe.pullAllBy=S0,Qe.pullAllWith=Q1,Qe.pullAt=UA,Qe.range=Vt,Qe.rangeRight=un,Qe.rearg=ey,Qe.reject=Zx,Qe.remove=pC,Qe.rest=K0,Qe.reverse=Yf,Qe.sampleSize=Pv,Qe.set=U,Qe.setWith=F,Qe.shuffle=Kv,Qe.slice=E0,Qe.sortBy=nf,Qe.sortedUniq=W1,Qe.sortedUniqBy=Sv,Qe.split=bs,Qe.spread=vh,Qe.tail=Hx,Qe.take=Ev,Qe.takeRight=xo,Qe.takeRightWhile=cs,Qe.takeWhile=co,Qe.tap=gC,Qe.throttle=pc,Qe.thru=ud,Qe.toArray=Wv,Qe.toPairs=ee,Qe.toPairsIn=ne,Qe.toPath=Dt,Qe.toPlainObject=Zp,Qe.transform=ce,Qe.unary=bh,Qe.union=go,Qe.unionBy=es,Qe.unionWith=Lc,Qe.uniq=Vf,Qe.uniqBy=lg,Qe.uniqWith=Gp,Qe.unset=_e,Qe.unzip=LA,Qe.unzipWith=ya,Qe.update=we,Qe.updateWith=Re,Qe.values=ze,Qe.valuesIn=He,Qe.without=$f,Qe.words=Qu,Qe.wrap=$p,Qe.xor=Qp,Qe.xorBy=Bv,Qe.xorWith=cA,Qe.zip=Wp,Qe.zipObject=qp,Qe.zipObjectDeep=fc,Qe.zipWith=q1,Qe.entries=ee,Qe.entriesIn=ne,Qe.extend=Ay,Qe.extendWith=_h,A(Qe,Qe),Qe.add=qt,Qe.attempt=Ca,Qe.camelCase=vt,Qe.capitalize=Nt,Qe.ceil=dn,Qe.clamp=nt,Qe.clone=U0,Qe.cloneDeep=xC,Qe.cloneDeepWith=ny,Qe.cloneWith=ty,Qe.conformsTo=zv,Qe.deburr=Zt,Qe.defaultTo=Gc,Qe.divide=Xi,Qe.endsWith=fn,Qe.eq=Yl,Qe.escape=Nn,Qe.escapeRegExp=Rn,Qe.every=sa,Qe.find=zc,Qe.findIndex=N1,Qe.findKey=BC,Qe.findLast=kv,Qe.findLastIndex=og,Qe.findLastKey=Cg,Qe.floor=zo,Qe.forEach=yC,Qe.forEachRight=ef,Qe.forIn=AA,Qe.forInRight=OC,Qe.forOwn=N0,Qe.forOwnRight=xh,Qe.get=zA,Qe.gt=Fv,Qe.gte=jv,Qe.has=fy,Qe.hasIn=py,Qe.head=Fp,Qe.identity=yc,Qe.includes=Rv,Qe.indexOf=G1,Qe.inRange=Bt,Qe.invoke=G0,Qe.isArguments=rf,Qe.isArray=Cr,Qe.isArrayBuffer=pg,Qe.isArrayLike=mc,Qe.isArrayLikeObject=Ya,Qe.isBoolean=L0,Qe.isBuffer=Xf,Qe.isDate=MC,Qe.isElement=Ao,Qe.isEmpty=z0,Qe.isEqual=Ch,Qe.isEqualWith=iy,Qe.isError=F0,Qe.isFinite=ry,Qe.isFunction=Fc,Qe.isInteger=mg,Qe.isLength=gg,Qe.isMap=Nv,Qe.isMatch=oy,Qe.isMatchWith=Gv,Qe.isNaN=Wr,Qe.isNative=Jf,Qe.isNil=Hp,Qe.isNull=Va,Qe.isNumber=sy,Qe.isObject=Xs,Qe.isObjectLike=Qs,Qe.isPlainObject=yg,Qe.isRegExp=vg,Qe.isSafeInteger=ay,Qe.isSet=j0,Qe.isString=bg,Qe.isSymbol=$a,Qe.isTypedArray=of,Qe.isUndefined=ly,Qe.isWeakMap=wC,Qe.isWeakSet=Qv,Qe.join=fC,Qe.kebabCase=Fn,Qe.last=Gs,Qe.lastIndexOf=Wf,Qe.lowerCase=Ci,Qe.lowerFirst=Ln,Qe.lt=n2,Qe.lte=SC,Qe.max=ni,Qe.maxBy=nr,Qe.mean=Lr,Qe.meanBy=zr,Qe.min=Qc,Qe.minBy=pd,Qe.stubArray=pn,Qe.stubFalse=Xt,Qe.stubObject=rn,Qe.stubString=Ii,Qe.stubTrue=or,Qe.multiply=Koe,Qe.nth=Xd,Qe.noConflict=g,Qe.noop=_,Qe.now=Zf,Qe.pad=jn,Qe.padEnd=an,Qe.padStart=Fi,Qe.parseInt=tr,Qe.random=lt,Qe.reduce=$1,Qe.reduceRight=Dv,Qe.repeat=Ti,Qe.replace=ui,Qe.result=D,Qe.round=Uoe,Qe.runInContext=kt,Qe.sample=_C,Qe.size=tf,Qe.snakeCase=Rr,Qe.some=Ad,Qe.sortedIndex=B0,Qe.sortedIndexBy=ag,Qe.sortedIndexOf=Np,Qe.sortedLastIndex=mC,Qe.sortedLastIndexBy=O0,Qe.sortedLastIndexOf=wv,Qe.startCase=va,Qe.startsWith=wl,Qe.subtract=Loe,Qe.sum=zoe,Qe.sumBy=Foe,Qe.template=gc,Qe.times=Cs,Qe.toFinite=hd,Qe.toInteger=rr,Qe.toLength=uy,Qe.toLower=Da,Qe.toNumber=ju,Qe.toSafeInteger=cy,Qe.toString=ts,Qe.toUpper=Ws,Qe.trim=To,Qe.trimEnd=aa,Qe.trimStart=ba,Qe.truncate=qs,Qe.unescape=Gu,Qe.uniqueId=Et,Qe.upperCase=Nc,Qe.upperFirst=Ys,Qe.each=yC,Qe.eachRight=ef,Qe.first=Fp,A(Qe,(function(){var w={};return ka(Qe,function(T,W){Tr.call(Qe.prototype,W)||(w[W]=T)}),w})(),{chain:!1}),Qe.VERSION=i,lu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){Qe[w].placeholder=Qe}),lu(["drop","take"],function(w,T){Ar.prototype[w]=function(W){W=W===t?1:ps(rr(W),0);var de=this.__filtered__&&!T?new Ar(this):this.clone();return de.__filtered__?de.__takeCount__=zs(W,de.__takeCount__):de.__views__.push({size:zs(W,De),type:w+(de.__dir__<0?"Right":"")}),de},Ar.prototype[w+"Right"]=function(W){return this.reverse()[w](W).reverse()}}),lu(["filter","map","takeWhile"],function(w,T){var W=T+1,de=W==ke||W==Be;Ar.prototype[w]=function(Ke){var Je=this.clone();return Je.__iteratees__.push({iteratee:qi(Ke,3),type:W}),Je.__filtered__=Je.__filtered__||de,Je}}),lu(["head","last"],function(w,T){var W="take"+(T?"Right":"");Ar.prototype[w]=function(){return this[W](1).value()[0]}}),lu(["initial","tail"],function(w,T){var W="drop"+(T?"":"Right");Ar.prototype[w]=function(){return this.__filtered__?new Ar(this):this[W](1)}}),Ar.prototype.compact=function(){return this.filter(yc)},Ar.prototype.find=function(w){return this.filter(w).head()},Ar.prototype.findLast=function(w){return this.reverse().find(w)},Ar.prototype.invokeMap=ie(function(w,T){return typeof w=="function"?new Ar(this):this.map(function(W){return Cl(W,w,T)})}),Ar.prototype.reject=function(w){return this.filter(J1(qi(w)))},Ar.prototype.slice=function(w,T){w=rr(w);var W=this;return W.__filtered__&&(w>0||T<0)?new Ar(W):(w<0?W=W.takeRight(-w):w&&(W=W.drop(w)),T!==t&&(T=rr(T),W=T<0?W.dropRight(-T):W.take(T-w)),W)},Ar.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},Ar.prototype.toArray=function(){return this.take(De)},ka(Ar.prototype,function(w,T){var W=/^(?:filter|find|map|reject)|While$/.test(T),de=/^(?:head|last)$/.test(T),Ke=Qe[de?"take"+(T=="last"?"Right":""):T],Je=de||/^find/.test(T);Ke&&(Qe.prototype[T]=function(){var gt=this.__wrapped__,Ot=de?[1]:arguments,Ft=gt instanceof Ar,_n=Ot[0],xn=Ft||Cr(gt),Pn=function(Do){var Qo=Ke.apply(Qe,Bu([Do],Ot));return de&&di?Qo[0]:Qo};xn&&W&&typeof _n=="function"&&_n.length!=1&&(Ft=xn=!1);var di=this.__chain__,Zi=!!this.__actions__.length,_r=Je&&!di,yo=Ft&&!Zi;if(!Je&&xn){gt=yo?gt:new Ar(this);var xr=w.apply(gt,Ot);return xr.__actions__.push({func:ud,args:[Pn],thisArg:t}),new Ga(xr,di)}return _r&&yo?w.apply(this,Ot):(xr=this.thru(Pn),_r?de?xr.value()[0]:xr.value():xr)})}),lu(["pop","push","shift","sort","splice","unshift"],function(w){var T=Fh[w],W=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",de=/^(?:pop|shift)$/.test(w);Qe.prototype[w]=function(){var Ke=arguments;if(de&&!this.__chain__){var Je=this.value();return T.apply(Cr(Je)?Je:[],Ke)}return this[W](function(gt){return T.apply(Cr(gt)?gt:[],Ke)})}}),ka(Ar.prototype,function(w,T){var W=Qe[T];if(W){var de=W.name+"";Tr.call(lo,de)||(lo[de]=[]),lo[de].push({name:T,func:W})}}),lo[Uu(t,Q).name]=[{name:"wrapper",func:t}],Ar.prototype.clone=SA,Ar.prototype.reverse=EA,Ar.prototype.value=sA,Qe.prototype.at=Y1,Qe.prototype.chain=Jd,Qe.prototype.commit=Ml,Qe.prototype.next=Hf,Qe.prototype.plant=cd,Qe.prototype.reverse=Ov,Qe.prototype.toJSON=Qe.prototype.valueOf=Qe.prototype.value=Iv,Qe.prototype.first=Qe.prototype.head,yl&&(Qe.prototype[yl]=cg),Qe}),Nr=Gm();fr?((fr.exports=Nr)._=Nr,Si._=Nr):wi._=Nr}).call(Rae)})(I2,I2.exports)),I2.exports}var N4=Dae();const cT=Su(N4);function Pae(n,e,t){const i=e<0?n.length+e:e;if(i>=0&&i<n.length){const r=t<0?n.length+t:t,[o]=n.splice(e,1);n.splice(r,0,o)}}var hB,BL;function Kae(){if(BL)return hB;BL=1;function n(e){for(var t=5381,i=e.length;i;)t=t*33^e.charCodeAt(--i);return t>>>0}return hB=n,hB}var Uae=Kae();const OL=Su(Uae);var mf=Uint8Array,w_=Uint16Array,Lae=Int32Array,O$=new mf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),I$=new mf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zae=new mf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),k$=function(n,e){for(var t=new w_(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Lae(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)r[o]=o-t[i]<<5|i;return{b:t,r}},T$=k$(O$,2),R$=T$.b,Fae=T$.r;R$[28]=258,Fae[258]=28;var jae=k$(I$,0),Nae=jae.b,AT=new w_(32768);for(var el=0;el<32768;++el){var gy=(el&43690)>>1|(el&21845)<<1;gy=(gy&52428)>>2|(gy&13107)<<2,gy=(gy&61680)>>4|(gy&3855)<<4,AT[el]=((gy&65280)>>8|(gy&255)<<8)>>1}var t3=(function(n,e,t){for(var i=n.length,r=0,o=new w_(e);r<i;++r)n[r]&&++o[n[r]-1];var s=new w_(e);for(r=1;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var a;if(t){a=new w_(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var h=r<<4|n[r],m=e-n[r],v=s[n[r]-1]++<<m,x=v|(1<<m)-1;v<=x;++v)a[AT[v]>>c]=h}else for(a=new w_(i),r=0;r<i;++r)n[r]&&(a[r]=AT[s[n[r]-1]++]>>15-n[r]);return a}),G4=new mf(288);for(var el=0;el<144;++el)G4[el]=8;for(var el=144;el<256;++el)G4[el]=9;for(var el=256;el<280;++el)G4[el]=7;for(var el=280;el<288;++el)G4[el]=8;var D$=new mf(32);for(var el=0;el<32;++el)D$[el]=5;var Gae=t3(G4,9,1),Qae=t3(D$,5,1),dB=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},tm=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},fB=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Wae=function(n){return(n+7)/8|0},qae=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new mf(n.subarray(e,t))},Yae=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],hf=function(n,e,t){var i=new Error(e||Yae[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,hf),!t)throw i;return i},ZR=function(n,e,t,i){var r=n.length,o=0;if(!r||e.f&&!e.l)return t||new mf(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new mf(r*3));var h=function(Ve){var mt=t.length;if(Ve>mt){var pt=new mf(Math.max(mt*2,Ve));pt.set(t),t=pt}},m=e.f||0,v=e.p||0,x=e.b||0,E=e.l,R=e.d,P=e.m,z=e.n,Q=r*8;do{if(!E){m=tm(n,v,1);var Y=tm(n,v+1,3);if(v+=3,Y)if(Y==1)E=Gae,R=Qae,P=9,z=5;else if(Y==2){var $=tm(n,v,31)+257,G=tm(n,v+10,15)+4,oe=$+tm(n,v+5,31)+1;v+=14;for(var ue=new mf(oe),xe=new mf(19),ge=0;ge<G;++ge)xe[zae[ge]]=tm(n,v+ge*3,7);v+=G*3;for(var Ie=dB(xe),Me=(1<<Ie)-1,ke=t3(xe,Ie,1),ge=0;ge<oe;){var je=ke[tm(n,v,Me)];v+=je&15;var H=je>>4;if(H<16)ue[ge++]=H;else{var Be=0,Ye=0;for(H==16?(Ye=3+tm(n,v,3),v+=2,Be=ue[ge-1]):H==17?(Ye=3+tm(n,v,7),v+=3):H==18&&(Ye=11+tm(n,v,127),v+=7);Ye--;)ue[ge++]=Be}}var At=ue.subarray(0,$),yt=ue.subarray($);P=dB(At),z=dB(yt),E=t3(At,P,1),R=t3(yt,z,1)}else hf(1);else{var H=Wae(v)+4,Z=n[H-4]|n[H-3]<<8,J=H+Z;if(J>r){c&&hf(0);break}a&&h(x+Z),t.set(n.subarray(H,J),x),e.b=x+=Z,e.p=v=J*8,e.f=m;continue}if(v>Q){c&&hf(0);break}}a&&h(x+131072);for(var Le=(1<<P)-1,De=(1<<z)-1,Ge=v;;Ge=v){var Be=E[fB(n,v)&Le],Te=Be>>4;if(v+=Be&15,v>Q){c&&hf(0);break}if(Be||hf(2),Te<256)t[x++]=Te;else if(Te==256){Ge=v,E=null;break}else{var xt=Te-254;if(Te>264){var ge=Te-257,st=O$[ge];xt=tm(n,v,(1<<st)-1)+R$[ge],v+=st}var Tt=R[fB(n,v)&De],Lt=Tt>>4;Tt||hf(3),v+=Tt&15;var yt=Nae[Lt];if(Lt>3){var st=I$[Lt];yt+=fB(n,v)&(1<<st)-1,v+=st}if(v>Q){c&&hf(0);break}a&&h(x+131072);var Ue=x+xt;if(x<yt){var Oe=o-yt,Ee=Math.min(yt,Ue);for(Oe+x<0&&hf(3);x<Ee;++x)t[x]=i[Oe+x]}for(;x<Ue;++x)t[x]=t[x-yt]}}e.l=E,e.p=Ge,e.b=x,e.f=m,E&&(m=1,e.m=P,e.d=R,e.n=z)}while(!m);return x!=t.length&&s?qae(t,0,x):t.subarray(0,x)},Vae=new mf(0),$ae=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&hf(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},Hae=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Zae=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&hf(6,"invalid zlib data"),(n[1]>>5&1)==1&&hf(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Xae(n,e){return ZR(n,{i:2},e,e)}function Jae(n,e){var t=$ae(n);return t+8>n.length&&hf(6,"invalid gzip data"),ZR(n.subarray(t,-8),{i:2},new mf(Hae(n)),e)}function ele(n,e){return ZR(n.subarray(Zae(n),-4),{i:2},e,e)}function tle(n,e){return n[0]==31&&n[1]==139&&n[2]==8?Jae(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Xae(n,e):ele(n,e)}var nle=typeof TextDecoder<"u"&&new TextDecoder,ile=0;try{nle.decode(Vae,{stream:!0}),ile=1}catch{}var rle=Object.defineProperty,n3=Math.pow,Aa=(n,e)=>rle(n,"name",{value:e,configurable:!0}),Vc=(n,e,t)=>new Promise((i,r)=>{var o=c=>{try{a(t.next(c))}catch(h){r(h)}},s=c=>{try{a(t.throw(c))}catch(h){r(h)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});Aa((n,e)=>{let t=!1,i="",r=L.GridLayer.extend({createTile:Aa((o,s)=>{let a=document.createElement("img"),c=new AbortController,h=c.signal;return a.cancel=()=>{c.abort()},t||(n.getHeader().then(m=>{m.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):m.tileType===2?i="image/png":m.tileType===3?i="image/jpeg":m.tileType===4?i="image/webp":m.tileType===5&&(i="image/avif")}),t=!0),n.getZxy(o.z,o.x,o.y,h).then(m=>{if(m){let v=new Blob([m.data],{type:i}),x=window.URL.createObjectURL(v);a.src=x,a.cancel=void 0,s(void 0,a)}}).catch(m=>{if(m.name!=="AbortError")throw m}),a},"createTile"),_removeTile:Aa(function(o){let s=this._tiles[o];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))},"_removeTile")});return new r(e)},"leafletRasterLayer");var ole=Aa(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let i=new AbortController;return n(e,i).then(r=>t(void 0,r.data,r.cacheControl||"",r.expires||""),r=>t(r)).catch(r=>t(r)),{cancel:Aa(()=>i.abort(),"cancel")}},"v3compat"),P$=class{constructor(e){this.tilev4=Aa((t,i)=>Vc(this,null,function*(){if(t.type==="json"){let E=t.url.substr(10),R=this.tiles.get(E);if(R||(R=new dT(E),this.tiles.set(E,R)),this.metadata)return{data:yield R.getTileJson(t.url)};let P=yield R.getHeader();return(P.minLon>=P.maxLon||P.minLat>=P.maxLat)&&console.error(`Bounds of PMTiles archive ${P.minLon},${P.minLat},${P.maxLon},${P.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:P.minZoom,maxzoom:P.maxZoom,bounds:[P.minLon,P.minLat,P.maxLon,P.maxLat]}}}let r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=t.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");let s=o[1],a=this.tiles.get(s);a||(a=new dT(s),this.tiles.set(s,a));let c=o[2],h=o[3],m=o[4],v=yield a.getHeader(),x=yield a?.getZxy(+c,+h,+m,i.signal);if(x)return{data:new Uint8Array(x.data),cacheControl:x.cacheControl,expires:x.expires};if(v.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=ole(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};Aa(P$,"Protocol");var sle=P$;function K$(n,e){return(e>>>0)*4294967296+(n>>>0)}Aa(K$,"toNum");function U$(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return K$(n,r);throw new Error("Expected varint not more than 10 bytes")}Aa(U$,"readVarintRemainder");function A_(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,U$(i,n))}Aa(A_,"readVarint");function XR(n,e,t,i){if(i===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let r=e[0];e[0]=e[1],e[1]=r}}Aa(XR,"rotate");function L$(n,e){let t=n3(2,n),i=e,r=e,o=e,s=[0,0],a=1;for(;a<t;)i=1&o/2,r=1&(o^i),XR(a,s,i,r),s[0]+=a*i,s[1]+=a*r,o=o/4,a*=2;return[n,s[0],s[1]]}Aa(L$,"idOnLevel");var ale=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function z$(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>n3(2,n)-1||t>n3(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let i=ale[n],r=n3(2,n),o=0,s=0,a=0,c=[e,t],h=r/2;for(;h>0;)o=(c[0]&h)>0?1:0,s=(c[1]&h)>0?1:0,a+=h*h*(3*o^s),XR(h,c,o,s),h=h/2;return i+a}Aa(z$,"zxyToTileId");function lle(n){let e=0;for(let t=0;t<27;t++){let i=(1<<t)*(1<<t);if(e+i>n)return L$(t,n-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Aa(lle,"tileIdToZxy");var ule=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(ule||{});function oE(n,e){return Vc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return tle(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw new Error("Compression method not supported")})}Aa(oE,"defaultDecompress");var cle=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(cle||{});function F$(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}Aa(F$,"tileTypeExt");var Ale=127;function j$(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,o=e-n[r].tileId;if(o>0)t=r+1;else if(o<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}Aa(j$,"findTile");var hle=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Vc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};Aa(hle,"FileSource");var N$=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let i="";"navigator"in globalThis&&(i=globalThis.navigator.userAgent||"");let r=i.indexOf("Windows")>-1,o=/Chrome|Chromium|Edg|OPR|Brave/.test(i);this.chromeWindowsNoCache=!1,r&&o&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return Vc(this,null,function*(){let o,s;i?s=i:(o=new AbortController,s=o.signal);let a=new Headers(this.customHeaders);a.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let h=yield fetch(this.url,{signal:s,cache:c,headers:a});if(e===0&&h.status===416){let x=h.headers.get("Content-Range");if(!x||!x.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let E=+x.substr(8);h=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${E-1}`}})}let m=h.headers.get("Etag");if(m!=null&&m.startsWith("W/")&&(m=null),h.status===416||r&&m&&m!==r)throw this.mustReload=!0,new hT(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(h.status>=300)throw new Error(`Bad response code: ${h.status}`);let v=h.headers.get("Content-Length");if(h.status===200&&(!v||+v>t))throw o&&o.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield h.arrayBuffer(),etag:m||void 0,cacheControl:h.headers.get("Cache-Control")||void 0,expires:h.headers.get("Expires")||void 0}})}};Aa(N$,"FetchSource");var dle=N$;function tp(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*n3(2,32)+i}Aa(tp,"getUint64");function G$(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:tp(t,8),rootDirectoryLength:tp(t,16),jsonMetadataOffset:tp(t,24),jsonMetadataLength:tp(t,32),leafDirectoryOffset:tp(t,40),leafDirectoryLength:tp(t,48),tileDataOffset:tp(t,56),tileDataLength:tp(t,64),numAddressedTiles:tp(t,72),numTileEntries:tp(t,80),numTileContents:tp(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}Aa(G$,"bytesToHeader");function JR(n){let e={buf:new Uint8Array(n),pos:0},t=A_(e),i=[],r=0;for(let o=0;o<t;o++){let s=A_(e);i.push({tileId:r+s,offset:0,length:0,runLength:1}),r+=s}for(let o=0;o<t;o++)i[o].runLength=A_(e);for(let o=0;o<t;o++)i[o].length=A_(e);for(let o=0;o<t;o++){let s=A_(e);s===0&&o>0?i[o].offset=i[o-1].offset+i[o-1].length:i[o].offset=s-1}return i}Aa(JR,"deserializeIndex");var Q$=class extends Error{};Aa(Q$,"EtagMismatch");var hT=Q$;function eD(n,e){return Vc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,Ale),r=G$(i,t.etag),o=t.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),s=`${n.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,a=JR(yield e(o,r.internalCompression));return[r,[s,a.length,a]]})}Aa(eD,"getHeaderAndRoot");function tD(n,e,t,i,r){return Vc(this,null,function*(){let o=yield n.getBytes(t,i,void 0,r.etag),s=yield e(o.data,r.internalCompression),a=JR(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}Aa(tD,"getDirectory");var fle=class{constructor(e=100,t=!0,i=oE){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Vc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,i.data;let r=yield eD(e,this.decompress);return r[1]&&this.cache.set(r[1][0],{lastUsed:this.counter++,data:r[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:r[0]}),this.prune(),r[0]})}getDirectory(e,t,i,r){return Vc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,s.data;let a=yield tD(e,this.decompress,t,i,r);return this.cache.set(o,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Vc(this,null,function*(){this.cache.delete(e.getKey())})}};Aa(fle,"ResolvedValueCache");var W$=class{constructor(e=100,t=!0,i=oE){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Vc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((o,s)=>{eD(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),o(a[0]),this.prune()}).catch(a=>{s(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return Vc(this,null,function*(){let o=`${e.getKey()}|${r.etag||""}|${t}|${i}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,yield s.data;let a=new Promise((c,h)=>{tD(e,this.decompress,t,i,r).then(m=>{c(m),this.prune()}).catch(m=>{h(m)})});return this.cache.set(o,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Vc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,o)=>{this.getHeader(e).then(s=>{r(),this.invalidations.delete(t)}).catch(s=>{o(s)})});this.invalidations.set(t,i)})}};Aa(W$,"SharedPromiseCache");var ple=W$,q$=class{constructor(e,t,i){typeof e=="string"?this.source=new dle(e):this.source=e,i?this.decompress=i:this.decompress=oE,t?this.cache=t:this.cache=new ple}getHeader(){return Vc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return Vc(this,null,function*(){let o=z$(e,t,i),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let a=s.rootDirectoryOffset,c=s.rootDirectoryLength;for(let h=0;h<=3;h++){let m=yield this.cache.getDirectory(this.source,a,c,s),v=j$(m,o);if(v){if(v.runLength>0){let x=yield this.source.getBytes(s.tileDataOffset+v.offset,v.length,r,s.etag);return{data:yield this.decompress(x.data,s.tileCompression),cacheControl:x.cacheControl,expires:x.expires}}a=s.leafDirectoryOffset+v.offset,c=v.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return Vc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(o){if(o instanceof hT)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw o}})}getMetadataAttempt(){return Vc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return Vc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof hT)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Vc(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=F$(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};Aa(q$,"PMTiles");var dT=q$,mle=8,gle={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},yle={"*":{type:"source"}},vle=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],ble={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},Cle={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},_le={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},xle={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Mle={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},wle={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Sle={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Ele=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Ble={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ole={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ile={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kle={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tle={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Rle={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Dle={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ple={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kle={type:"array",value:"*"},Ule={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Lle={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},zle={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Fle={type:"array",value:"*",minimum:1},jle={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Nle={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Gle={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Qle={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Wle=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],qle={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Yle={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Vle={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},$le={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Hle={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Zle={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xle={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Jle={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},eue={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},tue={"*":{type:"string"}},ns={$version:mle,$root:gle,sources:yle,source:vle,source_vector:ble,source_raster:Cle,source_raster_dem:_le,source_geojson:xle,source_video:Mle,source_image:wle,layer:Sle,layout:Ele,layout_background:Ble,layout_fill:Ole,layout_circle:Ile,layout_heatmap:kle,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Tle,layout_symbol:Rle,layout_raster:Dle,layout_hillshade:Ple,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Kle,filter_operator:Ule,geometry_type:Lle,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:zle,expression:Fle,light:jle,sky:Nle,terrain:Gle,projection:Qle,paint:Wle,paint_fill:qle,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Yle,paint_circle:Vle,paint_heatmap:$le,paint_symbol:Hle,paint_raster:Zle,paint_hillshade:Xle,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Jle,transition:eue,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:tue};const nue=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function iue(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return nue.forEach(i=>{i in e&&(t[i]=e[i])}),t}function rue(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=iue(n[t],e[n[t].ref]));return n}function Rs(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Rs(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(!Rs(n[i],e[i]))return!1;return!0}return n===e}function ip(n,e){n.push(e)}function Y$(n,e,t){ip(t,{command:"addSource",args:[n,e[n]]})}function V$(n,e,t){ip(e,{command:"removeSource",args:[n]}),t[n]=!0}function oue(n,e,t,i){V$(n,t,i),Y$(n,e,t)}function sue(n,e,t){let i;for(i in n[t])if(Object.prototype.hasOwnProperty.call(n[t],i)&&i!=="data"&&!Rs(n[t][i],e[t][i]))return!1;for(i in e[t])if(Object.prototype.hasOwnProperty.call(e[t],i)&&i!=="data"&&!Rs(n[t][i],e[t][i]))return!1;return!0}function aue(n,e,t,i){n=n||{},e=e||{};let r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Object.prototype.hasOwnProperty.call(e,r)||V$(r,t,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(n,r)?Rs(n[r],e[r])||(n[r].type==="geojson"&&e[r].type==="geojson"&&sue(n,e,r)?ip(t,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):oue(r,e,t,i)):Y$(r,e,t))}function K5(n,e,t,i,r,o){n=n||{},e=e||{};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(Rs(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]}));for(const s in e)!Object.prototype.hasOwnProperty.call(e,s)||Object.prototype.hasOwnProperty.call(n,s)||Rs(n[s],e[s])||t.push({command:o,args:[i,s,e[s],r]})}function IL(n){return n.id}function kL(n,e){return n[e.id]=e,n}function lue(n,e,t){n=n||[],e=e||[];const i=n.map(IL),r=e.map(IL),o=n.reduce(kL,{}),s=e.reduce(kL,{}),a=i.slice(),c=Object.create(null);let h,m,v,x,E;for(let R=0,P=0;R<i.length;R++)h=i[R],Object.prototype.hasOwnProperty.call(s,h)?P++:(ip(t,{command:"removeLayer",args:[h]}),a.splice(a.indexOf(h,P),1));for(let R=0,P=0;R<r.length;R++)h=r[r.length-1-R],a[a.length-1-R]!==h&&(Object.prototype.hasOwnProperty.call(o,h)?(ip(t,{command:"removeLayer",args:[h]}),a.splice(a.lastIndexOf(h,a.length-P),1)):P++,x=a[a.length-R],ip(t,{command:"addLayer",args:[s[h],x]}),a.splice(a.length-R,0,h),c[h]=!0);for(let R=0;R<r.length;R++)if(h=r[R],m=o[h],v=s[h],!(c[h]||Rs(m,v))){if(!Rs(m.source,v.source)||!Rs(m["source-layer"],v["source-layer"])||!Rs(m.type,v.type)){ip(t,{command:"removeLayer",args:[h]}),x=a[a.lastIndexOf(h)+1],ip(t,{command:"addLayer",args:[v,x]});continue}K5(m.layout,v.layout,t,h,null,"setLayoutProperty"),K5(m.paint,v.paint,t,h,null,"setPaintProperty"),Rs(m.filter,v.filter)||ip(t,{command:"setFilter",args:[h,v.filter]}),(!Rs(m.minzoom,v.minzoom)||!Rs(m.maxzoom,v.maxzoom))&&ip(t,{command:"setLayerZoomRange",args:[h,v.minzoom,v.maxzoom]});for(E in m)Object.prototype.hasOwnProperty.call(m,E)&&(E==="layout"||E==="paint"||E==="filter"||E==="metadata"||E==="minzoom"||E==="maxzoom"||(E.indexOf("paint.")===0?K5(m[E],v[E],t,h,E.slice(6),"setPaintProperty"):Rs(m[E],v[E])||ip(t,{command:"setLayerProperty",args:[h,E,v[E]]})));for(E in v)!Object.prototype.hasOwnProperty.call(v,E)||Object.prototype.hasOwnProperty.call(m,E)||E==="layout"||E==="paint"||E==="filter"||E==="metadata"||E==="minzoom"||E==="maxzoom"||(E.indexOf("paint.")===0?K5(m[E],v[E],t,h,E.slice(6),"setPaintProperty"):Rs(m[E],v[E])||ip(t,{command:"setLayerProperty",args:[h,E,v[E]]}))}}function uue(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!Rs(n.version,e.version))return[{command:"setStyle",args:[e]}];Rs(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),Rs(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),Rs(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Rs(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),Rs(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),Rs(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),Rs(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),Rs(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),Rs(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),Rs(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),Rs(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),Rs(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),Rs(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),Rs(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const i={},r=[];aue(n.sources,e.sources,r,i);const o=[];n.layers&&n.layers.forEach(s=>{"source"in s&&i[s.source]?t.push({command:"removeLayer",args:[s.id]}):o.push(s)}),t=t.concat(r),lue(o,e.layers,t)}catch(i){console.warn("Unable to compute style diff:",i),t=[{command:"setStyle",args:[e]}]}return t}class Wn{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),t!=null&&t.__line__&&(this.line=t.__line__)}}function ox(n,...e){for(const t of e)for(const i in t)n[i]=t[i];return n}let Tg=class extends Error{constructor(e,t){super(t),this.message=t,this.key=e}},cue=class $${constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new $$(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const sE={kind:"null"},Xn={kind:"number"},vo={kind:"string"},no={kind:"boolean"},qg={kind:"color"},aE={kind:"projectionDefinition"},_b={kind:"object"},Xr={kind:"value"},Aue={kind:"error"},lE={kind:"collator"},uE={kind:"formatted"},cE={kind:"padding"},k3={kind:"colorArray"},AE={kind:"numberArray"},Q4={kind:"resolvedImage"},hE={kind:"variableAnchorOffsetCollection"};function gf(n,e){return{kind:"array",itemType:n,N:e}}function dl(n){if(n.kind==="array"){const e=dl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const hue=[sE,Xn,vo,no,qg,aE,uE,_b,gf(Xr),cE,AE,k3,Q4,hE];function T3(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!T3(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of hue)if(!T3(t,e))return null}}return`Expected ${dl(n)} but found ${dl(e)} instead.`}function nD(n,e){return e.some(t=>t.kind===n.kind)}function xb(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function yy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const H$=.96422,Z$=1,X$=.82521,J$=4/29,K_=6/29,eH=3*K_*K_,due=K_*K_*K_,fue=Math.PI/180,pue=180/Math.PI;function tH(n){return n=n%360,n<0&&(n+=360),n}function nH([n,e,t,i]){n=pB(n),e=pB(e),t=pB(t);let r,o;const s=mB((.2225045*n+.7168786*e+.0606169*t)/Z$);n===e&&e===t?r=o=s:(r=mB((.4360747*n+.3850649*e+.1430804*t)/H$),o=mB((.0139322*n+.0971045*e+.7141733*t)/X$));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function pB(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function mB(n){return n>due?Math.pow(n,1/3):n/eH+J$}function iH([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=Z$*yB(r),o=H$*yB(o),s=X$*yB(s),[gB(3.1338561*o-1.6168667*r-.4906146*s),gB(-.9787684*o+1.9161415*r+.033454*s),gB(.0719453*o-.2289914*r+1.4052427*s),i]}function gB(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function yB(n){return n>K_?n*n*n:eH*(n-J$)}function mue(n){const[e,t,i,r]=nH(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?tH(Math.atan2(i,t)*pue):NaN,o,e,r]}function gue([n,e,t,i]){return n=isNaN(n)?0:n*fue,iH([t,Math.cos(n)*e,Math.sin(n)*e,i])}function yue([n,e,t,i]){n=tH(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const vue=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function i3(n,e){return vue(n,e)?n[e]:void 0}function bue(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=i3(Cue,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[U5(n.slice(s,s+=o)),U5(n.slice(s,s+=o)),U5(n.slice(s,s+=o)),U5(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,h,m,v,x,E,R,P,z,Q]=o,Y=[h||" ",x||" ",P].join("");if(Y==="  "||Y==="  /"||Y===",,"||Y===",,,"){const H=[c,v,R].join(""),Z=H==="%%%"?100:H===""?255:0;if(Z){const J=[h_(+a/Z,0,1),h_(+m/Z,0,1),h_(+E/Z,0,1),z?TL(+z,Q):1];if(RL(J))return J}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,h,m,v,x]=i,E=[s||" ",c||" ",m].join("");if(E==="  "||E==="  /"||E===",,"||E===",,,"){const R=[+o,h_(+a,0,100),h_(+h,0,100),v?TL(+v,x):1];if(RL(R))return yue(R)}}}function U5(n){return parseInt(n.padEnd(2,n),16)/255}function TL(n,e){return h_(e?n/100:n,0,1)}function h_(n,e,t){return Math.min(Math.max(e,n),t)}function RL(n){return!n.some(Number.isNaN)}const Cue={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Vy(n,e,t){return n+t*(e-n)}function sx(n,e,t){return n.map((i,r)=>Vy(i,e[r],t))}function _ue(n){return n==="rgb"||n==="hcl"||n==="lab"}let ha=class d_{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof d_)return e;if(typeof e!="string")return;const t=bue(e);if(t)return new d_(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",mue(this.rgb))}get lab(){return this.overwriteGetter("lab",nH(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=sx(e.rgb,t.rgb,i);return new d_(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[h,m,v,x]=t.hcl;let E,R;if(!isNaN(o)&&!isNaN(h)){let H=h-o;h>o&&H>180?H-=360:h<o&&o-h>180&&(H+=360),E=o+i*H}else isNaN(o)?isNaN(h)?E=NaN:(E=h,(a===1||a===0)&&(R=m)):(E=o,(v===1||v===0)&&(R=s));const[P,z,Q,Y]=gue([E,R??Vy(s,m,i),Vy(a,v,i),Vy(c,x,i)]);return new d_(P,z,Q,Y,!1)}case"lab":{const[o,s,a,c]=iH(sx(e.lab,t.lab,i));return new d_(o,s,a,c,!1)}}}};ha.black=new ha(0,0,0,1);ha.white=new ha(1,1,1,1);ha.transparent=new ha(0,0,0,0);ha.red=new ha(1,0,0,1);let iD=class{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const xue=["bottom","center","top"];let fT=class{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}},Bx=class JM{constructor(e){this.sections=e}static fromString(e){return new JM([new fT(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof JM?e:JM.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}},l0=class k2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof k2)return e;if(typeof e=="number")return new k2([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new k2(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new k2(sx(e.values,t.values,i))}},u0=class T2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof T2)return e;if(typeof e=="number")return new T2([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new T2(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new T2(sx(e.values,t.values,i))}},pp=class R2{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof R2)return e;if(typeof e=="string"){const i=ha.parse(e);return i?new R2([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=ha.parse(i);if(!r)return;t.push(r)}return new R2(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push(ha.interpolate(e.values[s],t.values[s],i,r));return new R2(o)}},El=class extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}};const Mue=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);let uv=class ew{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ew)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!Mue.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new ew(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new El(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new El(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,h]=r[a+1],[m,v]=o[a+1];s.push([Vy(c,m,i),Vy(h,v,i)])}return new ew(s)}},$b=class rH{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new rH({name:e,available:!1}):null}},Ox=class f_{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new f_(e,t,i)}static parse(e){if(e instanceof f_)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new f_(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new f_(e.from,e.to,e.transition);if(typeof e=="string")return new f_(e,e,1)}};function oH(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function R3(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Ox||n instanceof ha||n instanceof iD||n instanceof Bx||n instanceof l0||n instanceof u0||n instanceof pp||n instanceof uv||n instanceof $b)return!0;if(Array.isArray(n)){for(const e of n)if(!R3(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!R3(n[e]))return!1;return!0}else return!1}function Zu(n){if(n===null)return sE;if(typeof n=="string")return vo;if(typeof n=="boolean")return no;if(typeof n=="number")return Xn;if(n instanceof ha)return qg;if(n instanceof Ox)return aE;if(n instanceof iD)return lE;if(n instanceof Bx)return uE;if(n instanceof l0)return cE;if(n instanceof u0)return AE;if(n instanceof pp)return k3;if(n instanceof uv)return hE;if(n instanceof $b)return Q4;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Zu(i);if(!t)t=r;else{if(t===r)continue;t=Xr;break}}return gf(t||Xr,e)}else return _b}function r3(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof ha||n instanceof Ox||n instanceof Bx||n instanceof l0||n instanceof u0||n instanceof pp||n instanceof uv||n instanceof $b?n.toString():JSON.stringify(n)}let Kw=class sH{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!R3(e[1]))return t.error("invalid value");const i=e[1];let r=Zu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new sH(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const L5={string:vo,number:Xn,boolean:no,object:_b};let e1=class aH{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in L5)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=L5[h],i++}else a=Xr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=gf(a,c)}else{if(!L5[o])throw new Error(`Types doesn't contain name = ${o}`);r=L5[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,Xr);if(!a)return null;s.push(a)}return new aH(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(T3(this.type,Zu(i))){if(t===this.args.length-1)throw new El(`Expected value to be of type ${dl(this.type)}, but found ${dl(Zu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const DL={"to-boolean":no,"to-color":qg,"to-number":Xn,"to-string":vo};let S_=class lH{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!DL[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=DL[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,Xr);if(!a)return null;o.push(a)}return new lH(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof ha)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=oH(t[0],t[1],t[2],t[3]),!i))return new ha(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new El(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=l0.parse(t);if(r)return r}throw new El(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=u0.parse(t);if(r)return r}throw new El(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=pp.parse(t);if(r)return r}throw new El(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=uv.parse(t);if(r)return r}throw new El(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new El(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Bx.fromString(r3(this.args[0].evaluate(e)));case"resolvedImage":return $b.fromString(r3(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return r3(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const wue=["Unknown","Point","LineString","Polygon"];let uH=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?wue[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=ha.parse(e),this._parseColorCache.set(e,t)),t}},cH=class AH{constructor(e,t,i=[],r,o=new cue,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new e1(o,[r]):s==="coerce"?new S_(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof Kw)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new uH;try{s=new Kw(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new AH(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new Tg(i,e))}checkSubtype(e,t){const i=T3(e,t);return i&&this.error(i),i}},hH=class dH{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new dH(i,r):null}outputDefined(){return this.result.outputDefined()}},fH=class pH{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new pH(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},Sue=class mH{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Xn),r=t.parse(e[2],2,gf(t.expectedType||Xr));if(!i||!r)return null;const o=r.type;return new mH(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new El(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new El(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new El(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},Eue=class gH{constructor(e,t){this.type=no,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Xr),r=t.parse(e[2],2,Xr);return!i||!r?null:nD(i.type,[no,vo,Xn,sE,Xr])?new gH(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${dl(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!xb(t,["boolean","string","number","null"]))throw new El(`Expected first argument to be of type boolean, string, number or null, but found ${dl(Zu(t))} instead.`);if(!xb(i,["string","array"]))throw new El(`Expected second argument to be of type array or string, but found ${dl(Zu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},Bue=class pT{constructor(e,t,i){this.type=Xn,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Xr),r=t.parse(e[2],2,Xr);if(!i||!r)return null;if(!nD(i.type,[no,vo,Xn,sE,Xr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${dl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Xn);return o?new pT(i,r,o):null}else return new pT(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!xb(t,["boolean","string","number","null"]))throw new El(`Expected first argument to be of type boolean, string, number or null, but found ${dl(Zu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),xb(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(xb(i,["array"]))return i.indexOf(t,r);throw new El(`Expected second argument to be of type array or string, but found ${dl(Zu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},Oue=class yH{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let h=2;h<e.length-1;h+=2){let m=e[h];const v=e[h+1];Array.isArray(m)||(m=[m]);const x=t.concat(h);if(m.length===0)return x.error("Expected at least one branch label.");for(const R of m){if(typeof R!="number"&&typeof R!="string")return x.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return x.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof R=="number"&&Math.floor(R)!==R)return x.error("Numeric branch labels must be integer values.");if(!i)i=Zu(R);else if(x.checkSubtype(i,Zu(R)))return null;if(typeof o[String(R)]<"u")return x.error("Branch labels must be unique.");o[String(R)]=s.length}const E=t.parse(v,h,r);if(!E)return null;r=r||E.type,s.push(E)}const a=t.parse(e[1],1,Xr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new yH(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Zu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},Iue=class vH{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,no);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new vH(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},kue=class mT{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Xr),r=t.parse(e[2],2,Xn);if(!i||!r)return null;if(!nD(i.type,[gf(Xr),vo,Xr]))return t.error(`Expected first argument to be of type array or string, but found ${dl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Xn);return o?new mT(i.type,i,r,o):null}else return new mT(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),xb(t,["string"]))return[...t].slice(i,r).join("");if(xb(t,["array"]))return t.slice(i,r);throw new El(`Expected first argument to be of type array or string, but found ${dl(Zu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function dE(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new El("Input is not a number.");return 0}let bH=class CH{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,Xn);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],h=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const v=t.parse(c,m,o);if(!v)return null;o=o||v.type,r.push([a,v])}return new CH(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=dE(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function Tue(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vB,PL;function Rue(){if(PL)return vB;PL=1,vB=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},vB}var Due=Rue(),Pue=Tue(Due);let i1=class gT{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=bB(t,e.base,i,r);else if(e.name==="linear")o=bB(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new Pue(s[0],s[1],s[2],s[3]).solve(bB(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const h=r[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:h}}else if(r[0]==="cubic-bezier"){const h=r.slice(1);if(h.length!==4||h.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,Xn),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=k3?c=qg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<s.length;h+=2){const m=s[h],v=s[h+1],x=h+3,E=h+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);const R=t.parse(v,E,c);if(!R)return null;c=c||R.type,a.push([m,R])}return!yy(c,Xn)&&!yy(c,aE)&&!yy(c,qg)&&!yy(c,cE)&&!yy(c,AE)&&!yy(c,k3)&&!yy(c,hE)&&!yy(c,gf(Xn))?t.error(`Type ${dl(c)} is not interpolatable.`):new gT(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=dE(t,r),a=t[s],c=t[s+1],h=gT.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),v=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Vy(m,v,h);case"color":return ha.interpolate(m,v,h);case"padding":return l0.interpolate(m,v,h);case"colorArray":return pp.interpolate(m,v,h);case"numberArray":return u0.interpolate(m,v,h);case"variableAnchorOffsetCollection":return uv.interpolate(m,v,h);case"array":return sx(m,v,h);case"projectionDefinition":return Ox.interpolate(m,v,h)}case"interpolate-hcl":switch(this.type.kind){case"color":return ha.interpolate(m,v,h,"hcl");case"colorArray":return pp.interpolate(m,v,h,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ha.interpolate(m,v,h,"lab");case"colorArray":return pp.interpolate(m,v,h,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function bB(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}const Kue={color:ha.interpolate,number:Vy,padding:l0.interpolate,numberArray:u0.interpolate,colorArray:pp.interpolate,variableAnchorOffsetCollection:uv.interpolate,array:sx};let _H=class yT{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>T3(r,a.type))?new yT(Xr,o):new yT(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof $b&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function KL(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Uue(n,e,t){return e===t}function Lue(n,e,t){return e!==t}function zue(n,e,t){return e<t}function Fue(n,e,t){return e>t}function jue(n,e,t){return e<=t}function Nue(n,e,t){return e>=t}function xH(n,e,t,i){return i.compare(e,t)===0}function Gue(n,e,t,i){return!xH(n,e,t,i)}function Que(n,e,t,i){return i.compare(e,t)<0}function Wue(n,e,t,i){return i.compare(e,t)>0}function que(n,e,t,i){return i.compare(e,t)<=0}function Yue(n,e,t,i){return i.compare(e,t)>=0}function Ix(n,e,t){const i=n!=="=="&&n!=="!=";return class MH{constructor(o,s,a){this.type=no,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,Xr);if(!c)return null;if(!KL(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${dl(c.type)}'.`);let h=s.parse(o[2],2,Xr);if(!h)return null;if(!KL(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${dl(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error(`Cannot compare types '${dl(c.type)}' and '${dl(h.type)}'.`);i&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new e1(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new e1(c.type,[h])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,lE),!m)return null}return new MH(c,h,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Zu(s),h=Zu(a);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new El(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Zu(s),h=Zu(a);if(c.kind!=="string"||h.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const Vue=Ix("==",Uue,xH),$ue=Ix("!=",Lue,Gue),Hue=Ix("<",zue,Que),Zue=Ix(">",Fue,Wue),Xue=Ix("<=",jue,que),Jue=Ix(">=",Nue,Yue);let wH=class SH{constructor(e,t,i){this.type=lE,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,no);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,no);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,vo),!s)?null:new SH(r,o,s)}evaluate(e){return new iD(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},ece=class EH{constructor(e,t,i,r,o){this.type=vo,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Xn);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,vo),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,vo),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,Xn),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,Xn),!c)?null:new EH(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},tce=class BH{constructor(e){this.type=uE,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,Xn),!c))return null;let h=null;if(a["text-font"]&&(h=t.parse(a["text-font"],1,gf(vo)),!h))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,qg),!m))return null;let v=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!xue.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(v=t.parse(a["vertical-align"],1,vo),!v)return null}const x=r[r.length-1];x.scale=c,x.font=h,x.textColor=m,x.verticalAlign=v}else{const c=t.parse(e[s],1,Xr);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new BH(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Zu(r)===Q4?new fT("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new fT(r3(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new Bx(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},nce=class OH{constructor(e){this.type=Q4,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,vo);return i?new OH(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=$b.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}},ice=class IH{constructor(e){this.type=Xn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${dl(i.type)} instead.`):new IH(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new El(`Expected value to be of type string or array, but found ${dl(Zu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const Yg=8192;function rce(n,e){const t=oce(n[0]),i=ace(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Yg),Math.round(i*r*Yg)]}function rD(n,e){const t=Math.pow(2,e.z),i=(n[0]/Yg+e.x)/t,r=(n[1]/Yg+e.y)/t;return[sce(i),lce(r)]}function oce(n){return(180+n)/360}function sce(n){return n*360-180}function ace(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function lce(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function W4(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function D3(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function uce(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function cce(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function fE(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return fce(o,r)===0?!1:!!(UL(n,e,t,i)&&UL(t,i,n,e))}function Ace(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(fE(n,e,i[r],i[r+1]))return!0;return!1}function kx(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(cce(n,r[o],r[o+1]))return t;uce(n,r[o],r[o+1])&&(i=!i)}return i}function hce(n,e){for(const t of e)if(kx(n,t))return!0;return!1}function kH(n,e){for(const t of n)if(!kx(t,e))return!1;for(let t=0;t<n.length-1;++t)if(Ace(n[t],n[t+1],e))return!1;return!0}function dce(n,e){for(const t of e)if(kH(n,t))return!0;return!1}function fce(n,e){return n[0]*e[1]-n[1]*e[0]}function UL(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],h=i[1]-t[1],m=r*h-c*o,v=s*h-c*a;return m>0&&v<0||m<0&&v>0}function oD(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=rce(n[r][s],t);W4(e,a),o.push(a)}i.push(o)}return i}function TH(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=oD(n[r],e,t);i.push(o)}return i}function RH(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}W4(e,n)}function pce(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function LL(n,e,t,i){const r=Math.pow(2,i.z)*Yg,o=[i.x*Yg,i.y*Yg],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];RH(h,e,t,r),s.push(h)}return s}function zL(n,e,t,i){const r=Math.pow(2,i.z)*Yg,o=[i.x*Yg,i.y*Yg],s=[];for(const a of n){const c=[];for(const h of a){const m=[h.x+o[0],h.y+o[1]];W4(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){pce(e);for(const a of s)for(const c of a)RH(c,e,t,r)}return s}function mce(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=oD(e.coordinates,i,r),s=LL(n.geometry(),t,i,r);if(!D3(t,i))return!1;for(const a of s)if(!kx(a,o))return!1}if(e.type==="MultiPolygon"){const o=TH(e.coordinates,i,r),s=LL(n.geometry(),t,i,r);if(!D3(t,i))return!1;for(const a of s)if(!hce(a,o))return!1}return!0}function gce(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=oD(e.coordinates,i,r),s=zL(n.geometry(),t,i,r);if(!D3(t,i))return!1;for(const a of s)if(!kH(a,o))return!1}if(e.type==="MultiPolygon"){const o=TH(e.coordinates,i,r),s=zL(n.geometry(),t,i,r);if(!D3(t,i))return!1;for(const a of s)if(!dce(a,o))return!1}return!0}let sD=class tw{constructor(e,t){this.type=no,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(R3(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new tw(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new tw(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new tw(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return mce(e,this.geometries);if(e.geometryType()==="LineString")return gce(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},DH=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}};function yce(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=vce(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function vce(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const bce=6378.137,FL=1/298.257223563,jL=FL*(2-FL),NL=Math.PI/180;let aD=class{constructor(e){const t=NL*bce*1e3,i=Math.cos(e*NL),r=1/(1-jL*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-jL)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let h=e[c][0],m=e[c][1],v=this.wrap(e[c+1][0]-h)*this.kx,x=(e[c+1][1]-m)*this.ky,E=0;(v!==0||x!==0)&&(E=(this.wrap(t[0]-h)*this.kx*v+(t[1]-m)*this.ky*x)/(v*v+x*x),E>1?(h=e[c+1][0],m=e[c+1][1]):E>0&&(h+=v/this.kx*E,m+=x/this.ky*E)),v=this.wrap(t[0]-h)*this.kx,x=(t[1]-m)*this.ky;const R=v*v+x*x;R<i&&(i=R,r=h,o=m,s=c,a=E)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}};const vT=100,bT=50;function PH(n,e){return e[0]-n[0]}function Uw(n){return n[1]-n[0]+1}function u1(n,e){return n[1]>=n[0]&&n[1]<e}function CT(n,e){if(n[0]>n[1])return[null,null];const t=Uw(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function _T(n,e){if(!u1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)W4(t,n[i]);return t}function xT(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)W4(e,i);return e}function GL(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function lD(n,e,t){if(!GL(n)||!GL(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function hb(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function uD(n,e,t,i,r){const o=Math.min(hb(n,[t,i],r),hb(e,[t,i],r)),s=Math.min(hb(t,[n,e],r),hb(i,[n,e],r));return Math.min(o,s)}function Cce(n,e,t,i,r){if(!(u1(e,n.length)&&u1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],h=n[a+1];for(let m=i[0];m<i[1];++m){const v=t[m],x=t[m+1];if(fE(c,h,v,x))return 0;s=Math.min(s,uD(c,h,v,x,r))}}return s}function _ce(n,e,t,i,r){if(!(u1(e,n.length)&&u1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function xce(n,e,t){if(kx(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,hb(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function Mce(n,e,t,i){if(!u1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(kx(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let h=0,m=c.length,v=m-1;h<m;v=h++){const x=c[v],E=c[h];if(fE(s,a,x,E))return 0;r=Math.min(r,uD(s,a,x,E,i))}}return r}function QL(n,e){for(const t of n)for(const i of t)if(kx(i,e,!0))return!0;return!1}function wce(n,e,t,i=1/0){const r=xT(n),o=xT(e);if(i!==1/0&&lD(r,o,t)>=i)return i;if(D3(r,o)){if(QL(n,e))return 0}else if(QL(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,h=a.length,m=h-1;c<h;m=c++){const v=a[m],x=a[c];for(const E of e)for(let R=0,P=E.length,z=P-1;R<P;z=R++){const Q=E[z],Y=E[R];if(fE(v,x,Q,Y))return 0;s=Math.min(s,uD(v,x,Q,Y,t))}}return s}function WL(n,e,t,i,r,o){if(!o)return;const s=lD(_T(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function z5(n,e,t,i,r,o,s){if(!o||!s)return;const a=lD(_T(i,o),_T(r,s),t);a<e&&n.push([a,o,s])}function Lw(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new DH([[0,[0,n.length-1],[0,0]]],PH),a=xT(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const h=c[1],m=e?bT:vT;if(Uw(h)<=m){if(!u1(h,n.length))return NaN;if(e){const v=Mce(n,h,t,i);if(isNaN(v)||v===0)return v;o=Math.min(o,v)}else for(let v=h[0];v<=h[1];++v){const x=xce(n[v],t,i);if(o=Math.min(o,x),o===0)return 0}}else{const v=CT(h,e);WL(s,o,i,n,a,v[0]),WL(s,o,i,n,a,v[1])}}return o}function zw(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new DH([[0,[0,n.length-1],[0,t.length-1]]],PH);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const h=c[1],m=c[2],v=e?bT:vT,x=i?bT:vT;if(Uw(h)<=v&&Uw(m)<=x){if(!u1(h,n.length)&&u1(m,t.length))return NaN;let E;if(e&&i)E=Cce(n,h,t,m,r),s=Math.min(s,E);else if(e&&!i){const R=n.slice(h[0],h[1]+1);for(let P=m[0];P<=m[1];++P)if(E=hb(t[P],R,r),s=Math.min(s,E),s===0)return s}else if(!e&&i){const R=t.slice(m[0],m[1]+1);for(let P=h[0];P<=h[1];++P)if(E=hb(n[P],R,r),s=Math.min(s,E),s===0)return s}else E=_ce(n,h,t,m,r),s=Math.min(s,E)}else{const E=CT(h,e),R=CT(m,i);z5(a,s,r,n,t,E[0],R[0]),z5(a,s,r,n,t,E[0],R[1]),z5(a,s,r,n,t,E[1],R[0]),z5(a,s,r,n,t,E[1],R[1])}}return s}function Sce(n,e){const t=n.geometry(),i=t.flat().map(s=>rD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new aD(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,zw(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,zw(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Lw(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function Ece(n,e){const t=n.geometry(),i=t.flat().map(s=>rD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new aD(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,zw(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,zw(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Lw(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function Bce(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=yce(t).map(s=>s.map(a=>a.map(c=>rD([c.x,c.y],n.canonical)))),r=new aD(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,Lw([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,Lw(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,wce(a,s.coordinates,r,o));break}if(o===0)return o}return o}function CB(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}let cD=class nw{constructor(e,t){this.type=Xn,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(R3(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new nw(i,i.features.map(r=>CB(r.geometry)).flat());if(i.type==="Feature")return new nw(i,CB(i.geometry));if("type"in i&&"coordinates"in i)return new nw(i,CB(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Sce(e,this.geometries);if(e.geometryType()==="LineString")return Ece(e,this.geometries);if(e.geometryType()==="Polygon")return Bce(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},AD=class KH{constructor(e){this.type=Xr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new KH(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:i3(i,this.key)}eachChild(){}outputDefined(){return!1}};const hD={"==":Vue,"!=":$ue,">":Zue,"<":Hue,">=":Jue,"<=":Xue,array:e1,at:Sue,boolean:e1,case:Iue,coalesce:_H,collator:wH,format:tce,image:nce,in:Eue,"index-of":Bue,interpolate:i1,"interpolate-hcl":i1,"interpolate-lab":i1,length:ice,let:hH,literal:Kw,match:Oue,number:e1,"number-format":ece,object:e1,slice:kue,step:bH,string:e1,"to-boolean":S_,"to-color":S_,"to-number":S_,"to-string":S_,var:fH,within:sD,distance:cD,"global-state":AD};let Tx=class D2{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=D2.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,m]of a){c=new cH(t.registry,Fw,t.path,null,t.scope);const v=[];let x=!1;for(let E=1;E<e.length;E++){const R=e[E],P=Array.isArray(h)?h[E-1]:h.type,z=c.parse(R,1+v.length,P);if(!z){x=!0;break}v.push(z)}if(!x){if(Array.isArray(h)&&h.length!==v.length){c.error(`Expected ${h.length} arguments, but found ${v.length} instead.`);continue}for(let E=0;E<v.length;E++){const R=Array.isArray(h)?h[E]:h.type,P=v[E];c.concat(E+1).checkSubtype(R,P.type)}if(c.errors.length===0)return new D2(i,o,m,v)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([x])=>Ice(x)).join(" | "),v=[];for(let x=1;x<e.length;x++){const E=t.parse(e[x],1+v.length);if(!E)return null;v.push(dl(E.type))}t.error(`Expected arguments of type ${m}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){D2.definitions=t;for(const i in t)e[i]=D2}};function qL(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=oH(e,t,i,o);if(s)throw new El(s);return new ha(e/255,t/255,i/255,o,!1)}function YL(n,e){return n in e}function _B(n,e){const t=e[n];return typeof t>"u"?null:t}function Oce(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function Hv(n){return{type:n}}Tx.register(hD,{error:[Aue,[vo],(n,[e])=>{throw new El(e.evaluate(n))}],typeof:[vo,[Xr],(n,[e])=>dl(Zu(e.evaluate(n)))],"to-rgba":[gf(Xn,4),[qg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[qg,[Xn,Xn,Xn],qL],rgba:[qg,[Xn,Xn,Xn,Xn],qL],has:{type:no,overloads:[[[vo],(n,[e])=>YL(e.evaluate(n),n.properties())],[[vo,_b],(n,[e,t])=>YL(e.evaluate(n),t.evaluate(n))]]},get:{type:Xr,overloads:[[[vo],(n,[e])=>_B(e.evaluate(n),n.properties())],[[vo,_b],(n,[e,t])=>_B(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Xr,[vo],(n,[e])=>_B(e.evaluate(n),n.featureState||{})],properties:[_b,[],n=>n.properties()],"geometry-type":[vo,[],n=>n.geometryType()],id:[Xr,[],n=>n.id()],zoom:[Xn,[],n=>n.globals.zoom],"heatmap-density":[Xn,[],n=>n.globals.heatmapDensity||0],elevation:[Xn,[],n=>n.globals.elevation||0],"line-progress":[Xn,[],n=>n.globals.lineProgress||0],accumulated:[Xr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Xn,Hv(Xn),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[Xn,Hv(Xn),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:Xn,overloads:[[[Xn,Xn],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Xn],(n,[e])=>-e.evaluate(n)]]},"/":[Xn,[Xn,Xn],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Xn,[Xn,Xn],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Xn,[],()=>Math.LN2],pi:[Xn,[],()=>Math.PI],e:[Xn,[],()=>Math.E],"^":[Xn,[Xn,Xn],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Xn,[Xn],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Xn,[Xn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Xn,[Xn],(n,[e])=>Math.log(e.evaluate(n))],log2:[Xn,[Xn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Xn,[Xn],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Xn,[Xn],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Xn,[Xn],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Xn,[Xn],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Xn,[Xn],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Xn,[Xn],(n,[e])=>Math.atan(e.evaluate(n))],min:[Xn,Hv(Xn),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Xn,Hv(Xn),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Xn,[Xn],(n,[e])=>Math.abs(e.evaluate(n))],round:[Xn,[Xn],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Xn,[Xn],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Xn,[Xn],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[no,[vo,Xr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[no,[Xr],(n,[e])=>n.id()===e.value],"filter-type-==":[no,[vo],(n,[e])=>n.geometryType()===e.value],"filter-<":[no,[vo,Xr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[no,[Xr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[no,[vo,Xr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[no,[Xr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[no,[vo,Xr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[no,[Xr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[no,[vo,Xr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[no,[Xr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[no,[Xr],(n,[e])=>e.value in n.properties()],"filter-has-id":[no,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[no,[gf(vo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[no,[gf(Xr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[no,[vo,gf(Xr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[no,[vo,gf(Xr)],(n,[e,t])=>Oce(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:no,overloads:[[[no,no],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[Hv(no),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:no,overloads:[[[no,no],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[Hv(no),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[no,[no],(n,[e])=>!e.evaluate(n)],"is-supported-script":[no,[vo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[vo,[vo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[vo,[vo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[vo,Hv(Xr),(n,e)=>e.map(t=>r3(t.evaluate(n))).join("")],"resolved-locale":[vo,[lE],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Ice(n){return Array.isArray(n)?`(${n.map(dl).join(", ")})`:`(${dl(n.type)}...)`}function Fw(n){if(n instanceof fH)return Fw(n.boundExpression);if(n instanceof Tx&&n.name==="error")return!1;if(n instanceof wH)return!1;if(n instanceof sD)return!1;if(n instanceof cD)return!1;if(n instanceof AD)return!1;const e=n instanceof S_||n instanceof e1;let t=!0;return n.eachChild(i=>{e?t=t&&Fw(i):t=t&&i instanceof Kw}),t?pE(n)&&mE(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function pE(n){if(n instanceof Tx){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof sD||n instanceof cD)return!1;let e=!0;return n.eachChild(t=>{e&&!pE(t)&&(e=!1)}),e}function P3(n){if(n instanceof Tx&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!P3(t)&&(e=!1)}),e}function mE(n,e){if(n instanceof Tx&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!mE(i,e)&&(t=!1)}),t}function MT(n){return{result:"success",value:n}}function p_(n){return{result:"error",value:n}}function jw(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function UH(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function dD(n){return!!n.expression&&n.expression.interpolated}function Co(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function q4(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Zu(n)===_b}function kce(n){return n}function Tce(n){switch(n.type){case"color":return ha.parse;case"padding":return l0.parse;case"numberArray":return u0.parse;case"colorArray":return pp.parse;default:return null}}function Rce(n){switch(n){case"exponential":return LH;case"interval":return Pce;case"categorical":return Dce;case"identity":return Kce;default:throw new Error(`Unknown function type "${n}"`)}}function fD(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",i=t||n.property!==void 0,r=t||!i,o=n.type||(dD(e)?"exponential":"interval"),s=Tce(e);if(s&&(n=ox({},n),n.stops&&(n.stops=n.stops.map(m=>[m[0],s(m[1])])),n.default?n.default=s(n.default):n.default=s(e.default)),n.colorSpace&&!_ue(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const a=Rce(o);let c,h;if(o==="categorical"){c=Object.create(null);for(const m of n.stops)c[m[0]]=m[1];h=typeof n.stops[0][0]}if(t){const m={},v=[];for(let R=0;R<n.stops.length;R++){const P=n.stops[R],z=P[0].zoom;m[z]===void 0&&(m[z]={zoom:z,type:n.type,property:n.property,default:n.default,stops:[]},v.push(z)),m[z].stops.push([P[0].value,P[1]])}const x=[];for(const R of v)x.push([m[R].zoom,fD(m[R],e)]);const E={name:"linear"};return{kind:"composite",interpolationType:E,interpolationFactor:i1.interpolationFactor.bind(void 0,E),zoomStops:x.map(R=>R[0]),evaluate({zoom:R},P){return LH({stops:x,base:n.base},e,R).evaluate(R,P)}}}else if(r){const m=o==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:m,interpolationFactor:i1.interpolationFactor.bind(void 0,m),zoomStops:n.stops.map(v=>v[0]),evaluate:({zoom:v})=>a(n,e,v,c,h)}}else return{kind:"source",evaluate(m,v){const x=v&&v.properties?v.properties[n.property]:void 0;return x===void 0?Y4(n.default,e.default):a(n,e,x,c,h)}}}function Y4(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function Dce(n,e,t,i,r){const o=typeof t===r?i[t]:void 0;return Y4(o,n.default,e.default)}function Pce(n,e,t){if(Co(t)!=="number")return Y4(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const r=dE(n.stops.map(o=>o[0]),t);return n.stops[r][1]}function LH(n,e,t){const i=n.base!==void 0?n.base:1;if(Co(t)!=="number")return Y4(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const o=dE(n.stops.map(m=>m[0]),t),s=Uce(t,i,n.stops[o][0],n.stops[o+1][0]),a=n.stops[o][1],c=n.stops[o+1][1],h=Kue[e.type]||kce;return typeof a.evaluate=="function"?{evaluate(...m){const v=a.evaluate.apply(void 0,m),x=c.evaluate.apply(void 0,m);if(!(v===void 0||x===void 0))return h(v,x,s,n.colorSpace)}}:h(a,c,s,n.colorSpace)}function Kce(n,e,t){switch(e.type){case"color":t=ha.parse(t);break;case"formatted":t=Bx.fromString(t.toString());break;case"resolvedImage":t=$b.fromString(t.toString());break;case"padding":t=l0.parse(t);break;case"colorArray":t=pp.parse(t);break;case"numberArray":t=u0.parse(t);break;default:Co(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return Y4(t,n.default,e.default)}function Uce(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}let zH=class{constructor(e,t,i){this.expression=e,this._warningHistory={},this._evaluator=new uH,this._defaultValue=t?jce(t):null,this._enumValues=t&&t.type==="enum"?t.values:null,this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=ax(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._globalState&&(e=ax(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new El(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}};function V4(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in hD}function pD(n,e,t){const i=new cH(hD,Fw,[],e?Fce(e):void 0),r=i.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?MT(new zH(r,e,t)):p_(i.errors)}let wT=class{constructor(e,t,i){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!P3(t.expression),this.globalStateRefs=gD(t.expression),this._globalState=i}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=ax(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=ax(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}},ST=class{constructor(e,t,i,r,o){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!P3(t.expression),this.globalStateRefs=gD(t.expression),this.interpolationType=r,this._globalState=o}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._globalState&&(e=ax(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._globalState&&(e=ax(e,this._globalState)),this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?i1.interpolationFactor(this.interpolationType,e,t,i):0}};function Lce(n){return n._styleExpression!==void 0}function mD(n,e,t){const i=pD(n,e,t);if(i.result==="error")return i;const r=i.value.expression,o=pE(r);if(!o&&!jw(e))return p_([new Tg("","data expressions not supported")]);const s=mE(r,["zoom"]);if(!s&&!UH(e))return p_([new Tg("","zoom expressions not supported")]);const a=iw(r);if(!a&&!s)return p_([new Tg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof Tg)return p_([a]);if(a instanceof i1&&!dD(e))return p_([new Tg("",'"interpolate" expressions cannot be used with this property')]);if(!a)return MT(o?new wT("constant",i.value,t):new wT("source",i.value,t));const c=a instanceof i1?a.interpolation:void 0;return MT(o?new ST("camera",i.value,a.labels,c,t):new ST("composite",i.value,a.labels,c,t))}class gE{constructor(e,t){this._parameters=e,this._specification=t,ox(this,fD(this._parameters,this._specification))}static deserialize(e){return new gE(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function zce(n,e,t){if(q4(n))return new gE(n,e);if(V4(n)){const i=mD(n,e,t);if(i.result==="error")throw new Error(i.value.map(r=>`${r.key}: ${r.message}`).join(", "));return i.value}else{let i=n;return e.type==="color"&&typeof n=="string"?i=ha.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?i=l0.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?i=u0.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?i=pp.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?i=uv.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(i=Ox.parse(n)),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>i}}}function iw(n){let e=null;if(n instanceof hH)e=iw(n.result);else if(n instanceof _H){for(const t of n.args)if(e=iw(t),e)break}else(n instanceof bH||n instanceof i1)&&n.input instanceof Tx&&n.input.name==="zoom"&&(e=n);return e instanceof Tg||n.eachChild(t=>{const i=iw(t);i instanceof Tg?e=i:!e&&i?e=new Tg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Tg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function gD(n,e=new Set){return n instanceof AD&&e.add(n.key),n.eachChild(t=>{gD(t,e)}),e}function Fce(n){const e={color:qg,string:vo,number:Xn,enum:vo,boolean:no,formatted:uE,padding:cE,numberArray:AE,colorArray:k3,projectionDefinition:aE,resolvedImage:Q4,variableAnchorOffsetCollection:hE};return n.type==="array"?gf(e[n.value]||Xr,n.length):e[n.type]}function jce(n){if(n.type==="color"&&q4(n.default))return new ha(0,0,0,0);switch(n.type){case"color":return ha.parse(n.default)||null;case"padding":return l0.parse(n.default)||null;case"numberArray":return u0.parse(n.default)||null;case"colorArray":return pp.parse(n.default)||null;case"variableAnchorOffsetCollection":return uv.parse(n.default)||null;case"projectionDefinition":return Ox.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function ax(n,e){const{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a}=n??{};return{zoom:t,heatmapDensity:i,elevation:r,lineProgress:o,isSupportedScript:s,accumulated:a,globalState:e}}function yE(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!yE(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function o3(n,e={}){if(yE(n))return n;if(!n)return!0;const t=n,i=t[0];if(n.length<=1)return i!=="any";switch(i){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,r,o]=n;return Gce(r,o,i,e)}case"any":{const[,...r]=t;return["any",...r.map(s=>{const a={},c=o3(s,a),h=Nce(a);return h===!0?c:["case",h,c,!1]})]}case"all":{const[,...r]=t,o=r.map(s=>o3(s,e));return o.length>1?["all",...o]:o[0]}case"none":{const[,...r]=t;return["!",o3(["any",...r],{})]}case"in":{const[,r,...o]=t;return VL(r,o)}case"!in":{const[,r,...o]=t;return VL(r,o,!0)}case"has":return $L(t[1]);case"!has":return["!",$L(t[1])];default:return!0}}function Nce(n){const e=[];for(const t in n){const i=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",i],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function Gce(n,e,t,i){let r;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?r=["id"]:r=["get",n],i&&e!==null){const o=typeof e;i[n]=o}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",r,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",r,null]]:[t,r,e]}function VL(n,e,t=!1){if(e.length===0)return t;let i;n==="$type"?i=["geometry-type"]:n==="$id"?i=["id"]:i=["get",n];let r=!0;const o=typeof e[0];for(const s of e)if(typeof s!==o){r=!1;break}if(r&&(o==="string"||o==="number")){const s=e.sort().filter((a,c)=>c===0||e[c-1]!==a);return["match",i,s,!t,t]}return t?["all",...e.map(s=>["!=",i,s])]:["any",...e.map(s=>["==",i,s])]}function $L(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function K3(n){return typeof n=="object"?["literal",n]:n}function FH(n,e){let t=n.stops;if(!t)return Qce(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],jH(s[1])]:[s[0],K3(s[1])]),i?Wce(n,e,t):o?Yce(n,e,t):ET(n,e,t)}function Qce(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,K3(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function yD(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Wce(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],h=c[0].zoom;i[h]===void 0&&(i[h]={zoom:h,type:n.type,property:n.property,default:n.default},r[h]=[],o.push(h)),r[h].push([c[0].value,c[1]])}if(bD({},e)==="exponential"){const a=[yD(n),["linear"],["zoom"]];for(const c of o){const h=ET(i[c],e,r[c]);U_(a,c,h,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const h=ET(i[c],e,r[c]);U_(a,c,h,!0)}return vD(a),a}}function qce(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function HL(n,e){const t=K3(qce(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function ET(n,e,t){const i=bD(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(HL(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)U_(o,s[0],s[1],!1);return o.push(HL(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)U_(o,s[0],s[1],!0);return vD(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,K3(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[yD(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)U_(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,K3(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function Yce(n,e,t,i=["zoom"]){const r=bD(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[yD(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)U_(o,a[0],a[1],s);return vD(o),o}function vD(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function U_(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function bD(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function jH(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function Vce(n){for(let e=0;e<ns.layout.length;e++)for(const t in ns[ns.layout[e]])if(t===n)return ns[ns.layout[e]][t];for(let e=0;e<ns.paint.length;e++)for(const t in ns[ns.paint[e]])if(t===n)return ns[ns.paint[e]][t];return null}function $ce(n,e){for(const t in n.sources)e(n.sources[t])}function s3(n,e){for(const t of n.layers)e(t)}function CD(n,e,t){function i(r,o){const s=r[o];s&&Object.keys(s).forEach(a=>{t({path:[r.id,o,a],key:a,value:s[a],reference:Vce(a),set(c){s[a]=c}})})}s3(n,r=>{e.paint&&i(r,"paint"),e.layout&&i(r,"layout")})}function NH(n){const e=n.key,t=n.value;return t?[new Wn(e,t,"constants have been deprecated as of v8")]:[]}function Zl(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Kb(n){if(Array.isArray(n))return n.map(Kb);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Kb(n[t]);return e}return Zl(n)}function cp(n){const e=n.key,t=n.value,i=n.valueSpec||{},r=n.objectElementValidators||{},o=n.style,s=n.styleSpec,a=n.validateSpec;let c=[];const h=Co(t);if(h!=="object")return[new Wn(e,t,`object expected, ${h} found`)];for(const m in t){const v=m.split(".")[0],x=i3(i,v)||i["*"];let E;if(i3(r,v))E=r[v];else if(i3(i,v))E=a;else if(r["*"])E=r["*"];else if(i["*"])E=a;else{c.push(new Wn(e,t[m],`unknown property "${m}"`));continue}c=c.concat(E({key:(e&&`${e}.`)+m,value:t[m],valueSpec:x,style:o,styleSpec:s,object:t,objectKey:m,validateSpec:a},t))}for(const m in i)r[m]||i[m].required&&i[m].default===void 0&&t[m]===void 0&&c.push(new Wn(e,t,`missing required property "${m}"`));return c}function _D(n){const e=n.value,t=n.valueSpec,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.key,a=n.arrayElementValidator||i;if(Co(e)!=="array")return[new Wn(s,e,`array expected, ${Co(e)} found`)];if(t.length&&e.length!==t.length)return[new Wn(s,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Wn(s,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let c={type:t.value,values:t.values};o.$version<7&&(c.function=t.function),Co(t.value)==="object"&&(c=t.value);let h=[];for(let m=0;m<e.length;m++)h=h.concat(a({array:e,arrayIndex:m,value:e[m],valueSpec:c,validateSpec:n.validateSpec,style:r,styleSpec:o,key:`${s}[${m}]`}));return h}function vE(n){const e=n.key,t=n.value,i=n.valueSpec;let r=Co(t);return r==="number"&&t!==t&&(r="NaN"),r!=="number"?[new Wn(e,t,`number expected, ${r} found`)]:"minimum"in i&&t<i.minimum?[new Wn(e,t,`${t} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&t>i.maximum?[new Wn(e,t,`${t} is greater than the maximum value ${i.maximum}`)]:[]}function GH(n){const e=n.valueSpec,t=Zl(n.value.type);let i,r={},o,s;const a=t!=="categorical"&&n.value.property===void 0,c=!a,h=Co(n.value.stops)==="array"&&Co(n.value.stops[0])==="array"&&Co(n.value.stops[0][0])==="object",m=cp({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:v,default:R}});return t==="identity"&&a&&m.push(new Wn(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&m.push(new Wn(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!dD(n.valueSpec)&&m.push(new Wn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(c&&!jw(n.valueSpec)?m.push(new Wn(n.key,n.value,"property functions not supported")):a&&!UH(n.valueSpec)&&m.push(new Wn(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||h)&&n.value.property===void 0&&m.push(new Wn(n.key,n.value,'"property" property is required')),m;function v(P){if(t==="identity")return[new Wn(P.key,P.value,'identity function may not have a "stops" property')];let z=[];const Q=P.value;return z=z.concat(_D({key:P.key,value:Q,valueSpec:P.valueSpec,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec,arrayElementValidator:x})),Co(Q)==="array"&&Q.length===0&&z.push(new Wn(P.key,Q,"array must have at least one stop")),z}function x(P){let z=[];const Q=P.value,Y=P.key;if(Co(Q)!=="array")return[new Wn(Y,Q,`array expected, ${Co(Q)} found`)];if(Q.length!==2)return[new Wn(Y,Q,`array length 2 expected, length ${Q.length} found`)];if(h){if(Co(Q[0])!=="object")return[new Wn(Y,Q,`object expected, ${Co(Q[0])} found`)];if(Q[0].zoom===void 0)return[new Wn(Y,Q,"object stop key must have zoom")];if(Q[0].value===void 0)return[new Wn(Y,Q,"object stop key must have value")];if(s&&s>Zl(Q[0].zoom))return[new Wn(Y,Q[0].zoom,"stop zoom values must appear in ascending order")];Zl(Q[0].zoom)!==s&&(s=Zl(Q[0].zoom),o=void 0,r={}),z=z.concat(cp({key:`${Y}[0]`,value:Q[0],valueSpec:{zoom:{}},validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec,objectElementValidators:{zoom:vE,value:E}}))}else z=z.concat(E({key:`${Y}[0]`,value:Q[0],validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec},Q));return V4(Kb(Q[1]))?z.concat([new Wn(`${Y}[1]`,Q[1],"expressions are not allowed in function stops.")]):z.concat(P.validateSpec({key:`${Y}[1]`,value:Q[1],valueSpec:e,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec}))}function E(P,z){const Q=Co(P.value),Y=Zl(P.value),H=P.value!==null?P.value:z;if(!i)i=Q;else if(Q!==i)return[new Wn(P.key,H,`${Q} stop domain type must match previous stop domain type ${i}`)];if(Q!=="number"&&Q!=="string"&&Q!=="boolean")return[new Wn(P.key,H,"stop domain value must be a number, string, or boolean")];if(Q!=="number"&&t!=="categorical"){let Z=`number expected, ${Q} found`;return jw(e)&&t===void 0&&(Z+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Wn(P.key,H,Z)]}return t==="categorical"&&Q==="number"&&(!isFinite(Y)||Math.floor(Y)!==Y)?[new Wn(P.key,H,`integer expected, found ${Y}`)]:t!=="categorical"&&Q==="number"&&o!==void 0&&Y<o?[new Wn(P.key,H,"stop domain values must appear in ascending order")]:(o=Y,t==="categorical"&&Y in r?[new Wn(P.key,H,"stop domain values must be unique")]:(r[Y]=!0,[]))}function R(P){return P.validateSpec({key:P.key,value:P.value,valueSpec:e,validateSpec:P.validateSpec,style:P.style,styleSpec:P.styleSpec})}}function lx(n){const e=(n.expressionContext==="property"?mD:pD)(Kb(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new Wn(`${n.key}${i.key}`,n.value,i.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Wn(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!P3(t))return[new Wn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!P3(t))return[new Wn(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!mE(t,["zoom","feature-state"]))return[new Wn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!pE(t))return[new Wn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Hce(n){const e=n.value,t=n.key,i=Co(e);return i!=="boolean"?[new Wn(t,e,`boolean expected, ${i} found`)]:[]}function BT(n){const e=n.key,t=n.value,i=Co(t);return i!=="string"?[new Wn(e,t,`color expected, ${i} found`)]:ha.parse(String(t))?[]:[new Wn(e,t,`color expected, "${t}" found`)]}function U3(n){const e=n.key,t=n.value,i=n.valueSpec,r=[];return Array.isArray(i.values)?i.values.indexOf(Zl(t))===-1&&r.push(new Wn(e,t,`expected one of [${i.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(i.values).indexOf(Zl(t))===-1&&r.push(new Wn(e,t,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(t)} found`)),r}function xD(n){return yE(Kb(n.value))?lx(ox({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):QH(n)}function QH(n){const e=n.value,t=n.key;if(Co(e)!=="array")return[new Wn(t,e,`array expected, ${Co(e)} found`)];const i=n.styleSpec;let r,o=[];if(e.length<1)return[new Wn(t,e,"filter array must have at least 1 element")];switch(o=o.concat(U3({key:`${t}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),Zl(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Zl(e[1])==="$type"&&o.push(new Wn(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new Wn(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=Co(e[1]),r!=="string"&&o.push(new Wn(`${t}[1]`,e[1],`string expected, ${r} found`)));for(let s=2;s<e.length;s++)r=Co(e[s]),Zl(e[1])==="$type"?o=o.concat(U3({key:`${t}[${s}]`,value:e[s],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&o.push(new Wn(`${t}[${s}]`,e[s],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let s=1;s<e.length;s++)o=o.concat(QH({key:`${t}[${s}]`,value:e[s],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":r=Co(e[1]),e.length!==2?o.push(new Wn(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):r!=="string"&&o.push(new Wn(`${t}[1]`,e[1],`string expected, ${r} found`));break}return o}function WH(n,e){const t=n.key,i=n.validateSpec,r=n.style,o=n.styleSpec,s=n.value,a=n.objectKey,c=o[`${e}_${n.layerType}`];if(!c)return[];const h=a.match(/^(.*)-transition$/);if(e==="paint"&&h&&c[h[1]]&&c[h[1]].transition)return i({key:t,value:s,valueSpec:o.transition,style:r,styleSpec:o});const m=n.valueSpec||c[a];if(!m)return[new Wn(t,s,`unknown property "${a}"`)];let v;if(Co(s)==="string"&&jw(m)&&!m.tokens&&(v=/^{([^}]+)}$/.exec(s)))return[new Wn(t,s,`"${a}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(v[1])} }\`.`)];const x=[];return n.layerType==="symbol"&&a==="text-font"&&q4(Kb(s))&&Zl(s.type)==="identity"&&x.push(new Wn(t,s,'"text-font" does not support identity functions')),x.concat(i({key:n.key,value:s,valueSpec:m,style:r,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:a}))}function qH(n){return WH(n,"paint")}function YH(n){return WH(n,"layout")}function VH(n){let e=[];const t=n.value,i=n.key,r=n.style,o=n.styleSpec;if(Co(t)!=="object")return[new Wn(i,t,`object expected, ${Co(t)} found`)];!t.type&&!t.ref&&e.push(new Wn(i,t,'either "type" or "ref" is required'));let s=Zl(t.type);const a=Zl(t.ref);if(t.id){const c=Zl(t.id);for(let h=0;h<n.arrayIndex;h++){const m=r.layers[h];Zl(m.id)===c&&e.push(new Wn(i,t.id,`duplicate layer id "${t.id}", previously used at line ${m.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(h=>{h in t&&e.push(new Wn(i,t[h],`"${h}" is prohibited for ref layers`))});let c;r.layers.forEach(h=>{Zl(h.id)===a&&(c=h)}),c?c.ref?e.push(new Wn(i,t.ref,"ref cannot reference another ref layer")):s=Zl(c.type):e.push(new Wn(i,t.ref,`ref layer "${a}" not found`))}else if(s!=="background")if(!t.source)e.push(new Wn(i,t,'missing required property "source"'));else{const c=r.sources&&r.sources[t.source],h=c&&Zl(c.type);c?h==="vector"&&s==="raster"?e.push(new Wn(i,t.source,`layer "${t.id}" requires a raster source`)):h!=="raster-dem"&&s==="hillshade"?e.push(new Wn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):h!=="raster-dem"&&s==="color-relief"?e.push(new Wn(i,t.source,`layer "${t.id}" requires a raster-dem source`)):h==="raster"&&s!=="raster"?e.push(new Wn(i,t.source,`layer "${t.id}" requires a vector source`)):h==="vector"&&!t["source-layer"]?e.push(new Wn(i,t,`layer "${t.id}" must specify a "source-layer"`)):h==="raster-dem"&&s!=="hillshade"&&s!=="color-relief"?e.push(new Wn(i,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):s==="line"&&t.paint&&t.paint["line-gradient"]&&(h!=="geojson"||!c.lineMetrics)&&e.push(new Wn(i,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Wn(i,t.source,`source "${t.source}" not found`))}return e=e.concat(cp({key:i,value:t,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${i}.type`,value:t.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:xD,layout(c){return cp({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(h){return YH(ox({layerType:s},h))}}})},paint(c){return cp({layer:t,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*"(h){return qH(ox({layerType:s},h))}}})}}})),e}function Ub(n){const e=n.value,t=n.key,i=Co(e);return i!=="string"?[new Wn(t,e,`string expected, ${i} found`)]:[]}function Zce(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",i=n.value,r=n.styleSpec,o=r.source_raster_dem,s=n.style;let a=[];const c=Co(i);if(i===void 0)return a;if(c!=="object")return a.push(new Wn("source_raster_dem",i,`object expected, ${c} found`)),a;const m=Zl(i.encoding)==="custom",v=["redFactor","greenFactor","blueFactor","baseShift"],x=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const E in i)!m&&v.includes(E)?a.push(new Wn(E,i[E],`In "${t}": "${E}" is only valid when "encoding" is set to "custom". ${x} encoding found`)):o[E]?a=a.concat(n.validateSpec({key:E,value:i[E],valueSpec:o[E],validateSpec:n.validateSpec,style:s,styleSpec:r})):a.push(new Wn(E,i[E],`unknown property "${E}"`));return a}const ZL={promoteId:Xce};function $H(n){const e=n.value,t=n.key,i=n.styleSpec,r=n.style,o=n.validateSpec;if(!e.type)return[new Wn(t,e,'"type" is required')];const s=Zl(e.type);let a;switch(s){case"vector":case"raster":return a=cp({key:t,value:e,valueSpec:i[`source_${s.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:ZL,validateSpec:o}),a;case"raster-dem":return a=Zce({sourceName:t,value:e,style:n.style,styleSpec:i,validateSpec:o}),a;case"geojson":if(a=cp({key:t,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:ZL}),e.cluster)for(const c in e.clusterProperties){const[h,m]=e.clusterProperties[c],v=typeof h=="string"?[h,["accumulated"],["get",c]]:h;a.push(...lx({key:`${t}.${c}.map`,value:m,expressionContext:"cluster-map"})),a.push(...lx({key:`${t}.${c}.reduce`,value:v,expressionContext:"cluster-reduce"}))}return a;case"video":return cp({key:t,value:e,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return cp({key:t,value:e,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new Wn(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return U3({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Xce({key:n,value:e}){if(Co(e)==="string")return Ub({key:n,value:e});{const t=[];for(const i in e)t.push(...Ub({key:`${n}.${i}`,value:e[i]}));return t}}function HH(n){const e=n.value,t=n.styleSpec,i=t.light,r=n.style;let o=[];const s=Co(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new Wn("light",e,`object expected, ${s} found`)]),o;for(const a in e){const c=a.match(/^(.*)-transition$/);c&&i[c[1]]&&i[c[1]].transition?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:t.transition,validateSpec:n.validateSpec,style:r,styleSpec:t})):i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new Wn(a,e[a],`unknown property "${a}"`)])}return o}function ZH(n){const e=n.value,t=n.styleSpec,i=t.sky,r=n.style,o=Co(e);if(e===void 0)return[];if(o!=="object")return[new Wn("sky",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new Wn(a,e[a],`unknown property "${a}"`)]);return s}function XH(n){const e=n.value,t=n.styleSpec,i=t.terrain,r=n.style;let o=[];const s=Co(e);if(e===void 0)return o;if(s!=="object")return o=o.concat([new Wn("terrain",e,`object expected, ${s} found`)]),o;for(const a in e)i[a]?o=o.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],validateSpec:n.validateSpec,style:r,styleSpec:t})):o=o.concat([new Wn(a,e[a],`unknown property "${a}"`)]);return o}function Jce(n){return Ub(n).length===0?[]:lx(n)}function eAe(n){return Ub(n).length===0?[]:lx(n)}function tAe(n){const e=n.key,t=n.value;if(Co(t)==="array"){if(t.length<1||t.length>4)return[new Wn(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const r={type:"number"};let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return vE({key:e,value:t,valueSpec:{}})}function nAe(n){const e=n.key,t=n.value;if(Co(t)==="array"){const r={type:"number"};if(t.length<1)return[new Wn(e,t,"array length at least 1 expected, length 0 found")];let o=[];for(let s=0;s<t.length;s++)o=o.concat(n.validateSpec({key:`${e}[${s}]`,value:t[s],validateSpec:n.validateSpec,valueSpec:r}));return o}else return vE({key:e,value:t,valueSpec:{}})}function iAe(n){const e=n.key,t=n.value;if(Co(t)==="array"){if(t.length<1)return[new Wn(e,t,"array length at least 1 expected, length 0 found")];let r=[];for(let o=0;o<t.length;o++)r=r.concat(BT({key:`${e}[${o}]`,value:t[o]}));return r}else return BT({key:e,value:t})}function rAe(n){const e=n.key,t=n.value,i=Co(t),r=n.styleSpec;if(i!=="array"||t.length<1||t.length%2!==0)return[new Wn(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let s=0;s<t.length;s+=2)o=o.concat(U3({key:`${e}[${s}]`,value:t[s],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(_D({key:`${e}[${s+1}]`,value:t[s+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:r}));return o}function JH(n){let e=[];const t=n.value,i=n.key;if(Array.isArray(t)){const r=[],o=[];for(const s in t){t[s].id&&r.includes(t[s].id)&&e.push(new Wn(i,t,`all the sprites' ids must be unique, but ${t[s].id} is duplicated`)),r.push(t[s].id),t[s].url&&o.includes(t[s].url)&&e.push(new Wn(i,t,`all the sprites' URLs must be unique, but ${t[s].url} is duplicated`)),o.push(t[s].url);const a={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(cp({key:`${i}[${s}]`,value:t[s],valueSpec:a,validateSpec:n.validateSpec}))}return e}else return Ub({key:i,value:t})}function oAe(n){const e=n.value,t=n.styleSpec,i=t.projection,r=n.style,o=Co(e);if(e===void 0)return[];if(o!=="object")return[new Wn("projection",e,`object expected, ${o} found`)];let s=[];for(const a in e)i[a]?s=s.concat(n.validateSpec({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:t})):s=s.concat([new Wn(a,e[a],`unknown property "${a}"`)]);return s}function sAe(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const i=Co(t);return i==="array"&&!lAe(t)&&!aAe(t)?[new Wn(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(i)?[]:[new Wn(e,t,`projection expected, invalid type "${i}" found`)]}function aAe(n){return!!["interpolate","step","literal"].includes(n[0])}function lAe(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function uAe(n){return!!n&&n.constructor===Object}function eZ(n){return uAe(n.value)?[]:[new Wn(n.key,n.value,`object expected, ${Co(n.value)} found`)]}const XL={"*"(){return[]},array:_D,boolean:Hce,number:vE,color:BT,constants:NH,enum:U3,filter:xD,function:GH,layer:VH,object:cp,source:$H,light:HH,sky:ZH,terrain:XH,projection:oAe,projectionDefinition:sAe,string:Ub,formatted:Jce,resolvedImage:eAe,padding:tAe,numberArray:nAe,colorArray:iAe,variableAnchorOffsetCollection:rAe,sprite:JH,state:eZ};function Nw(n){const e=n.value,t=n.valueSpec,i=n.styleSpec;return n.validateSpec=Nw,t.expression&&q4(Zl(e))?GH(n):t.expression&&V4(Kb(e))?lx(n):t.type&&XL[t.type]?XL[t.type](n):cp(ox({},n,{valueSpec:t.type?i[t.type]:t}))}function tZ(n){const e=n.value,t=n.key,i=Ub(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new Wn(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new Wn(t,e,'"glyphs" url must include a "{range}" token'))),i}function kd(n,e=ns){let t=[];return t=t.concat(Nw({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:Nw,objectElementValidators:{glyphs:tZ,"*"(){return[]}}})),n.constants&&(t=t.concat(NH({key:"constants",value:n.constants}))),nZ(t)}kd.source=wm(Mm($H));kd.sprite=wm(Mm(JH));kd.glyphs=wm(Mm(tZ));kd.light=wm(Mm(HH));kd.sky=wm(Mm(ZH));kd.terrain=wm(Mm(XH));kd.state=wm(Mm(eZ));kd.layer=wm(Mm(VH));kd.filter=wm(Mm(xD));kd.paintProperty=wm(Mm(qH));kd.layoutProperty=wm(Mm(YH));function Mm(n){return function(e){return n(Object.assign({},e,{validateSpec:Nw}))}}function nZ(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function wm(n){return function(...e){return nZ(n.apply(this,e))}}const cAe=/("(?:[^\\"]|\\.)*")|[:,]/g;function AAe(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const h=JSON.stringify(s,r);if(h===void 0)return h;const m=i-a.length-c;if(h.length<=m){const v=h.replace(cAe,(x,E)=>E||`${x} `);if(v.length<=m)return v}if(r!=null&&(s=JSON.parse(h),r=void 0),typeof s=="object"&&s!==null){const v=a+t,x=[];let E=0,R,P;if(Array.isArray(s)){R="[",P="]";const{length:z}=s;for(;E<z;E++)x.push(o(s[E],v,E===z-1?0:1)||"null")}else{R="{",P="}";const z=Object.keys(s),{length:Q}=z;for(;E<Q;E++){const Y=z[E],H=`${JSON.stringify(Y)}: `,Z=o(s[Y],v,H.length+(E===Q-1?0:1));Z!==void 0&&x.push(H+Z)}}if(x.length>0)return[R,t+x.join(`,
${v}`),P].join(`
${a}`)}return h})(n,"",0)}function JL(n,e){const t={};for(const i in e)n[i]!==void 0&&(t[i]=n[i]);for(const i in n)t[i]===void 0&&(t[i]=n[i]);return t}function hAe(n,e=2){return n=JL(n,ns.$root),n.layers&&(n.layers=n.layers.map(t=>JL(t,ns.layer))),AAe(n,{indent:e})}function xB(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function ez(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function OT(n,e){return typeof e=="string"&&e[0]==="@"?OT(n,n.constants[e]):e}function dAe(n){return Array.isArray(n.stops)}function a2(n,e,t){n[t]=n[e],delete n[e]}function fAe(n){n.version=8,$ce(n,r=>{r.type==="video"&&r.url!==void 0&&a2(r,"url","urls"),r.type==="video"&&r.coordinates.forEach(o=>o.reverse())}),s3(n,r=>{xB(r,o=>{o["symbol-min-distance"]!==void 0&&a2(o,"symbol-min-distance","symbol-spacing")}),ez(r,o=>{o["background-image"]!==void 0&&a2(o,"background-image","background-pattern"),o["line-image"]!==void 0&&a2(o,"line-image","line-pattern"),o["fill-image"]!==void 0&&a2(o,"fill-image","fill-pattern")})}),CD(n,{paint:!0,layout:!0},r=>{const o=OT(n,r.value);dAe(o)&&o.stops.forEach(s=>{s[1]=OT(n,s[1])}),r.set(o)}),delete n.constants,s3(n,r=>{xB(r,o=>{delete o["text-max-size"],delete o["icon-max-size"]}),ez(r,o=>{o["text-size"]&&(r.layout||(r.layout={}),r.layout["text-size"]=o["text-size"],delete o["text-size"]),o["icon-size"]&&(r.layout||(r.layout={}),r.layout["icon-size"]=o["icon-size"],delete o["icon-size"])})});function e(r){function o(s){return s.split(",").map(a=>a.trim())}if(Array.isArray(r))return r;if(typeof r=="string")return o(r);if(typeof r=="object")return r.stops.forEach(s=>{s[1]=o(s[1])}),r;throw new Error("unexpected font value")}s3(n,r=>{xB(r,o=>{o["text-font"]&&(o["text-font"]=e(o["text-font"]))})});let t=0;for(let r=n.layers.length-1;r>=0;r--)if(n.layers[r].type!=="symbol"){t=r+1;break}const i=n.layers.splice(t);return i.reverse(),n.layers=n.layers.concat(i),n}function pAe(n){const e=[];return s3(n,t=>{t.filter&&(t.filter=o3(t.filter))}),CD(n,{paint:!0,layout:!0},({path:t,key:i,value:r,reference:o,set:s})=>{V4(r)||i.endsWith("-transition")||o===null||(typeof r=="object"&&!Array.isArray(r)?(s(FH(r,o)),e.push(t.join("."))):o.tokens&&typeof r=="string"&&s(jH(r)))}),n}function mAe(n){return JSON.parse(gAe(JSON.stringify(n)))}function gAe(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const i=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(i){let[r,o,s,a]=i.slice(1);return[o,s]=[o,s].map(c=>c.endsWith("%")?c:`${parseFloat(c)*100}%`),`"hsl${typeof a=="string"?"a":""}(${[r,o,s,a].filter(Boolean).join(",")})"`}return e})}function yAe(n){let e=!1;if(n.version===7&&(n=fAe(n),e=!0),n.version===8&&(e=!!pAe(n),e=!0),CD(n,{paint:!0,layout:!0},({value:t,reference:i,set:r})=>{i?.type==="color"&&r(mAe(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const up=ns,vAe={StyleExpression:zH,StylePropertyFunction:gE,ZoomConstantExpression:wT,ZoomDependentExpression:ST,createExpression:pD,createPropertyExpression:mD,isExpression:V4,isExpressionFilter:yE,isZoomExpression:Lce,normalizePropertyExpression:zce},bAe={convertFunction:FH,createFunction:fD,isFunction:q4},CAe=8,_Ae=JSON.parse('{"version":{"required":true,"type":"enum","values":[8],"doc":"Style specification version number. Must be 8.","example":8},"name":{"type":"string","doc":"A human-readable name for the style.","example":"Bright"},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'maplibre:\'.","example":{"styleeditor:slimmode":true,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{"String":"one","Number":2,"Boolean":false}}},"center":{"type":"array","value":"number","doc":"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":[-73.9749,40.7736]},"centerAltitude":{"type":"number","doc":"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":123.4,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2980","ios":"https://github.com/maplibre/maplibre-native/issues/2980"}}},"zoom":{"type":"number","doc":"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":12.5},"bearing":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Default bearing, in degrees. The bearing is the compass direction that is \\"up\\"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":29},"pitch":{"type":"number","default":0,"units":"degrees","doc":"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":50,"sdk-support":{"0-60 degrees":{"js":"0.8.0","android":"1.0.0","ios":"1.0.0"},"0-85 degrees":{"js":"2.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/1909","ios":"https://github.com/maplibre/maplibre-native/issues/1909"}}},"roll":{"type":"number","default":0,"units":"degrees","doc":"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":45,"sdk-support":{"basic functionality":{"js":"5.0.0","android":"https://github.com/maplibre/maplibre-native/issues/2941","ios":"https://github.com/maplibre/maplibre-native/issues/2941"}}},"state":{"type":"state","default":{},"doc":"An object used to define default values when using the [`global-state`](https://maplibre.org/maplibre-style-spec/expressions/#global-state) expression.","example":{"chargerType":{"default":["CCS","CHAdeMO","Type2"]},"minPreferredChargingSpeed":{"default":50}},"sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"light":{"type":"light","doc":"The global light source.","example":{"anchor":"viewport","color":"white","intensity":0.4}},"sky":{"type":"sky","doc":"The map\'s sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.","example":{"sky-color":"#199EF3","sky-horizon-blend":0.5,"horizon-color":"#ffffff","horizon-fog-blend":0.5,"fog-color":"#0000ff","fog-ground-blend":0.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},"projection":{"type":"projection","doc":"The projection configuration","example":{"type":["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},"terrain":{"type":"terrain","doc":"The terrain configuration.","example":{"source":"raster-dem-source","exaggeration":0.5}},"sources":{"required":true,"type":"sources","doc":"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn\'t enough to make data appear on the map because sources don\'t contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\\n\\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).","example":{"maplibre-demotiles":{"type":"vector","url":"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{"type":"vector","url":"http://api.example.com/tilejson.json"},"maplibre-streets":{"type":"vector","tiles":["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],"maxzoom":14},"wms-imagery":{"type":"raster","tiles":["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],"tileSize":256}}},"sprite":{"type":"sprite","doc":"An array of `{id: \'my-sprite\', url: \'https://example.com/sprite\'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. \'my-sprite:image\'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to \'default\', the prefix is omitted (just \'image\' instead of \'default:image\'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won\'t be prefixed.","example":"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},"glyphs":{"type":"string","doc":"A URL template for loading signed-distance-field glyph sets in PBF format.\\n\\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\\n\\nThe URL must include:\\n\\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \\n\\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\\n\\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","example":"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{"js":"0.0.16","android":"0.1.1","ios":"0.1.0"},"omit to use local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}}},"font-faces":{"type":"array","value":"fontFaces","doc":"The `font-faces` property can be used to specify what font files to use for rendering text. Font faces contain information needed to render complex texts such as [Devanagari](https://en.wikipedia.org/wiki/Devanagari), [Khmer](https://en.wikipedia.org/wiki/Khmer_script) among many others.<h2>Unicode range</h2>The optional `unicode-range` property can be used to only use a particular font file for characters within the specified unicode range(s). Its value should be an array of strings, each indicating a start and end of a unicode range, similar to the [CSS descriptor with the same name](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range). This allows specifying multiple non-consecutive unicode ranges. When not specified, the default value is `U+0-10FFFF`, meaning the font file will be used for all unicode characters.\\n\\nRefer to the [Unicode Character Code Charts](https://www.unicode.org/charts/) to see ranges for scripts supported by Unicode. To see what unicode code-points are available in a font, use a tool like [FontDrop](https://fontdrop.info/).\\n\\n<h2>Font Resolution</h2>For every name in a symbol layers [`text-font`](./layers.md/#text-font) array, characters are matched if they are covered one of the by the font files in the corresponding entry of the `font-faces` map. Any still-unmatched characters then fall back to the [`glyphs`](./glyphs.md) URL if provided.\\n\\n<h2>Supported Fonts</h2>What type of fonts are supported is implementation-defined. Unsupported fonts are ignored.","example":{"Noto Sans Regular":[{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansKhmer/hinted/ttf/NotoSansKhmer-Regular.ttf","unicode-range":["U+1780-17FF"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansDevanagari/hinted/ttf/NotoSansDevanagari-Regular.ttf","unicode-range":["U+0900-097F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansMyanmar/hinted/ttf/NotoSansMyanmar-Regular.ttf","unicode-range":["U+1000-109F"]},{"url":"https://cdn.jsdelivr.net/gh/notofonts/notofonts.github.io/fonts/NotoSansEthiopic/hinted/ttf/NotoSansEthiopic-Regular.ttf","unicode-range":["U+1200-137F"]}],"Unifont":"https://ftp.gnu.org/gnu/unifont/unifont-15.0.01/unifont-15.0.01.ttf"},"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/50","android":"11.13.0","ios":"6.18.0"}}},"transition":{"type":"transition","doc":"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style\'s `transition` property.","example":{"duration":300,"delay":0}},"layers":{"required":true,"type":"array","value":"layer","doc":"A style\'s `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`, `color-relief`.\\n\\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.","example":[{"id":"coastline","source":"maplibre","source-layer":"countries","type":"line","paint":{"line-color":"#198EC8"}}]}}'),xAe={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},MAe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],wAe={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},encoding:{type:"enum",values:{mvt:{doc:"Mapbox Vector Tiles. See http://github.com/mapbox/vector-tile-spec for more info."},mlt:{doc:"MapLibre Vector Tiles. See https://github.com/maplibre/maplibre-tile-spec for more info."}},default:"mvt",doc:"The encoding used by this source. Mapbox Vector Tiles encoding is used by default.","sdk-support":{mvt:{android:"supported",ios:"supported",js:"supported"},mlt:{android:"https://github.com/maplibre/maplibre-native/issues/3721",ios:"https://github.com/maplibre/maplibre-native/issues/3721",js:"https://github.com/maplibre/maplibre-gl-js/issues/6258"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},SAe={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},EAe={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},BAe={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},OAe={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},IAe={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},kAe={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},"color-relief":{doc:"Client-side elevation coloring based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},TAe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],RAe={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},DAe={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},PAe={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},KAe={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},UAe={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},LAe=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Fonts to use for displaying text. If the `glyphs` root property is specified, this array is joined together and interpreted as a font stack name. Otherwise, it is interpreted as a cascading fallback list of local font names.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"},"local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),zAe={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},FAe={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},jAe={type:"array",value:"*",doc:"A filter selects specific features from a layer."},NAe={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},GAe={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},QAe={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},WAe={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},qAe=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_1_name","var_1_value","...","var_n_name","var_n_value","expression"],"output-type":"any"}],"parameters":[{"name":"var_i_name","type":"string literal","description":"The name of the i-th variable."},{"name":"var_i_value","type":"any","description":"The value of the i-th variable."},{"name":"expression","type":"any","description":"The expression within which the named variables can be referenced."}]},"example":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_name"],"output-type":"any"}],"parameters":[{"name":"var_name","type":"string literal","description":"The name of the variable bound using `let`."}]},"example":["var","density"],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["json_object"],"output-type":"object"},{"parameters":["json_array"],"output-type":"array"}],"parameters":[{"name":"json_object","type":"JSON object"},{"name":"json_array","type":"JSON array"}]},"example":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type or length, then this assertion will cause the whole expression to be aborted.","syntax":{"overloads":[{"parameters":["value"],"output-type":"array"},{"parameters":["type","value"],"output-type":"array<type>"},{"parameters":["type","length","value"],"output-type":"array<type, length>"}],"parameters":[{"name":"value","type":"any"},{"name":"type","type":"\\"string\\" | \\"number\\" | \\"boolean\\"","description":"The asserted type of the input array."},{"name":"length","type":"number literal","description":"The asserted length of the input array."}]},"example":["array","string",3,["literal",["a","b","c"]]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","syntax":{"overloads":[{"parameters":["index","array"],"output-type":"T"}],"parameters":[{"name":"index","type":"number","description":"The index into `array`."},{"name":"array","type":"array<T>","description":"The array of items to retrieve the specified item from."}]},"example":["at",1,["literal",["a","b","c"]]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure-distances/)","syntax":{"overloads":[{"parameters":["item","array"],"output-type":"boolean"},{"parameters":["substring","string"],"output-type":"boolean"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."}]},"example":["in","$type","Point"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["item","array","from_index?"],"output-type":"number"},{"parameters":["substring","string","from_index?"],"output-type":"number"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."},{"name":"from_index","type":"number","description":"The index from where to begin the search."}]},"example":["index-of","foo",["baz","bar","hello","foo","world"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns a subarray from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array","start_index","end_index?"],"output-type":"array<T>"},{"parameters":["string","start_index","end_index?"],"output-type":"string"}],"parameters":[{"name":"array","type":"array<T>","description":"The original array from which to extract the subarray."},{"name":"string","type":"string","description":"The original string from which to extract the substring."},{"name":"start_index","type":"number","description":"The inclusive index from which `slice` extracts items or characters from the subarray or substring."},{"name":"end_index","type":"number","description":"The non-inclusive index up to which `slice` extracts items or characters from the subarray or substring."}]},"example":["slice",["get","name"],0,3],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["condition_1","output_1","...","condition_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"condition_i","type":"boolean"},{"name":"output_i","type":"any"},{"name":"fallback","type":"any","description":"The result when no condition evaluates to true."}]},"example":["case",["boolean",["feature-state","hover"],false],1,0.5],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","syntax":{"overloads":[{"parameters":["input","label_1","output_1","...","label_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"input","type":"string | number","description":"Any expression."},{"name":"label_i","type":"string literal | number literal | array<string literal> | array<number literal>","description":"The i-th literal value or array of literal values to match the input against."},{"name":"output_i","type":"any","description":"The result when the i-th label is the first label to match the input."},{"name":"fallback","type":"any","description":"The result when no label matches the input."}]},"example":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["expression_1","...","expression_n"],"output-type":"any"}],"parameters":[{"name":"expression_i","type":"any"}]},"example":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order.\\n\\nReturns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input","output_0","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"any"}],"parameters":[{"name":"input","type":"number","description":"Any numeric expression."},{"name":"output_0","type":"any","description":"The result when the `input` is less than the first stop."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"any","description":"The result when the i-th stop is the last stop less than the `input`."}]},"example":["step",["get","point_count"],20,100,30,750,40],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, `color`, `array<color>`, or `projection`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"number | array<number> | color | array<color> | projection"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","description":"The interpolation type."},{"name":"input","type":"number","description":"Any numeric expression."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"number | array<number> | color | array<color> | projection","description":"The output value corresponding to the i-th stop."}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color` or `array<color>`, and the interpolation is performed in the CIELAB color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color | array<color>"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color | array<color>"}]},"example":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns the mathematical constant ln(2).","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["ln2"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["pi"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["e"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["typeof",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"string"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["string",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["number",["get","population"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"boolean"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["boolean",["feature-state","hover"],false],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"object"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["object",["get","some-property"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","syntax":{"overloads":[{"parameters":["options"],"output-type":"collator"}],"parameters":[{"name":"options","type":"{ \\"case-sensitive\\"?: boolean, \\"diacritic-sensitive\\"?: boolean, \\"locale\\"?: string }"}]},"example":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["input_1","style_overrides_1?","...","input_n","style_overrides_n?"],"output-type":"formatted"}],"parameters":[{"name":"input_i","type":"string | image"},{"name":"style_overrides_i","type":"{ \\"text-font\\"?: string, \\"text-color\\"?: color, \\"font-scale\\"?: number, \\"vertical-align\\"?: \\"bottom\\" | \\"center\\" | \\"top\\" }"}]},"example":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"5.1.0","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/use-a-fallback-image/)","syntax":{"overloads":[{"parameters":["image_name"],"output-type":"image"}],"parameters":[{"name":"image_name","type":"string"}]},"example":["image","marker_15"],"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"global-state":{"doc":"Retrieves a property value from global state that can be set with platform-specific APIs. Defaults can be provided using the [`state`](https://maplibre.org/maplibre-style-spec/root/#state) root property. Returns `null` if no value nor default value is set for the retrieved property.","group":"Lookup","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string literal","description":"The name of the global state property to retrieve."}]},"example":["global-state","someProperty"],"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/4964","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input","format_options"],"output-type":"string"}],"parameters":[{"name":"input","type":"number"},{"name":"format_options","type":"{ \\"locale\\"?: string, \\"currency\\"?: string, \\"min-fraction-digits\\"?: number, \\"max-fraction-digits\\"?: number }"}]},"example":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-string",["get","mag"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-number","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when the input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","syntax":{"overloads":[{"parameters":["value"],"output-type":"boolean"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-boolean","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","syntax":{"overloads":[{"parameters":["color"],"output-type":"array"}],"parameters":[{"name":"color","type":"color"}]},"example":["to-rgba","#ff0000"],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"color"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-color","#edf8e9"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"}]},"example":["rgb",255,0,0],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue","alpha"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"},{"name":"alpha","type":"number"}]},"example":["rgba",255,0,0,1],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/extrude-polygons-for-3d-indoor-mapping/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to retrieve the value of."},{"name":"object","type":"object","description":"The object to retrieve the value from."}]},"example":["get","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of a property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"boolean"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to test for the presence of."},{"name":"object","type":"object","description":"The object in which to test for the presence of the `property_name` property."}]},"example":["has","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array_or_string"],"output-type":"number"}],"parameters":[{"name":"array_or_string","type":"array | string"}]},"example":["length",["get","myArray"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","syntax":{"overloads":[{"parameters":[],"output-type":"object"}]},"example":["properties"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-hover-effect/)","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string"}]},"example":["feature-state","hover"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","syntax":{"overloads":[{"parameters":[],"output-type":"string"}]},"example":["==",["geometry-type"],"Polygon"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["id"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["heatmap-density"],"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"elevation":{"doc":"Gets the elevation of a pixel (in meters above the vertical datum reference of the `raster-dem` tiles) from a `raster-dem` source. Can only be used in the `color-relief-color` property of a `color-relief` layer.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["elevation"],"group":"Color Relief","sdk-support":{"basic functionality":{"js":"5.6.0","android":"https://github.com/maplibre/maplibre-native/issues/3408","ios":"https://github.com/maplibre/maplibre-native/issues/3408"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["line-progress"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["accumulated"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["+",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["*",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"},{"parameters":["single_input"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The number from which to subtract `input_2`."},{"name":"input_2","type":"number","description":"The number to subtract from `input_1`."},{"name":"single_input","type":"number","description":"The number to subtract from 0."}]},"example":["-",10],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["/",["get","population"],["get","sq-km"]],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["%",10,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The base."},{"name":"input_2","type":"number","description":"The exponent."}]},"example":["^",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number","description":"The radicand."}]},"example":["sqrt",9],"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log10",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ln",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log2",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["sin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["cos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["tan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["asin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["acos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["atan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["min",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["max",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["round",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["abs",-1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ceil",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["floor",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"number"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["distance",{"type":"Point","coordinates":[0,0]}],"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/display-buildings-in-3d/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-symbols-by-toggling-a-list/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["==","$type","Polygon"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["!=","cluster",true],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/display-html-clusters-with-custom-properties/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["all",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["any",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/create-and-style-clusters/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"boolean"}]},"example":["!",["has","point_count"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"boolean"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}],"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"string"}]},"example":["is-supported-script",""],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["upcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["downcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-a-generated-icon-to-the-map/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/create-a-time-slider/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"string"}],"parameters":[{"name":"input_i","type":"any"}]},"example":["concat","square-rgb-",["get","color"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","syntax":{"overloads":[{"parameters":["collator"],"output-type":"string"}],"parameters":[{"name":"collator","type":"collator"}]},"example":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),YAe={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},VAe={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},$Ae={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},HAe={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},ZAe=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],XAe={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},JAe={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:'Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. GeoJSON sources with `lineMetrics: true` specified won\'t render dashed lines to the expected scale. Zoom-dependent expressions will be evaluated only at integer zoom levels. The only way to create an array value is using `["literal", [...]]`; arrays cannot be read from or derived from feature properties.',minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"5.8.0",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},ehe={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},the={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},nhe={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},ihe={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},rhe={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,doc:"The direction of the light source(s) used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,doc:"The altitude of the light source(s) used to generate the hillshading with 0 as sunset and 90 as noon. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",doc:"The shading color of areas that face away from the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{doc:"The legacy hillshade method."},basic:{doc:"Basic hillshade. Uses a simple physics model where the reflected light intensity is proportional to the cosine of the angle between the incident light and the surface normal. Similar to GDAL's `gdaldem` default algorithm."},combined:{doc:"Hillshade algorithm whose intensity scales with slope. Similar to GDAL's `gdaldem` with `-combined` option."},igor:{doc:"Hillshade algorithm which tries to minimize effects on other map features beneath. Similar to GDAL's `gdaldem` with `-igor` option."},multidirectional:{doc:"Hillshade with multiple illumination directions. Uses the basic hillshade model with multiple independent light sources."}},default:"standard",doc:"The hillshade algorithm to use, one of `standard`, `basic`, `combined`, `igor`, or `multidirectional`. ![image](assets/hillshade_methods.png)","sdk-support":{"basic functionality":{js:"5.5.0",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},ohe={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},she={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},ahe={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},Zr={$version:CAe,$root:_Ae,sources:xAe,source:MAe,source_vector:wAe,source_raster:SAe,source_raster_dem:EAe,source_geojson:BAe,source_video:OAe,source_image:IAe,layer:kAe,layout:TAe,layout_background:RAe,layout_fill:DAe,layout_circle:PAe,layout_heatmap:KAe,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:UAe,layout_symbol:LAe,layout_raster:zAe,layout_hillshade:FAe,"layout_color-relief":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},"property-type":"constant"}},filter:jAe,filter_operator:NAe,geometry_type:GAe,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:QAe,expression:WAe,expression_name:qAe,light:YAe,sky:VAe,terrain:$Ae,projection:HAe,paint:ZAe,paint_fill:XAe,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:JAe,paint_circle:ehe,paint_heatmap:the,paint_symbol:nhe,paint_raster:ihe,paint_hillshade:rhe,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the color-relief will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",doc:'Defines the color of each pixel based on its elevation. Should be an expression that uses `["elevation"]` as input.',example:["interpolate",["linear"],["elevation"],0,"black",8849,"white"],transition:!1,"sdk-support":{"basic functionality":{js:"5.6.0",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:ohe,transition:she,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:ahe};var rw={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.10.0/LICENSE.txt
 */var lhe=rw.exports,tz;function uhe(){return tz||(tz=1,(function(n,e){(function(t,i){n.exports=i()})(lhe,(function(){var t={},i={};function r(s,a,c){if(i[s]=c,s==="index"){var h="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",m={};return i.shared(m),i.index(t,m),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),t}}r("shared",["exports"],(function(s){function a(f,u,d,b){return new(d||(d=Promise))((function(M,I){function D(ee){try{F(b.next(ee))}catch(ne){I(ne)}}function U(ee){try{F(b.throw(ee))}catch(ne){I(ne)}}function F(ee){var ne;ee.done?M(ee.value):(ne=ee.value,ne instanceof d?ne:new d((function(ce){ce(ne)}))).then(D,U)}F((b=b.apply(f,u||[])).next())}))}function c(f,u){this.x=f,this.y=u}function h(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var m,v;typeof SuppressedError=="function"&&SuppressedError,c.prototype={clone(){return new c(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,u){return this.clone()._rotateAround(f,u)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const u=f.x-this.x,d=f.y-this.y;return u*u+d*d},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult(f){const u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const u=Math.cos(f),d=Math.sin(f),b=d*this.x+u*this.y;return this.x=u*this.x-d*this.y,this.y=b,this},_rotateAround(f,u){const d=Math.cos(f),b=Math.sin(f),M=u.y+b*(this.x-u.x)+d*(this.y-u.y);return this.x=u.x+d*(this.x-u.x)-b*(this.y-u.y),this.y=M,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:c},c.convert=function(f){if(f instanceof c)return f;if(Array.isArray(f))return new c(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new c(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var x=(function(){if(v)return m;function f(u,d,b,M){this.cx=3*u,this.bx=3*(b-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(M-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=b,this.p2y=M}return v=1,m=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var b=u,M=0;M<8;M++){var I=this.sampleCurveX(b)-u;if(Math.abs(I)<d)return b;var D=this.sampleCurveDerivativeX(b);if(Math.abs(D)<1e-6)break;b-=I/D}var U=0,F=1;for(b=u,M=0;M<20&&(I=this.sampleCurveX(b),!(Math.abs(I-u)<d));M++)u>I?U=b:F=b,b=.5*(F-U)+U;return b},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},m})(),E=h(x);let R,P;function z(){return R==null&&(R=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),R}function Q(){if(P==null&&(P=!1,z())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let b=0;b<25;b++){const M=4*b;u.fillStyle=`rgb(${M},${M+1},${M+2})`,u.fillRect(b%5,Math.floor(b/5),1,1)}const d=u.getImageData(0,0,5,5).data;for(let b=0;b<100;b++)if(b%4!=3&&d[b]!==b){P=!0;break}}}return P||!1}var Y=1e-6,H=typeof Float32Array<"u"?Float32Array:Array;function Z(){var f=new H(9);return H!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function J(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function $(){var f=new H(3);return H!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function G(f){var u=f[0],d=f[1],b=f[2];return Math.sqrt(u*u+d*d+b*b)}function oe(f,u,d){var b=new H(3);return b[0]=f,b[1]=u,b[2]=d,b}function ue(f,u,d){return f[0]=u[0]+d[0],f[1]=u[1]+d[1],f[2]=u[2]+d[2],f}function xe(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f}function ge(f,u,d){var b=u[0],M=u[1],I=u[2],D=d[0],U=d[1],F=d[2];return f[0]=M*F-I*U,f[1]=I*D-b*F,f[2]=b*U-M*D,f}var Ie,Me=G;function ke(f,u,d){var b=u[0],M=u[1],I=u[2],D=u[3];return f[0]=d[0]*b+d[4]*M+d[8]*I+d[12]*D,f[1]=d[1]*b+d[5]*M+d[9]*I+d[13]*D,f[2]=d[2]*b+d[6]*M+d[10]*I+d[14]*D,f[3]=d[3]*b+d[7]*M+d[11]*I+d[15]*D,f}function je(){var f=new H(4);return H!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Be(f,u,d,b){var M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",I=Math.PI/360;u*=I,b*=I,d*=I;var D=Math.sin(u),U=Math.cos(u),F=Math.sin(d),ee=Math.cos(d),ne=Math.sin(b),ce=Math.cos(b);switch(M){case"xyz":f[0]=D*ee*ce+U*F*ne,f[1]=U*F*ce-D*ee*ne,f[2]=U*ee*ne+D*F*ce,f[3]=U*ee*ce-D*F*ne;break;case"xzy":f[0]=D*ee*ce-U*F*ne,f[1]=U*F*ce-D*ee*ne,f[2]=U*ee*ne+D*F*ce,f[3]=U*ee*ce+D*F*ne;break;case"yxz":f[0]=D*ee*ce+U*F*ne,f[1]=U*F*ce-D*ee*ne,f[2]=U*ee*ne-D*F*ce,f[3]=U*ee*ce+D*F*ne;break;case"yzx":f[0]=D*ee*ce+U*F*ne,f[1]=U*F*ce+D*ee*ne,f[2]=U*ee*ne-D*F*ce,f[3]=U*ee*ce-D*F*ne;break;case"zxy":f[0]=D*ee*ce-U*F*ne,f[1]=U*F*ce+D*ee*ne,f[2]=U*ee*ne+D*F*ce,f[3]=U*ee*ce-D*F*ne;break;case"zyx":f[0]=D*ee*ce-U*F*ne,f[1]=U*F*ce+D*ee*ne,f[2]=U*ee*ne-D*F*ce,f[3]=U*ee*ce+D*F*ne;break;default:throw new Error("Unknown angle order "+M)}return f}function Ye(){var f=new H(2);return H!=Float32Array&&(f[0]=0,f[1]=0),f}function At(f,u){var d=new H(2);return d[0]=f,d[1]=u,d}$(),Ie=new H(4),H!=Float32Array&&(Ie[0]=0,Ie[1]=0,Ie[2]=0,Ie[3]=0),$(),oe(1,0,0),oe(0,1,0),je(),je(),Z(),Ye();const yt=8192;function Le(f,u,d){return u*(yt/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}function De(f,u){return(f%u+u)%u}function Ge(f,u,d){return f*(1-d)+u*d}function Te(f){if(f<=0)return 0;if(f>=1)return 1;const u=f*f,d=u*f;return 4*(f<.5?d:3*(f-u)+d-.75)}function xt(f,u,d,b){const M=new E(f,u,d,b);return I=>M.solve(I)}const st=xt(.25,.1,.25,1);function Tt(f,u,d){return Math.min(d,Math.max(u,f))}function Lt(f,u,d){const b=d-u,M=((f-u)%b+b)%b+u;return M===u?d:M}function Ue(f,...u){for(const d of u)for(const b in d)f[b]=d[b];return f}let Oe=1;function Ee(f,u,d){const b={};for(const M in f)b[M]=u.call(this,f[M],M,f);return b}function Ve(f,u,d){const b={};for(const M in f)u.call(this,f[M],M,f)&&(b[M]=f[M]);return b}function mt(f){return Array.isArray(f)?f.map(mt):typeof f=="object"&&f?Ee(f,mt):f}const pt={};function Ct(f){pt[f]||(typeof console<"u"&&console.warn(f),pt[f]=!0)}function Rt(f,u,d){return(d.y-f.y)*(u.x-f.x)>(u.y-f.y)*(d.x-f.x)}function Kt(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let on=null;function qn(f){if(on==null){const u=f.navigator?f.navigator.userAgent:null;on=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return on}function Qn(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const xi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Kn(f,u,d,b,M){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const I=new VideoFrame(f,{timestamp:0});try{const D=I?.format;if(!D||!D.startsWith("BGR")&&!D.startsWith("RGB"))throw new Error(`Unrecognized format ${D}`);const U=D.startsWith("BGR"),F=new Uint8ClampedArray(b*M*4);if(yield I.copyTo(F,(function(ee,ne,ce,_e,we){const Re=4*Math.max(-ne,0),ze=(Math.max(0,ce)-ce)*_e*4+Re,He=4*_e,nt=Math.max(0,ne),Bt=Math.max(0,ce);return{rect:{x:nt,y:Bt,width:Math.min(ee.width,ne+_e)-nt,height:Math.min(ee.height,ce+we)-Bt},layout:[{offset:ze,stride:He}]}})(f,u,d,b,M)),U)for(let ee=0;ee<F.length;ee+=4){const ne=F[ee];F[ee]=F[ee+2],F[ee+2]=ne}return F}finally{I.close()}}))}let Un,Cn;function ei(f,u,d,b){return f.addEventListener(u,d,b),{unsubscribe:()=>{f.removeEventListener(u,d,b)}}}function Dn(f){return f*Math.PI/180}function It(f){return f/Math.PI*180}const Ce={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},re={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},le="AbortError";function he(){return new Error(le)}const se={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ae(f){return se.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const be="global-dispatcher";class We extends Error{constructor(u,d,b,M){super(`AJAXError: ${d} (${u}): ${b}`),this.status=u,this.statusText=d,this.url=b,this.body=M}}const et=()=>Kt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Pe=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const b=Ae(f.url);if(b)return b(f,u);if(Kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:be},u)}if(!(/^file:/.test(d=f.url)||/^file:/.test(et())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(b,M){return a(this,void 0,void 0,(function*(){const I=new Request(b.url,{method:b.method||"GET",body:b.body,credentials:b.credentials,headers:b.headers,cache:b.cache,referrer:et(),signal:M.signal});let D,U;b.type!=="json"||I.headers.has("Accept")||I.headers.set("Accept","application/json");try{D=yield fetch(I)}catch(ee){throw new We(0,ee.message,b.url,new Blob)}if(!D.ok){const ee=yield D.blob();throw new We(D.status,D.statusText,b.url,ee)}U=b.type==="arrayBuffer"||b.type==="image"?D.arrayBuffer():b.type==="json"?D.json():D.text();const F=yield U;if(M.signal.aborted)throw he();return{data:F,cacheControl:D.headers.get("Cache-Control"),expires:D.headers.get("Expires")}}))})(f,u);if(Kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:be},u)}var d;return(function(b,M){return new Promise(((I,D)=>{var U;const F=new XMLHttpRequest;F.open(b.method||"GET",b.url,!0),b.type!=="arrayBuffer"&&b.type!=="image"||(F.responseType="arraybuffer");for(const ee in b.headers)F.setRequestHeader(ee,b.headers[ee]);b.type==="json"&&(F.responseType="text",!((U=b.headers)===null||U===void 0)&&U.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=b.credentials==="include",F.onerror=()=>{D(new Error(F.statusText))},F.onload=()=>{if(!M.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let ee=F.response;if(b.type==="json")try{ee=JSON.parse(F.response)}catch(ne){return void D(ne)}I({data:ee,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const ee=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});D(new We(F.status,F.statusText,b.url,ee))}},M.signal.addEventListener("abort",(()=>{F.abort(),D(he())})),F.send(b.body)}))})(f,u)};function Ze(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),d=window.location;return u.protocol===d.protocol&&u.host===d.host}function y(f,u,d){d[f]&&d[f].indexOf(u)!==-1||(d[f]=d[f]||[],d[f].push(u))}function at(f,u,d){if(d&&d[f]){const b=d[f].indexOf(u);b!==-1&&d[f].splice(b,1)}}class Pt{constructor(u,d={}){Ue(this,d),this.type=u}}class Mt extends Pt{constructor(u,d={}){super("error",Ue({error:u},d))}}class en{on(u,d){return this._listeners=this._listeners||{},y(u,d,this._listeners),{unsubscribe:()=>{this.off(u,d)}}}off(u,d){return at(u,d,this._listeners),at(u,d,this._oneTimeListeners),this}once(u,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},y(u,d,this._oneTimeListeners),this):new Promise((b=>this.once(u,b)))}fire(u,d){typeof u=="string"&&(u=new Pt(u,d||{}));const b=u.type;if(this.listens(b)){u.target=this;const M=this._listeners&&this._listeners[b]?this._listeners[b].slice():[];for(const U of M)U.call(this,u);const I=this._oneTimeListeners&&this._oneTimeListeners[b]?this._oneTimeListeners[b].slice():[];for(const U of I)at(b,U,this._oneTimeListeners),U.call(this,u);const D=this._eventedParent;D&&(Ue(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),D.fire(u))}else u instanceof Mt&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,d){return this._eventedParent=u,this._eventedParentData=d,this}}var dt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Zn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function gi(f,u){const d={};for(const b in f)b!=="ref"&&(d[b]=f[b]);return Zn.forEach((b=>{b in u&&(d[b]=u[b])})),d}function Tn(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let d=0;d<f.length;d++)if(!Tn(f[d],u[d]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const d in f)if(!Tn(f[d],u[d]))return!1;return!0}return f===u}function zn(f,u){f.push(u)}function si(f,u,d){zn(d,{command:"addSource",args:[f,u[f]]})}function ir(f,u,d){zn(u,{command:"removeSource",args:[f]}),d[f]=!0}function Di(f,u,d,b){ir(f,d,b),si(f,u,d)}function gr(f,u,d){let b;for(b in f[d])if(Object.prototype.hasOwnProperty.call(f[d],b)&&b!=="data"&&!Tn(f[d][b],u[d][b]))return!1;for(b in u[d])if(Object.prototype.hasOwnProperty.call(u[d],b)&&b!=="data"&&!Tn(f[d][b],u[d][b]))return!1;return!0}function Oi(f,u,d,b,M,I){f=f||{},u=u||{};for(const D in f)Object.prototype.hasOwnProperty.call(f,D)&&(Tn(f[D],u[D])||d.push({command:I,args:[b,D,u[D],M]}));for(const D in u)Object.prototype.hasOwnProperty.call(u,D)&&!Object.prototype.hasOwnProperty.call(f,D)&&(Tn(f[D],u[D])||d.push({command:I,args:[b,D,u[D],M]}))}function Ri(f){return f.id}function cr(f,u){return f[u.id]=u,f}class nn{constructor(u,d,b,M){this.message=(u?`${u}: `:"")+b,M&&(this.identifier=M),d!=null&&d.__line__&&(this.line=d.__line__)}}function Pi(f,...u){for(const d of u)for(const b in d)f[b]=d[b];return f}class $o extends Error{constructor(u,d){super(d),this.message=d,this.key=u}}class Ks{constructor(u,d=[]){this.parent=u,this.bindings={};for(const[b,M]of d)this.bindings[b]=M}concat(u){return new Ks(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Vr={kind:"null"},mn={kind:"number"},Ni={kind:"string"},ri={kind:"boolean"},nl={kind:"color"},Xc={kind:"projectionDefinition"},kl={kind:"object"},Ki={kind:"value"},Jl={kind:"collator"},po={kind:"formatted"},Oa={kind:"padding"},eu={kind:"colorArray"},da={kind:"numberArray"},Ho={kind:"resolvedImage"},Tl={kind:"variableAnchorOffsetCollection"};function Zo(f,u){return{kind:"array",itemType:f,N:u}}function Wi(f){if(f.kind==="array"){const u=Wi(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const Rl=[Vr,mn,Ni,ri,nl,Xc,po,kl,Zo(Ki),Oa,da,eu,Ho,Tl];function rs(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!rs(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const d of Rl)if(!rs(d,u))return null}}return`Expected ${Wi(f)} but found ${Wi(u)} instead.`}function Dl(f,u){return u.some((d=>d.kind===f.kind))}function tu(f,u){return u.some((d=>d==="null"?f===null:d==="array"?Array.isArray(f):d==="object"?f&&!Array.isArray(f)&&typeof f=="object":d===typeof f))}function Eu(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const Jc=.96422,tc=.82521,ml=4/29,Oo=6/29,nc=3*Oo*Oo,nu=Oo*Oo*Oo,Ec=Math.PI/180,ic=180/Math.PI;function Bc(f){return(f%=360)<0&&(f+=360),f}function Dh([f,u,d,b]){let M,I;const D=rc((.2225045*(f=fa(f))+.7168786*(u=fa(u))+.0606169*(d=fa(d)))/1);f===u&&u===d?M=I=D:(M=rc((.4360747*f+.3850649*u+.1430804*d)/Jc),I=rc((.0139322*f+.0971045*u+.7141733*d)/tc));const U=116*D-16;return[U<0?0:U,500*(M-D),200*(D-I),b]}function fa(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function rc(f){return f>nu?Math.pow(f,1/3):f/nc+ml}function il([f,u,d,b]){let M=(f+16)/116,I=isNaN(u)?M:M+u/500,D=isNaN(d)?M:M-d/200;return M=1*iu(M),I=Jc*iu(I),D=tc*iu(D),[eA(3.1338561*I-1.6168667*M-.4906146*D),eA(-.9787684*I+1.9161415*M+.033454*D),eA(.0719453*I-.2289914*M+1.4052427*D),b]}function eA(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function iu(f){return f>Oo?f*f*f:nc*(f-ml)}const Fa=Object.hasOwn||function(f,u){return Object.prototype.hasOwnProperty.call(f,u)};function Ms(f,u){return Fa(f,u)?f[u]:void 0}function Io(f){return parseInt(f.padEnd(2,f),16)/255}function ru(f,u){return ou(u?f/100:f,0,1)}function ou(f,u,d){return Math.min(Math.max(u,f),d)}function Us(f){return!f.some(Number.isNaN)}const ja={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ji(f,u,d){return f+d*(u-f)}function rl(f,u,d){return f.map(((b,M)=>Ji(b,u[M],d)))}class Gi{constructor(u,d,b,M=1,I=!0){this.r=u,this.g=d,this.b=b,this.a=M,I||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[u,d,b,M]))}static parse(u){if(u instanceof Gi)return u;if(typeof u!="string")return;const d=(function(b){if((b=b.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=Ms(ja,b);if(M){const[D,U,F]=M;return[D/255,U/255,F/255,1]}if(b.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(b)){const D=b.length<6?1:2;let U=1;return[Io(b.slice(U,U+=D)),Io(b.slice(U,U+=D)),Io(b.slice(U,U+=D)),Io(b.slice(U,U+D)||"ff")]}if(b.startsWith("rgb")){const D=b.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(D){const[U,F,ee,ne,ce,_e,we,Re,ze,He,nt,Bt]=D,lt=[ne||" ",we||" ",He].join("");if(lt==="  "||lt==="  /"||lt===",,"||lt===",,,"){const vt=[ee,_e,ze].join(""),Nt=vt==="%%%"?100:vt===""?255:0;if(Nt){const Zt=[ou(+F/Nt,0,1),ou(+ce/Nt,0,1),ou(+Re/Nt,0,1),nt?ru(+nt,Bt):1];if(Us(Zt))return Zt}}return}}const I=b.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){const[D,U,F,ee,ne,ce,_e,we,Re]=I,ze=[F||" ",ne||" ",_e].join("");if(ze==="  "||ze==="  /"||ze===",,"||ze===",,,"){const He=[+U,ou(+ee,0,100),ou(+ce,0,100),we?ru(+we,Re):1];if(Us(He))return(function([nt,Bt,lt,vt]){function Nt(Zt){const fn=(Zt+nt/30)%12,Nn=Bt*Math.min(lt,1-lt);return lt-Nn*Math.max(-1,Math.min(fn-3,9-fn,1))}return nt=Bc(nt),Bt/=100,lt/=100,[Nt(0),Nt(8),Nt(4),vt]})(He)}}})(u);return d?new Gi(...d,!1):void 0}get rgb(){const{r:u,g:d,b,a:M}=this,I=M||1/0;return this.overwriteGetter("rgb",[u/I,d/I,b/I,M])}get hcl(){return this.overwriteGetter("hcl",(function(u){const[d,b,M,I]=Dh(u),D=Math.sqrt(b*b+M*M);return[Math.round(1e4*D)?Bc(Math.atan2(M,b)*ic):NaN,D,d,I]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Dh(this.rgb))}overwriteGetter(u,d){return Object.defineProperty(this,u,{value:d}),d}toString(){const[u,d,b,M]=this.rgb;return`rgba(${[u,d,b].map((I=>Math.round(255*I))).join(",")},${M})`}static interpolate(u,d,b,M="rgb"){switch(M){case"rgb":{const[I,D,U,F]=rl(u.rgb,d.rgb,b);return new Gi(I,D,U,F,!1)}case"hcl":{const[I,D,U,F]=u.hcl,[ee,ne,ce,_e]=d.hcl;let we,Re;if(isNaN(I)||isNaN(ee))isNaN(I)?isNaN(ee)?we=NaN:(we=ee,U!==1&&U!==0||(Re=ne)):(we=I,ce!==1&&ce!==0||(Re=D));else{let lt=ee-I;ee>I&&lt>180?lt-=360:ee<I&&I-ee>180&&(lt+=360),we=I+b*lt}const[ze,He,nt,Bt]=(function([lt,vt,Nt,Zt]){return lt=isNaN(lt)?0:lt*Ec,il([Nt,Math.cos(lt)*vt,Math.sin(lt)*vt,Zt])})([we,Re??Ji(D,ne,b),Ji(U,ce,b),Ji(F,_e,b)]);return new Gi(ze,He,nt,Bt,!1)}case"lab":{const[I,D,U,F]=il(rl(u.lab,d.lab,b));return new Gi(I,D,U,F,!1)}}}}Gi.black=new Gi(0,0,0,1),Gi.white=new Gi(1,1,1,1),Gi.transparent=new Gi(0,0,0,0),Gi.red=new Gi(1,0,0,1);class Na{constructor(u,d,b){this.sensitivity=u?d?"variant":"case":d?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,d){return this.collator.compare(u,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Xo=["bottom","center","top"];class su{constructor(u,d,b,M,I,D){this.text=u,this.image=d,this.scale=b,this.fontStack=M,this.textColor=I,this.verticalAlign=D}}class Ko{constructor(u){this.sections=u}static fromString(u){return new Ko([new su(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((u=>u.text.length!==0||u.image&&u.image.name.length!==0))}static factory(u){return u instanceof Ko?u:Ko.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map((u=>u.text)).join("")}}class oo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof oo)return u;if(typeof u=="number")return new oo([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const d of u)if(typeof d!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new oo(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){return new oo(rl(u.values,d.values,b))}}class ws{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof ws)return u;if(typeof u=="number")return new ws([u]);if(Array.isArray(u)){for(const d of u)if(typeof d!="number")return;return new ws(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){return new ws(rl(u.values,d.values,b))}}class Mo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Mo)return u;if(typeof u=="string"){const b=Gi.parse(u);return b?new Mo([b]):void 0}if(!Array.isArray(u))return;const d=[];for(const b of u){if(typeof b!="string")return;const M=Gi.parse(b);if(!M)return;d.push(M)}return new Mo(d)}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b,M="rgb"){const I=[];if(u.values.length!=d.values.length)throw new Error(`colorArray: Arrays have mismatched length (${u.values.length} vs. ${d.values.length}), cannot interpolate.`);for(let D=0;D<u.values.length;D++)I.push(Gi.interpolate(u.values[D],d.values[D],b,M));return new Mo(I)}}class _o extends Error{constructor(u){super(u),this.name="RuntimeError"}toJSON(){return this.message}}const au=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class mo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof mo)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let d=0;d<u.length;d+=2){const b=u[d],M=u[d+1];if(typeof b!="string"||!au.has(b)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new mo(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,d,b){const M=u.values,I=d.values;if(M.length!==I.length)throw new _o(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${d.toString()}`);const D=[];for(let U=0;U<M.length;U+=2){if(M[U]!==I[U])throw new _o(`Cannot interpolate values containing mismatched anchors. from[${U}]: ${M[U]}, to[${U}]: ${I[U]}`);D.push(M[U]);const[F,ee]=M[U+1],[ne,ce]=I[U+1];D.push([Ji(F,ne,b),Ji(ee,ce,b)])}return new mo(D)}}class os{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new os({name:u,available:!1}):null}}class so{constructor(u,d,b){this.from=u,this.to=d,this.transition=b}static interpolate(u,d,b){return new so(u,d,b)}static parse(u){return u instanceof so?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new so(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new so(u.from,u.to,u.transition):typeof u=="string"?new so(u,u,1):void 0}}function ol(f,u,d,b){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255?b===void 0||typeof b=="number"&&b>=0&&b<=1?null:`Invalid rgba value [${[f,u,d,b].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof b=="number"?[f,u,d,b]:[f,u,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Pl(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof so||f instanceof Gi||f instanceof Na||f instanceof Ko||f instanceof oo||f instanceof ws||f instanceof Mo||f instanceof mo||f instanceof os)return!0;if(Array.isArray(f)){for(const u of f)if(!Pl(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!Pl(f[u]))return!1;return!0}return!1}function ji(f){if(f===null)return Vr;if(typeof f=="string")return Ni;if(typeof f=="boolean")return ri;if(typeof f=="number")return mn;if(f instanceof Gi)return nl;if(f instanceof so)return Xc;if(f instanceof Na)return Jl;if(f instanceof Ko)return po;if(f instanceof oo)return Oa;if(f instanceof ws)return da;if(f instanceof Mo)return eu;if(f instanceof mo)return Tl;if(f instanceof os)return Ho;if(Array.isArray(f)){const u=f.length;let d;for(const b of f){const M=ji(b);if(d){if(d===M)continue;d=Ki;break}d=M}return Zo(d||Ki,u)}return kl}function ki(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof Gi||f instanceof so||f instanceof Ko||f instanceof oo||f instanceof ws||f instanceof Mo||f instanceof mo||f instanceof os?f.toString():JSON.stringify(f)}class X{constructor(u,d){this.type=u,this.value=d}static parse(u,d){if(u.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!Pl(u[1]))return d.error("invalid value");const b=u[1];let M=ji(b);const I=d.expectedType;return M.kind!=="array"||M.N!==0||!I||I.kind!=="array"||typeof I.N=="number"&&I.N!==0||(M=I),new X(M,b)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const me={string:Ni,number:mn,boolean:ri,object:kl};class Ne{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let b,M=1;const I=u[0];if(I==="array"){let U,F;if(u.length>2){const ee=u[1];if(typeof ee!="string"||!(ee in me)||ee==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);U=me[ee],M++}else U=Ki;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return d.error('The length argument to "array" must be a positive integer literal',2);F=u[2],M++}b=Zo(U,F)}else{if(!me[I])throw new Error(`Types doesn't contain name = ${I}`);b=me[I]}const D=[];for(;M<u.length;M++){const U=d.parse(u[M],M,Ki);if(!U)return null;D.push(U)}return new Ne(b,D)}evaluate(u){for(let d=0;d<this.args.length;d++){const b=this.args[d].evaluate(u);if(!rs(this.type,ji(b)))return b;if(d===this.args.length-1)throw new _o(`Expected value to be of type ${Wi(this.type)}, but found ${Wi(ji(b))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const wt={"to-boolean":ri,"to-color":nl,"to-number":mn,"to-string":Ni};class hn{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const b=u[0];if(!wt[b])throw new Error(`Can't parse ${b} as it is not part of the known types`);if((b==="to-boolean"||b==="to-string")&&u.length!==2)return d.error("Expected one argument.");const M=wt[b],I=[];for(let D=1;D<u.length;D++){const U=d.parse(u[D],D,Ki);if(!U)return null;I.push(U)}return new hn(M,I)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let d,b;for(const M of this.args){if(d=M.evaluate(u),b=null,d instanceof Gi)return d;if(typeof d=="string"){const I=u.parseColor(d);if(I)return I}else if(Array.isArray(d)&&(b=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:ol(d[0],d[1],d[2],d[3]),!b))return new Gi(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new _o(b||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const b of this.args){d=b.evaluate(u);const M=oo.parse(d);if(M)return M}throw new _o(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"numberArray":{let d;for(const b of this.args){d=b.evaluate(u);const M=ws.parse(d);if(M)return M}throw new _o(`Could not parse numberArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"colorArray":{let d;for(const b of this.args){d=b.evaluate(u);const M=Mo.parse(d);if(M)return M}throw new _o(`Could not parse colorArray from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const b of this.args){d=b.evaluate(u);const M=mo.parse(d);if(M)return M}throw new _o(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const b of this.args){if(d=b.evaluate(u),d===null)return 0;const M=Number(d);if(!isNaN(M))return M}throw new _o(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return Ko.fromString(ki(this.args[0].evaluate(u)));case"resolvedImage":return os.fromString(ki(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return ki(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}const Bn=["Unknown","Point","LineString","Polygon"];class li{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let d=this._parseColorCache.get(u);return d||(d=Gi.parse(u),this._parseColorCache.set(u,d)),d}}class Ui{constructor(u,d,b=[],M,I=new Ks,D=[]){this.registry=u,this.path=b,this.key=b.map((U=>`[${U}]`)).join(""),this.scope=I,this.errors=D,this.expectedType=M,this._isConstant=d}parse(u,d,b,M,I={}){return d?this.concat(d,b,M)._parse(u,I):this._parse(u,I)}_parse(u,d){function b(M,I,D){return D==="assert"?new Ne(I,[M]):D==="coerce"?new hn(I,[M]):M}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=u[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const I=this.registry[M];if(I){let D=I.parse(u,this);if(!D)return null;if(this.expectedType){const U=this.expectedType,F=D.type;if(U.kind!=="string"&&U.kind!=="number"&&U.kind!=="boolean"&&U.kind!=="object"&&U.kind!=="array"||F.kind!=="value"){if(U.kind==="projectionDefinition"&&["string","array"].includes(F.kind)||["color","formatted","resolvedImage"].includes(U.kind)&&["value","string"].includes(F.kind)||["padding","numberArray"].includes(U.kind)&&["value","number","array"].includes(F.kind)||U.kind==="colorArray"&&["value","string","array"].includes(F.kind)||U.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(F.kind))D=b(D,U,d.typeAnnotation||"coerce");else if(this.checkSubtype(U,F))return null}else D=b(D,U,d.typeAnnotation||"assert")}if(!(D instanceof X)&&D.type.kind!=="resolvedImage"&&this._isConstant(D)){const U=new li;try{D=new X(D.type,D.evaluate(U))}catch(F){return this.error(F.message),null}}return D}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,d,b){const M=typeof u=="number"?this.path.concat(u):this.path,I=b?this.scope.concat(b):this.scope;return new Ui(this.registry,this._isConstant,M,d||null,I,this.errors)}error(u,...d){const b=`${this.key}${d.map((M=>`[${M}]`)).join("")}`;this.errors.push(new $o(b,u))}checkSubtype(u,d){const b=rs(u,d);return b&&this.error(b),b}}class wi{constructor(u,d){this.type=d.type,this.bindings=[].concat(u),this.result=d}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const d of this.bindings)u(d[1]);u(this.result)}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const b=[];for(let I=1;I<u.length-1;I+=2){const D=u[I];if(typeof D!="string")return d.error(`Expected string, but found ${typeof D} instead.`,I);if(/[^a-zA-Z0-9_]/.test(D))return d.error("Variable names must contain only alphanumeric characters or '_'.",I);const U=d.parse(u[I+1],I+1);if(!U)return null;b.push([D,U])}const M=d.parse(u[u.length-1],u.length-1,d.expectedType,b);return M?new wi(b,M):null}outputDefined(){return this.result.outputDefined()}}class Si{constructor(u,d){this.type=d.type,this.name=u,this.boundExpression=d}static parse(u,d){if(u.length!==2||typeof u[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const b=u[1];return d.scope.has(b)?new Si(b,d.scope.get(b)):d.error(`Unknown variable "${b}". Make sure "${b}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class fr{constructor(u,d,b){this.type=u,this.index=d,this.input=b}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,mn),M=d.parse(u[2],2,Zo(d.expectedType||Ki));return b&&M?new fr(M.type.itemType,b,M):null}evaluate(u){const d=this.index.evaluate(u),b=this.input.evaluate(u);if(d<0)throw new _o(`Array index out of bounds: ${d} < 0.`);if(d>=b.length)throw new _o(`Array index out of bounds: ${d} > ${b.length-1}.`);if(d!==Math.floor(d))throw new _o(`Array index must be an integer, but found ${d} instead.`);return b[d]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class ao{constructor(u,d){this.type=ri,this.needle=u,this.haystack=d}static parse(u,d){if(u.length!==3)return d.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Ki),M=d.parse(u[2],2,Ki);return b&&M?Dl(b.type,[ri,Ni,mn,Vr,Ki])?new ao(b,M):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wi(b.type)} instead`):null}evaluate(u){const d=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!b)return!1;if(!tu(d,["boolean","string","number","null"]))throw new _o(`Expected first argument to be of type boolean, string, number or null, but found ${Wi(ji(d))} instead.`);if(!tu(b,["string","array"]))throw new _o(`Expected second argument to be of type array or string, but found ${Wi(ji(b))} instead.`);return b.indexOf(d)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class br{constructor(u,d,b){this.type=mn,this.needle=u,this.haystack=d,this.fromIndex=b}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Ki),M=d.parse(u[2],2,Ki);if(!b||!M)return null;if(!Dl(b.type,[ri,Ni,mn,Vr,Ki]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wi(b.type)} instead`);if(u.length===4){const I=d.parse(u[3],3,mn);return I?new br(b,M,I):null}return new br(b,M)}evaluate(u){const d=this.needle.evaluate(u),b=this.haystack.evaluate(u);if(!tu(d,["boolean","string","number","null"]))throw new _o(`Expected first argument to be of type boolean, string, number or null, but found ${Wi(ji(d))} instead.`);let M;if(this.fromIndex&&(M=this.fromIndex.evaluate(u)),tu(b,["string"])){const I=b.indexOf(d,M);return I===-1?-1:[...b.slice(0,I)].length}if(tu(b,["array"]))return b.indexOf(d,M);throw new _o(`Expected second argument to be of type array or string, but found ${Wi(ji(b))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class yr{constructor(u,d,b,M,I,D){this.inputType=u,this.type=d,this.input=b,this.cases=M,this.outputs=I,this.otherwise=D}static parse(u,d){if(u.length<5)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return d.error("Expected an even number of arguments.");let b,M;d.expectedType&&d.expectedType.kind!=="value"&&(M=d.expectedType);const I={},D=[];for(let ee=2;ee<u.length-1;ee+=2){let ne=u[ee];const ce=u[ee+1];Array.isArray(ne)||(ne=[ne]);const _e=d.concat(ee);if(ne.length===0)return _e.error("Expected at least one branch label.");for(const Re of ne){if(typeof Re!="number"&&typeof Re!="string")return _e.error("Branch labels must be numbers or strings.");if(typeof Re=="number"&&Math.abs(Re)>Number.MAX_SAFE_INTEGER)return _e.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Re=="number"&&Math.floor(Re)!==Re)return _e.error("Numeric branch labels must be integer values.");if(b){if(_e.checkSubtype(b,ji(Re)))return null}else b=ji(Re);if(I[String(Re)]!==void 0)return _e.error("Branch labels must be unique.");I[String(Re)]=D.length}const we=d.parse(ce,ee,M);if(!we)return null;M=M||we.type,D.push(we)}const U=d.parse(u[1],1,Ki);if(!U)return null;const F=d.parse(u[u.length-1],u.length-1,M);return F?U.type.kind!=="value"&&d.concat(1).checkSubtype(b,U.type)?null:new yr(b,M,U,I,D,F):null}evaluate(u){const d=this.input.evaluate(u);return(ji(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))&&this.otherwise.outputDefined()}}class eo{constructor(u,d,b){this.type=u,this.branches=d,this.otherwise=b}static parse(u,d){if(u.length<4)return d.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return d.error("Expected an odd number of arguments.");let b;d.expectedType&&d.expectedType.kind!=="value"&&(b=d.expectedType);const M=[];for(let D=1;D<u.length-1;D+=2){const U=d.parse(u[D],D,ri);if(!U)return null;const F=d.parse(u[D+1],D+1,b);if(!F)return null;M.push([U,F]),b=b||F.type}const I=d.parse(u[u.length-1],u.length-1,b);if(!I)return null;if(!b)throw new Error("Can't infer output type");return new eo(b,M,I)}evaluate(u){for(const[d,b]of this.branches)if(d.evaluate(u))return b.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[d,b]of this.branches)u(d),u(b);u(this.otherwise)}outputDefined(){return this.branches.every((([u,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}}class Uo{constructor(u,d,b,M){this.type=u,this.input=d,this.beginIndex=b,this.endIndex=M}static parse(u,d){if(u.length<=2||u.length>=5)return d.error(`Expected 2 or 3 arguments, but found ${u.length-1} instead.`);const b=d.parse(u[1],1,Ki),M=d.parse(u[2],2,mn);if(!b||!M)return null;if(!Dl(b.type,[Zo(Ki),Ni,Ki]))return d.error(`Expected first argument to be of type array or string, but found ${Wi(b.type)} instead`);if(u.length===4){const I=d.parse(u[3],3,mn);return I?new Uo(b.type,b,M,I):null}return new Uo(b.type,b,M)}evaluate(u){const d=this.input.evaluate(u),b=this.beginIndex.evaluate(u);let M;if(this.endIndex&&(M=this.endIndex.evaluate(u)),tu(d,["string"]))return[...d].slice(b,M).join("");if(tu(d,["array"]))return d.slice(b,M);throw new _o(`Expected first argument to be of type array or string, but found ${Wi(ji(d))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Or(f,u){const d=f.length-1;let b,M,I=0,D=d,U=0;for(;I<=D;)if(U=Math.floor((I+D)/2),b=f[U],M=f[U+1],b<=u){if(U===d||u<M)return U;I=U+1}else{if(!(b>u))throw new _o("Input is not a number.");D=U-1}return 0}class Ss{constructor(u,d,b){this.type=u,this.input=d,this.labels=[],this.outputs=[];for(const[M,I]of b)this.labels.push(M),this.outputs.push(I)}static parse(u,d){if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");const b=d.parse(u[1],1,mn);if(!b)return null;const M=[];let I=null;d.expectedType&&d.expectedType.kind!=="value"&&(I=d.expectedType);for(let D=1;D<u.length;D+=2){const U=D===1?-1/0:u[D],F=u[D+1],ee=D,ne=D+1;if(typeof U!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(M.length&&M[M.length-1][0]>=U)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ee);const ce=d.parse(F,ne,I);if(!ce)return null;I=I||ce.type,M.push([U,ce])}return new Ss(I,b,M)}evaluate(u){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(u);const M=this.input.evaluate(u);if(M<=d[0])return b[0].evaluate(u);const I=d.length;return M>=d[I-1]?b[I-1].evaluate(u):b[Or(d,M)].evaluate(u)}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function ZA(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var gl,kr,_1=(function(){if(kr)return gl;function f(u,d,b,M){this.cx=3*u,this.bx=3*(b-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(M-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=d,this.p2x=b,this.p2y=M}return kr=1,gl=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,d){if(d===void 0&&(d=1e-6),u<0)return 0;if(u>1)return 1;for(var b=u,M=0;M<8;M++){var I=this.sampleCurveX(b)-u;if(Math.abs(I)<d)return b;var D=this.sampleCurveDerivativeX(b);if(Math.abs(D)<1e-6)break;b-=I/D}var U=0,F=1;for(b=u,M=0;M<20&&(I=this.sampleCurveX(b),!(Math.abs(I-u)<d));M++)u>I?U=b:F=b,b=.5*(F-U)+U;return b},solve:function(u,d){return this.sampleCurveY(this.solveCurveX(u,d))}},gl})(),lu=ZA(_1);class uu{constructor(u,d,b,M,I){this.type=u,this.operator=d,this.interpolation=b,this.input=M,this.labels=[],this.outputs=[];for(const[D,U]of I)this.labels.push(D),this.outputs.push(U)}static interpolationFactor(u,d,b,M){let I=0;if(u.name==="exponential")I=Rm(d,u.base,b,M);else if(u.name==="linear")I=Rm(d,1,b,M);else if(u.name==="cubic-bezier"){const D=u.controlPoints;I=new lu(D[0],D[1],D[2],D[3]).solve(Rm(d,1,b,M))}return I}static parse(u,d){let[b,M,I,...D]=u;if(!Array.isArray(M)||M.length===0)return d.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const ee=M[1];if(typeof ee!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:ee}}else{if(M[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const ee=M.slice(1);if(ee.length!==4||ee.some((ne=>typeof ne!="number"||ne<0||ne>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:ee}}}if(u.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(I=d.parse(I,2,mn),!I)return null;const U=[];let F=null;b!=="interpolate-hcl"&&b!=="interpolate-lab"||d.expectedType==eu?d.expectedType&&d.expectedType.kind!=="value"&&(F=d.expectedType):F=nl;for(let ee=0;ee<D.length;ee+=2){const ne=D[ee],ce=D[ee+1],_e=ee+3,we=ee+4;if(typeof ne!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(U.length&&U[U.length-1][0]>=ne)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_e);const Re=d.parse(ce,we,F);if(!Re)return null;F=F||Re.type,U.push([ne,Re])}return Eu(F,mn)||Eu(F,Xc)||Eu(F,nl)||Eu(F,Oa)||Eu(F,da)||Eu(F,eu)||Eu(F,Tl)||Eu(F,Zo(mn))?new uu(F,b,M,I,U):d.error(`Type ${Wi(F)} is not interpolatable.`)}evaluate(u){const d=this.labels,b=this.outputs;if(d.length===1)return b[0].evaluate(u);const M=this.input.evaluate(u);if(M<=d[0])return b[0].evaluate(u);const I=d.length;if(M>=d[I-1])return b[I-1].evaluate(u);const D=Or(d,M),U=uu.interpolationFactor(this.interpolation,M,d[D],d[D+1]),F=b[D].evaluate(u),ee=b[D+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ji(F,ee,U);case"color":return Gi.interpolate(F,ee,U);case"padding":return oo.interpolate(F,ee,U);case"colorArray":return Mo.interpolate(F,ee,U);case"numberArray":return ws.interpolate(F,ee,U);case"variableAnchorOffsetCollection":return mo.interpolate(F,ee,U);case"array":return rl(F,ee,U);case"projectionDefinition":return so.interpolate(F,ee,U)}case"interpolate-hcl":switch(this.type.kind){case"color":return Gi.interpolate(F,ee,U,"hcl");case"colorArray":return Mo.interpolate(F,ee,U,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Gi.interpolate(F,ee,U,"lab");case"colorArray":return Mo.interpolate(F,ee,U,"lab")}}}eachChild(u){u(this.input);for(const d of this.outputs)u(d)}outputDefined(){return this.outputs.every((u=>u.outputDefined()))}}function Rm(f,u,d,b){const M=b-d,I=f-d;return M===0?0:u===1?I/M:(Math.pow(u,I)-1)/(Math.pow(u,M)-1)}const ea={color:Gi.interpolate,number:Ji,padding:oo.interpolate,numberArray:ws.interpolate,colorArray:Mo.interpolate,variableAnchorOffsetCollection:mo.interpolate,array:rl};class yA{constructor(u,d){this.type=u,this.args=d}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");let b=null;const M=d.expectedType;M&&M.kind!=="value"&&(b=M);const I=[];for(const U of u.slice(1)){const F=d.parse(U,1+I.length,b,void 0,{typeAnnotation:"omit"});if(!F)return null;b=b||F.type,I.push(F)}if(!b)throw new Error("No output type");const D=M&&I.some((U=>rs(M,U.type)));return new yA(D?Ki:b,I)}evaluate(u){let d,b=null,M=0;for(const I of this.args)if(M++,b=I.evaluate(u),b&&b instanceof os&&!b.available&&(d||(d=b.name),b=null,M===this.args.length&&(b=d)),b!==null)break;return b}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every((u=>u.outputDefined()))}}function Ph(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Es(f,u,d,b){return b.compare(u,d)===0}function Bu(f,u,d){const b=f!=="=="&&f!=="!=";return class iZ{constructor(I,D,U){this.type=ri,this.lhs=I,this.rhs=D,this.collator=U,this.hasUntypedArgument=I.type.kind==="value"||D.type.kind==="value"}static parse(I,D){if(I.length!==3&&I.length!==4)return D.error("Expected two or three arguments.");const U=I[0];let F=D.parse(I[1],1,Ki);if(!F)return null;if(!Ph(U,F.type))return D.concat(1).error(`"${U}" comparisons are not supported for type '${Wi(F.type)}'.`);let ee=D.parse(I[2],2,Ki);if(!ee)return null;if(!Ph(U,ee.type))return D.concat(2).error(`"${U}" comparisons are not supported for type '${Wi(ee.type)}'.`);if(F.type.kind!==ee.type.kind&&F.type.kind!=="value"&&ee.type.kind!=="value")return D.error(`Cannot compare types '${Wi(F.type)}' and '${Wi(ee.type)}'.`);b&&(F.type.kind==="value"&&ee.type.kind!=="value"?F=new Ne(ee.type,[F]):F.type.kind!=="value"&&ee.type.kind==="value"&&(ee=new Ne(F.type,[ee])));let ne=null;if(I.length===4){if(F.type.kind!=="string"&&ee.type.kind!=="string"&&F.type.kind!=="value"&&ee.type.kind!=="value")return D.error("Cannot use collator to compare non-string types.");if(ne=D.parse(I[3],3,Jl),!ne)return null}return new iZ(F,ee,ne)}evaluate(I){const D=this.lhs.evaluate(I),U=this.rhs.evaluate(I);if(b&&this.hasUntypedArgument){const F=ji(D),ee=ji(U);if(F.kind!==ee.kind||F.kind!=="string"&&F.kind!=="number")throw new _o(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${F.kind}, ${ee.kind}) instead.`)}if(this.collator&&!b&&this.hasUntypedArgument){const F=ji(D),ee=ji(U);if(F.kind!=="string"||ee.kind!=="string")return u(I,D,U)}return this.collator?d(I,D,U,this.collator.evaluate(I)):u(I,D,U)}eachChild(I){I(this.lhs),I(this.rhs),this.collator&&I(this.collator)}outputDefined(){return!0}}}const Bf=Bu("==",(function(f,u,d){return u===d}),Es),xp=Bu("!=",(function(f,u,d){return u!==d}),(function(f,u,d,b){return!Es(0,u,d,b)})),oc=Bu("<",(function(f,u,d){return u<d}),(function(f,u,d,b){return b.compare(u,d)<0})),x1=Bu(">",(function(f,u,d){return u>d}),(function(f,u,d,b){return b.compare(u,d)>0})),Dm=Bu("<=",(function(f,u,d){return u<=d}),(function(f,u,d,b){return b.compare(u,d)<=0})),pv=Bu(">=",(function(f,u,d){return u>=d}),(function(f,u,d,b){return b.compare(u,d)>=0}));class Dd{constructor(u,d,b){this.type=Jl,this.locale=b,this.caseSensitive=u,this.diacriticSensitive=d}static parse(u,d){if(u.length!==2)return d.error("Expected one argument.");const b=u[1];if(typeof b!="object"||Array.isArray(b))return d.error("Collator options argument must be an object.");const M=d.parse(b["case-sensitive"]!==void 0&&b["case-sensitive"],1,ri);if(!M)return null;const I=d.parse(b["diacritic-sensitive"]!==void 0&&b["diacritic-sensitive"],1,ri);if(!I)return null;let D=null;return b.locale&&(D=d.parse(b.locale,1,Ni),!D)?null:new Dd(M,I,D)}evaluate(u){return new Na(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class Of{constructor(u,d,b,M,I){this.type=Ni,this.number=u,this.locale=d,this.currency=b,this.minFractionDigits=M,this.maxFractionDigits=I}static parse(u,d){if(u.length!==3)return d.error("Expected two arguments.");const b=d.parse(u[1],1,mn);if(!b)return null;const M=u[2];if(typeof M!="object"||Array.isArray(M))return d.error("NumberFormat options argument must be an object.");let I=null;if(M.locale&&(I=d.parse(M.locale,1,Ni),!I))return null;let D=null;if(M.currency&&(D=d.parse(M.currency,1,Ni),!D))return null;let U=null;if(M["min-fraction-digits"]&&(U=d.parse(M["min-fraction-digits"],1,mn),!U))return null;let F=null;return M["max-fraction-digits"]&&(F=d.parse(M["max-fraction-digits"],1,mn),!F)?null:new Of(b,I,D,U,F)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class XA{constructor(u){this.type=po,this.sections=u}static parse(u,d){if(u.length<2)return d.error("Expected at least one argument.");const b=u[1];if(!Array.isArray(b)&&typeof b=="object")return d.error("First argument must be an image or text section.");const M=[];let I=!1;for(let D=1;D<=u.length-1;++D){const U=u[D];if(I&&typeof U=="object"&&!Array.isArray(U)){I=!1;let F=null;if(U["font-scale"]&&(F=d.parse(U["font-scale"],1,mn),!F))return null;let ee=null;if(U["text-font"]&&(ee=d.parse(U["text-font"],1,Zo(Ni)),!ee))return null;let ne=null;if(U["text-color"]&&(ne=d.parse(U["text-color"],1,nl),!ne))return null;let ce=null;if(U["vertical-align"]){if(typeof U["vertical-align"]=="string"&&!Xo.includes(U["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${U["vertical-align"]}' instead.`);if(ce=d.parse(U["vertical-align"],1,Ni),!ce)return null}const _e=M[M.length-1];_e.scale=F,_e.font=ee,_e.textColor=ne,_e.verticalAlign=ce}else{const F=d.parse(u[D],1,Ki);if(!F)return null;const ee=F.type.kind;if(ee!=="string"&&ee!=="value"&&ee!=="null"&&ee!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");I=!0,M.push({content:F,scale:null,font:null,textColor:null,verticalAlign:null})}}return new XA(M)}evaluate(u){return new Ko(this.sections.map((d=>{const b=d.content.evaluate(u);return ji(b)===Ho?new su("",b,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(u):null):new su(ki(b),null,d.scale?d.scale.evaluate(u):null,d.font?d.font.evaluate(u).join(","):null,d.textColor?d.textColor.evaluate(u):null,d.verticalAlign?d.verticalAlign.evaluate(u):null)})))}eachChild(u){for(const d of this.sections)u(d.content),d.scale&&u(d.scale),d.font&&u(d.font),d.textColor&&u(d.textColor),d.verticalAlign&&u(d.verticalAlign)}outputDefined(){return!1}}class h0{constructor(u){this.type=Ho,this.input=u}static parse(u,d){if(u.length!==2)return d.error("Expected two arguments.");const b=d.parse(u[1],1,Ni);return b?new h0(b):d.error("No image name provided.")}evaluate(u){const d=this.input.evaluate(u),b=os.fromString(d);return b&&u.availableImages&&(b.available=u.availableImages.indexOf(d)>-1),b}eachChild(u){u(this.input)}outputDefined(){return!1}}class Pm{constructor(u){this.type=mn,this.input=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const b=d.parse(u[1],1);return b?b.type.kind!=="array"&&b.type.kind!=="string"&&b.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${Wi(b.type)} instead.`):new Pm(b):null}evaluate(u){const d=this.input.evaluate(u);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new _o(`Expected value to be of type string or array, but found ${Wi(ji(d))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Kl=8192;function Pd(f,u){const d=(180+f[0])/360,b=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,M=Math.pow(2,u.z);return[Math.round(d*M*Kl),Math.round(b*M*Kl)]}function If(f,u){const d=Math.pow(2,u.z);return[(M=(f[0]/Kl+u.x)/d,360*M-180),(b=(f[1]/Kl+u.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*b)*Math.PI/180))-90)];var b,M}function Kh(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function kf(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function Mp(f,u,d){const b=f[0]-u[0],M=f[1]-u[1],I=f[0]-d[0],D=f[1]-d[1];return b*D-I*M==0&&b*I<=0&&M*D<=0}function Kd(f,u,d,b){return(M=[b[0]-d[0],b[1]-d[1]])[0]*(I=[u[0]-f[0],u[1]-f[1]])[1]-M[1]*I[0]!=0&&!(!wp(f,u,d,b)||!wp(d,b,f,u));var M,I}function M1(f,u,d){for(const b of d)for(let M=0;M<b.length-1;++M)if(Kd(f,u,b[M],b[M+1]))return!0;return!1}function Oc(f,u,d=!1){let b=!1;for(const U of u)for(let F=0;F<U.length-1;F++){if(Mp(f,U[F],U[F+1]))return d;(I=U[F])[1]>(M=f)[1]!=(D=U[F+1])[1]>M[1]&&M[0]<(D[0]-I[0])*(M[1]-I[1])/(D[1]-I[1])+I[0]&&(b=!b)}var M,I,D;return b}function sc(f,u){for(const d of u)if(Oc(f,d))return!0;return!1}function Km(f,u){for(const d of f)if(!Oc(d,u))return!1;for(let d=0;d<f.length-1;++d)if(M1(f[d],f[d+1],u))return!1;return!0}function Tf(f,u){for(const d of u)if(Km(f,d))return!0;return!1}function wp(f,u,d,b){const M=b[0]-d[0],I=b[1]-d[1],D=(f[0]-d[0])*I-M*(f[1]-d[1]),U=(u[0]-d[0])*I-M*(u[1]-d[1]);return D>0&&U<0||D<0&&U>0}function Rf(f,u,d){const b=[];for(let M=0;M<f.length;M++){const I=[];for(let D=0;D<f[M].length;D++){const U=Pd(f[M][D],d);Kh(u,U),I.push(U)}b.push(I)}return b}function Df(f,u,d){const b=[];for(let M=0;M<f.length;M++){const I=Rf(f[M],u,d);b.push(I)}return b}function Pf(f,u,d,b){if(f[0]<d[0]||f[0]>d[2]){const M=.5*b;let I=f[0]-d[0]>M?-b:d[0]-f[0]>M?b:0;I===0&&(I=f[0]-d[2]>M?-b:d[2]-f[0]>M?b:0),f[0]+=I}Kh(u,f)}function w1(f,u,d,b){const M=Math.pow(2,b.z)*Kl,I=[b.x*Kl,b.y*Kl],D=[];for(const U of f)for(const F of U){const ee=[F.x+I[0],F.y+I[1]];Pf(ee,u,d,M),D.push(ee)}return D}function Sp(f,u,d,b){const M=Math.pow(2,b.z)*Kl,I=[b.x*Kl,b.y*Kl],D=[];for(const F of f){const ee=[];for(const ne of F){const ce=[ne.x+I[0],ne.y+I[1]];Kh(u,ce),ee.push(ce)}D.push(ee)}if(u[2]-u[0]<=M/2){(U=u)[0]=U[1]=1/0,U[2]=U[3]=-1/0;for(const F of D)for(const ee of F)Pf(ee,u,d,M)}var U;return D}class tA{constructor(u,d){this.type=ri,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Pl(u[1])){const b=u[1];if(b.type==="FeatureCollection"){const M=[];for(const I of b.features){const{type:D,coordinates:U}=I.geometry;D==="Polygon"&&M.push(U),D==="MultiPolygon"&&M.push(...U)}if(M.length)return new tA(b,{type:"MultiPolygon",coordinates:M})}else if(b.type==="Feature"){const M=b.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new tA(b,b.geometry)}else if(b.type==="Polygon"||b.type==="MultiPolygon")return new tA(b,b)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,b){const M=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],D=d.canonicalID();if(b.type==="Polygon"){const U=Rf(b.coordinates,I,D),F=w1(d.geometry(),M,I,D);if(!kf(M,I))return!1;for(const ee of F)if(!Oc(ee,U))return!1}if(b.type==="MultiPolygon"){const U=Df(b.coordinates,I,D),F=w1(d.geometry(),M,I,D);if(!kf(M,I))return!1;for(const ee of F)if(!sc(ee,U))return!1}return!0})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,b){const M=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],D=d.canonicalID();if(b.type==="Polygon"){const U=Rf(b.coordinates,I,D),F=Sp(d.geometry(),M,I,D);if(!kf(M,I))return!1;for(const ee of F)if(!Km(ee,U))return!1}if(b.type==="MultiPolygon"){const U=Df(b.coordinates,I,D),F=Sp(d.geometry(),M,I,D);if(!kf(M,I))return!1;for(const ee of F)if(!Tf(ee,U))return!1}return!0})(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Uh=class{constructor(f=[],u=(d,b)=>d<b?-1:d>b?1:0){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:d}=this,b=u[f];for(;f>0;){const M=f-1>>1,I=u[M];if(d(b,I)>=0)break;u[f]=I,f=M}u[f]=b}_down(f){const{data:u,compare:d}=this,b=this.length>>1,M=u[f];for(;f<b;){let I=1+(f<<1);const D=I+1;if(D<this.length&&d(u[D],u[I])<0&&(I=D),d(u[I],M)>=0)break;u[f]=u[I],f=I}u[f]=M}};function Um(f,u,d=0,b=f.length-1,M=Lm){for(;b>d;){if(b-d>600){const F=b-d+1,ee=u-d+1,ne=Math.log(F),ce=.5*Math.exp(2*ne/3),_e=.5*Math.sqrt(ne*ce*(F-ce)/F)*(ee-F/2<0?-1:1);Um(f,u,Math.max(d,Math.floor(u-ee*ce/F+_e)),Math.min(b,Math.floor(u+(F-ee)*ce/F+_e)),M)}const I=f[u];let D=d,U=b;for(Ud(f,d,u),M(f[b],I)>0&&Ud(f,d,b);D<U;){for(Ud(f,D,U),D++,U--;M(f[D],I)<0;)D++;for(;M(f[U],I)>0;)U--}M(f[d],I)===0?Ud(f,d,U):(U++,Ud(f,U,b)),U<=u&&(d=U+1),u<=U&&(b=U-1)}}function Ud(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}function Lm(f,u){return f<u?-1:f>u?1:0}function Lh(f,u){if(f.length<=1)return[f];const d=[];let b,M;for(const I of f){const D=zm(I);D!==0&&(I.area=Math.abs(D),M===void 0&&(M=D<0),M===D<0?(b&&d.push(b),b=[I]):b.push(I))}if(b&&d.push(b),u>1)for(let I=0;I<d.length;I++)d[I].length<=u||(Um(d[I],u,1,d[I].length-1,vA),d[I]=d[I].slice(0,u));return d}function vA(f,u){return u.area-f.area}function zm(f){let u=0;for(let d,b,M=0,I=f.length,D=I-1;M<I;D=M++)d=f[M],b=f[D],u+=(b.x-d.x)*(d.y+b.y);return u}const S1=1/298.257223563,d0=S1*(2-S1),f0=Math.PI/180;class zh{constructor(u){const d=6378.137*f0*1e3,b=Math.cos(u*f0),M=1/(1-d0*(1-b*b)),I=Math.sqrt(M);this.kx=d*I*b,this.ky=d*I*M*(1-d0)}distance(u,d){const b=this.wrap(u[0]-d[0])*this.kx,M=(u[1]-d[1])*this.ky;return Math.sqrt(b*b+M*M)}pointOnLine(u,d){let b,M,I,D,U=1/0;for(let F=0;F<u.length-1;F++){let ee=u[F][0],ne=u[F][1],ce=this.wrap(u[F+1][0]-ee)*this.kx,_e=(u[F+1][1]-ne)*this.ky,we=0;ce===0&&_e===0||(we=(this.wrap(d[0]-ee)*this.kx*ce+(d[1]-ne)*this.ky*_e)/(ce*ce+_e*_e),we>1?(ee=u[F+1][0],ne=u[F+1][1]):we>0&&(ee+=ce/this.kx*we,ne+=_e/this.ky*we)),ce=this.wrap(d[0]-ee)*this.kx,_e=(d[1]-ne)*this.ky;const Re=ce*ce+_e*_e;Re<U&&(U=Re,b=ee,M=ne,I=F,D=we)}return{point:[b,M],index:I,t:Math.max(0,Math.min(1,D))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function Ls(f,u){return u[0]-f[0]}function JA(f){return f[1]-f[0]+1}function nA(f,u){return f[1]>=f[0]&&f[1]<u}function Fm(f,u){if(f[0]>f[1])return[null,null];const d=JA(f);if(u){if(d===2)return[f,null];const M=Math.floor(d/2);return[[f[0],f[0]+M],[f[0]+M,f[1]]]}if(d===1)return[f,null];const b=Math.floor(d/2)-1;return[[f[0],f[0]+b],[f[0]+b+1,f[1]]]}function jm(f,u){if(!nA(u,f.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let b=u[0];b<=u[1];++b)Kh(d,f[b]);return d}function Nm(f){const u=[1/0,1/0,-1/0,-1/0];for(const d of f)for(const b of d)Kh(u,b);return u}function Gm(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Nr(f,u,d){if(!Gm(f)||!Gm(u))return NaN;let b=0,M=0;return f[2]<u[0]&&(b=u[0]-f[2]),f[0]>u[2]&&(b=f[0]-u[2]),f[1]>u[3]&&(M=f[1]-u[3]),f[3]<u[1]&&(M=u[1]-f[3]),d.distance([0,0],[b,M])}function kt(f,u,d){const b=d.pointOnLine(u,f);return d.distance(f,b.point)}function sn(f,u,d,b,M){const I=Math.min(kt(f,[d,b],M),kt(u,[d,b],M)),D=Math.min(kt(d,[f,u],M),kt(b,[f,u],M));return Math.min(I,D)}function tn(f,u,d,b,M){if(!nA(u,f.length)||!nA(b,d.length))return 1/0;let I=1/0;for(let D=u[0];D<u[1];++D){const U=f[D],F=f[D+1];for(let ee=b[0];ee<b[1];++ee){const ne=d[ee],ce=d[ee+1];if(Kd(U,F,ne,ce))return 0;I=Math.min(I,sn(U,F,ne,ce,M))}}return I}function hi(f,u,d,b,M){if(!nA(u,f.length)||!nA(b,d.length))return NaN;let I=1/0;for(let D=u[0];D<=u[1];++D)for(let U=b[0];U<=b[1];++U)if(I=Math.min(I,M.distance(f[D],d[U])),I===0)return I;return I}function vr(f,u,d){if(Oc(f,u,!0))return 0;let b=1/0;for(const M of u){const I=M[0],D=M[M.length-1];if(I!==D&&(b=Math.min(b,kt(f,[D,I],d)),b===0))return b;const U=d.pointOnLine(M,f);if(b=Math.min(b,d.distance(f,U.point)),b===0)return b}return b}function $r(f,u,d,b){if(!nA(u,f.length))return NaN;for(let I=u[0];I<=u[1];++I)if(Oc(f[I],d,!0))return 0;let M=1/0;for(let I=u[0];I<u[1];++I){const D=f[I],U=f[I+1];for(const F of d)for(let ee=0,ne=F.length,ce=ne-1;ee<ne;ce=ee++){const _e=F[ce],we=F[ee];if(Kd(D,U,_e,we))return 0;M=Math.min(M,sn(D,U,_e,we,b))}}return M}function Bs(f,u){for(const d of f)for(const b of d)if(Oc(b,u,!0))return!0;return!1}function jo(f,u,d,b=1/0){const M=Nm(f),I=Nm(u);if(b!==1/0&&Nr(M,I,d)>=b)return b;if(kf(M,I)){if(Bs(f,u))return 0}else if(Bs(u,f))return 0;let D=1/0;for(const U of f)for(let F=0,ee=U.length,ne=ee-1;F<ee;ne=F++){const ce=U[ne],_e=U[F];for(const we of u)for(let Re=0,ze=we.length,He=ze-1;Re<ze;He=Re++){const nt=we[He],Bt=we[Re];if(Kd(ce,_e,nt,Bt))return 0;D=Math.min(D,sn(ce,_e,nt,Bt,d))}}return D}function Ep(f,u,d,b,M,I){if(!I)return;const D=Nr(jm(b,I),M,d);D<u&&f.push([D,I,[0,0]])}function bA(f,u,d,b,M,I,D){if(!I||!D)return;const U=Nr(jm(b,I),jm(M,D),d);U<u&&f.push([U,I,D])}function Ul(f,u,d,b,M=1/0){let I=Math.min(b.distance(f[0],d[0][0]),M);if(I===0)return I;const D=new Uh([[0,[0,f.length-1],[0,0]]],Ls),U=Nm(d);for(;D.length>0;){const F=D.pop();if(F[0]>=I)continue;const ee=F[1],ne=u?50:100;if(JA(ee)<=ne){if(!nA(ee,f.length))return NaN;if(u){const ce=$r(f,ee,d,b);if(isNaN(ce)||ce===0)return ce;I=Math.min(I,ce)}else for(let ce=ee[0];ce<=ee[1];++ce){const _e=vr(f[ce],d,b);if(I=Math.min(I,_e),I===0)return 0}}else{const ce=Fm(ee,u);Ep(D,I,b,f,U,ce[0]),Ep(D,I,b,f,U,ce[1])}}return I}function Fh(f,u,d,b,M,I=1/0){let D=Math.min(I,M.distance(f[0],d[0]));if(D===0)return D;const U=new Uh([[0,[0,f.length-1],[0,d.length-1]]],Ls);for(;U.length>0;){const F=U.pop();if(F[0]>=D)continue;const ee=F[1],ne=F[2],ce=u?50:100,_e=b?50:100;if(JA(ee)<=ce&&JA(ne)<=_e){if(!nA(ee,f.length)&&nA(ne,d.length))return NaN;let we;if(u&&b)we=tn(f,ee,d,ne,M),D=Math.min(D,we);else if(u&&!b){const Re=f.slice(ee[0],ee[1]+1);for(let ze=ne[0];ze<=ne[1];++ze)if(we=kt(d[ze],Re,M),D=Math.min(D,we),D===0)return D}else if(!u&&b){const Re=d.slice(ne[0],ne[1]+1);for(let ze=ee[0];ze<=ee[1];++ze)if(we=kt(f[ze],Re,M),D=Math.min(D,we),D===0)return D}else we=hi(f,ee,d,ne,M),D=Math.min(D,we)}else{const we=Fm(ee,u),Re=Fm(ne,b);bA(U,D,M,f,d,we[0],Re[0]),bA(U,D,M,f,d,we[0],Re[1]),bA(U,D,M,f,d,we[1],Re[0]),bA(U,D,M,f,d,we[1],Re[1])}}return D}function Qm(f){return f.type==="MultiPolygon"?f.coordinates.map((u=>({type:"Polygon",coordinates:u}))):f.type==="MultiLineString"?f.coordinates.map((u=>({type:"LineString",coordinates:u}))):f.type==="MultiPoint"?f.coordinates.map((u=>({type:"Point",coordinates:u}))):[f]}class Ic{constructor(u,d){this.type=mn,this.geojson=u,this.geometries=d}static parse(u,d){if(u.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Pl(u[1])){const b=u[1];if(b.type==="FeatureCollection")return new Ic(b,b.features.map((M=>Qm(M.geometry))).flat());if(b.type==="Feature")return new Ic(b,Qm(b.geometry));if("type"in b&&"coordinates"in b)return new Ic(b,Qm(b))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return(function(d,b){const M=d.geometry(),I=M.flat().map((F=>If([F.x,F.y],d.canonical)));if(M.length===0)return NaN;const D=new zh(I[0][1]);let U=1/0;for(const F of b){switch(F.type){case"Point":U=Math.min(U,Fh(I,!1,[F.coordinates],!1,D,U));break;case"LineString":U=Math.min(U,Fh(I,!1,F.coordinates,!0,D,U));break;case"Polygon":U=Math.min(U,Ul(I,!1,F.coordinates,D,U))}if(U===0)return U}return U})(u,this.geometries);if(u.geometryType()==="LineString")return(function(d,b){const M=d.geometry(),I=M.flat().map((F=>If([F.x,F.y],d.canonical)));if(M.length===0)return NaN;const D=new zh(I[0][1]);let U=1/0;for(const F of b){switch(F.type){case"Point":U=Math.min(U,Fh(I,!0,[F.coordinates],!1,D,U));break;case"LineString":U=Math.min(U,Fh(I,!0,F.coordinates,!0,D,U));break;case"Polygon":U=Math.min(U,Ul(I,!0,F.coordinates,D,U))}if(U===0)return U}return U})(u,this.geometries);if(u.geometryType()==="Polygon")return(function(d,b){const M=d.geometry();if(M.length===0||M[0].length===0)return NaN;const I=Lh(M,0).map((F=>F.map((ee=>ee.map((ne=>If([ne.x,ne.y],d.canonical))))))),D=new zh(I[0][0][0][1]);let U=1/0;for(const F of b)for(const ee of I){switch(F.type){case"Point":U=Math.min(U,Ul([F.coordinates],!1,ee,D,U));break;case"LineString":U=Math.min(U,Ul(F.coordinates,!0,ee,D,U));break;case"Polygon":U=Math.min(U,jo(ee,F.coordinates,D,U))}if(U===0)return U}return U})(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class jh{constructor(u){this.type=Ki,this.key=u}static parse(u,d){if(u.length!==2)return d.error(`Expected 1 argument, but found ${u.length-1} instead.`);const b=u[1];return b==null?d.error("Global state property must be defined."):typeof b!="string"?d.error(`Global state property must be string, but found ${typeof u[1]} instead.`):new jh(b)}evaluate(u){var d;const b=(d=u.globals)===null||d===void 0?void 0:d.globalState;return b&&Object.keys(b).length!==0?Ms(b,this.key):null}eachChild(){}outputDefined(){return!1}}const eh={"==":Bf,"!=":xp,">":x1,"<":oc,">=":pv,"<=":Dm,array:Ne,at:fr,boolean:Ne,case:eo,coalesce:yA,collator:Dd,format:XA,image:h0,in:ao,"index-of":br,interpolate:uu,"interpolate-hcl":uu,"interpolate-lab":uu,length:Pm,let:wi,literal:X,match:yr,number:Ne,"number-format":Of,object:Ne,slice:Uo,step:Ss,string:Ne,"to-boolean":hn,"to-color":hn,"to-number":hn,"to-string":hn,var:Si,within:tA,distance:Ic,"global-state":jh};class Tr{constructor(u,d,b,M){this.name=u,this.type=d,this._evaluate=b,this.args=M}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,d){const b=u[0],M=Tr.definitions[b];if(!M)return d.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0);const I=Array.isArray(M)?M[0]:M.type,D=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,U=D.filter((([ee])=>!Array.isArray(ee)||ee.length===u.length-1));let F=null;for(const[ee,ne]of U){F=new Ui(d.registry,cu,d.path,null,d.scope);const ce=[];let _e=!1;for(let we=1;we<u.length;we++){const Re=u[we],ze=Array.isArray(ee)?ee[we-1]:ee.type,He=F.parse(Re,1+ce.length,ze);if(!He){_e=!0;break}ce.push(He)}if(!_e)if(Array.isArray(ee)&&ee.length!==ce.length)F.error(`Expected ${ee.length} arguments, but found ${ce.length} instead.`);else{for(let we=0;we<ce.length;we++){const Re=Array.isArray(ee)?ee[we]:ee.type,ze=ce[we];F.concat(we+1).checkSubtype(Re,ze.type)}if(F.errors.length===0)return new Tr(b,I,ne,ce)}}if(U.length===1)d.errors.push(...F.errors);else{const ee=(U.length?U:D).map((([ce])=>{return _e=ce,Array.isArray(_e)?`(${_e.map(Wi).join(", ")})`:`(${Wi(_e.type)}...)`;var _e})).join(" | "),ne=[];for(let ce=1;ce<u.length;ce++){const _e=d.parse(u[ce],1+ne.length);if(!_e)return null;ne.push(Wi(_e.type))}d.error(`Expected arguments of type ${ee}, but found (${ne.join(", ")}) instead.`)}return null}static register(u,d){Tr.definitions=d;for(const b in d)u[b]=Tr}}function p0(f,[u,d,b,M]){u=u.evaluate(f),d=d.evaluate(f),b=b.evaluate(f);const I=M?M.evaluate(f):1,D=ol(u,d,b,I);if(D)throw new _o(D);return new Gi(u/255,d/255,b/255,I,!1)}function Bp(f,u){return f in u}function Ll(f,u){const d=u[f];return d===void 0?null:d}function CA(f){return{type:f}}function cu(f){if(f instanceof Si)return cu(f.boundExpression);if(f instanceof Tr&&f.name==="error"||f instanceof Dd||f instanceof tA||f instanceof Ic||f instanceof jh)return!1;const u=f instanceof hn||f instanceof Ne;let d=!0;return f.eachChild((b=>{d=u?d&&cu(b):d&&b instanceof X})),!!d&&th(f)&&Ou(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function th(f){if(f instanceof Tr&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof tA||f instanceof Ic)return!1;let u=!0;return f.eachChild((d=>{u&&!th(d)&&(u=!1)})),u}function _A(f){if(f instanceof Tr&&f.name==="feature-state")return!1;let u=!0;return f.eachChild((d=>{u&&!_A(d)&&(u=!1)})),u}function Ou(f,u){if(f instanceof Tr&&u.indexOf(f.name)>=0)return!1;let d=!0;return f.eachChild((b=>{d&&!Ou(b,u)&&(d=!1)})),d}function Nh(f){return{result:"success",value:f}}function nh(f){return{result:"error",value:f}}function Au(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function Wm(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Ld(f){return!!f.expression&&f.expression.interpolated}function lr(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function zd(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&ji(f)===kl}function yl(f){return f}function xA(f,u){const d=f.stops&&typeof f.stops[0][0]=="object",b=d||!(d||f.property!==void 0),M=f.type||(Ld(u)?"exponential":"interval"),I=(function(ne){switch(ne.type){case"color":return Gi.parse;case"padding":return oo.parse;case"numberArray":return ws.parse;case"colorArray":return Mo.parse;default:return null}})(u);if(I&&((f=Pi({},f)).stops&&(f.stops=f.stops.map((ne=>[ne[0],I(ne[1])]))),f.default=I(f.default?f.default:u.default)),f.colorSpace&&(D=f.colorSpace)!=="rgb"&&D!=="hcl"&&D!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var D;const U=(function(ne){switch(ne){case"exponential":return Gh;case"interval":return qm;case"categorical":return m0;case"identity":return ih;default:throw new Error(`Unknown function type "${ne}"`)}})(M);let F,ee;if(M==="categorical"){F=Object.create(null);for(const ne of f.stops)F[ne[0]]=ne[1];ee=typeof f.stops[0][0]}if(d){const ne={},ce=[];for(let Re=0;Re<f.stops.length;Re++){const ze=f.stops[Re],He=ze[0].zoom;ne[He]===void 0&&(ne[He]={zoom:He,type:f.type,property:f.property,default:f.default,stops:[]},ce.push(He)),ne[He].stops.push([ze[0].value,ze[1]])}const _e=[];for(const Re of ce)_e.push([ne[Re].zoom,xA(ne[Re],u)]);const we={name:"linear"};return{kind:"composite",interpolationType:we,interpolationFactor:uu.interpolationFactor.bind(void 0,we),zoomStops:_e.map((Re=>Re[0])),evaluate:({zoom:Re},ze)=>Gh({stops:_e,base:f.base},u,Re).evaluate(Re,ze)}}if(b){const ne=M==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:uu.interpolationFactor.bind(void 0,ne),zoomStops:f.stops.map((ce=>ce[0])),evaluate:({zoom:ce})=>U(f,u,ce,F,ee)}}return{kind:"source",evaluate(ne,ce){const _e=ce&&ce.properties?ce.properties[f.property]:void 0;return _e===void 0?zl(f.default,u.default):U(f,u,_e,F,ee)}}}function zl(f,u,d){return f!==void 0?f:u!==void 0?u:d!==void 0?d:void 0}function m0(f,u,d,b,M){return zl(typeof d===M?b[d]:void 0,f.default,u.default)}function qm(f,u,d){if(lr(d)!=="number")return zl(f.default,u.default);const b=f.stops.length;if(b===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[b-1][0])return f.stops[b-1][1];const M=Or(f.stops.map((I=>I[0])),d);return f.stops[M][1]}function Gh(f,u,d){const b=f.base!==void 0?f.base:1;if(lr(d)!=="number")return zl(f.default,u.default);const M=f.stops.length;if(M===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[M-1][0])return f.stops[M-1][1];const I=Or(f.stops.map((ne=>ne[0])),d),D=(function(ne,ce,_e,we){const Re=we-_e,ze=ne-_e;return Re===0?0:ce===1?ze/Re:(Math.pow(ce,ze)-1)/(Math.pow(ce,Re)-1)})(d,b,f.stops[I][0],f.stops[I+1][0]),U=f.stops[I][1],F=f.stops[I+1][1],ee=ea[u.type]||yl;return typeof U.evaluate=="function"?{evaluate(...ne){const ce=U.evaluate.apply(void 0,ne),_e=F.evaluate.apply(void 0,ne);if(ce!==void 0&&_e!==void 0)return ee(ce,_e,D,f.colorSpace)}}:ee(U,F,D,f.colorSpace)}function ih(f,u,d){switch(u.type){case"color":d=Gi.parse(d);break;case"formatted":d=Ko.fromString(d.toString());break;case"resolvedImage":d=os.fromString(d.toString());break;case"padding":d=oo.parse(d);break;case"colorArray":d=Mo.parse(d);break;case"numberArray":d=ws.parse(d);break;default:lr(d)===u.type||u.type==="enum"&&u.values[d]||(d=void 0)}return zl(d,f.default,u.default)}Tr.register(eh,{error:[{kind:"error"},[Ni],(f,[u])=>{throw new _o(u.evaluate(f))}],typeof:[Ni,[Ki],(f,[u])=>Wi(ji(u.evaluate(f)))],"to-rgba":[Zo(mn,4),[nl],(f,[u])=>{const[d,b,M,I]=u.evaluate(f).rgb;return[255*d,255*b,255*M,I]}],rgb:[nl,[mn,mn,mn],p0],rgba:[nl,[mn,mn,mn,mn],p0],has:{type:ri,overloads:[[[Ni],(f,[u])=>Bp(u.evaluate(f),f.properties())],[[Ni,kl],(f,[u,d])=>Bp(u.evaluate(f),d.evaluate(f))]]},get:{type:Ki,overloads:[[[Ni],(f,[u])=>Ll(u.evaluate(f),f.properties())],[[Ni,kl],(f,[u,d])=>Ll(u.evaluate(f),d.evaluate(f))]]},"feature-state":[Ki,[Ni],(f,[u])=>Ll(u.evaluate(f),f.featureState||{})],properties:[kl,[],f=>f.properties()],"geometry-type":[Ni,[],f=>f.geometryType()],id:[Ki,[],f=>f.id()],zoom:[mn,[],f=>f.globals.zoom],"heatmap-density":[mn,[],f=>f.globals.heatmapDensity||0],elevation:[mn,[],f=>f.globals.elevation||0],"line-progress":[mn,[],f=>f.globals.lineProgress||0],accumulated:[Ki,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[mn,CA(mn),(f,u)=>{let d=0;for(const b of u)d+=b.evaluate(f);return d}],"*":[mn,CA(mn),(f,u)=>{let d=1;for(const b of u)d*=b.evaluate(f);return d}],"-":{type:mn,overloads:[[[mn,mn],(f,[u,d])=>u.evaluate(f)-d.evaluate(f)],[[mn],(f,[u])=>-u.evaluate(f)]]},"/":[mn,[mn,mn],(f,[u,d])=>u.evaluate(f)/d.evaluate(f)],"%":[mn,[mn,mn],(f,[u,d])=>u.evaluate(f)%d.evaluate(f)],ln2:[mn,[],()=>Math.LN2],pi:[mn,[],()=>Math.PI],e:[mn,[],()=>Math.E],"^":[mn,[mn,mn],(f,[u,d])=>Math.pow(u.evaluate(f),d.evaluate(f))],sqrt:[mn,[mn],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[mn,[mn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[mn,[mn],(f,[u])=>Math.log(u.evaluate(f))],log2:[mn,[mn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[mn,[mn],(f,[u])=>Math.sin(u.evaluate(f))],cos:[mn,[mn],(f,[u])=>Math.cos(u.evaluate(f))],tan:[mn,[mn],(f,[u])=>Math.tan(u.evaluate(f))],asin:[mn,[mn],(f,[u])=>Math.asin(u.evaluate(f))],acos:[mn,[mn],(f,[u])=>Math.acos(u.evaluate(f))],atan:[mn,[mn],(f,[u])=>Math.atan(u.evaluate(f))],min:[mn,CA(mn),(f,u)=>Math.min(...u.map((d=>d.evaluate(f))))],max:[mn,CA(mn),(f,u)=>Math.max(...u.map((d=>d.evaluate(f))))],abs:[mn,[mn],(f,[u])=>Math.abs(u.evaluate(f))],round:[mn,[mn],(f,[u])=>{const d=u.evaluate(f);return d<0?-Math.round(-d):Math.round(d)}],floor:[mn,[mn],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[mn,[mn],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[ri,[Ni,Ki],(f,[u,d])=>f.properties()[u.value]===d.value],"filter-id-==":[ri,[Ki],(f,[u])=>f.id()===u.value],"filter-type-==":[ri,[Ni],(f,[u])=>f.geometryType()===u.value],"filter-<":[ri,[Ni,Ki],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b<M}],"filter-id-<":[ri,[Ki],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d<b}],"filter->":[ri,[Ni,Ki],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b>M}],"filter-id->":[ri,[Ki],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d>b}],"filter-<=":[ri,[Ni,Ki],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b<=M}],"filter-id-<=":[ri,[Ki],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d<=b}],"filter->=":[ri,[Ni,Ki],(f,[u,d])=>{const b=f.properties()[u.value],M=d.value;return typeof b==typeof M&&b>=M}],"filter-id->=":[ri,[Ki],(f,[u])=>{const d=f.id(),b=u.value;return typeof d==typeof b&&d>=b}],"filter-has":[ri,[Ki],(f,[u])=>u.value in f.properties()],"filter-has-id":[ri,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[ri,[Zo(Ni)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[ri,[Zo(Ki)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[ri,[Ni,Zo(Ki)],(f,[u,d])=>d.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[ri,[Ni,Zo(Ki)],(f,[u,d])=>(function(b,M,I,D){for(;I<=D;){const U=I+D>>1;if(M[U]===b)return!0;M[U]>b?D=U-1:I=U+1}return!1})(f.properties()[u.value],d.value,0,d.value.length-1)],all:{type:ri,overloads:[[[ri,ri],(f,[u,d])=>u.evaluate(f)&&d.evaluate(f)],[CA(ri),(f,u)=>{for(const d of u)if(!d.evaluate(f))return!1;return!0}]]},any:{type:ri,overloads:[[[ri,ri],(f,[u,d])=>u.evaluate(f)||d.evaluate(f)],[CA(ri),(f,u)=>{for(const d of u)if(d.evaluate(f))return!0;return!1}]]},"!":[ri,[ri],(f,[u])=>!u.evaluate(f)],"is-supported-script":[ri,[Ni],(f,[u])=>{const d=f.globals&&f.globals.isSupportedScript;return!d||d(u.evaluate(f))}],upcase:[Ni,[Ni],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[Ni,[Ni],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[Ni,CA(Ki),(f,u)=>u.map((d=>ki(d.evaluate(f)))).join("")],"resolved-locale":[Ni,[Jl],(f,[u])=>u.evaluate(f).resolvedLocale()]});class Qh{constructor(u,d,b){this.expression=u,this._warningHistory={},this._evaluator=new li,this._defaultValue=d?(function(M){if(M.type==="color"&&zd(M.default))return new Gi(0,0,0,0);switch(M.type){case"color":return Gi.parse(M.default)||null;case"padding":return oo.parse(M.default)||null;case"numberArray":return ws.parse(M.default)||null;case"colorArray":return Mo.parse(M.default)||null;case"variableAnchorOffsetCollection":return mo.parse(M.default)||null;case"projectionDefinition":return so.parse(M.default)||null;default:return M.default===void 0?null:M.default}})(d):null,this._enumValues=d&&d.type==="enum"?d.values:null,this._globalState=b}evaluateWithoutErrorHandling(u,d,b,M,I,D){return this._globalState&&(u=vl(u,this._globalState)),this._evaluator.globals=u,this._evaluator.feature=d,this._evaluator.featureState=b,this._evaluator.canonical=M,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=D,this.expression.evaluate(this._evaluator)}evaluate(u,d,b,M,I,D){this._globalState&&(u=vl(u,this._globalState)),this._evaluator.globals=u,this._evaluator.feature=d||null,this._evaluator.featureState=b||null,this._evaluator.canonical=M,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=D||null;try{const U=this.expression.evaluate(this._evaluator);if(U==null||typeof U=="number"&&U!=U)return this._defaultValue;if(this._enumValues&&!(U in this._enumValues))throw new _o(`Expected value to be one of ${Object.keys(this._enumValues).map((F=>JSON.stringify(F))).join(", ")}, but found ${JSON.stringify(U)} instead.`);return U}catch(U){return this._warningHistory[U.message]||(this._warningHistory[U.message]=!0,typeof console<"u"&&console.warn(U.message)),this._defaultValue}}}function Wh(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in eh}function Op(f,u,d){const b=new Ui(eh,cu,[],u?(function(I){const D={color:nl,string:Ni,number:mn,enum:Ni,boolean:ri,formatted:po,padding:Oa,numberArray:da,colorArray:eu,projectionDefinition:Xc,resolvedImage:Ho,variableAnchorOffsetCollection:Tl};return I.type==="array"?Zo(D[I.value]||Ki,I.length):D[I.type]})(u):void 0),M=b.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return M?Nh(new Qh(M,u,d)):nh(b.errors)}class Fl{constructor(u,d,b){this.kind=u,this._styleExpression=d,this.isStateDependent=u!=="constant"&&!_A(d.expression),this.globalStateRefs=hu(d.expression),this._globalState=b}evaluateWithoutErrorHandling(u,d,b,M,I,D){return this._globalState&&(u=vl(u,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(u,d,b,M,I,D)}evaluate(u,d,b,M,I,D){return this._globalState&&(u=vl(u,this._globalState)),this._styleExpression.evaluate(u,d,b,M,I,D)}}class qh{constructor(u,d,b,M,I){this.kind=u,this.zoomStops=b,this._styleExpression=d,this.isStateDependent=u!=="camera"&&!_A(d.expression),this.globalStateRefs=hu(d.expression),this.interpolationType=M,this._globalState=I}evaluateWithoutErrorHandling(u,d,b,M,I,D){return this._globalState&&(u=vl(u,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(u,d,b,M,I,D)}evaluate(u,d,b,M,I,D){return this._globalState&&(u=vl(u,this._globalState)),this._styleExpression.evaluate(u,d,b,M,I,D)}interpolationFactor(u,d,b){return this.interpolationType?uu.interpolationFactor(this.interpolationType,u,d,b):0}}function Fd(f,u,d){const b=Op(f,u,d);if(b.result==="error")return b;const M=b.value.expression,I=th(M);if(!I&&!Au(u))return nh([new $o("","data expressions not supported")]);const D=Ou(M,["zoom"]);if(!D&&!Wm(u))return nh([new $o("","zoom expressions not supported")]);const U=zs(M);return U||D?U instanceof $o?nh([U]):U instanceof uu&&!Ld(u)?nh([new $o("",'"interpolate" expressions cannot be used with this property')]):Nh(U?new qh(I?"camera":"composite",b.value,U.labels,U instanceof uu?U.interpolation:void 0,d):new Fl(I?"constant":"source",b.value,d)):nh([new $o("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ps{constructor(u,d){this._parameters=u,this._specification=d,Pi(this,xA(this._parameters,this._specification))}static deserialize(u){return new ps(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function zs(f){let u=null;if(f instanceof wi)u=zs(f.result);else if(f instanceof yA){for(const d of f.args)if(u=zs(d),u)break}else(f instanceof Ss||f instanceof uu)&&f.input instanceof Tr&&f.input.name==="zoom"&&(u=f);return u instanceof $o||f.eachChild((d=>{const b=zs(d);b instanceof $o?u=b:!u&&b?u=new $o("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&b&&u!==b&&(u=new $o("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),u}function hu(f,u=new Set){return f instanceof jh&&u.add(f.key),f.eachChild((d=>{hu(d,u)})),u}function vl(f,u){const{zoom:d,heatmapDensity:b,elevation:M,lineProgress:I,isSupportedScript:D,accumulated:U}=f??{};return{zoom:d,heatmapDensity:b,elevation:M,lineProgress:I,isSupportedScript:D,accumulated:U,globalState:u}}function kc(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!kc(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const iA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function bl(f,u){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};kc(f)||(f=rA(f));const d=Op(f,iA,u);if(d.result==="error")throw new Error(d.value.map((b=>`${b.key}: ${b.message}`)).join(", "));return{filter:(b,M,I)=>d.value.evaluate(b,M,{},I),needGeometry:Ip(f),getGlobalStateRefs:()=>hu(d.value.expression)}}function ac(f,u){return f<u?-1:f>u?1:0}function Ip(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(Ip(f[u]))return!0;return!1}function rA(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?rh(f[1],f[2],"=="):u==="!="?lo(rh(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?rh(f[1],f[2],u):u==="any"?(d=f.slice(1),["any"].concat(d.map(rA))):u==="all"?["all"].concat(f.slice(1).map(rA)):u==="none"?["all"].concat(f.slice(1).map(rA).map(lo)):u==="in"?Yh(f[1],f.slice(2)):u==="!in"?lo(Yh(f[1],f.slice(2))):u==="has"?ta(f[1]):u!=="!has"||lo(ta(f[1]));var d}function rh(f,u,d){switch(f){case"$type":return[`filter-type-${d}`,u];case"$id":return[`filter-id-${d}`,u];default:return[`filter-${d}`,f,u]}}function Yh(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some((d=>typeof d!=typeof u[0]))?["filter-in-large",f,["literal",u.sort(ac)]]:["filter-in-small",f,["literal",u]]}}function ta(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function lo(f){return["!",f]}function Gr(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let M="[";for(const I of f)M+=`${Gr(I)},`;return`${M}]`}const d=Object.keys(f).sort();let b="{";for(let M=0;M<d.length;M++)b+=`${JSON.stringify(d[M])}:${Gr(f[d[M]])},`;return`${b}}`}function MA(f){let u="";for(const d of Zn)u+=`/${Gr(f[d])}`;return u}function du(f){const u=f.value;return u?[new nn(f.key,u,"constants have been deprecated as of v8")]:[]}function ss(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Iu(f){if(Array.isArray(f))return f.map(Iu);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const d in f)u[d]=Iu(f[d]);return u}return ss(f)}function jl(f){const u=f.key,d=f.value,b=f.valueSpec||{},M=f.objectElementValidators||{},I=f.style,D=f.styleSpec,U=f.validateSpec;let F=[];const ee=lr(d);if(ee!=="object")return[new nn(u,d,`object expected, ${ee} found`)];for(const ne in d){const ce=ne.split(".")[0],_e=Ms(b,ce)||b["*"];let we;if(Ms(M,ce))we=M[ce];else if(Ms(b,ce))we=U;else if(M["*"])we=M["*"];else{if(!b["*"]){F.push(new nn(u,d[ne],`unknown property "${ne}"`));continue}we=U}F=F.concat(we({key:(u&&`${u}.`)+ne,value:d[ne],valueSpec:_e,style:I,styleSpec:D,object:d,objectKey:ne,validateSpec:U},d))}for(const ne in b)M[ne]||b[ne].required&&b[ne].default===void 0&&d[ne]===void 0&&F.push(new nn(u,d,`missing required property "${ne}"`));return F}function Vh(f){const u=f.value,d=f.valueSpec,b=f.style,M=f.styleSpec,I=f.key,D=f.arrayElementValidator||f.validateSpec;if(lr(u)!=="array")return[new nn(I,u,`array expected, ${lr(u)} found`)];if(d.length&&u.length!==d.length)return[new nn(I,u,`array length ${d.length} expected, length ${u.length} found`)];if(d["min-length"]&&u.length<d["min-length"])return[new nn(I,u,`array length at least ${d["min-length"]} expected, length ${u.length} found`)];let U={type:d.value,values:d.values};M.$version<7&&(U.function=d.function),lr(d.value)==="object"&&(U=d.value);let F=[];for(let ee=0;ee<u.length;ee++)F=F.concat(D({array:u,arrayIndex:ee,value:u[ee],valueSpec:U,validateSpec:f.validateSpec,style:b,styleSpec:M,key:`${I}[${ee}]`}));return F}function wA(f){const u=f.key,d=f.value,b=f.valueSpec;let M=lr(d);return M==="number"&&d!=d&&(M="NaN"),M!=="number"?[new nn(u,d,`number expected, ${M} found`)]:"minimum"in b&&d<b.minimum?[new nn(u,d,`${d} is less than the minimum value ${b.minimum}`)]:"maximum"in b&&d>b.maximum?[new nn(u,d,`${d} is greater than the maximum value ${b.maximum}`)]:[]}function Qe(f){const u=f.valueSpec,d=ss(f.value.type);let b,M,I,D={};const U=d!=="categorical"&&f.value.property===void 0,F=!U,ee=lr(f.value.stops)==="array"&&lr(f.value.stops[0])==="array"&&lr(f.value.stops[0][0])==="object",ne=jl({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(we){if(d==="identity")return[new nn(we.key,we.value,'identity function may not have a "stops" property')];let Re=[];const ze=we.value;return Re=Re.concat(Vh({key:we.key,value:ze,valueSpec:we.valueSpec,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec,arrayElementValidator:ce})),lr(ze)==="array"&&ze.length===0&&Re.push(new nn(we.key,ze,"array must have at least one stop")),Re},default:function(we){return we.validateSpec({key:we.key,value:we.value,valueSpec:u,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec})}}});return d==="identity"&&U&&ne.push(new nn(f.key,f.value,'missing required property "property"')),d==="identity"||f.value.stops||ne.push(new nn(f.key,f.value,'missing required property "stops"')),d==="exponential"&&f.valueSpec.expression&&!Ld(f.valueSpec)&&ne.push(new nn(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(F&&!Au(f.valueSpec)?ne.push(new nn(f.key,f.value,"property functions not supported")):U&&!Wm(f.valueSpec)&&ne.push(new nn(f.key,f.value,"zoom functions not supported"))),d!=="categorical"&&!ee||f.value.property!==void 0||ne.push(new nn(f.key,f.value,'"property" property is required')),ne;function ce(we){let Re=[];const ze=we.value,He=we.key;if(lr(ze)!=="array")return[new nn(He,ze,`array expected, ${lr(ze)} found`)];if(ze.length!==2)return[new nn(He,ze,`array length 2 expected, length ${ze.length} found`)];if(ee){if(lr(ze[0])!=="object")return[new nn(He,ze,`object expected, ${lr(ze[0])} found`)];if(ze[0].zoom===void 0)return[new nn(He,ze,"object stop key must have zoom")];if(ze[0].value===void 0)return[new nn(He,ze,"object stop key must have value")];if(I&&I>ss(ze[0].zoom))return[new nn(He,ze[0].zoom,"stop zoom values must appear in ascending order")];ss(ze[0].zoom)!==I&&(I=ss(ze[0].zoom),M=void 0,D={}),Re=Re.concat(jl({key:`${He}[0]`,value:ze[0],valueSpec:{zoom:{}},validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec,objectElementValidators:{zoom:wA,value:_e}}))}else Re=Re.concat(_e({key:`${He}[0]`,value:ze[0],validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec},ze));return Wh(Iu(ze[1]))?Re.concat([new nn(`${He}[1]`,ze[1],"expressions are not allowed in function stops.")]):Re.concat(we.validateSpec({key:`${He}[1]`,value:ze[1],valueSpec:u,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec}))}function _e(we,Re){const ze=lr(we.value),He=ss(we.value),nt=we.value!==null?we.value:Re;if(b){if(ze!==b)return[new nn(we.key,nt,`${ze} stop domain type must match previous stop domain type ${b}`)]}else b=ze;if(ze!=="number"&&ze!=="string"&&ze!=="boolean")return[new nn(we.key,nt,"stop domain value must be a number, string, or boolean")];if(ze!=="number"&&d!=="categorical"){let Bt=`number expected, ${ze} found`;return Au(u)&&d===void 0&&(Bt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nn(we.key,nt,Bt)]}return d!=="categorical"||ze!=="number"||isFinite(He)&&Math.floor(He)===He?d!=="categorical"&&ze==="number"&&M!==void 0&&He<M?[new nn(we.key,nt,"stop domain values must appear in ascending order")]:(M=He,d==="categorical"&&He in D?[new nn(we.key,nt,"stop domain values must be unique")]:(D[He]=!0,[])):[new nn(we.key,nt,`integer expected, found ${He}`)]}}function lc(f){const u=(f.expressionContext==="property"?Fd:Op)(Iu(f.value),f.valueSpec);if(u.result==="error")return u.value.map((b=>new nn(`${f.key}${b.key}`,f.value,b.message)));const d=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!d.outputDefined())return[new nn(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!_A(d))return[new nn(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!_A(d))return[new nn(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Ou(d,["zoom","feature-state"]))return[new nn(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!th(d))return[new nn(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function oA(f){const u=f.key,d=f.value,b=lr(d);return b!=="string"?[new nn(u,d,`color expected, ${b} found`)]:Gi.parse(String(d))?[]:[new nn(u,d,`color expected, "${d}" found`)]}function Ga(f){const u=f.key,d=f.value,b=f.valueSpec,M=[];return Array.isArray(b.values)?b.values.indexOf(ss(d))===-1&&M.push(new nn(u,d,`expected one of [${b.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(b.values).indexOf(ss(d))===-1&&M.push(new nn(u,d,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(d)} found`)),M}function Ar(f){return kc(Iu(f.value))?lc(Pi({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):SA(f)}function SA(f){const u=f.value,d=f.key;if(lr(u)!=="array")return[new nn(d,u,`array expected, ${lr(u)} found`)];const b=f.styleSpec;let M,I=[];if(u.length<1)return[new nn(d,u,"filter array must have at least 1 element")];switch(I=I.concat(Ga({key:`${d}[0]`,value:u[0],valueSpec:b.filter_operator,style:f.style,styleSpec:f.styleSpec})),ss(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&ss(u[1])==="$type"&&I.push(new nn(d,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&I.push(new nn(d,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(M=lr(u[1]),M!=="string"&&I.push(new nn(`${d}[1]`,u[1],`string expected, ${M} found`)));for(let D=2;D<u.length;D++)M=lr(u[D]),ss(u[1])==="$type"?I=I.concat(Ga({key:`${d}[${D}]`,value:u[D],valueSpec:b.geometry_type,style:f.style,styleSpec:f.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&I.push(new nn(`${d}[${D}]`,u[D],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let D=1;D<u.length;D++)I=I.concat(SA({key:`${d}[${D}]`,value:u[D],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":M=lr(u[1]),u.length!==2?I.push(new nn(d,u,`filter array for "${u[0]}" operator must have 2 elements`)):M!=="string"&&I.push(new nn(`${d}[1]`,u[1],`string expected, ${M} found`))}return I}function EA(f,u){const d=f.key,b=f.validateSpec,M=f.style,I=f.styleSpec,D=f.value,U=f.objectKey,F=I[`${u}_${f.layerType}`];if(!F)return[];const ee=U.match(/^(.*)-transition$/);if(u==="paint"&&ee&&F[ee[1]]&&F[ee[1]].transition)return b({key:d,value:D,valueSpec:I.transition,style:M,styleSpec:I});const ne=f.valueSpec||F[U];if(!ne)return[new nn(d,D,`unknown property "${U}"`)];let ce;if(lr(D)==="string"&&Au(ne)&&!ne.tokens&&(ce=/^{([^}]+)}$/.exec(D)))return[new nn(d,D,`"${U}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ce[1])} }\`.`)];const _e=[];return f.layerType==="symbol"&&(U==="text-field"&&M&&!M.glyphs&&_e.push(new nn(d,D,'use of "text-field" requires a style "glyphs" property')),U==="text-font"&&zd(Iu(D))&&ss(D.type)==="identity"&&_e.push(new nn(d,D,'"text-font" does not support identity functions'))),_e.concat(b({key:f.key,value:D,valueSpec:ne,style:M,styleSpec:I,expressionContext:"property",propertyType:u,propertyKey:U}))}function sA(f){return EA(f,"paint")}function BA(f){return EA(f,"layout")}function kp(f){let u=[];const d=f.value,b=f.key,M=f.style,I=f.styleSpec;if(lr(d)!=="object")return[new nn(b,d,`object expected, ${lr(d)} found`)];d.type||d.ref||u.push(new nn(b,d,'either "type" or "ref" is required'));let D=ss(d.type);const U=ss(d.ref);if(d.id){const F=ss(d.id);for(let ee=0;ee<f.arrayIndex;ee++){const ne=M.layers[ee];ss(ne.id)===F&&u.push(new nn(b,d.id,`duplicate layer id "${d.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in d){let F;["type","source","source-layer","filter","layout"].forEach((ee=>{ee in d&&u.push(new nn(b,d[ee],`"${ee}" is prohibited for ref layers`))})),M.layers.forEach((ee=>{ss(ee.id)===U&&(F=ee)})),F?F.ref?u.push(new nn(b,d.ref,"ref cannot reference another ref layer")):D=ss(F.type):u.push(new nn(b,d.ref,`ref layer "${U}" not found`))}else if(D!=="background")if(d.source){const F=M.sources&&M.sources[d.source],ee=F&&ss(F.type);F?ee==="vector"&&D==="raster"?u.push(new nn(b,d.source,`layer "${d.id}" requires a raster source`)):ee!=="raster-dem"&&D==="hillshade"||ee!=="raster-dem"&&D==="color-relief"?u.push(new nn(b,d.source,`layer "${d.id}" requires a raster-dem source`)):ee==="raster"&&D!=="raster"?u.push(new nn(b,d.source,`layer "${d.id}" requires a vector source`)):ee!=="vector"||d["source-layer"]?ee==="raster-dem"&&D!=="hillshade"&&D!=="color-relief"?u.push(new nn(b,d.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):D!=="line"||!d.paint||!d.paint["line-gradient"]||ee==="geojson"&&F.lineMetrics||u.push(new nn(b,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new nn(b,d,`layer "${d.id}" must specify a "source-layer"`)):u.push(new nn(b,d.source,`source "${d.source}" not found`))}else u.push(new nn(b,d,'missing required property "source"'));return u=u.concat(jl({key:b,value:d,valueSpec:I.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${b}.type`,value:d.type,valueSpec:I.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:d,objectKey:"type"}),filter:Ar,layout:F=>jl({layer:d,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":ee=>BA(Pi({layerType:D},ee))}}),paint:F=>jl({layer:d,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":ee=>sA(Pi({layerType:D},ee))}})}})),u}function uc(f){const u=f.value,d=f.key,b=lr(u);return b!=="string"?[new nn(d,u,`string expected, ${b} found`)]:[]}const oh={promoteId:function({key:f,value:u}){if(lr(u)==="string")return uc({key:f,value:u});{const d=[];for(const b in u)d.push(...uc({key:`${f}.${b}`,value:u[b]}));return d}}};function $h(f){const u=f.value,d=f.key,b=f.styleSpec,M=f.style,I=f.validateSpec;if(!u.type)return[new nn(d,u,'"type" is required')];const D=ss(u.type);let U;switch(D){case"vector":case"raster":return U=jl({key:d,value:u,valueSpec:b[`source_${D.replace("-","_")}`],style:f.style,styleSpec:b,objectElementValidators:oh,validateSpec:I}),U;case"raster-dem":return U=(function(F){var ee;const ne=(ee=F.sourceName)!==null&&ee!==void 0?ee:"",ce=F.value,_e=F.styleSpec,we=_e.source_raster_dem,Re=F.style;let ze=[];const He=lr(ce);if(ce===void 0)return ze;if(He!=="object")return ze.push(new nn("source_raster_dem",ce,`object expected, ${He} found`)),ze;const nt=ss(ce.encoding)==="custom",Bt=["redFactor","greenFactor","blueFactor","baseShift"],lt=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const vt in ce)!nt&&Bt.includes(vt)?ze.push(new nn(vt,ce[vt],`In "${ne}": "${vt}" is only valid when "encoding" is set to "custom". ${lt} encoding found`)):we[vt]?ze=ze.concat(F.validateSpec({key:vt,value:ce[vt],valueSpec:we[vt],validateSpec:F.validateSpec,style:Re,styleSpec:_e})):ze.push(new nn(vt,ce[vt],`unknown property "${vt}"`));return ze})({sourceName:d,value:u,style:f.style,styleSpec:b,validateSpec:I}),U;case"geojson":if(U=jl({key:d,value:u,valueSpec:b.source_geojson,style:M,styleSpec:b,validateSpec:I,objectElementValidators:oh}),u.cluster)for(const F in u.clusterProperties){const[ee,ne]=u.clusterProperties[F],ce=typeof ee=="string"?[ee,["accumulated"],["get",F]]:ee;U.push(...lc({key:`${d}.${F}.map`,value:ne,expressionContext:"cluster-map"})),U.push(...lc({key:`${d}.${F}.reduce`,value:ce,expressionContext:"cluster-reduce"}))}return U;case"video":return jl({key:d,value:u,valueSpec:b.source_video,style:M,validateSpec:I,styleSpec:b});case"image":return jl({key:d,value:u,valueSpec:b.source_image,style:M,validateSpec:I,styleSpec:b});case"canvas":return[new nn(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ga({key:`${d}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function sl(f){const u=f.value,d=f.styleSpec,b=d.light,M=f.style;let I=[];const D=lr(u);if(u===void 0)return I;if(D!=="object")return I=I.concat([new nn("light",u,`object expected, ${D} found`)]),I;for(const U in u){const F=U.match(/^(.*)-transition$/);I=I.concat(F&&b[F[1]]&&b[F[1]].transition?f.validateSpec({key:U,value:u[U],valueSpec:d.transition,validateSpec:f.validateSpec,style:M,styleSpec:d}):b[U]?f.validateSpec({key:U,value:u[U],valueSpec:b[U],validateSpec:f.validateSpec,style:M,styleSpec:d}):[new nn(U,u[U],`unknown property "${U}"`)])}return I}function cc(f){const u=f.value,d=f.styleSpec,b=d.sky,M=f.style,I=lr(u);if(u===void 0)return[];if(I!=="object")return[new nn("sky",u,`object expected, ${I} found`)];let D=[];for(const U in u)D=D.concat(b[U]?f.validateSpec({key:U,value:u[U],valueSpec:b[U],style:M,styleSpec:d}):[new nn(U,u[U],`unknown property "${U}"`)]);return D}function g0(f){const u=f.value,d=f.styleSpec,b=d.terrain,M=f.style;let I=[];const D=lr(u);if(u===void 0)return I;if(D!=="object")return I=I.concat([new nn("terrain",u,`object expected, ${D} found`)]),I;for(const U in u)I=I.concat(b[U]?f.validateSpec({key:U,value:u[U],valueSpec:b[U],validateSpec:f.validateSpec,style:M,styleSpec:d}):[new nn(U,u[U],`unknown property "${U}"`)]);return I}function E1(f){let u=[];const d=f.value,b=f.key;if(Array.isArray(d)){const M=[],I=[];for(const D in d)d[D].id&&M.includes(d[D].id)&&u.push(new nn(b,d,`all the sprites' ids must be unique, but ${d[D].id} is duplicated`)),M.push(d[D].id),d[D].url&&I.includes(d[D].url)&&u.push(new nn(b,d,`all the sprites' URLs must be unique, but ${d[D].url} is duplicated`)),I.push(d[D].url),u=u.concat(jl({key:`${b}[${D}]`,value:d[D],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return uc({key:b,value:d})}function B1(f){return u=f.value,u&&u.constructor===Object?[]:[new nn(f.key,f.value,`object expected, ${lr(f.value)} found`)];var u}const Kf={"*":()=>[],array:Vh,boolean:function(f){const u=f.value,d=f.key,b=lr(u);return b!=="boolean"?[new nn(d,u,`boolean expected, ${b} found`)]:[]},number:wA,color:oA,constants:du,enum:Ga,filter:Ar,function:Qe,layer:kp,object:jl,source:$h,light:sl,sky:cc,terrain:g0,projection:function(f){const u=f.value,d=f.styleSpec,b=d.projection,M=f.style,I=lr(u);if(u===void 0)return[];if(I!=="object")return[new nn("projection",u,`object expected, ${I} found`)];let D=[];for(const U in u)D=D.concat(b[U]?f.validateSpec({key:U,value:u[U],valueSpec:b[U],style:M,styleSpec:d}):[new nn(U,u[U],`unknown property "${U}"`)]);return D},projectionDefinition:function(f){const u=f.key;let d=f.value;d=d instanceof String?d.valueOf():d;const b=lr(d);return b!=="array"||(function(M){return Array.isArray(M)&&M.length===3&&typeof M[0]=="string"&&typeof M[1]=="string"&&typeof M[2]=="number"})(d)||(function(M){return!!["interpolate","step","literal"].includes(M[0])})(d)?["array","string"].includes(b)?[]:[new nn(u,d,`projection expected, invalid type "${b}" found`)]:[new nn(u,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:uc,formatted:function(f){return uc(f).length===0?[]:lc(f)},resolvedImage:function(f){return uc(f).length===0?[]:lc(f)},padding:function(f){const u=f.key,d=f.value;if(lr(d)==="array"){if(d.length<1||d.length>4)return[new nn(u,d,`padding requires 1 to 4 values; ${d.length} values found`)];const b={type:"number"};let M=[];for(let I=0;I<d.length;I++)M=M.concat(f.validateSpec({key:`${u}[${I}]`,value:d[I],validateSpec:f.validateSpec,valueSpec:b}));return M}return wA({key:u,value:d,valueSpec:{}})},numberArray:function(f){const u=f.key,d=f.value;if(lr(d)==="array"){const b={type:"number"};if(d.length<1)return[new nn(u,d,"array length at least 1 expected, length 0 found")];let M=[];for(let I=0;I<d.length;I++)M=M.concat(f.validateSpec({key:`${u}[${I}]`,value:d[I],validateSpec:f.validateSpec,valueSpec:b}));return M}return wA({key:u,value:d,valueSpec:{}})},colorArray:function(f){const u=f.key,d=f.value;if(lr(d)==="array"){if(d.length<1)return[new nn(u,d,"array length at least 1 expected, length 0 found")];let b=[];for(let M=0;M<d.length;M++)b=b.concat(oA({key:`${u}[${M}]`,value:d[M]}));return b}return oA({key:u,value:d})},variableAnchorOffsetCollection:function(f){const u=f.key,d=f.value,b=lr(d),M=f.styleSpec;if(b!=="array"||d.length<1||d.length%2!=0)return[new nn(u,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let I=[];for(let D=0;D<d.length;D+=2)I=I.concat(Ga({key:`${u}[${D}]`,value:d[D],valueSpec:M.layout_symbol["text-anchor"]})),I=I.concat(Vh({key:`${u}[${D+1}]`,value:d[D+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:M}));return I},sprite:E1,state:B1};function as(f){const u=f.value,d=f.valueSpec,b=f.styleSpec;return f.validateSpec=as,d.expression&&zd(ss(u))?Qe(f):d.expression&&Wh(Iu(u))?lc(f):d.type&&Kf[d.type]?Kf[d.type](f):jl(Pi({},f,{valueSpec:d.type?b[d.type]:d}))}function Fs(f){const u=f.value,d=f.key,b=uc(f);return b.length||(u.indexOf("{fontstack}")===-1&&b.push(new nn(d,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&b.push(new nn(d,u,'"glyphs" url must include a "{range}" token'))),b}function Ia(f,u=dt){let d=[];return d=d.concat(as({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:as,objectElementValidators:{glyphs:Fs,"*":()=>[]}})),f.constants&&(d=d.concat(du({key:"constants",value:f.constants}))),Ym(d)}function Nl(f){return function(u){return f(Object.assign({},u,{validateSpec:as}))}}function Ym(f){return[].concat(f).sort(((u,d)=>u.line-d.line))}function Gl(f){return function(...u){return Ym(f.apply(this,u))}}Ia.source=Gl(Nl($h)),Ia.sprite=Gl(Nl(E1)),Ia.glyphs=Gl(Nl(Fs)),Ia.light=Gl(Nl(sl)),Ia.sky=Gl(Nl(cc)),Ia.terrain=Gl(Nl(g0)),Ia.state=Gl(Nl(B1)),Ia.layer=Gl(Nl(kp)),Ia.filter=Gl(Nl(Ar)),Ia.paintProperty=Gl(Nl(sA)),Ia.layoutProperty=Gl(Nl(BA));const fu=Ia,Hh=fu.light,Vm=fu.sky,mv=fu.paintProperty,ku=fu.layoutProperty;function Zh(f,u){let d=!1;if(u&&u.length)for(const b of u)f.fire(new Mt(new Error(b.message))),d=!0;return d}class aA{constructor(u,d,b){const M=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const D=new Int32Array(this.arrayBuffer);u=D[0],this.d=(d=D[1])+2*(b=D[2]);for(let F=0;F<this.d*this.d;F++){const ee=D[3+F],ne=D[3+F+1];M.push(ee===ne?null:D.subarray(ee,ne))}const U=D[3+M.length+1];this.keys=D.subarray(D[3+M.length],U),this.bboxes=D.subarray(U),this.insert=this._insertReadonly}else{this.d=d+2*b;for(let D=0;D<this.d*this.d;D++)M.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=u,this.padding=b,this.scale=d/u,this.uid=0;const I=b/d*u;this.min=-I,this.max=u+I}insert(u,d,b,M,I){this._forEachCell(d,b,M,I,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(d),this.bboxes.push(b),this.bboxes.push(M),this.bboxes.push(I)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,d,b,M,I,D){this.cells[I].push(D)}query(u,d,b,M,I){const D=this.min,U=this.max;if(u<=D&&d<=D&&U<=b&&U<=M&&!I)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(u,d,b,M,this._queryCell,F,{},I),F}}_queryCell(u,d,b,M,I,D,U,F){const ee=this.cells[I];if(ee!==null){const ne=this.keys,ce=this.bboxes;for(let _e=0;_e<ee.length;_e++){const we=ee[_e];if(U[we]===void 0){const Re=4*we;(F?F(ce[Re+0],ce[Re+1],ce[Re+2],ce[Re+3]):u<=ce[Re+2]&&d<=ce[Re+3]&&b>=ce[Re+0]&&M>=ce[Re+1])?(U[we]=!0,D.push(ne[we])):U[we]=!1}}}}_forEachCell(u,d,b,M,I,D,U,F){const ee=this._convertToCellCoord(u),ne=this._convertToCellCoord(d),ce=this._convertToCellCoord(b),_e=this._convertToCellCoord(M);for(let we=ee;we<=ce;we++)for(let Re=ne;Re<=_e;Re++){const ze=this.d*Re+we;if((!F||F(this._convertFromCellCoord(we),this._convertFromCellCoord(Re),this._convertFromCellCoord(we+1),this._convertFromCellCoord(Re+1)))&&I.call(this,u,d,b,M,ze,D,U,F))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,d=3+this.cells.length+1+1;let b=0;for(let D=0;D<this.cells.length;D++)b+=this.cells[D].length;const M=new Int32Array(d+b+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let I=d;for(let D=0;D<u.length;D++){const U=u[D];M[3+D]=I,M.set(U,I),I+=U.length}return M[3+u.length]=I,M.set(this.keys,I),I+=this.keys.length,M[3+u.length+1]=I,M.set(this.bboxes,I),I+=this.bboxes.length,M.buffer}static serialize(u,d){const b=u.toArrayBuffer();return d&&d.push(b),{buffer:b}}static deserialize(u){return new aA(u.buffer)}}const Tc={};function Hn(f,u,d={}){if(Tc[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),Tc[f]={klass:u,omit:d.omit||[],shallow:d.shallow||[]}}Hn("Object",Object),Hn("Set",Set),Hn("TransferableGridIndex",aA),Hn("Color",Gi),Hn("Error",Error),Hn("AJAXError",We),Hn("ResolvedImage",os),Hn("StylePropertyFunction",ps),Hn("StyleExpression",Qh,{omit:["_evaluator"]}),Hn("ZoomDependentExpression",qh),Hn("ZoomConstantExpression",Fl),Hn("CompoundExpression",Tr,{omit:["_evaluate"]});for(const f in eh)eh[f]._classRegistryKey||Hn(`Expression_${f}`,eh[f]);function jd(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function OA(f){return f.$name||f.constructor._classRegistryKey}function Uf(f){return!(function(u){if(u===null||typeof u!="object")return!1;const d=OA(u);return!(!d||d==="Object")})(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||jd(f)||Qn(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function Xh(f,u){if(Uf(f))return(jd(f)||Qn(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const I=[];for(const D of f)I.push(Xh(D,u));return I}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const d=OA(f);if(!d)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Tc[d])throw new Error(`${d} is not registered.`);const{klass:b}=Tc[d],M=b.serialize?b.serialize(f,u):{};if(b.serialize){if(u&&M===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const I in f){if(!f.hasOwnProperty(I)||Tc[d].omit.indexOf(I)>=0)continue;const D=f[I];M[I]=Tc[d].shallow.indexOf(I)>=0?D:Xh(D,u)}f instanceof Error&&(M.message=f.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(M.$name=d),M}function sh(f){if(Uf(f))return f;if(Array.isArray(f))return f.map(sh);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=OA(f)||"Object";if(!Tc[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:d}=Tc[u];if(!d)throw new Error(`can't deserialize unregistered class ${u}`);if(d.deserialize)return d.deserialize(f);const b=Object.create(d.prototype);for(const M of Object.keys(f)){if(M==="$name")continue;const I=f[M];b[M]=Tc[u].shallow.indexOf(M)>=0?I:sh(I)}return b}class Lf{constructor(){this.first=!0}update(u,d){const b=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=b,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=b,!0):(this.lastFloorZoom>b?(this.lastIntegerZoom=b+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<b&&(this.lastIntegerZoom=b,this.lastIntegerZoomTime=d),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=b,!0))}}const er={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function pu(f){for(const u of f)if(Ru(u.charCodeAt(0)))return!0;return!1}function y0(f){for(const u of f)if(!Tu(u.charCodeAt(0)))return!1;return!0}function zf(f){const u=f.map((d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}})).filter((d=>d));return new RegExp(u.join("|"),"u")}const Nd=zf(["Arab","Dupl","Mong","Ougr","Syrc"]);function Tu(f){return!Nd.test(String.fromCodePoint(f))}const ah=zf(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ru(f){return!(f!==746&&f!==747&&(f<4352||!(er["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||er["CJK Compatibility"](f)||er["CJK Strokes"](f)||!(!er["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||er["Enclosed CJK Letters and Months"](f)||er["Ideographic Description Characters"](f)||er.Kanbun(f)||er.Katakana(f)&&f!==12540||!(!er["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!er["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||er["Vertical Forms"](f)||er["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||ah.test(String.fromCodePoint(f)))))}function Ql(f){return!(Ru(f)||(function(u){return!!(er["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||er["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||er["Letterlike Symbols"](u)||er["Number Forms"](u)||er["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||er["Control Pictures"](u)&&u!==9251||er["Optical Character Recognition"](u)||er["Enclosed Alphanumerics"](u)||er["Geometric Shapes"](u)||er["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||er["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||er["CJK Symbols and Punctuation"](u)||er.Katakana(u)||er["Private Use Area"](u)||er["CJK Compatibility Forms"](u)||er["Small Form Variants"](u)||er["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)})(f))}const v0=zf(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function lh(f){return v0.test(String.fromCodePoint(f))}function $m(f,u){return!(!u&&lh(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||er.Khmer(f))}function Rc(f){for(const u of f)if(lh(u.charCodeAt(0)))return!0;return!1}const al=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(al.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,u){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const d=f.pluginURL,b=new Promise((I=>{this.loadScriptResolve=I}));u(d);const M=new Promise((I=>setTimeout((()=>I()),this.TIMEOUT)));if(yield Promise.race([b,M]),this.isParsed()){const I={pluginStatus:"loaded",pluginURL:d};return this.setState(I),I}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)}))}};class wo{constructor(u,d){this.isSupportedScript=Jh,this.zoom=u,d?(this.now=d.now||0,this.fadeDuration=d.fadeDuration||0,this.zoomHistory=d.zoomHistory||new Lf,this.transition=d.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Lf,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,d=u-Math.floor(u),b=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*b}:{fromScale:.5,toScale:1,t:1-(1-b)*d}}}function Jh(f){return(function(u,d){for(const b of u)if(!$m(b.charCodeAt(0),d))return!1;return!0})(f,al.getRTLTextPluginStatus()==="loaded")}class Du{constructor(u,d,b){this.property=u,this.value=d,this.expression=(function(M,I,D){if(zd(M))return new ps(M,I);if(Wh(M)){const U=Fd(M,I,D);if(U.result==="error")throw new Error(U.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return U.value}{let U=M;return I.type==="color"&&typeof M=="string"?U=Gi.parse(M):I.type!=="padding"||typeof M!="number"&&!Array.isArray(M)?I.type!=="numberArray"||typeof M!="number"&&!Array.isArray(M)?I.type!=="colorArray"||typeof M!="string"&&!Array.isArray(M)?I.type==="variableAnchorOffsetCollection"&&Array.isArray(M)?U=mo.parse(M):I.type==="projectionDefinition"&&typeof M=="string"&&(U=so.parse(M)):U=Mo.parse(M):U=ws.parse(M):U=oo.parse(M),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>U}}})(d===void 0?u.specification.default:d,u.specification,b)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(u,d,b){return this.property.possiblyEvaluate(this,u,d,b)}}class ed{constructor(u,d){this.property=u,this.value=new Du(u,void 0,d)}transitioned(u,d){return new pa(this.property,this.value,d,Ue({},u.transition,this.transition),u.now)}untransitioned(){return new pa(this.property,this.value,null,{},0)}}class Ff{constructor(u,d){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues),this._globalState=d}getValue(u){return mt(this._values[u].value.value)}setValue(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new ed(this._values[u].property,this._globalState)),this._values[u].value=new Du(this._values[u].property,d===null?void 0:mt(d),this._globalState)}getTransition(u){return mt(this._values[u].transition)}setTransition(u,d){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new ed(this._values[u].property,this._globalState)),this._values[u].transition=mt(d)||void 0}serialize(){const u={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(u[d]=b);const M=this.getTransition(d);M!==void 0&&(u[`${d}-transition`]=M)}return u}transitioned(u,d){const b=new uh(this._properties);for(const M of Object.keys(this._values))b._values[M]=this._values[M].transitioned(u,d._values[M]);return b}untransitioned(){const u=new uh(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].untransitioned();return u}}class pa{constructor(u,d,b,M,I){this.property=u,this.value=d,this.begin=I+M.delay||0,this.end=this.begin+M.duration||0,u.specification.transition&&(M.delay||M.duration)&&(this.prior=b)}possiblyEvaluate(u,d,b){const M=u.now||0,I=this.value.possiblyEvaluate(u,d,b),D=this.prior;if(D){if(M>this.end)return this.prior=null,I;if(this.value.isDataDriven())return this.prior=null,I;if(M<this.begin)return D.possiblyEvaluate(u,d,b);{const U=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(D.possiblyEvaluate(u,d,b),I,Te(U))}}return I}}class uh{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,d,b){const M=new Ah(this._properties);for(const I of Object.keys(this._values))M._values[I]=this._values[I].possiblyEvaluate(u,d,b);return M}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class ch{constructor(u,d){this._properties=u,this._values=Object.create(u.defaultPropertyValues),this._globalState=d}hasValue(u){return this._values[u].value!==void 0}getValue(u){return mt(this._values[u].value)}setValue(u,d){this._values[u]=new Du(this._values[u].property,d===null?void 0:mt(d),this._globalState)}serialize(){const u={};for(const d of Object.keys(this._values)){const b=this.getValue(d);b!==void 0&&(u[d]=b)}return u}possiblyEvaluate(u,d,b){const M=new Ah(this._properties);for(const I of Object.keys(this._values))M._values[I]=this._values[I].possiblyEvaluate(u,d,b);return M}}class ka{constructor(u,d,b){this.property=u,this.value=d,this.parameters=b}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,d,b,M){return this.property.evaluate(this.value,this.parameters,u,d,b,M)}}class Ah{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class ti{constructor(u){this.specification=u}possiblyEvaluate(u,d){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(d)}interpolate(u,d,b){const M=ea[this.specification.type];return M?M(u,d,b):u}}class bi{constructor(u,d){this.specification=u,this.overrides=d}possiblyEvaluate(u,d,b,M){return new ka(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(d,null,{},b,M)}:u.expression,d)}interpolate(u,d,b){if(u.value.kind!=="constant"||d.value.kind!=="constant")return u;if(u.value.value===void 0||d.value.value===void 0)return new ka(this,{kind:"constant",value:void 0},u.parameters);const M=ea[this.specification.type];if(M){const I=M(u.value.value,d.value.value,b);return new ka(this,{kind:"constant",value:I},u.parameters)}return u}evaluate(u,d,b,M,I,D){return u.kind==="constant"?u.value:u.evaluate(d,b,M,I,D)}}class td extends bi{possiblyEvaluate(u,d,b,M){if(u.value===void 0)return new ka(this,{kind:"constant",value:void 0},d);if(u.expression.kind==="constant"){const I=u.expression.evaluate(d,null,{},b,M),D=u.property.specification.type==="resolvedImage"&&typeof I!="string"?I.name:I,U=this._calculate(D,D,D,d);return new ka(this,{kind:"constant",value:U},d)}if(u.expression.kind==="camera"){const I=this._calculate(u.expression.evaluate({zoom:d.zoom-1}),u.expression.evaluate({zoom:d.zoom}),u.expression.evaluate({zoom:d.zoom+1}),d);return new ka(this,{kind:"constant",value:I},d)}return new ka(this,u.expression,d)}evaluate(u,d,b,M,I,D){if(u.kind==="source"){const U=u.evaluate(d,b,M,I,D);return this._calculate(U,U,U,d)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(d.zoom)-1},b,M),u.evaluate({zoom:Math.floor(d.zoom)},b,M),u.evaluate({zoom:Math.floor(d.zoom)+1},b,M),d):u.value}_calculate(u,d,b,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:b,to:d}}interpolate(u){return u}}class Qa{constructor(u){this.specification=u}possiblyEvaluate(u,d,b,M){if(u.value!==void 0){if(u.expression.kind==="constant"){const I=u.expression.evaluate(d,null,{},b,M);return this._calculate(I,I,I,d)}return this._calculate(u.expression.evaluate(new wo(Math.floor(d.zoom-1),d)),u.expression.evaluate(new wo(Math.floor(d.zoom),d)),u.expression.evaluate(new wo(Math.floor(d.zoom+1),d)),d)}}_calculate(u,d,b,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:d}:{from:b,to:d}}interpolate(u){return u}}class hh{constructor(u){this.specification=u}possiblyEvaluate(u,d,b,M){return!!u.expression.evaluate(d,null,{},b,M)}interpolate(){return!1}}class ls{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in u){const b=u[d];b.specification.overridable&&this.overridableProperties.push(d);const M=this.defaultPropertyValues[d]=new Du(b,void 0,void 0),I=this.defaultTransitionablePropertyValues[d]=new ed(b,void 0);this.defaultTransitioningPropertyValues[d]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=M.possiblyEvaluate({})}}}Hn("DataDrivenProperty",bi),Hn("DataConstantProperty",ti),Hn("CrossFadedDataDrivenProperty",td),Hn("CrossFadedProperty",Qa),Hn("ColorRampProperty",hh);const Ac="-transition";class ll extends en{constructor(u,d,b){if(super(),this.id=u.id,this.type=u.type,this._globalState=b,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter,this._featureFilter=bl(u.filter,b)),d.layout&&(this._unevaluatedLayout=new ch(d.layout,b)),d.paint)){this._transitionablePaint=new Ff(d.paint,b);for(const M in u.paint)this.setPaintProperty(M,u.paint[M],{validate:!1});for(const M in u.layout)this.setLayoutProperty(M,u.layout[M],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ah(d.paint)}}setFilter(u){this.filter=u,this._featureFilter=bl(u,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}getLayoutAffectingGlobalStateRefs(){const u=new Set;if(this._unevaluatedLayout)for(const d in this._unevaluatedLayout._values){const b=this._unevaluatedLayout._values[d];for(const M of b.getGlobalStateRefs())u.add(M)}for(const d of this._featureFilter.getGlobalStateRefs())u.add(d);return u}getPaintAffectingGlobalStateRefs(){var u;const d=new globalThis.Map;if(this._transitionablePaint)for(const b in this._transitionablePaint._values){const M=this._transitionablePaint._values[b].value;for(const I of M.getGlobalStateRefs()){const D=(u=d.get(I))!==null&&u!==void 0?u:[];D.push({name:b,value:M.value}),d.set(I,D)}}return d}setLayoutProperty(u,d,b={}){d!=null&&this._validate(ku,`layers.${this.id}.layout.${u}`,u,d,b)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,d):this.visibility=d)}getPaintProperty(u){return u.endsWith(Ac)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,d,b={}){if(d!=null&&this._validate(mv,`layers.${this.id}.paint.${u}`,u,d,b))return!1;if(u.endsWith(Ac))return this._transitionablePaint.setTransition(u.slice(0,-11),d||void 0),!1;{const M=this._transitionablePaint._values[u],I=M.property.specification["property-type"]==="cross-faded-data-driven",D=M.value.isDataDriven(),U=M.value;this._transitionablePaint.setValue(u,d),this._handleSpecialPaintPropertyUpdate(u);const F=this._transitionablePaint._values[u].value;return F.isDataDriven()||D||I||this._handleOverridablePaintPropertyUpdate(u,U,F)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,d,b){return!1}isHidden(u,d=!1){return!!(this.minzoom&&u<(d?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,d){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,d)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Ve(u,((d,b)=>!(d===void 0||b==="layout"&&!Object.keys(d).length||b==="paint"&&!Object.keys(d).length)))}_validate(u,d,b,M,I={}){return(!I||I.validate!==!1)&&Zh(this,u.call(fu,{key:d,layerType:this.type,objectKey:b,value:M,styleSpec:dt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const d=this.paint.get(u);if(d instanceof ka&&Au(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}let jf;var O1={get paint(){return jf=jf||new ls({"raster-opacity":new ti(dt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ti(dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ti(dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ti(dt.paint_raster["raster-brightness-max"]),"raster-saturation":new ti(dt.paint_raster["raster-saturation"]),"raster-contrast":new ti(dt.paint_raster["raster-contrast"]),"raster-resampling":new ti(dt.paint_raster["raster-resampling"]),"raster-fade-duration":new ti(dt.paint_raster["raster-fade-duration"])})}};class Cl extends ll{constructor(u,d){super(u,O1,d)}}const Pu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Os{constructor(u,d){this._structArray=u,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class us{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,d){return u._trim(),d&&(u.isTransferred=!0,d.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const d=Object.create(this.prototype);return d.arrayBuffer=u.arrayBuffer,d.length=u.length,d.capacity=u.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function uo(f,u=1){let d=0,b=0;return{members:f.map((M=>{const I=Pu[M.type].BYTES_PER_ELEMENT,D=d=Sr(d,Math.max(u,I)),U=M.components||1;return b=Math.max(b,I),d+=I*U,{name:M.name,type:M.type,components:U,offset:D}})),size:Sr(d,Math.max(b,u)),alignment:u}}function Sr(f,u){return Math.ceil(f/u)*u}class So extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const M=2*u;return this.int16[M+0]=d,this.int16[M+1]=b,u}}So.prototype.bytesPerElement=4,Hn("StructArrayLayout2i4",So);class ko extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const I=3*u;return this.int16[I+0]=d,this.int16[I+1]=b,this.int16[I+2]=M,u}}ko.prototype.bytesPerElement=6,Hn("StructArrayLayout3i6",ko);class nd extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M){const I=this.length;return this.resize(I+1),this.emplace(I,u,d,b,M)}emplace(u,d,b,M,I){const D=4*u;return this.int16[D+0]=d,this.int16[D+1]=b,this.int16[D+2]=M,this.int16[D+3]=I,u}}nd.prototype.bytesPerElement=8,Hn("StructArrayLayout4i8",nd);class IA extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I,D){const U=this.length;return this.resize(U+1),this.emplace(U,u,d,b,M,I,D)}emplace(u,d,b,M,I,D,U){const F=6*u;return this.int16[F+0]=d,this.int16[F+1]=b,this.int16[F+2]=M,this.int16[F+3]=I,this.int16[F+4]=D,this.int16[F+5]=U,u}}IA.prototype.bytesPerElement=12,Hn("StructArrayLayout2i4i12",IA);class kA extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I,D){const U=this.length;return this.resize(U+1),this.emplace(U,u,d,b,M,I,D)}emplace(u,d,b,M,I,D,U){const F=4*u,ee=8*u;return this.int16[F+0]=d,this.int16[F+1]=b,this.uint8[ee+4]=M,this.uint8[ee+5]=I,this.uint8[ee+6]=D,this.uint8[ee+7]=U,u}}kA.prototype.bytesPerElement=8,Hn("StructArrayLayout2i4ub8",kA);class TA extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const M=2*u;return this.float32[M+0]=d,this.float32[M+1]=b,u}}TA.prototype.bytesPerElement=8,Hn("StructArrayLayout2f8",TA);class id extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I,D,U,F,ee,ne){const ce=this.length;return this.resize(ce+1),this.emplace(ce,u,d,b,M,I,D,U,F,ee,ne)}emplace(u,d,b,M,I,D,U,F,ee,ne,ce){const _e=10*u;return this.uint16[_e+0]=d,this.uint16[_e+1]=b,this.uint16[_e+2]=M,this.uint16[_e+3]=I,this.uint16[_e+4]=D,this.uint16[_e+5]=U,this.uint16[_e+6]=F,this.uint16[_e+7]=ee,this.uint16[_e+8]=ne,this.uint16[_e+9]=ce,u}}id.prototype.bytesPerElement=20,Hn("StructArrayLayout10ui20",id);class hc extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I,D,U,F){const ee=this.length;return this.resize(ee+1),this.emplace(ee,u,d,b,M,I,D,U,F)}emplace(u,d,b,M,I,D,U,F,ee){const ne=8*u;return this.uint16[ne+0]=d,this.uint16[ne+1]=b,this.uint16[ne+2]=M,this.uint16[ne+3]=I,this.uint16[ne+4]=D,this.uint16[ne+5]=U,this.uint16[ne+6]=F,this.uint16[ne+7]=ee,u}}hc.prototype.bytesPerElement=16,Hn("StructArrayLayout8ui16",hc);class Gd extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I,D,U,F,ee,ne,ce,_e){const we=this.length;return this.resize(we+1),this.emplace(we,u,d,b,M,I,D,U,F,ee,ne,ce,_e)}emplace(u,d,b,M,I,D,U,F,ee,ne,ce,_e,we){const Re=12*u;return this.int16[Re+0]=d,this.int16[Re+1]=b,this.int16[Re+2]=M,this.int16[Re+3]=I,this.uint16[Re+4]=D,this.uint16[Re+5]=U,this.uint16[Re+6]=F,this.uint16[Re+7]=ee,this.int16[Re+8]=ne,this.int16[Re+9]=ce,this.int16[Re+10]=_e,this.int16[Re+11]=we,u}}Gd.prototype.bytesPerElement=24,Hn("StructArrayLayout4i4ui4i24",Gd);class ms extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const I=3*u;return this.float32[I+0]=d,this.float32[I+1]=b,this.float32[I+2]=M,u}}ms.prototype.bytesPerElement=12,Hn("StructArrayLayout3f12",ms);class Qd extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint32[1*u+0]=d,u}}Qd.prototype.bytesPerElement=4,Hn("StructArrayLayout1ul4",Qd);class RA extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I,D,U,F,ee){const ne=this.length;return this.resize(ne+1),this.emplace(ne,u,d,b,M,I,D,U,F,ee)}emplace(u,d,b,M,I,D,U,F,ee,ne){const ce=10*u,_e=5*u;return this.int16[ce+0]=d,this.int16[ce+1]=b,this.int16[ce+2]=M,this.int16[ce+3]=I,this.int16[ce+4]=D,this.int16[ce+5]=U,this.uint32[_e+3]=F,this.uint16[ce+8]=ee,this.uint16[ce+9]=ne,u}}RA.prototype.bytesPerElement=20,Hn("StructArrayLayout6i1ul2ui20",RA);class Tp extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I,D){const U=this.length;return this.resize(U+1),this.emplace(U,u,d,b,M,I,D)}emplace(u,d,b,M,I,D,U){const F=6*u;return this.int16[F+0]=d,this.int16[F+1]=b,this.int16[F+2]=M,this.int16[F+3]=I,this.int16[F+4]=D,this.int16[F+5]=U,u}}Tp.prototype.bytesPerElement=12,Hn("StructArrayLayout2i2i2i12",Tp);class Wd extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I){const D=this.length;return this.resize(D+1),this.emplace(D,u,d,b,M,I)}emplace(u,d,b,M,I,D){const U=4*u,F=8*u;return this.float32[U+0]=d,this.float32[U+1]=b,this.float32[U+2]=M,this.int16[F+6]=I,this.int16[F+7]=D,u}}Wd.prototype.bytesPerElement=16,Hn("StructArrayLayout2f1f2i16",Wd);class Hm extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I,D){const U=this.length;return this.resize(U+1),this.emplace(U,u,d,b,M,I,D)}emplace(u,d,b,M,I,D,U){const F=16*u,ee=4*u,ne=8*u;return this.uint8[F+0]=d,this.uint8[F+1]=b,this.float32[ee+1]=M,this.float32[ee+2]=I,this.int16[ne+6]=D,this.int16[ne+7]=U,u}}Hm.prototype.bytesPerElement=16,Hn("StructArrayLayout2ub2f2i16",Hm);class qd extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const I=3*u;return this.uint16[I+0]=d,this.uint16[I+1]=b,this.uint16[I+2]=M,u}}qd.prototype.bytesPerElement=6,Hn("StructArrayLayout3ui6",qd);class B extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I,D,U,F,ee,ne,ce,_e,we,Re,ze,He,nt){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,u,d,b,M,I,D,U,F,ee,ne,ce,_e,we,Re,ze,He,nt)}emplace(u,d,b,M,I,D,U,F,ee,ne,ce,_e,we,Re,ze,He,nt,Bt){const lt=24*u,vt=12*u,Nt=48*u;return this.int16[lt+0]=d,this.int16[lt+1]=b,this.uint16[lt+2]=M,this.uint16[lt+3]=I,this.uint32[vt+2]=D,this.uint32[vt+3]=U,this.uint32[vt+4]=F,this.uint16[lt+10]=ee,this.uint16[lt+11]=ne,this.uint16[lt+12]=ce,this.float32[vt+7]=_e,this.float32[vt+8]=we,this.uint8[Nt+36]=Re,this.uint8[Nt+37]=ze,this.uint8[Nt+38]=He,this.uint32[vt+10]=nt,this.int16[lt+22]=Bt,u}}B.prototype.bytesPerElement=48,Hn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",B);class l extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,M,I,D,U,F,ee,ne,ce,_e,we,Re,ze,He,nt,Bt,lt,vt,Nt,Zt,fn,Nn,Rn,Fn,Ci,Ln){const jn=this.length;return this.resize(jn+1),this.emplace(jn,u,d,b,M,I,D,U,F,ee,ne,ce,_e,we,Re,ze,He,nt,Bt,lt,vt,Nt,Zt,fn,Nn,Rn,Fn,Ci,Ln)}emplace(u,d,b,M,I,D,U,F,ee,ne,ce,_e,we,Re,ze,He,nt,Bt,lt,vt,Nt,Zt,fn,Nn,Rn,Fn,Ci,Ln,jn){const an=32*u,Fi=16*u;return this.int16[an+0]=d,this.int16[an+1]=b,this.int16[an+2]=M,this.int16[an+3]=I,this.int16[an+4]=D,this.int16[an+5]=U,this.int16[an+6]=F,this.int16[an+7]=ee,this.uint16[an+8]=ne,this.uint16[an+9]=ce,this.uint16[an+10]=_e,this.uint16[an+11]=we,this.uint16[an+12]=Re,this.uint16[an+13]=ze,this.uint16[an+14]=He,this.uint16[an+15]=nt,this.uint16[an+16]=Bt,this.uint16[an+17]=lt,this.uint16[an+18]=vt,this.uint16[an+19]=Nt,this.uint16[an+20]=Zt,this.uint16[an+21]=fn,this.uint16[an+22]=Nn,this.uint32[Fi+12]=Rn,this.float32[Fi+13]=Fn,this.float32[Fi+14]=Ci,this.uint16[an+30]=Ln,this.uint16[an+31]=jn,u}}l.prototype.bytesPerElement=64,Hn("StructArrayLayout8i15ui1ul2f2ui64",l);class p extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.float32[1*u+0]=d,u}}p.prototype.bytesPerElement=4,Hn("StructArrayLayout1f4",p);class C extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const I=3*u;return this.uint16[6*u+0]=d,this.float32[I+1]=b,this.float32[I+2]=M,u}}C.prototype.bytesPerElement=12,Hn("StructArrayLayout1ui2f12",C);class S extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d,b){const M=this.length;return this.resize(M+1),this.emplace(M,u,d,b)}emplace(u,d,b,M){const I=4*u;return this.uint32[2*u+0]=d,this.uint16[I+2]=b,this.uint16[I+3]=M,u}}S.prototype.bytesPerElement=8,Hn("StructArrayLayout1ul2ui8",S);class k extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,d){const b=this.length;return this.resize(b+1),this.emplace(b,u,d)}emplace(u,d,b){const M=2*u;return this.uint16[M+0]=d,this.uint16[M+1]=b,u}}k.prototype.bytesPerElement=4,Hn("StructArrayLayout2ui4",k);class K extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const d=this.length;return this.resize(d+1),this.emplace(d,u)}emplace(u,d){return this.uint16[1*u+0]=d,u}}K.prototype.bytesPerElement=2,Hn("StructArrayLayout1ui2",K);class N extends us{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,d,b,M){const I=this.length;return this.resize(I+1),this.emplace(I,u,d,b,M)}emplace(u,d,b,M,I){const D=4*u;return this.float32[D+0]=d,this.float32[D+1]=b,this.float32[D+2]=M,this.float32[D+3]=I,u}}N.prototype.bytesPerElement=16,Hn("StructArrayLayout4f16",N);class q extends Os{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new c(this.anchorPointX,this.anchorPointY)}}q.prototype.size=20;class ie extends RA{get(u){return new q(this,u)}}Hn("CollisionBoxArray",ie);class ae extends Os{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ae.prototype.size=48;class ye extends B{get(u){return new ae(this,u)}}Hn("PlacedSymbolArray",ye);class pe extends Os{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}pe.prototype.size=64;class Se extends l{get(u){return new pe(this,u)}}Hn("SymbolInstanceArray",Se);class Fe extends p{getoffsetX(u){return this.float32[1*u+0]}}Hn("GlyphOffsetArray",Fe);class Xe extends ko{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}Hn("SymbolLineVertexArray",Xe);class $e extends Os{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}$e.prototype.size=12;class tt extends C{get(u){return new $e(this,u)}}Hn("TextAnchorOffsetArray",tt);class it extends Os{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}it.prototype.size=8;class ct extends S{get(u){return new it(this,u)}}Hn("FeatureIndexArray",ct);class rt extends So{}class ht extends So{}class ft extends So{}class ot extends IA{}class St extends kA{}class Wt extends TA{}class Ut extends id{}class jt extends hc{}class Qt extends Gd{}class On extends ms{}class In extends Qd{}class ln extends Tp{}class $n extends Hm{}class Hi extends qd{}class Er extends k{}const Lo=uo([{name:"a_pos",components:2,type:"Int16"}],4),{members:No}=Lo;class hr{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,d,b,M){const I=this.segments[this.segments.length-1];return u>hr.MAX_VERTEX_ARRAY_LENGTH&&Ct(`Max vertices per segment is ${hr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${hr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!I||I.vertexLength+u>hr.MAX_VERTEX_ARRAY_LENGTH||I.sortKey!==M?this.createNewSegment(d,b,M):I}createNewSegment(u,d,b){const M={vertexOffset:u.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return b!==void 0&&(M.sortKey=b),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(M),M}getOrCreateLatestSegment(u,d,b){return this.prepareSegment(0,u,d,b)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const d in u.vaos)u.vaos[d].destroy()}static simpleSegment(u,d,b,M){return new hr([{vertexOffset:u,primitiveOffset:d,vertexLength:b,primitiveLength:M,vaos:{},sortKey:0}])}}function Jo(f,u){return 256*(f=Tt(Math.floor(f),0,255))+Tt(Math.floor(u),0,255)}hr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Hn("SegmentVector",hr);const Ta=uo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Is=uo([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Ra,js,na,ma={exports:{}},DA={exports:{}},ia={exports:{}},ul=(function(){if(na)return ma.exports;na=1;var f=(Ra||(Ra=1,DA.exports=function(d,b){var M,I,D,U,F,ee,ne,ce;for(I=d.length-(M=3&d.length),D=b,F=3432918353,ee=461845907,ce=0;ce<I;)ne=255&d.charCodeAt(ce)|(255&d.charCodeAt(++ce))<<8|(255&d.charCodeAt(++ce))<<16|(255&d.charCodeAt(++ce))<<24,++ce,D=27492+(65535&(U=5*(65535&(D=(D^=ne=(65535&(ne=(ne=(65535&ne)*F+(((ne>>>16)*F&65535)<<16)&4294967295)<<15|ne>>>17))*ee+(((ne>>>16)*ee&65535)<<16)&4294967295)<<13|D>>>19))+((5*(D>>>16)&65535)<<16)&4294967295))+((58964+(U>>>16)&65535)<<16);switch(ne=0,M){case 3:ne^=(255&d.charCodeAt(ce+2))<<16;case 2:ne^=(255&d.charCodeAt(ce+1))<<8;case 1:D^=ne=(65535&(ne=(ne=(65535&(ne^=255&d.charCodeAt(ce)))*F+(((ne>>>16)*F&65535)<<16)&4294967295)<<15|ne>>>17))*ee+(((ne>>>16)*ee&65535)<<16)&4294967295}return D^=d.length,D=2246822507*(65535&(D^=D>>>16))+((2246822507*(D>>>16)&65535)<<16)&4294967295,D=3266489909*(65535&(D^=D>>>13))+((3266489909*(D>>>16)&65535)<<16)&4294967295,(D^=D>>>16)>>>0}),DA.exports),u=(js||(js=1,ia.exports=function(d,b){for(var M,I=d.length,D=b^I,U=0;I>=4;)M=1540483477*(65535&(M=255&d.charCodeAt(U)|(255&d.charCodeAt(++U))<<8|(255&d.charCodeAt(++U))<<16|(255&d.charCodeAt(++U))<<24))+((1540483477*(M>>>16)&65535)<<16),D=1540483477*(65535&D)+((1540483477*(D>>>16)&65535)<<16)^(M=1540483477*(65535&(M^=M>>>24))+((1540483477*(M>>>16)&65535)<<16)),I-=4,++U;switch(I){case 3:D^=(255&d.charCodeAt(U+2))<<16;case 2:D^=(255&d.charCodeAt(U+1))<<8;case 1:D=1540483477*(65535&(D^=255&d.charCodeAt(U)))+((1540483477*(D>>>16)&65535)<<16)}return D=1540483477*(65535&(D^=D>>>13))+((1540483477*(D>>>16)&65535)<<16),(D^=D>>>15)>>>0}),ia.exports);return ma.exports=f,ma.exports.murmur3=f,ma.exports.murmur2=u,ma.exports})(),dh=h(ul);class rd{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,d,b,M){this.ids.push(od(u)),this.positions.push(d,b,M)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=od(u);let b=0,M=this.ids.length-1;for(;b<M;){const D=b+M>>1;this.ids[D]>=d?M=D:b=D+1}const I=[];for(;this.ids[b]===d;)I.push({index:this.positions[3*b],start:this.positions[3*b+1],end:this.positions[3*b+2]}),b++;return I}static serialize(u,d){const b=new Float64Array(u.ids),M=new Uint32Array(u.positions);return mu(b,M,0,b.length-1),d&&d.push(b.buffer,M.buffer),{ids:b,positions:M}}static deserialize(u){const d=new rd;return d.ids=u.ids,d.positions=u.positions,d.indexed=!0,d}}function od(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:dh(String(f))}function mu(f,u,d,b){for(;d<b;){const M=f[d+b>>1];let I=d-1,D=b+1;for(;;){do I++;while(f[I]<M);do D--;while(f[D]>M);if(I>=D)break;_l(f,I,D),_l(u,3*I,3*D),_l(u,3*I+1,3*D+1),_l(u,3*I+2,3*D+2)}D-d<b-D?(mu(f,u,d,D),d=D+1):(mu(f,u,D+1,b),b=D)}}function _l(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}Hn("FeaturePositionMap",rd);class cl{constructor(u,d){this.gl=u.gl,this.location=d}}class Dc extends cl{constructor(u,d){super(u,d),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class sd extends cl{constructor(u,d){super(u,d),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class gs extends cl{constructor(u,d){super(u,d),this.current=Gi.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const ra=new Float32Array(16);function Ku(f){return[Jo(255*f.r,255*f.g),Jo(255*f.b,255*f.a)]}class Ns{constructor(u,d,b){this.value=u,this.uniformNames=d.map((M=>`u_${M}`)),this.type=b}setUniform(u,d,b){u.set(b.constantOr(this.value))}getBinding(u,d,b){return this.type==="color"?new gs(u,d):new Dc(u,d)}}class Pc{constructor(u,d){this.uniformNames=d.map((b=>`u_${b}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=u.tlbr}setConstantDashPositions(u,d){this.dashTo=[0,u.y,u.height,u.width],this.dashFrom=[0,d.y,d.height,d.width]}setUniform(u,d,b,M){let I=null;M==="u_pattern_to"?I=this.patternTo:M==="u_pattern_from"?I=this.patternFrom:M==="u_dasharray_to"?I=this.dashTo:M==="u_dasharray_from"?I=this.dashFrom:M==="u_pixel_ratio_to"?I=this.pixelRatioTo:M==="u_pixel_ratio_from"&&(I=this.pixelRatioFrom),I!==null&&u.set(I)}getBinding(u,d,b){return b.substr(0,9)==="u_pattern"||b.substr(0,12)==="u_dasharray_"?new sd(u,d):new Dc(u,d)}}class Uu{constructor(u,d,b,M){this.expression=u,this.type=b,this.maxValue=0,this.paintVertexAttributes=d.map((I=>({name:`a_${I}`,type:"Float32",components:b==="color"?2:1,offset:0}))),this.paintVertexArray=new M}populatePaintArray(u,d,b){const M=this.paintVertexArray.length,I=this.expression.evaluate(new wo(0,b),d,{},b.canonical,[],b.formattedSection);this.paintVertexArray.resize(u),this._setPaintValue(M,u,I)}updatePaintArray(u,d,b,M,I){const D=this.expression.evaluate(new wo(0,I),b,M);this._setPaintValue(u,d,D)}_setPaintValue(u,d,b){if(this.type==="color"){const M=Ku(b);for(let I=u;I<d;I++)this.paintVertexArray.emplace(I,M[0],M[1])}else{for(let M=u;M<d;M++)this.paintVertexArray.emplace(M,b);this.maxValue=Math.max(this.maxValue,Math.abs(b))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class gu{constructor(u,d,b,M,I,D){this.expression=u,this.uniformNames=d.map((U=>`u_${U}_t`)),this.type=b,this.useIntegerZoom=M,this.zoom=I,this.maxValue=0,this.paintVertexAttributes=d.map((U=>({name:`a_${U}`,type:"Float32",components:b==="color"?4:2,offset:0}))),this.paintVertexArray=new D}populatePaintArray(u,d,b){const M=this.expression.evaluate(new wo(this.zoom,b),d,{},b.canonical,[],b.formattedSection),I=this.expression.evaluate(new wo(this.zoom+1,b),d,{},b.canonical,[],b.formattedSection),D=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(D,u,M,I)}updatePaintArray(u,d,b,M,I){const D=this.expression.evaluate(new wo(this.zoom,I),b,M),U=this.expression.evaluate(new wo(this.zoom+1,I),b,M);this._setPaintValue(u,d,D,U)}_setPaintValue(u,d,b,M){if(this.type==="color"){const I=Ku(b),D=Ku(M);for(let U=u;U<d;U++)this.paintVertexArray.emplace(U,I[0],I[1],D[0],D[1])}else{for(let I=u;I<d;I++)this.paintVertexArray.emplace(I,b,M);this.maxValue=Math.max(this.maxValue,Math.abs(b),Math.abs(M))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,d){const b=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,M=Tt(this.expression.interpolationFactor(b,this.zoom,this.zoom+1),0,1);u.set(M)}getBinding(u,d,b){return new Dc(u,d)}}class Kc{constructor(u,d,b,M,I,D){this.expression=u,this.type=d,this.useIntegerZoom=b,this.zoom=M,this.layerId=D,this.zoomInPaintVertexArray=new I,this.zoomOutPaintVertexArray=new I}populatePaintArray(u,d,b){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(M,u,this.getPositionIds(d),b)}updatePaintArray(u,d,b,M,I){this._setPaintValues(u,d,this.getPositionIds(b),I)}_setPaintValues(u,d,b,M){const I=this.getPositions(M);if(!I||!b)return;const D=I[b.min],U=I[b.mid],F=I[b.max];if(D&&U&&F)for(let ee=u;ee<d;ee++)this.emplace(this.zoomInPaintVertexArray,ee,U,D),this.emplace(this.zoomOutPaintVertexArray,ee,U,F)}upload(u){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const d=this.getVertexAttributes();this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,d,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,d,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Rp extends Kc{getPositions(u){return u.imagePositions}getPositionIds(u){return u.patterns&&u.patterns[this.layerId]}getVertexAttributes(){return Ta.members}emplace(u,d,b,M){u.emplace(d,b.tlbr[0],b.tlbr[1],b.tlbr[2],b.tlbr[3],M.tlbr[0],M.tlbr[1],M.tlbr[2],M.tlbr[3],b.pixelRatio,M.pixelRatio)}}class fh extends Kc{getPositions(u){return u.dashPositions}getPositionIds(u){return u.dashes&&u.dashes[this.layerId]}getVertexAttributes(){return Is.members}emplace(u,d,b,M){u.emplace(d,0,b.y,b.height,b.width,0,M.y,M.height,M.width)}}class ph{constructor(u,d,b){this.binders={},this._buffers=[];const M=[];for(const I in u.paint._values){if(!b(I))continue;const D=u.paint.get(I);if(!(D instanceof ka&&Au(D.property.specification)))continue;const U=Nf(I,u.type),F=D.value,ee=D.property.specification.type,ne=D.property.useIntegerZoom,ce=D.property.specification["property-type"],_e=ce==="cross-faded"||ce==="cross-faded-data-driven";if(F.kind==="constant")this.binders[I]=_e?new Pc(F.value,U):new Ns(F.value,U,ee),M.push(`/u_${I}`);else if(F.kind==="source"||_e){const we=Gf(I,ee,"source");this.binders[I]=_e?I==="line-dasharray"?new fh(F,ee,ne,d,we,u.id):new Rp(F,ee,ne,d,we,u.id):new Uu(F,U,ee,we),M.push(`/a_${I}`)}else{const we=Gf(I,ee,"composite");this.binders[I]=new gu(F,U,ee,ne,d,we),M.push(`/z_${I}`)}}this.cacheKey=M.sort().join("")}getMaxValue(u){const d=this.binders[u];return d instanceof Uu||d instanceof gu?d.maxValue:0}populatePaintArrays(u,d,b){for(const M in this.binders){const I=this.binders[M];(I instanceof Uu||I instanceof gu||I instanceof Kc)&&I.populatePaintArray(u,d,b)}}setConstantPatternPositions(u,d){for(const b in this.binders){const M=this.binders[b];M instanceof Pc&&M.setConstantPatternPositions(u,d)}}setConstantDashPositions(u,d){for(const b in this.binders){const M=this.binders[b];M instanceof Pc&&M.setConstantDashPositions(u,d)}}updatePaintArrays(u,d,b,M,I){let D=!1;for(const U in u){const F=d.getPositions(U);for(const ee of F){const ne=b.feature(ee.index);for(const ce in this.binders){const _e=this.binders[ce];if((_e instanceof Uu||_e instanceof gu||_e instanceof Kc)&&_e.expression.isStateDependent===!0){const we=M.paint.get(ce);_e.expression=we.value,_e.updatePaintArray(ee.start,ee.end,ne,u[U],I),D=!0}}}}return D}defines(){const u=[];for(const d in this.binders){const b=this.binders[d];(b instanceof Ns||b instanceof Pc)&&u.push(...b.uniformNames.map((M=>`#define HAS_UNIFORM_${M}`)))}return u}getBinderAttributes(){const u=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof Uu||b instanceof gu)for(let M=0;M<b.paintVertexAttributes.length;M++)u.push(b.paintVertexAttributes[M].name);else if(b instanceof Kc){const M=b.getVertexAttributes();for(const I of M)u.push(I.name)}}return u}getBinderUniforms(){const u=[];for(const d in this.binders){const b=this.binders[d];if(b instanceof Ns||b instanceof Pc||b instanceof gu)for(const M of b.uniformNames)u.push(M)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,d){const b=[];for(const M in this.binders){const I=this.binders[M];if(I instanceof Ns||I instanceof Pc||I instanceof gu){for(const D of I.uniformNames)if(d[D]){const U=I.getBinding(u,d[D],D);b.push({name:D,property:M,binding:U})}}}return b}setUniforms(u,d,b,M){for(const{name:I,property:D,binding:U}of d)this.binders[D].setUniform(U,M,b.get(D),I)}updatePaintBuffers(u){this._buffers=[];for(const d in this.binders){const b=this.binders[d];if(u&&b instanceof Kc){const M=u.fromScale===2?b.zoomInPaintVertexBuffer:b.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(b instanceof Uu||b instanceof gu)&&b.paintVertexBuffer&&this._buffers.push(b.paintVertexBuffer)}}upload(u){for(const d in this.binders){const b=this.binders[d];(b instanceof Uu||b instanceof gu||b instanceof Kc)&&b.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const d=this.binders[u];(d instanceof Uu||d instanceof gu||d instanceof Kc)&&d.destroy()}}}class lA{constructor(u,d,b=()=>!0){this.programConfigurations={};for(const M of u)this.programConfigurations[M.id]=new ph(M,d,b);this.needsUpload=!1,this._featureMap=new rd,this._bufferOffset=0}populatePaintArrays(u,d,b,M){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(u,d,M);d.id!==void 0&&this._featureMap.add(d.id,b,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,d,b,M){for(const I of b)this.needsUpload=this.programConfigurations[I.id].updatePaintArrays(u,this._featureMap,d,I,M)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function Nf(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function Gf(f,u,d){const b={color:{source:TA,composite:N},number:{source:p,composite:TA}},M=(function(I){return{"line-pattern":{source:Ut,composite:Ut},"fill-pattern":{source:Ut,composite:Ut},"fill-extrusion-pattern":{source:Ut,composite:Ut},"line-dasharray":{source:jt,composite:jt}}[I]})(f);return M&&M[d]||b[u][d]}Hn("ConstantBinder",Ns),Hn("CrossFadedConstantBinder",Pc),Hn("SourceExpressionBinder",Uu),Hn("CrossFadedPatternBinder",Rp),Hn("CrossFadedDasharrayBinder",fh),Hn("CompositeExpressionBinder",gu),Hn("ProgramConfiguration",ph,{omit:["_buffers"]}),Hn("ProgramConfigurationSet",lA);const mh=Math.pow(2,14)-1,Zm=-mh-1;function uA(f){const u=yt/f.extent,d=f.loadGeometry();for(let b=0;b<d.length;b++){const M=d[b];for(let I=0;I<M.length;I++){const D=M[I],U=Math.round(D.x*u),F=Math.round(D.y*u);D.x=Tt(U,Zm,mh),D.y=Tt(F,Zm,mh),(U<D.x||U>D.x+1||F<D.y||F>D.y+1)&&Ct("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function Wa(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?uA(f):[]}}const I1=-32768;function gv(f,u,d,b,M){f.emplaceBack(I1+8*u+b,I1+8*d+M)}class k1{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.layoutVertexArray=new ht,this.indexArray=new Hi,this.segments=new hr,this.programConfigurations=new lA(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){const M=this.layers[0],I=[];let D=null,U=!1,F=M.type==="heatmap";if(M.type==="circle"){const ne=M;D=ne.layout.get("circle-sort-key"),U=!D.isConstant(),F=F||ne.paint.get("circle-pitch-alignment")==="map"}const ee=F?d.subdivisionGranularity.circle:1;for(const{feature:ne,id:ce,index:_e,sourceLayerIndex:we}of u){const Re=this.layers[0]._featureFilter.needGeometry,ze=Wa(ne,Re);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),ze,b))continue;const He=U?D.evaluate(ze,{},b):void 0,nt={id:ce,properties:ne.properties,type:ne.type,sourceLayerIndex:we,index:_e,geometry:Re?ze.geometry:uA(ne),patterns:{},sortKey:He};I.push(nt)}U&&I.sort(((ne,ce)=>ne.sortKey-ce.sortKey));for(const ne of I){const{geometry:ce,index:_e,sourceLayerIndex:we}=ne,Re=u[_e].feature;this.addFeature(ne,ce,_e,b,ee),d.featureIndex.insert(Re,ce,_e,we,this.index)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,No),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,d,b,M,I=1){let D;switch(I){case 1:D=[0,7];break;case 3:D=[0,2,5,7];break;case 5:D=[0,1,3,4,6,7];break;case 7:D=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${I}; valid values are 1, 3, 5, 7.`)}const U=D.length;for(const F of d)for(const ee of F){const ne=ee.x,ce=ee.y;if(ne<0||ne>=yt||ce<0||ce>=yt)continue;const _e=this.segments.prepareSegment(U*U,this.layoutVertexArray,this.indexArray,u.sortKey),we=_e.vertexLength;for(let Re=0;Re<U;Re++)for(let ze=0;ze<U;ze++)gv(this.layoutVertexArray,ne,ce,D[ze],D[Re]);for(let Re=0;Re<U-1;Re++)for(let ze=0;ze<U-1;ze++){const He=we+Re*U+ze,nt=we+(Re+1)*U+ze;this.indexArray.emplaceBack(He,nt+1,He+1),this.indexArray.emplaceBack(He,nt,nt+1)}_e.vertexLength+=U*U,_e.primitiveLength+=(U-1)*(U-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:{},canonical:M})}}function Xm(f,u){for(let d=0;d<f.length;d++)if(qi(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(qi(f,u[d]))return!0;return!!Jm(f,u)}function b0(f,u,d){return!!qi(f,u)||!!Dp(u,f,d)}function T1(f,u){if(f.length===1)return ga(u,f[0]);for(let d=0;d<u.length;d++){const b=u[d];for(let M=0;M<b.length;M++)if(qi(f,b[M]))return!0}for(let d=0;d<f.length;d++)if(ga(u,f[d]))return!0;for(let d=0;d<u.length;d++)if(Jm(f,u[d]))return!0;return!1}function ad(f,u,d){if(f.length>1){if(Jm(f,u))return!0;for(let b=0;b<u.length;b++)if(Dp(u[b],f,d))return!0}for(let b=0;b<f.length;b++)if(Dp(f[b],u,d))return!0;return!1}function Jm(f,u){if(f.length===0||u.length===0)return!1;for(let d=0;d<f.length-1;d++){const b=f[d],M=f[d+1];for(let I=0;I<u.length-1;I++)if(yv(b,M,u[I],u[I+1]))return!0}return!1}function yv(f,u,d,b){return Rt(f,d,b)!==Rt(u,d,b)&&Rt(f,u,d)!==Rt(f,u,b)}function Dp(f,u,d){const b=d*d;if(u.length===1)return f.distSqr(u[0])<b;for(let M=1;M<u.length;M++)if(oa(f,u[M-1],u[M])<b)return!0;return!1}function oa(f,u,d){const b=u.distSqr(d);if(b===0)return f.distSqr(u);const M=((f.x-u.x)*(d.x-u.x)+(f.y-u.y)*(d.y-u.y))/b;return f.distSqr(M<0?u:M>1?d:d.sub(u)._mult(M)._add(u))}function ga(f,u){let d,b,M,I=!1;for(let D=0;D<f.length;D++){d=f[D];for(let U=0,F=d.length-1;U<d.length;F=U++)b=d[U],M=d[F],b.y>u.y!=M.y>u.y&&u.x<(M.x-b.x)*(u.y-b.y)/(M.y-b.y)+b.x&&(I=!I)}return I}function qi(f,u){let d=!1;for(let b=0,M=f.length-1;b<f.length;M=b++){const I=f[b],D=f[M];I.y>u.y!=D.y>u.y&&u.x<(D.x-I.x)*(u.y-I.y)/(D.y-I.y)+I.x&&(d=!d)}return d}function C0(f,u,d){const b=d[0],M=d[2];if(f.x<b.x&&u.x<b.x||f.x>M.x&&u.x>M.x||f.y<b.y&&u.y<b.y||f.y>M.y&&u.y>M.y)return!1;const I=Rt(f,u,d[0]);return I!==Rt(f,u,d[1])||I!==Rt(f,u,d[2])||I!==Rt(f,u,d[3])}function Yd(f,u,d){const b=u.paint.get(f).value;return b.kind==="constant"?b.value:d.programConfigurations.get(u.id).getMaxValue(f)}function gh(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Qf(f,u,d,b,M){if(!u[0]&&!u[1])return f;const I=c.convert(u)._mult(M);d==="viewport"&&I._rotate(-b);const D=[];for(let U=0;U<f.length;U++)D.push(f[U].sub(I));return D}function R1({queryGeometry:f,size:u},d){return b0(f,d,u)}function _0({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M},I){return b0(f,I,u*(d.projectTileCoordinates(I.x,I.y,b,M).signedDistanceFromCamera/d.cameraToCenterDistance))}function yu({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M},I){const D=d.projectTileCoordinates(I.x,I.y,b,M).signedDistanceFromCamera,U=u*(d.cameraToCenterDistance/D);return b0(f,eg(I,d,b,M),U)}function $x({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M},I){return b0(f,eg(I,d,b,M),u)}function x0({queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M,pitchAlignment:I="map",pitchScale:D="map"},U){const F=I==="map"?D==="map"?R1:_0:D==="map"?yu:$x,ee={queryGeometry:f,size:u,transform:d,unwrappedTileID:b,getElevation:M};for(const ne of U)for(const ce of ne)if(F(ee,ce))return!0;return!1}function eg(f,u,d,b){const M=u.projectTileCoordinates(f.x,f.y,d,b).point;return new c((.5*M.x+.5)*u.width,(.5*-M.y+.5)*u.height)}let vv,D1;Hn("CircleBucket",k1,{omit:["layers"]});var aC={get paint(){return D1=D1||new ls({"circle-radius":new bi(dt.paint_circle["circle-radius"]),"circle-color":new bi(dt.paint_circle["circle-color"]),"circle-blur":new bi(dt.paint_circle["circle-blur"]),"circle-opacity":new bi(dt.paint_circle["circle-opacity"]),"circle-translate":new ti(dt.paint_circle["circle-translate"]),"circle-translate-anchor":new ti(dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ti(dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ti(dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new bi(dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new bi(dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new bi(dt.paint_circle["circle-stroke-opacity"])})},get layout(){return vv=vv||new ls({"circle-sort-key":new bi(dt.layout_circle["circle-sort-key"])})}};class bv extends ll{constructor(u,d){super(u,aC,d)}createBucket(u){return new k1(u)}queryRadius(u){const d=u;return Yd("circle-radius",this,d)+Yd("circle-stroke-width",this,d)+gh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:I,pixelsToTileUnits:D,unwrappedTileID:U,getElevation:F}){const ee=Qf(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-I.bearingInRadians,D),ne=this.paint.get("circle-radius").evaluate(d,b)+this.paint.get("circle-stroke-width").evaluate(d,b),ce=this.paint.get("circle-pitch-scale"),_e=this.paint.get("circle-pitch-alignment");let we,Re;return _e==="map"?(we=ee,Re=ne*D):(we=(function(ze,He,nt,Bt){return ze.map((lt=>eg(lt,He,nt,Bt)))})(ee,I,U,F),Re=ne),x0({queryGeometry:we,size:Re,transform:I,unwrappedTileID:U,getElevation:F,pitchAlignment:_e,pitchScale:ce},M)}}class P1 extends k1{}let PA;Hn("HeatmapBucket",P1,{omit:["layers"]});var Lu={get paint(){return PA=PA||new ls({"heatmap-radius":new bi(dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new bi(dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ti(dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new hh(dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ti(dt.paint_heatmap["heatmap-opacity"])})}};function Pp(f,{width:u,height:d},b,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==u*d*b)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${u*d*b}`)}else M=new Uint8Array(u*d*b);return f.width=u,f.height=d,f.data=M,f}function M0(f,{width:u,height:d},b){if(u===f.width&&d===f.height)return;const M=Pp({},{width:u,height:d},b);Kp(f,M,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,d)},b),f.width=u,f.height=d,f.data=M.data}function Kp(f,u,d,b,M,I){if(M.width===0||M.height===0)return u;if(M.width>f.width||M.height>f.height||d.x>f.width-M.width||d.y>f.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>u.width||M.height>u.height||b.x>u.width-M.width||b.y>u.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const D=f.data,U=u.data;if(D===U)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<M.height;F++){const ee=((d.y+F)*f.width+d.x)*I,ne=((b.y+F)*u.width+b.x)*I;for(let ce=0;ce<M.width*I;ce++)U[ne+ce]=D[ee+ce]}return u}class tg{constructor(u,d){Pp(this,u,1,d)}resize(u){M0(this,u,1)}clone(){return new tg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,b,M,I){Kp(u,d,b,M,I,1)}}class vu{constructor(u,d){Pp(this,u,4,d)}resize(u){M0(this,u,4)}replace(u,d){d?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new vu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,d,b,M,I){Kp(u,d,b,M,I,4)}setPixel(u,d,b){const M=4*(u*this.width+d);this.data[M+0]=Math.round(255*b.r/b.a),this.data[M+1]=Math.round(255*b.g/b.a),this.data[M+2]=Math.round(255*b.b/b.a),this.data[M+3]=Math.round(255*b.a)}}function Up(f){const u={},d=f.resolution||256,b=f.clips?f.clips.length:1,M=f.image||new vu({width:d,height:b});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const I=(D,U,F)=>{u[f.evaluationKey]=F;const ee=f.expression.evaluate(u);M.setPixel(D/4/d,U/4,ee)};if(f.clips)for(let D=0,U=0;D<b;++D,U+=4*d)for(let F=0,ee=0;F<d;F++,ee+=4){const ne=F/(d-1),{start:ce,end:_e}=f.clips[D];I(U,ee,ce*(1-ne)+_e*ne)}else for(let D=0,U=0;D<d;D++,U+=4)I(0,U,D/(d-1));return M}Hn("AlphaImage",tg),Hn("RGBAImage",vu);const KA="big-fb";class K1 extends ll{createBucket(u){return new P1(u)}constructor(u,d){super(u,Lu,d),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Up({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(KA)&&this.heatmapFbos.delete(KA)}queryRadius(u){return Yd("heatmap-radius",this,u)}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:I,pixelsToTileUnits:D,unwrappedTileID:U,getElevation:F}){return x0({queryGeometry:u,size:this.paint.get("heatmap-radius").evaluate(d,b)*D,transform:I,unwrappedTileID:U,getElevation:F},M)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let lC;var uC={get paint(){return lC=lC||new ls({"hillshade-illumination-direction":new ti(dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new ti(dt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new ti(dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ti(dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ti(dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ti(dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ti(dt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new ti(dt.paint_hillshade["hillshade-method"])})}};class Vd extends ll{constructor(u,d){super(u,uC,d),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let u=this.paint.get("hillshade-illumination-direction").values,d=this.paint.get("hillshade-illumination-altitude").values,b=this.paint.get("hillshade-highlight-color").values,M=this.paint.get("hillshade-shadow-color").values;const I=Math.max(u.length,d.length,b.length,M.length);u=u.concat(Array(I-u.length).fill(u.at(-1))),d=d.concat(Array(I-d.length).fill(d.at(-1))),b=b.concat(Array(I-b.length).fill(b.at(-1))),M=M.concat(Array(I-M.length).fill(M.at(-1)));const D=d.map(Dn);return{directionRadians:u.map(Dn),altitudeRadians:D,shadowColor:M,highlightColor:b}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let U1;var Cv={get paint(){return U1=U1||new ls({"color-relief-opacity":new ti(dt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new hh(dt["paint_color-relief"]["color-relief-color"])})}};class Lp{constructor(u,d,b,M){this.context=u,this.format=b,this.texture=u.gl.createTexture(),this.update(d,M)}update(u,d,b){const{width:M,height:I}=u,D=!(this.size&&this.size[0]===M&&this.size[1]===I||b),{context:U}=this,{gl:F}=U;if(this.useMipmap=!!(d&&d.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),U.pixelStoreUnpackFlipY.set(!1),U.pixelStoreUnpack.set(1),U.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!d||d.premultiply!==!1)),D)this.size=[M,I],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||Qn(u)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,u):F.texImage2D(F.TEXTURE_2D,0,this.format,M,I,0,this.format,F.UNSIGNED_BYTE,u.data);else{const{x:ee,y:ne}=b||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||Qn(u)?F.texSubImage2D(F.TEXTURE_2D,0,ee,ne,F.RGBA,F.UNSIGNED_BYTE,u):F.texSubImage2D(F.TEXTURE_2D,0,ee,ne,M,I,F.RGBA,F.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D),U.pixelStoreUnpackFlipY.setDefault(),U.pixelStoreUnpack.setDefault(),U.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(u,d,b){const{context:M}=this,{gl:I}=M;I.bindTexture(I.TEXTURE_2D,this.texture),b!==I.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=I.LINEAR),u!==this.filter&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,u),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,b||u),this.filter=u),d!==this.wrap&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,d),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}class ng{constructor(u,d,b,M=1,I=1,D=1,U=0){if(this.uid=u,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(b&&!["mapbox","terrarium","custom"].includes(b))return void Ct(`"${b}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const F=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),b){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=M,this.greenFactor=I,this.blueFactor=D,this.baseShift=U;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ee=0;ee<F;ee++)this.data[this._idx(-1,ee)]=this.data[this._idx(0,ee)],this.data[this._idx(F,ee)]=this.data[this._idx(F-1,ee)],this.data[this._idx(ee,-1)]=this.data[this._idx(ee,0)],this.data[this._idx(ee,F)]=this.data[this._idx(ee,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ee=0;ee<F;ee++)for(let ne=0;ne<F;ne++){const ce=this.get(ee,ne);ce>this.max&&(this.max=ce),ce<this.min&&(this.min=ce)}}get(u,d){const b=new Uint8Array(this.data.buffer),M=4*this._idx(u,d);return this.unpack(b[M],b[M+1],b[M+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,d){if(u<-1||u>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(u+1)}unpack(u,d,b){return u*this.redFactor+d*this.greenFactor+b*this.blueFactor-this.baseShift}pack(u){return ys(u,this.getUnpackVector())}getPixels(){return new vu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,d,b){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let M=d*this.dim,I=d*this.dim+this.dim,D=b*this.dim,U=b*this.dim+this.dim;switch(d){case-1:M=I-1;break;case 1:I=M+1}switch(b){case-1:D=U-1;break;case 1:U=D+1}const F=-d*this.dim,ee=-b*this.dim;for(let ne=D;ne<U;ne++)for(let ce=M;ce<I;ce++)this.data[this._idx(ce,ne)]=u.data[this._idx(ce+F,ne+ee)]}}function ys(f,u){const d=u[0],b=u[1],M=u[2],I=u[3],D=Math.min(d,b,M),U=Math.round((f+I)/D);return{r:Math.floor(U*D/d)%256,g:Math.floor(U*D/b)%256,b:Math.floor(U*D/M)%256}}Hn("DEMData",ng);class cC extends ll{constructor(u,d){super(u,Cv,d)}_createColorRamp(u){const d={elevationStops:[],colorStops:[]},b=this._transitionablePaint._values["color-relief-color"].value.expression;if(b instanceof Fl&&b._styleExpression.expression instanceof uu){this.colorRampExpression=b;const D=b._styleExpression.expression;d.elevationStops=D.labels,d.colorStops=[];for(const U of d.elevationStops)d.colorStops.push(D.evaluate({globals:{elevation:U}}))}if(d.elevationStops.length<1&&(d.elevationStops=[0],d.colorStops=[Gi.transparent]),d.elevationStops.length<2&&(d.elevationStops.push(d.elevationStops[0]+1),d.colorStops.push(d.colorStops[0])),d.elevationStops.length<=u)return d;const M={elevationStops:[],colorStops:[]},I=(d.elevationStops.length-1)/(u-1);for(let D=0;D<d.elevationStops.length-.5;D+=I)M.elevationStops.push(d.elevationStops[Math.round(D)]),M.colorStops.push(d.colorStops[Math.round(D)]);return Ct(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),M}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(u,d,b){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const M=this._createColorRamp(d),I=new vu({width:M.colorStops.length,height:1}),D=new vu({width:M.colorStops.length,height:1});for(let U=0;U<M.elevationStops.length;U++){const F=ys(M.elevationStops[U],b);D.setPixel(0,U,new Gi(F.r/255,F.g/255,F.b/255,1)),I.setPixel(0,U,M.colorStops[U])}return this.colorRampTextures={elevationTexture:new Lp(u,D,u.gl.RGBA),colorTexture:new Lp(u,I,u.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const w0=uo([{name:"a_pos",components:2,type:"Int16"}],4),{members:L1}=w0;function $d(f,u,d){const b=d.patternDependencies;let M=!1;for(const I of u){const D=I.paint.get(`${f}-pattern`);D.isConstant()||(M=!0);const U=D.constantOr(null);U&&(M=!0,b[U.to]=!0,b[U.from]=!0)}return M}function yh(f,u,d,b,M){const{zoom:I}=b,D=M.patternDependencies;for(const U of u){const F=U.paint.get(`${f}-pattern`).value;if(F.kind!=="constant"){let ee=F.evaluate({zoom:I-1},d,{},M.availableImages),ne=F.evaluate({zoom:I},d,{},M.availableImages),ce=F.evaluate({zoom:I+1},d,{},M.availableImages);ee=ee&&ee.name?ee.name:ee,ne=ne&&ne.name?ne.name:ne,ce=ce&&ce.name?ce.name:ce,D[ee]=!0,D[ne]=!0,D[ce]=!0,d.patterns[U.id]={min:ee,mid:ne,max:ce}}}return d}function ig(f,u,d,b,M){let I;if(M===(function(D,U,F,ee){let ne=0;for(let ce=U,_e=F-ee;ce<F;ce+=ee)ne+=(D[_e]-D[ce])*(D[ce+1]+D[_e+1]),_e=ce;return ne})(f,u,d,b)>0)for(let D=u;D<d;D+=b)I=Mv(D/b|0,f[D],f[D+1],I);else for(let D=d-b;D>=u;D-=b)I=Mv(D/b|0,f[D],f[D+1],I);return I&&rg(I,I.next)&&(Fp(I),I=I.next),I}function Hd(f,u){if(!f)return f;u||(u=f);let d,b=f;do if(d=!1,b.steiner||!rg(b,b.next)&&Qr(b.prev,b,b.next)!==0)b=b.next;else{if(Fp(b),b=u=b.prev,b===b.next)break;d=!0}while(d||b!==u);return u}function Wl(f,u,d,b,M,I,D){if(!f)return;!D&&I&&(function(F,ee,ne,ce){let _e=F;do _e.z===0&&(_e.z=j1(_e.x,_e.y,ee,ne,ce)),_e.prevZ=_e.prev,_e.nextZ=_e.next,_e=_e.next;while(_e!==F);_e.prevZ.nextZ=null,_e.prevZ=null,(function(we){let Re,ze=1;do{let He,nt=we;we=null;let Bt=null;for(Re=0;nt;){Re++;let lt=nt,vt=0;for(let Zt=0;Zt<ze&&(vt++,lt=lt.nextZ,lt);Zt++);let Nt=ze;for(;vt>0||Nt>0&&lt;)vt!==0&&(Nt===0||!lt||nt.z<=lt.z)?(He=nt,nt=nt.nextZ,vt--):(He=lt,lt=lt.nextZ,Nt--),Bt?Bt.nextZ=He:we=He,He.prevZ=Bt,Bt=He;nt=lt}Bt.nextZ=null,ze*=2}while(Re>1)})(_e)})(f,b,M,I);let U=f;for(;f.prev!==f.next;){const F=f.prev,ee=f.next;if(I?AC(f,b,M,I):zu(f))u.push(F.i,f.i,ee.i),Fp(f),f=ee.next,U=ee.next;else if((f=ee)===U){D?D===1?Wl(f=z1(Hd(f),u),u,d,b,M,I,2):D===2&&hC(f,u,d,b,M,I):Wl(Hd(f),u,d,b,M,I,1);break}}}function zu(f){const u=f.prev,d=f,b=f.next;if(Qr(u,d,b)>=0)return!1;const M=u.x,I=d.x,D=b.x,U=u.y,F=d.y,ee=b.y,ne=Math.min(M,I,D),ce=Math.min(U,F,ee),_e=Math.max(M,I,D),we=Math.max(U,F,ee);let Re=b.next;for(;Re!==u;){if(Re.x>=ne&&Re.x<=_e&&Re.y>=ce&&Re.y<=we&&zp(M,U,I,F,D,ee,Re.x,Re.y)&&Qr(Re.prev,Re,Re.next)>=0)return!1;Re=Re.next}return!0}function AC(f,u,d,b){const M=f.prev,I=f,D=f.next;if(Qr(M,I,D)>=0)return!1;const U=M.x,F=I.x,ee=D.x,ne=M.y,ce=I.y,_e=D.y,we=Math.min(U,F,ee),Re=Math.min(ne,ce,_e),ze=Math.max(U,F,ee),He=Math.max(ne,ce,_e),nt=j1(we,Re,u,d,b),Bt=j1(ze,He,u,d,b);let lt=f.prevZ,vt=f.nextZ;for(;lt&&lt.z>=nt&&vt&&vt.z<=Bt;){if(lt.x>=we&&lt.x<=ze&&lt.y>=Re&&lt.y<=He&&lt!==M&&lt!==D&&zp(U,ne,F,ce,ee,_e,lt.x,lt.y)&&Qr(lt.prev,lt,lt.next)>=0||(lt=lt.prevZ,vt.x>=we&&vt.x<=ze&&vt.y>=Re&&vt.y<=He&&vt!==M&&vt!==D&&zp(U,ne,F,ce,ee,_e,vt.x,vt.y)&&Qr(vt.prev,vt,vt.next)>=0))return!1;vt=vt.nextZ}for(;lt&&lt.z>=nt;){if(lt.x>=we&&lt.x<=ze&&lt.y>=Re&&lt.y<=He&&lt!==M&&lt!==D&&zp(U,ne,F,ce,ee,_e,lt.x,lt.y)&&Qr(lt.prev,lt,lt.next)>=0)return!1;lt=lt.prevZ}for(;vt&&vt.z<=Bt;){if(vt.x>=we&&vt.x<=ze&&vt.y>=Re&&vt.y<=He&&vt!==M&&vt!==D&&zp(U,ne,F,ce,ee,_e,vt.x,vt.y)&&Qr(vt.prev,vt,vt.next)>=0)return!1;vt=vt.nextZ}return!0}function z1(f,u){let d=f;do{const b=d.prev,M=d.next.next;!rg(b,M)&&N1(b,d,d.next,M)&&ql(b,M)&&ql(M,b)&&(u.push(b.i,d.i,M.i),Fp(d),Fp(d.next),d=f=M),d=d.next}while(d!==f);return Hd(d)}function hC(f,u,d,b,M,I){let D=f;do{let U=D.next.next;for(;U!==D.prev;){if(D.i!==U.i&&dC(D,U)){let F=ld(D,U);return D=Hd(D,D.next),F=Hd(F,F.next),Wl(D,u,d,b,M,I,0),void Wl(F,u,d,b,M,I,0)}U=U.next}D=D.next}while(D!==f)}function _v(f,u){let d=f.x-u.x;return d===0&&(d=f.y-u.y,d===0)&&(d=(f.next.y-f.y)/(f.next.x-f.x)-(u.next.y-u.y)/(u.next.x-u.x)),d}function xv(f,u){const d=(function(M,I){let D=I;const U=M.x,F=M.y;let ee,ne=-1/0;if(rg(M,D))return D;do{if(rg(M,D.next))return D.next;if(F<=D.y&&F>=D.next.y&&D.next.y!==D.y){const ze=D.x+(F-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(ze<=U&&ze>ne&&(ne=ze,ee=D.x<D.next.x?D:D.next,ze===U))return ee}D=D.next}while(D!==I);if(!ee)return null;const ce=ee,_e=ee.x,we=ee.y;let Re=1/0;D=ee;do{if(U>=D.x&&D.x>=_e&&U!==D.x&&qa(F<we?U:ne,F,_e,we,F<we?ne:U,F,D.x,D.y)){const ze=Math.abs(F-D.y)/(U-D.x);ql(D,M)&&(ze<Re||ze===Re&&(D.x>ee.x||D.x===ee.x&&F1(ee,D)))&&(ee=D,Re=ze)}D=D.next}while(D!==ce);return ee})(f,u);if(!d)return u;const b=ld(d,f);return Hd(b,b.next),Hd(d,d.next)}function F1(f,u){return Qr(f.prev,f,u.prev)<0&&Qr(u.next,f,f.next)<0}function j1(f,u,d,b,M){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-d)*M|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-b)*M|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Zd(f){let u=f,d=f;do(u.x<d.x||u.x===d.x&&u.y<d.y)&&(d=u),u=u.next;while(u!==f);return d}function qa(f,u,d,b,M,I,D,U){return(M-D)*(u-U)>=(f-D)*(I-U)&&(f-D)*(b-U)>=(d-D)*(u-U)&&(d-D)*(I-U)>=(M-D)*(b-U)}function zp(f,u,d,b,M,I,D,U){return!(f===D&&u===U)&&qa(f,u,d,b,M,I,D,U)}function dC(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!(function(d,b){let M=d;do{if(M.i!==d.i&&M.next.i!==d.i&&M.i!==b.i&&M.next.i!==b.i&&N1(M,M.next,d,b))return!0;M=M.next}while(M!==d);return!1})(f,u)&&(ql(f,u)&&ql(u,f)&&(function(d,b){let M=d,I=!1;const D=(d.x+b.x)/2,U=(d.y+b.y)/2;do M.y>U!=M.next.y>U&&M.next.y!==M.y&&D<(M.next.x-M.x)*(U-M.y)/(M.next.y-M.y)+M.x&&(I=!I),M=M.next;while(M!==d);return I})(f,u)&&(Qr(f.prev,f,u.prev)||Qr(f,u.prev,u))||rg(f,u)&&Qr(f.prev,f,f.next)>0&&Qr(u.prev,u,u.next)>0)}function Qr(f,u,d){return(u.y-f.y)*(d.x-u.x)-(u.x-f.x)*(d.y-u.y)}function rg(f,u){return f.x===u.x&&f.y===u.y}function N1(f,u,d,b){const M=vs(Qr(f,u,d)),I=vs(Qr(f,u,b)),D=vs(Qr(d,b,f)),U=vs(Qr(d,b,u));return M!==I&&D!==U||!(M!==0||!og(f,d,u))||!(I!==0||!og(f,b,u))||!(D!==0||!og(d,f,b))||!(U!==0||!og(d,u,b))}function og(f,u,d){return u.x<=Math.max(f.x,d.x)&&u.x>=Math.min(f.x,d.x)&&u.y<=Math.max(f.y,d.y)&&u.y>=Math.min(f.y,d.y)}function vs(f){return f>0?1:f<0?-1:0}function ql(f,u){return Qr(f.prev,f,f.next)<0?Qr(f,u,f.next)>=0&&Qr(f,f.prev,u)>=0:Qr(f,u,f.prev)<0||Qr(f,f.next,u)<0}function ld(f,u){const d=G1(f.i,f.x,f.y),b=G1(u.i,u.x,u.y),M=f.next,I=u.prev;return f.next=u,u.prev=f,d.next=M,M.prev=d,b.next=d,d.prev=b,I.next=b,b.prev=I,b}function Mv(f,u,d,b){const M=G1(f,u,d);return b?(M.next=b.next,M.prev=b,b.next.prev=M,b.next=M):(M.prev=M,M.next=M),M}function Fp(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function G1(f,u,d){return{i:f,x:u,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class sg{constructor(u,d){if(d>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=d}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class jp{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}jp.noSubdivision=new jp({fill:new sg(0,0),line:new sg(0,0),tile:new sg(0,0),stencil:new sg(0,0),circle:1}),Hn("SubdivisionGranularityExpression",sg),Hn("SubdivisionGranularitySetting",jp);const xl=-32768,dc=32767;class fC{constructor(u,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=yt/u,this._canonical=d}_getKey(u,d){return(u+=32768)<<16|d+32768}_vertexToIndex(u,d){if(u<-32768||d<-32768||u>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const b=0|Math.round(u),M=0|Math.round(d),I=this._getKey(b,M);if(this._vertexDictionary.has(I))return this._vertexDictionary.get(I);const D=this._vertexBuffer.length/2;return this._vertexDictionary.set(I,D),this._vertexBuffer.push(b,M),D}_subdivideTrianglesScanline(u){if(this._granularity<2)return(function(M,I){const D=[];for(let U=0;U<I.length;U+=3){const F=I[U],ee=I[U+1],ne=I[U+2],ce=M[2*F],_e=M[2*F+1];(M[2*ee]-ce)*(M[2*ne+1]-_e)-(M[2*ee+1]-_e)*(M[2*ne]-ce)>0?(D.push(F),D.push(ne),D.push(ee)):(D.push(F),D.push(ee),D.push(ne))}return D})(this._vertexBuffer,u);const d=[],b=u.length;for(let M=0;M<b;M+=3){const I=[u[M+0],u[M+1],u[M+2]],D=[this._vertexBuffer[2*u[M+0]+0],this._vertexBuffer[2*u[M+0]+1],this._vertexBuffer[2*u[M+1]+0],this._vertexBuffer[2*u[M+1]+1],this._vertexBuffer[2*u[M+2]+0],this._vertexBuffer[2*u[M+2]+1]];let U=1/0,F=1/0,ee=-1/0,ne=-1/0;for(let ze=0;ze<3;ze++){const He=D[2*ze],nt=D[2*ze+1];U=Math.min(U,He),ee=Math.max(ee,He),F=Math.min(F,nt),ne=Math.max(ne,nt)}if(U===ee||F===ne)continue;const ce=Math.floor(U/this._granularityCellSize),_e=Math.ceil(ee/this._granularityCellSize),we=Math.floor(F/this._granularityCellSize),Re=Math.ceil(ne/this._granularityCellSize);if(ce!==_e||we!==Re)for(let ze=we;ze<Re;ze++){const He=this._scanlineGenerateVertexRingForCellRow(ze,D,I);Xd(this._vertexBuffer,He,d)}else d.push(...I)}return d}_scanlineGenerateVertexRingForCellRow(u,d,b){const M=u*this._granularityCellSize,I=M+this._granularityCellSize,D=[];for(let U=0;U<3;U++){const F=d[2*U],ee=d[2*U+1],ne=d[2*(U+1)%6],ce=d[(2*(U+1)+1)%6],_e=d[2*(U+2)%6],we=d[(2*(U+2)+1)%6],Re=ne-F,ze=ce-ee,He=Re===0,nt=ze===0,Bt=(M-ee)/ze,lt=(I-ee)/ze,vt=Math.min(Bt,lt),Nt=Math.max(Bt,lt);if(!nt&&(vt>=1||Nt<=0)||nt&&(ee<M||ee>I)){ce>=M&&ce<=I&&D.push(b[(U+1)%3]);continue}!nt&&vt>0&&D.push(this._vertexToIndex(F+Re*vt,ee+ze*vt));const Zt=F+Re*Math.max(vt,0),fn=F+Re*Math.min(Nt,1);He||this._generateIntraEdgeVertices(D,F,ee,ne,ce,Zt,fn),!nt&&Nt<1&&D.push(this._vertexToIndex(F+Re*Nt,ee+ze*Nt)),(nt||ce>=M&&ce<=I)&&D.push(b[(U+1)%3]),!nt&&(ce<=M||ce>=I)&&this._generateInterEdgeVertices(D,F,ee,ne,ce,_e,we,fn,M,I)}return D}_generateIntraEdgeVertices(u,d,b,M,I,D,U){const F=M-d,ee=I-b,ne=ee===0,ce=ne?Math.min(d,M):Math.min(D,U),_e=ne?Math.max(d,M):Math.max(D,U),we=Math.floor(ce/this._granularityCellSize)+1,Re=Math.ceil(_e/this._granularityCellSize)-1;if(ne?d<M:D<U)for(let ze=we;ze<=Re;ze++){const He=ze*this._granularityCellSize;u.push(this._vertexToIndex(He,b+ee*(He-d)/F))}else for(let ze=Re;ze>=we;ze--){const He=ze*this._granularityCellSize;u.push(this._vertexToIndex(He,b+ee*(He-d)/F))}}_generateInterEdgeVertices(u,d,b,M,I,D,U,F,ee,ne){const ce=I-b,_e=D-M,we=U-I,Re=(ee-I)/we,ze=(ne-I)/we,He=Math.min(Re,ze),nt=Math.max(Re,ze),Bt=M+_e*He;let lt=Math.floor(Math.min(Bt,F)/this._granularityCellSize)+1,vt=Math.ceil(Math.max(Bt,F)/this._granularityCellSize)-1,Nt=F<Bt;const Zt=we===0;if(Zt&&(U===ee||U===ne))return;if(Zt||He>=1||nt<=0){const Nn=b-U,Rn=D+(d-D)*Math.min((ee-U)/Nn,(ne-U)/Nn);lt=Math.floor(Math.min(Rn,F)/this._granularityCellSize)+1,vt=Math.ceil(Math.max(Rn,F)/this._granularityCellSize)-1,Nt=F<Rn}const fn=ce>0?ne:ee;if(Nt)for(let Nn=lt;Nn<=vt;Nn++)u.push(this._vertexToIndex(Nn*this._granularityCellSize,fn));else for(let Nn=vt;Nn>=lt;Nn--)u.push(this._vertexToIndex(Nn*this._granularityCellSize,fn))}_generateOutline(u){const d=[];for(const b of u){const M=Wf(b,this._granularity,!0),I=this._pointArrayToIndices(M),D=[];for(let U=1;U<I.length;U++)D.push(I[U-1]),D.push(I[U]);d.push(D)}return d}_handlePoles(u){let d=!1,b=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(b=!0)),(d||b)&&this._fillPoles(u,d,b)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let d=0;d<u.length;d+=2){const b=u[d+1];b===xl&&(u[d+1]=-32767),b===dc&&(u[d+1]=32766)}}_generatePoleQuad(u,d,b,M,I,D){M>I!=(D===xl)?(u.push(d),u.push(b),u.push(this._vertexToIndex(M,D)),u.push(b),u.push(this._vertexToIndex(I,D)),u.push(this._vertexToIndex(M,D))):(u.push(b),u.push(d),u.push(this._vertexToIndex(M,D)),u.push(this._vertexToIndex(I,D)),u.push(b),u.push(this._vertexToIndex(M,D)))}_fillPoles(u,d,b){const M=this._vertexBuffer,I=yt,D=u.length;for(let U=2;U<D;U+=3){const F=u[U-2],ee=u[U-1],ne=u[U],ce=M[2*F],_e=M[2*F+1],we=M[2*ee],Re=M[2*ee+1],ze=M[2*ne],He=M[2*ne+1];d&&(_e===0&&Re===0&&this._generatePoleQuad(u,F,ee,ce,we,xl),Re===0&&He===0&&this._generatePoleQuad(u,ee,ne,we,ze,xl),He===0&&_e===0&&this._generatePoleQuad(u,ne,F,ze,ce,xl)),b&&(_e===I&&Re===I&&this._generatePoleQuad(u,F,ee,ce,we,dc),Re===I&&He===I&&this._generatePoleQuad(u,ee,ne,we,ze,dc),He===I&&_e===I&&this._generatePoleQuad(u,ne,F,ze,ce,dc))}}_initializeVertices(u){for(let d=0;d<u.length;d+=2)this._vertexToIndex(u[d],u[d+1])}subdividePolygonInternal(u,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:b,holeIndices:M}=(function(U){const F=[],ee=[];for(const ne of U)if(ne.length!==0){ne!==U[0]&&F.push(ee.length/2);for(let ce=0;ce<ne.length;ce++)ee.push(ne[ce].x),ee.push(ne[ce].y)}return{flattened:ee,holeIndices:F}})(u);let I;this._initializeVertices(b);try{const U=(function(ee,ne,ce=2){const _e=ne&&ne.length,we=_e?ne[0]*ce:ee.length;let Re=ig(ee,0,we,ce,!0);const ze=[];if(!Re||Re.next===Re.prev)return ze;let He,nt,Bt;if(_e&&(Re=(function(lt,vt,Nt,Zt){const fn=[];for(let Nn=0,Rn=vt.length;Nn<Rn;Nn++){const Fn=ig(lt,vt[Nn]*Zt,Nn<Rn-1?vt[Nn+1]*Zt:lt.length,Zt,!1);Fn===Fn.next&&(Fn.steiner=!0),fn.push(Zd(Fn))}fn.sort(_v);for(let Nn=0;Nn<fn.length;Nn++)Nt=xv(fn[Nn],Nt);return Nt})(ee,ne,Re,ce)),ee.length>80*ce){He=ee[0],nt=ee[1];let lt=He,vt=nt;for(let Nt=ce;Nt<we;Nt+=ce){const Zt=ee[Nt],fn=ee[Nt+1];Zt<He&&(He=Zt),fn<nt&&(nt=fn),Zt>lt&&(lt=Zt),fn>vt&&(vt=fn)}Bt=Math.max(lt-He,vt-nt),Bt=Bt!==0?32767/Bt:0}return Wl(Re,ze,ce,He,nt,Bt,0),ze})(b,M),F=this._convertIndices(b,U);I=this._subdivideTrianglesScanline(F)}catch(U){console.error(U)}let D=[];return d&&(D=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(I),{verticesFlattened:this._vertexBuffer,indicesTriangles:I,indicesLineList:D}}_convertIndices(u,d){const b=[];for(let M=0;M<d.length;M++)b.push(this._vertexToIndex(u[2*d[M]],u[2*d[M]+1]));return b}_pointArrayToIndices(u){const d=[];for(let b=0;b<u.length;b++){const M=u[b];d.push(this._vertexToIndex(M.x,M.y))}return d}}function Gs(f,u,d,b=!0){return new fC(d,u).subdividePolygonInternal(f,b)}function Wf(f,u,d=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const b=f[0],M=f[f.length-1],I=d&&(b.x!==M.x||b.y!==M.y);if(u<2)return I?[...f,f[0]]:[...f];const D=Math.floor(yt/u),U=[];U.push(new c(f[0].x,f[0].y));const F=f.length,ee=I?F:F-1;for(let ne=0;ne<ee;ne++){const ce=f[ne],_e=ne<F-1?f[ne+1]:f[0],we=ce.x,Re=ce.y,ze=_e.x,He=_e.y,nt=we!==ze,Bt=Re!==He;if(!nt&&!Bt)continue;const lt=ze-we,vt=He-Re,Nt=Math.abs(lt),Zt=Math.abs(vt);let fn=we,Nn=Re;for(;;){const Fn=lt>0?(Math.floor(fn/D)+1)*D:(Math.ceil(fn/D)-1)*D,Ci=vt>0?(Math.floor(Nn/D)+1)*D:(Math.ceil(Nn/D)-1)*D,Ln=Math.abs(fn-Fn),jn=Math.abs(Nn-Ci),an=Math.abs(fn-ze),Fi=Math.abs(Nn-He),tr=nt?Ln/Nt:Number.POSITIVE_INFINITY,Ti=Bt?jn/Zt:Number.POSITIVE_INFINITY;if((an<=Ln||!nt)&&(Fi<=jn||!Bt))break;if(tr<Ti&&nt||!Bt){fn=Fn,Nn+=vt*tr;const ui=new c(fn,Math.round(Nn));U[U.length-1].x===ui.x&&U[U.length-1].y===ui.y||U.push(ui)}else{fn+=lt*Ti,Nn=Ci;const ui=new c(Math.round(fn),Nn);U[U.length-1].x===ui.x&&U[U.length-1].y===ui.y||U.push(ui)}}const Rn=new c(ze,He);U[U.length-1].x===Rn.x&&U[U.length-1].y===Rn.y||U.push(Rn)}return U}function Xd(f,u,d){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let b=0,M=f[2*u[0]];for(let F=1;F<u.length;F++){const ee=f[2*u[F]];ee<M&&(M=ee,b=F)}const I=u.length;let D=b,U=(D+1)%I;for(;;){const F=D-1>=0?D-1:I-1,ee=(U+1)%I,ne=f[2*u[F]],ce=f[2*u[ee]],_e=f[2*u[D]],we=f[2*u[D]+1],Re=f[2*u[U]+1];let ze=!1;if(ne<ce)ze=!0;else if(ne>ce)ze=!1;else{const He=Re-we,nt=-(f[2*u[U]]-_e),Bt=we<Re?1:-1;((ne-_e)*He+(f[2*u[F]+1]-we)*nt)*Bt>((ce-_e)*He+(f[2*u[ee]+1]-we)*nt)*Bt&&(ze=!0)}if(ze){const He=u[F],nt=u[D],Bt=u[U];He!==nt&&He!==Bt&&nt!==Bt&&d.push(Bt,nt,He),D--,D<0&&(D=I-1)}else{const He=u[ee],nt=u[D],Bt=u[U];He!==nt&&He!==Bt&&nt!==Bt&&d.push(Bt,nt,He),U++,U>=I&&(U=0)}if(F===ee)break}}function qf(f,u,d,b,M,I,D,U,F){const ee=M.length/2,ne=D&&U&&F;if(ee<hr.MAX_VERTEX_ARRAY_LENGTH){const ce=u.prepareSegment(ee,d,b),_e=ce.vertexLength;for(let ze=0;ze<I.length;ze+=3)b.emplaceBack(_e+I[ze],_e+I[ze+1],_e+I[ze+2]);let we,Re;ce.vertexLength+=ee,ce.primitiveLength+=I.length/3,ne&&(Re=D.prepareSegment(ee,d,U),we=Re.vertexLength,Re.vertexLength+=ee);for(let ze=0;ze<M.length;ze+=2)f(M[ze],M[ze+1]);if(ne)for(let ze=0;ze<F.length;ze++){const He=F[ze];for(let nt=1;nt<He.length;nt+=2)U.emplaceBack(we+He[nt-1],we+He[nt]);Re.primitiveLength+=He.length/2}}else(function(ce,_e,we,Re,ze,He){const nt=[];for(let Zt=0;Zt<Re.length/2;Zt++)nt.push(-1);const Bt={count:0};let lt=0,vt=ce.getOrCreateLatestSegment(_e,we),Nt=vt.vertexLength;for(let Zt=2;Zt<ze.length;Zt+=3){const fn=ze[Zt-2],Nn=ze[Zt-1],Rn=ze[Zt];let Fn=nt[fn]<lt,Ci=nt[Nn]<lt,Ln=nt[Rn]<lt;vt.vertexLength+((Fn?1:0)+(Ci?1:0)+(Ln?1:0))>hr.MAX_VERTEX_ARRAY_LENGTH&&(vt=ce.createNewSegment(_e,we),lt=Bt.count,Fn=!0,Ci=!0,Ln=!0,Nt=0);const jn=Uc(nt,Re,He,Bt,fn,Fn,vt),an=Uc(nt,Re,He,Bt,Nn,Ci,vt),Fi=Uc(nt,Re,He,Bt,Rn,Ln,vt);we.emplaceBack(Nt+jn-lt,Nt+an-lt,Nt+Fi-lt),vt.primitiveLength++}})(u,d,b,M,I,f),ne&&(function(ce,_e,we,Re,ze,He){const nt=[];for(let Zt=0;Zt<Re.length/2;Zt++)nt.push(-1);const Bt={count:0};let lt=0,vt=ce.getOrCreateLatestSegment(_e,we),Nt=vt.vertexLength;for(let Zt=0;Zt<ze.length;Zt++){const fn=ze[Zt];for(let Nn=1;Nn<ze[Zt].length;Nn+=2){const Rn=fn[Nn-1],Fn=fn[Nn];let Ci=nt[Rn]<lt,Ln=nt[Fn]<lt;vt.vertexLength+((Ci?1:0)+(Ln?1:0))>hr.MAX_VERTEX_ARRAY_LENGTH&&(vt=ce.createNewSegment(_e,we),lt=Bt.count,Ci=!0,Ln=!0,Nt=0);const jn=Uc(nt,Re,He,Bt,Rn,Ci,vt),an=Uc(nt,Re,He,Bt,Fn,Ln,vt);we.emplaceBack(Nt+jn-lt,Nt+an-lt),vt.primitiveLength++}}})(D,d,U,M,F,f),u.forceNewSegmentOnNextPrepare(),D?.forceNewSegmentOnNextPrepare()}function Uc(f,u,d,b,M,I,D){if(I){const U=b.count;return d(u[2*M],u[2*M+1]),f[M]=b.count,b.count++,D.vertexLength++,U}return f[M]}class S0{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ft,this.indexArray=new Hi,this.indexArray2=new Er,this.programConfigurations=new lA(u.layers,u.zoom),this.segments=new hr,this.segments2=new hr,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.hasDependencies=$d("fill",this.layers,d);const M=this.layers[0].layout.get("fill-sort-key"),I=!M.isConstant(),D=[];for(const{feature:U,id:F,index:ee,sourceLayerIndex:ne}of u){const ce=this.layers[0]._featureFilter.needGeometry,_e=Wa(U,ce);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),_e,b))continue;const we=I?M.evaluate(_e,{},b,d.availableImages):void 0,Re={id:F,properties:U.properties,type:U.type,sourceLayerIndex:ne,index:ee,geometry:ce?_e.geometry:uA(U),patterns:{},sortKey:we};D.push(Re)}I&&D.sort(((U,F)=>U.sortKey-F.sortKey));for(const U of D){const{geometry:F,index:ee,sourceLayerIndex:ne}=U;if(this.hasDependencies){const ce=yh("fill",this.layers,U,{zoom:this.zoom},d);this.patternFeatures.push(ce)}else this.addFeature(U,F,ee,b,{},d.subdivisionGranularity);d.featureIndex.insert(u[ee].feature,F,ee,ne,this.index)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}addFeatures(u,d,b){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,d,b,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,L1),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,d,b,M,I,D){for(const U of Lh(d,500)){const F=Gs(U,M,D.fill.getGranularityForZoomLevel(M.z)),ee=this.layoutVertexArray;qf(((ne,ce)=>{ee.emplaceBack(ne,ce)}),this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles,this.segments2,this.indexArray2,F.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:I,canonical:M})}}let Q1,UA;Hn("FillBucket",S0,{omit:["layers","patternFeatures"]});var pC={get paint(){return UA=UA||new ls({"fill-antialias":new ti(dt.paint_fill["fill-antialias"]),"fill-opacity":new bi(dt.paint_fill["fill-opacity"]),"fill-color":new bi(dt.paint_fill["fill-color"]),"fill-outline-color":new bi(dt.paint_fill["fill-outline-color"]),"fill-translate":new ti(dt.paint_fill["fill-translate"]),"fill-translate-anchor":new ti(dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new td(dt.paint_fill["fill-pattern"])})},get layout(){return Q1=Q1||new ls({"fill-sort-key":new bi(dt.layout_fill["fill-sort-key"])})}};class Yf extends ll{constructor(u,d){super(u,pC,d)}recalculate(u,d){super.recalculate(u,d);const b=this.paint._values["fill-outline-color"];b.value.kind==="constant"&&b.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new S0(u)}queryRadius(){return gh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:d,transform:b,pixelsToTileUnits:M}){return T1(Qf(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-b.bearingInRadians,M),d)}isTileClipped(){return!0}}const E0=uo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),B0=uo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ag}=E0;class Np{constructor(u,d,b,M,I){this.properties={},this.extent=b,this.type=0,this.id=void 0,this._pbf=u,this._geometry=-1,this._keys=M,this._values=I,u.readFields(mC,this,d)}loadGeometry(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos,b=[];let M,I=1,D=0,U=0,F=0;for(;u.pos<d;){if(D<=0){const ee=u.readVarint();I=7&ee,D=ee>>3}if(D--,I===1||I===2)U+=u.readSVarint(),F+=u.readSVarint(),I===1&&(M&&b.push(M),M=[]),M&&M.push(new c(U,F));else{if(I!==7)throw new Error(`unknown command ${I}`);M&&M.push(M[0].clone())}}return M&&b.push(M),b}bbox(){const u=this._pbf;u.pos=this._geometry;const d=u.readVarint()+u.pos;let b=1,M=0,I=0,D=0,U=1/0,F=-1/0,ee=1/0,ne=-1/0;for(;u.pos<d;){if(M<=0){const ce=u.readVarint();b=7&ce,M=ce>>3}if(M--,b===1||b===2)I+=u.readSVarint(),D+=u.readSVarint(),I<U&&(U=I),I>F&&(F=I),D<ee&&(ee=D),D>ne&&(ne=D);else if(b!==7)throw new Error(`unknown command ${b}`)}return[U,ee,F,ne]}toGeoJSON(u,d,b){const M=this.extent*Math.pow(2,b),I=this.extent*u,D=this.extent*d,U=this.loadGeometry();function F(_e){return[360*(_e.x+I)/M-180,360/Math.PI*Math.atan(Math.exp((1-2*(_e.y+D)/M)*Math.PI))-90]}function ee(_e){return _e.map(F)}let ne;if(this.type===1){const _e=[];for(const Re of U)_e.push(Re[0]);const we=ee(_e);ne=_e.length===1?{type:"Point",coordinates:we[0]}:{type:"MultiPoint",coordinates:we}}else if(this.type===2){const _e=U.map(ee);ne=_e.length===1?{type:"LineString",coordinates:_e[0]}:{type:"MultiLineString",coordinates:_e}}else{if(this.type!==3)throw new Error("unknown feature type");{const _e=(function(Re){const ze=Re.length;if(ze<=1)return[Re];const He=[];let nt,Bt;for(let lt=0;lt<ze;lt++){const vt=O0(Re[lt]);vt!==0&&(Bt===void 0&&(Bt=vt<0),Bt===vt<0?(nt&&He.push(nt),nt=[Re[lt]]):nt&&nt.push(Re[lt]))}return nt&&He.push(nt),He})(U),we=[];for(const Re of _e)we.push(Re.map(ee));ne=we.length===1?{type:"Polygon",coordinates:we[0]}:{type:"MultiPolygon",coordinates:we}}}const ce={type:"Feature",geometry:ne,properties:this.properties};return this.id!=null&&(ce.id=this.id),ce}}function mC(f,u,d){f===1?u.id=d.readVarint():f===2?(function(b,M){const I=b.readVarint()+b.pos;for(;b.pos<I;){const D=M._keys[b.readVarint()],U=M._values[b.readVarint()];M.properties[D]=U}})(d,u):f===3?u.type=d.readVarint():f===4&&(u._geometry=d.pos)}function O0(f){let u=0;for(let d,b,M=0,I=f.length,D=I-1;M<I;D=M++)d=f[M],b=f[D],u+=(b.x-d.x)*(d.y+b.y);return u}Np.types=["Unknown","Point","LineString","Polygon"];class wv{constructor(u,d){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(W1,this,d),this.length=this._features.length}feature(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];const d=this._pbf.readVarint()+this._pbf.pos;return new Np(this._pbf,d,this.extent,this._keys,this._values)}}function W1(f,u,d){f===15?u.version=d.readVarint():f===1?u.name=d.readString():f===5?u.extent=d.readVarint():f===2?u._features.push(d.pos):f===3?u._keys.push(d.readString()):f===4&&u._values.push((function(b){let M=null;const I=b.readVarint()+b.pos;for(;b.pos<I;){const D=b.readVarint()>>3;M=D===1?b.readString():D===2?b.readFloat():D===3?b.readDouble():D===4?b.readVarint64():D===5?b.readVarint():D===6?b.readSVarint():D===7?b.readBoolean():null}if(M==null)throw new Error("unknown feature value");return M})(d))}class Sv{constructor(u,d){this.layers=u.readFields(Hx,{},d)}}function Hx(f,u,d){if(f===3){const b=new wv(d,d.readVarint()+d.pos);b.length&&(u[b.name]=b)}}const Ev=Math.pow(2,13);function xo(f,u,d,b,M,I,D,U){f.emplaceBack(u,d,2*Math.floor(b*Ev)+D,M*Ev*2,I*Ev*2,Math.round(U))}class cs{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.layoutVertexArray=new ot,this.centroidVertexArray=new rt,this.indexArray=new Hi,this.programConfigurations=new lA(u.layers,u.zoom),this.segments=new hr,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.features=[],this.hasDependencies=$d("fill-extrusion",this.layers,d);for(const{feature:M,id:I,index:D,sourceLayerIndex:U}of u){const F=this.layers[0]._featureFilter.needGeometry,ee=Wa(M,F);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),ee,b))continue;const ne={id:I,sourceLayerIndex:U,index:D,geometry:F?ee.geometry:uA(M),properties:M.properties,type:M.type,patterns:{}};this.hasDependencies?this.features.push(yh("fill-extrusion",this.layers,ne,{zoom:this.zoom},d)):this.addFeature(ne,ne.geometry,D,b,{},d.subdivisionGranularity),d.featureIndex.insert(M,ne.geometry,D,U,this.index,!0)}}addFeatures(u,d,b){for(const M of this.features){const{geometry:I}=M;this.addFeature(M,I,M.index,d,b,u.subdivisionGranularity)}}update(u,d,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ag),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,B0.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,d,b,M,I,D){for(const U of Lh(d,500)){const F={x:0,y:0,sampleCount:0},ee=this.layoutVertexArray.length;this.processPolygon(F,M,u,U,D);const ne=this.layoutVertexArray.length-ee,ce=Math.floor(F.x/F.sampleCount),_e=Math.floor(F.y/F.sampleCount);for(let we=0;we<ne;we++)this.centroidVertexArray.emplaceBack(ce,_e)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:I,canonical:M})}processPolygon(u,d,b,M,I){if(M.length<1||es(M[0]))return;for(const ce of M)ce.length!==0&&co(u,ce);const D={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},U=I.fill.getGranularityForZoomLevel(d.z),F=Np.types[b.type]==="Polygon";for(const ce of M){if(ce.length===0||es(ce))continue;const _e=Wf(ce,U,F);this._generateSideFaces(_e,D)}if(!F)return;const ee=Gs(M,d,U,!1),ne=this.layoutVertexArray;qf(((ce,_e)=>{xo(ne,ce,_e,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,ee.verticesFlattened,ee.indicesTriangles)}_generateSideFaces(u,d){let b=0;for(let M=1;M<u.length;M++){const I=u[M],D=u[M-1];if(go(I,D))continue;d.segment.vertexLength+4>hr.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const U=I.sub(D)._perp()._unit(),F=D.dist(I);b+F>32768&&(b=0),xo(this.layoutVertexArray,I.x,I.y,U.x,U.y,0,0,b),xo(this.layoutVertexArray,I.x,I.y,U.x,U.y,0,1,b),b+=F,xo(this.layoutVertexArray,D.x,D.y,U.x,U.y,0,0,b),xo(this.layoutVertexArray,D.x,D.y,U.x,U.y,0,1,b);const ee=d.segment.vertexLength;this.indexArray.emplaceBack(ee,ee+2,ee+1),this.indexArray.emplaceBack(ee+1,ee+2,ee+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function co(f,u){for(let d=0;d<u.length;d++){const b=u[d];d===u.length-1&&u[0].x===b.x&&u[0].y===b.y||(f.x+=b.x,f.y+=b.y,f.sampleCount++)}}function go(f,u){return f.x===u.x&&(f.x<0||f.x>yt)||f.y===u.y&&(f.y<0||f.y>yt)}function es(f){return f.every((u=>u.x<0))||f.every((u=>u.x>yt))||f.every((u=>u.y<0))||f.every((u=>u.y>yt))}let Lc;Hn("FillExtrusionBucket",cs,{omit:["layers","features"]});var Vf={get paint(){return Lc=Lc||new ls({"fill-extrusion-opacity":new ti(dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new bi(dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ti(dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ti(dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new td(dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new bi(dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new bi(dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ti(dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class lg extends ll{constructor(u,d){super(u,Vf,d)}createBucket(u){return new cs(u)}queryRadius(){return gh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:I,pixelsToTileUnits:D,pixelPosMatrix:U}){const F=Qf(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-I.bearingInRadians,D),ee=this.paint.get("fill-extrusion-height").evaluate(d,b),ne=this.paint.get("fill-extrusion-base").evaluate(d,b),ce=(function(we,Re){const ze=[];for(const He of we){const nt=[He.x,He.y,0,1];ke(nt,nt,Re),ze.push(new c(nt[0]/nt[3],nt[1]/nt[3]))}return ze})(F,U),_e=(function(we,Re,ze,He){const nt=[],Bt=[],lt=He[8]*Re,vt=He[9]*Re,Nt=He[10]*Re,Zt=He[11]*Re,fn=He[8]*ze,Nn=He[9]*ze,Rn=He[10]*ze,Fn=He[11]*ze;for(const Ci of we){const Ln=[],jn=[];for(const an of Ci){const Fi=an.x,tr=an.y,Ti=He[0]*Fi+He[4]*tr+He[12],ui=He[1]*Fi+He[5]*tr+He[13],Rr=He[2]*Fi+He[6]*tr+He[14],bs=He[3]*Fi+He[7]*tr+He[15],va=Rr+Nt,wl=bs+Zt,gc=Ti+fn,Da=ui+Nn,Ws=Rr+Rn,To=bs+Fn,aa=new c((Ti+lt)/wl,(ui+vt)/wl);aa.z=va/wl,Ln.push(aa);const ba=new c(gc/To,Da/To);ba.z=Ws/To,jn.push(ba)}nt.push(Ln),Bt.push(jn)}return[nt,Bt]})(M,ne,ee,U);return(function(we,Re,ze){let He=1/0;T1(ze,Re)&&(He=LA(ze,Re[0]));for(let nt=0;nt<Re.length;nt++){const Bt=Re[nt],lt=we[nt];for(let vt=0;vt<Bt.length-1;vt++){const Nt=Bt[vt],Zt=[Nt,Bt[vt+1],lt[vt+1],lt[vt],Nt];Xm(ze,Zt)&&(He=Math.min(He,LA(ze,Zt)))}}return He!==1/0&&He})(_e[0],_e[1],ce)}}function Gp(f,u){return f.x*u.x+f.y*u.y}function LA(f,u){if(f.length===1){let d=0;const b=u[d++];let M;for(;!M||b.equals(M);)if(M=u[d++],!M)return 1/0;for(;d<u.length;d++){const I=u[d],D=f[0],U=M.sub(b),F=I.sub(b),ee=D.sub(b),ne=Gp(U,U),ce=Gp(U,F),_e=Gp(F,F),we=Gp(ee,U),Re=Gp(ee,F),ze=ne*_e-ce*ce,He=(_e*we-ce*Re)/ze,nt=(ne*Re-ce*we)/ze,Bt=b.z*(1-He-nt)+M.z*He+I.z*nt;if(isFinite(Bt))return Bt}return 1/0}{let d=1/0;for(const b of u)d=Math.min(d,b.z);return d}}const ya=uo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:$f}=ya,Qp=uo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Bv}=Qp,cA=Math.cos(Math.PI/180*37.5),Wp=Math.pow(2,14)/.5;class qp{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=u.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new St,this.layoutVertexArray2=new Wt,this.indexArray=new Hi,this.programConfigurations=new lA(u.layers,u.zoom),this.segments=new hr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(u,d,b){this.hasDependencies=$d("line",this.layers,d)||this.hasLineDasharray(this.layers);const M=this.layers[0].layout.get("line-sort-key"),I=!M.isConstant(),D=[];for(const{feature:U,id:F,index:ee,sourceLayerIndex:ne}of u){const ce=this.layers[0]._featureFilter.needGeometry,_e=Wa(U,ce);if(!this.layers[0]._featureFilter.filter(new wo(this.zoom),_e,b))continue;const we=I?M.evaluate(_e,{},b):void 0,Re={id:F,properties:U.properties,type:U.type,sourceLayerIndex:ne,index:ee,geometry:ce?_e.geometry:uA(U),patterns:{},dashes:{},sortKey:we};D.push(Re)}I&&D.sort(((U,F)=>U.sortKey-F.sortKey));for(const U of D){const{geometry:F,index:ee,sourceLayerIndex:ne}=U;this.hasDependencies?($d("line",this.layers,d)?yh("line",this.layers,U,{zoom:this.zoom},d):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,U,this.zoom,d),this.patternFeatures.push(U)):this.addFeature(U,F,ee,b,{},{},d.subdivisionGranularity),d.featureIndex.insert(u[ee].feature,F,ee,ne,this.index)}}update(u,d,b,M){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,d,this.stateDependentLayers,{imagePositions:b,dashPositions:M})}addFeatures(u,d,b,M){for(const I of this.patternFeatures)this.addFeature(I,I.geometry,I.index,d,b,M,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,Bv)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,$f),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,d,b,M,I,D,U){const F=this.layers[0].layout,ee=F.get("line-join").evaluate(u,{}),ne=F.get("line-cap"),ce=F.get("line-miter-limit"),_e=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const we of d)this.addLine(we,u,ee,ne,ce,_e,M,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,b,{imagePositions:I,dashPositions:D,canonical:M})}addLine(u,d,b,M,I,D,U,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=Wf(u,U?F.line.getGranularityForZoomLevel(U.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let lt=0;lt<u.length-1;lt++)this.totalDistance+=u[lt].dist(u[lt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ee=Np.types[d.type]==="Polygon";let ne=u.length;for(;ne>=2&&u[ne-1].equals(u[ne-2]);)ne--;let ce=0;for(;ce<ne-1&&u[ce].equals(u[ce+1]);)ce++;if(ne<(ee?3:2))return;b==="bevel"&&(I=1.05);const _e=this.overscaling<=16?122880/(512*this.overscaling):0,we=this.segments.prepareSegment(10*ne,this.layoutVertexArray,this.indexArray);let Re,ze,He,nt,Bt;this.e1=this.e2=-1,ee&&(Re=u[ne-2],Bt=u[ce].sub(Re)._unit()._perp());for(let lt=ce;lt<ne;lt++){if(He=lt===ne-1?ee?u[ce+1]:void 0:u[lt+1],He&&u[lt].equals(He))continue;Bt&&(nt=Bt),Re&&(ze=Re),Re=u[lt],Bt=He?He.sub(Re)._unit()._perp():nt,nt=nt||Bt;let vt=nt.add(Bt);vt.x===0&&vt.y===0||vt._unit();const Nt=nt.x*Bt.x+nt.y*Bt.y,Zt=vt.x*Bt.x+vt.y*Bt.y,fn=Zt!==0?1/Zt:1/0,Nn=2*Math.sqrt(2-2*Zt),Rn=Zt<cA&&ze&&He,Fn=nt.x*Bt.y-nt.y*Bt.x>0;if(Rn&&lt>ce){const jn=Re.dist(ze);if(jn>2*_e){const an=Re.sub(Re.sub(ze)._mult(_e/jn)._round());this.updateDistance(ze,an),this.addCurrentVertex(an,nt,0,0,we),ze=an}}const Ci=ze&&He;let Ln=Ci?b:ee?"butt":M;if(Ci&&Ln==="round"&&(fn<D?Ln="miter":fn<=2&&(Ln="fakeround")),Ln==="miter"&&fn>I&&(Ln="bevel"),Ln==="bevel"&&(fn>2&&(Ln="flipbevel"),fn<I&&(Ln="miter")),ze&&this.updateDistance(ze,Re),Ln==="miter")vt._mult(fn),this.addCurrentVertex(Re,vt,0,0,we);else if(Ln==="flipbevel"){if(fn>100)vt=Bt.mult(-1);else{const jn=fn*nt.add(Bt).mag()/nt.sub(Bt).mag();vt._perp()._mult(jn*(Fn?-1:1))}this.addCurrentVertex(Re,vt,0,0,we),this.addCurrentVertex(Re,vt.mult(-1),0,0,we)}else if(Ln==="bevel"||Ln==="fakeround"){const jn=-Math.sqrt(fn*fn-1),an=Fn?jn:0,Fi=Fn?0:jn;if(ze&&this.addCurrentVertex(Re,nt,an,Fi,we),Ln==="fakeround"){const tr=Math.round(180*Nn/Math.PI/20);for(let Ti=1;Ti<tr;Ti++){let ui=Ti/tr;if(ui!==.5){const bs=ui-.5;ui+=ui*bs*(ui-1)*((1.0904+Nt*(Nt*(3.55645-1.43519*Nt)-3.2452))*bs*bs+(.848013+Nt*(.215638*Nt-1.06021)))}const Rr=Bt.sub(nt)._mult(ui)._add(nt)._unit()._mult(Fn?-1:1);this.addHalfVertex(Re,Rr.x,Rr.y,!1,Fn,0,we)}}He&&this.addCurrentVertex(Re,Bt,-an,-Fi,we)}else if(Ln==="butt")this.addCurrentVertex(Re,vt,0,0,we);else if(Ln==="square"){const jn=ze?1:-1;this.addCurrentVertex(Re,vt,jn,jn,we)}else Ln==="round"&&(ze&&(this.addCurrentVertex(Re,nt,0,0,we),this.addCurrentVertex(Re,nt,1,1,we,!0)),He&&(this.addCurrentVertex(Re,Bt,-1,-1,we,!0),this.addCurrentVertex(Re,Bt,0,0,we)));if(Rn&&lt<ne-1){const jn=Re.dist(He);if(jn>2*_e){const an=Re.add(He.sub(Re)._mult(_e/jn)._round());this.updateDistance(Re,an),this.addCurrentVertex(an,Bt,0,0,we),Re=an}}}}addCurrentVertex(u,d,b,M,I,D=!1){const U=d.y*M-d.x,F=-d.y-d.x*M;this.addHalfVertex(u,d.x+d.y*b,d.y-d.x*b,D,!1,b,I),this.addHalfVertex(u,U,F,D,!0,-M,I),this.distance>Wp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,d,b,M,I,D))}addHalfVertex({x:u,y:d},b,M,I,D,U,F){const ee=.5*(this.lineClips?this.scaledDistance*(Wp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(I?1:0),(d<<1)+(D?1:0),Math.round(63*b)+128,Math.round(63*M)+128,1+(U===0?0:U<0?-1:1)|(63&ee)<<2,ee>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ne,this.e2),F.primitiveLength++),D?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,d){this.distance+=u.dist(d),this.updateScaledDistance()}hasLineDasharray(u){for(const d of u){const b=d.paint.get("line-dasharray");if(b&&!b.isConstant())return!0}return!1}addLineDashDependencies(u,d,b,M){for(const I of u){const D=I.paint.get("line-dasharray");if(!D||D.value.kind==="constant")continue;const U=I.layout.get("line-cap")==="round",F={dasharray:D.value.evaluate({zoom:b-1},d,{}),round:U},ee={dasharray:D.value.evaluate({zoom:b},d,{}),round:U},ne={dasharray:D.value.evaluate({zoom:b+1},d,{}),round:U},ce=`${F.dasharray.join(",")},${F.round}`,_e=`${ee.dasharray.join(",")},${ee.round}`,we=`${ne.dasharray.join(",")},${ne.round}`;M.dashDependencies[ce]=F,M.dashDependencies[_e]=ee,M.dashDependencies[we]=ne,d.dashes[I.id]={min:ce,mid:_e,max:we}}}}let fc,q1;Hn("LineBucket",qp,{omit:["layers","patternFeatures"]});var ug={get paint(){return q1=q1||new ls({"line-opacity":new bi(dt.paint_line["line-opacity"]),"line-color":new bi(dt.paint_line["line-color"]),"line-translate":new ti(dt.paint_line["line-translate"]),"line-translate-anchor":new ti(dt.paint_line["line-translate-anchor"]),"line-width":new bi(dt.paint_line["line-width"]),"line-gap-width":new bi(dt.paint_line["line-gap-width"]),"line-offset":new bi(dt.paint_line["line-offset"]),"line-blur":new bi(dt.paint_line["line-blur"]),"line-dasharray":new td(dt.paint_line["line-dasharray"]),"line-pattern":new td(dt.paint_line["line-pattern"]),"line-gradient":new hh(dt.paint_line["line-gradient"])})},get layout(){return fc=fc||new ls({"line-cap":new ti(dt.layout_line["line-cap"]),"line-join":new bi(dt.layout_line["line-join"]),"line-miter-limit":new ti(dt.layout_line["line-miter-limit"]),"line-round-limit":new ti(dt.layout_line["line-round-limit"]),"line-sort-key":new bi(dt.layout_line["line-sort-key"])})}};class gC extends bi{possiblyEvaluate(u,d){return d=new wo(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(u,d)}evaluate(u,d,b,M){return d=Ue({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(u,d,b,M)}}let ud;class Y1 extends ll{constructor(u,d){super(u,ug,d),this.gradientVersion=0,ud||(ud=new gC(ug.paint.properties["line-width"].specification),ud.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!(function(b){return b._styleExpression!==void 0})(d)&&d._styleExpression.expression instanceof Ss,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,d){super.recalculate(u,d),this.paint._values["line-floorwidth"]=ud.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new qp(u)}queryRadius(u){const d=u,b=Jd(Yd("line-width",this,d),Yd("line-gap-width",this,d)),M=Yd("line-offset",this,d);return b/2+Math.abs(M)+gh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:d,featureState:b,geometry:M,transform:I,pixelsToTileUnits:D}){const U=Qf(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-I.bearingInRadians,D),F=D/2*Jd(this.paint.get("line-width").evaluate(d,b),this.paint.get("line-gap-width").evaluate(d,b)),ee=this.paint.get("line-offset").evaluate(d,b);return ee&&(M=(function(ne,ce){const _e=[];for(let we=0;we<ne.length;we++){const Re=ne[we],ze=[];for(let He=0;He<Re.length;He++){const nt=Re[He-1],Bt=Re[He],lt=Re[He+1],vt=He===0?new c(0,0):Bt.sub(nt)._unit()._perp(),Nt=He===Re.length-1?new c(0,0):lt.sub(Bt)._unit()._perp(),Zt=vt._add(Nt)._unit(),fn=Zt.x*Nt.x+Zt.y*Nt.y;fn!==0&&Zt._mult(1/fn),ze.push(Zt._mult(ce)._add(Bt))}_e.push(ze)}return _e})(M,ee*D)),(function(ne,ce,_e){for(let we=0;we<ce.length;we++){const Re=ce[we];if(ne.length>=3){for(let ze=0;ze<Re.length;ze++)if(qi(ne,Re[ze]))return!0}if(ad(ne,Re,_e))return!0}return!1})(U,M,F)}isTileClipped(){return!0}}function Jd(f,u){return u>0?u+2*f:f}const Ml=uo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hf=uo([{name:"a_projected_pos",components:3,type:"Float32"}],4);uo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const cg=uo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);uo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const cd=uo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ov=uo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Iv(f,u,d){return f.sections.forEach((b=>{b.text=(function(M,I,D){const U=I.layout.get("text-transform").evaluate(D,{});return U==="uppercase"?M=M.toLocaleUpperCase():U==="lowercase"&&(M=M.toLocaleLowerCase()),al.applyArabicShaping&&(M=al.applyArabicShaping(M)),M})(b.text,u,d)})),f}uo([{name:"triangle",components:3,type:"Uint16"}]),uo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),uo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),uo([{type:"Float32",name:"offsetX"}]),uo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),uo([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ag={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var sa=24;const I0=4294967296,zc=1/I0,kv=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Fu{constructor(u=new Uint8Array(16)){this.buf=ArrayBuffer.isView(u)?u:new Uint8Array(u),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(u,d,b=this.length){for(;this.pos<b;){const M=this.readVarint(),I=M>>3,D=this.pos;this.type=7&M,u(I,d,this),this.pos===D&&this.skip(M)}return d}readMessage(u,d){return this.readFields(u,d,this.readVarint()+this.pos)}readFixed32(){const u=this.dataView.getUint32(this.pos,!0);return this.pos+=4,u}readSFixed32(){const u=this.dataView.getInt32(this.pos,!0);return this.pos+=4,u}readFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*I0;return this.pos+=8,u}readSFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*I0;return this.pos+=8,u}readFloat(){const u=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,u}readDouble(){const u=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,u}readVarint(u){const d=this.buf;let b,M;return M=d[this.pos++],b=127&M,M<128?b:(M=d[this.pos++],b|=(127&M)<<7,M<128?b:(M=d[this.pos++],b|=(127&M)<<14,M<128?b:(M=d[this.pos++],b|=(127&M)<<21,M<128?b:(M=d[this.pos],b|=(15&M)<<28,(function(I,D,U){const F=U.buf;let ee,ne;if(ne=F[U.pos++],ee=(112&ne)>>4,ne<128||(ne=F[U.pos++],ee|=(127&ne)<<3,ne<128)||(ne=F[U.pos++],ee|=(127&ne)<<10,ne<128)||(ne=F[U.pos++],ee|=(127&ne)<<17,ne<128)||(ne=F[U.pos++],ee|=(127&ne)<<24,ne<128)||(ne=F[U.pos++],ee|=(1&ne)<<31,ne<128))return Yp(I,ee,D);throw new Error("Expected varint not more than 10 bytes")})(b,u,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const u=this.readVarint();return u%2==1?(u+1)/-2:u/2}readBoolean(){return!!this.readVarint()}readString(){const u=this.readVarint()+this.pos,d=this.pos;return this.pos=u,u-d>=12&&kv?kv.decode(this.buf.subarray(d,u)):(function(b,M,I){let D="",U=M;for(;U<I;){const F=b[U];let ee,ne,ce,_e=null,we=F>239?4:F>223?3:F>191?2:1;if(U+we>I)break;we===1?F<128&&(_e=F):we===2?(ee=b[U+1],(192&ee)==128&&(_e=(31&F)<<6|63&ee,_e<=127&&(_e=null))):we===3?(ee=b[U+1],ne=b[U+2],(192&ee)==128&&(192&ne)==128&&(_e=(15&F)<<12|(63&ee)<<6|63&ne,(_e<=2047||_e>=55296&&_e<=57343)&&(_e=null))):we===4&&(ee=b[U+1],ne=b[U+2],ce=b[U+3],(192&ee)==128&&(192&ne)==128&&(192&ce)==128&&(_e=(15&F)<<18|(63&ee)<<12|(63&ne)<<6|63&ce,(_e<=65535||_e>=1114112)&&(_e=null))),_e===null?(_e=65533,we=1):_e>65535&&(_e-=65536,D+=String.fromCharCode(_e>>>10&1023|55296),_e=56320|1023&_e),D+=String.fromCharCode(_e),U+=we}return D})(this.buf,d,u)}readBytes(){const u=this.readVarint()+this.pos,d=this.buf.subarray(this.pos,u);return this.pos=u,d}readPackedVarint(u=[],d){const b=this.readPackedEnd();for(;this.pos<b;)u.push(this.readVarint(d));return u}readPackedSVarint(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSVarint());return u}readPackedBoolean(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readBoolean());return u}readPackedFloat(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFloat());return u}readPackedDouble(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readDouble());return u}readPackedFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed32());return u}readPackedSFixed32(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed32());return u}readPackedFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readFixed64());return u}readPackedSFixed64(u=[]){const d=this.readPackedEnd();for(;this.pos<d;)u.push(this.readSFixed64());return u}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(u){const d=7&u;if(d===0)for(;this.buf[this.pos++]>127;);else if(d===2)this.pos=this.readVarint()+this.pos;else if(d===5)this.pos+=4;else{if(d!==1)throw new Error(`Unimplemented type: ${d}`);this.pos+=8}}writeTag(u,d){this.writeVarint(u<<3|d)}realloc(u){let d=this.length||16;for(;d<this.pos+u;)d*=2;if(d!==this.length){const b=new Uint8Array(d);b.set(this.buf),this.buf=b,this.dataView=new DataView(b.buffer),this.length=d}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeSFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*zc),!0),this.pos+=8}writeSFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*zc),!0),this.pos+=8}writeVarint(u){(u=+u||0)>268435455||u<0?(function(d,b){let M,I;if(d>=0?(M=d%4294967296|0,I=d/4294967296|0):(M=~(-d%4294967296),I=~(-d/4294967296),4294967295^M?M=M+1|0:(M=0,I=I+1|0)),d>=18446744073709552e3||d<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");b.realloc(10),(function(D,U,F){F.buf[F.pos++]=127&D|128,D>>>=7,F.buf[F.pos++]=127&D|128,D>>>=7,F.buf[F.pos++]=127&D|128,D>>>=7,F.buf[F.pos++]=127&D|128,F.buf[F.pos]=127&(D>>>=7)})(M,0,b),(function(D,U){const F=(7&D)<<4;U.buf[U.pos++]|=F|((D>>>=3)?128:0),D&&(U.buf[U.pos++]=127&D|((D>>>=7)?128:0),D&&(U.buf[U.pos++]=127&D|((D>>>=7)?128:0),D&&(U.buf[U.pos++]=127&D|((D>>>=7)?128:0),D&&(U.buf[U.pos++]=127&D|((D>>>=7)?128:0),D&&(U.buf[U.pos++]=127&D)))))})(I,b)})(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))}writeSVarint(u){this.writeVarint(u<0?2*-u-1:2*u)}writeBoolean(u){this.writeVarint(+u)}writeString(u){u=String(u),this.realloc(4*u.length),this.pos++;const d=this.pos;this.pos=(function(M,I,D){for(let U,F,ee=0;ee<I.length;ee++){if(U=I.charCodeAt(ee),U>55295&&U<57344){if(!F){U>56319||ee+1===I.length?(M[D++]=239,M[D++]=191,M[D++]=189):F=U;continue}if(U<56320){M[D++]=239,M[D++]=191,M[D++]=189,F=U;continue}U=F-55296<<10|U-56320|65536,F=null}else F&&(M[D++]=239,M[D++]=191,M[D++]=189,F=null);U<128?M[D++]=U:(U<2048?M[D++]=U>>6|192:(U<65536?M[D++]=U>>12|224:(M[D++]=U>>18|240,M[D++]=U>>12&63|128),M[D++]=U>>6&63|128),M[D++]=63&U|128)}return D})(this.buf,u,this.pos);const b=this.pos-d;b>=128&&Tv(d,b,this),this.pos=d-1,this.writeVarint(b),this.pos+=b}writeFloat(u){this.realloc(4),this.dataView.setFloat32(this.pos,u,!0),this.pos+=4}writeDouble(u){this.realloc(8),this.dataView.setFloat64(this.pos,u,!0),this.pos+=8}writeBytes(u){const d=u.length;this.writeVarint(d),this.realloc(d);for(let b=0;b<d;b++)this.buf[this.pos++]=u[b]}writeRawMessage(u,d){this.pos++;const b=this.pos;u(d,this);const M=this.pos-b;M>=128&&Tv(b,M,this),this.pos=b-1,this.writeVarint(M),this.pos+=M}writeMessage(u,d,b){this.writeTag(u,2),this.writeRawMessage(d,b)}writePackedVarint(u,d){d.length&&this.writeMessage(u,yC,d)}writePackedSVarint(u,d){d.length&&this.writeMessage(u,ef,d)}writePackedBoolean(u,d){d.length&&this.writeMessage(u,hg,d)}writePackedFloat(u,d){d.length&&this.writeMessage(u,V1,d)}writePackedDouble(u,d){d.length&&this.writeMessage(u,Rv,d)}writePackedFixed32(u,d){d.length&&this.writeMessage(u,vC,d)}writePackedSFixed32(u,d){d.length&&this.writeMessage(u,k0,d)}writePackedFixed64(u,d){d.length&&this.writeMessage(u,bC,d)}writePackedSFixed64(u,d){d.length&&this.writeMessage(u,CC,d)}writeBytesField(u,d){this.writeTag(u,2),this.writeBytes(d)}writeFixed32Field(u,d){this.writeTag(u,5),this.writeFixed32(d)}writeSFixed32Field(u,d){this.writeTag(u,5),this.writeSFixed32(d)}writeFixed64Field(u,d){this.writeTag(u,1),this.writeFixed64(d)}writeSFixed64Field(u,d){this.writeTag(u,1),this.writeSFixed64(d)}writeVarintField(u,d){this.writeTag(u,0),this.writeVarint(d)}writeSVarintField(u,d){this.writeTag(u,0),this.writeSVarint(d)}writeStringField(u,d){this.writeTag(u,2),this.writeString(d)}writeFloatField(u,d){this.writeTag(u,5),this.writeFloat(d)}writeDoubleField(u,d){this.writeTag(u,1),this.writeDouble(d)}writeBooleanField(u,d){this.writeVarintField(u,+d)}}function Yp(f,u,d){return d?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function Tv(f,u,d){const b=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));d.realloc(b);for(let M=d.pos-1;M>=f;M--)d.buf[M+b]=d.buf[M]}function yC(f,u){for(let d=0;d<f.length;d++)u.writeVarint(f[d])}function ef(f,u){for(let d=0;d<f.length;d++)u.writeSVarint(f[d])}function V1(f,u){for(let d=0;d<f.length;d++)u.writeFloat(f[d])}function Rv(f,u){for(let d=0;d<f.length;d++)u.writeDouble(f[d])}function hg(f,u){for(let d=0;d<f.length;d++)u.writeBoolean(f[d])}function vC(f,u){for(let d=0;d<f.length;d++)u.writeFixed32(f[d])}function k0(f,u){for(let d=0;d<f.length;d++)u.writeSFixed32(f[d])}function bC(f,u){for(let d=0;d<f.length;d++)u.writeFixed64(f[d])}function CC(f,u){for(let d=0;d<f.length;d++)u.writeSFixed64(f[d])}function $1(f,u,d){f===1&&d.readMessage(Dv,u)}function Dv(f,u,d){if(f===3){const{id:b,bitmap:M,width:I,height:D,left:U,top:F,advance:ee}=d.readMessage(Zx,{});u.push({id:b,bitmap:new tg({width:I+6,height:D+6},M),metrics:{width:I,height:D,left:U,top:F,advance:ee}})}}function Zx(f,u,d){f===1?u.id=d.readVarint():f===2?u.bitmap=d.readBytes():f===3?u.width=d.readVarint():f===4?u.height=d.readVarint():f===5?u.left=d.readSVarint():f===6?u.top=d.readSVarint():f===7&&(u.advance=d.readVarint())}function _C(f){let u=0,d=0;for(const D of f)u+=D.w*D.h,d=Math.max(d,D.w);f.sort(((D,U)=>U.h-D.h));const b=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),d),h:1/0}];let M=0,I=0;for(const D of f)for(let U=b.length-1;U>=0;U--){const F=b[U];if(!(D.w>F.w||D.h>F.h)){if(D.x=F.x,D.y=F.y,I=Math.max(I,D.y+D.h),M=Math.max(M,D.x+D.w),D.w===F.w&&D.h===F.h){const ee=b.pop();ee&&U<b.length&&(b[U]=ee)}else D.h===F.h?(F.x+=D.w,F.w-=D.w):D.w===F.w?(F.y+=D.h,F.h-=D.h):(b.push({x:F.x+D.w,y:F.y,w:F.w-D.w,h:D.h}),F.y+=D.h,F.h-=D.h);break}}return{w:M,h:I,fill:u/(M*I)||0}}class Pv{constructor(u,{pixelRatio:d,version:b,stretchX:M,stretchY:I,content:D,textFitWidth:U,textFitHeight:F}){this.paddedRect=u,this.pixelRatio=d,this.stretchX=M,this.stretchY=I,this.content=D,this.version=b,this.textFitWidth=U,this.textFitHeight=F}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Kv{constructor(u,d){const b={},M={};this.haveRenderCallbacks=[];const I=[];this.addImages(u,b,I),this.addImages(d,M,I);const{w:D,h:U}=_C(I),F=new vu({width:D||1,height:U||1});for(const ee in u){const ne=u[ee],ce=b[ee].paddedRect;vu.copy(ne.data,F,{x:0,y:0},{x:ce.x+1,y:ce.y+1},ne.data)}for(const ee in d){const ne=d[ee],ce=M[ee].paddedRect,_e=ce.x+1,we=ce.y+1,Re=ne.data.width,ze=ne.data.height;vu.copy(ne.data,F,{x:0,y:0},{x:_e,y:we},ne.data),vu.copy(ne.data,F,{x:0,y:ze-1},{x:_e,y:we-1},{width:Re,height:1}),vu.copy(ne.data,F,{x:0,y:0},{x:_e,y:we+ze},{width:Re,height:1}),vu.copy(ne.data,F,{x:Re-1,y:0},{x:_e-1,y:we},{width:1,height:ze}),vu.copy(ne.data,F,{x:0,y:0},{x:_e+Re,y:we},{width:1,height:ze})}this.image=F,this.iconPositions=b,this.patternPositions=M}addImages(u,d,b){for(const M in u){const I=u[M],D={x:0,y:0,w:I.data.width+2,h:I.data.height+2};b.push(D),d[M]=new Pv(D,I),I.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(u,d){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const b in u.updatedImages)this.patchUpdatedImage(this.iconPositions[b],u.getImage(b),d),this.patchUpdatedImage(this.patternPositions[b],u.getImage(b),d)}patchUpdatedImage(u,d,b){if(!u||!d||u.version===d.version)return;u.version=d.version;const[M,I]=u.tl;b.update(d.data,void 0,{x:M,y:I})}}var tf;Hn("ImagePosition",Pv),Hn("ImageAtlas",Kv),s.ao=void 0,(tf=s.ao||(s.ao={}))[tf.none=0]="none",tf[tf.horizontal=1]="horizontal",tf[tf.vertical=2]="vertical",tf[tf.horizontalOnly=3]="horizontalOnly";class Ad{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,d,b){const M=new Ad;return M.scale=u||1,M.fontStack=d,M.verticalAlign=b||"bottom",M}static forImage(u,d){const b=new Ad;return b.imageName=u,b.verticalAlign=d||"bottom",b}}class nf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,d){const b=new nf;for(let M=0;M<u.sections.length;M++){const I=u.sections[M];I.image?b.addImageSection(I):b.addTextSection(I,d)}return b}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=(function(u){let d="";for(let b=0;b<u.length;b++){const M=u.charCodeAt(b+1)||null,I=u.charCodeAt(b-1)||null;d+=M&&Ql(M)&&!Ag[u[b+1]]||I&&Ql(I)&&!Ag[u[b-1]]||!Ag[u[b]]?u[b]:Ag[u[b]]}return d})(this.text)}trim(){let u=0;for(let b=0;b<this.text.length&&T0[this.text.charCodeAt(b)];b++)u++;let d=this.text.length;for(let b=this.text.length-1;b>=0&&b>=u&&T0[this.text.charCodeAt(b)];b--)d--;this.text=this.text.substring(u,d),this.sectionIndex=this.sectionIndex.slice(u,d)}substring(u,d){const b=new nf;return b.text=this.text.substring(u,d),b.sectionIndex=this.sectionIndex.slice(u,d),b.sections=this.sections,b}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((u,d)=>Math.max(u,this.sections[d].scale)),0)}getMaxImageSize(u){let d=0,b=0;for(let M=0;M<this.length();M++){const I=this.getSection(M);if(I.imageName){const D=u[I.imageName];if(!D)continue;const U=D.displaySize;d=Math.max(d,U[0]),b=Math.max(b,U[1])}}return{maxImageWidth:d,maxImageHeight:b}}addTextSection(u,d){this.text+=u.text,this.sections.push(Ad.forText(u.scale,u.fontStack||d,u.verticalAlign));const b=this.sections.length-1;for(let M=0;M<u.text.length;++M)this.sectionIndex.push(b)}addImageSection(u){const d=u.image?u.image.name:"";if(d.length===0)return void Ct("Can't add FormattedSection with an empty image.");const b=this.getNextImageSectionCharCode();b?(this.text+=String.fromCharCode(b),this.sections.push(Ad.forImage(d,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ct("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Zf(f,u,d,b,M,I,D,U,F,ee,ne,ce,_e,we,Re){const ze=nf.fromFeature(f,M);let He;ce===s.ao.vertical&&ze.verticalizePunctuation();const{processBidirectionalText:nt,processStyledBidirectionalText:Bt}=al;if(nt&&ze.sections.length===1){He=[];const Nt=nt(ze.toString(),Go(ze,ee,I,u,b,we));for(const Zt of Nt){const fn=new nf;fn.text=Zt,fn.sections=ze.sections;for(let Nn=0;Nn<Zt.length;Nn++)fn.sectionIndex.push(0);He.push(fn)}}else if(Bt){He=[];const Nt=Bt(ze.text,ze.sectionIndex,Go(ze,ee,I,u,b,we));for(const Zt of Nt){const fn=new nf;fn.text=Zt[0],fn.sectionIndex=Zt[1],fn.sections=ze.sections,He.push(fn)}}else He=(function(Nt,Zt){const fn=[],Nn=Nt.text;let Rn=0;for(const Fn of Zt)fn.push(Nt.substring(Rn,Fn)),Rn=Fn;return Rn<Nn.length&&fn.push(Nt.substring(Rn,Nn.length)),fn})(ze,Go(ze,ee,I,u,b,we));const lt=[],vt={positionedLines:lt,text:ze.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:ce,iconsInText:!1,verticalizable:!1};return(function(Nt,Zt,fn,Nn,Rn,Fn,Ci,Ln,jn,an,Fi,tr){let Ti=0,ui=0,Rr=0,bs=0;const va=Ln==="right"?1:Ln==="left"?0:.5,wl=sa/tr;let gc=0;for(const To of Rn){To.trim();const aa=To.getMaxScale(),ba={positionedGlyphs:[],lineOffset:0};Nt.positionedLines[gc]=ba;const qs=ba.positionedGlyphs;let Gu=0;if(!To.length()){ui+=Fn,++gc;continue}const Nc=Xx(Nn,To,wl);for(let Qu=0;Qu<To.length();Qu++){const Ca=To.getSection(Qu),_a=To.getSectionIndex(Qu),Ha=To.getCharCode(Qu),Pa=J1(jn,Fi,Ha);let Ro;if(Ca.imageName){if(Nt.iconsInText=!0,Ca.scale=Ca.scale*wl,Ro=e2(Ca,Pa,aa,Nc,Nn),!Ro)continue;Gu=Math.max(Gu,Ro.imageOffset)}else if(Ro=Jx(Ca,Ha,Pa,Nc,Zt,fn),!Ro)continue;const{rect:Gc,metrics:Xp,baselineOffset:Wu}=Ro;qs.push({glyph:Ha,imageName:Ca.imageName,x:Ti,y:ui+Wu+-17,vertical:Pa,scale:Ca.scale,fontStack:Ca.fontStack,sectionIndex:_a,metrics:Xp,rect:Gc}),Pa?(Nt.verticalizable=!0,Ti+=(Ca.imageName?Xp.advance:sa)*Ca.scale+an):Ti+=Xp.advance*Ca.scale+an}qs.length!==0&&(Rr=Math.max(Ti-an,Rr),fg(qs,0,qs.length-1,va)),Ti=0,ba.lineOffset=Math.max(Gu,(aa-1)*sa);const Ys=Fn*aa+Gu;ui+=Ys,bs=Math.max(Ys,bs),++gc}const{horizontalAlign:Da,verticalAlign:Ws}=P0(Ci);(function(To,aa,ba,qs,Gu,Nc,Ys,Qu,Ca){const _a=(aa-ba)*Gu;let Ha=0;Ha=Nc!==Ys?-Qu*qs- -17:-qs*Ca*Ys+.5*Ys;for(const Pa of To)for(const Ro of Pa.positionedGlyphs)Ro.x+=_a,Ro.y+=Ha})(Nt.positionedLines,va,Da,Ws,Rr,bs,Fn,ui,Rn.length),Nt.top+=-Ws*ui,Nt.bottom=Nt.top+ui,Nt.left+=-Da*Rr,Nt.right=Nt.left+Rr})(vt,u,d,b,He,D,U,F,ce,ee,_e,Re),!(function(Nt){for(const Zt of Nt)if(Zt.positionedGlyphs.length!==0)return!1;return!0})(lt)&&vt}const T0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Uv={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Lv={40:!0};function R0(f,u,d,b,M,I){if(u.imageName){const D=b[u.imageName];return D?D.displaySize[0]*u.scale*sa/I+M:0}{const D=d[u.fontStack],U=D&&D[f];return U?U.metrics.advance*u.scale+M:0}}function H1(f,u,d,b){const M=Math.pow(f-u,2);return b?f<u?M/2:2*M:M+Math.abs(d)*d}function D0(f,u,d){let b=0;return f===10&&(b-=1e4),d&&(b+=150),f!==40&&f!==65288||(b+=50),u!==41&&u!==65289||(b+=50),b}function Z1(f,u,d,b,M,I){let D=null,U=H1(u,d,M,I);for(const F of b){const ee=H1(u-F.x,d,M,I)+F.badness;ee<=U&&(D=F,U=ee)}return{index:f,x:u,priorBreak:D,badness:U}}function X1(f){return f?X1(f.priorBreak).concat(f.index):[]}function Go(f,u,d,b,M,I){if(!f)return[];const D=[],U=(function(ce,_e,we,Re,ze,He){let nt=0;for(let Bt=0;Bt<ce.length();Bt++){const lt=ce.getSection(Bt);nt+=R0(ce.getCharCode(Bt),lt,Re,ze,_e,He)}return nt/Math.max(1,Math.ceil(nt/we))})(f,u,d,b,M,I),F=f.text.indexOf("")>=0;let ee=0;for(let ce=0;ce<f.length();ce++){const _e=f.getSection(ce),we=f.getCharCode(ce);if(T0[we]||(ee+=R0(we,_e,b,M,u,I)),ce<f.length()-1){const Re=!((ne=we)<11904)&&(!!er["CJK Compatibility Forms"](ne)||!!er["CJK Compatibility"](ne)||!!er["CJK Strokes"](ne)||!!er["CJK Symbols and Punctuation"](ne)||!!er["Enclosed CJK Letters and Months"](ne)||!!er["Halfwidth and Fullwidth Forms"](ne)||!!er["Ideographic Description Characters"](ne)||!!er["Vertical Forms"](ne)||ah.test(String.fromCodePoint(ne)));(Uv[we]||Re||_e.imageName||ce!==f.length()-2&&Lv[f.getCharCode(ce+1)])&&D.push(Z1(ce+1,ee,U,D,D0(we,f.getCharCode(ce+1),Re&&F),!1))}}var ne;return X1(Z1(f.length(),ee,U,D,0,!0))}function P0(f){let u=.5,d=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:u,verticalAlign:d}}function Xx(f,u,d){const b=u.getMaxScale()*sa,{maxImageWidth:M,maxImageHeight:I}=u.getMaxImageSize(f),D=Math.max(b,I*d);return{verticalLineContentWidth:Math.max(b,M*d),horizontalLineContentHeight:D}}function dg(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function J1(f,u,d){return!(f===s.ao.horizontal||!u&&!Ru(d)||u&&(T0[d]||(b=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(b)))));var b}function Jx(f,u,d,b,M,I){const D=I[f.fontStack],U=(function(ee,ne,ce,_e){if(ee&&ee.rect)return ee;const we=ne[ce.fontStack],Re=we&&we[_e];return Re?{rect:null,metrics:Re.metrics}:null})(D&&D[u],M,f,u);if(U===null)return null;let F;if(d)F=b.verticalLineContentWidth-f.scale*sa;else{const ee=dg(f.verticalAlign);F=(b.horizontalLineContentHeight-f.scale*sa)*ee}return{rect:U.rect,metrics:U.metrics,baselineOffset:F}}function e2(f,u,d,b,M){const I=M[f.imageName];if(!I)return null;const D=I.paddedRect,U=I.displaySize,F={width:U[0],height:U[1],left:1,top:-3,advance:u?U[1]:U[0]};let ee;if(u)ee=b.verticalLineContentWidth-U[1]*f.scale;else{const ne=dg(f.verticalAlign);ee=(b.horizontalLineContentHeight-U[1]*f.scale)*ne}return{rect:D,metrics:F,baselineOffset:ee,imageOffset:(u?U[0]:U[1])*f.scale-sa*d}}function fg(f,u,d,b){if(b===0)return;const M=f[d],I=(f[d].x+M.metrics.advance*M.scale)*b;for(let D=u;D<=d;D++)f[D].x-=I}function Vp(f,u,d){const{horizontalAlign:b,verticalAlign:M}=P0(d),I=u[0]-f.displaySize[0]*b,D=u[1]-f.displaySize[1]*M;return{image:f,top:D,bottom:D+f.displaySize[1],left:I,right:I+f.displaySize[0]}}function ey(f){var u,d;let b=f.left,M=f.top,I=f.right-b,D=f.bottom-M;const U=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",F=(d=f.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",ee=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(F==="proportional"){if(U==="stretchOnly"&&I/D<ee||U==="proportional"){const ne=Math.ceil(D*ee);b*=ne/I,I=ne}}else if(U==="proportional"&&F==="stretchOnly"&&ee!==0&&I/D>ee){const ne=Math.ceil(I/ee);M*=ne/D,D=ne}return{x1:b,y1:M,x2:b+I,y2:M+D}}function K0(f,u,d,b,M,I){const D=f.image;let U;if(D.content){const He=D.content,nt=D.pixelRatio||1;U=[He[0]/nt,He[1]/nt,D.displaySize[0]-He[2]/nt,D.displaySize[1]-He[3]/nt]}const F=u.left*I,ee=u.right*I;let ne,ce,_e,we;d==="width"||d==="both"?(we=M[0]+F-b[3],ce=M[0]+ee+b[1]):(we=M[0]+(F+ee-D.displaySize[0])/2,ce=we+D.displaySize[0]);const Re=u.top*I,ze=u.bottom*I;return d==="height"||d==="both"?(ne=M[1]+Re-b[0],_e=M[1]+ze+b[2]):(ne=M[1]+(Re+ze-D.displaySize[1])/2,_e=ne+D.displaySize[1]),{image:D,top:ne,right:ce,bottom:_e,left:we,collisionPadding:U}}const vh=128,pc=32640;function bh(f,u){const{expression:d}=u;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new wo(f+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:b,interpolationType:M}=d;let I=0;for(;I<b.length&&b[I]<=f;)I++;I=Math.max(0,I-1);let D=I;for(;D<b.length&&b[D]<f+1;)D++;D=Math.min(b.length-1,D);const U=b[I],F=b[D];return d.kind==="composite"?{kind:"composite",minZoom:U,maxZoom:F,interpolationType:M}:{kind:"camera",minZoom:U,maxZoom:F,minSize:d.evaluate(new wo(U)),maxSize:d.evaluate(new wo(F)),interpolationType:M}}}function $p(f,u,d){let b="never";const M=f.get(u);return M?b=M:f.get(d)&&(b="always"),b}const t2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function U0(f,u,d,b,M,I,D,U,F,ee,ne,ce,_e){const we=U?Math.min(pc,Math.round(U[0])):0,Re=U?Math.min(pc,Math.round(U[1])):0;f.emplaceBack(u,d,Math.round(32*b),Math.round(32*M),I,D,(we<<1)+(F?1:0),Re,16*ee,16*ne,256*ce,256*_e)}function ty(f,u,d){f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d),f.emplaceBack(u.x,u.y,d)}function xC(f){for(const u of f.sections)if(Rc(u.text))return!0;return!1}class ny{constructor(u){this.layoutVertexArray=new Qt,this.indexArray=new Hi,this.programConfigurations=u,this.segments=new hr,this.dynamicLayoutVertexArray=new On,this.opacityVertexArray=new In,this.hasVisibleVertices=!1,this.placedSymbolArray=new ye}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,d,b,M){this.isEmpty()||(b&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ml.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,Hf.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,t2,!0),this.opacityVertexBuffer.itemSize=1),(b||M)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Hn("SymbolBuffers",ny);class zv{constructor(u,d,b){this.layoutVertexArray=new u,this.layoutAttributes=d,this.indexArray=new b,this.segments=new hr,this.collisionVertexArray=new $n}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,cg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Hn("CollisionBuffers",zv);class Yl{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=qn(globalThis)?Math.min(u.overscaling,128):u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map((D=>D.id)),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bh(this.zoom,d["text-size"]),this.iconSizeData=bh(this.zoom,d["icon-size"]);const b=this.layers[0].layout,M=b.get("symbol-sort-key"),I=b.get("symbol-z-order");this.canOverlap=$p(b,"text-overlap","text-allow-overlap")!=="never"||$p(b,"icon-overlap","icon-allow-overlap")!=="never"||b.get("text-ignore-placement")||b.get("icon-ignore-placement"),this.sortFeaturesByKey=I!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(I==="viewport-y"||I==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,b.get("symbol-placement")==="point"&&(this.writingModes=b.get("text-writing-mode").map((D=>s.ao[D]))),this.stateDependentLayerIds=this.layers.filter((D=>D.isStateDependent())).map((D=>D.id)),this.sourceID=u.sourceID}createArrays(){this.text=new ny(new lA(this.layers,this.zoom,(u=>/^text/.test(u)))),this.icon=new ny(new lA(this.layers,this.zoom,(u=>/^icon/.test(u)))),this.glyphOffsetArray=new Fe,this.lineVertexArray=new Xe,this.symbolInstances=new Se,this.textAnchorOffsets=new tt}calculateGlyphDependencies(u,d,b,M,I){for(let D=0;D<u.length;D++)if(d[u.charCodeAt(D)]=!0,(b||M)&&I){const U=Ag[u.charAt(D)];U&&(d[U.charCodeAt(0)]=!0)}}populate(u,d,b){const M=this.layers[0],I=M.layout,D=I.get("text-font"),U=I.get("text-field"),F=I.get("icon-image"),ee=(U.value.kind!=="constant"||U.value.value instanceof Ko&&!U.value.value.isEmpty()||U.value.value.toString().length>0)&&(D.value.kind!=="constant"||D.value.value.length>0),ne=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,ce=I.get("symbol-sort-key");if(this.features=[],!ee&&!ne)return;const _e=d.iconDependencies,we=d.glyphDependencies,Re=d.availableImages,ze=new wo(this.zoom);for(const{feature:He,id:nt,index:Bt,sourceLayerIndex:lt}of u){const vt=M._featureFilter.needGeometry,Nt=Wa(He,vt);if(!M._featureFilter.filter(ze,Nt,b))continue;let Zt,fn;if(vt||(Nt.geometry=uA(He)),ee){const Rn=M.getValueAndResolveTokens("text-field",Nt,b,Re),Fn=Ko.factory(Rn),Ci=this.hasRTLText=this.hasRTLText||xC(Fn);(!Ci||al.getRTLTextPluginStatus()==="unavailable"||Ci&&al.isParsed())&&(Zt=Iv(Fn,M,Nt))}if(ne){const Rn=M.getValueAndResolveTokens("icon-image",Nt,b,Re);fn=Rn instanceof os?Rn:os.fromString(Rn)}if(!Zt&&!fn)continue;const Nn=this.sortFeaturesByKey?ce.evaluate(Nt,{},b):void 0;if(this.features.push({id:nt,text:Zt,icon:fn,index:Bt,sourceLayerIndex:lt,geometry:Nt.geometry,properties:He.properties,type:Np.types[He.type],sortKey:Nn}),fn&&(_e[fn.name]=!0),Zt){const Rn=D.evaluate(Nt,{},b).join(","),Fn=I.get("text-rotation-alignment")!=="viewport"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ao.vertical)>=0;for(const Ci of Zt.sections)if(Ci.image)_e[Ci.image.name]=!0;else{const Ln=pu(Zt.toString()),jn=Ci.fontStack||Rn,an=we[jn]=we[jn]||{};this.calculateGlyphDependencies(Ci.text,an,Fn,this.allowVerticalPlacement,Ln)}}}I.get("symbol-placement")==="line"&&(this.features=(function(He){const nt={},Bt={},lt=[];let vt=0;function Nt(Rn){lt.push(He[Rn]),vt++}function Zt(Rn,Fn,Ci){const Ln=Bt[Rn];return delete Bt[Rn],Bt[Fn]=Ln,lt[Ln].geometry[0].pop(),lt[Ln].geometry[0]=lt[Ln].geometry[0].concat(Ci[0]),Ln}function fn(Rn,Fn,Ci){const Ln=nt[Fn];return delete nt[Fn],nt[Rn]=Ln,lt[Ln].geometry[0].shift(),lt[Ln].geometry[0]=Ci[0].concat(lt[Ln].geometry[0]),Ln}function Nn(Rn,Fn,Ci){const Ln=Ci?Fn[0][Fn[0].length-1]:Fn[0][0];return`${Rn}:${Ln.x}:${Ln.y}`}for(let Rn=0;Rn<He.length;Rn++){const Fn=He[Rn],Ci=Fn.geometry,Ln=Fn.text?Fn.text.toString():null;if(!Ln){Nt(Rn);continue}const jn=Nn(Ln,Ci),an=Nn(Ln,Ci,!0);if(jn in Bt&&an in nt&&Bt[jn]!==nt[an]){const Fi=fn(jn,an,Ci),tr=Zt(jn,an,lt[Fi].geometry);delete nt[jn],delete Bt[an],Bt[Nn(Ln,lt[tr].geometry,!0)]=tr,lt[Fi].geometry=null}else jn in Bt?Zt(jn,an,Ci):an in nt?fn(jn,an,Ci):(Nt(Rn),nt[jn]=vt-1,Bt[an]=vt-1)}return lt.filter((Rn=>Rn.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((He,nt)=>He.sortKey-nt.sortKey))}update(u,d,b){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:b}),this.icon.programConfigurations.updatePaintArrays(u,d,this.layers,{imagePositions:b}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,d){const b=this.lineVertexArray.length;if(u.segment!==void 0){let M=u.dist(d[u.segment+1]),I=u.dist(d[u.segment]);const D={};for(let U=u.segment+1;U<d.length;U++)D[U]={x:d[U].x,y:d[U].y,tileUnitDistanceFromAnchor:M},U<d.length-1&&(M+=d[U+1].dist(d[U]));for(let U=u.segment||0;U>=0;U--)D[U]={x:d[U].x,y:d[U].y,tileUnitDistanceFromAnchor:I},U>0&&(I+=d[U-1].dist(d[U]));for(let U=0;U<d.length;U++){const F=D[U];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:b,lineLength:this.lineVertexArray.length-b}}addSymbols(u,d,b,M,I,D,U,F,ee,ne,ce,_e){const we=u.indexArray,Re=u.layoutVertexArray,ze=u.segments.prepareSegment(4*d.length,Re,we,this.canOverlap?D.sortKey:void 0),He=this.glyphOffsetArray.length,nt=ze.vertexLength,Bt=this.allowVerticalPlacement&&U===s.ao.vertical?Math.PI/2:0,lt=D.text&&D.text.sections;for(let vt=0;vt<d.length;vt++){const{tl:Nt,tr:Zt,bl:fn,br:Nn,tex:Rn,pixelOffsetTL:Fn,pixelOffsetBR:Ci,minFontScaleX:Ln,minFontScaleY:jn,glyphOffset:an,isSDF:Fi,sectionIndex:tr}=d[vt],Ti=ze.vertexLength,ui=an[1];U0(Re,F.x,F.y,Nt.x,ui+Nt.y,Rn.x,Rn.y,b,Fi,Fn.x,Fn.y,Ln,jn),U0(Re,F.x,F.y,Zt.x,ui+Zt.y,Rn.x+Rn.w,Rn.y,b,Fi,Ci.x,Fn.y,Ln,jn),U0(Re,F.x,F.y,fn.x,ui+fn.y,Rn.x,Rn.y+Rn.h,b,Fi,Fn.x,Ci.y,Ln,jn),U0(Re,F.x,F.y,Nn.x,ui+Nn.y,Rn.x+Rn.w,Rn.y+Rn.h,b,Fi,Ci.x,Ci.y,Ln,jn),ty(u.dynamicLayoutVertexArray,F,Bt),we.emplaceBack(Ti,Ti+2,Ti+1),we.emplaceBack(Ti+1,Ti+2,Ti+3),ze.vertexLength+=4,ze.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(an[0]),vt!==d.length-1&&tr===d[vt+1].sectionIndex||u.programConfigurations.populatePaintArrays(Re.length,D,D.index,{imagePositions:{},canonical:_e,formattedSection:lt&&lt[tr]})}u.placedSymbolArray.emplaceBack(F.x,F.y,He,this.glyphOffsetArray.length-He,nt,ee,ne,F.segment,b?b[0]:0,b?b[1]:0,M[0],M[1],U,0,!1,0,ce)}_addCollisionDebugVertex(u,d,b,M,I,D){return d.emplaceBack(0,0),u.emplaceBack(b.x,b.y,M,I,Math.round(D.x),Math.round(D.y))}addCollisionDebugVertices(u,d,b,M,I,D,U){const F=I.segments.prepareSegment(4,I.layoutVertexArray,I.indexArray),ee=F.vertexLength,ne=I.layoutVertexArray,ce=I.collisionVertexArray,_e=U.anchorX,we=U.anchorY;this._addCollisionDebugVertex(ne,ce,D,_e,we,new c(u,d)),this._addCollisionDebugVertex(ne,ce,D,_e,we,new c(b,d)),this._addCollisionDebugVertex(ne,ce,D,_e,we,new c(b,M)),this._addCollisionDebugVertex(ne,ce,D,_e,we,new c(u,M)),F.vertexLength+=4;const Re=I.indexArray;Re.emplaceBack(ee,ee+1),Re.emplaceBack(ee+1,ee+2),Re.emplaceBack(ee+2,ee+3),Re.emplaceBack(ee+3,ee),F.primitiveLength+=4}addDebugCollisionBoxes(u,d,b,M){for(let I=u;I<d;I++){const D=this.collisionBoxArray.get(I);this.addCollisionDebugVertices(D.x1,D.y1,D.x2,D.y2,M?this.textCollisionBox:this.iconCollisionBox,D.anchorPoint,b)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new zv(ln,cd.members,Er),this.iconCollisionBox=new zv(ln,cd.members,Er);for(let u=0;u<this.symbolInstances.length;u++){const d=this.symbolInstances.get(u);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(u,d,b,M,I,D,U,F,ee){const ne={};for(let ce=d;ce<b;ce++){const _e=u.get(ce);ne.textBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ne.textFeatureIndex=_e.featureIndex;break}for(let ce=M;ce<I;ce++){const _e=u.get(ce);ne.verticalTextBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ne.verticalTextFeatureIndex=_e.featureIndex;break}for(let ce=D;ce<U;ce++){const _e=u.get(ce);ne.iconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ne.iconFeatureIndex=_e.featureIndex;break}for(let ce=F;ce<ee;ce++){const _e=u.get(ce);ne.verticalIconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ne.verticalIconFeatureIndex=_e.featureIndex;break}return ne}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const b=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,b.textBoxStartIndex,b.textBoxEndIndex,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b.iconBoxStartIndex,b.iconBoxEndIndex,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,d){const b=u.placedSymbolArray.get(d),M=b.vertexStartIndex+4*b.numGlyphs;for(let I=b.vertexStartIndex;I<M;I+=4)u.indexArray.emplaceBack(I,I+2,I+1),u.indexArray.emplaceBack(I+1,I+2,I+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(u),b=Math.cos(u),M=[],I=[],D=[];for(let U=0;U<this.symbolInstances.length;++U){D.push(U);const F=this.symbolInstances.get(U);M.push(0|Math.round(d*F.anchorX+b*F.anchorY)),I.push(F.featureIndex)}return D.sort(((U,F)=>M[U]-M[F]||I[F]-I[U])),D}addToSortKeyRanges(u,d){const b=this.sortKeyRanges[this.sortKeyRanges.length-1];b&&b.sortKey===d?b.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const b=this.symbolInstances.get(d);this.featureSortOrder.push(b.featureIndex),[b.rightJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.leftJustifiedTextSymbolIndex].forEach(((M,I,D)=>{M>=0&&D.indexOf(M)===I&&this.addIndicesForPlacedSymbol(this.text,M)})),b.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,b.verticalPlacedTextSymbolIndex),b.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.placedIconSymbolIndex),b.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,b.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Fv,jv;Hn("SymbolBucket",Yl,{omit:["layers","collisionBoxArray","features","compareText"]}),Yl.MAX_GLYPHS=65535,Yl.addDynamicAttributes=ty;var rf={get paint(){return jv=jv||new ls({"icon-opacity":new bi(dt.paint_symbol["icon-opacity"]),"icon-color":new bi(dt.paint_symbol["icon-color"]),"icon-halo-color":new bi(dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new bi(dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new bi(dt.paint_symbol["icon-halo-blur"]),"icon-translate":new ti(dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ti(dt.paint_symbol["icon-translate-anchor"]),"text-opacity":new bi(dt.paint_symbol["text-opacity"]),"text-color":new bi(dt.paint_symbol["text-color"],{runtimeType:nl,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new bi(dt.paint_symbol["text-halo-color"]),"text-halo-width":new bi(dt.paint_symbol["text-halo-width"]),"text-halo-blur":new bi(dt.paint_symbol["text-halo-blur"]),"text-translate":new ti(dt.paint_symbol["text-translate"]),"text-translate-anchor":new ti(dt.paint_symbol["text-translate-anchor"])})},get layout(){return Fv=Fv||new ls({"symbol-placement":new ti(dt.layout_symbol["symbol-placement"]),"symbol-spacing":new ti(dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ti(dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new bi(dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ti(dt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ti(dt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ti(dt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ti(dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ti(dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ti(dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new bi(dt.layout_symbol["icon-size"]),"icon-text-fit":new ti(dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ti(dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new bi(dt.layout_symbol["icon-image"]),"icon-rotate":new bi(dt.layout_symbol["icon-rotate"]),"icon-padding":new bi(dt.layout_symbol["icon-padding"]),"icon-keep-upright":new ti(dt.layout_symbol["icon-keep-upright"]),"icon-offset":new bi(dt.layout_symbol["icon-offset"]),"icon-anchor":new bi(dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ti(dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ti(dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ti(dt.layout_symbol["text-rotation-alignment"]),"text-field":new bi(dt.layout_symbol["text-field"]),"text-font":new bi(dt.layout_symbol["text-font"]),"text-size":new bi(dt.layout_symbol["text-size"]),"text-max-width":new bi(dt.layout_symbol["text-max-width"]),"text-line-height":new ti(dt.layout_symbol["text-line-height"]),"text-letter-spacing":new bi(dt.layout_symbol["text-letter-spacing"]),"text-justify":new bi(dt.layout_symbol["text-justify"]),"text-radial-offset":new bi(dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ti(dt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new bi(dt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new bi(dt.layout_symbol["text-anchor"]),"text-max-angle":new ti(dt.layout_symbol["text-max-angle"]),"text-writing-mode":new ti(dt.layout_symbol["text-writing-mode"]),"text-rotate":new bi(dt.layout_symbol["text-rotate"]),"text-padding":new ti(dt.layout_symbol["text-padding"]),"text-keep-upright":new ti(dt.layout_symbol["text-keep-upright"]),"text-transform":new bi(dt.layout_symbol["text-transform"]),"text-offset":new bi(dt.layout_symbol["text-offset"]),"text-allow-overlap":new ti(dt.layout_symbol["text-allow-overlap"]),"text-overlap":new ti(dt.layout_symbol["text-overlap"]),"text-ignore-placement":new ti(dt.layout_symbol["text-ignore-placement"]),"text-optional":new ti(dt.layout_symbol["text-optional"])})}};class Cr{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Vr,this.defaultValue=u}evaluate(u){if(u.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(u.formattedSection))return d.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Hn("FormatSectionOverride",Cr,{omit:["defaultValue"]});class pg extends ll{constructor(u,d){super(u,rf,d)}recalculate(u,d){if(super.recalculate(u,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const b=this.layout.get("text-writing-mode");if(b){const M=[];for(const I of b)M.indexOf(I)<0&&M.push(I);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,d,b,M){const I=this.layout.get(u).evaluate(d,{},b,M),D=this._unevaluatedLayout._values[u];return D.isDataDriven()||Wh(D.value)||!I?I:(function(U,F){return F.replace(/{([^{}]+)}/g,((ee,ne)=>U&&ne in U?String(U[ne]):""))})(d.properties,I)}createBucket(u){return new Yl(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of rf.paint.overridableProperties){if(!pg.hasPaintOverride(this.layout,u))continue;const d=this.paint.get(u),b=new Cr(d),M=new Qh(b,d.property.specification);let I=null;I=d.value.kind==="constant"||d.value.kind==="source"?new Fl("source",M):new qh("composite",M,d.value.zoomStops),this.paint._values[u]=new ka(d.property,I,d.parameters)}}_handleOverridablePaintPropertyUpdate(u,d,b){return!(!this.layout||d.isDataDriven()||b.isDataDriven())&&pg.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,d){const b=u.get("text-field"),M=rf.paint.properties[d];let I=!1;const D=U=>{for(const F of U)if(M.overrides&&M.overrides.hasOverride(F))return void(I=!0)};if(b.value.kind==="constant"&&b.value.value instanceof Ko)D(b.value.value.sections);else if(b.value.kind==="source"||b.value.kind==="composite"){const U=ee=>{I||(ee instanceof X&&ji(ee.value)===po?D(ee.value.sections):ee instanceof XA?D(ee.sections):ee.eachChild(U))},F=b.value;F._styleExpression&&U(F._styleExpression.expression)}return I}}let mc;var Ya={get paint(){return mc=mc||new ls({"background-color":new ti(dt.paint_background["background-color"]),"background-pattern":new Qa(dt.paint_background["background-pattern"]),"background-opacity":new ti(dt.paint_background["background-opacity"])})}};class L0 extends ll{constructor(u,d){super(u,Ya,d)}}class Xf extends ll{constructor(u,d){super(u,{},d),this.onAdd=b=>{this.implementation.onAdd&&this.implementation.onAdd(b,b.painter.context.gl)},this.onRemove=b=>{this.implementation.onRemove&&this.implementation.onRemove(b,b.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class MC{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ao={once:!0},z0=63710088e-1;class Ch{constructor(u,d){if(isNaN(u)||isNaN(d))throw new Error(`Invalid LngLat object: (${u}, ${d})`);if(this.lng=+u,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ch(Lt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const d=Math.PI/180,b=this.lat*d,M=u.lat*d,I=Math.sin(b)*Math.sin(M)+Math.cos(b)*Math.cos(M)*Math.cos((u.lng-this.lng)*d);return z0*Math.acos(Math.min(I,1))}static convert(u){if(u instanceof Ch)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Ch(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Ch(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const iy=2*Math.PI*z0;function F0(f){return iy*Math.cos(f*Math.PI/180)}function ry(f){return(180+f)/360}function Fc(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function mg(f,u){return f/F0(u)}function gg(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function Xs(f,u){return f*F0(gg(u))}class Qs{constructor(u,d,b=0){this.x=+u,this.y=+d,this.z=+b}static fromLngLat(u,d=0){const b=Ch.convert(u);return new Qs(ry(b.lng),Fc(b.lat),mg(d,b.lat))}toLngLat(){return new Ch(360*this.x-180,gg(this.y))}toAltitude(){return Xs(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/iy*(u=gg(this.y),1/Math.cos(u*Math.PI/180));var u}}function Nv(f,u,d){var b=2*Math.PI*6378137/256/Math.pow(2,d);return[f*b-2*Math.PI*6378137/2,u*b-2*Math.PI*6378137/2]}class oy{constructor(u,d,b){if(!(function(M,I,D){return!(M<0||M>25||D<0||D>=Math.pow(2,M)||I<0||I>=Math.pow(2,M))})(u,d,b))throw new Error(`x=${d}, y=${b}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=d,this.y=b,this.key=Jf(0,u,u,d,b)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,d,b){const M=(D=this.y,U=this.z,F=Nv(256*(I=this.x),256*(D=Math.pow(2,U)-D-1),U),ee=Nv(256*(I+1),256*(D+1),U),F[0]+","+F[1]+","+ee[0]+","+ee[1]);var I,D,U,F,ee;const ne=(function(ce,_e,we){let Re,ze="";for(let He=ce;He>0;He--)Re=1<<He-1,ze+=(_e&Re?1:0)+(we&Re?2:0);return ze})(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(b==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,M)}isChildOf(u){const d=this.z-u.z;return d>0&&u.x===this.x>>d&&u.y===this.y>>d}getTilePoint(u){const d=Math.pow(2,this.z);return new c((u.x*d-this.x)*yt,(u.y*d-this.y)*yt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Gv{constructor(u,d){this.wrap=u,this.canonical=d,this.key=Jf(u,d.z,d.z,d.x,d.y)}}class Wr{constructor(u,d,b,M,I){if(this.terrainRttPosMatrix32f=null,u<b)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${b}`);this.overscaledZ=u,this.wrap=d,this.canonical=new oy(b,+M,+I),this.key=Jf(d,u,b,M,I)}clone(){return new Wr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-u;return u>this.canonical.z?new Wr(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wr(u,this.wrap,u,this.canonical.x>>d,this.canonical.y>>d)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(u,d){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const b=this.canonical.z-u;return u>this.canonical.z?Jf(this.wrap*+d,u,this.canonical.z,this.canonical.x,this.canonical.y):Jf(this.wrap*+d,u,u,this.canonical.x>>b,this.canonical.y>>b)}isChildOf(u){if(u.wrap!==this.wrap||this.overscaledZ-u.overscaledZ<=0)return!1;if(u.overscaledZ===0)return this.overscaledZ>0;const d=this.canonical.z-u.canonical.z;return!(d<0)&&u.canonical.x===this.canonical.x>>d&&u.canonical.y===this.canonical.y>>d}children(u){if(this.overscaledZ>=u)return[new Wr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,b=2*this.canonical.x,M=2*this.canonical.y;return[new Wr(d,this.wrap,d,b,M),new Wr(d,this.wrap,d,b+1,M),new Wr(d,this.wrap,d,b,M+1),new Wr(d,this.wrap,d,b+1,M+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Wr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Wr(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Gv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new Qs(u.x-this.wrap,u.y))}}function Jf(f,u,d,b,M){(f*=2)<0&&(f=-1*f-1);const I=1<<d;return(I*I*f+I*M+b).toString(36)+d.toString(36)+u.toString(36)}function Va(f,u){return u?f.properties[u]:f.id}Hn("CanonicalTileID",oy),Hn("OverscaledTileID",Wr,{omit:["terrainRttPosMatrix32f"]});class Hp{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(u){return this.minX=Math.min(this.minX,u.x),this.minY=Math.min(this.minY,u.y),this.maxX=Math.max(this.maxX,u.x),this.maxY=Math.max(this.maxY,u.y),this}expandBy(u){return this.minX-=u,this.minY-=u,this.maxX+=u,this.maxY+=u,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(u){return this.expandBy(-u)}map(u){const d=new Hp;return d.extend(u(new c(this.minX,this.minY))),d.extend(u(new c(this.maxX,this.minY))),d.extend(u(new c(this.minX,this.maxY))),d.extend(u(new c(this.maxX,this.maxY))),d}static fromPoints(u){const d=new Hp;for(const b of u)d.extend(b);return d}contains(u){return u.x>=this.minX&&u.x<=this.maxX&&u.y>=this.minY&&u.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(u){return!this.empty()&&!u.empty()&&u.minX>=this.minX&&u.maxX<=this.maxX&&u.minY>=this.minY&&u.maxY<=this.maxY}intersects(u){return!this.empty()&&!u.empty()&&u.minX<=this.maxX&&u.maxX>=this.minX&&u.minY<=this.maxY&&u.maxY>=this.minY}}class sy{constructor(u){this._stringToNumber={},this._numberToString=[];for(let d=0;d<u.length;d++){const b=u[d];this._stringToNumber[b]=d,this._numberToString[d]=b}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class yg{constructor(u,d,b,M,I){this.type="Feature",this._vectorTileFeature=u,u._z=d,u._x=b,u._y=M,this.properties=u.properties,this.id=I}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(u[d]=this[d]);return u}}class vg{constructor(u,d){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new aA(yt,16,0),this.grid3D=new aA(yt,16,0),this.featureIndexArray=new ct,this.promoteId=d}insert(u,d,b,M,I,D){const U=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,M,I);const F=D?this.grid3D:this.grid;for(let ee=0;ee<d.length;ee++){const ne=d[ee],ce=[1/0,1/0,-1/0,-1/0];for(let _e=0;_e<ne.length;_e++){const we=ne[_e];ce[0]=Math.min(ce[0],we.x),ce[1]=Math.min(ce[1],we.y),ce[2]=Math.max(ce[2],we.x),ce[3]=Math.max(ce[3],we.y)}ce[0]<yt&&ce[1]<yt&&ce[2]>=0&&ce[3]>=0&&F.insert(U,ce[0],ce[1],ce[2],ce[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Sv(new Fu(this.rawTileData)).layers,this.sourceLayerCoder=new sy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,d,b,M){this.loadVTLayers();const I=u.params,D=yt/u.tileSize/u.scale,U=bl(I.filter,I.globalState),F=u.queryGeometry,ee=u.queryPadding*D,ne=Hp.fromPoints(F),ce=this.grid.query(ne.minX-ee,ne.minY-ee,ne.maxX+ee,ne.maxY+ee),_e=Hp.fromPoints(u.cameraQueryGeometry).expandBy(ee),we=this.grid3D.query(_e.minX,_e.minY,_e.maxX,_e.maxY,((He,nt,Bt,lt)=>(function(vt,Nt,Zt,fn,Nn){for(const Fn of vt)if(Nt<=Fn.x&&Zt<=Fn.y&&fn>=Fn.x&&Nn>=Fn.y)return!0;const Rn=[new c(Nt,Zt),new c(Nt,Nn),new c(fn,Nn),new c(fn,Zt)];if(vt.length>2){for(const Fn of Rn)if(qi(vt,Fn))return!0}for(let Fn=0;Fn<vt.length-1;Fn++)if(C0(vt[Fn],vt[Fn+1],Rn))return!0;return!1})(u.cameraQueryGeometry,He-ee,nt-ee,Bt+ee,lt+ee)));for(const He of we)ce.push(He);ce.sort(j0);const Re={};let ze;for(let He=0;He<ce.length;He++){const nt=ce[He];if(nt===ze)continue;ze=nt;const Bt=this.featureIndexArray.get(nt);let lt=null;this.loadMatchingFeature(Re,Bt.bucketIndex,Bt.sourceLayerIndex,Bt.featureIndex,U,I.layers,I.availableImages,d,b,M,((vt,Nt,Zt)=>(lt||(lt=uA(vt)),Nt.queryIntersectsFeature({queryGeometry:F,feature:vt,featureState:Zt,geometry:lt,zoom:this.z,transform:u.transform,pixelsToTileUnits:D,pixelPosMatrix:u.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:u.getElevation}))))}return Re}loadMatchingFeature(u,d,b,M,I,D,U,F,ee,ne,ce){const _e=this.bucketLayerIDs[d];if(D&&!_e.some((He=>D.has(He))))return;const we=this.sourceLayerCoder.decode(b),Re=this.vtLayers[we].feature(M);if(I.needGeometry){const He=Wa(Re,!0);if(!I.filter(new wo(this.tileID.overscaledZ),He,this.tileID.canonical))return}else if(!I.filter(new wo(this.tileID.overscaledZ),Re))return;const ze=this.getId(Re,we);for(let He=0;He<_e.length;He++){const nt=_e[He];if(D&&!D.has(nt))continue;const Bt=F[nt];if(!Bt)continue;let lt={};ze&&ne&&(lt=ne.getState(Bt.sourceLayer||"_geojsonTileLayer",ze));const vt=Ue({},ee[nt]);vt.paint=ay(vt.paint,Bt.paint,Re,lt,U),vt.layout=ay(vt.layout,Bt.layout,Re,lt,U);const Nt=!ce||ce(Re,Bt,lt);if(!Nt)continue;const Zt=new yg(Re,this.z,this.x,this.y,ze);Zt.layer=vt;let fn=u[nt];fn===void 0&&(fn=u[nt]=[]),fn.push({featureIndex:M,feature:Zt,intersectionZ:Nt})}}lookupSymbolFeatures(u,d,b,M,I,D,U,F){const ee={};this.loadVTLayers();const ne=bl(I.filterSpec,I.globalState);for(const ce of u)this.loadMatchingFeature(ee,b,M,ce,ne,D,U,F,d);return ee}hasLayer(u){for(const d of this.bucketLayerIDs)for(const b of d)if(u===b)return!0;return!1}getId(u,d){var b;let M=u.id;return this.promoteId&&(M=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof M=="boolean"&&(M=Number(M)),M===void 0&&(!((b=u.properties)===null||b===void 0)&&b.cluster)&&this.promoteId&&(M=Number(u.properties.cluster_id))),M}}function ay(f,u,d,b,M){return Ee(f,((I,D)=>{const U=u instanceof Ah?u.get(D):null;return U&&U.evaluate?U.evaluate(d,b,M):U}))}function j0(f,u){return u-f}function bg(f,u,d,b,M){const I=[];for(let D=0;D<f.length;D++){const U=f[D];let F;for(let ee=0;ee<U.length-1;ee++){let ne=U[ee],ce=U[ee+1];ne.x<u&&ce.x<u||(ne.x<u?ne=new c(u,ne.y+(u-ne.x)/(ce.x-ne.x)*(ce.y-ne.y))._round():ce.x<u&&(ce=new c(u,ne.y+(u-ne.x)/(ce.x-ne.x)*(ce.y-ne.y))._round()),ne.y<d&&ce.y<d||(ne.y<d?ne=new c(ne.x+(d-ne.y)/(ce.y-ne.y)*(ce.x-ne.x),d)._round():ce.y<d&&(ce=new c(ne.x+(d-ne.y)/(ce.y-ne.y)*(ce.x-ne.x),d)._round()),ne.x>=b&&ce.x>=b||(ne.x>=b?ne=new c(b,ne.y+(b-ne.x)/(ce.x-ne.x)*(ce.y-ne.y))._round():ce.x>=b&&(ce=new c(b,ne.y+(b-ne.x)/(ce.x-ne.x)*(ce.y-ne.y))._round()),ne.y>=M&&ce.y>=M||(ne.y>=M?ne=new c(ne.x+(M-ne.y)/(ce.y-ne.y)*(ce.x-ne.x),M)._round():ce.y>=M&&(ce=new c(ne.x+(M-ne.y)/(ce.y-ne.y)*(ce.x-ne.x),M)._round()),F&&ne.equals(F[F.length-1])||(F=[ne],I.push(F)),F.push(ce)))))}}return I}Hn("FeatureIndex",vg,{omit:["rawTileData","sourceLayerCoder"]});class $a extends c{constructor(u,d,b,M){super(u,d),this.angle=b,M!==void 0&&(this.segment=M)}clone(){return new $a(this.x,this.y,this.angle,this.segment)}}function of(f,u,d,b,M){if(u.segment===void 0||d===0)return!0;let I=u,D=u.segment+1,U=0;for(;U>-d/2;){if(D--,D<0)return!1;U-=f[D].dist(I),I=f[D]}U+=f[D].dist(f[D+1]),D++;const F=[];let ee=0;for(;U<d/2;){const ne=f[D],ce=f[D+1];if(!ce)return!1;let _e=f[D-1].angleTo(ne)-ne.angleTo(ce);for(_e=Math.abs((_e+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:U,angleDelta:_e}),ee+=_e;U-F[0].distance>b;)ee-=F.shift().angleDelta;if(ee>M)return!1;D++,U+=ne.dist(ce)}return!0}function ly(f){let u=0;for(let d=0;d<f.length-1;d++)u+=f[d].dist(f[d+1]);return u}function wC(f,u,d){return f?.6*u*d:0}function Qv(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function n2(f,u,d,b,M,I){const D=wC(d,M,I),U=Qv(d,b)*I;let F=0;const ee=ly(f)/2;for(let ne=0;ne<f.length-1;ne++){const ce=f[ne],_e=f[ne+1],we=ce.dist(_e);if(F+we>ee){const Re=(ee-F)/we,ze=ea.number(ce.x,_e.x,Re),He=ea.number(ce.y,_e.y,Re),nt=new $a(ze,He,_e.angleTo(ce),ne);return nt._round(),!D||of(f,nt,U,D,u)?nt:void 0}F+=we}}function SC(f,u,d,b,M,I,D,U,F){const ee=wC(b,I,D),ne=Qv(b,M),ce=ne*D,_e=f[0].x===0||f[0].x===F||f[0].y===0||f[0].y===F;return u-ce<u/4&&(u=ce+u/4),Wv(f,_e?u/2*U%u:(ne/2+2*I)*D*U%u,u,ee,d,ce,_e,!1,F)}function Wv(f,u,d,b,M,I,D,U,F){const ee=I/2,ne=ly(f);let ce=0,_e=u-d,we=[];for(let Re=0;Re<f.length-1;Re++){const ze=f[Re],He=f[Re+1],nt=ze.dist(He),Bt=He.angleTo(ze);for(;_e+d<ce+nt;){_e+=d;const lt=(_e-ce)/nt,vt=ea.number(ze.x,He.x,lt),Nt=ea.number(ze.y,He.y,lt);if(vt>=0&&vt<F&&Nt>=0&&Nt<F&&_e-ee>=0&&_e+ee<=ne){const Zt=new $a(vt,Nt,Bt,Re);Zt._round(),b&&!of(f,Zt,I,b,M)||we.push(Zt)}}ce+=nt}return U||we.length||D||(we=Wv(f,ce/2,d,b,M,I,D,!0,F)),we}function hd(f,u,d,b){const M=[],I=f.image,D=I.pixelRatio,U=I.paddedRect.w-2,F=I.paddedRect.h-2;let ee={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const ne=I.stretchX||[[0,U]],ce=I.stretchY||[[0,F]],_e=(an,Fi)=>an+Fi[1]-Fi[0],we=ne.reduce(_e,0),Re=ce.reduce(_e,0),ze=U-we,He=F-Re;let nt=0,Bt=we,lt=0,vt=Re,Nt=0,Zt=ze,fn=0,Nn=He;if(I.content&&b){const an=I.content,Fi=an[2]-an[0],tr=an[3]-an[1];(I.textFitWidth||I.textFitHeight)&&(ee=ey(f)),nt=rr(ne,0,an[0]),lt=rr(ce,0,an[1]),Bt=rr(ne,an[0],an[2]),vt=rr(ce,an[1],an[3]),Nt=an[0]-nt,fn=an[1]-lt,Zt=Fi-Bt,Nn=tr-vt}const Rn=ee.x1,Fn=ee.y1,Ci=ee.x2-Rn,Ln=ee.y2-Fn,jn=(an,Fi,tr,Ti)=>{const ui=ju(an.stretch-nt,Bt,Ci,Rn),Rr=Zp(an.fixed-Nt,Zt,an.stretch,we),bs=ju(Fi.stretch-lt,vt,Ln,Fn),va=Zp(Fi.fixed-fn,Nn,Fi.stretch,Re),wl=ju(tr.stretch-nt,Bt,Ci,Rn),gc=Zp(tr.fixed-Nt,Zt,tr.stretch,we),Da=ju(Ti.stretch-lt,vt,Ln,Fn),Ws=Zp(Ti.fixed-fn,Nn,Ti.stretch,Re),To=new c(ui,bs),aa=new c(wl,bs),ba=new c(wl,Da),qs=new c(ui,Da),Gu=new c(Rr/D,va/D),Nc=new c(gc/D,Ws/D),Ys=u*Math.PI/180;if(Ys){const _a=Math.sin(Ys),Ha=Math.cos(Ys),Pa=[Ha,-_a,_a,Ha];To._matMult(Pa),aa._matMult(Pa),qs._matMult(Pa),ba._matMult(Pa)}const Qu=an.stretch+an.fixed,Ca=Fi.stretch+Fi.fixed;return{tl:To,tr:aa,bl:qs,br:ba,tex:{x:I.paddedRect.x+1+Qu,y:I.paddedRect.y+1+Ca,w:tr.stretch+tr.fixed-Qu,h:Ti.stretch+Ti.fixed-Ca},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gu,pixelOffsetBR:Nc,minFontScaleX:Zt/D/Ci,minFontScaleY:Nn/D/Ln,isSDF:d}};if(b&&(I.stretchX||I.stretchY)){const an=uy(ne,ze,we),Fi=uy(ce,He,Re);for(let tr=0;tr<an.length-1;tr++){const Ti=an[tr],ui=an[tr+1];for(let Rr=0;Rr<Fi.length-1;Rr++)M.push(jn(Ti,Fi[Rr],ui,Fi[Rr+1]))}}else M.push(jn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:U+1},{fixed:0,stretch:F+1}));return M}function rr(f,u,d){let b=0;for(const M of f)b+=Math.max(u,Math.min(d,M[1]))-Math.max(u,Math.min(d,M[0]));return b}function uy(f,u,d){const b=[{fixed:-1,stretch:0}];for(const[M,I]of f){const D=b[b.length-1];b.push({fixed:M-D.stretch,stretch:D.stretch}),b.push({fixed:M-D.stretch,stretch:D.stretch+(I-M)})}return b.push({fixed:u+1,stretch:d}),b}function ju(f,u,d,b){return f/u*d+b}function Zp(f,u,d,b){return f-u*d/b}Hn("Anchor",$a);class cy{constructor(u,d,b,M,I,D,U,F,ee,ne){var ce;if(this.boxStartIndex=u.length,ee){let _e=D.top,we=D.bottom;const Re=D.collisionPadding;Re&&(_e-=Re[1],we+=Re[3]);let ze=we-_e;ze>0&&(ze=Math.max(10,ze),this.circleDiameter=ze)}else{const _e=!((ce=D.image)===null||ce===void 0)&&ce.content&&(D.image.textFitWidth||D.image.textFitHeight)?ey(D):{x1:D.left,y1:D.top,x2:D.right,y2:D.bottom};_e.y1=_e.y1*U-F[0],_e.y2=_e.y2*U+F[2],_e.x1=_e.x1*U-F[3],_e.x2=_e.x2*U+F[1];const we=D.collisionPadding;if(we&&(_e.x1-=we[0]*U,_e.y1-=we[1]*U,_e.x2+=we[2]*U,_e.y2+=we[3]*U),ne){const Re=new c(_e.x1,_e.y1),ze=new c(_e.x2,_e.y1),He=new c(_e.x1,_e.y2),nt=new c(_e.x2,_e.y2),Bt=ne*Math.PI/180;Re._rotate(Bt),ze._rotate(Bt),He._rotate(Bt),nt._rotate(Bt),_e.x1=Math.min(Re.x,ze.x,He.x,nt.x),_e.x2=Math.max(Re.x,ze.x,He.x,nt.x),_e.y1=Math.min(Re.y,ze.y,He.y,nt.y),_e.y2=Math.max(Re.y,ze.y,He.y,nt.y)}u.emplaceBack(d.x,d.y,_e.x1,_e.y1,_e.x2,_e.y2,b,M,I)}this.boxEndIndex=u.length}}class ts{constructor(u=[],d=(b,M)=>b<M?-1:b>M?1:0){if(this.data=u,this.length=this.data.length,this.compare=d,this.length>0)for(let b=(this.length>>1)-1;b>=0;b--)this._down(b)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:d,compare:b}=this,M=d[u];for(;u>0;){const I=u-1>>1,D=d[I];if(b(M,D)>=0)break;d[u]=D,u=I}d[u]=M}_down(u){const{data:d,compare:b}=this,M=this.length>>1,I=d[u];for(;u<M;){let D=1+(u<<1);const U=D+1;if(U<this.length&&b(d[U],d[D])<0&&(D=U),b(d[D],I)>=0)break;d[u]=d[D],u=D}d[u]=I}}function EC(f,u=1,d=!1){const b=Hp.fromPoints(f[0]),M=Math.min(b.width(),b.height());let I=M/2;const D=new ts([],Ay),{minX:U,minY:F,maxX:ee,maxY:ne}=b;if(M===0)return new c(U,F);for(let we=U;we<ee;we+=M)for(let Re=F;Re<ne;Re+=M)D.push(new _h(we+I,Re+I,I,f));let ce=(function(we){let Re=0,ze=0,He=0;const nt=we[0];for(let Bt=0,lt=nt.length,vt=lt-1;Bt<lt;vt=Bt++){const Nt=nt[Bt],Zt=nt[vt],fn=Nt.x*Zt.y-Zt.x*Nt.y;ze+=(Nt.x+Zt.x)*fn,He+=(Nt.y+Zt.y)*fn,Re+=3*fn}return new _h(ze/Re,He/Re,0,we)})(f),_e=D.length;for(;D.length;){const we=D.pop();(we.d>ce.d||!ce.d)&&(ce=we,d&&console.log("found best %d after %d probes",Math.round(1e4*we.d)/1e4,_e)),we.max-ce.d<=u||(I=we.h/2,D.push(new _h(we.p.x-I,we.p.y-I,I,f)),D.push(new _h(we.p.x+I,we.p.y-I,I,f)),D.push(new _h(we.p.x-I,we.p.y+I,I,f)),D.push(new _h(we.p.x+I,we.p.y+I,I,f)),_e+=4)}return d&&(console.log(`num probes: ${_e}`),console.log(`best distance: ${ce.d}`)),ce.p}function Ay(f,u){return u.max-f.max}function _h(f,u,d,b){this.p=new c(f,u),this.h=d,this.d=(function(M,I){let D=!1,U=1/0;for(let F=0;F<I.length;F++){const ee=I[F];for(let ne=0,ce=ee.length,_e=ce-1;ne<ce;_e=ne++){const we=ee[ne],Re=ee[_e];we.y>M.y!=Re.y>M.y&&M.x<(Re.x-we.x)*(M.y-we.y)/(Re.y-we.y)+we.x&&(D=!D),U=Math.min(U,oa(M,we,Re))}}return(D?1:-1)*Math.sqrt(U)})(this.p,b),this.max=this.d+this.h*Math.SQRT2}var Vl;s.aE=void 0,(Vl=s.aE||(s.aE={}))[Vl.center=1]="center",Vl[Vl.left=2]="left",Vl[Vl.right=3]="right",Vl[Vl.top=4]="top",Vl[Vl.bottom=5]="bottom",Vl[Vl["top-left"]=6]="top-left",Vl[Vl["top-right"]=7]="top-right",Vl[Vl["bottom-left"]=8]="bottom-left",Vl[Vl["bottom-right"]=9]="bottom-right";const jc=Number.POSITIVE_INFINITY;function hy(f,u){return u[1]!==jc?(function(d,b,M){let I=0,D=0;switch(b=Math.abs(b),M=Math.abs(M),d){case"top-right":case"top-left":case"top":D=M-7;break;case"bottom-right":case"bottom-left":case"bottom":D=7-M}switch(d){case"top-right":case"bottom-right":case"right":I=-b;break;case"top-left":case"bottom-left":case"left":I=b}return[I,D]})(f,u[0],u[1]):(function(d,b){let M=0,I=0;b<0&&(b=0);const D=b/Math.SQRT2;switch(d){case"top-right":case"top-left":I=D-7;break;case"bottom-right":case"bottom-left":I=7-D;break;case"bottom":I=7-b;break;case"top":I=b-7}switch(d){case"top-right":case"bottom-right":M=-D;break;case"top-left":case"bottom-left":M=D;break;case"left":M=b;break;case"right":M=-b}return[M,I]})(f,u[0])}function qv(f,u,d){var b;const M=f.layout,I=(b=M.get("text-variable-anchor-offset"))===null||b===void 0?void 0:b.evaluate(u,{},d);if(I){const U=I.values,F=[];for(let ee=0;ee<U.length;ee+=2){const ne=F[ee]=U[ee],ce=U[ee+1].map((_e=>_e*sa));ne.startsWith("top")?ce[1]-=7:ne.startsWith("bottom")&&(ce[1]+=7),F[ee+1]=ce}return new mo(F)}const D=M.get("text-variable-anchor");if(D){let U;U=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(u,{},d)*sa,jc]:M.get("text-offset").evaluate(u,{},d).map((ee=>ee*sa));const F=[];for(const ee of D)F.push(ee,hy(ee,U));return new mo(F)}return null}function dy(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function BC(f,u,d,b,M,I,D,U,F,ee,ne,ce){let _e=I.textMaxSize.evaluate(u,{});_e===void 0&&(_e=D);const we=f.layers[0].layout,Re=we.get("icon-offset").evaluate(u,{},ne),ze=AA(d.horizontal),He=D/24,nt=f.tilePixelRatio*He,Bt=f.tilePixelRatio*_e/24,lt=f.tilePixelRatio*U,vt=f.tilePixelRatio*we.get("symbol-spacing"),Nt=we.get("text-padding")*f.tilePixelRatio,Zt=(function(tr,Ti,ui,Rr=1){const bs=tr.get("icon-padding").evaluate(Ti,{},ui),va=bs&&bs.values;return[va[0]*Rr,va[1]*Rr,va[2]*Rr,va[3]*Rr]})(we,u,ne,f.tilePixelRatio),fn=we.get("text-max-angle")/180*Math.PI,Nn=we.get("text-rotation-alignment")!=="viewport"&&we.get("symbol-placement")!=="point",Rn=we.get("icon-rotation-alignment")==="map"&&we.get("symbol-placement")!=="point",Fn=we.get("symbol-placement"),Ci=vt/2,Ln=we.get("icon-text-fit");let jn;b&&Ln!=="none"&&(f.allowVerticalPlacement&&d.vertical&&(jn=K0(b,d.vertical,Ln,we.get("icon-text-fit-padding"),Re,He)),ze&&(b=K0(b,ze,Ln,we.get("icon-text-fit-padding"),Re,He)));const an=ne?ce.line.getGranularityForZoomLevel(ne.z):1,Fi=(tr,Ti)=>{Ti.x<0||Ti.x>=yt||Ti.y<0||Ti.y>=yt||(function(ui,Rr,bs,va,wl,gc,Da,Ws,To,aa,ba,qs,Gu,Nc,Ys,Qu,Ca,_a,Ha,Pa,Ro,Gc,Xp,Wu,yc){const dd=ui.addToLineVertexArray(Rr,bs);let fd,Jp,_g,sf,A=0,g=0,_=0,O=0,j=-1,V=-1;const ve={};let qe=dh("");if(ui.allowVerticalPlacement&&va.vertical){const ni=Ws.layout.get("text-rotate").evaluate(Ro,{},Wu)+90;_g=new cy(To,Rr,aa,ba,qs,va.vertical,Gu,Nc,Ys,ni),Da&&(sf=new cy(To,Rr,aa,ba,qs,Da,Ca,_a,Ys,ni))}if(wl){const ni=Ws.layout.get("icon-rotate").evaluate(Ro,{}),nr=Ws.layout.get("icon-text-fit")!=="none",Lr=hd(wl,ni,Xp,nr),zr=Da?hd(Da,ni,Xp,nr):void 0;Jp=new cy(To,Rr,aa,ba,qs,wl,Ca,_a,!1,ni),A=4*Lr.length;const Qc=ui.iconSizeData;let pd=null;Qc.kind==="source"?(pd=[vh*Ws.layout.get("icon-size").evaluate(Ro,{})],pd[0]>pc&&Ct(`${ui.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Qc.kind==="composite"&&(pd=[vh*Gc.compositeIconSizes[0].evaluate(Ro,{},Wu),vh*Gc.compositeIconSizes[1].evaluate(Ro,{},Wu)],(pd[0]>pc||pd[1]>pc)&&Ct(`${ui.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ui.addSymbols(ui.icon,Lr,pd,Pa,Ha,Ro,s.ao.none,Rr,dd.lineStartIndex,dd.lineLength,-1,Wu),j=ui.icon.placedSymbolArray.length-1,zr&&(g=4*zr.length,ui.addSymbols(ui.icon,zr,pd,Pa,Ha,Ro,s.ao.vertical,Rr,dd.lineStartIndex,dd.lineLength,-1,Wu),V=ui.icon.placedSymbolArray.length-1)}const bt=Object.keys(va.horizontal);for(const ni of bt){const nr=va.horizontal[ni];if(!fd){qe=dh(nr.text);const zr=Ws.layout.get("text-rotate").evaluate(Ro,{},Wu);fd=new cy(To,Rr,aa,ba,qs,nr,Gu,Nc,Ys,zr)}const Lr=nr.positionedLines.length===1;if(_+=Cg(ui,Rr,nr,gc,Ws,Ys,Ro,Qu,dd,va.vertical?s.ao.horizontal:s.ao.horizontalOnly,Lr?bt:[ni],ve,j,Gc,Wu),Lr)break}va.vertical&&(O+=Cg(ui,Rr,va.vertical,gc,Ws,Ys,Ro,Qu,dd,s.ao.vertical,["vertical"],ve,V,Gc,Wu));const Vt=fd?fd.boxStartIndex:ui.collisionBoxArray.length,un=fd?fd.boxEndIndex:ui.collisionBoxArray.length,pn=_g?_g.boxStartIndex:ui.collisionBoxArray.length,Xt=_g?_g.boxEndIndex:ui.collisionBoxArray.length,rn=Jp?Jp.boxStartIndex:ui.collisionBoxArray.length,Ii=Jp?Jp.boxEndIndex:ui.collisionBoxArray.length,or=sf?sf.boxStartIndex:ui.collisionBoxArray.length,Cs=sf?sf.boxEndIndex:ui.collisionBoxArray.length;let Dt=-1;const Et=(ni,nr)=>ni&&ni.circleDiameter?Math.max(ni.circleDiameter,nr):nr;Dt=Et(fd,Dt),Dt=Et(_g,Dt),Dt=Et(Jp,Dt),Dt=Et(sf,Dt);const qt=Dt>-1?1:0;qt&&(Dt*=yc/sa),ui.glyphOffsetArray.length>=Yl.MAX_GLYPHS&&Ct("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ro.sortKey!==void 0&&ui.addToSortKeyRanges(ui.symbolInstances.length,Ro.sortKey);const dn=qv(Ws,Ro,Wu),[Xi,zo]=(function(ni,nr){const Lr=ni.length,zr=nr?.values;if(zr?.length>0)for(let Qc=0;Qc<zr.length;Qc+=2){const pd=zr[Qc+1];ni.emplaceBack(s.aE[zr[Qc]],pd[0],pd[1])}return[Lr,ni.length]})(ui.textAnchorOffsets,dn);ui.symbolInstances.emplaceBack(Rr.x,Rr.y,ve.right>=0?ve.right:-1,ve.center>=0?ve.center:-1,ve.left>=0?ve.left:-1,ve.vertical||-1,j,V,qe,Vt,un,pn,Xt,rn,Ii,or,Cs,aa,_,O,A,g,qt,0,Gu,Dt,Xi,zo)})(f,Ti,tr,d,b,M,jn,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,nt,[Nt,Nt,Nt,Nt],Nn,F,lt,Zt,Rn,Re,u,I,ee,ne,D)};if(Fn==="line")for(const tr of bg(u.geometry,0,0,yt,yt)){const Ti=Wf(tr,an),ui=SC(Ti,vt,fn,d.vertical||ze,b,24,Bt,f.overscaling,yt);for(const Rr of ui)ze&&OC(f,ze.text,Ci,Rr)||Fi(Ti,Rr)}else if(Fn==="line-center"){for(const tr of u.geometry)if(tr.length>1){const Ti=Wf(tr,an),ui=n2(Ti,fn,d.vertical||ze,b,24,Bt);ui&&Fi(Ti,ui)}}else if(u.type==="Polygon")for(const tr of Lh(u.geometry,0)){const Ti=EC(tr,16);Fi(Wf(tr[0],an,!0),new $a(Ti.x,Ti.y,0))}else if(u.type==="LineString")for(const tr of u.geometry){const Ti=Wf(tr,an);Fi(Ti,new $a(Ti[0].x,Ti[0].y,0))}else if(u.type==="Point")for(const tr of u.geometry)for(const Ti of tr)Fi([Ti],new $a(Ti.x,Ti.y,0))}function Cg(f,u,d,b,M,I,D,U,F,ee,ne,ce,_e,we,Re){const ze=(function(Bt,lt,vt,Nt,Zt,fn,Nn,Rn){const Fn=Nt.layout.get("text-rotate").evaluate(fn,{})*Math.PI/180,Ci=[];for(const Ln of lt.positionedLines)for(const jn of Ln.positionedGlyphs){if(!jn.rect)continue;const an=jn.rect||{};let Fi=4,tr=!0,Ti=1,ui=0;const Rr=(Zt||Rn)&&jn.vertical,bs=jn.metrics.advance*jn.scale/2;if(Rn&&lt.verticalizable&&(ui=Ln.lineOffset/2-(jn.imageName?-(sa-jn.metrics.width*jn.scale)/2:(jn.scale-1)*sa)),jn.imageName){const _a=Nn[jn.imageName];tr=_a.sdf,Ti=_a.pixelRatio,Fi=1/Ti}const va=Zt?[jn.x+bs,jn.y]:[0,0];let wl=Zt?[0,0]:[jn.x+bs+vt[0],jn.y+vt[1]-ui],gc=[0,0];Rr&&(gc=wl,wl=[0,0]);const Da=jn.metrics.isDoubleResolution?2:1,Ws=(jn.metrics.left-Fi)*jn.scale-bs+wl[0],To=(-jn.metrics.top-Fi)*jn.scale+wl[1],aa=Ws+an.w/Da*jn.scale/Ti,ba=To+an.h/Da*jn.scale/Ti,qs=new c(Ws,To),Gu=new c(aa,To),Nc=new c(Ws,ba),Ys=new c(aa,ba);if(Rr){const _a=new c(-bs,bs- -17),Ha=-Math.PI/2,Pa=12-bs,Ro=new c(22-Pa,-(jn.imageName?Pa:0)),Gc=new c(...gc);qs._rotateAround(Ha,_a)._add(Ro)._add(Gc),Gu._rotateAround(Ha,_a)._add(Ro)._add(Gc),Nc._rotateAround(Ha,_a)._add(Ro)._add(Gc),Ys._rotateAround(Ha,_a)._add(Ro)._add(Gc)}if(Fn){const _a=Math.sin(Fn),Ha=Math.cos(Fn),Pa=[Ha,-_a,_a,Ha];qs._matMult(Pa),Gu._matMult(Pa),Nc._matMult(Pa),Ys._matMult(Pa)}const Qu=new c(0,0),Ca=new c(0,0);Ci.push({tl:qs,tr:Gu,bl:Nc,br:Ys,tex:an,writingMode:lt.writingMode,glyphOffset:va,sectionIndex:jn.sectionIndex,isSDF:tr,pixelOffsetTL:Qu,pixelOffsetBR:Ca,minFontScaleX:0,minFontScaleY:0})}return Ci})(0,d,U,M,I,D,b,f.allowVerticalPlacement),He=f.textSizeData;let nt=null;He.kind==="source"?(nt=[vh*M.layout.get("text-size").evaluate(D,{})],nt[0]>pc&&Ct(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):He.kind==="composite"&&(nt=[vh*we.compositeTextSizes[0].evaluate(D,{},Re),vh*we.compositeTextSizes[1].evaluate(D,{},Re)],(nt[0]>pc||nt[1]>pc)&&Ct(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,ze,nt,U,I,D,ee,u,F.lineStartIndex,F.lineLength,_e,Re);for(const Bt of ne)ce[Bt]=f.text.placedSymbolArray.length-1;return 4*ze.length}function AA(f){for(const u in f)return f[u];return null}function OC(f,u,d,b){const M=f.compareText;if(u in M){const I=M[u];for(let D=I.length-1;D>=0;D--)if(b.dist(I[D])<d)return!0}else M[u]=[];return M[u].push(b),!1}const N0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class xh{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,b]=new Uint8Array(u,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=b>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const I=N0[15&b];if(!I)throw new Error("Unrecognized array type.");const[D]=new Uint16Array(u,2,1),[U]=new Uint32Array(u,4,1);return new xh(U,D,I,u)}constructor(u,d=64,b=Float64Array,M){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=b,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const I=N0.indexOf(this.ArrayType),D=2*u*this.ArrayType.BYTES_PER_ELEMENT,U=u*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-U%8)%8;if(I<0)throw new Error(`Unexpected typed array class: ${b}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+U+F,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+D+U+F),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+U+F,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+I]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=u)}add(u,d){const b=this._pos>>1;return this.ids[b]=b,this.coords[this._pos++]=u,this.coords[this._pos++]=d,b}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return Yv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,d,b,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:I,coords:D,nodeSize:U}=this,F=[0,I.length-1,0],ee=[];for(;F.length;){const ne=F.pop()||0,ce=F.pop()||0,_e=F.pop()||0;if(ce-_e<=U){for(let He=_e;He<=ce;He++){const nt=D[2*He],Bt=D[2*He+1];nt>=u&&nt<=b&&Bt>=d&&Bt<=M&&ee.push(I[He])}continue}const we=_e+ce>>1,Re=D[2*we],ze=D[2*we+1];Re>=u&&Re<=b&&ze>=d&&ze<=M&&ee.push(I[we]),(ne===0?u<=Re:d<=ze)&&(F.push(_e),F.push(we-1),F.push(1-ne)),(ne===0?b>=Re:M>=ze)&&(F.push(we+1),F.push(ce),F.push(1-ne))}return ee}within(u,d,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:I,nodeSize:D}=this,U=[0,M.length-1,0],F=[],ee=b*b;for(;U.length;){const ne=U.pop()||0,ce=U.pop()||0,_e=U.pop()||0;if(ce-_e<=D){for(let He=_e;He<=ce;He++)py(I[2*He],I[2*He+1],u,d)<=ee&&F.push(M[He]);continue}const we=_e+ce>>1,Re=I[2*we],ze=I[2*we+1];py(Re,ze,u,d)<=ee&&F.push(M[we]),(ne===0?u-b<=Re:d-b<=ze)&&(U.push(_e),U.push(we-1),U.push(1-ne)),(ne===0?u+b>=Re:d+b>=ze)&&(U.push(we+1),U.push(ce),U.push(1-ne))}return F}}function Yv(f,u,d,b,M,I){if(M-b<=d)return;const D=b+M>>1;IC(f,u,D,b,M,I),Yv(f,u,d,b,D-1,1-I),Yv(f,u,d,D+1,M,1-I)}function IC(f,u,d,b,M,I){for(;M>b;){if(M-b>600){const ee=M-b+1,ne=d-b+1,ce=Math.log(ee),_e=.5*Math.exp(2*ce/3),we=.5*Math.sqrt(ce*_e*(ee-_e)/ee)*(ne-ee/2<0?-1:1);IC(f,u,d,Math.max(b,Math.floor(d-ne*_e/ee+we)),Math.min(M,Math.floor(d+(ee-ne)*_e/ee+we)),I)}const D=u[2*d+I];let U=b,F=M;for(zA(f,u,b,d),u[2*M+I]>D&&zA(f,u,b,M);U<F;){for(zA(f,u,U,F),U++,F--;u[2*U+I]<D;)U++;for(;u[2*F+I]>D;)F--}u[2*b+I]===D?zA(f,u,b,F):(F++,zA(f,u,F,M)),F<=d&&(b=F+1),d<=F&&(M=F-1)}}function zA(f,u,d,b){fy(f,d,b),fy(u,2*d,2*b),fy(u,2*d+1,2*b+1)}function fy(f,u,d){const b=f[u];f[u]=f[d],f[d]=b}function py(f,u,d,b){const M=f-d,I=u-b;return M*M+I*I}var Vv;s.cx=void 0,(Vv=s.cx||(s.cx={})).create="create",Vv.load="load",Vv.fullLoad="fullLoad";let my=null,G0=[];const Al=1e3/60,Nu="loadTime",$v="fullLoadTime",kC={mark(f){performance.mark(f)},frame(f){const u=f;my!=null&&G0.push(u-my),my=u},clearMetrics(){my=null,G0=[],performance.clearMeasures(Nu),performance.clearMeasures($v);for(const f in s.cx)performance.clearMarks(s.cx[f])},getPerformanceMetrics(){performance.measure(Nu,s.cx.create,s.cx.load),performance.measure($v,s.cx.create,s.cx.fullLoad);const f=performance.getEntriesByName(Nu)[0].duration,u=performance.getEntriesByName($v)[0].duration,d=G0.length,b=1/(G0.reduce(((I,D)=>I+D),0)/d/1e3),M=G0.filter((I=>I>Al)).reduce(((I,D)=>I+(D-Al)/Al),0);return{loadTime:f,fullLoadTime:u,fps:b,percentDroppedFrames:M/(d+M)*100,totalFrames:d}}};s.$=yt,s.A=H,s.B=function([f,u,d]){return u+=90,u*=Math.PI/180,d*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(d),y:f*Math.sin(u)*Math.sin(d),z:f*Math.cos(d)}},s.C=ea,s.D=ti,s.E=en,s.F=wo,s.G=Vm,s.H=qn,s.I=Pv,s.J=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new MC((()=>this.process())),this.subscription=ei(this.target,"message",(d=>this.receive(d)),!1),this.globalScope=Kt(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise(((d,b)=>{const M=Math.round(1e18*Math.random()).toString(36).substring(0,10),I=u?ei(u.signal,"abort",(()=>{I?.unsubscribe(),delete this.resolveRejects[M];const F={id:M,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)}),Ao):null;this.resolveRejects[M]={resolve:F=>{I?.unsubscribe(),d(F)},reject:F=>{I?.unsubscribe(),b(F)}};const D=[],U=Object.assign(Object.assign({},f),{id:M,sourceMapId:this.mapId,origin:location.origin,data:Xh(f.data,D)});this.target.postMessage(U,{transfer:D})}))}receive(f){const u=f.data,d=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[d];const b=this.abortControllers[d];return delete this.abortControllers[d],void(b&&b.abort())}if(Kt(self)||u.mustQueue)return this.tasks[d]=u,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return a(this,void 0,void 0,(function*(){if(u.type==="<response>"){const M=this.resolveRejects[f];return delete this.resolveRejects[f],M?void(u.error?M.reject(sh(u.error)):M.resolve(sh(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=sh(u.data),b=new AbortController;this.abortControllers[f]=b;try{const M=yield this.messageHandlers[u.type](u.sourceMapId,d,b);this.completeTask(f,null,M)}catch(M){this.completeTask(f,M)}}))}completeTask(f,u,d){const b=[];delete this.abortControllers[f];const M={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Xh(u):null,data:Xh(d,b)};this.target.postMessage(M,{transfer:b})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.K=be,s.L=function(){var f=new H(16);return H!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},s.M=function(f,u,d){var b,M,I,D,U,F,ee,ne,ce,_e,we,Re,ze=d[0],He=d[1],nt=d[2];return u===f?(f[12]=u[0]*ze+u[4]*He+u[8]*nt+u[12],f[13]=u[1]*ze+u[5]*He+u[9]*nt+u[13],f[14]=u[2]*ze+u[6]*He+u[10]*nt+u[14],f[15]=u[3]*ze+u[7]*He+u[11]*nt+u[15]):(M=u[1],I=u[2],D=u[3],U=u[4],F=u[5],ee=u[6],ne=u[7],ce=u[8],_e=u[9],we=u[10],Re=u[11],f[0]=b=u[0],f[1]=M,f[2]=I,f[3]=D,f[4]=U,f[5]=F,f[6]=ee,f[7]=ne,f[8]=ce,f[9]=_e,f[10]=we,f[11]=Re,f[12]=b*ze+U*He+ce*nt+u[12],f[13]=M*ze+F*He+_e*nt+u[13],f[14]=I*ze+ee*He+we*nt+u[14],f[15]=D*ze+ne*He+Re*nt+u[15]),f},s.N=function(f,u,d){var b=d[0],M=d[1],I=d[2];return f[0]=u[0]*b,f[1]=u[1]*b,f[2]=u[2]*b,f[3]=u[3]*b,f[4]=u[4]*M,f[5]=u[5]*M,f[6]=u[6]*M,f[7]=u[7]*M,f[8]=u[8]*I,f[9]=u[9]*I,f[10]=u[10]*I,f[11]=u[11]*I,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.O=function(f,u,d){var b=u[0],M=u[1],I=u[2],D=u[3],U=u[4],F=u[5],ee=u[6],ne=u[7],ce=u[8],_e=u[9],we=u[10],Re=u[11],ze=u[12],He=u[13],nt=u[14],Bt=u[15],lt=d[0],vt=d[1],Nt=d[2],Zt=d[3];return f[0]=lt*b+vt*U+Nt*ce+Zt*ze,f[1]=lt*M+vt*F+Nt*_e+Zt*He,f[2]=lt*I+vt*ee+Nt*we+Zt*nt,f[3]=lt*D+vt*ne+Nt*Re+Zt*Bt,f[4]=(lt=d[4])*b+(vt=d[5])*U+(Nt=d[6])*ce+(Zt=d[7])*ze,f[5]=lt*M+vt*F+Nt*_e+Zt*He,f[6]=lt*I+vt*ee+Nt*we+Zt*nt,f[7]=lt*D+vt*ne+Nt*Re+Zt*Bt,f[8]=(lt=d[8])*b+(vt=d[9])*U+(Nt=d[10])*ce+(Zt=d[11])*ze,f[9]=lt*M+vt*F+Nt*_e+Zt*He,f[10]=lt*I+vt*ee+Nt*we+Zt*nt,f[11]=lt*D+vt*ne+Nt*Re+Zt*Bt,f[12]=(lt=d[12])*b+(vt=d[13])*U+(Nt=d[14])*ce+(Zt=d[15])*ze,f[13]=lt*M+vt*F+Nt*_e+Zt*He,f[14]=lt*I+vt*ee+Nt*we+Zt*nt,f[15]=lt*D+vt*ne+Nt*Re+Zt*Bt,f},s.P=c,s.Q=function(f,u){const d={};for(let b=0;b<u.length;b++){const M=u[b];M in f&&(d[M]=f[M])}return d},s.R=vu,s.S=Ch,s.T=Lp,s.U=Fc,s.V=ry,s.W=z,s.X=Q,s.Y=Kn,s.Z=Wr,s._=a,s.a=se,s.a$=Me,s.a0=function(f,u){var d,b,M,I,D;if(!f)return u??{};if(!u)return f;let U=Object.assign({},f);if(u.removeAll&&(U={removeAll:!0}),u.remove){const F=new Set(u.remove);U.add&&(U.add=U.add.filter((ne=>!F.has(ne.id)))),U.update&&(U.update=U.update.filter((ne=>!F.has(ne.id))));const ee=new Set(((d=f.add)!==null&&d!==void 0?d:[]).map((ne=>ne.id)));u.remove=u.remove.filter((ne=>!ee.has(ne)))}if(u.remove){const F=new Set(U.remove?U.remove.concat(u.remove):u.remove);U.remove=Array.from(F.values())}if(u.add){const F=U.add?U.add.concat(u.add):u.add,ee=new Map(F.map((ne=>[ne.id,ne])));U.add=Array.from(ee.values())}if(u.update){const F=new Map((b=U.update)===null||b===void 0?void 0:b.map((ee=>[ee.id,ee])));for(const ee of u.update){const ne=(M=F.get(ee.id))!==null&&M!==void 0?M:{id:ee.id};ee.newGeometry&&(ne.newGeometry=ee.newGeometry),ee.addOrUpdateProperties&&(ne.addOrUpdateProperties=((I=ne.addOrUpdateProperties)!==null&&I!==void 0?I:[]).concat(ee.addOrUpdateProperties)),ee.removeProperties&&(ne.removeProperties=((D=ne.removeProperties)!==null&&D!==void 0?D:[]).concat(ee.removeProperties)),ee.removeAllProperties&&(ne.removeAllProperties=!0),F.set(ee.id,ne)}U.update=Array.from(F.values())}return U.remove&&U.add&&(U.remove=U.remove.filter((F=>U.add.findIndex((ee=>ee.id===F))===-1))),U},s.a1=Qs,s.a2=Hp,s.a3=25,s.a4=oy,s.a5=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise((d=>{u.onloadstart=()=>{d(u)};for(const b of f){const M=window.document.createElement("source");Ze(b)||(u.crossOrigin="Anonymous"),M.src=b,u.appendChild(M)}}))},s.a6=nn,s.a7=function(){return Oe++},s.a8=ie,s.a9=Yl,s.aA=function(f){let u=1/0,d=1/0,b=-1/0,M=-1/0;for(const I of f)u=Math.min(u,I.x),d=Math.min(d,I.y),b=Math.max(b,I.x),M=Math.max(M,I.y);return[u,d,b,M]},s.aB=sa,s.aC=Le,s.aD=function(f,u,d,b,M=!1){if(!d[0]&&!d[1])return[0,0];const I=M?b==="map"?-f.bearingInRadians:0:b==="viewport"?f.bearingInRadians:0;if(I){const D=Math.sin(I),U=Math.cos(I);d=[d[0]*U-d[1]*D,d[0]*D+d[1]*U]}return[M?d[0]:Le(u,d[0],f.zoom),M?d[1]:Le(u,d[1],f.zoom)]},s.aF=$p,s.aG=dy,s.aH=P0,s.aI=xh,s.aJ=uo,s.aK=jp,s.aL=rt,s.aM=hr,s.aN=Hi,s.aO=Lt,s.aP=It,s.aQ=Xs,s.aR=xe,s.aS=ue,s.aT=function(f){var u=new H(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},s.aU=function(f,u,d){return f[0]=u[0]-d[0],f[1]=u[1]-d[1],f[2]=u[2]-d[2],f},s.aV=function(f,u){var d=u[0],b=u[1],M=u[2],I=d*d+b*b+M*M;return I>0&&(I=1/Math.sqrt(I)),f[0]=u[0]*I,f[1]=u[1]*I,f[2]=u[2]*I,f},s.aW=ge,s.aX=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},s.aY=function(f,u,d){return f[0]=u[0]*d[0],f[1]=u[1]*d[1],f[2]=u[2]*d[2],f[3]=u[3]*d[3],f},s.aZ=G,s.a_=function(f,u,d){const b=u[0]*d[0]+u[1]*d[1]+u[2]*d[2];return b===0?null:(-(f[0]*d[0]+f[1]*d[1]+f[2]*d[2])-d[3])/b},s.aa=bl,s.ab=Wa,s.ac=yg,s.ad=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,b,M,I)=>{const D=M||I;return u[b]=!D||D.toLowerCase(),""})),u["max-age"]){const d=parseInt(u["max-age"],10);isNaN(d)?delete u["max-age"]:u["max-age"]=d}return u},s.ae=Tt,s.af=85.051129,s.ag=Dn,s.ah=function(f){return Math.pow(2,f)},s.ai=J,s.aj=mg,s.ak=function(f){return Math.log(f)/Math.LN2},s.al=function(f){var u=f[0],d=f[1];return u*u+d*d},s.am=function(f){if(!f.length)return new Set;const u=Math.max(...f.map((F=>F.canonical.z)));let d=1/0,b=-1/0,M=1/0,I=-1/0;const D=[];for(const F of f){const{x:ee,y:ne,z:ce}=F.canonical,_e=Math.pow(2,u-ce),we=ee*_e,Re=ne*_e;D.push({id:F,x:we,y:Re}),we<d&&(d=we),we>b&&(b=we),Re<M&&(M=Re),Re>I&&(I=Re)}const U=new Set;for(const F of D)F.x!==d&&F.x!==b&&F.y!==M&&F.y!==I||U.add(F.id);return U},s.an=function(f,u){let d=0,b=0;if(f.kind==="constant")b=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:M,minZoom:I,maxZoom:D}=f,U=M?Tt(uu.interpolationFactor(M,u,I,D),0,1):0;f.kind==="camera"?b=ea.number(f.minSize,f.maxSize,U):d=U}return{uSizeT:d,uSize:b}},s.ap=function(f,{uSize:u,uSizeT:d},{lowerSize:b,upperSize:M}){return f.kind==="source"?b/vh:f.kind==="composite"?ea.number(b/vh,M/vh,d):u},s.aq=function(f,u){var d=u[0],b=u[1],M=u[2],I=u[3],D=u[4],U=u[5],F=u[6],ee=u[7],ne=u[8],ce=u[9],_e=u[10],we=u[11],Re=u[12],ze=u[13],He=u[14],nt=u[15],Bt=d*U-b*D,lt=d*F-M*D,vt=d*ee-I*D,Nt=b*F-M*U,Zt=b*ee-I*U,fn=M*ee-I*F,Nn=ne*ze-ce*Re,Rn=ne*He-_e*Re,Fn=ne*nt-we*Re,Ci=ce*He-_e*ze,Ln=ce*nt-we*ze,jn=_e*nt-we*He,an=Bt*jn-lt*Ln+vt*Ci+Nt*Fn-Zt*Rn+fn*Nn;return an?(f[0]=(U*jn-F*Ln+ee*Ci)*(an=1/an),f[1]=(M*Ln-b*jn-I*Ci)*an,f[2]=(ze*fn-He*Zt+nt*Nt)*an,f[3]=(_e*Zt-ce*fn-we*Nt)*an,f[4]=(F*Fn-D*jn-ee*Rn)*an,f[5]=(d*jn-M*Fn+I*Rn)*an,f[6]=(He*vt-Re*fn-nt*lt)*an,f[7]=(ne*fn-_e*vt+we*lt)*an,f[8]=(D*Ln-U*Fn+ee*Nn)*an,f[9]=(b*Fn-d*Ln-I*Nn)*an,f[10]=(Re*Zt-ze*vt+nt*Bt)*an,f[11]=(ce*vt-ne*Zt-we*Bt)*an,f[12]=(U*Rn-D*Ci-F*Nn)*an,f[13]=(d*Ci-b*Rn+M*Nn)*an,f[14]=(ze*lt-Re*Nt-He*Bt)*an,f[15]=(ne*Nt-ce*lt+_e*Bt)*an,f):null},s.ar=Ye,s.as=function(f){var u=f[0],d=f[1];return Math.sqrt(u*u+d*d)},s.at=function(f){return f[0]=0,f[1]=0,f},s.au=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f},s.av=ty,s.aw=ke,s.ax=function(f,u,d,b){const M=u.y-f.y,I=u.x-f.x,D=b.y-d.y,U=b.x-d.x,F=D*I-U*M;if(F===0)return null;const ee=(U*(f.y-d.y)-D*(f.x-d.x))/F;return new c(f.x+ee*I,f.y+ee*M)},s.ay=bg,s.az=Xm,s.b=Qn,s.b$=class extends cl{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(f);this.gl.uniform1fv(this.location,u)}}},s.b0=function(f,u,d){return f[0]=u[0]*d,f[1]=u[1]*d,f[2]=u[2]*d,f[3]=u[3]*d,f},s.b1=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]},s.b2=Gv,s.b3=Jf,s.b4=function(f,u,d,b,M){var I=1/Math.tan(u/2);if(f[0]=I/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=I,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,M!=null&&M!==1/0){var D=1/(b-M);f[10]=(M+b)*D,f[14]=2*M*b*D}else f[10]=-1,f[14]=-2*b;return f},s.b5=function(f){var u=new H(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},s.b6=function(f,u,d){var b=Math.sin(d),M=Math.cos(d),I=u[0],D=u[1],U=u[2],F=u[3],ee=u[4],ne=u[5],ce=u[6],_e=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=I*M+ee*b,f[1]=D*M+ne*b,f[2]=U*M+ce*b,f[3]=F*M+_e*b,f[4]=ee*M-I*b,f[5]=ne*M-D*b,f[6]=ce*M-U*b,f[7]=_e*M-F*b,f},s.b7=function(f,u,d){var b=Math.sin(d),M=Math.cos(d),I=u[4],D=u[5],U=u[6],F=u[7],ee=u[8],ne=u[9],ce=u[10],_e=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=I*M+ee*b,f[5]=D*M+ne*b,f[6]=U*M+ce*b,f[7]=F*M+_e*b,f[8]=ee*M-I*b,f[9]=ne*M-D*b,f[10]=ce*M-U*b,f[11]=_e*M-F*b,f},s.b8=function(){const f=new Float32Array(16);return J(f),f},s.b9=function(){const f=new Float64Array(16);return J(f),f},s.bA=function(f,u){const d=De(f,360),b=De(u,360),M=b-d,I=b>d?M-360:M+360;return Math.abs(M)<Math.abs(I)?M:I},s.bB=function(f){return f[0]=0,f[1]=0,f[2]=0,f},s.bC=function(f,u,d,b){const M=Math.sqrt(f*f+u*u),I=Math.sqrt(d*d+b*b);f/=M,u/=M,d/=I,b/=I;const D=Math.acos(f*d+u*b);return-u*d+f*b>0?D:-D},s.bD=function(f,u){const d=De(f,2*Math.PI),b=De(u,2*Math.PI);return Math.min(Math.abs(d-b),Math.abs(d-b+2*Math.PI),Math.abs(d-b-2*Math.PI))},s.bE=function(){const f={},u=dt.$version;for(const d in dt.$root){const b=dt.$root[d];if(b.required){let M=null;M=d==="version"?u:b.type==="array"?[]:{},M!=null&&(f[d]=M)}}return f},s.bF=Lf,s.bG=et,s.bH=function f(u,d){if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(let b=0;b<u.length;b++)if(!f(u[b],d[b]))return!1;return!0}if(typeof u=="object"&&u!==null&&d!==null){if(typeof d!="object"||Object.keys(u).length!==Object.keys(d).length)return!1;for(const b in u)if(!f(u[b],d[b]))return!1;return!0}return u===d},s.bI=function(f){f=f.slice();const u=Object.create(null);for(let d=0;d<f.length;d++)u[f[d].id]=f[d];for(let d=0;d<f.length;d++)"ref"in f[d]&&(f[d]=gi(f[d],u[f[d].ref]));return f},s.bJ=function(f,u){if(f.type==="custom")return new Xf(f,u);switch(f.type){case"background":return new L0(f,u);case"circle":return new bv(f,u);case"color-relief":return new cC(f,u);case"fill":return new Yf(f,u);case"fill-extrusion":return new lg(f,u);case"heatmap":return new K1(f,u);case"hillshade":return new Vd(f,u);case"line":return new Y1(f,u);case"raster":return new Cl(f,u);case"symbol":return new pg(f,u)}},s.bK=f=>f.type==="raster",s.bL=mt,s.bM=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let d=[];try{if(!Tn(f.version,u.version))return[{command:"setStyle",args:[u]}];Tn(f.center,u.center)||d.push({command:"setCenter",args:[u.center]}),Tn(f.state,u.state)||d.push({command:"setGlobalState",args:[u.state]}),Tn(f.centerAltitude,u.centerAltitude)||d.push({command:"setCenterAltitude",args:[u.centerAltitude]}),Tn(f.zoom,u.zoom)||d.push({command:"setZoom",args:[u.zoom]}),Tn(f.bearing,u.bearing)||d.push({command:"setBearing",args:[u.bearing]}),Tn(f.pitch,u.pitch)||d.push({command:"setPitch",args:[u.pitch]}),Tn(f.roll,u.roll)||d.push({command:"setRoll",args:[u.roll]}),Tn(f.sprite,u.sprite)||d.push({command:"setSprite",args:[u.sprite]}),Tn(f.glyphs,u.glyphs)||d.push({command:"setGlyphs",args:[u.glyphs]}),Tn(f.transition,u.transition)||d.push({command:"setTransition",args:[u.transition]}),Tn(f.light,u.light)||d.push({command:"setLight",args:[u.light]}),Tn(f.terrain,u.terrain)||d.push({command:"setTerrain",args:[u.terrain]}),Tn(f.sky,u.sky)||d.push({command:"setSky",args:[u.sky]}),Tn(f.projection,u.projection)||d.push({command:"setProjection",args:[u.projection]});const b={},M=[];(function(D,U,F,ee){let ne;for(ne in U=U||{},D=D||{})Object.prototype.hasOwnProperty.call(D,ne)&&(Object.prototype.hasOwnProperty.call(U,ne)||ir(ne,F,ee));for(ne in U)Object.prototype.hasOwnProperty.call(U,ne)&&(Object.prototype.hasOwnProperty.call(D,ne)?Tn(D[ne],U[ne])||(D[ne].type==="geojson"&&U[ne].type==="geojson"&&gr(D,U,ne)?zn(F,{command:"setGeoJSONSourceData",args:[ne,U[ne].data]}):Di(ne,U,F,ee)):si(ne,U,F))})(f.sources,u.sources,M,b);const I=[];f.layers&&f.layers.forEach((D=>{"source"in D&&b[D.source]?d.push({command:"removeLayer",args:[D.id]}):I.push(D)})),d=d.concat(M),(function(D,U,F){U=U||[];const ee=(D=D||[]).map(Ri),ne=U.map(Ri),ce=D.reduce(cr,{}),_e=U.reduce(cr,{}),we=ee.slice(),Re=Object.create(null);let ze,He,nt,Bt,lt;for(let vt=0,Nt=0;vt<ee.length;vt++)ze=ee[vt],Object.prototype.hasOwnProperty.call(_e,ze)?Nt++:(zn(F,{command:"removeLayer",args:[ze]}),we.splice(we.indexOf(ze,Nt),1));for(let vt=0,Nt=0;vt<ne.length;vt++)ze=ne[ne.length-1-vt],we[we.length-1-vt]!==ze&&(Object.prototype.hasOwnProperty.call(ce,ze)?(zn(F,{command:"removeLayer",args:[ze]}),we.splice(we.lastIndexOf(ze,we.length-Nt),1)):Nt++,Bt=we[we.length-vt],zn(F,{command:"addLayer",args:[_e[ze],Bt]}),we.splice(we.length-vt,0,ze),Re[ze]=!0);for(let vt=0;vt<ne.length;vt++)if(ze=ne[vt],He=ce[ze],nt=_e[ze],!Re[ze]&&!Tn(He,nt))if(Tn(He.source,nt.source)&&Tn(He["source-layer"],nt["source-layer"])&&Tn(He.type,nt.type)){for(lt in Oi(He.layout,nt.layout,F,ze,null,"setLayoutProperty"),Oi(He.paint,nt.paint,F,ze,null,"setPaintProperty"),Tn(He.filter,nt.filter)||zn(F,{command:"setFilter",args:[ze,nt.filter]}),Tn(He.minzoom,nt.minzoom)&&Tn(He.maxzoom,nt.maxzoom)||zn(F,{command:"setLayerZoomRange",args:[ze,nt.minzoom,nt.maxzoom]}),He)Object.prototype.hasOwnProperty.call(He,lt)&&lt!=="layout"&&lt!=="paint"&&lt!=="filter"&&lt!=="metadata"&&lt!=="minzoom"&&lt!=="maxzoom"&&(lt.indexOf("paint.")===0?Oi(He[lt],nt[lt],F,ze,lt.slice(6),"setPaintProperty"):Tn(He[lt],nt[lt])||zn(F,{command:"setLayerProperty",args:[ze,lt,nt[lt]]}));for(lt in nt)Object.prototype.hasOwnProperty.call(nt,lt)&&!Object.prototype.hasOwnProperty.call(He,lt)&&lt!=="layout"&&lt!=="paint"&&lt!=="filter"&&lt!=="metadata"&&lt!=="minzoom"&&lt!=="maxzoom"&&(lt.indexOf("paint.")===0?Oi(He[lt],nt[lt],F,ze,lt.slice(6),"setPaintProperty"):Tn(He[lt],nt[lt])||zn(F,{command:"setLayerProperty",args:[ze,lt,nt[lt]]}))}else zn(F,{command:"removeLayer",args:[ze]}),Bt=we[we.lastIndexOf(ze)+1],zn(F,{command:"addLayer",args:[nt,Bt]})})(I,u.layers,d)}catch(b){console.warn("Unable to compute style diff:",b),d=[{command:"setStyle",args:[u]}]}return d},s.bN=function(f){const u=[],d=f.id;return d===void 0&&u.push({message:`layers.${d}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${d}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),u},s.bO=Ee,s.bP=Ve,s.bQ=class extends cl{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},s.bR=gs,s.bS=class extends cl{constructor(f,u){super(f,u),this.current=ra}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},s.bT=sd,s.bU=class extends cl{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},s.bV=class extends cl{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},s.bW=Z,s.bX=function(f,u){var d=Math.sin(u),b=Math.cos(u);return f[0]=b,f[1]=d,f[2]=0,f[3]=-d,f[4]=b,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},s.bY=function(f,u,d){var b=u[0],M=u[1],I=u[2];return f[0]=b*d[0]+M*d[3]+I*d[6],f[1]=b*d[1]+M*d[4]+I*d[7],f[2]=b*d[2]+M*d[5]+I*d[8],f},s.bZ=function(f,u,d,b,M,I,D){var U=1/(u-d),F=1/(b-M),ee=1/(I-D);return f[0]=-2*U,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*F,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*ee,f[11]=0,f[12]=(u+d)*U,f[13]=(M+b)*F,f[14]=(D+I)*ee,f[15]=1,f},s.b_=class extends cl{constructor(f,u){super(f,u),this.current=new Array}set(f){if(f!=this.current){this.current=f;const u=new Float32Array(4*f.length);for(let d=0;d<f.length;d++)u[4*d]=f[d].r,u[4*d+1]=f[d].g,u[4*d+2]=f[d].b,u[4*d+3]=f[d].a;this.gl.uniform4fv(this.location,u)}}},s.ba=function(){return new Float64Array(16)},s.bb=function(f,u,d){const b=new Float64Array(4);return Be(b,f,u-90,d),b},s.bc=function(f,u,d,b){var M,I,D,U,F,ee=u[0],ne=u[1],ce=u[2],_e=u[3],we=d[0],Re=d[1],ze=d[2],He=d[3];return(I=ee*we+ne*Re+ce*ze+_e*He)<0&&(I=-I,we=-we,Re=-Re,ze=-ze,He=-He),1-I>Y?(M=Math.acos(I),D=Math.sin(M),U=Math.sin((1-b)*M)/D,F=Math.sin(b*M)/D):(U=1-b,F=b),f[0]=U*ee+F*we,f[1]=U*ne+F*Re,f[2]=U*ce+F*ze,f[3]=U*_e+F*He,f},s.bd=function(f){const u=new Float64Array(9);var d,b,M,I,D,U,F,ee,ne,ce,_e,we,Re,ze,He,nt,Bt,lt;ce=(M=(b=f)[0])*(F=M+M),_e=(I=b[1])*F,Re=(D=b[2])*F,ze=D*(ee=I+I),nt=(U=b[3])*F,Bt=U*ee,lt=U*(ne=D+D),(d=u)[0]=1-(we=I*ee)-(He=D*ne),d[3]=_e-lt,d[6]=Re+Bt,d[1]=_e+lt,d[4]=1-ce-He,d[7]=ze-nt,d[2]=Re-Bt,d[5]=ze+nt,d[8]=1-ce-we;const vt=It(-Math.asin(Tt(u[2],-1,1)));let Nt,Zt;return Math.hypot(u[5],u[8])<.001?(Nt=0,Zt=-It(Math.atan2(u[3],u[4]))):(Nt=It(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Zt=It(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:Nt,pitch:vt+90,bearing:Zt}},s.be=function(f,u){return f.roll==u.roll&&f.pitch==u.pitch&&f.bearing==u.bearing},s.bf=Gi,s.bg=Dc,s.bh=xl,s.bi=dc,s.bj=sg,s.bk=Ge,s.bl=Te,s.bm=so,s.bn=function(f,u,d,b,M){return Ge(b,M,Tt((f-u)/(d-u),0,1))},s.bo=De,s.bp=function(){return new Float64Array(3)},s.bq=function(f,u,d,b){return f[0]=u[0]+d[0]*b,f[1]=u[1]+d[1]*b,f[2]=u[2]+d[2]*b,f},s.br=Be,s.bs=function(f,u,d){var b=d[0],M=d[1],I=d[2],D=d[3],U=u[0],F=u[1],ee=u[2],ne=M*ee-I*F,ce=I*U-b*ee,_e=b*F-M*U;return f[0]=U+D*(ne+=ne)+M*(_e+=_e)-I*(ce+=ce),f[1]=F+D*ce+I*ne-b*_e,f[2]=ee+D*_e+b*ce-M*ne,f},s.bt=function(f,u,d){const b=(M=[f[0],f[1],f[2],u[0],u[1],u[2],d[0],d[1],d[2]])[0]*((ne=M[8])*(D=M[4])-(U=M[5])*(ee=M[7]))+M[1]*(-ne*(I=M[3])+U*(F=M[6]))+M[2]*(ee*I-D*F);var M,I,D,U,F,ee,ne;if(b===0)return null;const ce=ge([],[u[0],u[1],u[2]],[d[0],d[1],d[2]]),_e=ge([],[d[0],d[1],d[2]],[f[0],f[1],f[2]]),we=ge([],[f[0],f[1],f[2]],[u[0],u[1],u[2]]),Re=xe([],ce,-f[3]);return ue(Re,Re,xe([],_e,-u[3])),ue(Re,Re,xe([],we,-d[3])),xe(Re,Re,1/b),Re},s.bu=z0,s.bv=function(){return new Float64Array(4)},s.bw=function(f,u,d,b){var M=[],I=[];return M[0]=u[0]-d[0],M[1]=u[1]-d[1],M[2]=u[2]-d[2],I[0]=M[0]*Math.cos(b)-M[1]*Math.sin(b),I[1]=M[0]*Math.sin(b)+M[1]*Math.cos(b),I[2]=M[2],f[0]=I[0]+d[0],f[1]=I[1]+d[1],f[2]=I[2]+d[2],f},s.bx=function(f,u,d,b){var M=[],I=[];return M[0]=u[0]-d[0],M[1]=u[1]-d[1],M[2]=u[2]-d[2],I[0]=M[0],I[1]=M[1]*Math.cos(b)-M[2]*Math.sin(b),I[2]=M[1]*Math.sin(b)+M[2]*Math.cos(b),f[0]=I[0]+d[0],f[1]=I[1]+d[1],f[2]=I[2]+d[2],f},s.by=function(f,u,d,b){var M=[],I=[];return M[0]=u[0]-d[0],M[1]=u[1]-d[1],M[2]=u[2]-d[2],I[0]=M[2]*Math.sin(b)+M[0]*Math.cos(b),I[1]=M[1],I[2]=M[2]*Math.cos(b)-M[0]*Math.sin(b),f[0]=I[0]+d[0],f[1]=I[1]+d[1],f[2]=I[2]+d[2],f},s.bz=function(f,u,d){var b=Math.sin(d),M=Math.cos(d),I=u[0],D=u[1],U=u[2],F=u[3],ee=u[8],ne=u[9],ce=u[10],_e=u[11];return u!==f&&(f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=I*M-ee*b,f[1]=D*M-ne*b,f[2]=U*M-ce*b,f[3]=F*M-_e*b,f[8]=I*b+ee*M,f[9]=D*b+ne*M,f[10]=U*b+ce*M,f[11]=F*b+_e*M,f},s.c=he,s.c0=class extends Wd{},s.c1=Ov,s.c2=class extends qd{},s.c3=KA,s.c4=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},s.c5=Up,s.c6=function(f,u,d){var b=u[0],M=u[1],I=u[2],D=d[3]*b+d[7]*M+d[11]*I+d[15];return f[0]=(d[0]*b+d[4]*M+d[8]*I+d[12])/(D=D||1),f[1]=(d[1]*b+d[5]*M+d[9]*I+d[13])/D,f[2]=(d[2]*b+d[6]*M+d[10]*I+d[14])/D,f},s.c7=class extends nd{},s.c8=class extends K{},s.c9=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},s.cA=function(f,u){se.REGISTERED_PROTOCOLS[f]=u},s.cB=function(f){delete se.REGISTERED_PROTOCOLS[f]},s.cC=function(f,u){const d={};for(let M=0;M<f.length;M++){const I=u&&u[f[M].id]||MA(f[M]);u&&(u[f[M].id]=I);let D=d[I];D||(D=d[I]=[]),D.push(f[M])}const b=[];for(const M in d)b.push(d[M]);return b},s.cD=Hn,s.cE=sy,s.cF=vg,s.cG=Kv,s.cH=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=yt/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],d=u.layout,b=u._unevaluatedLayout._values,M={layoutIconSize:b["icon-size"].possiblyEvaluate(new wo(f.bucket.zoom+1),f.canonical),layoutTextSize:b["text-size"].possiblyEvaluate(new wo(f.bucket.zoom+1),f.canonical),textMaxSize:b["text-size"].possiblyEvaluate(new wo(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:ee,maxZoom:ne}=f.bucket.textSizeData;M.compositeTextSizes=[b["text-size"].possiblyEvaluate(new wo(ee),f.canonical),b["text-size"].possiblyEvaluate(new wo(ne),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:ee,maxZoom:ne}=f.bucket.iconSizeData;M.compositeIconSizes=[b["icon-size"].possiblyEvaluate(new wo(ee),f.canonical),b["icon-size"].possiblyEvaluate(new wo(ne),f.canonical)]}const I=d.get("text-line-height")*sa,D=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",U=d.get("text-keep-upright"),F=d.get("text-size");for(const ee of f.bucket.features){const ne=d.get("text-font").evaluate(ee,{},f.canonical).join(","),ce=F.evaluate(ee,{},f.canonical),_e=M.layoutTextSize.evaluate(ee,{},f.canonical),we=M.layoutIconSize.evaluate(ee,{},f.canonical),Re={horizontal:{},vertical:void 0},ze=ee.text;let He,nt=[0,0];if(ze){const vt=ze.toString(),Nt=d.get("text-letter-spacing").evaluate(ee,{},f.canonical)*sa,Zt=y0(vt)?Nt:0,fn=d.get("text-anchor").evaluate(ee,{},f.canonical),Nn=qv(u,ee,f.canonical);if(!Nn){const Ln=d.get("text-radial-offset").evaluate(ee,{},f.canonical);nt=Ln?hy(fn,[Ln*sa,jc]):d.get("text-offset").evaluate(ee,{},f.canonical).map((jn=>jn*sa))}let Rn=D?"center":d.get("text-justify").evaluate(ee,{},f.canonical);const Fn=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(ee,{},f.canonical)*sa:1/0,Ci=()=>{f.bucket.allowVerticalPlacement&&pu(vt)&&(Re.vertical=Zf(ze,f.glyphMap,f.glyphPositions,f.imagePositions,ne,Fn,I,fn,"left",Zt,nt,s.ao.vertical,!0,_e,ce))};if(!D&&Nn){const Ln=new Set;if(Rn==="auto")for(let an=0;an<Nn.values.length;an+=2)Ln.add(dy(Nn.values[an]));else Ln.add(Rn);let jn=!1;for(const an of Ln)if(!Re.horizontal[an])if(jn)Re.horizontal[an]=Re.horizontal[0];else{const Fi=Zf(ze,f.glyphMap,f.glyphPositions,f.imagePositions,ne,Fn,I,"center",an,Zt,nt,s.ao.horizontal,!1,_e,ce);Fi&&(Re.horizontal[an]=Fi,jn=Fi.positionedLines.length===1)}Ci()}else{Rn==="auto"&&(Rn=dy(fn));const Ln=Zf(ze,f.glyphMap,f.glyphPositions,f.imagePositions,ne,Fn,I,fn,Rn,Zt,nt,s.ao.horizontal,!1,_e,ce);Ln&&(Re.horizontal[Rn]=Ln),Ci(),pu(vt)&&D&&U&&(Re.vertical=Zf(ze,f.glyphMap,f.glyphPositions,f.imagePositions,ne,Fn,I,fn,Rn,Zt,nt,s.ao.vertical,!1,_e,ce))}}let Bt=!1;if(ee.icon&&ee.icon.name){const vt=f.imageMap[ee.icon.name];vt&&(He=Vp(f.imagePositions[ee.icon.name],d.get("icon-offset").evaluate(ee,{},f.canonical),d.get("icon-anchor").evaluate(ee,{},f.canonical)),Bt=!!vt.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Bt:f.bucket.sdfIcons!==Bt&&Ct("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(vt.pixelRatio!==f.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const lt=AA(Re.horizontal)||Re.vertical;f.bucket.iconsInText=!!lt&&lt.iconsInText,(lt||He)&&BC(f.bucket,ee,Re,He,f.imageMap,M,_e,we,nt,Bt,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},s.cI=S0,s.cJ=cs,s.cK=qp,s.cL=Sv,s.cM=Fu,s.cN=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},s.cO=function(f,u,d,b,M){return a(this,void 0,void 0,(function*(){if(Q())try{return yield Kn(f,u,d,b,M)}catch{}return(function(I,D,U,F,ee){const ne=I.width,ce=I.height;Un&&Cn||(Un=new OffscreenCanvas(ne,ce),Cn=Un.getContext("2d",{willReadFrequently:!0})),Un.width=ne,Un.height=ce,Cn.drawImage(I,0,0,ne,ce);const _e=Cn.getImageData(D,U,F,ee);return Cn.clearRect(0,0,ne,ce),_e.data})(f,u,d,b,M)}))},s.cP=ng,s.cQ=h,s.cR=wv,s.cS=Np,s.cT=Op,s.cU=function(f,u){const d=new Map;if(f!=null)if(f.type==="Feature")d.set(Va(f,u),f);else for(const b of f.features)d.set(Va(b,u),b);return d},s.cV=function(f,u){if(f==null)return!0;if(f.type==="Feature")return Va(f,u)!=null;if(f.type==="FeatureCollection"){const d=new Set;for(const b of f.features){const M=Va(b,u);if(M==null||d.has(M))return!1;d.add(M)}return!0}return!1},s.cW=function(f,u,d){var b,M,I,D;if(u.removeAll&&f.clear(),u.remove)for(const U of u.remove)f.delete(U);if(u.add)for(const U of u.add){const F=Va(U,d);F!=null&&f.set(F,U)}if(u.update)for(const U of u.update){let F=f.get(U.id);if(F==null)continue;const ee=!U.removeAllProperties&&(((b=U.removeProperties)===null||b===void 0?void 0:b.length)>0||((M=U.addOrUpdateProperties)===null||M===void 0?void 0:M.length)>0);if((U.newGeometry||U.removeAllProperties||ee)&&(F=Object.assign({},F),f.set(U.id,F),ee&&(F.properties=Object.assign({},F.properties))),U.newGeometry&&(F.geometry=U.newGeometry),U.removeAllProperties)F.properties={};else if(((I=U.removeProperties)===null||I===void 0?void 0:I.length)>0)for(const ne of U.removeProperties)Object.prototype.hasOwnProperty.call(F.properties,ne)&&delete F.properties[ne];if(((D=U.addOrUpdateProperties)===null||D===void 0?void 0:D.length)>0)for(const{key:ne,value:ce}of U.addOrUpdateProperties)F.properties[ne]=ce}},s.cX=al,s.ca=function(f,u){var d=f[0],b=f[1],M=f[2],I=f[3],D=f[4],U=f[5],F=f[6],ee=f[7],ne=f[8],ce=f[9],_e=f[10],we=f[11],Re=f[12],ze=f[13],He=f[14],nt=f[15],Bt=u[0],lt=u[1],vt=u[2],Nt=u[3],Zt=u[4],fn=u[5],Nn=u[6],Rn=u[7],Fn=u[8],Ci=u[9],Ln=u[10],jn=u[11],an=u[12],Fi=u[13],tr=u[14],Ti=u[15];return Math.abs(d-Bt)<=Y*Math.max(1,Math.abs(d),Math.abs(Bt))&&Math.abs(b-lt)<=Y*Math.max(1,Math.abs(b),Math.abs(lt))&&Math.abs(M-vt)<=Y*Math.max(1,Math.abs(M),Math.abs(vt))&&Math.abs(I-Nt)<=Y*Math.max(1,Math.abs(I),Math.abs(Nt))&&Math.abs(D-Zt)<=Y*Math.max(1,Math.abs(D),Math.abs(Zt))&&Math.abs(U-fn)<=Y*Math.max(1,Math.abs(U),Math.abs(fn))&&Math.abs(F-Nn)<=Y*Math.max(1,Math.abs(F),Math.abs(Nn))&&Math.abs(ee-Rn)<=Y*Math.max(1,Math.abs(ee),Math.abs(Rn))&&Math.abs(ne-Fn)<=Y*Math.max(1,Math.abs(ne),Math.abs(Fn))&&Math.abs(ce-Ci)<=Y*Math.max(1,Math.abs(ce),Math.abs(Ci))&&Math.abs(_e-Ln)<=Y*Math.max(1,Math.abs(_e),Math.abs(Ln))&&Math.abs(we-jn)<=Y*Math.max(1,Math.abs(we),Math.abs(jn))&&Math.abs(Re-an)<=Y*Math.max(1,Math.abs(Re),Math.abs(an))&&Math.abs(ze-Fi)<=Y*Math.max(1,Math.abs(ze),Math.abs(Fi))&&Math.abs(He-tr)<=Y*Math.max(1,Math.abs(He),Math.abs(tr))&&Math.abs(nt-Ti)<=Y*Math.max(1,Math.abs(nt),Math.abs(Ti))},s.cb=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.cc=f=>f.type==="symbol",s.cd=f=>f.type==="circle",s.ce=f=>f.type==="heatmap",s.cf=f=>f.type==="line",s.cg=f=>f.type==="fill",s.ch=f=>f.type==="fill-extrusion",s.ci=f=>f.type==="hillshade",s.cj=f=>f.type==="color-relief",s.ck=f=>f.type==="background",s.cl=f=>f.type==="custom",s.cm=xt,s.cn=function(f,u,d){const b=At(u.x-d.x,u.y-d.y),M=At(f.x-d.x,f.y-d.y);var I,D;return It(Math.atan2(b[0]*M[1]-b[1]*M[0],(I=b)[0]*(D=M)[0]+I[1]*D[1]))},s.co=st,s.cp=function(f,u){return re[u]&&(f instanceof MouseEvent||f instanceof WheelEvent)},s.cq=function(f,u){return Ce[u]&&"touches"in f},s.cr=function(f){return Ce[f]||re[f]},s.cs=function(f,u,d){var b=u[0],M=u[1];return f[0]=d[0]*b+d[4]*M+d[12],f[1]=d[1]*b+d[5]*M+d[13],f},s.ct=function(f,u){const{x:d,y:b}=Qs.fromLngLat(u);return!(f<0||f>25||b<0||b>=1||d<0||d>=1)},s.cu=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},s.cv=class extends ko{},s.cw=kC,s.cy=function(f){return f.message===le},s.cz=We,s.d=Ze,s.e=Ue,s.f=f=>a(void 0,void 0,void 0,(function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),s.g=Ae,s.h=f=>new Promise(((u,d)=>{const b=new Image;b.onload=()=>{u(b),URL.revokeObjectURL(b.src),b.onload=null,window.requestAnimationFrame((()=>{b.src=xi}))},b.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const M=new Blob([new Uint8Array(f)],{type:"image/png"});b.src=f.byteLength?URL.createObjectURL(M):xi})),s.i=Kt,s.j=(f,u)=>Pe(Ue(f,{type:"json"}),u),s.k=Mt,s.l=Pt,s.m=Pe,s.n=(f,u)=>Pe(Ue(f,{type:"arrayBuffer"}),u),s.o=function(f){return new Fu(f).readFields($1,[])},s.p=_C,s.q=tg,s.r=ls,s.s=ei,s.t=Ff,s.u=er,s.v=dt,s.w=Ct,s.x=Hh,s.y=Zh,s.z=fu})),r("worker",["./shared"],(function(s){class a{constructor(se,Ae){this.keyCache={},se&&this.replace(se,Ae)}replace(se,Ae){this._layerConfigs={},this._layers={},this.update(se,[],Ae)}update(se,Ae,be){for(const et of se){this._layerConfigs[et.id]=et;const Pe=this._layers[et.id]=s.bJ(et,be);Pe._featureFilter=s.aa(Pe.filter,be),this.keyCache[et.id]&&delete this.keyCache[et.id]}for(const et of Ae)delete this.keyCache[et],delete this._layerConfigs[et],delete this._layers[et];this.familiesBySource={};const We=s.cC(Object.values(this._layerConfigs),this.keyCache);for(const et of We){const Pe=et.map((en=>this._layers[en.id])),Ze=Pe[0];if(Ze.visibility==="none")continue;const y=Ze.source||"";let at=this.familiesBySource[y];at||(at=this.familiesBySource[y]={});const Pt=Ze.sourceLayer||"_geojsonTileLayer";let Mt=at[Pt];Mt||(Mt=at[Pt]=[]),Mt.push(Pe)}}}class c{constructor(se){const Ae={},be=[];for(const Ze in se){const y=se[Ze],at=Ae[Ze]={};for(const Pt in y){const Mt=y[+Pt];if(!Mt||Mt.bitmap.width===0||Mt.bitmap.height===0)continue;const en={x:0,y:0,w:Mt.bitmap.width+2,h:Mt.bitmap.height+2};be.push(en),at[Pt]={rect:en,metrics:Mt.metrics}}}const{w:We,h:et}=s.p(be),Pe=new s.q({width:We||1,height:et||1});for(const Ze in se){const y=se[Ze];for(const at in y){const Pt=y[+at];if(!Pt||Pt.bitmap.width===0||Pt.bitmap.height===0)continue;const Mt=Ae[Ze][at].rect;s.q.copy(Pt.bitmap,Pe,{x:0,y:0},{x:Mt.x+1,y:Mt.y+1},Pt.bitmap)}}this.image=Pe,this.positions=Ae}}s.cD("GlyphAtlas",c);class h{constructor(se){this.tileID=new s.Z(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,Ae,be,We,et){return s._(this,void 0,void 0,(function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new s.a8;const Pe=new s.cE(Object.keys(se.layers).sort()),Ze=new s.cF(this.tileID,this.promoteId);Ze.bucketLayerIDs=[];const y={},at={featureIndex:Ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:be,subdivisionGranularity:et},Pt=Ae.familiesBySource[this.source];for(const nn in Pt){const Pi=se.layers[nn];if(!Pi)continue;Pi.version===1&&s.w(`Vector tile source "${this.source}" layer "${nn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $o=Pe.encode(nn),Ks=[];for(let Vr=0;Vr<Pi.length;Vr++){const mn=Pi.feature(Vr),Ni=Ze.getId(mn,nn);Ks.push({feature:mn,id:Ni,index:Vr,sourceLayerIndex:$o})}for(const Vr of Pt[nn]){const mn=Vr[0];mn.source!==this.source&&s.w(`layer.source = ${mn.source} does not equal this.source = ${this.source}`),mn.isHidden(this.zoom,!0)||(m(Vr,this.zoom,be),(y[mn.id]=mn.createBucket({index:Ze.bucketLayerIDs.length,layers:Vr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$o,sourceID:this.source})).populate(Ks,at,this.tileID.canonical),Ze.bucketLayerIDs.push(Vr.map((Ni=>Ni.id))))}}const Mt=s.bO(at.glyphDependencies,(nn=>Object.keys(nn).map(Number)));this.inFlightDependencies.forEach((nn=>nn?.abort())),this.inFlightDependencies=[];let en=Promise.resolve({});if(Object.keys(Mt).length){const nn=new AbortController;this.inFlightDependencies.push(nn),en=We.sendAsync({type:"GG",data:{stacks:Mt,source:this.source,tileID:this.tileID,type:"glyphs"}},nn)}const dt=Object.keys(at.iconDependencies);let Zn=Promise.resolve({});if(dt.length){const nn=new AbortController;this.inFlightDependencies.push(nn),Zn=We.sendAsync({type:"GI",data:{icons:dt,source:this.source,tileID:this.tileID,type:"icons"}},nn)}const gi=Object.keys(at.patternDependencies);let Tn=Promise.resolve({});if(gi.length){const nn=new AbortController;this.inFlightDependencies.push(nn),Tn=We.sendAsync({type:"GI",data:{icons:gi,source:this.source,tileID:this.tileID,type:"patterns"}},nn)}const zn=at.dashDependencies;let si=Promise.resolve({});if(Object.keys(zn).length){const nn=new AbortController;this.inFlightDependencies.push(nn),si=We.sendAsync({type:"GDA",data:{dashes:zn}},nn)}const[ir,Di,gr,Oi]=yield Promise.all([en,Zn,Tn,si]),Ri=new c(ir),cr=new s.cG(Di,gr);for(const nn in y){const Pi=y[nn];Pi instanceof s.a9?(m(Pi.layers,this.zoom,be),s.cH({bucket:Pi,glyphMap:ir,glyphPositions:Ri.positions,imageMap:Di,imagePositions:cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:at.subdivisionGranularity})):Pi.hasDependencies&&(Pi instanceof s.cI||Pi instanceof s.cJ||Pi instanceof s.cK)&&(m(Pi.layers,this.zoom,be),Pi.addFeatures(at,this.tileID.canonical,cr.patternPositions,Oi))}return this.status="done",{buckets:Object.values(y).filter((nn=>!nn.isEmpty())),featureIndex:Ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ri.image,imageAtlas:cr,dashPositions:Oi,glyphMap:this.returnDependencies?ir:null,iconMap:this.returnDependencies?Di:null,glyphPositions:this.returnDependencies?Ri.positions:null}}))}}function m(he,se,Ae){const be=new s.F(se);for(const We of he)We.recalculate(be,Ae)}class v{constructor(se,Ae,be){this.actor=se,this.layerIndex=Ae,this.availableImages=be,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,Ae){return s._(this,void 0,void 0,(function*(){const be=yield s.n(se.request,Ae);try{return{vectorTile:new s.cL(new s.cM(be.data)),rawData:be.data,cacheControl:be.cacheControl,expires:be.expires}}catch(We){const et=new Uint8Array(be.data);let Pe=`Unable to parse the tile at ${se.request.url}, `;throw Pe+=et[0]===31&&et[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${We.message}`,new Error(Pe)}}))}loadTile(se){return s._(this,void 0,void 0,(function*(){const Ae=se.uid,be=!!(se&&se.request&&se.request.collectResourceTiming)&&new s.cN(se.request),We=new h(se);this.loading[Ae]=We;const et=new AbortController;We.abort=et;try{const Pe=yield this.loadVectorTile(se,et);if(delete this.loading[Ae],!Pe)return null;const Ze=Pe.rawData,y={};Pe.expires&&(y.expires=Pe.expires),Pe.cacheControl&&(y.cacheControl=Pe.cacheControl);const at={};if(be){const Mt=be.finish();Mt&&(at.resourceTiming=JSON.parse(JSON.stringify(Mt)))}We.vectorTile=Pe.vectorTile;const Pt=We.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[Ae]=We,this.fetching[Ae]={rawTileData:Ze,cacheControl:y,resourceTiming:at};try{const Mt=yield Pt;return s.e({rawTileData:Ze.slice(0)},Mt,y,at)}finally{delete this.fetching[Ae]}}catch(Pe){throw delete this.loading[Ae],We.status="done",this.loaded[Ae]=We,Pe}}))}reloadTile(se){return s._(this,void 0,void 0,(function*(){const Ae=se.uid;if(!this.loaded||!this.loaded[Ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const be=this.loaded[Ae];if(be.showCollisionBoxes=se.showCollisionBoxes,be.status==="parsing"){const We=yield be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let et;if(this.fetching[Ae]){const{rawTileData:Pe,cacheControl:Ze,resourceTiming:y}=this.fetching[Ae];delete this.fetching[Ae],et=s.e({rawTileData:Pe.slice(0)},We,Ze,y)}else et=We;return et}if(be.status==="done"&&be.vectorTile)return be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)}))}abortTile(se){return s._(this,void 0,void 0,(function*(){const Ae=this.loading,be=se.uid;Ae&&Ae[be]&&Ae[be].abort&&(Ae[be].abort.abort(),delete Ae[be])}))}removeTile(se){return s._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]}))}}class x{constructor(){this.loaded={}}loadTile(se){return s._(this,void 0,void 0,(function*(){const{uid:Ae,encoding:be,rawImageData:We,redFactor:et,greenFactor:Pe,blueFactor:Ze,baseShift:y}=se,at=We.width+2,Pt=We.height+2,Mt=s.b(We)?new s.R({width:at,height:Pt},yield s.cO(We,-1,-1,at,Pt)):We,en=new s.cP(Ae,Mt,be,et,Pe,Ze,y);return this.loaded=this.loaded||{},this.loaded[Ae]=en,en}))}removeTile(se){const Ae=this.loaded,be=se.uid;Ae&&Ae[be]&&delete Ae[be]}}var E,R,P=(function(){if(R)return E;function he(Ae,be){if(Ae.length!==0){se(Ae[0],be);for(var We=1;We<Ae.length;We++)se(Ae[We],!be)}}function se(Ae,be){for(var We=0,et=0,Pe=0,Ze=Ae.length,y=Ze-1;Pe<Ze;y=Pe++){var at=(Ae[Pe][0]-Ae[y][0])*(Ae[y][1]+Ae[Pe][1]),Pt=We+at;et+=Math.abs(We)>=Math.abs(at)?We-Pt+at:at-Pt+We,We=Pt}We+et>=0!=!!be&&Ae.reverse()}return R=1,E=function Ae(be,We){var et,Pe=be&&be.type;if(Pe==="FeatureCollection")for(et=0;et<be.features.length;et++)Ae(be.features[et],We);else if(Pe==="GeometryCollection")for(et=0;et<be.geometries.length;et++)Ae(be.geometries[et],We);else if(Pe==="Feature")Ae(be.geometry,We);else if(Pe==="Polygon")he(be.coordinates,We);else if(Pe==="MultiPolygon")for(et=0;et<be.coordinates.length;et++)he(be.coordinates[et],We);return be}})(),z=s.cQ(P);class Q extends s.cS{constructor(se,Ae){super(new s.cM,0,Ae,[],[]),this.feature=se,this.type=se.type,this.properties=se.tags?se.tags:{},"id"in se&&(typeof se.id=="string"?this.id=parseInt(se.id,10):typeof se.id!="number"||isNaN(se.id)||(this.id=se.id))}loadGeometry(){const se=[],Ae=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const be of Ae){const We=[];for(const et of be)We.push(new s.P(et[0],et[1]));se.push(We)}return se}}class Y extends s.cR{constructor(se,Ae){super(new s.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=Ae?Ae.version:1,this.extent=Ae?Ae.extent:4096,this.length=se.length,this.features=se}feature(se){return new Q(this.features[se],this.extent)}}function H(he,se){se.writeVarintField(15,he.version||1),se.writeStringField(1,he.name||""),se.writeVarintField(5,he.extent||4096);const Ae={keys:[],values:[],keycache:{},valuecache:{}};for(let et=0;et<he.length;et++)Ae.feature=he.feature(et),se.writeMessage(2,Z,Ae);const be=Ae.keys;for(const et of be)se.writeStringField(3,et);const We=Ae.values;for(const et of We)se.writeMessage(4,ue,et)}function Z(he,se){if(!he.feature)return;const Ae=he.feature;Ae.id!==void 0&&se.writeVarintField(1,Ae.id),se.writeMessage(2,J,he),se.writeVarintField(3,Ae.type),se.writeMessage(4,oe,Ae)}function J(he,se){for(const Ae in he.feature?.properties){let be=he.feature.properties[Ae],We=he.keycache[Ae];if(be===null)continue;We===void 0&&(he.keys.push(Ae),We=he.keys.length-1,he.keycache[Ae]=We),se.writeVarint(We),typeof be!="string"&&typeof be!="boolean"&&typeof be!="number"&&(be=JSON.stringify(be));const et=typeof be+":"+be;let Pe=he.valuecache[et];Pe===void 0&&(he.values.push(be),Pe=he.values.length-1,he.valuecache[et]=Pe),se.writeVarint(Pe)}}function $(he,se){return(se<<3)+(7&he)}function G(he){return he<<1^he>>31}function oe(he,se){const Ae=he.loadGeometry(),be=he.type;let We=0,et=0;for(const Pe of Ae){let Ze=1;be===1&&(Ze=Pe.length),se.writeVarint($(1,Ze));const y=be===3?Pe.length-1:Pe.length;for(let at=0;at<y;at++){at===1&&be!==1&&se.writeVarint($(2,y-1));const Pt=Pe[at].x-We,Mt=Pe[at].y-et;se.writeVarint(G(Pt)),se.writeVarint(G(Mt)),We+=Pt,et+=Mt}he.type===3&&se.writeVarint($(7,1))}}function ue(he,se){const Ae=typeof he;Ae==="string"?se.writeStringField(1,he):Ae==="boolean"?se.writeBooleanField(7,he):Ae==="number"&&(he%1!=0?se.writeDoubleField(3,he):he<0?se.writeSVarintField(6,he):se.writeVarintField(5,he))}const xe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},ge=Math.fround||(Ie=new Float32Array(1),he=>(Ie[0]=+he,Ie[0]));var Ie;class Me{constructor(se){this.options=Object.assign(Object.create(xe),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:Ae,minZoom:be,maxZoom:We}=this.options;Ae&&console.time("total time");const et=`prepare ${se.length} points`;Ae&&console.time(et),this.points=se;const Pe=[];for(let y=0;y<se.length;y++){const at=se[y];if(!at.geometry)continue;const[Pt,Mt]=at.geometry.coordinates,en=ge(Be(Pt)),dt=ge(Ye(Mt));Pe.push(en,dt,1/0,y,-1,1),this.options.reduce&&Pe.push(0)}let Ze=this.trees[We+1]=this._createTree(Pe);Ae&&console.timeEnd(et);for(let y=We;y>=be;y--){const at=+Date.now();Ze=this.trees[y]=this._createTree(this._cluster(Ze,y)),Ae&&console.log("z%d: %d clusters in %dms",y,Ze.numItems,+Date.now()-at)}return Ae&&console.timeEnd("total time"),this}getClusters(se,Ae){let be=((se[0]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,se[1]));let et=se[2]===180?180:((se[2]+180)%360+360)%360-180;const Pe=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)be=-180,et=180;else if(be>et){const Mt=this.getClusters([be,We,180,Pe],Ae),en=this.getClusters([-180,We,et,Pe],Ae);return Mt.concat(en)}const Ze=this.trees[this._limitZoom(Ae)],y=Ze.range(Be(be),Ye(Pe),Be(et),Ye(We)),at=Ze.data,Pt=[];for(const Mt of y){const en=this.stride*Mt;Pt.push(at[en+5]>1?ke(at,en,this.clusterProps):this.points[at[en+3]])}return Pt}getChildren(se){const Ae=this._getOriginId(se),be=this._getOriginZoom(se),We="No cluster with the specified id.",et=this.trees[be];if(!et)throw new Error(We);const Pe=et.data;if(Ae*this.stride>=Pe.length)throw new Error(We);const Ze=this.options.radius/(this.options.extent*Math.pow(2,be-1)),y=et.within(Pe[Ae*this.stride],Pe[Ae*this.stride+1],Ze),at=[];for(const Pt of y){const Mt=Pt*this.stride;Pe[Mt+4]===se&&at.push(Pe[Mt+5]>1?ke(Pe,Mt,this.clusterProps):this.points[Pe[Mt+3]])}if(at.length===0)throw new Error(We);return at}getLeaves(se,Ae,be){const We=[];return this._appendLeaves(We,se,Ae=Ae||10,be=be||0,0),We}getTile(se,Ae,be){const We=this.trees[this._limitZoom(se)],et=Math.pow(2,se),{extent:Pe,radius:Ze}=this.options,y=Ze/Pe,at=(be-y)/et,Pt=(be+1+y)/et,Mt={features:[]};return this._addTileFeatures(We.range((Ae-y)/et,at,(Ae+1+y)/et,Pt),We.data,Ae,be,et,Mt),Ae===0&&this._addTileFeatures(We.range(1-y/et,at,1,Pt),We.data,et,be,et,Mt),Ae===et-1&&this._addTileFeatures(We.range(0,at,y/et,Pt),We.data,-1,be,et,Mt),Mt.features.length?Mt:null}getClusterExpansionZoom(se){let Ae=this._getOriginZoom(se)-1;for(;Ae<=this.options.maxZoom;){const be=this.getChildren(se);if(Ae++,be.length!==1)break;se=be[0].properties.cluster_id}return Ae}_appendLeaves(se,Ae,be,We,et){const Pe=this.getChildren(Ae);for(const Ze of Pe){const y=Ze.properties;if(y&&y.cluster?et+y.point_count<=We?et+=y.point_count:et=this._appendLeaves(se,y.cluster_id,be,We,et):et<We?et++:se.push(Ze),se.length===be)break}return et}_createTree(se){const Ae=new s.aI(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let be=0;be<se.length;be+=this.stride)Ae.add(se[be],se[be+1]);return Ae.finish(),Ae.data=se,Ae}_addTileFeatures(se,Ae,be,We,et,Pe){for(const Ze of se){const y=Ze*this.stride,at=Ae[y+5]>1;let Pt,Mt,en;if(at)Pt=je(Ae,y,this.clusterProps),Mt=Ae[y],en=Ae[y+1];else{const gi=this.points[Ae[y+3]];Pt=gi.properties;const[Tn,zn]=gi.geometry.coordinates;Mt=Be(Tn),en=Ye(zn)}const dt={type:1,geometry:[[Math.round(this.options.extent*(Mt*et-be)),Math.round(this.options.extent*(en*et-We))]],tags:Pt};let Zn;Zn=at||this.options.generateId?Ae[y+3]:this.points[Ae[y+3]].id,Zn!==void 0&&(dt.id=Zn),Pe.features.push(dt)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,Ae){const{radius:be,extent:We,reduce:et,minPoints:Pe}=this.options,Ze=be/(We*Math.pow(2,Ae)),y=se.data,at=[],Pt=this.stride;for(let Mt=0;Mt<y.length;Mt+=Pt){if(y[Mt+2]<=Ae)continue;y[Mt+2]=Ae;const en=y[Mt],dt=y[Mt+1],Zn=se.within(y[Mt],y[Mt+1],Ze),gi=y[Mt+5];let Tn=gi;for(const zn of Zn){const si=zn*Pt;y[si+2]>Ae&&(Tn+=y[si+5])}if(Tn>gi&&Tn>=Pe){let zn,si=en*gi,ir=dt*gi,Di=-1;const gr=(Mt/Pt<<5)+(Ae+1)+this.points.length;for(const Oi of Zn){const Ri=Oi*Pt;if(y[Ri+2]<=Ae)continue;y[Ri+2]=Ae;const cr=y[Ri+5];si+=y[Ri]*cr,ir+=y[Ri+1]*cr,y[Ri+4]=gr,et&&(zn||(zn=this._map(y,Mt,!0),Di=this.clusterProps.length,this.clusterProps.push(zn)),et(zn,this._map(y,Ri)))}y[Mt+4]=gr,at.push(si/Tn,ir/Tn,1/0,gr,-1,Tn),et&&at.push(Di)}else{for(let zn=0;zn<Pt;zn++)at.push(y[Mt+zn]);if(Tn>1)for(const zn of Zn){const si=zn*Pt;if(!(y[si+2]<=Ae)){y[si+2]=Ae;for(let ir=0;ir<Pt;ir++)at.push(y[si+ir])}}}}return at}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,Ae,be){if(se[Ae+5]>1){const Pe=this.clusterProps[se[Ae+6]];return be?Object.assign({},Pe):Pe}const We=this.points[se[Ae+3]].properties,et=this.options.map(We);return be&&et===We?Object.assign({},et):et}}function ke(he,se,Ae){return{type:"Feature",id:he[se+3],properties:je(he,se,Ae),geometry:{type:"Point",coordinates:[(be=he[se],360*(be-.5)),At(he[se+1])]}};var be}function je(he,se,Ae){const be=he[se+5],We=be>=1e4?`${Math.round(be/1e3)}k`:be>=1e3?Math.round(be/100)/10+"k":be,et=he[se+6],Pe=et===-1?{}:Object.assign({},Ae[et]);return Object.assign(Pe,{cluster:!0,cluster_id:he[se+3],point_count:be,point_count_abbreviated:We})}function Be(he){return he/360+.5}function Ye(he){const se=Math.sin(he*Math.PI/180),Ae=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function At(he){const se=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function yt(he,se,Ae,be){let We=be;const et=se+(Ae-se>>1);let Pe,Ze=Ae-se;const y=he[se],at=he[se+1],Pt=he[Ae],Mt=he[Ae+1];for(let en=se+3;en<Ae;en+=3){const dt=Le(he[en],he[en+1],y,at,Pt,Mt);if(dt>We)Pe=en,We=dt;else if(dt===We){const Zn=Math.abs(en-et);Zn<Ze&&(Pe=en,Ze=Zn)}}We>be&&(Pe-se>3&&yt(he,se,Pe,be),he[Pe+2]=We,Ae-Pe>3&&yt(he,Pe,Ae,be))}function Le(he,se,Ae,be,We,et){let Pe=We-Ae,Ze=et-be;if(Pe!==0||Ze!==0){const y=((he-Ae)*Pe+(se-be)*Ze)/(Pe*Pe+Ze*Ze);y>1?(Ae=We,be=et):y>0&&(Ae+=Pe*y,be+=Ze*y)}return Pe=he-Ae,Ze=se-be,Pe*Pe+Ze*Ze}function De(he,se,Ae,be){const We={id:he??null,type:se,geometry:Ae,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Ge(We,Ae);else if(se==="Polygon")Ge(We,Ae[0]);else if(se==="MultiLineString")for(const et of Ae)Ge(We,et);else if(se==="MultiPolygon")for(const et of Ae)Ge(We,et[0]);return We}function Ge(he,se){for(let Ae=0;Ae<se.length;Ae+=3)he.minX=Math.min(he.minX,se[Ae]),he.minY=Math.min(he.minY,se[Ae+1]),he.maxX=Math.max(he.maxX,se[Ae]),he.maxY=Math.max(he.maxY,se[Ae+1])}function Te(he,se,Ae,be){if(!se.geometry)return;const We=se.geometry.coordinates;if(We&&We.length===0)return;const et=se.geometry.type,Pe=Math.pow(Ae.tolerance/((1<<Ae.maxZoom)*Ae.extent),2);let Ze=[],y=se.id;if(Ae.promoteId?y=se.properties[Ae.promoteId]:Ae.generateId&&(y=be||0),et==="Point")xt(We,Ze);else if(et==="MultiPoint")for(const at of We)xt(at,Ze);else if(et==="LineString")st(We,Ze,Pe,!1);else if(et==="MultiLineString"){if(Ae.lineMetrics){for(const at of We)Ze=[],st(at,Ze,Pe,!1),he.push(De(y,"LineString",Ze,se.properties));return}Tt(We,Ze,Pe,!1)}else if(et==="Polygon")Tt(We,Ze,Pe,!0);else{if(et!=="MultiPolygon"){if(et==="GeometryCollection"){for(const at of se.geometry.geometries)Te(he,{id:y,geometry:at,properties:se.properties},Ae,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const at of We){const Pt=[];Tt(at,Pt,Pe,!0),Ze.push(Pt)}}he.push(De(y,et,Ze,se.properties))}function xt(he,se){se.push(Lt(he[0]),Ue(he[1]),0)}function st(he,se,Ae,be){let We,et,Pe=0;for(let y=0;y<he.length;y++){const at=Lt(he[y][0]),Pt=Ue(he[y][1]);se.push(at,Pt,0),y>0&&(Pe+=be?(We*Pt-at*et)/2:Math.sqrt(Math.pow(at-We,2)+Math.pow(Pt-et,2))),We=at,et=Pt}const Ze=se.length-3;se[2]=1,yt(se,0,Ze,Ae),se[Ze+2]=1,se.size=Math.abs(Pe),se.start=0,se.end=se.size}function Tt(he,se,Ae,be){for(let We=0;We<he.length;We++){const et=[];st(he[We],et,Ae,be),se.push(et)}}function Lt(he){return he/360+.5}function Ue(he){const se=Math.sin(he*Math.PI/180),Ae=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function Oe(he,se,Ae,be,We,et,Pe,Ze){if(be/=se,et>=(Ae/=se)&&Pe<be)return he;if(Pe<Ae||et>=be)return null;const y=[];for(const at of he){const Pt=at.geometry;let Mt=at.type;const en=We===0?at.minX:at.minY,dt=We===0?at.maxX:at.maxY;if(en>=Ae&&dt<be){y.push(at);continue}if(dt<Ae||en>=be)continue;let Zn=[];if(Mt==="Point"||Mt==="MultiPoint")Ee(Pt,Zn,Ae,be,We);else if(Mt==="LineString")Ve(Pt,Zn,Ae,be,We,!1,Ze.lineMetrics);else if(Mt==="MultiLineString")pt(Pt,Zn,Ae,be,We,!1);else if(Mt==="Polygon")pt(Pt,Zn,Ae,be,We,!0);else if(Mt==="MultiPolygon")for(const gi of Pt){const Tn=[];pt(gi,Tn,Ae,be,We,!0),Tn.length&&Zn.push(Tn)}if(Zn.length){if(Ze.lineMetrics&&Mt==="LineString"){for(const gi of Zn)y.push(De(at.id,Mt,gi,at.tags));continue}Mt!=="LineString"&&Mt!=="MultiLineString"||(Zn.length===1?(Mt="LineString",Zn=Zn[0]):Mt="MultiLineString"),Mt!=="Point"&&Mt!=="MultiPoint"||(Mt=Zn.length===3?"Point":"MultiPoint"),y.push(De(at.id,Mt,Zn,at.tags))}}return y.length?y:null}function Ee(he,se,Ae,be,We){for(let et=0;et<he.length;et+=3){const Pe=he[et+We];Pe>=Ae&&Pe<=be&&Ct(se,he[et],he[et+1],he[et+2])}}function Ve(he,se,Ae,be,We,et,Pe){let Ze=mt(he);const y=We===0?Rt:Kt;let at,Pt,Mt=he.start;for(let Tn=0;Tn<he.length-3;Tn+=3){const zn=he[Tn],si=he[Tn+1],ir=he[Tn+2],Di=he[Tn+3],gr=he[Tn+4],Oi=We===0?zn:si,Ri=We===0?Di:gr;let cr=!1;Pe&&(at=Math.sqrt(Math.pow(zn-Di,2)+Math.pow(si-gr,2))),Oi<Ae?Ri>Ae&&(Pt=y(Ze,zn,si,Di,gr,Ae),Pe&&(Ze.start=Mt+at*Pt)):Oi>be?Ri<be&&(Pt=y(Ze,zn,si,Di,gr,be),Pe&&(Ze.start=Mt+at*Pt)):Ct(Ze,zn,si,ir),Ri<Ae&&Oi>=Ae&&(Pt=y(Ze,zn,si,Di,gr,Ae),cr=!0),Ri>be&&Oi<=be&&(Pt=y(Ze,zn,si,Di,gr,be),cr=!0),!et&&cr&&(Pe&&(Ze.end=Mt+at*Pt),se.push(Ze),Ze=mt(he)),Pe&&(Mt+=at)}let en=he.length-3;const dt=he[en],Zn=he[en+1],gi=We===0?dt:Zn;gi>=Ae&&gi<=be&&Ct(Ze,dt,Zn,he[en+2]),en=Ze.length-3,et&&en>=3&&(Ze[en]!==Ze[0]||Ze[en+1]!==Ze[1])&&Ct(Ze,Ze[0],Ze[1],Ze[2]),Ze.length&&se.push(Ze)}function mt(he){const se=[];return se.size=he.size,se.start=he.start,se.end=he.end,se}function pt(he,se,Ae,be,We,et){for(const Pe of he)Ve(Pe,se,Ae,be,We,et,!1)}function Ct(he,se,Ae,be){he.push(se,Ae,be)}function Rt(he,se,Ae,be,We,et){const Pe=(et-se)/(be-se);return Ct(he,et,Ae+(We-Ae)*Pe,1),Pe}function Kt(he,se,Ae,be,We,et){const Pe=(et-Ae)/(We-Ae);return Ct(he,se+(be-se)*Pe,et,1),Pe}function on(he,se){const Ae=[];for(let be=0;be<he.length;be++){const We=he[be],et=We.type;let Pe;if(et==="Point"||et==="MultiPoint"||et==="LineString")Pe=qn(We.geometry,se);else if(et==="MultiLineString"||et==="Polygon"){Pe=[];for(const Ze of We.geometry)Pe.push(qn(Ze,se))}else if(et==="MultiPolygon"){Pe=[];for(const Ze of We.geometry){const y=[];for(const at of Ze)y.push(qn(at,se));Pe.push(y)}}Ae.push(De(We.id,et,Pe,We.tags))}return Ae}function qn(he,se){const Ae=[];Ae.size=he.size,he.start!==void 0&&(Ae.start=he.start,Ae.end=he.end);for(let be=0;be<he.length;be+=3)Ae.push(he[be]+se,he[be+1],he[be+2]);return Ae}function Qn(he,se){if(he.transformed)return he;const Ae=1<<he.z,be=he.x,We=he.y;for(const et of he.features){const Pe=et.geometry,Ze=et.type;if(et.geometry=[],Ze===1)for(let y=0;y<Pe.length;y+=2)et.geometry.push(xi(Pe[y],Pe[y+1],se,Ae,be,We));else for(let y=0;y<Pe.length;y++){const at=[];for(let Pt=0;Pt<Pe[y].length;Pt+=2)at.push(xi(Pe[y][Pt],Pe[y][Pt+1],se,Ae,be,We));et.geometry.push(at)}}return he.transformed=!0,he}function xi(he,se,Ae,be,We,et){return[Math.round(Ae*(he*be-We)),Math.round(Ae*(se*be-et))]}function Kn(he,se,Ae,be,We){const et=se===We.maxZoom?0:We.tolerance/((1<<se)*We.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:he.length,source:null,x:Ae,y:be,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ze of he)Un(Pe,Ze,et,We);return Pe}function Un(he,se,Ae,be){const We=se.geometry,et=se.type,Pe=[];if(he.minX=Math.min(he.minX,se.minX),he.minY=Math.min(he.minY,se.minY),he.maxX=Math.max(he.maxX,se.maxX),he.maxY=Math.max(he.maxY,se.maxY),et==="Point"||et==="MultiPoint")for(let Ze=0;Ze<We.length;Ze+=3)Pe.push(We[Ze],We[Ze+1]),he.numPoints++,he.numSimplified++;else if(et==="LineString")Cn(Pe,We,he,Ae,!1,!1);else if(et==="MultiLineString"||et==="Polygon")for(let Ze=0;Ze<We.length;Ze++)Cn(Pe,We[Ze],he,Ae,et==="Polygon",Ze===0);else if(et==="MultiPolygon")for(let Ze=0;Ze<We.length;Ze++){const y=We[Ze];for(let at=0;at<y.length;at++)Cn(Pe,y[at],he,Ae,!0,at===0)}if(Pe.length){let Ze=se.tags||null;if(et==="LineString"&&be.lineMetrics){Ze={};for(const at in se.tags)Ze[at]=se.tags[at];Ze.mapbox_clip_start=We.start/We.size,Ze.mapbox_clip_end=We.end/We.size}const y={geometry:Pe,type:et==="Polygon"||et==="MultiPolygon"?3:et==="LineString"||et==="MultiLineString"?2:1,tags:Ze};se.id!==null&&(y.id=se.id),he.features.push(y)}}function Cn(he,se,Ae,be,We,et){const Pe=be*be;if(be>0&&se.size<(We?Pe:be))return void(Ae.numPoints+=se.length/3);const Ze=[];for(let y=0;y<se.length;y+=3)(be===0||se[y+2]>Pe)&&(Ae.numSimplified++,Ze.push(se[y],se[y+1])),Ae.numPoints++;We&&(function(y,at){let Pt=0;for(let Mt=0,en=y.length,dt=en-2;Mt<en;dt=Mt,Mt+=2)Pt+=(y[Mt]-y[dt])*(y[Mt+1]+y[dt+1]);if(Pt>0===at)for(let Mt=0,en=y.length;Mt<en/2;Mt+=2){const dt=y[Mt],Zn=y[Mt+1];y[Mt]=y[en-2-Mt],y[Mt+1]=y[en-1-Mt],y[en-2-Mt]=dt,y[en-1-Mt]=Zn}})(Ze,et),he.push(Ze)}const ei={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Dn{constructor(se,Ae){const be=(Ae=this.options=(function(et,Pe){for(const Ze in Pe)et[Ze]=Pe[Ze];return et})(Object.create(ei),Ae)).debug;if(be&&console.time("preprocess data"),Ae.maxZoom<0||Ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ae.promoteId&&Ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let We=(function(et,Pe){const Ze=[];if(et.type==="FeatureCollection")for(let y=0;y<et.features.length;y++)Te(Ze,et.features[y],Pe,y);else Te(Ze,et.type==="Feature"?et:{geometry:et},Pe);return Ze})(se,Ae);this.tiles={},this.tileCoords=[],be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ae.indexMaxZoom,Ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),We=(function(et,Pe){const Ze=Pe.buffer/Pe.extent;let y=et;const at=Oe(et,1,-1-Ze,Ze,0,-1,2,Pe),Pt=Oe(et,1,1-Ze,2+Ze,0,-1,2,Pe);return(at||Pt)&&(y=Oe(et,1,-Ze,1+Ze,0,-1,2,Pe)||[],at&&(y=on(at,1).concat(y)),Pt&&(y=y.concat(on(Pt,-1)))),y})(We,Ae),We.length&&this.splitTile(We,0,0,0),be&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,Ae,be,We,et,Pe,Ze){const y=[se,Ae,be,We],at=this.options,Pt=at.debug;for(;y.length;){We=y.pop(),be=y.pop(),Ae=y.pop(),se=y.pop();const Mt=1<<Ae,en=It(Ae,be,We);let dt=this.tiles[en];if(!dt&&(Pt>1&&console.time("creation"),dt=this.tiles[en]=Kn(se,Ae,be,We,at),this.tileCoords.push({z:Ae,x:be,y:We}),Pt)){Pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ae,be,We,dt.numFeatures,dt.numPoints,dt.numSimplified),console.timeEnd("creation"));const cr=`z${Ae}`;this.stats[cr]=(this.stats[cr]||0)+1,this.total++}if(dt.source=se,et==null){if(Ae===at.indexMaxZoom||dt.numPoints<=at.indexMaxPoints)continue}else{if(Ae===at.maxZoom||Ae===et)continue;if(et!=null){const cr=et-Ae;if(be!==Pe>>cr||We!==Ze>>cr)continue}}if(dt.source=null,se.length===0)continue;Pt>1&&console.time("clipping");const Zn=.5*at.buffer/at.extent,gi=.5-Zn,Tn=.5+Zn,zn=1+Zn;let si=null,ir=null,Di=null,gr=null,Oi=Oe(se,Mt,be-Zn,be+Tn,0,dt.minX,dt.maxX,at),Ri=Oe(se,Mt,be+gi,be+zn,0,dt.minX,dt.maxX,at);se=null,Oi&&(si=Oe(Oi,Mt,We-Zn,We+Tn,1,dt.minY,dt.maxY,at),ir=Oe(Oi,Mt,We+gi,We+zn,1,dt.minY,dt.maxY,at),Oi=null),Ri&&(Di=Oe(Ri,Mt,We-Zn,We+Tn,1,dt.minY,dt.maxY,at),gr=Oe(Ri,Mt,We+gi,We+zn,1,dt.minY,dt.maxY,at),Ri=null),Pt>1&&console.timeEnd("clipping"),y.push(si||[],Ae+1,2*be,2*We),y.push(ir||[],Ae+1,2*be,2*We+1),y.push(Di||[],Ae+1,2*be+1,2*We),y.push(gr||[],Ae+1,2*be+1,2*We+1)}}getTile(se,Ae,be){se=+se,Ae=+Ae,be=+be;const We=this.options,{extent:et,debug:Pe}=We;if(se<0||se>24)return null;const Ze=1<<se,y=It(se,Ae=Ae+Ze&Ze-1,be);if(this.tiles[y])return Qn(this.tiles[y],et);Pe>1&&console.log("drilling down to z%d-%d-%d",se,Ae,be);let at,Pt=se,Mt=Ae,en=be;for(;!at&&Pt>0;)Pt--,Mt>>=1,en>>=1,at=this.tiles[It(Pt,Mt,en)];return at&&at.source?(Pe>1&&(console.log("found parent tile z%d-%d-%d",Pt,Mt,en),console.time("drilling down")),this.splitTile(at.source,Pt,Mt,en,se,Ae,be),Pe>1&&console.timeEnd("drilling down"),this.tiles[y]?Qn(this.tiles[y],et):null):null}}function It(he,se,Ae){return 32*((1<<he)*Ae+se)+he}class Ce extends v{constructor(se,Ae,be,We=re){super(se,Ae,be),this._dataUpdateable=new Map,this._createGeoJSONIndex=We}loadVectorTile(se,Ae){return s._(this,void 0,void 0,(function*(){const be=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const We=this._geoJSONIndex.getTile(be.z,be.x,be.y);if(!We)return null;const et=new Y(We.features,{version:2,extent:s.$});let Pe=(function(Ze){const y=new s.cM;return(function(at,Pt){for(const Mt in at.layers)Pt.writeMessage(3,H,at.layers[Mt])})(Ze,y),y.finish()})(et);return Pe.byteOffset===0&&Pe.byteLength===Pe.buffer.byteLength||(Pe=new Uint8Array(Pe)),{vectorTile:et,rawData:Pe.buffer}}))}loadData(se){return s._(this,void 0,void 0,(function*(){var Ae;(Ae=this._pendingRequest)===null||Ae===void 0||Ae.abort();const be=!!(se&&se.request&&se.request.collectResourceTiming)&&new s.cN(se.request);this._pendingRequest=new AbortController;try{(!this._pendingData||se.request||se.data||se.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest));const We=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(We,se),this.loaded={};const et={data:We};if(be){const Pe=be.finish();Pe&&(et.resourceTiming={},et.resourceTiming[se.source]=JSON.parse(JSON.stringify(Pe)))}return et}catch(We){if(delete this._pendingRequest,s.cy(We))return{abandoned:!0};throw We}}))}getData(){return s._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(se){const Ae=this.loaded;return Ae&&Ae[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,Ae){return s._(this,void 0,void 0,(function*(){let be=yield this.loadGeoJSON(se,Ae);if(delete this._pendingRequest,typeof be!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(z(be,!0),se.filter){const We=s.cT(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(We.result==="error")throw new Error(We.value.map((Pe=>`${Pe.key}: ${Pe.message}`)).join(", "));be={type:"FeatureCollection",features:be.features.filter((Pe=>We.value.evaluate({zoom:0},Pe)))}}return be}))}loadGeoJSON(se,Ae){return s._(this,void 0,void 0,(function*(){const{promoteId:be}=se;if(se.request){const We=yield s.j(se.request,Ae);return this._dataUpdateable=s.cV(We.data,be)?s.cU(We.data,be):void 0,We.data}if(typeof se.data=="string")try{const We=JSON.parse(se.data);return this._dataUpdateable=s.cV(We,be)?s.cU(We,be):void 0,We}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return s.cW(this._dataUpdateable,se.dataDiff,be),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(se){return s._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}function re(he,se){return se.cluster?new Me((function({superclusterOptions:Ae,clusterProperties:be}){if(!be||!Ae)return Ae;const We={},et={},Pe={accumulated:null,zoom:0},Ze={properties:null},y=Object.keys(be);for(const at of y){const[Pt,Mt]=be[at],en=s.cT(Mt),dt=s.cT(typeof Pt=="string"?[Pt,["accumulated"],["get",at]]:Pt);We[at]=en.value,et[at]=dt.value}return Ae.map=at=>{Ze.properties=at;const Pt={};for(const Mt of y)Pt[Mt]=We[Mt].evaluate(Pe,Ze);return Pt},Ae.reduce=(at,Pt)=>{Ze.properties=Pt;for(const Mt of y)Pe.accumulated=at[Mt],at[Mt]=et[Mt].evaluate(Pe,Ze)},Ae})(se)).load(he.features):(function(Ae,be){return new Dn(Ae,be)})(he,se.geojsonVtOptions)}class le{constructor(se){this.self=se,this.actor=new s.J(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(Ae,be)=>{if(this.externalWorkerSourceTypes[Ae])throw new Error(`Worker source with name "${Ae}" already registered.`);this.externalWorkerSourceTypes[Ae]=be},this.self.addProtocol=s.cA,this.self.removeProtocol=s.cB,this.self.registerRTLTextPlugin=Ae=>{s.cX.setMethods(Ae)},this.actor.registerMessageHandler("LDT",((Ae,be)=>this._getDEMWorkerSource(Ae,be.source).loadTile(be))),this.actor.registerMessageHandler("RDT",((Ae,be)=>s._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(Ae,be.source).removeTile(be)})))),this.actor.registerMessageHandler("GCEZ",((Ae,be)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(Ae,be.type,be.source).getClusterExpansionZoom(be)})))),this.actor.registerMessageHandler("GCC",((Ae,be)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(Ae,be.type,be.source).getClusterChildren(be)})))),this.actor.registerMessageHandler("GCL",((Ae,be)=>s._(this,void 0,void 0,(function*(){return this._getWorkerSource(Ae,be.type,be.source).getClusterLeaves(be)})))),this.actor.registerMessageHandler("LD",((Ae,be)=>this._getWorkerSource(Ae,be.type,be.source).loadData(be))),this.actor.registerMessageHandler("GD",((Ae,be)=>this._getWorkerSource(Ae,be.type,be.source).getData())),this.actor.registerMessageHandler("LT",((Ae,be)=>this._getWorkerSource(Ae,be.type,be.source).loadTile(be))),this.actor.registerMessageHandler("RT",((Ae,be)=>this._getWorkerSource(Ae,be.type,be.source).reloadTile(be))),this.actor.registerMessageHandler("AT",((Ae,be)=>this._getWorkerSource(Ae,be.type,be.source).abortTile(be))),this.actor.registerMessageHandler("RMT",((Ae,be)=>this._getWorkerSource(Ae,be.type,be.source).removeTile(be))),this.actor.registerMessageHandler("RS",((Ae,be)=>s._(this,void 0,void 0,(function*(){if(!this.workerSources[Ae]||!this.workerSources[Ae][be.type]||!this.workerSources[Ae][be.type][be.source])return;const We=this.workerSources[Ae][be.type][be.source];delete this.workerSources[Ae][be.type][be.source],We.removeSource!==void 0&&We.removeSource(be)})))),this.actor.registerMessageHandler("RM",(Ae=>s._(this,void 0,void 0,(function*(){delete this.layerIndexes[Ae],delete this.availableImages[Ae],delete this.workerSources[Ae],delete this.demWorkerSources[Ae],this.globalStates.delete(Ae)})))),this.actor.registerMessageHandler("SR",((Ae,be)=>s._(this,void 0,void 0,(function*(){this.referrer=be})))),this.actor.registerMessageHandler("SRPS",((Ae,be)=>this._syncRTLPluginState(Ae,be))),this.actor.registerMessageHandler("IS",((Ae,be)=>s._(this,void 0,void 0,(function*(){this.self.importScripts(be)})))),this.actor.registerMessageHandler("SI",((Ae,be)=>this._setImages(Ae,be))),this.actor.registerMessageHandler("UL",((Ae,be)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(Ae).update(be.layers,be.removedIds,this._getGlobalState(Ae))})))),this.actor.registerMessageHandler("UGS",((Ae,be)=>s._(this,void 0,void 0,(function*(){const We=this._getGlobalState(Ae);for(const et in be)We[et]=be[et]})))),this.actor.registerMessageHandler("SL",((Ae,be)=>s._(this,void 0,void 0,(function*(){this._getLayerIndex(Ae).replace(be,this._getGlobalState(Ae))}))))}_getGlobalState(se){let Ae=this.globalStates.get(se);return Ae||(Ae={},this.globalStates.set(se,Ae)),Ae}_setImages(se,Ae){return s._(this,void 0,void 0,(function*(){this.availableImages[se]=Ae;for(const be in this.workerSources[se]){const We=this.workerSources[se][be];for(const et in We)We[et].availableImages=Ae}}))}_syncRTLPluginState(se,Ae){return s._(this,void 0,void 0,(function*(){return yield s.cX.syncState(Ae,this.self.importScripts)}))}_getAvailableImages(se){let Ae=this.availableImages[se];return Ae||(Ae=[]),Ae}_getLayerIndex(se){let Ae=this.layerIndexes[se];return Ae||(Ae=this.layerIndexes[se]=new a),Ae}_getWorkerSource(se,Ae,be){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][Ae]||(this.workerSources[se][Ae]={}),!this.workerSources[se][Ae][be]){const We={sendAsync:(et,Pe)=>(et.targetMapId=se,this.actor.sendAsync(et,Pe))};switch(Ae){case"vector":this.workerSources[se][Ae][be]=new v(We,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][Ae][be]=new Ce(We,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][Ae][be]=new this.externalWorkerSourceTypes[Ae](We,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][Ae][be]}_getDEMWorkerSource(se,Ae){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][Ae]||(this.demWorkerSources[se][Ae]=new x),this.demWorkerSources[se][Ae]}}return s.i(self)&&(self.worker=new le(self)),le})),r("index",["exports","./shared"],(function(s,a){var c="5.10.0";function h(){var B=new a.A(4);return a.A!=Float32Array&&(B[1]=0,B[2]=0),B[0]=1,B[3]=1,B}let m,v;const x={frame(B,l,p){const C=requestAnimationFrame((k=>{S(),l(k)})),{unsubscribe:S}=a.s(B.signal,"abort",(()=>{S(),cancelAnimationFrame(C),p(a.c())}),!1)},frameAsync(B){return new Promise(((l,p)=>{this.frame(B,l,p)}))},getImageData(B,l=0){return this.getImageCanvasContext(B).getImageData(-l,-l,B.width+2*l,B.height+2*l)},getImageCanvasContext(B){const l=window.document.createElement("canvas"),p=l.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return l.width=B.width,l.height=B.height,p.drawImage(B,0,0,B.width,B.height),p},resolveURL:B=>(m||(m=document.createElement("a")),m.href=B,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}},E=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(B){this._frozenAt=B}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function R(){return E.getCurrentTime()}class P{static testProp(l){if(!P.docStyle)return l[0];for(let p=0;p<l.length;p++)if(l[p]in P.docStyle)return l[p];return l[0]}static create(l,p,C){const S=window.document.createElement(l);return p!==void 0&&(S.className=p),C&&C.appendChild(S),S}static createNS(l,p){return window.document.createElementNS(l,p)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(l,p){l.style[P.transformProp]=p}static addEventListener(l,p,C,S={}){l.addEventListener(p,C,"passive"in S?S:S.capture)}static removeEventListener(l,p,C,S={}){l.removeEventListener(p,C,"passive"in S?S:S.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",P.suppressClickInternal,!0)}),0)}static getScale(l){const p=l.getBoundingClientRect();return{x:p.width/l.offsetWidth||1,y:p.height/l.offsetHeight||1,boundingClientRect:p}}static getPoint(l,p,C){const S=p.boundingClientRect;return new a.P((C.clientX-S.left)/p.x-l.clientLeft,(C.clientY-S.top)/p.y-l.clientTop)}static mousePos(l,p){const C=P.getScale(l);return P.getPoint(l,C,p)}static touchPos(l,p){const C=[],S=P.getScale(l);for(let k=0;k<p.length;k++)C.push(P.getPoint(l,S,p[k]));return C}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const p=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),C=p.querySelectorAll("script");for(const S of C)S.remove();return P.clean(p),p.innerHTML}static isPossiblyDangerous(l,p){const C=p.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!C.includes("javascript:")&&!C.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const p=l.children;for(const C of p)P.removeAttributes(C),P.clean(C)}static removeAttributes(l){for(const{name:p,value:C}of l.attributes)P.isPossiblyDangerous(p,C)&&l.removeAttribute(p)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const z={supported:!1,testSupport:function(B){!H&&Y&&(Z?J(B):Q=B)}};let Q,Y,H=!1,Z=!1;function J(B){const l=B.createTexture();B.bindTexture(B.TEXTURE_2D,l);try{if(B.texImage2D(B.TEXTURE_2D,0,B.RGBA,B.RGBA,B.UNSIGNED_BYTE,Y),B.isContextLost())return;z.supported=!0}catch{}B.deleteTexture(l),H=!0}var $;typeof document<"u"&&(Y=document.createElement("img"),Y.onload=()=>{Q&&J(Q),Q=null,Z=!0},Y.onerror=()=>{H=!0,Q=null},Y.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(B){let l,p,C,S;B.resetRequestQueue=()=>{l=[],p=0,C=0,S={}},B.addThrottleControl=q=>{const ie=C++;return S[ie]=q,ie},B.removeThrottleControl=q=>{delete S[q],K()},B.getImage=(q,ie,ae=!0)=>new Promise(((ye,pe)=>{z.supported&&(q.headers||(q.headers={}),q.headers.accept="image/webp,*/*"),a.e(q,{type:"image"}),l.push({abortController:ie,requestParameters:q,supportImageRefresh:ae,state:"queued",onError:Se=>{pe(Se)},onSuccess:Se=>{ye(Se)}}),K()}));const k=q=>a._(this,void 0,void 0,(function*(){q.state="running";const{requestParameters:ie,supportImageRefresh:ae,onError:ye,onSuccess:pe,abortController:Se}=q,Fe=ae===!1&&!a.i(self)&&!a.g(ie.url)&&(!ie.headers||Object.keys(ie.headers).reduce(((tt,it)=>tt&&it==="accept"),!0));p++;const Xe=Fe?N(ie,Se):a.m(ie,Se);try{const tt=yield Xe;delete q.abortController,q.state="completed",tt.data instanceof HTMLImageElement||a.b(tt.data)?pe(tt):tt.data&&pe({data:yield($e=tt.data,typeof createImageBitmap=="function"?a.f($e):a.h($e)),cacheControl:tt.cacheControl,expires:tt.expires})}catch(tt){delete q.abortController,ye(tt)}finally{p--,K()}var $e})),K=()=>{const q=(()=>{for(const ie of Object.keys(S))if(S[ie]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ie=p;ie<q&&l.length>0;ie++){const ae=l.shift();ae.abortController.signal.aborted?ie--:k(ae)}},N=(q,ie)=>new Promise(((ae,ye)=>{const pe=new Image,Se=q.url,Fe=q.credentials;Fe&&Fe==="include"?pe.crossOrigin="use-credentials":(Fe&&Fe==="same-origin"||!a.d(Se))&&(pe.crossOrigin="anonymous"),ie.signal.addEventListener("abort",(()=>{pe.src="",ye(a.c())})),pe.fetchPriority="high",pe.onload=()=>{pe.onerror=pe.onload=null,ae({data:pe})},pe.onerror=()=>{pe.onerror=pe.onload=null,ie.signal.aborted||ye(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},pe.src=Se}))})($||($={})),$.resetRequestQueue();class G{constructor(l){this._transformRequestFn=l??null}transformRequest(l,p){return this._transformRequestFn&&this._transformRequestFn(l,p)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function oe(B){const l=[];if(typeof B=="string")l.push({id:"default",url:B});else if(B&&B.length>0){const p=[];for(const{id:C,url:S}of B){const k=`${C}${S}`;p.indexOf(k)===-1&&(p.push(k),l.push({id:C,url:S}))}}return l}function ue(B,l,p){try{const C=new URL(B);return C.pathname+=`${l}${p}`,C.toString()}catch{throw new Error(`Invalid sprite URL "${B}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function xe(B){const{userImage:l}=B;return!!(l&&l.render&&l.render())&&(B.data.replace(new Uint8Array(l.data.buffer)),!0)}class ge extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:p,promiseResolve:C}of this.requestors)C(this._getImagesForIds(p));this.requestors=[]}}getImage(l){const p=this.images[l];if(p&&!p.data&&p.spriteData){const C=p.spriteData;p.data=new a.R({width:C.width,height:C.height},C.context.getImageData(C.x,C.y,C.width,C.height).data),p.spriteData=null}return p}addImage(l,p){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,p)&&(this.images[l]=p)}_validate(l,p){let C=!0;const S=p.data||p.spriteData;return this._validateStretch(p.stretchX,S&&S.width)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchX" value`))),C=!1),this._validateStretch(p.stretchY,S&&S.height)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchY" value`))),C=!1),this._validateContent(p.content,p)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "content" value`))),C=!1),C}_validateStretch(l,p){if(!l)return!0;let C=0;for(const S of l){if(S[0]<C||S[1]<S[0]||p<S[1])return!1;C=S[1]}return!0}_validateContent(l,p){if(!l)return!0;if(l.length!==4)return!1;const C=p.spriteData,S=C&&C.width||p.data.width,k=C&&C.height||p.data.height;return!(l[0]<0||S<l[0]||l[1]<0||k<l[1]||l[2]<0||S<l[2]||l[3]<0||k<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,p,C=!0){const S=this.getImage(l);if(C&&(S.data.width!==p.data.width||S.data.height!==p.data.height))throw new Error(`size mismatch between old image (${S.data.width}x${S.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=S.version+1,this.images[l]=p,this.updatedImages[l]=!0}removeImage(l){const p=this.images[l];delete this.images[l],delete this.patterns[l],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise(((p,C)=>{let S=!0;if(!this.isLoaded())for(const k of l)this.images[k]||(S=!1);this.isLoaded()||S?p(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:p})}))}_getImagesForIds(l){const p={};for(const C of l){let S=this.getImage(C);S||(this.fire(new a.l("styleimagemissing",{id:C})),S=this.getImage(C)),S?p[C]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,textFitWidth:S.textFitWidth,textFitHeight:S.textFitHeight,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:a.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:l,height:p}=this.atlasImage;return{width:l,height:p}}getPattern(l){const p=this.patterns[l],C=this.getImage(l);if(!C)return null;if(p&&p.position.version===C.version)return p.position;if(p)p.position.version=C.version;else{const S={w:C.data.width+2,h:C.data.height+2,x:0,y:0},k=new a.I(S,C);this.patterns[l]={bin:S,position:k}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const p=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(l,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const k in this.patterns)l.push(this.patterns[k].bin);const{w:p,h:C}=a.p(l),S=this.atlasImage;S.resize({width:p||1,height:C||1});for(const k in this.patterns){const{bin:K}=this.patterns[k],N=K.x+1,q=K.y+1,ie=this.getImage(k).data,ae=ie.width,ye=ie.height;a.R.copy(ie,S,{x:0,y:0},{x:N,y:q},{width:ae,height:ye}),a.R.copy(ie,S,{x:0,y:ye-1},{x:N,y:q-1},{width:ae,height:1}),a.R.copy(ie,S,{x:0,y:0},{x:N,y:q+ye},{width:ae,height:1}),a.R.copy(ie,S,{x:ae-1,y:0},{x:N-1,y:q},{width:1,height:ye}),a.R.copy(ie,S,{x:0,y:0},{x:N+ae,y:q},{width:1,height:ye})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const p of l){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const C=this.getImage(p);C||a.w(`Image with ID: "${p}" was not found`),xe(C)&&this.updateImage(p,C)}}}const Ie=1e20;function Me(B,l,p,C,S,k,K,N,q){for(let ie=l;ie<l+C;ie++)ke(B,p*k+ie,k,S,K,N,q);for(let ie=p;ie<p+S;ie++)ke(B,ie*k+l,1,C,K,N,q)}function ke(B,l,p,C,S,k,K){k[0]=0,K[0]=-Ie,K[1]=Ie,S[0]=B[l];for(let N=1,q=0,ie=0;N<C;N++){S[N]=B[l+N*p];const ae=N*N;do{const ye=k[q];ie=(S[N]-S[ye]+ae-ye*ye)/(N-ye)/2}while(ie<=K[q]&&--q>-1);q++,k[q]=N,K[q]=ie,K[q+1]=Ie}for(let N=0,q=0;N<C;N++){for(;K[q+1]<N;)q++;const ie=k[q],ae=N-ie;B[l+N*p]=S[ie]+ae*ae}}class je{constructor(l,p,C){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={},this.lang=C}setURL(l){this.url=l}getGlyphs(l){return a._(this,void 0,void 0,(function*(){const p=[];for(const k in l)for(const K of l[k])p.push(this._getAndCacheGlyphsPromise(k,K));const C=yield Promise.all(p),S={};for(const{stack:k,id:K,glyph:N}of C)S[k]||(S[k]={}),S[k][K]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics};return S}))}_getAndCacheGlyphsPromise(l,p){return a._(this,void 0,void 0,(function*(){let C=this.entries[l];C||(C=this.entries[l]={glyphs:{},requests:{},ranges:{}});let S=C.glyphs[p];if(S!==void 0)return{stack:l,id:p,glyph:S};if(S=this._tinySDF(C,l,p),S)return C.glyphs[p]=S,{stack:l,id:p,glyph:S};const k=Math.floor(p/256);if(256*k>65535)throw new Error("glyphs > 65535 not supported");if(C.ranges[k])return{stack:l,id:p,glyph:S};if(!this.url)throw new Error("glyphsUrl is not set");if(!C.requests[k]){const N=je.loadGlyphRange(l,k,this.url,this.requestManager);C.requests[k]=N}const K=yield C.requests[k];for(const N in K)this._doesCharSupportLocalGlyph(+N)||(C.glyphs[+N]=K[+N]);return C.ranges[k]=!0,{stack:l,id:p,glyph:K[p]||null}}))}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))||a.u["CJK Unified Ideographs"](l)||a.u["Hangul Syllables"](l)||a.u.Hiragana(l)||a.u.Katakana(l)||a.u["CJK Symbols and Punctuation"](l)||a.u["Halfwidth and Fullwidth Forms"](l))}_tinySDF(l,p,C){const S=this.localIdeographFontFamily;if(!S||!this._doesCharSupportLocalGlyph(C))return;let k=l.tinySDF;if(!k){let N="400";/bold/i.test(p)?N="900":/medium/i.test(p)?N="500":/light/i.test(p)&&(N="200"),k=l.tinySDF=new je.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:S,fontWeight:N})}const K=k.draw(String.fromCharCode(C));return{id:C,bitmap:new a.q({width:K.width||60,height:K.height||60},K.data),metrics:{width:K.glyphWidth/2||24,height:K.glyphHeight/2||24,left:K.glyphLeft/2+.5||0,top:K.glyphTop/2-27.5||-8,advance:K.glyphAdvance/2||24,isDoubleResolution:!0}}}}je.loadGlyphRange=function(B,l,p,C){return a._(this,void 0,void 0,(function*(){const S=256*l,k=S+255,K=C.transformRequest(p.replace("{fontstack}",B).replace("{range}",`${S}-${k}`),"Glyphs"),N=yield a.n(K,new AbortController);if(!N||!N.data)throw new Error(`Could not load glyph range. range: ${l}, ${S}-${k}`);const q={};for(const ie of a.o(N.data))q[ie.id]=ie;return q}))},je.TinySDF=class{constructor({fontSize:B=24,buffer:l=3,radius:p=8,cutoff:C=.25,fontFamily:S="sans-serif",fontWeight:k="normal",fontStyle:K="normal",lang:N=null}={}){this.buffer=l,this.cutoff=C,this.radius=p,this.lang=N;const q=this.size=B+4*l,ie=this._createCanvas(q),ae=this.ctx=ie.getContext("2d",{willReadFrequently:!0});ae.font=`${K} ${k} ${B}px ${S}`,ae.textBaseline="alphabetic",ae.textAlign="left",ae.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Uint16Array(q)}_createCanvas(B){const l=document.createElement("canvas");return l.width=l.height=B,l}draw(B){const{width:l,actualBoundingBoxAscent:p,actualBoundingBoxDescent:C,actualBoundingBoxLeft:S,actualBoundingBoxRight:k}=this.ctx.measureText(B),K=Math.ceil(p),N=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(k-S))),q=Math.min(this.size-this.buffer,K+Math.ceil(C)),ie=N+2*this.buffer,ae=q+2*this.buffer,ye=Math.max(ie*ae,0),pe=new Uint8ClampedArray(ye),Se={data:pe,width:ie,height:ae,glyphWidth:N,glyphHeight:q,glyphTop:K,glyphLeft:0,glyphAdvance:l};if(N===0||q===0)return Se;const{ctx:Fe,buffer:Xe,gridInner:$e,gridOuter:tt}=this;this.lang&&(Fe.lang=this.lang),Fe.clearRect(Xe,Xe,N,q),Fe.fillText(B,Xe,Xe+K);const it=Fe.getImageData(Xe,Xe,N,q);tt.fill(Ie,0,ye),$e.fill(0,0,ye);for(let ct=0;ct<q;ct++)for(let rt=0;rt<N;rt++){const ht=it.data[4*(ct*N+rt)+3]/255;if(ht===0)continue;const ft=(ct+Xe)*ie+rt+Xe;if(ht===1)tt[ft]=0,$e[ft]=Ie;else{const ot=.5-ht;tt[ft]=ot>0?ot*ot:0,$e[ft]=ot<0?ot*ot:0}}Me(tt,0,0,ie,ae,ie,this.f,this.v,this.z),Me($e,Xe,Xe,N,q,ie,this.f,this.v,this.z);for(let ct=0;ct<ye;ct++){const rt=Math.sqrt(tt[ct])-Math.sqrt($e[ct]);pe[ct]=Math.round(255-255*(rt/this.radius+this.cutoff))}return Se}};class Be{constructor(){this.specification=a.v.light.position}possiblyEvaluate(l,p){return a.B(l.expression.evaluate(p))}interpolate(l,p,C){return{x:a.C.number(l.x,p.x,C),y:a.C.number(l.y,p.y,C),z:a.C.number(l.z,p.z,C)}}}let Ye;class At extends a.E{constructor(l){super(),Ye=Ye||new a.r({anchor:new a.D(a.v.light.anchor),position:new Be,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(Ye,void 0),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,p={}){if(!this._validate(a.x,l,p))for(const C in l){const S=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),S):this._transitionable.setValue(C,S)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C){return(!C||C.validate!==!1)&&a.y(this,l.call(a.z,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const yt=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Le extends a.E{constructor(l){super(),this._transitionable=new a.t(yt,void 0),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(l,p={}){if(!this._validate(a.G,l,p)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const C in l){const S=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),S):this._transitionable.setValue(C,S)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,p,C={}){return C?.validate!==!1&&a.y(this,l.call(a.z,a.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class De{constructor(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,p){const C=l.join(",")+String(p);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(l,p)),this.dashEntry[C]}getDashRanges(l,p,C){const S=[];let k=l.length%2==1?-l[l.length-1]*C:0,K=l[0]*C,N=!0;S.push({left:k,right:K,isDash:N,zeroLength:l[0]===0});let q=l[0];for(let ie=1;ie<l.length;ie++){N=!N;const ae=l[ie];k=q*C,q+=ae,K=q*C,S.push({left:k,right:K,isDash:N,zeroLength:ae===0})}return S}addRoundDash(l,p,C){const S=p/2;for(let k=-C;k<=C;k++){const K=this.width*(this.nextRow+C+k);let N=0,q=l[N];for(let ie=0;ie<this.width;ie++){ie/q.right>1&&(q=l[++N]);const ae=Math.abs(ie-q.left),ye=Math.abs(ie-q.right),pe=Math.min(ae,ye);let Se;const Fe=k/C*(S+1);if(q.isDash){const Xe=S-Math.abs(Fe);Se=Math.sqrt(pe*pe+Xe*Xe)}else Se=S-Math.sqrt(pe*pe+Fe*Fe);this.data[K+ie]=Math.max(0,Math.min(255,Se+128))}}}addRegularDash(l){for(let N=l.length-1;N>=0;--N){const q=l[N],ie=l[N+1];q.zeroLength?l.splice(N,1):ie&&ie.isDash===q.isDash&&(ie.left=q.left,l.splice(N,1))}const p=l[0],C=l[l.length-1];p.isDash===C.isDash&&(p.left=C.left-this.width,C.right=p.right+this.width);const S=this.width*this.nextRow;let k=0,K=l[k];for(let N=0;N<this.width;N++){N/K.right>1&&(K=l[++k]);const q=Math.abs(N-K.left),ie=Math.abs(N-K.right),ae=Math.min(q,ie);this.data[S+N]=Math.max(0,Math.min(255,(K.isDash?ae:-ae)+128))}}addDash(l,p){const C=p?7:0,S=2*C+1;if(this.nextRow+S>this.height)return a.w("LineAtlas out of space"),null;let k=0;for(let N=0;N<l.length;N++)k+=l[N];if(k!==0){const N=this.width/k,q=this.getDashRanges(l,this.width,N);p?this.addRoundDash(q,N,C):this.addRegularDash(q)}const K={y:this.nextRow+C,height:2*C,width:k};return this.nextRow+=S,this.dirty=!0,K}bind(l){const p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const Ge="maplibre_preloaded_worker_pool";class Te{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Te.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach((p=>{p.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ge]}numActive(){return Object.keys(this.active).length}}const xt=Math.floor(x.hardwareConcurrency/2);let st,Tt;function Lt(){return st||(st=new Te),st}Te.workerCount=a.H(globalThis)?Math.max(Math.min(xt,3),1):1;class Ue{constructor(l,p){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=p;const C=this.workerPool.acquire(p);for(let S=0;S<C.length;S++){const k=new a.J(C[S],p);k.name=`Worker ${S}`,this.actors.push(k)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,p){const C=[];for(const S of this.actors)C.push(S.sendAsync({type:l,data:p}));return Promise.all(C)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach((p=>{p.remove()})),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,p){for(const C of this.actors)C.registerMessageHandler(l,p)}}function Oe(){return Tt||(Tt=new Ue(Lt(),a.K),Tt.registerMessageHandler("GR",((B,l,p)=>a.m(l,p)))),Tt}function Ee(B,l){const p=a.L();return a.M(p,p,[1,1,0]),a.N(p,p,[.5*B.width,.5*B.height,1]),B.calculatePosMatrix?a.O(p,p,B.calculatePosMatrix(l.toUnwrapped())):p}function Ve(B,l,p,C,S,k,K){var N;const q=(function(pe,Se,Fe){if(pe)for(const Xe of pe){const $e=Se[Xe];if($e&&$e.source===Fe&&$e.type==="fill-extrusion")return!0}else for(const Xe in Se){const $e=Se[Xe];if($e.source===Fe&&$e.type==="fill-extrusion")return!0}return!1})((N=S?.layers)!==null&&N!==void 0?N:null,l,B.id),ie=k.maxPitchScaleFactor(),ae=B.tilesIn(C,ie,q);ae.sort(mt);const ye=[];for(const pe of ae)ye.push({wrappedTileID:pe.tileID.wrapped().key,queryResults:pe.tile.queryRenderedFeatures(l,p,B._state,pe.queryGeometry,pe.cameraQueryGeometry,pe.scale,S,k,ie,Ee(B.transform,pe.tileID),K?(Se,Fe)=>K(pe.tileID,Se,Fe):void 0)});return(function(pe,Se){for(const Fe in pe)for(const Xe of pe[Fe])pt(Xe,Se);return pe})((function(pe){const Se={},Fe={};for(const Xe of pe){const $e=Xe.queryResults,tt=Xe.wrappedTileID,it=Fe[tt]=Fe[tt]||{};for(const ct in $e){const rt=$e[ct],ht=it[ct]=it[ct]||{},ft=Se[ct]=Se[ct]||[];for(const ot of rt)ht[ot.featureIndex]||(ht[ot.featureIndex]=!0,ft.push(ot))}}return Se})(ye),B)}function mt(B,l){const p=B.tileID,C=l.tileID;return p.overscaledZ-C.overscaledZ||p.canonical.y-C.canonical.y||p.wrap-C.wrap||p.canonical.x-C.canonical.x}function pt(B,l){const p=B.feature,C=l.getFeatureState(p.layer["source-layer"],p.id);p.source=p.layer.source,p.layer["source-layer"]&&(p.sourceLayer=p.layer["source-layer"]),p.state=C}function Ct(B,l,p){return a._(this,void 0,void 0,(function*(){let C=B;if(B.url?C=(yield a.j(l.transformRequest(B.url,"Source"),p)).data:yield x.frameAsync(p),!C)return null;const S=a.Q(a.e(C,B),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in C&&C.vector_layers&&(S.vectorLayerIds=C.vector_layers.map((k=>k.id))),S}))}class Rt{constructor(l,p){l&&(p?this.setSouthWest(l).setNorthEast(p):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.S?new a.S(l.lng,l.lat):a.S.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.S?new a.S(l.lng,l.lat):a.S.convert(l),this}extend(l){const p=this._sw,C=this._ne;let S,k;if(l instanceof a.S)S=l,k=l;else{if(!(l instanceof Rt))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Rt.convert(l)):this.extend(a.S.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.S.convert(l)):this;if(S=l._sw,k=l._ne,!S||!k)return this}return p||C?(p.lng=Math.min(S.lng,p.lng),p.lat=Math.min(S.lat,p.lat),C.lng=Math.max(k.lng,C.lng),C.lat=Math.max(k.lat,C.lat)):(this._sw=new a.S(S.lng,S.lat),this._ne=new a.S(k.lng,k.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:p,lat:C}=a.S.convert(l);let S=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=C&&C<=this._ne.lat&&S}static convert(l){return l instanceof Rt?l:l&&new Rt(l)}static fromLngLat(l,p=0){const C=360*p/40075017,S=C/Math.cos(Math.PI/180*l.lat);return new Rt(new a.S(l.lng-S,l.lat-C),new a.S(l.lng+S,l.lat+C))}adjustAntiMeridian(){const l=new a.S(this._sw.lng,this._sw.lat),p=new a.S(this._ne.lng,this._ne.lat);return new Rt(l,l.lng>p.lng?new a.S(p.lng+360,p.lat):p)}}class Kt{constructor(l,p,C){this.bounds=Rt.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=C||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const p=Math.pow(2,l.z),C=Math.floor(a.V(this.bounds.getWest())*p),S=Math.floor(a.U(this.bounds.getNorth())*p),k=Math.ceil(a.V(this.bounds.getEast())*p),K=Math.ceil(a.U(this.bounds.getSouth())*p);return l.x>=C&&l.x<k&&l.y>=S&&l.y<K}}class on extends a.E{constructor(l,p,C,S){if(super(),this.id=l,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(p,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield Ct(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(a.e(this,l),l.bounds&&(this.tileBounds=new Kt(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(l))}}))}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(p,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};C.request.collectResourceTiming=this._collectResourceTiming;let S="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise(((k,K)=>{l.reloadPromise={resolve:k,reject:K}}))}else l.actor=this.dispatcher.getActor(),S="LT";l.abortController=new AbortController;try{const k=yield l.actor.sendAsync({type:S,data:C},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,k)}catch(k){if(delete l.abortController,l.aborted)return;if(k&&k.status!==404)throw k;this._afterTileLoadWorkerResponse(l,null)}}))}_afterTileLoadWorkerResponse(l,p){if(p&&p.resourceTiming&&(l.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&l.setExpiryData(p),l.loadVectorData(p,this.map.painter),l.reloadPromise){const C=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(C.resolve).catch(C.reject)}}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class qn extends a.E{constructor(l,p,C,S){super(),this.id=l,this.dispatcher=C,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.Q(p,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(l=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const p=yield Ct(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,p&&(a.e(this,p),p.bounds&&(this.tileBounds=new Kt(p.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(p){this._tileJSONRequest=null,this._loaded=!0,this.fire(new a.k(p))}}))}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const C=yield $.getImage(this.map._requestManager.transformRequest(p,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(C&&C.data){this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&l.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const S=this.map.painter.context,k=S.gl,K=C.data;l.texture=this.map.painter.getTileTexture(K.width),l.texture?l.texture.update(K,{useMipmap:!0}):(l.texture=new a.T(S,K,k.RGBA,{useMipmap:!0}),l.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(C){if(delete l.abortController,l.aborted)l.state="unloaded";else if(C)throw l.state="errored",C}}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)}))}hasTransition(){return!1}}class Qn extends qn{constructor(l,p,C,S){super(l,p,C,S),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(p,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const S=yield $.getImage(C,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(S&&S.data){const k=S.data;this.map._refreshExpiredTiles&&(S.cacheControl||S.expires)&&l.setExpiryData({cacheControl:S.cacheControl,expires:S.expires});const K=a.b(k)&&a.W()?k:yield this.readImageNow(k),N={type:this.type,uid:l.uid,source:this.id,rawImageData:K,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const q=yield l.actor.sendAsync({type:"LDT",data:N});l.dem=q,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(S){if(delete l.abortController,l.aborted)l.state="unloaded";else if(S)throw l.state="errored",S}}))}readImageNow(l){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.X()){const p=l.width+2,C=l.height+2;try{return new a.R({width:p,height:C},yield a.Y(l,-1,-1,p,C))}catch{}}return x.getImageData(l,1)}))}_getNeighboringTiles(l){const p=l.canonical,C=Math.pow(2,p.z),S=(p.x-1+C)%C,k=p.x===0?l.wrap-1:l.wrap,K=(p.x+1+C)%C,N=p.x+1===C?l.wrap+1:l.wrap,q={};return q[new a.Z(l.overscaledZ,k,p.z,S,p.y).key]={backfilled:!1},q[new a.Z(l.overscaledZ,N,p.z,K,p.y).key]={backfilled:!1},p.y>0&&(q[new a.Z(l.overscaledZ,k,p.z,S,p.y-1).key]={backfilled:!1},q[new a.Z(l.overscaledZ,l.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},q[new a.Z(l.overscaledZ,N,p.z,K,p.y-1).key]={backfilled:!1}),p.y+1<C&&(q[new a.Z(l.overscaledZ,k,p.z,S,p.y+1).key]={backfilled:!1},q[new a.Z(l.overscaledZ,l.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},q[new a.Z(l.overscaledZ,N,p.z,K,p.y+1).key]={backfilled:!1}),q}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))}))}}class xi extends a.E{constructor(l,p,C,S){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:p.data},this.actor=C.getActor(),this.setEventedParent(S),this._data=p.data,this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId,p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(p.buffer!==void 0?p.buffer:128),tolerance:this._pixelsToTileUnits(p.tolerance!==void 0?p.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(p.clusterMaxZoom),minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(p.clusterRadius||50),log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(l){return l*(a.$/this.tileSize)}_getClusterMaxZoom(l){const p=l?Math.round(l):this.maxzoom-1;return Number.isInteger(l)||l===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${l}" rounded to "${p}"`),p}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._pendingWorkerUpdate={data:l},this._updateWorkerData(),this}updateData(l){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,l),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,(function*(){const l=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})}))}getCoordinatesFromGeometry(l){return l.type==="GeometryCollection"?l.geometries.map((p=>p.coordinates)).flat(1/0):l.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,(function*(){const l=new Rt,p=yield this.getData();let C;switch(p.type){case"FeatureCollection":C=p.features.map((S=>this.getCoordinatesFromGeometry(S.geometry))).flat(1/0);break;case"Feature":C=this.getCoordinatesFromGeometry(p.geometry);break;default:C=this.getCoordinatesFromGeometry(p)}if(C.length==0)return l;for(let S=0;S<C.length-1;S+=2)l.extend([C[S],C[S+1]]);return l}))}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(l.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,p,C){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:p,offset:C}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:l,diff:p}=this._pendingWorkerUpdate,C=a.e({type:this.type},this.workerOptions);l?(typeof l=="string"?(C.request=this.map._requestManager.transformRequest(x.resolveURL(l),"Source"),C.request.collectResourceTiming=this._collectResourceTiming):C.data=JSON.stringify(l),this._pendingWorkerUpdate.data=void 0):p&&(C.dataDiff=p,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const S=yield this.actor.sendAsync({type:"LD",data:C});if(this._isUpdatingWorker=!1,this._removed||S.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=S.data;let k=null;S.resourceTiming&&S.resourceTiming[this.id]&&(k=S.resourceTiming[this.id].slice(0));const K={dataType:"source"};this._collectResourceTiming&&k&&k.length>0&&a.e(K,{resourceTiming:k}),this.fire(new a.l("data",Object.assign(Object.assign({},K),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},K),{sourceDataType:"content"})))}catch(S){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(S))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(l){return a._(this,void 0,void 0,(function*(){const p=l.actor?"RT":"LT";l.actor=this.actor;const C={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const S=yield this.actor.sendAsync({type:p,data:C},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(S,this.map.painter,p==="RT")}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Kn extends a.E{constructor(l,p,C,S){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=C,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=p}load(l){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield $.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,l&&(this.coordinates=l),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new a.k(p))}}))}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const p=l.map(a.a1.fromLngLat);var C;return this.tileID=(function(S){const k=a.a2.fromPoints(S),K=k.width(),N=k.height(),q=Math.max(K,N),ie=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),ae=Math.pow(2,ie);return new a.a4(ie,Math.floor((k.minX+k.maxX)/2*ae),Math.floor((k.minY+k.maxY)/2*ae))})(p),this.terrainTileRanges=this._getOverlappingTileRanges(p),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=p.map((S=>this.tileID.getTilePoint(S)._round())),this.flippedWindingOrder=((C=this.tileCoords)[1].x-C[0].x)*(C[2].y-C[0].y)-(C[1].y-C[0].y)*(C[2].x-C[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,p=l.gl;this.texture||(this.texture=new a.T(l,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const S in this.tiles){const k=this.tiles[S];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(l){const{minX:p,minY:C,maxX:S,maxY:k}=a.a2.fromPoints(l),K={};for(let N=0;N<=a.a3;N++){const q=Math.pow(2,N),ie=Math.floor(p*q),ae=Math.floor(C*q),ye=Math.floor(S*q),pe=Math.floor(k*q);K[N]={minTileX:ie,minTileY:ae,maxTileX:ye,maxTileY:pe}}return K}}class Un extends Kn{constructor(l,p,C,S){super(l,p,C,S),this.roundZoom=!0,this.type="video",this.options=p}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const p of l.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield a.a5(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new a.k(p))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const p=this.video.seekable;l<p.start(0)||l>p.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,p=l.gl;this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(l,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let C=!1;for(const S in this.tiles){const k=this.tiles[S];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,C=!0)}C&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Cn extends Kn{constructor(l,p,C,S){super(l,p,C,S),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some((k=>!Array.isArray(k)||k.length!==2||k.some((K=>typeof K!="number"))))||this.fire(new a.k(new a.a6(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a6(`sources.${l}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a6(`sources.${l}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,C=p.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(p,this.canvas,C.RGBA,{premultiply:!0});let S=!1;for(const k in this.tiles){const K=this.tiles[k];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture,S=!0)}S&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const ei={},Dn=B=>{switch(B){case"geojson":return xi;case"image":return Kn;case"raster":return qn;case"raster-dem":return Qn;case"vector":return on;case"video":return Un;case"canvas":return Cn}return ei[B]},It="RTLPluginLoaded";class Ce extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Oe()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch((p=>{throw this.status="error",p}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return a._(this,arguments,void 0,(function*(p,C=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=x.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!C)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(It))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let re=null;function le(){return re||(re=new Ce),re}var he,se;(function(B){B[B.Base=0]="Base",B[B.Parent=1]="Parent"})(he||(he={})),(function(B){B[B.Departing=0]="Departing",B[B.Incoming=1]="Incoming"})(se||(se={}));class Ae{constructor(l,p){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=l,this.uid=a.a7(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(l){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(l||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:l,fadingDirection:p,fadingParentID:C,fadeEndTime:S}){this.resetFadeLogic(),this.fadingRole=l,this.fadingDirection=p,this.fadingParentID=C,this.fadeEndTime=S}setSelfFadeLogic(l){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=l}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=R(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=(function(S,k){const K={};if(!k)return K;for(const N of S){const q=N.layerIds.map((ie=>k.getLayer(ie))).filter(Boolean);if(q.length!==0){N.layers=q,N.stateDependentLayerIds&&(N.stateDependentLayers=N.stateDependentLayerIds.map((ie=>q.filter((ae=>ae.id===ie))[0])));for(const ie of q)K[ie.id]=N}}return K})(l.buckets,p?.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const k=this.buckets[S];if(k instanceof a.a9){if(this.hasSymbolBuckets=!0,!C)break;k.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const k=this.buckets[S];if(k instanceof a.a9&&k.hasRTLText){this.hasRTLText=!0,le().lazyLoad();break}}this.queryPadding=0;for(const S in this.buckets){const k=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(S).queryRadius(k))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),this.dashPositions=l.dashPositions}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const C in this.buckets){const S=this.buckets[C];S.uploadPending()&&S.upload(l)}const p=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(l,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(l,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,p,C,S,k,K,N,q,ie,ae,ye){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:k,scale:K,tileSize:this.tileSize,pixelPosMatrix:ae,transform:q,params:N,queryPadding:this.queryPadding*ie,getElevation:ye},l,p,C):{}}querySourceFeatures(l,p){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const S=C.loadVTLayers(),k=p&&p.sourceLayer?p.sourceLayer:"",K=S._geojsonTileLayer||S[k];if(!K)return;const N=a.aa(p?.filter,p?.globalState),{z:q,x:ie,y:ae}=this.tileID.canonical,ye={z:q,x:ie,y:ae};for(let pe=0;pe<K.length;pe++){const Se=K.feature(pe);if(N.needGeometry){const $e=a.ab(Se,!0);if(!N.filter(new a.F(this.tileID.overscaledZ),$e,this.tileID.canonical))continue}else if(!N.filter(new a.F(this.tileID.overscaledZ),Se))continue;const Fe=C.getId(Se,k),Xe=new a.ac(Se,q,ie,ae,Fe);Xe.tile=ye,l.push(Xe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const p=this.expirationTime;if(l.cacheControl){const C=a.ad(l.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const C=Date.now();let S=!1;if(this.expirationTime>C)S=!1;else if(p)if(this.expirationTime<p)S=!0;else{const k=this.expirationTime-p;k?this.expirationTime=C+Math.max(k,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!p.style.hasLayer(S))continue;const k=this.buckets[S],K=k.layers[0].sourceLayer||"_geojsonTileLayer",N=C[K],q=l[K];if(!N||!q||Object.keys(q).length===0)continue;k.update(q,N,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const ie=p&&p.style&&p.style.getLayer(S);ie&&(this.queryPadding=Math.max(this.queryPadding,ie.queryRadius(k)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<R()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(l){this.symbolFadeHoldUntil=R()+l}setDependencies(l,p){const C={};for(const S of p)C[S]=!0;this.dependencies[l]=C}hasDependency(l,p){for(const C of l){const S=this.dependencies[C];if(S){for(const k of p)if(S[k])return!0}}return!1}}class be{constructor(l,p){this.max=l,this.onRemove=p,this.reset()}reset(){for(const l in this.data)for(const p of this.data[l])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(l,p,C){const S=l.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const k={value:p,timeout:void 0};if(C!==void 0&&(k.timeout=setTimeout((()=>{this.remove(l,k)}),C)),this.data[S].push(k),this.order.push(S),this.order.length>this.max){const K=this._getAndRemoveByKey(this.order[0]);K&&this.onRemove(K)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value}getByKey(l){const p=this.data[l];return p?p[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,p){if(!this.has(l))return this;const C=l.wrapped().key,S=p===void 0?0:this.data[C].indexOf(p),k=this.data[C][S];return this.data[C].splice(S,1),k.timeout&&clearTimeout(k.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(k.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(l){const p=[];for(const C in this.data)for(const S of this.data[C])l(S.value)||p.push(S);for(const C of p)this.remove(C.value.tileID,C)}}class We{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,p,C){const S=String(p);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][S]=this.stateChanges[l][S]||{},a.e(this.stateChanges[l][S],C),this.deletedStates[l]===null){this.deletedStates[l]={};for(const k in this.state[l])k!==S&&(this.deletedStates[l][k]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][S]===null){this.deletedStates[l][S]={};for(const k in this.state[l][S])C[k]||(this.deletedStates[l][S][k]=null)}else for(const k in C)this.deletedStates[l]&&this.deletedStates[l][S]&&this.deletedStates[l][S][k]===null&&delete this.deletedStates[l][S][k]}removeFeatureState(l,p,C){if(this.deletedStates[l]===null)return;const S=String(p);if(this.deletedStates[l]=this.deletedStates[l]||{},C&&p!==void 0)this.deletedStates[l][S]!==null&&(this.deletedStates[l][S]=this.deletedStates[l][S]||{},this.deletedStates[l][S][C]=null);else if(p!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][S])for(C in this.deletedStates[l][S]={},this.stateChanges[l][S])this.deletedStates[l][S][C]=null;else this.deletedStates[l][S]=null;else this.deletedStates[l]=null}getState(l,p){const C=String(p),S=a.e({},(this.state[l]||{})[C],(this.stateChanges[l]||{})[C]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const k=this.deletedStates[l][p];if(k===null)return{};for(const K in k)delete S[K]}return S}initializeTileState(l,p){l.setFeatureState(this.state,p)}coalesceChanges(l,p){const C={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const k={};for(const K in this.stateChanges[S])this.state[S][K]||(this.state[S][K]={}),a.e(this.state[S][K],this.stateChanges[S][K]),k[K]=this.state[S][K];C[S]=k}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const k={};if(this.deletedStates[S]===null)for(const K in this.state[S])k[K]={},this.state[S][K]={};else for(const K in this.deletedStates[S]){if(this.deletedStates[S][K]===null)this.state[S][K]={};else for(const N of Object.keys(this.deletedStates[S][K]))delete this.state[S][K][N];k[K]=this.state[S][K]}C[S]=C[S]||{},a.e(C[S],k)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const S in l)l[S].setFeatureState(C,p)}}const et=89.25;function Pe(B,l){const p=a.ae(l.lat,-a.af,a.af);return new a.P(a.V(l.lng)*B,a.U(p)*B)}function Ze(B,l){return new a.a1(l.x/B,l.y/B).toLngLat()}function y(B){return B.cameraToCenterDistance*Math.min(.85*Math.tan(a.ag(90-B.pitch)),Math.tan(a.ag(et-B.pitch)))}function at(B,l){const p=B.canonical,C=l/a.ah(p.z),S=p.x+Math.pow(2,p.z)*B.wrap,k=a.ai(new Float64Array(16));return a.M(k,k,[S*C,p.y*C,0]),a.N(k,k,[C/a.$,C/a.$,1]),k}function Pt(B,l,p,C,S){const k=a.a1.fromLngLat(B,l),K=S*a.aj(1,B.lat),N=K*Math.cos(a.ag(p)),q=Math.sqrt(K*K-N*N),ie=q*Math.sin(a.ag(-C)),ae=q*Math.cos(a.ag(-C));return new a.a1(k.x+ie,k.y+ae,k.z+N)}function Mt(B,l,p){const C=l.intersectsFrustum(B);if(!p||C===0)return C;const S=l.intersectsPlane(p);return S===0?0:C===2&&S===2?2:1}function en(B,l,p){let C=0;const S=(p-l)/10;for(let k=0;k<10;k++)C+=S*Math.pow(Math.cos(l+(k+.5)/10*(p-l)),B);return C}function dt(B,l){return function(p,C,S,k,K){const N=2*((B-1)/a.ak(Math.cos(a.ag(et-K))/Math.cos(a.ag(et)))-1),q=Math.acos(S/k),ie=2*en(N-1,0,a.ag(K/2)),ae=Math.min(a.ag(et),q+a.ag(K/2)),ye=en(N-1,Math.min(ae,q-a.ag(K/2)),ae),pe=Math.atan(C/S),Se=Math.hypot(C,S);let Fe=p;return Fe+=a.ak(k/Se/Math.max(.5,Math.cos(a.ag(K/2)))),Fe+=N*a.ak(Math.cos(pe))/2,Fe-=a.ak(Math.max(1,ye/ie/l))/2,Fe}}const Zn=dt(9.314,3);function gi(B,l){const p=(l.roundZoom?Math.round:Math.floor)(B.zoom+a.ak(B.tileSize/l.tileSize));return Math.max(0,p)}function Tn(B,l){const p=B.getCameraFrustum(),C=B.getClippingPlane(),S=B.screenPointToMercatorCoordinate(B.getCameraPoint()),k=a.a1.fromLngLat(B.center,B.elevation);S.z=k.z+Math.cos(B.pitchInRadians)*B.cameraToCenterDistance/B.worldSize;const K=B.getCoveringTilesDetailsProvider(),N=K.allowVariableZoom(B,l),q=gi(B,l),ie=l.minzoom||0,ae=l.maxzoom!==void 0?l.maxzoom:B.maxZoom,ye=Math.min(Math.max(0,q),ae),pe=Math.pow(2,ye),Se=[pe*S.x,pe*S.y,0],Fe=[pe*k.x,pe*k.y,0],Xe=Math.hypot(k.x-S.x,k.y-S.y),$e=Math.abs(k.z-S.z),tt=Math.hypot(Xe,$e),it=ht=>({zoom:0,x:0,y:0,wrap:ht,fullyVisible:!1}),ct=[],rt=[];if(B.renderWorldCopies&&K.allowWorldCopies())for(let ht=1;ht<=3;ht++)ct.push(it(-ht)),ct.push(it(ht));for(ct.push(it(0));ct.length>0;){const ht=ct.pop(),ft=ht.x,ot=ht.y;let St=ht.fullyVisible;const Wt={x:ft,y:ot,z:ht.zoom},Ut=K.getTileBoundingVolume(Wt,ht.wrap,B.elevation,l);if(!St){const In=Mt(p,Ut,C);if(In===0)continue;St=In===2}const jt=K.distanceToTile2d(S.x,S.y,Wt,Ut);let Qt=q;N&&(Qt=(l.calculateTileZoom||Zn)(B.zoom+a.ak(B.tileSize/l.tileSize),jt,$e,tt,B.fov)),Qt=(l.roundZoom?Math.round:Math.floor)(Qt),Qt=Math.max(0,Qt);const On=Math.min(Qt,ae);if(ht.wrap=K.getWrap(k,Wt,ht.wrap),ht.zoom>=On){if(ht.zoom<ie)continue;const In=ye-ht.zoom,ln=Se[0]-.5-(ft<<In),$n=Se[1]-.5-(ot<<In),Hi=l.reparseOverscaled?Math.max(ht.zoom,Qt):ht.zoom;rt.push({tileID:new a.Z(ht.zoom===ae?Hi:ht.zoom,ht.wrap,ht.zoom,ft,ot),distanceSq:a.al([Fe[0]-.5-ft,Fe[1]-.5-ot]),tileDistanceToCamera:Math.sqrt(ln*ln+$n*$n)})}else for(let In=0;In<4;In++)ct.push({zoom:ht.zoom+1,x:(ft<<1)+In%2,y:(ot<<1)+(In>>1),wrap:ht.wrap,fullyVisible:St})}return rt.sort(((ht,ft)=>ht.distanceSq-ft.distanceSq)).map((ht=>ht.tileID))}const zn=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class si extends a.E{constructor(l,p,C){super(),this.id=l,this.dispatcher=C,this.on("data",(S=>this._dataHandler(S))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((S,k,K,N)=>{const q=new(Dn(k.type))(S,k,K,N);if(q.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${q.id}`);return q})(l,p,C,this),this._tiles={},this._cache=new be(0,(S=>this._unloadTile(S))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new We,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const p=this._tiles[l];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,p,C){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,p,C)}catch(S){l.state="errored",S.status!==404?this._source.fire(new a.k(S,{tile:l})):this.update(this.transform,this.terrain)}}))}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new a.l("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const C=this._tiles[p];C.upload(l),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((l=>l.tileID)).sort(ir).map((l=>l.key))}getRenderableIds(l){const p=[];for(const C in this._tiles)this._isIdRenderable(C,l)&&p.push(this._tiles[C]);return l?p.sort(((C,S)=>{const k=C.tileID,K=S.tileID,N=new a.P(k.canonical.x,k.canonical.y)._rotate(-this.transform.bearingInRadians),q=new a.P(K.canonical.x,K.canonical.y)._rotate(-this.transform.bearingInRadians);return k.overscaledZ-K.overscaledZ||q.y-N.y||q.x-N.x})).map((C=>C.tileID.key)):p.map((C=>C.tileID)).sort(ir).map((C=>C.key))}hasRenderableParent(l){const p=l.overscaledZ-1;if(p>=this._source.minzoom){const C=this._getLoadedTile(l.scaledTo(p));if(C)return this._isIdRenderable(C.tileID.key)}return!1}_isIdRenderable(l,p=!1){var C;return(C=this._tiles[l])===null||C===void 0?void 0:C.isRenderable(p)}reload(l){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const p in this._tiles)l?this._reloadTile(p,"expired"):this._tiles[p].state!=="errored"&&this._reloadTile(p,"reloading")}}_reloadTile(l,p){return a._(this,void 0,void 0,(function*(){const C=this._tiles[l];C&&(C.state!=="loading"&&(C.state=p),yield this._loadTile(C,l,p))}))}_tileLoaded(l,p,C){l.timeAdded=R(),C==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(p,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const p=this.getRenderableIds();for(let S=0;S<p.length;S++){const k=p[S];if(l.neighboringTiles&&l.neighboringTiles[k]){const K=this.getTileByID(k);C(l,K),C(K,l)}}function C(S,k){S.needsHillshadePrepare=!0,S.needsTerrainPrepare=!0;let K=k.tileID.canonical.x-S.tileID.canonical.x;const N=k.tileID.canonical.y-S.tileID.canonical.y,q=Math.pow(2,S.tileID.canonical.z),ie=k.tileID.key;K===0&&N===0||Math.abs(N)>1||(Math.abs(K)>1&&(Math.abs(K+q)===1?K+=q:Math.abs(K-q)===1&&(K-=q)),k.dem&&S.dem&&(S.dem.backfillBorder(k.dem,K,N),S.neighboringTiles&&S.neighboringTiles[ie]&&(S.neighboringTiles[ie].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,p){const C=Object.values(l),S=this._getLoadedDescendents(C),k={};for(const K of C){const N=S[K.key];if(!N?.length){k[K.key]=K;continue}const q=K.overscaledZ+si.maxUnderzooming,ie=N.filter((pe=>pe.tileID.overscaledZ<=q));if(!ie.length){k[K.key]=K;continue}const ae=Math.min(...ie.map((pe=>pe.tileID.overscaledZ))),ye=ie.filter((pe=>pe.tileID.overscaledZ===ae)).map((pe=>pe.tileID));for(const pe of ye)p[pe.key]=pe;this._areDescendentsComplete(ye,ae,K.overscaledZ)||(k[K.key]=K)}return k}_getLoadedDescendents(l){var p;const C={};for(const S in this._tiles){const k=this._tiles[S];if(k.hasData())for(const K of l)k.tileID.isChildOf(K)&&(C[p=K.key]||(C[p]=[])).push(k)}return C}_areDescendentsComplete(l,p,C){return l.length===1&&l[0].isOverscaled()?l[0].overscaledZ===p:Math.pow(4,p-C)===l.length}_getLoadedTile(l){const p=this._tiles[l.key];return p?.hasData()?p:null}updateCacheSize(l){const p=Math.ceil(l.width/this._source.tileSize)+1,C=Math.ceil(l.height/this._source.tileSize)+1,S=Math.floor(p*C*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(k)}handleWrapJump(l){const p=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,p){const C={};for(const S in this._tiles){const k=this._tiles[S];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+p),C[k.tileID.key]=k}this._tiles=C,this._resetTileReloadTimers()}}update(l,p){if(!this._sourceLoaded||this._paused)return;let C;this.transform=l,this.terrain=p,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?C=l.getVisibleUnwrappedCoordinates(this._source.tileID).map((q=>new a.Z(q.canonical.z,q.wrap,q.canonical.z,q.canonical.x,q.canonical.y))):(C=Tn(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(C=C.filter((q=>this._source.hasTile(q))))):C=[],this.usedForTerrain&&(C=this._addTerrainIdealTiles(C));const S=C.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,S&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=gi(l,this._source),K=this._updateRetainedTiles(C,k),N=Di(this._source.type);N&&this._rasterFadeDuration>0&&!p&&this._updateFadingTiles(C,K),N?this._cleanUpRasterTiles(K):this._cleanUpVectorTiles(K)}_cleanUpRasterTiles(l){for(const p in this._tiles)l[p]||this._removeTile(p)}_cleanUpVectorTiles(l){for(const p in this._tiles){const C=this._tiles[p];l[p]?C.clearSymbolFadeHold():C.hasSymbolBuckets?C.holdingForSymbolFade()?C.symbolFadeFinished()&&this._removeTile(p):C.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(p)}}_addTerrainIdealTiles(l){const p=[];for(const C of l)if(C.canonical.z>this._source.minzoom){const S=C.scaledTo(C.canonical.z-1);p.push(S);const k=C.scaledTo(Math.max(this._source.minzoom,Math.min(C.canonical.z,5)));p.push(k)}return l.concat(p)}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForSymbolFade()&&this._removeTile(l)}_updateRetainedTiles(l,p){var C;const S={},k={},K=Math.max(p-si.maxOverzooming,this._source.minzoom);let N={};for(const q of l){const ie=this._addTile(q);S[q.key]=q,ie.hasData()||(N[q.key]=q)}N=this._retainLoadedChildren(N,S);for(const q in N){const ie=N[q];let ae=this._tiles[q],ye=ae?.wasRequested();for(let pe=ie.overscaledZ-1;pe>=K;--pe){const Se=ie.scaledTo(pe);if(k[Se.key])break;if(k[Se.key]=!0,ae=this.getTile(Se),!ae&&ye&&(ae=this._addTile(Se)),ae){const Fe=ae.hasData();if((Fe||!(!((C=this.map)===null||C===void 0)&&C.cancelPendingTileRequestsWhileZooming)||ye)&&(S[Se.key]=Se),ye=ae.wasRequested(),Fe)break}}}return S}_updateFadingTiles(l,p){const C=R(),S=a.am(l);for(const k of l){const K=this._tiles[k.key];K.fadingDirection!==se.Departing&&K.fadeOpacity!==0||K.resetFadeLogic(),this._updateFadingAncestor(K,p,C)||this._updateFadingDescendents(K,p,C)||this._updateFadingEdge(K,S,C)||K.resetFadeLogic()}}_updateFadingAncestor(l,p,C){if(!l.hasData())return!1;const{tileID:S,fadingRole:k,fadingDirection:K,fadingParentID:N}=l;if(k===he.Base&&K===se.Incoming&&N)return p[N.key]=N,!0;const q=Math.max(S.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let ie=S.overscaledZ-1;ie>=q;ie--){const ae=S.scaledTo(ie),ye=this._getLoadedTile(ae);if(ye)return l.setCrossFadeLogic({fadingRole:he.Base,fadingDirection:se.Incoming,fadingParentID:ye.tileID,fadeEndTime:C+this._rasterFadeDuration}),ye.setCrossFadeLogic({fadingRole:he.Parent,fadingDirection:se.Departing,fadeEndTime:C+this._rasterFadeDuration}),p[ae.key]=ae,!0}return!1}_updateFadingDescendents(l,p,C){if(!l.hasData())return!1;const S=l.tileID.children(this._source.maxzoom);let k=this._updateFadingChildren(l,S,p,C);if(k)return!0;for(const K of S){const N=K.children(this._source.maxzoom);this._updateFadingChildren(l,N,p,C)&&(k=!0)}return k}_updateFadingChildren(l,p,C,S){if(p[0].overscaledZ>=this._source.maxzoom)return!1;let k=!1;for(const K of p){const N=this._getLoadedTile(K);if(!N)continue;const{fadingRole:q,fadingDirection:ie,fadingParentID:ae}=N;q===he.Base&&ie===se.Departing&&ae||(N.setCrossFadeLogic({fadingRole:he.Base,fadingDirection:se.Departing,fadingParentID:l.tileID,fadeEndTime:S+this._rasterFadeDuration}),l.setCrossFadeLogic({fadingRole:he.Parent,fadingDirection:se.Incoming,fadeEndTime:S+this._rasterFadeDuration})),C[K.key]=K,k=!0}return k}_updateFadingEdge(l,p,C){const S=l.tileID;return!!l.selfFading||!l.hasData()&&!!p.has(S)&&(l.setSelfFadeLogic(C+this._rasterFadeDuration),!0)}_addTile(l){let p=this._tiles[l.key];if(p)return p;p=this._cache.getAndRemove(l),p&&(p.resetFadeLogic(),this._setTileReloadTimer(l.key,p),p.tileID=l,this._state.initializeTileState(p,this.map?this.map.painter:null));const C=p;return p||(p=new Ae(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(p,l.key,p.state)),p.uses++,this._tiles[l.key]=p,C||this._source.fire(new a.l("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(l,p){this._clearTileReloadTimer(l);const C=p.getExpiryTimeout();C&&(this._timers[l]=setTimeout((()=>{this._reloadTile(l,"expired"),delete this._timers[l]}),C))}_clearTileReloadTimer(l){const p=this._timers[l];p&&(clearTimeout(p),delete this._timers[l])}_resetTileReloadTimers(){for(const l in this._timers)clearTimeout(this._timers[l]),delete this._timers[l];for(const l in this._tiles)this._setTileReloadTimer(l,this._tiles[l])}refreshTiles(l){for(const p in this._tiles)(this._isIdRenderable(p)||this._tiles[p].state=="errored")&&l.some((C=>C.equals(this._tiles[p].tileID.canonical)))&&this._reloadTile(p,"expired")}_removeTile(l){const p=this._tiles[l];p&&(p.uses--,delete this._tiles[l],this._clearTileReloadTimer(l),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(l){l.dataType==="source"&&(l.sourceDataType!=="metadata"?l.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(l.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,p,C){const S=[],k=this.transform;if(!k)return S;const K=k.getCoveringTilesDetailsProvider().allowWorldCopies(),N=C?k.getCameraQueryGeometry(l):l,q=Se=>k.screenPointToMercatorCoordinate(Se,this.terrain),ie=this.transformBbox(l,q,!K),ae=this.transformBbox(N,q,!K),ye=this.getIds(),pe=a.a2.fromPoints(ae);for(let Se=0;Se<ye.length;Se++){const Fe=this._tiles[ye[Se]];if(Fe.holdingForSymbolFade())continue;const Xe=K?[Fe.tileID]:[Fe.tileID.unwrapTo(-1),Fe.tileID.unwrapTo(0)],$e=Math.pow(2,k.zoom-Fe.tileID.overscaledZ),tt=p*Fe.queryPadding*a.$/Fe.tileSize/$e;for(const it of Xe){const ct=pe.map((rt=>it.getTilePoint(new a.a1(rt.x,rt.y))));if(ct.expandBy(tt),ct.intersects(zn)){const rt=ie.map((ft=>it.getTilePoint(ft))),ht=ae.map((ft=>it.getTilePoint(ft)));S.push({tile:Fe,tileID:K?it:it.unwrapTo(0),queryGeometry:rt,cameraQueryGeometry:ht,scale:$e})}}}return S}transformBbox(l,p,C){let S=l.map(p);if(C){const k=a.a2.fromPoints(l);k.shrinkBy(.001*Math.min(k.width(),k.height()));const K=k.map(p);a.a2.fromPoints(S).covers(K)||(S=S.map((N=>N.x>.5?new a.a1(N.x-1,N.y,N.z):N)))}return S}getVisibleCoordinates(l){const p=this.getRenderableIds(l).map((C=>this._tiles[C].tileID));return this.transform&&this.transform.populateCache(p),p}hasTransition(){if(this._source.hasTransition())return!0;if(Di(this._source.type)&&this._rasterFadeDuration>0){const l=R();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=l)return!0}return!1}setRasterFadeDuration(l){this._rasterFadeDuration=l}setFeatureState(l,p,C){this._state.updateState(l=l||"_geojsonTileLayer",p,C)}removeFeatureState(l,p,C){this._state.removeFeatureState(l=l||"_geojsonTileLayer",p,C)}getFeatureState(l,p){return this._state.getState(l=l||"_geojsonTileLayer",p)}setDependencies(l,p,C){const S=this._tiles[l];S&&S.setDependencies(p,C)}reloadTilesForDependencies(l,p){for(const C in this._tiles)this._tiles[C].hasDependency(l,p)&&this._reloadTile(C,"reloading");this._cache.filter((C=>!C.hasDependency(l,p)))}}function ir(B,l){const p=Math.abs(2*B.wrap)-+(B.wrap<0),C=Math.abs(2*l.wrap)-+(l.wrap<0);return B.overscaledZ-l.overscaledZ||C-p||l.canonical.y-B.canonical.y||l.canonical.x-B.canonical.x}function Di(B){return B==="raster"||B==="image"||B==="video"}si.maxOverzooming=10,si.maxUnderzooming=3;class gr{constructor(l,p){this.reset(l,p)}reset(l,p){this.points=l||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.ae(l,0,1);let p=1,C=this._distances[p];const S=l*this.paddedLength+this.padding;for(;C<S&&p<this._distances.length;)C=this._distances[++p];const k=p-1,K=this._distances[k],N=C-K,q=N>0?(S-K)/N:0;return this.points[k].mult(1-q).add(this.points[p].mult(q))}}function Oi(B,l){let p=!0;return B==="always"||B!=="never"&&l!=="never"||(p=!1),p}class Ri{constructor(l,p,C){const S=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(l/C),this.yCellCount=Math.ceil(p/C);for(let K=0;K<this.xCellCount*this.yCellCount;K++)S.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,p,C,S,k){this._forEachCell(p,C,S,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(S),this.bboxes.push(k)}insertCircle(l,p,C,S){this._forEachCell(p-S,C-S,p+S,C+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(C),this.circles.push(S)}_insertBoxCell(l,p,C,S,k,K){this.boxCells[k].push(K)}_insertCircleCell(l,p,C,S,k,K){this.circleCells[k].push(K)}_query(l,p,C,S,k,K,N){if(C<0||l>this.width||S<0||p>this.height)return[];const q=[];if(l<=0&&p<=0&&this.width<=C&&this.height<=S){if(k)return[{key:null,x1:l,y1:p,x2:C,y2:S}];for(let ie=0;ie<this.boxKeys.length;ie++)q.push({key:this.boxKeys[ie],x1:this.bboxes[4*ie],y1:this.bboxes[4*ie+1],x2:this.bboxes[4*ie+2],y2:this.bboxes[4*ie+3]});for(let ie=0;ie<this.circleKeys.length;ie++){const ae=this.circles[3*ie],ye=this.circles[3*ie+1],pe=this.circles[3*ie+2];q.push({key:this.circleKeys[ie],x1:ae-pe,y1:ye-pe,x2:ae+pe,y2:ye+pe})}}else this._forEachCell(l,p,C,S,this._queryCell,q,{hitTest:k,overlapMode:K,seenUids:{box:{},circle:{}}},N);return q}query(l,p,C,S){return this._query(l,p,C,S,!1,null)}hitTest(l,p,C,S,k,K){return this._query(l,p,C,S,!0,k,K).length>0}hitTestCircle(l,p,C,S,k){const K=l-C,N=l+C,q=p-C,ie=p+C;if(N<0||K>this.width||ie<0||q>this.height)return!1;const ae=[];return this._forEachCell(K,q,N,ie,this._queryCellCircle,ae,{hitTest:!0,overlapMode:S,circle:{x:l,y:p,radius:C},seenUids:{box:{},circle:{}}},k),ae.length>0}_queryCell(l,p,C,S,k,K,N,q){const{seenUids:ie,hitTest:ae,overlapMode:ye}=N,pe=this.boxCells[k];if(pe!==null){const Fe=this.bboxes;for(const Xe of pe)if(!ie.box[Xe]){ie.box[Xe]=!0;const $e=4*Xe,tt=this.boxKeys[Xe];if(l<=Fe[$e+2]&&p<=Fe[$e+3]&&C>=Fe[$e+0]&&S>=Fe[$e+1]&&(!q||q(tt))&&(!ae||!Oi(ye,tt.overlapMode))&&(K.push({key:tt,x1:Fe[$e],y1:Fe[$e+1],x2:Fe[$e+2],y2:Fe[$e+3]}),ae))return!0}}const Se=this.circleCells[k];if(Se!==null){const Fe=this.circles;for(const Xe of Se)if(!ie.circle[Xe]){ie.circle[Xe]=!0;const $e=3*Xe,tt=this.circleKeys[Xe];if(this._circleAndRectCollide(Fe[$e],Fe[$e+1],Fe[$e+2],l,p,C,S)&&(!q||q(tt))&&(!ae||!Oi(ye,tt.overlapMode))){const it=Fe[$e],ct=Fe[$e+1],rt=Fe[$e+2];if(K.push({key:tt,x1:it-rt,y1:ct-rt,x2:it+rt,y2:ct+rt}),ae)return!0}}}return!1}_queryCellCircle(l,p,C,S,k,K,N,q){const{circle:ie,seenUids:ae,overlapMode:ye}=N,pe=this.boxCells[k];if(pe!==null){const Fe=this.bboxes;for(const Xe of pe)if(!ae.box[Xe]){ae.box[Xe]=!0;const $e=4*Xe,tt=this.boxKeys[Xe];if(this._circleAndRectCollide(ie.x,ie.y,ie.radius,Fe[$e+0],Fe[$e+1],Fe[$e+2],Fe[$e+3])&&(!q||q(tt))&&!Oi(ye,tt.overlapMode))return K.push(!0),!0}}const Se=this.circleCells[k];if(Se!==null){const Fe=this.circles;for(const Xe of Se)if(!ae.circle[Xe]){ae.circle[Xe]=!0;const $e=3*Xe,tt=this.circleKeys[Xe];if(this._circlesCollide(Fe[$e],Fe[$e+1],Fe[$e+2],ie.x,ie.y,ie.radius)&&(!q||q(tt))&&!Oi(ye,tt.overlapMode))return K.push(!0),!0}}}_forEachCell(l,p,C,S,k,K,N,q){const ie=this._convertToXCellCoord(l),ae=this._convertToYCellCoord(p),ye=this._convertToXCellCoord(C),pe=this._convertToYCellCoord(S);for(let Se=ie;Se<=ye;Se++)for(let Fe=ae;Fe<=pe;Fe++)if(k.call(this,l,p,C,S,this.xCellCount*Fe+Se,K,N,q))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,p,C,S,k,K){const N=S-l,q=k-p,ie=C+K;return ie*ie>N*N+q*q}_circleAndRectCollide(l,p,C,S,k,K,N){const q=(K-S)/2,ie=Math.abs(l-(S+q));if(ie>q+C)return!1;const ae=(N-k)/2,ye=Math.abs(p-(k+ae));if(ye>ae+C)return!1;if(ie<=q||ye<=ae)return!0;const pe=ie-q,Se=ye-ae;return pe*pe+Se*Se<=C*C}}function cr(B,l,p){const C=a.L();if(!B){const{vecSouth:ye,vecEast:pe}=Pi(l),Se=h();Se[0]=pe[0],Se[1]=pe[1],Se[2]=ye[0],Se[3]=ye[1],S=Se,(ae=(K=(k=Se)[0])*(ie=k[3])-(q=k[2])*(N=k[1]))&&(S[0]=ie*(ae=1/ae),S[1]=-N*ae,S[2]=-q*ae,S[3]=K*ae),C[0]=Se[0],C[1]=Se[1],C[4]=Se[2],C[5]=Se[3]}var S,k,K,N,q,ie,ae;return a.N(C,C,[1/p,1/p,1]),C}function nn(B,l,p,C){if(B){const S=a.L();if(!l){const{vecSouth:k,vecEast:K}=Pi(p);S[0]=K[0],S[1]=K[1],S[4]=k[0],S[5]=k[1]}return a.N(S,S,[C,C,1]),S}return p.pixelsToClipSpaceMatrix}function Pi(B){const l=Math.cos(B.rollInRadians),p=Math.sin(B.rollInRadians),C=Math.cos(B.pitchInRadians),S=Math.cos(B.bearingInRadians),k=Math.sin(B.bearingInRadians),K=a.ar();K[0]=-S*C*p-k*l,K[1]=-k*C*p+S*l;const N=a.as(K);N<1e-9?a.at(K):a.au(K,K,1/N);const q=a.ar();q[0]=S*C*l-k*p,q[1]=k*C*l+S*p;const ie=a.as(q);return ie<1e-9?a.at(q):a.au(q,q,1/ie),{vecEast:q,vecSouth:K}}function $o(B,l,p,C){let S;C?(S=[B,l,C(B,l),1],a.aw(S,S,p)):(S=[B,l,0,1],Zo(S,S,p));const k=S[3];return{point:new a.P(S[0]/k,S[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}function Ks(B,l){return .5+B/l*.5}function Vr(B,l){return B.x>=-l[0]&&B.x<=l[0]&&B.y>=-l[1]&&B.y<=l[1]}function mn(B,l,p,C,S,k,K,N,q,ie,ae,ye,pe){const Se=p?B.textSizeData:B.iconSizeData,Fe=a.an(Se,l.transform.zoom),Xe=[256/l.width*2+1,256/l.height*2+1],$e=p?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;$e.clear();const tt=B.lineVertexArray,it=p?B.text.placedSymbolArray:B.icon.placedSymbolArray,ct=l.transform.width/l.transform.height;let rt=!1;for(let ht=0;ht<it.length;ht++){const ft=it.get(ht);if(ft.hidden||ft.writingMode===a.ao.vertical&&!rt){Tl(ft.numGlyphs,$e);continue}rt=!1;const ot=new a.P(ft.anchorX,ft.anchorY),St={getElevation:pe,pitchedLabelPlaneMatrix:C,lineVertexArray:tt,pitchWithMap:k,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:ot,unwrappedTileID:q,width:ie,height:ae,translation:ye},Wt=po(ft.anchorX,ft.anchorY,St);if(!Vr(Wt.point,Xe)){Tl(ft.numGlyphs,$e);continue}const Ut=Ks(l.transform.cameraToCenterDistance,Wt.signedDistanceFromCamera),jt=a.ap(Se,Fe,ft),Qt=k?jt*l.transform.getPitchedTextCorrection(ft.anchorX,ft.anchorY,q)/Ut:jt*Ut,On=nl({projectionContext:St,pitchedLabelPlaneMatrixInverse:S,symbol:ft,fontSize:Qt,flip:!1,keepUpright:K,glyphOffsetArray:B.glyphOffsetArray,dynamicLayoutVertexArray:$e,aspectRatio:ct,rotateToLine:N});rt=On.useVertical,(On.notEnoughRoom||rt||On.needsFlipping&&nl({projectionContext:St,pitchedLabelPlaneMatrixInverse:S,symbol:ft,fontSize:Qt,flip:!0,keepUpright:K,glyphOffsetArray:B.glyphOffsetArray,dynamicLayoutVertexArray:$e,aspectRatio:ct,rotateToLine:N}).notEnoughRoom)&&Tl(ft.numGlyphs,$e)}p?B.text.dynamicLayoutVertexBuffer.updateData($e):B.icon.dynamicLayoutVertexBuffer.updateData($e)}function Ni(B,l,p,C,S,k,K,N){const q=k.glyphStartIndex+k.numGlyphs,ie=k.lineStartIndex,ae=k.lineStartIndex+k.lineLength,ye=l.getoffsetX(k.glyphStartIndex),pe=l.getoffsetX(q-1),Se=da(B*ye,p,C,S,k.segment,ie,ae,N,K);if(!Se)return null;const Fe=da(B*pe,p,C,S,k.segment,ie,ae,N,K);return Fe?N.projectionCache.anyProjectionOccluded?null:{first:Se,last:Fe}:null}function ri(B,l,p,C){return B===a.ao.horizontal&&Math.abs(p.y-l.y)>Math.abs(p.x-l.x)*C?{useVertical:!0}:(B===a.ao.vertical?l.y<p.y:l.x>p.x)?{needsFlipping:!0}:null}function nl(B){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:p,symbol:C,fontSize:S,flip:k,keepUpright:K,glyphOffsetArray:N,dynamicLayoutVertexArray:q,aspectRatio:ie,rotateToLine:ae}=B,ye=S/24,pe=C.lineOffsetX*ye,Se=C.lineOffsetY*ye;let Fe;if(C.numGlyphs>1){const Xe=C.glyphStartIndex+C.numGlyphs,$e=C.lineStartIndex,tt=C.lineStartIndex+C.lineLength,it=Ni(ye,N,pe,Se,k,C,ae,l);if(!it)return{notEnoughRoom:!0};const ct=Jl(it.first.point.x,it.first.point.y,l,p),rt=Jl(it.last.point.x,it.last.point.y,l,p);if(K&&!k){const ht=ri(C.writingMode,ct,rt,ie);if(ht)return ht}Fe=[it.first];for(let ht=C.glyphStartIndex+1;ht<Xe-1;ht++){const ft=da(ye*N.getoffsetX(ht),pe,Se,k,C.segment,$e,tt,l,ae);if(!ft)return{notEnoughRoom:!0};Fe.push(ft)}Fe.push(it.last)}else{if(K&&!k){const $e=Ki(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,tt=C.lineStartIndex+C.segment+1,it=new a.P(l.lineVertexArray.getx(tt),l.lineVertexArray.gety(tt)),ct=Ki(it.x,it.y,l),rt=ct.signedDistanceFromCamera>0?ct.point:Xc(l.tileAnchorPoint,it,$e,1,l),ht=Jl($e.x,$e.y,l,p),ft=Jl(rt.x,rt.y,l,p),ot=ri(C.writingMode,ht,ft,ie);if(ot)return ot}const Xe=da(ye*N.getoffsetX(C.glyphStartIndex),pe,Se,k,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,l,ae);if(!Xe||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Fe=[Xe]}for(const Xe of Fe)a.av(q,Xe.point,Xe.angle);return{}}function Xc(B,l,p,C,S){const k=B.add(B.sub(l)._unit()),K=Ki(k.x,k.y,S).point,N=p.sub(K);return p.add(N._mult(C/N.mag()))}function kl(B,l,p){const C=l.projectionCache;if(C.projections[B])return C.projections[B];const S=new a.P(l.lineVertexArray.getx(B),l.lineVertexArray.gety(B)),k=Ki(S.x,S.y,l);if(k.signedDistanceFromCamera>0)return C.projections[B]=k.point,C.anyProjectionOccluded=C.anyProjectionOccluded||k.isOccluded,k.point;const K=B-p.direction;return Xc(p.distanceFromAnchor===0?l.tileAnchorPoint:new a.P(l.lineVertexArray.getx(K),l.lineVertexArray.gety(K)),S,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,l)}function Ki(B,l,p){const C=B+p.translation[0],S=l+p.translation[1];let k;return p.pitchWithMap?(k=$o(C,S,p.pitchedLabelPlaneMatrix,p.getElevation),k.isOccluded=!1):(k=p.transform.projectTileCoordinates(C,S,p.unwrappedTileID,p.getElevation),k.point.x=(.5*k.point.x+.5)*p.width,k.point.y=(.5*-k.point.y+.5)*p.height),k}function Jl(B,l,p,C){if(p.pitchWithMap){const S=[B,l,0,1];return a.aw(S,S,C),p.transform.projectTileCoordinates(S[0]/S[3],S[1]/S[3],p.unwrappedTileID,p.getElevation).point}return{x:B/p.width*2-1,y:1-l/p.height*2}}function po(B,l,p){return p.transform.projectTileCoordinates(B,l,p.unwrappedTileID,p.getElevation)}function Oa(B,l,p){return B._unit()._perp()._mult(l*p)}function eu(B,l,p,C,S,k,K,N,q){if(N.projectionCache.offsets[B])return N.projectionCache.offsets[B];const ie=p.add(l);if(B+q.direction<C||B+q.direction>=S)return N.projectionCache.offsets[B]=ie,ie;const ae=kl(B+q.direction,N,q),ye=Oa(ae.sub(p),K,q.direction),pe=p.add(ye),Se=ae.add(ye);return N.projectionCache.offsets[B]=a.ax(k,ie,pe,Se)||ie,N.projectionCache.offsets[B]}function da(B,l,p,C,S,k,K,N,q){const ie=C?B-l:B+l;let ae=ie>0?1:-1,ye=0;C&&(ae*=-1,ye=Math.PI),ae<0&&(ye+=Math.PI);let pe,Se=ae>0?k+S:k+S+1;N.projectionCache.cachedAnchorPoint?pe=N.projectionCache.cachedAnchorPoint:(pe=Ki(N.tileAnchorPoint.x,N.tileAnchorPoint.y,N).point,N.projectionCache.cachedAnchorPoint=pe);let Fe,Xe,$e=pe,tt=pe,it=0,ct=0;const rt=Math.abs(ie),ht=[];let ft;for(;it+ct<=rt;){if(Se+=ae,Se<k||Se>=K)return null;it+=ct,tt=$e,Xe=Fe;const Wt={absOffsetX:rt,direction:ae,distanceFromAnchor:it,previousVertex:tt};if($e=kl(Se,N,Wt),p===0)ht.push(tt),ft=$e.sub(tt);else{let Ut;const jt=$e.sub(tt);Ut=jt.mag()===0?Oa(kl(Se+ae,N,Wt).sub($e),p,ae):Oa(jt,p,ae),Xe||(Xe=tt.add(Ut)),Fe=eu(Se,Ut,$e,k,K,Xe,p,N,Wt),ht.push(Xe),ft=Fe.sub(Xe)}ct=ft.mag()}const ot=ft._mult((rt-it)/ct)._add(Xe||tt),St=ye+Math.atan2($e.y-tt.y,$e.x-tt.x);return ht.push(ot),{point:ot,angle:q?St:0,path:ht}}const Ho=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Tl(B,l){for(let p=0;p<B;p++){const C=l.length;l.resize(C+4),l.float32.set(Ho,3*C)}}function Zo(B,l,p){const C=l[0],S=l[1];return B[0]=p[0]*C+p[4]*S+p[12],B[1]=p[1]*C+p[5]*S+p[13],B[3]=p[3]*C+p[7]*S+p[15],B}const Wi=100;class Rl{constructor(l,p=new Ri(l.width+200,l.height+200,25),C=new Ri(l.width+200,l.height+200,25)){this.transform=l,this.grid=p,this.ignoredGrid=C,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Wi,this.screenBottomBoundary=l.height+Wi,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,p,C,S,k,K,N,q,ie,ae,ye,pe){const Se=this.projectAndGetPerspectiveRatio(l.anchorPointX+q[0],l.anchorPointY+q[1],k,ae,pe),Fe=C*Se.perspectiveRatio;let Xe;if(K||N)Xe=this._projectCollisionBox(l,Fe,S,k,K,N,q,Se,ae,ye,pe);else{const ft=Se.x+(ye?ye.x*Fe:0),ot=Se.y+(ye?ye.y*Fe:0);Xe={allPointsOccluded:!1,box:[ft+l.x1*Fe,ot+l.y1*Fe,ft+l.x2*Fe,ot+l.y2*Fe]}}const[$e,tt,it,ct]=Xe.box,rt=K?Xe.allPointsOccluded:Se.isOccluded;let ht=rt;return ht||(ht=Se.perspectiveRatio<this.perspectiveRatioCutoff),ht||(ht=!this.isInsideGrid($e,tt,it,ct)),ht||p!=="always"&&this.grid.hitTest($e,tt,it,ct,p,ie)?{box:[$e,tt,it,ct],placeable:!1,offscreen:!1,occluded:rt}:{box:[$e,tt,it,ct],placeable:!0,offscreen:this.isOffscreen($e,tt,it,ct),occluded:rt}}placeCollisionCircles(l,p,C,S,k,K,N,q,ie,ae,ye,pe,Se,Fe){const Xe=[],$e=new a.P(p.anchorX,p.anchorY),tt=this.getPerspectiveRatio($e.x,$e.y,K,Fe),it=(ie?k*this.transform.getPitchedTextCorrection(p.anchorX,p.anchorY,K)/tt:k*tt)/a.aB,ct={getElevation:Fe,pitchedLabelPlaneMatrix:N,lineVertexArray:C,pitchWithMap:ie,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:$e,unwrappedTileID:K,width:this.transform.width,height:this.transform.height,translation:Se},rt=Ni(it,S,p.lineOffsetX*it,p.lineOffsetY*it,!1,p,!1,ct);let ht=!1,ft=!1,ot=!0;if(rt){const St=.5*ye*tt+pe,Wt=new a.P(-100,-100),Ut=new a.P(this.screenRightBoundary,this.screenBottomBoundary),jt=new gr,Qt=rt.first,On=rt.last;let In=[];for(let Hi=Qt.path.length-1;Hi>=1;Hi--)In.push(Qt.path[Hi]);for(let Hi=1;Hi<On.path.length;Hi++)In.push(On.path[Hi]);const ln=2.5*St;if(ie){const Hi=this.projectPathToScreenSpace(In,ct);In=Hi.some((Er=>Er.signedDistanceFromCamera<=0))?[]:Hi.map((Er=>Er.point))}let $n=[];if(In.length>0){const Hi=In[0].clone(),Er=In[0].clone();for(let Lo=1;Lo<In.length;Lo++)Hi.x=Math.min(Hi.x,In[Lo].x),Hi.y=Math.min(Hi.y,In[Lo].y),Er.x=Math.max(Er.x,In[Lo].x),Er.y=Math.max(Er.y,In[Lo].y);$n=Hi.x>=Wt.x&&Er.x<=Ut.x&&Hi.y>=Wt.y&&Er.y<=Ut.y?[In]:Er.x<Wt.x||Hi.x>Ut.x||Er.y<Wt.y||Hi.y>Ut.y?[]:a.ay([In],Wt.x,Wt.y,Ut.x,Ut.y)}for(const Hi of $n){jt.reset(Hi,.25*St);let Er=0;Er=jt.length<=.5*St?1:Math.ceil(jt.paddedLength/ln)+1;for(let Lo=0;Lo<Er;Lo++){const No=Lo/Math.max(Er-1,1),hr=jt.lerp(No),Jo=hr.x+Wi,Ta=hr.y+Wi;Xe.push(Jo,Ta,St,0);const Is=Jo-St,Ra=Ta-St,js=Jo+St,na=Ta+St;if(ot=ot&&this.isOffscreen(Is,Ra,js,na),ft=ft||this.isInsideGrid(Is,Ra,js,na),l!=="always"&&this.grid.hitTestCircle(Jo,Ta,St,l,ae)&&(ht=!0,!q))return{circles:[],offscreen:!1,collisionDetected:ht}}}}return{circles:!q&&ht||!ft||tt<this.perspectiveRatioCutoff?[]:Xe,offscreen:ot,collisionDetected:ht}}projectPathToScreenSpace(l,p){const C=(function(S,k){const K=a.L();return a.aq(K,k.pitchedLabelPlaneMatrix),S.map((N=>{const q=$o(N.x,N.y,K,k.getElevation),ie=k.transform.projectTileCoordinates(q.point.x,q.point.y,k.unwrappedTileID,k.getElevation);return ie.point.x=(.5*ie.point.x+.5)*k.width,ie.point.y=(.5*-ie.point.y+.5)*k.height,ie}))})(l,p);return(function(S){let k=0,K=0,N=0,q=0;for(let ie=0;ie<S.length;ie++)S[ie].isOccluded?(N=ie+1,q=0):(q++,q>K&&(K=q,k=N));return S.slice(k,k+K)})(C)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[],C=new a.a2;for(const ye of l){const pe=new a.P(ye.x+Wi,ye.y+Wi);C.extend(pe),p.push(pe)}const{minX:S,minY:k,maxX:K,maxY:N}=C,q=this.grid.query(S,k,K,N).concat(this.ignoredGrid.query(S,k,K,N)),ie={},ae={};for(const ye of q){const pe=ye.key;if(ie[pe.bucketInstanceId]===void 0&&(ie[pe.bucketInstanceId]={}),ie[pe.bucketInstanceId][pe.featureIndex])continue;const Se=[new a.P(ye.x1,ye.y1),new a.P(ye.x2,ye.y1),new a.P(ye.x2,ye.y2),new a.P(ye.x1,ye.y2)];a.az(p,Se)&&(ie[pe.bucketInstanceId][pe.featureIndex]=!0,ae[pe.bucketInstanceId]===void 0&&(ae[pe.bucketInstanceId]=[]),ae[pe.bucketInstanceId].push(pe.featureIndex))}return ae}insertCollisionBox(l,p,C,S,k,K){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:k,collisionGroupID:K,overlapMode:p},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,p,C,S,k,K){const N=C?this.ignoredGrid:this.grid,q={bucketInstanceId:S,featureIndex:k,collisionGroupID:K,overlapMode:p};for(let ie=0;ie<l.length;ie+=4)N.insertCircle(q,l[ie],l[ie+1],l[ie+2])}projectAndGetPerspectiveRatio(l,p,C,S,k){if(k){let K;S?(K=[l,p,S(l,p),1],a.aw(K,K,k)):(K=[l,p,0,1],Zo(K,K,k));const N=K[3];return{x:(K[0]/N+1)/2*this.transform.width+Wi,y:(-K[1]/N+1)/2*this.transform.height+Wi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/N*.5,isOccluded:!1,signedDistanceFromCamera:N}}{const K=this.transform.projectTileCoordinates(l,p,C,S);return{x:(K.point.x+1)/2*this.transform.width+Wi,y:(1-K.point.y)/2*this.transform.height+Wi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/K.signedDistanceFromCamera*.5,isOccluded:K.isOccluded,signedDistanceFromCamera:K.signedDistanceFromCamera}}}getPerspectiveRatio(l,p,C,S){const k=this.transform.projectTileCoordinates(l,p,C,S);return .5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5}isOffscreen(l,p,C,S){return C<Wi||l>=this.screenRightBoundary||S<Wi||p>this.screenBottomBoundary}isInsideGrid(l,p,C,S){return C>=0&&l<this.gridRightBoundary&&S>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const l=a.ai([]);return a.M(l,l,[-100,-100,0]),l}_projectCollisionBox(l,p,C,S,k,K,N,q,ie,ae,ye){let pe=1,Se=0,Fe=0,Xe=1;const $e=l.anchorPointX+N[0],tt=l.anchorPointY+N[1];if(K&&!k){const In=this.projectAndGetPerspectiveRatio($e+1,tt,S,ie,ye),ln=In.x-q.x,$n=Math.atan((In.y-q.y)/ln)+(ln<0?Math.PI:0),Hi=Math.sin($n),Er=Math.cos($n);pe=Er,Se=Hi,Fe=-Hi,Xe=Er}else if(!K&&k){const In=Pi(this.transform);pe=In.vecEast[0],Se=In.vecEast[1],Fe=In.vecSouth[0],Xe=In.vecSouth[1]}let it=q.x,ct=q.y,rt=p;k&&(it=$e,ct=tt,rt=Math.pow(2,-(this.transform.zoom-C.overscaledZ)),rt*=this.transform.getPitchedTextCorrection($e,tt,S),ae||(rt*=a.ae(.5+q.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ae&&(it+=pe*ae.x*rt+Fe*ae.y*rt,ct+=Se*ae.x*rt+Xe*ae.y*rt);const ht=l.x1*rt,ft=l.x2*rt,ot=(ht+ft)/2,St=l.y1*rt,Wt=l.y2*rt,Ut=(St+Wt)/2,jt=[{offsetX:ht,offsetY:St},{offsetX:ot,offsetY:St},{offsetX:ft,offsetY:St},{offsetX:ft,offsetY:Ut},{offsetX:ft,offsetY:Wt},{offsetX:ot,offsetY:Wt},{offsetX:ht,offsetY:Wt},{offsetX:ht,offsetY:Ut}];let Qt=[];for(const{offsetX:In,offsetY:ln}of jt)Qt.push(new a.P(it+pe*In+Fe*ln,ct+Se*In+Xe*ln));let On=!1;if(k){const In=Qt.map((ln=>this.projectAndGetPerspectiveRatio(ln.x,ln.y,S,ie,ye)));On=In.some((ln=>!ln.isOccluded)),Qt=In.map((ln=>new a.P(ln.x,ln.y)))}else On=!0;return{box:a.aA(Qt),allPointsOccluded:!On}}}class rs{constructor(l,p,C,S){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):S&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class Dl{constructor(l,p,C,S,k){this.text=new rs(l?l.text:null,p,C,k),this.icon=new rs(l?l.icon:null,p,S,k)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class tu{constructor(l,p,C){this.text=l,this.icon=p,this.skipFade=C}}class Eu{constructor(l,p,C,S,k){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=C,this.bucketIndex=S,this.tileID=k}}class Jc{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:C=>C.collisionGroupID===p}}return this.collisionGroups[l]}}function tc(B,l,p,C,S){const{horizontalAlign:k,verticalAlign:K}=a.aH(B);return new a.P(-(k-.5)*l+C[0]*S,-(K-.5)*p+C[1]*S)}class ml{constructor(l,p,C,S,k){this.transform=l.clone(),this.terrain=p,this.collisionIndex=new Rl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new Jc(S),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const p=this.terrain;return p?(C,S)=>p.getElevation(l,C,S):null}getBucketParts(l,p,C,S){const k=C.getBucket(p),K=C.latestFeatureIndex;if(!k||!K||p.id!==k.layerIds[0])return;const N=C.collisionBoxArray,q=k.layers[0].layout,ie=k.layers[0].paint,ae=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),ye=C.tileSize/a.$,pe=C.tileID.toUnwrapped(),Se=q.get("text-rotation-alignment")==="map",Fe=a.aC(C,1,this.transform.zoom),Xe=a.aD(this.collisionIndex.transform,C,ie.get("text-translate"),ie.get("text-translate-anchor")),$e=a.aD(this.collisionIndex.transform,C,ie.get("icon-translate"),ie.get("icon-translate-anchor")),tt=cr(Se,this.transform,Fe);this.retainedQueryData[k.bucketInstanceId]=new Eu(k.bucketInstanceId,K,k.sourceLayerIndex,k.index,C.tileID);const it={bucket:k,layout:q,translationText:Xe,translationIcon:$e,unwrappedTileID:pe,pitchedLabelPlaneMatrix:tt,scale:ae,textPixelRatio:ye,holdingForFade:C.holdingForSymbolFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:a.an(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(S)for(const ct of k.sortKeyRanges){const{sortKey:rt,symbolInstanceStart:ht,symbolInstanceEnd:ft}=ct;l.push({sortKey:rt,symbolInstanceStart:ht,symbolInstanceEnd:ft,parameters:it})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:it})}attemptAnchorPlacement(l,p,C,S,k,K,N,q,ie,ae,ye,pe,Se,Fe,Xe,$e,tt,it,ct,rt){const ht=a.aE[l.textAnchor],ft=[l.textOffset0,l.textOffset1],ot=tc(ht,C,S,ft,k),St=this.collisionIndex.placeCollisionBox(p,pe,q,ie,ae,N,K,$e,ye.predicate,ct,ot,rt);if((!it||this.collisionIndex.placeCollisionBox(it,pe,q,ie,ae,N,K,tt,ye.predicate,ct,ot,rt).placeable)&&St.placeable){let Wt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID].text&&(Wt=this.prevPlacement.variableOffsets[Se.crossTileID].anchor),Se.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Se.crossTileID]={textOffset:ft,width:C,height:S,anchor:ht,textBoxScale:k,prevAnchor:Wt},this.markUsedJustification(Fe,ht,Se,Xe),Fe.allowVerticalPlacement&&(this.markUsedOrientation(Fe,Xe,Se),this.placedOrientations[Se.crossTileID]=Xe),{shift:ot,placedGlyphBoxes:St}}}placeLayerBucketPart(l,p,C){const{bucket:S,layout:k,translationText:K,translationIcon:N,unwrappedTileID:q,pitchedLabelPlaneMatrix:ie,textPixelRatio:ae,holdingForFade:ye,collisionBoxArray:pe,partiallyEvaluatedTextSize:Se,collisionGroup:Fe}=l.parameters,Xe=k.get("text-optional"),$e=k.get("icon-optional"),tt=a.aF(k,"text-overlap","text-allow-overlap"),it=tt==="always",ct=a.aF(k,"icon-overlap","icon-allow-overlap"),rt=ct==="always",ht=k.get("text-rotation-alignment")==="map",ft=k.get("text-pitch-alignment")==="map",ot=k.get("icon-text-fit")!=="none",St=k.get("symbol-z-order")==="viewport-y",Wt=it&&(rt||!S.hasIconData()||$e),Ut=rt&&(it||!S.hasTextData()||Xe);!S.collisionArrays&&pe&&S.deserializeCollisionBoxes(pe);const jt=this.retainedQueryData[S.bucketInstanceId].tileID,Qt=this._getTerrainElevationFunc(jt),On=this.transform.getFastPathSimpleProjectionMatrix(jt),In=(ln,$n,Hi)=>{var Er,Lo;if(p[ln.crossTileID])return;if(ye)return void(this.placements[ln.crossTileID]=new tu(!1,!1,!1));let No=!1,hr=!1,Jo=!0,Ta=null,Is={box:null,placeable:!1,offscreen:null,occluded:!1},Ra={placeable:!1},js=null,na=null,ma=null,DA=0,ia=0,ul=0;$n.textFeatureIndex?DA=$n.textFeatureIndex:ln.useRuntimeCollisionCircles&&(DA=ln.featureIndex),$n.verticalTextFeatureIndex&&(ia=$n.verticalTextFeatureIndex);const dh=$n.textBox;if(dh){const _l=gs=>{let ra=a.ao.horizontal;if(S.allowVerticalPlacement&&!gs&&this.prevPlacement){const Ku=this.prevPlacement.placedOrientations[ln.crossTileID];Ku&&(this.placedOrientations[ln.crossTileID]=Ku,ra=Ku,this.markUsedOrientation(S,ra,ln))}return ra},cl=(gs,ra)=>{if(S.allowVerticalPlacement&&ln.numVerticalGlyphVertices>0&&$n.verticalTextBox){for(const Ku of S.writingModes)if(Ku===a.ao.vertical?(Is=ra(),Ra=Is):Is=gs(),Is&&Is.placeable)break}else Is=gs()},Dc=ln.textAnchorOffsetStartIndex,sd=ln.textAnchorOffsetEndIndex;if(sd===Dc){const gs=(ra,Ku)=>{const Ns=this.collisionIndex.placeCollisionBox(ra,tt,ae,jt,q,ft,ht,K,Fe.predicate,Qt,void 0,On);return Ns&&Ns.placeable&&(this.markUsedOrientation(S,Ku,ln),this.placedOrientations[ln.crossTileID]=Ku),Ns};cl((()=>gs(dh,a.ao.horizontal)),(()=>{const ra=$n.verticalTextBox;return S.allowVerticalPlacement&&ln.numVerticalGlyphVertices>0&&ra?gs(ra,a.ao.vertical):{box:null,offscreen:null}})),_l(Is&&Is.placeable)}else{let gs=a.aE[(Lo=(Er=this.prevPlacement)===null||Er===void 0?void 0:Er.variableOffsets[ln.crossTileID])===null||Lo===void 0?void 0:Lo.anchor];const ra=(Ns,Pc,Uu)=>{const gu=Ns.x2-Ns.x1,Kc=Ns.y2-Ns.y1,Rp=ln.textBoxScale,fh=ot&&ct==="never"?Pc:null;let ph=null,lA=tt==="never"?1:2,Nf="never";gs&&lA++;for(let Gf=0;Gf<lA;Gf++){for(let mh=Dc;mh<sd;mh++){const Zm=S.textAnchorOffsets.get(mh);if(gs&&Zm.textAnchor!==gs)continue;const uA=this.attemptAnchorPlacement(Zm,Ns,gu,Kc,Rp,ht,ft,ae,jt,q,Fe,Nf,ln,S,Uu,K,N,fh,Qt);if(uA&&(ph=uA.placedGlyphBoxes,ph&&ph.placeable))return No=!0,Ta=uA.shift,ph}gs?gs=null:Nf=tt}return C&&!ph&&(ph={box:this.collisionIndex.placeCollisionBox(dh,"always",ae,jt,q,ft,ht,K,Fe.predicate,Qt,void 0,On).box,offscreen:!1,placeable:!1,occluded:!1}),ph};cl((()=>ra(dh,$n.iconBox,a.ao.horizontal)),(()=>{const Ns=$n.verticalTextBox;return S.allowVerticalPlacement&&(!Is||!Is.placeable)&&ln.numVerticalGlyphVertices>0&&Ns?ra(Ns,$n.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Is&&(No=Is.placeable,Jo=Is.offscreen);const Ku=_l(Is&&Is.placeable);if(!No&&this.prevPlacement){const Ns=this.prevPlacement.variableOffsets[ln.crossTileID];Ns&&(this.variableOffsets[ln.crossTileID]=Ns,this.markUsedJustification(S,Ns.anchor,ln,Ku))}}}if(js=Is,No=js&&js.placeable,Jo=js&&js.offscreen,ln.useRuntimeCollisionCircles&&ln.centerJustifiedTextSymbolIndex>=0){const _l=S.text.placedSymbolArray.get(ln.centerJustifiedTextSymbolIndex),cl=a.ap(S.textSizeData,Se,_l),Dc=k.get("text-padding");na=this.collisionIndex.placeCollisionCircles(tt,_l,S.lineVertexArray,S.glyphOffsetArray,cl,q,ie,C,ft,Fe.predicate,ln.collisionCircleDiameter,Dc,K,Qt),na.circles.length&&na.collisionDetected&&!C&&a.w("Collisions detected, but collision boxes are not shown"),No=it||na.circles.length>0&&!na.collisionDetected,Jo=Jo&&na.offscreen}if($n.iconFeatureIndex&&(ul=$n.iconFeatureIndex),$n.iconBox){const _l=cl=>this.collisionIndex.placeCollisionBox(cl,ct,ae,jt,q,ft,ht,N,Fe.predicate,Qt,ot&&Ta?Ta:void 0,On);Ra&&Ra.placeable&&$n.verticalIconBox?(ma=_l($n.verticalIconBox),hr=ma.placeable):(ma=_l($n.iconBox),hr=ma.placeable),Jo=Jo&&ma.offscreen}const rd=Xe||ln.numHorizontalGlyphVertices===0&&ln.numVerticalGlyphVertices===0,od=$e||ln.numIconVertices===0;rd||od?od?rd||(hr=hr&&No):No=hr&&No:hr=No=hr&&No;const mu=hr&&ma.placeable;if(No&&js.placeable&&this.collisionIndex.insertCollisionBox(js.box,tt,k.get("text-ignore-placement"),S.bucketInstanceId,Ra&&Ra.placeable&&ia?ia:DA,Fe.ID),mu&&this.collisionIndex.insertCollisionBox(ma.box,ct,k.get("icon-ignore-placement"),S.bucketInstanceId,ul,Fe.ID),na&&No&&this.collisionIndex.insertCollisionCircles(na.circles,tt,k.get("text-ignore-placement"),S.bucketInstanceId,DA,Fe.ID),C&&this.storeCollisionData(S.bucketInstanceId,Hi,$n,js,ma,na),ln.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ln.crossTileID]=new tu((No||Wt)&&!js?.occluded,(hr||Ut)&&!ma?.occluded,Jo||S.justReloaded),p[ln.crossTileID]=!0};if(St){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ln=S.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let $n=ln.length-1;$n>=0;--$n){const Hi=ln[$n];In(S.symbolInstances.get(Hi),S.collisionArrays[Hi],Hi)}}else for(let ln=l.symbolInstanceStart;ln<l.symbolInstanceEnd;ln++)In(S.symbolInstances.get(ln),S.collisionArrays[ln],ln);S.justReloaded=!1}storeCollisionData(l,p,C,S,k,K){if(C.textBox||C.iconBox){let N,q;this.collisionBoxArrays.has(l)?N=this.collisionBoxArrays.get(l):(N=new Map,this.collisionBoxArrays.set(l,N)),N.has(p)?q=N.get(p):(q={text:null,icon:null},N.set(p,q)),C.textBox&&(q.text=S.box),C.iconBox&&(q.icon=k.box)}if(K){let N=this.collisionCircleArrays[l];N===void 0&&(N=this.collisionCircleArrays[l]=[]);for(let q=0;q<K.circles.length;q+=4)N.push(K.circles[q+0]-Wi),N.push(K.circles[q+1]-Wi),N.push(K.circles[q+2]),N.push(K.collisionDetected?1:0)}}markUsedJustification(l,p,C,S){let k;k=S===a.ao.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[a.aG(p)];const K=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const N of K)N>=0&&(l.text.placedSymbolArray.get(N).crossTileID=k>=0&&N!==k?0:C.crossTileID)}markUsedOrientation(l,p,C){const S=p===a.ao.horizontal||p===a.ao.horizontalOnly?p:0,k=p===a.ao.vertical?p:0,K=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const N of K)l.text.placedSymbolArray.get(N).placedOrientation=S;C.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=k)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let C=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const S=p?p.symbolFadeChange(l):1,k=p?p.opacities:{},K=p?p.variableOffsets:{},N=p?p.placedOrientations:{};for(const q in this.placements){const ie=this.placements[q],ae=k[q];ae?(this.opacities[q]=new Dl(ae,S,ie.text,ie.icon),C=C||ie.text!==ae.text.placed||ie.icon!==ae.icon.placed):(this.opacities[q]=new Dl(null,S,ie.text,ie.icon,ie.skipFade),C=C||ie.text||ie.icon)}for(const q in k){const ie=k[q];if(!this.opacities[q]){const ae=new Dl(ie,S,!1,!1);ae.isHidden()||(this.opacities[q]=ae,C=C||ie.text.placed||ie.icon.placed)}}for(const q in K)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=K[q]);for(const q in N)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=N[q]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)}updateLayerOpacities(l,p){const C={};for(const S of p){const k=S.getBucket(l);k&&S.latestFeatureIndex&&l.id===k.layerIds[0]&&this.updateBucketOpacities(k,S.tileID,C,S.collisionBoxArray)}}updateBucketOpacities(l,p,C,S){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const k=l.layers[0],K=k.layout,N=new Dl(null,0,!1,!1,!0),q=K.get("text-allow-overlap"),ie=K.get("icon-allow-overlap"),ae=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ye=K.get("text-rotation-alignment")==="map",pe=K.get("text-pitch-alignment")==="map",Se=K.get("icon-text-fit")!=="none",Fe=new Dl(null,0,q&&(ie||!l.hasIconData()||K.get("icon-optional")),ie&&(q||!l.hasTextData()||K.get("text-optional")),!0);!l.collisionArrays&&S&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(S);const Xe=(tt,it,ct)=>{for(let rt=0;rt<it/4;rt++)tt.opacityVertexArray.emplaceBack(ct);tt.hasVisibleVertices=tt.hasVisibleVertices||ct!==il},$e=this.collisionBoxArrays.get(l.bucketInstanceId);for(let tt=0;tt<l.symbolInstances.length;tt++){const it=l.symbolInstances.get(tt),{numHorizontalGlyphVertices:ct,numVerticalGlyphVertices:rt,crossTileID:ht}=it;let ft=this.opacities[ht];C[ht]?ft=N:ft||(ft=Fe,this.opacities[ht]=ft),C[ht]=!0;const ot=it.numIconVertices>0,St=this.placedOrientations[it.crossTileID],Wt=St===a.ao.vertical,Ut=St===a.ao.horizontal||St===a.ao.horizontalOnly;if(ct>0||rt>0){const Qt=rc(ft.text);Xe(l.text,ct,Wt?il:Qt),Xe(l.text,rt,Ut?il:Qt);const On=ft.text.isHidden();[it.rightJustifiedTextSymbolIndex,it.centerJustifiedTextSymbolIndex,it.leftJustifiedTextSymbolIndex].forEach(($n=>{$n>=0&&(l.text.placedSymbolArray.get($n).hidden=On||Wt?1:0)})),it.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(it.verticalPlacedTextSymbolIndex).hidden=On||Ut?1:0);const In=this.variableOffsets[it.crossTileID];In&&this.markUsedJustification(l,In.anchor,it,St);const ln=this.placedOrientations[it.crossTileID];ln&&(this.markUsedJustification(l,"left",it,ln),this.markUsedOrientation(l,ln,it))}if(ot){const Qt=rc(ft.icon),On=!(Se&&it.verticalPlacedIconSymbolIndex&&Wt);it.placedIconSymbolIndex>=0&&(Xe(l.icon,it.numIconVertices,On?Qt:il),l.icon.placedSymbolArray.get(it.placedIconSymbolIndex).hidden=ft.icon.isHidden()),it.verticalPlacedIconSymbolIndex>=0&&(Xe(l.icon,it.numVerticalIconVertices,On?il:Qt),l.icon.placedSymbolArray.get(it.verticalPlacedIconSymbolIndex).hidden=ft.icon.isHidden())}const jt=$e&&$e.has(tt)?$e.get(tt):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Qt=l.collisionArrays[tt];if(Qt){let On=new a.P(0,0);if(Qt.textBox||Qt.verticalTextBox){let In=!0;if(ae){const ln=this.variableOffsets[ht];ln?(On=tc(ln.anchor,ln.width,ln.height,ln.textOffset,ln.textBoxScale),ye&&On._rotate(pe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):In=!1}if(Qt.textBox||Qt.verticalTextBox){let ln;Qt.textBox&&(ln=Wt),Qt.verticalTextBox&&(ln=Ut),Oo(l.textCollisionBox.collisionVertexArray,ft.text.placed,!In||ln,jt.text,On.x,On.y)}}if(Qt.iconBox||Qt.verticalIconBox){const In=!!(!Ut&&Qt.verticalIconBox);let ln;Qt.iconBox&&(ln=In),Qt.verticalIconBox&&(ln=!In),Oo(l.iconCollisionBox.collisionVertexArray,ft.icon.placed,ln,jt.icon,Se?On.x:0,Se?On.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,p){const C=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*C>l}setStale(){this.stale=!0}}function Oo(B,l,p,C,S,k){C&&C.length!==0||(C=[0,0,0,0]);const K=C[0]-Wi,N=C[1]-Wi,q=C[2]-Wi,ie=C[3]-Wi;B.emplaceBack(l?1:0,p?1:0,S||0,k||0,K,N),B.emplaceBack(l?1:0,p?1:0,S||0,k||0,q,N),B.emplaceBack(l?1:0,p?1:0,S||0,k||0,q,ie),B.emplaceBack(l?1:0,p?1:0,S||0,k||0,K,ie)}const nc=Math.pow(2,25),nu=Math.pow(2,24),Ec=Math.pow(2,17),ic=Math.pow(2,16),Bc=Math.pow(2,9),Dh=Math.pow(2,8),fa=Math.pow(2,1);function rc(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;const l=B.placed?1:0,p=Math.floor(127*B.opacity);return p*nc+l*nu+p*Ec+l*ic+p*Bc+l*Dh+p*fa+l}const il=0;class eA{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,p,C,S,k){const K=this._bucketParts;for(;this._currentTileIndex<l.length;)if(p.getBucketParts(K,S,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,K.sort(((N,q)=>N.sortKey-q.sortKey)));this._currentPartIndex<K.length;)if(p.placeLayerBucketPart(K[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,k())return!0;return!1}}class iu{constructor(l,p,C,S,k,K,N,q){this.placement=new ml(l,p,K,N,q),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(l,p,C){const S=R(),k=()=>!this._forceFullPlacement&&R()-S>2;for(;this._currentPlacementIndex>=0;){const K=p[l[this._currentPlacementIndex]],N=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=N)&&(!K.maxzoom||K.maxzoom>N)){if(this._inProgressLayer||(this._inProgressLayer=new eA(K)),this._inProgressLayer.continuePlacement(C[K.source],this.placement,this._showCollisionBoxes,K,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Fa=512/a.$/2;class Ms{constructor(l,p,C){this.tileID=l,this.bucketInstanceId=C,this._symbolsByKey={};const S=new Map;for(let k=0;k<p.length;k++){const K=p.get(k),N=K.key,q=S.get(N);q?q.push(K):S.set(N,[K])}for(const[k,K]of S){const N={positions:K.map((q=>({x:Math.floor(q.anchorX*Fa),y:Math.floor(q.anchorY*Fa)}))),crossTileIDs:K.map((q=>q.crossTileID))};if(N.positions.length>128){const q=new a.aI(N.positions.length,16,Uint16Array);for(const{x:ie,y:ae}of N.positions)q.add(ie,ae);q.finish(),delete N.positions,N.index=q}this._symbolsByKey[k]=N}}getScaledCoordinates(l,p){const{x:C,y:S,z:k}=this.tileID.canonical,{x:K,y:N,z:q}=p.canonical,ie=Fa/Math.pow(2,q-k),ae=(N*a.$+l.anchorY)*ie,ye=S*a.$*Fa;return{x:Math.floor((K*a.$+l.anchorX)*ie-C*a.$*Fa),y:Math.floor(ae-ye)}}findMatches(l,p,C){const S=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let k=0;k<l.length;k++){const K=l.get(k);if(K.crossTileID)continue;const N=this._symbolsByKey[K.key];if(!N)continue;const q=this.getScaledCoordinates(K,p);if(N.index){const ie=N.index.range(q.x-S,q.y-S,q.x+S,q.y+S).sort();for(const ae of ie){const ye=N.crossTileIDs[ae];if(!C[ye]){C[ye]=!0,K.crossTileID=ye;break}}}else if(N.positions)for(let ie=0;ie<N.positions.length;ie++){const ae=N.positions[ie],ye=N.crossTileIDs[ie];if(Math.abs(ae.x-q.x)<=S&&Math.abs(ae.y-q.y)<=S&&!C[ye]){C[ye]=!0,K.crossTileID=ye;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:l})=>l))}}class Io{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ru{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const p=Math.round((l-this.lng)/360);if(p!==0)for(const C in this.indexes){const S=this.indexes[C],k={};for(const K in S){const N=S[K];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+p),k[N.tileID.key]=N}this.indexes[C]=k}this.lng=l}addBucket(l,p,C){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let k=0;k<p.symbolInstances.length;k++)p.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const S=this.usedCrossTileIDs[l.overscaledZ];for(const k in this.indexes){const K=this.indexes[k];if(Number(k)>l.overscaledZ)for(const N in K){const q=K[N];q.tileID.isChildOf(l)&&q.findMatches(p.symbolInstances,l,S)}else{const N=K[l.scaledTo(Number(k)).key];N&&N.findMatches(p.symbolInstances,l,S)}}for(let k=0;k<p.symbolInstances.length;k++){const K=p.symbolInstances.get(k);K.crossTileID||(K.crossTileID=C.generate(),S[K.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Ms(l,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(l,p){for(const C of p.getCrossTileIDsLists())for(const S of C)delete this.usedCrossTileIDs[l][S]}removeStaleBuckets(l){let p=!1;for(const C in this.indexes){const S=this.indexes[C];for(const k in S)l[S[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,S[k]),delete S[k],p=!0)}return p}}class ou{constructor(){this.layerIndexes={},this.crossTileIDs=new Io,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,p,C){let S=this.layerIndexes[l.id];S===void 0&&(S=this.layerIndexes[l.id]=new ru);let k=!1;const K={};S.handleWrapJump(C);for(const N of p){const q=N.getBucket(l);q&&l.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(N.tileID,q,this.crossTileIDs)&&(k=!0),K[q.bucketInstanceId]=!0)}return S.removeStaleBuckets(K)&&(k=!0),k}pruneUnusedLayers(l){const p={};l.forEach((C=>{p[C]=!0}));for(const C in this.layerIndexes)p[C]||delete this.layerIndexes[C]}}var Us="void main() {fragColor=vec4(1.0);}";const ja={prelude:Ji(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Ji("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Ji("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Ji(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Ji(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ji(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ji(Us,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Ji(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Ji(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ji("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ji("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Ji(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Ji("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Ji(Us,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Ji(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Ji(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Ji(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Ji(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ji(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ji(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ji(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ji(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Ji(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ji(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ji(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ji(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Ji(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Ji(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Ji(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ji(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ji(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ji("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ji("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ji("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Ji("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Ji(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Ji("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ji(B,l){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=l.match(/in ([\w]+) ([\w]+)/g),S=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),K=k?k.concat(S):S,N={};return{fragmentSource:B=B.replace(p,((q,ie,ae,ye,pe)=>(N[pe]=!0,ie==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
in ${ae} ${ye} ${pe};
#else
uniform ${ae} ${ye} u_${pe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${pe}
    ${ae} ${ye} ${pe} = u_${pe};
#endif
`))),vertexSource:l=l.replace(p,((q,ie,ae,ye,pe)=>{const Se=ye==="float"?"vec2":"vec4",Fe=pe.match(/color/)?"color":Se;return N[pe]?ie==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
in ${ae} ${Se} a_${pe};
out ${ae} ${ye} ${pe};
#else
uniform ${ae} ${ye} u_${pe};
#endif
`:Fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = a_${pe};
#else
    ${ae} ${ye} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = unpack_mix_${Fe}(a_${pe}, u_${pe}_t);
#else
    ${ae} ${ye} ${pe} = u_${pe};
#endif
`:ie==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
in ${ae} ${Se} a_${pe};
#else
uniform ${ae} ${ye} u_${pe};
#endif
`:Fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${ae} ${ye} ${pe} = a_${pe};
#else
    ${ae} ${ye} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${ae} ${ye} ${pe} = unpack_mix_${Fe}(a_${pe}, u_${pe}_t);
#else
    ${ae} ${ye} ${pe} = u_${pe};
#endif
`})),staticAttributes:C,staticUniforms:K}}class rl{constructor(l,p,C){this.vertexBuffer=l,this.indexBuffer=p,this.segments=C}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Gi=a.aJ([{name:"a_pos",type:"Int16",components:2}]);const Na="#define PROJECTION_MERCATOR",Xo="mercator";class su{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Xo}get shaderDefine(){return Na}get shaderPreludeCode(){return ja.projectionMercator}get vertexShaderPreludeCode(){return ja.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,p,C,S,k){if(this._cachedMesh)return this._cachedMesh;const K=new a.aL;K.emplaceBack(0,0),K.emplaceBack(a.$,0),K.emplaceBack(0,a.$),K.emplaceBack(a.$,a.$);const N=l.createVertexBuffer(K,Gi.members),q=a.aM.simpleSegment(0,0,4,2),ie=new a.aN;ie.emplaceBack(1,0,2),ie.emplaceBack(1,2,3);const ae=l.createIndexBuffer(ie);return this._cachedMesh=new rl(N,ae,q),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}class Ko{constructor(l=0,p=0,C=0,S=0){if(isNaN(l)||l<0||isNaN(p)||p<0||isNaN(C)||C<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=C,this.right=S}interpolate(l,p,C){return p.top!=null&&l.top!=null&&(this.top=a.C.number(l.top,p.top,C)),p.bottom!=null&&l.bottom!=null&&(this.bottom=a.C.number(l.bottom,p.bottom,C)),p.left!=null&&l.left!=null&&(this.left=a.C.number(l.left,p.left,C)),p.right!=null&&l.right!=null&&(this.right=a.C.number(l.right,p.right,C)),this}getCenter(l,p){const C=a.ae((this.left+l-this.right)/2,0,l),S=a.ae((this.top+p-this.bottom)/2,0,p);return new a.P(C,S)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Ko(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function oo(B,l){if(!B.renderWorldCopies||B.lngRange)return;const p=l.lng-B.center.lng;l.lng+=p>180?-360:p<-180?360:0}function ws(B){return Math.max(0,Math.floor(B))}class Mo{constructor(l,p){var C;this._callbacks=l,this._tileSize=512,this._renderWorldCopies=p?.renderWorldCopies===void 0||!!p?.renderWorldCopies,this._minZoom=p?.minZoom||0,this._maxZoom=p?.maxZoom||22,this._minPitch=p?.minPitch==null?0:p?.minPitch,this._maxPitch=p?.maxPitch==null?60:p?.maxPitch,this._constrain=(C=p?.constrain)!==null&&C!==void 0?C:this._callbacks.constrain,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ws(this._zoom),this._scale=a.ah(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ko,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,p,C){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=ws(this._zoom),this._scale=a.ah(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new Ko(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!C&&l.autoCalculateNearFarZ,p&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.constrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.constrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get constrain(){return this._constrain}setConstrain(l){l||(l=this._callbacks.constrain),this._constrain=l,this.constrainInternal(),this._calcMatrices()}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const p=a.aO(l,-180,180)*Math.PI/180;var C,S,k,K,N,q,ie,ae,ye;this._bearingInRadians!==p&&(this._unmodified=!1,this._bearingInRadians=p,this._calcMatrices(),this._rotationMatrix=h(),C=this._rotationMatrix,k=-this._bearingInRadians,K=(S=this._rotationMatrix)[0],N=S[1],q=S[2],ie=S[3],ae=Math.sin(k),ye=Math.cos(k),C[0]=K*ye+q*ae,C[1]=N*ye+ie*ae,C[2]=K*-ae+q*ye,C[3]=N*-ae+ie*ye)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const p=a.ae(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==p&&(this._unmodified=!1,this._pitchInRadians=p,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const p=l/180*Math.PI;this._rollInRadians!==p&&(this._unmodified=!1,this._rollInRadians=p,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(l){l=a.ae(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=a.ag(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const p=this.constrain(this._center,l).zoom;this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this._tileZoom=Math.max(0,Math.floor(p)),this._scale=a.ah(p),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,p){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=p,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,p,C){this._unmodified=!1,this._edgeInsets.interpolate(l,p,C),this.constrainInternal(),this._calcMatrices()}resize(l,p,C=!0){this._width=l,this._height=p,C&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Rt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.af,a.af])}getCameraQueryGeometry(l,p){if(p.length===1)return[p[0],l];{const{minX:C,minY:S,maxX:k,maxY:K}=a.a2.fromPoints(p).extend(l);return[new a.P(C,S),new a.P(k,S),new a.P(k,K),new a.P(C,K),new a.P(C,S)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:p,zoom:C}=this.constrain(this.center,this.zoom);this.setCenter(p),this.setZoom(C),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=a.ai(new Float64Array(16));a.N(l,l,[this._width/2,-this._height/2,1]),a.M(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=a.ai(new Float64Array(16)),a.N(l,l,[1,-1,1]),a.M(l,l,[-1,-1,0]),a.N(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,p,C,S){const k=C!==void 0?C:this.bearing,K=S=S!==void 0?S:this.pitch,N=a.a1.fromLngLat(l,p),q=-Math.cos(a.ag(K)),ie=Math.sin(a.ag(K)),ae=ie*Math.sin(a.ag(k)),ye=-ie*Math.cos(a.ag(k));let pe=this.elevation;const Se=p-pe;let Fe;q*Se>=0||Math.abs(q)<.1?(Fe=1e4,pe=p+Fe*q):Fe=-Se/q;let Xe,$e,tt=a.aQ(1,N.y),it=0;do{if(it+=1,it>10)break;$e=Fe/tt,Xe=new a.a1(N.x+ae*$e,N.y+ye*$e),tt=1/Xe.meterInMercatorCoordinateUnits()}while(Math.abs(Fe-$e*tt)>1e-12);return{center:Xe.toLngLat(),elevation:pe,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/$e/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const p=a.aj(1,this.center.lat)*this.worldSize,C=this.cameraToCenterDistance/p,S=a.a1.fromLngLat(this.center,this.elevation),k=Pt(this.center,this.elevation,this.pitch,this.bearing,C);this._elevation=l;const K=this.calculateCenterFromCameraLngLatAlt(k.toLngLat(),a.aQ(k.z,S.y),this.bearing,this.pitch);this._elevation=K.elevation,this._center=K.center,this.setZoom(K.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=a.aj(1,this.center.lat)*this.worldSize;return Pt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const p=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/p,l.canonical.y/p,1/p/a.$,1/p/a.$]}}class _o{constructor(l,p){this.min=l,this.max=p,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(l){const p=[l%2==0,l<2],C=a.aT(this.min),S=a.aT(this.max);for(let k=0;k<p.length;k++)C[k]=p[k]?this.min[k]:this.center[k],S[k]=p[k]?this.center[k]:this.max[k];return S[2]=this.max[2],new _o(C,S)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let p=!0;for(let C=0;C<l.planes.length;C++){const S=this.intersectsPlane(l.planes[C]);if(S===0)return 0;S===1&&(p=!1)}return p?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let p=l[3],C=l[3];for(let S=0;S<3;S++)l[S]>0?(p+=l[S]*this.min[S],C+=l[S]*this.max[S]):(C+=l[S]*this.min[S],p+=l[S]*this.max[S]);return p>=0?2:C<0?0:1}}class au{distanceToTile2d(l,p,C,S){const k=S.distanceX([l,p]),K=S.distanceY([l,p]);return Math.hypot(k,K)}getWrap(l,p,C){return C}getTileBoundingVolume(l,p,C,S){var k,K;let N=0,q=0;if(S?.terrain){const ae=new a.Z(l.z,p,l.z,l.x,l.y),ye=S.terrain.getMinMaxElevation(ae);N=(k=ye.minElevation)!==null&&k!==void 0?k:Math.min(0,C),q=(K=ye.maxElevation)!==null&&K!==void 0?K:Math.max(0,C)}const ie=1<<l.z;return new _o([p+l.x/ie,l.y/ie,N],[p+(l.x+1)/ie,(l.y+1)/ie,q])}allowVariableZoom(l,p){const C=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,S=a.ae(78.5-C/2,0,60);return!!p.terrain||l.pitch>S}allowWorldCopies(){return!0}prepareNextFrame(){}}class mo{constructor(l,p,C){this.points=l,this.planes=p,this.aabb=C}static fromInvProjectionMatrix(l,p=1,C=0,S,k){const K=k?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],N=Math.pow(2,C),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((pe=>(function(Se,Fe,Xe,$e){const tt=a.aw([],Se,Fe),it=1/tt[3]/Xe*$e;return a.aY(tt,tt,[it,it,1/tt[3],it])})(pe,l,p,N)));S&&(function(pe,Se,Fe,Xe){const $e=Xe?4:0,tt=Xe?0:4;let it=0;const ct=[],rt=[];for(let ot=0;ot<4;ot++){const St=a.aU([],pe[ot+tt],pe[ot+$e]),Wt=a.aZ(St);a.aR(St,St,1/Wt),ct.push(Wt),rt.push(St)}for(let ot=0;ot<4;ot++){const St=a.a_(pe[ot+$e],rt[ot],Fe);it=St!==null&&St>=0?Math.max(it,St):Math.max(it,ct[ot])}const ht=(function(ot,St){const Wt=a.aU([],ot[St[0]],ot[St[1]]),Ut=a.aU([],ot[St[2]],ot[St[1]]),jt=[0,0,0,0];return a.aV(jt,a.aW([],Wt,Ut)),jt[3]=-a.aX(jt,ot[St[0]]),jt})(pe,Se),ft=(function(ot,St){const Wt=a.a$(ot),Ut=a.b0([],ot,1/Wt),jt=a.aU([],St,a.aR([],Ut,a.aX(St,Ut))),Qt=a.a$(jt);if(Qt>0){const On=Math.sqrt(1-Ut[3]*Ut[3]),In=a.aR([],Ut,-Ut[3]),ln=a.aS([],In,a.aR([],jt,On/Qt));return a.b1(St,ln)}return null})(Fe,ht);if(ft!==null){const ot=ft/a.aX(rt[0],ht);it=Math.min(it,ot)}for(let ot=0;ot<4;ot++){const St=Math.min(it,ct[ot]);pe[ot+tt]=[pe[ot+$e][0]+rt[ot][0]*St,pe[ot+$e][1]+rt[ot][1]*St,pe[ot+$e][2]+rt[ot][2]*St,1]}})(q,K[0],S,k);const ie=K.map((pe=>{const Se=a.aU([],q[pe[0]],q[pe[1]]),Fe=a.aU([],q[pe[2]],q[pe[1]]),Xe=a.aV([],a.aW([],Se,Fe)),$e=-a.aX(Xe,q[pe[1]]);return Xe.concat($e)})),ae=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ye=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const pe of q)for(let Se=0;Se<3;Se++)ae[Se]=Math.min(ae[Se],pe[Se]),ye[Se]=Math.max(ye[Se],pe[Se]);return new mo(q,ie,new _o(ae,ye))}}class os{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,C=!0){this._helper.resize(l,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrain(l){this._helper.setConstrain(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,p){}constructor(l){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(p,C)=>{C=a.ae(+C,this.minZoom,this.maxZoom);const S={center:new a.S(p.lng,p.lat),zoom:C};let k=this._helper._lngRange;if(!this._helper._renderWorldCopies&&k===null){const rt=179.9999999999;k=[-rt,rt]}const K=this.tileSize*a.ah(S.zoom);let N=0,q=K,ie=0,ae=K,ye=0,pe=0;const{x:Se,y:Fe}=this.size;if(this._helper._latRange){const rt=this._helper._latRange;N=a.U(rt[1])*K,q=a.U(rt[0])*K,q-N<Fe&&(ye=Fe/(q-N))}k&&(ie=a.aO(a.V(k[0])*K,0,K),ae=a.aO(a.V(k[1])*K,0,K),ae<ie&&(ae+=K),ae-ie<Se&&(pe=Se/(ae-ie)));const{x:Xe,y:$e}=Pe(K,p);let tt,it;const ct=Math.max(pe||0,ye||0);if(ct){const rt=new a.P(pe?(ae+ie)/2:Xe,ye?(q+N)/2:$e);return S.center=Ze(K,rt).wrap(),S.zoom+=a.ak(ct),S}if(this._helper._latRange){const rt=Fe/2;$e-rt<N&&(it=N+rt),$e+rt>q&&(it=q-rt)}if(k){const rt=(ie+ae)/2;let ht=Xe;this._helper._renderWorldCopies&&(ht=a.aO(Xe,rt-K/2,rt+K/2));const ft=Se/2;ht-ft<ie&&(tt=ie+ft),ht+ft>ae&&(tt=ae-ft)}if(tt!==void 0||it!==void 0){const rt=new a.P(tt??Xe,it??$e);S.center=Ze(K,rt).wrap()}return S},this._helper=new Mo({calcMatrices:()=>{this._calcMatrices()},constrain:(p,C)=>this.defaultConstrain(p,C)},l),this._coveringTilesDetailsProvider=new au}clone(){const l=new os;return l.apply(this),l}apply(l,p,C){this._helper.apply(l,p,C)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const p=[new a.b2(0,l)];if(this._helper._renderWorldCopies){const C=this.screenPointToMercatorCoordinate(new a.P(0,0)),S=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),k=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),K=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),N=Math.floor(Math.min(C.x,S.x,k.x,K.x)),q=Math.floor(Math.max(C.x,S.x,k.x,K.x)),ie=1;for(let ae=N-ie;ae<=q+ie;ae++)ae!==0&&p.push(new a.b2(ae,l))}return p}getCameraFrustum(){return mo.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const p=this.screenPointToLocation(this.centerPoint,l),C=l?l.getElevationForLngLatZoom(p,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(C)}setLocationAtPoint(l,p){const C=a.aj(this.elevation,this.center.lat),S=this.screenPointToMercatorCoordinateAtZ(p,C),k=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,C),K=a.a1.fromLngLat(l),N=new a.a1(K.x-(S.x-k.x),K.y-(S.y-k.y));this.setCenter(N?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,p){return p?this.coordinatePoint(a.a1.fromLngLat(l),p.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(l))}screenPointToLocation(l,p){var C;return(C=this.screenPointToMercatorCoordinate(l,p))===null||C===void 0?void 0:C.toLngLat()}screenPointToMercatorCoordinate(l,p){if(p){const C=p.pointCoordinate(l);if(C!=null)return C}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,p){const C=p||0,S=[l.x,l.y,0,1],k=[l.x,l.y,1,1];a.aw(S,S,this._pixelMatrixInverse),a.aw(k,k,this._pixelMatrixInverse);const K=S[3],N=k[3],q=S[1]/K,ie=k[1]/N,ae=S[2]/K,ye=k[2]/N,pe=ae===ye?0:(C-ae)/(ye-ae);return new a.a1(a.C.number(S[0]/K,k[0]/N,pe)/this.worldSize,a.C.number(q,ie,pe)/this.worldSize,C)}coordinatePoint(l,p=0,C=this._pixelMatrix){const S=[l.x*this.worldSize,l.y*this.worldSize,p,1];return a.aw(S,S,C),new a.P(S[0]/S[3],S[1]/S[3])}getBounds(){const l=Math.max(0,this._helper._height/2-y(this));return new Rt().extend(this.screenPointToLocation(new a.P(0,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(l,p){return p?p.pointCoordinate(l)!=null:l.y>this.height/2-y(this)}calculatePosMatrix(l,p=!1,C){var S;const k=(S=l.key)!==null&&S!==void 0?S:a.b3(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),K=p?this._alignedPosMatrixCache:this._posMatrixCache;if(K.has(k)){const ie=K.get(k);return C?ie.f32:ie.f64}const N=at(l,this.worldSize);a.O(N,p?this._alignedProjMatrix:this._viewProjMatrix,N);const q={f64:N,f32:new Float32Array(N)};return K.set(k,q),C?q.f32:q.f64}calculateFogMatrix(l){const p=l.key,C=this._fogMatrixCacheF32;if(C.has(p))return C.get(p);const S=at(l,this.worldSize);return a.O(S,this._fogMatrix,S),C.set(p,new Float32Array(S)),C.get(p)}calculateCenterFromCameraLngLatAlt(l,p,C,S){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,S)}_calculateNearFarZIfNeeded(l,p,C){if(!this._helper.autoCalculateNearFarZ)return;const S=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),k=l-S*this._helper._pixelPerMeter/Math.cos(p),K=S<0?k:l,N=Math.PI/2+this.pitchInRadians,q=a.ag(this.fov)*(Math.abs(Math.cos(a.ag(this.roll)))*this.height+Math.abs(Math.sin(a.ag(this.roll)))*this.width)/this.height*(.5+C.y/this.height),ie=Math.sin(q)*K/Math.sin(a.ae(Math.PI-N-q,.01,Math.PI-.01)),ae=y(this),ye=Math.atan(ae/this._helper.cameraToCenterDistance),pe=a.ag(.75),Se=ye>pe?2*ye*(.5+C.y/(2*ae)):pe,Fe=Math.sin(Se)*K/Math.sin(a.ae(Math.PI-N-Se,.01,Math.PI-.01)),Xe=Math.min(ie,Fe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-p)*Xe+K),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,p=Pe(this.worldSize,this.center),C=p.x,S=p.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;const k=a.ag(Math.min(this.pitch,et)),K=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(k));let N;this._calculateNearFarZIfNeeded(K,k,l),N=new Float64Array(16),a.b4(N,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,N),N[8]=2*-l.x/this._helper._width,N[9]=2*l.y/this._helper._height,this._projectionMatrix=a.b5(N),a.N(N,N,[1,-1,1]),a.M(N,N,[0,0,-this._helper.cameraToCenterDistance]),a.b6(N,N,-this.rollInRadians),a.b7(N,N,this.pitchInRadians),a.b6(N,N,-this.bearingInRadians),a.M(N,N,[-C,-S,0]),this._mercatorMatrix=a.N([],N,[this.worldSize,this.worldSize,this.worldSize]),a.N(N,N,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,N),a.M(N,N,[0,0,-this.elevation]),this._viewProjMatrix=N,this._invViewProjMatrix=a.aq([],N);const q=[0,0,-1,1];a.aw(q,q,this._invViewProjMatrix),this._cameraPosition=[q[0]/q[3],q[1]/q[3],q[2]/q[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,K,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-C,-S,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,N);const ie=this._helper._width%2/2,ae=this._helper._height%2/2,ye=Math.cos(this.bearingInRadians),pe=Math.sin(-this.bearingInRadians),Se=C-Math.round(C)+ye*ie+pe*ae,Fe=S-Math.round(S)+ye*ae+pe*ie,Xe=new Float64Array(N);if(a.M(Xe,Xe,[Se>.5?Se-1:Se,Fe>.5?Fe-1:Fe,0]),this._alignedProjMatrix=Xe,N=a.aq(new Float64Array(16),this._pixelMatrix),!N)throw new Error("failed to invert matrix");this._pixelMatrixInverse=N,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new a.P(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.aw(p,p,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=a.aj(1,this.center.lat)*this.worldSize;return Pt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,p){const C=a.a1.fromLngLat(l),S=[C.x*this.worldSize,C.y*this.worldSize,p,1];return a.aw(S,S,this._viewProjMatrix),S[2]/S[3]}getProjectionData(l){const{overscaledTileID:p,aligned:C,applyTerrainMatrix:S}=l,k=this._helper.getMercatorTileCoordinates(p),K=p?this.calculatePosMatrix(p,C,!0):null;let N;return N=p&&p.terrainRttPosMatrix32f&&S?p.terrainRttPosMatrix32f:K||a.b8(),{mainMatrix:N,tileMercatorCoords:k,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:N}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,p,C){return 1}transformLightDirection(l){return a.aT(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,p,C,S){const k=this.calculatePosMatrix(C);let K;S?(K=[l,p,S(l,p),1],a.aw(K,K,k)):(K=[l,p,0,1],Zo(K,K,k));const N=K[3];return{point:new a.P(K[0]/N,K[1]/N),signedDistanceFromCamera:N,isOccluded:!1}}populateCache(l){for(const p of l)this.calculatePosMatrix(p)}getMatrixForModel(l,p){const C=a.a1.fromLngLat(l,p),S=C.meterInMercatorCoordinateUnits(),k=a.b9();return a.M(k,k,[C.x,C.y,C.z]),a.b6(k,k,Math.PI),a.b7(k,k,Math.PI/2),a.N(k,k,[-S,S,S]),k}getProjectionDataForCustomLayer(l=!0){const p=new a.Z(0,0,0,0,0),C=this.getProjectionData({overscaledTileID:p,applyGlobeMatrix:l}),S=at(p,this.worldSize);a.O(S,this._viewProjMatrix,S),C.tileMercatorCoords=[0,0,1,1];const k=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],K=a.ba();return a.N(K,S,k),C.fallbackMatrix=K,C.mainMatrix=K,C}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function so(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ol(B){if(B.useSlerp)if(B.k<1){const l=a.bb(B.startEulerAngles.roll,B.startEulerAngles.pitch,B.startEulerAngles.bearing),p=a.bb(B.endEulerAngles.roll,B.endEulerAngles.pitch,B.endEulerAngles.bearing),C=new Float64Array(4);a.bc(C,l,p,B.k);const S=a.bd(C);B.tr.setRoll(S.roll),B.tr.setPitch(S.pitch),B.tr.setBearing(S.bearing)}else B.tr.setRoll(B.endEulerAngles.roll),B.tr.setPitch(B.endEulerAngles.pitch),B.tr.setBearing(B.endEulerAngles.bearing);else B.tr.setRoll(a.C.number(B.startEulerAngles.roll,B.endEulerAngles.roll,B.k)),B.tr.setPitch(a.C.number(B.startEulerAngles.pitch,B.endEulerAngles.pitch,B.k)),B.tr.setBearing(a.C.number(B.startEulerAngles.bearing,B.endEulerAngles.bearing,B.k))}function Pl(B,l,p,C,S){const k=S.padding,K=Pe(S.worldSize,p.getNorthWest()),N=Pe(S.worldSize,p.getNorthEast()),q=Pe(S.worldSize,p.getSouthEast()),ie=Pe(S.worldSize,p.getSouthWest()),ae=a.ag(-C),ye=K.rotate(ae),pe=N.rotate(ae),Se=q.rotate(ae),Fe=ie.rotate(ae),Xe=new a.P(Math.max(ye.x,pe.x,Fe.x,Se.x),Math.max(ye.y,pe.y,Fe.y,Se.y)),$e=new a.P(Math.min(ye.x,pe.x,Fe.x,Se.x),Math.min(ye.y,pe.y,Fe.y,Se.y)),tt=Xe.sub($e),it=(S.width-(k.left+k.right+l.left+l.right))/tt.x,ct=(S.height-(k.top+k.bottom+l.top+l.bottom))/tt.y;if(ct<0||it<0)return void so();const rt=Math.min(a.ak(S.scale*Math.min(it,ct)),B.maxZoom),ht=a.P.convert(B.offset),ft=new a.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(a.ag(C)),ot=ht.add(ft).mult(S.scale/a.ah(rt));return{center:Ze(S.worldSize,K.add(q).div(2).sub(ot)),zoom:rt,bearing:C}}class ji{get useGlobeControls(){return!1}handlePanInertia(l,p){const C=l.mag(),S=Math.abs(y(p));return{easingOffset:l.mult(Math.min(.75*S/C,1)),easingCenter:p.center}}handleMapControlsRollPitchBearingZoom(l,p){l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta),l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta)}handleMapControlsPan(l,p,C){l.around.distSqr(p.centerPoint)<.01||p.setLocationAtPoint(C,l.around)}cameraForBoxAndBearing(l,p,C,S,k){return Pl(l,p,C,S,k)}handleJumpToCenterZoom(l,p){l.zoom!==(p.zoom!==void 0?+p.zoom:l.zoom)&&l.setZoom(+p.zoom),p.center!==void 0&&l.setCenter(a.S.convert(p.center))}handleEaseTo(l,p){const C=l.zoom,S=l.padding,k={roll:l.roll,pitch:l.pitch,bearing:l.bearing},K={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},N=p.zoom!==void 0,q=!l.isPaddingEqual(p.padding);let ie=!1;const ae=N?+p.zoom:l.zoom;let ye=l.centerPoint.add(p.offsetAsPoint);const pe=l.screenPointToLocation(ye),{center:Se,zoom:Fe}=l.constrain(a.S.convert(p.center||pe),ae??C);oo(l,Se);const Xe=Pe(l.worldSize,pe),$e=Pe(l.worldSize,Se).sub(Xe),tt=a.ah(Fe-C);return ie=Fe!==C,{easeFunc:it=>{if(ie&&l.setZoom(a.C.number(C,Fe,it)),a.be(k,K)||ol({startEulerAngles:k,endEulerAngles:K,tr:l,k:it,useSlerp:k.roll!=K.roll}),q&&(l.interpolatePadding(S,p.padding,it),ye=l.centerPoint.add(p.offsetAsPoint)),p.around)l.setLocationAtPoint(p.around,p.aroundPoint);else{const ct=a.ah(l.zoom-C),rt=Fe>C?Math.min(2,tt):Math.max(.5,tt),ht=Math.pow(rt,1-it),ft=Ze(l.worldSize,Xe.add($e.mult(it*ht)).mult(ct));l.setLocationAtPoint(l.renderWorldCopies?ft.wrap():ft,ye)}},isZooming:ie,elevationCenter:Se}}handleFlyTo(l,p){const C=p.zoom!==void 0,S=l.zoom,k=l.constrain(a.S.convert(p.center||p.locationAtOffset),C?+p.zoom:S),K=k.center,N=k.zoom;oo(l,K);const q=Pe(l.worldSize,p.locationAtOffset),ie=Pe(l.worldSize,K).sub(q),ae=ie.mag(),ye=a.ah(N-S);let pe;if(p.minZoom!==void 0){const Se=Math.min(+p.minZoom,S,N),Fe=l.constrain(K,Se).zoom;pe=a.ah(Fe-S)}return{easeFunc:(Se,Fe,Xe,$e)=>{l.setZoom(Se===1?N:S+a.ak(Fe));const tt=Se===1?K:Ze(l.worldSize,q.add(ie.mult(Xe)).mult(Fe));l.setLocationAtPoint(l.renderWorldCopies?tt.wrap():tt,$e)},scaleOfZoom:ye,targetCenter:K,scaleOfMinZoom:pe,pixelPathLength:ae}}}class ki{constructor(l,p,C){this.blendFunction=l,this.blendColor=p,this.mask=C}}ki.Replace=[1,0],ki.disabled=new ki(ki.Replace,a.bf.transparent,[!1,!1,!1,!1]),ki.unblended=new ki(ki.Replace,a.bf.transparent,[!0,!0,!0,!0]),ki.alphaBlended=new ki([1,771],a.bf.transparent,[!0,!0,!0,!0]);const X=2305;class me{constructor(l,p,C){this.enable=l,this.mode=p,this.frontFace=C}}me.disabled=new me(!1,1029,X),me.backCCW=new me(!0,1029,X),me.frontCCW=new me(!0,1028,X);class Ne{constructor(l,p,C){this.func=l,this.mask=p,this.range=C}}Ne.ReadOnly=!1,Ne.ReadWrite=!0,Ne.disabled=new Ne(519,Ne.ReadOnly,[0,1]);const wt=7680;class hn{constructor(l,p,C,S,k,K){this.test=l,this.ref=p,this.mask=C,this.fail=S,this.depthFail=k,this.pass=K}}hn.disabled=new hn({func:519,mask:0},0,0,wt,wt,wt);const Bn=new WeakMap;function li(B){var l;if(Bn.has(B))return Bn.get(B);{const p=(l=B.getParameter(B.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return Bn.set(B,p),p}}class Ui{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const p=l.context,C=p.gl;this._texFormat=C.RGBA,this._texType=C.UNSIGNED_BYTE;const S=new a.aL;S.emplaceBack(-1,-1),S.emplaceBack(2,-1),S.emplaceBack(-1,2);const k=new a.aN;k.emplaceBack(0,1,2),this._fullscreenTriangle=new rl(p.createVertexBuffer(S,Gi.members),p.createIndexBuffer(k),a.aM.simpleSegment(0,0,S.length,k.length)),this._resultBuffer=new Uint8Array(4),p.activeTexture.set(C.TEXTURE1);const K=C.createTexture();C.bindTexture(C.TEXTURE_2D,K),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texImage2D(C.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=p.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(K),li(C)&&(this._pbo=C.createBuffer(),C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.bufferData(C.PIXEL_PACK_BUFFER,4,C.STREAM_READ),C.bindBuffer(C.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,p){const C=this._updateCount;return this._readbackQueue?C>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():C>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,p),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,p=l.gl;l.activeTexture.set(p.TEXTURE1),p.bindTexture(p.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,p){const C=this._cachedRenderContext.context,S=C.gl;if(this._bindFramebuffer(),C.viewport.set([0,0,this._texWidth,this._texHeight]),C.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(C,S.TRIANGLES,Ne.disabled,hn.disabled,ki.unblended,me.disabled,((k,K)=>({u_input:k,u_output_expected:K}))(l,p),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&li(S)){S.bindBuffer(S.PIXEL_PACK_BUFFER,this._pbo),S.readBuffer(S.COLOR_ATTACHMENT0),S.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),S.bindBuffer(S.PIXEL_PACK_BUFFER,null);const k=S.fenceSync(S.SYNC_GPU_COMMANDS_COMPLETE,0);S.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:k}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&li(l)){const p=l.clientWaitSync(this._readbackQueue.sync,0,0);if(p===l.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(p===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ui._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let p=0;return p+=l[0]/256,p+=l[1]/65536,p+=l[2]/16777216,l[3]<127&&(p=-p),p/128}}const wi=a.$/128;function Si(B,l){const p=B.granularity!==void 0?Math.max(B.granularity,1):1,C=p+(B.generateBorders?2:0),S=p+(B.extendToNorthPole||B.generateBorders?1:0)+(B.extendToSouthPole||B.generateBorders?1:0),k=C+1,K=S+1,N=B.generateBorders?-1:0,q=B.generateBorders||B.extendToNorthPole?-1:0,ie=p+(B.generateBorders?1:0),ae=p+(B.generateBorders||B.extendToSouthPole?1:0),ye=k*K,pe=C*S*6,Se=k*K>65536;if(Se&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Fe=Se||l==="32bit",Xe=new Int16Array(2*ye);let $e=0;for(let ct=q;ct<=ae;ct++)for(let rt=N;rt<=ie;rt++){let ht=rt/p*a.$;rt===-1&&(ht=-wi),rt===p+1&&(ht=a.$+wi);let ft=ct/p*a.$;ct===-1&&(ft=B.extendToNorthPole?a.bh:-wi),ct===p+1&&(ft=B.extendToSouthPole?a.bi:a.$+wi),Xe[$e++]=ht,Xe[$e++]=ft}const tt=Fe?new Uint32Array(pe):new Uint16Array(pe);let it=0;for(let ct=0;ct<S;ct++)for(let rt=0;rt<C;rt++){const ht=rt+1+ct*k,ft=rt+(ct+1)*k,ot=rt+1+(ct+1)*k;tt[it++]=rt+ct*k,tt[it++]=ft,tt[it++]=ht,tt[it++]=ht,tt[it++]=ft,tt[it++]=ot}return{vertices:Xe.buffer.slice(0),indices:tt.buffer.slice(0),uses32bitIndices:Fe}}const fr=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class ao{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ja.projectionGlobe}get vertexShaderPreludeCode(){return ja.projectionMercator.vertexSource}get subdivisionGranularity(){return fr}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new Ui(l));const p=a.U(this._errorQueryLatitudeDegrees),C=2*Math.atan(Math.exp(Math.PI-p*Math.PI*2))-.5*Math.PI,S=this._errorMeasurement.updateErrorLoop(p,C),k=R();S!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=S,this._errorMeasurementLastChangeTime=k);const K=Math.min(Math.max((k-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(K))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,p,C,S,k){const K=(k==="stencil"?fr.stencil:fr.tile).getGranularityForZoomLevel(p.z);return this._getMesh(l,{granularity:K,generateBorders:C,extendToNorthPole:p.y===0&&S,extendToSouthPole:p.y===(1<<p.z)-1&&S})}_getMesh(l,p){const C=this._getMeshKey(p);if(C in this._tileMeshCache)return this._tileMeshCache[C];const S=(function(k,K){const N=Si(K,"16bit"),q=a.aL.deserialize({arrayBuffer:N.vertices,length:N.vertices.byteLength/2/2}),ie=a.aN.deserialize({arrayBuffer:N.indices,length:N.indices.byteLength/2/3});return new rl(k.createVertexBuffer(q,Gi.members),k.createIndexBuffer(ie),a.aM.simpleSegment(0,0,q.length,ie.length))})(l,p);return this._tileMeshCache[C]=S,S}recalculate(l){}hasTransition(){const l=R();let p=!1;return p=p||(l-this._errorMeasurementLastChangeTime)/1e3<.7,p=p||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,p}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const br=new a.r({type:new a.D(a.v.projection.type)});class yr extends a.E{constructor(l){super(),this._transitionable=new a.t(br,void 0),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new su,this._verticalPerspectiveProjection=new ao}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof a.bm){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,p,C,S,k){return this.currentProjection.getMeshFromTileID(l,p,C,S,k)}setProjection(l){this._transitionable.setValue("type",l?.type||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function eo(B){const l=Ss(B.worldSize,B.center.lat);return 2*Math.PI*l}function Uo(B,l,p,C,S){const k=1/(1<<S),K=l/a.$*k+C*k,N=a.bo((B/a.$*k+p*k)*Math.PI*2+Math.PI,2*Math.PI),q=2*Math.atan(Math.exp(Math.PI-K*Math.PI*2))-.5*Math.PI,ie=Math.cos(q),ae=new Float64Array(3);return ae[0]=Math.sin(N)*ie,ae[1]=Math.sin(q),ae[2]=Math.cos(N)*ie,ae}function Or(B){return(function(l,p){const C=Math.cos(p),S=new Float64Array(3);return S[0]=Math.sin(l)*C,S[1]=Math.sin(p),S[2]=Math.cos(l)*C,S})(B.lng*Math.PI/180,B.lat*Math.PI/180)}function Ss(B,l){return B/(2*Math.PI)/Math.cos(l*Math.PI/180)}function ZA(B){const l=Math.asin(B[1])/Math.PI*180,p=Math.sqrt(B[0]*B[0]+B[2]*B[2]);if(p>1e-6){const C=B[0]/p,S=Math.acos(B[2]/p),k=(C>0?S:-S)/Math.PI*180;return new a.S(a.aO(k,-180,180),l)}return new a.S(0,l)}function gl(B){return Math.cos(B*Math.PI/180)}function kr(B,l){const p=gl(B),C=gl(l);return a.ak(C/p)}function _1(B,l){const p=B.rotate(l.bearingInRadians),C=l.zoom+kr(l.center.lat,0),S=a.bk(1/gl(l.center.lat),1/gl(Math.min(Math.abs(l.center.lat),60)),a.bn(C,7,3,0,1)),k=360/eo({worldSize:l.worldSize,center:{lat:l.center.lat}});return new a.S(l.center.lng-p.x*k*S,a.ae(l.center.lat+p.y*k,-a.af,a.af))}function lu(B){const l=.5*B,p=Math.sin(l),C=Math.cos(l);return Math.log(p+C)-Math.log(C-p)}function uu(B,l,p,C){const S=B.lat+p*C;if(Math.abs(p)>1){const k=(Math.sign(B.lat+p)!==Math.sign(B.lat)?-Math.abs(B.lat):Math.abs(B.lat))*Math.PI/180,K=Math.abs(B.lat+p)*Math.PI/180,N=lu(k+C*(K-k)),q=lu(k),ie=lu(K);return new a.S(B.lng+l*((N-q)/(ie-q)),S)}return new a.S(B.lng+l*C,S)}class Rm{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=l}swapBuffers(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(l,p,C,S){const k=`${l.z}_${l.x}_${l.y}_${S?.terrain?"t":""}`,K=this._cache.get(k);if(K)return K;const N=this._cachePrevious.get(k);if(N)return this._cache.set(k,N),N;const q=this._boundingVolumeFactory(l,p,C,S);return this._cache.set(k,q),this._hadAnyChanges=!0,q}}class ea{constructor(l,p,C,S){this.min=C,this.max=S,this.points=l,this.planes=p}static fromAabb(l,p){const C=[];for(let S=0;S<8;S++)C.push([1&~S?l[0]:p[0],(S>>1&1)==1?p[1]:l[1],(S>>2&1)==1?p[2]:l[2]]);return new ea(C,[[-1,0,0,p[0]],[1,0,0,-l[0]],[0,-1,0,p[1]],[0,1,0,-l[1]],[0,0,-1,p[2]],[0,0,1,-l[2]]],l,p)}static fromCenterSizeAngles(l,p,C){const S=a.br([],C[0],C[1],C[2]),k=a.bs([],[p[0],0,0],S),K=a.bs([],[0,p[1],0],S),N=a.bs([],[0,0,p[2]],S),q=[...l],ie=[...l];for(let ye=0;ye<8;ye++)for(let pe=0;pe<3;pe++){const Se=l[pe]+k[pe]*(1&~ye?-1:1)+K[pe]*((ye>>1&1)==1?1:-1)+N[pe]*((ye>>2&1)==1?1:-1);q[pe]=Math.min(q[pe],Se),ie[pe]=Math.max(ie[pe],Se)}const ae=[];for(let ye=0;ye<8;ye++){const pe=[...l];a.aS(pe,pe,a.aR([],k,1&~ye?-1:1)),a.aS(pe,pe,a.aR([],K,(ye>>1&1)==1?1:-1)),a.aS(pe,pe,a.aR([],N,(ye>>2&1)==1?1:-1)),ae.push(pe)}return new ea(ae,[[...k,-a.aX(k,ae[0])],[...K,-a.aX(K,ae[0])],[...N,-a.aX(N,ae[0])],[-k[0],-k[1],-k[2],-a.aX(k,ae[7])],[-K[0],-K[1],-K[2],-a.aX(K,ae[7])],[-N[0],-N[1],-N[2],-a.aX(N,ae[7])]],q,ie)}intersectsFrustum(l){let p=!0;const C=this.points.length,S=this.planes.length,k=l.planes.length,K=l.points.length;for(let N=0;N<k;N++){const q=l.planes[N];let ie=0;for(let ae=0;ae<C;ae++){const ye=this.points[ae];q[0]*ye[0]+q[1]*ye[1]+q[2]*ye[2]+q[3]>=0&&ie++}if(ie===0)return 0;ie<C&&(p=!1)}if(p)return 2;for(let N=0;N<S;N++){const q=this.planes[N];let ie=0;for(let ae=0;ae<K;ae++){const ye=l.points[ae];q[0]*ye[0]+q[1]*ye[1]+q[2]*ye[2]+q[3]>=0&&ie++}if(ie===0)return 0}return 1}intersectsPlane(l){const p=this.points.length;let C=0;for(let S=0;S<p;S++){const k=this.points[S];l[0]*k[0]+l[1]*k[1]+l[2]*k[2]+l[3]>=0&&C++}return C===p?2:C===0?0:1}}function yA(B,l,p){const C=B-l;return C<0?-C:Math.max(0,C-p)}function Ph(B,l,p,C,S){const k=B-p;let K;return K=k<0?Math.min(-k,1+k-S):k>1?Math.min(Math.max(k-S,0),1-k):0,Math.max(K,yA(l,C,S))}class Es{constructor(){this._boundingVolumeCache=new Rm(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(l,p,C,S){const k=1<<C.z,K=1/k,N=C.x/k,q=C.y/k;let ie=2;return ie=Math.min(ie,Ph(l,p,N,q,K)),ie=Math.min(ie,Ph(l,p,N+.5,-q-K,K)),ie=Math.min(ie,Ph(l,p,N+.5,2-q-K,K)),ie}getWrap(l,p,C){const S=1<<p.z,k=1/S,K=p.x/S,N=yA(l.x,K,k),q=yA(l.x,K-1,k),ie=yA(l.x,K+1,k),ae=Math.min(N,q,ie);return ae===ie?1:ae===q?-1:0}allowVariableZoom(l,p){return gi(l,p)>4}allowWorldCopies(){return!1}getTileBoundingVolume(l,p,C,S){return this._boundingVolumeCache.getTileBoundingVolume(l,p,C,S)}_computeTileBoundingVolume(l,p,C,S){var k,K;let N=0,q=0;if(S?.terrain){const ie=new a.Z(l.z,p,l.z,l.x,l.y),ae=S.terrain.getMinMaxElevation(ie);N=(k=ae.minElevation)!==null&&k!==void 0?k:Math.min(0,C),q=(K=ae.maxElevation)!==null&&K!==void 0?K:Math.max(0,C)}if(N/=a.bu,q/=a.bu,N+=1,q+=1,l.z<=0)return ea.fromAabb([-q,-q,-q],[q,q,q]);if(l.z===1)return ea.fromAabb([l.x===0?-q:0,l.y===0?0:-q,-q],[l.x===0?0:q,l.y===0?q:0,q]);{const ie=[Uo(0,0,l.x,l.y,l.z),Uo(a.$,0,l.x,l.y,l.z),Uo(a.$,a.$,l.x,l.y,l.z),Uo(0,a.$,l.x,l.y,l.z)],ae=[];for(const jt of ie)ae.push(a.aR([],jt,q));if(q!==N)for(const jt of ie)ae.push(a.aR([],jt,N));l.y===0&&ae.push([0,1,0]),l.y===(1<<l.z)-1&&ae.push([0,-1,0]);const ye=[1,1,1],pe=[-1,-1,-1];for(const jt of ae)for(let Qt=0;Qt<3;Qt++)ye[Qt]=Math.min(ye[Qt],jt[Qt]),pe[Qt]=Math.max(pe[Qt],jt[Qt]);const Se=Uo(a.$/2,a.$/2,l.x,l.y,l.z),Fe=a.aW([],[0,1,0],Se);a.aV(Fe,Fe);const Xe=a.aW([],Se,Fe);a.aV(Xe,Xe);const $e=a.aW([],ie[2],ie[1]);a.aV($e,$e);const tt=a.aW([],ie[0],ie[3]);a.aV(tt,tt),ae.push(a.aR([],Se,q)),l.y>=(1<<l.z)/2&&ae.push(a.aR([],Uo(a.$/2,0,l.x,l.y,l.z),q)),l.y<(1<<l.z)/2&&ae.push(a.aR([],Uo(a.$/2,a.$,l.x,l.y,l.z),q));const it=Bu(Se,ae),ct=Bu(Xe,ae),rt=[-Se[0],-Se[1],-Se[2],it.max],ht=[Se[0],Se[1],Se[2],-it.min],ft=[-Xe[0],-Xe[1],-Xe[2],ct.max],ot=[Xe[0],Xe[1],Xe[2],-ct.min],St=[...$e,0],Wt=[...tt,0],Ut=[];return l.y===0?Ut.push(a.bt(Wt,St,rt),a.bt(Wt,St,ht)):Ut.push(a.bt(ft,St,rt),a.bt(ft,St,ht),a.bt(ft,Wt,rt),a.bt(ft,Wt,ht)),l.y===(1<<l.z)-1?Ut.push(a.bt(Wt,St,rt),a.bt(Wt,St,ht)):Ut.push(a.bt(ot,St,rt),a.bt(ot,St,ht),a.bt(ot,Wt,rt),a.bt(ot,Wt,ht)),new ea(Ut,[rt,ht,ft,ot,St,Wt],ye,pe)}}}function Bu(B,l){let p=1/0,C=-1/0;for(const S of l){const k=a.aX(B,S);p=Math.min(p,k),C=Math.max(C,k)}return{min:p,max:C}}class Bf{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p){this._helper.resize(l,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrain(l){this._helper.setConstrain(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(l){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(p,C)=>{const S=a.ae(p.lat,-a.af,a.af),k=a.ae(+C,this.minZoom+kr(0,S),this.maxZoom);return{center:new a.S(p.lng,S),zoom:k}},this._helper=new Mo({calcMatrices:()=>{this._calcMatrices()},constrain:(p,C)=>this.defaultConstrain(p,C)},l),this._coveringTilesDetailsProvider=new Es}clone(){const l=new Bf;return l.apply(this),l}apply(l,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=a.bp();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:p,applyGlobeMatrix:C}=l,S=this._helper.getMercatorTileCoordinates(p);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:S,clippingPlane:this._cachedClippingPlane,projectionTransition:C?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const p=this.pitchInRadians,C=this.cameraToCenterDistance/l,S=Math.sin(p)*C,k=Math.cos(p)*C+1,K=1/Math.sqrt(S*S+k*k)*1;let N=-S,q=k;const ie=Math.sqrt(N*N+q*q);N/=ie,q/=ie;const ae=[0,N,q];a.bw(ae,ae,[0,0,0],-this.bearingInRadians),a.bx(ae,ae,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(ae,ae,[0,0,0],this.center.lng*Math.PI/180);const ye=1/a.aZ(ae);return a.aR(ae,ae,ye),[...ae,-K*ye]}isLocationOccluded(l){return!this.isSurfacePointVisible(Or(l))}transformLightDirection(l){const p=this._helper._center.lng*Math.PI/180,C=this._helper._center.lat*Math.PI/180,S=Math.cos(C),k=[Math.sin(p)*S,Math.sin(C),Math.cos(p)*S],K=[k[2],0,-k[0]],N=[0,0,0];a.aW(N,K,k),a.aV(K,K),a.aV(N,N);const q=[0,0,0];return a.aV(q,[K[0]*l[0]+N[0]*l[1]+k[0]*l[2],K[1]*l[0]+N[1]*l[1]+k[1]*l[2],K[2]*l[0]+N[2]*l[1]+k[2]*l[2]]),q}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,p,C){const S=(function(N,q,ie){const ae=1/(1<<ie.z);return new a.a1(N/a.$*ae+ie.x*ae,q/a.$*ae+ie.y*ae)})(l,p,C.canonical),k=(K=S.y,[a.bo(S.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-K*Math.PI*2))-.5*Math.PI]);var K;return this.getCircleRadiusCorrection()/Math.cos(k[1])}projectTileCoordinates(l,p,C,S){const k=C.canonical,K=Uo(l,p,k.x,k.y,k.z),N=1+(S?S(l,p):0)/a.bu,q=[K[0]*N,K[1]*N,K[2]*N,1];a.aw(q,q,this._globeViewProjMatrixNoCorrection);const ie=this._cachedClippingPlane,ae=ie[0]*K[0]+ie[1]*K[1]+ie[2]*K[2]+ie[3]<0;return{point:new a.P(q[0]/q[3],q[1]/q[3]),signedDistanceFromCamera:q[3],isOccluded:ae}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=Ss(this.worldSize,this.center.lat),p=a.ba(),C=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),a.b4(p,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const S=this.centerOffset;p[8]=2*-S.x/this._helper._width,p[9]=2*S.y/this._helper._height,this._projectionMatrix=a.b5(p),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,p),a.M(p,p,[0,0,-this.cameraToCenterDistance]),a.b6(p,p,this.rollInRadians),a.b7(p,p,-this.pitchInRadians),a.b6(p,p,this.bearingInRadians),a.M(p,p,[0,0,-l]);const k=a.bp();k[0]=l,k[1]=l,k[2]=l,a.b7(C,p,this.center.lat*Math.PI/180),a.bz(C,C,-this.center.lng*Math.PI/180),a.N(C,C,k),this._globeViewProjMatrixNoCorrection=C,a.b7(p,p,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(p,p,-this.center.lng*Math.PI/180),a.N(p,p,k),this._globeViewProjMatrix32f=new Float32Array(p),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,C);const K=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/l,a.bw(this._cameraPosition,this._cameraPosition,K,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,K,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,K,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,K,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,K,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const N=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(N,N,[1,1,-1]),this._cachedFrustum=mo.fromInvProjectionMatrix(N,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(l){a.w("calculateFogMatrix is not supported on globe projection.");const p=a.ba();return a.ai(p),p}getVisibleUnwrappedCoordinates(l){return[new a.b2(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){if(!this._globeViewProjMatrixNoCorrection)return 1;const C=Or(l);a.aR(C,C,1+p/a.bu);const S=a.bv();return a.aw(S,[C[0],C[1],C[2],1],this._globeViewProjMatrixNoCorrection),S[2]/S[3]}populateCache(l){}getBounds(){const l=.5*this.width,p=.5*this.height,C=[new a.P(0,0),new a.P(l,0),new a.P(this.width,0),new a.P(this.width,p),new a.P(this.width,this.height),new a.P(l,this.height),new a.P(0,this.height),new a.P(0,p)],S=[];for(const ye of C)S.push(this.unprojectScreenPoint(ye));let k=0,K=0,N=0,q=0;const ie=this.center;for(const ye of S){const pe=a.bA(ie.lng,ye.lng),Se=a.bA(ie.lat,ye.lat);pe<K&&(K=pe),pe>k&&(k=pe),Se<q&&(q=Se),Se>N&&(N=Se)}const ae=[ie.lng+K,ie.lat+q,ie.lng+k,ie.lat+N];return this.isSurfacePointOnScreen([0,1,0])&&(ae[3]=90,ae[0]=-180,ae[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ae[1]=-90,ae[0]=-180,ae[2]=180),new Rt(ae)}calculateCenterFromCameraLngLatAlt(l,p,C,S){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,S)}setLocationAtPoint(l,p){const C=Or(this.unprojectScreenPoint(p)),S=Or(l),k=a.bp();a.bB(k);const K=a.bp();a.by(K,C,k,-this.center.lng*Math.PI/180),a.bx(K,K,k,this.center.lat*Math.PI/180);const N=S[0]*S[0]+S[2]*S[2],q=K[0]*K[0];if(N<q)return;const ie=Math.sqrt(N-q),ae=-ie,ye=a.bC(S[0],S[2],K[0],ie),pe=a.bC(S[0],S[2],K[0],ae),Se=a.bp();a.by(Se,S,k,-ye);const Fe=a.bC(Se[1],Se[2],K[1],K[2]),Xe=a.bp();a.by(Xe,S,k,-pe);const $e=a.bC(Xe[1],Xe[2],K[1],K[2]),tt=.5*Math.PI,it=Fe>=-tt&&Fe<=tt,ct=$e>=-tt&&$e<=tt;let rt,ht;if(it&&ct){const Wt=this.center.lng*Math.PI/180,Ut=this.center.lat*Math.PI/180;a.bD(ye,Wt)+a.bD(Fe,Ut)<a.bD(pe,Wt)+a.bD($e,Ut)?(rt=ye,ht=Fe):(rt=pe,ht=$e)}else if(it)rt=ye,ht=Fe;else{if(!ct)return;rt=pe,ht=$e}const ft=rt/Math.PI*180,ot=ht/Math.PI*180,St=this.center.lat;this.setCenter(new a.S(ft,a.ae(ot,-90,90))),this.setZoom(this.zoom+kr(St,this.center.lat))}locationToScreenPoint(l,p){const C=Or(l);if(p){const S=p.getElevationForLngLatZoom(l,this._helper._tileZoom);a.aR(C,C,1+S/a.bu)}return this._projectSurfacePointToScreen(C)}_projectSurfacePointToScreen(l){const p=a.bv();return a.aw(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],new a.P((.5*p[0]+.5)*this.width,(.5*-p[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,p){if(p){const C=p.pointCoordinate(l);if(C)return C}return a.a1.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,p){var C;return(C=this.screenPointToMercatorCoordinate(l,p))===null||C===void 0?void 0:C.toLngLat()}isPointOnMapSurface(l,p){const C=this._cameraPosition,S=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(C,S)}getRayDirectionFromPixel(l){const p=a.bv();p[0]=l.x/this.width*2-1,p[1]=-1*(l.y/this.height*2-1),p[2]=1,p[3]=1,a.aw(p,p,this._globeViewProjMatrixNoCorrectionInverted),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3];const C=a.bp();C[0]=p[0]-this._cameraPosition[0],C[1]=p[1]-this._cameraPosition[1],C[2]=p[2]-this._cameraPosition[2];const S=a.bp();return a.aV(S,C),S}isSurfacePointVisible(l){const p=this._cachedClippingPlane;return p[0]*l[0]+p[1]*l[1]+p[2]*l[2]+p[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const p=a.bv();return a.aw(p,[...l,1],this._globeViewProjMatrixNoCorrection),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[0]>-1&&p[0]<1&&p[1]>-1&&p[1]<1&&p[2]>-1&&p[2]<1}rayPlanetIntersection(l,p){const C=a.aX(l,p),S=a.bp(),k=a.bp();a.aR(k,p,C),a.aU(S,l,k);const K=1-a.aX(S,S);if(K<0)return null;const N=a.aX(l,l)-1,q=-C+(C<0?1:-1)*Math.sqrt(K),ie=N/q,ae=q;return{tMin:Math.min(ie,ae),tMax:Math.max(ie,ae)}}unprojectScreenPoint(l){const p=this._cameraPosition,C=this.getRayDirectionFromPixel(l),S=this.rayPlanetIntersection(p,C);if(S){const ae=a.bp();a.aS(ae,p,[C[0]*S.tMin,C[1]*S.tMin,C[2]*S.tMin]);const ye=a.bp();return a.aV(ye,ae),ZA(ye)}const k=this._cachedClippingPlane,K=k[0]*C[0]+k[1]*C[1]+k[2]*C[2],N=-a.b1(k,p)/K,q=a.bp();if(N>0)a.aS(q,p,[C[0]*N,C[1]*N,C[2]*N]);else{const ae=a.bp();a.aS(ae,p,[2*C[0],2*C[1],2*C[2]]);const ye=a.b1(this._cachedClippingPlane,ae);a.aU(q,ae,[this._cachedClippingPlane[0]*ye,this._cachedClippingPlane[1]*ye,this._cachedClippingPlane[2]*ye])}const ie=(function(ae){const ye=a.bp();return ye[0]=ae[0]*-ae[3],ye[1]=ae[1]*-ae[3],ye[2]=ae[2]*-ae[3],{center:ye,radius:Math.sqrt(1-ae[3]*ae[3])}})(k);return ZA((function(ae,ye,pe){const Se=a.bp();a.aU(Se,pe,ae);const Fe=a.bp();return a.bq(Fe,ae,Se,ye/a.a$(Se)),Fe})(ie.center,ie.radius,q))}getMatrixForModel(l,p){const C=a.S.convert(l),S=1/a.bu,k=a.b9();return a.bz(k,k,C.lng/180*Math.PI),a.b7(k,k,-C.lat/180*Math.PI),a.M(k,k,[0,0,1+p/a.bu]),a.b7(k,k,.5*Math.PI),a.N(k,k,[S,S,S]),k}getProjectionDataForCustomLayer(l=!0){const p=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:l});return p.tileMercatorCoords=[0,0,1,1],p}getFastPathSimpleProjectionMatrix(l){}}class xp{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,p,C){return this._helper.interpolatePadding(l,p,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,p,C=!0){this._helper.resize(l,p,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrain(l){this._helper.setConstrain(l)}overrideNearFarZ(l,p){this._helper.overrideNearFarZ(l,p)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,p){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=p,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(l){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(p,C)=>this.currentTransform.defaultConstrain(p,C),this._helper=new Mo({calcMatrices:()=>{this._calcMatrices()},constrain:(p,C)=>this.defaultConstrain(p,C)},l),this._globeness=1,this._mercatorTransform=new os,this._verticalPerspectiveTransform=new Bf}clone(){const l=new xp;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const p=this._mercatorTransform.getProjectionData(l),C=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?C.mainMatrix:p.mainMatrix,clippingPlane:C.clippingPlane,tileMercatorCoords:C.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:p.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,p,C){const S=this._mercatorTransform.getPitchedTextCorrection(l,p,C),k=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,p,C);return a.bk(S,k,this._globeness)}projectTileCoordinates(l,p,C,S){return this.currentTransform.projectTileCoordinates(l,p,C,S)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,p){return this.currentTransform.lngLatToCameraDepth(l,p)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(l,p,C,S){return this._helper.calculateCenterFromCameraLngLatAlt(l,p,C,S)}setLocationAtPoint(l,p){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,p),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,p),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,p){return this.currentTransform.locationToScreenPoint(l,p)}screenPointToMercatorCoordinate(l,p){return this.currentTransform.screenPointToMercatorCoordinate(l,p)}screenPointToLocation(l,p){return this.currentTransform.screenPointToLocation(l,p)}isPointOnMapSurface(l,p){return this.currentTransform.isPointOnMapSurface(l,p)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,p){return this.currentTransform.getMatrixForModel(l,p)}getProjectionDataForCustomLayer(l=!0){const p=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return p;const C=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return C.fallbackMatrix=p.mainMatrix,C}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class oc{get useGlobeControls(){return!0}handlePanInertia(l,p){const C=_1(l,p);return Math.abs(C.lng-p.center.lng)>180&&(C.lng=p.center.lng+179.5*Math.sign(C.lng-p.center.lng)),{easingCenter:C,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,p){const C=l.around,S=p.screenPointToLocation(C);l.bearingDelta&&p.setBearing(p.bearing+l.bearingDelta),l.pitchDelta&&p.setPitch(p.pitch+l.pitchDelta),l.rollDelta&&p.setRoll(p.roll+l.rollDelta);const k=p.zoom;l.zoomDelta&&p.setZoom(p.zoom+l.zoomDelta);const K=p.zoom-k;if(K===0)return;const N=a.bA(p.center.lng,S.lng),q=N/(Math.abs(N/180)+1),ie=a.bA(p.center.lat,S.lat),ae=p.getRayDirectionFromPixel(C),ye=p.cameraPosition,pe=-1*a.aX(ye,ae),Se=a.bp();a.aS(Se,ye,[ae[0]*pe,ae[1]*pe,ae[2]*pe]);const Fe=a.aZ(Se)-1,Xe=Math.exp(.5*-Math.max(Fe-.3,0)),$e=Ss(p.worldSize,p.center.lat)/Math.min(p.width,p.height),tt=a.bn($e,.9,.5,1,.25),it=(1-a.ah(-K))*Math.min(Xe,tt),ct=p.center.lat,rt=p.zoom,ht=new a.S(p.center.lng+q*it,a.ae(p.center.lat+ie*it,-a.af,a.af));p.setLocationAtPoint(S,C);const ft=p.center,ot=a.bn(Math.abs(N),45,85,0,1),St=a.bn($e,.75,.35,0,1),Wt=Math.pow(Math.max(ot,St),.25),Ut=a.bA(ft.lng,ht.lng),jt=a.bA(ft.lat,ht.lat);p.setCenter(new a.S(ft.lng+Ut*Wt,ft.lat+jt*Wt).wrap()),p.setZoom(rt+kr(ct,p.center.lat))}handleMapControlsPan(l,p,C){if(!l.panDelta)return;const S=p.center.lat,k=p.zoom;p.setCenter(_1(l.panDelta,p).wrap()),p.setZoom(k+kr(S,p.center.lat))}cameraForBoxAndBearing(l,p,C,S,k){const K=Pl(l,p,C,S,k),N=p.left/k.width*2-1,q=(k.width-p.right)/k.width*2-1,ie=p.top/k.height*-2+1,ae=(k.height-p.bottom)/k.height*-2+1,ye=a.bA(C.getWest(),C.getEast())<0,pe=ye?C.getEast():C.getWest(),Se=ye?C.getWest():C.getEast(),Fe=Math.max(C.getNorth(),C.getSouth()),Xe=Math.min(C.getNorth(),C.getSouth()),$e=pe+.5*a.bA(pe,Se),tt=Fe+.5*a.bA(Fe,Xe),it=k.clone();it.setCenter(K.center),it.setBearing(K.bearing),it.setPitch(0),it.setRoll(0),it.setZoom(K.zoom);const ct=it.modelViewProjectionMatrix,rt=[Or(C.getNorthWest()),Or(C.getNorthEast()),Or(C.getSouthWest()),Or(C.getSouthEast()),Or(new a.S(Se,tt)),Or(new a.S(pe,tt)),Or(new a.S($e,Fe)),Or(new a.S($e,Xe))],ht=Or(K.center);let ft=Number.POSITIVE_INFINITY;for(const ot of rt)N<0&&(ft=oc.getLesserNonNegativeNonNull(ft,oc.solveVectorScale(ot,ht,ct,"x",N))),q>0&&(ft=oc.getLesserNonNegativeNonNull(ft,oc.solveVectorScale(ot,ht,ct,"x",q))),ie>0&&(ft=oc.getLesserNonNegativeNonNull(ft,oc.solveVectorScale(ot,ht,ct,"y",ie))),ae<0&&(ft=oc.getLesserNonNegativeNonNull(ft,oc.solveVectorScale(ot,ht,ct,"y",ae)));if(Number.isFinite(ft)&&ft!==0)return K.zoom=it.zoom+a.ak(ft),K;so()}handleJumpToCenterZoom(l,p){const C=l.center.lat,S=l.constrain(p.center?a.S.convert(p.center):l.center,l.zoom).center;l.setCenter(S.wrap());const k=p.zoom!==void 0?+p.zoom:l.zoom+kr(C,S.lat);l.zoom!==k&&l.setZoom(k)}handleEaseTo(l,p){const C=l.zoom,S=l.center,k=l.padding,K={roll:l.roll,pitch:l.pitch,bearing:l.bearing},N={roll:p.roll===void 0?l.roll:p.roll,pitch:p.pitch===void 0?l.pitch:p.pitch,bearing:p.bearing===void 0?l.bearing:p.bearing},q=p.zoom!==void 0,ie=!l.isPaddingEqual(p.padding);let ae=!1;const ye=p.center?a.S.convert(p.center):S,pe=l.constrain(ye,C).center;oo(l,pe);const Se=l.clone();Se.setCenter(pe),Se.setZoom(q?+p.zoom:C+kr(S.lat,ye.lat)),Se.setBearing(p.bearing);const Fe=new a.P(a.ae(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ae(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));Se.setLocationAtPoint(pe,Fe);const Xe=(p.offset&&p.offsetAsPoint.mag())>0?Se.center:pe,$e=q?+p.zoom:C+kr(S.lat,Xe.lat),tt=C+kr(S.lat,0),it=$e+kr(Xe.lat,0),ct=a.bA(S.lng,Xe.lng),rt=a.bA(S.lat,Xe.lat),ht=a.ah(it-tt);return ae=$e!==C,{easeFunc:ft=>{if(a.be(K,N)||ol({startEulerAngles:K,endEulerAngles:N,tr:l,k:ft,useSlerp:K.roll!=N.roll}),ie&&l.interpolatePadding(k,p.padding,ft),p.around)a.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(p.around,p.aroundPoint);else{const ot=it>tt?Math.min(2,ht):Math.max(.5,ht),St=Math.pow(ot,1-ft),Wt=uu(S,ct,rt,ft*St);l.setCenter(Wt.wrap())}if(ae){const ot=a.C.number(tt,it,ft)+kr(0,l.center.lat);l.setZoom(ot)}},isZooming:ae,elevationCenter:Xe}}handleFlyTo(l,p){const C=p.zoom!==void 0,S=l.center,k=l.zoom,K=l.padding,N=!l.isPaddingEqual(p.padding),q=l.constrain(a.S.convert(p.center||p.locationAtOffset),k).center,ie=C?+p.zoom:l.zoom+kr(l.center.lat,q.lat),ae=l.clone();ae.setCenter(q),ae.setZoom(ie),ae.setBearing(p.bearing);const ye=new a.P(a.ae(l.centerPoint.x+p.offsetAsPoint.x,0,l.width),a.ae(l.centerPoint.y+p.offsetAsPoint.y,0,l.height));ae.setLocationAtPoint(q,ye);const pe=ae.center;oo(l,pe);const Se=(function(rt,ht,ft){const ot=Or(ht),St=Or(ft),Wt=a.aX(ot,St),Ut=Math.acos(Wt),jt=eo(rt);return Ut/(2*Math.PI)*jt})(l,S,pe),Fe=k+kr(S.lat,0),Xe=ie+kr(pe.lat,0),$e=a.ah(Xe-Fe);let tt;if(typeof p.minZoom=="number"){const rt=+p.minZoom+kr(pe.lat,0),ht=Math.min(rt,Fe,Xe)+kr(0,pe.lat),ft=l.constrain(pe,ht).zoom+kr(pe.lat,0);tt=a.ah(ft-Fe)}const it=a.bA(S.lng,pe.lng),ct=a.bA(S.lat,pe.lat);return{easeFunc:(rt,ht,ft,ot)=>{const St=uu(S,it,ct,ft);N&&l.interpolatePadding(K,p.padding,rt);const Wt=rt===1?pe:St;l.setCenter(Wt.wrap());const Ut=Fe+a.ak(ht);l.setZoom(rt===1?ie:Ut+kr(0,Wt.lat))},scaleOfZoom:$e,targetCenter:pe,scaleOfMinZoom:tt,pixelPathLength:Se}}static solveVectorScale(l,p,C,S,k){const K=S==="x"?[C[0],C[4],C[8],C[12]]:[C[1],C[5],C[9],C[13]],N=[C[3],C[7],C[11],C[15]],q=l[0]*K[0]+l[1]*K[1]+l[2]*K[2],ie=l[0]*N[0]+l[1]*N[1]+l[2]*N[2],ae=p[0]*K[0]+p[1]*K[1]+p[2]*K[2],ye=p[0]*N[0]+p[1]*N[1]+p[2]*N[2];return ae+k*ie===q+k*ye||N[3]*(q-ae)+K[3]*(ye-ie)+q*ye==ae*ie?null:(ae+K[3]-k*ye-k*N[3])/(ae-q-k*ye+k*ie)}static getLesserNonNegativeNonNull(l,p){return p!==null&&p>=0&&p<l?p:l}}class x1{constructor(l){this._globe=l,this._mercatorCameraHelper=new ji,this._verticalPerspectiveCameraHelper=new oc}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,p){return this.currentHelper.handlePanInertia(l,p)}handleMapControlsRollPitchBearingZoom(l,p){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,p)}handleMapControlsPan(l,p,C){this.currentHelper.handleMapControlsPan(l,p,C)}cameraForBoxAndBearing(l,p,C,S,k){return this.currentHelper.cameraForBoxAndBearing(l,p,C,S,k)}handleJumpToCenterZoom(l,p){this.currentHelper.handleJumpToCenterZoom(l,p)}handleEaseTo(l,p){return this.currentHelper.handleEaseTo(l,p)}handleFlyTo(l,p){return this.currentHelper.handleFlyTo(l,p)}}const Dm=(B,l)=>a.y(B,l&&l.filter((p=>p.identifier!=="source.canvas"))),pv=a.bE();class Dd extends a.E{constructor(l,p={}){var C,S;super(),this._rtlPluginLoaded=()=>{for(const K in this.sourceCaches){const N=this.sourceCaches[K].getSource().type;N!=="vector"&&N!=="geojson"||this.sourceCaches[K].reload()}},this.map=l,this.dispatcher=new Ue(Lt(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",((K,N)=>this.getGlyphs(K,N))),this.dispatcher.registerMessageHandler("GI",((K,N)=>this.getImages(K,N))),this.dispatcher.registerMessageHandler("GDA",((K,N)=>this.getDashes(K,N))),this.imageManager=new ge,this.imageManager.setEventedParent(this);const k=((C=l._container)===null||C===void 0?void 0:C.lang)||typeof document<"u"&&((S=document.documentElement)===null||S===void 0?void 0:S.lang)||void 0;this.glyphManager=new je(l._requestManager,p.localIdeographFontFamily,k),this.lineAtlas=new De(256,512),this.crossTileSymbolIndex=new ou,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),le().on(It,this._rtlPluginLoaded),this.on("data",(K=>{if(K.dataType!=="source"||K.sourceDataType!=="metadata")return;const N=this.sourceCaches[K.sourceId];if(!N)return;const q=N.getSource();if(q&&q.vectorLayerIds)for(const ie in this._layers){const ae=this._layers[ie];ae.source===q.id&&this._validateLayer(ae)}}))}setGlobalStateProperty(l,p){var C,S,k;this._checkLoaded();const K=p===null?(k=(S=(C=this.stylesheet.state)===null||C===void 0?void 0:C[l])===null||S===void 0?void 0:S.default)!==null&&k!==void 0?k:null:p;if(a.bH(K,this._globalState[l]))return this;this._globalState[l]=K,this._applyGlobalStateChanges([l])}getGlobalState(){return this._globalState}setGlobalState(l){this._checkLoaded();const p=[];for(const C in l)!a.bH(this._globalState[C],l[C].default)&&(p.push(C),this._globalState[C]=l[C].default);this._applyGlobalStateChanges(p)}_applyGlobalStateChanges(l){if(l.length===0)return;const p=new Set,C={};for(const S of l){C[S]=this._globalState[S];for(const k in this._layers){const K=this._layers[k],N=K.getLayoutAffectingGlobalStateRefs(),q=K.getPaintAffectingGlobalStateRefs();if(N.has(S)&&p.add(K.source),q.has(S))for(const{name:ie,value:ae}of q.get(S))this._updatePaintProperty(K,ie,ae)}}this.dispatcher.broadcast("UGS",C);for(const S in this.sourceCaches)p.has(S)&&(this._reloadSource(S),this._changed=!0)}loadURL(l,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const S=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const k=this._loadStyleRequest;a.j(S,this._loadStyleRequest).then((K=>{this._loadStyleRequest=null,this._load(K.data,p,C)})).catch((K=>{this._loadStyleRequest=null,K&&!k.signal.aborted&&this.fire(new a.k(K))}))}loadJSON(l,p={},C){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(l,p,C)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(pv,{validate:!1})}_load(l,p,C){var S,k;let K=p.transformStyle?p.transformStyle(C,l):l;if(!p.validate||!Dm(this,a.z(K))){K=Object.assign({},K),this._loaded=!0,this.stylesheet=K;for(const N in K.sources)this.addSource(N,K.sources[N],{validate:!1});K.sprite?this._loadSprite(K.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(K.glyphs),this._createLayers(),this.light=new At(this.stylesheet.light),this._setProjectionInternal(((S=this.stylesheet.projection)===null||S===void 0?void 0:S.type)||"mercator"),this.sky=new Le(this.stylesheet.sky),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var l,p,C;const S=a.bI(this.stylesheet.layers);this.setGlobalState((l=this.stylesheet.state)!==null&&l!==void 0?l:null),this.dispatcher.broadcast("SL",S),this._order=S.map((k=>k.id)),this._layers={},this._serializedLayers=null;for(const k of S){const K=a.bJ(k,this._globalState);if(K.setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=K,a.bK(K)&&this.sourceCaches[K.source]){const N=(C=(p=k.paint)===null||p===void 0?void 0:p["raster-fade-duration"])!==null&&C!==void 0?C:K.paint.get("raster-fade-duration");this.sourceCaches[K.source].setRasterFadeDuration(N)}}}_loadSprite(l,p=!1,C=void 0){let S;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(k,K,N,q){return a._(this,void 0,void 0,(function*(){const ie=oe(k),ae=N>1?"@2x":"",ye={},pe={};for(const{id:Se,url:Fe}of ie){const Xe=K.transformRequest(ue(Fe,ae,".json"),"SpriteJSON");ye[Se]=a.j(Xe,q);const $e=K.transformRequest(ue(Fe,ae,".png"),"SpriteImage");pe[Se]=$.getImage($e,q)}return yield Promise.all([...Object.values(ye),...Object.values(pe)]),(function(Se,Fe){return a._(this,void 0,void 0,(function*(){const Xe={};for(const $e in Se){Xe[$e]={};const tt=x.getImageCanvasContext((yield Fe[$e]).data),it=(yield Se[$e]).data;for(const ct in it){const{width:rt,height:ht,x:ft,y:ot,sdf:St,pixelRatio:Wt,stretchX:Ut,stretchY:jt,content:Qt,textFitWidth:On,textFitHeight:In}=it[ct];Xe[$e][ct]={data:null,pixelRatio:Wt,sdf:St,stretchX:Ut,stretchY:jt,content:Qt,textFitWidth:On,textFitHeight:In,spriteData:{width:rt,height:ht,x:ft,y:ot,context:tt}}}}return Xe}))})(ye,pe)}))})(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((k=>{if(this._spriteRequest=null,k)for(const K in k){this._spritesImagesIds[K]=[];const N=this._spritesImagesIds[K]?this._spritesImagesIds[K].filter((q=>!(q in k))):[];for(const q of N)this.imageManager.removeImage(q),this._changedImages[q]=!0;for(const q in k[K]){const ie=K==="default"?q:`${K}:${q}`;this._spritesImagesIds[K].push(ie),ie in this.imageManager.images?this.imageManager.updateImage(ie,k[K][q],!1):this.imageManager.addImage(ie,k[K][q]),p&&(this._changedImages[ie]=!0)}}})).catch((k=>{this._spriteRequest=null,S=k,this.fire(new a.k(S))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),C&&C(S)}))}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(l){const p=this.sourceCaches[l.source];if(!p)return;const C=l.sourceLayer;if(!C)return;const S=p.getSource();(S.type==="geojson"||S.vectorLayerIds&&S.vectorLayerIds.indexOf(C)===-1)&&this.fire(new a.k(new Error(`Source layer "${C}" does not exist on source "${S.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,p=!1){const C=this._serializedAllLayers();if(!l||l.length===0)return Object.values(p?a.bL(C):C);const S=[];for(const k of l)if(C[k]){const K=p?a.bL(C[k]):C[k];S.push(K)}return S}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const p=Object.keys(this._layers);for(const C of p){const S=this._layers[C];S.type!=="custom"&&(l[C]=S.serialize())}return l}hasTransitions(){var l,p,C;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((p=this.sky)===null||p===void 0)&&p.hasTransition()||!((C=this.projection)===null||C===void 0)&&C.hasTransition())return!0;for(const S in this.sourceCaches)if(this.sourceCaches[S].hasTransition())return!0;for(const S in this._layers)if(this._layers[S].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const p=this._changed;if(p){const S=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(S.length||k.length)&&this._updateWorkerLayers(S,k);for(const K in this._updatedSources){const N=this._updatedSources[K];if(N==="reload")this._reloadSource(K);else{if(N!=="clear")throw new Error(`Invalid action ${N}`);this._clearSource(K)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const K in this._updatedPaintProps)this._layers[K].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const C={};for(const S in this.sourceCaches){const k=this.sourceCaches[S];C[S]=k.used,k.used=!1}for(const S of this._order){const k=this._layers[S];k.recalculate(l,this._availableImages),!k.isHidden(l.zoom)&&k.source&&(this.sourceCaches[k.source].used=!0)}for(const S in C){const k=this.sourceCaches[S];!!C[S]!=!!k.used&&k.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,p&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,p={}){var C;this._checkLoaded();const S=this.serialize();if(l=p.transformStyle?p.transformStyle(S,l):l,((C=p.validate)===null||C===void 0||C)&&Dm(this,a.z(l)))return!1;(l=a.bL(l)).layers=a.bI(l.layers);const k=a.bM(S,l),K=this._getOperationsToPerform(k);if(K.unimplemented.length>0)throw new Error(`Unimplemented: ${K.unimplemented.join(", ")}.`);if(K.operations.length===0)return!1;for(const N of K.operations)N();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const p=[],C=[];for(const S of l)switch(S.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":p.push((()=>this.addLayer.apply(this,S.args)));break;case"removeLayer":p.push((()=>this.removeLayer.apply(this,S.args)));break;case"setPaintProperty":p.push((()=>this.setPaintProperty.apply(this,S.args)));break;case"setLayoutProperty":p.push((()=>this.setLayoutProperty.apply(this,S.args)));break;case"setFilter":p.push((()=>this.setFilter.apply(this,S.args)));break;case"addSource":p.push((()=>this.addSource.apply(this,S.args)));break;case"removeSource":p.push((()=>this.removeSource.apply(this,S.args)));break;case"setLayerZoomRange":p.push((()=>this.setLayerZoomRange.apply(this,S.args)));break;case"setLight":p.push((()=>this.setLight.apply(this,S.args)));break;case"setGeoJSONSourceData":p.push((()=>this.setGeoJSONSourceData.apply(this,S.args)));break;case"setGlyphs":p.push((()=>this.setGlyphs.apply(this,S.args)));break;case"setSprite":p.push((()=>this.setSprite.apply(this,S.args)));break;case"setTerrain":p.push((()=>this.map.setTerrain.apply(this,S.args)));break;case"setSky":p.push((()=>this.setSky.apply(this,S.args)));break;case"setProjection":this.setProjection.apply(this,S.args);break;case"setGlobalState":p.push((()=>this.setGlobalState.apply(this,S.args)));break;case"setTransition":p.push((()=>{}));break;default:C.push(S.command)}return{operations:p,unimplemented:C}}addImage(l,p){if(this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,p),this._afterImageUpdated(l)}updateImage(l,p){this.imageManager.updateImage(l,p)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,p,C={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.z.source,`sources.${l}`,p,null,C))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const S=this.sourceCaches[l]=new si(l,p,this.dispatcher);S.style=this,S.setEventedParent(this,(()=>({isSourceLoaded:S.loaded(),source:S.serialize(),sourceId:l}))),S.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===l)return this.fire(new a.k(new Error(`Source "${l}" cannot be removed while layer "${C}" is using it.`)));const p=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],p.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,p){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const C=this.sourceCaches[l].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(p),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,p,C={}){this._checkLoaded();const S=l.id;if(this.getLayer(S))return void this.fire(new a.k(new Error(`Layer "${S}" already exists on this map.`)));let k;if(l.type==="custom"){if(Dm(this,a.bN(l)))return;k=a.bJ(l,this._globalState)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(S,l.source),l=a.bL(l),l=a.e(l,{source:S})),this._validate(a.z.layer,`layers.${S}`,l,{arrayIndex:-1},C))return;k=a.bJ(l,this._globalState),this._validateLayer(k),k.setEventedParent(this,{layer:{id:S}})}const K=p?this._order.indexOf(p):this._order.length;if(p&&K===-1)this.fire(new a.k(new Error(`Cannot add layer "${S}" before non-existing layer "${p}".`)));else{if(this._order.splice(K,0,S),this._layerOrderChanged=!0,this._layers[S]=k,this._removedLayers[S]&&k.source&&k.type!=="custom"){const N=this._removedLayers[S];delete this._removedLayers[S],N.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}moveLayer(l,p){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.k(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===p)return;const C=this._order.indexOf(l);this._order.splice(C,1);const S=p?this._order.indexOf(p):this._order.length;p&&S===-1?this.fire(new a.k(new Error(`Cannot move layer "${l}" before non-existing layer "${p}".`))):(this._order.splice(S,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const p=this._layers[l];if(!p)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${l}".`)));p.setEventedParent(null);const C=this._order.indexOf(l);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=p,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],p.onRemove&&p.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,p,C){this._checkLoaded();const S=this.getLayer(l);S?S.minzoom===p&&S.maxzoom===C||(p!=null&&(S.minzoom=p),C!=null&&(S.maxzoom=C),this._updateLayer(S)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,p,C={}){this._checkLoaded();const S=this.getLayer(l);if(S){if(!a.bH(S.filter,p))return p==null?(S.setFilter(void 0),void this._updateLayer(S)):void(this._validate(a.z.filter,`layers.${S.id}.filter`,p,null,C)||(S.setFilter(a.bL(p)),this._updateLayer(S)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.bL(this.getLayer(l).filter)}setLayoutProperty(l,p,C,S={}){this._checkLoaded();const k=this.getLayer(l);k?a.bH(k.getLayoutProperty(p),C)||(k.setLayoutProperty(p,C,S),this._updateLayer(k)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,p){const C=this.getLayer(l);if(C)return C.getLayoutProperty(p);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,p,C,S={}){this._checkLoaded();const k=this.getLayer(l);k?a.bH(k.getPaintProperty(p),C)||this._updatePaintProperty(k,p,C,S):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}_updatePaintProperty(l,p,C,S={}){l.setPaintProperty(p,C,S)&&this._updateLayer(l),a.bK(l)&&p==="raster-fade-duration"&&this.sourceCaches[l.source].setRasterFadeDuration(C),this._changed=!0,this._updatedPaintProps[l.id]=!0,this._serializedLayers=null}getPaintProperty(l,p){return this.getLayer(l).getPaintProperty(p)}setFeatureState(l,p){this._checkLoaded();const C=l.source,S=l.sourceLayer,k=this.sourceCaches[C];if(k===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const K=k.getSource().type;K==="geojson"&&S?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):K!=="vector"||S?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),k.setFeatureState(S,l.id,p)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,p){this._checkLoaded();const C=l.source,S=this.sourceCaches[C];if(S===void 0)return void this.fire(new a.k(new Error(`The source '${C}' does not exist in the map's style.`)));const k=S.getSource().type,K=k==="vector"?l.sourceLayer:void 0;k!=="vector"||K?p&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(K,l.id,p):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const p=l.source,C=l.sourceLayer,S=this.sourceCaches[p];if(S!==void 0)return S.getSource().type!=="vector"||C?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),S.getFeatureState(C,l.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.bO(this.sourceCaches,(k=>k.serialize())),p=this._serializeByIds(this._order,!0),C=this.map.getTerrain()||void 0,S=this.stylesheet;return a.bP({version:S.version,name:S.name,metadata:S.metadata,light:S.light,sky:S.sky,center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,sprite:S.sprite,glyphs:S.glyphs,transition:S.transition,projection:S.projection,sources:l,layers:p,terrain:C},(k=>k!==void 0))}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const p=K=>this._layers[K].type==="fill-extrusion",C={},S=[];for(let K=this._order.length-1;K>=0;K--){const N=this._order[K];if(p(N)){C[N]=K;for(const q of l){const ie=q[N];if(ie)for(const ae of ie)S.push(ae)}}}S.sort(((K,N)=>N.intersectionZ-K.intersectionZ));const k=[];for(let K=this._order.length-1;K>=0;K--){const N=this._order[K];if(p(N))for(let q=S.length-1;q>=0;q--){const ie=S[q].feature;if(C[ie.layer.id]<K)break;k.push(ie),S.pop()}else for(const q of l){const ie=q[N];if(ie)for(const ae of ie)k.push(ae.feature)}}return k}queryRenderedFeatures(l,p,C){p&&p.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",p.filter,null,p);const S={};if(p&&p.layers){if(!(Array.isArray(p.layers)||p.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ie of p.layers){const ae=this._layers[ie];if(!ae)return this.fire(new a.k(new Error(`The layer '${ie}' does not exist in the map's style and cannot be queried for features.`))),[];S[ae.source]=!0}}const k=[];p.availableImages=this._availableImages;const K=this._serializedAllLayers(),N=p.layers instanceof Set?p.layers:Array.isArray(p.layers)?new Set(p.layers):null,q=Object.assign(Object.assign({},p),{layers:N,globalState:this._globalState});for(const ie in this.sourceCaches)p.layers&&!S[ie]||k.push(Ve(this.sourceCaches[ie],this._layers,K,l,q,C,this.map.terrain?(ae,ye,pe)=>this.map.terrain.getElevation(ae,ye,pe):void 0));return this.placement&&k.push((function(ie,ae,ye,pe,Se,Fe,Xe){const $e={},tt=Fe.queryRenderedSymbols(pe),it=[];for(const ct of Object.keys(tt).map(Number))it.push(Xe[ct]);it.sort(mt);for(const ct of it){const rt=ct.featureIndex.lookupSymbolFeatures(tt[ct.bucketInstanceId],ae,ct.bucketIndex,ct.sourceLayerIndex,{filterSpec:Se.filter,globalState:Se.globalState},Se.layers,Se.availableImages,ie);for(const ht in rt){const ft=$e[ht]=$e[ht]||[],ot=rt[ht];ot.sort(((St,Wt)=>{const Ut=ct.featureSortOrder;if(Ut){const jt=Ut.indexOf(St.featureIndex);return Ut.indexOf(Wt.featureIndex)-jt}return Wt.featureIndex-St.featureIndex}));for(const St of ot)ft.push(St)}}return(function(ct,rt,ht){for(const ft in ct)for(const ot of ct[ft])pt(ot,ht[rt[ft].source]);return ct})($e,ie,ye)})(this._layers,K,this.sourceCaches,l,q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(l,p){p?.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",p.filter,null,p);const C=this.sourceCaches[l];return C?(function(S,k){const K=S.getRenderableIds().map((ie=>S.getTileByID(ie))),N=[],q={};for(let ie=0;ie<K.length;ie++){const ae=K[ie],ye=ae.tileID.canonical.key;q[ye]||(q[ye]=!0,ae.querySourceFeatures(N,k))}return N})(C,p?Object.assign(Object.assign({},p),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(l,p={}){this._checkLoaded();const C=this.light.getLight();let S=!1;for(const K in l)if(!a.bH(l[K],C[K])){S=!0;break}if(!S)return;const k={now:R(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,p),this.light.updateTransitions(k)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,p={}){this._checkLoaded();const C=this.getSky();let S=!1;if(!l&&!C)return;if(l&&!C)S=!0;else if(!l&&C)S=!0;else for(const K in l)if(!a.bH(l[K],C[K])){S=!0;break}if(!S)return;const k={now:R(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,p),this.sky.updateTransitions(k)}_setProjectionInternal(l){const p=(function(C,S){const k={constrain:S};if(Array.isArray(C)){const K=new yr({type:C});return{projection:K,transform:new xp(k),cameraHelper:new x1(K)}}switch(C){case"mercator":return{projection:new su,transform:new os(k),cameraHelper:new ji};case"globe":{const K=new yr({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:K,transform:new xp(k),cameraHelper:new x1(K)}}case"vertical-perspective":return{projection:new ao,transform:new Bf(k),cameraHelper:new oc};default:return a.w(`Unknown projection name: ${C}. Falling back to mercator projection.`),{projection:new su,transform:new os(k),cameraHelper:new ji}}})(l,this.map.transformConstrain);this.projection=p.projection,this.map.migrateProjection(p.transform,p.cameraHelper);for(const C in this.sourceCaches)this.sourceCaches[C].reload()}_validate(l,p,C,S,k={}){return(!k||k.validate!==!1)&&Dm(this,l.call(a.z,a.e({key:p,style:this.serialize(),value:C,styleSpec:a.v},S)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),le().off(It,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const C=this.sourceCaches[p];C.setEventedParent(null),C.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const p in this.sourceCaches)this.sourceCaches[p].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,p,C,S,k=!1){let K=!1,N=!1;const q={};for(const ie of this._order){const ae=this._layers[ie];if(ae.type!=="symbol")continue;if(!q[ae.source]){const pe=this.sourceCaches[ae.source];q[ae.source]=pe.getRenderableIds(!0).map((Se=>pe.getTileByID(Se))).sort(((Se,Fe)=>Fe.tileID.overscaledZ-Se.tileID.overscaledZ||(Se.tileID.isLessThan(Fe.tileID)?-1:1)))}const ye=this.crossTileSymbolIndex.addLayer(ae,q[ae.source],l.center.lng);K=K||ye}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(R(),l.zoom))&&(this.pauseablePlacement=new iu(l,this.map.terrain,this._order,k,p,C,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(R()),N=!0),K&&this.pauseablePlacement.placement.setStale()),N||K)for(const ie of this._order){const ae=this._layers[ie];ae.type==="symbol"&&this.placement.updateLayerOpacities(ae,q[ae.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(R())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,p){return a._(this,void 0,void 0,(function*(){const C=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const S=this.sourceCaches[p.source];return S&&S.setDependencies(p.tileID.key,p.type,p.icons),C}))}getGlyphs(l,p){return a._(this,void 0,void 0,(function*(){const C=yield this.glyphManager.getGlyphs(p.stacks),S=this.sourceCaches[p.source];return S&&S.setDependencies(p.tileID.key,p.type,[""]),C}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,p={}){this._checkLoaded(),l&&this._validate(a.z.glyphs,"glyphs",l,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}getDashes(l,p){return a._(this,void 0,void 0,(function*(){const C={};for(const[S,k]of Object.entries(p.dashes))C[S]=this.lineAtlas.getDash(k.dasharray,k.round);return C}))}addSprite(l,p,C={},S){this._checkLoaded();const k=[{id:l,url:p}],K=[...oe(this.stylesheet.sprite),...k];this._validate(a.z.sprite,"sprite",K,null,C)||(this.stylesheet.sprite=K,this._loadSprite(k,!0,S))}removeSprite(l){this._checkLoaded();const p=oe(this.stylesheet.sprite);if(p.find((C=>C.id===l))){if(this._spritesImagesIds[l])for(const C of this._spritesImagesIds[l])this.imageManager.removeImage(C),this._changedImages[C]=!0;p.splice(p.findIndex((C=>C.id===l)),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return oe(this.stylesheet.sprite)}setSprite(l,p={},C){this._checkLoaded(),l&&this._validate(a.z.sprite,"sprite",l,null,p)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,C):(this._unloadSprite(),C&&C(null)))}}var Of=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class XA{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,p,C,S,k,K,N,q,ie){this.context=l;let ae=this.boundPaintVertexBuffers.length!==S.length;for(let ye=0;!ae&&ye<S.length;ye++)this.boundPaintVertexBuffers[ye]!==S[ye]&&(ae=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==C||ae||this.boundIndexBuffer!==k||this.boundVertexOffset!==K||this.boundDynamicVertexBuffer!==N||this.boundDynamicVertexBuffer2!==q||this.boundDynamicVertexBuffer3!==ie?this.freshBind(p,C,S,k,K,N,q,ie):(l.bindVertexArray.set(this.vao),N&&N.bind(),k&&k.dynamicDraw&&k.bind(),q&&q.bind(),ie&&ie.bind())}freshBind(l,p,C,S,k,K,N,q){const ie=l.numAttributes,ae=this.context,ye=ae.gl;this.vao&&this.destroy(),this.vao=ae.createVertexArray(),ae.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=S,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=K,this.boundDynamicVertexBuffer2=N,this.boundDynamicVertexBuffer3=q,p.enableAttributes(ye,l);for(const pe of C)pe.enableAttributes(ye,l);K&&K.enableAttributes(ye,l),N&&N.enableAttributes(ye,l),q&&q.enableAttributes(ye,l),p.bind(),p.setVertexAttribPointers(ye,l,k);for(const pe of C)pe.bind(),pe.setVertexAttribPointers(ye,l,k);K&&(K.bind(),K.setVertexAttribPointers(ye,l,k)),S&&S.bind(),N&&(N.bind(),N.setVertexAttribPointers(ye,l,k)),q&&(q.bind(),q.setVertexAttribPointers(ye,l,k)),ae.currentNumAttributes=ie}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const h0=(B,l,p,C,S)=>({u_texture:0,u_ele_delta:B,u_fog_matrix:l,u_fog_color:p?p.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:S?0:p?p.calculateFogBlendOpacity(C):0,u_horizon_color:p?p.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1,u_is_globe_mode:S?1:0}),Pm={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Kl(B){const l=[];for(let p=0;p<B.length;p++){if(B[p]===null)continue;const C=B[p].split(" ");l.push(C.pop())}return l}class Pd{constructor(l,p,C,S,k,K,N,q,ie=[]){const ae=l.gl;this.program=ae.createProgram();const ye=Kl(p.staticAttributes),pe=C?C.getBinderAttributes():[],Se=ye.concat(pe),Fe=ja.prelude.staticUniforms?Kl(ja.prelude.staticUniforms):[],Xe=N.staticUniforms?Kl(N.staticUniforms):[],$e=p.staticUniforms?Kl(p.staticUniforms):[],tt=C?C.getBinderUniforms():[],it=Fe.concat(Xe).concat($e).concat(tt),ct=[];for(const Ut of it)ct.indexOf(Ut)<0&&ct.push(Ut);const rt=C?C.defines():[];li(ae)&&rt.unshift("#version 300 es"),k&&rt.push("#define OVERDRAW_INSPECTOR;"),K&&rt.push("#define TERRAIN3D;"),q&&rt.push(q),ie&&rt.push(...ie);let ht=rt.concat(ja.prelude.fragmentSource,N.fragmentSource,p.fragmentSource).join(`
`),ft=rt.concat(ja.prelude.vertexSource,N.vertexSource,p.vertexSource).join(`
`);li(ae)||(ht=(function(Ut){return Ut.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ht),ft=(function(Ut){return Ut.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(ft));const ot=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(ot,ht),ae.compileShader(ot),!ae.getShaderParameter(ot,ae.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ae.getShaderInfoLog(ot)}`);ae.attachShader(this.program,ot);const St=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(St,ft),ae.compileShader(St),!ae.getShaderParameter(St,ae.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ae.getShaderInfoLog(St)}`);ae.attachShader(this.program,St),this.attributes={};const Wt={};this.numAttributes=Se.length;for(let Ut=0;Ut<this.numAttributes;Ut++)Se[Ut]&&(ae.bindAttribLocation(this.program,Ut,Se[Ut]),this.attributes[Se[Ut]]=Ut);if(ae.linkProgram(this.program),!ae.getProgramParameter(this.program,ae.LINK_STATUS))throw new Error(`Program failed to link: ${ae.getProgramInfoLog(this.program)}`);ae.deleteShader(St),ae.deleteShader(ot);for(let Ut=0;Ut<ct.length;Ut++){const jt=ct[Ut];if(jt&&!Wt[jt]){const Qt=ae.getUniformLocation(this.program,jt);Qt&&(Wt[jt]=Qt)}}this.fixedUniforms=S(l,Wt),this.terrainUniforms=((Ut,jt)=>({u_depth:new a.bQ(Ut,jt.u_depth),u_terrain:new a.bQ(Ut,jt.u_terrain),u_terrain_dim:new a.bg(Ut,jt.u_terrain_dim),u_terrain_matrix:new a.bS(Ut,jt.u_terrain_matrix),u_terrain_unpack:new a.bT(Ut,jt.u_terrain_unpack),u_terrain_exaggeration:new a.bg(Ut,jt.u_terrain_exaggeration)}))(l,Wt),this.projectionUniforms=((Ut,jt)=>({u_projection_matrix:new a.bS(Ut,jt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bT(Ut,jt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bT(Ut,jt.u_projection_clipping_plane),u_projection_transition:new a.bg(Ut,jt.u_projection_transition),u_projection_fallback_matrix:new a.bS(Ut,jt.u_projection_fallback_matrix)}))(l,Wt),this.binderUniforms=C?C.getUniforms(l,Wt):[]}draw(l,p,C,S,k,K,N,q,ie,ae,ye,pe,Se,Fe,Xe,$e,tt,it,ct){const rt=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(C),l.setStencilMode(S),l.setColorMode(k),l.setCullFace(K),q){l.activeTexture.set(rt.TEXTURE2),rt.bindTexture(rt.TEXTURE_2D,q.depthTexture),l.activeTexture.set(rt.TEXTURE3),rt.bindTexture(rt.TEXTURE_2D,q.texture);for(const ft in this.terrainUniforms)this.terrainUniforms[ft].set(q[ft])}if(ie)for(const ft in ie)this.projectionUniforms[Pm[ft]].set(ie[ft]);if(N)for(const ft in this.fixedUniforms)this.fixedUniforms[ft].set(N[ft]);$e&&$e.setUniforms(l,this.binderUniforms,Fe,{zoom:Xe});let ht=0;switch(p){case rt.LINES:ht=2;break;case rt.TRIANGLES:ht=3;break;case rt.LINE_STRIP:ht=1}for(const ft of Se.get()){const ot=ft.vaos||(ft.vaos={});(ot[ae]||(ot[ae]=new XA)).bind(l,this,ye,$e?$e.getPaintVertexBuffers():[],pe,ft.vertexOffset,tt,it,ct),rt.drawElements(p,ft.primitiveLength*ht,rt.UNSIGNED_SHORT,ft.primitiveOffset*ht*2)}}}function If(B,l,p){const C=1/a.aC(p,1,l.transform.tileZoom),S=Math.pow(2,p.tileID.overscaledZ),k=p.tileSize*Math.pow(2,l.transform.tileZoom)/S,K=k*(p.tileID.canonical.x+p.tileID.wrap*S),N=k*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[C,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[K>>16,N>>16],u_pixel_coord_lower:[65535&K,65535&N]}}const Kh=(B,l,p,C)=>{const S=B.style.light,k=S.properties.get("position"),K=[k.x,k.y,k.z],N=a.bW();S.properties.get("anchor")==="viewport"&&a.bX(N,B.transform.bearingInRadians),a.bY(K,K,N);const q=B.transform.transformLightDirection(K),ie=S.properties.get("color");return{u_lightpos:K,u_lightpos_globe:q,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[ie.r,ie.g,ie.b],u_vertical_gradient:+l,u_opacity:p,u_fill_translate:C}},kf=(B,l,p,C,S,k,K)=>a.e(Kh(B,l,p,C),If(k,B,K),{u_height_factor:-Math.pow(2,S.overscaledZ)/K.tileSize/8}),Mp=(B,l,p,C)=>a.e(If(l,B,p),{u_fill_translate:C}),Kd=(B,l)=>({u_world:B,u_fill_translate:l}),M1=(B,l,p,C,S)=>a.e(Mp(B,l,p,S),{u_world:C}),Oc=(B,l,p,C,S)=>{const k=B.transform;let K,N,q=0;if(p.paint.get("circle-pitch-alignment")==="map"){const ie=a.aC(l,1,k.zoom);K=!0,N=[ie,ie],q=ie/(a.$*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*S}else K=!1,N=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+K,u_device_pixel_ratio:B.pixelRatio,u_extrude_scale:N,u_globe_extrude_scale:q,u_translate:C}},sc=B=>({u_pixel_extrude_scale:[1/B.width,1/B.height]}),Km=B=>({u_viewport_size:[B.width,B.height]}),Tf=(B,l=1)=>({u_color:B,u_overlay:0,u_overlay_scale:l}),wp=(B,l,p,C)=>{const S=a.aC(B,1,l)/(a.$*Math.pow(2,B.tileID.overscaledZ))*2*Math.PI*C;return{u_extrude_scale:a.aC(B,1,l),u_intensity:p,u_globe_extrude_scale:S}},Rf=(B,l,p,C)=>{const S=a.L();a.bZ(S,0,B.width,B.height,0,0,1);const k=B.context.gl;return{u_matrix:S,u_world:[k.drawingBufferWidth,k.drawingBufferHeight],u_image:p,u_color_ramp:C,u_opacity:l.paint.get("heatmap-opacity")}},Df=(B,l,p)=>{const C=p.paint.get("hillshade-accent-color");let S;switch(p.paint.get("hillshade-method")){case"basic":S=4;break;case"combined":S=1;break;case"igor":S=2;break;case"multidirectional":S=3;break;default:S=0}const k=p.getIlluminationProperties();for(let K=0;K<k.directionRadians.length;K++)p.paint.get("hillshade-illumination-anchor")==="viewport"&&(k.directionRadians[K]+=B.transform.bearingInRadians);return{u_image:0,u_latrange:w1(0,l.tileID),u_exaggeration:p.paint.get("hillshade-exaggeration"),u_altitudes:k.altitudeRadians,u_azimuths:k.directionRadians,u_accent:C,u_method:S,u_highlights:k.highlightColor,u_shadows:k.shadowColor}},Pf=(B,l)=>{const p=l.stride,C=a.L();return a.bZ(C,0,a.$,-a.$,0,0,1),a.M(C,C,[0,-a.$,0]),{u_matrix:C,u_image:1,u_dimension:[p,p],u_zoom:B.overscaledZ,u_unpack:l.getUnpackVector()}};function w1(B,l){const p=Math.pow(2,l.canonical.z),C=l.canonical.y;return[new a.a1(0,C/p).toLngLat().lat,new a.a1(0,(C+1)/p).toLngLat().lat]}const Sp=(B,l,p=0)=>({u_image:0,u_unpack:l.getUnpackVector(),u_dimension:[l.stride,l.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:p,u_opacity:B.paint.get("color-relief-opacity")}),tA=(B,l,p,C)=>{const S=B.transform;return{u_translation:vA(B,l,p),u_ratio:C/a.aC(l,1,S.zoom),u_device_pixel_ratio:B.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Uh=(B,l,p,C,S)=>a.e(tA(B,l,p,C),{u_image:0,u_image_height:S}),Um=(B,l,p,C,S)=>{const k=B.transform,K=Lh(l,k);return{u_translation:vA(B,l,p),u_texsize:l.imageAtlasTexture.size,u_ratio:C/a.aC(l,1,k.zoom),u_device_pixel_ratio:B.pixelRatio,u_image:0,u_scale:[K,S.fromScale,S.toScale],u_fade:S.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},Ud=(B,l,p,C,S)=>{const k=Lh(l,B.transform);return a.e(tA(B,l,p,C),{u_tileratio:k,u_crossfade_from:S.fromScale,u_crossfade_to:S.toScale,u_image:0,u_mix:S.t,u_lineatlas_width:B.lineAtlas.width,u_lineatlas_height:B.lineAtlas.height})},Lm=(B,l,p,C,S,k)=>{const K=Lh(l,B.transform);return a.e(tA(B,l,p,C),{u_image:0,u_image_height:k,u_tileratio:K,u_crossfade_from:S.fromScale,u_crossfade_to:S.toScale,u_image_dash:1,u_mix:S.t,u_lineatlas_width:B.lineAtlas.width,u_lineatlas_height:B.lineAtlas.height})};function Lh(B,l){return 1/a.aC(B,1,l.tileZoom)}function vA(B,l,p){return a.aD(B.transform,l,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const zm=(B,l,p,C,S)=>{return{u_tl_parent:B,u_scale_parent:l,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(K=C.paint.get("raster-saturation"),K>0?1-1/(1.001-K):-K),u_contrast_factor:(k=C.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:S1(C.paint.get("raster-hue-rotate")),u_coords_top:[S[0].x,S[0].y,S[1].x,S[1].y],u_coords_bottom:[S[3].x,S[3].y,S[2].x,S[2].y]};var k,K};function S1(B){B*=Math.PI/180;const l=Math.sin(B),p=Math.cos(B);return[(2*p+1)/3,(-Math.sqrt(3)*l-p+1)/3,(Math.sqrt(3)*l-p+1)/3]}const d0=(B,l,p,C,S,k,K,N,q,ie,ae,ye,pe)=>{const Se=K.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:Se.cameraToCenterDistance,u_pitch:Se.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:Se.width/Se.height,u_fade_change:K.options.fadeDuration?K.symbolFadeChange:1,u_label_plane_matrix:N,u_coord_matrix:q,u_is_text:+ae,u_pitch_with_map:+C,u_is_along_line:S,u_is_variable_anchor:k,u_texsize:ye,u_texture:0,u_translation:ie,u_pitched_scale:pe}},f0=(B,l,p,C,S,k,K,N,q,ie,ae,ye,pe,Se)=>{const Fe=K.transform;return a.e(d0(B,l,p,C,S,k,K,N,q,ie,ae,ye,Se),{u_gamma_scale:C?Math.cos(Fe.pitch*Math.PI/180)*Fe.cameraToCenterDistance:1,u_device_pixel_ratio:K.pixelRatio,u_is_halo:1})},zh=(B,l,p,C,S,k,K,N,q,ie,ae,ye,pe)=>a.e(f0(B,l,p,C,S,k,K,N,q,ie,!0,ae,0,pe),{u_texsize_icon:ye,u_texture_icon:1}),Ls=(B,l)=>({u_opacity:B,u_color:l}),JA=(B,l,p,C,S)=>a.e((function(k,K,N,q){const ie=N.imageManager.getPattern(k.from.toString()),ae=N.imageManager.getPattern(k.to.toString()),{width:ye,height:pe}=N.imageManager.getPixelSize(),Se=Math.pow(2,q.tileID.overscaledZ),Fe=q.tileSize*Math.pow(2,N.transform.tileZoom)/Se,Xe=Fe*(q.tileID.canonical.x+q.tileID.wrap*Se),$e=Fe*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ie.tl,u_pattern_br_a:ie.br,u_pattern_tl_b:ae.tl,u_pattern_br_b:ae.br,u_texsize:[ye,pe],u_mix:K.t,u_pattern_size_a:ie.displaySize,u_pattern_size_b:ae.displaySize,u_scale_a:K.fromScale,u_scale_b:K.toScale,u_tile_units_to_pixels:1/a.aC(q,1,N.transform.tileZoom),u_pixel_coord_upper:[Xe>>16,$e>>16],u_pixel_coord_lower:[65535&Xe,65535&$e]}})(p,S,l,C),{u_opacity:B}),nA=(B,l)=>{},Fm={fillExtrusion:(B,l)=>({u_lightpos:new a.bU(B,l.u_lightpos),u_lightpos_globe:new a.bU(B,l.u_lightpos_globe),u_lightintensity:new a.bg(B,l.u_lightintensity),u_lightcolor:new a.bU(B,l.u_lightcolor),u_vertical_gradient:new a.bg(B,l.u_vertical_gradient),u_opacity:new a.bg(B,l.u_opacity),u_fill_translate:new a.bV(B,l.u_fill_translate)}),fillExtrusionPattern:(B,l)=>({u_lightpos:new a.bU(B,l.u_lightpos),u_lightpos_globe:new a.bU(B,l.u_lightpos_globe),u_lightintensity:new a.bg(B,l.u_lightintensity),u_lightcolor:new a.bU(B,l.u_lightcolor),u_vertical_gradient:new a.bg(B,l.u_vertical_gradient),u_height_factor:new a.bg(B,l.u_height_factor),u_opacity:new a.bg(B,l.u_opacity),u_fill_translate:new a.bV(B,l.u_fill_translate),u_image:new a.bQ(B,l.u_image),u_texsize:new a.bV(B,l.u_texsize),u_pixel_coord_upper:new a.bV(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(B,l.u_pixel_coord_lower),u_scale:new a.bU(B,l.u_scale),u_fade:new a.bg(B,l.u_fade)}),fill:(B,l)=>({u_fill_translate:new a.bV(B,l.u_fill_translate)}),fillPattern:(B,l)=>({u_image:new a.bQ(B,l.u_image),u_texsize:new a.bV(B,l.u_texsize),u_pixel_coord_upper:new a.bV(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(B,l.u_pixel_coord_lower),u_scale:new a.bU(B,l.u_scale),u_fade:new a.bg(B,l.u_fade),u_fill_translate:new a.bV(B,l.u_fill_translate)}),fillOutline:(B,l)=>({u_world:new a.bV(B,l.u_world),u_fill_translate:new a.bV(B,l.u_fill_translate)}),fillOutlinePattern:(B,l)=>({u_world:new a.bV(B,l.u_world),u_image:new a.bQ(B,l.u_image),u_texsize:new a.bV(B,l.u_texsize),u_pixel_coord_upper:new a.bV(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(B,l.u_pixel_coord_lower),u_scale:new a.bU(B,l.u_scale),u_fade:new a.bg(B,l.u_fade),u_fill_translate:new a.bV(B,l.u_fill_translate)}),circle:(B,l)=>({u_camera_to_center_distance:new a.bg(B,l.u_camera_to_center_distance),u_scale_with_map:new a.bQ(B,l.u_scale_with_map),u_pitch_with_map:new a.bQ(B,l.u_pitch_with_map),u_extrude_scale:new a.bV(B,l.u_extrude_scale),u_device_pixel_ratio:new a.bg(B,l.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(B,l.u_globe_extrude_scale),u_translate:new a.bV(B,l.u_translate)}),collisionBox:(B,l)=>({u_pixel_extrude_scale:new a.bV(B,l.u_pixel_extrude_scale)}),collisionCircle:(B,l)=>({u_viewport_size:new a.bV(B,l.u_viewport_size)}),debug:(B,l)=>({u_color:new a.bR(B,l.u_color),u_overlay:new a.bQ(B,l.u_overlay),u_overlay_scale:new a.bg(B,l.u_overlay_scale)}),depth:nA,clippingMask:nA,heatmap:(B,l)=>({u_extrude_scale:new a.bg(B,l.u_extrude_scale),u_intensity:new a.bg(B,l.u_intensity),u_globe_extrude_scale:new a.bg(B,l.u_globe_extrude_scale)}),heatmapTexture:(B,l)=>({u_matrix:new a.bS(B,l.u_matrix),u_world:new a.bV(B,l.u_world),u_image:new a.bQ(B,l.u_image),u_color_ramp:new a.bQ(B,l.u_color_ramp),u_opacity:new a.bg(B,l.u_opacity)}),hillshade:(B,l)=>({u_image:new a.bQ(B,l.u_image),u_latrange:new a.bV(B,l.u_latrange),u_exaggeration:new a.bg(B,l.u_exaggeration),u_altitudes:new a.b$(B,l.u_altitudes),u_azimuths:new a.b$(B,l.u_azimuths),u_accent:new a.bR(B,l.u_accent),u_method:new a.bQ(B,l.u_method),u_shadows:new a.b_(B,l.u_shadows),u_highlights:new a.b_(B,l.u_highlights)}),hillshadePrepare:(B,l)=>({u_matrix:new a.bS(B,l.u_matrix),u_image:new a.bQ(B,l.u_image),u_dimension:new a.bV(B,l.u_dimension),u_zoom:new a.bg(B,l.u_zoom),u_unpack:new a.bT(B,l.u_unpack)}),colorRelief:(B,l)=>({u_image:new a.bQ(B,l.u_image),u_unpack:new a.bT(B,l.u_unpack),u_dimension:new a.bV(B,l.u_dimension),u_elevation_stops:new a.bQ(B,l.u_elevation_stops),u_color_stops:new a.bQ(B,l.u_color_stops),u_color_ramp_size:new a.bQ(B,l.u_color_ramp_size),u_opacity:new a.bg(B,l.u_opacity)}),line:(B,l)=>({u_translation:new a.bV(B,l.u_translation),u_ratio:new a.bg(B,l.u_ratio),u_device_pixel_ratio:new a.bg(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(B,l.u_units_to_pixels)}),lineGradient:(B,l)=>({u_translation:new a.bV(B,l.u_translation),u_ratio:new a.bg(B,l.u_ratio),u_device_pixel_ratio:new a.bg(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(B,l.u_units_to_pixels),u_image:new a.bQ(B,l.u_image),u_image_height:new a.bg(B,l.u_image_height)}),linePattern:(B,l)=>({u_translation:new a.bV(B,l.u_translation),u_texsize:new a.bV(B,l.u_texsize),u_ratio:new a.bg(B,l.u_ratio),u_device_pixel_ratio:new a.bg(B,l.u_device_pixel_ratio),u_image:new a.bQ(B,l.u_image),u_units_to_pixels:new a.bV(B,l.u_units_to_pixels),u_scale:new a.bU(B,l.u_scale),u_fade:new a.bg(B,l.u_fade)}),lineSDF:(B,l)=>({u_translation:new a.bV(B,l.u_translation),u_ratio:new a.bg(B,l.u_ratio),u_device_pixel_ratio:new a.bg(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(B,l.u_units_to_pixels),u_image:new a.bQ(B,l.u_image),u_mix:new a.bg(B,l.u_mix),u_tileratio:new a.bg(B,l.u_tileratio),u_crossfade_from:new a.bg(B,l.u_crossfade_from),u_crossfade_to:new a.bg(B,l.u_crossfade_to),u_lineatlas_width:new a.bg(B,l.u_lineatlas_width),u_lineatlas_height:new a.bg(B,l.u_lineatlas_height)}),lineGradientSDF:(B,l)=>({u_translation:new a.bV(B,l.u_translation),u_ratio:new a.bg(B,l.u_ratio),u_device_pixel_ratio:new a.bg(B,l.u_device_pixel_ratio),u_units_to_pixels:new a.bV(B,l.u_units_to_pixels),u_image:new a.bQ(B,l.u_image),u_image_height:new a.bg(B,l.u_image_height),u_tileratio:new a.bg(B,l.u_tileratio),u_crossfade_from:new a.bg(B,l.u_crossfade_from),u_crossfade_to:new a.bg(B,l.u_crossfade_to),u_image_dash:new a.bQ(B,l.u_image_dash),u_mix:new a.bg(B,l.u_mix),u_lineatlas_width:new a.bg(B,l.u_lineatlas_width),u_lineatlas_height:new a.bg(B,l.u_lineatlas_height)}),raster:(B,l)=>({u_tl_parent:new a.bV(B,l.u_tl_parent),u_scale_parent:new a.bg(B,l.u_scale_parent),u_buffer_scale:new a.bg(B,l.u_buffer_scale),u_fade_t:new a.bg(B,l.u_fade_t),u_opacity:new a.bg(B,l.u_opacity),u_image0:new a.bQ(B,l.u_image0),u_image1:new a.bQ(B,l.u_image1),u_brightness_low:new a.bg(B,l.u_brightness_low),u_brightness_high:new a.bg(B,l.u_brightness_high),u_saturation_factor:new a.bg(B,l.u_saturation_factor),u_contrast_factor:new a.bg(B,l.u_contrast_factor),u_spin_weights:new a.bU(B,l.u_spin_weights),u_coords_top:new a.bT(B,l.u_coords_top),u_coords_bottom:new a.bT(B,l.u_coords_bottom)}),symbolIcon:(B,l)=>({u_is_size_zoom_constant:new a.bQ(B,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(B,l.u_is_size_feature_constant),u_size_t:new a.bg(B,l.u_size_t),u_size:new a.bg(B,l.u_size),u_camera_to_center_distance:new a.bg(B,l.u_camera_to_center_distance),u_pitch:new a.bg(B,l.u_pitch),u_rotate_symbol:new a.bQ(B,l.u_rotate_symbol),u_aspect_ratio:new a.bg(B,l.u_aspect_ratio),u_fade_change:new a.bg(B,l.u_fade_change),u_label_plane_matrix:new a.bS(B,l.u_label_plane_matrix),u_coord_matrix:new a.bS(B,l.u_coord_matrix),u_is_text:new a.bQ(B,l.u_is_text),u_pitch_with_map:new a.bQ(B,l.u_pitch_with_map),u_is_along_line:new a.bQ(B,l.u_is_along_line),u_is_variable_anchor:new a.bQ(B,l.u_is_variable_anchor),u_texsize:new a.bV(B,l.u_texsize),u_texture:new a.bQ(B,l.u_texture),u_translation:new a.bV(B,l.u_translation),u_pitched_scale:new a.bg(B,l.u_pitched_scale)}),symbolSDF:(B,l)=>({u_is_size_zoom_constant:new a.bQ(B,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(B,l.u_is_size_feature_constant),u_size_t:new a.bg(B,l.u_size_t),u_size:new a.bg(B,l.u_size),u_camera_to_center_distance:new a.bg(B,l.u_camera_to_center_distance),u_pitch:new a.bg(B,l.u_pitch),u_rotate_symbol:new a.bQ(B,l.u_rotate_symbol),u_aspect_ratio:new a.bg(B,l.u_aspect_ratio),u_fade_change:new a.bg(B,l.u_fade_change),u_label_plane_matrix:new a.bS(B,l.u_label_plane_matrix),u_coord_matrix:new a.bS(B,l.u_coord_matrix),u_is_text:new a.bQ(B,l.u_is_text),u_pitch_with_map:new a.bQ(B,l.u_pitch_with_map),u_is_along_line:new a.bQ(B,l.u_is_along_line),u_is_variable_anchor:new a.bQ(B,l.u_is_variable_anchor),u_texsize:new a.bV(B,l.u_texsize),u_texture:new a.bQ(B,l.u_texture),u_gamma_scale:new a.bg(B,l.u_gamma_scale),u_device_pixel_ratio:new a.bg(B,l.u_device_pixel_ratio),u_is_halo:new a.bQ(B,l.u_is_halo),u_translation:new a.bV(B,l.u_translation),u_pitched_scale:new a.bg(B,l.u_pitched_scale)}),symbolTextAndIcon:(B,l)=>({u_is_size_zoom_constant:new a.bQ(B,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bQ(B,l.u_is_size_feature_constant),u_size_t:new a.bg(B,l.u_size_t),u_size:new a.bg(B,l.u_size),u_camera_to_center_distance:new a.bg(B,l.u_camera_to_center_distance),u_pitch:new a.bg(B,l.u_pitch),u_rotate_symbol:new a.bQ(B,l.u_rotate_symbol),u_aspect_ratio:new a.bg(B,l.u_aspect_ratio),u_fade_change:new a.bg(B,l.u_fade_change),u_label_plane_matrix:new a.bS(B,l.u_label_plane_matrix),u_coord_matrix:new a.bS(B,l.u_coord_matrix),u_is_text:new a.bQ(B,l.u_is_text),u_pitch_with_map:new a.bQ(B,l.u_pitch_with_map),u_is_along_line:new a.bQ(B,l.u_is_along_line),u_is_variable_anchor:new a.bQ(B,l.u_is_variable_anchor),u_texsize:new a.bV(B,l.u_texsize),u_texsize_icon:new a.bV(B,l.u_texsize_icon),u_texture:new a.bQ(B,l.u_texture),u_texture_icon:new a.bQ(B,l.u_texture_icon),u_gamma_scale:new a.bg(B,l.u_gamma_scale),u_device_pixel_ratio:new a.bg(B,l.u_device_pixel_ratio),u_is_halo:new a.bQ(B,l.u_is_halo),u_translation:new a.bV(B,l.u_translation),u_pitched_scale:new a.bg(B,l.u_pitched_scale)}),background:(B,l)=>({u_opacity:new a.bg(B,l.u_opacity),u_color:new a.bR(B,l.u_color)}),backgroundPattern:(B,l)=>({u_opacity:new a.bg(B,l.u_opacity),u_image:new a.bQ(B,l.u_image),u_pattern_tl_a:new a.bV(B,l.u_pattern_tl_a),u_pattern_br_a:new a.bV(B,l.u_pattern_br_a),u_pattern_tl_b:new a.bV(B,l.u_pattern_tl_b),u_pattern_br_b:new a.bV(B,l.u_pattern_br_b),u_texsize:new a.bV(B,l.u_texsize),u_mix:new a.bg(B,l.u_mix),u_pattern_size_a:new a.bV(B,l.u_pattern_size_a),u_pattern_size_b:new a.bV(B,l.u_pattern_size_b),u_scale_a:new a.bg(B,l.u_scale_a),u_scale_b:new a.bg(B,l.u_scale_b),u_pixel_coord_upper:new a.bV(B,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.bV(B,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(B,l.u_tile_units_to_pixels)}),terrain:(B,l)=>({u_texture:new a.bQ(B,l.u_texture),u_ele_delta:new a.bg(B,l.u_ele_delta),u_fog_matrix:new a.bS(B,l.u_fog_matrix),u_fog_color:new a.bR(B,l.u_fog_color),u_fog_ground_blend:new a.bg(B,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(B,l.u_fog_ground_blend_opacity),u_horizon_color:new a.bR(B,l.u_horizon_color),u_horizon_fog_blend:new a.bg(B,l.u_horizon_fog_blend),u_is_globe_mode:new a.bg(B,l.u_is_globe_mode)}),terrainDepth:(B,l)=>({u_ele_delta:new a.bg(B,l.u_ele_delta)}),terrainCoords:(B,l)=>({u_texture:new a.bQ(B,l.u_texture),u_terrain_coords_id:new a.bg(B,l.u_terrain_coords_id),u_ele_delta:new a.bg(B,l.u_ele_delta)}),projectionErrorMeasurement:(B,l)=>({u_input:new a.bg(B,l.u_input),u_output_expected:new a.bg(B,l.u_output_expected)}),atmosphere:(B,l)=>({u_sun_pos:new a.bU(B,l.u_sun_pos),u_atmosphere_blend:new a.bg(B,l.u_atmosphere_blend),u_globe_position:new a.bU(B,l.u_globe_position),u_globe_radius:new a.bg(B,l.u_globe_radius),u_inv_proj_matrix:new a.bS(B,l.u_inv_proj_matrix)}),sky:(B,l)=>({u_sky_color:new a.bR(B,l.u_sky_color),u_horizon_color:new a.bR(B,l.u_horizon_color),u_horizon:new a.bV(B,l.u_horizon),u_horizon_normal:new a.bV(B,l.u_horizon_normal),u_sky_horizon_blend:new a.bg(B,l.u_sky_horizon_blend),u_sky_blend:new a.bg(B,l.u_sky_blend)})};class jm{constructor(l,p,C){this.context=l;const S=l.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Nm={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Gm{constructor(l,p,C,S){this.length=p.length,this.attributes=C,this.itemSize=p.bytesPerElement,this.dynamicDraw=S,this.context=l;const k=l.gl;this.buffer=k.createBuffer(),l.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,p){for(let C=0;C<this.attributes.length;C++){const S=p.attributes[this.attributes[C].name];S!==void 0&&l.enableVertexAttribArray(S)}}setVertexAttribPointers(l,p,C){for(let S=0;S<this.attributes.length;S++){const k=this.attributes[S],K=p.attributes[k.name];K!==void 0&&l.vertexAttribPointer(K,k.components,l[Nm[k.type]],!1,this.itemSize,k.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Nr{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class kt extends Nr{getDefault(){return a.bf.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class sn extends Nr{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class tn extends Nr{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class hi extends Nr{getDefault(){return[!0,!0,!0,!0]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class vr extends Nr{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class $r extends Nr{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Bs extends Nr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const p=this.current;(l.func!==p.func||l.ref!==p.ref||l.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class jo extends Nr{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Ep extends Nr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=l,this.dirty=!1}}class bA extends Nr{getDefault(){return[0,1]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Ul extends Nr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=l,this.dirty=!1}}class Fh extends Nr{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Qm extends Nr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.BLEND):p.disable(p.BLEND),this.current=l,this.dirty=!1}}class Ic extends Nr{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class jh extends Nr{getDefault(){return a.bf.transparent}set(l){const p=this.current;(l.r!==p.r||l.g!==p.g||l.b!==p.b||l.a!==p.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class eh extends Nr{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Tr extends Nr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;l?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=l,this.dirty=!1}}class p0 extends Nr{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Bp extends Nr{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class Ll extends Nr{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class CA extends Nr{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class cu extends Nr{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const p=this.current;(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==p[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class th extends Nr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class _A extends Nr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Ou extends Nr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Nh extends Nr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class nh extends Nr{getDefault(){return null}set(l){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Au extends Nr{getDefault(){return null}set(l){var p;if(l===this.current&&!this.dirty)return;const C=this.gl;li(C)?C.bindVertexArray(l):(p=C.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class Wm extends Nr{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Ld extends Nr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class lr extends Nr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class zd extends Nr{constructor(l,p){super(l),this.context=l,this.parent=p}getDefault(){return null}}class yl extends zd{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class xA extends zd{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class zl extends zd{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const m0="Framebuffer is not complete";class qm{constructor(l,p,C,S,k){this.context=l,this.width=p,this.height=C;const K=l.gl,N=this.framebuffer=K.createFramebuffer();if(this.colorAttachment=new yl(l,N),S)this.depthAttachment=k?new zl(l,N):new xA(l,N);else if(k)throw new Error("Stencil cannot be set without depth");if(K.checkFramebufferStatus(K.FRAMEBUFFER)!==K.FRAMEBUFFER_COMPLETE)throw new Error(m0)}destroy(){const l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){const C=this.depthAttachment.get();C&&l.deleteRenderbuffer(C)}l.deleteFramebuffer(this.framebuffer)}}class Gh{constructor(l){var p,C;if(this.gl=l,this.clearColor=new kt(this),this.clearDepth=new sn(this),this.clearStencil=new tn(this),this.colorMask=new hi(this),this.depthMask=new vr(this),this.stencilMask=new $r(this),this.stencilFunc=new Bs(this),this.stencilOp=new jo(this),this.stencilTest=new Ep(this),this.depthRange=new bA(this),this.depthTest=new Ul(this),this.depthFunc=new Fh(this),this.blend=new Qm(this),this.blendFunc=new Ic(this),this.blendColor=new jh(this),this.blendEquation=new eh(this),this.cullFace=new Tr(this),this.cullFaceSide=new p0(this),this.frontFace=new Bp(this),this.program=new Ll(this),this.activeTexture=new CA(this),this.viewport=new cu(this),this.bindFramebuffer=new th(this),this.bindRenderbuffer=new _A(this),this.bindTexture=new Ou(this),this.bindVertexBuffer=new Nh(this),this.bindElementBuffer=new nh(this),this.bindVertexArray=new Au(this),this.pixelStoreUnpack=new Wm(this),this.pixelStoreUnpackPremultiplyAlpha=new Ld(this),this.pixelStoreUnpackFlipY=new lr(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),li(l)){this.HALF_FLOAT=l.HALF_FLOAT;const S=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=l.RGBA16F)!==null&&p!==void 0?p:S?.RGBA16F_EXT,this.RGB16F=(C=l.RGB16F)!==null&&C!==void 0?C:S?.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const S=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=S?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,p){return new jm(this,l,p)}createVertexBuffer(l,p,C){return new Gm(this,l,p,C)}createRenderbuffer(l,p,C){const S=this.gl,k=S.createRenderbuffer();return this.bindRenderbuffer.set(k),S.renderbufferStorage(S.RENDERBUFFER,l,p,C),this.bindRenderbuffer.set(null),k}createFramebuffer(l,p,C,S){return new qm(this,l,p,C,S)}clear({color:l,depth:p,stencil:C}){const S=this.gl;let k=0;l&&(k|=S.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(k|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),C!==void 0&&(k|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),S.clear(k)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.bH(l.blendFunction,ki.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return li(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var p;return li(this.gl)?this.gl.deleteVertexArray(l):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let ih;function Qh(B,l,p,C,S){const k=B.context,K=B.transform,N=k.gl,q=B.useProgram("collisionBox"),ie=[];let ae=0,ye=0;for(let tt=0;tt<C.length;tt++){const it=C[tt],ct=l.getTile(it).getBucket(p);if(!ct)continue;const rt=S?ct.textCollisionBox:ct.iconCollisionBox,ht=ct.collisionCircleArray;ht.length>0&&(ie.push({circleArray:ht,circleOffset:ye,coord:it}),ae+=ht.length/4,ye=ae),rt&&q.draw(k,N.LINES,Ne.disabled,hn.disabled,B.colorModeForRenderPass(),me.disabled,sc(B.transform),B.style.map.terrain&&B.style.map.terrain.getTerrainData(it),K.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),p.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,null,B.transform.zoom,null,null,rt.collisionVertexBuffer)}if(!S||!ie.length)return;const pe=B.useProgram("collisionCircle"),Se=new a.c0;Se.resize(4*ae),Se._trim();let Fe=0;for(const tt of ie)for(let it=0;it<tt.circleArray.length/4;it++){const ct=4*it,rt=tt.circleArray[ct+0],ht=tt.circleArray[ct+1],ft=tt.circleArray[ct+2],ot=tt.circleArray[ct+3];Se.emplace(Fe++,rt,ht,ft,ot,0),Se.emplace(Fe++,rt,ht,ft,ot,1),Se.emplace(Fe++,rt,ht,ft,ot,2),Se.emplace(Fe++,rt,ht,ft,ot,3)}(!ih||ih.length<2*ae)&&(ih=(function(tt){const it=2*tt,ct=new a.c2;ct.resize(it),ct._trim();for(let rt=0;rt<it;rt++){const ht=6*rt;ct.uint16[ht+0]=4*rt+0,ct.uint16[ht+1]=4*rt+1,ct.uint16[ht+2]=4*rt+2,ct.uint16[ht+3]=4*rt+2,ct.uint16[ht+4]=4*rt+3,ct.uint16[ht+5]=4*rt+0}return ct})(ae));const Xe=k.createIndexBuffer(ih,!0),$e=k.createVertexBuffer(Se,a.c1.members,!0);for(const tt of ie){const it=Km(B.transform);pe.draw(k,N.TRIANGLES,Ne.disabled,hn.disabled,B.colorModeForRenderPass(),me.disabled,it,B.style.map.terrain&&B.style.map.terrain.getTerrainData(tt.coord),null,p.id,$e,Xe,a.aM.simpleSegment(0,2*tt.circleOffset,tt.circleArray.length,tt.circleArray.length/2),null,B.transform.zoom,null,null,null)}$e.destroy(),Xe.destroy()}const Wh=a.ai(new Float32Array(16));function Op(B,l,p,C,S,k){const{horizontalAlign:K,verticalAlign:N}=a.aH(B);return new a.P((-(K-.5)*l/S+C[0])*k,(-(N-.5)*p/S+C[1])*k)}function Fl(B,l,p,C,S,k){const K=l.tileAnchorPoint.add(new a.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let N=C.mult(k);p||(N=N.rotate(-S));const q=K.add(N);return $o(q.x,q.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(p){const N=Ki(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(B),q=Math.atan(N.y/N.x)+(N.x<0?Math.PI:0);return B.add(C.rotate(q))}return B.add(C)}function qh(B,l,p,C,S,k,K,N,q,ie,ae,ye){const pe=B.text.placedSymbolArray,Se=B.text.dynamicLayoutVertexArray,Fe=B.icon.dynamicLayoutVertexArray,Xe={};Se.clear();for(let $e=0;$e<pe.length;$e++){const tt=pe.get($e),it=tt.hidden||!tt.crossTileID||B.allowVerticalPlacement&&!tt.placedOrientation?null:C[tt.crossTileID];if(it){const ct=new a.P(tt.anchorX,tt.anchorY),rt={getElevation:ye,width:S.width,height:S.height,pitchedLabelPlaneMatrix:k,pitchWithMap:p,transform:S,tileAnchorPoint:ct,translation:ie,unwrappedTileID:ae},ht=p?po(ct.x,ct.y,rt):Ki(ct.x,ct.y,rt),ft=Ks(S.cameraToCenterDistance,ht.signedDistanceFromCamera);let ot=a.ap(B.textSizeData,N,tt)*ft/a.aB;p&&(ot*=B.tilePixelRatio/K);const{width:St,height:Wt,anchor:Ut,textOffset:jt,textBoxScale:Qt}=it,On=Op(Ut,St,Wt,jt,Qt,ot),In=S.getPitchedTextCorrection(ct.x+ie[0],ct.y+ie[1],ae),ln=Fl(ht.point,rt,l,On,-S.bearingInRadians,In),$n=B.allowVerticalPlacement&&tt.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let Hi=0;Hi<tt.numGlyphs;Hi++)a.av(Se,ln,$n);q&&tt.associatedIconIndex>=0&&(Xe[tt.associatedIconIndex]={shiftedAnchor:ln,angle:$n})}else Tl(tt.numGlyphs,Se)}if(q){Fe.clear();const $e=B.icon.placedSymbolArray;for(let tt=0;tt<$e.length;tt++){const it=$e.get(tt);if(it.hidden)Tl(it.numGlyphs,Fe);else{const ct=Xe[tt];if(ct)for(let rt=0;rt<it.numGlyphs;rt++)a.av(Fe,ct.shiftedAnchor,ct.angle);else Tl(it.numGlyphs,Fe)}}B.icon.dynamicLayoutVertexBuffer.updateData(Fe)}B.text.dynamicLayoutVertexBuffer.updateData(Se)}function Fd(B,l,p){return p.iconsInText&&l?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function ps(B,l,p,C,S,k,K,N,q,ie,ae,ye,pe){const Se=B.context,Fe=Se.gl,Xe=B.transform,$e=N==="map",tt=q==="map",it=N!=="viewport"&&p.layout.get("symbol-placement")!=="point",ct=$e&&!tt&&!it,rt=!p.layout.get("symbol-sort-key").isConstant();let ht=!1;const ft=B.getDepthModeForSublayer(0,Ne.ReadOnly),ot=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),St=[],Wt=Xe.getCircleRadiusCorrection();for(const Ut of C){const jt=l.getTile(Ut),Qt=jt.getBucket(p);if(!Qt)continue;const On=S?Qt.text:Qt.icon;if(!On||!On.segments.get().length||!On.hasVisibleVertices)continue;const In=On.programConfigurations.get(p.id),ln=S||Qt.sdfIcons,$n=S?Qt.textSizeData:Qt.iconSizeData,Hi=tt||Xe.pitch!==0,Er=B.useProgram(Fd(ln,S,Qt),In),Lo=a.an($n,Xe.zoom),No=B.style.map.terrain&&B.style.map.terrain.getTerrainData(Ut);let hr,Jo,Ta,Is,Ra=[0,0],js=null;if(S)Jo=jt.glyphAtlasTexture,Ta=Fe.LINEAR,hr=jt.glyphAtlasTexture.size,Qt.iconsInText&&(Ra=jt.imageAtlasTexture.size,js=jt.imageAtlasTexture,Is=Hi||B.options.rotating||B.options.zooming||$n.kind==="composite"||$n.kind==="camera"?Fe.LINEAR:Fe.NEAREST);else{const gs=p.layout.get("icon-size").constantOr(0)!==1||Qt.iconsNeedLinear;Jo=jt.imageAtlasTexture,Ta=ln||B.options.rotating||B.options.zooming||gs||Hi?Fe.LINEAR:Fe.NEAREST,hr=jt.imageAtlasTexture.size}const na=a.aC(jt,1,B.transform.zoom),ma=cr($e,B.transform,na),DA=a.L();a.aq(DA,ma);const ia=nn(tt,$e,B.transform,na),ul=a.aD(Xe,jt,k,K),dh=Xe.getProjectionData({overscaledTileID:Ut,applyGlobeMatrix:!pe,applyTerrainMatrix:!0}),rd=ot&&Qt.hasTextData(),od=p.layout.get("icon-text-fit")!=="none"&&rd&&Qt.hasIconData();if(it){const gs=B.style.map.terrain?(Ku,Ns)=>B.style.map.terrain.getElevation(Ut,Ku,Ns):null,ra=p.layout.get("text-rotation-alignment")==="map";mn(Qt,B,S,ma,DA,tt,ie,ra,Ut.toUnwrapped(),Xe.width,Xe.height,ul,gs)}const mu=S&&ot||od,_l=it||mu?Wh:tt?ma:B.transform.clipSpaceToPixelsMatrix,cl=ln&&p.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Dc;Dc=ln?Qt.iconsInText?zh($n.kind,Lo,ct,tt,it,mu,B,_l,ia,ul,hr,Ra,Wt):f0($n.kind,Lo,ct,tt,it,mu,B,_l,ia,ul,S,hr,0,Wt):d0($n.kind,Lo,ct,tt,it,mu,B,_l,ia,ul,S,hr,Wt);const sd={program:Er,buffers:On,uniformValues:Dc,projectionData:dh,atlasTexture:Jo,atlasTextureIcon:js,atlasInterpolation:Ta,atlasInterpolationIcon:Is,isSDF:ln,hasHalo:cl};if(rt&&Qt.canOverlap){ht=!0;const gs=On.segments.get();for(const ra of gs)St.push({segments:new a.aM([ra]),sortKey:ra.sortKey,state:sd,terrainData:No})}else St.push({segments:On.segments,sortKey:0,state:sd,terrainData:No})}ht&&St.sort(((Ut,jt)=>Ut.sortKey-jt.sortKey));for(const Ut of St){const jt=Ut.state;if(Se.activeTexture.set(Fe.TEXTURE0),jt.atlasTexture.bind(jt.atlasInterpolation,Fe.CLAMP_TO_EDGE),jt.atlasTextureIcon&&(Se.activeTexture.set(Fe.TEXTURE1),jt.atlasTextureIcon&&jt.atlasTextureIcon.bind(jt.atlasInterpolationIcon,Fe.CLAMP_TO_EDGE)),jt.isSDF){const Qt=jt.uniformValues;jt.hasHalo&&(Qt.u_is_halo=1,zs(jt.buffers,Ut.segments,p,B,jt.program,ft,ae,ye,Qt,jt.projectionData,Ut.terrainData)),Qt.u_is_halo=0}zs(jt.buffers,Ut.segments,p,B,jt.program,ft,ae,ye,jt.uniformValues,jt.projectionData,Ut.terrainData)}}function zs(B,l,p,C,S,k,K,N,q,ie,ae){const ye=C.context;S.draw(ye,ye.gl.TRIANGLES,k,K,N,me.backCCW,q,ae,ie,p.id,B.layoutVertexBuffer,B.indexBuffer,l,p.paint,C.transform.zoom,B.programConfigurations.get(p.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function hu(B,l,p,C,S){const k=B.context,K=k.gl,N=hn.disabled,q=new ki([K.ONE,K.ONE],a.bf.transparent,[!0,!0,!0,!0]),ie=l.getBucket(p);if(!ie)return;const ae=C.key;let ye=p.heatmapFbos.get(ae);ye||(ye=kc(k,l.tileSize,l.tileSize),p.heatmapFbos.set(ae,ye)),k.bindFramebuffer.set(ye.framebuffer),k.viewport.set([0,0,l.tileSize,l.tileSize]),k.clear({color:a.bf.transparent});const pe=ie.programConfigurations.get(p.id),Se=B.useProgram("heatmap",pe,!S),Fe=B.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Xe=B.style.map.terrain.getTerrainData(C);Se.draw(k,K.TRIANGLES,Ne.disabled,N,q,me.disabled,wp(l,B.transform.zoom,p.paint.get("heatmap-intensity"),1),Xe,Fe,p.id,ie.layoutVertexBuffer,ie.indexBuffer,ie.segments,p.paint,B.transform.zoom,pe)}function vl(B,l,p,C,S){const k=B.context,K=k.gl,N=B.transform;k.setColorMode(B.colorModeForRenderPass());const q=iA(k,l),ie=p.key,ae=l.heatmapFbos.get(ie);if(!ae)return;k.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ae.colorAttachment.get()),k.activeTexture.set(K.TEXTURE1),q.bind(K.LINEAR,K.CLAMP_TO_EDGE);const ye=N.getProjectionData({overscaledTileID:p,applyTerrainMatrix:S,applyGlobeMatrix:!C});B.useProgram("heatmapTexture").draw(k,K.TRIANGLES,Ne.disabled,hn.disabled,B.colorModeForRenderPass(),me.disabled,Rf(B,l,0,1),null,ye,l.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments,l.paint,N.zoom),ae.destroy(),l.heatmapFbos.delete(ie)}function kc(B,l,p){var C,S;const k=B.gl,K=k.createTexture();k.bindTexture(k.TEXTURE_2D,K),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR);const N=(C=B.HALF_FLOAT)!==null&&C!==void 0?C:k.UNSIGNED_BYTE,q=(S=B.RGBA16F)!==null&&S!==void 0?S:k.RGBA;k.texImage2D(k.TEXTURE_2D,0,q,l,p,0,k.RGBA,N,null);const ie=B.createFramebuffer(l,p,!1,!1);return ie.colorAttachment.set(K),ie}function iA(B,l){return l.colorRampTexture||(l.colorRampTexture=new a.T(B,l.colorRamp,B.gl.RGBA)),l.colorRampTexture}function bl(B,l,p,C,S,k,K,N){let q=256;if(S.stepInterpolant){const ie=l.getSource().maxzoom,ae=K.canonical.z===ie?Math.ceil(1<<B.transform.maxZoom-K.canonical.z):1;q=a.ae(a.c4(k.maxLineLength/a.$*1024*ae),256,p.maxTextureSize)}return N.gradient=a.c5({expression:S.gradientExpression(),evaluationKey:"lineProgress",resolution:q,image:N.gradient||void 0,clips:k.lineClipsArray}),N.texture?N.texture.update(N.gradient):N.texture=new a.T(p,N.gradient,C.RGBA),N.version=S.gradientVersion,N.texture}function ac(B,l,p,C,S){B.activeTexture.set(l.TEXTURE0),p.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),C.updatePaintBuffers(S)}function Ip(B,l,p,C,S,k){(S||B.lineAtlas.dirty)&&(l.activeTexture.set(p.TEXTURE0),B.lineAtlas.bind(l)),C.updatePaintBuffers(k)}function rA(B,l,p,C,S,k,K){const N=k.gradients[S.id];let q=N.texture;S.gradientVersion!==N.version&&(q=bl(B,l,p,C,S,k,K,N)),p.activeTexture.set(C.TEXTURE0),q.bind(S.stepInterpolant?C.NEAREST:C.LINEAR,C.CLAMP_TO_EDGE)}function rh(B,l,p,C,S,k,K,N,q){const ie=k.gradients[S.id];let ae=ie.texture;S.gradientVersion!==ie.version&&(ae=bl(B,l,p,C,S,k,K,ie)),p.activeTexture.set(C.TEXTURE0),ae.bind(S.stepInterpolant?C.NEAREST:C.LINEAR,C.CLAMP_TO_EDGE),p.activeTexture.set(C.TEXTURE1),B.lineAtlas.bind(p),N.updatePaintBuffers(q)}function Yh(B,l,p,C,S){if(!p||!C||!C.imageAtlas)return;const k=C.imageAtlas.patternPositions;let K=k[p.to.toString()],N=k[p.from.toString()];if(!K&&N&&(K=N),!N&&K&&(N=K),!K||!N){const q=S.getPaintProperty(l);K=k[q],N=k[q]}K&&N&&B.setConstantPatternPositions(K,N)}function ta(B,l,p,C,S,k,K,N){const q=B.context.gl,ie="fill-pattern",ae=p.paint.get(ie),ye=ae&&ae.constantOr(1),pe=p.getCrossfadeParameters();let Se,Fe,Xe,$e,tt;const it=B.transform,ct=p.paint.get("fill-translate"),rt=p.paint.get("fill-translate-anchor");K?(Fe=ye&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Se=q.LINES):(Fe=ye?"fillPattern":"fill",Se=q.TRIANGLES);const ht=ae.constantOr(null);for(const ft of C){const ot=l.getTile(ft);if(ye&&!ot.patternsLoaded())continue;const St=ot.getBucket(p);if(!St)continue;const Wt=St.programConfigurations.get(p.id),Ut=B.useProgram(Fe,Wt),jt=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ft);ye&&(B.context.activeTexture.set(q.TEXTURE0),ot.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Wt.updatePaintBuffers(pe)),Yh(Wt,ie,ht,ot,p);const Qt=it.getProjectionData({overscaledTileID:ft,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),On=a.aD(it,ot,ct,rt);if(K){$e=St.indexBuffer2,tt=St.segments2;const ln=[q.drawingBufferWidth,q.drawingBufferHeight];Xe=Fe==="fillOutlinePattern"&&ye?M1(B,pe,ot,ln,On):Kd(ln,On)}else $e=St.indexBuffer,tt=St.segments,Xe=ye?Mp(B,pe,ot,On):{u_fill_translate:On};const In=B.stencilModeForClipping(ft);Ut.draw(B.context,Se,S,In,k,me.backCCW,Xe,jt,Qt,p.id,St.layoutVertexBuffer,$e,tt,p.paint,B.transform.zoom,Wt)}}function lo(B,l,p,C,S,k,K,N){const q=B.context,ie=q.gl,ae="fill-extrusion-pattern",ye=p.paint.get(ae),pe=ye.constantOr(1),Se=p.getCrossfadeParameters(),Fe=p.paint.get("fill-extrusion-opacity"),Xe=ye.constantOr(null),$e=B.transform;for(const tt of C){const it=l.getTile(tt),ct=it.getBucket(p);if(!ct)continue;const rt=B.style.map.terrain&&B.style.map.terrain.getTerrainData(tt),ht=ct.programConfigurations.get(p.id),ft=B.useProgram(pe?"fillExtrusionPattern":"fillExtrusion",ht);pe&&(B.context.activeTexture.set(ie.TEXTURE0),it.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),ht.updatePaintBuffers(Se));const ot=$e.getProjectionData({overscaledTileID:tt,applyGlobeMatrix:!N,applyTerrainMatrix:!0});Yh(ht,ae,Xe,it,p);const St=a.aD($e,it,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Wt=p.paint.get("fill-extrusion-vertical-gradient"),Ut=pe?kf(B,Wt,Fe,St,tt,Se,it):Kh(B,Wt,Fe,St);ft.draw(q,q.gl.TRIANGLES,S,k,K,me.backCCW,Ut,rt,ot,p.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,p.paint,B.transform.zoom,ht,B.style.map.terrain&&ct.centroidVertexBuffer)}}function Gr(B,l,p,C,S,k,K,N,q){var ie;const ae=B.style.projection,ye=B.context,pe=B.transform,Se=ye.gl,Fe=[`#define NUM_ILLUMINATION_SOURCES ${p.paint.get("hillshade-highlight-color").values.length}`],Xe=B.useProgram("hillshade",null,!1,Fe),$e=!B.options.moving;for(const tt of C){const it=l.getTile(tt),ct=it.fbo;if(!ct)continue;const rt=ae.getMeshFromTileID(ye,tt.canonical,N,!0,"raster"),ht=(ie=B.style.map.terrain)===null||ie===void 0?void 0:ie.getTerrainData(tt);ye.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,ct.colorAttachment.get());const ft=pe.getProjectionData({overscaledTileID:tt,aligned:$e,applyGlobeMatrix:!q,applyTerrainMatrix:!0});Xe.draw(ye,Se.TRIANGLES,k,S[tt.overscaledZ],K,me.backCCW,Df(B,it,p),ht,ft,p.id,rt.vertexBuffer,rt.indexBuffer,rt.segments)}}function MA(B,l,p,C,S,k,K,N,q){var ie;const ae=B.style.projection,ye=B.context,pe=B.transform,Se=ye.gl,Fe=B.useProgram("colorRelief"),Xe=!B.options.moving;let $e=!0,tt=0;for(const it of C){const ct=l.getTile(it),rt=ct.dem;if($e){const Ut=Se.getParameter(Se.MAX_TEXTURE_SIZE),{elevationTexture:jt,colorTexture:Qt}=p.getColorRampTextures(ye,Ut,rt.getUnpackVector());ye.activeTexture.set(Se.TEXTURE1),jt.bind(Se.NEAREST,Se.CLAMP_TO_EDGE),ye.activeTexture.set(Se.TEXTURE4),Qt.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),$e=!1,tt=jt.size[0]}if(!rt||!rt.data)continue;const ht=rt.stride,ft=rt.getPixels();if(ye.activeTexture.set(Se.TEXTURE0),ye.pixelStoreUnpackPremultiplyAlpha.set(!1),ct.demTexture=ct.demTexture||B.getTileTexture(ht),ct.demTexture){const Ut=ct.demTexture;Ut.update(ft,{premultiply:!1}),Ut.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}else ct.demTexture=new a.T(ye,ft,Se.RGBA,{premultiply:!1}),ct.demTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE);const ot=ae.getMeshFromTileID(ye,it.canonical,N,!0,"raster"),St=(ie=B.style.map.terrain)===null||ie===void 0?void 0:ie.getTerrainData(it),Wt=pe.getProjectionData({overscaledTileID:it,aligned:Xe,applyGlobeMatrix:!q,applyTerrainMatrix:!0});Fe.draw(ye,Se.TRIANGLES,k,S[it.overscaledZ],K,me.backCCW,Sp(p,ct.dem,tt),St,Wt,p.id,ot.vertexBuffer,ot.indexBuffer,ot.segments)}}const du=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function ss(B,l,p,C,S,k,K,N,q=!1,ie=!1){const ae=C[C.length-1].overscaledZ,ye=B.context,pe=ye.gl,Se=B.useProgram("raster"),Fe=B.transform,Xe=B.style.projection,$e=B.colorModeForRenderPass(),tt=!B.options.moving,it=p.paint.get("raster-opacity"),ct=p.paint.get("raster-resampling"),rt=p.paint.get("raster-fade-duration"),ht=!!B.style.map.terrain;for(const ft of C){const ot=B.getDepthModeForSublayer(ft.overscaledZ-ae,it===1?Ne.ReadWrite:Ne.ReadOnly,pe.LESS),St=l.getTile(ft),Wt=ct==="nearest"?pe.NEAREST:pe.LINEAR;ye.activeTexture.set(pe.TEXTURE0),St.texture.bind(Wt,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST),ye.activeTexture.set(pe.TEXTURE1);const{parentTile:Ut,parentScaleBy:jt,parentTopLeft:Qt,fadeValues:On}=Iu(St,l,rt,ht);St.fadeOpacity=On.tileOpacity,Ut?(Ut.fadeOpacity=On.parentTileOpacity,Ut.texture.bind(Wt,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST)):St.texture.bind(Wt,pe.CLAMP_TO_EDGE,pe.LINEAR_MIPMAP_NEAREST),St.texture.useMipmap&&ye.extTextureFilterAnisotropic&&B.transform.pitch>20&&pe.texParameterf(pe.TEXTURE_2D,ye.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ye.extTextureFilterAnisotropicMax);const In=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ft),ln=Fe.getProjectionData({overscaledTileID:ft,aligned:tt,applyGlobeMatrix:!ie,applyTerrainMatrix:!0}),$n=zm(Qt,jt,On.fadeMix,p,N),Hi=Xe.getMeshFromTileID(ye,ft.canonical,k,K,"raster");Se.draw(ye,pe.TRIANGLES,ot,S?S[ft.overscaledZ]:hn.disabled,$e,q?me.frontCCW:me.backCCW,$n,In,ln,p.id,Hi.vertexBuffer,Hi.indexBuffer,Hi.segments)}}function Iu(B,l,p,C){const S={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(p===0||C)return S;if(B.fadingParentID){const k=l._getLoadedTile(B.fadingParentID);if(!k)return S;const K=Math.pow(2,k.tileID.overscaledZ-B.tileID.overscaledZ),N=[B.tileID.canonical.x*K%1,B.tileID.canonical.y*K%1],q=(function(ie,ae,ye){const pe=R(),Se=(pe-ae.timeAdded)/ye,Fe=ie.fadingDirection===se.Incoming,Xe=a.ae((pe-ie.timeAdded)/ye,0,1),$e=a.ae(1-Se,0,1),tt=Fe?Xe:$e;return{tileOpacity:tt,parentTileOpacity:Fe?$e:Xe,fadeMix:{opacity:1,mix:1-tt}}})(B,k,p);return{parentTile:k,parentScaleBy:K,parentTopLeft:N,fadeValues:q}}if(B.selfFading){const k=(function(K,N){const q=(R()-K.timeAdded)/N,ie=a.ae(q,0,1);return{tileOpacity:ie,fadeMix:{opacity:ie,mix:0}}})(B,p);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:k}}return S}const jl=new a.bf(1,0,0,1),Vh=new a.bf(0,1,0,1),wA=new a.bf(0,0,1,1),Qe=new a.bf(1,0,1,1),lc=new a.bf(0,1,1,1);function oA(B,l,p,C){Ar(B,0,l+p/2,B.transform.width,p,C)}function Ga(B,l,p,C){Ar(B,l-p/2,0,p,B.transform.height,C)}function Ar(B,l,p,C,S,k){const K=B.context,N=K.gl;N.enable(N.SCISSOR_TEST),N.scissor(l*B.pixelRatio,p*B.pixelRatio,C*B.pixelRatio,S*B.pixelRatio),K.clear({color:k}),N.disable(N.SCISSOR_TEST)}function SA(B,l,p){const C=B.context,S=C.gl,k=B.useProgram("debug"),K=Ne.disabled,N=hn.disabled,q=B.colorModeForRenderPass(),ie="$debug",ae=B.style.map.terrain&&B.style.map.terrain.getTerrainData(p);C.activeTexture.set(S.TEXTURE0);const ye=l.getTileByID(p.key).latestRawTileData,pe=Math.floor((ye&&ye.byteLength||0)/1024),Se=l.getTile(p).tileSize,Fe=512/Math.min(Se,512)*(p.overscaledZ/B.transform.zoom)*.5;let Xe=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Xe+=` => ${p.overscaledZ}`),(function(tt,it){tt.initDebugOverlayCanvas();const ct=tt.debugOverlayCanvas,rt=tt.context.gl,ht=tt.debugOverlayCanvas.getContext("2d");ht.clearRect(0,0,ct.width,ct.height),ht.shadowColor="white",ht.shadowBlur=2,ht.lineWidth=1.5,ht.strokeStyle="white",ht.textBaseline="top",ht.font="bold 36px Open Sans, sans-serif",ht.fillText(it,5,5),ht.strokeText(it,5,5),tt.debugOverlayTexture.update(ct),tt.debugOverlayTexture.bind(rt.LINEAR,rt.CLAMP_TO_EDGE)})(B,`${Xe} ${pe}kB`);const $e=B.transform.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(C,S.TRIANGLES,K,N,ki.alphaBlended,me.disabled,Tf(a.bf.transparent,Fe),null,$e,ie,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments),k.draw(C,S.LINE_STRIP,K,N,q,me.disabled,Tf(a.bf.red),ae,$e,ie,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments)}function EA(B,l,p,C){const{isRenderingGlobe:S}=C,k=B.context,K=k.gl,N=B.transform,q=B.colorModeForRenderPass(),ie=B.getDepthModeFor3D(),ae=B.useProgram("terrain");k.bindFramebuffer.set(null),k.viewport.set([0,0,B.width,B.height]);for(const ye of p){const pe=l.getTerrainMesh(ye.tileID),Se=B.renderToTexture.getTexture(ye),Fe=l.getTerrainData(ye.tileID);k.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,Se.texture);const Xe=l.getMeshFrameDelta(N.zoom),$e=N.calculateFogMatrix(ye.tileID.toUnwrapped()),tt=h0(Xe,$e,B.style.sky,N.pitch,S),it=N.getProjectionData({overscaledTileID:ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ae.draw(k,K.TRIANGLES,ie,hn.disabled,q,me.backCCW,tt,Fe,it,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}}function sA(B,l){if(!l.mesh){const p=new a.aL;p.emplaceBack(-1,-1),p.emplaceBack(1,-1),p.emplaceBack(1,1),p.emplaceBack(-1,1);const C=new a.aN;C.emplaceBack(0,1,2),C.emplaceBack(0,2,3),l.mesh=new rl(B.createVertexBuffer(p,Gi.members),B.createIndexBuffer(C),a.aM.simpleSegment(0,0,p.length,C.length))}return l.mesh}class BA{constructor(l,p){this.context=new Gh(l),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ai(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=si.maxUnderzooming+si.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ou}resize(l,p,C){if(this.width=Math.floor(l*C),this.height=Math.floor(p*C),this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const l=this.context,p=new a.aL;p.emplaceBack(0,0),p.emplaceBack(a.$,0),p.emplaceBack(0,a.$),p.emplaceBack(a.$,a.$),this.tileExtentBuffer=l.createVertexBuffer(p,Gi.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);const C=new a.aL;C.emplaceBack(0,0),C.emplaceBack(a.$,0),C.emplaceBack(0,a.$),C.emplaceBack(a.$,a.$),this.debugBuffer=l.createVertexBuffer(C,Gi.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);const S=new a.c7;S.emplaceBack(0,0,0,0),S.emplaceBack(a.$,0,a.$,0),S.emplaceBack(0,a.$,0,a.$),S.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=l.createVertexBuffer(S,Of.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);const k=new a.aL;k.emplaceBack(0,0),k.emplaceBack(a.$,0),k.emplaceBack(0,a.$),k.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(k,Gi.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);const K=new a.aL;K.emplaceBack(0,0),K.emplaceBack(1,0),K.emplaceBack(0,1),K.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(K,Gi.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);const N=new a.c8;N.emplaceBack(0),N.emplaceBack(1),N.emplaceBack(3),N.emplaceBack(2),N.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(N);const q=new a.aN;q.emplaceBack(1,0,2),q.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(q);const ie=this.context.gl;this.stencilClearMode=new hn({func:ie.ALWAYS,mask:0},0,255,ie.ZERO,ie.ZERO,ie.ZERO),this.tileExtentMesh=new rl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=a.L();a.bZ(C,0,this.width,this.height,0,0,1),a.N(C,C,[p.drawingBufferWidth,p.drawingBufferHeight,0]);const S={mainMatrix:C,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C};this.useProgram("clippingMask",null,!0).draw(l,p.TRIANGLES,Ne.disabled,this.stencilClearMode,ki.disabled,me.disabled,null,null,S,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,p,C){if(this.currentStencilSource===l.source||!l.isTileClipped()||!p||!p.length)return;this.currentStencilSource=l.source,this.nextStencilID+p.length>256&&this.clearStencil();const S=this.context;S.setColorMode(ki.disabled),S.setDepthMode(Ne.disabled);const k={};for(const K of p)k[K.key]=this.nextStencilID++;this._renderTileMasks(k,p,C,!0),this._renderTileMasks(k,p,C,!1),this._tileClippingMaskIDs=k}_renderTileMasks(l,p,C,S){const k=this.context,K=k.gl,N=this.style.projection,q=this.transform,ie=this.useProgram("clippingMask");for(const ae of p){const ye=l[ae.key],pe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ae),Se=N.getMeshFromTileID(this.context,ae.canonical,S,!0,"stencil"),Fe=q.getProjectionData({overscaledTileID:ae,applyGlobeMatrix:!C,applyTerrainMatrix:!0});ie.draw(k,K.TRIANGLES,Ne.disabled,new hn({func:K.ALWAYS,mask:0},ye,255,K.KEEP,K.KEEP,K.REPLACE),ki.disabled,C?me.disabled:me.backCCW,null,pe,Fe,"$clipping",Se.vertexBuffer,Se.indexBuffer,Se.segments)}}_renderTilesDepthBuffer(){const l=this.context,p=l.gl,C=this.style.projection,S=this.transform,k=this.useProgram("depth"),K=this.getDepthModeFor3D(),N=Tn(S,{tileSize:S.tileSize});for(const q of N){const ie=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),ae=C.getMeshFromTileID(this.context,q.canonical,!0,!0,"raster"),ye=S.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(l,p.TRIANGLES,K,hn.disabled,ki.disabled,me.backCCW,null,ie,ye,"$clipping",ae.vertexBuffer,ae.indexBuffer,ae.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,p=this.context.gl;return new hn({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(l){const p=this.context.gl;return new hn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const p=this.context.gl,C=l.sort(((K,N)=>N.overscaledZ-K.overscaledZ)),S=C[C.length-1].overscaledZ,k=C[0].overscaledZ-S+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const K={};for(let N=0;N<k;N++)K[N+S]=new hn({func:p.GEQUAL,mask:255},N+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=k,[K,C]}return[{[S]:hn.disabled},C]}stencilConfigForOverlapTwoPass(l){const p=this.context.gl,C=l.sort(((K,N)=>N.overscaledZ-K.overscaledZ)),S=C[C.length-1].overscaledZ,k=C[0].overscaledZ-S+1;if(this.clearStencil(),k>1){const K={},N={};for(let q=0;q<k;q++)K[q+S]=new hn({func:p.GREATER,mask:255},k+1+q,255,p.KEEP,p.KEEP,p.REPLACE),N[q+S]=new hn({func:p.GREATER,mask:255},1+q,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID=2*k+1,[K,N,C]}return this.nextStencilID=3,[{[S]:new hn({func:p.GREATER,mask:255},2,255,p.KEEP,p.KEEP,p.REPLACE)},{[S]:new hn({func:p.GREATER,mask:255},1,255,p.KEEP,p.KEEP,p.REPLACE)},C]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new ki([l.CONSTANT_COLOR,l.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ki.unblended:ki.alphaBlended}getDepthModeForSublayer(l,p,C){if(!this.opaquePassEnabledForLayer())return Ne.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Ne(C||this.context.gl.LEQUAL,p,[S,S])}getDepthModeFor3D(){return new Ne(this.context.gl.LEQUAL,Ne.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,p){var C,S;this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(R()),this.imageManager.beginFrame();const k=this.style._order,K=this.style.sourceCaches,N={},q={},ie={},ae={isRenderingToTexture:!1,isRenderingGlobe:((C=l.projection)===null||C===void 0?void 0:C.transitionState)>0};for(const pe in K){const Se=K[pe];Se.used&&Se.prepare(this.context),N[pe]=Se.getVisibleCoordinates(!1),q[pe]=N[pe].slice().reverse(),ie[pe]=Se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let pe=0;pe<k.length;pe++)if(this.style._layers[k[pe]].is3D()){this.opaquePassCutoff=pe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const pe of k){const Se=this.style._layers[pe];if(!Se.hasOffscreenPass()||Se.isHidden(this.transform.zoom))continue;const Fe=q[Se.source];(Se.type==="custom"||Fe.length)&&this.renderLayer(this,K[Se.source],Se,Fe,ae)}if((S=this.style.projection)===null||S===void 0||S.updateGPUdependent({context:this.context,useProgram:pe=>this.useProgram(pe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(pe,Se){const Fe=pe.context,Xe=Fe.gl,$e=((ft,ot,St)=>{const Wt=Math.cos(ot.rollInRadians),Ut=Math.sin(ot.rollInRadians),jt=y(ot),Qt=ot.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ft.properties.get("sky-color"),u_horizon_color:ft.properties.get("horizon-color"),u_horizon:[(ot.width/2-jt*Ut)*St,(ot.height/2+jt*Wt)*St],u_horizon_normal:[-Ut,Wt],u_sky_horizon_blend:ft.properties.get("sky-horizon-blend")*ot.height/2*St,u_sky_blend:Qt}})(Se,pe.style.map.transform,pe.pixelRatio),tt=new Ne(Xe.LEQUAL,Ne.ReadWrite,[0,1]),it=hn.disabled,ct=pe.colorModeForRenderPass(),rt=pe.useProgram("sky"),ht=sA(Fe,Se);rt.draw(Fe,Xe.TRIANGLES,tt,it,ct,me.disabled,$e,null,void 0,"sky",ht.vertexBuffer,ht.indexBuffer,ht.segments)})(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const pe=this.style._layers[k[this.currentLayer]],Se=K[pe.source],Fe=N[pe.source];this._renderTileClippingMasks(pe,Fe,!1),this.renderLayer(this,Se,pe,Fe,ae)}this.renderPass="translucent";let ye=!1;for(this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const pe=this.style._layers[k[this.currentLayer]],Se=K[pe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(pe,ae))continue;this.opaquePassEnabledForLayer()||ye||(ye=!0,ae.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Fe=(pe.type==="symbol"?ie:q)[pe.source];this._renderTileClippingMasks(pe,N[pe.source],!!this.renderToTexture),this.renderLayer(this,Se,pe,Fe,ae)}if(ae.isRenderingGlobe&&(function(pe,Se,Fe){const Xe=pe.context,$e=Xe.gl,tt=pe.useProgram("atmosphere"),it=new Ne($e.LEQUAL,Ne.ReadOnly,[0,1]),ct=pe.transform,rt=(function(Qt,On){const In=Qt.properties.get("position"),ln=[-In.x,-In.y,-In.z],$n=a.ai(new Float64Array(16));return Qt.properties.get("anchor")==="map"&&(a.b6($n,$n,On.rollInRadians),a.b7($n,$n,-On.pitchInRadians),a.b6($n,$n,On.bearingInRadians),a.b7($n,$n,On.center.lat*Math.PI/180),a.bz($n,$n,-On.center.lng*Math.PI/180)),a.c6(ln,ln,$n),ln})(Fe,pe.transform),ht=ct.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ft=Se.properties.get("atmosphere-blend")*ht.projectionTransition;if(ft===0)return;const ot=Ss(ct.worldSize,ct.center.lat),St=ct.inverseProjectionMatrix,Wt=new Float64Array(4);Wt[3]=1,a.aw(Wt,Wt,ct.modelViewProjectionMatrix),Wt[0]/=Wt[3],Wt[1]/=Wt[3],Wt[2]/=Wt[3],Wt[3]=1,a.aw(Wt,Wt,St),Wt[0]/=Wt[3],Wt[1]/=Wt[3],Wt[2]/=Wt[3],Wt[3]=1;const Ut=((Qt,On,In,ln,$n)=>({u_sun_pos:Qt,u_atmosphere_blend:On,u_globe_position:In,u_globe_radius:ln,u_inv_proj_matrix:$n}))(rt,ft,[Wt[0],Wt[1],Wt[2]],ot,St),jt=sA(Xe,Se);tt.draw(Xe,$e.TRIANGLES,it,hn.disabled,ki.alphaBlended,me.disabled,Ut,null,null,"atmosphere",jt.vertexBuffer,jt.indexBuffer,jt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const pe=(function(Se,Fe){let Xe=null;const $e=Object.values(Se._layers).flatMap((rt=>rt.source&&!rt.isHidden(Fe)?[Se.sourceCaches[rt.source]]:[])),tt=$e.filter((rt=>rt.getSource().type==="vector")),it=$e.filter((rt=>rt.getSource().type!=="vector")),ct=rt=>{(!Xe||Xe.getSource().maxzoom<rt.getSource().maxzoom)&&(Xe=rt)};return tt.forEach((rt=>ct(rt))),Xe||it.forEach((rt=>ct(rt))),Xe})(this.style,this.transform.zoom);pe&&(function(Se,Fe,Xe){for(let $e=0;$e<Xe.length;$e++)SA(Se,Fe,Xe[$e])})(this,pe,pe.getVisibleCoordinates())}this.options.showPadding&&(function(pe){const Se=pe.transform.padding;oA(pe,pe.transform.height-(Se.top||0),3,jl),oA(pe,Se.bottom||0,3,Vh),Ga(pe,Se.left||0,3,wA),Ga(pe,pe.transform.width-(Se.right||0),3,Qe);const Fe=pe.transform.centerPoint;(function(Xe,$e,tt,it){Ar(Xe,$e-1,tt-10,2,20,it),Ar(Xe,$e-10,tt-1,20,2,it)})(pe,Fe.x,pe.transform.height-Fe.y,lc)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,C=this.transform.modelViewProjectionMatrix;let S=this.terrainFacilitator.dirty;S||(S=l?!a.c9(p,C):!a.ca(p,C)),S||(S=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),S&&(a.cb(p,C),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(k,K){const N=k.context,q=N.gl,ie=k.transform,ae=ki.unblended,ye=new Ne(q.LEQUAL,Ne.ReadWrite,[0,1]),pe=K.sourceCache.getRenderableTiles(),Se=k.useProgram("terrainDepth");N.bindFramebuffer.set(K.getFramebuffer("depth").framebuffer),N.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),N.clear({color:a.bf.transparent,depth:1});for(const Fe of pe){const Xe=K.getTerrainMesh(Fe.tileID),$e=K.getTerrainData(Fe.tileID),tt=ie.getProjectionData({overscaledTileID:Fe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),it={u_ele_delta:K.getMeshFrameDelta(ie.zoom)};Se.draw(N,q.TRIANGLES,ye,hn.disabled,ae,me.backCCW,it,$e,tt,"terrain",Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}N.bindFramebuffer.set(null),N.viewport.set([0,0,k.width,k.height])})(this,this.style.map.terrain),(function(k,K){const N=k.context,q=N.gl,ie=k.transform,ae=ki.unblended,ye=new Ne(q.LEQUAL,Ne.ReadWrite,[0,1]),pe=K.getCoordsTexture(),Se=K.sourceCache.getRenderableTiles(),Fe=k.useProgram("terrainCoords");N.bindFramebuffer.set(K.getFramebuffer("coords").framebuffer),N.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),N.clear({color:a.bf.transparent,depth:1}),K.coordsIndex=[];for(const Xe of Se){const $e=K.getTerrainMesh(Xe.tileID),tt=K.getTerrainData(Xe.tileID);N.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,pe.texture);const it={u_terrain_coords_id:(255-K.coordsIndex.length)/255,u_texture:0,u_ele_delta:K.getMeshFrameDelta(ie.zoom)},ct=ie.getProjectionData({overscaledTileID:Xe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Fe.draw(N,q.TRIANGLES,ye,hn.disabled,ae,me.backCCW,it,tt,ct,"terrain",$e.vertexBuffer,$e.indexBuffer,$e.segments),K.coordsIndex.push(Xe.tileID.key)}N.bindFramebuffer.set(null),N.viewport.set([0,0,k.width,k.height])})(this,this.style.map.terrain))}renderLayer(l,p,C,S,k){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(S||[]).length)&&(this.id=C.id,a.cc(C)?(function(K,N,q,ie,ae,ye){if(K.renderPass!=="translucent")return;const{isRenderingToTexture:pe}=ye,Se=hn.disabled,Fe=K.colorModeForRenderPass();(q._unevaluatedLayout.hasValue("text-variable-anchor")||q._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Xe,$e,tt,it,ct,rt,ht,ft,ot){const St=$e.transform,Wt=$e.style.map.terrain,Ut=ct==="map",jt=rt==="map";for(const Qt of Xe){const On=it.getTile(Qt),In=On.getBucket(tt);if(!In||!In.text||!In.text.segments.get().length)continue;const ln=a.an(In.textSizeData,St.zoom),$n=a.aC(On,1,$e.transform.zoom),Hi=cr(Ut,$e.transform,$n),Er=tt.layout.get("icon-text-fit")!=="none"&&In.hasIconData();if(ln){const Lo=Math.pow(2,St.zoom-On.tileID.overscaledZ),No=Wt?(hr,Jo)=>Wt.getElevation(Qt,hr,Jo):null;qh(In,Ut,jt,ot,St,Hi,Lo,ln,Er,a.aD(St,On,ht,ft),Qt.toUnwrapped(),No)}}})(ie,K,q,N,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),ae),q.paint.get("icon-opacity").constantOr(1)!==0&&ps(K,N,q,ie,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),Se,Fe,pe),q.paint.get("text-opacity").constantOr(1)!==0&&ps(K,N,q,ie,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),Se,Fe,pe),N.map.showCollisionBoxes&&(Qh(K,N,q,ie,!0),Qh(K,N,q,ie,!1))})(l,p,C,S,this.style.placement.variableOffsets,k):a.cd(C)?(function(K,N,q,ie,ae){if(K.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=ae,pe=q.paint.get("circle-opacity"),Se=q.paint.get("circle-stroke-width"),Fe=q.paint.get("circle-stroke-opacity"),Xe=!q.layout.get("circle-sort-key").isConstant();if(pe.constantOr(1)===0&&(Se.constantOr(1)===0||Fe.constantOr(1)===0))return;const $e=K.context,tt=$e.gl,it=K.transform,ct=K.getDepthModeForSublayer(0,Ne.ReadOnly),rt=hn.disabled,ht=K.colorModeForRenderPass(),ft=[],ot=it.getCircleRadiusCorrection();for(let St=0;St<ie.length;St++){const Wt=ie[St],Ut=N.getTile(Wt),jt=Ut.getBucket(q);if(!jt)continue;const Qt=q.paint.get("circle-translate"),On=q.paint.get("circle-translate-anchor"),In=a.aD(it,Ut,Qt,On),ln=jt.programConfigurations.get(q.id),$n=K.useProgram("circle",ln),Hi=jt.layoutVertexBuffer,Er=jt.indexBuffer,Lo=K.style.map.terrain&&K.style.map.terrain.getTerrainData(Wt),No={programConfiguration:ln,program:$n,layoutVertexBuffer:Hi,indexBuffer:Er,uniformValues:Oc(K,Ut,q,In,ot),terrainData:Lo,projectionData:it.getProjectionData({overscaledTileID:Wt,applyGlobeMatrix:!ye,applyTerrainMatrix:!0})};if(Xe){const hr=jt.segments.get();for(const Jo of hr)ft.push({segments:new a.aM([Jo]),sortKey:Jo.sortKey,state:No})}else ft.push({segments:jt.segments,sortKey:0,state:No})}Xe&&ft.sort(((St,Wt)=>St.sortKey-Wt.sortKey));for(const St of ft){const{programConfiguration:Wt,program:Ut,layoutVertexBuffer:jt,indexBuffer:Qt,uniformValues:On,terrainData:In,projectionData:ln}=St.state;Ut.draw($e,tt.TRIANGLES,ct,rt,ht,me.backCCW,On,In,ln,q.id,jt,Qt,St.segments,q.paint,K.transform.zoom,Wt)}})(l,p,C,S,k):a.ce(C)?(function(K,N,q,ie,ae){if(q.paint.get("heatmap-opacity")===0)return;const ye=K.context,{isRenderingToTexture:pe,isRenderingGlobe:Se}=ae;if(K.style.map.terrain){for(const Fe of ie){const Xe=N.getTile(Fe);N.hasRenderableParent(Fe)||(K.renderPass==="offscreen"?hu(K,Xe,q,Fe,Se):K.renderPass==="translucent"&&vl(K,q,Fe,pe,Se))}ye.viewport.set([0,0,K.width,K.height])}else K.renderPass==="offscreen"?(function(Fe,Xe,$e,tt){const it=Fe.context,ct=it.gl,rt=Fe.transform,ht=hn.disabled,ft=new ki([ct.ONE,ct.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(ot,St,Wt){const Ut=ot.gl;ot.activeTexture.set(Ut.TEXTURE1),ot.viewport.set([0,0,St.width/4,St.height/4]);let jt=Wt.heatmapFbos.get(a.c3);jt?(Ut.bindTexture(Ut.TEXTURE_2D,jt.colorAttachment.get()),ot.bindFramebuffer.set(jt.framebuffer)):(jt=kc(ot,St.width/4,St.height/4),Wt.heatmapFbos.set(a.c3,jt))})(it,Fe,$e),it.clear({color:a.bf.transparent});for(let ot=0;ot<tt.length;ot++){const St=tt[ot];if(Xe.hasRenderableParent(St))continue;const Wt=Xe.getTile(St),Ut=Wt.getBucket($e);if(!Ut)continue;const jt=Ut.programConfigurations.get($e.id),Qt=Fe.useProgram("heatmap",jt),On=rt.getProjectionData({overscaledTileID:St,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),In=rt.getCircleRadiusCorrection();Qt.draw(it,ct.TRIANGLES,Ne.disabled,ht,ft,me.backCCW,wp(Wt,rt.zoom,$e.paint.get("heatmap-intensity"),In),null,On,$e.id,Ut.layoutVertexBuffer,Ut.indexBuffer,Ut.segments,$e.paint,rt.zoom,jt)}it.viewport.set([0,0,Fe.width,Fe.height])})(K,N,q,ie):K.renderPass==="translucent"&&(function(Fe,Xe){const $e=Fe.context,tt=$e.gl;$e.setColorMode(Fe.colorModeForRenderPass());const it=Xe.heatmapFbos.get(a.c3);it&&($e.activeTexture.set(tt.TEXTURE0),tt.bindTexture(tt.TEXTURE_2D,it.colorAttachment.get()),$e.activeTexture.set(tt.TEXTURE1),iA($e,Xe).bind(tt.LINEAR,tt.CLAMP_TO_EDGE),Fe.useProgram("heatmapTexture").draw($e,tt.TRIANGLES,Ne.disabled,hn.disabled,Fe.colorModeForRenderPass(),me.disabled,Rf(Fe,Xe,0,1),null,null,Xe.id,Fe.viewportBuffer,Fe.quadTriangleIndexBuffer,Fe.viewportSegments,Xe.paint,Fe.transform.zoom))})(K,q)})(l,p,C,S,k):a.cf(C)?(function(K,N,q,ie,ae){if(K.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=ae,pe=q.paint.get("line-opacity"),Se=q.paint.get("line-width");if(pe.constantOr(1)===0||Se.constantOr(1)===0)return;const Fe=K.getDepthModeForSublayer(0,Ne.ReadOnly),Xe=K.colorModeForRenderPass(),$e=q.paint.get("line-dasharray"),tt=$e.constantOr(1),it=q.paint.get("line-pattern"),ct=it.constantOr(1),rt=q.paint.get("line-gradient"),ht=q.getCrossfadeParameters();let ft;ft=ct?"linePattern":tt&&rt?"lineGradientSDF":tt?"lineSDF":rt?"lineGradient":"line";const ot=K.context,St=ot.gl,Wt=K.transform;let Ut=!0;for(const jt of ie){const Qt=N.getTile(jt);if(ct&&!Qt.patternsLoaded())continue;const On=Qt.getBucket(q);if(!On)continue;const In=On.programConfigurations.get(q.id),ln=K.context.program.get(),$n=K.useProgram(ft,In),Hi=Ut||$n.program!==ln,Er=K.style.map.terrain&&K.style.map.terrain.getTerrainData(jt),Lo=it.constantOr(null),No=$e&&$e.constantOr(null);if(Lo&&Qt.imageAtlas){const Ra=Qt.imageAtlas,js=Ra.patternPositions[Lo.to.toString()],na=Ra.patternPositions[Lo.from.toString()];js&&na&&In.setConstantPatternPositions(js,na)}else if(No){const Ra=q.layout.get("line-cap")==="round",js=K.lineAtlas.getDash(No.to,Ra),na=K.lineAtlas.getDash(No.from,Ra);In.setConstantDashPositions(js,na)}const hr=Wt.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!ye,applyTerrainMatrix:!0}),Jo=Wt.getPixelScale();let Ta;ct?(Ta=Um(K,Qt,q,Jo,ht),ac(ot,St,Qt,In,ht)):tt&&rt?(Ta=Lm(K,Qt,q,Jo,ht,On.lineClipsArray.length),rh(K,N,ot,St,q,On,jt,In,ht)):tt?(Ta=Ud(K,Qt,q,Jo,ht),Ip(K,ot,St,In,Hi,ht)):rt?(Ta=Uh(K,Qt,q,Jo,On.lineClipsArray.length),rA(K,N,ot,St,q,On,jt)):Ta=tA(K,Qt,q,Jo);const Is=K.stencilModeForClipping(jt);$n.draw(ot,St.TRIANGLES,Fe,Is,Xe,me.disabled,Ta,Er,hr,q.id,On.layoutVertexBuffer,On.indexBuffer,On.segments,q.paint,K.transform.zoom,In,On.layoutVertexBuffer2),Ut=!1}})(l,p,C,S,k):a.cg(C)?(function(K,N,q,ie,ae){const ye=q.paint.get("fill-color"),pe=q.paint.get("fill-opacity");if(pe.constantOr(1)===0)return;const{isRenderingToTexture:Se}=ae,Fe=K.colorModeForRenderPass(),Xe=q.paint.get("fill-pattern"),$e=K.opaquePassEnabledForLayer()&&!Xe.constantOr(1)&&ye.constantOr(a.bf.transparent).a===1&&pe.constantOr(0)===1?"opaque":"translucent";if(K.renderPass===$e){const tt=K.getDepthModeForSublayer(1,K.renderPass==="opaque"?Ne.ReadWrite:Ne.ReadOnly);ta(K,N,q,ie,tt,Fe,!1,Se)}if(K.renderPass==="translucent"&&q.paint.get("fill-antialias")){const tt=K.getDepthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Ne.ReadOnly);ta(K,N,q,ie,tt,Fe,!0,Se)}})(l,p,C,S,k):a.ch(C)?(function(K,N,q,ie,ae){const ye=q.paint.get("fill-extrusion-opacity");if(ye===0)return;const{isRenderingToTexture:pe}=ae;if(K.renderPass==="translucent"){const Se=new Ne(K.context.gl.LEQUAL,Ne.ReadWrite,K.depthRangeFor3D);if(ye!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))lo(K,N,q,ie,Se,hn.disabled,ki.disabled,pe),lo(K,N,q,ie,Se,K.stencilModeFor3D(),K.colorModeForRenderPass(),pe);else{const Fe=K.colorModeForRenderPass();lo(K,N,q,ie,Se,hn.disabled,Fe,pe)}}})(l,p,C,S,k):a.ci(C)?(function(K,N,q,ie,ae){if(K.renderPass!=="offscreen"&&K.renderPass!=="translucent")return;const{isRenderingToTexture:ye}=ae,pe=K.context,Se=K.style.projection.useSubdivision,Fe=K.getDepthModeForSublayer(0,Ne.ReadOnly),Xe=K.colorModeForRenderPass();if(K.renderPass==="offscreen")(function($e,tt,it,ct,rt,ht,ft){const ot=$e.context,St=ot.gl;for(const Wt of it){const Ut=tt.getTile(Wt),jt=Ut.dem;if(!jt||!jt.data||!Ut.needsHillshadePrepare)continue;const Qt=jt.dim,On=jt.stride,In=jt.getPixels();if(ot.activeTexture.set(St.TEXTURE1),ot.pixelStoreUnpackPremultiplyAlpha.set(!1),Ut.demTexture=Ut.demTexture||$e.getTileTexture(On),Ut.demTexture){const $n=Ut.demTexture;$n.update(In,{premultiply:!1}),$n.bind(St.NEAREST,St.CLAMP_TO_EDGE)}else Ut.demTexture=new a.T(ot,In,St.RGBA,{premultiply:!1}),Ut.demTexture.bind(St.NEAREST,St.CLAMP_TO_EDGE);ot.activeTexture.set(St.TEXTURE0);let ln=Ut.fbo;if(!ln){const $n=new a.T(ot,{width:Qt,height:Qt,data:null},St.RGBA);$n.bind(St.LINEAR,St.CLAMP_TO_EDGE),ln=Ut.fbo=ot.createFramebuffer(Qt,Qt,!0,!1),ln.colorAttachment.set($n.texture)}ot.bindFramebuffer.set(ln.framebuffer),ot.viewport.set([0,0,Qt,Qt]),$e.useProgram("hillshadePrepare").draw(ot,St.TRIANGLES,rt,ht,ft,me.disabled,Pf(Ut.tileID,jt),null,null,ct.id,$e.rasterBoundsBuffer,$e.quadTriangleIndexBuffer,$e.rasterBoundsSegments),Ut.needsHillshadePrepare=!1}})(K,N,ie,q,Fe,hn.disabled,Xe),pe.viewport.set([0,0,K.width,K.height]);else if(K.renderPass==="translucent")if(Se){const[$e,tt,it]=K.stencilConfigForOverlapTwoPass(ie);Gr(K,N,q,it,$e,Fe,Xe,!1,ye),Gr(K,N,q,it,tt,Fe,Xe,!0,ye)}else{const[$e,tt]=K.getStencilConfigForOverlapAndUpdateStencilID(ie);Gr(K,N,q,tt,$e,Fe,Xe,!1,ye)}})(l,p,C,S,k):a.cj(C)?(function(K,N,q,ie,ae){if(K.renderPass!=="translucent"||!ie.length)return;const{isRenderingToTexture:ye}=ae,pe=K.style.projection.useSubdivision,Se=K.getDepthModeForSublayer(0,Ne.ReadOnly),Fe=K.colorModeForRenderPass();if(pe){const[Xe,$e,tt]=K.stencilConfigForOverlapTwoPass(ie);MA(K,N,q,tt,Xe,Se,Fe,!1,ye),MA(K,N,q,tt,$e,Se,Fe,!0,ye)}else{const[Xe,$e]=K.getStencilConfigForOverlapAndUpdateStencilID(ie);MA(K,N,q,$e,Xe,Se,Fe,!1,ye)}})(l,p,C,S,k):a.bK(C)?(function(K,N,q,ie,ae){if(K.renderPass!=="translucent"||q.paint.get("raster-opacity")===0||!ie.length)return;const{isRenderingToTexture:ye}=ae,pe=N.getSource(),Se=K.style.projection.useSubdivision;if(pe instanceof Kn)ss(K,N,q,ie,null,!1,!1,pe.tileCoords,pe.flippedWindingOrder,ye);else if(Se){const[Fe,Xe,$e]=K.stencilConfigForOverlapTwoPass(ie);ss(K,N,q,$e,Fe,!1,!0,du,!1,ye),ss(K,N,q,$e,Xe,!0,!0,du,!1,ye)}else{const[Fe,Xe]=K.getStencilConfigForOverlapAndUpdateStencilID(ie);ss(K,N,q,Xe,Fe,!1,!0,du,!1,ye)}})(l,p,C,S,k):a.ck(C)?(function(K,N,q,ie,ae){const ye=q.paint.get("background-color"),pe=q.paint.get("background-opacity");if(pe===0)return;const{isRenderingToTexture:Se}=ae,Fe=K.context,Xe=Fe.gl,$e=K.style.projection,tt=K.transform,it=tt.tileSize,ct=q.paint.get("background-pattern");if(K.isPatternMissing(ct))return;const rt=!ct&&ye.a===1&&pe===1&&K.opaquePassEnabledForLayer()?"opaque":"translucent";if(K.renderPass!==rt)return;const ht=hn.disabled,ft=K.getDepthModeForSublayer(0,rt==="opaque"?Ne.ReadWrite:Ne.ReadOnly),ot=K.colorModeForRenderPass(),St=K.useProgram(ct?"backgroundPattern":"background"),Wt=ie||Tn(tt,{tileSize:it,terrain:K.style.map.terrain});ct&&(Fe.activeTexture.set(Xe.TEXTURE0),K.imageManager.bind(K.context));const Ut=q.getCrossfadeParameters();for(const jt of Wt){const Qt=tt.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!Se,applyTerrainMatrix:!0}),On=ct?JA(pe,K,ct,{tileID:jt,tileSize:it},Ut):Ls(pe,ye),In=K.style.map.terrain&&K.style.map.terrain.getTerrainData(jt),ln=$e.getMeshFromTileID(Fe,jt.canonical,!1,!0,"raster");St.draw(Fe,Xe.TRIANGLES,ft,ht,ot,me.backCCW,On,In,Qt,q.id,ln.vertexBuffer,ln.indexBuffer,ln.segments)}})(l,0,C,S,k):a.cl(C)&&(function(K,N,q,ie){const{isRenderingGlobe:ae}=ie,ye=K.context,pe=q.implementation,Se=K.style.projection,Fe=K.transform,Xe=Fe.getProjectionDataForCustomLayer(ae),$e={farZ:Fe.farZ,nearZ:Fe.nearZ,fov:Fe.fov*Math.PI/180,modelViewProjectionMatrix:Fe.modelViewProjectionMatrix,projectionMatrix:Fe.projectionMatrix,shaderData:{variantName:Se.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Se.shaderPreludeCode.vertexSource}`,define:Se.shaderDefine},defaultProjectionData:Xe},tt=pe.renderingMode?pe.renderingMode:"2d";if(K.renderPass==="offscreen"){const it=pe.prerender;it&&(K.setCustomLayerDefaults(),ye.setColorMode(K.colorModeForRenderPass()),it.call(pe,ye.gl,$e),ye.setDirty(),K.setBaseState())}else if(K.renderPass==="translucent"){K.setCustomLayerDefaults(),ye.setColorMode(K.colorModeForRenderPass()),ye.setStencilMode(hn.disabled);const it=tt==="3d"?K.getDepthModeFor3D():K.getDepthModeForSublayer(0,Ne.ReadOnly);ye.setDepthMode(it),pe.render(ye.gl,$e),ye.setDirty(),K.setBaseState(),ye.bindFramebuffer.set(null)}})(l,0,C,k))}saveTileTexture(l){const p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const p=this._tileTextures[l];return p&&p.length>0?p.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const p=this.imageManager.getPattern(l.from.toString()),C=this.imageManager.getPattern(l.to.toString());return!p||!C}useProgram(l,p,C=!1,S=[]){this.cache=this.cache||{};const k=!!this.style.map.terrain,K=this.style.projection,N=C?ja.projectionMercator:K.shaderPreludeCode,q=C?Na:K.shaderDefine,ie=l+(p?p.cacheKey:"")+`/${C?Xo:K.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(k?"/terrain":"")+(S?`/${S.join("/")}`:"");return this.cache[ie]||(this.cache[ie]=new Pd(this.context,ja[l],p,Fm[l],this._showOverdrawInspector,k,N,q,S)),this.cache[ie]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:p}=this.context.gl;return this.width!==l||this.height!==p}}function kp(B,l){let p,C=!1,S=null,k=null;const K=()=>{S=null,C&&(B.apply(k,p),S=setTimeout(K,l),C=!1)};return(...N)=>(C=!0,k=this,p=N,S||K(),S)}class uc{constructor(l){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let C;return p.split("&").map((S=>S.split("="))).forEach((S=>{S[0]===this._hashName&&(C=S)})),(C&&C[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(!this._isValidHash(p))return!1;const C=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:C,pitch:+(p[4]||0)}),!0},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{const p=this._getCurrentHash();if(p.length===0)return;const C=p.join("/");let S=C;S.split("&").length>0&&(S=S.split("&")[0]),this._hashName&&(S=`${this._hashName}=${C}`);let k=window.location.hash.replace(S,"");k.startsWith("#&")?k=k.slice(0,1)+k.slice(2):k==="#"&&(k="");let K=window.location.href.replace(/(#.+)?$/,k);K=K.replace("&&","&"),window.history.replaceState(window.history.state,null,K)},this._updateHash=kp(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const p=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,S=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,S),K=Math.round(p.lng*k)/k,N=Math.round(p.lat*k)/k,q=this._map.getBearing(),ie=this._map.getPitch();let ae="";if(ae+=l?`/${K}/${N}/${C}`:`${C}/${N}/${K}`,(q||ie)&&(ae+="/"+Math.round(10*q)/10),ie&&(ae+=`/${Math.round(ie)}`),this._hashName){const ye=this._hashName;let pe=!1;const Se=window.location.hash.slice(1).split("&").map((Fe=>{const Xe=Fe.split("=")[0];return Xe===ye?(pe=!0,`${Xe}=${ae}`):Fe})).filter((Fe=>Fe));return pe||Se.push(`${ye}=${ae}`),`#${Se.join("&")}`}return`#${ae}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new a.S(+l[2],+l[1])}catch{return!1}const p=+l[0],C=+(l[3]||0),S=+(l[4]||0);return p>=this._map.getMinZoom()&&p<=this._map.getMaxZoom()&&C>=-180&&C<=180&&S>=this._map.getMinPitch()&&S<=this._map.getMaxPitch()}}const oh={linearity:.3,easing:a.cm(0,0,.3,1)},$h=a.e({deceleration:2500,maxSpeed:1400},oh),sl=a.e({deceleration:20,maxSpeed:1400},oh),cc=a.e({deceleration:1e3,maxSpeed:360},oh),g0=a.e({deceleration:1e3,maxSpeed:90},oh),E1=a.e({deceleration:1e3,maxSpeed:360},oh);class B1{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:R(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,p=R();for(;l.length>0&&p-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)p.zoom+=k.zoomDelta||0,p.bearing+=k.bearingDelta||0,p.pitch+=k.pitchDelta||0,p.roll+=k.rollDelta||0,k.panDelta&&p.pan._add(k.panDelta),k.around&&(p.around=k.around),k.pinchAround&&(p.pinchAround=k.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(p.pan.mag()){const k=as(p.pan.mag(),C,a.e({},$h,l||{})),K=p.pan.mult(k.amount/p.pan.mag()),N=this._map.cameraHelper.handlePanInertia(K,this._map.transform);S.center=N.easingCenter,S.offset=N.easingOffset,Kf(S,k)}if(p.zoom){const k=as(p.zoom,C,sl);S.zoom=this._map.transform.zoom+k.amount,Kf(S,k)}if(p.bearing){const k=as(p.bearing,C,cc);S.bearing=this._map.transform.bearing+a.ae(k.amount,-179,179),Kf(S,k)}if(p.pitch){const k=as(p.pitch,C,g0);S.pitch=this._map.transform.pitch+k.amount,Kf(S,k)}if(p.roll){const k=as(p.roll,C,E1);S.roll=this._map.transform.roll+a.ae(k.amount,-179,179),Kf(S,k)}if(S.zoom||S.bearing){const k=p.pinchAround===void 0?p.around:p.pinchAround;S.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),a.e(S,{noMoveStart:!0})}}function Kf(B,l){(!B.duration||B.duration<l.duration)&&(B.duration=l.duration,B.easing=l.easing)}function as(B,l,p){const{maxSpeed:C,linearity:S,deceleration:k}=p,K=a.ae(B*S/(l/1e3),-C,C),N=Math.abs(K)/(k*S);return{easing:p.easing,duration:1e3*N,amount:K*(N/2)}}class Fs extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C,S={}){C=C instanceof MouseEvent?C:new MouseEvent(l,C);const k=P.mousePos(p.getCanvas(),C),K=p.unproject(k);super(l,a.e({point:k,lngLat:K,originalEvent:C},S)),this._defaultPrevented=!1,this.target=p}}class Ia extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C){const S=l==="touchend"?C.changedTouches:C.touches,k=P.touchPos(p.getCanvasContainer(),S),K=k.map((q=>p.unproject(q))),N=k.reduce(((q,ie,ae,ye)=>q.add(ie.div(ye.length))),new a.P(0,0));super(l,{points:k,point:N,lngLats:K,lngLat:p.unproject(N),originalEvent:C}),this._defaultPrevented=!1}}class Nl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,p,C){super(l,{originalEvent:C}),this._defaultPrevented=!1}}class Ym{constructor(l,p){this._map=l,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Nl(l.type,this._map,l))}mousedown(l,p){return this._mousedownPos=p,this._firePreventable(new Fs(l.type,this._map,l))}mouseup(l){this._map.fire(new Fs(l.type,this._map,l))}click(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Fs(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Fs(l.type,this._map,l))}mouseover(l){this._map.fire(new Fs(l.type,this._map,l))}mouseout(l){this._map.fire(new Fs(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Ia(l.type,this._map,l))}touchmove(l){this._map.fire(new Ia(l.type,this._map,l))}touchend(l){this._map.fire(new Ia(l.type,this._map,l))}touchcancel(l){this._map.fire(new Ia(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Gl{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Fs(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Fs(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fu{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(a.P.convert(l),this._map.terrain)}}class Hh{constructor(l,p){this._map=l,this._tr=new fu(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(P.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(l,p){if(!this._active)return;const C=p;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=C,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const k=Math.min(S.x,C.x),K=Math.max(S.x,C.x),N=Math.min(S.y,C.y),q=Math.max(S.y,C.y);P.setTransform(this._box,`translate(${k}px,${N}px)`),this._box.style.width=K-k+"px",this._box.style.height=q-N+"px"}mouseupWindow(l,p){if(!this._active||l.button!==0)return;const C=this._startPos,S=p;if(this.reset(),P.suppressClick(),C.x!==S.x||C.y!==S.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:l})),{cameraAnimation:k=>k.fitScreenCoordinates(C,S,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,p){return this._map.fire(new a.l(l,{originalEvent:p}))}}function Vm(B,l){if(B.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${B.length}, points ${l.length}`);const p={};for(let C=0;C<B.length;C++)p[B[C].identifier]=l[C];return p}class mv{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,p,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),C.length===this.numTouches&&(this.centroid=(function(S){const k=new a.P(0,0);for(const K of S)k._add(K);return k.div(S.length)})(p),this.touches=Vm(C,p)))}touchmove(l,p,C){if(this.aborted||!this.centroid)return;const S=Vm(C,p);for(const k in this.touches){const K=S[k];(!K||K.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(l,p,C){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class ku{constructor(l){this.singleTap=new mv(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,p,C){this.singleTap.touchstart(l,p,C)}touchmove(l,p,C){this.singleTap.touchmove(l,p,C)}touchend(l,p,C){const S=this.singleTap.touchend(l,p,C);if(S){const k=l.timeStamp-this.lastTime<500,K=!this.lastTap||this.lastTap.dist(S)<30;if(k&&K||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class Zh{constructor(l){this._tr=new fu(l),this._zoomIn=new ku({numTouches:1,numTaps:2}),this._zoomOut=new ku({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,p,C){this._zoomIn.touchstart(l,p,C),this._zoomOut.touchstart(l,p,C)}touchmove(l,p,C){this._zoomIn.touchmove(l,p,C),this._zoomOut.touchmove(l,p,C)}touchend(l,p,C){const S=this._zoomIn.touchend(l,p,C),k=this._zoomOut.touchend(l,p,C),K=this._tr;return S?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:K.zoom+1,around:K.unproject(S)},{originalEvent:l})}):k?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:N=>N.easeTo({duration:300,zoom:K.zoom-1,around:K.unproject(k)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class aA{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const p=this._moveFunction(...l);if(p.bearingDelta||p.pitchDelta||p.rollDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(l,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(p)?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,p){if(!this.isEnabled())return;const C=this._lastPoint;if(!C)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const S=Array.isArray(p)?p[0]:p;return!this._moved&&S.dist(C)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=S,this._move(C,S))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&P.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Tc=0,Hn=2,jd={[Tc]:1,[Hn]:2};class OA{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const p=P.mouseButton(l);this._eventButton=p}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!(function(p,C){const S=jd[C];return p.buttons===void 0||(p.buttons&S)!==S})(l,this._eventButton)}isValidEndEvent(l){return P.mouseButton(l)===this._eventButton}}class Uf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class Xh{constructor(l=new OA({checkCorrectEvent:()=>!0}),p=new Uf){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=p}_executeRelevantHandler(l,p,C){return l instanceof MouseEvent?p(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?C(l):void 0}startMove(l){this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.startMove(p)),(p=>this.oneFingerTouchMoveStateManager.startMove(p)))}endMove(l){this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.endMove(p)),(p=>this.oneFingerTouchMoveStateManager.endMove(p)))}isValidStartEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidStartEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidStartEvent(p)))}isValidMoveEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidMoveEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(p)))}isValidEndEvent(l){return this._executeRelevantHandler(l,(p=>this.mouseMoveStateManager.isValidEndEvent(p)),(p=>this.oneFingerTouchMoveStateManager.isValidEndEvent(p)))}}const sh=B=>{B.mousedown=B.dragStart,B.mousemoveWindow=B.dragMove,B.mouseup=B.dragEnd,B.contextmenu=l=>{l.preventDefault()}};class Lf{constructor(l,p){this._clickTolerance=l.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,p,C){return this._calculateTransform(l,p,C)}touchmove(l,p,C){if(this._active){if(!this._shouldBePrevented(C.length))return l.preventDefault(),this._calculateTransform(l,p,C);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,p,C){this._calculateTransform(l,p,C),this._active&&this._shouldBePrevented(C.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,p,C){C.length>0&&(this._active=!0);const S=Vm(C,p),k=new a.P(0,0),K=new a.P(0,0);let N=0;for(const ie in S){const ae=S[ie],ye=this._touches[ie];ye&&(k._add(ae),K._add(ae.sub(ye)),N++,S[ie]=ae)}if(this._touches=S,this._shouldBePrevented(N)||!K.mag())return;const q=K.div(N);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(N),panDelta:q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class er{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,p,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([p[0],p[1]]))}touchmove(l,p,C){if(!this._firstTwoTouches)return;l.preventDefault();const[S,k]=this._firstTwoTouches,K=pu(C,p,S),N=pu(C,p,k);if(!K||!N)return;const q=this._aroundCenter?null:K.add(N).div(2);return this._move([K,N],q,l)}touchend(l,p,C){if(!this._firstTwoTouches)return;const[S,k]=this._firstTwoTouches,K=pu(C,p,S),N=pu(C,p,k);K&&N||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function pu(B,l,p){for(let C=0;C<B.length;C++)if(B[C].identifier===p)return l[C]}function y0(B,l){return Math.log(B/l)/Math.LN2}class zf extends er{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,p){const C=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(y0(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:y0(this._distance,C),pinchAround:p}}}function Nd(B,l){return 180*B.angleWith(l)/Math.PI}class Tu extends er{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,p,C){const S=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Nd(this._vector,S),pinchAround:p}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const p=25/(Math.PI*this._minDiameter)*360,C=Nd(l,this._startVector);return Math.abs(C)<p}}function ah(B){return Math.abs(B.y)>Math.abs(B.x)}class Ru extends er{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,p,C){super.touchstart(l,p,C),this._currentTouchCount=C.length}_start(l){this._lastPoints=l,ah(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,p,C){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const S=l[0].sub(this._lastPoints[0]),k=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,k,C.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(S.y+k.y)/2*-.5}):void 0}gestureBeginsVertically(l,p,C){if(this._valid!==void 0)return this._valid;const S=l.mag()>=2,k=p.mag()>=2;if(!S&&!k)return;if(!S||!k)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const K=l.y>0==p.y>0;return ah(l)&&ah(p)&&K}}const Ql={panStep:100,bearingStep:15,pitchStep:10};class v0{constructor(l){this._tr=new fu(l);const p=Ql;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let p=0,C=0,S=0,k=0,K=0;switch(l.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:l.shiftKey?C=-1:(l.preventDefault(),k=-1);break;case 39:l.shiftKey?C=1:(l.preventDefault(),k=1);break;case 38:l.shiftKey?S=1:(l.preventDefault(),K=-1);break;case 40:l.shiftKey?S=-1:(l.preventDefault(),K=1);break;default:return}return this._rotationDisabled&&(C=0,S=0),{cameraAnimation:N=>{const q=this._tr;N.easeTo({duration:300,easeId:"keyboardHandler",easing:lh,zoom:p?Math.round(q.zoom)+p*(l.shiftKey?2:1):q.zoom,bearing:q.bearing+C*this._bearingStep,pitch:q.pitch+S*this._pitchStep,offset:[-k*this._panStep,-K*this._panStep],center:q.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function lh(B){return B*(2-B)}const $m=4.000244140625,Rc=1/450;class al{constructor(l,p){this._onTimeout=C=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},this._map=l,this._tr=new fu(l),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Rc}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let p=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const C=R(),S=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,p!==0&&p%$m==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(S*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=P.mousePos(this._map.getCanvas(),l),C=this._tr;this._aroundPoint=this._aroundCenter?C.transform.locationToScreenPoint(a.S.convert(C.center)):p,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const N=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=N),typeof this._targetZoom=="number"&&(this._targetZoom+=N)}if(this._delta!==0){const N=this._type==="wheel"&&Math.abs(this._delta)>$m?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&q!==0&&(q=1/q);const ie=typeof this._targetZoom!="number"?l.scale:a.ah(this._targetZoom);this._targetZoom=l.constrain(l.getCameraLngLat(),a.ak(ie*q)).zoom,this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,C=this._startZoom,S=this._easing;let k,K=!1;if(this._type==="wheel"&&C&&S){const N=R()-this._lastWheelEventTime,q=Math.min((N+5)/200,1),ie=S(q);k=a.C.number(C,p,ie),q<1?this._frameId||(this._frameId=!0):K=!0}else k=p,K=!0;return this._active=!0,K&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=k,{noInertia:!0,needsRenderFrame:!K,zoomDelta:k-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let p=a.co;if(this._prevEase){const C=this._prevEase,S=(R()-C.start)/C.duration,k=C.easing(S+.01)-C.easing(S),K=.27/Math.sqrt(k*k+1e-4)*.01,N=Math.sqrt(.0729-K*K);p=a.cm(K,N,.25,1)}return this._prevEase={start:R(),duration:l,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class wo{constructor(l,p){this._clickZoom=l,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Jh{constructor(l){this._tr=new fu(l),this.reset()}reset(){this._active=!1}dblclick(l,p){return l.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Du{constructor(){this._tap=new ku({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,p,C){if(!this._swipePoint)if(this._tapTime){const S=p[0],k=l.timeStamp-this._tapTime<500,K=this._tapPoint.dist(S)<30;k&&K?C.length>0&&(this._swipePoint=S,this._swipeTouch=C[0].identifier):this.reset()}else this._tap.touchstart(l,p,C)}touchmove(l,p,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const S=p[0],k=S.y-this._swipePoint.y;return this._swipePoint=S,l.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(l,p,C)}touchend(l,p,C){if(this._tapTime)this._swipePoint&&C.length===0&&this.reset();else{const S=this._tap.touchend(l,p,C);S&&(this._tapTime=l.timeStamp,this._tapPoint=S)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ed{constructor(l,p,C){this._el=l,this._mousePan=p,this._touchPan=C}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ff{constructor(l,p,C,S){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=p,this._mousePitch=C,this._mouseRoll=S}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class pa{constructor(l,p,C,S){this._el=l,this._touchZoom=p,this._touchRotate=C,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class uh{constructor(l,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",l);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const C=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),S=document.createElement("div");S.className="maplibregl-desktop-message",S.textContent=p,this._container.appendChild(S);const k=document.createElement("div");k.className="maplibregl-mobile-message",k.textContent=C,this._container.appendChild(k),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,p){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:l,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const ch=B=>B.zoom||B.drag||B.roll||B.pitch||B.rotate;class ka extends a.l{}function Ah(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta||B.rollDelta}class ti{constructor(l,p){this.handleWindowEvent=S=>{this.handleEvent(S,`${S.type}Window`)},this.handleEvent=(S,k)=>{if(S.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const K=S.type==="renderFrame"?void 0:S,N={needsRenderFrame:!1},q={},ie={};for(const{handlerName:pe,handler:Se,allowed:Fe}of this._handlers){if(!Se.isEnabled())continue;let Xe;if(this._blockedByActive(ie,Fe,pe))Se.reset();else if(Se[k||S.type]){if(a.cp(S,k||S.type)){const $e=P.mousePos(this._map.getCanvas(),S);Xe=Se[k||S.type](S,$e)}else if(a.cq(S,k||S.type)){const $e=this._getMapTouches(S.touches),tt=P.touchPos(this._map.getCanvas(),$e);Xe=Se[k||S.type](S,tt,$e)}else a.cr(k||S.type)||(Xe=Se[k||S.type](S));this.mergeHandlerResult(N,q,Xe,pe,K),Xe&&Xe.needsRenderFrame&&this._triggerRenderFrame()}(Xe||Se.isActive())&&(ie[pe]=Se)}const ae={};for(const pe in this._previousActiveHandlers)ie[pe]||(ae[pe]=K);this._previousActiveHandlers=ie,(Object.keys(ae).length||Ah(N))&&(this._changes.push([N,q,ae]),this._triggerRenderFrame()),(Object.keys(ie).length||Ah(N))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ye}=N;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new B1(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,k,K]of this._listeners)P.addEventListener(S,k,S===document?this.handleWindowEvent:this.handleEvent,K)}destroy(){for(const[l,p,C]of this._listeners)P.removeEventListener(l,p,l===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(l){const p=this._map,C=p.getCanvasContainer();this._add("mapEvent",new Ym(p,l));const S=p.boxZoom=new Hh(p,l);this._add("boxZoom",S),l.interactive&&l.boxZoom&&S.enable();const k=p.cooperativeGestures=new uh(p,l.cooperativeGestures);this._add("cooperativeGestures",k),l.cooperativeGestures&&k.enable();const K=new Zh(p),N=new Jh(p);p.doubleClickZoom=new wo(N,K),this._add("tapZoom",K),this._add("clickZoom",N),l.interactive&&l.doubleClickZoom&&p.doubleClickZoom.enable();const q=new Du;this._add("tapDragZoom",q);const ie=p.touchPitch=new Ru(p);this._add("touchPitch",ie),l.interactive&&l.touchPitch&&p.touchPitch.enable(l.touchPitch);const ae=()=>p.project(p.getCenter()),ye=(function({enable:rt,clickTolerance:ht,aroundCenter:ft=!0,minPixelCenterThreshold:ot=100,rotateDegreesPerPixelMoved:St=.8},Wt){const Ut=new OA({checkCorrectEvent:jt=>P.mouseButton(jt)===0&&jt.ctrlKey||P.mouseButton(jt)===2&&!jt.ctrlKey});return new aA({clickTolerance:ht,move:(jt,Qt)=>{const On=Wt();if(ft&&Math.abs(On.y-jt.y)>ot)return{bearingDelta:a.cn(new a.P(jt.x,Qt.y),Qt,On)};let In=(Qt.x-jt.x)*St;return ft&&Qt.y<On.y&&(In=-In),{bearingDelta:In}},moveStateManager:Ut,enable:rt,assignEvents:sh})})(l,ae),pe=(function({enable:rt,clickTolerance:ht,pitchDegreesPerPixelMoved:ft=-.5}){const ot=new OA({checkCorrectEvent:St=>P.mouseButton(St)===0&&St.ctrlKey||P.mouseButton(St)===2});return new aA({clickTolerance:ht,move:(St,Wt)=>({pitchDelta:(Wt.y-St.y)*ft}),moveStateManager:ot,enable:rt,assignEvents:sh})})(l),Se=(function({enable:rt,clickTolerance:ht,rollDegreesPerPixelMoved:ft=.3},ot){const St=new OA({checkCorrectEvent:Wt=>P.mouseButton(Wt)===2&&Wt.ctrlKey});return new aA({clickTolerance:ht,move:(Wt,Ut)=>{const jt=ot();let Qt=(Ut.x-Wt.x)*ft;return Ut.y<jt.y&&(Qt=-Qt),{rollDelta:Qt}},moveStateManager:St,enable:rt,assignEvents:sh})})(l,ae);p.dragRotate=new Ff(l,ye,pe,Se),this._add("mouseRotate",ye,["mousePitch"]),this._add("mousePitch",pe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Se,["mousePitch"]),l.interactive&&l.dragRotate&&p.dragRotate.enable();const Fe=(function({enable:rt,clickTolerance:ht}){const ft=new OA({checkCorrectEvent:ot=>P.mouseButton(ot)===0&&!ot.ctrlKey});return new aA({clickTolerance:ht,move:(ot,St)=>({around:St,panDelta:St.sub(ot)}),activateOnStart:!0,moveStateManager:ft,enable:rt,assignEvents:sh})})(l),Xe=new Lf(l,p);p.dragPan=new ed(C,Fe,Xe),this._add("mousePan",Fe),this._add("touchPan",Xe,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&p.dragPan.enable(l.dragPan);const $e=new Tu,tt=new zf;p.touchZoomRotate=new pa(C,tt,$e,q),this._add("touchRotate",$e,["touchPan","touchZoom"]),this._add("touchZoom",tt,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&p.touchZoomRotate.enable(l.touchZoomRotate),this._add("blockableMapEvent",new Gl(p));const it=p.scrollZoom=new al(p,(()=>this._triggerRenderFrame()));this._add("scrollZoom",it,["mousePan"]),l.interactive&&l.scrollZoom&&p.scrollZoom.enable(l.scrollZoom);const ct=p.keyboard=new v0(p);this._add("keyboard",ct),l.interactive&&l.keyboard&&p.keyboard.enable()}_add(l,p,C){this._handlers.push({handlerName:l,handler:p,allowed:C}),this._handlersById[l]=p}stop(l){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ch(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,p,C){for(const S in l)if(S!==C&&(!p||p.indexOf(S)<0))return!0;return!1}_getMapTouches(l){const p=[];for(const C of l)this._el.contains(C.target)&&p.push(C);return p}mergeHandlerResult(l,p,C,S,k){if(!C)return;a.e(l,C);const K={handlerName:S,originalEvent:C.originalEvent||k};C.zoomDelta!==void 0&&(p.zoom=K),C.panDelta!==void 0&&(p.drag=K),C.rollDelta!==void 0&&(p.roll=K),C.pitchDelta!==void 0&&(p.pitch=K),C.bearingDelta!==void 0&&(p.rotate=K)}_applyChanges(){const l={},p={},C={};for(const[S,k,K]of this._changes)S.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(S.panDelta)),S.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+S.pitchDelta),S.rollDelta&&(l.rollDelta=(l.rollDelta||0)+S.rollDelta),S.around!==void 0&&(l.around=S.around),S.pinchAround!==void 0&&(l.pinchAround=S.pinchAround),S.noInertia&&(l.noInertia=S.noInertia),a.e(p,k),a.e(C,K);this._updateMapTransform(l,p,C),this._changes=[]}_updateMapTransform(l,p,C){const S=this._map,k=S._getTransformForUpdate(),K=S.terrain;if(!(Ah(l)||K&&this._terrainMovement))return this._fireEvents(p,C,!0);S._stop(!0);let{panDelta:N,zoomDelta:q,bearingDelta:ie,pitchDelta:ae,rollDelta:ye,around:pe,pinchAround:Se}=l;Se!==void 0&&(pe=Se),pe=pe||S.transform.centerPoint,K&&!k.isPointOnMapSurface(pe)&&(pe=k.centerPoint);const Fe={panDelta:N,zoomDelta:q,rollDelta:ye,pitchDelta:ae,bearingDelta:ie,around:pe};this._map.cameraHelper.useGlobeControls&&!k.isPointOnMapSurface(pe)&&(pe=k.centerPoint);const Xe=pe.distSqr(k.centerPoint)<.01?k.center:k.screenPointToLocation(N?pe.sub(N):pe);this._handleMapControls({terrain:K,tr:k,deltasForHelper:Fe,preZoomAroundLoc:Xe,combinedEventsInProgress:p,panDelta:N}),S._applyUpdatedTransform(k),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,C,!0)}_handleMapControls({terrain:l,tr:p,deltasForHelper:C,preZoomAroundLoc:S,combinedEventsInProgress:k,panDelta:K}){const N=this._map.cameraHelper;if(N.handleMapControlsRollPitchBearingZoom(C,p),l)return N.useGlobeControls?(this._terrainMovement||!k.drag&&!k.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void N.handleMapControlsPan(C,p,S)):this._terrainMovement||!k.drag&&!k.zoom?void(k.drag&&this._terrainMovement&&K?p.setCenter(p.screenPointToLocation(p.centerPoint.sub(K))):N.handleMapControlsPan(C,p,S)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void N.handleMapControlsPan(C,p,S));N.handleMapControlsPan(C,p,S)}_fireEvents(l,p,C){const S=ch(this._eventsInProgress),k=ch(l),K={};for(const ye in l){const{originalEvent:pe}=l[ye];this._eventsInProgress[ye]||(K[`${ye}start`]=pe),this._eventsInProgress[ye]=l[ye]}!S&&k&&this._fireEvent("movestart",k.originalEvent);for(const ye in K)this._fireEvent(ye,K[ye]);k&&this._fireEvent("move",k.originalEvent);for(const ye in l){const{originalEvent:pe}=l[ye];this._fireEvent(ye,pe)}const N={};let q;for(const ye in this._eventsInProgress){const{handlerName:pe,originalEvent:Se}=this._eventsInProgress[ye];this._handlersById[pe].isActive()||(delete this._eventsInProgress[ye],q=p[pe]||Se,N[`${ye}end`]=q)}for(const ye in N)this._fireEvent(ye,N[ye]);const ie=ch(this._eventsInProgress),ae=(S||k)&&!ie;if(ae&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ye=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ye.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ye)}if(C&&ae){this._updatingCamera=!0;const ye=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pe=Se=>Se!==0&&-this._bearingSnap<Se&&Se<this._bearingSnap;!ye||!ye.essential&&x.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:q})),pe(this._map.getBearing())&&this._map.resetNorth()):(pe(ye.bearing||this._map.getBearing())&&(ye.bearing=0),ye.freezeElevation=!0,this._map.easeTo(ye,{originalEvent:q})),this._updatingCamera=!1}}_fireEvent(l,p){this._map.fire(new a.l(l,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((l=>{delete this._frameId,this.handleEvent(new ka("renderFrame",{timeStamp:l})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class bi extends a.E{constructor(l,p,C){super(),this._renderFrameCallback=()=>{const S=Math.min((R()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(S)),S<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=C.bearingSnap,this.cameraHelper=p,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(l,p){l.apply(this.transform),this.transform=l,this.cameraHelper=p}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(l,p){return this.jumpTo({center:l},p)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,p){return this.jumpTo({elevation:l},p),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,p,C){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},p),C)}panTo(l,p,C){return this.easeTo(a.e({center:l},p),C)}getZoom(){return this.transform.zoom}setZoom(l,p){return this.jumpTo({zoom:l},p),this}zoomTo(l,p,C){return this.easeTo(a.e({zoom:l},p),C)}zoomIn(l,p){return this.zoomTo(this.getZoom()+1,l,p),this}zoomOut(l,p){return this.zoomTo(this.getZoom()-1,l,p),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,p){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)).fire(new a.l("moveend",p))),this}getBearing(){return this.transform.bearing}setBearing(l,p){return this.jumpTo({bearing:l},p),this}getPadding(){return this.transform.padding}setPadding(l,p){return this.jumpTo({padding:l},p),this}rotateTo(l,p,C){return this.easeTo(a.e({bearing:l},p),C)}resetNorth(l,p){return this.rotateTo(0,a.e({duration:1e3},l),p),this}resetNorthPitch(l,p){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},l),p),this}snapToNorth(l,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,p):this}getPitch(){return this.transform.pitch}setPitch(l,p){return this.jumpTo({pitch:l},p),this}getRoll(){return this.transform.roll}setRoll(l,p){return this.jumpTo({roll:l},p),this}cameraForBounds(l,p){l=Rt.convert(l).adjustAntiMeridian();const C=p&&p.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),C,p)}_cameraForBoxAndBearing(l,p,C,S){const k={top:0,bottom:0,right:0,left:0};if(typeof(S=a.e({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"){const ie=S.padding;S.padding={top:ie,bottom:ie,right:ie,left:ie}}const K=a.e(k,S.padding);S.padding=K;const N=this.transform,q=new Rt(l,p);return this.cameraHelper.cameraForBoxAndBearing(S,K,q,C,N)}fitBounds(l,p,C){return this._fitInternal(this.cameraForBounds(l,p),p,C)}fitScreenCoordinates(l,p,C,S,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(l)),this.transform.screenPointToLocation(a.P.convert(p)),C,S),S,k)}_fitInternal(l,p,C){return l?(delete(p=a.e(l,p)).padding,p.linear?this.easeTo(p,C):this.flyTo(p,C)):this}jumpTo(l,p){this.stop();const C=this._getTransformForUpdate();let S=!1,k=!1,K=!1;const N=C.zoom;this.cameraHelper.handleJumpToCenterZoom(C,l);const q=C.zoom!==N;return"elevation"in l&&C.elevation!==+l.elevation&&C.setElevation(+l.elevation),"bearing"in l&&C.bearing!==+l.bearing&&(S=!0,C.setBearing(+l.bearing)),"pitch"in l&&C.pitch!==+l.pitch&&(k=!0,C.setPitch(+l.pitch)),"roll"in l&&C.roll!==+l.roll&&(K=!0,C.setRoll(+l.roll)),l.padding==null||C.isPaddingEqual(l.padding)||C.setPadding(l.padding),this._applyUpdatedTransform(C),this.fire(new a.l("movestart",p)).fire(new a.l("move",p)),q&&this.fire(new a.l("zoomstart",p)).fire(new a.l("zoom",p)).fire(new a.l("zoomend",p)),S&&this.fire(new a.l("rotatestart",p)).fire(new a.l("rotate",p)).fire(new a.l("rotateend",p)),k&&this.fire(new a.l("pitchstart",p)).fire(new a.l("pitch",p)).fire(new a.l("pitchend",p)),K&&this.fire(new a.l("rollstart",p)).fire(new a.l("roll",p)).fire(new a.l("rollend",p)),this.fire(new a.l("moveend",p))}calculateCameraOptionsFromTo(l,p,C,S=0){const k=a.a1.fromLngLat(l,p),K=a.a1.fromLngLat(C,S),N=K.x-k.x,q=K.y-k.y,ie=K.z-k.z,ae=Math.hypot(N,q,ie);if(ae===0)throw new Error("Can't calculate camera options with same From and To");const ye=Math.hypot(N,q),pe=a.ak(this.transform.cameraToCenterDistance/ae/this.transform.tileSize),Se=180*Math.atan2(N,-q)/Math.PI;let Fe=180*Math.acos(ye/ae)/Math.PI;return Fe=ie<0?90-Fe:90+Fe,{center:K.toLngLat(),elevation:S,zoom:pe,pitch:Fe,bearing:Se}}calculateCameraOptionsFromCameraLngLatAltRotation(l,p,C,S,k){const K=this.transform.calculateCenterFromCameraLngLatAlt(l,p,C,S);return{center:K.center,elevation:K.elevation,zoom:K.zoom,bearing:C,pitch:S,roll:k}}easeTo(l,p){this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.co},l)).animate===!1||!l.essential&&x.prefersReducedMotion)&&(l.duration=0);const C=this._getTransformForUpdate(),S=this.getBearing(),k=C.pitch,K=C.roll,N="bearing"in l?this._normalizeBearing(l.bearing,S):S,q="pitch"in l?+l.pitch:k,ie="roll"in l?this._normalizeBearing(l.roll,K):K,ae="padding"in l?l.padding:C.padding,ye=a.P.convert(l.offset);let pe,Se;l.around&&(pe=a.S.convert(l.around),Se=C.locationToScreenPoint(pe));const Fe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Xe=this.cameraHelper.handleEaseTo(C,{bearing:N,pitch:q,roll:ie,padding:ae,around:pe,aroundPoint:Se,offsetAsPoint:ye,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||S!==N,this._pitching=this._pitching||q!==k,this._rolling=this._rolling||ie!==K,this._padding=!C.isPaddingEqual(ae),this._zooming=this._zooming||Xe.isZooming,this._easeId=l.easeId,this._prepareEase(p,l.noMoveStart,Fe),this.terrain&&this._prepareElevation(Xe.elevationCenter),this._ease(($e=>{Xe.easeFunc($e),this.terrain&&!l.freezeElevation&&this._updateElevation($e),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),($e=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p,$e)}),l),this}_prepareEase(l,p,C={}){this._moving=!0,p||C.moving||this.fire(new a.l("movestart",l)),this._zooming&&!C.zooming&&this.fire(new a.l("zoomstart",l)),this._rotating&&!C.rotating&&this.fire(new a.l("rotatestart",l)),this._pitching&&!C.pitching&&this.fire(new a.l("pitchstart",l)),this._rolling&&!C.rolling&&this.fire(new a.l("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&p!==this._elevationTarget){const C=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(C-(p-(C*l+this._elevationStart))/(1-l)),this._elevationTarget=p}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const p=l.getCameraLngLat(),C=l.getCameraAltitude(),S=this.terrain?this.terrain.getElevationForLngLatZoom(p,l.zoom):0;if(C<S){const k=this.calculateCameraOptionsFromTo(p,S,l.center,l.elevation);return{pitch:k.pitch,zoom:k.zoom}}return{}}_applyUpdatedTransform(l){const p=[];if(p.push((S=>this._elevateCameraIfInsideTerrain(S))),this.transformCameraUpdate&&p.push((S=>this.transformCameraUpdate(S))),!p.length)return;const C=l.clone();for(const S of p){const k=C.clone(),{center:K,zoom:N,roll:q,pitch:ie,bearing:ae,elevation:ye}=S(k);K&&k.setCenter(K),ye!==void 0&&k.setElevation(ye),N!==void 0&&k.setZoom(N),q!==void 0&&k.setRoll(q),ie!==void 0&&k.setPitch(ie),ae!==void 0&&k.setBearing(ae),C.apply(k)}this.transform.apply(C)}_fireMoveEvents(l){this.fire(new a.l("move",l)),this._zooming&&this.fire(new a.l("zoom",l)),this._rotating&&this.fire(new a.l("rotate",l)),this._pitching&&this.fire(new a.l("pitch",l)),this._rolling&&this.fire(new a.l("roll",l))}_afterEase(l,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const C=this._zooming,S=this._rotating,k=this._pitching,K=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,C&&this.fire(new a.l("zoomend",l)),S&&this.fire(new a.l("rotateend",l)),k&&this.fire(new a.l("pitchend",l)),K&&this.fire(new a.l("rollend",l)),this.fire(new a.l("moveend",l))}flyTo(l,p){if(!l.essential&&x.prefersReducedMotion){const Qt=a.Q(l,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Qt,p)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},l);const C=this._getTransformForUpdate(),S=C.bearing,k=C.pitch,K=C.roll,N=C.padding,q="bearing"in l?this._normalizeBearing(l.bearing,S):S,ie="pitch"in l?+l.pitch:k,ae="roll"in l?this._normalizeBearing(l.roll,K):K,ye="padding"in l?l.padding:C.padding,pe=a.P.convert(l.offset);let Se=C.centerPoint.add(pe);const Fe=C.screenPointToLocation(Se),Xe=this.cameraHelper.handleFlyTo(C,{bearing:q,pitch:ie,roll:ae,padding:ye,locationAtOffset:Fe,offsetAsPoint:pe,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let $e=l.curve;const tt=Math.max(C.width,C.height),it=tt/Xe.scaleOfZoom,ct=Xe.pixelPathLength;typeof Xe.scaleOfMinZoom=="number"&&($e=Math.sqrt(tt/Xe.scaleOfMinZoom/ct*2));const rt=$e*$e;function ht(Qt){const On=(it*it-tt*tt+(Qt?-1:1)*rt*rt*ct*ct)/(2*(Qt?it:tt)*rt*ct);return Math.log(Math.sqrt(On*On+1)-On)}function ft(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function ot(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}const St=ht(!1);let Wt=function(Qt){return ot(St)/ot(St+$e*Qt)},Ut=function(Qt){return tt*((ot(St)*(ft(On=St+$e*Qt)/ot(On))-ft(St))/rt)/ct;var On},jt=(ht(!0)-St)/$e;if(Math.abs(ct)<2e-6||!isFinite(jt)){if(Math.abs(tt-it)<1e-6)return this.easeTo(l,p);const Qt=it<tt?-1:1;jt=Math.abs(Math.log(it/tt))/$e,Ut=()=>0,Wt=On=>Math.exp(Qt*$e*On)}return l.duration="duration"in l?+l.duration:1e3*jt/("screenSpeed"in l?+l.screenSpeed/$e:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=S!==q,this._pitching=ie!==k,this._rolling=ae!==K,this._padding=!C.isPaddingEqual(ye),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Xe.targetCenter),this._ease((Qt=>{const On=Qt*jt,In=1/Wt(On),ln=Ut(On);this._rotating&&C.setBearing(a.C.number(S,q,Qt)),this._pitching&&C.setPitch(a.C.number(k,ie,Qt)),this._rolling&&C.setRoll(a.C.number(K,ae,Qt)),this._padding&&(C.interpolatePadding(N,ye,Qt),Se=C.centerPoint.add(pe)),Xe.easeFunc(Qt,In,ln,Se),this.terrain&&!l.freezeElevation&&this._updateElevation(Qt),this._applyUpdatedTransform(C),this._fireMoveEvents(p)}),(()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(p)}),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,p){var C;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const S=this._onEaseEnd;delete this._onEaseEnd,S.call(this,p)}return l||(C=this.handlers)===null||C===void 0||C.stop(!1),this}_ease(l,p,C){C.animate===!1||C.duration===0?(l(1),p()):(this._easeStart=R(),this._easeOptions=C,this._onEaseFrame=l,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,p){l=a.aO(l,-180,180);const C=Math.abs(l-p);return Math.abs(l-360-p)<C&&(l-=360),Math.abs(l+360-p)<C&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(l),this.transform.tileZoom):null}}const td={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Qa{constructor(l=td){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,p){const C=this._map._getUIString(`AttributionControl.${p}`);l.title=C,l.setAttribute("aria-label",C)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map((S=>typeof S!="string"?"":S))):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const p=this._map.style.sourceCaches;for(const S in p){const k=p[S];if(k.used||k.usedForTerrain){const K=k.getSource();K.attribution&&l.indexOf(K.attribution)<0&&l.push(K.attribution)}}l=l.filter((S=>String(S).trim())),l.sort(((S,k)=>S.length-k.length)),l=l.filter(((S,k)=>{for(let K=k+1;K<l.length;K++)if(l[K].indexOf(S)>=0)return!1;return!0}));const C=l.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,l.length?(this._innerContainer.innerHTML=P.sanitize(C),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class hh{constructor(l={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const C=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&C.classList.add("maplibregl-compact"):C.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const p=P.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ls{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p}remove(l){const p=this._currentlyRunning,C=p?this._queue.concat(p):this._queue;for(const S of C)if(S.id===l)return void(S.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const C of p)if(!C.cancelled&&(C.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ac=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class ll extends a.E{constructor(l){super(),this._lastTilesetChange=R(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,p){this.sourceCache.update(l,p),this._renderableTilesKeys=[];const C={};for(const S of Tn(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))C[S.key]=!0,this._renderableTilesKeys.push(S.key),this._tiles[S.key]||(S.terrainRttPosMatrix32f=new Float64Array(16),a.bZ(S.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[S.key]=new Ae(S,this.tileSize),this._lastTilesetChange=R());for(const S in this._tiles)C[S]||delete this._tiles[S]}freeRtt(l){for(const p in this._tiles){const C=this._tiles[p];(!l||C.tileID.equals(l)||C.tileID.isChildOf(l)||l.isChildOf(C.tileID))&&(C.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((l=>this.getTileByID(l)))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l,p){return p?this._getTerrainCoordsForTileRanges(l,p):this._getTerrainCoordsForRegularTile(l)}_getTerrainCoordsForRegularTile(l){const p={};for(const C of this._renderableTilesKeys){const S=this._tiles[C].tileID,k=l.clone(),K=a.ba();if(S.canonical.equals(l.canonical))a.bZ(K,0,a.$,a.$,0,0,1);else if(S.canonical.isChildOf(l.canonical)){const N=S.canonical.z-l.canonical.z,q=S.canonical.x-(S.canonical.x>>N<<N),ie=S.canonical.y-(S.canonical.y>>N<<N),ae=a.$>>N;a.bZ(K,0,ae,ae,0,0,1),a.M(K,K,[-q*ae,-ie*ae,0])}else{if(!l.canonical.isChildOf(S.canonical))continue;{const N=l.canonical.z-S.canonical.z,q=l.canonical.x-(l.canonical.x>>N<<N),ie=l.canonical.y-(l.canonical.y>>N<<N),ae=a.$>>N;a.bZ(K,0,a.$,a.$,0,0,1),a.M(K,K,[q*ae,ie*ae,0]),a.N(K,K,[1/2**N,1/2**N,0])}}k.terrainRttPosMatrix32f=new Float32Array(K),p[C]=k}return p}_getTerrainCoordsForTileRanges(l,p){const C={};for(const S of this._renderableTilesKeys){const k=this._tiles[S].tileID;if(!this._isWithinTileRanges(k,p))continue;const K=l.clone(),N=a.ba();if(k.canonical.z===l.canonical.z){const q=l.canonical.x-k.canonical.x,ie=l.canonical.y-k.canonical.y;a.bZ(N,0,a.$,a.$,0,0,1),a.M(N,N,[q*a.$,ie*a.$,0])}else if(k.canonical.z>l.canonical.z){const q=k.canonical.z-l.canonical.z,ie=k.canonical.x-(k.canonical.x>>q<<q),ae=k.canonical.y-(k.canonical.y>>q<<q),ye=l.canonical.x-(k.canonical.x>>q),pe=l.canonical.y-(k.canonical.y>>q),Se=a.$>>q;a.bZ(N,0,Se,Se,0,0,1),a.M(N,N,[-ie*Se+ye*a.$,-ae*Se+pe*a.$,0])}else{const q=l.canonical.z-k.canonical.z,ie=l.canonical.x-(l.canonical.x>>q<<q),ae=l.canonical.y-(l.canonical.y>>q<<q),ye=(l.canonical.x>>q)-k.canonical.x,pe=(l.canonical.y>>q)-k.canonical.y,Se=a.$<<q;a.bZ(N,0,Se,Se,0,0,1),a.M(N,N,[ie*a.$+ye*Se,ae*a.$+pe*Se,0])}K.terrainRttPosMatrix32f=new Float32Array(N),C[S]=K}return C}getSourceTile(l,p){const C=this.sourceCache._source;let S=l.overscaledZ-this.deltaZoom;if(S>C.maxzoom&&(S=C.maxzoom),S<C.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(S).key);let k=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!k||!k.dem)&&p)for(;S>=C.minzoom&&(!k||!k.dem);)k=this.sourceCache.getTileByID(l.scaledTo(S--).key);return k}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}_isWithinTileRanges(l,p){return p[l.canonical.z]&&l.canonical.x>=p[l.canonical.z].minTileX&&l.canonical.x<=p[l.canonical.z].maxTileX&&l.canonical.y>=p[l.canonical.z].minTileY&&l.canonical.y<=p[l.canonical.z].maxTileY}}class jf{constructor(l,p,C){this._meshCache={},this.painter=l,this.sourceCache=new ll(p),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,p,C,S=a.$){var k;if(!(p>=0&&p<S&&C>=0&&C<S))return 0;const K=this.getTerrainData(l),N=(k=K.tile)===null||k===void 0?void 0:k.dem;if(!N)return 0;const q=a.cs([],[p/S*a.$,C/S*a.$],K.u_terrain_matrix),ie=[q[0]*N.dim,q[1]*N.dim],ae=Math.floor(ie[0]),ye=Math.floor(ie[1]),pe=ie[0]-ae,Se=ie[1]-ye;return N.get(ae,ye)*(1-pe)*(1-Se)+N.get(ae+1,ye)*pe*(1-Se)+N.get(ae,ye+1)*(1-pe)*Se+N.get(ae+1,ye+1)*pe*Se}getElevationForLngLatZoom(l,p){if(!a.ct(p,l.wrap()))return 0;const{tileID:C,mercatorX:S,mercatorY:k}=this._getOverscaledTileIDFromLngLatZoom(l,p);return this.getElevation(C,S%a.$,k%a.$,a.$)}getElevation(l,p,C,S=a.$){return this.getDEMElevation(l,p,C,S)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const S=this.painter.context,k=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(S,k,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(S,new a.R({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ai([])}const p=this.sourceCache.getSourceTile(l,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const S=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new a.T(S,p.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),p.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const C=p&&p+p.tileID.key+l.key;if(C&&!this._demMatrixCache[C]){const S=this.sourceCache.sourceCache._source.maxzoom;let k=l.canonical.z-p.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=S?k=l.canonical.z-S:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const K=l.canonical.x-(l.canonical.x>>k<<k),N=l.canonical.y-(l.canonical.y>>k<<k),q=a.cu(new Float64Array(16),[1/(a.$<<k),1/(a.$<<k),0]);a.M(q,q,[K*a.$,N*a.$,0]),this._demMatrixCache[l.key]={matrix:q,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(l){const p=this.painter,C=p.width/devicePixelRatio,S=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(p.context,{width:C,height:S,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(p.context,{width:C,height:S,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(C,S,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,C,S))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let k=0,K=0;k<this._coordsTextureSize;k++)for(let N=0;N<this._coordsTextureSize;N++,K+=4)p[K+0]=255&N,p[K+1]=255&k,p[K+2]=N>>8<<4|k>>8,p[K+3]=0;const C=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),S=new a.T(l,C,l.gl.RGBA,{premultiply:!1});return S.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),C=this.painter.context,S=C.gl,k=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),K=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),N=Math.round(this.painter.height/devicePixelRatio);C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(k,N-K-1,1,1,S.RGBA,S.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null);const q=p[0]+(p[2]>>4<<8),ie=p[1]+((15&p[2])<<8),ae=this.coordsIndex[255-p[3]],ye=ae&&this.sourceCache.getTileByID(ae);if(!ye)return null;const pe=this._coordsTextureSize,Se=(1<<ye.tileID.canonical.z)*pe;return new a.a1((ye.tileID.canonical.x*pe+q)/Se+ye.tileID.wrap,(ye.tileID.canonical.y*pe+ie)/Se,this.getElevation(ye.tileID,q,ie,pe))}depthAtPoint(l){const p=new Uint8Array(4),C=this.painter.context,S=C.gl;return C.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),S.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,p),C.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(l){var p;const C=((p=this.painter.style.projection)===null||p===void 0?void 0:p.transitionState)>0,S=C&&l.canonical.y===0,k=C&&l.canonical.y===(1<<l.canonical.z)-1,K=`m_${S?"n":""}_${k?"s":""}`;if(this._meshCache[K])return this._meshCache[K];const N=this.painter.context,q=new a.cv,ie=new a.aN,ae=this.meshSize,ye=a.$/ae,pe=ae*ae;for(let ot=0;ot<=ae;ot++)for(let St=0;St<=ae;St++)q.emplaceBack(St*ye,ot*ye,0);for(let ot=0;ot<pe;ot+=ae+1)for(let St=0;St<ae;St++)ie.emplaceBack(St+ot,ae+St+ot+1,ae+St+ot+2),ie.emplaceBack(St+ot,ae+St+ot+2,St+ot+1);const Se=q.length,Fe=Se+(ae+1),Xe=(ae+1)*ae,$e=S?a.bh:0,tt=S?0:1,it=k?a.bi:a.$,ct=k?0:1;for(let ot=0;ot<=ae;ot++)q.emplaceBack(ot*ye,$e,tt);for(let ot=0;ot<=ae;ot++)q.emplaceBack(ot*ye,it,ct);for(let ot=0;ot<ae;ot++)ie.emplaceBack(Xe+ot,Fe+ot,Fe+ot+1),ie.emplaceBack(Xe+ot,Fe+ot+1,Xe+ot+1),ie.emplaceBack(0+ot,Se+ot+1,Se+ot),ie.emplaceBack(0+ot,0+ot+1,Se+ot+1);const rt=q.length,ht=rt+2*(ae+1);for(const ot of[0,1])for(let St=0;St<=ae;St++)for(const Wt of[0,1])q.emplaceBack(ot*a.$,St*ye,Wt);for(let ot=0;ot<2*ae;ot+=2)ie.emplaceBack(rt+ot,rt+ot+1,rt+ot+3),ie.emplaceBack(rt+ot,rt+ot+3,rt+ot+2),ie.emplaceBack(ht+ot,ht+ot+3,ht+ot+1),ie.emplaceBack(ht+ot,ht+ot+2,ht+ot+3);const ft=new rl(N.createVertexBuffer(q,Ac.members),N.createIndexBuffer(ie),a.aM.simpleSegment(0,0,q.length,ie.length));return this._meshCache[K]=ft,ft}getMeshFrameDelta(l){return 2*Math.PI*a.bu/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,p){var C;const{tileID:S}=this._getOverscaledTileIDFromLngLatZoom(l,p);return(C=this.getMinMaxElevation(S).minElevation)!==null&&C!==void 0?C:0}getMinMaxElevation(l){const p=this.getTerrainData(l).tile,C={minElevation:null,maxElevation:null};return p&&p.dem&&(C.minElevation=p.dem.min*this.exaggeration,C.maxElevation=p.dem.max*this.exaggeration),C}_getOverscaledTileIDFromLngLatZoom(l,p){const C=a.a1.fromLngLat(l.wrap()),S=(1<<p)*a.$,k=C.x*S,K=C.y*S,N=Math.floor(k/a.$),q=Math.floor(K/a.$);return{tileID:new a.Z(p,0,p,N,q),mercatorX:k,mercatorY:K}}}class O1{constructor(l,p,C){this._context=l,this._size=p,this._tileSize=C,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),C=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return C.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(C.texture),{id:l,fbo:p,texture:C,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((p=>l.id!==p)),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((l=>!l.inUse))===!1}}const Cl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Pu{constructor(l,p){this.painter=l,this.terrain=p,this.pool=new O1(l.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter((C=>!l._layers[C].isHidden(p))),this._coordsAscending={};for(const C in l.sourceCaches){this._coordsAscending[C]={};const S=l.sourceCaches[C].getVisibleCoordinates(),k=l.sourceCaches[C].getSource(),K=k instanceof Kn?k.terrainTileRanges:null;for(const N of S){const q=this.terrain.sourceCache.getTerrainCoords(N,K);for(const ie in q)this._coordsAscending[C][ie]||(this._coordsAscending[C][ie]=[]),this._coordsAscending[C][ie].push(q[ie])}}this._coordsAscendingStr={};for(const C of l._order){const S=l._layers[C],k=S.source;if(Cl[S.type]&&!this._coordsAscendingStr[k]){this._coordsAscendingStr[k]={};for(const K in this._coordsAscending[k])this._coordsAscendingStr[k][K]=this._coordsAscending[k][K].map((N=>N.key)).sort().join()}}for(const C of this._renderableTiles)for(const S in this._coordsAscendingStr){const k=this._coordsAscendingStr[S][C.tileID.key];k&&k!==C.rttCoords[S]&&(C.rtt=[])}}renderLayer(l,p){if(l.isHidden(this.painter.transform.zoom))return!1;const C=Object.assign(Object.assign({},p),{isRenderingToTexture:!0}),S=l.type,k=this.painter,K=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(Cl[S]&&(this._prevType&&Cl[this._prevType]||this._stacks.push([]),this._prevType=S,this._stacks[this._stacks.length-1].push(l.id),!K))return!0;if(Cl[this._prevType]||Cl[S]&&K){this._prevType=S;const N=this._stacks.length-1,q=this._stacks[N]||[];for(const ie of this._renderableTiles){if(this.pool.isFull()&&(EA(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ie),ie.rtt[N]){const ye=this.pool.getObjectForId(ie.rtt[N].id);if(ye.stamp===ie.rtt[N].stamp){this.pool.useObject(ye);continue}}const ae=this.pool.getOrCreateFreeObject();this.pool.useObject(ae),this.pool.stampObject(ae),ie.rtt[N]={id:ae.id,stamp:ae.stamp},k.context.bindFramebuffer.set(ae.fbo.framebuffer),k.context.clear({color:a.bf.transparent,stencil:0}),k.currentStencilSource=void 0;for(let ye=0;ye<q.length;ye++){const pe=k.style._layers[q[ye]],Se=pe.source?this._coordsAscending[pe.source][ie.tileID.key]:[ie.tileID];k.context.viewport.set([0,0,ae.fbo.width,ae.fbo.height]),k._renderTileClippingMasks(pe,Se,!0),k.renderLayer(k,k.style.sourceCaches[pe.source],pe,Se,C),pe.source&&(ie.rttCoords[pe.source]=this._coordsAscendingStr[pe.source][ie.tileID.key])}}return EA(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects(),Cl[S]}return!1}}const Os={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},us=c,uo={hash:!1,interactive:!0,bearingSnap:7,attributionControl:td,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Sr={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class So{constructor(l,p,C=!1){this.mousedown=k=>{this.startMove(k,P.mousePos(this.element,k)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=k=>{this.move(k,P.mousePos(this.element,k))},this.mouseup=k=>{this._rotatePitchHandler.dragEnd(k),this.offTemp()},this.touchstart=k=>{k.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,k.targetTouches)[0],this.startMove(k,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=k=>{k.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,k.targetTouches)[0],this.move(k,this._lastPos))},this.touchend=k=>{k.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=p;const S=new Xh;this._rotatePitchHandler=new aA({clickTolerance:3,move:(k,K)=>{const N=p.getBoundingClientRect(),q=new a.P((N.bottom-N.top)/2,(N.right-N.left)/2);return{bearingDelta:a.cn(new a.P(k.x,K.y),K,q),pitchDelta:C?-.5*(K.y-k.y):void 0}},moveStateManager:S,enable:!0,assignEvents:()=>{}}),this.map=l,P.addEventListener(p,"mousedown",this.mousedown),P.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(p,"touchcancel",this.reset)}startMove(l,p){this._rotatePitchHandler.dragStart(l,p),P.disableDrag()}move(l,p){const C=this.map,{bearingDelta:S,pitchDelta:k}=this._rotatePitchHandler.dragMove(l,p)||{};S&&C.setBearing(C.getBearing()+S),k&&C.setPitch(C.getPitch()+k)}off(){const l=this.element;P.removeEventListener(l,"mousedown",this.mousedown),P.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let ko;function nd(B,l,p,C=!1){if(C||!p.getCoveringTilesDetailsProvider().allowWorldCopies())return B?.wrap();const S=new a.S(B.lng,B.lat);if(B=new a.S(B.lng,B.lat),l){const k=new a.S(B.lng-360,B.lat),K=new a.S(B.lng+360,B.lat),N=p.locationToScreenPoint(B).distSqr(l);p.locationToScreenPoint(k).distSqr(l)<N?B=k:p.locationToScreenPoint(K).distSqr(l)<N&&(B=K)}for(;Math.abs(B.lng-p.center.lng)>180;){const k=p.locationToScreenPoint(B);if(k.x>=0&&k.y>=0&&k.x<=p.width&&k.y<=p.height)break;B.lng>p.center.lng?B.lng-=360:B.lng+=360}return B.lng!==S.lng&&p.isPointOnMapSurface(p.locationToScreenPoint(B))?B:S}const IA={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kA(B,l,p){const C=B.classList;for(const S in IA)C.remove(`maplibregl-${p}-anchor-${S}`);C.add(`maplibregl-${p}-anchor-${l}`)}class TA extends a.E{constructor(l){if(super(),this._onKeyPress=p=>{const C=p.code,S=p.charCode||p.keyCode;C!=="Space"&&C!=="Enter"&&S!==32&&S!==13||this.togglePopup()},this._onMapClick=p=>{const C=p.originalEvent.target,S=this._element;this._popup&&(C===S||S.contains(C))&&this.togglePopup()},this._update=p=>{if(!this._map)return;const C=this._map.loaded()&&!this._map.isMoving();(p?.type==="terrain"||p?.type==="render"&&!C)&&this._map.once("render",this._update),this._lngLat=nd(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(S=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${IA[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${k} ${S}`),x.frameAsync(new AbortController).then((()=>{this._updateOpacity(p&&p.type==="moveend")})).catch((()=>{}))},this._onMove=p=>{if(!this._isDragging){const C=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(l?.opacity,l?.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const p=P.createNS("http://www.w3.org/2000/svg","svg"),C=41,S=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${C}px`),p.setAttributeNS(null,"width",`${S}px`),p.setAttributeNS(null,"viewBox",`0 0 ${S} ${C}`);const k=P.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const K=P.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill-rule","nonzero");const N=P.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"transform","translate(3.0, 29.0)"),N.setAttributeNS(null,"fill","#000000");const q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const tt of q){const it=P.createNS("http://www.w3.org/2000/svg","ellipse");it.setAttributeNS(null,"opacity","0.04"),it.setAttributeNS(null,"cx","10.5"),it.setAttributeNS(null,"cy","5.80029008"),it.setAttributeNS(null,"rx",tt.rx),it.setAttributeNS(null,"ry",tt.ry),N.appendChild(it)}const ie=P.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"fill",this._color);const ae=P.createNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ie.appendChild(ae);const ye=P.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"fill","#000000");const pe=P.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ye.appendChild(pe);const Se=P.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Se.setAttributeNS(null,"fill","#FFFFFF");const Fe=P.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Xe=P.createNS("http://www.w3.org/2000/svg","circle");Xe.setAttributeNS(null,"fill","#000000"),Xe.setAttributeNS(null,"opacity","0.25"),Xe.setAttributeNS(null,"cx","5.5"),Xe.setAttributeNS(null,"cy","5.5"),Xe.setAttributeNS(null,"r","5.4999962");const $e=P.createNS("http://www.w3.org/2000/svg","circle");$e.setAttributeNS(null,"fill","#FFFFFF"),$e.setAttributeNS(null,"cx","5.5"),$e.setAttributeNS(null,"cy","5.5"),$e.setAttributeNS(null,"r","5.4999962"),Fe.appendChild(Xe),Fe.appendChild($e),K.appendChild(N),K.appendChild(ie),K.appendChild(ye),K.appendChild(Se),K.appendChild(Fe),p.appendChild(K),p.setAttributeNS(null,"height",C*this._scale+"px"),p.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(p=>{p.preventDefault()})),this._element.addEventListener("mousedown",(p=>{p.preventDefault()})),kA(this._element,this._anchor,"marker"),l&&l.className)for(const p of l.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.S.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const S=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var p,C;const S=(p=this._map)===null||p===void 0?void 0:p.terrain,k=this._map.transform.isLocationOccluded(this._lngLat);if(!S||k){const Se=k?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Se&&(this._element.style.opacity=Se))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const K=this._map,N=K.terrain.depthAtPoint(this._pos),q=K.terrain.getElevationForLngLatZoom(this._lngLat,K.transform.tileZoom);if(K.transform.lngLatToCameraDepth(this._lngLat,q)-N<.006)return void(this._element.style.opacity=this._opacity);const ie=-this._offset.y/K.transform.pixelsPerMeter,ae=Math.sin(K.getPitch()*Math.PI/180)*ie,ye=K.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),pe=K.transform.lngLatToCameraDepth(this._lngLat,q+ae)-ye>.006;!((C=this._popup)===null||C===void 0)&&C.isOpen()&&pe&&this._popup.remove(),this._element.style.opacity=pe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,p){return(this._opacity===void 0||l===void 0&&p===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const id={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let hc=0,Gd=!1;const ms={maxWidth:100,unit:"metric"};function Qd(B,l,p){const C=p&&p.maxWidth||100,S=B._container.clientHeight/2,k=B._container.clientWidth/2,K=B.unproject([k-C/2,S]),N=B.unproject([k+C/2,S]),q=Math.round(B.project(N).x-B.project(K).x),ie=Math.min(C,q,B._container.clientWidth),ae=K.distanceTo(N);if(p&&p.unit==="imperial"){const ye=3.2808*ae;ye>5280?RA(l,ie,ye/5280,B._getUIString("ScaleControl.Miles")):RA(l,ie,ye,B._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?RA(l,ie,ae/1852,B._getUIString("ScaleControl.NauticalMiles")):ae>=1e3?RA(l,ie,ae/1e3,B._getUIString("ScaleControl.Kilometers")):RA(l,ie,ae,B._getUIString("ScaleControl.Meters"))}function RA(B,l,p,C){const S=(function(k){const K=Math.pow(10,`${Math.floor(k)}`.length-1);let N=k/K;return N=N>=10?10:N>=5?5:N>=3?3:N>=2?2:N>=1?1:(function(q){const ie=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*ie)/ie})(N),K*N})(p);B.style.width=l*(S/p)+"px",B.innerHTML=`${S}&nbsp;${C}`}const Tp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Wd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hm(B){if(B){if(typeof B=="number"){const l=Math.round(Math.abs(B)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,B),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-B),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(B,0),right:new a.P(-B,0)}}if(B instanceof a.P||Array.isArray(B)){const l=a.P.convert(B);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(B.center||[0,0]),top:a.P.convert(B.top||[0,0]),"top-left":a.P.convert(B["top-left"]||[0,0]),"top-right":a.P.convert(B["top-right"]||[0,0]),bottom:a.P.convert(B.bottom||[0,0]),"bottom-left":a.P.convert(B["bottom-left"]||[0,0]),"bottom-right":a.P.convert(B["bottom-right"]||[0,0]),left:a.P.convert(B.left||[0,0]),right:a.P.convert(B.right||[0,0])}}return Hm(new a.P(0,0))}const qd=c;s.AJAXError=a.cz,s.Event=a.l,s.Evented=a.E,s.LngLat=a.S,s.MercatorCoordinate=a.a1,s.Point=a.P,s.addProtocol=a.cA,s.config=a.a,s.removeProtocol=a.cB,s.AttributionControl=Qa,s.BoxZoomHandler=Hh,s.CanvasSource=Cn,s.CooperativeGesturesHandler=uh,s.DoubleClickZoomHandler=wo,s.DragPanHandler=ed,s.DragRotateHandler=Ff,s.EdgeInsets=Ko,s.FullscreenControl=class extends a.E{constructor(B={}){super(),this._onFullscreenChange=()=>{var l;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=p?.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,B&&B.container&&(B.container instanceof HTMLElement?this._container=B.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const B=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",B).setAttribute("aria-hidden","true"),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=xi,s.GeolocateControl=class extends a.E{constructor(B){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",l)),this._finish()}},this._updateCamera=l=>{const p=new a.S(l.coords.longitude,l.coords.latitude),C=l.coords.accuracy,S=this._map.getBearing(),k=a.e({bearing:S},this.options.fitBoundsOptions),K=Rt.fromLngLat(p,C);this._map.fitBounds(K,k,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const p=new a.S(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=l.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=l=>{if(this._map){if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&Gd)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new TA({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new TA({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(p=>{const C=p?.[0]instanceof ResizeObserverEntry;p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||C||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},id,B)}onAdd(B){return this._map=B,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(l=!1){if(ko!==void 0&&!l)return ko;if(window.navigator.permissions===void 0)return ko=!!window.navigator.geolocation,ko;try{ko=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ko=!!window.navigator.geolocation}return ko}))})().then((l=>this._finishSetupUI(l))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,hc=0,Gd=!1}_isOutOfMapMaxBounds(B){const l=this._map.getMaxBounds(),p=B.coords;return l&&(p.longitude<l.getWest()||p.longitude>l.getEast()||p.latitude<l.getSouth()||p.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const B=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&B))return;const l=this._map.project(B),p=this._map.unproject([l.x+100,l.y]),C=B.distanceTo(p)/100,S=2*this._accuracy/C;this._circleElement.style.width=`${S.toFixed(2)}px`,this._circleElement.style.height=`${S.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":hc--,Gd=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let B;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),hc++,hc>1?(B={maximumAge:6e5,timeout:0},Gd=!0):(B=this.options.positionOptions,Gd=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,B)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.GlobeControl=class{constructor(){this._toggleProjection=()=>{var B;const l=(B=this._map.getProjection())===null||B===void 0?void 0:B.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var B;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((B=this._map.getProjection())===null||B===void 0?void 0:B.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(B){return this._map=B,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},s.Hash=uc,s.ImageSource=Kn,s.KeyboardHandler=v0,s.LngLatBounds=Rt,s.LogoControl=hh,s.Map=class extends bi{constructor(B){var l,p;a.cw.mark(a.cx.create);const C=Object.assign(Object.assign(Object.assign({},uo),B),{canvasContextAttributes:Object.assign(Object.assign({},uo.canvasContextAttributes),B.canvasContextAttributes)});if(C.minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const S=new os,k=new ji;if(C.minZoom!==void 0&&S.setMinZoom(C.minZoom),C.maxZoom!==void 0&&S.setMaxZoom(C.maxZoom),C.minPitch!==void 0&&S.setMinPitch(C.minPitch),C.maxPitch!==void 0&&S.setMaxPitch(C.maxPitch),C.renderWorldCopies!==void 0&&S.setRenderWorldCopies(C.renderWorldCopies),C.transformConstrain!==null&&S.setConstrain(C.transformConstrain),super(S,k,{bearingSnap:C.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ls,this._controls=[],this._mapId=a.a7(),this._contextLost=N=>{N.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:N}))},this._contextRestored=N=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:N}))},this._onMapScroll=N=>{if(N.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},C.canvasContextAttributes),this._trackResize=C.trackResize===!0,this._bearingSnap=C.bearingSnap,this._centerClampedToGround=C.centerClampedToGround,this._refreshExpiredTiles=C.refreshExpiredTiles===!0,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions===!0,this._collectResourceTiming=C.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Os),C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this.transformConstrain=C.transformConstrain,this.cancelPendingTileRequestsWhileZooming=C.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=$.addThrottleControl((()=>this.isMoving())),this._requestManager=new G(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let N=!1;const q=kp((ie=>{this._trackResize&&!this._removed&&(this.resize(ie),this.redraw())}),50);this._resizeObserver=new ResizeObserver((ie=>{N?q(ie):N=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ti(this,C),this._hash=C.hash&&new uc(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,roll:C.roll}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,a.e({},C.fitBoundsOptions,{duration:0}))));const K=typeof C.style=="string"||((p=(l=C.style)===null||l===void 0?void 0:l.projection)===null||p===void 0?void 0:p.type)!=="globe";this.resize(null,K),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Qa(typeof C.attributionControl=="boolean"?void 0:C.attributionControl)),C.maplibreLogo&&this.addControl(new hh,C.logoPosition),this.on("style.load",(()=>{if(K||this._resizeTransform(),this.transform.unmodified){const N=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(N)}})),this.on("data",(N=>{this._update(N.dataType==="style"),this.fire(new a.l(`${N.dataType}data`,N))})),this.on("dataloading",(N=>{this.fire(new a.l(`${N.dataType}dataloading`,N))})),this.on("dataabort",(N=>{this.fire(new a.l("sourcedataabort",N))}))}_getMapId(){return this._mapId}setGlobalStateProperty(B,l){return this.style.setGlobalStateProperty(B,l),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(B,l){if(l===void 0&&(l=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=B.onAdd(this);this._controls.push(B);const C=this._controlPositions[l];return l.indexOf("bottom")!==-1?C.insertBefore(p,C.firstChild):C.appendChild(p),this}removeControl(B){if(!B||!B.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(B);return l>-1&&this._controls.splice(l,1),B.onRemove(this),this}hasControl(B){return this._controls.indexOf(B)>-1}coveringTiles(B){return Tn(this.transform,B)}calculateCameraOptionsFromTo(B,l,p,C){return C==null&&this.terrain&&(C=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(B,l,p,C)}resize(B,l=!0){const[p,C]=this._containerDimensions(),S=this._getClampedPixelRatio(p,C);if(this._resizeCanvas(p,C,S),this.painter.resize(p,C,S),this.painter.overLimit()){const K=this.painter.context.gl;this._maxCanvasSize=[K.drawingBufferWidth,K.drawingBufferHeight];const N=this._getClampedPixelRatio(p,C);this._resizeCanvas(p,C,N),this.painter.resize(p,C,N)}this._resizeTransform(l);const k=!this._moving;return k&&(this.stop(),this.fire(new a.l("movestart",B)).fire(new a.l("move",B))),this.fire(new a.l("resize",B)),k&&this.fire(new a.l("moveend",B)),this}_resizeTransform(B=!0){var l;const[p,C]=this._containerDimensions();this.transform.resize(p,C,B),(l=this._requestedCameraState)===null||l===void 0||l.resize(p,C,B)}_getClampedPixelRatio(B,l){const{0:p,1:C}=this._maxCanvasSize,S=this.getPixelRatio(),k=B*S,K=l*S;return Math.min(k>p?p/k:1,K>C?C/K:1)*S}getPixelRatio(){var B;return(B=this._overridePixelRatio)!==null&&B!==void 0?B:devicePixelRatio}setPixelRatio(B){this._overridePixelRatio=B,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(B){return this.transform.setMaxBounds(Rt.convert(B)),this._update()}setMinZoom(B){if((B=B??-2)>=-2&&B<=this.transform.maxZoom)return this.transform.setMinZoom(B),this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(B){if((B=B??22)>=this.transform.minZoom)return this.transform.setMaxZoom(B),this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(B){if((B=B??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.setMinPitch(B),this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(B){if((B=B??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(B>=this.transform.minPitch)return this.transform.setMaxPitch(B),this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(B){return this.transform.setRenderWorldCopies(B),this._update()}setTransformConstrain(B){return this.transform.setConstrain(B),this._update()}project(B){return this.transform.locationToScreenPoint(a.S.convert(B),this.style&&this.terrain)}unproject(B){return this.transform.screenPointToLocation(a.P.convert(B),this.terrain)}isMoving(){var B;return this._moving||((B=this.handlers)===null||B===void 0?void 0:B.isMoving())}isZooming(){var B;return this._zooming||((B=this.handlers)===null||B===void 0?void 0:B.isZooming())}isRotating(){var B;return this._rotating||((B=this.handlers)===null||B===void 0?void 0:B.isRotating())}_createDelegatedListener(B,l,p){if(B==="mouseenter"||B==="mouseover"){let C=!1;return{layers:l,listener:p,delegates:{mousemove:k=>{const K=l.filter((q=>this.getLayer(q))),N=K.length!==0?this.queryRenderedFeatures(k.point,{layers:K}):[];N.length?C||(C=!0,p.call(this,new Fs(B,this,k.originalEvent,{features:N}))):C=!1},mouseout:()=>{C=!1}}}}if(B==="mouseleave"||B==="mouseout"){let C=!1;return{layers:l,listener:p,delegates:{mousemove:K=>{const N=l.filter((q=>this.getLayer(q)));(N.length!==0?this.queryRenderedFeatures(K.point,{layers:N}):[]).length?C=!0:C&&(C=!1,p.call(this,new Fs(B,this,K.originalEvent)))},mouseout:K=>{C&&(C=!1,p.call(this,new Fs(B,this,K.originalEvent)))}}}}{const C=S=>{const k=l.filter((N=>this.getLayer(N))),K=k.length!==0?this.queryRenderedFeatures(S.point,{layers:k}):[];K.length&&(S.features=K,p.call(this,S),delete S.features)};return{layers:l,listener:p,delegates:{[B]:C}}}}_saveDelegatedListener(B,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(l)}_removeDelegatedListener(B,l,p){if(!this._delegatedListeners||!this._delegatedListeners[B])return;const C=this._delegatedListeners[B];for(let S=0;S<C.length;S++){const k=C[S];if(k.listener===p&&k.layers.length===l.length&&k.layers.every((K=>l.includes(K)))){for(const K in k.delegates)this.off(K,k.delegates[K]);return void C.splice(S,1)}}}on(B,l,p){if(p===void 0)return super.on(B,l);const C=typeof l=="string"?[l]:l,S=this._createDelegatedListener(B,C,p);this._saveDelegatedListener(B,S);for(const k in S.delegates)this.on(k,S.delegates[k]);return{unsubscribe:()=>{this._removeDelegatedListener(B,C,p)}}}once(B,l,p){if(p===void 0)return super.once(B,l);const C=typeof l=="string"?[l]:l,S=this._createDelegatedListener(B,C,p);for(const k in S.delegates){const K=S.delegates[k];S.delegates[k]=(...N)=>{this._removeDelegatedListener(B,C,p),K(...N)}}this._saveDelegatedListener(B,S);for(const k in S.delegates)this.once(k,S.delegates[k]);return this}off(B,l,p){return p===void 0?super.off(B,l):(this._removeDelegatedListener(B,typeof l=="string"?[l]:l,p),this)}queryRenderedFeatures(B,l){if(!this.style)return[];let p;const C=B instanceof a.P||Array.isArray(B),S=C?B:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(C?{}:B)||{},S instanceof a.P||typeof S[0]=="number")p=[a.P.convert(S)];else{const k=a.P.convert(S[0]),K=a.P.convert(S[1]);p=[k,new a.P(K.x,k.y),K,new a.P(k.x,K.y),k]}return this.style.queryRenderedFeatures(p,l,this.transform)}querySourceFeatures(B,l){return this.style.querySourceFeatures(B,l)}setStyle(B,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(B,l))}setTransformRequest(B){return this._requestManager.setTransformRequest(B),this}_getUIString(B){const l=this._locale[B];if(l==null)throw new Error(`Missing UI string '${B}'`);return l}_updateStyle(B,l){var p,C;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(B,l)));const S=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!B)),B?(this.style=new Dd(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B,l,S):this.style.loadJSON(B,l,S),this):((C=(p=this.style)===null||p===void 0?void 0:p.projection)===null||C===void 0||C.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Dd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(B,l){if(typeof B=="string"){const p=this._requestManager.transformRequest(B,"Style");a.j(p,new AbortController).then((C=>{this._updateDiff(C.data,l)})).catch((C=>{C&&this.fire(new a.k(C))}))}else typeof B=="object"&&this._updateDiff(B,l)}_updateDiff(B,l){try{this.style.setState(B,l)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(B,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(B,l){return this._lazyInitEmptyStyle(),this.style.addSource(B,l),this._update(!0)}isSourceLoaded(B){const l=this.style&&this.style.sourceCaches[B];if(l!==void 0)return l.loaded();this.fire(new a.k(new Error(`There is no source with ID '${B}'`)))}setTerrain(B){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),B){const l=this.style.sourceCaches[B.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${B.source}`);this.terrain===null&&l.reload();for(const p in this.style._layers){const C=this.style._layers[p];C.type==="hillshade"&&C.source===B.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),C.type==="color-relief"&&C.source===B.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new jf(this.painter,l,B),this.painter.renderToTexture=new Pu(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=p=>{var C;p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==B.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((C=p.source)===null||C===void 0?void 0:C.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:B})),this}getTerrain(){var B,l;return(l=(B=this.terrain)===null||B===void 0?void 0:B.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const B=this.style&&this.style.sourceCaches;for(const l in B){const p=B[l]._tiles;for(const C in p){const S=p[C];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}removeSource(B){return this.style.removeSource(B),this._update(!0)}getSource(B){return this.style.getSource(B)}setSourceTileLodParams(B,l,p){if(p){const C=this.getSource(p);if(!C)throw new Error(`There is no source with ID "${p}", cannot set LOD parameters`);C.calculateTileZoom=dt(Math.max(1,B),Math.max(1,l))}else for(const C in this.style.sourceCaches)this.style.sourceCaches[C].getSource().calculateTileZoom=dt(Math.max(1,B),Math.max(1,l));return this._update(!0),this}refreshTiles(B,l){const p=this.style.sourceCaches[B];if(!p)throw new Error(`There is no source cache with ID "${B}", cannot refresh tile`);l===void 0?p.reload(!0):p.refreshTiles(l.map((C=>new a.a4(C.z,C.x,C.y))))}addImage(B,l,p={}){const{pixelRatio:C=1,sdf:S=!1,stretchX:k,stretchY:K,content:N,textFitWidth:q,textFitHeight:ie}=p;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ae,height:ye,data:pe}=l,Se=l;return this.style.addImage(B,{data:new a.R({width:ae,height:ye},new Uint8Array(pe)),pixelRatio:C,stretchX:k,stretchY:K,content:N,textFitWidth:q,textFitHeight:ie,sdf:S,version:0,userImage:Se}),Se.onAdd&&Se.onAdd(this,B),this}}{const{width:ae,height:ye,data:pe}=x.getImageData(l);this.style.addImage(B,{data:new a.R({width:ae,height:ye},pe),pixelRatio:C,stretchX:k,stretchY:K,content:N,textFitWidth:q,textFitHeight:ie,sdf:S,version:0})}}updateImage(B,l){const p=this.style.getImage(B);if(!p)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=l instanceof HTMLImageElement||a.b(l)?x.getImageData(l):l,{width:S,height:k,data:K}=C;if(S===void 0||k===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==p.data.width||k!==p.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const N=!(l instanceof HTMLImageElement||a.b(l));return p.data.replace(K,N),this.style.updateImage(B,p),this}getImage(B){return this.style.getImage(B)}hasImage(B){return B?!!this.style.getImage(B):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(B){this.style.removeImage(B)}loadImage(B){return $.getImage(this._requestManager.transformRequest(B,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(B,l){return this._lazyInitEmptyStyle(),this.style.addLayer(B,l),this._update(!0)}moveLayer(B,l){return this.style.moveLayer(B,l),this._update(!0)}removeLayer(B){return this.style.removeLayer(B),this._update(!0)}getLayer(B){return this.style.getLayer(B)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(B,l,p){return this.style.setLayerZoomRange(B,l,p),this._update(!0)}setFilter(B,l,p={}){return this.style.setFilter(B,l,p),this._update(!0)}getFilter(B){return this.style.getFilter(B)}setPaintProperty(B,l,p,C={}){return this.style.setPaintProperty(B,l,p,C),this._update(!0)}getPaintProperty(B,l){return this.style.getPaintProperty(B,l)}setLayoutProperty(B,l,p,C={}){return this.style.setLayoutProperty(B,l,p,C),this._update(!0)}getLayoutProperty(B,l){return this.style.getLayoutProperty(B,l)}setGlyphs(B,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(B,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(B,l,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(B,l,p,(C=>{C||this._update(!0)})),this}removeSprite(B){return this._lazyInitEmptyStyle(),this.style.removeSprite(B),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(B,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(B,l,(p=>{p||this._update(!0)})),this}setLight(B,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(B,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(B,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(B,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(B,l){return this.style.setFeatureState(B,l),this._update()}removeFeatureState(B,l){return this.style.removeFeatureState(B,l),this._update()}getFeatureState(B){return this.style.getFeatureState(B)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let B=0,l=0;return this._container&&(B=this._container.clientWidth||400,l=this._container.clientHeight||300),[B,l]}_setupContainer(){const B=this._container;B.classList.add("maplibregl-map");const l=this._canvasContainer=P.create("div","maplibregl-canvas-container",B);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),C=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],C);const S=this._controlContainer=P.create("div","maplibregl-control-container",B),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((K=>{k[K]=P.create("div",`maplibregl-ctrl-${K} `,S)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(B,l,p){this._canvas.width=Math.floor(p*B),this._canvas.height=Math.floor(p*l),this._canvas.style.width=`${B}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const B=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",(C=>{l={requestedAttributes:B},C&&(l.statusMessage=C.statusMessage,l.type=C.type)}),{once:!0});let p=null;if(p=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,B):this._canvas.getContext("webgl2",B)||this._canvas.getContext("webgl",B),!p){const C="Failed to initialize WebGL";throw l?(l.message=C,new Error(JSON.stringify(l))):new Error(C)}this.painter=new BA(p,this.transform),z.testSupport(p)}migrateProjection(B,l){super.migrateProjection(B,l),this.painter.transform=B,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(B){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(B){return this._update(),this._renderTaskQueue.add(B)}_cancelRenderFrame(B){this._renderTaskQueue.remove(B)}_render(B){var l,p,C,S,k;const K=this._idleTriggered?this._fadeDuration:0,N=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),this._removed)return;let q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ye=this.transform.zoom,pe=R();this.style.zoomHistory.update(ye,pe);const Se=new a.F(ye,{now:pe,fadeDuration:K,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Fe=Se.crossFadingFactor();Fe===1&&Fe===this._crossFadingFactor||(q=!0,this._crossFadingFactor=Fe),this.style.update(Se)}const ie=((p=this.style.projection)===null||p===void 0?void 0:p.transitionState)>0!==N;(C=this.style.projection)===null||C===void 0||C.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((S=this.style.projection)===null||S===void 0?void 0:S.transitionState,(k=this.style.projection)===null||k===void 0?void 0:k.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ie)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,K,this._crossSourceCollisions,ie),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:K,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ae=this._sourcesDirty||this._styleDirty||this._placementDirty;return ae||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||ae||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var B;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(B=this._resizeObserver)===null||B===void 0||B.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l?.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,x.frame(this._frameRequest,(B=>{a.cw.frame(B),this._frameRequest=null;try{this._render(B)}catch(l){if(!a.cy(l)&&!(function(p){return p.message===m0})(l))throw l}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())}get showPadding(){return!!this._showPadding}set showPadding(B){this._showPadding!==B&&(this._showPadding=B,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())}get repaint(){return!!this._repaint}set repaint(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(B){this._vertices=B,this._update()}get version(){return us}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(B){return this._lazyInitEmptyStyle(),this.style.setProjection(B),this._update(!0)}},s.MapMouseEvent=Fs,s.MapTouchEvent=Ia,s.MapWheelEvent=Nl,s.Marker=TA,s.NavigationControl=class{constructor(B){this._updateZoomButtons=()=>{const l=this._map.getZoom(),p=l===this._map.getMaxZoom(),C=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,p)=>{const C=this._map._getUIString(`NavigationControl.${p}`);l.title=C,l.setAttribute("aria-label",C)},this.options=a.e({},Sr,B),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(l=>this._map.zoomIn({},{originalEvent:l}))),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(l=>this._map.zoomOut({},{originalEvent:l}))),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})})),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new So(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(B,l){const p=P.create("button",B,this._container);return p.type="button",p.addEventListener("click",l),p}},s.Popup=class extends a.E{constructor(B){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const K of this.options.className.split(" "))this._container.classList.add(K);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=nd(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!l)return;const p=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let C=this.options.anchor;const S=Hm(this.options.offset);if(!C){const K=this._container.offsetWidth,N=this._container.offsetHeight;let q;q=p.y+S.bottom.y<N?["top"]:p.y>this._map.transform.height-N?["bottom"]:[],p.x<K/2?q.push("left"):p.x>this._map.transform.width-K/2&&q.push("right"),C=q.length===0?"bottom":q.join("-")}let k=p.add(S[C]);this.options.subpixelPositioning||(k=k.round()),P.setTransform(this._container,`${IA[C]} translate(${k.x}px,${k.y}px)`),kA(this._container,C,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Tp),B)}addTo(B){return this._map&&this.remove(),this._map=B,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(B){return this._lngLat=a.S.convert(B),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(B){return this.setDOMContent(document.createTextNode(B))}setHTML(B){const l=document.createDocumentFragment(),p=document.createElement("body");let C;for(p.innerHTML=B;C=p.firstChild,C;)l.appendChild(C);return this.setDOMContent(l)}getMaxWidth(){var B;return(B=this._container)===null||B===void 0?void 0:B.style.maxWidth}setMaxWidth(B){return this.options.maxWidth=B,this._update(),this}setDOMContent(B){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(B),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(B){return this._container&&this._container.classList.add(B),this}removeClassName(B){return this._container&&this._container.classList.remove(B),this}setOffset(B){return this.options.offset=B,this._update(),this}toggleClassName(B){if(this._container)return this._container.classList.toggle(B)}setSubpixelPositioning(B){this.options.subpixelPositioning=B}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const B=this._container.querySelector(Wd);B&&B.focus()}},s.RasterDEMTileSource=Qn,s.RasterTileSource=qn,s.ScaleControl=class{constructor(B){this._onMove=()=>{Qd(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,Qd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ms),B)}getDefaultPosition(){return"bottom-left"}onAdd(B){return this._map=B,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=al,s.Style=Dd,s.TerrainControl=class{constructor(B){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=B}onAdd(B){return this._map=B,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=Ru,s.TwoFingersTouchRotateHandler=Tu,s.TwoFingersTouchZoomHandler=zf,s.TwoFingersTouchZoomRotateHandler=pa,s.VectorTileSource=on,s.VideoSource=Un,s.addSourceType=(B,l)=>a._(void 0,void 0,void 0,(function*(){if(Dn(B))throw new Error(`A source type called "${B}" already exists.`);((p,C)=>{ei[p]=C})(B,l)})),s.clearPrewarmedResources=function(){const B=st;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(Ge),st=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.createTileMesh=Si,s.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return le().getRTLTextPluginStatus()},s.getVersion=function(){return qd},s.getWorkerCount=function(){return Te.workerCount},s.getWorkerUrl=function(){return a.a.WORKER_URL},s.importScriptInWorkers=function(B){return Oe().broadcast("IS",B)},s.isTimeFrozen=function(){return E.isFrozen()},s.prewarm=function(){Lt().acquire(Ge)},s.restoreNow=function(){E.restoreNow()},s.setMaxParallelImageRequests=function(B){a.a.MAX_PARALLEL_IMAGE_REQUESTS=B},s.setNow=function(B){E.setNow(B)},s.setRTLTextPlugin=function(B,l){return le().setRTLTextPlugin(B,l)},s.setWorkerCount=function(B){Te.workerCount=B},s.setWorkerUrl=function(B){a.a.WORKER_URL=B}}));var o=t;return o}))})(rw)),rw.exports}var che=uhe();const m_=Su(che);function nz(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(m){try{h(i.next(m))}catch(v){s(v)}}function c(m){try{h(i.throw(m))}catch(v){s(v)}}function h(m){m.done?o(m.value):r(m.value).then(a,c)}h((i=i.apply(n,[])).next())})}var F5=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function rZ(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var P2={exports:{}};P2.exports;var iz;function Ahe(){return iz||(iz=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",v="[object Date]",x="[object Error]",E="[object Function]",R="[object GeneratorFunction]",P="[object Map]",z="[object Number]",Q="[object Null]",Y="[object Object]",H="[object Promise]",Z="[object Proxy]",J="[object RegExp]",$="[object Set]",G="[object String]",oe="[object Symbol]",ue="[object Undefined]",xe="[object WeakMap]",ge="[object ArrayBuffer]",Ie="[object DataView]",Me="[object Float32Array]",ke="[object Float64Array]",je="[object Int8Array]",Be="[object Int16Array]",Ye="[object Int32Array]",At="[object Uint8Array]",yt="[object Uint8ClampedArray]",Le="[object Uint16Array]",De="[object Uint32Array]",Ge=/[\\^$.*+?()[\]{}|]/g,Te=/^\[object .+?Constructor\]$/,xt=/^(?:0|[1-9]\d*)$/,st={};st[Me]=st[ke]=st[je]=st[Be]=st[Ye]=st[At]=st[yt]=st[Le]=st[De]=!0,st[a]=st[c]=st[ge]=st[m]=st[Ie]=st[v]=st[x]=st[E]=st[P]=st[z]=st[Y]=st[J]=st[$]=st[G]=st[xe]=!1;var Tt=typeof F5=="object"&&F5&&F5.Object===Object&&F5,Lt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Tt||Lt||Function("return this")(),Oe=e&&!e.nodeType&&e,Ee=Oe&&!0&&n&&!n.nodeType&&n,Ve=Ee&&Ee.exports===Oe,mt=Ve&&Tt.process,pt=(function(){try{return mt&&mt.binding&&mt.binding("util")}catch{}})(),Ct=pt&&pt.isTypedArray;function Rt(X,me){for(var Ne=-1,wt=X==null?0:X.length,hn=0,Bn=[];++Ne<wt;){var li=X[Ne];me(li,Ne,X)&&(Bn[hn++]=li)}return Bn}function Kt(X,me){for(var Ne=-1,wt=me.length,hn=X.length;++Ne<wt;)X[hn+Ne]=me[Ne];return X}function on(X,me){for(var Ne=-1,wt=X==null?0:X.length;++Ne<wt;)if(me(X[Ne],Ne,X))return!0;return!1}function qn(X,me){for(var Ne=-1,wt=Array(X);++Ne<X;)wt[Ne]=me(Ne);return wt}function Qn(X){return function(me){return X(me)}}function xi(X,me){return X.has(me)}function Kn(X,me){return X?.[me]}function Un(X){var me=-1,Ne=Array(X.size);return X.forEach(function(wt,hn){Ne[++me]=[hn,wt]}),Ne}function Cn(X,me){return function(Ne){return X(me(Ne))}}function ei(X){var me=-1,Ne=Array(X.size);return X.forEach(function(wt){Ne[++me]=wt}),Ne}var Dn=Array.prototype,It=Function.prototype,Ce=Object.prototype,re=Ue["__core-js_shared__"],le=It.toString,he=Ce.hasOwnProperty,se=(function(){var X=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""})(),Ae=Ce.toString,be=RegExp("^"+le.call(he).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=Ve?Ue.Buffer:void 0,et=Ue.Symbol,Pe=Ue.Uint8Array,Ze=Ce.propertyIsEnumerable,y=Dn.splice,at=et?et.toStringTag:void 0,Pt=Object.getOwnPropertySymbols,Mt=We?We.isBuffer:void 0,en=Cn(Object.keys,Object),dt=Io(Ue,"DataView"),Zn=Io(Ue,"Map"),gi=Io(Ue,"Promise"),Tn=Io(Ue,"Set"),zn=Io(Ue,"WeakMap"),si=Io(Object,"create"),ir=Xo(dt),Di=Xo(Zn),gr=Xo(gi),Oi=Xo(Tn),Ri=Xo(zn),cr=et?et.prototype:void 0,nn=cr?cr.valueOf:void 0;function Pi(X){var me=-1,Ne=X==null?0:X.length;for(this.clear();++me<Ne;){var wt=X[me];this.set(wt[0],wt[1])}}function $o(){this.__data__=si?si(null):{},this.size=0}function Ks(X){var me=this.has(X)&&delete this.__data__[X];return this.size-=me?1:0,me}function Vr(X){var me=this.__data__;if(si){var Ne=me[X];return Ne===i?void 0:Ne}return he.call(me,X)?me[X]:void 0}function mn(X){var me=this.__data__;return si?me[X]!==void 0:he.call(me,X)}function Ni(X,me){var Ne=this.__data__;return this.size+=this.has(X)?0:1,Ne[X]=si&&me===void 0?i:me,this}Pi.prototype.clear=$o,Pi.prototype.delete=Ks,Pi.prototype.get=Vr,Pi.prototype.has=mn,Pi.prototype.set=Ni;function ri(X){var me=-1,Ne=X==null?0:X.length;for(this.clear();++me<Ne;){var wt=X[me];this.set(wt[0],wt[1])}}function nl(){this.__data__=[],this.size=0}function Xc(X){var me=this.__data__,Ne=Oo(me,X);if(Ne<0)return!1;var wt=me.length-1;return Ne==wt?me.pop():y.call(me,Ne,1),--this.size,!0}function kl(X){var me=this.__data__,Ne=Oo(me,X);return Ne<0?void 0:me[Ne][1]}function Ki(X){return Oo(this.__data__,X)>-1}function Jl(X,me){var Ne=this.__data__,wt=Oo(Ne,X);return wt<0?(++this.size,Ne.push([X,me])):Ne[wt][1]=me,this}ri.prototype.clear=nl,ri.prototype.delete=Xc,ri.prototype.get=kl,ri.prototype.has=Ki,ri.prototype.set=Jl;function po(X){var me=-1,Ne=X==null?0:X.length;for(this.clear();++me<Ne;){var wt=X[me];this.set(wt[0],wt[1])}}function Oa(){this.size=0,this.__data__={hash:new Pi,map:new(Zn||ri),string:new Pi}}function eu(X){var me=Ms(this,X).delete(X);return this.size-=me?1:0,me}function da(X){return Ms(this,X).get(X)}function Ho(X){return Ms(this,X).has(X)}function Tl(X,me){var Ne=Ms(this,X),wt=Ne.size;return Ne.set(X,me),this.size+=Ne.size==wt?0:1,this}po.prototype.clear=Oa,po.prototype.delete=eu,po.prototype.get=da,po.prototype.has=Ho,po.prototype.set=Tl;function Zo(X){var me=-1,Ne=X==null?0:X.length;for(this.__data__=new po;++me<Ne;)this.add(X[me])}function Wi(X){return this.__data__.set(X,i),this}function Rl(X){return this.__data__.has(X)}Zo.prototype.add=Zo.prototype.push=Wi,Zo.prototype.has=Rl;function rs(X){var me=this.__data__=new ri(X);this.size=me.size}function Dl(){this.__data__=new ri,this.size=0}function tu(X){var me=this.__data__,Ne=me.delete(X);return this.size=me.size,Ne}function Eu(X){return this.__data__.get(X)}function Jc(X){return this.__data__.has(X)}function tc(X,me){var Ne=this.__data__;if(Ne instanceof ri){var wt=Ne.__data__;if(!Zn||wt.length<t-1)return wt.push([X,me]),this.size=++Ne.size,this;Ne=this.__data__=new po(wt)}return Ne.set(X,me),this.size=Ne.size,this}rs.prototype.clear=Dl,rs.prototype.delete=tu,rs.prototype.get=Eu,rs.prototype.has=Jc,rs.prototype.set=tc;function ml(X,me){var Ne=oo(X),wt=!Ne&&Ko(X),hn=!Ne&&!wt&&Mo(X),Bn=!Ne&&!wt&&!hn&&ol(X),li=Ne||wt||hn||Bn,Ui=li?qn(X.length,String):[],wi=Ui.length;for(var Si in X)he.call(X,Si)&&!(li&&(Si=="length"||hn&&(Si=="offset"||Si=="parent")||Bn&&(Si=="buffer"||Si=="byteLength"||Si=="byteOffset")||ja(Si,wi)))&&Ui.push(Si);return Ui}function Oo(X,me){for(var Ne=X.length;Ne--;)if(su(X[Ne][0],me))return Ne;return-1}function nc(X,me,Ne){var wt=me(X);return oo(X)?wt:Kt(wt,Ne(X))}function nu(X){return X==null?X===void 0?ue:Q:at&&at in Object(X)?ru(X):Na(X)}function Ec(X){return so(X)&&nu(X)==a}function ic(X,me,Ne,wt,hn){return X===me?!0:X==null||me==null||!so(X)&&!so(me)?X!==X&&me!==me:Bc(X,me,Ne,wt,ic,hn)}function Bc(X,me,Ne,wt,hn,Bn){var li=oo(X),Ui=oo(me),wi=li?c:Us(X),Si=Ui?c:Us(me);wi=wi==a?Y:wi,Si=Si==a?Y:Si;var fr=wi==Y,ao=Si==Y,br=wi==Si;if(br&&Mo(X)){if(!Mo(me))return!1;li=!0,fr=!1}if(br&&!fr)return Bn||(Bn=new rs),li||ol(X)?il(X,me,Ne,wt,hn,Bn):eA(X,me,wi,Ne,wt,hn,Bn);if(!(Ne&r)){var yr=fr&&he.call(X,"__wrapped__"),eo=ao&&he.call(me,"__wrapped__");if(yr||eo){var Uo=yr?X.value():X,Or=eo?me.value():me;return Bn||(Bn=new rs),hn(Uo,Or,Ne,wt,Bn)}}return br?(Bn||(Bn=new rs),iu(X,me,Ne,wt,hn,Bn)):!1}function Dh(X){if(!os(X)||rl(X))return!1;var me=au(X)?be:Te;return me.test(Xo(X))}function fa(X){return so(X)&&mo(X.length)&&!!st[nu(X)]}function rc(X){if(!Gi(X))return en(X);var me=[];for(var Ne in Object(X))he.call(X,Ne)&&Ne!="constructor"&&me.push(Ne);return me}function il(X,me,Ne,wt,hn,Bn){var li=Ne&r,Ui=X.length,wi=me.length;if(Ui!=wi&&!(li&&wi>Ui))return!1;var Si=Bn.get(X);if(Si&&Bn.get(me))return Si==me;var fr=-1,ao=!0,br=Ne&o?new Zo:void 0;for(Bn.set(X,me),Bn.set(me,X);++fr<Ui;){var yr=X[fr],eo=me[fr];if(wt)var Uo=li?wt(eo,yr,fr,me,X,Bn):wt(yr,eo,fr,X,me,Bn);if(Uo!==void 0){if(Uo)continue;ao=!1;break}if(br){if(!on(me,function(Or,Ss){if(!xi(br,Ss)&&(yr===Or||hn(yr,Or,Ne,wt,Bn)))return br.push(Ss)})){ao=!1;break}}else if(!(yr===eo||hn(yr,eo,Ne,wt,Bn))){ao=!1;break}}return Bn.delete(X),Bn.delete(me),ao}function eA(X,me,Ne,wt,hn,Bn,li){switch(Ne){case Ie:if(X.byteLength!=me.byteLength||X.byteOffset!=me.byteOffset)return!1;X=X.buffer,me=me.buffer;case ge:return!(X.byteLength!=me.byteLength||!Bn(new Pe(X),new Pe(me)));case m:case v:case z:return su(+X,+me);case x:return X.name==me.name&&X.message==me.message;case J:case G:return X==me+"";case P:var Ui=Un;case $:var wi=wt&r;if(Ui||(Ui=ei),X.size!=me.size&&!wi)return!1;var Si=li.get(X);if(Si)return Si==me;wt|=o,li.set(X,me);var fr=il(Ui(X),Ui(me),wt,hn,Bn,li);return li.delete(X),fr;case oe:if(nn)return nn.call(X)==nn.call(me)}return!1}function iu(X,me,Ne,wt,hn,Bn){var li=Ne&r,Ui=Fa(X),wi=Ui.length,Si=Fa(me),fr=Si.length;if(wi!=fr&&!li)return!1;for(var ao=wi;ao--;){var br=Ui[ao];if(!(li?br in me:he.call(me,br)))return!1}var yr=Bn.get(X);if(yr&&Bn.get(me))return yr==me;var eo=!0;Bn.set(X,me),Bn.set(me,X);for(var Uo=li;++ao<wi;){br=Ui[ao];var Or=X[br],Ss=me[br];if(wt)var ZA=li?wt(Ss,Or,br,me,X,Bn):wt(Or,Ss,br,X,me,Bn);if(!(ZA===void 0?Or===Ss||hn(Or,Ss,Ne,wt,Bn):ZA)){eo=!1;break}Uo||(Uo=br=="constructor")}if(eo&&!Uo){var gl=X.constructor,kr=me.constructor;gl!=kr&&"constructor"in X&&"constructor"in me&&!(typeof gl=="function"&&gl instanceof gl&&typeof kr=="function"&&kr instanceof kr)&&(eo=!1)}return Bn.delete(X),Bn.delete(me),eo}function Fa(X){return nc(X,Pl,ou)}function Ms(X,me){var Ne=X.__data__;return Ji(me)?Ne[typeof me=="string"?"string":"hash"]:Ne.map}function Io(X,me){var Ne=Kn(X,me);return Dh(Ne)?Ne:void 0}function ru(X){var me=he.call(X,at),Ne=X[at];try{X[at]=void 0;var wt=!0}catch{}var hn=Ae.call(X);return wt&&(me?X[at]=Ne:delete X[at]),hn}var ou=Pt?function(X){return X==null?[]:(X=Object(X),Rt(Pt(X),function(me){return Ze.call(X,me)}))}:ji,Us=nu;(dt&&Us(new dt(new ArrayBuffer(1)))!=Ie||Zn&&Us(new Zn)!=P||gi&&Us(gi.resolve())!=H||Tn&&Us(new Tn)!=$||zn&&Us(new zn)!=xe)&&(Us=function(X){var me=nu(X),Ne=me==Y?X.constructor:void 0,wt=Ne?Xo(Ne):"";if(wt)switch(wt){case ir:return Ie;case Di:return P;case gr:return H;case Oi:return $;case Ri:return xe}return me});function ja(X,me){return me=me??s,!!me&&(typeof X=="number"||xt.test(X))&&X>-1&&X%1==0&&X<me}function Ji(X){var me=typeof X;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?X!=="__proto__":X===null}function rl(X){return!!se&&se in X}function Gi(X){var me=X&&X.constructor,Ne=typeof me=="function"&&me.prototype||Ce;return X===Ne}function Na(X){return Ae.call(X)}function Xo(X){if(X!=null){try{return le.call(X)}catch{}try{return X+""}catch{}}return""}function su(X,me){return X===me||X!==X&&me!==me}var Ko=Ec((function(){return arguments})())?Ec:function(X){return so(X)&&he.call(X,"callee")&&!Ze.call(X,"callee")},oo=Array.isArray;function ws(X){return X!=null&&mo(X.length)&&!au(X)}var Mo=Mt||ki;function _o(X,me){return ic(X,me)}function au(X){if(!os(X))return!1;var me=nu(X);return me==E||me==R||me==h||me==Z}function mo(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=s}function os(X){var me=typeof X;return X!=null&&(me=="object"||me=="function")}function so(X){return X!=null&&typeof X=="object"}var ol=Ct?Qn(Ct):fa;function Pl(X){return ws(X)?ml(X):rc(X)}function ji(){return[]}function ki(){return!1}n.exports=_o})(P2,P2.exports)),P2.exports}var hhe=Ahe(),dhe=rZ(hhe);function IT(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function kT(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function TT(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function rz(n,e){return{circle:e(n,.8),line:e(n,.6),polygon:e(n,.3),polygonOutline:e(n,.6),default:e(n,1)}}function fhe(n,e){const t=[],i=[],r=[];for(const o of Object.keys(n)){const s=n[o];if(!s||s.length===0){const a=rz(o,e);i.push(IT(a.circle,o)),r.push(TT(a.line,o)),t.push(kT(a.polygon,a.polygonOutline,o))}else for(const a of s){const c=rz(a,e);i.push(IT(c.circle,o,a)),r.push(TT(c.line,o,a)),t.push(kT(c.polygon,c.polygonOutline,o,a))}}return t.concat(r).concat(i)}function phe(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};for(const o of Object.keys(n.sources)){const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}return Object.assign(n,{layers:[i].concat(e),sources:r})}var oz={polygonLayer:kT,lineLayer:TT,circleLayer:IT,generateInspectStyle:phe,generateColoredLayers:fhe};class mhe{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(e),t||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function ghe(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function MB(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${ghe(e)}</div></div>`}function yhe(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function vhe(n){const e=yhe(n.layer["source-layer"]||n.layer.source),t=MB("$id",n.id),i=MB("$type",n.geometry.type),r=Object.keys(n.properties).map(o=>MB(o,n.properties[o]));return[e,t,i].concat(r).join("")}function bhe(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${vhe(e)}</div>`).join("")}function Che(n){return`<div class="maplibregl-inspect_popup">${bhe(n)}</div>`}var K2={exports:{}},_he=K2.exports,sz;function xhe(){return sz||(sz=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(_he,function(){var t=null,i={};Q();var r=[],o=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=J(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,ue,xe;if(G.count!==null&&G.count!==void 0){for(var ge=G.count,Ie=[],Me=0;Me<G.count;Me++)r.push(!1);for(G.count=null;ge>Ie.length;){var ke=o(G);t!==null&&(G.seed=t),Ie.push(ke)}return G.count=ge,Ie}return oe=s(G),ue=a(oe,G),xe=c(oe,ue,G),h([oe,ue,xe],G)};function s(G){if(r.length>0){var oe=$(G.hue),ue=R(oe),xe=(oe[1]-oe[0])/r.length,ge=parseInt((ue-oe[0])/xe);r[ge]===!0?ge=(ge+2)%r.length:r[ge]=!0;var Ie=(oe[0]+ge*xe)%359,Me=(oe[0]+(ge+1)*xe)%359;return oe=[Ie,Me],ue=R(oe),ue<0&&(ue=360+ue),ue}else{var oe=v(G.hue);return ue=R(oe),ue<0&&(ue=360+ue),ue}}function a(G,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return R([0,100]);var ue=x(G),xe=ue[0],ge=ue[1];switch(oe.luminosity){case"bright":xe=55;break;case"dark":xe=ge-10;break;case"light":ge=55;break}return R([xe,ge])}function c(G,oe,ue){var xe=m(G,oe),ge=100;switch(ue.luminosity){case"dark":ge=xe+20;break;case"light":xe=(ge+xe)/2;break;case"random":xe=0,ge=100;break}return R([xe,ge])}function h(G,oe){switch(oe.format){case"hsvArray":return G;case"hslArray":return Z(G);case"hsl":var ue=Z(G);return"hsl("+ue[0]+", "+ue[1]+"%, "+ue[2]+"%)";case"hsla":var xe=Z(G),Me=oe.alpha||Math.random();return"hsla("+xe[0]+", "+xe[1]+"%, "+xe[2]+"%, "+Me+")";case"rgbArray":return Y(G);case"rgb":var ge=Y(G);return"rgb("+ge.join(", ")+")";case"rgba":var Ie=Y(G),Me=oe.alpha||Math.random();return"rgba("+Ie.join(", ")+", "+Me+")";default:return P(G)}}function m(G,oe){for(var ue=E(G).lowerBounds,xe=0;xe<ue.length-1;xe++){var ge=ue[xe][0],Ie=ue[xe][1],Me=ue[xe+1][0],ke=ue[xe+1][1];if(oe>=ge&&oe<=Me){var je=(ke-Ie)/(Me-ge),Be=Ie-je*ge;return je*oe+Be}}return 0}function v(G){if(typeof parseInt(G)=="number"){var oe=parseInt(G);if(oe<360&&oe>0)return[oe,oe]}if(typeof G=="string"){if(i[G]){var ue=i[G];if(ue.hueRange)return ue.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var xe=H(G)[0];return[xe,xe]}}return[0,360]}function x(G){return E(G).saturationRange}function E(G){G>=334&&G<=360&&(G-=360);for(var oe in i){var ue=i[oe];if(ue.hueRange&&G>=ue.hueRange[0]&&G<=ue.hueRange[1])return i[oe]}return"Color not found"}function R(G){if(t===null){var oe=.618033988749895,ue=Math.random();return ue+=oe,ue%=1,Math.floor(G[0]+ue*(G[1]+1-G[0]))}else{var xe=G[1]||1,ge=G[0]||0;t=(t*9301+49297)%233280;var Ie=t/233280;return Math.floor(ge+Ie*(xe-ge))}}function P(G){var oe=Y(G);function ue(ge){var Ie=ge.toString(16);return Ie.length==1?"0"+Ie:Ie}var xe="#"+ue(oe[0])+ue(oe[1])+ue(oe[2]);return xe}function z(G,oe,ue){var xe=ue[0][0],ge=ue[ue.length-1][0],Ie=ue[ue.length-1][1],Me=ue[0][1];i[G]={hueRange:oe,lowerBounds:ue,saturationRange:[xe,ge],brightnessRange:[Ie,Me]}}function Q(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Y(G){var oe=G[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var ue=G[1]/100,xe=G[2]/100,ge=Math.floor(oe*6),Ie=oe*6-ge,Me=xe*(1-ue),ke=xe*(1-Ie*ue),je=xe*(1-(1-Ie)*ue),Be=256,Ye=256,At=256;switch(ge){case 0:Be=xe,Ye=je,At=Me;break;case 1:Be=ke,Ye=xe,At=Me;break;case 2:Be=Me,Ye=xe,At=je;break;case 3:Be=Me,Ye=ke,At=xe;break;case 4:Be=je,Ye=Me,At=xe;break;case 5:Be=xe,Ye=Me,At=ke;break}var yt=[Math.floor(Be*255),Math.floor(Ye*255),Math.floor(At*255)];return yt}function H(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var oe=parseInt(G.substr(0,2),16)/255,ue=parseInt(G.substr(2,2),16)/255,xe=parseInt(G.substr(4,2),16)/255,ge=Math.max(oe,ue,xe),Ie=ge-Math.min(oe,ue,xe),Me=ge?Ie/ge:0;switch(ge){case oe:return[60*((ue-xe)/Ie%6)||0,Me,ge];case ue:return[60*((xe-oe)/Ie+2)||0,Me,ge];case xe:return[60*((oe-ue)/Ie+4)||0,Me,ge]}}function Z(G){var oe=G[0],ue=G[1]/100,xe=G[2]/100,ge=(2-ue)*xe;return[oe,Math.round(ue*xe/(ge<1?ge:2-ge)*1e4)/100,ge/2*100]}function J(G){for(var oe=0,ue=0;ue!==G.length&&!(oe>=Number.MAX_SAFE_INTEGER);ue++)oe+=G.charCodeAt(ue);return oe}function $(G){if(isNaN(G)){if(typeof G=="string"){if(i[G]){var ue=i[G];if(ue.hueRange)return ue.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var xe=H(G)[0];return E(xe).hueRange}}}else{var oe=parseInt(G);if(oe<360&&oe>0)return E(G).hueRange}return[0,360]}return o})})(K2,K2.exports)),K2.exports}var Mhe=xhe(),whe=rZ(Mhe);function She(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${whe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var Ehe={brightColor:She};function Bhe(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function Ohe(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class MD{constructor(e){if(this._onSourceChange=i=>nz(this,void 0,void 0,function*(){if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const r=Object.assign({},this.sources);yield this._setSourcesFromMap(),!dhe(r,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)}),this._onStyleChange=()=>{const i=this._map.getStyle();Bhe(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let r;this.options.selectThreshold===0?r=i.point:r=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const o=this._map.queryRenderedFeatures(r,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=o.length?"pointer":"",!o.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const s=this.options.renderPopup(o);typeof s=="string"?this._popup.setHTML(s):this._popup.setDOMContent(s),this._popup.addTo(this._map)}}},!(this instanceof MD))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:Ehe.brightColor,buildInspectStyle:oz.generateInspectStyle,renderPopup:Che,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new mhe({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=oz.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(Ohe(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){return nz(this,void 0,void 0,function*(){var e;const t=this._map.getStyle(),i=Object.keys(t.sources);for(const r of i)if(t.sources[r].type==="geojson")this.sources[r]=[];else if(t.sources[r].type==="vector"&&t.sources[r].url)try{const s=yield(yield fetch(t.sources[r].url)).json(),a=(e=s?.vector_layers)===null||e===void 0?void 0:e.map(c=>c.id);if(a)this.sources[r]=a;else throw new Error("Missing vectorlayersIds in source"+r)}catch{console.warn("Unable to retrieve tileJSON from "+t.sources[r].url+" using style's layers");for(const s of t.layers)if("source-layer"in s&&s["source-layer"]){const a=s["source-layer"];this.sources[a]||(this.sources[a]=[]),this.sources[a].push(s.id)}}for(const r of Object.keys(this.sources))i.indexOf(r)===-1&&delete this.sources[r]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var U2={exports:{}},Ihe=U2.exports,az;function khe(){return az||(az=1,(function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(Ihe,function(){var t=null,i={};Q();var r=[],o=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=J(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var oe,ue,xe;if(G.count!==null&&G.count!==void 0){for(var ge=G.count,Ie=[],Me=0;Me<G.count;Me++)r.push(!1);for(G.count=null;ge>Ie.length;){var ke=o(G);t!==null&&(G.seed=t),Ie.push(ke)}return G.count=ge,Ie}return oe=s(G),ue=a(oe,G),xe=c(oe,ue,G),h([oe,ue,xe],G)};function s(G){if(r.length>0){var oe=$(G.hue),ue=R(oe),xe=(oe[1]-oe[0])/r.length,ge=parseInt((ue-oe[0])/xe);r[ge]===!0?ge=(ge+2)%r.length:r[ge]=!0;var Ie=(oe[0]+ge*xe)%359,Me=(oe[0]+(ge+1)*xe)%359;return oe=[Ie,Me],ue=R(oe),ue<0&&(ue=360+ue),ue}else{var oe=v(G.hue);return ue=R(oe),ue<0&&(ue=360+ue),ue}}function a(G,oe){if(oe.hue==="monochrome")return 0;if(oe.luminosity==="random")return R([0,100]);var ue=x(G),xe=ue[0],ge=ue[1];switch(oe.luminosity){case"bright":xe=55;break;case"dark":xe=ge-10;break;case"light":ge=55;break}return R([xe,ge])}function c(G,oe,ue){var xe=m(G,oe),ge=100;switch(ue.luminosity){case"dark":ge=xe+20;break;case"light":xe=(ge+xe)/2;break;case"random":xe=0,ge=100;break}return R([xe,ge])}function h(G,oe){switch(oe.format){case"hsvArray":return G;case"hslArray":return Z(G);case"hsl":var ue=Z(G);return"hsl("+ue[0]+", "+ue[1]+"%, "+ue[2]+"%)";case"hsla":var xe=Z(G),Me=oe.alpha||Math.random();return"hsla("+xe[0]+", "+xe[1]+"%, "+xe[2]+"%, "+Me+")";case"rgbArray":return Y(G);case"rgb":var ge=Y(G);return"rgb("+ge.join(", ")+")";case"rgba":var Ie=Y(G),Me=oe.alpha||Math.random();return"rgba("+Ie.join(", ")+", "+Me+")";default:return P(G)}}function m(G,oe){for(var ue=E(G).lowerBounds,xe=0;xe<ue.length-1;xe++){var ge=ue[xe][0],Ie=ue[xe][1],Me=ue[xe+1][0],ke=ue[xe+1][1];if(oe>=ge&&oe<=Me){var je=(ke-Ie)/(Me-ge),Be=Ie-je*ge;return je*oe+Be}}return 0}function v(G){if(typeof parseInt(G)=="number"){var oe=parseInt(G);if(oe<360&&oe>0)return[oe,oe]}if(typeof G=="string"){if(i[G]){var ue=i[G];if(ue.hueRange)return ue.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var xe=H(G)[0];return[xe,xe]}}return[0,360]}function x(G){return E(G).saturationRange}function E(G){G>=334&&G<=360&&(G-=360);for(var oe in i){var ue=i[oe];if(ue.hueRange&&G>=ue.hueRange[0]&&G<=ue.hueRange[1])return i[oe]}return"Color not found"}function R(G){if(t===null){var oe=.618033988749895,ue=Math.random();return ue+=oe,ue%=1,Math.floor(G[0]+ue*(G[1]+1-G[0]))}else{var xe=G[1]||1,ge=G[0]||0;t=(t*9301+49297)%233280;var Ie=t/233280;return Math.floor(ge+Ie*(xe-ge))}}function P(G){var oe=Y(G);function ue(ge){var Ie=ge.toString(16);return Ie.length==1?"0"+Ie:Ie}var xe="#"+ue(oe[0])+ue(oe[1])+ue(oe[2]);return xe}function z(G,oe,ue){var xe=ue[0][0],ge=ue[ue.length-1][0],Ie=ue[ue.length-1][1],Me=ue[0][1];i[G]={hueRange:oe,lowerBounds:ue,saturationRange:[xe,ge],brightnessRange:[Ie,Me]}}function Q(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Y(G){var oe=G[0];oe===0&&(oe=1),oe===360&&(oe=359),oe=oe/360;var ue=G[1]/100,xe=G[2]/100,ge=Math.floor(oe*6),Ie=oe*6-ge,Me=xe*(1-ue),ke=xe*(1-Ie*ue),je=xe*(1-(1-Ie)*ue),Be=256,Ye=256,At=256;switch(ge){case 0:Be=xe,Ye=je,At=Me;break;case 1:Be=ke,Ye=xe,At=Me;break;case 2:Be=Me,Ye=xe,At=je;break;case 3:Be=Me,Ye=ke,At=xe;break;case 4:Be=je,Ye=Me,At=xe;break;case 5:Be=xe,Ye=Me,At=ke;break}var yt=[Math.floor(Be*255),Math.floor(Ye*255),Math.floor(At*255)];return yt}function H(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var oe=parseInt(G.substr(0,2),16)/255,ue=parseInt(G.substr(2,2),16)/255,xe=parseInt(G.substr(4,2),16)/255,ge=Math.max(oe,ue,xe),Ie=ge-Math.min(oe,ue,xe),Me=ge?Ie/ge:0;switch(ge){case oe:return[60*((ue-xe)/Ie%6)||0,Me,ge];case ue:return[60*((xe-oe)/Ie+2)||0,Me,ge];case xe:return[60*((oe-ue)/Ie+4)||0,Me,ge]}}function Z(G){var oe=G[0],ue=G[1]/100,xe=G[2]/100,ge=(2-ue)*xe;return[oe,Math.round(ue*xe/(ge<1?ge:2-ge)*1e4)/100,ge/2*100]}function J(G){for(var oe=0,ue=0;ue!==G.length&&!(oe>=Number.MAX_SAFE_INTEGER);ue++)oe+=G.charCodeAt(ue);return oe}function $(G){if(isNaN(G)){if(typeof G=="string"){if(i[G]){var ue=i[G];if(ue.hueRange)return ue.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var xe=H(G)[0];return E(xe).hueRange}}}else{var oe=parseInt(G);if(oe<360&&oe>0)return E(G).hueRange}return[0,360]}return o})})(U2,U2.exports)),U2.exports}var The=khe();const Rhe=Su(The);function Dhe(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${Rhe({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const oZ={brightColor:Dhe};function Phe(n){return Bo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"},child:[]}]})(n)}function Khe(n){return Bo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098z"},child:[]}]})(n)}function Uhe(n){return Bo({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"},child:[]}]})(n)}function Lhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(n)}function Hb(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function zhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function Fhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function jhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Nhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Ghe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function Qhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function Whe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function qhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function Yhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function sZ(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Vhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function RT(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function $he(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function Hhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"7.2",cy:"14.4",r:"3.2"},child:[]},{tag:"circle",attr:{cx:"14.8",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"15.2",cy:"8.8",r:"4.8"},child:[]}]})(n)}function lz(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function Zhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function uz(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function Xhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function Jhe(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function ede(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function tde(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.16 4.4.47.75.81 1.45 1.17 2.26.26.55.47 1.5 1.26 1.5s1-.95 1.25-1.5c.37-.81.7-1.51 1.17-2.26.96-1.53 2.21-2.85 3.16-4.4C18.5 12.37 19 10.74 19 9c0-3.87-3.13-7-7-7zm0 9.75a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(n)}function nde(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function aZ(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function lZ(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function ide(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function rde(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function ode(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function sde(n){return Bo({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(n)}function ade(n){return Bo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m344 280 88-88m-200 24 64 64M80 320l104-104"},child:[]},{tag:"circle",attr:{cx:"456",cy:"168",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"320",cy:"304",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"208",cy:"192",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"56",cy:"344",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(n)}function lde(n){return Bo({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.3 168.1c-1.8 0-3.5.3-5.1 1l-177.6 92.1h-.1c-7.6 4.7-12.5 12.5-12.5 21.4v185.9c0 6.4 5.6 11.5 12.7 11.5 2.2 0 4.3-.5 6.1-1.4.2-.1.4-.2.5-.3L466 385.6l.3-.1c8.2-4.5 13.7-12.7 13.7-22.1V179.6c0-6.4-5.7-11.5-12.7-11.5zM454.3 118.5L272.6 36.8S261.9 32 256 32c-5.9 0-16.5 4.8-16.5 4.8L57.6 118.5s-8 3.3-8 9.5c0 6.6 8.3 11.5 8.3 11.5l185.5 97.8c3.8 1.7 8.1 2.6 12.6 2.6 4.6 0 8.9-1 12.7-2.7l185.4-97.9s7.5-4 7.5-11.5c.1-6.3-7.3-9.3-7.3-9.3zM227.5 261.2L49.8 169c-1.5-.6-3.3-1-5.1-1-7 0-12.7 5.1-12.7 11.5v183.8c0 9.4 5.5 17.6 13.7 22.1l.2.1 174.7 92.7c1.9 1.1 4.2 1.7 6.6 1.7 7 0 12.7-5.2 12.7-11.5V282.6c.1-8.9-4.9-16.8-12.4-21.4z"},child:[]}]})(n)}function ude(n){return Bo({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"},child:[]}]})(n)}function la(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="0b6460c942a48f834d2809c818afa5c72625023a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:7,column:18},end:{line:33,column:1}},1:{start:{line:8,column:20},end:{line:8,column:42}},2:{start:{line:9,column:2},end:{line:32,column:3}},3:{start:{line:11,column:6},end:{line:11,column:61}},4:{start:{line:13,column:6},end:{line:13,column:60}},5:{start:{line:15,column:6},end:{line:15,column:62}},6:{start:{line:17,column:6},end:{line:17,column:63}},7:{start:{line:19,column:6},end:{line:19,column:66}},8:{start:{line:21,column:6},end:{line:21,column:66}},9:{start:{line:23,column:6},end:{line:23,column:59}},10:{start:{line:25,column:6},end:{line:25,column:71}},11:{start:{line:27,column:6},end:{line:27,column:66}},12:{start:{line:29,column:6},end:{line:29,column:61}},13:{start:{line:31,column:6},end:{line:31,column:67}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:29},end:{line:33,column:1}},line:7}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:32,column:3}},type:"switch",locations:[{start:{line:10,column:4},end:{line:11,column:61}},{start:{line:12,column:4},end:{line:13,column:60}},{start:{line:14,column:4},end:{line:15,column:62}},{start:{line:16,column:4},end:{line:17,column:63}},{start:{line:18,column:4},end:{line:19,column:66}},{start:{line:20,column:4},end:{line:21,column:66}},{start:{line:22,column:4},end:{line:23,column:59}},{start:{line:24,column:4},end:{line:25,column:71}},{start:{line:26,column:4},end:{line:27,column:66}},{start:{line:28,column:4},end:{line:29,column:61}},{start:{line:30,column:4},end:{line:31,column:67}}],line:9}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAkBkC;AAflC,SAAS,QAAQ,eAAe,iBAAiB;AACjD,SAAS,eAAe,UAAU,eAAe,SAAS,sBAAsB;AAChF,SAAS,0BAA0B;AACnC,SAAS,gBAAgB;AACzB,SAAS,kBAAkB;AAQ3B,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,EAAE,OAAO,MAAM,MAAM;AACvC,UAAO,MAAM,MAAM;AAAA,IACjB,KAAK;AAAkB,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,WAAS,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAa,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACnD,KAAK;AAAgB,aAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,IACvD,KAAK;AAAW,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACrD,KAAK;AAAQ,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IAClD,KAAK;AAAc,aAAO,oBAAC,UAAQ,GAAG,WAAW;AAAA,IACjD,KAAK;AAAQ,aAAO,oBAAC,sBAAoB,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACpD,KAAK;AAAU,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IAC/C;AAAS,aAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,EACjD;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b6460c942a48f834d2809c818afa5c72625023a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return la=function(){return s},s}la();la().s[0]++;const uZ=n=>{la().f[0]++;const e=(la().s[1]++,{style:n.style});switch(la().s[2]++,n.type){case"fill-extrusion":return la().b[0][0]++,la().s[3]++,te.jsx(lde,{...e});case"raster":return la().b[0][1]++,la().s[4]++,te.jsx(Jhe,{...e});case"hillshade":return la().b[0][2]++,la().s[5]++,te.jsx(Uhe,{...e});case"color-relief":return la().b[0][3]++,la().s[6]++,te.jsx(ude,{...e});case"heatmap":return la().b[0][4]++,la().s[7]++,te.jsx(Hhe,{...e});case"fill":return la().b[0][5]++,la().s[8]++,te.jsx(Khe,{...e});case"background":return la().b[0][6]++,la().s[9]++,te.jsx(Phe,{...e});case"line":return la().b[0][7]++,la().s[10]++,te.jsx(ade,{...e});case"symbol":return la().b[0][8]++,la().s[11]++,te.jsx(tde,{...e});case"circle":return la().b[0][9]++,la().s[12]++,te.jsx(Xhe,{...e});default:return la().b[0][10]++,la().s[13]++,te.jsx(ode,{...e})}};function _i(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="6d83428b3c695d7740365dc3cc3e42bdf4d49028",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:152}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCAA+B,eAAY,uBAAsB,KAAI,OACxF,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6d83428b3c695d7740365dc3cc3e42bdf4d49028"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return _i=function(){return s},s}_i();function cde(n){_i().f[0]++;const e=(_i().s[0]++,{}),t=(_i().s[1]++,{});return _i().s[2]++,n.forEach(i=>{_i().f[1]++;const r=(_i().s[3]++,i.layer["source-layer"]);if(_i().s[4]++,Object.prototype.hasOwnProperty.call(t,i.layer.id)){_i().b[0][0]++,_i().s[5]++,t[i.layer.id]++;const o=(_i().s[6]++,e[r].find(s=>(_i().f[2]++,_i().s[7]++,s.layer.id===i.layer.id)));_i().s[8]++,o.counter=t[i.layer.id]}else _i().b[0][1]++,_i().s[9]++,e[r]=(_i().b[1][0]++,e[r]||(_i().b[1][1]++,[])),_i().s[10]++,e[r].push(i),_i().s[11]++,t[i.layer.id]=1}),_i().s[12]++,e}class cZ extends En.Component{_getFeatureColor(e,t){if(_i().f[3]++,_i().s[13]++,e.layer.paint)_i().b[2][1]++;else{_i().b[2][0]++,_i().s[14]++;return}_i().s[15]++;try{const i=(_i().s[16]++,e.layer.paint);return _i().s[17]++,_i().b[4][0]++,"text-color"in i&&(_i().b[4][1]++,i["text-color"])?(_i().b[3][0]++,_i().s[18]++,String(i["text-color"])):(_i().b[3][1]++,_i().s[19]++,_i().b[6][0]++,"fill-color"in i&&(_i().b[6][1]++,i["fill-color"])?(_i().b[5][0]++,_i().s[20]++,String(i["fill-color"])):(_i().b[5][1]++,_i().s[21]++,_i().b[8][0]++,"line-color"in i&&(_i().b[8][1]++,i["line-color"])?(_i().b[7][0]++,_i().s[22]++,String(i["line-color"])):(_i().b[7][1]++,_i().s[23]++,_i().b[10][0]++,"fill-extrusion-color"in i&&(_i().b[10][1]++,i["fill-extrusion-color"])?(_i().b[9][0]++,_i().s[24]++,String(i["fill-extrusion-color"])):(_i().b[9][1]++,_i().s[25]++,"black"))))}catch(i){return _i().s[26]++,console.warn("Unable to get feature color, error:",i),_i().s[27]++,"black"}}render(){_i().f[4]++;const e=(_i().s[28]++,cde(this.props.features)),t=(_i().s[29]++,Object.keys(e).map(i=>{_i().f[5]++;const r=(_i().s[30]++,e[i].map((o,s)=>{_i().f[6]++;const a=(_i().s[31]++,this._getFeatureColor(o,this.props.zoom));return _i().s[32]++,te.jsxs("div",{className:"maputnik-popup-layer",children:[te.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:a}}),te.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{_i().f[7]++,_i().s[33]++,this.props.onLayerSelect(o.layer.id)},children:[(_i().b[11][0]++,o.layer.type&&(_i().b[11][1]++,te.jsx(uZ,{type:o.layer.type,style:{width:14,height:14,paddingRight:3}}))),o.layer.id,(_i().b[12][0]++,o.counter&&(_i().b[12][1]++,te.jsxs("span",{children:["  ",o.counter]})))]})]},s)}));return _i().s[34]++,te.jsxs("div",{children:[te.jsx("div",{className:"maputnik-popup-layer-id",children:i}),r]},i)}));return _i().s[35]++,te.jsx("div",{className:"maputnik-feature-layer-popup","data-wd-key":"feature-layer-popup",dir:"ltr",children:t})}}function mr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="1e4c480681bcaba84c2c41960b73ded2066b54bc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:303}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCAAkC,KAAI,OAAM,eAAY,0BAC5E,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1e4c480681bcaba84c2c41960b73ded2066b54bc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return mr=function(){return s},s}mr();function cz(n){return mr().f[0]++,mr().s[0]++,mr().b[1][0]++,typeof n>"u"||(mr().b[1][1]++,n===null)?(mr().b[0][0]++,mr().s[1]++,n):(mr().b[0][1]++,mr().s[2]++,n instanceof Date?(mr().b[2][0]++,mr().s[3]++,n.toLocaleString()):(mr().b[2][1]++,mr().s[4]++,mr().b[4][0]++,typeof n=="object"||(mr().b[4][1]++,typeof n=="number")||(mr().b[4][2]++,typeof n=="string")?(mr().b[3][0]++,mr().s[5]++,n.toString()):(mr().b[3][1]++,mr().s[6]++,n)))}function wB(n,e){return mr().f[1]++,mr().s[7]++,te.jsxs("tr",{children:[te.jsx("td",{className:"maputnik-popup-table-cell",children:n}),te.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function Ade(n,e){return mr().f[2]++,mr().s[8]++,te.jsxs(En.Fragment,{children:[te.jsx("tr",{children:te.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(mr().b[5][0]++,n.inspectModeCounter&&(mr().b[5][1]++,te.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),wB("$type",n.geometry.type),wB("$id",cz(n.id)),Object.keys(n.properties).map(t=>{mr().f[3]++;const i=(mr().s[9]++,n.properties[t]);return mr().s[10]++,wB(t,cz(i))})]},e)}function hde(n){mr().f[4]++;const e=(mr().s[11]++,[]);return mr().s[12]++,n.forEach(t=>{mr().f[5]++;const i=(mr().s[13]++,e.findIndex(r=>(mr().f[6]++,mr().s[14]++,mr().b[6][0]++,t.layer["source-layer"]===r.layer["source-layer"]&&(mr().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(r.properties)))));mr().s[15]++,i===-1?(mr().b[7][0]++,mr().s[16]++,e.push(t)):(mr().b[7][1]++,mr().s[17]++,"inspectModeCounter"in e[i]?(mr().b[8][0]++,mr().s[18]++,e[i].inspectModeCounter++):(mr().b[8][1]++,mr().s[19]++,e[i].inspectModeCounter=2))}),mr().s[20]++,e}class dde extends En.Component{render(){mr().f[7]++;const e=(mr().s[21]++,hde(this.props.features));return mr().s[22]++,te.jsx("div",{className:"maputnik-feature-property-popup",dir:"ltr","data-wd-key":"feature-property-popup",children:te.jsx("table",{className:"maputnik-popup-table",children:te.jsx("tbody",{children:e.map(Ade)})})})}}const a3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},AZ=Object.create(null);for(const n in a3)Object.hasOwn(a3,n)&&(AZ[a3[n]]=n);const Mc={to:{},get:{}};Mc.get=function(n){const e=n.slice(0,3).toLowerCase();let t,i;switch(e){case"hsl":{t=Mc.get.hsl(n),i="hsl";break}case"hwb":{t=Mc.get.hwb(n),i="hwb";break}default:{t=Mc.get.rgb(n),i="rgb";break}}return t?{model:i,value:t}:null};Mc.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,o=/^(\w+)$/;let s=[0,0,0,1],a,c,h;if(a=n.match(t)){for(h=a[2],a=a[1],c=0;c<3;c++){const m=c*2;s[c]=Number.parseInt(a.slice(m,m+2),16)}h&&(s[3]=Number.parseInt(h,16)/255)}else if(a=n.match(e)){for(a=a[1],h=a[3],c=0;c<3;c++)s[c]=Number.parseInt(a[c]+a[c],16);h&&(s[3]=Number.parseInt(h+h,16)/255)}else if(a=n.match(i)){for(c=0;c<3;c++)s[c]=Number.parseInt(a[c+1],10);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=n.match(r)){for(c=0;c<3;c++)s[c]=Math.round(Number.parseFloat(a[c+1])*2.55);a[4]&&(s[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=n.match(o))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(a3,a[1])?(s=a3[a[1]],s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=$y(s[c],0,255);return s[3]=$y(s[3],0,1),s};Mc.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=$y(Number.parseFloat(t[2]),0,100),s=$y(Number.parseFloat(t[3]),0,100),a=$y(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};Mc.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,o=$y(Number.parseFloat(t[2]),0,100),s=$y(Number.parseFloat(t[3]),0,100),a=$y(Number.isNaN(i)?1:i,0,1);return[r,o,s,a]}return null};Mc.to.hex=function(...n){return"#"+j5(n[0])+j5(n[1])+j5(n[2])+(n[3]<1?j5(Math.round(n[3]*255)):"")};Mc.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};Mc.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+i+"%)":"rgba("+e+"%, "+t+"%, "+i+"%, "+n[3]+")"};Mc.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};Mc.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};Mc.to.keyword=function(...n){return AZ[n.slice(0,3)]};function $y(n,e,t){return Math.min(Math.max(e,n),t)}function j5(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const L3={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},hZ={};for(const n of Object.keys(L3))hZ[L3[n]]=n;const mi={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},r1=(6/29)**3;function L_(n){const e=n>.0031308?1.055*n**.4166666666666667-.055:n*12.92;return Math.min(Math.max(0,e),1)}function z_(n){return n>.04045?((n+.055)/1.055)**2.4:n/12.92}for(const n of Object.keys(mi)){if(!("channels"in mi[n]))throw new Error("missing channels property: "+n);if(!("labels"in mi[n]))throw new Error("missing channel labels property: "+n);if(mi[n].labels.length!==mi[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=mi[n];delete mi[n].channels,delete mi[n].labels,Object.defineProperty(mi[n],"channels",{value:e}),Object.defineProperty(mi[n],"labels",{value:t})}mi.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r;let a,c;switch(o){case r:{a=0;break}case e:{a=(t-i)/s;break}case t:{a=2+(i-e)/s;break}case i:{a=4+(e-t)/s;break}}a=Math.min(a*60,360),a<0&&(a+=360);const h=(r+o)/2;return o===r?c=0:h<=.5?c=s/(o+r):c=s/(2-o-r),[a,c*100,h*100]};mi.rgb.hsv=function(n){let e,t,i,r,o;const s=n[0]/255,a=n[1]/255,c=n[2]/255,h=Math.max(s,a,c),m=h-Math.min(s,a,c),v=function(x){return(h-x)/6/m+1/2};if(m===0)r=0,o=0;else{switch(o=m/h,e=v(s),t=v(a),i=v(c),h){case s:{r=i-t;break}case a:{r=1/3+e-i;break}case c:{r=2/3+t-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,o*100,h*100]};mi.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=mi.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,o*100,i*100]};mi.rgb.oklab=function(n){const e=z_(n[0]/255),t=z_(n[1]/255),i=z_(n[2]/255),r=Math.cbrt(.4122214708*e+.5363325363*t+.0514459929*i),o=Math.cbrt(.2119034982*e+.6806995451*t+.1073969566*i),s=Math.cbrt(.0883024619*e+.2817188376*t+.6299787005*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,h=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,h*100]};mi.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),o=(1-e-r)/(1-r)||0,s=(1-t-r)/(1-r)||0,a=(1-i-r)/(1-r)||0;return[o*100,s*100,a*100,r*100]};function fde(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}mi.rgb.keyword=function(n){const e=hZ[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const r of Object.keys(L3)){const o=L3[r],s=fde(n,o);s<t&&(t=s,i=r)}return i};mi.keyword.rgb=function(n){return L3[n]};mi.rgb.xyz=function(n){const e=z_(n[0]/255),t=z_(n[1]/255),i=z_(n[2]/255),r=e*.4124564+t*.3575761+i*.1804375,o=e*.2126729+t*.7151522+i*.072175,s=e*.0193339+t*.119192+i*.9503041;return[r*100,o*100,s*100]};mi.rgb.lab=function(n){const e=mi.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>r1?t**(1/3):7.787*t+16/116,i=i>r1?i**(1/3):7.787*i+16/116,r=r>r1?r**(1/3):7.787*r+16/116;const o=116*i-16,s=500*(t-i),a=200*(i-r);return[o,s,a]};mi.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,o;if(t===0)return o=i*255,[o,o,o];const s=i<.5?i*(1+t):i+t-i*t,a=2*i-s,c=[0,0,0];for(let h=0;h<3;h++)r=e+1/3*-(h-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(s-a)*6*r:2*r<1?o=s:3*r<2?o=a+(s-a)*(2/3-r)*6:o=a,c[h]=o*255;return c};mi.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const o=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=o<=1?o:2-o;const s=(i+t)/2,a=i===0?2*r/(o+r):2*t/(i+t);return[e,a*100,s*100]};mi.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,o=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*o),c=255*i*(1-t*(1-o));switch(i*=255,r){case 0:return[i,c,s];case 1:return[a,i,s];case 2:return[s,i,c];case 3:return[s,a,i];case 4:return[c,s,i];case 5:return[i,s,a]}};mi.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let o,s;s=(2-t)*i;const a=(2-t)*r;return o=t*r,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};mi.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let o;r>1&&(t/=r,i/=r);const s=Math.floor(6*e),a=1-i;o=6*e-s,(s&1)!==0&&(o=1-o);const c=t+o*(a-t);let h,m,v;switch(s){default:case 6:case 0:{h=a,m=c,v=t;break}case 1:{h=c,m=a,v=t;break}case 2:{h=t,m=a,v=c;break}case 3:{h=t,m=c,v=a;break}case 4:{h=c,m=t,v=a;break}case 5:{h=a,m=t,v=c;break}}return[h*255,m*255,v*255]};mi.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,o=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,t*(1-r)+r),a=1-Math.min(1,i*(1-r)+r);return[o*255,s*255,a*255]};mi.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,o,s;return r=e*3.2404542+t*-1.5371385+i*-.4985314,o=e*-.969266+t*1.8760108+i*.041556,s=e*.0556434+t*-.2040259+i*1.0572252,r=L_(r),o=L_(o),s=L_(s),[r*255,o*255,s*255]};mi.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>r1?e**(1/3):7.787*e+16/116,t=t>r1?t**(1/3):7.787*t+16/116,i=i>r1?i**(1/3):7.787*i+16/116;const r=116*t-16,o=500*(e-t),s=200*(t-i);return[r,o,s]};mi.xyz.oklab=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=Math.cbrt(.8189330101*e+.3618667424*t-.1288597137*i),o=Math.cbrt(.0329845436*e+.9293118715*t+.0361456387*i),s=Math.cbrt(.0482003018*e+.2643662691*t+.633851707*i),a=.2104542553*r+.793617785*o-.0040720468*s,c=1.9779984951*r-2.428592205*o+.4505937099*s,h=.0259040371*r+.7827717662*o-.808675766*s;return[a*100,c*100,h*100]};mi.oklab.oklch=function(n){return mi.lab.lch(n)};mi.oklab.xyz=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(.999999998*e+.396337792*t+.215803758*i)**3,o=(1.000000008*e-.105561342*t-.063854175*i)**3,s=(1.000000055*e-.089484182*t-1.291485538*i)**3,a=1.227013851*r-.55779998*o+.281256149*s,c=-.040580178*r+1.11225687*o-.071676679*s,h=-.076381285*r-.421481978*o+1.58616322*s;return[a*100,c*100,h*100]};mi.oklab.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=(e+.3963377774*t+.2158037573*i)**3,o=(e-.1055613458*t-.0638541728*i)**3,s=(e-.0894841775*t-1.291485548*i)**3,a=L_(4.0767416621*r-3.3077115913*o+.2309699292*s),c=L_(-1.2684380046*r+2.6097574011*o-.3413193965*s),h=L_(-.0041960863*r-.7034186147*o+1.707614701*s);return[a*255,c*255,h*255]};mi.oklch.oklab=function(n){return mi.lch.lab(n)};mi.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let r,o,s;o=(e+16)/116,r=t/500+o,s=o-i/200;const a=o**3,c=r**3,h=s**3;return o=a>r1?a:(o-16/116)/7.787,r=c>r1?c:(r-16/116)/7.787,s=h>r1?h:(s-16/116)/7.787,r*=95.047,o*=100,s*=108.883,[r,o,s]};mi.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);const s=Math.sqrt(t*t+i*i);return[e,s,r]};mi.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI,o=t*Math.cos(r),s=t*Math.sin(r);return[e,o,s]};mi.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let o=e===null?mi.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};mi.hsv.ansi16=function(n){return mi.rgb.ansi16(mi.hsv.rgb(n),n[2])};mi.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};mi.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[i,r,o]};mi.ansi256.rgb=function(n){if(n=n[0],n>=232){const o=(n-232)*10+8;return[o,o,o]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};mi.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};mi.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(a=>a+a).join(""));const i=Number.parseInt(t,16),r=i>>16&255,o=i>>8&255,s=i&255;return[r,o,s]};mi.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),s=r-o;let a;const c=s<1?o/(1-s):0;return s<=0?a=0:r===e?a=(t-i)/s%6:r===t?a=2+(i-e)/s:a=4+(e-t)/s,a/=6,a%=1,[a*360,s*100,c*100]};mi.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};mi.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};mi.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const r=[0,0,0],o=e%1*6,s=o%1,a=1-s;let c=0;switch(Math.floor(o)){case 0:{r[0]=1,r[1]=s,r[2]=0;break}case 1:{r[0]=a,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=s;break}case 3:{r[0]=0,r[1]=a,r[2]=1;break}case 4:{r[0]=s,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=a}return c=(1-t)*i,[(t*r[0]+c)*255,(t*r[1]+c)*255,(t*r[2]+c)*255]};mi.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};mi.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};mi.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};mi.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,r=i-e;let o=0;return r<1&&(o=(i-r)/(1-r)),[n[0],r*100,o*100]};mi.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};mi.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};mi.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};mi.gray.hsl=function(n){return[0,0,n[0]]};mi.gray.hsv=mi.gray.hsl;mi.gray.hwb=function(n){return[0,100,n[0]]};mi.gray.cmyk=function(n){return[0,0,0,n[0]]};mi.gray.lab=function(n){return[n[0],0,0]};mi.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};mi.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function pde(){const n={},e=Object.keys(mi);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function mde(n){const e=pde(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),r=Object.keys(mi[i]);for(let{length:o}=r,s=0;s<o;s++){const a=r[s],c=e[a];c.distance===-1&&(c.distance=e[i].distance+1,c.parent=i,t.unshift(a))}}return e}function gde(n,e){return function(t){return e(n(t))}}function yde(n,e){const t=[e[n].parent,n];let i=mi[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=gde(mi[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}function vde(n){const e=mde(n),t={},i=Object.keys(e);for(let{length:r}=i,o=0;o<r;o++){const s=i[o];e[s].parent!==null&&(t[s]=yde(s,e))}return t}const Hc={},bde=Object.keys(mi);function Cde(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function _de(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const r=n(t);if(typeof r=="object")for(let{length:o}=r,s=0;s<o;s++)r[s]=Math.round(r[s]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of bde){Hc[n]={},Object.defineProperty(Hc[n],"channels",{value:mi[n].channels}),Object.defineProperty(Hc[n],"labels",{value:mi[n].labels});const e=vde(n),t=Object.keys(e);for(const i of t){const r=e[i];Hc[n][i]=_de(r),Hc[n][i].raw=Cde(r)}}const dZ=["keyword","gray","hex"],DT={};for(const n of Object.keys(Hc))DT[[...Hc[n].labels].sort().join("")]=n;const PT={};function $u(n,e){if(!(this instanceof $u))return new $u(n,e);if(e&&e in dZ&&(e=null),e&&!(e in Hc))throw new Error("Unknown model: "+e);let t,i;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof $u)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const r=Mc.get(n);if(r===null)throw new Error("Unable to parse color from string: "+n);this.model=r.model,i=Hc[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(n.length>0){this.model=e||"rgb",i=Hc[this.model].channels;const r=Array.prototype.slice.call(n,0,i);this.color=KT(r,i),this.valpha=typeof n[i]=="number"?n[i]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(n);"alpha"in n&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const o=r.sort().join("");if(!(o in DT))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=DT[o];const{labels:s}=Hc[this.model],a=[];for(t=0;t<s.length;t++)a.push(n[s[t]]);this.color=KT(a)}if(PT[this.model])for(i=Hc[this.model].channels,t=0;t<i;t++){const r=PT[this.model][t];r&&(this.color[t]=r(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}$u.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in Mc.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return Mc.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return Mc.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Hc[this.model],{labels:t}=Hc[this.model];for(let i=0;i<e;i++)n[t[i]]=this.color[i];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new $u([...this.color.map(Mde(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new $u([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:$l("rgb",0,vc(255)),green:$l("rgb",1,vc(255)),blue:$l("rgb",2,vc(255)),hue:$l(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:$l("hsl",1,vc(100)),lightness:$l("hsl",2,vc(100)),saturationv:$l("hsv",1,vc(100)),value:$l("hsv",2,vc(100)),chroma:$l("hcg",1,vc(100)),gray:$l("hcg",2,vc(100)),white:$l("hwb",1,vc(100)),wblack:$l("hwb",2,vc(100)),cyan:$l("cmyk",0,vc(100)),magenta:$l("cmyk",1,vc(100)),yellow:$l("cmyk",2,vc(100)),black:$l("cmyk",3,vc(100)),x:$l("xyz",0,vc(95.047)),y:$l("xyz",1,vc(100)),z:$l("xyz",2,vc(108.833)),l:$l("lab",0,vc(100)),a:$l("lab",1),b:$l("lab",2),keyword(n){return n!==void 0?new $u(n):Hc[this.model].keyword(this.color)},hex(n){return n!==void 0?new $u(n):Mc.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new $u(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),Mc.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,i]of n.entries()){const r=i/255;e[t]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return $u.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),i=this.rgb(),r=e===void 0?.5:e,o=2*r-1,s=t.alpha()-i.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return $u.rgb(a*t.red()+c*i.red(),a*t.green()+c*i.green(),a*t.blue()+c*i.blue(),t.alpha()*r+i.alpha()*(1-r))}};for(const n of Object.keys(Hc)){if(dZ.includes(n))continue;const{channels:e}=Hc[n];$u.prototype[n]=function(...t){return this.model===n?new $u(this):t.length>0?new $u(t,n):new $u([...wde(Hc[this.model][n].raw(this.color)),this.valpha],n)},$u[n]=function(...t){let i=t[0];return typeof i=="number"&&(i=KT(t,e)),new $u(i,n)}}function xde(n,e){return Number(n.toFixed(e))}function Mde(n){return function(e){return xde(e,n)}}function $l(n,e,t){n=Array.isArray(n)?n:[n];for(const i of n)(PT[i]||=[])[e]=t;return n=n[0],function(i){let r;return i!==void 0?(t&&(i=t(i)),r=this[n](),r.color[e]=i,r):(r=this[n]().color[e],t&&(r=t(r)),r)}}function vc(n){return function(e){return Math.max(0,Math.min(n,e))}}function wde(n){return Array.isArray(n)?n:[n]}function KT(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function As(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return As=function(){return s},s}As();class Sde{_map=(As().s[0]++,void 0);_container=(As().s[1]++,void 0);_textEl=(As().s[2]++,null);constructor(){As().f[0]++}onAdd(e){return As().f[1]++,As().s[3]++,this._map=e,As().s[4]++,this._container=document.createElement("div"),As().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",As().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),As().s[7]++,this.setLabel("Zoom:"),As().s[8]++,this.addEventListeners(),As().s[9]++,this._container}updateZoomLevel(){As().f[2]++,As().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){As().f[3]++,As().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,As().s[12]++,this._textEl=this._container.querySelector("span"),As().s[13]++,this.updateZoomLevel()}addEventListeners(){As().f[4]++,As().s[14]++,this._map.on("render",()=>(As().f[5]++,As().s[15]++,this.updateZoomLevel())),As().s[16]++,this._map.on("zoomIn",()=>(As().f[6]++,As().s[17]++,this.updateZoomLevel())),As().s[18]++,this._map.on("zoomOut",()=>(As().f[7]++,As().s[19]++,this.updateZoomLevel()))}onRemove(){As().f[8]++,As().s[20]++,this._container.parentNode.removeChild(this._container),As().s[21]++,this._map=void 0}}function UT(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function LT(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function zT(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function Az(n,e){return{circle:e(n,.8),line:e(n,.6),polygon:e(n,.3),polygonOutline:e(n,.6),default:e(n,1)}}function Ede(n,e){const t=[],i=[],r=[];for(const o of Object.keys(n)){const s=n[o];if(!s||s.length===0){const a=Az(o,e);i.push(UT(a.circle,o)),r.push(zT(a.line,o)),t.push(LT(a.polygon,a.polygonOutline,o))}else for(const a of s){const c=Az(a,e);i.push(UT(c.circle,o,a)),r.push(zT(c.line,o,a)),t.push(LT(c.polygon,c.polygonOutline,o,a))}}return t.concat(r).concat(i)}function Bde(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};for(const o of Object.keys(n.sources)){const s=n.sources[o];(s.type==="vector"||s.type==="geojson")&&(r[o]=s)}return Object.assign(n,{layers:[i].concat(e),sources:r})}const SB={polygonLayer:LT,lineLayer:zT,circleLayer:UT,generateInspectStyle:Bde,generateColoredLayers:Ede};function Pr(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Pr=function(){return s},s}Pr();function EB(n,e){return Pr().f[0]++,Pr().s[0]++,n.type==="circle"?(Pr().b[0][0]++,Pr().s[1]++,n.paint["circle-radius"]=3):(Pr().b[0][1]++,Pr().s[2]++,n.type==="line"?(Pr().b[1][0]++,Pr().s[3]++,n.paint["line-width"]=2):Pr().b[1][1]++),Pr().s[4]++,"filter"in e?(Pr().b[2][0]++,Pr().s[5]++,n.filter=e.filter):(Pr().b[2][1]++,Pr().s[6]++,delete n.filter),Pr().s[7]++,n.id=n.id+"_highlight",Pr().s[8]++,n}function Ode(n){if(Pr().f[1]++,Pr().s[9]++,Pr().b[4][0]++,!n||(Pr().b[4][1]++,n.type==="background")||(Pr().b[4][2]++,n.type==="raster"))return Pr().b[3][0]++,Pr().s[10]++,null;Pr().b[3][1]++;const e=(Pr().s[11]++,Pr().b[5][0]++,n["source-layer"]||(Pr().b[5][1]++,"")),t=(Pr().s[12]++,oZ.brightColor(e,1));return Pr().s[13]++,Pr().b[7][0]++,n.type==="fill"||(Pr().b[7][1]++,n.type==="fill-extrusion")?(Pr().b[6][0]++,Pr().s[14]++,EB(SB.polygonLayer(t,t,n.source,n["source-layer"]),n)):(Pr().b[6][1]++,Pr().s[15]++,Pr().b[9][0]++,n.type==="symbol"||(Pr().b[9][1]++,n.type==="circle")?(Pr().b[8][0]++,Pr().s[16]++,EB(SB.circleLayer(t,n.source,n["source-layer"]),n)):(Pr().b[8][1]++,Pr().s[17]++,n.type==="line"?(Pr().b[10][0]++,Pr().s[18]++,EB(SB.lineLayer(t,n.source,n["source-layer"]),n)):(Pr().b[10][1]++,Pr().s[19]++,null)))}function wD(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wD=function(){return s},s}wD();wD().s[0]++;m_.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function BB(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(m){try{h(i.next(m))}catch(v){s(v)}}function c(m){try{h(i.throw(m))}catch(v){s(v)}}function h(m){m.done?o(m.value):r(m.value).then(a,c)}h((i=i.apply(n,e||[])).next())})}var N5=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function bE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var OB,hz;function fZ(){if(hz)return OB;hz=1,OB=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t}return OB}var IB={exports:{}},dz;function Ide(){return dz||(dz=1,(function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(i,r){return r.filter(function(o){return t.test(i,o)})},t.test=function(i,r){return t.match(i,r)!==null},t.match=function(i,r,o){o=o||{};var s=0,a=[],c=r.length,h=0,m=0,v=o.pre||"",x=o.post||"",E=o.caseSensitive&&r||r.toLowerCase(),R;i=o.caseSensitive&&i||i.toLowerCase();for(var P=0;P<c;P++)R=r[P],E[P]===i[s]?(R=v+R+x,s+=1,m+=1+m):m=0,h+=m,a[a.length]=R;return s===i.length?(h=E===i?1/0:h,{rendered:a.join(""),score:h}):null},t.filter=function(i,r,o){return!r||r.length===0?[]:typeof i!="string"?r:(o=o||{},r.reduce(function(s,a,c,h){var m=a;o.extract&&(m=o.extract(a));var v=t.match(i,m,o);return v!=null&&(s[s.length]={string:v.rendered,score:v.score,index:c,original:a}),s},[]).sort(function(s,a){var c=a.score-s.score;return c||s.index-a.index}))}})()})(IB)),IB.exports}var kB,fz;function kde(){if(fz)return kB;fz=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var i=document.createElement("li"),r=document.createElement("a");t&&(i.className+=" active"),r.innerHTML=e.string,i.appendChild(r),this.element.appendChild(i),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},kB=n,kB}var TB,pz;function Tde(){if(pz)return TB;pz=1;var n=fZ(),e=Ide(),t=kde(),i=function(r,o,s){return s=s||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},s),this.el=r,this.data=o||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode,a)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return i.prototype.handleKeyUp=function(r,o){if(!(r===40||r===38||r===27||r===9)){if(r===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),o.stopPropagation());return}this.handleInputChange(this.el.value)}},i.prototype.handleKeyDown=function(r){switch(r.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&r.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},i.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},i.prototype.handlePaste=function(r){if(r.clipboardData)this.handleInputChange(r.clipboardData.getData("Text"));else{var o=this;setTimeout(function(){o.handleInputChange(r.target.value)},100)}},i.prototype.handleInputChange=function(r){if(this.query=this.normalize(r),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(o){for(var s=0;s<o.length&&(this.list.add(o[s]),s!==this.options.limit-1);s++);this.list.draw()}).bind(this))},i.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},i.prototype.update=function(r){this.data=r,this.handleKeyUp()},i.prototype.clear=function(){this.data=[],this.list.clear()},i.prototype.normalize=function(r){return r=r.toLowerCase(),r},i.prototype.match=function(r,o){return r.indexOf(o)>-1},i.prototype.value=function(r){if(this.selected=r,this.el.value=this.getItemValue(r||{place_name:this.query}),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!1),this.el.dispatchEvent(o)}else this.el.fireEvent("onchange")},i.prototype.getCandidates=function(r){var o={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},s;this.options.filter?(s=e.filter(this.query,this.data,o),s=s.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):s=this.data.map((function(a){var c=this.render(a);return{original:a,string:c}}).bind(this)),r(s)},i.prototype.getItemValue=function(r){return r},i.prototype.render=function(r,o){if(o)return o;for(var s=r.original?this.getItemValue(r.original):this.getItemValue(r),a=this.normalize(s),c=a.lastIndexOf(this.query);c>-1;){var h=c+this.query.length;s=s.slice(0,c)+"<strong>"+s.slice(c,h)+"</strong>"+s.slice(h),c=a.slice(0,c).lastIndexOf(this.query)}return s},i.prototype.renderError=function(r){this.list.drawError(r)},TB=i,TB}var RB,mz;function Rde(){if(mz)return RB;mz=1;var n=Tde();return RB=n,typeof window<"u"&&(window.Suggestions=n),RB}var Dde=Rde(),Pde=bE(Dde),ow={exports:{}},Kde=ow.exports,gz;function Ude(){return gz||(gz=1,(function(n){(function(e,t,i){n.exports?n.exports=i():e[t]=i()})(Kde,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(c){return c.match(t)||[]}function r(c){return i(c).filter(function(h,m){return h&&m})}function o(c){return c=i(c),{language:c[1]||e,extlang:c[2]||e,script:c[3]||e,region:c[4]||e}}function s(c,h,m){Object.defineProperty(c,h,{value:m,enumerable:!0})}function a(c,h,m){function v(x){return i(x)[c]||e}s(v,"pattern",h),s(o,m,v)}return a(1,/^[a-zA-Z]{2,3}$/,"language"),a(2,/^[a-zA-Z]{3}$/,"extlang"),a(3,/^[a-zA-Z]{4}$/,"script"),a(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),s(o,"split",r),o})})(ow)),ow.exports}var Lde=Ude(),zde=bE(Lde),DB,yz;function Fde(){if(yz)return DB;yz=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof N5=="object"&&N5&&N5.Object===Object&&N5,h=typeof self=="object"&&self&&self.Object===Object&&self,m=c||h||Function("return this")(),v=Object.prototype,x=v.toString,E=Math.max,R=Math.min,P=function(){return m.Date.now()};function z(J,$,G){var oe,ue,xe,ge,Ie,Me,ke=0,je=!1,Be=!1,Ye=!0;if(typeof J!="function")throw new TypeError(n);$=Z($)||0,Q(G)&&(je=!!G.leading,Be="maxWait"in G,xe=Be?E(Z(G.maxWait)||0,$):xe,Ye="trailing"in G?!!G.trailing:Ye);function At(Lt){var Ue=oe,Oe=ue;return oe=ue=void 0,ke=Lt,ge=J.apply(Oe,Ue),ge}function yt(Lt){return ke=Lt,Ie=setTimeout(Ge,$),je?At(Lt):ge}function Le(Lt){var Ue=Lt-Me,Oe=Lt-ke,Ee=$-Ue;return Be?R(Ee,xe-Oe):Ee}function De(Lt){var Ue=Lt-Me,Oe=Lt-ke;return Me===void 0||Ue>=$||Ue<0||Be&&Oe>=xe}function Ge(){var Lt=P();if(De(Lt))return Te(Lt);Ie=setTimeout(Ge,Le(Lt))}function Te(Lt){return Ie=void 0,Ye&&oe?At(Lt):(oe=ue=void 0,ge)}function xt(){Ie!==void 0&&clearTimeout(Ie),ke=0,oe=Me=ue=Ie=void 0}function st(){return Ie===void 0?ge:Te(P())}function Tt(){var Lt=P(),Ue=De(Lt);if(oe=arguments,ue=this,Me=Lt,Ue){if(Ie===void 0)return yt(Me);if(Be)return Ie=setTimeout(Ge,$),At(Me)}return Ie===void 0&&(Ie=setTimeout(Ge,$)),ge}return Tt.cancel=xt,Tt.flush=st,Tt}function Q(J){var $=typeof J;return!!J&&($=="object"||$=="function")}function Y(J){return!!J&&typeof J=="object"}function H(J){return typeof J=="symbol"||Y(J)&&x.call(J)==t}function Z(J){if(typeof J=="number")return J;if(H(J))return e;if(Q(J)){var $=typeof J.valueOf=="function"?J.valueOf():J;J=Q($)?$+"":$}if(typeof J!="string")return J===0?J:+J;J=J.replace(i,"");var G=o.test(J);return G||s.test(J)?a(J.slice(2),G?2:8):r.test(J)?e:+J}return DB=z,DB}var jde=Fde(),Nde=bE(jde),Gde=fZ(),nm=bE(Gde),G5={exports:{}},vz;function Qde(){if(vz)return G5.exports;vz=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(J,$,G){return Function.prototype.apply.call(J,$,G)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(J){return Object.getOwnPropertyNames(J).concat(Object.getOwnPropertySymbols(J))}:t=function(J){return Object.getOwnPropertyNames(J)};function i(Z){console&&console.warn&&console.warn(Z)}var r=Number.isNaN||function(J){return J!==J};function o(){o.init.call(this)}G5.exports=o,G5.exports.once=Q,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(Z){if(typeof Z!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Z)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(Z){if(typeof Z!="number"||Z<0||r(Z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Z+".");s=Z}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(J){if(typeof J!="number"||J<0||r(J))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+J+".");return this._maxListeners=J,this};function c(Z){return Z._maxListeners===void 0?o.defaultMaxListeners:Z._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(J){for(var $=[],G=1;G<arguments.length;G++)$.push(arguments[G]);var oe=J==="error",ue=this._events;if(ue!==void 0)oe=oe&&ue.error===void 0;else if(!oe)return!1;if(oe){var xe;if($.length>0&&(xe=$[0]),xe instanceof Error)throw xe;var ge=new Error("Unhandled error."+(xe?" ("+xe.message+")":""));throw ge.context=xe,ge}var Ie=ue[J];if(Ie===void 0)return!1;if(typeof Ie=="function")e(Ie,this,$);else for(var Me=Ie.length,ke=R(Ie,Me),G=0;G<Me;++G)e(ke[G],this,$);return!0};function h(Z,J,$,G){var oe,ue,xe;if(a($),ue=Z._events,ue===void 0?(ue=Z._events=Object.create(null),Z._eventsCount=0):(ue.newListener!==void 0&&(Z.emit("newListener",J,$.listener?$.listener:$),ue=Z._events),xe=ue[J]),xe===void 0)xe=ue[J]=$,++Z._eventsCount;else if(typeof xe=="function"?xe=ue[J]=G?[$,xe]:[xe,$]:G?xe.unshift($):xe.push($),oe=c(Z),oe>0&&xe.length>oe&&!xe.warned){xe.warned=!0;var ge=new Error("Possible EventEmitter memory leak detected. "+xe.length+" "+String(J)+" listeners added. Use emitter.setMaxListeners() to increase limit");ge.name="MaxListenersExceededWarning",ge.emitter=Z,ge.type=J,ge.count=xe.length,i(ge)}return Z}o.prototype.addListener=function(J,$){return h(this,J,$,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(J,$){return h(this,J,$,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(Z,J,$){var G={fired:!1,wrapFn:void 0,target:Z,type:J,listener:$},oe=m.bind(G);return oe.listener=$,G.wrapFn=oe,oe}o.prototype.once=function(J,$){return a($),this.on(J,v(this,J,$)),this},o.prototype.prependOnceListener=function(J,$){return a($),this.prependListener(J,v(this,J,$)),this},o.prototype.removeListener=function(J,$){var G,oe,ue,xe,ge;if(a($),oe=this._events,oe===void 0)return this;if(G=oe[J],G===void 0)return this;if(G===$||G.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete oe[J],oe.removeListener&&this.emit("removeListener",J,G.listener||$));else if(typeof G!="function"){for(ue=-1,xe=G.length-1;xe>=0;xe--)if(G[xe]===$||G[xe].listener===$){ge=G[xe].listener,ue=xe;break}if(ue<0)return this;ue===0?G.shift():P(G,ue),G.length===1&&(oe[J]=G[0]),oe.removeListener!==void 0&&this.emit("removeListener",J,ge||$)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(J){var $,G,oe;if(G=this._events,G===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[J]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete G[J]),this;if(arguments.length===0){var ue=Object.keys(G),xe;for(oe=0;oe<ue.length;++oe)xe=ue[oe],xe!=="removeListener"&&this.removeAllListeners(xe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=G[J],typeof $=="function")this.removeListener(J,$);else if($!==void 0)for(oe=$.length-1;oe>=0;oe--)this.removeListener(J,$[oe]);return this};function x(Z,J,$){var G=Z._events;if(G===void 0)return[];var oe=G[J];return oe===void 0?[]:typeof oe=="function"?$?[oe.listener||oe]:[oe]:$?z(oe):R(oe,oe.length)}o.prototype.listeners=function(J){return x(this,J,!0)},o.prototype.rawListeners=function(J){return x(this,J,!1)},o.listenerCount=function(Z,J){return typeof Z.listenerCount=="function"?Z.listenerCount(J):E.call(Z,J)},o.prototype.listenerCount=E;function E(Z){var J=this._events;if(J!==void 0){var $=J[Z];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function R(Z,J){for(var $=new Array(J),G=0;G<J;++G)$[G]=Z[G];return $}function P(Z,J){for(;J+1<Z.length;J++)Z[J]=Z[J+1];Z.pop()}function z(Z){for(var J=new Array(Z.length),$=0;$<J.length;++$)J[$]=Z[$].listener||Z[$];return J}function Q(Z,J){return new Promise(function($,G){function oe(xe){Z.removeListener(J,ue),G(xe)}function ue(){typeof Z.removeListener=="function"&&Z.removeListener("error",oe),$([].slice.call(arguments))}H(Z,J,ue,{once:!0}),J!=="error"&&Y(Z,oe,{once:!0})})}function Y(Z,J,$){typeof Z.on=="function"&&H(Z,"error",J,$)}function H(Z,J,$,G){if(typeof Z.on=="function")G.once?Z.once(J,$):Z.on(J,$);else if(typeof Z.addEventListener=="function")Z.addEventListener(J,function oe(ue){G.once&&Z.removeEventListener(J,oe),$(ue)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Z)}return G5.exports}var Wde=Qde();const bz={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},qde={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:"",es:"Buscar"},Yde={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados",fr:"Aucun rsultat trouv"},Vde={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor",fr:"Une erreur est survenue lors de la connexion au serveur"};var l2={placeholder:qde,errorNoResults:Yde,errorConnectionFailed:Vde};const $de=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class Hde{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:i=>i.text!==void 0?i.text:i.place_name,render:function(i){if(!i.geometry){const o=i.text,s=o.toLowerCase().indexOf(this.query.toLowerCase()),a=this.query.length,c=o.substring(0,s),h=o.substring(s,s+a),m=o.substring(s+a);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+c+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+h+"</span>"+m+"</div></div></div>"}const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+r.splice(1,r.length).join(",")+"</div></div></div>"},popupRender:i=>{const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+r.splice(1,r.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new Wde.EventEmitter,this.options=nm({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(i,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const o=i.onAdd();r.appendChild(o)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const i=document.querySelectorAll(e);if(i.length===0)throw new Error("Element "+e+"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,i[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="search",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",Nde(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const r=document.createElement("div");r.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(i),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=new Pde(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width","18"),i.setAttribute("height","18"),"innerHTML"in i)i.innerHTML=t;else{const r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const o=r.firstChild,s=o.firstChild;i.appendChild(s)}return i}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const o=this._inputEl.value;if(!o)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(o);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(o,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}o.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(o)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&bz[e.properties.short_code])t=nm({},this.options.flyTo),this._map&&this._map.fitBounds(bz[e.properties.short_code].bbox,t);else if(e.bbox){const i=e.bbox;t=nm({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],t)}else{const i={zoom:this.options.zoom};t=nm({},i,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((i,r)=>(this.options[r]&&(["countries","types","language"].indexOf(r)>-1?i[r]=this.options[r].split(/[\s,]+/):i[r]=this.options[r],r==="proximity"&&this.options[r]&&typeof this.options[r].longitude=="number"&&typeof this.options[r].latitude=="number"&&(i[r]=[this.options[r].longitude,this.options[r].latitude])),i),{})}_geocode(e){return BB(this,arguments,void 0,function*(t,i=!1,r=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const o=this._getConfigForRequest(),s=this._createGeocodeRequest(o,t,i,r),a=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const c=yield s;yield this._handleGeocodeResponse(c,o,t,i,a)}catch(c){this._handleGeocodeErrorResponse(c,a)}return s})}_createGeocodeRequest(e,t,i,r){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&$de.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?i?this.geocoderApi.searchByPlaceId&&r?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const i=e.split(/[\s(,)?]+/).map(r=>parseFloat(r)).reverse();return t.query=i,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,i,r,o){return BB(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let s={};e?s=e:s={type:"FeatureCollection",features:[]},s.config=t,this.fresh&&(this.fresh=!1),s.features=s.features?o.concat(s.features):o;const a=this.options.externalGeocoder?this.options.externalGeocoder(i,s.features,t)||Promise.resolve([]):Promise.resolve([]);try{const h=yield a;s.features=s.features?h.concat(s.features):h}catch{}this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter));let c=[];"suggestions"in s?c=s.suggestions:"place"in s?c=[s.place]:c=s.features,c.length?(this._clearEl.style.display="block",this._typeahead.update(c),(!this.options.showResultsWhileTyping||r)&&this.options.showResultMarkers&&(s.features.length>0||"place"in s)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return BB(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=zde.language(this.options.language.split(",")[0]);return this.options.language&&l2?.[e][t]?l2[e][t]:l2[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const i=nm({},{padding:100},this.options.flyTo),r=new this._maplibregl.LngLatBounds;for(const o of e)r.extend(o.geometry.coordinates);this._map.fitBounds(r,i)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const i=nm({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(i);let r;if(this.options.popup){const s=nm({},{},this.options.popup);r=new this._maplibregl.Popup(s).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let i=nm({},{color:"#4668F2"},this.options.showResultMarkers);for(const r of e){let o;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(o=this.options.showResultMarkers.element.cloneNode(!0),i=nm(i,{element:o}));const s=new this._maplibregl.Marker(nm({},i,{element:o}));let a;if(this.options.popup){const h=nm({},{},this.options.popup);a=new this._maplibregl.Popup(h).setHTML(this.options.popupRender(r))}r.center?(s.setLngLat(r.center).addTo(this._map),this.options.popup&&s.setPopup(a)):r.geometry&&r.geometry.type&&r.geometry.type==="Point"&&r.geometry.coordinates&&(s.setLngLat(r.geometry.coordinates).addTo(this._map),this.options.popup&&s.setPopup(a)),this.resultMarkers.push(s)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Jt(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="1655c5d10102378b1e2627d777374c6f3c3f21a7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:26},end:{line:27,column:3}},1:{start:{line:28,column:16},end:{line:28,column:55}},2:{start:{line:29,column:2},end:{line:31,column:3}},3:{start:{line:30,column:4},end:{line:30,column:30}},4:{start:{line:32,column:18},end:{line:32,column:20}},5:{start:{line:33,column:2},end:{line:38,column:5}},6:{start:{line:34,column:19},end:{line:34,column:53}},7:{start:{line:35,column:4},end:{line:37,column:5}},8:{start:{line:36,column:6},end:{line:36,column:33}},9:{start:{line:39,column:23},end:{line:43,column:3}},10:{start:{line:44,column:2},end:{line:44,column:22}},11:{start:{line:47,column:24},end:{line:57,column:3}},12:{start:{line:58,column:14},end:{line:58,column:18}},13:{start:{line:60,column:4},end:{line:60,column:17}},14:{start:{line:61,column:4},end:{line:66,column:6}},15:{start:{line:67,column:4},end:{line:69,column:7}},16:{start:{line:68,column:6},end:{line:68,column:25}},17:{start:{line:72,column:17},end:{line:72,column:22}},18:{start:{line:73,column:4},end:{line:76,column:5}},19:{start:{line:74,column:6},end:{line:74,column:132}},20:{start:{line:77,column:4},end:{line:77,column:18}},21:{start:{line:80,column:16},end:{line:80,column:30}},22:{start:{line:81,column:28},end:{line:81,column:79}},23:{start:{line:82,column:4},end:{line:87,column:5}},24:{start:{line:83,column:6},end:{line:83,column:52}},25:{start:{line:84,column:6},end:{line:84,column:70}},26:{start:{line:85,column:6},end:{line:85,column:70}},27:{start:{line:86,column:6},end:{line:86,column:76}},28:{start:{line:88,column:4},end:{line:90,column:5}},29:{start:{line:89,column:6},end:{line:89,column:43}},30:{start:{line:91,column:4},end:{line:96,column:5}},31:{start:{line:92,column:6},end:{line:92,column:59}},32:{start:{line:93,column:6},end:{line:95,column:14}},33:{start:{line:94,column:8},end:{line:94,column:36}},34:{start:{line:99,column:20},end:{line:108,column:5}},35:{start:{line:109,column:21},end:{line:109,column:53}},36:{start:{line:110,column:4},end:{line:110,column:53}},37:{start:{line:111,column:16},end:{line:111,column:43}},38:{start:{line:112,column:26},end:{line:116,column:5}},39:{start:{line:113,column:21},end:{line:113,column:36}},40:{start:{line:114,column:19},end:{line:114,column:32}},41:{start:{line:115,column:6},end:{line:115,column:44}},42:{start:{line:117,column:4},end:{line:117,column:20}},43:{start:{line:118,column:4},end:{line:118,column:56}},44:{start:{line:119,column:4},end:{line:119,column:56}},45:{start:{line:120,column:4},end:{line:120,column:62}},46:{start:{line:121,column:21},end:{line:121,column:43}},47:{start:{line:122,column:24},end:{line:122,column:41}},48:{start:{line:123,column:4},end:{line:123,column:45}},49:{start:{line:124,column:16},end:{line:124,column:74}},50:{start:{line:125,column:4},end:{line:125,column:37}},51:{start:{line:126,column:20},end:{line:126,column:49}},52:{start:{line:127,column:17},end:{line:127,column:36}},53:{start:{line:128,column:25},end:{line:130,column:6}},54:{start:{line:131,column:20},end:{line:162,column:6}},55:{start:{line:139,column:8},end:{line:139,column:82}},56:{start:{line:141,column:62},end:{line:141,column:141}},57:{start:{line:143,column:8},end:{line:160,column:9}},58:{start:{line:144,column:10},end:{line:146,column:13}},59:{start:{line:145,column:12},end:{line:145,column:94}},60:{start:{line:147,column:10},end:{line:147,column:25}},61:{start:{line:149,column:10},end:{line:158,column:13}},62:{start:{line:150,column:12},end:{line:157,column:15}},63:{start:{line:159,column:10},end:{line:159,column:25}},64:{start:{line:163,column:4},end:{line:163,column:28}},65:{start:{line:164,column:4},end:{line:172,column:7}},66:{start:{line:165,column:6},end:{line:171,column:9}},67:{start:{line:173,column:4},end:{line:178,column:7}},68:{start:{line:174,column:6},end:{line:174,column:40}},69:{start:{line:174,column:33},end:{line:174,column:40}},70:{start:{line:175,column:6},end:{line:177,column:9}},71:{start:{line:179,column:4},end:{line:181,column:7}},72:{start:{line:180,column:6},end:{line:180,column:30}},73:{start:{line:182,column:4},end:{line:186,column:7}},74:{start:{line:183,column:6},end:{line:185,column:9}},75:{start:{line:187,column:4},end:{line:187,column:37}},76:{start:{line:188,column:4},end:{line:188,column:37}},77:{start:{line:190,column:22},end:{line:193,column:3}},78:{start:{line:191,column:18},end:{line:191,column:82}},79:{start:{line:191,column:66},end:{line:191,column:81}},80:{start:{line:192,column:4},end:{line:192,column:36}},81:{start:{line:195,column:27},end:{line:228,column:5}},82:{start:{line:197,column:25},end:{line:197,column:27}},83:{start:{line:198,column:8},end:{line:223,column:9}},84:{start:{line:199,column:26},end:{line:199,column:138}},85:{start:{line:200,column:27},end:{line:200,column:47}},86:{start:{line:201,column:26},end:{line:201,column:47}},87:{start:{line:202,column:10},end:{line:220,column:11}},88:{start:{line:203,column:27},end:{line:206,column:13}},89:{start:{line:207,column:26},end:{line:218,column:13}},90:{start:{line:219,column:12},end:{line:219,column:33}},91:{start:{line:222,column:10},end:{line:222,column:69}},92:{start:{line:224,column:8},end:{line:226,column:10}},93:{start:{line:229,column:21},end:{line:232,column:6}},94:{start:{line:233,column:4},end:{line:233,column:41}},95:{start:{line:234,column:4},end:{line:234,column:20}},96:{start:{line:237,column:14},end:{line:237,column:26}},97:{start:{line:238,column:4},end:{line:238,column:53}},98:{start:{line:239,column:4},end:{line:239,column:49}},99:{start:{line:240,column:4},end:{line:251,column:6}},100:{start:{line:247,column:10},end:{line:247,column:29}},101:{start:{line:254,column:22},end:{line:254,column:62}}},fnMap:{0:{name:"buildInspectStyle",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:78},end:{line:45,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:33,column:48},end:{line:33,column:49}},loc:{start:{line:33,column:62},end:{line:38,column:3}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:48,column:17},end:{line:48,column:18}},loc:{start:{line:48,column:23},end:{line:49,column:5}},line:48},3:{name:"(anonymous_3)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:51,column:5}},line:50},4:{name:"(anonymous_4)",decl:{start:{line:52,column:19},end:{line:52,column:20}},loc:{start:{line:52,column:25},end:{line:53,column:5}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:54,column:14},end:{line:54,column:15}},loc:{start:{line:54,column:20},end:{line:55,column:5}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:21},end:{line:70,column:3}},line:59},7:{name:"(anonymous_7)",decl:{start:{line:67,column:34},end:{line:67,column:35}},loc:{start:{line:67,column:40},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:46},end:{line:78,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:23},end:{line:97,column:3}},line:79},10:{name:"(anonymous_10)",decl:{start:{line:93,column:17},end:{line:93,column:18}},loc:{start:{line:93,column:23},end:{line:95,column:7}},line:93},11:{name:"(anonymous_11)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:22},end:{line:189,column:3}},line:98},12:{name:"(anonymous_12)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:32},end:{line:116,column:5}},line:112},13:{name:"(anonymous_13)",decl:{start:{line:138,column:24},end:{line:138,column:25}},loc:{start:{line:138,column:44},end:{line:140,column:7}},line:138},14:{name:"(anonymous_14)",decl:{start:{line:141,column:25},end:{line:141,column:26}},loc:{start:{line:141,column:62},end:{line:141,column:141}},line:141},15:{name:"(anonymous_15)",decl:{start:{line:142,column:19},end:{line:142,column:20}},loc:{start:{line:142,column:33},end:{line:161,column:7}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:144,column:36},end:{line:144,column:37}},loc:{start:{line:144,column:42},end:{line:146,column:11}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:149,column:36},end:{line:149,column:37}},loc:{start:{line:149,column:42},end:{line:158,column:11}},line:149},18:{name:"(anonymous_18)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:172,column:5}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:173,column:19},end:{line:173,column:20}},loc:{start:{line:173,column:26},end:{line:178,column:5}},line:173},20:{name:"(anonymous_20)",decl:{start:{line:179,column:20},end:{line:179,column:21}},loc:{start:{line:179,column:27},end:{line:181,column:5}},line:179},21:{name:"(anonymous_21)",decl:{start:{line:182,column:19},end:{line:182,column:20}},loc:{start:{line:182,column:27},end:{line:186,column:5}},line:182},22:{name:"(anonymous_22)",decl:{start:{line:190,column:22},end:{line:190,column:23}},loc:{start:{line:190,column:30},end:{line:193,column:3}},line:190},23:{name:"(anonymous_23)",decl:{start:{line:191,column:55},end:{line:191,column:56}},loc:{start:{line:191,column:66},end:{line:191,column:81}},line:191},24:{name:"(anonymous_24)",decl:{start:{line:194,column:2},end:{line:194,column:3}},loc:{start:{line:194,column:20},end:{line:235,column:3}},line:194},25:{name:"(anonymous_25)",decl:{start:{line:196,column:22},end:{line:196,column:23}},loc:{start:{line:196,column:40},end:{line:227,column:7}},line:196},26:{name:"(anonymous_26)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:252,column:3}},line:236},27:{name:"(anonymous_27)",decl:{start:{line:246,column:13},end:{line:246,column:14}},loc:{start:{line:246,column:20},end:{line:248,column:9}},line:246}},branchMap:{0:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},2:{loc:{start:{line:35,column:8},end:{line:35,column:64}},type:"binary-expr",locations:[{start:{line:35,column:8},end:{line:35,column:32}},{start:{line:35,column:36},end:{line:35,column:64}}],line:35},3:{loc:{start:{line:74,column:15},end:{line:74,column:131}},type:"binary-expr",locations:[{start:{line:74,column:15},end:{line:74,column:71}},{start:{line:74,column:75},end:{line:74,column:131}}],line:74},4:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},5:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},6:{loc:{start:{line:88,column:8},end:{line:88,column:98}},type:"binary-expr",locations:[{start:{line:88,column:8},end:{line:88,column:26}},{start:{line:88,column:30},end:{line:88,column:98}}],line:88},7:{loc:{start:{line:91,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},8:{loc:{start:{line:91,column:8},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:59}}],line:91},9:{loc:{start:{line:143,column:8},end:{line:160,column:9}},type:"if",locations:[{start:{line:143,column:8},end:{line:160,column:9}},{start:{line:148,column:15},end:{line:160,column:9}}],line:143},10:{loc:{start:{line:174,column:6},end:{line:174,column:40}},type:"if",locations:[{start:{line:174,column:6},end:{line:174,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:174}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA8LwB;AA9LxB,OAAO,WAAW;AAClB,SAAQ,kBAAiB;AACzB,OAAO,gBAAsI;AAC7I,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAAgE;AACvE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAAgC,6BAA6B;AAC7D,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAAoF;AAC3F,OAAO;AACP,SAAS,uBAA6C;AACtD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAM,OAAO,WAAW,OAAO;AAE/B,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO,oBAAC,qCAAkC,UAAoB,CAAE;AAAA,UACvE,CAAC;AACD,iBAAO;AAAA,QACT,OAAO;AACL,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO;AAAA,cAAC;AAAA;AAAA,gBACX;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB,CAAG;AAAA,UACL,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK;AAAC,eAAK,YAAY;AAAA,QAAE;AAAA,QAC9B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1655c5d10102378b1e2627d777374c6f3c3f21a7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Jt=function(){return s},s}Jt();function Zde(n,e,t){Jt().f[0]++;const i=(Jt().s[0]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),r=(Jt().s[1]++,Ode(t));Jt().s[2]++,r?(Jt().b[0][0]++,Jt().s[3]++,e.push(r)):Jt().b[0][1]++;const o=(Jt().s[4]++,{});Jt().s[5]++,Object.keys(n.sources).forEach(a=>{Jt().f[1]++;const c=(Jt().s[6]++,n.sources[a]);Jt().s[7]++,Jt().b[2][0]++,c.type!=="raster"&&(Jt().b[2][1]++,c.type!=="raster-dem")?(Jt().b[1][0]++,Jt().s[8]++,o[a]=c):Jt().b[1][1]++});const s=(Jt().s[9]++,{...n,sources:o,layers:[i].concat(e)});return Jt().s[10]++,s}class Xde extends En.Component{static defaultProps=(Jt().s[11]++,{onMapLoaded:()=>{Jt().f[2]++},onDataChange:()=>{Jt().f[3]++},onLayerSelect:()=>{Jt().f[4]++},onChange:()=>{Jt().f[5]++},options:{}});container=(Jt().s[12]++,null);constructor(e){Jt().f[6]++,Jt().s[13]++,super(e),Jt().s[14]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Jt().s[15]++,gA.on("languageChanged",()=>{Jt().f[7]++,Jt().s[16]++,this.forceUpdate()})}shouldComponentUpdate(e,t){Jt().f[8]++;let i=(Jt().s[17]++,!1);Jt().s[18]++;try{Jt().s[19]++,i=(Jt().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(Jt().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return Jt().s[20]++,i}componentDidUpdate(){Jt().f[9]++;const e=(Jt().s[21]++,this.state.map),t=(Jt().s[22]++,this.props.replaceAccessTokens(this.props.mapStyle));Jt().s[23]++,e?(Jt().b[4][0]++,Jt().s[24]++,e.setStyle(t,{diff:!0}),Jt().s[25]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,Jt().s[26]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,Jt().s[27]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):Jt().b[4][1]++,Jt().s[28]++,Jt().b[6][0]++,this.state.inspect&&(Jt().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Jt().b[5][0]++,Jt().s[29]++,this.state.inspect.toggleInspector()):Jt().b[5][1]++,Jt().s[30]++,Jt().b[8][0]++,this.state.inspect&&(Jt().b[8][1]++,this.props.inspectModeEnabled)?(Jt().b[7][0]++,Jt().s[31]++,this.state.inspect.setOriginalStyle(t),Jt().s[32]++,setTimeout(()=>{Jt().f[10]++,Jt().s[33]++,this.state.inspect.render()},500)):Jt().b[7][1]++}componentDidMount(){Jt().f[11]++;const e=(Jt().s[34]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),t=(Jt().s[35]++,new sle({metadata:!0}));Jt().s[36]++,m_.addProtocol("pmtiles",t.tile);const i=(Jt().s[37]++,new m_.Map(e));Jt().s[38]++;const r=()=>{Jt().f[12]++;const x=(Jt().s[39]++,i.getCenter()),E=(Jt().s[40]++,i.getZoom());Jt().s[41]++,this.props.onChange({center:x,zoom:E})};Jt().s[42]++,r(),Jt().s[43]++,i.showTileBoundaries=e.showTileBoundaries,Jt().s[44]++,i.showCollisionBoxes=e.showCollisionBoxes,Jt().s[45]++,i.showOverdrawInspector=e.showOverdrawInspector;const o=(Jt().s[46]++,this.initGeocoder(i)),s=(Jt().s[47]++,new Sde);Jt().s[48]++,i.addControl(s,"top-right");const a=(Jt().s[49]++,new m_.NavigationControl({visualizePitch:!0}));Jt().s[50]++,i.addControl(a,"top-right");const c=(Jt().s[51]++,document.createElement("div")),h=(Jt().s[52]++,f$.createRoot(c)),m=(Jt().s[53]++,new m_.Popup({closeOnClick:!1})),v=(Jt().s[54]++,new MD({popup:m,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(x,E)=>(Jt().f[13]++,Jt().s[55]++,$u(oZ.brightColor(x,E)).desaturate(.5).string()),buildInspectStyle:(x,E)=>(Jt().f[14]++,Jt().s[56]++,Zde(x,E,this.props.highlightedLayer)),renderPopup:x=>(Jt().f[15]++,Jt().s[57]++,this.props.inspectModeEnabled?(Jt().b[9][0]++,Jt().s[58]++,m.once("open",()=>{Jt().f[16]++,Jt().s[59]++,h.render(te.jsx(dde,{features:x}))}),Jt().s[60]++,c):(Jt().b[9][1]++,Jt().s[61]++,m.once("open",()=>{Jt().f[17]++,Jt().s[62]++,h.render(te.jsx(cZ,{features:x,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}))}),Jt().s[63]++,c))}));Jt().s[64]++,i.addControl(v),Jt().s[65]++,i.on("style.load",()=>{Jt().f[18]++,Jt().s[66]++,this.setState({map:i,inspect:v,geocoder:o,zoomControl:s,zoom:i.getZoom()})}),Jt().s[67]++,i.on("data",x=>{if(Jt().f[19]++,Jt().s[68]++,x.dataType!=="tile"){Jt().b[10][0]++,Jt().s[69]++;return}else Jt().b[10][1]++;Jt().s[70]++,this.props.onDataChange({map:this.state.map})}),Jt().s[71]++,i.on("error",x=>{Jt().f[20]++,Jt().s[72]++,console.log("ERROR",x)}),Jt().s[73]++,i.on("zoom",x=>{Jt().f[21]++,Jt().s[74]++,this.setState({zoom:i.getZoom()})}),Jt().s[75]++,i.on("dragend",r),Jt().s[76]++,i.on("zoomend",r)}onLayerSelectById=(Jt().s[77]++,e=>{Jt().f[22]++;const t=(Jt().s[78]++,this.props.mapStyle.layers.findIndex(i=>(Jt().f[23]++,Jt().s[79]++,i.id===e)));Jt().s[80]++,this.props.onLayerSelect(t)});initGeocoder(e){Jt().f[24]++;const t=(Jt().s[81]++,{forwardGeocode:async r=>{Jt().f[25]++;const o=(Jt().s[82]++,[]);Jt().s[83]++;try{const s=(Jt().s[84]++,`https://nominatim.openstreetmap.org/search?q=${r.query}&format=geojson&polygon_geojson=1&addressdetails=1`),a=(Jt().s[85]++,await fetch(s)),c=(Jt().s[86]++,await a.json());Jt().s[87]++;for(const h of c.features){const m=(Jt().s[88]++,[h.bbox[0]+(h.bbox[2]-h.bbox[0])/2,h.bbox[1]+(h.bbox[3]-h.bbox[1])/2]),v=(Jt().s[89]++,{type:"Feature",geometry:{type:"Point",coordinates:m},place_name:h.properties.display_name,properties:h.properties,text:h.properties.display_name,place_type:["place"],center:m});Jt().s[90]++,o.push(v)}}catch(s){Jt().s[91]++,console.error(`Failed to forwardGeocode with error: ${s}`)}return Jt().s[92]++,{features:o}}}),i=(Jt().s[93]++,new Hde(t,{placeholder:this.props.t("Search"),maplibregl:m_}));return Jt().s[94]++,e.addControl(i,"top-left"),Jt().s[95]++,i}render(){Jt().f[26]++;const e=(Jt().s[96]++,this.props.t);return Jt().s[97]++,this.state.geocoder?.setPlaceholder(e("Search")),Jt().s[98]++,this.state.zoomControl?.setLabel(e("Zoom:")),Jt().s[99]++,te.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>{Jt().f[27]++,Jt().s[100]++,this.container=t},"data-wd-key":"maplibre:map"})}}const Jde=(Jt().s[101]++,Fo()(Xde));var efe=8,tfe={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},nfe={"*":{type:"source"}},ife=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],rfe={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},ofe={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},sfe={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},afe={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},lfe={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},ufe={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},cfe={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Afe=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],hfe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},dfe={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ffe={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},pfe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},mfe={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},gfe={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yfe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vfe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bfe={type:"array",value:"*"},Cfe={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},_fe={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},xfe={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Mfe={type:"array",value:"*",minimum:1},wfe={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Sfe={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Efe={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},Bfe={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Ofe=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],Ife={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},kfe={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Tfe={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Rfe={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Dfe={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Pfe={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Kfe={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Ufe={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Lfe={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},zfe={"*":{type:"string"}},Ffe={$version:efe,$root:tfe,sources:nfe,source:ife,source_vector:rfe,source_raster:ofe,source_raster_dem:sfe,source_geojson:afe,source_video:lfe,source_image:ufe,layer:cfe,layout:Afe,layout_background:hfe,layout_fill:dfe,layout_circle:ffe,layout_heatmap:pfe,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:mfe,layout_symbol:gfe,layout_raster:yfe,layout_hillshade:vfe,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:bfe,filter_operator:Cfe,geometry_type:_fe,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:xfe,expression:Mfe,light:wfe,sky:Sfe,terrain:Efe,projection:Bfe,paint:Ofe,paint_fill:Ife,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:kfe,paint_circle:Tfe,paint_heatmap:Rfe,paint_symbol:Dfe,paint_raster:Pfe,paint_hillshade:Kfe,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Ufe,transition:Lfe,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:zfe};const jfe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Nfe(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return jfe.forEach(i=>{i in e&&(t[i]=e[i])}),t}function pZ(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Nfe(n[t],e[n[t].ref]));return n}class Rg extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class SD{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new SD(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const CE={kind:"null"},Jn={kind:"number"},bo={kind:"string"},io={kind:"boolean"},Vg={kind:"color"},_E={kind:"projectionDefinition"},Mb={kind:"object"},Jr={kind:"value"},Gfe={kind:"error"},xE={kind:"collator"},ME={kind:"formatted"},wE={kind:"padding"},z3={kind:"colorArray"},SE={kind:"numberArray"},$4={kind:"resolvedImage"},EE={kind:"variableAnchorOffsetCollection"};function yf(n,e){return{kind:"array",itemType:n,N:e}}function fl(n){if(n.kind==="array"){const e=fl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const Qfe=[CE,Jn,bo,io,Vg,_E,ME,Mb,yf(Jr),wE,SE,z3,$4,EE];function F3(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!F3(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of Qfe)if(!F3(t,e))return null}}return`Expected ${fl(n)} but found ${fl(e)} instead.`}function ED(n,e){return e.some(t=>t.kind===n.kind)}function wb(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function vy(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const mZ=.96422,gZ=1,yZ=.82521,vZ=4/29,F_=6/29,bZ=3*F_*F_,Wfe=F_*F_*F_,qfe=Math.PI/180,Yfe=180/Math.PI;function CZ(n){return n=n%360,n<0&&(n+=360),n}function _Z([n,e,t,i]){n=PB(n),e=PB(e),t=PB(t);let r,o;const s=KB((.2225045*n+.7168786*e+.0606169*t)/gZ);n===e&&e===t?r=o=s:(r=KB((.4360747*n+.3850649*e+.1430804*t)/mZ),o=KB((.0139322*n+.0971045*e+.7141733*t)/yZ));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function PB(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function KB(n){return n>Wfe?Math.pow(n,1/3):n/bZ+vZ}function xZ([n,e,t,i]){let r=(n+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(t)?r:r-t/200;return r=gZ*LB(r),o=mZ*LB(o),s=yZ*LB(s),[UB(3.1338561*o-1.6168667*r-.4906146*s),UB(-.9787684*o+1.9161415*r+.033454*s),UB(.0719453*o-.2289914*r+1.4052427*s),i]}function UB(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function LB(n){return n>F_?n*n*n:bZ*(n-vZ)}function Vfe(n){const[e,t,i,r]=_Z(n),o=Math.sqrt(t*t+i*i);return[Math.round(o*1e4)?CZ(Math.atan2(i,t)*Yfe):NaN,o,e,r]}function $fe([n,e,t,i]){return n=isNaN(n)?0:n*qfe,xZ([t,Math.cos(n)*e,Math.sin(n)*e,i])}function Hfe([n,e,t,i]){n=CZ(n),e/=100,t/=100;function r(o){const s=(o+n/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[r(0),r(8),r(4),i]}const Zfe=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function MZ(n,e){return Zfe(n,e)?n[e]:void 0}function Xfe(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=MZ(Jfe,n);if(e){const[r,o,s]=e;return[r/255,o/255,s/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const o=n.length<6?1:2;let s=1;return[Q5(n.slice(s,s+=o)),Q5(n.slice(s,s+=o)),Q5(n.slice(s,s+=o)),Q5(n.slice(s,s+o)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=n.match(r);if(o){const[s,a,c,h,m,v,x,E,R,P,z,Q]=o,Y=[h||" ",x||" ",P].join("");if(Y==="  "||Y==="  /"||Y===",,"||Y===",,,"){const H=[c,v,R].join(""),Z=H==="%%%"?100:H===""?255:0;if(Z){const J=[g_(+a/Z,0,1),g_(+m/Z,0,1),g_(+E/Z,0,1),z?Cz(+z,Q):1];if(_z(J))return J}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,o,s,a,c,h,m,v,x]=i,E=[s||" ",c||" ",m].join("");if(E==="  "||E==="  /"||E===",,"||E===",,,"){const R=[+o,g_(+a,0,100),g_(+h,0,100),v?Cz(+v,x):1];if(_z(R))return Hfe(R)}}}function Q5(n){return parseInt(n.padEnd(2,n),16)/255}function Cz(n,e){return g_(e?n/100:n,0,1)}function g_(n,e,t){return Math.min(Math.max(e,n),t)}function _z(n){return!n.some(Number.isNaN)}const Jfe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Sb(n,e,t){return n+t*(e-n)}function j3(n,e,t){return n.map((i,r)=>Sb(i,e[r],t))}class $s{constructor(e,t,i,r=1,o=!0){this.r=e,this.g=t,this.b=i,this.a=r,o||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof $s)return e;if(typeof e!="string")return;const t=Xfe(e);if(t)return new $s(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,o=r||1/0;return this.overwriteGetter("rgb",[e/o,t/o,i/o,r])}get hcl(){return this.overwriteGetter("hcl",Vfe(this.rgb))}get lab(){return this.overwriteGetter("lab",_Z(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(o=>Math.round(o*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[o,s,a,c]=j3(e.rgb,t.rgb,i);return new $s(o,s,a,c,!1)}case"hcl":{const[o,s,a,c]=e.hcl,[h,m,v,x]=t.hcl;let E,R;if(!isNaN(o)&&!isNaN(h)){let H=h-o;h>o&&H>180?H-=360:h<o&&o-h>180&&(H+=360),E=o+i*H}else isNaN(o)?isNaN(h)?E=NaN:(E=h,(a===1||a===0)&&(R=m)):(E=o,(v===1||v===0)&&(R=s));const[P,z,Q,Y]=$fe([E,R??Sb(s,m,i),Sb(a,v,i),Sb(c,x,i)]);return new $s(P,z,Q,Y,!1)}case"lab":{const[o,s,a,c]=xZ(j3(e.lab,t.lab,i));return new $s(o,s,a,c,!1)}}}}$s.black=new $s(0,0,0,1);$s.white=new $s(1,1,1,1);$s.transparent=new $s(0,0,0,0);$s.red=new $s(1,0,0,1);class BD{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const epe=["bottom","center","top"];class FT{constructor(e,t,i,r,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=o,this.verticalAlign=s}}class o1{constructor(e){this.sections=e}static fromString(e){return new o1([new FT(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof o1?e:o1.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class fm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof fm)return e;if(typeof e=="number")return new fm([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new fm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new fm(j3(e.values,t.values,i))}}class pm{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof pm)return e;if(typeof e=="number")return new pm([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new pm(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new pm(j3(e.values,t.values,i))}}class bf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof bf)return e;if(typeof e=="string"){const i=$s.parse(e);return i?new bf([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=$s.parse(i);if(!r)return;t.push(r)}return new bf(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const o=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let s=0;s<e.values.length;s++)o.push($s.interpolate(e.values[s],t.values[s],i,r));return new bf(o)}}class Bl extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const tpe=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $g{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof $g)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!tpe.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new $g(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,o=t.values;if(r.length!==o.length)throw new Bl(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<r.length;a+=2){if(r[a]!==o[a])throw new Bl(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${r[a]}, to[${a}]: ${o[a]}`);s.push(r[a]);const[c,h]=r[a+1],[m,v]=o[a+1];s.push([Sb(c,m,i),Sb(h,v,i)])}return new $g(s)}}class cv{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new cv({name:e,available:!1}):null}}class um{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new um(e,t,i)}static parse(e){if(e instanceof um)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new um(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new um(e.from,e.to,e.transition);if(typeof e=="string")return new um(e,e,1)}}function wZ(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function N3(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof um||n instanceof $s||n instanceof BD||n instanceof o1||n instanceof fm||n instanceof pm||n instanceof bf||n instanceof $g||n instanceof cv)return!0;if(Array.isArray(n)){for(const e of n)if(!N3(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!N3(n[e]))return!1;return!0}else return!1}function Xu(n){if(n===null)return CE;if(typeof n=="string")return bo;if(typeof n=="boolean")return io;if(typeof n=="number")return Jn;if(n instanceof $s)return Vg;if(n instanceof um)return _E;if(n instanceof BD)return xE;if(n instanceof o1)return ME;if(n instanceof fm)return wE;if(n instanceof pm)return SE;if(n instanceof bf)return z3;if(n instanceof $g)return EE;if(n instanceof cv)return $4;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=Xu(i);if(!t)t=r;else{if(t===r)continue;t=Jr;break}}return yf(t||Jr,e)}else return Mb}function l3(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof $s||n instanceof um||n instanceof o1||n instanceof fm||n instanceof pm||n instanceof bf||n instanceof $g||n instanceof cv?n.toString():JSON.stringify(n)}class ux{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!N3(e[1]))return t.error("invalid value");const i=e[1];let r=Xu(i);const o=t.expectedType;return r.kind==="array"&&r.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(r=o),new ux(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const W5={string:bo,number:Jn,boolean:io,object:Mb};class cm{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const o=e[0];if(o==="array"){let a;if(e.length>2){const h=e[1];if(typeof h!="string"||!(h in W5)||h==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=W5[h],i++}else a=Jr;let c;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);c=e[2],i++}r=yf(a,c)}else{if(!W5[o])throw new Error(`Types doesn't contain name = ${o}`);r=W5[o]}const s=[];for(;i<e.length;i++){const a=t.parse(e[i],i,Jr);if(!a)return null;s.push(a)}return new cm(r,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(F3(this.type,Xu(i))){if(t===this.args.length-1)throw new Bl(`Expected value to be of type ${fl(this.type)}, but found ${fl(Xu(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const xz={"to-boolean":io,"to-color":Vg,"to-number":Jn,"to-string":bo};class Uy{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!xz[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=xz[i],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,Jr);if(!a)return null;o.push(a)}return new Uy(r,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof $s)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=wZ(t[0],t[1],t[2],t[3]),!i))return new $s(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Bl(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=fm.parse(t);if(r)return r}throw new Bl(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=pm.parse(t);if(r)return r}throw new Bl(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=bf.parse(t);if(r)return r}throw new Bl(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=$g.parse(t);if(r)return r}throw new Bl(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Bl(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return o1.fromString(l3(this.args[0].evaluate(e)));case"resolvedImage":return cv.fromString(l3(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return l3(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const npe=["Unknown","Point","LineString","Polygon"];class SZ{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?npe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=$s.parse(e),this._parseColorCache.set(e,t)),t}}class BE{constructor(e,t,i=[],r,o=new SD,s=[]){this.registry=e,this.path=i,this.key=i.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,o={}){return t?this.concat(t,i,r)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,o,s){return s==="assert"?new cm(o,[r]):s==="coerce"?new Uy(o,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[r];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&c.kind==="value")s=i(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(c.kind)||a.kind==="colorArray"&&["value","string","array"].includes(c.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))s=i(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,c))return null}if(!(s instanceof ux)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new SZ;try{s=new ux(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new BE(this.registry,this._isConstant,r,t||null,o,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new Rg(i,e))}checkSubtype(e,t){const i=F3(e,t);return i&&this.error(i),i}}class OE{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new OE(i,r):null}outputDefined(){return this.result.outputDefined()}}class IE{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new IE(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class OD{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jn),r=t.parse(e[2],2,yf(t.expectedType||Jr));if(!i||!r)return null;const o=r.type;return new OD(o.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new Bl(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new Bl(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new Bl(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class ID{constructor(e,t){this.type=io,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jr),r=t.parse(e[2],2,Jr);return!i||!r?null:ED(i.type,[io,bo,Jn,CE,Jr])?new ID(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${fl(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!wb(t,["boolean","string","number","null"]))throw new Bl(`Expected first argument to be of type boolean, string, number or null, but found ${fl(Xu(t))} instead.`);if(!wb(i,["string","array"]))throw new Bl(`Expected second argument to be of type array or string, but found ${fl(Xu(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Gw{constructor(e,t,i){this.type=Jn,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jr),r=t.parse(e[2],2,Jr);if(!i||!r)return null;if(!ED(i.type,[io,bo,Jn,CE,Jr]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${fl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Jn);return o?new Gw(i,r,o):null}else return new Gw(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!wb(t,["boolean","string","number","null"]))throw new Bl(`Expected first argument to be of type boolean, string, number or null, but found ${fl(Xu(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),wb(i,["string"])){const o=i.indexOf(t,r);return o===-1?-1:[...i.slice(0,o)].length}else{if(wb(i,["array"]))return i.indexOf(t,r);throw new Bl(`Expected second argument to be of type array or string, but found ${fl(Xu(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class kD{constructor(e,t,i,r,o,s){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const o={},s=[];for(let h=2;h<e.length-1;h+=2){let m=e[h];const v=e[h+1];Array.isArray(m)||(m=[m]);const x=t.concat(h);if(m.length===0)return x.error("Expected at least one branch label.");for(const R of m){if(typeof R!="number"&&typeof R!="string")return x.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return x.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof R=="number"&&Math.floor(R)!==R)return x.error("Numeric branch labels must be integer values.");if(!i)i=Xu(R);else if(x.checkSubtype(i,Xu(R)))return null;if(typeof o[String(R)]<"u")return x.error("Branch labels must be unique.");o[String(R)]=s.length}const E=t.parse(v,h,r);if(!E)return null;r=r||E.type,s.push(E)}const a=t.parse(e[1],1,Jr);if(!a)return null;const c=t.parse(e[e.length-1],e.length-1,r);return!c||a.type.kind!=="value"&&t.concat(1).checkSubtype(i,a.type)?null:new kD(i,r,a,o,s,c)}evaluate(e){const t=this.input.evaluate(e);return(Xu(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class TD{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,io);if(!a)return null;const c=t.parse(e[s+1],s+1,i);if(!c)return null;r.push([a,c]),i=i||c.type}const o=t.parse(e[e.length-1],e.length-1,i);if(!o)return null;if(!i)throw new Error("Can't infer output type");return new TD(i,r,o)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Qw{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Jr),r=t.parse(e[2],2,Jn);if(!i||!r)return null;if(!ED(i.type,[yf(Jr),bo,Jr]))return t.error(`Expected first argument to be of type array or string, but found ${fl(i.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,Jn);return o?new Qw(i.type,i,r,o):null}else return new Qw(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),wb(t,["string"]))return[...t].slice(i,r).join("");if(wb(t,["array"]))return t.slice(i,r);throw new Bl(`Expected first argument to be of type array or string, but found ${fl(Xu(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function EZ(n,e){const t=n.length-1;let i=0,r=t,o=0,s,a;for(;i<=r;)if(o=Math.floor((i+r)/2),s=n[o],a=n[o+1],s<=e){if(o===t||e<a)return o;i=o+1}else if(s>e)r=o-1;else throw new Bl("Input is not a number.");return 0}class kE{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,o]of i)this.labels.push(r),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,Jn);if(!i)return null;const r=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],c=e[s+1],h=s,m=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const v=t.parse(c,m,o);if(!v)return null;o=o||v.type,r.push([a,v])}return new kE(o,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=EZ(t,r);return i[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ipe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zB,Mz;function rpe(){if(Mz)return zB;Mz=1,zB=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var o=this.sampleCurveX(i)-e;if(Math.abs(o)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i=i-o/s}var a=0,c=1;for(i=e,r=0;r<20&&(o=this.sampleCurveX(i),!(Math.abs(o-e)<t));r++)e>o?a=i:c=i,i=(c-a)*.5+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},zB}var ope=rpe(),spe=ipe(ope);class Hg{constructor(e,t,i,r,o){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let o=0;if(e.name==="exponential")o=FB(t,e.base,i,r);else if(e.name==="linear")o=FB(t,1,i,r);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new spe(s[0],s[1],s[2],s[3]).solve(FB(t,1,i,r))}return o}static parse(e,t){let[i,r,o,...s]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const h=r[1];if(typeof h!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:h}}else if(r[0]==="cubic-bezier"){const h=r.slice(1);if(h.length!==4||h.some(m=>typeof m!="number"||m<0||m>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:h}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,Jn),!o)return null;const a=[];let c=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=z3?c=Vg:t.expectedType&&t.expectedType.kind!=="value"&&(c=t.expectedType);for(let h=0;h<s.length;h+=2){const m=s[h],v=s[h+1],x=h+3,E=h+4;if(typeof m!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(a.length&&a[a.length-1][0]>=m)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);const R=t.parse(v,E,c);if(!R)return null;c=c||R.type,a.push([m,R])}return!vy(c,Jn)&&!vy(c,_E)&&!vy(c,Vg)&&!vy(c,wE)&&!vy(c,SE)&&!vy(c,z3)&&!vy(c,EE)&&!vy(c,yf(Jn))?t.error(`Type ${fl(c)} is not interpolatable.`):new Hg(c,i,r,o,a)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const o=t.length;if(r>=t[o-1])return i[o-1].evaluate(e);const s=EZ(t,r),a=t[s],c=t[s+1],h=Hg.interpolationFactor(this.interpolation,r,a,c),m=i[s].evaluate(e),v=i[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Sb(m,v,h);case"color":return $s.interpolate(m,v,h);case"padding":return fm.interpolate(m,v,h);case"colorArray":return bf.interpolate(m,v,h);case"numberArray":return pm.interpolate(m,v,h);case"variableAnchorOffsetCollection":return $g.interpolate(m,v,h);case"array":return j3(m,v,h);case"projectionDefinition":return um.interpolate(m,v,h)}case"interpolate-hcl":switch(this.type.kind){case"color":return $s.interpolate(m,v,h,"hcl");case"colorArray":return bf.interpolate(m,v,h,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return $s.interpolate(m,v,h,"lab");case"colorArray":return bf.interpolate(m,v,h,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function FB(n,e,t,i){const r=i-t,o=n-t;return r===0?0:e===1?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class G3{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const o=[];for(const a of e.slice(1)){const c=t.parse(a,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}if(!i)throw new Error("No output type");return r&&o.some(a=>F3(r,a.type))?new G3(Jr,o):new G3(i,o)}evaluate(e){let t=null,i=0,r;for(const o of this.args)if(i++,t=o.evaluate(e),t&&t instanceof cv&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function wz(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function ape(n,e,t){return e===t}function lpe(n,e,t){return e!==t}function upe(n,e,t){return e<t}function cpe(n,e,t){return e>t}function Ape(n,e,t){return e<=t}function hpe(n,e,t){return e>=t}function BZ(n,e,t,i){return i.compare(e,t)===0}function dpe(n,e,t,i){return!BZ(n,e,t,i)}function fpe(n,e,t,i){return i.compare(e,t)<0}function ppe(n,e,t,i){return i.compare(e,t)>0}function mpe(n,e,t,i){return i.compare(e,t)<=0}function gpe(n,e,t,i){return i.compare(e,t)>=0}function Rx(n,e,t){const i=n!=="=="&&n!=="!=";return class OZ{constructor(o,s,a){this.type=io,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,Jr);if(!c)return null;if(!wz(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${fl(c.type)}'.`);let h=s.parse(o[2],2,Jr);if(!h)return null;if(!wz(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${fl(h.type)}'.`);if(c.type.kind!==h.type.kind&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error(`Cannot compare types '${fl(c.type)}' and '${fl(h.type)}'.`);i&&(c.type.kind==="value"&&h.type.kind!=="value"?c=new cm(h.type,[c]):c.type.kind!=="value"&&h.type.kind==="value"&&(h=new cm(c.type,[h])));let m=null;if(o.length===4){if(c.type.kind!=="string"&&h.type.kind!=="string"&&c.type.kind!=="value"&&h.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(m=s.parse(o[3],3,xE),!m)return null}return new OZ(c,h,m)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(i&&this.hasUntypedArgument){const c=Xu(s),h=Xu(a);if(c.kind!==h.kind||!(c.kind==="string"||c.kind==="number"))throw new Bl(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const c=Xu(s),h=Xu(a);if(c.kind!=="string"||h.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const ype=Rx("==",ape,BZ),vpe=Rx("!=",lpe,dpe),bpe=Rx("<",upe,fpe),Cpe=Rx(">",cpe,ppe),_pe=Rx("<=",Ape,mpe),xpe=Rx(">=",hpe,gpe);class TE{constructor(e,t,i){this.type=xE,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,io);if(!r)return null;const o=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,io);if(!o)return null;let s=null;return i.locale&&(s=t.parse(i.locale,1,bo),!s)?null:new TE(r,o,s)}evaluate(e){return new BD(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class RD{constructor(e,t,i,r,o){this.type=bo,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Jn);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let o=null;if(r.locale&&(o=t.parse(r.locale,1,bo),!o))return null;let s=null;if(r.currency&&(s=t.parse(r.currency,1,bo),!s))return null;let a=null;if(r["min-fraction-digits"]&&(a=t.parse(r["min-fraction-digits"],1,Jn),!a))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,Jn),!c)?null:new RD(i,o,s,a,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class DD{constructor(e){this.type=ME,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=t.parse(a["font-scale"],1,Jn),!c))return null;let h=null;if(a["text-font"]&&(h=t.parse(a["text-font"],1,yf(bo)),!h))return null;let m=null;if(a["text-color"]&&(m=t.parse(a["text-color"],1,Vg),!m))return null;let v=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!epe.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(v=t.parse(a["vertical-align"],1,bo),!v)return null}const x=r[r.length-1];x.scale=c,x.font=h,x.textColor=m,x.verticalAlign=v}else{const c=t.parse(e[s],1,Jr);if(!c)return null;const h=c.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new DD(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return Xu(r)===$4?new FT("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new FT(l3(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new o1(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class PD{constructor(e){this.type=$4,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,bo);return i?new PD(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=cv.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class KD{constructor(e){this.type=Jn,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${fl(i.type)} instead.`):new KD(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new Bl(`Expected value to be of type string or array, but found ${fl(Xu(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Zg=8192;function Mpe(n,e){const t=wpe(n[0]),i=Epe(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Zg),Math.round(i*r*Zg)]}function UD(n,e){const t=Math.pow(2,e.z),i=(n[0]/Zg+e.x)/t,r=(n[1]/Zg+e.y)/t;return[Spe(i),Bpe(r)]}function wpe(n){return(180+n)/360}function Spe(n){return n*360-180}function Epe(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Bpe(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function H4(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function Q3(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Ope(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function Ipe(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],o=n[0]-t[0],s=n[1]-t[1];return i*s-o*r===0&&i*o<=0&&r*s<=0}function RE(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],o=[i[0]-t[0],i[1]-t[1]];return Dpe(o,r)===0?!1:!!(Sz(n,e,t,i)&&Sz(t,i,n,e))}function kpe(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(RE(n,e,i[r],i[r+1]))return!0;return!1}function Dx(n,e,t=!1){let i=!1;for(const r of e)for(let o=0;o<r.length-1;o++){if(Ipe(n,r[o],r[o+1]))return t;Ope(n,r[o],r[o+1])&&(i=!i)}return i}function Tpe(n,e){for(const t of e)if(Dx(n,t))return!0;return!1}function IZ(n,e){for(const t of n)if(!Dx(t,e))return!1;for(let t=0;t<n.length-1;++t)if(kpe(n[t],n[t+1],e))return!1;return!0}function Rpe(n,e){for(const t of e)if(IZ(n,t))return!0;return!1}function Dpe(n,e){return n[0]*e[1]-n[1]*e[0]}function Sz(n,e,t,i){const r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],c=i[0]-t[0],h=i[1]-t[1],m=r*h-c*o,v=s*h-c*a;return m>0&&v<0||m<0&&v>0}function LD(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=[];for(let s=0;s<n[r].length;s++){const a=Mpe(n[r][s],t);H4(e,a),o.push(a)}i.push(o)}return i}function kZ(n,e,t){const i=[];for(let r=0;r<n.length;r++){const o=LD(n[r],e,t);i.push(o)}return i}function TZ(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let o=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;o===0&&(o=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=o}H4(e,n)}function Ppe(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function Ez(n,e,t,i){const r=Math.pow(2,i.z)*Zg,o=[i.x*Zg,i.y*Zg],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];TZ(h,e,t,r),s.push(h)}return s}function Bz(n,e,t,i){const r=Math.pow(2,i.z)*Zg,o=[i.x*Zg,i.y*Zg],s=[];for(const a of n){const c=[];for(const h of a){const m=[h.x+o[0],h.y+o[1]];H4(e,m),c.push(m)}s.push(c)}if(e[2]-e[0]<=r/2){Ppe(e);for(const a of s)for(const c of a)TZ(c,e,t,r)}return s}function Kpe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=LD(e.coordinates,i,r),s=Ez(n.geometry(),t,i,r);if(!Q3(t,i))return!1;for(const a of s)if(!Dx(a,o))return!1}if(e.type==="MultiPolygon"){const o=kZ(e.coordinates,i,r),s=Ez(n.geometry(),t,i,r);if(!Q3(t,i))return!1;for(const a of s)if(!Tpe(a,o))return!1}return!0}function Upe(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const o=LD(e.coordinates,i,r),s=Bz(n.geometry(),t,i,r);if(!Q3(t,i))return!1;for(const a of s)if(!IZ(a,o))return!1}if(e.type==="MultiPolygon"){const o=kZ(e.coordinates,i,r),s=Bz(n.geometry(),t,i,r);if(!Q3(t,i))return!1;for(const a of s)if(!Rpe(a,o))return!1}return!0}class Eb{constructor(e,t){this.type=io,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(N3(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const o of i.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&r.push(a),s==="MultiPolygon"&&r.push(...a)}if(r.length){const o={type:"MultiPolygon",coordinates:r};return new Eb(i,o)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Eb(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Eb(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Kpe(e,this.geometries);if(e.geometryType()==="LineString")return Upe(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class RZ{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(i(r,s)>=0)break;t[e]=s,e=o}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,o=t[e];for(;e<r;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&i(t[a],t[s])<0&&(s=a),i(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}}function Lpe(n,e){if(n.length<=1)return[n];const i=[];let r,o;for(const s of n){const a=zpe(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(r&&i.push(r),r=[s]):r.push(s))}return r&&i.push(r),i}function zpe(n){let e=0;for(let t=0,i=n.length,r=i-1,o,s;t<i;r=t++)o=n[t],s=n[r],e+=(s.x-o.x)*(o.y+s.y);return e}const Fpe=6378.137,Oz=1/298.257223563,Iz=Oz*(2-Oz),kz=Math.PI/180;class zD{constructor(e){const t=kz*Fpe*1e3,i=Math.cos(e*kz),r=1/(1-Iz*(1-i*i)),o=Math.sqrt(r);this.kx=t*o*i,this.ky=t*o*r*(1-Iz)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,o,s,a;for(let c=0;c<e.length-1;c++){let h=e[c][0],m=e[c][1],v=this.wrap(e[c+1][0]-h)*this.kx,x=(e[c+1][1]-m)*this.ky,E=0;(v!==0||x!==0)&&(E=(this.wrap(t[0]-h)*this.kx*v+(t[1]-m)*this.ky*x)/(v*v+x*x),E>1?(h=e[c+1][0],m=e[c+1][1]):E>0&&(h+=v/this.kx*E,m+=x/this.ky*E)),v=this.wrap(t[0]-h)*this.kx,x=(t[1]-m)*this.ky;const R=v*v+x*x;R<i&&(i=R,r=h,o=m,s=c,a=E)}return{point:[r,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const jT=100,NT=50;function DZ(n,e){return e[0]-n[0]}function Ww(n){return n[1]-n[0]+1}function c1(n,e){return n[1]>=n[0]&&n[1]<e}function GT(n,e){if(n[0]>n[1])return[null,null];const t=Ww(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function QT(n,e){if(!c1(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)H4(t,n[i]);return t}function WT(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)H4(e,i);return e}function Tz(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function FD(n,e,t){if(!Tz(n)||!Tz(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function db(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function jD(n,e,t,i,r){const o=Math.min(db(n,[t,i],r),db(e,[t,i],r)),s=Math.min(db(t,[n,e],r),db(i,[n,e],r));return Math.min(o,s)}function jpe(n,e,t,i,r){if(!(c1(e,n.length)&&c1(i,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const c=n[a],h=n[a+1];for(let m=i[0];m<i[1];++m){const v=t[m],x=t[m+1];if(RE(c,h,v,x))return 0;s=Math.min(s,jD(c,h,v,x,r))}}return s}function Npe(n,e,t,i,r){if(!(c1(e,n.length)&&c1(i,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let c=i[0];c<=i[1];++c)if(s=Math.min(s,r.distance(n[a],t[c])),s===0)return s;return s}function Gpe(n,e,t){if(Dx(n,e,!0))return 0;let i=1/0;for(const r of e){const o=r[0],s=r[r.length-1];if(o!==s&&(i=Math.min(i,db(n,[s,o],t)),i===0))return i;const a=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,a.point)),i===0)return i}return i}function Qpe(n,e,t,i){if(!c1(e,n.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Dx(n[o],t,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const s=n[o],a=n[o+1];for(const c of t)for(let h=0,m=c.length,v=m-1;h<m;v=h++){const x=c[v],E=c[h];if(RE(s,a,x,E))return 0;r=Math.min(r,jD(s,a,x,E,i))}}return r}function Rz(n,e){for(const t of n)for(const i of t)if(Dx(i,e,!0))return!0;return!1}function Wpe(n,e,t,i=1/0){const r=WT(n),o=WT(e);if(i!==1/0&&FD(r,o,t)>=i)return i;if(Q3(r,o)){if(Rz(n,e))return 0}else if(Rz(e,n))return 0;let s=1/0;for(const a of n)for(let c=0,h=a.length,m=h-1;c<h;m=c++){const v=a[m],x=a[c];for(const E of e)for(let R=0,P=E.length,z=P-1;R<P;z=R++){const Q=E[z],Y=E[R];if(RE(v,x,Q,Y))return 0;s=Math.min(s,jD(v,x,Q,Y,t))}}return s}function Dz(n,e,t,i,r,o){if(!o)return;const s=FD(QT(i,o),r,t);s<e&&n.push([s,o,[0,0]])}function q5(n,e,t,i,r,o,s){if(!o||!s)return;const a=FD(QT(i,o),QT(r,s),t);a<e&&n.push([a,o,s])}function qw(n,e,t,i,r=1/0){let o=Math.min(i.distance(n[0],t[0][0]),r);if(o===0)return o;const s=new RZ([[0,[0,n.length-1],[0,0]]],DZ),a=WT(t);for(;s.length>0;){const c=s.pop();if(c[0]>=o)continue;const h=c[1],m=e?NT:jT;if(Ww(h)<=m){if(!c1(h,n.length))return NaN;if(e){const v=Qpe(n,h,t,i);if(isNaN(v)||v===0)return v;o=Math.min(o,v)}else for(let v=h[0];v<=h[1];++v){const x=Gpe(n[v],t,i);if(o=Math.min(o,x),o===0)return 0}}else{const v=GT(h,e);Dz(s,o,i,n,a,v[0]),Dz(s,o,i,n,a,v[1])}}return o}function Yw(n,e,t,i,r,o=1/0){let s=Math.min(o,r.distance(n[0],t[0]));if(s===0)return s;const a=new RZ([[0,[0,n.length-1],[0,t.length-1]]],DZ);for(;a.length>0;){const c=a.pop();if(c[0]>=s)continue;const h=c[1],m=c[2],v=e?NT:jT,x=i?NT:jT;if(Ww(h)<=v&&Ww(m)<=x){if(!c1(h,n.length)&&c1(m,t.length))return NaN;let E;if(e&&i)E=jpe(n,h,t,m,r),s=Math.min(s,E);else if(e&&!i){const R=n.slice(h[0],h[1]+1);for(let P=m[0];P<=m[1];++P)if(E=db(t[P],R,r),s=Math.min(s,E),s===0)return s}else if(!e&&i){const R=t.slice(m[0],m[1]+1);for(let P=h[0];P<=h[1];++P)if(E=db(n[P],R,r),s=Math.min(s,E),s===0)return s}else E=Npe(n,h,t,m,r),s=Math.min(s,E)}else{const E=GT(h,e),R=GT(m,i);q5(a,s,r,n,t,E[0],R[0]),q5(a,s,r,n,t,E[0],R[1]),q5(a,s,r,n,t,E[1],R[0]),q5(a,s,r,n,t,E[1],R[1])}}return s}function qpe(n,e){const t=n.geometry(),i=t.flat().map(s=>UD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new zD(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Yw(i,!1,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Yw(i,!1,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,qw(i,!1,s.coordinates,r,o));break}if(o===0)return o}return o}function Ype(n,e){const t=n.geometry(),i=t.flat().map(s=>UD([s.x,s.y],n.canonical));if(t.length===0)return NaN;const r=new zD(i[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Yw(i,!0,[s.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,Yw(i,!0,s.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,qw(i,!0,s.coordinates,r,o));break}if(o===0)return o}return o}function Vpe(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=Lpe(t).map(s=>s.map(a=>a.map(c=>UD([c.x,c.y],n.canonical)))),r=new zD(i[0][0][0][1]);let o=1/0;for(const s of e)for(const a of i){switch(s.type){case"Point":o=Math.min(o,qw([s.coordinates],!1,a,r,o));break;case"LineString":o=Math.min(o,qw(s.coordinates,!0,a,r,o));break;case"Polygon":o=Math.min(o,Wpe(a,s.coordinates,r,o));break}if(o===0)return o}return o}function jB(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Bb{constructor(e,t){this.type=Jn,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(N3(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new Bb(i,i.features.map(r=>jB(r.geometry)).flat());if(i.type==="Feature")return new Bb(i,jB(i.geometry));if("type"in i&&"coordinates"in i)return new Bb(i,jB(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return qpe(e,this.geometries);if(e.geometryType()==="LineString")return Ype(e,this.geometries);if(e.geometryType()==="Polygon")return Vpe(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Z4{constructor(e){this.type=Jr,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new Z4(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:MZ(i,this.key)}eachChild(){}outputDefined(){return!1}}const DE={"==":ype,"!=":vpe,">":Cpe,"<":bpe,">=":xpe,"<=":_pe,array:cm,at:OD,boolean:cm,case:TD,coalesce:G3,collator:TE,format:DD,image:PD,in:ID,"index-of":Gw,interpolate:Hg,"interpolate-hcl":Hg,"interpolate-lab":Hg,length:KD,let:OE,literal:ux,match:kD,number:cm,"number-format":RD,object:cm,slice:Qw,step:kE,string:cm,"to-boolean":Uy,"to-color":Uy,"to-number":Uy,"to-string":Uy,var:IE,within:Eb,distance:Bb,"global-state":Z4};class Cf{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=Cf.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===e.length-1);let c=null;for(const[h,m]of a){c=new BE(t.registry,Vw,t.path,null,t.scope);const v=[];let x=!1;for(let E=1;E<e.length;E++){const R=e[E],P=Array.isArray(h)?h[E-1]:h.type,z=c.parse(R,1+v.length,P);if(!z){x=!0;break}v.push(z)}if(!x){if(Array.isArray(h)&&h.length!==v.length){c.error(`Expected ${h.length} arguments, but found ${v.length} instead.`);continue}for(let E=0;E<v.length;E++){const R=Array.isArray(h)?h[E]:h.type,P=v[E];c.concat(E+1).checkSubtype(R,P.type)}if(c.errors.length===0)return new Cf(i,o,m,v)}}if(a.length===1)t.errors.push(...c.errors);else{const m=(a.length?a:s).map(([x])=>Hpe(x)).join(" | "),v=[];for(let x=1;x<e.length;x++){const E=t.parse(e[x],1+v.length);if(!E)return null;v.push(fl(E.type))}t.error(`Expected arguments of type ${m}, but found (${v.join(", ")}) instead.`)}return null}static register(e,t){Cf.definitions=t;for(const i in t)e[i]=Cf}}function Pz(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const o=r?r.evaluate(n):1,s=wZ(e,t,i,o);if(s)throw new Bl(s);return new $s(e/255,t/255,i/255,o,!1)}function Kz(n,e){return n in e}function NB(n,e){const t=e[n];return typeof t>"u"?null:t}function $pe(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function Zv(n){return{type:n}}Cf.register(DE,{error:[Gfe,[bo],(n,[e])=>{throw new Bl(e.evaluate(n))}],typeof:[bo,[Jr],(n,[e])=>fl(Xu(e.evaluate(n)))],"to-rgba":[yf(Jn,4),[Vg],(n,[e])=>{const[t,i,r,o]=e.evaluate(n).rgb;return[t*255,i*255,r*255,o]}],rgb:[Vg,[Jn,Jn,Jn],Pz],rgba:[Vg,[Jn,Jn,Jn,Jn],Pz],has:{type:io,overloads:[[[bo],(n,[e])=>Kz(e.evaluate(n),n.properties())],[[bo,Mb],(n,[e,t])=>Kz(e.evaluate(n),t.evaluate(n))]]},get:{type:Jr,overloads:[[[bo],(n,[e])=>NB(e.evaluate(n),n.properties())],[[bo,Mb],(n,[e,t])=>NB(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Jr,[bo],(n,[e])=>NB(e.evaluate(n),n.featureState||{})],properties:[Mb,[],n=>n.properties()],"geometry-type":[bo,[],n=>n.geometryType()],id:[Jr,[],n=>n.id()],zoom:[Jn,[],n=>n.globals.zoom],"heatmap-density":[Jn,[],n=>n.globals.heatmapDensity||0],elevation:[Jn,[],n=>n.globals.elevation||0],"line-progress":[Jn,[],n=>n.globals.lineProgress||0],accumulated:[Jr,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Jn,Zv(Jn),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[Jn,Zv(Jn),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:Jn,overloads:[[[Jn,Jn],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Jn],(n,[e])=>-e.evaluate(n)]]},"/":[Jn,[Jn,Jn],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Jn,[Jn,Jn],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Jn,[],()=>Math.LN2],pi:[Jn,[],()=>Math.PI],e:[Jn,[],()=>Math.E],"^":[Jn,[Jn,Jn],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Jn,[Jn],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))],log2:[Jn,[Jn],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Jn,[Jn],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Jn,[Jn],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Jn,[Jn],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Jn,[Jn],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Jn,[Jn],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Jn,[Jn],(n,[e])=>Math.atan(e.evaluate(n))],min:[Jn,Zv(Jn),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Jn,Zv(Jn),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Jn,[Jn],(n,[e])=>Math.abs(e.evaluate(n))],round:[Jn,[Jn],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Jn,[Jn],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Jn,[Jn],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[io,[bo,Jr],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[io,[Jr],(n,[e])=>n.id()===e.value],"filter-type-==":[io,[bo],(n,[e])=>n.geometryType()===e.value],"filter-<":[io,[bo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[io,[bo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[io,[bo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[io,[bo,Jr],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[io,[Jr],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[io,[Jr],(n,[e])=>e.value in n.properties()],"filter-has-id":[io,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[io,[yf(bo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[io,[yf(Jr)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[io,[bo,yf(Jr)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[io,[bo,yf(Jr)],(n,[e,t])=>$pe(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:io,overloads:[[[io,io],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[Zv(io),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:io,overloads:[[[io,io],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[Zv(io),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[io,[io],(n,[e])=>!e.evaluate(n)],"is-supported-script":[io,[bo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[bo,[bo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[bo,[bo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[bo,Zv(Jr),(n,e)=>e.map(t=>l3(t.evaluate(n))).join("")],"resolved-locale":[bo,[xE],(n,[e])=>e.evaluate(n).resolvedLocale()]});function Hpe(n){return Array.isArray(n)?`(${n.map(fl).join(", ")})`:`(${fl(n.type)}...)`}function Vw(n){if(n instanceof IE)return Vw(n.boundExpression);if(n instanceof Cf&&n.name==="error")return!1;if(n instanceof TE)return!1;if(n instanceof Eb)return!1;if(n instanceof Bb)return!1;if(n instanceof Z4)return!1;const e=n instanceof Uy||n instanceof cm;let t=!0;return n.eachChild(i=>{e?t=t&&Vw(i):t=t&&i instanceof ux}),t?ND(n)&&QD(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function ND(n){if(n instanceof Cf){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Eb||n instanceof Bb)return!1;let e=!0;return n.eachChild(t=>{e&&!ND(t)&&(e=!1)}),e}function GD(n){if(n instanceof Cf&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!GD(t)&&(e=!1)}),e}function QD(n,e){if(n instanceof Cf&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!QD(i,e)&&(t=!1)}),t}function qT(n){return{result:"success",value:n}}function y_(n){return{result:"error",value:n}}function Zpe(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function Xpe(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Jpe(n){return!!n.expression&&n.expression.interpolated}function PZ(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Xu(n)===Mb}class eme{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new SZ,this._defaultValue=t?rme(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Bl(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function tme(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in DE}function KZ(n,e){const t=new BE(DE,Vw,[],e?ime(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?qT(new eme(i,e)):y_(t.errors)}class Uz{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!GD(t.expression),this.globalStateRefs=PE(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}}class Lz{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!GD(t.expression),this.globalStateRefs=PE(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,o,s)}evaluate(e,t,i,r,o,s){return this._styleExpression.evaluate(e,t,i,r,o,s)}interpolationFactor(e,t,i){return this.interpolationType?Hg.interpolationFactor(this.interpolationType,e,t,i):0}}function nme(n,e){const t=KZ(n,e);if(t.result==="error")return t;const i=t.value.expression,r=ND(i);if(!r&&!Zpe(e))return y_([new Rg("","data expressions not supported")]);const o=QD(i,["zoom"]);if(!o&&!Xpe(e))return y_([new Rg("","zoom expressions not supported")]);const s=sw(i);if(!s&&!o)return y_([new Rg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof Rg)return y_([s]);if(s instanceof Hg&&!Jpe(e))return y_([new Rg("",'"interpolate" expressions cannot be used with this property')]);if(!s)return qT(r?new Uz("constant",t.value):new Uz("source",t.value));const a=s instanceof Hg?s.interpolation:void 0;return qT(r?new Lz("camera",t.value,s.labels,a):new Lz("composite",t.value,s.labels,a))}function sw(n){let e=null;if(n instanceof OE)e=sw(n.result);else if(n instanceof G3){for(const t of n.args)if(e=sw(t),e)break}else(n instanceof kE||n instanceof Hg)&&n.input instanceof Cf&&n.input.name==="zoom"&&(e=n);return e instanceof Rg||n.eachChild(t=>{const i=sw(t);i instanceof Rg?e=i:!e&&i?e=new Rg("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Rg("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function PE(n,e=new Set){return n instanceof Z4&&e.add(n.key),n.eachChild(t=>{PE(t,e)}),e}function ime(n){const e={color:Vg,string:bo,number:Jn,enum:bo,boolean:io,formatted:ME,padding:wE,numberArray:SE,colorArray:z3,projectionDefinition:_E,resolvedImage:$4,variableAnchorOffsetCollection:EE};return n.type==="array"?yf(e[n.value]||Jr,n.length):e[n.type]}function rme(n){if(n.type==="color"&&PZ(n.default))return new $s(0,0,0,0);switch(n.type){case"color":return $s.parse(n.default)||null;case"padding":return fm.parse(n.default)||null;case"numberArray":return pm.parse(n.default)||null;case"colorArray":return bf.parse(n.default)||null;case"variableAnchorOffsetCollection":return $g.parse(n.default)||null;case"projectionDefinition":return um.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function UZ(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!UZ(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const ome={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sme(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};UZ(n)||(n=$w(n));const e=KZ(n,ome);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=LZ(n);return{filter:(i,r,o)=>e.value.evaluate(i,r,{},o),needGeometry:t,getGlobalStateRefs:()=>PE(e.value.expression)}}}function ame(n,e){return n<e?-1:n>e?1:0}function LZ(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(LZ(n[e]))return!0;return!1}function $w(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?GB(n[1],n[2],"=="):e==="!="?Y5(GB(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?GB(n[1],n[2],e):e==="any"?lme(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map($w)):e==="none"?["all"].concat(n.slice(1).map($w).map(Y5)):e==="in"?zz(n[1],n.slice(2)):e==="!in"?Y5(zz(n[1],n.slice(2))):e==="has"?Fz(n[1]):e==="!has"?Y5(Fz(n[1])):!0}function GB(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function lme(n){return["any"].concat(n.map($w))}function zz(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(ame)]]:["filter-in-small",n,["literal",e]]}}function Fz(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Y5(n){return["!",n]}function W3(n){return typeof n=="object"?["literal",n]:n}function ume(n,e){let t=n.stops;if(!t)return cme(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,o=i||!r;return t=t.map(s=>!r&&e.tokens&&typeof s[1]=="string"?[s[0],fme(s[1])]:[s[0],W3(s[1])]),i?Ame(n,e,t):o?dme(n,e,t):YT(n,e,t)}function cme(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,W3(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function WD(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Ame(n,e,t){const i={},r={},o=[];for(let a=0;a<t.length;a++){const c=t[a],h=c[0].zoom;i[h]===void 0&&(i[h]={zoom:h,type:n.type,property:n.property,default:n.default},r[h]=[],o.push(h)),r[h].push([c[0].value,c[1]])}if(YD({},e)==="exponential"){const a=[WD(n),["linear"],["zoom"]];for(const c of o){const h=YT(i[c],e,r[c]);j_(a,c,h,!1)}return a}else{const a=["step",["zoom"]];for(const c of o){const h=YT(i[c],e,r[c]);j_(a,c,h,!0)}return qD(a),a}}function hme(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function jz(n,e){const t=W3(hme(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function YT(n,e,t){const i=YD(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",r,s[0]],s[1]);return o.push(jz(n,e)),o}else if(i==="categorical"){const o=["match",r];for(const s of t)j_(o,s[0],s[1],!1);return o.push(jz(n,e)),o}else if(i==="interval"){const o=["step",["number",r]];for(const s of t)j_(o,s[0],s[1],!0);return qD(o),n.default===void 0?o:["case",["==",["typeof",r],"number"],o,W3(n.default)]}else if(i==="exponential"){const o=n.base!==void 0?n.base:1,s=[WD(n),o===1?["linear"]:["exponential",o],["number",r]];for(const a of t)j_(s,a[0],a[1],!1);return n.default===void 0?s:["case",["==",["typeof",r],"number"],s,W3(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function dme(n,e,t,i=["zoom"]){const r=YD(n,e);let o,s=!1;if(r==="interval")o=["step",i],s=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;o=[WD(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)j_(o,a[0],a[1],s);return qD(o),o}function qD(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function j_(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function YD(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function fme(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const o=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,o.length>0&&e.push(o),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}const pme=Ffe;var Nz={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},u2=" ",Gz=/(italic|oblique)$/i,Qz={};function VT(n,e,t){var i=Qz[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,o="normal",s=[],a,c,h=0,m=n.length;h<m;++h){var v=n[h],x=v.split(" "),E=x[x.length-1].toLowerCase();E=="normal"||E=="italic"||E=="oblique"?(o=c?o:E,c=!0,x.pop(),E=x[x.length-1].toLowerCase()):Gz.test(E)&&(E=E.replace(Gz,""),o=c?o:x[x.length-1].replace(E,""),c=!0);for(var R in Nz){var P=x.length>1?x[x.length-2].toLowerCase():"";if(E==R||E==R.replace("-","")||P+"-"+E==R){r=a?r:Nz[R],x.pop(),P&&R.startsWith(P)&&x.pop();break}}!a&&typeof E=="number"&&(r=E,a=!0);var z=x.join(u2).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");z.indexOf(u2)!==-1&&(z='"'+z+'"'),s.push(z)}i=Qz[n]=[o,r,s]}return i[0]+u2+i[1]+u2+e+"px"+(t?"/"+t:"")+u2+i[2]}const bd={ADD:"add",REMOVE:"remove"},cx={PROPERTYCHANGE:"propertychange"},Ir={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class X4{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function mme(n,e,t){let i,r;t=t||Xg;let o=0,s=n.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+t(n[i],e),r<0?o=i+1:(s=i,a=!r);return a?o:~o}function Xg(n,e){return n>e?1:n<e?-1:0}function gme(n,e){return n<e?1:n>e?-1:0}function KE(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const o=n[r];if(o===e)return r;if(o<e)return t(e,n[r-1],o)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function yme(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Jg(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function Av(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function vme(n,e,t){const i=e||Xg;return n.every(function(r,o){if(o===0)return!0;const s=i(n[o-1],r);return!(s>0||s===0)})}function q3(){return!0}function UE(){return!1}function Y3(){}function zZ(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!Av(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function Ax(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function J4(n){for(const e in n)delete n[e]}function nv(n){let e;for(e in n)return!1;return!e}class Sm{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class e5 extends X4{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const o=t?new Sm(e):e;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,a[i]=0),++s[i];let c;for(let h=0,m=r.length;h<m;++h)if("handleEvent"in r[h]?c=r[h].handleEvent(o):c=r[h].call(this,o),c===!1||o.propagationStopped){c=!1;break}if(--s[i]===0){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,Y3);delete s[i]}return c}disposeInternal(){this.listeners_&&J4(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Y3,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function Yo(n,e,t,i,r){if(r){const s=t;t=function(a){return n.removeEventListener(e,t),s.call(i??this,a)}}else i&&i!==n&&(t=t.bind(i));const o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function Hw(n,e,t,i){return Yo(n,e,t,i,!0)}function Ea(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),J4(n))}class t5 extends e5{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ir.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Yo(this,e[o],t);return r}return Yo(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let o=0;o<r;++o)i[o]=Hw(this,e[o],t)}else i=Hw(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)bme(i);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}t5.prototype.on;t5.prototype.once;t5.prototype.un;function bme(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Ea(n[e]);else Ea(n)}function Kr(){throw new Error("Unimplemented abstract method.")}let Cme=0;function Yr(n){return n.ol_uid||(n.ol_uid=String(++Cme))}class Wz extends Sm{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Em extends t5{constructor(e){super(),this.on,this.once,this.un,Yr(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Wz(i,e,t)),i=cx.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Wz(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const o=r[e];r[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],nv(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const qz={LENGTH:"length"};class V5 extends Sm{constructor(e,t,i){super(e),this.element=t,this.index=i}}class zg extends Em{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(qz.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new V5(bd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new V5(bd.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new V5(bd.REMOVE,r,e)),this.dispatchEvent(new V5(bd.ADD,t,e))}updateLength_(){this.set(qz.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}class v_ extends Sm{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class Ey extends v_{constructor(e,t,i,r,o,s){super(e,t,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Hl={SINGLECLICK:"singleclick",CLICK:Ir.CLICK,DBLCLICK:Ir.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Lb=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",_me=Lb.includes("safari")&&!Lb.includes("chrom");_me&&(Lb.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Lb));const xme=Lb.includes("webkit")&&!Lb.includes("edge"),FZ=Lb.includes("macintosh"),Mme=typeof devicePixelRatio<"u"?devicePixelRatio:1,VD=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,jZ=typeof Image<"u"&&Image.prototype.decode,wme=typeof createImageBitmap=="function",NZ=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),$T={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class Sme extends e5{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Yo(i,$T.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Yo(i,$T.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ir.TOUCHMOVE,this.boundHandleTouchMove_,NZ?{passive:!1}:!1)}emulateClick_(e){let t=new Ey(Hl.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Ey(Hl.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Ey(Hl.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Hl.POINTERUP||t.type==Hl.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Hl.POINTERDOWN||t.type==Hl.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Ey(Hl.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ea),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Ey(Hl.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Yo(i,Hl.POINTERMOVE,this.handlePointerMove_,this),Yo(i,Hl.POINTERUP,this.handlePointerUp_,this),Yo(this.element_,Hl.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Yo(this.element_.getRootNode(),Hl.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Ey(Hl.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Ey(Hl.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ea(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ir.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ea(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ea),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Z0={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},NA={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ii={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function xs(n,e){if(!n)throw new Error(e)}const Zw=1/0;class Eme{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,J4(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){xs(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Zw?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,o=t[e],s=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),m=h<r&&i[h]<i[c]?h:c;t[e]=t[m],i[e]=i[m],e=m}t[e]=o,i[e]=s,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,o=i[t],s=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>s)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=o,r[t]=s}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const o=t.length;let s,a,c;for(a=0;a<o;++a)s=t[a],c=e(s),c==Zw?delete this.queuedElements_[this.keyFunction_(s)]:(i[r]=c,t[r++]=s);t.length=r,i.length=r,this.heapify_()}}class GZ extends Eme{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ir.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===ii.LOADED||i===ii.ERROR||i===ii.EMPTY){i!==ii.ERROR&&t.removeEventListener(Ir.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],o=r.getKey();r.getState()===ii.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}}function Bme(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Zw;const o=n.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}const hl={ANIMATING:0,INTERACTING:1},im={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Ol(n,e,t){return Math.min(Math.max(n,e),t)}function Ome(n,e,t,i,r,o){const s=r-t,a=o-i;if(s!==0||a!==0){const c=((n-t)*s+(e-i)*a)/(s*s+a*a);c>1?(t=r,i=o):c>0&&(t+=s*c,i+=a*c)}return Ob(n,e,t,i)}function Ob(n,e,t,i){const r=t-n,o=i-e;return r*r+o*o}function Ime(n){const e=n.length;for(let i=0;i<e;i++){let r=i,o=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>o&&(o=c,r=a)}if(o===0)return null;const s=n[r];n[r]=n[i],n[i]=s;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let h=i;h<e+1;h++)i==h?n[a][h]=0:n[a][h]+=c*n[i][h]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function Yz(n){return n*180/Math.PI}function Hy(n){return n*Math.PI/180}function Ib(n,e){const t=n%e;return t*e<0?t+e:t}function ff(n,e,t){return n+t*(e-n)}function LE(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function $5(n,e){return Math.floor(LE(n,e))}function Ly(n,e){return Math.ceil(LE(n,e))}function HT(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function Vz(n,e,t){return(function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const c=e?0:o[0]*r,h=e?0:o[1]*r,m=a?a[0]:0,v=a?a[1]:0;let x=n[0]+c/2+m,E=n[2]-c/2+m,R=n[1]+h/2+v,P=n[3]-h/2+v;x>E&&(x=(E+x)/2,E=x),R>P&&(R=(P+R)/2,P=R);let z=Ol(i[0],x,E),Q=Ol(i[1],R,P);if(s&&t&&r){const Y=30*r;z+=-Y*Math.log(1+Math.max(0,x-i[0])/Y)+Y*Math.log(1+Math.max(0,i[0]-E)/Y),Q+=-Y*Math.log(1+Math.max(0,R-i[1])/Y)+Y*Math.log(1+Math.max(0,i[1]-P)/Y)}return[z,Q]})}function kme(n){return n}const qc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ZT(n){const e=vp();for(let t=0,i=n.length;t<i;++t)u3(e,n[t]);return e}function Tme(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),o=Math.max.apply(null,n),s=Math.max.apply(null,e);return A1(i,r,o,s,t)}function Zy(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function QZ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Zb(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function zb(n,e){return $D(n,e[0],e[1])}function Fg(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function $D(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function XT(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=e[0],a=e[1];let c=qc.UNKNOWN;return s<t?c=c|qc.LEFT:s>r&&(c=c|qc.RIGHT),a<i?c=c|qc.BELOW:a>o&&(c=c|qc.ABOVE),c===qc.UNKNOWN&&(c=qc.INTERSECTING),c}function vp(){return[1/0,1/0,-1/0,-1/0]}function A1(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Px(n){return A1(1/0,1/0,-1/0,-1/0,n)}function WZ(n,e){const t=n[0],i=n[1];return A1(t,i,t,i,e)}function HD(n,e,t,i,r){const o=Px(r);return YZ(o,n,e,t,i)}function h1(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function qZ(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function u3(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function YZ(n,e,t,i,r){for(;t<i;t+=r)Rme(n,e[t],e[t+1]);return n}function Rme(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function VZ(n,e){let t;return t=e(zE(n)),t||(t=e(FE(n)),t)||(t=e(jE(n)),t)||(t=e(g1(n)),t)?t:!1}function JT(n){let e=0;return Xb(n)||(e=is(n)*Ju(n)),e}function zE(n){return[n[0],n[1]]}function FE(n){return[n[2],n[1]]}function Sf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function Dme(n,e){let t;if(e==="bottom-left")t=zE(n);else if(e==="bottom-right")t=FE(n);else if(e==="top-left")t=g1(n);else if(e==="top-right")t=jE(n);else throw new Error("Invalid corner");return t}function Xw(n,e,t,i,r){const[o,s,a,c,h,m,v,x]=$Z(n,e,t,i);return A1(Math.min(o,a,h,v),Math.min(s,c,m,x),Math.max(o,a,h,v),Math.max(s,c,m,x),r)}function $Z(n,e,t,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),a=Math.sin(t),c=r*s,h=r*a,m=o*s,v=o*a,x=n[0],E=n[1];return[x-c+v,E-h-m,x-c-v,E-h+m,x+c-v,E+h+m,x+c+v,E+h-m,x-c+v,E-h-m]}function Ju(n){return n[3]-n[1]}function ym(n,e,t){const i=t||vp();return Xl(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Px(i),i}function g1(n){return[n[0],n[3]]}function jE(n){return[n[2],n[3]]}function is(n){return n[2]-n[0]}function Xl(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Xb(n){return n[2]<n[0]||n[3]<n[1]}function Pme(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function Kme(n,e,t){let i=!1;const r=XT(n,e),o=XT(n,t);if(r===qc.INTERSECTING||o===qc.INTERSECTING)i=!0;else{const s=n[0],a=n[1],c=n[2],h=n[3],m=e[0],v=e[1],x=t[0],E=t[1],R=(E-v)/(x-m);let P,z;o&qc.ABOVE&&!(r&qc.ABOVE)&&(P=x-(E-h)/R,i=P>=s&&P<=c),!i&&o&qc.RIGHT&&!(r&qc.RIGHT)&&(z=E-(x-c)*R,i=z>=a&&z<=h),!i&&o&qc.BELOW&&!(r&qc.BELOW)&&(P=x-(E-a)/R,i=P>=s&&P<=c),!i&&o&qc.LEFT&&!(r&qc.LEFT)&&(z=E-(x-s)*R,i=z>=a&&z<=h)}return i}function Ume(n,e,t,i){if(Xb(n))return Px(t);let r=[];r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(r,r,2);const o=[],s=[];for(let a=0,c=r.length;a<c;a+=2)o.push(r[a]),s.push(r[a+1]);return Tme(o,s,t)}function HZ(n,e){const t=e.getExtent(),i=Sf(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=is(t),s=Math.floor((i[0]-t[0])/r)*r;n[0]-=s,n[2]-=s}return n}function ZZ(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];HZ(n,e);const r=is(i);if(is(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function Lme(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Jw(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function ZD(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,o=n[1]*t+n[0]*i;return n[0]=r,n[1]=o,n}function zme(n,e){return n[0]*=e,n[1]*=e,n}function Fme(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function jme(n,e){return Math.sqrt(Fme(n,e))}function XD(n,e){if(e.canWrapX()){const t=is(e.getExtent()),i=Nme(n,e,t);i&&(n[0]-=i*t)}return n}function Nme(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||is(i),r=Math.floor((n[0]-i[0])/t)),r}function XZ(n){return Math.pow(n,3)}function Kx(n){return 1-XZ(1-n)}function Gme(n){return 3*n*n-2*n*n*n}function Qme(n){return n}const Wme=63710088e-1;function $z(n,e,t){t=t||Wme;const i=Hy(n[1]),r=Hy(e[1]),o=(r-i)/2,s=Hy(e[0]-n[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function JZ(...n){console.warn(...n)}const iv={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class NE{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||iv[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const n5=6378137,E_=Math.PI*n5,qme=[-E_,-E_,E_,E_],Yme=[-180,-85,180,85],H5=n5*Math.log(Math.tan(Math.PI/2));class KC extends NE{constructor(e){super({code:e,units:"m",extent:qme,global:!0,worldExtent:Yme,getPointResolution:function(t,i){return t/Math.cosh(i[1]/n5)}})}}const Hz=[new KC("EPSG:3857"),new KC("EPSG:102100"),new KC("EPSG:102113"),new KC("EPSG:900913"),new KC("http://www.opengis.net/def/crs/EPSG/0/3857"),new KC("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Vme(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i){e[o]=E_*n[o]/180;let s=n5*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>H5?s=H5:s<-H5&&(s=-H5),e[o+1]=s}return e}function $me(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let o=0;o<r;o+=i)e[o]=180*n[o]/E_,e[o+1]=360*Math.atan(Math.exp(n[o+1]/n5))/Math.PI-90;return e}const Hme=6378137,Zz=[-180,-90,180,90],Zme=Math.PI*Hme/180;class Xv extends NE{constructor(e,t){super({code:e,units:"degrees",extent:Zz,axisOrientation:t,global:!0,metersPerUnit:Zme,worldExtent:Zz})}}const Xz=[new Xv("CRS:84"),new Xv("EPSG:4326","neu"),new Xv("urn:ogc:def:crs:OGC:1.3:CRS84"),new Xv("urn:ogc:def:crs:OGC:2:84"),new Xv("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Xv("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Xv("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let e9={};function Xme(n){return e9[n]||e9[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Jme(n,e){e9[n]=e}let N_={};function V3(n,e,t){const i=n.getCode(),r=e.getCode();i in N_||(N_[i]={}),N_[i][r]=t}function QB(n,e){return n in N_&&e in N_[n]?N_[n][e]:null}const eS=.9996,mp=.00669438,GE=mp*mp,QE=GE*mp,fb=mp/(1-mp),Jz=Math.sqrt(1-mp),hx=(1-Jz)/(1+Jz),eX=hx*hx,JD=eX*hx,eP=JD*hx,tX=eP*hx,nX=1-mp/4-3*GE/64-5*QE/256,ege=3*mp/8+3*GE/32+45*QE/1024,tge=15*GE/256+45*QE/1024,nge=35*QE/3072,ige=3/2*hx-27/32*JD+269/512*tX,rge=21/16*eX-55/32*eP,oge=151/96*JD-417/128*tX,sge=1097/512*eP,tS=6378137;function age(n,e,t){const i=n-5e5,s=(t.north?e:e-1e7)/eS/(tS*nX),a=s+ige*Math.sin(2*s)+rge*Math.sin(4*s)+oge*Math.sin(6*s)+sge*Math.sin(8*s),c=Math.sin(a),h=c*c,m=Math.cos(a),v=c/m,x=v*v,E=x*x,R=1-mp*h,P=Math.sqrt(1-mp*h),z=tS/P,Q=(1-mp)/R,Y=fb*m**2,H=Y*Y,Z=i/(z*eS),J=Z*Z,$=J*Z,G=$*Z,oe=G*Z,ue=oe*Z,xe=a-v/Q*(J/2-G/24*(5+3*x+10*Y-4*H-9*fb))+ue/720*(61+90*x+298*Y+45*E-252*fb-3*H);let ge=(Z-$/6*(1+2*x+Y)+oe/120*(5-2*Y+28*x-3*H+8*fb+24*E))/m;return ge=HT(ge+Hy(iX(t.number)),-Math.PI,Math.PI),[Yz(ge),Yz(xe)]}const eF=-80,tF=84,lge=-180,uge=180;function cge(n,e,t){n=HT(n,lge,uge),e<eF?e=eF:e>tF&&(e=tF);const i=Hy(e),r=Math.sin(i),o=Math.cos(i),s=r/o,a=s*s,c=a*a,h=Hy(n),m=iX(t.number),v=Hy(m),x=tS/Math.sqrt(1-mp*r**2),E=fb*o**2,R=o*HT(h-v,-Math.PI,Math.PI),P=R*R,z=P*R,Q=z*R,Y=Q*R,H=Y*R,Z=tS*(nX*i-ege*Math.sin(2*i)+tge*Math.sin(4*i)-nge*Math.sin(6*i)),J=eS*x*(R+z/6*(1-a+E)+Y/120*(5-18*a+c+72*E-58*fb))+5e5;let $=eS*(Z+x*s*(P/2+Q/24*(5-a+9*E+4*E**2)+H/720*(61-58*a+c+600*E-330*fb)));return t.north||($+=1e7),[J,$]}function iX(n){return(n-1)*6-180+3}const Age=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function rX(n){let e=0;for(const r of Age){const o=n.match(r);if(o){e=parseInt(o[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function nF(n,e){return function(t,i,r,o){const s=t.length;r=r>1?r:2,o=o??r,i||(r>2?i=t.slice():i=new Array(s));for(let a=0;a<s;a+=o){const c=t[a],h=t[a+1],m=n(c,h,e);i[a]=m[0],i[a+1]=m[1]}return i}}function hge(n){return rX(n)?new NE({code:n,units:"m"}):null}function dge(n){const e=rX(n.getCode());return e?{forward:nF(cge,e),inverse:nF(age,e)}:null}const fge=[dge],pge=[hge];let t9=!0;function oX(n){t9=!1}function tP(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function n9(n){Jme(n.getCode(),n),V3(n,n,tP)}function mge(n){n.forEach(n9)}function Hs(n){if(typeof n!="string")return n;const e=Xme(n);if(e)return e;for(const t of pge){const i=t(n);if(i)return i}return null}function i9(n,e,t,i){n=Hs(n);let r;const o=n.getPointResolutionFunc();if(o){if(r=o(e,t),i&&i!==n.getUnits()){const s=n.getMetersPerUnit();s&&(r=r*s/iv[i])}}else{const s=n.getUnits();if(s=="degrees"&&!i||i=="degrees")r=e;else{const a=i5(n,Hs("EPSG:4326"));if(!a&&s!=="degrees")r=e*n.getMetersPerUnit();else{let h=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];h=a(h,h,2);const m=$z(h.slice(0,2),h.slice(2,4)),v=$z(h.slice(4,6),h.slice(6,8));r=(m+v)/2}const c=i?iv[i]:n.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function iF(n){mge(n),n.forEach(function(e){n.forEach(function(t){e!==t&&V3(e,t,tP)})})}function gge(n,e,t,i){n.forEach(function(r){e.forEach(function(o){V3(r,o,t),V3(o,r,i)})})}function nP(n,e){return n?typeof n=="string"?Hs(n):n:Hs(e)}function yge(n){return(function(e,t,i,r){const o=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(o);for(let s=0;s<o;s+=r){const a=n(e.slice(s,s+i)),c=a.length;for(let h=0,m=r;h<m;++h)t[s+h]=h>=c?e[s+h]:a[h]}return t})}function r9(n,e){return oX(),WE(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function WB(n,e){const t=WE(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Ib(i+180,360)-180),t}function Xy(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||i5(n,e)===tP)&&t}function i5(n,e){const t=n.getCode(),i=e.getCode();let r=QB(t,i);if(r)return r;let o=null,s=null;for(const c of fge)o||(o=c(n)),s||(s=c(e));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)r=qB(o.inverse,s.forward);else{const c=QB(t,a);c&&(r=qB(c,s.forward))}else{const c=QB(a,i);c&&(r=qB(o.inverse,c))}return r&&(n9(n),n9(e),V3(n,e,r)),r}function qB(n,e){return function(t,i,r,o){return i=n(t,i,r,o),e(i,i,r,o)}}function $3(n,e){const t=Hs(n),i=Hs(e);return i5(t,i)}function WE(n,e,t){const i=$3(e,t);if(!i){const r=Hs(e).getCode(),o=Hs(t).getCode();throw new Error(`No transform available between ${r} and ${o}`)}return i(n,void 0,n.length)}let vge=null;function bge(){return vge}function o9(n,e){return n}function H0(n,e){return t9&&!Jw(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(t9=!1,JZ("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function iP(n,e){return n}function jg(n,e){return n}function Cge(){iF(Hz),iF(Xz),gge(Xz,Hz,Vme,$me)}Cge();const sX=new Array(6);function Ed(){return[1,0,0,1,0,0]}function rF(n){return oP(n,1,0,0,1,0,0)}function rP(n,e){const t=n[0],i=n[1],r=n[2],o=n[3],s=n[4],a=n[5],c=e[0],h=e[1],m=e[2],v=e[3],x=e[4],E=e[5];return n[0]=t*c+r*h,n[1]=i*c+o*h,n[2]=t*m+r*v,n[3]=i*m+o*v,n[4]=t*x+r*E+s,n[5]=i*x+o*E+a,n}function oP(n,e,t,i,r,o,s){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=o,n[5]=s,n}function _ge(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Hu(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function YB(n,e,t){return rP(n,oP(sX,e,0,0,t,0,0))}function xge(n,e,t){return rP(n,oP(sX,1,0,0,1,e,t))}function n0(n,e,t,i,r,o,s,a){const c=Math.sin(o),h=Math.cos(o);return n[0]=i*h,n[1]=r*c,n[2]=-i*c,n[3]=r*h,n[4]=s*i*h-a*i*c+e,n[5]=s*r*c+a*r*h+t,n}function aX(n,e){const t=Mge(e);xs(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],c=e[5];return n[0]=s/t,n[1]=-r/t,n[2]=-o/t,n[3]=i/t,n[4]=(o*c-s*a)/t,n[5]=-(i*c-r*a)/t,n}function Mge(n){return n[0]*n[3]-n[1]*n[2]}const wge=[1e5,1e5,1e5,1e5,2,2];function Sge(n){return"matrix("+n.join(", ")+")"}function oF(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function Ege(n,e){const t=oF(n),i=oF(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*wge[r])!==0)return!1;return!0}function Jy(n,e,t,i,r,o,s){o=o||[],s=s||2;let a=0;for(let c=e;c<t;c+=i){const h=n[c],m=n[c+1];o[a++]=r[0]*h+r[2]*m+r[4],o[a++]=r[1]*h+r[3]*m+r[5];for(let v=2;v<s;v++)o[a++]=n[c+v]}return o&&o.length!=a&&(o.length=a),o}function lX(n,e,t,i,r,o,s){s=s||[];const a=Math.cos(r),c=Math.sin(r),h=o[0],m=o[1];let v=0;for(let x=e;x<t;x+=i){const E=n[x]-h,R=n[x+1]-m;s[v++]=h+E*a-R*c,s[v++]=m+E*c+R*a;for(let P=x+2;P<x+i;++P)s[v++]=n[P]}return s&&s.length!=v&&(s.length=v),s}function Bge(n,e,t,i,r,o,s,a){a=a||[];const c=s[0],h=s[1];let m=0;for(let v=e;v<t;v+=i){const x=n[v]-c,E=n[v+1]-h;a[m++]=c+r*x,a[m++]=h+o*E;for(let R=v+2;R<v+i;++R)a[m++]=n[R]}return a&&a.length!=m&&(a.length=m),a}function Oge(n,e,t,i,r,o,s){s=s||[];let a=0;for(let c=e;c<t;c+=i){s[a++]=n[c]+r,s[a++]=n[c+1]+o;for(let h=c+2;h<c+i;++h)s[a++]=n[h]}return s&&s.length!=a&&(s.length=a),s}const sF=Ed(),Ige=[NaN,NaN];class uX extends Em{constructor(){super(),this.extent_=vp(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=zZ((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Kr()}closestPointXY(e,t,i,r){return Kr()}containsXY(e,t){return this.closestPointXY(e,t,Ige,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Kr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Px(t),this.extentRevision_=this.getRevision()}return Pme(this.extent_,e)}rotate(e,t){Kr()}scale(e,t,i){Kr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Kr()}getType(){return Kr()}applyTransform(e){Kr()}intersectsExtent(e){return Kr()}translate(e,t){Kr()}transform(e,t){const i=Hs(e),r=i.getUnits()=="tile-pixels"?function(o,s,a){const c=i.getExtent(),h=i.getWorldExtent(),m=Ju(h)/Ju(c);n0(sF,h[0],h[3],m,-m,0,0,0);const v=Jy(o,0,o.length,a,sF,s),x=$3(i,t);return x?x(v,v,a):v}:$3(i,t);return this.applyTransform(r),this}}class Jb extends uX{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return HD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Kr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=aF(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Kr()}setLayout(e,t,i){let r;if(e)r=aF(e);else{for(let o=0;o<i;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=eC(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();lX(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Sf(this.getExtent()));const r=this.getFlatCoordinates();if(r){const o=this.getStride();Bge(r,0,r.length,o,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Oge(i,0,i.length,r,e,t,i),this.changed()}}}function eC(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function aF(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function kge(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return Jy(i,0,i.length,r,e,t)}function cX(n,e,t,i){let r=0;const o=n[t-i],s=n[t-i+1];let a=0,c=0;for(;e<t;e+=i){const h=n[e]-o,m=n[e+1]-s;r+=c*h-a*m,a=h,c=m}return r/2}function AX(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=cX(n,e,a,i),e=a}return r}function Tge(n,e,t,i){let r=0;for(let o=0,s=t.length;o<s;++o){const a=t[o];r+=AX(n,e,a,i),e=a[a.length-1]}return r}function lF(n,e,t,i,r,o,s){const a=n[e],c=n[e+1],h=n[t]-a,m=n[t+1]-c;let v;if(h===0&&m===0)v=e;else{const x=((r-a)*h+(o-c)*m)/(h*h+m*m);if(x>1)v=t;else if(x>0){for(let E=0;E<i;++E)s[E]=ff(n[e+E],n[t+E],x);s.length=i;return}else v=e}for(let x=0;x<i;++x)s[x]=n[v+x];s.length=i}function sP(n,e,t,i,r){let o=n[e],s=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],h=Ob(o,s,a,c);h>r&&(r=h),o=a,s=c}return r}function aP(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=sP(n,e,a,i,r),e=a}return r}function Rge(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];r=aP(n,e,a,i,r),e=a[a.length-1]}return r}function lP(n,e,t,i,r,o,s,a,c,h,m){if(e==t)return h;let v,x;if(r===0){if(x=Ob(s,a,n[e],n[e+1]),x<h){for(v=0;v<i;++v)c[v]=n[e+v];return c.length=i,x}return h}m=m||[NaN,NaN];let E=e+i;for(;E<t;)if(lF(n,E-i,E,i,s,a,m),x=Ob(s,a,m[0],m[1]),x<h){for(h=x,v=0;v<i;++v)c[v]=m[v];c.length=i,E+=i}else E+=i*Math.max((Math.sqrt(x)-Math.sqrt(h))/r|0,1);if(o&&(lF(n,t-i,e,i,s,a,m),x=Ob(s,a,m[0],m[1]),x<h)){for(h=x,v=0;v<i;++v)c[v]=m[v];c.length=i}return h}function uP(n,e,t,i,r,o,s,a,c,h,m){m=m||[NaN,NaN];for(let v=0,x=t.length;v<x;++v){const E=t[v];h=lP(n,e,E,i,r,o,s,a,c,h,m),e=E}return h}function Dge(n,e,t,i,r,o,s,a,c,h,m){m=m||[NaN,NaN];for(let v=0,x=t.length;v<x;++v){const E=t[v];h=uP(n,e,E,i,r,o,s,a,c,h,m),e=E[E.length-1]}return h}function Pge(n,e,t,i){for(let r=0,o=t.length;r<o;++r)n[e++]=t[r];return e}function qE(n,e,t,i){for(let r=0,o=t.length;r<o;++r){const s=t[r];for(let a=0;a<i;++a)n[e++]=s[a]}return e}function r5(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=qE(n,e,t[s],i);r[o++]=c,e=c}return r.length=o,r}function hX(n,e,t,i,r){r=r||[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=r5(n,e,t[s],i,r[o]);c.length===0&&(c[0]=e),r[o++]=c,e=c[c.length-1]}return r.length=o,r}function zy(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=e;s<t;s+=i)r[o++]=n.slice(s,s+i);return r.length=o,r}function H3(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=zy(n,e,c,i,r[o]),e=c}return r.length=o,r}function s9(n,e,t,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s];r[o++]=c.length===1&&c[0]===e?[]:H3(n,e,c,i,r[o]),e=c[c.length-1]}return r.length=o,r}function YE(n,e,t,i,r,o,s){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)o[s++]=n[e],o[s++]=n[e+1];return s}const c=new Array(a);c[0]=1,c[a-1]=1;const h=[e,t-i];let m=0;for(;h.length>0;){const v=h.pop(),x=h.pop();let E=0;const R=n[x],P=n[x+1],z=n[v],Q=n[v+1];for(let Y=x+i;Y<v;Y+=i){const H=n[Y],Z=n[Y+1],J=Ome(H,Z,R,P,z,Q);J>E&&(m=Y,E=J)}E>r&&(c[(m-e)/i]=1,x+i<m&&h.push(x,m),m+i<v&&h.push(m,v))}for(let v=0;v<a;++v)c[v]&&(o[s++]=n[e+v*i],o[s++]=n[e+v*i+1]);return s}function dX(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c];s=YE(n,e,m,i,r,o,s),a.push(s),e=m}return s}function rb(n,e){return e*Math.round(n/e)}function Kge(n,e,t,i,r,o,s){if(e==t)return s;let a=rb(n[e],r),c=rb(n[e+1],r);e+=i,o[s++]=a,o[s++]=c;let h,m;do if(h=rb(n[e],r),m=rb(n[e+1],r),e+=i,e==t)return o[s++]=h,o[s++]=m,s;while(h==a&&m==c);for(;e<t;){const v=rb(n[e],r),x=rb(n[e+1],r);if(e+=i,v==h&&x==m)continue;const E=h-a,R=m-c,P=v-a,z=x-c;if(E*z==R*P&&(E<0&&P<E||E==P||E>0&&P>E)&&(R<0&&z<R||R==z||R>0&&z>R)){h=v,m=x;continue}o[s++]=h,o[s++]=m,a=h,c=m,h=v,m=x}return o[s++]=h,o[s++]=m,s}function cP(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c];s=Kge(n,e,m,i,r,o,s),a.push(s),e=m}return s}function Uge(n,e,t,i,r,o,s,a){for(let c=0,h=t.length;c<h;++c){const m=t[c],v=[];s=cP(n,e,m,i,r,o,s,v),a.push(v),e=m[m.length-1]}return s}class Z3 extends Jb{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Z3(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return cX(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return zy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=YE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Z3(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qE(this.flatCoordinates,0,e,this.stride),this.changed()}}class Fb extends Jb{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Fb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const o=this.flatCoordinates,s=Ob(e,t,o[0],o[1]);if(s<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=o[c];return i.length=a,s}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return WZ(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return $D(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pge(this.flatCoordinates,0,e,this.stride),this.changed()}}function Lge(n,e,t,i,r){return!VZ(r,function(s){return!pb(n,e,t,i,s[0],s[1])})}function pb(n,e,t,i,r,o){let s=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const h=n[e],m=n[e+1];c<=o?m>o&&(h-a)*(o-c)-(r-a)*(m-c)>0&&s++:m<=o&&(h-a)*(o-c)-(r-a)*(m-c)<0&&s--,a=h,c=m}return s!==0}function AP(n,e,t,i,r,o){if(t.length===0||!pb(n,e,t[0],i,r,o))return!1;for(let s=1,a=t.length;s<a;++s)if(pb(n,t[s-1],t[s],i,r,o))return!1;return!0}function zge(n,e,t,i,r,o){if(t.length===0)return!1;for(let s=0,a=t.length;s<a;++s){const c=t[s];if(AP(n,e,c,i,r,o))return!0;e=c[c.length-1]}return!1}function hP(n,e,t,i,r,o,s){let a,c,h,m,v,x,E;const R=r[o+1],P=[];for(let Y=0,H=t.length;Y<H;++Y){const Z=t[Y];for(m=n[Z-i],x=n[Z-i+1],a=e;a<Z;a+=i)v=n[a],E=n[a+1],(R<=x&&E<=R||x<=R&&R<=E)&&(h=(R-x)/(E-x)*(v-m)+m,P.push(h)),m=v,x=E}let z=NaN,Q=-1/0;for(P.sort(Xg),m=P[0],a=1,c=P.length;a<c;++a){v=P[a];const Y=Math.abs(v-m);Y>Q&&(h=(m+v)/2,AP(n,e,t,i,h,R)&&(z=h,Q=Y)),m=v}return isNaN(z)&&(z=r[o]),s?(s.push(z,R,Q),s):[z,R,Q]}function fX(n,e,t,i,r){let o=[];for(let s=0,a=t.length;s<a;++s){const c=t[s];o=hP(n,e,c,i,r,2*s,o),e=c[c.length-1]}return o}function pX(n,e,t,i,r){let o;for(e+=i;e<t;e+=i)if(o=r(n.slice(e-i,e),n.slice(e,e+i)),o)return o;return!1}function VE(n,e,t,i,r,o){return o=o??YZ(vp(),n,e,t,i),Xl(r,o)?o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:pX(n,e,t,i,function(s,a){return Kme(r,s,a)}):!1}function Fge(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){if(VE(n,e,t[o],i,r))return!0;e=t[o]}return!1}function mX(n,e,t,i,r){return!!(VE(n,e,t,i,r)||pb(n,e,t,i,r[0],r[1])||pb(n,e,t,i,r[0],r[3])||pb(n,e,t,i,r[2],r[1])||pb(n,e,t,i,r[2],r[3]))}function gX(n,e,t,i,r){if(!mX(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let o=1,s=t.length;o<s;++o)if(Lge(n,t[o-1],t[o],i,r)&&!VE(n,t[o-1],t[o],i,r))return!1;return!0}function jge(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(gX(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function Nge(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const o=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=o}e+=i,t-=i}}function dP(n,e,t,i){let r=0,o=n[t-i],s=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-o)*(c+s),o=a,s=c}return r===0?void 0:r>0}function fP(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=dP(n,e,a,i);if(o===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function yX(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o){const a=t[o];if(!fP(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function nS(n,e,t,i,r){r=r!==void 0?r:!1;for(let o=0,s=t.length;o<s;++o){const a=t[o],c=dP(n,e,a,i);(o===0?r&&c||!r&&!c:r&&!c||!r&&c)&&Nge(n,e,a,i),e=a}return e}function a9(n,e,t,i,r){for(let o=0,s=t.length;o<s;++o)e=nS(n,e,t[o],i,r);return e}function vX(n,e){const t=[];let i=0,r=0,o;for(let s=0,a=e.length;s<a;++s){const c=e[s],h=dP(n,i,c,2);if(o===void 0&&(o=h),h===o)t.push(e.slice(r,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=s+1,i=c}return t}class d1 extends Jb{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Jg(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new d1(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(aP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),uP(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return AP(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return AX(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),nS(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,H3(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Sf(this.getExtent());this.flatInteriorPoint_=hP(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Fb(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Z3(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s],h=new Z3(t.slice(o,c),e);r.push(h),o=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;fP(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=nS(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=cP(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new d1(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return gX(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=r5(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function uF(n){if(Xb(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],o=[e,t,e,r,i,r,i,t,e,t];return new d1(o,"XY",[o.length])}function pP(n,e,t,i){const r=is(e)/t[0],o=Ju(e)/t[1];return i?Math.min(n,Math.max(r,o)):Math.min(n,Math.min(r,o))}function mP(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Ol(i,t/2,e*2)}function Gge(n,e,t,i){return e=e!==void 0?e:!0,(function(r,o,s,a){if(r!==void 0){const c=n[0],h=n[n.length-1],m=t?pP(c,t,s,i):c;if(a)return e?mP(r,m,h):Ol(r,h,m);const v=Math.min(m,r),x=Math.floor(KE(n,v,o));return n[x]>m&&x<n.length-1?n[x+1]:n[x]}})}function Qge(n,e,t,i,r,o){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(s,a,c,h){if(s!==void 0){const m=r?pP(e,r,c,o):e;if(h)return i?mP(s,m,t):Ol(s,t,m);const v=1e-9,x=Math.ceil(Math.log(e/m)/Math.log(n)-v),E=-a*(.5-v)+.5,R=Math.min(m,s),P=Math.floor(Math.log(e/R)/Math.log(n)+E),z=Math.max(x,P),Q=e/Math.pow(n,z);return Ol(Q,t,m)}})}function cF(n,e,t,i,r){return t=t!==void 0?t:!0,(function(o,s,a,c){if(o!==void 0){const h=i?pP(n,i,a,r):n;return!t||!c?Ol(o,e,h):mP(o,h,e)}})}function gP(n){if(n!==void 0)return 0}function AF(n){if(n!==void 0)return n}function Wge(n){const e=2*Math.PI/n;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function qge(n){const e=Hy(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const bX=42,yP=256,VB=0;class Am extends Em{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=nP(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&oX(),e.center&&(e.center=H0(e.center,this.projection_)),e.extent&&(e.extent=jg(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in im)delete t[a];this.setProperties(t,!0);const i=Vge(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=Yge(e),o=i.constraint,s=$ge(e);this.constraints_={center:r,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const o=this.getResolution(),s=o/2*(r[3]-t[3]+t[1]-r[1]),a=o/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+s,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=H0(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=H0(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const m=arguments[r];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(r===t){i&&Z5(i,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const h=[];for(;r<t;++r){const m=arguments[r],v={start:o,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||Gme,callback:i};if(m.center&&(v.sourceCenter=s,v.targetCenter=m.center.slice(),s=v.targetCenter),m.zoom!==void 0?(v.sourceResolution=a,v.targetResolution=this.getResolutionForZoom(m.zoom),a=v.targetResolution):m.resolution&&(v.sourceResolution=a,v.targetResolution=m.resolution,a=v.targetResolution),m.rotation!==void 0){v.sourceRotation=c;const x=Ib(m.rotation-c+Math.PI,2*Math.PI)-Math.PI;v.targetRotation=c+x,c=v.targetRotation}Hge(v)?v.complete=!0:o+=v.duration,h.push(v)}this.animations_.push(h),this.setHint(hl.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[hl.ANIMATING]>0}getInteracting(){return this.hints_[hl.INTERACTING]>0}cancelAnimations(){this.setHint(hl.ANIMATING,-this.hints_[hl.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&Z5(r[0].callback,!1),!e)for(let o=0,s=r.length;o<s;++o){const a=r[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let o=!0;for(let s=0,a=r.length;s<a;++s){const c=r[s];if(c.complete)continue;const h=e-c.start;let m=c.duration>0?h/c.duration:1;m>=1?(c.complete=!0,m=1):o=!1;const v=c.easing(m);if(c.sourceCenter){const x=c.sourceCenter[0],E=c.sourceCenter[1],R=c.targetCenter[0],P=c.targetCenter[1];this.nextCenter_=c.targetCenter;const z=x+v*(R-x),Q=E+v*(P-E);this.targetCenter_=[z,Q]}if(c.sourceResolution&&c.targetResolution){const x=v===1?c.targetResolution:c.sourceResolution+v*(c.targetResolution-c.sourceResolution);if(c.anchor){const E=this.getViewportSize_(this.getRotation()),R=this.constraints_.resolution(x,0,E,!0);this.targetCenter_=this.calculateCenterZoom(R,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=x,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const x=v===1?Ib(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+v*(c.targetRotation-c.sourceRotation);if(c.anchor){const E=this.constraints_.rotation(x,!0);this.targetCenter_=this.calculateCenterRotate(E,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=x}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(o){this.animations_[i]=null,this.setHint(hl.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=r[0].callback;s&&Z5(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],ZD(i,e-this.getRotation()),Lme(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){const s=t[0]-e*(t[0]-r[0])/o,a=t[1]-e*(t[1]-r[1])/o;i=[s,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&o9(e,this.getProjection())}getCenterInternal(){return this.get(im.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return iP(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();xs(t,"The view center is not defined");const i=this.getResolution();xs(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return xs(r!==void 0,"The view rotation is not defined"),Xw(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(im.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(jg(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=is(e)/t[0],r=Ju(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return(function(o){return t/Math.pow(e,o*r)})}getRotation(){return this.get(im.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(i/r)/t;return(function(s){return Math.log(i/s)/t/o})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();r=$B(r,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const o=KE(this.resolutions_,e,1);t=o,i=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Ol(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Ol(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(xs(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){xs(!Xb(e),"Cannot fit empty extent provided as `geometry`");const r=jg(e,this.getProjection());i=uF(r)}else if(e.getType()==="Circle"){const r=jg(e.getExtent(),this.getProjection());i=uF(r),i.rotate(this.getRotation(),Sf(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),o=e.getFlatCoordinates(),s=e.getStride();let a=1/0,c=1/0,h=-1/0,m=-1/0;for(let v=0,x=o.length;v<x;v+=s){const E=o[v]*i-o[v+1]*r,R=o[v]*r+o[v+1]*i;a=Math.min(a,E),c=Math.min(c,R),h=Math.max(h,E),m=Math.max(m,R)}return[a,c,h,m]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1;let s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?s:Math.max(c,s),c=this.getConstrainedResolution(c,o?0:1);const h=this.getRotation(),m=Math.sin(h),v=Math.cos(h),x=Sf(a);x[0]+=(r[1]-r[3])/2*c,x[1]+=(r[0]-r[2])/2*c;const E=x[0]*v-x[1]*m,R=x[1]*v+x[0]*m,P=this.getConstrainedCenter([E,R],c),z=t.callback?t.callback:Y3;t.duration!==void 0?this.animateInternal({resolution:c,center:P,duration:t.duration,easing:t.easing},z):(this.targetResolution_=c,this.targetCenter_=P,this.applyTargetState_(!1,!0),Z5(z,!0))}centerOn(e,t,i){this.centerOnInternal(H0(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal($B(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let o;const s=this.padding_;if(s&&e){const a=this.getViewportSizeMinusPadding_(-i),c=$B(e,r,[a[0]/2+s[3],a[1]/2+s[0]],t,i);o=[e[0]-c[0],e[1]-c[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=o9(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&H0(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=H0(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&H0(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,s,o,i,this.calculateCenterShift(this.targetCenter_,s,r,o));this.get(im.ROTATION)!==r&&this.set(im.ROTATION,r),this.get(im.RESOLUTION)!==s&&(this.set(im.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(im.CENTER)||!Jw(this.get(im.CENTER),a))&&this.set(im.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,r,s),c=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=c,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!Jw(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:c,resolution:a,duration:e,easing:Kx,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(hl.INTERACTING,1)}endInteraction(e,t,i){i=i&&H0(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(hl.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function Z5(n,e){setTimeout(function(){n(e)},0)}function Yge(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Vz(n.extent,n.constrainOnlyCenter,t)}const e=nP(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Vz(t,!1,!1)}return kme}function Vge(n){let e,t,i,s=n.minZoom!==void 0?n.minZoom:VB,a=n.maxZoom!==void 0?n.maxZoom:28;const c=n.zoomFactor!==void 0?n.zoomFactor:2,h=n.multiWorld!==void 0?n.multiWorld:!1,m=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,v=n.showFullExtent!==void 0?n.showFullExtent:!1,x=nP(n.projection,"EPSG:3857"),E=x.getExtent();let R=n.constrainOnlyCenter,P=n.extent;if(!h&&!P&&x.isGlobal()&&(R=!1,P=E),n.resolutions!==void 0){const z=n.resolutions;t=z[s],i=z[a]!==void 0?z[a]:z[z.length-1],n.constrainResolution?e=Gge(z,m,!R&&P,v):e=cF(t,i,m,!R&&P,v)}else{const Q=(E?Math.max(is(E),Ju(E)):360*iv.degrees/x.getMetersPerUnit())/yP/Math.pow(2,VB),Y=Q/Math.pow(2,28-VB);t=n.maxResolution,t!==void 0?s=0:t=Q/Math.pow(c,s),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(c,a):i=Q/Math.pow(c,a):i=Y),a=s+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-s),n.constrainResolution?e=Qge(c,t,i,m,!R&&P,v):e=cF(t,i,m,!R&&P,v)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:s,zoomFactor:c}}function $ge(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?qge():t===!1?AF:typeof t=="number"?Wge(t):AF}return gP}function Hge(n){return!(n.sourceCenter&&n.targetCenter&&!Jw(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function $B(n,e,t,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=n[0]*o-n[1]*s,c=n[1]*o+n[0]*s;a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,s=-s;const h=a*o-c*s,m=c*o+a*s;return[h,m]}const X5="ol-hidden",Zge="ol-selectable",$E="ol-unselectable",vP="ol-control",hF="ol-collapsed",Xge=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),dF=["style","variant","weight","size","lineHeight","family"],l9={normal:400,bold:700},u9=function(n){const e=n.match(Xge);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=dF.length;i<r;++i){const o=e[i+1];o!==void 0&&(t[dF[i]]=typeof o=="string"?o.trim():o)}return isNaN(Number(t.weight))&&t.weight in l9&&(t.weight=l9[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function Il(n,e,t,i){let r;return t&&t.length?r=t.shift():VD?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let HB;function iS(){return HB||(HB=Il(1,1)),HB}function o5(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function Jge(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function e0e(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function fF(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function CX(n){for(;n.lastChild;)n.lastChild.remove()}function t0e(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],o=e[i];if(!r&&!o)break;if(r!==o){if(!r){n.appendChild(o);continue}if(!o){n.removeChild(r),--i;continue}n.insertBefore(o,r)}}}class bP extends Em{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)Ea(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Y3&&this.listenerKeys.push(Yo(e,Z0.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class n0e extends bP{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(Ir.CLICK,this.handleClick_.bind(this),!1);const h=t+" "+$E+" "+vP+(this.collapsed_&&this.collapsible_?" "+hF:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=h,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>Ax(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Av(t,this.renderedAttributions_)){CX(this.ulElement_);for(let r=0,o=t.length;r<o;++r){const s=document.createElement("li");s.innerHTML=t[r],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(hF),this.collapsed_?fF(this.collapseLabel_,this.label_):fF(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class i0e extends bP{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(Ir.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+$E+" "+vP,c=this.element;c.className=a,c.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(X5)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Kx}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const o=this.element.classList.contains(X5);!o&&i===0?this.element.classList.add(X5):o&&i!==0&&this.element.classList.remove(X5)}this.label_.style.transform=r}this.rotation_=i}}class r0e extends bP{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",h=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=r,m.setAttribute("type","button"),m.title=c,m.appendChild(typeof s=="string"?document.createTextNode(s):s),m.addEventListener(Ir.CLICK,this.handleClick_.bind(this,i),!1);const v=document.createElement("button");v.className=o,v.setAttribute("type","button"),v.title=h,v.appendChild(typeof a=="string"?document.createTextNode(a):a),v.addEventListener(Ir.CLICK,this.handleClick_.bind(this,-i),!1);const x=t+" "+$E+" "+vP,E=this.element;E.className=x,E.appendChild(m),E.appendChild(v),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const o=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:Kx})):i.setZoom(o)}}}function o0e(n){n=n||{};const e=new zg;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new r0e(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new i0e(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new n0e(n.attributionOptions)),e}class s0e{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const o=this.points_[t]-this.points_[i],s=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const pF={ACTIVE:"active"};class s5 extends Em{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(pF.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(pF.ACTIVE,e)}setMap(e){this.map_=e}}function a0e(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:Qme,center:n.getConstrainedCenter(r)})}}function CP(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const o=n.getConstrainedZoom(r+e),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:t,duration:i!==void 0?i:250,easing:Kx})}class l0e extends s5{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Hl.DBLCLICK){const i=e.originalEvent,r=e.map,o=e.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=r.getView();CP(a,s,o,this.duration_),i.preventDefault(),t=!0}return!t}}function c9(n){const e=arguments;return function(t){let i=!0;for(let r=0,o=e.length;r<o&&(i=i&&e[r](t),!!i);++r);return i}}const u0e=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},c0e=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},_X=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?c0e(n):!0},A0e=q3,xX=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(xme&&FZ&&e.ctrlKey)},MX=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},h0e=function(n){const e=n.originalEvent;return FZ?e.metaKey:e.ctrlKey},d0e=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},wX=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},ZB=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},f0e=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class a5 extends s5{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Hl.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Hl.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Hl.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Hl.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function _P(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class p0e extends a5{constructor(e){super({stopDown:UE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:c9(MX,f0e);this.condition_=e.onFocusOnly?c9(_X,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(_P(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();zme(o,a.getResolution()),ZD(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(s),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:Kx})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class m0e extends a5{constructor(e){e=e||{},super({stopDown:UE}),this.condition_=e.condition?e.condition:u0e,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!ZB(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===gP)return;const r=t.getSize(),o=e.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return ZB(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return ZB(e)&&xX(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class g0e extends X4{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new d1([r])}getGeometry(){return this.geometry_}}const UC={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class c2 extends Sm{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class y0e extends a5{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new g0e(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??xX,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],o=i[1]-t[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new c2(UC.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new c2(t?UC.BOXEND:UC.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new c2(UC.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new c2(UC.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new c2(UC.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class v0e extends y0e{constructor(e){e=e||{};const t=e.condition?e.condition:d0e;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const o=i.rotatedExtentForGeometry(r),s=i.getResolutionForExtentInternal(o),a=i.getResolution()/s;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Kx})}}const Jv={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class b0e extends s5{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return MX(t)&&wX(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ir.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Jv.DOWN||r==Jv.LEFT||r==Jv.RIGHT||r==Jv.UP)){const s=e.map.getView(),a=s.getResolution()*this.pixelDelta_;let c=0,h=0;r==Jv.DOWN?h=-a:r==Jv.LEFT?c=-a:r==Jv.RIGHT?c=a:h=a;const m=[c,h];ZD(m,s.getRotation()),a0e(s,m,this.duration_),i.preventDefault(),t=!0}}return!t}}class C0e extends s5{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!h0e(t)&&wX(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ir.KEYDOWN||e.type==Ir.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const o=e.map,s=r==="+"?this.delta_:-this.delta_,a=o.getView();CP(a,s,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const _0e=40,x0e=300;class M0e extends s5{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:A0e;this.condition_=e.onFocusOnly?c9(_X,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ir.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=_0e;break;case WheelEvent.DOM_DELTA_PAGE:o*=x0e;break}if(o===0)return!1;this.lastDelta_=o;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;const c=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Ol(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),CP(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class w0e extends a5{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=UE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=o-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=o;const s=e.map,a=s.getView();a.getConstraints().rotation!==gP&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(_P(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class S0e extends a5{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=UE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],o=i.clientX-r.clientX,s=i.clientY-r.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,h=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(_P(this.targetPointers))),c.render(),h.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function E0e(n){n=n||{};const e=new zg,t=new s0e(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new m0e),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new l0e({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new p0e({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new w0e),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new S0e({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new b0e),e.push(new C0e({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new M0e({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new v0e({duration:n.zoomDuration})),e}const Js={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class SX extends Em{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Js.OPACITY]=e.opacity!==void 0?e.opacity:1,xs(typeof t[Js.OPACITY]=="number","Layer opacity must be a number"),t[Js.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Js.Z_INDEX]=e.zIndex,t[Js.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Js.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Js.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Js.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Ol(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Kr()}getLayerStatesArray(e){return Kr()}getExtent(){return this.get(Js.EXTENT)}getMaxResolution(){return this.get(Js.MAX_RESOLUTION)}getMinResolution(){return this.get(Js.MIN_RESOLUTION)}getMinZoom(){return this.get(Js.MIN_ZOOM)}getMaxZoom(){return this.get(Js.MAX_ZOOM)}getOpacity(){return this.get(Js.OPACITY)}getSourceState(){return Kr()}getVisible(){return this.get(Js.VISIBLE)}getZIndex(){return this.get(Js.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Js.EXTENT,e)}setMaxResolution(e){this.set(Js.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Js.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Js.MAX_ZOOM,e)}setMinZoom(e){this.set(Js.MIN_ZOOM,e)}setOpacity(e){xs(typeof e=="number","Layer opacity must be a number"),this.set(Js.OPACITY,e)}setVisible(e){this.set(Js.VISIBLE,e)}setZIndex(e){this.set(Js.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Oy extends Sm{constructor(e,t){super(e),this.layer=t}}const XB={LAYERS:"layers"};class Ux extends SX{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(XB.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new zg(i.slice(),{unique:!0}):xs(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new zg(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ea),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Yo(e,bd.ADD,this.handleLayersAdd_,this),Yo(e,bd.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ea);J4(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const o=t[i];this.registerLayerListeners_(o),this.dispatchEvent(new Oy("addlayer",o))}this.changed()}registerLayerListeners_(e){const t=[Yo(e,cx.PROPERTYCHANGE,this.handleLayerChange_,this),Yo(e,Ir.CHANGE,this.handleLayerChange_,this)];e instanceof Ux&&t.push(Yo(e,"addlayer",this.handleLayerGroupAdd_,this),Yo(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Yr(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Oy("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Oy("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Oy("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Yr(t);this.listenerKeys_[i].forEach(Ea),delete this.listenerKeys_[i],this.dispatchEvent(new Oy("removelayer",t)),this.changed()}getLayers(){return this.get(XB.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,o=i.length;r<o;++r)this.dispatchEvent(new Oy("removelayer",i[r]))}this.set(XB.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});const r=this.getLayerState();let o=r.zIndex;!e&&r.zIndex===void 0&&(o=0);for(let s=i,a=t.length;s<a;s++){const c=t[s];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=ym(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=o)}return t}getSourceState(){return"ready"}}const Ap={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Lx extends SX{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Js.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Js.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ea(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Yo(e,Ir.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Am?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(s=>s.layer===this),!r)return!1}else r=this.getLayerState();const o=this.getExtent();return xP(r,t.viewState)&&(!o||Xl(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof Am?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Js.MAP,e)}getMapInternal(){return this.get(Js.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ea(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ea(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Yo(e,Ap.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Yo(this,Ir.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);xs(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(Js.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function xP(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function EX(n,e,t=0,i=n.length-1,r=B0e){for(;i>t;){if(i-t>600){const c=i-t+1,h=e-t+1,m=Math.log(c),v=.5*Math.exp(2*m/3),x=.5*Math.sqrt(m*v*(c-v)/c)*(h-c/2<0?-1:1),E=Math.max(t,Math.floor(e-h*v/c+x)),R=Math.min(i,Math.floor(e+(c-h)*v/c+x));EX(n,e,E,R,r)}const o=n[e];let s=t,a=i;for(A2(n,t,e),r(n[i],o)>0&&A2(n,t,i);s<a;){for(A2(n,s,a),s++,a--;r(n[s],o)<0;)s++;for(;r(n[a],o)>0;)a--}r(n[t],o)===0?A2(n,t,a):(a++,A2(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}}function A2(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function B0e(n,e){return n<e?-1:n>e?1:0}let BX=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!eM(e,t))return i;const r=this.toBBox,o=[];for(;t;){for(let s=0;s<t.children.length;s++){const a=t.children[s],c=t.leaf?r(a):a;eM(e,c)&&(t.leaf?i.push(a):eO(e,c)?this._all(a,i):o.push(a))}t=o.pop()}return i}collides(e){let t=this.data;if(!eM(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const o=t.children[r],s=t.leaf?this.toBBox(o):o;if(eM(e,s)){if(t.leaf||eO(e,s))return!0;i.push(o)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=b_([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),o=[],s=[];let a,c,h;for(;i||o.length;){if(i||(i=o.pop(),c=o[o.length-1],a=s.pop(),h=!0),i.leaf){const m=O0e(e,i.children,t);if(m!==-1)return i.children.splice(m,1),o.push(i),this._condense(o),this}!h&&!i.leaf&&eO(i,r)?(o.push(i),s.push(a),a=0,c=i,i=i.children[0]):c?(a++,i=c.children[a],h=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const o=i-t+1;let s=this._maxEntries,a;if(o<=s)return a=b_(e.slice(t,i+1)),LC(a,this.toBBox),a;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),a=b_([]),a.leaf=!1,a.height=r;const c=Math.ceil(o/s),h=c*Math.ceil(Math.sqrt(s));mF(e,t,i,h,this.compareMinX);for(let m=t;m<=i;m+=h){const v=Math.min(m+h-1,i);mF(e,m,v,c,this.compareMinY);for(let x=m;x<=v;x+=c){const E=Math.min(x+c-1,v);a.children.push(this._build(e,x,E,r-1))}}return LC(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let o=1/0,s=1/0,a;for(let c=0;c<t.children.length;c++){const h=t.children[c],m=JB(h),v=T0e(e,h)-m;v<s?(s=v,o=m<o?m:o,a=h):v===s&&m<o&&(o=m,a=h)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),o=[],s=this._chooseSubtree(r,this.data,t,o);for(s.children.push(e),z2(s,r);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(r,o,t)}_split(e,t){const i=e[t],r=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,r);const s=this._chooseSplitIndex(i,o,r),a=b_(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,LC(i,this.toBBox),LC(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=b_([e,t]),this.data.height=e.height+1,this.data.leaf=!1,LC(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,o=1/0,s=1/0;for(let a=t;a<=i-t;a++){const c=L2(e,0,a,this.toBBox),h=L2(e,a,i,this.toBBox),m=R0e(c,h),v=JB(c)+JB(h);m<o?(o=m,r=a,s=v<s?v:s):m===o&&v<s&&(s=v,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:I0e,o=e.leaf?this.compareMinY:k0e,s=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,o);s<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const o=this.toBBox,s=L2(e,0,t,o),a=L2(e,i-t,i,o);let c=J5(s)+J5(a);for(let h=t;h<i-t;h++){const m=e.children[h];z2(s,e.leaf?o(m):m),c+=J5(s)}for(let h=i-t-1;h>=t;h--){const m=e.children[h];z2(a,e.leaf?o(m):m),c+=J5(a)}return c}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)z2(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():LC(e[t],this.toBBox)}};function O0e(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function LC(n,e){L2(n,0,n.children.length,e,n)}function L2(n,e,t,i,r){r||(r=b_(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let o=e;o<t;o++){const s=n.children[o];z2(r,n.leaf?i(s):s)}return r}function z2(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function I0e(n,e){return n.minX-e.minX}function k0e(n,e){return n.minY-e.minY}function JB(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function J5(n){return n.maxX-n.minX+(n.maxY-n.minY)}function T0e(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function R0e(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,o-i)}function eO(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function eM(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function b_(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mF(n,e,t,i,r){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=i)continue;const s=e+Math.ceil((t-e)/i/2)*i;EX(n,s,e,t,r),o.push(e,s,s,t)}}const MP=[NaN,NaN,NaN,0];let tO;function D0e(){return tO||(tO=Il(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),tO}const P0e=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,K0e=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,U0e=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,L0e=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function tM(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function c3(n){throw new Error('failed to parse "'+n+'" as color')}function OX(n){if(n.toLowerCase().startsWith("rgb")){const o=n.match(K0e)||n.match(P0e)||n.match(U0e);if(o){const s=o[4],a=100/255;return[Ol(tM(o[1],a)+.5|0,0,255),Ol(tM(o[2],a)+.5|0,0,255),Ol(tM(o[3],a)+.5|0,0,255),s!==void 0?Ol(tM(s,100),0,1):1]}c3(n)}if(n.startsWith("#")){if(L0e.test(n)){const o=n.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let c=0,h=o.length;c<h;c+=s){let m=parseInt(o.substring(c,c+s),16);s===1&&(m+=m<<4),a[c/s]=m}return a[3]=a[3]/255,a}c3(n)}const e=D0e();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&c3(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return OX(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=LE(r[3]/255,3),r}function z0e(n){return typeof n=="string"?n:SP(n)}const F0e=1024,h2={};let nO=0;function j0e(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function iO(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function rO(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function oO(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function sO(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function gF(n){const e=oO(n[0]),t=oO(n[1]),i=oO(n[2]),r=sO(e*.222488403+t*.716873169+i*.06060791),o=500*(sO(e*.452247074+t*.399439023+i*.148375274)-r),s=200*(r-sO(e*.016863605+t*.117638439+i*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*r-16,Math.sqrt(o*o+s*s),a<0?a+360:a,n[3]]}function N0e(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=rO(e),o=rO(e+t/500*Math.cos(i)),s=rO(e-t/200*Math.sin(i)),a=iO(o*3.021973625-r*1.617392459-s*.404875592),c=iO(o*-.943766287+r*1.916279586+s*.027607165),h=iO(o*.069407491-r*.22898585+s*1.159737864);return[Ol(a+.5|0,0,255),Ol(c+.5|0,0,255),Ol(h+.5|0,0,255),n[3]]}function wP(n){if(n==="none")return MP;if(h2.hasOwnProperty(n))return h2[n];if(nO>=F0e){let t=0;for(const i in h2)(t++&3)===0&&(delete h2[i],--nO)}const e=OX(n);e.length!==4&&c3(n);for(const t of e)isNaN(t)&&c3(n);return h2[n]=e,++nO,e}function dx(n){return Array.isArray(n)?n:wP(n)}function SP(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function yF(n){return n[0]>0&&n[1]>0}function G0e(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function YA(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let tC=0;const Bh=1<<tC++,Wo=1<<tC++,Cd=1<<tC++,hm=1<<tC++,jb=1<<tC++,F2=1<<tC++,nM=Math.pow(2,tC)-1,EP={[Bh]:"boolean",[Wo]:"number",[Cd]:"string",[hm]:"color",[jb]:"number[]",[F2]:"size"},Q0e=Object.keys(EP).map(Number).sort(Xg);function W0e(n){return n in EP}function j2(n){const e=[];for(const t of Q0e)N2(n,t)&&e.push(EP[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function N2(n,e){return(n&e)===e}function by(n,e){return n===e}class bc{constructor(e,t){if(!W0e(e))throw new Error(`literal expressions must have a specific type, got ${j2(e)}`);this.type=e,this.value=t}}class q0e{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function IX(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function pA(n,e,t){switch(typeof n){case"boolean":{if(by(e,Cd))return new bc(Cd,n?"true":"false");if(!N2(e,Bh))throw new Error(`got a boolean, but expected ${j2(e)}`);return new bc(Bh,n)}case"number":{if(by(e,F2))return new bc(F2,YA(n));if(by(e,Bh))return new bc(Bh,!!n);if(by(e,Cd))return new bc(Cd,n.toString());if(!N2(e,Wo))throw new Error(`got a number, but expected ${j2(e)}`);return new bc(Wo,n)}case"string":{if(by(e,hm))return new bc(hm,wP(n));if(by(e,Bh))return new bc(Bh,!!n);if(!N2(e,Cd))throw new Error(`got a string, but expected ${j2(e)}`);return new bc(Cd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return i1e(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(by(e,F2)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new bc(F2,n)}if(by(e,hm)){if(n.length===3)return new bc(hm,[...n,1]);if(n.length===4)return new bc(hm,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!N2(e,jb))throw new Error(`got an array of numbers, but expected ${j2(e)}`);return new bc(jb,n)}const gn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Y0e={[gn.Get]:Dr(ho(1,1/0),vF),[gn.Var]:Dr(ho(1,1),V0e),[gn.Has]:Dr(ho(1,1/0),vF),[gn.Id]:Dr($0e,zC),[gn.Concat]:Dr(ho(2,1/0),ks(Cd)),[gn.GeometryType]:Dr(H0e,zC),[gn.LineMetric]:Dr(zC),[gn.Resolution]:Dr(aO,zC),[gn.Zoom]:Dr(aO,zC),[gn.Time]:Dr(aO,zC),[gn.Any]:Dr(ho(2,1/0),ks(Bh)),[gn.All]:Dr(ho(2,1/0),ks(Bh)),[gn.Not]:Dr(ho(1,1),ks(Bh)),[gn.Equal]:Dr(ho(2,2),ks(nM)),[gn.NotEqual]:Dr(ho(2,2),ks(nM)),[gn.GreaterThan]:Dr(ho(2,2),ks(Wo)),[gn.GreaterThanOrEqualTo]:Dr(ho(2,2),ks(Wo)),[gn.LessThan]:Dr(ho(2,2),ks(Wo)),[gn.LessThanOrEqualTo]:Dr(ho(2,2),ks(Wo)),[gn.Multiply]:Dr(ho(2,1/0),bF),[gn.Coalesce]:Dr(ho(2,1/0),bF),[gn.Divide]:Dr(ho(2,2),ks(Wo)),[gn.Add]:Dr(ho(2,1/0),ks(Wo)),[gn.Subtract]:Dr(ho(2,2),ks(Wo)),[gn.Clamp]:Dr(ho(3,3),ks(Wo)),[gn.Mod]:Dr(ho(2,2),ks(Wo)),[gn.Pow]:Dr(ho(2,2),ks(Wo)),[gn.Abs]:Dr(ho(1,1),ks(Wo)),[gn.Floor]:Dr(ho(1,1),ks(Wo)),[gn.Ceil]:Dr(ho(1,1),ks(Wo)),[gn.Round]:Dr(ho(1,1),ks(Wo)),[gn.Sin]:Dr(ho(1,1),ks(Wo)),[gn.Cos]:Dr(ho(1,1),ks(Wo)),[gn.Atan]:Dr(ho(1,2),ks(Wo)),[gn.Sqrt]:Dr(ho(1,1),ks(Wo)),[gn.Match]:Dr(ho(4,1/0),CF,X0e),[gn.Between]:Dr(ho(3,3),ks(Wo)),[gn.Interpolate]:Dr(ho(6,1/0),CF,J0e),[gn.Case]:Dr(ho(3,1/0),Z0e,e1e),[gn.In]:Dr(ho(2,2),t1e),[gn.Number]:Dr(ho(1,1/0),ks(nM)),[gn.String]:Dr(ho(1,1/0),ks(nM)),[gn.Array]:Dr(ho(1,1/0),ks(Wo)),[gn.Color]:Dr(ho(1,4),ks(Wo)),[gn.Band]:Dr(ho(1,3),ks(Wo)),[gn.Palette]:Dr(ho(2,2),n1e),[gn.ToString]:Dr(ho(1,1),ks(Bh|Wo|Cd|hm))};function vF(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=n[o+1];switch(typeof s){case"number":{r[o]=new bc(Wo,s);break}case"string":{r[o]=new bc(Cd,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&t.properties.add(String(s))}return r}function V0e(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new bc(Cd,i)]}function $0e(n,e,t){t.featureId=!0}function H0e(n,e,t){t.geometryType=!0}function aO(n,e,t){t.mapState=!0}function zC(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function ho(n,e){return function(t,i,r){const o=t[0],s=t.length-1;if(n===e){if(s!==n){const a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${o}, got ${s}`)}}else if(s<n||s>e){const a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function bF(n,e,t){const i=n.length-1,r=new Array(i);for(let o=0;o<i;++o){const s=pA(n[o+1],e,t);r[o]=s}return r}function ks(n){return function(e,t,i){const r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){const a=pA(e[s+1],n,i);o[s]=a}return o}}function Z0e(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function CF(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function X0e(n,e,t){const i=n.length-1,r=Cd|Wo|Bh,o=pA(n[1],r,t),s=pA(n[n.length-1],e,t),a=new Array(i-2);for(let c=0;c<i-2;c+=2){try{const h=pA(n[c+2],o.type,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+1} of match expression: ${h.message}`)}try{const h=pA(n[c+3],s.type,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+2} of match expression: ${h.message}`)}}return[o,...a,s]}function J0e(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const c=i[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);r=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const o=new bc(Wo,r);let s;try{s=pA(n[2],Wo,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const a=new Array(n.length-3);for(let c=0;c<a.length;c+=2){try{const h=pA(n[c+3],Wo,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${h.message}`)}try{const h=pA(n[c+4],e,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${h.message}`)}}return[o,s,...a]}function e1e(n,e,t){const i=pA(n[n.length-1],e,t),r=new Array(n.length-1);for(let o=0;o<r.length-1;o+=2){try{const s=pA(n[o+1],Bh,t);r[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=pA(n[o+2],i.type,t);r[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return r[r.length-1]=i,r}function t1e(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=Cd}else r=Wo;const o=new Array(i.length);for(let a=0;a<o.length;a++)try{const c=pA(i[a],r,t);o[a]=c}catch(c){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${c.message}`)}return[pA(n[1],r,t),...o]}function n1e(n,e,t){let i;try{i=pA(n[1],Wo,t)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const o=new Array(r.length);for(let s=0;s<o.length;s++){let a;try{a=pA(r[s],hm,t)}catch(c){throw new Error(`failed to parse color at index ${s} in palette expression: ${c.message}`)}if(!(a instanceof bc))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[i,...o]}function Dr(...n){return function(e,t,i){const r=e[0];let o;for(let s=0;s<n.length;s++){const a=n[s](e,t,i);if(s==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new q0e(t,r,...o)}}function i1e(n,e,t){const i=n[0],r=Y0e[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function kX(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return kX(n.getGeometries()[0]);default:return""}}function TX(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function y1(n,e,t){const i=pA(n,e,t);return vm(i)}function vm(n,e){if(n instanceof bc){if(n.type===hm&&typeof n.value=="string"){const i=wP(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case gn.Number:case gn.String:case gn.Coalesce:return r1e(n);case gn.Get:case gn.Var:case gn.Has:return o1e(n);case gn.Id:return i=>i.featureId;case gn.GeometryType:return i=>i.geometryType;case gn.Concat:{const i=n.args.map(r=>vm(r));return r=>"".concat(...i.map(o=>o(r).toString()))}case gn.Resolution:return i=>i.resolution;case gn.Any:case gn.All:case gn.Between:case gn.In:case gn.Not:return a1e(n);case gn.Equal:case gn.NotEqual:case gn.LessThan:case gn.LessThanOrEqualTo:case gn.GreaterThan:case gn.GreaterThanOrEqualTo:return s1e(n);case gn.Multiply:case gn.Divide:case gn.Add:case gn.Subtract:case gn.Clamp:case gn.Mod:case gn.Pow:case gn.Abs:case gn.Floor:case gn.Ceil:case gn.Round:case gn.Sin:case gn.Cos:case gn.Atan:case gn.Sqrt:return l1e(n);case gn.Case:return u1e(n);case gn.Match:return c1e(n);case gn.Interpolate:return A1e(n);case gn.ToString:return h1e(n);default:throw new Error(`Unsupported operator ${t}`)}}function r1e(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=vm(n.args[o]);switch(t){case gn.Coalesce:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case gn.Number:case gn.String:return o=>{for(let s=0;s<i;++s){const a=r[s](o);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function o1e(n,e){const i=n.args[0].value;switch(n.operator){case gn.Get:return r=>{const o=n.args;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;s=s[m]}return s};case gn.Var:return r=>r.variables[i];case gn.Has:return r=>{const o=n.args;if(!(i in r.properties))return!1;let s=r.properties[i];for(let a=1,c=o.length;a<c;++a){const m=o[a].value;if(!s||!Object.hasOwn(s,m))return!1;s=s[m]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function s1e(n,e){const t=n.operator,i=vm(n.args[0]),r=vm(n.args[1]);switch(t){case gn.Equal:return o=>i(o)===r(o);case gn.NotEqual:return o=>i(o)!==r(o);case gn.LessThan:return o=>i(o)<r(o);case gn.LessThanOrEqualTo:return o=>i(o)<=r(o);case gn.GreaterThan:return o=>i(o)>r(o);case gn.GreaterThanOrEqualTo:return o=>i(o)>=r(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function a1e(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=vm(n.args[o]);switch(t){case gn.Any:return o=>{for(let s=0;s<i;++s)if(r[s](o))return!0;return!1};case gn.All:return o=>{for(let s=0;s<i;++s)if(!r[s](o))return!1;return!0};case gn.Between:return o=>{const s=r[0](o),a=r[1](o),c=r[2](o);return s>=a&&s<=c};case gn.In:return o=>{const s=r[0](o);for(let a=1;a<i;++a)if(s===r[a](o))return!0;return!1};case gn.Not:return o=>!r[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function l1e(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=vm(n.args[o]);switch(t){case gn.Multiply:return o=>{let s=1;for(let a=0;a<i;++a)s*=r[a](o);return s};case gn.Divide:return o=>r[0](o)/r[1](o);case gn.Add:return o=>{let s=0;for(let a=0;a<i;++a)s+=r[a](o);return s};case gn.Subtract:return o=>r[0](o)-r[1](o);case gn.Clamp:return o=>{const s=r[0](o),a=r[1](o);if(s<a)return a;const c=r[2](o);return s>c?c:s};case gn.Mod:return o=>r[0](o)%r[1](o);case gn.Pow:return o=>Math.pow(r[0](o),r[1](o));case gn.Abs:return o=>Math.abs(r[0](o));case gn.Floor:return o=>Math.floor(r[0](o));case gn.Ceil:return o=>Math.ceil(r[0](o));case gn.Round:return o=>Math.round(r[0](o));case gn.Sin:return o=>Math.sin(r[0](o));case gn.Cos:return o=>Math.cos(r[0](o));case gn.Atan:return i===2?o=>Math.atan2(r[0](o),r[1](o)):o=>Math.atan(r[0](o));case gn.Sqrt:return o=>Math.sqrt(r[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function u1e(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=vm(n.args[r]);return r=>{for(let o=0;o<t-1;o+=2)if(i[o](r))return i[o+1](r);return i[t-1](r)}}function c1e(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=vm(n.args[r]);return r=>{const o=i[0](r);for(let s=1;s<t-1;s+=2)if(o===i[s](r))return i[s+1](r);return i[t-1](r)}}function A1e(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=vm(n.args[r]);return r=>{const o=i[0](r),s=i[1](r);let a,c;for(let h=2;h<t;h+=2){const m=i[h](r);let v=i[h+1](r);const x=Array.isArray(v);if(x&&(v=j0e(v)),m>=s)return h===2?v:x?d1e(o,s,a,c,m,v):G2(o,s,a,c,m,v);a=m,c=v}return c}}function h1e(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=vm(n.args[o]);switch(t){case gn.ToString:return o=>{const s=r[0](o);return n.args[0].type===hm?SP(s):s.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function G2(n,e,t,i,r,o){const s=r-t;if(s===0)return i;const a=e-t,c=n===1?a/s:(Math.pow(n,a)-1)/(Math.pow(n,s)-1);return i+c*(o-i)}function d1e(n,e,t,i,r,o){if(r-t===0)return i;const a=gF(i),c=gF(o);let h=c[2]-a[2];h>180?h-=360:h<-180&&(h+=360);const m=[G2(n,e,t,a[0],r,c[0]),G2(n,e,t,a[1],r,c[1]),a[2]+G2(n,e,t,0,r,h),G2(n,e,t,i[3],r,o[3])];return N0e(m)}const zi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class BP extends e5{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?zi.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(Ir.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==zi.IDLE&&this.loader){this.state=zi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Ax(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||wme&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=zi.LOADED}).catch(i=>{this.state=zi.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function f1e(n,e,t){const i=n;let r=!0,o=!1,s=!1;const a=[Hw(i,Ir.LOAD,function(){s=!0,o||e()})];return i.src&&jZ?(o=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(s?e():t())})):a.push(Hw(i,Ir.ERROR,t)),function(){r=!1,a.forEach(Ea)}}function p1e(n,e){return new Promise((t,i)=>{function r(){s(),t(n)}function o(){s(),i(new Error("Image load error"))}function s(){n.removeEventListener("load",r),n.removeEventListener("error",o)}n.addEventListener("load",r),n.addEventListener("error",o)})}function m1e(n,e){return e&&(n.src=e),n.src&&jZ?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):p1e(n)}class g1e{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=lO(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=lO(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,o){const s=lO(e,t,i),a=s in this.cache_;this.cache_[s]=r,o&&(r.getImageState()===zi.IDLE&&r.load(),r.getImageState()===zi.LOADING?r.ready().then(()=>{this.patternCache_[s]=iS().createPattern(r.getImage(1),"repeat")}):this.patternCache_[s]=iS().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function lO(n,e,t){const i=t?dx(t):"null";return e+":"+n+":"+i}const hp=new g1e;let d2=null;class RX extends e5{constructor(e,t,i,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=r===void 0?zi.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===zi.LOADED){d2||(d2=Il(1,1,void 0,{willReadFrequently:!0})),d2.drawImage(this.image_,0,0);try{d2.getImageData(0,0,1,1),this.tainted_=!1}catch{d2=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ir.CHANGE)}handleImageError_(){this.imageState_=zi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=zi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Il(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===zi.IDLE){this.image_||this.initializeImage_(),this.imageState_=zi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&m1e(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==zi.LOADED)return;const t=this.image_,i=Il(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=z0e(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===zi.LOADED||this.imageState_===zi.ERROR)e();else{const t=()=>{(this.imageState_===zi.LOADED||this.imageState_===zi.ERROR)&&(this.removeEventListener(Ir.CHANGE,t),e())};this.addEventListener(Ir.CHANGE,t)}})),this.ready_}}function OP(n,e,t,i,r,o){let s=e===void 0?void 0:hp.get(e,t,r);return s||(s=new RX(n,n&&"src"in n?n.src||void 0:e,t,i,r),hp.set(e,t,r,s,o)),o&&s&&!hp.getPattern(e,t,r)&&hp.set(e,t,r,s,o),s}function Ng(n){return n?Array.isArray(n)?SP(n):typeof n=="object"&&"src"in n?y1e(n):n:null}function y1e(n){if(!n.offset||!n.size)return hp.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=hp.getPattern(e,void 0,n.color);if(t)return t;const i=hp.get(n.src,"anonymous",null);if(i.getImageState()!==zi.LOADED)return null;const r=Il(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),OP(r.canvas,e,void 0,zi.LOADED,n.color,!0),hp.getPattern(e,void 0,n.color)}const DX="10px sans-serif",_d="#000",fx="round",s1=[],a1=0,px="round",X3=10,J3="#000",e4="center",rS="middle",mb=[0,0,0,0],t4=1,ab=new Em;let f2=null,_F;const A9={},v1e=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function b1e(n,e,t){return`${n} ${e} 16px "${t}"`}const C1e=(function(){let e,t;async function i(o){await t.ready;const s=await t.load(o);if(s.length===0)return!1;const a=u9(o),c=a.families[0].toLowerCase(),h=a.weight;return s.some(m=>{const v=m.family.replace(/^['"]|['"]$/g,"").toLowerCase(),x=l9[m.weight]||m.weight;return v===c&&m.style===a.style&&x==h})}async function r(){await t.ready;let o=!0;const s=ab.getProperties(),a=Object.keys(s).filter(c=>s[c]<100);for(let c=a.length-1;c>=0;--c){const h=a[c];let m=s[h];m<100&&(await i(h)?(J4(A9),ab.set(h,100)):(m+=10,ab.set(h,m,!0),m<100&&(o=!1)))}e=void 0,o||(e=setTimeout(r,100))}return async function(o){t||(t=VD?self.fonts:document.fonts);const s=u9(o);if(!s)return;const a=s.families;let c=!1;for(const h of a){if(v1e.has(h))continue;const m=b1e(s.style,s.weight,h);ab.get(m)===void 0&&(ab.set(m,0,!0),c=!0)}c&&(clearTimeout(e),e=setTimeout(r,100))}})(),_1e=(function(){let n;return function(e){let t=A9[e];if(t==null){if(VD){const i=u9(e),r=PX(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);A9[e]=t}return t}})();function PX(n,e){return f2||(f2=Il(1,1)),n!=_F&&(f2.font=n,_F=f2.font),f2.measureText(e)}function KX(n,e){return PX(n,e).width}function xF(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,o)=>Math.max(r,KX(n,o)),0);return t[e]=i,i}function x1e(n,e){const t=[],i=[],r=[];let o=0,s=0,a=0,c=0;for(let h=0,m=e.length;h<=m;h+=2){const v=e[h];if(v===`
`||h===m){o=Math.max(o,s),r.push(s),s=0,a+=c,c=0;continue}const x=e[h+1]||n.font,E=KX(x,v);t.push(E),s+=E;const R=_1e(x);i.push(R),c=Math.max(c,R)}return{width:o,height:a,widths:t,heights:i,lineWidths:r}}function M1e(n,e,t,i,r,o,s,a,c,h,m){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=v=>v.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(c,h),n.scale(m[0],m[1]),w1e(i,n)):m[0]<0||m[1]<0?(n.translate(c,h),n.scale(m[0],m[1]),n.drawImage(i,r,o,s,a,0,0,s,a)):n.drawImage(i,r,o,s,a,c,h,s*m[0],a*m[1]),n.restore()}function w1e(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class HE{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=YA(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new HE({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Kr()}getImage(e){return Kr()}getHitDetectionImage(){return Kr()}getPixelRatio(e){return 1}getImageState(){return Kr()}getImageSize(){return Kr()}getOrigin(){return Kr()}getSize(){return Kr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=YA(e)}listenImageChange(e){Kr()}load(){Kr()}unlistenImageChange(e){Kr()}ready(){return Promise.resolve()}}class ZE extends HE{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?zi.LOADING:zi.LOADED,this.imageState_===zi.LOADING&&this.ready().then(()=>this.imageState_=zi.LOADED),this.render()}clone(){const e=this.getScale(),t=new ZE({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=hp.get(i,null,null)?.getImage(1);if(!r){const o=this.renderOptions_,s=Math.ceil(o.size*e),a=Il(s,s);this.draw_(o,a,e),r=a.canvas,hp.set(i,null,null,new RX(r,void 0,null,zi.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,o=this.radius2_===void 0?r:this.radius2_;if(r<o){const $=r;r=o,o=$}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,c=o*Math.sin(a),h=Math.sqrt(o*o-c*c),m=r-h,v=Math.sqrt(c*c+m*m),x=v/c;if(e==="miter"&&x<=i)return x*t;const E=t/2/x,R=t/2*(m/v),z=Math.sqrt((r+E)*(r+E)+R*R)-r;if(this.radius2_===void 0||e==="bevel")return z*2;const Q=r*Math.sin(a),Y=Math.sqrt(r*r-Q*Q),H=o-Y,J=Math.sqrt(Q*Q+H*H)/Q;if(J<=i){const $=J*t/2-o-r;return 2*Math.max(z,$)}return z*2}createRenderOptions(){let e=fx,t=px,i=0,r=null,o=0,s,a=0;this.stroke_&&(s=Ng(this.stroke_.getColor()??J3),a=this.stroke_.getWidth()??t4,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??px,e=this.stroke_.getLineCap()??fx,i=this.stroke_.getMiterLimit()??X3);const c=this.calculateLineJoinSize_(t,a,i),h=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*h+c);return{strokeStyle:s,strokeWidth:a,size:m,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=_d),t.fillStyle=Ng(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=dx(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=Il(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let a=0;a<t;a++){const c=o+a*s,h=a%2===0?i:r;e.lineTo(h*Math.cos(c),h*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=_d,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class l5 extends ZE{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new l5({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class n1{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new n1({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=OP(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===zi.IDLE&&t.load(),t.getImageState()===zi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Yr(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:dx(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function MF(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class mx extends HE{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const s=e.img!==void 0?e.img:null;let a=e.src;xs(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||Yr(s)),xs(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),xs(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=zi.IDLE:s!==void 0&&("complete"in s?s.complete?c=s.src?zi.LOADED:zi.IDLE:c=zi.LOADING:c=zi.LOADED),this.color_=e.color!==void 0?dx(e.color):null,this.iconImage_=OP(s,a,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let h,m;if(e.size)[h,m]=e.size;else{const v=this.getImage(1);if(v.width&&v.height)h=v.width,m=v.height;else if(v instanceof HTMLImageElement){this.initialOptions_=e;const x=()=>{if(this.unlistenImageChange(x),!this.initialOptions_)return;const E=this.iconImage_.getSize();this.setScale(MF(E[0],E[1],e.width,e.height))};this.listenImageChange(x);return}}h!==void 0&&this.setScale(MF(h,m,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new mx({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==zi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==zi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ir.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ir.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Fy{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Fy({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class pf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=wF,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new pf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=wF,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function S1e(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(xs(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let uO=null;function UX(n,e){if(!uO){const t=new n1({color:"rgba(255,255,255,0.4)"}),i=new Fy({color:"#3399CC",width:1.25});uO=[new pf({image:new l5({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return uO}function wF(n){return n.getGeometry()}const E1e="#333";let LX=class zX{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=YA(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new n1({color:E1e}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new zX({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=YA(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}};function B1e(n){return!0}function O1e(n){const e=IX(),t=I1e(n,e),i=TX();return function(r,o){if(i.properties=r.getPropertiesInternal(),i.resolution=o,e.featureId){const s=r.getId();s!==void 0?i.featureId=s:i.featureId=null}return e.geometryType&&(i.geometryType=kX(r.getGeometry())),t(i)}}function SF(n){const e=IX(),t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=h9(n[s],e);const r=TX(),o=new Array(t);return function(s,a){if(r.properties=s.getPropertiesInternal(),r.resolution=a,e.featureId){const h=s.getId();h!==void 0?r.featureId=h:r.featureId=null}let c=0;for(let h=0;h<t;++h){const m=i[h](r);m&&(o[c]=m,c+=1)}return o.length=c,o}}function I1e(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const o=n[r],s="filter"in o?y1(o.filter,Bh,e):B1e;let a;if(Array.isArray(o.style)){const c=o.style.length;a=new Array(c);for(let h=0;h<c;++h)a[h]=h9(o.style[h],e)}else a=[h9(o.style,e)];i[r]={filter:s,styles:a}}return function(r){const o=[];let s=!1;for(let a=0;a<t;++a){const c=i[a].filter;if(c(r)&&!(n[a].else&&s)){s=!0;for(const h of i[a].styles){const m=h(r);m&&o.push(m)}}}return o}}function h9(n,e){const t=n4(n,"",e),i=i4(n,"",e),r=k1e(n,e),o=T1e(n,e),s=wd(n,"z-index",e);if(!t&&!i&&!r&&!o&&!nv(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new pf;return function(c){let h=!0;if(t){const m=t(c);m&&(h=!1),a.setFill(m)}if(i){const m=i(c);m&&(h=!1),a.setStroke(m)}if(r){const m=r(c);m&&(h=!1),a.setText(m)}if(o){const m=o(c);m&&(h=!1),a.setImage(m)}return s&&a.setZIndex(s(c)),h?null:a}}function n4(n,e,t){let i;if(e+"fill-pattern-src"in n)i=K1e(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;i=IP(n,e+"fill-color",t)}if(!i)return null;const r=new n1;return function(o){const s=i(o);return s===MP?null:(r.setColor(s),r)}}function i4(n,e,t){const i=wd(n,e+"stroke-width",t),r=IP(n,e+"stroke-color",t);if(!i&&!r)return null;const o=X0(n,e+"stroke-line-cap",t),s=X0(n,e+"stroke-line-join",t),a=FX(n,e+"stroke-line-dash",t),c=wd(n,e+"stroke-line-dash-offset",t),h=wd(n,e+"stroke-miter-limit",t),m=new Fy;return function(v){if(r){const x=r(v);if(x===MP)return null;m.setColor(x)}if(i&&m.setWidth(i(v)),o){const x=o(v);if(x!=="butt"&&x!=="round"&&x!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(x)}if(s){const x=s(v);if(x!=="bevel"&&x!=="round"&&x!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(x)}return a&&m.setLineDash(a(v)),c&&m.setLineDashOffset(c(v)),h&&m.setMiterLimit(h(v)),m}}function k1e(n,e){const t="text-",i=X0(n,t+"value",e);if(!i)return null;const r=n4(n,t,e),o=n4(n,t+"background-",e),s=i4(n,t,e),a=i4(n,t+"background-",e),c=X0(n,t+"font",e),h=wd(n,t+"max-angle",e),m=wd(n,t+"offset-x",e),v=wd(n,t+"offset-y",e),x=G_(n,t+"overflow",e),E=X0(n,t+"placement",e),R=wd(n,t+"repeat",e),P=XE(n,t+"scale",e),z=G_(n,t+"rotate-with-view",e),Q=wd(n,t+"rotation",e),Y=X0(n,t+"align",e),H=X0(n,t+"justify",e),Z=X0(n,t+"baseline",e),J=G_(n,t+"keep-upright",e),$=FX(n,t+"padding",e),G=JE(n,t+"declutter-mode"),oe=new LX({declutterMode:G});return function(ue){if(oe.setText(i(ue)),r&&oe.setFill(r(ue)),o&&oe.setBackgroundFill(o(ue)),s&&oe.setStroke(s(ue)),a&&oe.setBackgroundStroke(a(ue)),c&&oe.setFont(c(ue)),h&&oe.setMaxAngle(h(ue)),m&&oe.setOffsetX(m(ue)),v&&oe.setOffsetY(v(ue)),x&&oe.setOverflow(x(ue)),E){const xe=E(ue);if(xe!=="point"&&xe!=="line")throw new Error("Expected point or line for text-placement");oe.setPlacement(xe)}if(R&&oe.setRepeat(R(ue)),P&&oe.setScale(P(ue)),z&&oe.setRotateWithView(z(ue)),Q&&oe.setRotation(Q(ue)),Y){const xe=Y(ue);if(xe!=="left"&&xe!=="center"&&xe!=="right"&&xe!=="end"&&xe!=="start")throw new Error("Expected left, right, center, start, or end for text-align");oe.setTextAlign(xe)}if(H){const xe=H(ue);if(xe!=="left"&&xe!=="right"&&xe!=="center")throw new Error("Expected left, right, or center for text-justify");oe.setJustify(xe)}if(Z){const xe=Z(ue);if(xe!=="bottom"&&xe!=="top"&&xe!=="middle"&&xe!=="alphabetic"&&xe!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");oe.setTextBaseline(xe)}return $&&oe.setPadding($(ue)),J&&oe.setKeepUpright(J(ue)),oe}}function T1e(n,e){return"icon-src"in n?R1e(n,e):"shape-points"in n?D1e(n,e):"circle-radius"in n?P1e(n,e):null}function R1e(n,e){const t="icon-",i=t+"src",r=jX(n[i],i),o=oS(n,t+"anchor",e),s=XE(n,t+"scale",e),a=wd(n,t+"opacity",e),c=oS(n,t+"displacement",e),h=wd(n,t+"rotation",e),m=G_(n,t+"rotate-with-view",e),v=BF(n,t+"anchor-origin"),x=OF(n,t+"anchor-x-units"),E=OF(n,t+"anchor-y-units"),R=F1e(n,t+"color"),P=L1e(n,t+"cross-origin"),z=z1e(n,t+"offset"),Q=BF(n,t+"offset-origin"),Y=sS(n,t+"width"),H=sS(n,t+"height"),Z=U1e(n,t+"size"),J=JE(n,t+"declutter-mode"),$=new mx({src:r,anchorOrigin:v,anchorXUnits:x,anchorYUnits:E,color:R,crossOrigin:P,offset:z,offsetOrigin:Q,height:H,width:Y,size:Z,declutterMode:J});return function(G){return a&&$.setOpacity(a(G)),c&&$.setDisplacement(c(G)),h&&$.setRotation(h(G)),m&&$.setRotateWithView(m(G)),s&&$.setScale(s(G)),o&&$.setAnchor(o(G)),$}}function D1e(n,e){const t="shape-",i=t+"points",r=t+"radius",o=d9(n[i],i),s=d9(n[r],r),a=n4(n,t,e),c=i4(n,t,e),h=XE(n,t+"scale",e),m=oS(n,t+"displacement",e),v=wd(n,t+"rotation",e),x=G_(n,t+"rotate-with-view",e),E=sS(n,t+"radius2"),R=sS(n,t+"angle"),P=JE(n,t+"declutter-mode"),z=new ZE({points:o,radius:s,radius2:E,angle:R,declutterMode:P});return function(Q){return a&&z.setFill(a(Q)),c&&z.setStroke(c(Q)),m&&z.setDisplacement(m(Q)),v&&z.setRotation(v(Q)),x&&z.setRotateWithView(x(Q)),h&&z.setScale(h(Q)),z}}function P1e(n,e){const t="circle-",i=n4(n,t,e),r=i4(n,t,e),o=wd(n,t+"radius",e),s=XE(n,t+"scale",e),a=oS(n,t+"displacement",e),c=wd(n,t+"rotation",e),h=G_(n,t+"rotate-with-view",e),m=JE(n,t+"declutter-mode"),v=new l5({radius:5,declutterMode:m});return function(x){return o&&v.setRadius(o(x)),i&&v.setFill(i(x)),r&&v.setStroke(r(x)),a&&v.setDisplacement(a(x)),c&&v.setRotation(c(x)),h&&v.setRotateWithView(h(x)),s&&v.setScale(s(x)),v}}function wd(n,e,t){if(!(e in n))return;const i=y1(n[e],Wo,t);return function(r){return d9(i(r),e)}}function X0(n,e,t){if(!(e in n))return null;const i=y1(n[e],Cd,t);return function(r){return jX(i(r),e)}}function K1e(n,e,t){const i=X0(n,e+"pattern-src",t),r=EF(n,e+"pattern-offset",t),o=EF(n,e+"pattern-size",t),s=IP(n,e+"color",t);return function(a){return{src:i(a),offset:r&&r(a),size:o&&o(a),color:s&&s(a)}}}function G_(n,e,t){if(!(e in n))return null;const i=y1(n[e],Bh,t);return function(r){const o=i(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function IP(n,e,t){if(!(e in n))return null;const i=y1(n[e],hm,t);return function(r){return NX(i(r),e)}}function FX(n,e,t){if(!(e in n))return null;const i=y1(n[e],jb,t);return function(r){return u5(i(r),e)}}function oS(n,e,t){if(!(e in n))return null;const i=y1(n[e],jb,t);return function(r){const o=u5(i(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function EF(n,e,t){if(!(e in n))return null;const i=y1(n[e],jb,t);return function(r){return GX(i(r),e)}}function XE(n,e,t){if(!(e in n))return null;const i=y1(n[e],jb|Wo,t);return function(r){return j1e(i(r),e)}}function sS(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function U1e(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return YA(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function L1e(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function BF(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function OF(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function z1e(n,e){const t=n[e];if(t!==void 0)return u5(t,e)}function JE(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function F1e(n,e){const t=n[e];if(t!==void 0)return NX(t,e)}function u5(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function jX(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function d9(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function NX(n,e){if(typeof n=="string")return n;const t=u5(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function GX(n,e){const t=u5(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function j1e(n,e){return typeof n=="number"?n:GX(n,e)}const IF={RENDER_ORDER:"renderOrder"};class kP extends Lx{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(IF.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new BX(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(IF.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?UX:e;const t=N1e(e);this.styleFunction_=e===null?void 0:S1e(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function N1e(n){if(n===void 0)return UX;if(!n)return null;if(typeof n=="function"||n instanceof pf)return n;if(!Array.isArray(n))return SF([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof pf){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!(s instanceof pf))throw new Error("Expected a list of style instances");r[o]=s}return r}if("style"in t){const r=new Array(e);for(let o=0;o<e;++o){const s=n[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");r[o]=s}return O1e(r)}return SF(n)}class QX extends Sm{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}class G1e extends X4{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Kr()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;n0(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),aX(r,i)}forEachFeatureAtCoordinate(e,t,i,r,o,s,a,c){let h;const m=t.viewState;function v(Z,J,$,G){return o.call(s,J,Z?$:null,G)}const x=m.projection,E=XD(e.slice(),x),R=[[0,0]];if(x.canWrapX()&&r){const Z=x.getExtent(),J=is(Z);R.push([-J,0],[J,0])}const P=t.layerStatesArray,z=P.length,Q=[],Y=[];for(let Z=0;Z<R.length;Z++)for(let J=z-1;J>=0;--J){const $=P[J],G=$.layer;if(G.hasRenderer()&&xP($,m)&&a.call(c,G)){const oe=G.getRenderer(),ue=G.getSource();if(oe&&ue){const xe=ue.getWrapX()?E:e,ge=v.bind(null,$.managed);Y[0]=xe[0]+R[Z][0],Y[1]=xe[1]+R[Z][1],h=oe.forEachFeatureAtCoordinate(Y,t,i,ge,Q)}if(h)return h}}if(Q.length===0)return;const H=1/Q.length;return Q.forEach((Z,J)=>Z.distanceSq+=J*H),Q.sort((Z,J)=>Z.distanceSq-J.distanceSq),Q.some(Z=>h=Z.callback(Z.feature,Z.layer,Z.geometry)),h}hasFeatureAtCoordinate(e,t,i,r,o,s){return this.forEachFeatureAtCoordinate(e,t,i,r,q3,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){Kr()}scheduleExpireIconCache(e){hp.canExpireCache()&&e.postRenderFunctions.push(Q1e)}}function Q1e(n,e){hp.expire()}class W1e extends G1e{constructor(e){super(e),this.fontChangeListenerKey_=Yo(ab,cx.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=$E+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new QX(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Ea(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ap.PRECOMPOSE,e);const t=e.layerStatesArray.sort((a,c)=>a.zIndex-c.zIndex);t.some(a=>a.layer instanceof kP&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const o=[];let s=null;for(let a=0,c=t.length;a<c;++a){const h=t[a];e.layerIndex=a;const m=h.layer,v=m.getSourceState();if(!xP(h,r)||v!="ready"&&v!="undefined"){m.unrender();continue}const x=m.render(e,s);x&&(x!==s&&(this.children_.push(x),s=x),o.push(h))}this.declutter(e,o),t0e(this.element_,this.children_),this.dispatchRenderEvent(Ap.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function WX(n){if(n instanceof Lx){n.setMapInternal(null);return}n instanceof Ux&&n.getLayers().forEach(WX)}function qX(n,e){if(n instanceof Lx){n.setMapInternal(e);return}if(n instanceof Ux){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)qX(t[i],e)}}let e6=class extends Em{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=q1e(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Mme,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ed(),this.pixelToCoordinateTransform_=Ed(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||o0e(),this.interactions=t.interactions||E0e({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new GZ(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(NA.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(NA.VIEW,this.handleViewChanged_),this.addChangeListener(NA.SIZE,this.handleSizeChanged_),this.addChangeListener(NA.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Am)&&e.view.then(function(r){i.setView(new Am(r))}),this.controls.addEventListener(bd.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(bd.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(bd.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(bd.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(bd.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(bd.REMOVE,r=>{const o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){qX(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter!==void 0?i.layerFilter:q3,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,a,t,null,s,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof Ux?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:q3,o=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,s,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),o=i.width/r[0],s=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/o,(a.clientY-i.top)/s]}getTarget(){return this.get(NA.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return o9(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Hu(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(NA.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof zg){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const o=r.layer.getRenderer();if(o&&!o.ready)return!0;const s=r.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){const t=H0(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Hu(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(NA.SIZE)}getView(){return this.get(NA.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return Bme(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new Ey(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===$T.POINTERDOWN||i===Ir.WHEEL||i===Ir.KEYDOWN){const r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,s=t.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===r?r.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,o=r;if(e){const s=e.viewHints;if(s[hl.ANIMATING]||s[hl.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,o=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ap.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ap.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new v_(Z0.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new v_(Z0.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,o=i.length;r<o;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Ea(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ir.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ir.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new W1e(this)),this.mapBrowserEventHandler_=new Sme(this,this.moveTolerance_);for(const o in Hl)this.mapBrowserEventHandler_.addEventListener(Hl[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ir.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ir.WHEEL,this.boundHandleBrowserEvent_,NZ?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const o=t.getRootNode();i=o instanceof ShadowRoot?o.host:t}this.targetChangeHandlerKeys_=[Yo(i,Ir.KEYDOWN,this.handleBrowserEvent,this),Yo(i,Ir.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ea(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ea(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Yo(e,cx.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Yo(e,Ir.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ea),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Oy("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Yo(e,cx.PROPERTYCHANGE,this.render,this),Yo(e,Ir.CHANGE,this.render,this),Yo(e,"addlayer",this.handleLayerAdd_,this),Yo(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){WX(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let o=null;if(t!==void 0&&yF(t)&&i&&i.isDef()){const s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Xw(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:Yr(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=Xw(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!Xb(this.previousExtent_)&&!h1(o.extent,this.previousExtent_))&&(this.dispatchEvent(new v_(Z0.MOVESTART,this,r)),this.previousExtent_=Px(this.previousExtent_)),this.previousExtent_&&!o.viewHints[hl.ANIMATING]&&!o.viewHints[hl.INTERACTING]&&!h1(o.extent,this.previousExtent_)&&(this.dispatchEvent(new v_(Z0.MOVEEND,this,o)),QZ(o.extent,this.previousExtent_))),this.dispatchEvent(new v_(Z0.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(Z0.LOADSTART)||this.hasListener(Z0.LOADEND)||this.hasListener(Ap.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Oy("removelayer",t)),this.set(NA.LAYERGROUP,e)}setSize(e){this.set(NA.SIZE,e)}setTarget(e){this.set(NA.TARGET,e)}setView(e){if(!e||e instanceof Am){this.set(NA.VIEW,e);return}this.set(NA.VIEW,new Am);const t=this;e.then(function(i){t.setView(new Am(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),o=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),s=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(o)&&!isNaN(s)&&(t=[Math.max(0,o),Math.max(0,s)],!yF(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&JZ("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Av(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function q1e(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Ux({layers:n.layers});t[NA.LAYERGROUP]=i,t[NA.TARGET]=n.target,t[NA.VIEW]=n.view instanceof Am?n.view:new Am;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new zg(n.controls.slice()):(xs(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new zg(n.interactions.slice()):(xs(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let s;return n.overlays!==void 0?Array.isArray(n.overlays)?s=new zg(n.overlays.slice()):(xs(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=n.overlays):s=new zg,{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:t}}class t6 extends Em{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new t6(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ea(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Yo(e,Ir.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Y1e(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Y1e(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(xs(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function YX(n,e,t,i){const r=[];let o=vp();for(let s=0,a=t.length;s<a;++s){const c=t[s];o=HD(n,e,c[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=c[c.length-1]}return r}function aS(n,e,t,i,r,o,s){let a,c;const h=(t-e)/i;if(h===1)a=e;else if(h===2)a=e,c=r;else if(h!==0){let m=n[e],v=n[e+1],x=0;const E=[0];for(let z=e+i;z<t;z+=i){const Q=n[z],Y=n[z+1];x+=Math.sqrt((Q-m)*(Q-m)+(Y-v)*(Y-v)),E.push(x),m=Q,v=Y}const R=r*x,P=mme(E,R);P<0?(c=(R-E[-P-2])/(E[-P-1]-E[-P-2]),a=e+(-P-2)*i):a=e+P*i}s=s>1?s:2,o=o||new Array(s);for(let m=0;m<s;++m)o[m]=a===void 0?NaN:c===void 0?n[a+m]:ff(n[a+m],n[a+i+m],c);return o}function f9(n,e,t,i,r,o){if(t==e)return null;let s;if(r<n[e+i-1])return o?(s=n.slice(e,e+i),s[i-1]=r,s):null;if(n[t-1]<r)return o?(s=n.slice(t-i,t),s[i-1]=r,s):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const x=a+c>>1;r<n[(x+1)*i-1]?c=x:a=x+1}const h=n[a*i-1];if(r==h)return n.slice((a-1)*i,(a-1)*i+i);const m=n[(a+1)*i-1],v=(r-h)/(m-h);s=[];for(let x=0;x<i-1;++x)s.push(ff(n[(a-1)*i+x],n[a*i+x],v));return s.push(r),s}function V1e(n,e,t,i,r,o,s){if(s)return f9(n,e,t[t.length-1],i,r,o);let a;if(r<n[i-1])return o?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return o?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,h=t.length;c<h;++c){const m=t[c];if(e!=m){if(r<n[e+i-1])return null;if(r<=n[m-1])return f9(n,e,m,i,r,!1);e=m}}return null}class lS extends uX{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ea),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(Yo(e[t],Ir.CHANGE,this.changed,this))}clone(){const e=new lS(cO(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Zb(this.getExtent(),e,t))return r;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)r=o[s].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){Px(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)qZ(e,t[i].getExtent());return e}getGeometries(){return cO(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let o=0,s=i.length;o<s;++o){const a=i[o],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}return r?new lS(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Sf(this.getExtent()));const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)r[o].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(cO(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cO(n){return n.map(e=>e.clone())}function TP(n,e,t,i){let r=n[e],o=n[e+1],s=0;for(let a=e+i;a<t;a+=i){const c=n[a],h=n[a+1];s+=Math.sqrt((c-r)*(c-r)+(h-o)*(h-o)),r=c,o=h}return s}class Nb extends Jb{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Jg(this.flatCoordinates,e),this.changed()}clone(){const e=new Nb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return pX(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,f9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return zy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return aS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return TP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=YE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Nb(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return VE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qE(this.flatCoordinates,0,e,this.stride),this.changed()}}class r4 extends Jb{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,o=[],s=[];for(let c=0,h=r.length;c<h;++c){const m=r[c];Jg(o,m.getFlatCoordinates()),s.push(o.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){Jg(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new r4(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(aP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),uP(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,V1e(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return H3(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Nb(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let o=0;for(let s=0,a=t.length;s<a;++s){const c=t[s],h=new Nb(e.slice(o,c),i);r.push(h),o=c}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,o=e.length;r<o;++r)i+=TP(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,o=this.stride;for(let s=0,a=r.length;s<a;++s){const c=r[s],h=aS(t,i,c,o,.5);Jg(e,h),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=dX(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new r4(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return Fge(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=r5(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class c5 extends Jb{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Jg(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new c5(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<Zb(this.getExtent(),e,t))return r;const o=this.flatCoordinates,s=this.stride;for(let a=0,c=o.length;a<c;a+=s){const h=Ob(e,t,o[a],o[a+1]);if(h<r){r=h;for(let m=0;m<s;++m)i[m]=o[a+m];i.length=s}}return r}getCoordinates(){return zy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Fb(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let o=0,s=e.length;o<s;o+=i){const a=new Fb(e.slice(o,o+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,o=t.length;r<o;r+=i){const s=t[r],a=t[r+1];if($D(e,s,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qE(this.flatCoordinates,0,e,this.stride),this.changed()}}class o4 extends Jb{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,o=[],s=[];for(let a=0,c=r.length;a<c;++a){const h=r[a],m=o.length,v=h.getEnds();for(let x=0,E=v.length;x<E;++x)v[x]+=m;Jg(o,h.getFlatCoordinates()),s.push(v)}t=r.length===0?this.getLayout():r[0].getLayout(),e=o,i=s}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Jg(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,o=t.length;r<o;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new o4(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<Zb(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rge(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Dge(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return zge(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Tge(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),a9(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,s9(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=YX(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=fX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new c5(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;yX(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=a9(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Uge(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new o4(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const o=this.endss_[e-1];t=o[o.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let o=0,s=i.length;o<s;++o)i[o]-=t;return new d1(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let o=0;for(let s=0,a=i.length;s<a;++s){const c=i[s].slice(),h=c[c.length-1];if(o!==0)for(let v=0,x=c.length;v<x;++v)c[v]-=o;const m=new d1(t.slice(o,h),e,c);r.push(m),o=h}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return jge(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=hX(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const kF=Ed();class WA{constructor(e,t,i,r,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?WZ(this.flatCoordinates_):HD(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Sf(this.getExtent());this.flatInteriorPoints_=hP(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=vX(this.flatCoordinates_,this.ends_),t=YX(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=fX(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=aS(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,o=i.length;r<o;++r){const s=i[r],a=aS(e,t,s,2,.5);Jg(this.flatMidpoints_,a),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Hs(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=Ju(i)/Ju(t);n0(kF,i[0],i[3],r,-r,0,0,0),Jy(this.flatCoordinates_,0,this.flatCoordinates_.length,2,kF,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new WA(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=zZ((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=YE(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=dX(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=cP(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new WA(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}WA.prototype.getFlatCoordinates=WA.prototype.getOrientedFlatCoordinates;class VX{drawCustom(e,t,i,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class $1e extends VX{constructor(e,t,i,r,o,s,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?LE(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ed()}drawImages_(e,t,i,r){if(!this.image_)return;const o=Jy(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,c=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=c*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let m=0,v=o.length;m<v;m+=2){const x=o[m]-this.imageAnchorX_,E=o[m+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const R=x+this.imageAnchorX_,P=E+this.imageAnchorY_;n0(a,R,P,1,1,h,-R,-P),s.save(),s.transform.apply(s,a),s.translate(R,P),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,x,E,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Jy(e,t,i,r,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=o[t]+this.textOffsetX_,h=o[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(c-this.textOffsetX_,h-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,c,h),this.textFillState_&&s.fillText(this.text_,c,h))}}moveToLineTo_(e,t,i,r,o){const s=this.context_,a=Jy(e,t,i,r,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let c=a.length;o&&(c-=2);for(let h=2;h<c;h+=2)s.lineTo(a[h],a[h+1]);return o&&s.closePath(),i}drawRings_(e,t,i,r){for(let o=0,s=i.length;o<s;++o)t=this.moveToLineTo_(e,t,i[o],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xl(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=kge(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],o=Math.sqrt(i*i+r*r),s=this.context_;s.beginPath(),s.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xl(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Xl(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let o=0;const s=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,h=s.length;c<h;++c)o=this.moveToLineTo_(r,o,s[c],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const o=e.getEndss(),s=e.getStride();t.beginPath();for(let a=0,c=o.length;a<c;++a){const h=o[a];r=this.drawRings_(i,r,h,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Av(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:e4;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Ng(i||_d)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),o=t.getLineDash(),s=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),h=t.getMiterLimit(),m=o||s1;this.strokeState_={lineCap:r!==void 0?r:fx,lineDash:this.pixelRatio_===1?m:m.map(v=>v*this.pixelRatio_),lineDashOffset:(s||a1)*this.pixelRatio_,lineJoin:a!==void 0?a:px,lineWidth:(c!==void 0?c:t4)*this.pixelRatio_,miterLimit:h!==void 0?h:X3,strokeStyle:Ng(i||J3)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const E=t.getColor();this.textFillState_={fillStyle:Ng(E||_d)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const E=i.getColor(),R=i.getLineCap(),P=i.getLineDash(),z=i.getLineDashOffset(),Q=i.getLineJoin(),Y=i.getWidth(),H=i.getMiterLimit();this.textStrokeState_={lineCap:R!==void 0?R:fx,lineDash:P||s1,lineDashOffset:z||a1,lineJoin:Q!==void 0?Q:px,lineWidth:Y!==void 0?Y:t4,miterLimit:H!==void 0?H:X3,strokeStyle:Ng(E||J3)}}const r=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),h=e.getScaleArray(),m=e.getText(),v=e.getTextAlign(),x=e.getTextBaseline();this.textState_={font:r!==void 0?r:DX,textAlign:v!==void 0?v:e4,textBaseline:x!==void 0?x:rS},this.text_=m!==void 0?Array.isArray(m)?m.reduce((E,R,P)=>E+=P%2?" ":R,""):m:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const H1e=.5,$X={Point:rye,LineString:tye,Polygon:sye,MultiPoint:oye,MultiLineString:nye,MultiPolygon:iye,GeometryCollection:eye,Circle:X1e};function Z1e(n,e){return parseInt(Yr(n),10)-parseInt(Yr(e),10)}function p9(n,e){const t=HX(n,e);return t*t}function HX(n,e){return H1e*n/e}function X1e(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(o,s),c.drawCircle(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}function uS(n,e,t,i,r,o,s,a){const c=[],h=t.getImage();if(h){let x=!0;const E=h.getImageState();E==zi.LOADED||E==zi.ERROR?x=!1:E==zi.IDLE&&h.load(),x&&c.push(h.ready())}const m=t.getFill();m&&m.loading()&&c.push(m.ready());const v=c.length>0;return v&&Promise.all(c).then(()=>r(null)),J1e(n,e,t,i,o,s,a),v}function J1e(n,e,t,i,r,o,s){const a=t.getGeometryFunction()(e);if(!a)return;const c=a.simplifyTransformed(i,r);if(t.getRenderer())ZX(n,c,t,e,s);else{const m=$X[c.getType()];m(n,c,t,e,s,o)}}function ZX(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let a=0,c=s.length;a<c;++a)ZX(n,s[a],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function eye(n,e,t,i,r,o){const s=e.getGeometriesArray();let a,c;for(a=0,c=s.length;a<c;++a){const h=$X[s[a].getType()];h(n,s[a],t,i,r,o)}}function tye(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function nye(n,e,t,i,r){const o=t.getStroke();if(o){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,i,r)}const s=t.getText();if(s&&s.getText()){const a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function iye(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawMultiPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}function rye(n,e,t,i,r,o){const s=t.getImage(),a=t.getText(),c=a&&a.getText(),h=o&&s&&c?{}:void 0;if(s){if(s.getImageState()!=zi.LOADED)return;const m=n.getBuilder(t.getZIndex(),"Image");m.setImageStyle(s,h),m.drawPoint(e,i,r)}if(c){const m=n.getBuilder(t.getZIndex(),"Text");m.setTextStyle(a,h),m.drawText(e,i,r)}}function oye(n,e,t,i,r,o){const s=t.getImage(),a=s&&s.getOpacity()!==0,c=t.getText(),h=c&&c.getText(),m=o&&a&&h?{}:void 0;if(a){if(s.getImageState()!=zi.LOADED)return;const v=n.getBuilder(t.getZIndex(),"Image");v.setImageStyle(s,m),v.drawMultiPoint(e,i,r)}if(h){const v=n.getBuilder(t.getZIndex(),"Text");v.setTextStyle(c,m),v.drawText(e,i,r)}}function sye(n,e,t,i,r){const o=t.getFill(),s=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(o,s),c.drawPolygon(e,i,r)}const a=t.getText();if(a&&a.getText()){const c=n.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i,r)}}let aye=!1;function XX(n,e,t,i,r,o,s){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=aye,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const h=e.getType();try{let m;h=="text"||h=="json"?m=a.responseText:h=="xml"?m=a.responseXML||a.responseText:h=="arraybuffer"&&(m=a.response),m?o(e.readFeatures(m,{extent:t,featureProjection:r}),e.readProjection(m)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function TF(n,e){return function(t,i,r,o,s){XX(n,e,t,i,r,(a,c)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function lye(n,e){return[[-1/0,-1/0,1/0,1/0]]}function uye(n,e){return[n]}class RF{constructor(e){this.rbush_=new BX(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Yr(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,o=t.length;r<o;r++){const s=e[r],a=t[r],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=c,this.items_[Yr(a)]=c}this.rbush_.load(i)}remove(e){const t=Yr(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Yr(t)],r=[i.minX,i.minY,i.maxX,i.maxY];h1(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,o=e.length;r<o;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return nv(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return A1(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class zx extends Em{constructor(e){super(),this.projection=Hs(e.projection),this.attributions_=DF(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=DF(e),this.changed()}setState(e){this.state_=e,this.changed()}}function DF(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const ep={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Cy extends Sm{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class aw extends zx{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Y3,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(xs(this.format_,"`format` must be set when `url` is set"),this.loader_=TF(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:lye;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new RF:null,this.loadedExtentsRtree_=new RF,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new zg(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Yr(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Cy(ep.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof WA||(this.featureChangeKeys_[e]=[Yo(t,Ir.CHANGE,this.handleFeatureChange_,this),Yo(t,cx.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof WA){const o=this.idIndex_[r];o instanceof WA?Array.isArray(o)?o.push(t):this.idIndex_[r]=[o,t]:i=!1}else i=!1}return i&&(xs(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let o=0,s=e.length;o<s;o++){const a=e[o],c=Yr(a);this.addToIndex_(c,a)&&i.push(a)}for(let o=0,s=i.length;o<s;o++){const a=i[o],c=Yr(a);this.setupChangeEvents_(c,a);const h=a.getGeometry();if(h){const m=h.getExtent();t.push(m),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(ep.ADDFEATURE))for(let o=0,s=i.length;o<s;o++)this.dispatchEvent(new Cy(ep.ADDFEATURE,i[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ep.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(ep.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(bd.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(bd.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ea);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Cy(ep.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const o=r.getGeometry();if(o instanceof WA||o.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof WA||r.intersectsExtent(e)){const o=t(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),nv(this.nullGeometryFeatures_)||Jg(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=ZZ(e,t);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let o=null;const s=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||q3,this.featuresRtree_.forEachInExtent(c,function(h){if(t(h)){const m=h.getGeometry(),v=a;if(a=m instanceof WA?0:m.closestPointXY(i,r,s,a),a<v){o=h;const x=Math.sqrt(a);c[0]=i-x,c[1]=r-x,c[2]=i+x,c[3]=r+x}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Yr(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const s=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}const o=t.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Cy(ep.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Yr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&nv(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,o=this.strategy_(e,t,i);for(let s=0,a=o.length;s<a;++s){const c=o[s];r.forEachInExtent(c,function(m){return Fg(m.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Cy(ep.FEATURESLOADSTART)),this.loader_.call(this,c,t,i,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new Cy(ep.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Cy(ep.FEATURESLOADERROR))}),r.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(h1(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Yr(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Ea),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const o=r.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[t],this.hasListener(ep.REMOVEFEATURE)&&this.dispatchEvent(new Cy(ep.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){xs(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(TF(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const dr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},iM=[dr.FILL],jy=[dr.STROKE],gb=[dr.BEGIN_PATH],PF=[dr.CLOSE_PATH];class A5 extends VX{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],zb(i,r)&&(o[s++]=r[0],o[s++]=r[1]);return s}appendFlatLineCoordinates(e,t,i,r,o,s){const a=this.coordinates;let c=a.length;const h=this.getBufferedMaxExtent();s&&(t+=r);let m=e[t],v=e[t+1];const x=this.tmpCoordinate_;let E=!0,R,P,z;for(R=t+r;R<i;R+=r)x[0]=e[R],x[1]=e[R+1],z=XT(h,x),z!==P?(E&&(a[c++]=m,a[c++]=v,E=!1),a[c++]=x[0],a[c++]=x[1]):z===qc.INTERSECTING?(a[c++]=x[0],a[c++]=x[1],E=!1):E=!0,m=x[0],v=x[1],P=z;return(o&&E||R===t+r)&&(a[c++]=m,a[c++]=v),c}drawCustomCoordinates_(e,t,i,r,o){for(let s=0,a=i.length;s<a;++s){const c=i[s],h=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);o.push(h),t=c}return t}drawCustom(e,t,i,r,o){this.beginGeometry(e,t,o);const s=e.getType(),a=e.getStride(),c=this.coordinates.length;let h,m,v,x,E;switch(s){case"MultiPolygon":h=e.getOrientedFlatCoordinates(),x=[];const R=e.getEndss();E=0;for(let P=0,z=R.length;P<z;++P){const Q=[];E=this.drawCustomCoordinates_(h,E,R[P],a,Q),x.push(Q)}this.instructions.push([dr.CUSTOM,c,x,e,i,s9,o]),this.hitDetectionInstructions.push([dr.CUSTOM,c,x,e,r||i,s9,o]);break;case"Polygon":case"MultiLineString":v=[],h=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),E=this.drawCustomCoordinates_(h,0,e.getEnds(),a,v),this.instructions.push([dr.CUSTOM,c,v,e,i,H3,o]),this.hitDetectionInstructions.push([dr.CUSTOM,c,v,e,r||i,H3,o]);break;case"LineString":case"Circle":h=e.getFlatCoordinates(),m=this.appendFlatLineCoordinates(h,0,h.length,a,!1,!1),this.instructions.push([dr.CUSTOM,c,m,e,i,zy,o]),this.hitDetectionInstructions.push([dr.CUSTOM,c,m,e,r||i,zy,o]);break;case"MultiPoint":h=e.getFlatCoordinates(),m=this.appendFlatPointCoordinates(h,a),m>c&&(this.instructions.push([dr.CUSTOM,c,m,e,i,zy,o]),this.hitDetectionInstructions.push([dr.CUSTOM,c,m,e,r||i,zy,o]));break;case"Point":h=e.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),m=this.coordinates.length,this.instructions.push([dr.CUSTOM,c,m,e,i,void 0,o]),this.hitDetectionInstructions.push([dr.CUSTOM,c,m,e,r||i,void 0,o]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[dr.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[dr.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,o,s=-1;for(t=0;t<i;++t)r=e[t],o=r[0],o==dr.END_GEOMETRY?s=t:o==dr.BEGIN_GEOMETRY&&(r[2]=t,yme(this.hitDetectionInstructions,s,t),s=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=Ng(i||_d)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=Ng(i||J3);const r=e.getLineCap();t.lineCap=r!==void 0?r:fx;const o=e.getLineDash();t.lineDash=o?o.slice():s1;const s=e.getLineDashOffset();t.lineDashOffset=s||a1;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:px;const c=e.getWidth();t.lineWidth=c!==void 0?c:t4;const h=e.getMiterLimit();t.miterLimit=h!==void 0?h:X3,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[dr.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[dr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,h=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||o!=e.currentLineDash&&!Av(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=h)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=h)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[dr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=QZ(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Zy(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class cye extends A5{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!zb(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(r,o);this.instructions.push([dr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([dr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),o=[];for(let c=0,h=r.length;c<h;c+=e.getStride())(!this.maxExtent||zb(this.maxExtent,r.slice(c,c+2)))&&o.push(r[c],r[c+1]);const s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([dr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([dr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Aye extends A5{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[dr.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([dr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1],gb);const a=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(a,0,a.length,c),this.hitDetectionInstructions.push(jy),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([dr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1],gb);const a=e.getEnds(),c=e.getFlatCoordinates(),h=e.getStride();let m=0;for(let v=0,x=a.length;v<x;++v)m=this.drawFlatCoordinates_(c,m,a[v],h);this.hitDetectionInstructions.push(jy),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(jy),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(jy),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(gb)}}class KF extends A5{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,c=i.length;this.instructions.push(gb),this.hitDetectionInstructions.push(gb);for(let h=0;h<c;++h){const m=i[h],v=this.coordinates.length,x=this.appendFlatLineCoordinates(e,t,m,r,!0,!a),E=[dr.MOVE_TO_LINE_TO,v,x];this.instructions.push(E),this.hitDetectionInstructions.push(E),a&&(this.instructions.push(PF),this.hitDetectionInstructions.push(PF)),t=m}return s&&(this.instructions.push(iM),this.hitDetectionInstructions.push(iM)),a&&(this.instructions.push(jy),this.hitDetectionInstructions.push(jy)),t}drawCircle(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([dr.SET_FILL_STYLE,_d]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([dr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getFlatCoordinates(),c=e.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,c,!1,!1);const m=[dr.CIRCLE,h];this.instructions.push(gb,m),this.hitDetectionInstructions.push(gb,m),r.fillStyle!==void 0&&(this.instructions.push(iM),this.hitDetectionInstructions.push(iM)),r.strokeStyle!==void 0&&(this.instructions.push(jy),this.hitDetectionInstructions.push(jy)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([dr.SET_FILL_STYLE,_d]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([dr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getEnds(),c=e.getOrientedFlatCoordinates(),h=e.getStride();this.drawFlatCoordinatess_(c,0,a,h),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([dr.SET_FILL_STYLE,_d]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([dr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,s1,a1]);const a=e.getEndss(),c=e.getOrientedFlatCoordinates(),h=e.getStride();let m=0;for(let v=0,x=a.length;v<x;++v)m=this.drawFlatCoordinatess_(c,m,a[v],h);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=rb(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function hye(n,e,t,i,r){const o=[];let s=t,a=0,c=e.slice(t,2);for(;a<n&&s+r<i;){const[h,m]=c.slice(-2),v=e[s+r],x=e[s+r+1],E=Math.sqrt((v-h)*(v-h)+(x-m)*(x-m));if(a+=E,a>=n){const R=(n-a+E)/E,P=ff(h,v,R),z=ff(m,x,R);c.push(P,z),o.push(c),c=[P,z],a==n&&(s+=r),a=0}else if(a<n)c.push(e[s+r],e[s+r+1]),s+=r;else{const R=E-a,P=ff(h,v,R/E),z=ff(m,x,R/E);c.push(P,z),o.push(c),c=[P,z],a=0,s+=r}}return a>0&&o.push(c),o}function dye(n,e,t,i,r){let o=t,s=t,a=0,c=0,h=t,m,v,x,E,R,P,z,Q,Y,H;for(v=t;v<i;v+=r){const Z=e[v],J=e[v+1];R!==void 0&&(Y=Z-R,H=J-P,E=Math.sqrt(Y*Y+H*H),z!==void 0&&(c+=x,m=Math.acos((z*Y+Q*H)/(x*E)),m>n&&(c>a&&(a=c,o=h,s=v),c=0,h=v-r)),x=E,z=Y,Q=H),R=Z,P=J}return c+=E,c>a?[h,v]:[o,s]}const cS={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class fye extends A5{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[_d]={fillStyle:_d},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!r&&!o)return;const a=this.coordinates;let c=a.length;const h=e.getType();let m=null,v=e.getStride();if(s.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!Xl(this.maxExtent,e.getExtent()))return;let x;if(m=e.getFlatCoordinates(),h=="LineString")x=[m.length];else if(h=="MultiLineString")x=e.getEnds();else if(h=="Polygon")x=e.getEnds().slice(0,1);else if(h=="MultiPolygon"){const z=e.getEndss();x=[];for(let Q=0,Y=z.length;Q<Y;++Q)x.push(z[Q][0])}this.beginGeometry(e,t,i);const E=s.repeat,R=E?void 0:s.textAlign;let P=0;for(let z=0,Q=x.length;z<Q;++z){let Y;E?Y=hye(E*this.resolution,m,P,x[z],v):Y=[m.slice(P,x[z])];for(let H=0,Z=Y.length;H<Z;++H){const J=Y[H];let $=0,G=J.length;if(R==null){const ue=dye(s.maxAngle,J,0,J.length,2);$=ue[0],G=ue[1]}for(let ue=$;ue<G;ue+=v)a.push(J[ue],J[ue+1]);const oe=a.length;P=x[z],this.drawChars_(c,oe),c=oe}}this.endGeometry(t)}else{let x=s.overflow?null:[];switch(h){case"Point":case"MultiPoint":m=e.getFlatCoordinates();break;case"LineString":m=e.getFlatMidpoint();break;case"Circle":m=e.getCenter();break;case"MultiLineString":m=e.getFlatMidpoints(),v=2;break;case"Polygon":m=e.getFlatInteriorPoint(),s.overflow||x.push(m[2]/this.resolution),v=3;break;case"MultiPolygon":const Z=e.getFlatInteriorPoints();m=[];for(let J=0,$=Z.length;J<$;J+=3)s.overflow||x.push(Z[J+2]/this.resolution),m.push(Z[J],Z[J+1]);if(m.length===0)return;v=2;break}const E=this.appendFlatPointCoordinates(m,v);if(E===c)return;if(x&&(E-c)/2!==m.length/v){let Z=c/2;x=x.filter((J,$)=>{const G=a[(Z+$)*2]===m[$*v]&&a[(Z+$)*2+1]===m[$*v+1];return G||--Z,G})}this.saveTextStates_();const R=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,P=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(e,t,i);let z=s.padding;if(z!=mb&&(s.scale[0]<0||s.scale[1]<0)){let Z=s.padding[0],J=s.padding[1],$=s.padding[2],G=s.padding[3];s.scale[0]<0&&(J=-J,G=-G),s.scale[1]<0&&(Z=-Z,$=-$),z=[Z,J,$,G]}const Q=this.pixelRatio;this.instructions.push([dr.DRAW_IMAGE,c,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,z==mb?mb:z.map(function(Z){return Z*Q}),R,P,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]);const Y=1/Q,H=R?R.slice(0):null;H&&(H[1]=_d),this.hitDetectionInstructions.push([dr.DRAW_IMAGE,c,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Y,Y],NaN,this.declutterMode_,this.declutterImageWithText_,z,H,P,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?_d:this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||e4,justify:t.justify,textBaseline:t.textBaseline||rS,scale:t.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,h=cS[r.textBaseline],m=this.textOffsetY_*c,v=this.text_,x=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([dr.DRAW_CHARS,e,t,h,r.overflow,a,r.maxAngle,c,m,o,x*c,v,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([dr.DRAW_CHARS,e,t,h,r.overflow,a&&_d,r.maxAngle,c,m,o,x*c,v,s,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,o;if(!e)this.text_="";else{const s=e.getFill();s?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Ng(s.getColor()||_d)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const P=a.getLineDash(),z=a.getLineDashOffset(),Q=a.getWidth(),Y=a.getMiterLimit();o.lineCap=a.getLineCap()||fx,o.lineDash=P?P.slice():s1,o.lineDashOffset=z===void 0?a1:z,o.lineJoin=a.getLineJoin()||px,o.lineWidth=Q===void 0?t4:Q,o.miterLimit=Y===void 0?X3:Y,o.strokeStyle=Ng(a.getColor()||J3)}i=this.textState_;const c=e.getFont()||DX;C1e(c);const h=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||rS,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||mb,i.scale=h===void 0?[1,1]:h;const m=e.getOffsetX(),v=e.getOffsetY(),x=e.getRotateWithView(),E=e.getKeepUpright(),R=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=v===void 0?0:v,this.textRotateWithView_=x===void 0?!1:x,this.textKeepUpright_=E===void 0?!0:E,this.textRotation_=R===void 0?0:R,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Yr(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Yr(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const pye={Circle:KF,Default:A5,Image:cye,LineString:Aye,Polygon:KF,Text:fye};class JX{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const o=i[r].finish();e[t][r]=o}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let o=r[t];if(o===void 0){const s=pye[t];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=o}return o}}function mye(n,e,t,i,r,o,s,a,c,h,m,v,x=!0){let E=n[e],R=n[e+1],P=0,z=0,Q=0,Y=0;function H(){P=E,z=R,e+=i,E=n[e],R=n[e+1],Y+=Q,Q=Math.sqrt((E-P)*(E-P)+(R-z)*(R-z))}do H();while(e<t-i&&Y+Q<o);let Z=Q===0?0:(o-Y)/Q;const J=ff(P,E,Z),$=ff(z,R,Z),G=e-i,oe=Y,ue=o+a*c(h,r,m);for(;e<t-i&&Y+Q<ue;)H();Z=Q===0?0:(ue-Y)/Q;const xe=ff(P,E,Z),ge=ff(z,R,Z);let Ie=!1;if(x)if(v){const Ye=[J,$,xe,ge];lX(Ye,0,4,2,v,Ye,Ye),Ie=Ye[0]>Ye[2]}else Ie=J>xe;const Me=Math.PI,ke=[],je=G+i===e;e=G,Q=0,Y=oe,E=n[e],R=n[e+1];let Be;if(je){H(),Be=Math.atan2(R-z,E-P),Ie&&(Be+=Be>0?-Me:Me);const Ye=(xe+J)/2,At=(ge+$)/2;return ke[0]=[Ye,At,(ue-o)/2,Be,r],ke}r=r.replace(/\n/g," ");for(let Ye=0,At=r.length;Ye<At;){H();let yt=Math.atan2(R-z,E-P);if(Ie&&(yt+=yt>0?-Me:Me),Be!==void 0){let st=yt-Be;if(st+=st>Me?-2*Me:st<-Me?2*Me:0,Math.abs(st)>s)return null}Be=yt;const Le=Ye;let De=0;for(;Ye<At;++Ye){const st=Ie?At-Ye-1:Ye,Tt=a*c(h,r[st],m);if(e+i<t&&Y+Q<o+De+Tt/2)break;De+=Tt}if(Ye===Le)continue;const Ge=Ie?r.substring(At-Le,At-Ye):r.substring(Le,Ye);Z=Q===0?0:(o+De/2-Y)/Q;const Te=ff(P,E,Z),xt=ff(z,R,Z);ke.push([Te,xt,De/2,yt,Ge]),o+=De}return ke}class RP{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(iS(),{get:(e,t)=>{if(typeof iS()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const o=t[i];if(typeof o=="function"){o(e);continue}const s=t[++i];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const FC=vp(),_y=[],W0=[],q0=[],xy=[];function UF(n){return n[3].declutterBox}const LF=new RegExp("[-----]");function AO(n,e){return e==="start"?e=LF.test(n)?"right":"left":e==="end"&&(e=LF.test(n)?"left":"right"),cS[e]}function gye(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function yye(n,e,t){return t%2===0&&(n+=e),n}class vye{constructor(e,t,i,r,o){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Ed(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new RP:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const o=e+t+i+r;if(this.labels_[o])return this.labels_[o];const s=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],h=this.pixelRatio,m=[c.scale[0]*h,c.scale[1]*h],v=c.justify?cS[c.justify]:AO(Array.isArray(e)?e[0]:e,c.textAlign||e4),x=r&&s.lineWidth?s.lineWidth:0,E=Array.isArray(e)?e:String(e).split(`
`).reduce(gye,[]),{width:R,height:P,widths:z,heights:Q,lineWidths:Y}=x1e(c,E),H=R+x,Z=[],J=(H+2)*m[0],$=(P+x)*m[1],G={width:J<0?Math.floor(J):Math.ceil(J),height:$<0?Math.floor($):Math.ceil($),contextInstructions:Z};(m[0]!=1||m[1]!=1)&&Z.push("scale",m),r&&(Z.push("strokeStyle",s.strokeStyle),Z.push("lineWidth",x),Z.push("lineCap",s.lineCap),Z.push("lineJoin",s.lineJoin),Z.push("miterLimit",s.miterLimit),Z.push("setLineDash",[s.lineDash]),Z.push("lineDashOffset",s.lineDashOffset)),i&&Z.push("fillStyle",a.fillStyle),Z.push("textBaseline","middle"),Z.push("textAlign","center");const oe=.5-v;let ue=v*H+oe*x;const xe=[],ge=[];let Ie=0,Me=0,ke=0,je=0,Be;for(let Ye=0,At=E.length;Ye<At;Ye+=2){const yt=E[Ye];if(yt===`
`){Me+=Ie,Ie=0,ue=v*H+oe*x,++je;continue}const Le=E[Ye+1]||c.font;Le!==Be&&(r&&xe.push("font",Le),i&&ge.push("font",Le),Be=Le),Ie=Math.max(Ie,Q[ke]);const De=[yt,ue+oe*z[ke]+v*(z[ke]-Y[je]),.5*(x+Ie)+Me];ue+=z[ke],r&&xe.push("strokeText",De),i&&ge.push("fillText",De),++ke}return Array.prototype.push.apply(Z,xe),Array.prototype.push.apply(Z,ge),this.labels_[o]=G,G}replayTextBackground_(e,t,i,r,o,s,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],e.fillStyle=s[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,o,s,a,c,h,m,v,x,E,R,P,z){a*=x[0],c*=x[1];let Q=i-a,Y=r-c;const H=o+h>e?e-h:o,Z=s+m>t?t-m:s,J=R[3]+H*x[0]+R[1],$=R[0]+Z*x[1]+R[2],G=Q-R[3],oe=Y-R[0];(P||v!==0)&&(_y[0]=G,xy[0]=G,_y[1]=oe,W0[1]=oe,W0[0]=G+J,q0[0]=W0[0],q0[1]=oe+$,xy[1]=q0[1]);let ue;return v!==0?(ue=n0(Ed(),i,r,1,1,v,-i,-r),Hu(ue,_y),Hu(ue,W0),Hu(ue,q0),Hu(ue,xy),A1(Math.min(_y[0],W0[0],q0[0],xy[0]),Math.min(_y[1],W0[1],q0[1],xy[1]),Math.max(_y[0],W0[0],q0[0],xy[0]),Math.max(_y[1],W0[1],q0[1],xy[1]),FC)):A1(Math.min(G,G+J),Math.min(oe,oe+$),Math.max(G,G+J),Math.max(oe,oe+$),FC),E&&(Q=Math.round(Q),Y=Math.round(Y)),{drawImageX:Q,drawImageY:Y,drawImageW:H,drawImageH:Z,originX:h,originY:m,declutterBox:{minX:FC[0],minY:FC[1],maxX:FC[2],maxY:FC[3],value:z},canvasTransform:ue,scale:x}}replayImageOrLabel_(e,t,i,r,o,s,a){const c=!!(s||a),h=r.declutterBox,m=a?a[2]*r.scale[0]/2:0;return h.minX-m<=t[0]&&h.maxX+m>=0&&h.minY-m<=t[1]&&h.maxY+m>=0&&(c&&this.replayTextBackground_(e,_y,W0,q0,xy,s,a),M1e(e,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Hu(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const o=this.textStates[t],s=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,h=AO(Array.isArray(e)?e[0]:e,o.textAlign||e4),m=cS[o.textBaseline||rS],v=a&&a.lineWidth?a.lineWidth:0,x=s.width/c-2*o.scale[0],E=h*x+2*(.5-h)*v,R=m*s.height/c+2*(.5-m)*v;return{label:s,anchorX:E,anchorY:R}}execute_(e,t,i,r,o,s,a,c){const h=this.zIndexContext_;let m;this.pixelCoordinates_&&Av(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=Jy(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),_ge(this.renderedTransform_,i));let v=0;const x=r.length;let E=0,R,P,z,Q,Y,H,Z,J,$,G,oe,ue,xe,ge=0,Ie=0;const Me=this.coordinateCache_,ke=this.viewRotation_,je=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,Be={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ke},Ye=this.instructions!=r||this.overlaps?0:200;let At,yt,Le,De;for(;v<x;){const Ge=r[v];switch(Ge[0]){case dr.BEGIN_GEOMETRY:At=Ge[1],De=Ge[3],At.getGeometry()?a!==void 0&&!Xl(a,De.getExtent())?v=Ge[2]+1:++v:v=Ge[2],h&&(h.zIndex=Ge[4]);break;case dr.BEGIN_PATH:ge>Ye&&(this.fill_(e),ge=0),Ie>Ye&&(e.stroke(),Ie=0),!ge&&!Ie&&(e.beginPath(),Y=NaN,H=NaN),++v;break;case dr.CIRCLE:E=Ge[1];const xt=m[E],st=m[E+1],Tt=m[E+2],Lt=m[E+3],Ue=Tt-xt,Oe=Lt-st,Ee=Math.sqrt(Ue*Ue+Oe*Oe);e.moveTo(xt+Ee,st),e.arc(xt,st,Ee,0,2*Math.PI,!0),++v;break;case dr.CLOSE_PATH:e.closePath(),++v;break;case dr.CUSTOM:E=Ge[1],R=Ge[2];const Ve=Ge[3],mt=Ge[4],pt=Ge[5];Be.geometry=Ve,Be.feature=At,v in Me||(Me[v]=[]);const Ct=Me[v];pt?pt(m,E,R,2,Ct):(Ct[0]=m[E],Ct[1]=m[E+1],Ct.length=2),h&&(h.zIndex=Ge[6]),mt(Ct,Be),++v;break;case dr.DRAW_IMAGE:E=Ge[1],R=Ge[2],$=Ge[3],P=Ge[4],z=Ge[5];let Rt=Ge[6];const Kt=Ge[7],on=Ge[8],qn=Ge[9],Qn=Ge[10];let xi=Ge[11];const Kn=Ge[12];let Un=Ge[13];Q=Ge[14]||"declutter";const Cn=Ge[15];if(!$&&Ge.length>=20){G=Ge[19],oe=Ge[20],ue=Ge[21],xe=Ge[22];const gi=this.drawLabelWithPointPlacement_(G,oe,ue,xe);$=gi.label,Ge[3]=$;const Tn=Ge[23];P=(gi.anchorX-Tn)*this.pixelRatio,Ge[4]=P;const zn=Ge[24];z=(gi.anchorY-zn)*this.pixelRatio,Ge[5]=z,Rt=$.height,Ge[6]=Rt,Un=$.width,Ge[13]=Un}let ei;Ge.length>25&&(ei=Ge[25]);let Dn,It,Ce;Ge.length>17?(Dn=Ge[16],It=Ge[17],Ce=Ge[18]):(Dn=mb,It=null,Ce=null),Qn&&je?xi+=ke:!Qn&&!je&&(xi-=ke);let re=0;for(;E<R;E+=2){if(ei&&ei[re++]<Un/this.pixelRatio)continue;const gi=this.calculateImageOrLabelDimensions_($.width,$.height,m[E],m[E+1],Un,Rt,P,z,on,qn,xi,Kn,o,Dn,!!It||!!Ce,At),Tn=[e,t,$,gi,Kt,It,Ce];if(c){let zn,si,ir;if(Cn){const Oi=R-E;if(!Cn[Oi]){Cn[Oi]={args:Tn,declutterMode:Q};continue}const Ri=Cn[Oi];zn=Ri.args,si=Ri.declutterMode,delete Cn[Oi],ir=UF(zn)}let Di,gr;if(zn&&(si!=="declutter"||!c.collides(ir))&&(Di=!0),(Q!=="declutter"||!c.collides(gi.declutterBox))&&(gr=!0),si==="declutter"&&Q==="declutter"){const Oi=Di&&gr;Di=Oi,gr=Oi}Di&&(si!=="none"&&c.insert(ir),this.replayImageOrLabel_.apply(this,zn)),gr&&(Q!=="none"&&c.insert(gi.declutterBox),this.replayImageOrLabel_.apply(this,Tn))}else this.replayImageOrLabel_.apply(this,Tn)}++v;break;case dr.DRAW_CHARS:const le=Ge[1],he=Ge[2],se=Ge[3],Ae=Ge[4];xe=Ge[5];const be=Ge[6],We=Ge[7],et=Ge[8];ue=Ge[9];const Pe=Ge[10];G=Ge[11],Array.isArray(G)&&(G=G.reduce(yye,"")),oe=Ge[12];const Ze=[Ge[13],Ge[13]];Q=Ge[14]||"declutter";const y=Ge[15],at=this.textStates[oe],Pt=at.font,Mt=[at.scale[0]*We,at.scale[1]*We];let en;Pt in this.widths_?en=this.widths_[Pt]:(en={},this.widths_[Pt]=en);const dt=TP(m,le,he,2),Zn=Math.abs(Mt[0])*xF(Pt,G,en);if(Ae||Zn<=dt){const gi=this.textStates[oe].textAlign,Tn=(dt-Zn)*AO(G,gi),zn=mye(m,le,he,2,G,Tn,be,Math.abs(Mt[0]),xF,Pt,en,je?0:this.viewRotation_,y);e:if(zn){const si=[];let ir,Di,gr,Oi,Ri;if(ue)for(ir=0,Di=zn.length;ir<Di;++ir){Ri=zn[ir],gr=Ri[4],Oi=this.createLabel(gr,oe,"",ue),P=Ri[2]+(Mt[0]<0?-Pe:Pe),z=se*Oi.height+(.5-se)*2*Pe*Mt[1]/Mt[0]-et;const cr=this.calculateImageOrLabelDimensions_(Oi.width,Oi.height,Ri[0],Ri[1],Oi.width,Oi.height,P,z,0,0,Ri[3],Ze,!1,mb,!1,At);if(c&&Q==="declutter"&&c.collides(cr.declutterBox))break e;si.push([e,t,Oi,cr,1,null,null])}if(xe)for(ir=0,Di=zn.length;ir<Di;++ir){Ri=zn[ir],gr=Ri[4],Oi=this.createLabel(gr,oe,xe,""),P=Ri[2],z=se*Oi.height-et;const cr=this.calculateImageOrLabelDimensions_(Oi.width,Oi.height,Ri[0],Ri[1],Oi.width,Oi.height,P,z,0,0,Ri[3],Ze,!1,mb,!1,At);if(c&&Q==="declutter"&&c.collides(cr.declutterBox))break e;si.push([e,t,Oi,cr,1,null,null])}c&&Q!=="none"&&c.load(si.map(UF));for(let cr=0,nn=si.length;cr<nn;++cr)this.replayImageOrLabel_.apply(this,si[cr])}}++v;break;case dr.END_GEOMETRY:if(s!==void 0){At=Ge[1];const gi=s(At,De,Q);if(gi)return gi}++v;break;case dr.FILL:Ye?ge++:this.fill_(e),++v;break;case dr.MOVE_TO_LINE_TO:for(E=Ge[1],R=Ge[2],yt=m[E],Le=m[E+1],e.moveTo(yt,Le),Y=yt+.5|0,H=Le+.5|0,E+=2;E<R;E+=2)yt=m[E],Le=m[E+1],Z=yt+.5|0,J=Le+.5|0,(E==R-2||Z!==Y||J!==H)&&(e.lineTo(yt,Le),Y=Z,H=J);++v;break;case dr.SET_FILL_STYLE:this.alignAndScaleFill_=Ge[2],ge&&(this.fill_(e),ge=0,Ie&&(e.stroke(),Ie=0)),e.fillStyle=Ge[1],++v;break;case dr.SET_STROKE_STYLE:Ie&&(e.stroke(),Ie=0),this.setStrokeStyle_(e,Ge),++v;break;case dr.STROKE:Ye?Ie++:e.stroke(),++v;break;default:++v;break}}ge&&this.fill_(e),Ie&&e.stroke()}execute(e,t,i,r,o,s){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,t,i,r,o){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,o)}}const lb=["Polygon","Circle","LineString","Image","Text","Default"],AS=["Image","Text"],bye=lb.filter(n=>!AS.includes(n));class eJ{constructor(e,t,i,r,o,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ed(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const o=e[i];for(const s in o){const a=o[s];r[s]=new vye(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,o=e.length;r<o;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,o,s){r=Math.round(r);const a=r*2+1,c=n0(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Il(a,a));const m=this.hitDetectionContext_;m.canvas.width!==a||m.canvas.height!==a?(m.canvas.width=a,m.canvas.height=a):h||m.clearRect(0,0,a,a);let v;this.renderBuffer_!==void 0&&(v=vp(),u3(v,e),Zy(v,t*(this.renderBuffer_+r),v));const x=Cye(r);let E;function R(J,$,G){const oe=m.getImageData(0,0,a,a).data;for(let ue=0,xe=x.length;ue<xe;ue++)if(oe[x[ue]]>0){if(!s||G==="none"||E!=="Image"&&E!=="Text"||s.includes(J)){const ge=(x[ue]-3)/4,Ie=r-ge%a,Me=r-(ge/a|0),ke=o(J,$,Ie*Ie+Me*Me);if(ke)return ke}m.clearRect(0,0,a,a);break}}const P=Object.keys(this.executorsByZIndex_).map(Number);P.sort(Xg);let z,Q,Y,H,Z;for(z=P.length-1;z>=0;--z){const J=P[z].toString();for(Y=this.executorsByZIndex_[J],Q=lb.length-1;Q>=0;--Q)if(E=lb[Q],H=Y[E],H!==void 0&&(Z=H.executeHitDetection(m,c,i,R,v),Z))return Z}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],o=t[2],s=t[3],a=[i,r,i,s,o,s,o,r];return Jy(a,0,8,2,e,a),a}isEmpty(){return nv(this.executorsByZIndex_)}execute(e,t,i,r,o,s,a){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(a?gme:Xg),s=s||lb;const h=lb.length;for(let m=0,v=c.length;m<v;++m){const x=c[m].toString(),E=this.executorsByZIndex_[x];for(let R=0,P=s.length;R<P;++R){const z=s[R],Q=E[z];if(Q!==void 0){const Y=a===null?void 0:Q.getZIndexContext(),H=Y?Y.getContext():e,Z=this.maxExtent_&&z!=="Image"&&z!=="Text";if(Z&&(H.save(),this.clip(H,i)),!Y||z==="Text"||z==="Image"?Q.execute(H,t,i,r,o,a):Y.pushFunction(J=>Q.execute(J,t,i,r,o,a)),Z&&H.restore(),Y){Y.offset();const J=c[m]*h+lb.indexOf(z);this.deferredZIndexContexts_[J]||(this.deferredZIndexContexts_[J]=[]),this.deferredZIndexContexts_[J].push(Y)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Xg);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[i]].length=0}}const hO={};function Cye(n){if(hO[n]!==void 0)return hO[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let o=0;o<=n;++o)for(let s=0;s<=n;++s){const a=o*o+s*s;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(((n+o)*e+(n+s))*4+3),o>0&&c.push(((n-o)*e+(n+s))*4+3),s>0&&(c.push(((n+o)*e+(n-s))*4+3),o>0&&c.push(((n-o)*e+(n-s))*4+3))}const r=[];for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o]);return hO[n]=r,r}const vf=.5;function tJ(n,e,t,i,r,o,s,a,c){const h=c?iP(r):r,m=n[0]*vf,v=n[1]*vf,x=Il(m,v);x.imageSmoothingEnabled=!1;const E=x.canvas,R=new $1e(x,vf,r,null,s,a,c?i5(bge(),c):null),P=t.length,z=Math.floor((256*256*256-1)/P),Q={};for(let H=1;H<=P;++H){const Z=t[H-1],J=Z.getStyleFunction()||i;if(!J)continue;let $=J(Z,o);if(!$)continue;Array.isArray($)||($=[$]);const oe=(H*z).toString(16).padStart(7,"#00000");for(let ue=0,xe=$.length;ue<xe;++ue){const ge=$[ue],Ie=ge.getGeometryFunction()(Z);if(!Ie||!Xl(h,Ie.getExtent()))continue;const Me=ge.clone(),ke=Me.getFill();ke&&ke.setColor(oe);const je=Me.getStroke();je&&(je.setColor(oe),je.setLineDash(null)),Me.setText(void 0);const Be=ge.getImage();if(Be){const Le=Be.getImageSize();if(!Le)continue;const De=Il(Le[0],Le[1],void 0,{alpha:!1}),Ge=De.canvas;De.fillStyle=oe,De.fillRect(0,0,Ge.width,Ge.height),Me.setImage(new mx({img:Ge,anchor:Be.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Be.getOrigin(),opacity:1,size:Be.getSize(),scale:Be.getScale(),rotation:Be.getRotation(),rotateWithView:Be.getRotateWithView()}))}const Ye=Me.getZIndex()||0;let At=Q[Ye];At||(At={},Q[Ye]=At,At.Polygon=[],At.Circle=[],At.LineString=[],At.Point=[]);const yt=Ie.getType();if(yt==="GeometryCollection"){const Le=Ie.getGeometriesArrayRecursive();for(let De=0,Ge=Le.length;De<Ge;++De){const Te=Le[De];At[Te.getType().replace("Multi","")].push(Te,Me)}}else At[yt.replace("Multi","")].push(Ie,Me)}}const Y=Object.keys(Q).map(Number).sort(Xg);for(let H=0,Z=Y.length;H<Z;++H){const J=Q[Y[H]];for(const $ in J){const G=J[$];for(let oe=0,ue=G.length;oe<ue;oe+=2){R.setStyle(G[oe+1]);for(let xe=0,ge=e.length;xe<ge;++xe)R.setTransform(e[xe]),R.drawGeometry(G[oe])}}}return x.getImageData(0,0,E.width,E.height)}function nJ(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*vf),o=Math.floor(Math.round(n[1])*vf),s=(Ol(r,0,t.width-1)+Ol(o,0,t.height-1)*t.width)*4,a=t.data[s],c=t.data[s+1],m=t.data[s+2]+256*(c+256*a),v=Math.floor((256*256*256-1)/e.length);m&&m%v===0&&i.push(e[m/v-1])}return i}const _ye=5;class xye extends t5{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=_ye}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Kr()}getData(e){return null}prepareFrame(e){return Kr()}renderFrame(e,t){return Kr()}forEachFeatureAtCoordinate(e,t,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===zi.LOADED||t.getState()===zi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=zi.LOADED&&t!=zi.ERROR&&e.addEventListener(Ir.CHANGE,this.boundHandleImageChange_),t==zi.IDLE&&(e.load(),t=e.getState()),t==zi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const zF=[];let C_=null;function Mye(){C_=Il(1,1,void 0,{willReadFrequently:!0})}class DP extends xye{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ed(),this.pixelTransform=Ed(),this.inversePixelTransform=Ed(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){C_||Mye(),C_.clearRect(0,0,1,1);let r;try{C_.drawImage(e,t,i,1,1,0,0,1,1),r=C_.getImageData(0,0,1,1).data}catch{return C_=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let o,s;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&Av(dx(e.style.backgroundColor),dx(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&Ege(s.canvas.style.transform,t)?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=r;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Il();const c=s.canvas;o.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=g1(i),o=jE(i),s=FE(i),a=zE(i);Hu(t.coordinateToPixelTransform,r),Hu(t.coordinateToPixelTransform,o),Hu(t.coordinateToPixelTransform,s),Hu(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;Hu(c,r),Hu(c,o),Hu(c,s),Hu(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(is(i)/r*s),c=Math.round(Ju(i)/r*s);n0(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-c/2),aX(this.inversePixelTransform,this.pixelTransform);const h=Sge(this.pixelTransform);if(this.useContainer(t,h,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=a||m.height!=c?(m.width=a,m.height=c):this.context.clearRect(0,0,a,c),h!==m.style.transform&&(m.style.transform=h)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const o=new QX(e,this.inversePixelTransform,i,t);r.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ap.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ap.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new RP),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ap.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ap.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,o,s,a){const c=o/2,h=s/2,m=r/t,v=-m,x=-e[0]+a,E=-e[1];return n0(this.tempTransform,c,h,m,v,-i,x,E)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class wye extends DP{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=vp(),this.wrappedRenderedExtent_=vp(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,o=t.viewState,s=o.center,a=o.resolution,c=o.projection,h=o.rotation,m=c.getExtent(),v=this.getLayer().getSource(),x=this.getLayer().getDeclutter(),E=t.pixelRatio,R=t.viewHints,P=!(R[hl.ANIMATING]||R[hl.INTERACTING]),z=this.context,Q=Math.round(is(r)/a*E),Y=Math.round(Ju(r)/a*E),H=v.getWrapX()&&c.canWrapX(),Z=H?is(m):null,J=H?Math.ceil((r[2]-m[2])/Z)+1:1;let $=H?Math.floor((r[0]-m[0])/Z):0;do{let G=this.getRenderTransform(s,a,0,E,Q,Y,$*Z);t.declutter&&(G=G.slice(0)),e.execute(z,[z.canvas.width,z.canvas.height],G,h,P,i===void 0?lb:i?AS:bye,i?x&&t.declutter[x]:void 0)}while(++$<J)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Il(this.context.canvas.width,this.context.canvas.height,zF))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,o5(this.context),zF.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(Ap.PRERENDER)||this.getLayer().hasListener(Ap.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,e),r.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const c=jg(i.extent);a=Xl(c,e.extent),this.clipped_=a&&!Fg(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,h=this.getLayer(),m=[],v=i[0]*vf,x=i[1]*vf;m.push(this.getRenderTransform(r,o,s,vf,v,x,0).slice());const E=h.getSource(),R=a.getExtent();if(E.getWrapX()&&a.canWrapX()&&!Fg(R,c)){let P=c[0];const z=is(R);let Q=0,Y;for(;P<R[0];)--Q,Y=z*Q,m.push(this.getRenderTransform(r,o,s,vf,v,x,Y).slice()),P+=z;for(Q=0,P=c[2];P>R[2];)++Q,Y=z*Q,m.push(this.getRenderTransform(r,o,s,vf,v,x,Y).slice()),P-=z}this.hitDetectionImageData_=tJ(i,m,this.renderedFeatures_,h.getStyleFunction(),c,o,s,p9(o,this.renderedPixelRatio_),null)}t(nJ(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,o){if(!this.replayGroup_)return;const s=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),h={},m=function(x,E,R){const P=Yr(x),z=h[P];if(z){if(z!==!0&&R<z.distanceSq){if(R===0)return h[P]=!0,o.splice(o.lastIndexOf(z),1),r(x,c,E);z.geometry=E,z.distanceSq=R}}else{if(R===0)return h[P]=!0,r(x,c,E);o.push(h[P]={feature:x,layer:c,geometry:E,distanceSq:R,callback:r})}},v=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,i,m,v?t.declutter?.[v]?.all().map(x=>x.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[hl.ANIMATING],o=e.viewHints[hl.INTERACTING],s=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!s&&r||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,h=e.viewState,m=h.projection,v=h.resolution,x=e.pixelRatio,E=t.getRevision(),R=t.getRenderBuffer();let P=t.getRenderOrder();P===void 0&&(P=Z1e);const z=h.center.slice(),Q=Zy(c,R*v),Y=Q.slice(),H=[Q.slice()],Z=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!Fg(Z,e.extent)){const ke=is(Z),je=Math.max(is(Q)/2,ke);Q[0]=Z[0]-je,Q[2]=Z[2]+je,XD(z,m);const Be=HZ(H[0],m);Be[0]<Z[0]&&Be[2]<Z[2]?H.push([Be[0]+ke,Be[1],Be[2]+ke,Be[3]]):Be[0]>Z[0]&&Be[2]>Z[2]&&H.push([Be[0]-ke,Be[1],Be[2]-ke,Be[3]])}if(this.ready&&this.renderedResolution_==v&&this.renderedRevision_==E&&this.renderedRenderOrder_==P&&this.renderedFrameDeclutter_===!!e.declutter&&Fg(this.wrappedRenderedExtent_,Q))return Av(this.renderedExtent_,Y)||(this.hitDetectionImageData_=null,this.renderedExtent_=Y),this.renderedCenter_=z,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const J=new JX(HX(v,x),Q,v,x);let $;for(let ke=0,je=H.length;ke<je;++ke)i.loadFeatures(H[ke],v,m);const G=p9(v,x);let oe=!0;const ue=((ke,je)=>{let Be;const Ye=ke.getStyleFunction()||t.getStyleFunction();if(Ye&&(Be=Ye(ke,v)),Be){const At=this.renderFeature(ke,G,Be,J,$,this.getLayer().getDeclutter(),je);oe=oe&&!At}}),xe=iP(Q),ge=i.getFeaturesInExtent(xe);P&&ge.sort(P);for(let ke=0,je=ge.length;ke<je;++ke)ue(ge[ke],ke);this.renderedFeatures_=ge,this.ready=oe;const Ie=J.finish(),Me=new eJ(Q,v,x,i.getOverlaps(),Ie,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=v,this.renderedRevision_=E,this.renderedRenderOrder_=P,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=Y,this.wrappedRenderedExtent_=Q,this.renderedCenter_=z,this.renderedProjection_=m,this.renderedPixelRatio_=x,this.replayGroup_=Me,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,o,s,a){if(!i)return!1;let c=!1;if(Array.isArray(i))for(let h=0,m=i.length;h<m;++h)c=uS(r,e,i[h],t,this.boundHandleStyleImageChange_,o,s,a)||c;else c=uS(r,e,i,t,this.boundHandleStyleImageChange_,o,s,a);return c}}class PP extends kP{constructor(e){super(e)}createRenderer(){return new wye(this)}}class Sye extends BP{constructor(e,t,i,r,o){const s=o!==void 0?zi.IDLE:zi.LOADED;super(e,t,i,s),this.loader_=o!==void 0?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=zi.ERROR):this.state=zi.LOADED,this.changed()}load(){this.state==zi.IDLE&&(this.state=zi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class h5 extends e5{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ir.CHANGE)}release(){this.setState(ii.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ii.EMPTY){if(this.state!==ii.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Kr()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:XZ(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class iJ extends h5{constructor(e,t,i,r,o,s){super(e,t,s),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ii.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ii.ERROR,this.unlistenImage_(),this.image_=Eye(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ii.LOADED:this.state=ii.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ii.ERROR&&(this.state=ii.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ii.IDLE&&(this.state=ii.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=f1e(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Eye(){const n=Il(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const jA={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Bye extends Em{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+Zge,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(jA.ELEMENT,this.handleElementChanged),this.addChangeListener(jA.MAP,this.handleMapChanged),this.addChangeListener(jA.OFFSET,this.handleOffsetChanged),this.addChangeListener(jA.POSITION,this.handlePositionChanged),this.addChangeListener(jA.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(jA.ELEMENT)}getId(){return this.id}getMap(){return this.get(jA.MAP)||null}getOffset(){return this.get(jA.OFFSET)}getPosition(){return this.get(jA.POSITION)}getPositioning(){return this.get(jA.POSITIONING)}handleElementChanged(){CX(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Ea(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Yo(e,Z0.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(jA.ELEMENT,e)}setMap(e){this.set(jA.MAP,e)}setOffset(e){this.set(jA.OFFSET,e)}setPosition(e){this.set(jA.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(jA.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),o=this.getRect(r,[Jge(r),e0e(r)]);e=e||{};const s=e.margin===void 0?20:e.margin;if(!Fg(i,o)){const a=o[0]-i[0],c=i[2]-o[2],h=o[1]-i[1],m=i[3]-o[3],v=[0,0];if(a<0?v[0]=a-s:c<0&&(v[0]=Math.abs(c)+s),h<0?v[1]=h-s:m<0&&(v[1]=Math.abs(m)+s),v[0]!==0||v[1]!==0){const x=t.getView().getCenterInternal(),E=t.getPixelFromCoordinateInternal(x);if(!E)return;const R=[E[0]+v[0],E[1]+v[1]],P=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(R),duration:P.duration,easing:P.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+t[0],o+t[1]]}setPositioning(e){this.set(jA.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const s=`${e[0]+r[0]}px`,a=`${e[1]+r[1]}px`;let c="0%",h="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?c="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(c="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?h="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(h="-50%");const m=`translate(${c}, ${h}) translate(${s}, ${a})`;this.rendered.transform_!=m&&(this.rendered.transform_=m,i.transform=m)}getOptions(){return this.options}}class KP{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function jC(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new KP(n,e,t,i)}const FF=[];class Oye extends h5{constructor(e,t,i,r,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=Il(1,1,FF)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Yr(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(o5(this.context_),FF.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let rJ=class extends h5{constructor(e,t,i,r,o,s){super(e,t,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ii.IDLE&&(this.setState(ii.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(ii.ERROR)}setFeatures(e){this.features_=e,this.setState(ii.LOADED)}setLoader(e){this.loader_=e}};const oJ="https://api.mapbox.com";function UP(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function Iye(n,e,t){if(typeof n=="string")return[{id:"default",url:jF(n,e,t)}];for(const i of n)i.url=jF(i.url,e,t);return n}function jF(n,e,t){const i=UP(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const o=i.slice(r.length);return`${oJ}/styles/v1/${o}/sprite?access_token=${e}`}function hS(n,e){const t=UP(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${oJ}/styles/v1/${r}?&access_token=${e}`}const kye=["a","b","c","d"];function lw(n,e,t,i){const r=new URL(n,i||location.href),o=UP(n);if(!o)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(o==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${s}.webp?access_token=${e}`]}return kye.map(s=>`https://${s}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const dm=Object.freeze({}),NF={},GF={};let Tye=0;function LP(n){return n.id||(n.id=Tye++),n.id}function Rye(n,e){return LP(n)+"."+Yr(e)}function sJ(n){let e=NF[n.id];return e||(e={},NF[LP(n)]=e),e}function Dye(n){let e=GF[n.id];return e||(e={},GF[LP(n)]=e),e}function dO(n){return n*Math.PI/180}const e0=(function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n})();function n6(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function zP(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const o=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(o)}return i-1}function Q2(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const NC={};function gx(n,e,t={},i){if(e in NC)return i&&(i.url=NC[e][0].url),NC[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,o=function(c){return delete NC[e],Promise.reject(new Error("Error fetching source "+e))},s=function(c){return delete NC[e],c.ok?c.json():Promise.reject(new Error("Error fetching source "+e))},a=Ax(()=>r).then(c=>c instanceof Response?(i&&(i.url=c.url),s(c)):(c instanceof Request||(c=new Request(c)),c.headers.get("Accept")||c.headers.set("Accept","application/json"),i&&(i.url=c.url),fetch(c).then(s).catch(o))).catch(o);return NC[e]=[r,a],a}function aJ(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=hS(n,e.accessToken),gx("Style",n,e);else return Promise.resolve(n)}const QF={};function lJ(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=QF[i];if(!r||t.transformRequest){let o;t.transformRequest&&(o=(a,c)=>{const h=t.transformRequest&&t.transformRequest(c,"Tiles")||c;if(a instanceof rJ)a.setLoader((m,v,x)=>{const E=function(R){R.arrayBuffer().then(P=>{const Q=a.getFormat().readFeatures(P,{extent:m,featureProjection:x});a.setFeatures(Q)})};Ax(()=>h).then(R=>{if(R instanceof Response)return E(R);fetch(R).then(E).catch(P=>a.setState(ii.ERROR))}).catch(R=>a.setState(ii.ERROR))});else{const m=a.getImage();Ax(()=>h).then(v=>{if(typeof v=="string"){m.src=v;return}const x=E=>E.blob().then(R=>{const P=URL.createObjectURL(R);m.addEventListener("load",()=>URL.revokeObjectURL(P)),m.addEventListener("error",()=>URL.revokeObjectURL(P)),m.src=P});if(v instanceof Response)return x(v);fetch(v).then(x).catch(E=>a.setState(ii.ERROR))}).catch(v=>a.setState(ii.ERROR))}});const s=n.url;if(s&&!n.tiles){const a=lw(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:a}),tileLoadFunction:o});else{const c={};r=gx("Source",a[0],t,c).then(function(h){return h.tiles=h.tiles.map(function(m){return h.scheme==="tms"&&(m=m.replace("{y}","{-y}")),lw(m,t.accessToken,t.accessTokenParam||"access_token",c.url)[0]}),Promise.resolve({tileJson:h,tileLoadFunction:o})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(a){return n.scheme==="tms"&&(a=a.replace("{y}","{-y}")),lw(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:o})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));QF[i]=r}return r}function WF(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],o=n6(r[0],r[1]),s=o.getContext("2d");s.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=s.getImageData(0,0,r[0],r[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const c=a.data;for(let h=0,m=a.width;h<m;++h)for(let v=0,x=a.height;v<x;++v){const E=(v*m+h)*4;c[E+3]>0&&s.arc(h,v,t*e.pixelRatio,0,2*Math.PI)}return s.fill(),o}function Pye(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function qF(n,e,t){const i=n6(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0,c=o.width;a<c;++a)for(let h=0,m=o.height;h<m;++h){const v=(h*c+a)*4,x=s[v+3]/255,E=.75,R=.1,P=Pye(E-R,E+R,x);P>0?(s[v+0]=Math.round(255*t.r*P),s[v+1]=Math.round(255*t.g*P),s[v+2]=Math.round(255*t.b*P),s[v+3]=Math.round(255*P)):s[v+3]=0}return r.putImageData(o,0,0),i}const Kye=Array(256).join("");function m9(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=Kye.slice(0,Math.round(e/.1));for(let o=0,s=i.length;o<s;++o)o>0&&(t+=`
`),t+=i[o].split("").join(r);return t}return n}let fO;function uJ(){return fO||(fO=n6(1,1).getContext("2d")),fO}function eb(n,e){return uJ().measureText(n).width+(n.length-1)*e}const dS={};ab.on("propertychange",()=>{for(const n in dS)delete dS[n]});function g9(n,e,t,i){if(n.indexOf(`
`)!==-1){const s=n.split(`
`),a=[];for(let c=0,h=s.length;c<h;++c)a.push(g9(s[c],e,t,i));return a.join(`
`)}const r=t+","+e+","+n+","+i;let o=dS[r];if(!o){const s=n.split(" ");if(s.length>1){const a=uJ();a.font=e;const h=a.measureText("M").width*t;let m="";const v=[];for(let x=0,E=s.length;x<E;++x){const R=s[x],P=m+(m?" ":"")+R;eb(P,i)<=h?m=P:(m&&v.push(m),m=R)}m&&v.push(m);for(let x=0,E=v.length;x<E&&E>1;++x){const R=v[x];if(eb(R,i)<h*.35){const P=x>0?eb(v[x-1],i):1/0,z=x<E-1?eb(v[x+1],i):1/0;v.splice(x,1),E-=1,P<z?(v[x-1]+=" "+R,x-=1):v[x]=R+" "+v[x]}}for(let x=0,E=v.length-1;x<E;++x){const R=v[x],P=v[x+1];if(eb(R,i)>h*.7&&eb(P,i)<h*.6){const z=R.split(" "),Q=z.pop();eb(Q,i)<h*.2&&(v[x]=z.join(" "),v[x+1]=Q+" "+P),E-=1}}o=v.join(`
`)}else o=n;o=m9(o,i),dS[r]=o}return o}const Uye=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],YF={};function Lye(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let t;for(let i=0,r=n.length;i<r;++i){const o=n[i];if(o in YF)continue;YF[o]=!0;const a=VT(o,16).split(" ");t||(t=[]),t.push([a.slice(3).join(" ").replace(/"/g,""),a[1],a[0]])}return t&&(async()=>{await document.fonts.ready;for(let i=0,r=t.length;i<r;++i){const o=t[i],s=o[0];if(Uye.includes(s))continue;const a=o[1],c=o[2];if(!(await document.fonts.load(`${c} ${a} 16px "${s}"`)).some(m=>m.family.replace(/^['"]|['"]$/g,"").toLowerCase()===s.toLowerCase()&&m.weight==a&&m.style===c)){const m=e.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a).replace("{-fontstyle}",c.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c);if(!document.querySelector('link[href="'+m+'"]')){const v=document.createElement("link");v.href=m,v.rel="stylesheet",document.head.appendChild(v)}}}})(),n}const zye={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Fye={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},jye=function(n,e){const t=nme(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},Mf={zoom:0,distanceFromCenter:0};Cf.register(DE,{...Cf.definitions,pitch:[{kind:"number"},[],n=>Mf.pitch||90],"distance-from-center":[{kind:"number"},[],n=>Mf.distanceFromCenter||0]});let rM,pO;function Vi(n,e,t,i,r,o){const s=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[s]||(r[s]={});const a=r[s];if(!a[t]){let c=(n[e]||dm)[t];const h=pme[`${e}_${n.type}`][t];c===void 0&&(c=h.default);let m=tme(c);if(!m&&PZ(c)&&(c=ume(c,h),m=!0),m){const v=jye(c,h);a[t]=v.evaluate.bind(v)}else h.type=="color"&&(c=$s.parse(c)),a[t]=function(){return c}}return a[t](Mf,i,o)}function VF(n,e,t,i){return Vi(n,"layout",`${t}-allow-overlap`,e,i)?Vi(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function Nye(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=sme(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](Mf,t)}function By(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const Gye=/\{[^{}}]*\}/g;function mO(n,e){return n.replace(Gye,function(t){return e[t.slice(1,-1)]||""})}function $F(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const Qye={};function Wye(n,e,t,i=e0,r=void 0,o=void 0,s=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");Qye[Rye(e,n)]=Array.from(arguments);const c={};(typeof o=="string"||o instanceof Request||o instanceof Response||o instanceof Promise)&&(o={default:o});for(const J in o){const $=o[J];Ax(()=>$).then(async G=>{let oe;if(typeof Image<"u"){const ue=new Image;if(typeof G=="string")ue.crossOrigin="anonymous",ue.src=G;else{let xe;G instanceof Request?xe=await fetch(G):G instanceof Response&&(xe=G);const ge=await xe.blob();oe=URL.createObjectURL(ge),ue.src=oe}ue.addEventListener("load",function xe(){ue.removeEventListener("load",xe),c[J]={image:ue,size:[ue.width,ue.height]},n.changed(),oe&&URL.revokeObjectURL(oe)}),ue.addEventListener("error",function xe(){URL.revokeObjectURL(oe),ue.removeEventListener("error",xe)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const ue=self;ue.postMessage({action:"loadImage",src:G}),ue.addEventListener("message",function(ge){ge.data.action==="imageLoaded"&&ge.data.src===G&&(c[J]={image:ge.data.image,size:[ge.data.image.width,ge.data.image.height]})})}})}const h=pZ(e.layers),m={},v=[],x={},E={},R=sJ(e),P=Dye(e);let z;for(let J=0,$=h.length;J<$;++J){const G=h[J],oe=G.id;if(typeof t=="string"&&G.source==t||Array.isArray(t)&&t.indexOf(oe)!==-1){const ue=G["source-layer"];if(z){if(G.source!==z)throw new Error(`Layer "${oe}" does not use source "${z}`)}else{z=G.source;const ge=e.sources[z];if(!ge)throw new Error(`Source "${z}" is not defined`);const Ie=ge.type;if(Ie!=="vector"&&Ie!=="geojson")throw new Error(`Source "${z}" is not of type "vector" or "geojson", but "${Ie}"`)}let xe=m[ue];xe||(xe=[],m[ue]=xe),xe.push({layer:G,index:J}),v.push(oe)}}const Q=new Fy,Y=new n1,H=[],Z=function(J,$,G){const oe=n.getSource?.()?.format_?.layerName_??"mvt:layer",ue=J.getProperties(),xe=m[ue[oe]];if(!xe)return;let ge=i.indexOf($);ge==-1&&(ge=zP($,i)),Mf.zoom=ge,Mf.distanceFromCenter=0;const Ie=J.getGeometry(),Me=zye[Ie.getType()],ke=n.get("map");if(ke&&ke instanceof e6&&Me===1){const At=ke.getSize();if(At){const yt=ke.getView().getCenter(),Le=Sf(Ie.getExtent());Mf.distanceFromCenter=jme(yt,Le)/$/At[1]}}const je={id:J.getId(),properties:ue,type:Me},Be=n.get("mapbox-featurestate")[J.getId()];let Ye=-1;for(let At=0,yt=xe.length;At<yt;++At){const Le=xe[At],De=Le.layer,Ge=De.id;if(G!==void 0&&G!==Ge)continue;const Te=De.layout||dm,xt=De.paint||dm;if(Te.visibility==="none"||"minzoom"in De&&ge<De.minzoom||"maxzoom"in De&&ge>=De.maxzoom)continue;const st=De.filter;if(!st||Nye(Ge,st,je,P)){let Tt,Lt,Ue,Oe,Ee,Ve;const mt=Le.index;if(Me==3&&(De.type=="fill"||De.type=="fill-extrusion"))if(Lt=Vi(De,"paint",De.type+"-opacity",je,R,Be),De.type+"-pattern"in xt){const Dn=Vi(De,"paint",De.type+"-pattern",je,R,Be);if(Dn){const It=typeof Dn=="string"?mO(Dn,ue):Dn.toString(),Ce=$F(It,c);if(r&&r[It]&&Ce){++Ye,Ve=H[Ye],(!Ve||!Ve.getFill()||Ve.getStroke()||Ve.getText())&&(Ve=new pf({fill:new n1}),H[Ye]=Ve),Ue=Ve.getFill(),Ve.setZIndex(mt);const re=It+"."+Lt;let le=E[re];if(!le){const he=r[It],se=n6(he.width,he.height),Ae=se.getContext("2d");Ae.globalAlpha=Lt,Ae.drawImage(Ce.image,he.x,he.y,he.width,he.height,0,0,he.width,he.height),le=Ae.createPattern(se,"repeat"),E[re]=le}Ue.setColor(le)}}}else Tt=By(Vi(De,"paint",De.type+"-color",je,R,Be),Lt),De.type+"-outline-color"in xt&&(Ee=By(Vi(De,"paint",De.type+"-outline-color",je,R,Be),Lt)),Ee||(Ee=Tt),(Tt||Ee)&&(++Ye,Ve=H[Ye],(!Ve||Tt&&!Ve.getFill()||!Tt&&Ve.getFill()||Ee&&!Ve.getStroke()||!Ee&&Ve.getStroke()||Ve.getText())&&(Ve=new pf({fill:Tt?new n1:void 0,stroke:Ee?new Fy:void 0}),H[Ye]=Ve),Tt&&(Ue=Ve.getFill(),Ue.setColor(Tt)),Ee&&(Oe=Ve.getStroke(),Oe.setColor(Ee),Oe.setWidth(.5)),Ve.setZIndex(mt));if(Me!=1&&De.type=="line"){"line-pattern"in xt?Tt=void 0:Tt=By(Vi(De,"paint","line-color",je,R,Be),Vi(De,"paint","line-opacity",je,R,Be));const Dn=Vi(De,"paint","line-width",je,R,Be);Tt&&Dn>0&&(++Ye,Ve=H[Ye],(!Ve||!Ve.getStroke()||Ve.getFill()||Ve.getText())&&(Ve=new pf({stroke:new Fy}),H[Ye]=Ve),Oe=Ve.getStroke(),Oe.setLineCap(Vi(De,"layout","line-cap",je,R,Be)),Oe.setLineJoin(Vi(De,"layout","line-join",je,R,Be)),Oe.setMiterLimit(Vi(De,"layout","line-miter-limit",je,R,Be)),Oe.setColor(Tt),Oe.setWidth(Dn),Oe.setLineDash(xt["line-dasharray"]?Vi(De,"paint","line-dasharray",je,R,Be).map(function(It){return It*Dn}):null),Ve.setZIndex(mt))}let pt=!1,Ct=null,Rt=0,Kt,on,qn;if((Me==1||Me==2)&&"icon-image"in Te){const Dn=Vi(De,"layout","icon-image",je,R,Be);if(Dn){Kt=typeof Dn=="string"?mO(Dn,ue):Dn.toString();let It;const Ce=a?a(n,Kt):void 0,re=$F(Kt,c);if(r&&r[Kt]&&re||Ce){const le=Vi(De,"layout","icon-rotation-alignment",je,R,Be);if(Me==2){const he=J.getGeometry();if(he.getFlatMidpoint||he.getFlatMidpoints){const se=he.getExtent();if(Math.sqrt(Math.max(Math.pow((se[2]-se[0])/$,2),Math.pow((se[3]-se[1])/$,2)))>150){const be=he.getType()==="MultiLineString"?he.getFlatMidpoints():he.getFlatMidpoint();if(pO||(rM=[NaN,NaN],pO=new WA("Point",rM,[],2,{},void 0)),It=pO,rM[0]=be[0],rM[1]=be[1],Vi(De,"layout","symbol-placement",je,R,Be)==="line"&&le==="map"){const et=he.getStride(),Pe=he.getFlatCoordinates();for(let Ze=0,y=Pe.length-et;Ze<y;Ze+=et){const at=Pe[Ze],Pt=Pe[Ze+1],Mt=Pe[Ze+et],en=Pe[Ze+et+1],dt=Math.min(at,Mt),Zn=Math.max(at,Mt),gi=be[0],Tn=be[1],zn=(en-Pt)*(gi-at)-(Mt-at)*(Tn-Pt);if(Math.abs(zn)<.001&&gi<=Zn&&gi>=dt){Rt=Math.atan2(Pt-en,Mt-at);break}}}}}}if(Me!==2||It){const he=Vi(De,"layout","icon-size",je,R,Be),se=xt["icon-color"]!==void 0?Vi(De,"paint","icon-color",je,R,Be):null;if(!se||se.a!==0){const Ae=Vi(De,"paint","icon-halo-color",je,R,Be),be=Vi(De,"paint","icon-halo-width",je,R,Be);let We=`${Kt}.${he}.${be}.${Ae}`;if(se!==null&&(We+=`.${se}`),on=x[We],!on){const et=VF(De,je,"icon",R);let Pe;"icon-offset"in Te&&(Pe=Vi(De,"layout","icon-offset",je,R,Be).slice(0),Pe[0]*=he,Pe[1]*=-he);let Ze=se?[se.r*255,se.g*255,se.b*255,se.a]:void 0;if(Ce){const y={color:Ze,rotateWithView:le==="map",displacement:Pe,declutterMode:et,scale:he};typeof Ce=="string"?y.src=Ce:(y.img=Ce,y.imgSize=[Ce.width,Ce.height]),on=new mx(y)}else{const y=r[Kt];let at,Pt,Mt;if(be)y.sdf?(at=WF(qF(re.image,y,se||[0,0,0,1]),{x:0,y:0,width:y.width,height:y.height,pixelRatio:y.pixelRatio},be,Ae),Ze=void 0):at=WF(re.image,y,be,Ae);else{if(y.sdf&&!re.unSDFed){const en=qF(re.image,{x:0,y:0,width:re.size[0],height:re.size[1]},{r:1,g:1,b:1});re.image=en,re.unSDFed=!0}at=re.image,Pt=[y.width,y.height],Mt=[y.x,y.y]}on=new mx({color:Ze,img:at,imgSize:re.size,size:Pt,offset:Mt,rotateWithView:le==="map",scale:he/y.pixelRatio,displacement:Pe,declutterMode:et})}x[We]=on}}on&&(++Ye,Ve=H[Ye],(!Ve||!Ve.getImage()||Ve.getFill()||Ve.getStroke())&&(Ve=new pf,H[Ye]=Ve),Ve.setGeometry(It),on.setRotation(Rt+dO(Vi(De,"layout","icon-rotate",je,R,Be))),on.setOpacity(Vi(De,"paint","icon-opacity",je,R,Be)),on.setAnchor(Fye[Vi(De,"layout","icon-anchor",je,R,Be)]),Ve.setImage(on),Ct=Ve.getText(),Ve.setText(void 0),Ve.setZIndex(mt),pt=!0,qn=!1)}else qn=!0}}}if(Me==1&&De.type==="circle"){++Ye,Ve=H[Ye],(!Ve||!Ve.getImage()||Ve.getFill()||Ve.getStroke())&&(Ve=new pf,H[Ye]=Ve);const Dn="circle-radius"in xt?Vi(De,"paint","circle-radius",je,R,Be):5,It=By(Vi(De,"paint","circle-stroke-color",je,R,Be),Vi(De,"paint","circle-stroke-opacity",je,R,Be)),Ce=Vi(De,"paint","circle-translate",je,R,Be),re=By(Vi(De,"paint","circle-color",je,R,Be),Vi(De,"paint","circle-opacity",je,R,Be)),le=Vi(De,"paint","circle-stroke-width",je,R,Be),he=Dn+"."+It+"."+re+"."+le+"."+Ce[0]+"."+Ce[1];on=x[he],on||(on=new l5({radius:Dn,displacement:[Ce[0],-Ce[1]],stroke:It&&le>0?new Fy({width:le,color:It}):void 0,fill:re?new n1({color:re}):void 0,declutterMode:"none"}),x[he]=on),Ve.setImage(on),Ct=Ve.getText(),Ve.setText(void 0),Ve.setGeometry(void 0),Ve.setZIndex(mt),pt=!0}let Qn,xi,Kn,Un,Cn,ei;if("text-field"in Te){Un=Math.round(Vi(De,"layout","text-size",je,R,Be));const Dn=Vi(De,"layout","text-font",je,R,Be);Kn=Vi(De,"layout","text-line-height",je,R,Be),xi=VT(s?s(Dn,e.metadata?e.metadata["ol:webfonts"]:void 0):Dn,Un,Kn),xi.includes("sans-serif")||(xi+=",sans-serif"),Cn=Vi(De,"layout","text-letter-spacing",je,R,Be),ei=Vi(De,"layout","text-max-width",je,R,Be);const It=Vi(De,"layout","text-field",je,R,Be);typeof It=="object"&&It.sections?It.sections.length===1?Qn=It.toString():Qn=It.sections.reduce((Ce,re,le)=>{const he=re.fontStack?re.fontStack.split(","):Dn,se=VT(s?s(he):he,Un*(re.scale||1),Kn);let Ae=re.text;if(Ae===`
`)return Ce.push(`
`,""),Ce;if(Me==2)return Ce.push(m9(Ae,Cn),se),Ce;Ae=g9(Ae,se,ei,Cn).split(`
`);for(let be=0,We=Ae.length;be<We;++be)be>0&&Ce.push(`
`,""),Ce.push(Ae[be],se);return Ce},[]):Qn=mO(It,ue).trim(),Lt=Vi(De,"paint","text-opacity",je,R,Be)}if(Qn&&Lt&&!qn){pt||(++Ye,Ve=H[Ye],(!Ve||!Ve.getText()||Ve.getFill()||Ve.getStroke())&&(Ve=new pf,H[Ye]=Ve),Ve.setImage(void 0),Ve.setGeometry(void 0));const Dn=VF(De,je,"text",R);Ve.getText()||Ve.setText(Ct),Ct=Ve.getText(),(!Ct||"getDeclutterMode"in Ct&&Ct.getDeclutterMode()!==Dn)&&(Ct=new LX({padding:[2,2,2,2],declutterMode:Dn}),Ve.setText(Ct));const It=Vi(De,"layout","text-transform",je,R,Be);It=="uppercase"?Qn=Array.isArray(Qn)?Qn.map((Mt,en)=>en%2?Mt:Mt.toUpperCase()):Qn.toUpperCase():It=="lowercase"&&(Qn=Array.isArray(Qn)?Qn.map((Mt,en)=>en%2?Mt:Mt.toLowerCase()):Qn.toLowerCase());const Ce=Array.isArray(Qn)?Qn:Me==2?m9(Qn,Cn):g9(Qn,xi,ei,Cn);if(Ct.setText(Ce),Ct.setFont(xi),Ct.setRotation(dO(Vi(De,"layout","text-rotate",je,R,Be))),typeof Ct.setKeepUpright=="function"){const Mt=Vi(De,"layout","text-keep-upright",je,R,Be);Ct.setKeepUpright(Mt)}const re=Vi(De,"layout","text-anchor",je,R,Be),le=pt||Me==1?"point":Vi(De,"layout","symbol-placement",je,R,Be);let he;if(le==="line-center"?(Ct.setPlacement("line"),he="center"):Ct.setPlacement(le),le==="line"&&typeof Ct.setRepeat=="function"){const Mt=Vi(De,"layout","symbol-spacing",je,R,Be);Ct.setRepeat(Mt*2)}Ct.setOverflow(le==="point");let se=Vi(De,"paint","text-halo-width",je,R,Be);const Ae=Vi(De,"layout","text-offset",je,R,Be),be=Vi(De,"paint","text-translate",je,R,Be);let We=0,et=0;if(le=="point"){he="center",re.indexOf("left")!==-1?(he="left",et=se):re.indexOf("right")!==-1&&(he="right",et=-se);const Mt=Vi(De,"layout","text-rotation-alignment",je,R,Be);Ct.setRotateWithView(Mt=="map")}else Ct.setMaxAngle(dO(Vi(De,"layout","text-max-angle",je,R,Be))*Qn.length/Ce.length),Ct.setRotateWithView(!1);Ct.setTextAlign(he);let Pe="middle";re.indexOf("bottom")==0?(Pe="bottom",We=-se-.5*(Kn-1)*Un):re.indexOf("top")==0&&(Pe="top",We=se+.5*(Kn-1)*Un),Ct.setTextBaseline(Pe);const Ze=Vi(De,"layout","text-justify",je,R,Be);Ct.setJustify(Ze==="auto"?void 0:Ze),Ct.setOffsetX(Ae[0]*Un+et+be[0]),Ct.setOffsetY(Ae[1]*Un+We+be[1]),Y.setColor(By(Vi(De,"paint","text-color",je,R,Be),Lt)),Ct.setFill(Y);const y=By(Vi(De,"paint","text-halo-color",je,R,Be),Lt);if(y&&se>0){Q.setColor(y),se*=2;const Mt=.5*Un;Q.setWidth(se<=Mt?se:Mt),Ct.setStroke(Q)}else Ct.setStroke(void 0);const at=Vi(De,"layout","text-padding",je,R,Be),Pt=Ct.getPadding();at!==Pt[0]&&(Pt[0]=at,Pt[1]=at,Pt[2]=at,Pt[3]=at),Ve.setZIndex(mt)}}}if(Ye>-1)return H.length=Ye+1,H};return n.setStyle(Z),n.set("mapbox-layers",v),n.set("mapbox-source",z),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),Z}class cJ{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=t6,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Hs(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Hs(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Kr()}readFeature(e,t){return Kr()}readFeatures(e,t){return Kr()}readGeometry(e,t){return Kr()}readProjection(e){return Kr()}writeFeature(e,t){return Kr()}writeFeatures(e,t){return Kr()}writeGeometry(e,t){return Kr()}}function i6(n,e,t){const i=t?Hs(t.featureProjection):null,r=t?Hs(t.dataProjection):null;let o=n;if(i&&r&&!Xy(i,r)){e&&(o=n.clone());const s=e?i:r,a=e?r:i;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform($3(s,a))}if(e&&t&&t.decimals!==void 0){const s=Math.pow(10,t.decimals),a=function(c){for(let h=0,m=c.length;h<m;++h)c[h]=Math.round(c[h]*s)/s;return c};o===n&&(o=n.clone()),o.applyTransform(a)}return o}const qye={Point:Fb,LineString:Nb,Polygon:d1,MultiPoint:c5,MultiLineString:r4,MultiPolygon:o4};function Yye(n,e,t){return Array.isArray(e[0])?(yX(n,0,e,t)||(n=n.slice(),a9(n,0,e,t)),n):(fP(n,0,e,t)||(n=n.slice(),nS(n,0,e,t)),n)}function AJ(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>AJ({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return i6(new WA(i,i==="Polygon"?Yye(t.flatCoordinates,t.ends,r):t.flatCoordinates,t.ends?.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function FP(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>FP(r,e));return new lS(i)}const t=qye[n.type];return i6(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Vye extends cJ{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(oM(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(oM(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Kr()}readFeaturesFromObject(e,t){return Kr()}readGeometry(e,t){return this.readGeometryFromObject(oM(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Kr()}readProjection(e){return this.readProjectionFromObject(oM(e))}readProjectionFromObject(e){return Kr()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Kr()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Kr()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Kr()}}function oM(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class HF extends Vye{constructor(e){e=e||{},super(),this.dataProjection=Hs(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Hs(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=jP(i.geometry);if(this.featureClass===WA)return AJ({geometry:r,id:i.id,properties:i.properties},t);const o=new t6;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&o.setGeometryName(i.geometry_name),o.setGeometry(FP(r,t)),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties,!0),o}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const o=e;r=[];const s=o.features;for(let a=0,c=s.length;a<c;++a){const h=this.readFeatureFromObject(s[a],t);h&&r.push(h)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return $ye(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Hs(t.properties.name);else if(t.type==="EPSG")i=Hs("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const o=e.getProperties(),s=e.getGeometry();return s&&(i.geometry=y9(s,t),delete o[e.getGeometryName()]),nv(o)||(i.properties=o),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,o=e.length;r<o;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return y9(e,this.adaptOptions(t))}}function jP(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Zye(n);break}case"LineString":{t=Xye(n);break}case"Polygon":{t=nve(n);break}case"MultiPoint":{t=eve(n);break}case"MultiLineString":{t=Jye(n);break}case"MultiPolygon":{t=tve(n);break}case"GeometryCollection":{t=Hye(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function $ye(n,e){const t=jP(n);return FP(t,e)}function Hye(n,e){return n.geometries.map(function(i){return jP(i)})}function Zye(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:eC(e.length)}}function Xye(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:eC(e[0]?.length||2)}}function Jye(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,i=[],r=r5(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:eC(t)}}function eve(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:eC(e[0]?.length||2)}}function tve(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,r=hX(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:eC(i)}}function nve(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.length,r=r5(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:eC(i)}}function y9(n,e){n=i6(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=lve(n);break}case"LineString":{i=rve(n);break}case"Polygon":{i=uve(n,e);break}case"MultiPoint":{i=sve(n);break}case"MultiLineString":{i=ove(n);break}case"MultiPolygon":{i=ave(n,e);break}case"GeometryCollection":{i=ive(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function ive(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return y9(i,e)})}}function rve(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function ove(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function sve(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function ave(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function lve(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function uve(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const v9=65536*65536,ZF=1/v9,cve=12,XF=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),gO=0,sM=1,p2=2,aM=5;class Ave{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),o=r>>3,s=this.pos;this.type=r&7,e(o,t,this),this.pos===s&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*v9;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*v9;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,hve(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=cve&&XF?XF.decode(this.buf.subarray(t,e)):wve(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===p2?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===gO)for(;this.buf[this.pos++]>127;);else if(t===p2)this.pos=this.readVarint()+this.pos;else if(t===aM)this.pos+=4;else if(t===sM)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*ZF),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*ZF),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){dve(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=Sve(this.buf,e,this.pos);const i=this.pos-t;i>=128&&JF(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&JF(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,p2),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,mve,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,gve,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,bve,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,yve,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,vve,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Cve,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,_ve,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,xve,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,Mve,t)}writeBytesField(e,t){this.writeTag(e,p2),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,aM),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,aM),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,sM),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,sM),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,gO),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,gO),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,p2),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,aM),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,sM),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function hve(n,e,t){const i=t.buf;let r,o;if(o=i[t.pos++],r=(o&112)>>4,o<128||(o=i[t.pos++],r|=(o&127)<<3,o<128)||(o=i[t.pos++],r|=(o&127)<<10,o<128)||(o=i[t.pos++],r|=(o&127)<<17,o<128)||(o=i[t.pos++],r|=(o&127)<<24,o<128)||(o=i[t.pos++],r|=(o&1)<<31,o<128))return GC(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function GC(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function dve(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),fve(t,i,e),pve(i,e)}function fve(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function pve(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function JF(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function mve(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function gve(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function yve(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function vve(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function bve(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function Cve(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function _ve(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function xve(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function Mve(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function wve(n,e,t){let i="",r=e;for(;r<t;){const o=n[r];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a>t)break;let c,h,m;a===1?o<128&&(s=o):a===2?(c=n[r+1],(c&192)===128&&(s=(o&31)<<6|c&63,s<=127&&(s=null))):a===3?(c=n[r+1],h=n[r+2],(c&192)===128&&(h&192)===128&&(s=(o&15)<<12|(c&63)<<6|h&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(c=n[r+1],h=n[r+2],m=n[r+3],(c&192)===128&&(h&192)===128&&(m&192)===128&&(s=(o&15)<<18|(c&63)<<12|(h&63)<<6|m&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,i+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),i+=String.fromCharCode(s),r+=a}return i}function Sve(n,e,t){for(let i=0,r,o;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(o)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=r;continue}else r=o-55296<<10|r-56320|65536,o=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=r;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class hJ extends cJ{constructor(e){super(),e=e||{},this.dataProjection=new NE({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:WA,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const o=e.readVarint()+e.pos;let s=1,a=0,c=0,h=0,m=0,v=0;for(;e.pos<o;){if(!a){const x=e.readVarint();s=x&7,a=x>>3}if(a--,s===1||s===2)c+=e.readSVarint(),h+=e.readSVarint(),s===1&&m>v&&(r.push(m),v=m),i.push(c,h),m+=2;else if(s===7)m>v&&(i.push(i[v],i[v+1]),m+=2);else throw new Error("Invalid command found in the PBF")}m>v&&(r.push(m),v=m)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let o;const s=t.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;const c=[],h=[];this.readRawGeometry_(e,t,c,h);const m=kve(r,h.length);if(this.featureClass===WA)o=new this.featureClass(m,c,h,2,s,a),o.transform(i.dataProjection);else{let v;if(m=="Polygon"){const R=vX(c,h);v=R.length>1?new o4(c,"XY",R):new d1(c,"XY",h)}else v=m==="Point"?new Fb(c,"XY"):m==="LineString"?new Nb(c,"XY"):m==="MultiPoint"?new c5(c,"XY"):m==="MultiLineString"?new r4(c,"XY",h):null;const x=this.featureClass;o=new x,this.geometryName_&&o.setGeometryName(this.geometryName_);const E=i6(v,!1,i);o.setGeometry(E),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=Hs(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const o=new Ave(e),s=o.readFields(Eve,{}),a=[];for(const c in s){if(i&&!i.includes(c))continue;const h=s[c],m=h?[0,0,h.extent,h.extent]:null;r.setExtent(m);for(let v=0,x=h.length;v<x;++v){const E=Ive(o,h,v),R=this.createFeature_(o,E,t);R!==null&&a.push(R)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Eve(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(Bve,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function Bve(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function Ove(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[r]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function Ive(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(Ove,r,i),r}function kve(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class Tve extends DP{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,o=r.resolution,s=this.getLayer().getSource(),a=e.viewHints;let c=e.extent;if(t.extent!==void 0&&(c=ym(c,jg(t.extent,r.projection))),!a[hl.ANIMATING]&&!a[hl.INTERACTING]&&!Xb(c))if(s){const h=r.projection,m=s.getImage(c,o,i,h);m&&(this.loadImage(m)?this.image=m:m.getState()===zi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Hu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!zb(o,r))return null;const s=this.image.getExtent(),a=this.image.getImage(),c=is(s),h=Math.floor(a.width*((r[0]-s[0])/c));if(h<0||h>=a.width)return null;const m=Ju(s),v=Math.floor(a.height*((s[3]-r[1])/m));return v<0||v>=a.height?null:this.getImageData(a,h,v)}renderFrame(e,t){const i=this.image,r=i.getExtent(),o=i.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],c=i.getPixelRatio(),h=e.layerStatesArray[e.layerIndex],m=e.pixelRatio,v=e.viewState,x=v.center,E=v.resolution,R=m*s/(E*c),P=m*a/(E*c);this.prepareContainer(e,t);const z=this.context.canvas.width,Q=this.context.canvas.height,Y=this.getRenderContext(e);let H=!1,Z=!0;if(h.extent){const ue=jg(h.extent,v.projection);Z=Xl(ue,e.extent),H=Z&&!Fg(ue,e.extent),H&&this.clipUnrotated(Y,e,ue)}const J=i.getImage(),$=n0(this.tempTransform,z/2,Q/2,R,P,0,c*(r[0]-x[0])/s,c*(x[1]-r[3])/a);this.renderedResolution=a*m/c;const G=J.width*$[0],oe=J.height*$[3];if(this.getLayer().getSource().getInterpolate()||(Y.imageSmoothingEnabled=!1),this.preRender(Y,e),Z&&G>=.5&&oe>=.5){const ue=$[4],xe=$[5],ge=h.opacity;ge!==1&&(Y.save(),Y.globalAlpha=ge),Y.drawImage(J,0,0,+J.width,+J.height,ue,xe,G,oe),ge!==1&&Y.restore()}return this.postRender(this.context,e),H&&Y.restore(),Y.imageSmoothingEnabled=!0,this.container}}class Rve extends Lx{constructor(e){e=e||{},super(e)}}class dJ extends Rve{constructor(e){super(e)}createRenderer(){return new Tve(this)}getData(e){return super.getData(e)}}function b9(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const Dve=new Error("disposed"),Pve=[256,256];class ej extends h5{constructor(e){const t=ii.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=b9(this.data_);return e?[e.width,e.height]:Pve}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ii.IDLE&&this.state!==ii.ERROR)return;this.state=ii.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=ii.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=ii.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Dve),this.controller_=null),super.disposeInternal()}}let yO;const Q_=[];function tj(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function vO(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Kve(){if(yO===void 0){const n=Il(6,6,Q_);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",tj(n,4,5,4,0),tj(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;yO=vO(e,0)||vO(e,4)||vO(e,8),o5(n),Q_.push(n.canvas)}return yO}function C9(n,e,t,i){const r=WE(t,e,n);let o=i9(e,i,t);const s=e.getMetersPerUnit();s!==void 0&&(o*=s);const a=n.getMetersPerUnit();a!==void 0&&(o/=a);const c=n.getExtent();if(!c||zb(c,r)){const h=i9(n,o,r)/o;isFinite(h)&&h>0&&(o/=h)}return o}function Uve(n,e,t,i){const r=Sf(t);let o=C9(n,e,r,i);return(!isFinite(o)||o<=0)&&VZ(t,function(s){return o=C9(n,e,s,i),isFinite(o)&&o>0}),o}function fJ(n,e,t,i,r,o,s,a,c,h,m,v,x,E){const R=Il(Math.round(t*n),Math.round(t*e),Q_);if(v||(R.imageSmoothingEnabled=!1),c.length===0)return R.canvas;R.scale(t,t);function P(J){return Math.round(J*t)/t}R.globalCompositeOperation="lighter";const z=vp();c.forEach(function(J,$,G){qZ(z,J.extent)});let Q;const Y=t/i,H=(v?1:1+Math.pow(2,-24))/Y;(!x||c.length!==1||h!==0)&&(Q=Il(Math.round(is(z)*Y),Math.round(Ju(z)*Y),Q_),v||(Q.imageSmoothingEnabled=!1),c.forEach(function(J,$,G){if(J.image.width>0&&J.image.height>0){if(J.clipExtent){Q.save();const Ie=(J.clipExtent[0]-z[0])*Y,Me=-(J.clipExtent[3]-z[3])*Y,ke=is(J.clipExtent)*Y,je=Ju(J.clipExtent)*Y;Q.rect(v?Ie:Math.round(Ie),v?Me:Math.round(Me),v?ke:Math.round(Ie+ke)-Math.round(Ie),v?je:Math.round(Me+je)-Math.round(Me)),Q.clip()}const oe=(J.extent[0]-z[0])*Y,ue=-(J.extent[3]-z[3])*Y,xe=is(J.extent)*Y,ge=Ju(J.extent)*Y;Q.drawImage(J.image,h,h,J.image.width-2*h,J.image.height-2*h,v?oe:Math.round(oe),v?ue:Math.round(ue),v?xe:Math.round(oe+xe)-Math.round(oe),v?ge:Math.round(ue+ge)-Math.round(ue)),J.clipExtent&&Q.restore()}}));const Z=g1(s);return a.getTriangles().forEach(function(J,$,G){const oe=J.source,ue=J.target;let xe=oe[0][0],ge=oe[0][1],Ie=oe[1][0],Me=oe[1][1],ke=oe[2][0],je=oe[2][1];const Be=P((ue[0][0]-Z[0])/o),Ye=P(-(ue[0][1]-Z[1])/o),At=P((ue[1][0]-Z[0])/o),yt=P(-(ue[1][1]-Z[1])/o),Le=P((ue[2][0]-Z[0])/o),De=P(-(ue[2][1]-Z[1])/o),Ge=xe,Te=ge;xe=0,ge=0,Ie-=Ge,Me-=Te,ke-=Ge,je-=Te;const xt=[[Ie,Me,0,0,At-Be],[ke,je,0,0,Le-Be],[0,0,Ie,Me,yt-Ye],[0,0,ke,je,De-Ye]],st=Ime(xt);if(!st)return;if(R.save(),R.beginPath(),Kve()||!v){R.moveTo(At,yt);const Lt=4,Ue=Be-At,Oe=Ye-yt;for(let Ee=0;Ee<Lt;Ee++)R.lineTo(At+P((Ee+1)*Ue/Lt),yt+P(Ee*Oe/(Lt-1))),Ee!=Lt-1&&R.lineTo(At+P((Ee+1)*Ue/Lt),yt+P((Ee+1)*Oe/(Lt-1)));R.lineTo(Le,De)}else R.moveTo(At,yt),R.lineTo(Be,Ye),R.lineTo(Le,De);R.clip(),R.transform(st[0],st[2],st[1],st[3],Be,Ye),R.translate(z[0]-Ge,z[3]-Te);let Tt;if(Q)Tt=Q.canvas,R.scale(H,-H);else{const Lt=c[0],Ue=Lt.extent;Tt=Lt.image,R.scale(is(Ue)/Tt.width,-Ju(Ue)/Tt.height)}R.drawImage(Tt,0,0),R.restore()}),Q&&(o5(Q),Q_.push(Q.canvas)),m&&(R.save(),R.globalCompositeOperation="source-over",R.strokeStyle="black",R.lineWidth=1,a.getTriangles().forEach(function(J,$,G){const oe=J.target,ue=(oe[0][0]-Z[0])/o,xe=-(oe[0][1]-Z[1])/o,ge=(oe[1][0]-Z[0])/o,Ie=-(oe[1][1]-Z[1])/o,Me=(oe[2][0]-Z[0])/o,ke=-(oe[2][1]-Z[1])/o;R.beginPath(),R.moveTo(ge,Ie),R.lineTo(ue,xe),R.lineTo(Me,ke),R.closePath(),R.stroke()}),R.restore()),R.canvas}const Lve=10,nj=.25;class pJ{constructor(e,t,i,r,o,s,a){this.sourceProj_=e,this.targetProj_=t;let c={};const h=a?yge(H=>Hu(a,WE(H,this.targetProj_,this.sourceProj_))):$3(this.targetProj_,this.sourceProj_);this.transformInv_=function(H){const Z=H[0]+"/"+H[1];return c[Z]||(c[Z]=h(H)),c[Z]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&is(r)>=is(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?is(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?is(this.targetProj_.getExtent()):null;const m=g1(i),v=jE(i),x=FE(i),E=zE(i),R=this.transformInv_(m),P=this.transformInv_(v),z=this.transformInv_(x),Q=this.transformInv_(E),Y=Lve+(s?Math.max(0,Math.ceil(Math.log2(JT(i)/(s*s*256*256)))):0);if(this.addQuad_(m,v,x,E,R,P,z,Q,Y),this.wrapsXInSource_){let H=1/0;this.triangles_.forEach(function(Z,J,$){H=Math.min(H,Z.source[0][0],Z.source[1][0],Z.source[2][0])}),this.triangles_.forEach(Z=>{if(Math.max(Z.source[0][0],Z.source[1][0],Z.source[2][0])-H>this.sourceWorldWidth_/2){const J=[[Z.source[0][0],Z.source[0][1]],[Z.source[1][0],Z.source[1][1]],[Z.source[2][0],Z.source[2][1]]];J[0][0]-H>this.sourceWorldWidth_/2&&(J[0][0]-=this.sourceWorldWidth_),J[1][0]-H>this.sourceWorldWidth_/2&&(J[1][0]-=this.sourceWorldWidth_),J[2][0]-H>this.sourceWorldWidth_/2&&(J[2][0]-=this.sourceWorldWidth_);const $=Math.min(J[0][0],J[1][0],J[2][0]);Math.max(J[0][0],J[1][0],J[2][0])-$<this.sourceWorldWidth_/2&&(Z.source=J)}})}c={}}addTriangle_(e,t,i,r,o,s){this.triangles_.push({source:[r,o,s],target:[e,t,i]})}addQuad_(e,t,i,r,o,s,a,c,h){const m=ZT([o,s,a,c]),v=this.sourceWorldWidth_?is(m)/this.sourceWorldWidth_:null,x=this.sourceWorldWidth_,E=this.sourceProj_.canWrapX()&&v>.5&&v<1;let R=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const z=ZT([e,t,i,r]);R=is(z)/this.targetWorldWidth_>nj||R}!E&&this.sourceProj_.isGlobal()&&v&&(R=v>nj||R)}if(!R&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!Xl(m,this.maxSourceExtent_))return;let P=0;if(!R&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1]))){if(h>0)R=!0;else if(P=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),P!=1&&P!=2&&P!=4&&P!=8)return}if(h>0){if(!R){const z=[(e[0]+i[0])/2,(e[1]+i[1])/2],Q=this.transformInv_(z);let Y;E?Y=(Ib(o[0],x)+Ib(a[0],x))/2-Ib(Q[0],x):Y=(o[0]+a[0])/2-Q[0];const H=(o[1]+a[1])/2-Q[1];R=Y*Y+H*H>this.errorThresholdSquared_}if(R){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const z=[(t[0]+i[0])/2,(t[1]+i[1])/2],Q=this.transformInv_(z),Y=[(r[0]+e[0])/2,(r[1]+e[1])/2],H=this.transformInv_(Y);this.addQuad_(e,t,z,Y,o,s,Q,H,h-1),this.addQuad_(Y,z,i,r,H,Q,a,c,h-1)}else{const z=[(e[0]+t[0])/2,(e[1]+t[1])/2],Q=this.transformInv_(z),Y=[(i[0]+r[0])/2,(i[1]+r[1])/2],H=this.transformInv_(Y);this.addQuad_(e,z,Y,r,o,Q,H,c,h-1),this.addQuad_(z,t,i,Y,Q,s,a,H,h-1)}return}}if(E){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(P&11)==0&&this.addTriangle_(e,i,r,o,a,c),(P&14)==0&&this.addTriangle_(e,i,t,o,a,s),P&&((P&13)==0&&this.addTriangle_(t,r,e,s,c,o),(P&7)==0&&this.addTriangle_(t,r,i,s,c,a))}calculateSourceExtent(){const e=vp();return this.triangles_.forEach(function(t,i,r){const o=t.source;u3(e,o[0]),u3(e,o[1]),u3(e,o[2])}),e}getTriangles(){return this.triangles_}}const mJ=.5;class gJ extends h5{constructor(e,t,i,r,o,s,a,c,h,m,v,x){super(o,ii.IDLE,x),this.renderEdges_=v!==void 0?v:!1,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const E=r.getTileCoordExtent(this.wrappedTileCoord_),R=this.targetTileGrid_.getExtent();let P=this.sourceTileGrid_.getExtent();const z=R?ym(E,R):E;if(JT(z)===0){this.state=ii.EMPTY;return}const Q=e.getExtent();Q&&(P?P=ym(P,Q):P=Q);const Y=r.getResolution(this.wrappedTileCoord_[0]),H=Uve(e,i,z,Y);if(!isFinite(H)||H<=0){this.state=ii.EMPTY;return}const Z=m!==void 0?m:mJ;if(this.triangulation_=new pJ(e,i,z,P,H*Z,Y),this.triangulation_.getTriangles().length===0){this.state=ii.EMPTY;return}this.sourceZ_=t.getZForResolution(H);let J=this.triangulation_.calculateSourceExtent();if(P&&(e.canWrapX()?(J[1]=Ol(J[1],P[1],P[3]),J[3]=Ol(J[3],P[1],P[3])):J=ym(J,P)),!JT(J))this.state=ii.EMPTY;else{let $=0,G=0;e.canWrapX()&&($=is(Q),G=Math.floor((J[0]-Q[0])/$)),ZZ(J.slice(),e,!0).forEach(ue=>{const xe=t.getTileRangeForExtentAndZ(ue,this.sourceZ_);for(let ge=xe.minX;ge<=xe.maxX;ge++)for(let Ie=xe.minY;Ie<=xe.maxY;Ie++){const Me=h(this.sourceZ_,ge,Ie,a);if(Me){const ke=G*$;this.sourceTiles_.push({tile:Me,offset:ke})}}++G}),this.sourceTiles_.length===0&&(this.state=ii.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==ii.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:r,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=ii.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=fJ(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ii.LOADED}this.changed()}load(){if(this.state==ii.IDLE){this.state=ii.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==ii.IDLE||i==ii.LOADING){e++;const r=Yo(t,Ir.CHANGE,o=>{const s=t.getState();(s==ii.LOADED||s==ii.ERROR||s==ii.EMPTY)&&(Ea(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==ii.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ea),this.sourcesListenerKeys_=null}release(){this.canvas_&&(o5(this.canvas_.getContext("2d")),Q_.push(this.canvas_),this.canvas_=null),super.release()}}class zve{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof X4&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return xs(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return xs(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){xs(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function fS(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function Fve(n,e,t){return n+"/"+e+"/"+t}function jve(n){return Nve(n[0],n[1],n[2])}function Nve(n,e,t){return(e<<n)+t}function Gve(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const o=e.getFullTileRange(t);return o?o.containsXY(i,r):!0}function bO(n,e,t,i,r){return`${Yr(n)},${e},${Fve(t,i,r)}`}function CO(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function Qve(n,e,t){const i=n[t];return i?i.delete(e):!1}function ij(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=ym(e,jg(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=ym(e,r))}return e}class yJ extends DP{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=vp(),this.tempTileRange_=new KP(0,0,0,0),this.tempTileCoord_=fS(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new zve(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,r){const o=this.tileCache_,a=this.getLayer().getSource(),c=bO(a,a.getKey(),e,t,i);let h;if(o.containsKey(c))h=o.get(c);else{if(h=a.getTile(e,t,i,r.pixelRatio,r.viewState.projection),!h)return null;o.set(c,h)}return h}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);return o||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Hu(t.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!zb(o,r))return null;const s=t.viewState,a=i.getRenderSource(),c=a.getTileGridForProjection(s.projection),h=a.getTilePixelRatio(t.pixelRatio);for(let m=c.getZForResolution(s.resolution);m>=c.getMinZoom();--m){const v=c.getTileCoordForCoordAndZ(r,m),x=this.getTile(m,v[1],v[2],t);if(!x||x.getState()!==ii.LOADED)continue;const E=c.getOrigin(m),R=YA(c.getTileSize(m)),P=c.getResolution(m);let z;if(x instanceof iJ||x instanceof gJ)z=x.getImage();else if(x instanceof ej){if(z=b9(x.getData()),!z)continue}else continue;const Q=Math.floor(h*((r[0]-E[0])/P-v[1]*R[0])),Y=Math.floor(h*((E[1]-r[1])/P-v[2]*R[1])),H=Math.round(h*a.getGutterForProjection(s.projection));return this.getImageData(z,Q+H,Y+H)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=i,!0}enqueueTiles(e,t,i,r,o){const s=e.viewState,a=this.getLayer(),c=a.getRenderSource(),h=c.getTileGridForProjection(s.projection),m=Yr(c);m in e.wantedTiles||(e.wantedTiles[m]={});const v=e.wantedTiles[m],x=a.getMapInternal(),E=Math.max(i-o,h.getMinZoom(),h.getZForResolution(Math.min(a.getMaxResolution(),x?x.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):h.getResolution(0)),c.zDirection)),R=s.rotation,P=R?$Z(s.center,s.resolution,R,e.size):void 0;for(let z=i;z>=E;--z){const Q=h.getTileRangeForExtentAndZ(t,z,this.tempTileRange_),Y=h.getResolution(z);for(let H=Q.minX;H<=Q.maxX;++H)for(let Z=Q.minY;Z<=Q.maxY;++Z){if(R&&!h.tileCoordIntersectsViewport([z,H,Z],P))continue;const J=this.getTile(z,H,Z,e);if(!J||!CO(r,J,z))continue;const G=J.getKey();if(v[G]=!0,J.getState()===ii.IDLE&&!e.tileQueue.isKeyQueued(G)){const oe=fS(z,H,Z,this.tempTileCoord_);e.tileQueue.enqueue([J,m,h.getTileCoordCenter(oe),Y])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let c=0;c<a.length;++c){const h=bO(this.getLayer().getSource(),a[c],r,o,s);if(i.containsKey(h)){const m=i.peek(h);if(m.getState()===ii.LOADED)return m.endTransition(Yr(this)),CO(t,m,r),!0}}return!1}findAltTiles_(e,t,i,r){const o=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource(),h=c.getKey();for(let m=o.minX;m<=o.maxX;++m)for(let v=o.minY;v<=o.maxY;++v){const x=bO(c,h,i,m,v);let E=!1;if(a.containsKey(x)){const R=a.peek(x);R.getState()===ii.LOADED&&(CO(r,R,i),E=!0)}E||(s=!1)}return s}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,s=r.resolution,a=r.center,c=e.pixelRatio,h=this.getLayer(),m=h.getSource(),v=m.getTileGridForProjection(o),x=v.getZForResolution(s,m.zDirection),E=v.getResolution(x),R=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==R&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=R):this.renderedSourceKey_=R;let P=e.extent;const z=m.getTilePixelRatio(c);this.prepareContainer(e,t);const Q=this.context.canvas.width,Y=this.context.canvas.height,H=i.extent&&jg(i.extent);H&&(P=ym(P,jg(i.extent)));const Z=E*Q/2/z,J=E*Y/2/z,$=[a[0]-Z,a[1]-J,a[0]+Z,a[1]+J],G={};this.renderedTiles.length=0;const oe=h.getPreload();if(e.nextExtent){const At=v.getZForResolution(r.nextResolution,m.zDirection),yt=ij(e,e.nextExtent);this.enqueueTiles(e,yt,At,G,oe)}const ue=ij(e,P);if(this.enqueueTiles(e,ue,x,G,0),oe>0&&setTimeout(()=>{this.enqueueTiles(e,ue,x-1,G,oe-1)},0),!(x in G))return this.container;const xe=Yr(this),ge=e.time;for(const At of G[x]){const yt=At.getState();if(yt===ii.EMPTY)continue;const Le=At.tileCoord;if(yt===ii.LOADED&&At.getAlpha(xe,ge)===1){At.endTransition(xe);continue}if(yt!==ii.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Le,G)){Qve(G,At,x),e.animate=!0;continue}if(this.findAltTiles_(v,Le,x+1,G))continue;const Te=v.getMinZoom();for(let xt=x-1;xt>=Te&&!this.findAltTiles_(v,Le,xt,G);--xt);}const Ie=E/s*c/z,Me=this.getRenderContext(e);n0(this.tempTransform,Q/2,Y/2,Ie,Ie,0,-Q/2,-Y/2),i.extent&&this.clipUnrotated(Me,e,H),m.getInterpolate()||(Me.imageSmoothingEnabled=!1),this.preRender(Me,e);const ke=Object.keys(G).map(Number);ke.sort(Xg);let je;const Be=[],Ye=[];for(let At=ke.length-1;At>=0;--At){const yt=ke[At],Le=m.getTilePixelSize(yt,c,o),Ge=v.getResolution(yt)/E,Te=Le[0]*Ge*Ie,xt=Le[1]*Ge*Ie,st=v.getTileCoordForCoordAndZ(g1($),yt),Tt=v.getTileCoordExtent(st),Lt=Hu(this.tempTransform,[z*(Tt[0]-$[0])/E,z*($[3]-Tt[3])/E]),Ue=z*m.getGutterForProjection(o);for(const Oe of G[yt]){if(Oe.getState()!==ii.LOADED)continue;const Ee=Oe.tileCoord,Ve=st[1]-Ee[1],mt=Math.round(Lt[0]-(Ve-1)*Te),pt=st[2]-Ee[2],Ct=Math.round(Lt[1]-(pt-1)*xt),Rt=Math.round(Lt[0]-Ve*Te),Kt=Math.round(Lt[1]-pt*xt),on=mt-Rt,qn=Ct-Kt,Qn=ke.length===1;let xi=!1;je=[Rt,Kt,Rt+on,Kt,Rt+on,Kt+qn,Rt,Kt+qn];for(let Kn=0,Un=Be.length;Kn<Un;++Kn)if(!Qn&&yt<Ye[Kn]){const Cn=Be[Kn];Xl([Rt,Kt,Rt+on,Kt+qn],[Cn[0],Cn[3],Cn[4],Cn[7]])&&(xi||(Me.save(),xi=!0),Me.beginPath(),Me.moveTo(je[0],je[1]),Me.lineTo(je[2],je[3]),Me.lineTo(je[4],je[5]),Me.lineTo(je[6],je[7]),Me.moveTo(Cn[6],Cn[7]),Me.lineTo(Cn[4],Cn[5]),Me.lineTo(Cn[2],Cn[3]),Me.lineTo(Cn[0],Cn[1]),Me.clip())}Be.push(je),Ye.push(yt),this.drawTile(Oe,e,Rt,Kt,on,qn,Ue,Qn),xi&&Me.restore(),this.renderedTiles.unshift(Oe),this.updateUsedTiles(e.usedTiles,m,Oe)}}if(this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!h1(this.renderedExtent_,$),this.renderedExtent_=$,this.renderedPixelRatio=c,this.postRender(this.context,e),i.extent&&Me.restore(),Me.imageSmoothingEnabled=!0,this.renderComplete){const At=(yt,Le)=>{const De=Yr(m),Ge=Le.wantedTiles[De],Te=Ge?Object.keys(Ge).length:0;this.updateCacheSize(Te),this.tileCache_.expireCache()};e.postRenderFunctions.push(At)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,o,s,a,c){let h;if(e instanceof ej){if(h=b9(e.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(e);if(!h)return;const m=this.getRenderContext(t),v=Yr(this),x=t.layerStatesArray[t.layerIndex],E=x.opacity*(c?e.getAlpha(v,t.time):1),R=E!==m.globalAlpha;R&&(m.save(),m.globalAlpha=E),m.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,r,o,s),R&&m.restore(),E!==x.opacity?t.animate=!0:c&&e.endTransition(v)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=Yr(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const Ny={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Wve extends Lx{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Ny.PRELOAD)}setPreload(e){this.set(Ny.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ny.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ny.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class vJ extends Wve{constructor(e){super(e)}createRenderer(){return new yJ(this,{cacheSize:this.getCacheSize()})}}const qve={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},rj={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Yve extends yJ{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Ed(),this.tileClipContexts_=null}drawTile(e,t,i,r,o,s,a,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,o,s,a,c)}getTile(e,t,i,r){const o=this.getOrCreateTile(e,t,i,r);if(!o)return null;const a=r.viewState.resolution,c=r.viewHints;return(!(c[hl.ANIMATING]||c[hl.INTERACTING])||!o.wantedResolution)&&(o.wantedResolution=a),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=e.wantedResolution,c=e.getReplayState(r);if(!c.dirty&&c.renderedResolution===a&&c.renderedRevision==o&&c.renderedRenderOrder==s)return;const h=r.getSource(),m=!!r.getDeclutter(),v=h.getTileGrid(),E=h.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),R=h.getSourceTiles(t,i,e),P=Yr(r);delete e.hitDetectionImageData[P],e.executorGroups[P]=[],c.dirty=!1;for(let z=0,Q=R.length;z<Q;++z){const Y=R[z];if(Y.getState()!=ii.LOADED)continue;const H=Y.tileCoord,Z=v.getTileCoordExtent(H),J=ym(E,Z),$=Zy(J,r.getRenderBuffer()*a,this.tempExtent),G=h1(Z,J)?null:$,oe=new JX(0,J,a,t),ue=p9(a,t),xe=function(je,Be){let Ye;const At=je.getStyleFunction()||r.getStyleFunction();if(At&&(Ye=At(je,a)),Ye){const yt=this.renderFeature(je,ue,Ye,oe,m,Be);c.dirty=c.dirty||yt}},ge=Y.getFeatures();s&&s!==c.renderedRenderOrder&&ge.sort(s);for(let je=0,Be=ge.length;je<Be;++je){const Ye=ge[je];(!G||Xl(G,Ye.getGeometry().getExtent()))&&xe.call(this,Ye,je)}const Ie=oe.finish(),Me=r.getRenderMode()!=="vector"&&m&&R.length===1?null:J,ke=new eJ(Me,a,t,h.getOverlaps(),Ie,r.getRenderBuffer(),!0);e.executorGroups[P].push(ke)}c.renderedRevision=o,c.renderedRenderOrder=s,c.renderedResolution=a}forEachFeatureAtCoordinate(e,t,i,r,o){const s=t.viewState.resolution,a=t.viewState.rotation;i=i??0;const c=this.getLayer(),m=c.getSource().getTileGridForProjection(t.viewState.projection),v=ZT([e]);Zy(v,s*i,v);const x={},E=function(H,Z,J){let $=H.getId();$===void 0&&($=Yr(H));const G=x[$];if(G){if(G!==!0&&J<G.distanceSq){if(J===0)return x[$]=!0,o.splice(o.lastIndexOf(G),1),r(H,c,Z);G.geometry=Z,G.distanceSq=J}}else{if(J===0)return x[$]=!0,r(H,c,Z);o.push(x[$]={feature:H,layer:c,geometry:Z,distanceSq:J,callback:r})}},R=this.renderedTiles,P=Yr(c),z=c.getDeclutter(),Q=z?t.declutter?.[z]?.all().map(H=>H.value):null;let Y;e:for(let H=0,Z=R.length;H<Z;++H){const J=R[H],$=m.getTileCoordExtent(J.wrappedTileCoord);if(!Xl($,v))continue;const G=J.executorGroups[P];for(let oe=0,ue=G.length;oe<ue;++oe)if(Y=G[oe].forEachFeatureAtCoordinate(e,s,a,i,E,Q),Y)break e}return Y}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),o=r.getSource(),s=this.renderedProjection,a=s.getExtent(),c=this.renderedResolution,h=o.getTileGridForProjection(s),m=Hu(this.renderedPixelToCoordinateTransform_,e.slice()),v=h.getTileCoordForCoordAndResolution(m,c).toString(),x=this.renderedTiles.find(H=>H.tileCoord.toString()===v&&H.getState()===ii.LOADED);if(!x||x.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!Fg(a,h.getTileCoordExtent(x.tileCoord))&&XD(m,s);const E=Yr(r),R=h.getTileCoordExtent(x.wrappedTileCoord),P=g1(R),z=[(m[0]-P[0])/c,(P[1]-m[1])/c],Q=x.getSourceTiles().reduce((H,Z)=>H.concat(Z.getFeatures()),[]);let Y=x.hitDetectionImageData[E];if(!Y){const H=YA(h.getTileSize(h.getZForResolution(c,o.zDirection))),Z=this.renderedRotation_,J=[this.getRenderTransform(h.getTileCoordCenter(x.wrappedTileCoord),c,0,vf,H[0]*vf,H[1]*vf,0)];Y=tJ(H,J,Q,r.getStyleFunction(),h.getTileCoordExtent(x.wrappedTileCoord),x.getReplayState(r).renderedResolution,Z),x.hitDetectionImageData[E]=Y}t(nJ(z,Q,Y))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return i.forEach(c=>{if(c.tileCoord[0]!==s||c.getState()!==ii.LOADED)return;const h=c.getSourceTiles();for(let m=0,v=h.length;m<v;++m){const x=h[m],E=x.getKey();if(E in a)continue;a[E]=!0;const R=x.tileCoord;if(Xl(e,o.getTileCoordExtent(R))){const P=x.getFeatures();if(P)for(let z=0,Q=P.length;z<Q;++z){const Y=P[z],H=Y.getGeometry();Xl(e,H.getExtent())&&t.push(Y)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[hl.ANIMATING]||o[hl.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),h=c?e.declutter?.[c]:void 0,m=Yr(this.getLayer()),v=this.renderedTiles;for(let x=0,E=v.length;x<E;++x){const R=v[x],P=R.executorGroups[m];if(P)for(let z=P.length-1;z>=0;--z)P[z].execute(this.context,a,this.getTileRenderTransform(R,e),e.viewState.rotation,s,AS,h)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=Yr(this.getLayer()),r=t.reduce((c,h,m)=>(h.executorGroups[i].forEach(v=>c.push({executorGroup:v,index:m})),c),[]),o=r.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),s={};for(let c=0,h=r.length;c<h;++c){const m=r[c].executorGroup.getDeferredZIndexContexts();for(const v in m)s[v]=!0}Object.keys(s).map(Number).sort(Xg).forEach(c=>{o.forEach((h,m)=>{h[c]&&(h[c].forEach(v=>{const{executorGroup:x,index:E}=r[m],R=x.getRenderedContext(),P=R.globalAlpha;R.globalAlpha=this.renderedOpacity_;const z=this.tileClipContexts_[E];z&&z.draw(R),v.draw(R),z&&R.restore(),R.globalAlpha=P,v.clear()}),h[c].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,o=r.center,s=r.resolution,a=r.rotation,c=t.size,h=Math.round(c[0]*i),m=Math.round(c[1]*i),x=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),E=e.tileCoord,R=x.getTileCoordExtent(e.wrappedTileCoord),P=x.getTileCoordExtent(E,this.tempExtent)[0]-R[0];return rP(YB(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(o,s,a,i,h,m,P))}postRender(e,t){const i=t.viewHints,r=!(i[hl.ANIMATING]||i[hl.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=o.getDeclutter(),h=c?rj[s].filter(J=>!AS.includes(J)):rj[s],m=t.viewState,v=m.rotation,x=o.getSource(),R=x.getTileGridForProjection(m.projection).getZForResolution(m.resolution,x.zDirection),P=this.renderedTiles,z=[],Q=[],Y=[],H=Yr(o);let Z=!0;for(let J=P.length-1;J>=0;--J){const $=P[J];Z=Z&&!$.getReplayState(o).dirty;const G=$.executorGroups[H].filter(ke=>ke.hasExecutors(h));if(G.length===0)continue;const oe=this.getTileRenderTransform($,t),ue=$.tileCoord[0];let xe=!1;const ge=G[0].getClipCoords(oe);let Ie=e,Me;if(ge){Me=new RP,Ie=Me.getContext();for(let ke=0,je=z.length;ke<je;++ke)if(R!==ue&&ue<Q[ke]){const Be=z[ke];Xl([ge[0],ge[3],ge[4],ge[7]],[Be[0],Be[3],Be[4],Be[7]])&&(xe||(Ie.save(),xe=!0),Ie.beginPath(),Ie.moveTo(ge[0],ge[1]),Ie.lineTo(ge[2],ge[3]),Ie.lineTo(ge[4],ge[5]),Ie.lineTo(ge[6],ge[7]),Ie.moveTo(Be[6],Be[7]),Ie.lineTo(Be[4],Be[5]),Ie.lineTo(Be[2],Be[3]),Ie.lineTo(Be[0],Be[1]),Ie.clip())}z.push(ge),Q.push(ue)}for(let ke=0,je=G.length;ke<je;++ke)G[ke].execute(e,[e.canvas.width,e.canvas.height],oe,v,r,h,t.declutter?.[c]);xe&&(Ie===e?Ie.restore():Y[J]=Me)}e.globalAlpha=a,this.ready=Z,this.tileClipContexts_=Y,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,o,s){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,h=i.length;c<h;++c)a=uS(r,e,i[c],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=uS(r,e,i,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),o=e.wantedResolution;return i.renderedTileResolution!==o||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),o=i.getRevision(),s=e.executorGroups[Yr(i)];r.renderedTileRevision=o;const a=e.wrappedTileCoord,c=a[0],h=i.getSource();let m=t.pixelRatio;const x=t.viewState.projection,E=h.getTileGridForProjection(x),R=E.getResolution(e.tileCoord[0]),P=t.pixelRatio/e.wantedResolution*R,z=E.getResolution(c),Q=e.getContext();m=Math.round(Math.max(m,P/m));const Y=h.getTilePixelSize(c,m,x);Q.canvas.width=Y[0],Q.canvas.height=Y[1];const H=m/P;if(H!==1){const G=rF(this.tmpTransform_);YB(G,H,H),Q.setTransform.apply(Q,G)}const Z=E.getTileCoordExtent(a,this.tempExtent),J=P/z,$=rF(this.tmpTransform_);YB($,J,-J),xge($,-Z[0],-Z[3]);for(let G=0,oe=s.length;G<oe;++G)s[G].execute(Q,[Q.canvas.width*H,Q.canvas.height*H],$,0,!0,qve[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class A3 extends kP{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";xs(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Yve(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Ny.PRELOAD)}getUseInterimTilesOnError(){return this.get(Ny.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Ny.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Ny.USE_INTERIM_TILES_ON_ERROR,e)}}function _9(n){return Array.isArray(n)?Math.min(...n):n}class Vve extends BP{constructor(e,t,i,r,o,s,a){let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let h=t.getExtent();h&&t.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const m=h?ym(i,h):i,v=Sf(m),x=C9(e,t,v,r),E=mJ,R=new pJ(e,t,m,c,x*E,r),P=R.calculateSourceExtent(),z=Xb(P)?null:s(P,x,o),Q=z?zi.IDLE:zi.EMPTY,Y=z?z.getPixelRatio():1;super(i,r,Y,Q),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=R,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=z,this.sourcePixelRatio_=Y,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==zi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==zi.LOADED){const t=is(this.targetExtent_)/this.targetResolution_,i=Ju(this.targetExtent_)/this.targetResolution_;this.canvas_=fJ(t,i,this.sourcePixelRatio_,_9(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==zi.IDLE){this.state=zi.LOADING,this.changed();const e=this.sourceImage_.getState();e==zi.LOADED||e==zi.ERROR?this.reproject_():(this.sourceListenerKey_=Yo(this.sourceImage_,Ir.CHANGE,t=>{const i=this.sourceImage_.getState();(i==zi.LOADED||i==zi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Ea(this.sourceListenerKey_),this.sourceListenerKey_=null}}const lM=4,_O={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class $ve extends Sm{constructor(e,t){super(e),this.image=t}}class bJ extends zx{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=KE(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const o=this.getProjection();if(!o||!r||Xy(o,r))return o&&(r=o),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Xy(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&h1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Vve(o,r,e,t,i,(s,a,c)=>this.getImageInternal(s,a,c,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const o=Hve(e,t,i,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&Fg(this.wantedExtent_,o)||Fg(this.image.getExtent(),o))&&(this.wantedResolution_&&_9(this.wantedResolution_)===s||_9(this.image.getResolution())===s)))return this.image;this.wantedProjection_=r,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new BP(o,s,i,this.loader),this.image.addEventListener(Ir.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case zi.LOADING:this.loading=!0,i=_O.IMAGELOADSTART;break;case zi.LOADED:this.loading=!1,i=_O.IMAGELOADEND;break;case zi.ERROR:this.loading=!1,i=_O.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new $ve(i,t))}}function Hve(n,e,t,i){const r=e/t,o=Sf(n),s=Ly(is(n)/r,lM),a=Ly(Ju(n)/r,lM),c=Ly((i-1)*s/2,lM),h=s+2*c,m=Ly((i-1)*a/2,lM),v=a+2*m;return Xw(o,r,0,[h,v])}const QC=[0,0,0],My=5;class r6{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,xs(vme(this.resolutions_,(r,o)=>o-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,xs(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=g1(i)),xs(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,xs(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:yP,xs(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{const s=new KP(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let o=r.minX,s=r.maxX;o<=s;++o)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,o,a])}forEachTileCoordParentTileRange(e,t,i,r){let o,s,a,c=null,h=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);h>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=jC(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(c,h,i),t(h,o))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,s=e[2]*2;return jC(o,o+1,s,s+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],o=e[1],s=e[2];if(t===r)return jC(o,s,o,s,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),h=Math.floor(o*c),m=Math.floor(s*c);if(t<r)return jC(h,h,m,m,i);const v=Math.floor(c*(o+1))-1,x=Math.floor(c*(s+1))-1;return jC(h,v,m,x,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,QC);const r=QC[1],o=QC[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,QC);const s=QC[1],a=QC[2];return jC(r,s,o,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=YA(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=YA(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*o[0]*r,a=i[1]-(e[2]+1)*o[1]*r,c=s+o[0]*r,h=a+o[1]*r;return A1(s,a,c,h,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,o){const s=this.getZForResolution(i),a=i/this.getResolution(s),c=this.getOrigin(s),h=YA(this.getTileSize(s),this.tmpSize_);let m=a*(e-c[0])/i/h[0],v=a*(c[1]-t)/i/h[1];return r?(m=Ly(m,My)-1,v=Ly(v,My)-1):(m=$5(m,My),v=$5(v,My)),fS(s,m,v,o)}getTileCoordForXYAndZ_(e,t,i,r,o){const s=this.getOrigin(i),a=this.getResolution(i),c=YA(this.getTileSize(i),this.tmpSize_);let h=(e-s[0])/a/c[0],m=(s[1]-t)/a/c[1];return r?(h=Ly(h,My)-1,m=Ly(m,My)-1):(h=$5(h,My),m=$5(m,My)),fS(i,h,m,o)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=KE(this.resolutions_,e,t||0);return Ol(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return mX(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function CJ(n){let e=n.getDefaultTileGrid();return e||(e=Jve(n),n.setDefaultTileGrid(e)),e}function Zve(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),o=o6(t);if(!zb(o,r)){const s=is(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,n.getTileCoordForCoordAndZ(r,i)}return e}function Xve(n,e,t,i){i=i!==void 0?i:"top-left";const r=_J(n,e,t);return new r6({extent:n,origin:Dme(n,i),resolutions:r,tileSize:t})}function NP(n){const e=n||{},t=e.extent||Hs("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:_J(t,e.maxZoom,e.tileSize,e.maxResolution)};return new r6(i)}function _J(n,e,t,i){e=e!==void 0?e:bX,t=YA(t!==void 0?t:yP);const r=Ju(n),o=is(n);i=i>0?i:Math.max(o/t[0],r/t[1]);const s=e+1,a=new Array(s);for(let c=0;c<s;++c)a[c]=i/Math.pow(2,c);return a}function Jve(n,e,t,i){const r=o6(n);return Xve(r,e,t,i)}function o6(n){n=Hs(n);let e=n.getExtent();if(!e){const t=180*iv.degrees/n.getMetersPerUnit();e=A1(-t,-t,t,t)}return e}class xJ extends zx{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&YA(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Yr(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,o){return Kr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:CJ(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(t),s=YA(r.getTileSize(e),this.tmpSize);return o==1?s:G0e(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=Zve(r,e,i)),Gve(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class ebe extends Sm{constructor(e,t){super(e),this.tile=t}}function MJ(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,o=e.width,s=e.height,a=t.length,c=t[0].byteLength;if(r){const x=new Array(a);for(let R=0;R<a;++R)x[R]=new ImageData(new Uint8ClampedArray(t[R]),o,s);return n(x,i).data.buffer}const h=new Uint8ClampedArray(c),m=new Array(a),v=new Array(a);for(let x=0;x<a;++x)m[x]=new Uint8ClampedArray(t[x]),v[x]=[0,0,0,0];for(let x=0;x<c;x+=4){for(let R=0;R<a;++R){const P=m[R];v[R][0]=P[x],v[R][1]=P[x+1],v[R][2]=P[x+2],v[R][3]=P[x+3]}const E=n(v,i);h[x]=E[0],h[x+1]=E[1],h[x+2]=E[2],h[x+3]=E[3]}return h.buffer}}function tbe(n,e){const i=Object.keys(n.lib||{}).map(function(o){return"const "+o+" = "+n.lib[o].toString()+";"}).concat(["const __minion__ = ("+MJ.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function nbe(n,e){const t=MJ(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}let ibe=class extends X4{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=tbe(e,this.onWorkerMessage_.bind(this,r));else i[0]=nbe(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(c){return c.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const s=e.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let c=0;c<o;++c){const h=c*a,m=[];for(let v=0,x=r.length;v<x;++v)m.push(r[v].slice(h,h+a));this.workers_[c].postMessage({buffers:m,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},m)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const o=e.inputs[0].data.length;i=new Uint8ClampedArray(o),r=new Array(t);const s=4*Math.ceil(o/4/t);for(let a=0;a<t;++a){const c=this.dataLookup_[a].buffer,h=a*s;i.set(new Uint8ClampedArray(c),h),r[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}};const oj={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class sj extends Sm{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class wJ extends bJ{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=sbe(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(Ir.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new GZ(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Ed(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:obe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Ed(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Yr(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let o=0,s=e.sources.length;o<s;++o){const a=e.sources[o],c=a instanceof zx?a:a.getSource();if(!c)continue;const h=c.getAttributions()?.(i);typeof h=="string"?r.push(h):h!==void 0&&r.push(...h)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new ibe({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const o=Sf(e);r.size[0]=Math.ceil(is(e)/t),r.size[1]=Math.ceil(Ju(e)/t),r.extent=[o[0]-r.size[0]*t/2,o[1]-r.size[1]*t/2,o[0]+r.size[0]*t/2,o[1]+r.size[1]*t/2],r.time=Date.now();const s=r.viewState;return s.center=o,s.projection=i,s.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const o=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==s||!h1(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let o=0;o<t;++o){e.layerIndex=o,e.renderTargets={};const s=rbe(this.layers_[o],e);if(s)i[o]=s;else return}const r={};this.dispatchEvent(new sj(oj.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const o=e.extent,s=e.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!h1(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const c=Math.round(is(o)/s),h=Math.round(Ju(o)/s);a=Il(c,h),this.renderedImageCanvas_=new Sye(o,s,1,a.canvas)}a.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new sj(oj.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}wJ.prototype.dispose;let tb=null;function rbe(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const o=t.renderFrame(e,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===i&&s.height===r)return s.getContext("2d").getImageData(0,0,i,r)}if(!tb)tb=Il(i,r,void 0,{willReadFrequently:!0});else{const a=tb.canvas;a.width!==i||a.height!==r?tb=Il(i,r,void 0,{willReadFrequently:!0}):tb.clearRect(0,0,i,r)}return tb.drawImage(s,0,0,i,r),tb.getImageData(0,0,i,r)}function obe(n){return n.map(function(e){return e.getLayerState()})}function sbe(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=abe(n[i]);return t}function abe(n){let e;return n instanceof zx?n instanceof xJ?e=new vJ({source:n}):n instanceof bJ&&(e=new dJ({source:n})):e=n,e}function lbe(n,e,t,i){const r=document.createElement("script"),o="olc_"+Yr(e);function s(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(c){clearTimeout(a),s(),e(c)},document.head.appendChild(r)}const ube=/\{z\}/g,cbe=/\{x\}/g,Abe=/\{y\}/g,hbe=/\{-y\}/g;function dbe(n,e,t,i,r){return n.replace(ube,e.toString()).replace(cbe,t.toString()).replace(Abe,i.toString()).replace(hbe,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function fbe(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function pbe(n,e){return(function(t,i,r){if(!t)return;let o;const s=t[0];if(e){const a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return dbe(n,s,t[1],t[2],o)})}function SJ(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=pbe(n[r],e);return mbe(i)}function mbe(n){return n.length===1?n[0]:(function(e,t,i){if(!e)return;const r=jve(e),o=Ib(r,n.length);return n[o](e,t,i)})}const xO={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class s6 extends xJ{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===s6.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Yr(t),r=t.getState();let o;r==ii.LOADING?(this.tileLoadingKeys_[i]=!0,o=xO.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=r==ii.ERROR?xO.TILELOADERROR:r==ii.LOADED?xO.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new ebe(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=fbe(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(SJ(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class gbe extends s6{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ybe,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:iJ,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Xy(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Xy(t,e)))return this.tileGrid;const i=Yr(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=CJ(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,o,s){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,o),h=c?this.tileUrlFunction(c,r,o):void 0,m=new this.tileClass(a,h!==void 0?ii.IDLE:ii.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=s,m.addEventListener(Ir.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,t,i,r,o){const s=this.getProjection();if(!s||!o||Xy(s,o))return this.getTileInternal(e,t,i,r,s||o);const a=[e,t,i],c=this.getKey(),h=this.getTileGridForProjection(s),m=this.getTileGridForProjection(o),v=this.getTileCoordForTileUrlFunction(a,o),x=new gJ(s,h,o,m,a,v,this.getTilePixelRatio(r),this.getGutter(),(E,R,P,z)=>this.getTileInternal(E,R,P,z,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return x.key=c,x}getTileInternal(e,t,i,r,o){const s=this.getKey();return this.createTile_(e,t,i,r,o,s)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Hs(e);if(i){const r=Yr(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function ybe(n,e){n.getImage().src=e}class EJ extends gbe{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Hs("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)lbe(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Hs("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const h=i5(t,i);r=Ume(e.bounds,h)}const o=o6(i),s=e.minzoom||0,a=e.maxzoom||22,c=NP({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=SJ(e.tiles,c),e.attribution&&!this.getAttributions()){const h=r!==void 0?r:o;this.setAttributions(function(m){return Xl(h,m.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class GP extends s6{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||o6(t),r=e.tileGrid||NP({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:BJ,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:rJ,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===ii.IDLE){i.setState(ii.LOADING);const r=i.wrappedTileCoord,o=this.getTileGridForProjection(t),s=o.getTileCoordExtent(r),a=r[0],c=o.getResolution(a);Zy(s,-c,s);const h=this.tileGrid,m=h.getExtent();m&&ym(s,m,s);const v=h.getZForResolution(c,this.zDirection);h.forEachTileCoord(s,v,x=>{const E=this.tileUrlFunction(x,e,t);this.sourceTiles_[E]||(this.sourceTiles_[E]=new this.tileClass(x,E?ii.IDLE:ii.EMPTY,E,this.format_,this.tileLoadFunction));const R=this.sourceTiles_[E];i.sourceTiles.push(R),this.tileKeysBySourceTileUrl_[E]||(this.tileKeysBySourceTileUrl_[E]=[]),this.tileKeysBySourceTileUrl_[E].push(i.getKey());const P=R.getState();if(P<ii.LOADED){const z=Q=>{this.handleTileChange(Q);const Y=R.getState();if(Y===ii.LOADED||Y===ii.ERROR){const H=R.getKey();H in i.errorTileKeys?R.getState()===ii.LOADED&&delete i.errorTileKeys[H]:i.loadingSourceTiles--,Y===ii.ERROR?i.errorTileKeys[H]=!0:R.removeEventListener(Ir.CHANGE,z),i.loadingSourceTiles===0&&i.setState(nv(i.errorTileKeys)?ii.LOADED:ii.ERROR)}};R.addEventListener(Ir.CHANGE,z),i.loadingSourceTiles++}P===ii.IDLE&&(R.extent=h.getTileCoordExtent(x),R.projection=t,R.resolution=h.getResolution(x[0]),R.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(x=>x.getState()===ii.ERROR)?ii.ERROR:ii.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,o=i.length;r<o;++r){const s=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,i,r,o){const s=[e,t,i];let a=this.getTileCoordForTileUrlFunction(s,o);const c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(o);if(a&&c){const x=h.getTileCoordExtent(a);Zy(x,-h.getResolution(e),x),Xl(c,x)||(a=null)}let m=!0;if(a!==null){const x=this.tileGrid,E=h.getResolution(e),R=x.getZForResolution(E,1),P=h.getTileCoordExtent(a);Zy(P,-E,P),x.forEachTileCoord(P,R,z=>{m=m&&!this.tileUrlFunction(z,r,o)})}const v=new Oye(s,m?ii.EMPTY:ii.IDLE,a,this.getSourceTiles.bind(this,r,o),this.removeSourceTiles.bind(this));return v.key=this.getKey(),v}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.getProjection();xs(r===null||Xy(r,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(m,v){return o.getOrigin(v)}),c=s.map(function(m,v){return o.getTileSize(v)}),h=bX+1;for(let m=s.length;m<h;++m)s.push(s[m-1]/2),a.push(a[m-1]),c.push(c[m-1]);i=new r6({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:c}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),o=YA(r.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function BJ(n,e){n.setLoader(function(t,i,r){XX(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function vbe(n,e){const t=n[0],i=t.width,r=t.height,o=t.data,s=new Uint8ClampedArray(o.length),a=e.resolution*2,c=i-1,h=r-1,m=[0,0,0,0],v=2*Math.PI,x=Math.PI/2,E=Math.PI*e.sunEl/180,R=Math.PI*e.sunAz/180,P=Math.cos(E),z=Math.sin(E),Q=e.highlightColor,Y=e.shadowColor,H=e.accentColor,Z=e.encoding;let J,$,G,oe,ue,xe,ge,Ie,Me,ke,je,Be,Ye,At,yt,Le,De,Ge,Te,xt,st,Tt;function Lt(Ue,Oe="mapbox"){if(Oe==="mapbox")return(Ue[0]*256*256+Ue[1]*256+Ue[2])*.1-1e4;if(Oe==="terrarium")return Ue[0]*256+Ue[1]+Ue[2]/256-32768}for($=0;$<=h;++$)for(ue=$===0?0:$-1,xe=$===h?h:$+1,J=0;J<=c;++J)G=J===0?0:J-1,oe=J===c?c:J+1,ge=($*i+G)*4,m[0]=o[ge],m[1]=o[ge+1],m[2]=o[ge+2],m[3]=o[ge+3],Ie=e.vert*Lt(m,Z),ge=($*i+oe)*4,m[0]=o[ge],m[1]=o[ge+1],m[2]=o[ge+2],m[3]=o[ge+3],Me=e.vert*Lt(m,Z),ke=(Me-Ie)/a,ge=(ue*i+J)*4,m[0]=o[ge],m[1]=o[ge+1],m[2]=o[ge+2],m[3]=o[ge+3],Ie=e.vert*Lt(m,Z),ge=(xe*i+J)*4,m[0]=o[ge],m[1]=o[ge+1],m[2]=o[ge+2],m[3]=o[ge+3],Me=e.vert*Lt(m,Z),je=(Me-Ie)/a,Ye=Math.atan2(je,-ke),Ye<0?Ye=x-Ye:Ye>x?Ye=v-Ye+x:Ye=x-Ye,Be=Math.atan(Math.sqrt(ke*ke+je*je)),Tt=z*Math.cos(Be)+P*Math.sin(Be)*Math.cos(R-Ye),At=Math.cos(Be),yt=255*Tt,Te=Math.min(Math.max(2*e.sunEl,0),1),xt=1.875-e.opacity*1.75,st=e.opacity!==.5?x*((Math.pow(xt,Be)-1)/(Math.pow(xt,x)-1)):Be,De={r:(1-At)*H.r*Te*255,g:(1-At)*H.g*Te*255,b:(1-At)*H.b*Te*255,a:(1-At)*H.a*Te*255},Le=Math.abs(((Ye+R)/Math.PI+.5)%2-1),Ge={r:(Q.r*(1-Le)+Y.r*Le)*yt,g:(Q.g*(1-Le)+Y.g*Le)*yt,b:(Q.b*(1-Le)+Y.b*Le)*yt,a:(Q.a*(1-Le)+Y.a*Le)*yt},ge=($*i+J)*4,s[ge]=De.r*(1-Le)+Ge.r,s[ge+1]=De.g*(1-Le)+Ge.g,s[ge+2]=De.b*(1-Le)+Ge.b,s[ge+3]=o[ge+3]*e.opacity*Te*Math.sin(st);return new ImageData(s,i,r)}function bbe(n,e=512){return n.getExtent()?NP({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():e0}function OJ(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function Cbe(n,e,t="",i={},r=void 0){let o,s,a,c,h=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,c=a.source||a.layers,i=a):c=t,typeof i=="string"?(o=i,a={}):(o=i.styleUrl,a=i),a.updateSource===!1&&(h=!1),r||(r=a.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:hS(o,a.accessToken),a=OJ(o,a)),new Promise(function(m,v){aJ(e,a).then(function(x){if(x.version!=8)return v(new Error("glStyle version 8 required."));if(!(n instanceof PP||n instanceof A3))return v(new Error("Can only apply to VectorLayer or VectorTileLayer"));const E=n instanceof A3?"vector":"geojson";if(c?Array.isArray(c)?s=x.layers.find(function(Z){return Z.id===c[0]}).source:s=c:(s=x.layers.find(function(Z){return Z.source&&x.sources[Z.source].type===E}).source,c=s),!s)return v(new Error(`No ${E} source found in the glStyle.`));function R(){if(!h)return Promise.resolve();if(n instanceof A3)return TJ(x.sources[s],o,a).then(function(G){const oe=n.getSource();oe?G!==oe&&(oe.setTileUrlFunction(G.getTileUrlFunction()),typeof oe.setUrls=="function"&&typeof G.getUrls=="function"&&oe.setUrls(G.getUrls()),oe.format_||(oe.format_=G.format_),oe.getAttributions()||oe.setAttributions(G.getAttributions()),oe.getTileLoadFunction()===BJ&&oe.setTileLoadFunction(G.getTileLoadFunction()),Xy(oe.getProjection(),G.getProjection())&&(oe.tileGrid=G.getTileGrid())):n.setSource(G);const ue=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&ue.getMinZoom()>0&&n.setMaxResolution(Q2(Math.max(0,ue.getMinZoom()-1e-12),ue.getResolutions()))});const Z=x.sources[s];let J=n.getSource();(!J||J.get("mapbox-source")!==Z)&&(J=PJ(Z,o,a));const $=n.getSource();return $?J!==$&&($.getAttributions()||$.setAttributions(J.getAttributions()),$.format_||($.format_=J.getFormat()),$.url_=J.getUrl()):n.setSource(J),Promise.resolve()}let P,z;const Q={},Y={};function H(){if(!z&&(!x.sprite||Q)){if(a.projection&&!r){const G=Hs(a.projection).getUnits();G!=="m"&&(r=e0.map(oe=>oe/iv[G]))}let Z;const J=n.getSource();J instanceof GP&&J.format_ instanceof hJ&&(Z=J.format_.layerName_),z=Wye(n,x,c,r,Q,Y,($,G=a.webfonts)=>Lye($,G),a.getImage,Z),n.getStyle()?R().then(m).catch(v):v(new Error(`Nothing to show for source [${s}]`))}else z?(n.setStyle(z),R().then(m).catch(v)):v(new Error("Something went wrong trying to apply style."))}if(x.sprite){const Z=Iye(x.sprite,a.accessToken,o||location.href);P=window.devicePixelRatio>=1.5?.5:1;const J=P==.5?"@2x":"";Promise.all(Z.map(function($){const G=new URL($.url);let oe=G.origin+G.pathname+J+".json"+G.search;return new Promise(function(ue,xe){gx("Sprite",oe,a).then(ue).catch(function(ge){oe=G.origin+G.pathname+".json"+G.search,gx("Sprite",oe,a).then(ue).catch(xe)})}).then(function(ue){ue===void 0&&v(new Error("No sprites found."));let xe;if(xe=G.origin+G.pathname+J+".png"+G.search,a.transformRequest){const ge=a.transformRequest(xe,"SpriteImage")||xe;(ge instanceof Request||ge instanceof Promise)&&(xe=ge)}Y[$.id]=xe;for(const ge in ue){const Ie=$.id=="default"?ge:`${$.id}:${ge}`;Q[Ie]=ue[ge]}}).catch(function(ue){v(new Error(`Sprites cannot be loaded: ${oe}: ${ue.message}`))})})).then(H).catch(v)}else H()}).catch(v)})}function IJ(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function _be(n,e){const t=n.bounds;if(t){const i=r9([t[0],t[1]],e),r=r9([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return Hs(e).getExtent()}function kJ(n,e,t){const i=new EJ({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),o=i.getTileGrid(),s=Hs(t.projection||"EPSG:3857"),a=_be(r,s),c=s.getExtent(),h=r.minzoom||0,m=r.maxzoom||22,v={attributions:i.getAttributions(),projection:s,tileGrid:new r6({origin:c?g1(c):o.getOrigin(0),extent:a||o.getExtent(),minZoom:h,resolutions:bbe(s,e.tileSize).slice(0,m+1),tileSize:o.getTileSize(0)})};return Array.isArray(r.tiles)?v.urls=r.tiles:v.url=r.tiles,v}function xbe(n,e,t,i){const r={id:n.id,type:n.type},o=n.layout||{},s=n.paint||{};r.paint=s,Mf.zoom=zP(e,t.resolutions||e0),Mf.distanceFromCenter=0;let a;const c=Vi(r,"paint","background-color",dm,i);return s["background-opacity"]!==void 0&&(a=Vi(r,"paint","background-opacity",dm,i)),o.visibility=="none"?void 0:By(c,a)}function Mbe(n,e,t){const i=document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new Lx({source:new zx({}),render(r){const o=xbe(n,r.viewState.resolution,e,t);return i.style.backgroundColor=o,i}})}function TJ(n,e,t){return new Promise(function(i,r){lJ(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=kJ(n,o,t);a.tileLoadFunction=s,a.format=new hJ({layerName:"mvt:layer"});const c=new GP(a);c.set("mapbox-source",n),i(c)}).catch(r)})}function wbe(n,e,t){const i=new A3({declutter:!0,visible:!1});return TJ(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function RJ(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Sbe(n,e,t){return new Promise(function(i,r){lJ(n,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=new EJ({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=kJ(n,o,t).tileGrid,t.projection&&(a.projection=Hs(t.projection));const c=a.getTileUrlFunction();s&&a.setTileLoadFunction(s),a.setTileUrlFunction(function(h,m,v){const x=RJ(v);let E=c(h,m,v);if(E.indexOf(x)!=-1){const R=a.getTileGrid().getTileCoordExtent(h);E=E.replace(x,R.toString())}return E}),a.set("mapbox-source",n),i(a)}).catch(function(o){r(o)})})}function DJ(n,e,t){const i=new vJ;return Sbe(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function Ebe(n,e,t){const i=DJ(n,e,t);return new dJ({source:new wJ({operationType:"image",operation:vbe,sources:[i]})})}function PJ(n,e,t){const i=t.projection?new HF({dataProjection:t.projection}):new HF,r=n.data,o={};if(typeof r=="string"){const[a]=lw(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const h=(v,x,E)=>{const R=RJ(E);return a.replace(R,`${v.join(",")}`)},m=new aw({attributions:n.attribution,format:i,loader:(v,x,E,R,P)=>{const z=typeof h=="function"?h(v,x,E):h;gx("GeoJSON",z,t).then(Q=>{const Y=m.getFormat().readFeatures(Q,{featureProjection:E});m.addFeatures(Y),R(Y)}).catch(Q=>{m.removeLoadedExtent(v),P()})},strategy:uye});return m.set("mapbox-source",n),m}const c=new aw({attributions:n.attribution,format:i,url:a,loader:(h,m,v,x,E)=>{gx("GeoJSON",a,t).then(R=>{const P=c.getFormat().readFeatures(R,{featureProjection:v});c.addFeatures(P),x(P)}).catch(R=>{c.removeLoadedExtent(h),E()})}});return c}o.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const s=new aw(Object.assign({attributions:n.attribution,format:i},o));return s.set("mapbox-source",n),s}function Bbe(n,e,t){return new PP({declutter:!0,source:PJ(n,e,t),visible:!1})}function Obe(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],Ibe(n,e,i,t))}}function Ibe(n,e,t,i){Mf.zoom=t,Mf.distanceFromCenter=0;const r=Vi(n,"paint","raster-opacity",dm,i);e.setOpacity(r)}function kbe(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=pZ(i.layers),o=n.get("mapbox-layers"),s=r.filter(function(a){return o.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});n.get("visible")!==s&&n.setVisible(s)}n.on("change",t),t()}function Tbe(n,e,t,i){const r=sJ(n),o=n.layers,s=t.type,a=t.source||IJ(o,t.ref),c=n.sources[a];let h;if(s=="background")h=Mbe(t,i,r);else if(c.type=="vector")h=wbe(c,e,i);else if(c.type=="raster")h=DJ(c,e,i),h.setVisible(t.layout?t.layout.visibility!=="none":!0),h.on("prerender",Obe(t,h,r));else if(c.type=="geojson")h=Bbe(c,e,i);else if(c.type=="raster-dem"&&t.type=="hillshade"){const v=Ebe(c,e,i);h=v,v.getSource().on("beforeoperations",function(x){const E=x.data;E.resolution=i9(i.projection||"EPSG:3857",x.resolution,Sf(x.extent),"m"),Mf.zoom=zP(x.resolution,i.resolutions||e0),Mf.distanceFromCenter=0,E.encoding=c.encoding,E.vert=5*Vi(t,"paint","hillshade-exaggeration",dm,r),E.sunAz=Vi(t,"paint","hillshade-illumination-direction",dm,r),E.sunEl=35,E.opacity=.3,E.highlightColor=Vi(t,"paint","hillshade-highlight-color",dm,r),E.shadowColor=Vi(t,"paint","hillshade-shadow-color",dm,r),E.accentColor=Vi(t,"paint","hillshade-accent-color",dm,r)}),h.setVisible(t.layout?t.layout.visibility!=="none":!0)}const m=a;return h&&h.set("mapbox-source",m),h}function aj(n,e,t,i){const r=[];let o=null;if(e instanceof e6){if(o=e.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const v=i.projection?Hs(i.projection):o.getProjection();o=new Am(Object.assign(o.getProperties(),{maxResolution:e0[0]/iv[v.getUnits()],projection:i.projection||o.getProjection()})),e.setView(o)}"center"in n&&!o.getCenter()&&o.setCenter(r9(n.center,o.getProjection())),"zoom"in n&&o.getZoom()===void 0&&o.setResolution(e0[0]/iv[o.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!o.getCenter()||o.getZoom()===void 0)&&o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const s=n.layers;let a=[],c,h,m;for(let v=0,x=s.length;v<x;++v){const E=s[v],R=E.type;if(R=="heatmap"){console.debug(`layers[${v}].type "${R}" not supported`);continue}else m=E.source||IJ(s,E.ref),(!m||m!=h)&&(a.length&&(r.push(lj(c,a,n,t,e,i)),a=[]),c=Tbe(n,t,E,i),c instanceof PP||c instanceof A3||(a=[]),h=c.get("mapbox-source")),a.push(E.id)}return r.push(lj(c,a,n,t,e,i)),Promise.all(r)}function Rbe(n,e,t={}){let i,r;if(typeof n=="string"||n instanceof HTMLElement?r=new e6({target:n}):r=n,typeof e=="string"){const o=e.startsWith("data:")?location.href:hS(e,t.accessToken);t=OJ(o,t),i=new Promise(function(s,a){aJ(e,t).then(function(c){aj(c,r,o,t).then(function(){s(r)}).catch(a)}).catch(function(c){a(new Error(`Could not load ${e}: ${c.message}`))})})}else i=new Promise(function(o,s){aj(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:hS(t.styleUrl,t.accessToken),t).then(function(){o(r)}).catch(s)});return i}function lj(n,e,t,i,r,o={}){let s=24,a=0;const c=t.layers;for(let h=0,m=c.length;h<m;++h){const v=c[h];e.indexOf(v.id)!==-1&&(s=Math.min("minzoom"in v?v.minzoom:0,s),a=Math.max("maxzoom"in v?v.maxzoom:24,a))}return new Promise(function(h,m){const v=function(){const E=n.getSource();if(!E||E.getState()==="error"){m(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in E){const R=E.getTileGrid();if(R){const P=R.getMinZoom();(s>0||P>0)&&n.setMaxResolution(Math.min(Q2(Math.max(0,s-1e-12),e0),Q2(Math.max(0,P-1e-12),R.getResolutions()))),a<24&&n.setMinResolution(Q2(a,e0))}}else s>0&&n.setMaxResolution(Q2(Math.max(0,s-1e-12),e0));E instanceof aw||E instanceof GP?Cbe(n,t,e,Object.assign({styleUrl:i},o)).then(function(){kbe(n,r),h()}).catch(m):h()};n.set("mapbox-layers",e);const x=r.getLayers();x.getArray().indexOf(n)===-1&&x.push(n),n.getSource()?v():n.once("change:source",v)})}function Ei(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="5f4719fc476214e7aff32d9043337b9c97544cf9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:185,column:9}},37:{start:{line:119,column:12},end:{line:119,column:36}},38:{start:{line:176,column:12},end:{line:176,column:31}},39:{start:{line:188,column:22},end:{line:188,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:186,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:120,column:11}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:175,column:15},end:{line:175,column:16}},loc:{start:{line:175,column:22},end:{line:177,column:11}},line:175}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:136,column:26},end:{line:136,column:59}},type:"binary-expr",locations:[{start:{line:136,column:26},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:59}}],line:136},5:{loc:{start:{line:148,column:6},end:{line:170,column:10}},type:"binary-expr",locations:[{start:{line:148,column:6},end:{line:148,column:29}},{start:{line:148,column:49},end:{line:170,column:10}}],line:148}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK;AAAC,iBAAK,iBAAiB;AAAA,UAAE;AAAA,UACnC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK;AAAC,iBAAK,YAAY;AAAA,UAAE;AAAA,UAC9B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f4719fc476214e7aff32d9043337b9c97544cf9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ei=function(){return s},s}Ei();function uj(n){return Ei().f[0]++,Ei().s[0]++,Ei().b[1][0]++,!n||(Ei().b[1][1]++,n.length<2)?(Ei().b[0][0]++,Ei().s[1]++,null):(Ei().b[0][1]++,Ei().s[2]++,te.jsx("span",{className:"maputnik-coords",children:n.map(e=>(Ei().f[1]++,Ei().s[3]++,String(e).padStart(7,""))).join(", ")}))}class Dbe extends En.Component{static defaultProps=(Ei().s[4]++,{onMapLoaded:()=>{Ei().f[2]++},onDataChange:()=>{Ei().f[3]++},onLayerSelect:()=>{Ei().f[4]++}});updateStyle;map;container=(Ei().s[5]++,null);overlay;popupContainer=(Ei().s[6]++,null);constructor(e){Ei().f[5]++,Ei().s[7]++,super(e),Ei().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},Ei().s[9]++,this.updateStyle=N4.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(Ei().f[6]++,Ei().s[10]++,this.map)Ei().b[2][1]++;else{Ei().b[2][0]++,Ei().s[11]++;return}Ei().s[12]++,this.map.getLayers().clear(),Ei().s[13]++,Rbe(this.map,e)}componentDidUpdate(e){Ei().f[7]++,Ei().s[14]++,this.props.mapStyle!==e.mapStyle?(Ei().b[3][0]++,Ei().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):Ei().b[3][1]++}componentDidMount(){Ei().f[8]++,Ei().s[16]++,this.overlay=new Bye({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(Ei().s[17]++,new e6({target:this.container,overlays:[this.overlay],view:new Am({zoom:1,center:[180,-90]})}));Ei().s[18]++,e.on("pointermove",i=>{Ei().f[9]++;const r=(Ei().s[19]++,WB(i.coordinate));Ei().s[20]++,this.setState({cursor:[r[0].toFixed(2),r[1].toFixed(2)]})}),Ei().s[21]++;const t=()=>{Ei().f[10]++;const i=(Ei().s[22]++,e.getView().getZoom()),r=(Ei().s[23]++,WB(e.getView().getCenter()));Ei().s[24]++,this.props.onChange({zoom:i,center:{lng:r[0],lat:r[1]}})};Ei().s[25]++,t(),Ei().s[26]++,e.on("moveend",t),Ei().s[27]++,e.on("postrender",i=>{Ei().f[11]++;const r=(Ei().s[28]++,WB(e.getView().getCenter()));Ei().s[29]++,this.setState({center:[r[0].toFixed(2),r[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),Ei().s[30]++,this.map=e,Ei().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(Ei().s[32]++,e=>{Ei().f[12]++,Ei().s[33]++,e.target.blur(),Ei().s[34]++,this.overlay.setPosition(void 0)});render(){Ei().f[13]++;const e=(Ei().s[35]++,this.props.t);return Ei().s[36]++,te.jsxs("div",{className:"maputnik-ol-container",children:[te.jsxs("div",{ref:t=>{Ei().f[14]++,Ei().s[37]++,this.popupContainer=t},style:{background:"black"},className:"maputnik-popup",children:[te.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:""}),te.jsx(cZ,{features:(Ei().b[4][0]++,this.state.selectedFeatures||(Ei().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),te.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(Ei().b[5][0]++,this.props.debugToolbox&&(Ei().b[5][1]++,te.jsxs("div",{className:"maputnik-ol-debug",children:[te.jsxs("div",{children:[te.jsxs("label",{children:[e("cursor:")," "]}),te.jsx("span",{children:uj(this.state.cursor)})]}),te.jsxs("div",{children:[te.jsxs("label",{children:[e("center:")," "]}),te.jsx("span",{children:uj(this.state.center)})]}),te.jsxs("div",{children:[te.jsxs("label",{children:[e("rotation:")," "]}),te.jsx("span",{children:this.state.rotation})]})]}))),te.jsx("div",{className:"maputnik-ol",ref:t=>{Ei().f[15]++,Ei().s[38]++,this.container=t},role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const Pbe=(Ei().s[39]++,Fo()(Dbe));var MO={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var cj;function Kbe(){return cj||(cj=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=r(o,i(a)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)e.call(o,a)&&o[a]&&(s=r(s,a));return s}function r(o,s){return s?o?o+" "+s:o+s:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(MO)),MO.exports}var Ube=Kbe();const c0=Su(Ube),Lbe=/("(?:[^\\"]|\\.)*")|[:,]/g;function zbe(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return(function o(s,a,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const h=JSON.stringify(s,r);if(h===void 0)return h;const m=i-a.length-c;if(h.length<=m){const v=h.replace(Lbe,(x,E)=>E||`${x} `);if(v.length<=m)return v}if(r!=null&&(s=JSON.parse(h),r=void 0),typeof s=="object"&&s!==null){const v=a+t,x=[];let E=0,R,P;if(Array.isArray(s)){R="[",P="]";const{length:z}=s;for(;E<z;E++)x.push(o(s[E],v,E===z-1?0:1)||"null")}else{R="{",P="}";const z=Object.keys(s),{length:Q}=z;for(;E<Q;E++){const Y=z[E],H=`${JSON.stringify(Y)}: `,Z=o(s[Y],v,H.length+(E===Q-1?0:1));Z!==void 0&&x.push(H+Z)}}if(x.length>0)return[R,t+x.join(`,
${v}`),P].join(`
${a}`)}return h})(n,"",0)}let x9=[],KJ=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?KJ:x9).push(t=t+n[e])})();function Fbe(n){if(n<768)return!1;for(let e=0,t=x9.length;;){let i=e+t>>1;if(n<x9[i])t=i;else if(n>=KJ[i])e=i+1;else return!0;if(e==t)return!1}}function Aj(n){return n>=127462&&n<=127487}const hj=8205;function jbe(n,e,t=!0,i=!0){return(t?UJ:Nbe)(n,e,i)}function UJ(n,e,t){if(e==n.length)return e;e&&LJ(n.charCodeAt(e))&&zJ(n.charCodeAt(e-1))&&e--;let i=wO(n,e);for(e+=dj(i);e<n.length;){let r=wO(n,e);if(i==hj||r==hj||t&&Fbe(r))e+=dj(r),i=r;else if(Aj(r)){let o=0,s=e-2;for(;s>=0&&Aj(wO(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function Nbe(n,e,t){for(;e>0;){let i=UJ(n,e-2,t);if(i<e)return i;e--}return 0}function wO(n,e){let t=n.charCodeAt(e);if(!zJ(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return LJ(i)?(t-55296<<10)+(i-56320)+65536:t}function LJ(n){return n>=56320&&n<57344}function zJ(n){return n>=55296&&n<56320}function dj(n){return n<65536?1:2}class fs{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=yx(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),Dg.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=yx(this,e,t);let i=[];return this.decompose(e,t,i,0),Dg.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new h3(this),o=new h3(e);for(let s=t,a=t;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new h3(this,e)}iterRange(e,t=this.length){return new FJ(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new jJ(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?fs.empty:e.length<=32?new Mu(e):Dg.from(Mu.split(e,[]))}}class Mu extends fs{constructor(e,t=Gbe(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((t?i:a)>=e)return new Qbe(r,a,i,s);r=a+1,i++}}decompose(e,t,i,r){let o=e<=0&&t>=this.length?this:new Mu(fj(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let s=i.pop(),a=uw(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new Mu(a,s.length+o.length));else{let c=a.length>>1;i.push(new Mu(a.slice(0,c)),new Mu(a.slice(c)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof Mu))return super.replace(e,t,i);[e,t]=yx(this,e,t);let r=uw(this.text,uw(i.text,fj(this.text,0,e)),t),o=this.length+i.length-(t-e);return r.length<=32?new Mu(r,o):Dg.from(Mu.split(r,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=yx(this,e,t);let r="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],c=o+a.length;o>e&&s&&(r+=i),e<c&&t>o&&(r+=a.slice(Math.max(0,e-o),t-o)),o=c+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let o of e)i.push(o),r+=o.length+1,i.length==32&&(t.push(new Mu(i,r)),i=[],r=-1);return r>-1&&t.push(new Mu(i,r)),t}}class Dg extends fs{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,c=i+s.lines-1;if((t?c:a)>=e)return s.lineInner(e,t,i,r);r=a+1,i=c+1}}decompose(e,t,i,r){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],c=s+a.length;if(e<=c&&t>=s){let h=r&((s<=e?1:0)|(c>=t?2:0));s>=e&&c<=t&&!h?i.push(a):a.decompose(e-s,t-s,i,h)}s=c+1}}replace(e,t,i){if([e,t]=yx(this,e,t),i.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(e>=o&&t<=a){let c=s.replace(e-o,t-o,i),h=this.lines-s.lines+c.lines;if(c.lines<h>>4&&c.lines>h>>6){let m=this.children.slice();return m[r]=c,new Dg(m,this.length-(t-e)+i.length)}return super.replace(o,a,c)}o=a+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=yx(this,e,t);let r="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],c=s+a.length;s>e&&o&&(r+=i),e<c&&t>s&&(r+=a.sliceString(e-s,t-s,i)),s=c+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Dg))return 0;let i=0,[r,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==s||o==a)return i;let c=this.children[r],h=e.children[o];if(c!=h)return i+c.scanIdentical(h,t);i+=c.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let E of e)i+=E.lines;if(i<32){let E=[];for(let R of e)R.flatten(E);return new Mu(E,t)}let r=Math.max(32,i>>5),o=r<<1,s=r>>1,a=[],c=0,h=-1,m=[];function v(E){let R;if(E.lines>o&&E instanceof Dg)for(let P of E.children)v(P);else E.lines>s&&(c>s||!c)?(x(),a.push(E)):E instanceof Mu&&c&&(R=m[m.length-1])instanceof Mu&&E.lines+R.lines<=32?(c+=E.lines,h+=E.length+1,m[m.length-1]=new Mu(R.text.concat(E.text),R.length+1+E.length)):(c+E.lines>r&&x(),c+=E.lines,h+=E.length+1,m.push(E))}function x(){c!=0&&(a.push(m.length==1?m[0]:Dg.from(m,h)),h=-1,c=m.length=0)}for(let E of e)v(E);return x(),a.length==1?a[0]:new Dg(a,t)}}fs.empty=new Mu([""],0);function Gbe(n){let e=-1;for(let t of n)e+=t.length+1;return e}function uw(n,e,t=0,i=1e9){for(let r=0,o=0,s=!0;o<n.length&&r<=i;o++){let a=n[o],c=r+a.length;c>=t&&(c>i&&(a=a.slice(0,i-r)),r<t&&(a=a.slice(t-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=c+1}return e}function fj(n,e,t){return uw(n,[""],e,t)}class h3{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Mu?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],o=this.offsets[i],s=o>>1,a=r instanceof Mu?r.text.length:r.children.length;if(s==(t>0?a:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Mu){let c=r.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=r.children[s+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof Mu?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class FJ{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new h3(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class jJ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(fs.prototype[Symbol.iterator]=function(){return this.iter()},h3.prototype[Symbol.iterator]=FJ.prototype[Symbol.iterator]=jJ.prototype[Symbol.iterator]=function(){return this});class Qbe{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function yx(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function mA(n,e,t=!0,i=!0){return jbe(n,e,t,i)}function Wbe(n){return n>=56320&&n<57344}function qbe(n){return n>=55296&&n<56320}function xd(n,e){let t=n.charCodeAt(e);if(!qbe(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return Wbe(i)?(t-55296<<10)+(i-56320)+65536:t}function QP(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Pg(n){return n<65536?1:2}const M9=/\r\n?|\n/;var Oh=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(Oh||(Oh={}));class t0{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(i,r,o),r+=o):r+=s,i+=o}}iterChangedRanges(e,t=!1){w9(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new t0(e)}composeDesc(e){return this.empty?e:e.empty?this:NJ(this,e)}mapDesc(e,t=!1){return e.empty?this:S9(this,e,t)}mapPos(e,t=-1,i=Oh.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],c=this.sections[s++],h=r+a;if(c<0){if(h>e)return o+(e-r);o+=a}else{if(i!=Oh.Simple&&h>=e&&(i==Oh.TrackDel&&r<e&&h>e||i==Oh.TrackBefore&&r<e||i==Oh.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!a)return e==r||t<0?o:o+c;o+=c}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let o=this.sections[i++],s=this.sections[i++],a=r+o;if(s>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new t0(e)}static create(e){return new t0(e)}}class _c extends t0{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return w9(this,(t,i,r,o,s)=>e=e.replace(r,r+(i-t),s),!1),e}mapDesc(e,t=!1){return S9(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,o=0;r<t.length;r+=2){let s=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=s;let c=r>>1;for(;i.length<c;)i.push(fs.empty);i.push(s?e.slice(o,o+s):fs.empty)}o+=s}return new _c(t,i)}compose(e){return this.empty?e:e.empty?this:NJ(this,e,!0)}map(e,t=!1){return e.empty?this:S9(this,e,t,!0)}iterChanges(e,t=!1){w9(this,e,t)}get desc(){return t0.create(this.sections)}filter(e){let t=[],i=[],r=[],o=new s4(this);e:for(let s=0,a=0;;){let c=s==e.length?1e9:e[s++];for(;a<c||a==c&&o.len==0;){if(o.done)break e;let m=Math.min(o.len,c-a);QA(r,m,-1);let v=o.ins==-1?-1:o.off==0?o.ins:0;QA(t,m,v),v>0&&Gy(i,t,o.text),o.forward(m),a+=m}let h=e[s++];for(;a<h;){if(o.done)break e;let m=Math.min(o.len,h-a);QA(t,m,-1),QA(r,m,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(m),a+=m}}return{changes:new _c(t,i),filtered:t0.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],o=[],s=0,a=null;function c(m=!1){if(!m&&!r.length)return;s<t&&QA(r,t-s,-1);let v=new _c(r,o);a=a?a.compose(v.map(a)):v,r=[],o=[],s=0}function h(m){if(Array.isArray(m))for(let v of m)h(v);else if(m instanceof _c){if(m.length!=t)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${t})`);c(),a=a?a.compose(m.map(a)):m}else{let{from:v,to:x=v,insert:E}=m;if(v>x||v<0||x>t)throw new RangeError(`Invalid change range ${v} to ${x} (in doc of length ${t})`);let R=E?typeof E=="string"?fs.of(E.split(i||M9)):E:fs.empty,P=R.length;if(v==x&&P==0)return;v<s&&c(),v>s&&QA(r,v-s,-1),QA(r,x-v,P),Gy(o,r,R),s=x}}return h(e),c(!a),a}static empty(e){return new _c(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<r;)i.push(fs.empty);i[r]=fs.of(o.slice(1)),t.push(o[0],i[r].length)}}}return new _c(t,i)}static createSet(e,t){return new _c(e,t)}}function QA(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:r>=0&&e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function Gy(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(fs.empty);n.push(t)}}function w9(n,e,t){let i=n.inserted;for(let r=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],c=n.sections[s++];if(c<0)r+=a,o+=a;else{let h=r,m=o,v=fs.empty;for(;h+=a,m+=c,c&&i&&(v=v.append(i[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],c=n.sections[s++];e(r,h,o,m,v),r=h,o=m}}}function S9(n,e,t,i=!1){let r=[],o=i?[]:null,s=new s4(n),a=new s4(e);for(let c=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(s.ins==-1&&a.ins==-1){let h=Math.min(s.len,a.len);QA(r,h,-1),s.forward(h),a.forward(h)}else if(a.ins>=0&&(s.ins<0||c==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let h=a.len;for(QA(r,a.ins,-1);h;){let m=Math.min(s.len,h);s.ins>=0&&c<s.i&&s.len<=m&&(QA(r,0,s.ins),o&&Gy(o,r,s.text),c=s.i),s.forward(m),h-=m}a.next()}else if(s.ins>=0){let h=0,m=s.len;for(;m;)if(a.ins==-1){let v=Math.min(m,a.len);h+=v,m-=v,a.forward(v)}else if(a.ins==0&&a.len<m)m-=a.len,a.next();else break;QA(r,h,c<s.i?s.ins:0),o&&c<s.i&&Gy(o,r,s.text),c=s.i,s.forward(s.len-m)}else{if(s.done&&a.done)return o?_c.createSet(r,o):t0.create(r);throw new Error("Mismatched change set lengths")}}}function NJ(n,e,t=!1){let i=[],r=t?[]:null,o=new s4(n),s=new s4(e);for(let a=!1;;){if(o.done&&s.done)return r?_c.createSet(i,r):t0.create(i);if(o.ins==0)QA(i,o.len,0,a),o.next();else if(s.len==0&&!s.done)QA(i,0,s.ins,a),r&&Gy(r,i,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,s.len),h=i.length;if(o.ins==-1){let m=s.ins==-1?-1:s.off?0:s.ins;QA(i,c,m,a),r&&m&&Gy(r,i,s.text)}else s.ins==-1?(QA(i,o.off?0:o.len,c,a),r&&Gy(r,i,o.textBit(c))):(QA(i,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&Gy(r,i,s.text));a=(o.ins>c||s.ins>=0&&s.len>c)&&(a||i.length>h),o.forward2(c),s.forward(c)}}}}class s4{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?fs.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?fs.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class yb{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new yb(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return wn.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return wn.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return wn.range(e.anchor,e.head)}static create(e,t,i){return new yb(e,t,i)}}class wn{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:wn.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new wn([this.main],0)}addRange(e,t=!0){return wn.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,wn.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new wn(e.ranges.map(t=>yb.fromJSON(t)),e.main)}static single(e,t=e){return new wn([wn.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=i:o.from<i)return wn.normalized(e.slice(),t);i=o.to}return new wn(e,t)}static cursor(e,t=0,i,r){return yb.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,t,i,r){let o=(i??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?yb.create(t,e,48|o):yb.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((r,o)=>r.from-o.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let o=e[r],s=e[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,c=Math.max(o.to,s.to);r<=t&&t--,e.splice(--r,2,o.anchor>o.head?wn.range(c,a):wn.range(a,c))}}return new wn(e,t)}}function GJ(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let WP=0;class Bi{constructor(e,t,i,r,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=WP++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Bi(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:qP),!!e.static,e.enables)}of(e){return new cw([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new cw(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new cw(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function qP(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class cw{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=WP++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,c=!1,h=!1,m=[];for(let v of this.dependencies)v=="doc"?c=!0:v=="selection"?h=!0:(((t=e[v.id])!==null&&t!==void 0?t:1)&1)==0&&m.push(e[v.id]);return{create(v){return v.values[s]=i(v),1},update(v,x){if(c&&x.docChanged||h&&(x.docChanged||x.selection)||E9(v,m)){let E=i(v);if(a?!pj(E,v.values[s],r):!r(E,v.values[s]))return v.values[s]=E,1}return 0},reconfigure:(v,x)=>{let E,R=x.config.address[o];if(R!=null){let P=mS(x,R);if(this.dependencies.every(z=>z instanceof Bi?x.facet(z)===v.facet(z):z instanceof Sc?x.field(z,!1)==v.field(z,!1):!0)||(a?pj(E=i(v),P,r):r(E=i(v),P)))return v.values[s]=P,0}else E=i(v);return v.values[s]=E,1}}}}function pj(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function E9(n,e){let t=!1;for(let i of e)d3(n,i)&1&&(t=!0);return t}function Ybe(n,e,t){let i=t.map(c=>n[c.id]),r=t.map(c=>c.type),o=i.filter(c=>!(c&1)),s=n[e.id]>>1;function a(c){let h=[];for(let m=0;m<i.length;m++){let v=mS(c,i[m]);if(r[m]==2)for(let x of v)h.push(x);else h.push(v)}return e.combine(h)}return{create(c){for(let h of i)d3(c,h);return c.values[s]=a(c),1},update(c,h){if(!E9(c,o))return 0;let m=a(c);return e.compare(m,c.values[s])?0:(c.values[s]=m,1)},reconfigure(c,h){let m=E9(c,i),v=h.config.facets[e.id],x=h.facet(e);if(v&&!m&&qP(t,v))return c.values[s]=x,0;let E=a(c);return e.compare(E,x)?(c.values[s]=x,0):(c.values[s]=E,1)}}}const uM=Bi.define({static:!0});class Sc{constructor(e,t,i,r,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new Sc(WP++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(uM).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let o=i.values[t],s=this.updateF(o,r);return this.compareF(o,s)?0:(i.values[t]=s,1)},reconfigure:(i,r)=>{let o=i.facet(uM),s=r.facet(uM),a;return(a=o.find(c=>c.field==this))&&a!=s.find(c=>c.field==this)?(i.values[t]=a.create(i),1):r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,uM.of({field:this,create:e})]}get extension(){return this}}const ub={lowest:4,low:3,default:2,high:1,highest:0};function m2(n){return e=>new QJ(e,n)}const nC={highest:m2(ub.highest),high:m2(ub.high),default:m2(ub.default),low:m2(ub.low),lowest:m2(ub.lowest)};class QJ{constructor(e,t){this.inner=e,this.prec=t}}class d5{of(e){return new B9(this,e)}reconfigure(e){return d5.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class B9{constructor(e,t){this.compartment=e,this.inner=t}}class pS{constructor(e,t,i,r,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],o=Object.create(null),s=new Map;for(let x of Vbe(e,t,s))x instanceof Sc?r.push(x):(o[x.facet.id]||(o[x.facet.id]=[])).push(x);let a=Object.create(null),c=[],h=[];for(let x of r)a[x.id]=h.length<<1,h.push(E=>x.slot(E));let m=i?.config.facets;for(let x in o){let E=o[x],R=E[0].facet,P=m&&m[x]||[];if(E.every(z=>z.type==0))if(a[R.id]=c.length<<1|1,qP(P,E))c.push(i.facet(R));else{let z=R.combine(E.map(Q=>Q.value));c.push(i&&R.compare(z,i.facet(R))?i.facet(R):z)}else{for(let z of E)z.type==0?(a[z.id]=c.length<<1|1,c.push(z.value)):(a[z.id]=h.length<<1,h.push(Q=>z.dynamicSlot(Q)));a[R.id]=h.length<<1,h.push(z=>Ybe(z,R,E))}}let v=h.map(x=>x(a));return new pS(e,s,v,a,c,o)}}function Vbe(n,e,t){let i=[[],[],[],[],[]],r=new Map;function o(s,a){let c=r.get(s);if(c!=null){if(c<=a)return;let h=i[c].indexOf(s);h>-1&&i[c].splice(h,1),s instanceof B9&&t.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let h of s)o(h,a);else if(s instanceof B9){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(s.compartment)||s.inner;t.set(s.compartment,h),o(h,a)}else if(s instanceof QJ)o(s.inner,s.prec);else if(s instanceof Sc)i[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof cw)i[a].push(s),s.facet.extensions&&o(s.facet.extensions,ub.default);else{let h=s.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,a)}}return o(n,ub.default),i.reduce((s,a)=>s.concat(a))}function d3(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function mS(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const WJ=Bi.define(),O9=Bi.define({combine:n=>n.some(e=>e),static:!0}),qJ=Bi.define({combine:n=>n.length?n[0]:void 0,static:!0}),YJ=Bi.define(),VJ=Bi.define(),$J=Bi.define(),HJ=Bi.define({combine:n=>n.length?n[0]:!1});class v1{constructor(e,t){this.type=e,this.value=t}static define(){return new $be}}class $be{of(e){return new v1(this,e)}}class Hbe{constructor(e){this.map=e}of(e){return new ro(this,e)}}class ro{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ro(this.type,t)}is(e){return this.type==e}static define(e={}){return new Hbe(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let o=r.map(t);o&&i.push(o)}return i}}ro.reconfigure=ro.define();ro.appendConfig=ro.define();class wc{constructor(e,t,i,r,o,s){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&GJ(i,t.newLength),o.some(a=>a.type==wc.time)||(this.annotations=o.concat(wc.time.of(Date.now())))}static create(e,t,i,r,o,s){return new wc(e,t,i,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(wc.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}wc.time=v1.define();wc.userEvent=v1.define();wc.addToHistory=v1.define();wc.remote=v1.define();function Zbe(n,e){let t=[];for(let i=0,r=0;;){let o,s;if(i<n.length&&(r==e.length||e[r]>=n[i]))o=n[i++],s=n[i++];else if(r<e.length)o=e[r++],s=e[r++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function ZJ(n,e,t){var i;let r,o,s;return t?(r=e.changes,o=_c.empty(e.changes.length),s=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:ro.mapEffects(n.effects,r).concat(ro.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function I9(n,e,t){let i=e.selection,r=W_(e.annotations);return e.userEvent&&(r=r.concat(wc.userEvent.of(e.userEvent))),{changes:e.changes instanceof _c?e.changes:_c.of(e.changes||[],t,n.facet(qJ)),selection:i&&(i instanceof wn?i:wn.single(i.anchor,i.head)),effects:W_(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function XJ(n,e,t){let i=I9(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;i=ZJ(i,I9(n,e[o],s?i.changes.newLength:n.doc.length),s)}let r=wc.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Jbe(t?Xbe(r):r)}function Xbe(n){let e=n.startState,t=!0;for(let r of e.facet(YJ)){let o=r(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:Zbe(t,o))}if(t!==!0){let r,o;if(t===!1)o=n.changes.invertedDesc,r=_c.empty(e.doc.length);else{let s=n.changes.filter(t);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=wc.create(e,r,n.selection&&n.selection.map(o),ro.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(VJ);for(let r=i.length-1;r>=0;r--){let o=i[r](n);o instanceof wc?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof wc?n=o[0]:n=XJ(e,W_(o),!1)}return n}function Jbe(n){let e=n.startState,t=e.facet($J),i=n;for(let r=t.length-1;r>=0;r--){let o=t[r](n);o&&Object.keys(o).length&&(i=ZJ(i,I9(e,o,n.changes.newLength),!0))}return i==n?n:wc.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const eCe=[];function W_(n){return n==null?eCe:Array.isArray(n)?n:[n]}var pl=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(pl||(pl={}));const tCe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let k9;try{k9=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function nCe(n){if(k9)return k9.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||tCe.test(t)))return!0}return!1}function iCe(n){return e=>{if(!/\S/.test(e))return pl.Space;if(nCe(e))return pl.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return pl.Word;return pl.Other}}class ds{constructor(e,t,i,r,o,s){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)d3(this,a<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return d3(this,i),mS(this,i)}update(...e){return XJ(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let a of e.effects)a.is(d5.reconfigure)?(t&&(r=new Map,t.compartments.forEach((c,h)=>r.set(h,c)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(ro.reconfigure)?(t=null,i=a.value):a.is(ro.appendConfig)&&(t=null,i=W_(i).concat(a.value));let o;t?o=e.startState.values.slice():(t=pS.resolve(i,r,this),o=new ds(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,h)=>h.reconfigure(c,this),null).values);let s=e.startState.facet(O9)?e.newSelection:e.newSelection.asSingle();new ds(t,e.newDoc,s,o,(a,c)=>c.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:wn.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),o=[i.range],s=W_(i.effects);for(let a=1;a<t.ranges.length;a++){let c=e(t.ranges[a]),h=this.changes(c.changes),m=h.map(r);for(let x=0;x<a;x++)o[x]=o[x].map(m);let v=r.mapDesc(h,!0);o.push(c.range.map(v)),r=r.compose(m),s=ro.mapEffects(s,m).concat(ro.mapEffects(W_(c.effects),v))}return{changes:r,selection:wn.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof _c?e:_c.of(e,this.doc.length,this.facet(ds.lineSeparator))}toText(e){return fs.of(e.split(this.facet(ds.lineSeparator)||M9))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(d3(this,t),mS(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Sc&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let s=i[o],a=e[o];r.push(s.init(c=>s.spec.fromJSON(a,c)))}}return ds.create({doc:e.doc,selection:wn.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=pS.resolve(e.extensions||[],new Map),i=e.doc instanceof fs?e.doc:fs.of((e.doc||"").split(t.staticFacet(ds.lineSeparator)||M9)),r=e.selection?e.selection instanceof wn?e.selection:wn.single(e.selection.anchor,e.selection.head):wn.single(0);return GJ(r,i.length),t.staticFacet(O9)||(r=r.asSingle()),new ds(t,i,r,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(ds.tabSize)}get lineBreak(){return this.facet(ds.lineSeparator)||`
`}get readOnly(){return this.facet(HJ)}phrase(e,...t){for(let i of this.facet(ds.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let o of this.facet(WJ))for(let s of o(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&r.push(s[e]);return r}charCategorizer(e){return iCe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-i,a=e-i;for(;s>0;){let c=mA(t,s,!1);if(o(t.slice(c,s))!=pl.Word)break;s=c}for(;a<r;){let c=mA(t,a);if(o(t.slice(a,c))!=pl.Word)break;a=c}return s==a?null:wn.range(s+i,a+i)}}ds.allowMultipleSelections=O9;ds.tabSize=Bi.define({combine:n=>n.length?n[0]:4});ds.lineSeparator=qJ;ds.readOnly=HJ;ds.phrases=Bi.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});ds.languageData=WJ;ds.changeFilter=YJ;ds.transactionFilter=VJ;ds.transactionExtender=$J;d5.reconfigure=ro.define();function Bm(n,e,t={}){let i={};for(let r of n)for(let o of Object.keys(r)){let s=r[o],a=i[o];if(a===void 0)i[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Gb{eq(e){return this==e}range(e,t=e){return T9.create(e,t,this)}}Gb.prototype.startSide=Gb.prototype.endSide=0;Gb.prototype.point=!1;Gb.prototype.mapMode=Oh.TrackDel;let T9=class JJ{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new JJ(e,t,i)}};function R9(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class YP{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let o=i?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let c=s+a>>1,h=o[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==s)return h>=0?s:a;h>=0?a=c:s=c+1}}between(e,t,i,r){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,o);o<s;o++)if(r(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],r=[],o=[],s=-1,a=-1;for(let c=0;c<this.value.length;c++){let h=this.value[c],m=this.from[c]+e,v=this.to[c]+e,x,E;if(m==v){let R=t.mapPos(m,h.startSide,h.mapMode);if(R==null||(x=E=R,h.startSide!=h.endSide&&(E=t.mapPos(m,h.endSide),E<x)))continue}else if(x=t.mapPos(m,h.startSide),E=t.mapPos(v,h.endSide),x>E||x==E&&h.startSide>0&&h.endSide<=0)continue;(E-x||h.endSide-h.startSide)<0||(s<0&&(s=x),h.point&&(a=Math.max(a,E-x)),i.push(h),r.push(x-s),o.push(E-s))}return{mapped:i.length?new YP(r,o,i,a):null,pos:s}}}class Vo{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new Vo(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(i&&(t=t.slice().sort(R9)),this.isEmpty)return t.length?Vo.of(t):this;let a=new eee(this,null,-1).goto(0),c=0,h=[],m=new f1;for(;a.value||c<t.length;)if(c<t.length&&(a.from-t[c].from||a.startSide-t[c].value.startSide)>=0){let v=t[c++];m.addInner(v.from,v.to,v.value)||h.push(v)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(a.chunkIndex)<t[c].from)&&(!s||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&m.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||r>a.to||o<a.from||s(a.from,a.to,a.value))&&(m.addInner(a.from,a.to,a.value)||h.push(T9.create(a.from,a.to,a.value))),a.next());return m.finishInner(this.nextLayer.isEmpty&&!h.length?Vo.empty:this.nextLayer.update({add:h,filter:s,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],c=this.chunk[s],h=e.touchesRange(a,a+c.length);if(h===!1)r=Math.max(r,c.maxPoint),t.push(c),i.push(e.mapPos(a));else if(h===!0){let{mapped:m,pos:v}=c.map(a,e);m&&(r=Math.max(r,m.maxPoint),t.push(m),i.push(v))}}let o=this.nextLayer.map(e);return t.length==0?o:new Vo(i,t,o||Vo.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return a4.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return a4.from(e).goto(t)}static compare(e,t,i,r,o=-1){let s=e.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),a=t.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),c=mj(s,a,i),h=new g2(s,c,o),m=new g2(a,c,o);i.iterGaps((v,x,E)=>gj(h,v,m,x,E,r)),i.empty&&i.length==0&&gj(h,0,m,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=999999999);let o=e.filter(m=>!m.isEmpty&&t.indexOf(m)<0),s=t.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=mj(o,s),c=new g2(o,a,0).goto(i),h=new g2(s,a,0).goto(i);for(;;){if(c.to!=h.to||!D9(c.active,h.active)||c.point&&(!h.point||!c.point.eq(h.point)))return!1;if(c.to>r)return!0;c.next(),h.next()}}static spans(e,t,i,r,o=-1){let s=new g2(e,null,o).goto(t),a=t,c=s.openStart;for(;;){let h=Math.min(s.to,i);if(s.point){let m=s.activeForPoint(s.to),v=s.pointFrom<t?m.length+1:s.point.startSide<0?m.length:Math.min(m.length,c);r.point(a,h,s.point,m,v,s.pointRank),c=Math.min(s.openEnd(h),m.length)}else h>a&&(r.span(a,h,s.active,c),c=s.openEnd(h));if(s.to>i)return c+(s.point&&s.to>i?1:0);a=s.to,s.next()}}static of(e,t=!1){let i=new f1;for(let r of e instanceof T9?[e]:t?rCe(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Vo.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Vo.empty;r=r.nextLayer)t=new Vo(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Vo.empty=new Vo([],[],null,-1);function rCe(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(R9(e,i)>0)return n.slice().sort(R9);e=i}return n}Vo.empty.nextLayer=Vo.empty;class f1{finishChunk(e){this.chunks.push(new YP(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new f1)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Vo.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Vo.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function mj(n,e,t){let i=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&i.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=i.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!t?.touchesRange(a,a+o.chunk[s].length)&&r.add(o.chunk[s])}return r}class eee{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class a4{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new eee(s,t,i,o));return r.length==1?r[0]:new a4(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)SO(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)SO(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),SO(this.heap,0)}}}function SO(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class g2{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=a4.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){cM(this.active,e),cM(this.activeTo,e),cM(this.activeRank,e),this.minActive=yj(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;AM(this.active,t,i),AM(this.activeTo,t,r),AM(this.activeRank,t,o),e&&AM(e,t,this.cursor.from),this.minActive=yj(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&cM(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function gj(n,e,t,i,r,o){n.goto(e),t.goto(i);let s=i+r,a=i,c=i-e;for(;;){let h=n.to+c-t.to,m=h||n.endSide-t.endSide,v=m<0?n.to+c:t.to,x=Math.min(v,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&D9(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(a,x,n.point,t.point):x>a&&!D9(n.active,t.active)&&o.compareRange(a,x,n.active,t.active),v>s)break;(h||n.openEnd!=t.openEnd)&&o.boundChange&&o.boundChange(v),a=v,m<=0&&n.next(),m>=0&&t.next()}}function D9(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function cM(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function AM(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function yj(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function Fx(n,e,t=n.length){let i=0;for(let r=0;r<t&&r<n.length;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=mA(n,r));return i}function P9(n,e,t,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==n.length)break;o+=n.charCodeAt(r)==9?t-o%t:1,r=mA(n,r)}return i===!0?-1:n.length}const K9="",vj=typeof Symbol>"u"?"__"+K9:Symbol.for(K9),U9=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),bj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class rv{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,c,h){let m=[],v=/^@(\w+)\b/.exec(s[0]),x=v&&v[1]=="keyframes";if(v&&a==null)return c.push(s[0]+";");for(let E in a){let R=a[E];if(/&/.test(E))o(E.split(/,\s*/).map(P=>s.map(z=>P.replace(/&/,z))).reduce((P,z)=>P.concat(z)),R,c);else if(R&&typeof R=="object"){if(!v)throw new RangeError("The value of a property ("+E+") should be a primitive value.");o(r(E),R,m,x)}else R!=null&&m.push(E.replace(/_.*/,"").replace(/[A-Z]/g,P=>"-"+P.toLowerCase())+": "+R+";")}(m.length||x)&&c.push((i&&!v&&!h?s.map(i):s).join(", ")+" {"+m.join(" ")+"}")}for(let s in e)o(r(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=bj[vj]||1;return bj[vj]=e+1,K9+e.toString(36)}static mount(e,t,i){let r=e[U9],o=i&&i.nonce;r?o&&r.setNonce(o):r=new oCe(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let Cj=new Map;class oCe{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let o=Cj.get(i);if(o)return e[U9]=o;this.sheet=new r.CSSStyleSheet,Cj.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[U9]=this}mount(e,t){let i=this.sheet,r=0,o=0;for(let s=0;s<e.length;s++){let a=e[s],c=this.modules.indexOf(a);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,a),i)for(let h=0;h<a.rules.length;h++)i.insertRule(a.rules[h],r++)}else{for(;o<c;)r+=this.modules[o++].rules.length;r+=a.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let s="";for(let c=0;c<this.modules.length;c++)s+=this.modules[c].getRules()+`
`;this.styleTag.textContent=s;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ov={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l4={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},sCe=typeof navigator<"u"&&/Mac/.test(navigator.platform),aCe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var fA=0;fA<10;fA++)ov[48+fA]=ov[96+fA]=String(fA);for(var fA=1;fA<=24;fA++)ov[fA+111]="F"+fA;for(var fA=65;fA<=90;fA++)ov[fA]=String.fromCharCode(fA+32),l4[fA]=String.fromCharCode(fA);for(var EO in ov)l4.hasOwnProperty(EO)||(l4[EO]=ov[EO]);function lCe(n){var e=sCe&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||aCe&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?l4:ov)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function wa(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)tee(n,arguments[e]);return n}function tee(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)tee(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let Eh=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},L9=typeof document<"u"?document:{documentElement:{style:{}}};const z9=/Edge\/(\d+)/.exec(Eh.userAgent),nee=/MSIE \d/.test(Eh.userAgent),F9=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Eh.userAgent),a6=!!(nee||F9||z9),_j=!a6&&/gecko\/(\d+)/i.test(Eh.userAgent),BO=!a6&&/Chrome\/(\d+)/.exec(Eh.userAgent),uCe="webkitFontSmoothing"in L9.documentElement.style,j9=!a6&&/Apple Computer/.test(Eh.vendor),xj=j9&&(/Mobile\/\w+/.test(Eh.userAgent)||Eh.maxTouchPoints>2);var yi={mac:xj||/Mac/.test(Eh.platform),windows:/Win/.test(Eh.platform),linux:/Linux|X11/.test(Eh.platform),ie:a6,ie_version:nee?L9.documentMode||6:F9?+F9[1]:z9?+z9[1]:0,gecko:_j,gecko_version:_j?+(/Firefox\/(\d+)/.exec(Eh.userAgent)||[0,0])[1]:0,chrome:!!BO,chrome_version:BO?+BO[1]:0,ios:xj,android:/Android\b/.test(Eh.userAgent),webkit_version:uCe?+(/\bAppleWebKit\/(\d+)/.exec(Eh.userAgent)||[0,0])[1]:0,safari:j9,safari_version:j9?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Eh.userAgent)||[0,0])[1]:0,tabSize:L9.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function u4(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function N9(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Aw(n,e){if(!e.anchorNode)return!1;try{return N9(n,e.anchorNode)}catch{return!1}}function c4(n){return n.nodeType==3?Wb(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function f3(n,e,t,i){return t?Mj(n,e,t,i,-1)||Mj(n,e,t,i,1):!1}function Qb(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function gS(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function Mj(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:i0(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Qb(n)+(r<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?i0(n):0}else return!1}}function i0(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function l6(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function cCe(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function iee(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function ACe(n,e,t,i,r,o,s,a){let c=n.ownerDocument,h=c.defaultView||window;for(let m=n,v=!1;m&&!v;)if(m.nodeType==1){let x,E=m==c.body,R=1,P=1;if(E)x=cCe(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(v=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let Y=m.getBoundingClientRect();({scaleX:R,scaleY:P}=iee(m,Y)),x={left:Y.left,right:Y.left+m.clientWidth*R,top:Y.top,bottom:Y.top+m.clientHeight*P}}let z=0,Q=0;if(r=="nearest")e.top<x.top?(Q=e.top-(x.top+s),t>0&&e.bottom>x.bottom+Q&&(Q=e.bottom-x.bottom+s)):e.bottom>x.bottom&&(Q=e.bottom-x.bottom+s,t<0&&e.top-Q<x.top&&(Q=e.top-(x.top+s)));else{let Y=e.bottom-e.top,H=x.bottom-x.top;Q=(r=="center"&&Y<=H?e.top+Y/2-H/2:r=="start"||r=="center"&&t<0?e.top-s:e.bottom-H+s)-x.top}if(i=="nearest"?e.left<x.left?(z=e.left-(x.left+o),t>0&&e.right>x.right+z&&(z=e.right-x.right+o)):e.right>x.right&&(z=e.right-x.right+o,t<0&&e.left<x.left+z&&(z=e.left-(x.left+o))):z=(i=="center"?e.left+(e.right-e.left)/2-(x.right-x.left)/2:i=="start"==a?e.left-o:e.right-(x.right-x.left)+o)-x.left,z||Q)if(E)h.scrollBy(z,Q);else{let Y=0,H=0;if(Q){let Z=m.scrollTop;m.scrollTop+=Q/P,H=(m.scrollTop-Z)*P}if(z){let Z=m.scrollLeft;m.scrollLeft+=z/R,Y=(m.scrollLeft-Z)*R}e={left:e.left-Y,top:e.top-H,right:e.right-Y,bottom:e.bottom-H},Y&&Math.abs(Y-z)<1&&(i="nearest"),H&&Math.abs(H-Q)<1&&(r="nearest")}if(E)break;(e.top<x.top||e.bottom>x.bottom||e.left<x.left||e.right>x.right)&&(e={left:Math.max(e.left,x.left),right:Math.min(e.right,x.right),top:Math.max(e.top,x.top),bottom:Math.min(e.bottom,x.bottom)}),m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function hCe(n){let e=n.ownerDocument,t,i;for(let r=n.parentNode;r&&!(r==e.body||t&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:i}}class dCe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?i0(t):0),i,Math.min(e.focusOffset,i?i0(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let ob=null;yi.safari&&yi.safari_version>=26&&(ob=!1);function ree(n){if(n.setActive)return n.setActive();if(ob)return n.focus(ob);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(ob==null?{get preventScroll(){return ob={preventScroll:!0},!0}}:void 0),!ob){ob=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],o=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let wj;function Wb(n,e,t=e){let i=wj||(wj=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function q_(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,n.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function fCe(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function oee(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function pCe(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,i0(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=i0(t))}else{if(t==n)return!0;i=Qb(t),t=t.parentNode}}function see(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function aee(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=i0(t)}else if(t.parentNode&&!gS(t))i=Qb(t),t=t.parentNode;else return null}}function lee(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!gS(t))i=Qb(t)+1,t=t.parentNode;else return null}}class qA{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new qA(e.parentNode,Qb(e),t)}static after(e,t){return new qA(e.parentNode,Qb(e)+1,t)}}const VP=[];class ca{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,o;for(let s of this.children){if(s.flags&7){if(!s.dom&&(o=r?r.nextSibling:i.firstChild)){let a=ca.get(o);(!a||!a.parent&&a.canReuseDOM(s))&&s.reuseDOM(o)}s.sync(e,t),s.flags&=-8}if(o=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=s.dom&&(t.written=!0),s.dom.parentNode==i)for(;o&&o!=s.dom;)o=Sj(o);else i.insertBefore(s.dom,o);r=s.dom}for(o=r?r.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=Sj(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=i0(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?r=-1:r=1),e=o}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ca.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==i)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,o=-1,s=-1,a=-1;for(let c=0,h=i,m=i;c<this.children.length;c++){let v=this.children[c],x=h+v.length;if(h<e&&x>t)return v.domBoundsAround(e,t,h);if(x>=e&&r==-1&&(r=c,o=h),h>t&&v.dom.parentNode==this.dom){s=c,a=m;break}m=x,h=x+v.breakAfter}return{from:o,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=VP){this.markDirty();for(let r=e;r<t;r++){let o=this.children[r];o.parent==this&&i.indexOf(o)<0&&o.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new uee(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,o,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ca.prototype.breakAfter=0;function Sj(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class uee{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function cee(n,e,t,i,r,o,s,a,c){let{children:h}=n,m=h.length?h[e]:null,v=o.length?o[o.length-1]:null,x=v?v.breakAfter:s;if(!(e==i&&m&&!s&&!x&&o.length<2&&m.merge(t,r,o.length?v:null,t==0,a,c))){if(i<h.length){let E=h[i];E&&(r<E.length||E.breakAfter&&v?.breakAfter)?(e==i&&(E=E.split(r),r=0),!x&&v&&E.merge(0,r,v,!0,0,c)?o[o.length-1]=E:((r||E.children.length&&!E.children[0].length)&&E.merge(0,r,null,!1,0,c),o.push(E))):E?.breakAfter&&(v?v.breakAfter=1:s=1),i++}for(m&&(m.breakAfter=s,t>0&&(!s&&o.length&&m.merge(t,m.length,o[0],!1,a,0)?m.breakAfter=o.shift().breakAfter:(t<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(t,m.length,null,!1,a,0),e++));e<i&&o.length;)if(h[i-1].become(o[o.length-1]))i--,o.pop(),c=o.length?0:a;else if(h[e].become(o[0]))e++,o.shift(),a=o.length?0:c;else break;!o.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,a,c)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function Aee(n,e,t,i,r,o){let s=n.childCursor(),{i:a,off:c}=s.findPos(t,1),{i:h,off:m}=s.findPos(e,-1),v=e-t;for(let x of i)v+=x.length;n.length+=v,cee(n,h,m,a,c,i,0,r,o)}const mCe=256;class bm extends ca{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof bm)||this.length-(t-e)+i.length>mCe||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new bm(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new qA(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return gCe(this.dom,e,t)}}class p1 extends ca{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(oee(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,o,s){return i&&(!(i instanceof p1&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(Aee(this,e,t,i?i.children.slice():[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,o=0;for(let a of this.children){let c=i+a.length;c>e&&t.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=o),i=c,o++}let s=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new p1(this.mark,t,s)}domAtPos(e){return hee(this,e)}coordsAt(e,t){return fee(this,e,t)}}function gCe(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;e==0&&t<0||e==i&&t>=0?yi.chrome||yi.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):t<0?r--:o<i&&o++;let a=Wb(n,r,o).getClientRects();if(!a.length)return null;let c=a[(s?s<0:t>=0)?0:a.length-1];return yi.safari&&!s&&c.width==0&&(c=Array.prototype.find.call(a,h=>h.width)||c),s?l6(c,s<0):c||null}class Qy extends ca{static create(e,t,i){return new Qy(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Qy.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,o,s){return i&&(!(i instanceof Qy)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Qy&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return fs.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):fs.empty}domAtPos(e){return(this.length?e==0:this.side>0)?qA.before(this.dom):qA.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let s=this.side?this.side<0:e>0;for(let a=s?r.length-1:0;o=r[a],!(e>0?a==0:a==r.length-1||o.top<o.bottom);a+=s?-1:1);return l6(o,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class vx extends ca{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof vx&&e.side==this.side}split(){return new vx(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?qA.before(this.dom):qA.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return fs.empty}get isHidden(){return!0}}bm.prototype.children=Qy.prototype.children=vx.prototype.children=VP;function hee(n,e){let t=n.dom,{children:i}=n,r=0;for(let o=0;r<i.length;r++){let s=i[r],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(e>o&&e<a&&s.dom.parentNode==t)return s.domAtPos(e-o);if(e<=o)break;o=a}}for(let o=r;o>0;o--){let s=i[o-1];if(s.dom.parentNode==t)return s.domAtPos(s.length)}for(let o=r;o<i.length;o++){let s=i[o];if(s.dom.parentNode==t)return s.domAtPos(0)}return new qA(t,0)}function dee(n,e,t){let i,{children:r}=n;t>0&&e instanceof p1&&r.length&&(i=r[r.length-1])instanceof p1&&i.mark.eq(e.mark)?dee(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function fee(n,e,t){let i=null,r=-1,o=null,s=-1;function a(h,m){for(let v=0,x=0;v<h.children.length&&x<=m;v++){let E=h.children[v],R=x+E.length;R>=m&&(E.children.length?a(E,m-x):(!o||o.isHidden&&(t>0||vCe(o,E)))&&(R>m||x==R&&E.getSide()>0)?(o=E,s=m-x):(x<m||x==R&&E.getSide()<0&&!E.isHidden)&&(i=E,r=m-x)),x=R}}a(n,e);let c=(t<0?i:o)||i||o;return c?c.coordsAt(Math.max(0,c==i?r:s),t):yCe(n)}function yCe(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=c4(e);return t[t.length-1]||null}function vCe(n,e){let t=n.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function G9(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const Ej=Object.create(null);function yS(n,e,t){if(n==e)return!0;n||(n=Ej),e||(e=Ej);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let o of i)if(o!=t&&(r.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function Q9(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function bCe(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class hv{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Th=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Th||(Th={}));class Br extends Gb{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new f5(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new sv(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:o,end:s}=pee(e,t);i=(o?t?-3e8:-1:5e8)-1,r=(s?t?2e8:1:-6e8)+1}return new sv(e,i,r,t,e.widget||null,!0)}static line(e){return new p5(e)}static set(e,t=!1){return Vo.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Br.none=Vo.empty;class f5 extends Br{constructor(e){let{start:t,end:i}=pee(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof f5&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&yS(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}f5.prototype.point=!1;class p5 extends Br{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof p5&&this.spec.class==e.spec.class&&yS(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}p5.prototype.mapMode=Oh.TrackBefore;p5.prototype.point=!0;class sv extends Br{constructor(e,t,i,r,o,s){super(t,i,o,e),this.block=r,this.isReplace=s,this.mapMode=r?t<=0?Oh.TrackBefore:Oh.TrackAfter:Oh.TrackDel}get type(){return this.startSide!=this.endSide?Th.WidgetRange:this.startSide<=0?Th.WidgetBefore:Th.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof sv&&CCe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}sv.prototype.point=!0;function pee(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function CCe(n,e){return n==e||!!(n&&e&&n.compare(e))}function hw(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class Vu extends ca{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,o,s){if(i){if(!(i instanceof Vu))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Aee(this,e,t,i?i.children.slice():[],o,s),!0}split(e){let t=new Vu;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){yS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){dee(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=G9(t,this.attrs||{})),i&&(this.attrs=G9({class:i},this.attrs||{}))}domAtPos(e){return hee(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(oee(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Q9(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&ca.get(r)instanceof p1;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=ca.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!yi.ios||!this.children.some(o=>o instanceof bm))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof bm)||/[^ -~]/.test(i.text))return null;let r=c4(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=fee(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-r.lineHeight)<2&&r.textHeight<o){let s=(o-r.textHeight)/2;return{top:i.top+s,bottom:i.bottom-s,left:i.left,right:i.left}}}return i}become(e){return e instanceof Vu&&this.children.length==0&&e.children.length==0&&yS(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let o=e.children[i],s=r+o.length;if(s>=t){if(o instanceof Vu)return o;if(s>t)break}r=s+o.breakAfter}return null}}class l1 extends ca{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,o,s){return i&&(!(i instanceof l1)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?qA.before(this.dom):qA.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new l1(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return VP}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):fs.empty}domBoundsAround(){return null}become(e){return e instanceof l1&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof W9?null:l6(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class W9 extends hv{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class p3{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof l1&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Vu),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(hM(new vx(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof l1)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),o=Math.min(r,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(hM(new bm(this.text.slice(this.textOff,this.textOff+o)),t),i),this.atCursorPos=!0,this.textOff+=o,e-=o,i=r<=o?0:t.length}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,o,s){if(this.disallowBlockEffectsFor[s]&&i instanceof sv){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(i instanceof sv)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new l1(i.widget||bx.block,a,i));else{let c=Qy.create(i.widget||bx.inline,a,a?0:i.startSide),h=this.atCursorPos&&!c.isEditable&&o<=r.length&&(e<t||i.startSide>0),m=!c.isEditable&&(e<t||o>r.length||i.startSide<=0),v=this.getLine();this.pendingBuffer==2&&!h&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),h&&(v.append(hM(new vx(1),r),o),o=r.length+Math.max(0,o-r.length)),v.append(hM(c,r),o),this.atCursorPos=m,this.pendingBuffer=m?e<t||o>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,r,o){let s=new p3(e,t,i,o);return s.openEnd=Vo.spans(r,t,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function hM(n,e){for(let t of e)n=new p1(t,[n],n.length);return n}class bx extends hv{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}bx.inline=new bx("span");bx.block=new bx("div");var tl=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(tl||(tl={}));const qb=tl.LTR,$P=tl.RTL;function mee(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const _Ce=mee("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),xCe=mee("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),q9=Object.create(null),xg=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);q9[e]=t,q9[t]=-e}function gee(n){return n<=247?_Ce[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?xCe[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const MCe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Wy{get dir(){return this.level%2?$P:qb}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==i)return s;(o<0||(r!=0?r<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}function yee(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!yee(i.inner,r.inner))return!1}return!0}const Sa=[];function wCe(n,e,t,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:t,c=o?256:r;for(let h=s,m=c,v=c;h<a;h++){let x=gee(n.charCodeAt(h));x==512?x=m:x==8&&v==4&&(x=16),Sa[h]=x==4?2:x,x&7&&(v=x),m=x}for(let h=s,m=c,v=c;h<a;h++){let x=Sa[h];if(x==128)h<a-1&&m==Sa[h+1]&&m&24?x=Sa[h]=m:Sa[h]=256;else if(x==64){let E=h+1;for(;E<a&&Sa[E]==64;)E++;let R=h&&m==8||E<t&&Sa[E]==8?v==1?1:8:256;for(let P=h;P<E;P++)Sa[P]=R;h=E-1}else x==8&&v==1&&(Sa[h]=1);m=x,x&7&&(v=x)}}}function SCe(n,e,t,i,r){let o=r==1?2:1;for(let s=0,a=0,c=0;s<=i.length;s++){let h=s?i[s-1].to:e,m=s<i.length?i[s].from:t;for(let v=h,x,E,R;v<m;v++)if(E=q9[x=n.charCodeAt(v)])if(E<0){for(let P=a-3;P>=0;P-=3)if(xg[P+1]==-E){let z=xg[P+2],Q=z&2?r:z&4?z&1?o:r:0;Q&&(Sa[v]=Sa[xg[P]]=Q),a=P;break}}else{if(xg.length==189)break;xg[a++]=v,xg[a++]=x,xg[a++]=c}else if((R=Sa[v])==2||R==1){let P=R==r;c=P?0:1;for(let z=a-3;z>=0;z-=3){let Q=xg[z+2];if(Q&2)break;if(P)xg[z+2]|=2;else{if(Q&4)break;xg[z+2]|=4}}}}}function ECe(n,e,t,i){for(let r=0,o=i;r<=t.length;r++){let s=r?t[r-1].to:n,a=r<t.length?t[r].from:e;for(let c=s;c<a;){let h=Sa[c];if(h==256){let m=c+1;for(;;)if(m==a){if(r==t.length)break;m=t[r++].to,a=r<t.length?t[r].from:e}else if(Sa[m]==256)m++;else break;let v=o==1,x=(m<e?Sa[m]:i)==1,E=v==x?v?1:2:i;for(let R=m,P=r,z=P?t[P-1].to:n;R>c;)R==z&&(R=t[--P].from,z=P?t[P-1].to:n),Sa[--R]=E;c=m}else o=h,c++}}}function Y9(n,e,t,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let c=e,h=0;c<t;){let m=!0,v=!1;if(h==o.length||c<o[h].from){let P=Sa[c];P!=a&&(m=!1,v=P==16)}let x=!m&&a==1?[]:null,E=m?i:i+1,R=c;e:for(;;)if(h<o.length&&R==o[h].from){if(v)break e;let P=o[h];if(!m)for(let z=P.to,Q=h+1;;){if(z==t)break e;if(Q<o.length&&o[Q].from==z)z=o[Q++].to;else{if(Sa[z]==a)break e;break}}if(h++,x)x.push(P);else{P.from>c&&s.push(new Wy(c,P.from,E));let z=P.direction==qb!=!(E%2);V9(n,z?i+1:i,r,P.inner,P.from,P.to,s),c=P.to}R=P.to}else{if(R==t||(m?Sa[R]!=a:Sa[R]==a))break;R++}x?Y9(n,c,R,i+1,r,x,s):c<R&&s.push(new Wy(c,R,E)),c=R}else for(let c=t,h=o.length;c>e;){let m=!0,v=!1;if(!h||c>o[h-1].to){let P=Sa[c-1];P!=a&&(m=!1,v=P==16)}let x=!m&&a==1?[]:null,E=m?i:i+1,R=c;e:for(;;)if(h&&R==o[h-1].to){if(v)break e;let P=o[--h];if(!m)for(let z=P.from,Q=h;;){if(z==e)break e;if(Q&&o[Q-1].to==z)z=o[--Q].from;else{if(Sa[z-1]==a)break e;break}}if(x)x.push(P);else{P.to<c&&s.push(new Wy(P.to,c,E));let z=P.direction==qb!=!(E%2);V9(n,z?i+1:i,r,P.inner,P.from,P.to,s),c=P.from}R=P.from}else{if(R==e||(m?Sa[R-1]!=a:Sa[R-1]==a))break;R--}x?Y9(n,R,c,i+1,r,x,s):R<c&&s.push(new Wy(R,c,E)),c=R}}function V9(n,e,t,i,r,o,s){let a=e%2?2:1;wCe(n,r,o,i,a),SCe(n,r,o,i,a),ECe(r,o,i,a),Y9(n,r,o,e,t,i,s)}function BCe(n,e,t){if(!n)return[new Wy(0,0,e==$P?1:0)];if(e==qb&&!t.length&&!MCe.test(n))return vee(n.length);if(t.length)for(;n.length>Sa.length;)Sa[Sa.length]=256;let i=[],r=e==qb?0:1;return V9(n,r,r,t,0,n.length,i),i}function vee(n){return[new Wy(0,n,0)]}let bee="";function OCe(n,e,t,i,r){var o;let s=i.head-n.from,a=Wy.find(e,s,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),c=e[a],h=c.side(r,t);if(s==h){let x=a+=r?1:-1;if(x<0||x>=e.length)return null;c=e[a=x],s=c.side(!r,t),h=c.side(r,t)}let m=mA(n.text,s,c.forward(r,t));(m<c.from||m>c.to)&&(m=h),bee=n.text.slice(Math.min(s,m),Math.max(s,m));let v=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return v&&m==h&&v.level+(r?0:1)<c.level?wn.cursor(v.side(!r,t)+n.from,v.forward(r,t)?1:-1,v.level):wn.cursor(m+n.from,c.forward(r,t)?-1:1,c.level)}function ICe(n,e,t){for(let i=e;i<t;i++){let r=gee(n.charCodeAt(i));if(r==1)return qb;if(r==2||r==4)return $P}return qb}const Cee=Bi.define(),_ee=Bi.define(),xee=Bi.define(),Mee=Bi.define(),$9=Bi.define(),wee=Bi.define(),See=Bi.define(),HP=Bi.define(),ZP=Bi.define(),Eee=Bi.define({combine:n=>n.some(e=>e)}),Bee=Bi.define({combine:n=>n.some(e=>e)}),Oee=Bi.define();class Y_{constructor(e,t="nearest",i="nearest",r=5,o=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=o,this.isSnapshot=s}map(e){return e.empty?this:new Y_(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Y_(wn.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const dM=ro.define({map:(n,e)=>n.map(e)}),Iee=ro.define();function kh(n,e,t){let i=n.facet(Mee);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const t1=Bi.define({combine:n=>n.length?n[0]:!0});let kCe=0;const B_=Bi.define({combine(n){return n.filter((e,t)=>{for(let i=0;i<t;i++)if(n[i].plugin==e.plugin)return!1;return!0})}});class wu{constructor(e,t,i,r,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(B_.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(B_.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:o,decorations:s}=t||{};return new wu(kCe++,e,i,r,a=>{let c=[];return s&&c.push(A4.of(h=>{let m=h.plugin(a);return m?s(m):Br.none})),o&&c.push(o(a)),c})}static fromClass(e,t){return wu.define((i,r)=>new e(i,r),t)}}class OO{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(kh(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){kh(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){kh(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const kee=Bi.define(),XP=Bi.define(),A4=Bi.define(),Tee=Bi.define(),m5=Bi.define(),Ree=Bi.define();function Bj(n,e){let t=n.state.facet(Ree);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),r=[];return Vo.spans(i,e.from,e.to,{point(){},span(o,s,a,c){let h=o-e.from,m=s-e.from,v=r;for(let x=a.length-1;x>=0;x--,c--){let E=a[x].spec.bidiIsolate,R;if(E==null&&(E=ICe(e.text,h,m)),c>0&&v.length&&(R=v[v.length-1]).to==h&&R.direction==E)R.to=m,v=R.inner;else{let P={from:h,to:m,direction:E,inner:[]};v.push(P),v=P.inner}}}}),r}const Dee=Bi.define();function JP(n){let e=0,t=0,i=0,r=0;for(let o of n.state.facet(Dee)){let s=o(n);s&&(s.left!=null&&(e=Math.max(e,s.left)),s.right!=null&&(t=Math.max(t,s.right)),s.top!=null&&(i=Math.max(i,s.top)),s.bottom!=null&&(r=Math.max(r,s.bottom)))}return{left:e,right:t,top:i,bottom:r}}const W2=Bi.define();class gp{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new gp(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,o=0,s=0,a=0;;r++){let c=r==e.length?null:e[r],h=s-a,m=c?c.fromB:1e9;for(;o<t.length&&t[o]<m;){let v=t[o],x=t[o+1],E=Math.max(a,v),R=Math.min(m,x);if(E<=R&&new gp(E+h,R+h,E,R).addToSet(i),x>m)break;o+=2}if(!c)return i;new gp(c.fromA,c.toA,c.fromB,c.toB).addToSet(i),s=c.toA,a=c.toB}}}class vS{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=_c.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,s,a,c)=>r.push(new gp(o,s,a,c))),this.changedRanges=r}static create(e,t,i){return new vS(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Oj extends ca{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Br.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Vu],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new gp(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:m})=>m<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!LCe(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let o=r>-1?RCe(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:m}=this.hasComposition;i=new gp(h,m,e.changes.mapPos(h,-1),e.changes.mapPos(m,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(yi.ie||yi.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,a=this.updateDeco(),c=KCe(s,a,e.changes);return i=gp.extendWithRanges(i,c),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=yi.chrome||yi.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.flags&=-8,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(s=>s.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof l1&&s.widget instanceof W9&&o.push(s.dom);r.updateGaps(o)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let s=r.length-1;;s--){let a=s>=0?r[s]:null;if(!a)break;let{fromA:c,toA:h,fromB:m,toB:v}=a,x,E,R,P;if(i&&i.range.fromB<v&&i.range.toB>m){let Z=p3.build(this.view.state.doc,m,i.range.fromB,this.decorations,this.dynamicDecorationMap),J=p3.build(this.view.state.doc,i.range.toB,v,this.decorations,this.dynamicDecorationMap);E=Z.breakAtStart,R=Z.openStart,P=J.openEnd;let $=this.compositionView(i);J.breakAtStart?$.breakAfter=1:J.content.length&&$.merge($.length,$.length,J.content[0],!1,J.openStart,0)&&($.breakAfter=J.content[0].breakAfter,J.content.shift()),Z.content.length&&$.merge(0,0,Z.content[Z.content.length-1],!0,0,Z.openEnd)&&Z.content.pop(),x=Z.content.concat($).concat(J.content)}else({content:x,breakAtStart:E,openStart:R,openEnd:P}=p3.build(this.view.state.doc,m,v,this.decorations,this.dynamicDecorationMap));let{i:z,off:Q}=o.findPos(h,1),{i:Y,off:H}=o.findPos(c,-1);cee(this,Y,H,z,Q,x,E,R,P)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(Iee)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new bm(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new p1(r,[t],t.length);let i=new Vu;return i.append(t,0),i}fixCompositionDOM(e){let t=(o,s)=>{s.flags|=8|(s.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(s);let a=ca.get(o);a&&a!=s&&(a.dom=null),s.setDOM(o)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let o=e.marks.length-1;o>=-1;o--)i=r.childPos(i.off,1),r=r.children[i.i],t(o>=0?e.marks[o].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,o=!r&&!(this.view.state.facet(t1)||this.dom.tabIndex>-1)&&Aw(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(a.anchor)),h=a.empty?c:this.moveToLine(this.domAtPos(a.head));if(yi.gecko&&a.empty&&!this.hasComposition&&TCe(c)){let v=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(v,c.node.childNodes[c.offset]||null)),c=h=new qA(v,0),s=!0}let m=this.view.observer.selectionRange;(s||!m.focusNode||(!f3(c.node,c.offset,m.anchorNode,m.anchorOffset)||!f3(h.node,h.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,a))&&(this.view.observer.ignore(()=>{yi.android&&yi.chrome&&this.dom.contains(m.focusNode)&&UCe(m.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let v=u4(this.view.root);if(v)if(a.empty){if(yi.gecko){let x=DCe(c.node,c.offset);if(x&&x!=3){let E=(x==1?aee:lee)(c.node,c.offset);E&&(c=new qA(E.node,E.offset))}}v.collapse(c.node,c.offset),a.bidiLevel!=null&&v.caretBidiLevel!==void 0&&(v.caretBidiLevel=a.bidiLevel)}else if(v.extend){v.collapse(c.node,c.offset);try{v.extend(h.node,h.offset)}catch{}}else{let x=document.createRange();a.anchor>a.head&&([c,h]=[h,c]),x.setEnd(h.node,h.offset),x.setStart(c.node,c.offset),v.removeAllRanges(),v.addRange(x)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new qA(m.anchorNode,m.anchorOffset),this.impreciseHead=h.precise?null:new qA(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&f3(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=u4(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=Vu.find(this,t.head);if(!s)return;let a=s.posAtStart;if(t.head==a||t.head==a+s.length)return;let c=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!c||!h||c.bottom>h.top)return;let m=this.domAtPos(t.head+t.assoc);i.collapse(m.node,m.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let v=e.observer.selectionRange;e.docView.posFromDOM(v.anchorNode,v.anchorOffset)!=t.from&&i.collapse(r,o)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let o=ca.get(t.childNodes[r]);o instanceof Vu&&(i=o.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let o=ca.get(t.childNodes[r]);o instanceof Vu&&(i=o.domAtPos(o.length))}return i?new qA(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=ca.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof Vu)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let o=this.length,s=this.children.length-1;s>=0;s--){let a=this.children[s],c=o-a.breakAfter,h=c-a.length;if(c<e)break;if(h<=e&&(h<e||a.covers(-1))&&(c>e||a.covers(1))&&(!i||a instanceof Vu&&!(i instanceof Vu&&t>=0)))i=a,r=h;else if(i&&h==e&&c==e&&a instanceof l1&&Math.abs(t)<2){if(a.deco.startSide<0)break;s&&(i=null)}o=h}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof Vu))return null;for(;r.children.length;){let{i:a,off:c}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=c}if(!(r instanceof bm))return null;let o=mA(r.text,i);if(o==i)return null;let s=Wb(r.dom,i,o).getClientRects();for(let a=0;a<s.length;a++){let c=s[a];if(a==s.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,c=this.view.textDirection==tl.LTR;for(let h=0,m=0;m<this.children.length;m++){let v=this.children[m],x=h+v.length;if(x>r)break;if(h>=i){let E=v.dom.getBoundingClientRect();if(t.push(E.height),s){let R=v.dom.lastChild,P=R?c4(R):[];if(P.length){let z=P[P.length-1],Q=c?z.right-E.left:E.right-z.left;Q>a&&(a=Q,this.minWidth=o,this.minWidthFrom=h,this.minWidthTo=x)}}}h=x+v.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?tl.RTL:tl.LTR}measureTextSize(){for(let o of this.children)if(o instanceof Vu){let s=o.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=c4(e.firstChild)[0];t=e.getBoundingClientRect().height,i=o?o.width/27:7,r=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new uee(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],s=o?o.from-1:this.length;if(s>i){let a=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Br.replace({widget:new W9(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!o)break;i=o.to+1}return Br.set(e)}updateDeco(){let e=1,t=this.view.state.facet(A4).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,r=this.view.state.facet(Tee).map((o,s)=>{let a=typeof o=="function";return a&&(i=!0),a?o(this.view):o});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(Vo.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(Oee))try{if(h(this.view,e.range,e))return!0}catch(m){kh(this.view.state,m,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let o=JP(this.view),s={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:a,offsetHeight:c}=this.view.scrollDOM;ACe(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==tl.LTR)}}function TCe(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Pee(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=aee(t.focusNode,t.focusOffset),r=lee(t.focusNode,t.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let a=ca.get(r.node);if(!a||a instanceof bm&&a.text!=r.node.nodeValue)o=r;else if(n.docView.lastCompositionAfterCursor){let c=ca.get(i.node);!c||c instanceof bm&&c.text!=i.node.nodeValue||(o=r)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function RCe(n,e,t){let i=Pee(n,t);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let c=e.invertedDesc,h=new gp(c.mapPos(o),c.mapPos(s),o,s),m=[];for(let v=r.parentNode;;v=v.parentNode){let x=ca.get(v);if(x instanceof p1)m.push({node:v,deco:x.mark});else{if(x instanceof Vu||v.nodeName=="DIV"&&v.parentNode==n.contentDOM)return{range:h,text:r,marks:m,line:v};if(v!=n.contentDOM)m.push({node:v,deco:new f5({inclusive:!0,attributes:bCe(v),tagName:v.tagName.toLowerCase()})});else return null}}}function DCe(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let PCe=class{constructor(){this.changes=[]}compareRange(e,t){hw(e,t,this.changes)}comparePoint(e,t){hw(e,t,this.changes)}boundChange(e){hw(e,e,this.changes)}};function KCe(n,e,t){let i=new PCe;return Vo.compare(n,e,t,i),i.changes}function UCe(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function LCe(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function zCe(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),o=e-r.from;if(r.length==0)return wn.cursor(e);o==0?t=1:o==r.length&&(t=-1);let s=o,a=o;t<0?s=mA(r.text,o,!1):a=mA(r.text,o);let c=i(r.text.slice(s,a));for(;s>0;){let h=mA(r.text,s,!1);if(i(r.text.slice(h,s))!=c)break;s=h}for(;a<r.length;){let h=mA(r.text,a);if(i(r.text.slice(a,h))!=c)break;a=h}return wn.range(s+r.from,a+r.from)}function FCe(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function jCe(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function IO(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Ij(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function kj(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function H9(n,e,t){let i,r,o,s,a=!1,c,h,m,v;for(let R=n.firstChild;R;R=R.nextSibling){let P=c4(R);for(let z=0;z<P.length;z++){let Q=P[z];r&&IO(r,Q)&&(Q=Ij(kj(Q,r.bottom),r.top));let Y=FCe(e,Q),H=jCe(t,Q);if(Y==0&&H==0)return R.nodeType==3?Tj(R,e,t):H9(R,e,t);(!i||s>H||s==H&&o>Y)&&(i=R,r=Q,o=Y,s=H,a=Y?e<Q.left?z>0:z<P.length-1:!0),Y==0?t>Q.bottom&&(!m||m.bottom<Q.bottom)?(c=R,m=Q):t<Q.top&&(!v||v.top>Q.top)&&(h=R,v=Q):m&&IO(m,Q)?m=kj(m,Q.bottom):v&&IO(v,Q)&&(v=Ij(v,Q.top))}}if(m&&m.bottom>=t?(i=c,r=m):v&&v.top<=t&&(i=h,r=v),!i)return{node:n,offset:0};let x=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Tj(i,x,t);if(a&&i.contentEditable!="false")return H9(i,x,t);let E=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:E}}function Tj(n,e,t){let i=n.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let c=Wb(n,a,a+1).getClientRects();for(let h=0;h<c.length;h++){let m=c[h];if(m.top==m.bottom)continue;s||(s=e-m.left);let v=(m.top>t?m.top-t:t-m.bottom)-1;if(m.left-1<=e&&m.right+1>=e&&v<o){let x=e>=(m.left+m.right)/2,E=x;if((yi.chrome||yi.gecko)&&Wb(n,a).getBoundingClientRect().left==m.right&&(E=!x),v<=0)return{node:n,offset:a+(E?1:0)};r=a+(E?1:0),o=v}}}return{node:n,offset:r>-1?r:s>0?n.nodeValue.length:0}}function Kee(n,e,t,i=-1){var r,o;let s=n.contentDOM.getBoundingClientRect(),a=s.top+n.viewState.paddingTop,c,{docHeight:h}=n.viewState,{x:m,y:v}=e,x=v-a;if(x<0)return 0;if(x>h)return n.state.doc.length;for(let Z=n.viewState.heightOracle.textHeight/2,J=!1;c=n.elementAtHeight(x),c.type!=Th.Text;)for(;x=i>0?c.bottom+Z:c.top-Z,!(x>=0&&x<=h);){if(J)return t?null:0;J=!0,i=-i}v=a+x;let E=c.from;if(E<n.viewport.from)return n.viewport.from==0?0:t?null:Rj(n,s,c,m,v);if(E>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Rj(n,s,c,m,v);let R=n.dom.ownerDocument,P=n.root.elementFromPoint?n.root:R,z=P.elementFromPoint(m,v);z&&!n.contentDOM.contains(z)&&(z=null),z||(m=Math.max(s.left+1,Math.min(s.right-1,m)),z=P.elementFromPoint(m,v),z&&!n.contentDOM.contains(z)&&(z=null));let Q,Y=-1;if(z&&((r=n.docView.nearest(z))===null||r===void 0?void 0:r.isEditable)!=!1){if(R.caretPositionFromPoint){let Z=R.caretPositionFromPoint(m,v);Z&&({offsetNode:Q,offset:Y}=Z)}else if(R.caretRangeFromPoint){let Z=R.caretRangeFromPoint(m,v);Z&&({startContainer:Q,startOffset:Y}=Z)}Q&&(!n.contentDOM.contains(Q)||yi.safari&&NCe(Q,Y,m)||yi.chrome&&GCe(Q,Y,m))&&(Q=void 0),Q&&(Y=Math.min(i0(Q),Y))}if(!Q||!n.docView.dom.contains(Q)){let Z=Vu.find(n.docView,E);if(!Z)return x>c.top+c.height/2?c.to:c.from;({node:Q,offset:Y}=H9(Z.dom,m,v))}let H=n.docView.nearest(Q);if(!H)return null;if(H.isWidget&&((o=H.dom)===null||o===void 0?void 0:o.nodeType)==1){let Z=H.dom.getBoundingClientRect();return e.y<Z.top||e.y<=Z.bottom&&e.x<=(Z.left+Z.right)/2?H.posAtStart:H.posAtEnd}else return H.localPosFromDOM(Q,Y)+H.posAtStart}function Rj(n,e,t,i,r){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,c=Math.floor((r-t.top-(n.defaultLineHeight-a)*.5)/a);o+=c*n.viewState.heightOracle.lineLength}let s=n.state.sliceDoc(t.from,t.to);return t.from+P9(s,o,n.state.tabSize)}function Uee(n,e,t){let i,r=n;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(;;){let o=r.nextSibling;if(o){if(o.nodeName=="BR")break;return!1}else{let s=r.parentNode;if(!s||s.nodeName=="DIV")break;r=s}}return Wb(n,i-1,i).getBoundingClientRect().right>t}function NCe(n,e,t){return Uee(n,e,t)}function GCe(n,e,t){if(e!=0)return Uee(n,e,t);for(let r=n;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let i=n.nodeType==1?n.getBoundingClientRect():Wb(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function Z9(n,e,t){let i=n.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!r||o.type==Th.Text&&(r.type!=o.type||(t<0?o.from<e:o.to>e)))&&(r=o)}}return r||i}return i}function QCe(n,e,t,i){let r=Z9(n,e.head,e.assoc||-1),o=!i||r.type!=Th.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(o){let s=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),c=n.posAtCoords({x:t==(a==tl.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(c!=null)return wn.cursor(c,t?-1:1)}return wn.cursor(t?r.to:r.from,t?-1:1)}function Dj(n,e,t,i){let r=n.state.doc.lineAt(e.head),o=n.bidiSpans(r),s=n.textDirectionAt(r.from);for(let a=e,c=null;;){let h=OCe(r,o,s,a,t),m=bee;if(!h){if(r.number==(t?n.state.doc.lines:1))return a;m=`
`,r=n.state.doc.line(r.number+(t?1:-1)),o=n.bidiSpans(r),h=n.visualLineSide(r,!t)}if(c){if(!c(m))return a}else{if(!i)return h;c=i(m)}a=h}}function WCe(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return o=>{let s=i(o);return r==pl.Space&&(r=s),r==s}}function qCe(n,e,t,i){let r=e.head,o=t?1:-1;if(r==(t?n.state.doc.length:0))return wn.cursor(r,e.assoc);let s=e.goalColumn,a,c=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(r,e.assoc||-1),m=n.documentTop;if(h)s==null&&(s=h.left-c.left),a=o<0?h.top:h.bottom;else{let E=n.viewState.lineBlockAt(r);s==null&&(s=Math.min(c.right-c.left,n.defaultCharacterWidth*(r-E.from))),a=(o<0?E.top:E.bottom)+m}let v=c.left+s,x=i??n.viewState.heightOracle.textHeight>>1;for(let E=0;;E+=10){let R=a+(x+E)*o,P=Kee(n,{x:v,y:R},!1,o);if(R<c.top||R>c.bottom||(o<0?P<r:P>r)){let z=n.docView.coordsForChar(P),Q=!z||R<z.top?-1:1;return wn.cursor(P,Q,void 0,s)}}}function m3(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(o,s,a)=>{if(e>o&&e<s){let c=i||t||(e-o<s-e?-1:1);e=c<0?o:s,i=c}});if(!i)return e}}function Lee(n,e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],o=null;if(r.empty){let s=m3(n,r.from,0);s!=r.from&&(o=wn.cursor(s,-1))}else{let s=m3(n,r.from,-1),a=m3(n,r.to,1);(s!=r.from||a!=r.to)&&(o=wn.range(r.from==r.anchor?s:a,r.from==r.head?s:a))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?wn.create(t,e.mainIndex):e}function kO(n,e,t){let i=m3(n.state.facet(m5).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:wn.cursor(i,i<t.from?1:-1)}const q2="";class YCe{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ds.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=q2}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let o=this.text.length;this.readNode(r);let s=r.nextSibling;if(s==t)break;let a=ca.get(r),c=ca.get(s);(a&&c?a.breakAfter:(a?a.breakAfter:gS(r))||gS(s)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>o)&&!$Ce(s,t)&&this.lineBreak(),r=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(a=r.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=s-1);i=o+s}}readNode(e){if(e.cmIgnore)return;let t=ca.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(VCe(e,i.node,i.offset)?t:0))}}function VCe(n,e,t){for(;;){if(!e||t<i0(e))return!1;if(e==n)return!0;t=Qb(e)+1,e=e.parentNode}}function $Ce(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let i=ca.get(n);if(!(i?.isWidget||n.cmIgnore))return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class Pj{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class HCe{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let a=o||s?[]:XCe(e),c=new YCe(a,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=JCe(a,this.bounds.from)}else{let a=e.observer.selectionRange,c=o&&o.node==a.focusNode&&o.offset==a.focusOffset||!N9(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=s&&s.node==a.anchorNode&&s.offset==a.anchorOffset||!N9(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),m=e.viewport;if((yi.ios||yi.chrome)&&e.state.selection.main.empty&&c!=h&&(m.from>0||m.to<e.state.doc.length)){let v=Math.min(c,h),x=Math.max(c,h),E=m.from-v,R=m.to-x;(E==0||E==1||v==0)&&(R==0||R==-1||x==e.state.doc.length)&&(c=0,h=e.state.doc.length)}this.newSel=wn.single(h,c)}}}function zee(n,e){let t,{newSel:i}=e,r=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:s,to:a}=e.bounds,c=r.from,h=null;(o===8||yi.android&&e.text.length<a-s)&&(c=r.to,h="end");let m=Fee(n.state.doc.sliceString(s,a,q2),e.text,c-s,h);m&&(yi.chrome&&o==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==q2+q2&&m.toB--,t={from:s+m.from,to:s+m.toA,insert:fs.of(e.text.slice(m.from,m.toB).split(q2))})}else i&&(!n.hasFocus&&n.state.facet(t1)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(yi.mac||yi.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=wn.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:fs.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:yi.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=wn.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:fs.of([" "])}),t)return eK(n,t,i,o);if(i&&!i.main.eq(r)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=Lee(n.state.facet(m5).map(c=>c(n)),i))),n.dispatch({selection:i,scrollIntoView:s,userEvent:a}),!0}else return!1}function eK(n,e,t,i=-1){if(yi.ios&&n.inputState.flushIOSKey(e))return!0;let r=n.state.selection.main;if(yi.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&n.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&q_(n.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&q_(n.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&q_(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let s,a=()=>s||(s=ZCe(n,e,t));return n.state.facet(wee).some(c=>c(n,e.from,e.to,o,a))||n.dispatch(a()),!0}function ZCe(n,e,t){let i,r=n.state,o=r.selection.main,s=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let c=e.from<o.from?-1:1,h=c<0?o.from:o.to,m=m3(r.facet(m5).map(v=>v(n)),h,c);e.from==m&&(s=m)}if(s>-1)i={changes:e,selection:wn.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let c=o.from<e.from?r.sliceDoc(o.from,e.from):"",h=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(n.state.toText(c+e.insert.sliceString(0,void 0,n.state.lineBreak)+h))}else{let c=r.changes(e),h=t&&t.main.to<=c.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let m=n.state.sliceDoc(e.from,e.to),v,x=t&&Pee(n,t.main.head);if(x){let P=e.insert.length-(e.to-e.from);v={from:x.from,to:x.to-P}}else v=n.state.doc.lineAt(o.head);let E=o.to-e.to,R=o.to-o.from;i=r.changeByRange(P=>{if(P.from==o.from&&P.to==o.to)return{changes:c,range:h||P.map(c)};let z=P.to-E,Q=z-m.length;if(P.to-P.from!=R||n.state.sliceDoc(Q,z)!=m||P.to>=v.from&&P.from<=v.to)return{range:P};let Y=r.changes({from:Q,to:z,insert:e.insert}),H=P.to-o.to;return{changes:Y,range:h?wn.range(Math.max(0,h.anchor+H),Math.max(0,h.head+H)):P.map(Y)}})}else i={changes:c,selection:h&&r.selection.replaceRange(h)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function Fee(n,e,t,i){let r=Math.min(n.length,e.length),o=0;for(;o<r&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(i=="end"){let c=Math.max(0,o-Math.min(s,a));t-=s+c-o}if(s<o&&n.length<e.length){let c=t<=o&&t>=s?o-t:0;o-=c,a=o+(a-s),s=o}else if(a<o){let c=t<=o&&t>=a?o-t:0;o-=c,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function XCe(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new Pj(t,i)),(r!=t||o!=i)&&e.push(new Pj(r,o))),e}function JCe(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?wn.single(t+e,i+e):null}class e_e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,yi.safari&&e.contentDOM.addEventListener("input",()=>null),yi.gecko&&m_e(e.contentDOM.ownerDocument)}handleEvent(e){!l_e(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=t_e(e),i=this.handlers,r=this.view.contentDOM;for(let o in t)if(o!="scroll"){let s=!t[o].handlers.length,a=i[o];a&&s!=!a.handlers.length&&(r.removeEventListener(o,this.handleEvent),a=null),a||r.addEventListener(o,this.handleEvent,{passive:s})}for(let o in i)o!="scroll"&&!t[o]&&r.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Nee.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),yi.android&&yi.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return yi.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=jee.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||n_e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,q_(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:yi.safari&&!yi.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Kj(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){kh(t.state,r)}}}function t_e(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,o=r&&r.plugin.domEventHandlers,s=r&&r.plugin.domEventObservers;if(o)for(let a in o){let c=o[a];c&&t(a).handlers.push(Kj(i.value,c))}if(s)for(let a in s){let c=s[a];c&&t(a).observers.push(Kj(i.value,c))}}for(let i in Cm)t(i).handlers.push(Cm[i]);for(let i in bp)t(i).observers.push(bp[i]);return e}const jee=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],n_e="dthko",Nee=[16,17,18,20,91,92,224,225],fM=6;function pM(n){return Math.max(0,n)*.7+8}function i_e(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class r_e{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=hCe(e.contentDOM),this.atoms=e.state.facet(m5).map(s=>s(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ds.allowMultipleSelections)&&o_e(e,t),this.dragging=a_e(e,t)&&Wee(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&i_e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let c=JP(this.view);e.clientX-c.left<=r+fM?t=-pM(r-e.clientX):e.clientX+c.right>=s-fM&&(t=pM(e.clientX-s)),e.clientY-c.top<=o+fM?i=-pM(o-e.clientY):e.clientY+c.bottom>=a-fM&&(i=pM(e.clientY-a)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=Lee(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function o_e(n,e){let t=n.state.facet(Cee);return t.length?t[0](e):yi.mac?e.metaKey:e.ctrlKey}function s_e(n,e){let t=n.state.facet(_ee);return t.length?t[0](e):yi.mac?!e.altKey:!e.ctrlKey}function a_e(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=u4(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function l_e(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ca.get(t))&&i.ignoreEvent(e))return!1;return!0}const Cm=Object.create(null),bp=Object.create(null),Gee=yi.ie&&yi.ie_version<15||yi.ios&&yi.webkit_version<604;function u_e(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Qee(n,t.value)},50)}function u6(n,e,t){for(let i of n.facet(e))t=i(t,n);return t}function Qee(n,e){e=u6(n.state,HP,e);let{state:t}=n,i,r=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(X9!=null&&t.selection.ranges.every(c=>c.empty)&&X9==o.toString()){let c=-1;i=t.changeByRange(h=>{let m=t.doc.lineAt(h.from);if(m.from==c)return{range:h};c=m.from;let v=t.toText((s?o.line(r++).text:e)+t.lineBreak);return{changes:{from:m.from,insert:v},range:wn.cursor(h.from+v.length)}})}else s?i=t.changeByRange(c=>{let h=o.line(r++);return{changes:{from:c.from,to:c.to,insert:h.text},range:wn.cursor(c.from+h.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}bp.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Cm.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);bp.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};bp.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Cm.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(xee))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=h_e(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new r_e(n,e,t,i)),i&&n.observer.ignore(()=>{ree(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function Uj(n,e,t,i){if(i==1)return wn.cursor(e,t);if(i==2)return zCe(n.state,e,t);{let r=Vu.find(n.docView,e),o=n.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,wn.range(s,a)}}let Lj=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function c_e(n,e,t,i){let r=Vu.find(n.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&Lj(t,i,s))return-1;let a=r.coordsAt(o,1);return a&&Lj(t,i,a)?1:s&&s.bottom>=i?-1:1}function zj(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:c_e(n,t,e.clientX,e.clientY)}}const A_e=yi.ie&&yi.ie_version<=11;let Fj=null,jj=0,Nj=0;function Wee(n){if(!A_e)return n.detail;let e=Fj,t=Nj;return Fj=n,Nj=Date.now(),jj=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(jj+1)%3:1}function h_e(n,e){let t=zj(n,e),i=Wee(e),r=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),r=r.map(o.changes))},get(o,s,a){let c=zj(n,o),h,m=Uj(n,c.pos,c.bias,i);if(t.pos!=c.pos&&!s){let v=Uj(n,t.pos,t.bias,i),x=Math.min(v.from,m.from),E=Math.max(v.to,m.to);m=x<m.from?wn.range(x,E):wn.range(E,x)}return s?r.replaceRange(r.main.extend(m.from,m.to)):a&&i==1&&r.ranges.length>1&&(h=d_e(r,c.pos))?h:a?r.addRange(m):wn.create([m])}}}function d_e(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return wn.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Cm.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let o=r.posAtStart,s=o+r.length;(o>=t.to||s<=t.from)&&(t=wn.range(o,s))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",u6(n.state,ZP,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Cm.dragend=n=>(n.inputState.draggedContent=null,!1);function Gj(n,e,t,i){if(t=u6(n.state,HP,t),!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,s=i&&o&&s_e(n,e)?{from:o.from,to:o.to}:null,a={from:r,insert:t},c=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(r,-1),head:c.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Cm.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,o=()=>{++r==t.length&&Gj(n,e,i.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[s]=a.result),o()},a.readAsText(t[s])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Gj(n,e,i,!0),!0}return!1};Cm.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Gee?null:e.clipboardData;return t?(Qee(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(u_e(n),!1)};function f_e(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function p_e(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>r&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),r=s.number}i=!0}return{text:u6(n,ZP,e.join(n.lineBreak)),ranges:t,linewise:i}}let X9=null;Cm.copy=Cm.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=p_e(n.state);if(!t&&!r)return!1;X9=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=Gee?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(f_e(n,t),!1)};const qee=v1.define();function Yee(n,e){let t=[];for(let i of n.facet(See)){let r=i(n,e);r&&t.push(r)}return t.length?n.update({effects:t,annotations:qee.of(!0)}):null}function Vee(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Yee(n.state,e);t?n.dispatch(t):n.update([])}},10)}bp.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Vee(n)};bp.blur=n=>{n.observer.clearSelectionRange(),Vee(n)};bp.compositionstart=bp.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};bp.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,yi.chrome&&yi.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};bp.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Cm.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),s=e.getTargetRanges();if(o&&s.length){let a=s[0],c=n.posAtDOM(a.startContainer,a.startOffset),h=n.posAtDOM(a.endContainer,a.endOffset);return eK(n,{from:c,to:h,insert:n.state.toText(o)},null),!0}}let r;if(yi.chrome&&yi.android&&(r=jee.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return yi.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),yi.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>bp.compositionend(n,e),20),!1};const Qj=new Set;function m_e(n){Qj.has(n)||(Qj.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Wj=["pre-wrap","normal","pre-line","break-spaces"];let Cx=!1;function qj(){Cx=!1}class g_e{constructor(e){this.lineWrapping=e,this.doc=fs.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Wj.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,o,s){let a=Wj.indexOf(e)>-1,c=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=o,c){this.heightSamples={};for(let h=0;h<s.length;h++){let m=s[h];m<0?h++:this.heightSamples[Math.floor(m*10)]=!0}}return c}}class y_e{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Kg{constructor(e,t,i,r,o){this.from=e,this.length=t,this.top=i,this.height=r,this._content=o}get type(){return typeof this._content=="number"?Th.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof sv?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Kg(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ja=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Ja||(Ja={}));const dw=.001;class Rh{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>dw&&(Cx=!0),this.height=e)}replace(e,t,i){return Rh.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let o=this,s=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:c,toA:h,fromB:m,toB:v}=r[a],x=o.lineAt(c,Ja.ByPosNoHeight,i.setDoc(t),0,0),E=x.to>=h?x:o.lineAt(h,Ja.ByPosNoHeight,i,0,0);for(v+=E.to-h,h=E.to;a>0&&x.from<=r[a-1].toA;)c=r[a-1].fromA,m=r[a-1].fromB,a--,c<x.from&&(x=o.lineAt(c,Ja.ByPosNoHeight,i,0,0));m+=x.from-c,c=x.from;let R=tK.build(i.setDoc(s),e,m,v);o=bS(o,o.replace(c,h,R))}return o.updateHeight(i,0)}static empty(){return new df(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,o=0;for(;;)if(t==i)if(r>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(o>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,o-=a.size}else break;else if(r<o){let a=e[t++];a&&(r+=a.size)}else{let a=e[--i];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,i++),new v_e(Rh.of(e.slice(0,t)),s,Rh.of(e.slice(i)))}}function bS(n,e){return n==e?n:(n.constructor!=e.constructor&&(Cx=!0),e)}Rh.prototype.size=1;class $ee extends Rh{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new Kg(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,o){return this.blockAt(0,i,r,o)}forEachLine(e,t,i,r,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,i,r,o))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class df extends $ee{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new Kg(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof df||r instanceof dA&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof dA?r=new df(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Rh.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class dA extends Rh{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,o=r-i+1,s,a=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);s=c/o,this.length>o+1&&(a=(this.height-c)/(this.length-o-1))}else s=this.height/o;return{firstLine:i,lastLine:r,perLine:s,perChar:a}}blockAt(e,t,i,r){let{firstLine:o,lastLine:s,perLine:a,perChar:c}=this.heightMetrics(t,r);if(t.lineWrapping){let h=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),m=t.doc.lineAt(h),v=a+m.length*c,x=Math.max(i,e-v/2);return new Kg(m.from,m.length,x,v,0)}else{let h=Math.max(0,Math.min(s-o,Math.floor((e-i)/a))),{from:m,length:v}=t.doc.line(o+h);return new Kg(m,v,i+a*h,a,0)}}lineAt(e,t,i,r,o){if(t==Ja.ByHeight)return this.blockAt(e,i,r,o);if(t==Ja.ByPosNoHeight){let{from:E,to:R}=i.doc.lineAt(e);return new Kg(E,R-E,0,0,0)}let{firstLine:s,perLine:a,perChar:c}=this.heightMetrics(i,o),h=i.doc.lineAt(e),m=a+h.length*c,v=h.number-s,x=r+a*v+c*(h.from-o-v);return new Kg(h.from,h.length,Math.max(r,Math.min(x,r+this.height-m)),m,0)}forEachLine(e,t,i,r,o,s){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(i,o);for(let m=e,v=r;m<=t;){let x=i.doc.lineAt(m);if(m==e){let R=x.number-a;v+=c*R+h*(e-o-R)}let E=c+h*x.length;s(new Kg(x.from,x.length,v,E,0)),v+=E,m=x.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let o=i[i.length-1];o instanceof dA?i[i.length-1]=new dA(o.length+r):i.push(null,new dA(r-1))}if(e>0){let o=i[0];o instanceof dA?i[0]=new dA(e+o.length):i.unshift(new dA(e-1),null)}return Rh.of(i)}decomposeLeft(e,t){t.push(new dA(e-1),null)}decomposeRight(e,t){t.push(null,new dA(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let s=[],a=Math.max(t,r.from),c=-1;for(r.from>t&&s.push(new dA(r.from-t-1).updateHeight(e,t));a<=o&&r.more;){let m=e.doc.lineAt(a).length;s.length&&s.push(null);let v=r.heights[r.index++];c==-1?c=v:Math.abs(v-c)>=dw&&(c=-2);let x=new df(m,v);x.outdated=!1,s.push(x),a+=m+1}a<=o&&s.push(null,new dA(o-a).updateHeight(e,a));let h=Rh.of(s);return(c<0||Math.abs(h.height-this.height)>=dw||Math.abs(c-this.heightMetrics(e,t).perLine)>=dw)&&(Cx=!0),bS(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class v_e extends Rh{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,i,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,c=t==Ja.ByHeight?e<s:e<a,h=c?this.left.lineAt(e,t,i,r,o):this.right.lineAt(e,t,i,s,a);if(this.break||(c?h.to<a:h.from>a))return h;let m=t==Ja.ByPosNoHeight?Ja.ByPosNoHeight:Ja.ByPos;return c?h.join(this.right.lineAt(a,m,i,s,a)):this.left.lineAt(a,m,i,r,o).join(h)}forEachLine(e,t,i,r,o,s){let a=r+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,r,o,s),t>=c&&this.right.forEachLine(e,t,i,a,c,s);else{let h=this.lineAt(c,Ja.ByPos,i,r,o);e<h.from&&this.left.forEachLine(e,h.from-1,i,r,o,s),h.to>=e&&h.from<=t&&s(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,a,c,s)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of i)o.push(a);if(e>0&&Yj(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),Yj(o,a)}return Rh.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Rh.of(this.break?[e,null,t]:[e,t]):(this.left=bS(this.left,e),this.right=bS(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:o,right:s}=this,a=t+o.length+this.break,c=null;return r&&r.from<=t+o.length&&r.more?c=o=o.updateHeight(e,t,i,r):o.updateHeight(e,t,i),r&&r.from<=a+s.length&&r.more?c=s=s.updateHeight(e,a,i,r):s.updateHeight(e,a,i),c?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Yj(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof dA&&(i=n[e+1])instanceof dA&&n.splice(e-1,3,new dA(t.length+1+i.length))}const b_e=5;class tK{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof df?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new df(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new $ee(s,r,i)):(s||o||r>=b_e)&&this.addLineDeco(r,o,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new df(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new dA(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof df)return e;let t=new df(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof df)&&!this.isCovered?this.nodes.push(new df(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof df&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let o=new tK(i,e);return Vo.spans(t,i,r,o,0),o.finish(i)}}function C_e(n,e,t){let i=new __e;return Vo.compare(n,e,t,i,0),i.changes}class __e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&hw(e,t,this.changes,5)}}function x_e(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,o=Math.max(0,t.left),s=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),c=Math.min(r.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let m=h,v=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&v.overflow!="visible"){let x=m.getBoundingClientRect();o=Math.max(o,x.left),s=Math.min(s,x.right),a=Math.max(a,x.top),c=Math.min(h==n.parentNode?r.innerHeight:c,x.bottom)}h=v.position=="absolute"||v.position=="fixed"?m.offsetParent:m.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-t.left,right:Math.max(o,s)-t.left,top:a-(t.top+e),bottom:Math.max(a,c)-(t.top+e)}}function M_e(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function w_e(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class TO{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return Br.replace({widget:new S_e(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class S_e extends hv{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Vj{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=$j,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=tl.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(XP).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new g_e(t),this.stateDeco=e.facet(A4).filter(i=>typeof i!="function"),this.heightMap=Rh.empty().applyChanges(this.stateDeco,fs.empty,this.heightOracle.setDoc(e.doc),[new gp(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Br.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);e.push(new mM(o,s))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?$j:new nK(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Y2(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(A4).filter(m=>typeof m!="function");let r=e.changedRanges,o=gp.extendWithRanges(r,C_e(i,this.stateDeco,e?e.changes:_c.empty(this.state.doc.length))),s=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);qj(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=s||Cx)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let h=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Bee)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?tl.RTL:tl.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=t.getBoundingClientRect(),c=s||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,m=0;if(a.width&&a.height){let{scaleX:Z,scaleY:J}=iee(t,a);(Z>.005&&Math.abs(this.scaleX-Z)>.005||J>.005&&Math.abs(this.scaleY-J)>.005)&&(this.scaleX=Z,this.scaleY=J,h|=16,s=c=!0)}let v=(parseInt(i.paddingTop)||0)*this.scaleY,x=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=v||this.paddingBottom!=x)&&(this.paddingTop=v,this.paddingBottom=x,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let E=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=E&&(this.scrollAnchorHeight=-1,this.scrollTop=E),this.scrolledToBottom=see(e.scrollDOM);let R=(this.printing?w_e:x_e)(t,this.paddingTop),P=R.top-this.pixelViewport.top,z=R.bottom-this.pixelViewport.bottom;this.pixelViewport=R;let Q=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(Q!=this.inView&&(this.inView=Q,Q&&(c=!0)),!this.inView&&!this.scrollTarget&&!M_e(e.dom))return 0;let Y=a.width;if((this.contentDOMWidth!=Y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),c){let Z=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(Z)&&(s=!0),s||r.lineWrapping&&Math.abs(Y-this.contentDOMWidth)>r.charWidth){let{lineHeight:J,charWidth:$,textHeight:G}=e.docView.measureTextSize();s=J>0&&r.refresh(o,J,$,G,Math.max(5,Y/$),Z),s&&(e.docView.minWidth=0,h|=16)}P>0&&z>0?m=Math.max(P,z):P<0&&z<0&&(m=Math.min(P,z)),qj();for(let J of this.viewports){let $=J.from==this.viewport.from?Z:e.docView.measureVisibleLineHeights(J);this.heightMap=(s?Rh.empty().applyChanges(this.stateDeco,fs.empty,this.heightOracle,[new gp(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,s,new y_e(J.from,$))}Cx&&(h|=2)}let H=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return H&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),h|=this.updateForViewport()),(h&2||H)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:s,visibleBottom:a}=this,c=new mM(r.lineAt(s-i*1e3,Ja.ByHeight,o,0,0).from,r.lineAt(a+(1-i)*1e3,Ja.ByHeight,o,0,0).to);if(t){let{head:h}=t.range;if(h<c.from||h>c.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),v=r.lineAt(h,Ja.ByPos,o,0,0),x;t.y=="center"?x=(v.top+v.bottom)/2-m/2:t.y=="start"||t.y=="nearest"&&h<c.from?x=v.top:x=v.bottom-m,c=new mM(r.lineAt(x-1e3/2,Ja.ByHeight,o,0,0).from,r.lineAt(x+m+1e3/2,Ja.ByHeight,o,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new mM(this.heightMap.lineAt(i,Ja.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Ja.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Ja.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,Ja.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||r<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(i,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new TO(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,o=r>>1,s=r<<1;if(this.defaultTextDirection!=tl.LTR&&!i)return[];let a=[],c=(m,v,x,E)=>{if(v-m<o)return;let R=this.state.selection.main,P=[R.from];R.empty||P.push(R.to);for(let Q of P)if(Q>m&&Q<v){c(m,Q-10,x,E),c(Q+10,v,x,E);return}let z=B_e(e,Q=>Q.from>=x.from&&Q.to<=x.to&&Math.abs(Q.from-m)<o&&Math.abs(Q.to-v)<o&&!P.some(Y=>Q.from<Y&&Q.to>Y));if(!z){if(v<x.to&&t&&i&&t.visibleRanges.some(H=>H.from<=v&&H.to>=v)){let H=t.moveToLineBoundary(wn.cursor(v),!1,!0).head;H>m&&(v=H)}let Q=this.gapSize(x,m,v,E),Y=i||Q<2e6?Q:2e6;z=new TO(m,v,Q,Y)}a.push(z)},h=m=>{if(m.length<s||m.type!=Th.Text)return;let v=E_e(m.from,m.to,this.stateDeco);if(v.total<s)return;let x=this.scrollTarget?this.scrollTarget.range.head:null,E,R;if(i){let P=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,z,Q;if(x!=null){let Y=yM(v,x),H=((this.visibleBottom-this.visibleTop)/2+P)/m.height;z=Y-H,Q=Y+H}else z=(this.visibleTop-m.top-P)/m.height,Q=(this.visibleBottom-m.top+P)/m.height;E=gM(v,z),R=gM(v,Q)}else{let P=v.total*this.heightOracle.charWidth,z=r*this.heightOracle.charWidth,Q=0;if(P>2e6)for(let $ of e)$.from>=m.from&&$.from<m.to&&$.size!=$.displaySize&&$.from*this.heightOracle.charWidth+Q<this.pixelViewport.left&&(Q=$.size-$.displaySize);let Y=this.pixelViewport.left+Q,H=this.pixelViewport.right+Q,Z,J;if(x!=null){let $=yM(v,x),G=((H-Y)/2+z)/P;Z=$-G,J=$+G}else Z=(Y-z)/P,J=(H+z)/P;E=gM(v,Z),R=gM(v,J)}E>m.from&&c(m.from,E,m,v),R<m.to&&c(R,m.to,m,v)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(h):h(m);return a}gapSize(e,t,i,r){let o=yM(r,i)-yM(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){TO.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Br.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Vo.spans(t,this.viewport.from,this.viewport.to,{span(o,s){i.push({from:o,to:s})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let o=0;o<i.length&&!(r&8);o++){let s=this.visibleRanges[o],a=i[o];(s.from!=a.from||s.to!=a.to)&&(r|=4,e&&e.mapPos(s.from,-1)==a.from&&e.mapPos(s.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Y2(this.heightMap.lineAt(e,Ja.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Y2(this.heightMap.lineAt(this.scaler.fromDOM(e),Ja.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Y2(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class mM{constructor(e,t){this.from=e,this.to=t}}function E_e(n,e,t){let i=[],r=n,o=0;return Vo.spans(t,n,e,{span(){},point(s,a){s>r&&(i.push({from:r,to:s}),o+=s-r),r=a}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function gM({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:o,to:s}=e[r],a=s-o;if(i<=a)return o+i;i-=a}}function yM(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function B_e(n,e){for(let t of n)if(e(t))return t}const $j={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class nK{constructor(e,t,i){let r=0,o=0,s=0;this.viewports=i.map(({from:a,to:c})=>{let h=t.lineAt(a,Ja.ByPos,e,0,0).top,m=t.lineAt(c,Ja.ByPos,e,0,0).bottom;return r+=m-h,{from:a,to:c,top:h,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,r=o.domBottom}}eq(e){return e instanceof nK?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Y2(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Kg(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>Y2(r,e)):n._content)}const vM=Bi.define({combine:n=>n.join(" ")}),J9=Bi.define({combine:n=>n.indexOf(!0)>-1}),eR=rv.newName(),Hee=rv.newName(),Zee=rv.newName(),Xee={"&light":"."+Hee,"&dark":"."+Zee};function tR(n,e,t){return new rv(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const O_e=tR("."+eR,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Xee),I_e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},RO=yi.ie&&yi.ie_version<=11;class k_e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new dCe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(yi.ie&&yi.ie_version<=11||yi.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&yi.android&&e.constructor.EDIT_CONTEXT!==!1&&!(yi.chrome&&yi.chrome_version<126)&&(this.editContext=new R_e(e),e.state.facet(t1)&&(e.contentDOM.editContext=this.editContext.editContext)),RO&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(t1)?i.root.activeElement!=this.dom:!Aw(this.dom,r))return;let o=r.anchorNode&&i.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(yi.ie&&yi.ie_version<=11||yi.android&&yi.chrome)&&!i.state.selection.main.empty&&r.focusNode&&f3(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=u4(e.root);if(!t)return!1;let i=yi.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&T_e(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=Aw(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&pCe(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,I_e),RO&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),RO&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&q_(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let o of e){let s=this.readMutation(o);s&&(s.typeOver&&(r=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Aw(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new HCe(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=zee(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Hj(t,e.previousSibling||e.target.previousSibling,-1),r=Hj(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(t1)!=e.state.facet(t1)&&(e.view.contentDOM.editContext=e.state.facet(t1)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Hj(n,e,t){for(;e;){let i=ca.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function Zj(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=n.docView.domAtPos(n.state.selection.main.anchor);return f3(s.node,s.offset,r,o)&&([t,i,r,o]=[r,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:o}}function T_e(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return Zj(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?Zj(n,t):null}class R_e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:o,head:s}=r,a=this.toEditorPos(i.updateRangeStart),c=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let h=c-a>i.text.length;a==this.from&&o<this.from?a=o:c==this.to&&o>this.to&&(c=o);let m=Fee(e.state.sliceDoc(a,c),i.text,(h?r.from:r.to)-a,h?"end":null);if(!m){let x=wn.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));x.main.eq(r)||e.dispatch({selection:x,userEvent:"select"});return}let v={from:m.from+a,to:m.toA+a,insert:fs.of(i.text.slice(m.from,m.toB).split(`
`))};if((yi.mac||yi.android)&&v.from==s-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(v={from:a,to:c,insert:fs.of([i.text.replace("."," ")])}),this.pendingContextChange=v,!e.state.readOnly){let x=this.to-this.from+(v.to-v.from+v.insert.length);eK(e,v,wn.single(this.toEditorPos(i.selectionStart,x),this.toEditorPos(i.selectionEnd,x)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),v.from<v.to&&!v.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],o=null;for(let s=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);s<a;s++){let c=e.coordsForChar(s);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let o of i.getTextFormats()){let s=o.underlineStyle,a=o.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(a)){let c=this.toEditorPos(o.rangeStart),h=this.toEditorPos(o.rangeEnd);if(c<h){let m=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(Br.mark({attributes:{style:m}}).range(c,h))}}}e.dispatch({effects:Iee.of(Br.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=u4(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,s,a,c,h)=>{if(i)return;let m=h.length-(s-o);if(r&&s>=r.to)if(r.from==o&&r.to==s&&r.insert.eq(h)){r=this.pendingContextChange=null,t+=m,this.to+=m;return}else r=null,this.revertPending(e.state);if(o+=t,s+=t,s<=this.from)this.from+=m,this.to+=m;else if(o<this.to){if(o<this.from||s>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(s),h.toString()),this.to+=m}t+=m}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Mi{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(o=>i(o,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||fCe(e.parent)||document,this.viewState=new Vj(e.state||ds.create(e)),e.scrollTo&&e.scrollTo.is(dM)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(B_).map(r=>new OO(r));for(let r of this.plugins)r.update(this);this.observer=new k_e(this),this.inputState=new e_e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Oj(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof wc?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,o=this.state;for(let x of e){if(x.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=x.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,a=0,c=null;e.some(x=>x.annotation(qee))?(this.inputState.notifiedFocused=s,a=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,c=Yee(o,s),c||(a=1));let h=this.observer.delayedAndroidKey,m=null;if(h?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(m=null)):this.observer.clear(),o.facet(ds.phrases)!=this.state.facet(ds.phrases))return this.setState(o);r=vS.create(this,o,e),r.flags|=a;let v=this.viewState.scrollTarget;try{this.updateState=2;for(let x of e){if(v&&(v=v.map(x.changes)),x.scrollIntoView){let{main:E}=x.state.selection;v=new Y_(E.empty?E:wn.cursor(E.head,E.head>E.anchor?-1:1))}for(let E of x.effects)E.is(dM)&&(v=E.value.clip(this.state))}this.viewState.update(r,v),this.bidiCache=CS.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(W2)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(x=>x.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(vM)!=r.state.facet(vM)&&(this.viewState.mustMeasureContent=!0),(t||i||v||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let x of this.state.facet($9))try{x(r)}catch(E){kh(this.state,E,"update listener")}(c||m)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),m&&!zee(this,m)&&h.force&&q_(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Vj(e),this.plugins=e.facet(B_).map(i=>new OO(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Oj(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(B_),i=e.state.facet(B_);if(t!=i){let r=[];for(let o of i){let s=t.indexOf(o);if(s<0)r.push(new OO(o));else{let a=this.plugins[s];a.mustUpdate=e,r.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){kh(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:s}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(s<0)if(see(i))o=-1,s=this.viewState.heightMap.height;else{let E=this.viewState.scrollAnchorAt(r);o=E.from,s=E.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];c&4||([this.measureRequests,h]=[h,this.measureRequests]);let m=h.map(E=>{try{return E.read(this)}catch(R){return kh(this.state,R),Xj}}),v=vS.create(this,this.state,[]),x=!1;v.flags|=c,t?t.flags|=c:t=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),x=this.docView.update(v),x&&this.docViewUpdate());for(let E=0;E<h.length;E++)if(m[E]!=Xj)try{let R=h[E];R.write&&R.write(m[E],this)}catch(R){kh(this.state,R)}if(x&&this.docView.updateSelection(!0),!v.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}else{let R=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-s;if(R>1||R<-1){r=r+R,i.scrollTop=r/this.scaleY,s=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet($9))a(t)}get themeClasses(){return eR+" "+(this.state.facet(J9)?Zee:Hee)+" "+this.state.facet(vM)}updateAttrs(){let e=Jj(this,kee,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(t1)?"true":"false",class:"cm-content",style:`${yi.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Jj(this,XP,t);let i=this.observer.ignore(()=>{let r=Q9(this.contentDOM,this.contentAttrs,t),o=Q9(this.dom,this.editorAttrs,e);return r||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(Mi.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(W2);let e=this.state.facet(Mi.cspNonce);rv.mount(this.root,this.styleModules.concat(O_e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return kO(this,e,Dj(this,e,t,i))}moveByGroup(e,t){return kO(this,e,Dj(this,e,t,i=>WCe(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return wn.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return QCe(this,e,t,i)}moveVertically(e,t,i){return kO(this,e,qCe(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Kee(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r),s=o[Wy.find(o,e-r.from,-1,t)];return l6(i,s.dir==tl.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Eee)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>D_e)return vee(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||yee(o.isolates,i=Bj(this,e))))return o.order;i||(i=Bj(this,e));let r=BCe(e.text,t,i);return this.bidiCache.push(new CS(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||yi.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{ree(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return dM.of(new Y_(typeof e=="number"?wn.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return dM.of(new Y_(wn.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return wu.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return wu.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=rv.newName(),r=[vM.of(i),W2.of(tR(`.${i}`,e))];return t&&t.dark&&r.push(J9.of(!0)),r}static baseTheme(e){return nC.lowest(W2.of(tR("."+eR,e,Xee)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&ca.get(i)||ca.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}Mi.styleModule=W2;Mi.inputHandler=wee;Mi.clipboardInputFilter=HP;Mi.clipboardOutputFilter=ZP;Mi.scrollHandler=Oee;Mi.focusChangeEffect=See;Mi.perLineTextDirection=Eee;Mi.exceptionSink=Mee;Mi.updateListener=$9;Mi.editable=t1;Mi.mouseSelectionStyle=xee;Mi.dragMovesSelection=_ee;Mi.clickAddsSelectionRange=Cee;Mi.decorations=A4;Mi.outerDecorations=Tee;Mi.atomicRanges=m5;Mi.bidiIsolatedRanges=Ree;Mi.scrollMargins=Dee;Mi.darkTheme=J9;Mi.cspNonce=Bi.define({combine:n=>n.length?n[0]:""});Mi.contentAttributes=XP;Mi.editorAttributes=kee;Mi.lineWrapping=Mi.contentAttributes.of({class:"cm-lineWrapping"});Mi.announce=ro.define();const D_e=4096,Xj={};class CS{constructor(e,t,i,r,o,s){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=o,this.order=s}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:tl.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==r&&!t.touchesRange(s.from,s.to)&&i.push(new CS(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function Jj(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let o=i[r],s=typeof o=="function"?o(n):o;s&&G9(s,t)}return t}const P_e=yi.mac?"mac":yi.windows?"win":yi.linux?"linux":"key";function K_e(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,o,s,a;for(let c=0;c<t.length-1;++c){const h=t[c];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))s=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(i="Alt-"+i),o&&(i="Ctrl-"+i),a&&(i="Meta-"+i),s&&(i="Shift-"+i),i}function bM(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const U_e=nC.default(Mi.domEventHandlers({keydown(n,e){return ete(Jee(e.state),n,e,"editor")}})),iK=Bi.define({enables:U_e}),eN=new WeakMap;function Jee(n){let e=n.facet(iK),t=eN.get(e);return t||eN.set(e,t=F_e(e.reduce((i,r)=>i.concat(r),[]))),t}function L_e(n,e,t){return ete(Jee(n.state),e,n,t)}let Ry=null;const z_e=4e3;function F_e(n,e=P_e){let t=Object.create(null),i=Object.create(null),r=(s,a)=>{let c=i[s];if(c==null)i[s]=a;else if(c!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,c,h,m)=>{var v,x;let E=t[s]||(t[s]=Object.create(null)),R=a.split(/ (?!$)/).map(Q=>K_e(Q,e));for(let Q=1;Q<R.length;Q++){let Y=R.slice(0,Q).join(" ");r(Y,!0),E[Y]||(E[Y]={preventDefault:!0,stopPropagation:!1,run:[H=>{let Z=Ry={view:H,prefix:Y,scope:s};return setTimeout(()=>{Ry==Z&&(Ry=null)},z_e),!0}]})}let P=R.join(" ");r(P,!1);let z=E[P]||(E[P]={preventDefault:!1,stopPropagation:!1,run:((x=(v=E._any)===null||v===void 0?void 0:v.run)===null||x===void 0?void 0:x.slice())||[]});c&&z.run.push(c),h&&(z.preventDefault=!0),m&&(z.stopPropagation=!0)};for(let s of n){let a=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let h of a){let m=t[h]||(t[h]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:v}=s;for(let x in m)m[x].run.push(E=>v(E,nR))}let c=s[e]||s.key;if(c)for(let h of a)o(h,c,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(h,"Shift-"+c,s.shift,s.preventDefault,s.stopPropagation)}return t}let nR=null;function ete(n,e,t,i){nR=e;let r=lCe(e),o=xd(r,0),s=Pg(o)==r.length&&r!=" ",a="",c=!1,h=!1,m=!1;Ry&&Ry.view==t&&Ry.scope==i&&(a=Ry.prefix+" ",Nee.indexOf(e.keyCode)<0&&(h=!0,Ry=null));let v=new Set,x=z=>{if(z){for(let Q of z.run)if(!v.has(Q)&&(v.add(Q),Q(t)))return z.stopPropagation&&(m=!0),!0;z.preventDefault&&(z.stopPropagation&&(m=!0),h=!0)}return!1},E=n[i],R,P;return E&&(x(E[a+bM(r,e,!s)])?c=!0:s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(yi.windows&&e.ctrlKey&&e.altKey)&&!(yi.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(R=ov[e.keyCode])&&R!=r?(x(E[a+bM(R,e,!0)])||e.shiftKey&&(P=l4[e.keyCode])!=r&&P!=R&&x(E[a+bM(P,e,!1)]))&&(c=!0):s&&e.shiftKey&&x(E[a+bM(r,e,!0)])&&(c=!0),!c&&x(E._any)&&(c=!0)),h&&(c=!0),c&&m&&e.stopPropagation(),nR=null,c}class g5{constructor(e,t,i,r,o){this.className=e,this.left=t,this.top=i,this.width=r,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let o=tte(e);return[new g5(t,r.left-o.left,r.top-o.top,null,r.bottom-r.top)]}else return j_e(e,t,i)}}function tte(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==tl.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function tN(n,e,t,i){let r=n.coordsAtPos(e,t*2);if(!r)return i;let o=n.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,a=n.posAtCoords({x:o.left+1,y:s}),c=n.posAtCoords({x:o.right-1,y:s});return a==null||c==null?i:{from:Math.max(i.from,Math.min(a,c)),to:Math.min(i.to,Math.max(a,c))}}function j_e(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),o=n.textDirection==tl.LTR,s=n.contentDOM,a=s.getBoundingClientRect(),c=tte(n),h=s.querySelector(".cm-line"),m=h&&window.getComputedStyle(h),v=a.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),x=a.right-(m?parseInt(m.paddingRight):0),E=Z9(n,i,1),R=Z9(n,r,-1),P=E.type==Th.Text?E:null,z=R.type==Th.Text?R:null;if(P&&(n.lineWrapping||E.widgetLineBreaks)&&(P=tN(n,i,1,P)),z&&(n.lineWrapping||R.widgetLineBreaks)&&(z=tN(n,r,-1,z)),P&&z&&P.from==z.from&&P.to==z.to)return Y(H(t.from,t.to,P));{let J=P?H(t.from,null,P):Z(E,!1),$=z?H(null,t.to,z):Z(R,!0),G=[];return(P||E).to<(z||R).from-(P&&z?1:0)||E.widgetLineBreaks>1&&J.bottom+n.defaultLineHeight/2<$.top?G.push(Q(v,J.bottom,x,$.top)):J.bottom<$.top&&n.elementAtHeight((J.bottom+$.top)/2).type==Th.Text&&(J.bottom=$.top=(J.bottom+$.top)/2),Y(J).concat(G).concat(Y($))}function Q(J,$,G,oe){return new g5(e,J-c.left,$-c.top,G-J,oe-$)}function Y({top:J,bottom:$,horizontal:G}){let oe=[];for(let ue=0;ue<G.length;ue+=2)oe.push(Q(G[ue],J,G[ue+1],$));return oe}function H(J,$,G){let oe=1e9,ue=-1e9,xe=[];function ge(ke,je,Be,Ye,At){let yt=n.coordsAtPos(ke,ke==G.to?-2:2),Le=n.coordsAtPos(Be,Be==G.from?2:-2);!yt||!Le||(oe=Math.min(yt.top,Le.top,oe),ue=Math.max(yt.bottom,Le.bottom,ue),At==tl.LTR?xe.push(o&&je?v:yt.left,o&&Ye?x:Le.right):xe.push(!o&&Ye?v:Le.left,!o&&je?x:yt.right))}let Ie=J??G.from,Me=$??G.to;for(let ke of n.visibleRanges)if(ke.to>Ie&&ke.from<Me)for(let je=Math.max(ke.from,Ie),Be=Math.min(ke.to,Me);;){let Ye=n.state.doc.lineAt(je);for(let At of n.bidiSpans(Ye)){let yt=At.from+Ye.from,Le=At.to+Ye.from;if(yt>=Be)break;Le>je&&ge(Math.max(yt,je),J==null&&yt<=Ie,Math.min(Le,Be),$==null&&Le>=Me,At.dir)}if(je=Ye.to+1,je>=Be)break}return xe.length==0&&ge(Ie,J==null,Me,$==null,n.textDirection),{top:oe,bottom:ue,horizontal:xe}}function Z(J,$){let G=a.top+($?J.top:J.bottom);return{top:G,bottom:G,horizontal:[]}}}function N_e(n,e){return n.constructor==e.constructor&&n.eq(e)}class G_e{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(fw)!=e.state.facet(fw)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(fw);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!N_e(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,yi.safari&&yi.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const fw=Bi.define();function nte(n){return[wu.define(e=>new G_e(e,n)),fw.of(n)]}const h4=Bi.define({combine(n){return Bm(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Q_e(n={}){return[h4.of(n),W_e,q_e,Y_e,Bee.of(!0)]}function ite(n){return n.startState.facet(h4)!=n.state.facet(h4)}const W_e=nte({above:!0,markers(n){let{state:e}=n,t=e.facet(h4),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty||t.drawRangeCursor){let s=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:wn.cursor(r.head,r.head>r.anchor?-1:1);for(let c of g5.forRange(n,s,a))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=ite(n);return t&&nN(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){nN(e.state,n)},class:"cm-cursorLayer"});function nN(n,e){e.style.animationDuration=n.facet(h4).cursorBlinkRate+"ms"}const q_e=nte({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:g5.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||ite(n)},class:"cm-selectionLayer"}),Y_e=nC.highest(Mi.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),rte=ro.define({map(n,e){return n==null?null:e.mapPos(n)}}),V2=Sc.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(rte)?i.value:t,n)}}),V_e=wu.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(V2);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(V2)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(V2),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(V2)!=n&&this.view.dispatch({effects:rte.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function $_e(){return[V2,V_e]}function iN(n,e,t,i,r){e.lastIndex=0;for(let o=n.iterRange(t,i),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)r(s+a.index,a)}function H_e(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:o}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}class Z_e{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,c,h,m)=>r(m,h,h+a[0].length,a,c);else if(typeof i=="function")this.addMatch=(a,c,h,m)=>{let v=i(a,c,h);v&&m(h,h+a[0].length,v)};else if(i)this.addMatch=(a,c,h,m)=>m(h,h+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new f1,i=t.add.bind(t);for(let{from:r,to:o}of H_e(e,this.maxLength))iN(e.state.doc,this.regexp,r,o,(s,a)=>this.addMatch(a,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,c)=>{c>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(c,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let o of e.visibleRanges){let s=Math.max(o.from,i),a=Math.min(o.to,r);if(a>=s){let c=e.state.doc.lineAt(s),h=c.to<a?e.state.doc.lineAt(a):c,m=Math.max(o.from,c.from),v=Math.min(o.to,h.to);if(this.boundary){for(;s>c.from;s--)if(this.boundary.test(c.text[s-1-c.from])){m=s;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){v=a;break}}let x=[],E,R=(P,z,Q)=>x.push(Q.range(P,z));if(c==h)for(this.regexp.lastIndex=m-c.from;(E=this.regexp.exec(c.text))&&E.index<v-c.from;)this.addMatch(E,e,E.index+c.from,R);else iN(e.state.doc,this.regexp,m,v,(P,z)=>this.addMatch(z,e,P,R));t=t.update({filterFrom:m,filterTo:v,filter:(P,z)=>P<m||z>v,add:x})}}return t}}const iR=/x/.unicode!=null?"gu":"g",X_e=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,iR),J_e={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let DO=null;function exe(){var n;if(DO==null&&typeof document<"u"&&document.body){let e=document.body.style;DO=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return DO||!1}const pw=Bi.define({combine(n){let e=Bm(n,{render:null,specialChars:X_e,addSpecialChars:null});return(e.replaceTabs=!exe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,iR)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,iR)),e}});function txe(n={}){return[pw.of(n),nxe()]}let rN=null;function nxe(){return rN||(rN=wu.fromClass(class{constructor(n){this.view=n,this.decorations=Br.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(pw)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new Z_e({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,o=xd(e[0],0);if(o==9){let s=r.lineAt(i),a=t.state.tabSize,c=Fx(s.text,a,i-s.from);return Br.replace({widget:new sxe((a-c%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Br.replace({widget:new oxe(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(pw);n.startState.facet(pw)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const ixe="";function rxe(n){return n>=32?ixe:n==10?"":String.fromCharCode(9216+n)}class oxe extends hv{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=rxe(this.code),i=e.state.phrase("Control character")+" "+(J_e[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class sxe extends hv{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function axe(){return uxe}const lxe=Br.line({class:"cm-activeLine"}),uxe=wu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(lxe.range(r.from)),e=r.from)}return Br.set(t)}},{decorations:n=>n.decorations}),rR=2e3;function cxe(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),o=[];if(e.off>rR||t.off>rR||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let c=i;c<=r;c++){let h=n.doc.line(c);h.length<=a&&o.push(wn.range(h.from+s,h.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let c=i;c<=r;c++){let h=n.doc.line(c),m=P9(h.text,s,n.tabSize,!0);if(m<0)o.push(wn.cursor(h.to));else{let v=P9(h.text,a,n.tabSize);o.push(wn.range(h.from+m,h.from+v))}}}return o}function Axe(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function oN(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,o=r>rR?-1:r==i.length?Axe(n,e.clientX):Fx(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:r}}function hxe(n,e){let t=oN(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(t.line).from),s=r.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},i=i.map(r.changes)}},get(r,o,s){let a=oN(n,r);if(!a)return i;let c=cxe(n.state,t,a);return c.length?s?wn.create(c.concat(i.ranges)):wn.create(c):i}}:null}function dxe(n){let e=(t=>t.altKey&&t.button==0);return Mi.mouseSelectionStyle.of((t,i)=>e(i)?hxe(t,i):null)}const fxe={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},pxe={style:"cursor: crosshair"};function mxe(n={}){let[e,t]=fxe[n.key||"Alt"],i=wu.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,Mi.contentAttributes.of(r=>{var o;return!((o=r.plugin(i))===null||o===void 0)&&o.isDown?pxe:null})]}const y2="-10000px";class ote{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let o=null;this.tooltipViews=this.tooltips.map(s=>o=i(s,o))}update(e,t){var i;let r=e.state.facet(this.facet),o=r.filter(c=>c);if(r===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let s=[],a=t?[]:null;for(let c=0;c<o.length;c++){let h=o[c],m=-1;if(h){for(let v=0;v<this.tooltips.length;v++){let x=this.tooltips[v];x&&x.create==h.create&&(m=v)}if(m<0)s[c]=this.createTooltipView(h,c?s[c-1]:null),a&&(a[c]=!!h.above);else{let v=s[c]=this.tooltipViews[m];a&&(a[c]=t[m]),v.update&&v.update(e)}}}for(let c of this.tooltipViews)s.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(a.forEach((c,h)=>t[h]=c),t.length=a.length),this.input=r,this.tooltips=o,this.tooltipViews=s,!0}}function gxe(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const PO=Bi.define({combine:n=>{var e,t,i;return{position:yi.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||gxe}}}),sN=new WeakMap,rK=wu.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(PO);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new ote(n,c6,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(PO);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=y2,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(yi.gecko)t=o.offsetParent!=this.container.ownerDocument.body;else if(o.style.top==y2&&o.style.left=="0px"){let s=o.getBoundingClientRect();t=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(t||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(n=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=JP(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,s)=>{let a=this.manager.tooltipViews[s];return a.getCoords?a.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(PO).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:i,scaleX:r,scaleY:o}=n,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let c=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:m}=h,v=n.pos[a],x=n.size[a];if(!v||c.clip!==!1&&(v.bottom<=Math.max(t.top,i.top)||v.top>=Math.min(t.bottom,i.bottom)||v.right<Math.max(t.left,i.left)-.1||v.left>Math.min(t.right,i.right)+.1)){m.style.top=y2;continue}let E=c.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,R=E?7:0,P=x.right-x.left,z=(e=sN.get(h))!==null&&e!==void 0?e:x.bottom-x.top,Q=h.offset||vxe,Y=this.view.textDirection==tl.LTR,H=x.width>i.right-i.left?Y?i.left:i.right-x.width:Y?Math.max(i.left,Math.min(v.left-(E?14:0)+Q.x,i.right-P)):Math.min(Math.max(i.left,v.left-P+(E?14:0)-Q.x),i.right-P),Z=this.above[a];!c.strictSide&&(Z?v.top-z-R-Q.y<i.top:v.bottom+z+R+Q.y>i.bottom)&&Z==i.bottom-v.bottom>v.top-i.top&&(Z=this.above[a]=!Z);let J=(Z?v.top-i.top:i.bottom-v.bottom)-R;if(J<z&&h.resize!==!1){if(J<this.view.defaultLineHeight){m.style.top=y2;continue}sN.set(h,z),m.style.height=(z=J)/o+"px"}else m.style.height&&(m.style.height="");let $=Z?v.top-z-R-Q.y:v.bottom+R+Q.y,G=H+P;if(h.overlap!==!0)for(let oe of s)oe.left<G&&oe.right>H&&oe.top<$+z&&oe.bottom>$&&($=Z?oe.top-z-2-R:oe.bottom+R+2);if(this.position=="absolute"?(m.style.top=($-n.parent.top)/o+"px",aN(m,(H-n.parent.left)/r)):(m.style.top=$/o+"px",aN(m,H/r)),E){let oe=v.left+(Y?Q.x:-Q.x)-(H+14-7);E.style.left=oe/r+"px"}h.overlap!==!0&&s.push({left:H,top:$,right:G,bottom:$+z}),m.classList.toggle("cm-tooltip-above",Z),m.classList.toggle("cm-tooltip-below",!Z),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=y2}},{eventObservers:{scroll(){this.maybeMeasure()}}});function aN(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}const yxe=Mi.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),vxe={x:0,y:0},c6=Bi.define({enables:[rK,yxe]}),_S=Bi.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class A6{static create(e){return new A6(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ote(e,_S,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const bxe=c6.compute([_S],n=>{let e=n.facet(_S);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:A6.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class Cxe{constructor(e,t,i,r,o){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,o=1;if(i instanceof Qy)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(r)).find(m=>m.from<=r&&m.to>=r),h=c&&c.dir==tl.RTL?-1:1;o=t.x<a.left?-h:h}let s=this.source(e,r,o);if(s?.then){let a=this.pending={pos:r};s.then(c=>{this.pending==a&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>kh(e.state,c,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(rK),t=e?e.manager.tooltips.findIndex(i=>i.create==A6.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:o}=this;if(r.length&&o&&!_xe(o.dom,e)||this.pending){let{pos:s}=r[0]||this.pending,a=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:s;(s==a?this.view.posAtCoords(this.lastMove)!=s:!xxe(this.view,s,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const CM=4;function _xe(n,e){let{left:t,right:i,top:r,bottom:o}=n.getBoundingClientRect(),s;if(s=n.querySelector(".cm-tooltip-arrow")){let a=s.getBoundingClientRect();r=Math.min(a.top,r),o=Math.max(a.bottom,o)}return e.clientX>=t-CM&&e.clientX<=i+CM&&e.clientY>=r-CM&&e.clientY<=o+CM}function xxe(n,e,t,i,r,o){let s=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,a)<r)return!1;let c=n.posAtCoords({x:i,y:r},!1);return c>=e&&c<=t}function Mxe(n,e={}){let t=ro.define(),i=Sc.define({create(){return[]},update(r,o){if(r.length&&(e.hideOnChange&&(o.docChanged||o.selection)?r=[]:e.hideOn&&(r=r.filter(s=>!e.hideOn(o,s))),o.docChanged)){let s=[];for(let a of r){let c=o.changes.mapPos(a.pos,-1,Oh.TrackDel);if(c!=null){let h=Object.assign(Object.create(null),a);h.pos=c,h.end!=null&&(h.end=o.changes.mapPos(h.end)),s.push(h)}}r=s}for(let s of o.effects)s.is(t)&&(r=s.value),s.is(wxe)&&(r=[]);return r},provide:r=>_S.from(r)});return{active:i,extension:[i,wu.define(r=>new Cxe(r,n,i,t,e.hoverTime||300)),bxe]}}function ste(n,e){let t=n.plugin(rK);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const wxe=ro.define(),lN=Bi.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function d4(n,e){let t=n.plugin(ate),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const ate=wu.fromClass(class{constructor(n){this.input=n.state.facet(f4),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(lN);this.top=new _M(n,!0,e.topContainer),this.bottom=new _M(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(lN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new _M(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new _M(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(f4);if(t!=this.input){let i=t.filter(c=>c),r=[],o=[],s=[],a=[];for(let c of i){let h=this.specs.indexOf(c),m;h<0?(m=c(n.view),a.push(m)):(m=this.panels[h],m.update&&m.update(n)),r.push(m),(m.top?o:s).push(m)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let c of a)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Mi.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class _M{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=uN(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=uN(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function uN(n){let e=n.nextSibling;return n.remove(),e}const f4=Bi.define({enables:ate});class r0 extends Gb{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}r0.prototype.elementClass="";r0.prototype.toDOM=void 0;r0.prototype.mapMode=Oh.TrackBefore;r0.prototype.startSide=r0.prototype.endSide=-1;r0.prototype.point=!0;const mw=Bi.define(),Sxe=Bi.define(),Exe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Vo.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},g3=Bi.define();function lte(n){return[ute(),g3.of({...Exe,...n})]}const cN=Bi.define({combine:n=>n.some(e=>e)});function ute(n){return[Bxe]}const Bxe=wu.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(g3).map(e=>new hN(n,e)),this.fixed=!n.state.facet(cN);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(cN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Vo.iter(this.view.state.facet(mw),this.view.viewport.from),i=[],r=this.gutters.map(o=>new Oxe(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let s=!0;for(let a of o.type)if(a.type==Th.Text&&s){oR(t,i,a.from);for(let c of r)c.line(this.view,a,i);s=!1}else if(a.widget)for(let c of r)c.widget(this.view,a)}else if(o.type==Th.Text){oR(t,i,o.from);for(let s of r)s.line(this.view,o,i)}else if(o.widget)for(let s of r)s.widget(this.view,o);for(let o of r)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(g3),t=n.state.facet(g3),i=n.docChanged||n.heightChanged||n.viewportChanged||!Vo.eq(n.startState.facet(mw),n.state.facet(mw),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let o of t){let s=e.indexOf(o);s<0?r.push(new hN(this.view,o)):(this.gutters[s].update(n),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Mi.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==tl.LTR?{left:i,right:r}:{right:i,left:r}})});function AN(n){return Array.isArray(n)?n:[n]}function oR(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class Oxe{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Vo.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,o=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==r.elements.length){let a=new cte(e,s,o,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,s,o,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];oR(this.cursor,r,t.from),i.length&&(r=r.concat(i));let o=this.gutter.config.lineMarker(e,t,r);o&&r.unshift(o);let s=this.gutter;r.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let o of e.state.facet(Sxe)){let s=o(e,t.widget,t);s&&(r||(r=[])).push(s)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class hN{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let o=r.target,s;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();s=(c.top+c.bottom)/2}else s=r.clientY;let a=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=AN(t.markers(e)),t.initialSpacer&&(this.spacer=new cte(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=AN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Vo.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class cte{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Ixe(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,c=o<t.length?t[o++]:null,h=!1;if(c){let m=c.elementClass;m&&(i+=" "+m);for(let v=s;v<this.markers.length;v++)if(this.markers[v].compare(c)){a=v,h=!0;break}}else a=this.markers.length;for(;s<a;){let m=this.markers[s++];if(m.toDOM){m.destroy(r);let v=r.nextSibling;r.remove(),r=v}}if(!c)break;c.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(c.toDOM(e),r)),h&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function Ixe(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const kxe=Bi.define(),Txe=Bi.define(),O_=Bi.define({combine(n){return Bm(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let o=i[r],s=t[r];i[r]=o?(a,c,h)=>o(a,c,h)||s(a,c,h):s}return i}})}});class KO extends r0{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function UO(n,e){return n.state.facet(O_).formatNumber(e,n.state)}const Rxe=g3.compute([O_],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(kxe)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new KO(UO(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let r of e.state.facet(Txe)){let o=r(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(O_)!=e.state.facet(O_),initialSpacer(e){return new KO(UO(e,dN(e.state.doc.lines)))},updateSpacer(e,t){let i=UO(t.view,dN(t.view.state.doc.lines));return i==e.number?e:new KO(i)},domEventHandlers:n.facet(O_).domEventHandlers,side:"before"}));function Dxe(n={}){return[O_.of(n),ute(),Rxe]}function dN(n){let e=9;for(;e<n;)e=e*10+9;return e}const Pxe=new class extends r0{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Kxe=mw.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(Pxe.range(r)))}return Vo.of(e)});function Uxe(){return Kxe}const Ate=1024;let Lxe=0;class LO{constructor(e,t){this.from=e,this.to=t}}class Eo{constructor(e={}){this.id=Lxe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Id.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Eo.closedBy=new Eo({deserialize:n=>n.split(" ")});Eo.openedBy=new Eo({deserialize:n=>n.split(" ")});Eo.group=new Eo({deserialize:n=>n.split(" ")});Eo.isolate=new Eo({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Eo.contextHash=new Eo({perNode:!0});Eo.lookAhead=new Eo({perNode:!0});Eo.mounted=new Eo({perNode:!0});class xS{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Eo.mounted.id]}}const zxe=Object.create(null);class Id{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):zxe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Id(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Eo.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(Eo.group),o=-1;o<(r?r.length:0);o++){let s=t[o<0?i.name:r[o]];if(s)return s}}}}Id.none=new Id("",Object.create(null),0,8);class oK{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let o of e){let s=o(i);if(s){r||(r=Object.assign({},i.props));let a=s[1],c=s[0];c.combine&&c.id in r&&(a=c.combine(r[c.id],a)),r[c.id]=a}}t.push(r?new Id(i.name,r,i.id,i.flags):i)}return new oK(t)}}const xM=new WeakMap,fN=new WeakMap;var $c;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})($c||($c={}));class ec{constructor(e,t,i,r,o){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=xS.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new aR(this.topNode,e)}cursorAt(e,t=0,i=0){let r=xM.get(this)||this.topNode,o=new aR(r);return o.moveTo(e,t),xM.set(this,o._tree),o}get topNode(){return new yp(this,0,0,null)}resolve(e,t=0){let i=p4(xM.get(this)||this.topNode,e,t,!1);return xM.set(this,i),i}resolveInner(e,t=0){let i=p4(fN.get(this)||this.topNode,e,t,!0);return fN.set(this,i),i}resolveStack(e,t=0){return Nxe(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:o=this.length}=e,s=e.mode||0,a=(s&$c.IncludeAnonymous)>0;for(let c=this.cursor(s|$c.IncludeAnonymous);;){let h=!1;if(c.from<=o&&c.to>=r&&(!a&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;h=!0}for(;h&&i&&(a||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:lK(Id.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new ec(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new ec(Id.none,t,i,r)))}static build(e){return Gxe(e)}}ec.empty=new ec(Id.none,[],[],0);class sK{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new sK(this.buffer,this.index)}}class av{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Id.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,i,r,o){let{buffer:s}=this,a=-1;for(let c=e;c!=t&&!(hte(o,r,s[c+1],s[c+2])&&(a=c,i>0));c=s[c+3]);return a}slice(e,t,i){let r=this.buffer,o=new Uint16Array(t-e),s=0;for(let a=e,c=0;a<t;){o[c++]=r[a++],o[c++]=r[a++]-i;let h=o[c++]=r[a++]-i;o[c++]=r[a++]-e,s=Math.max(s,h)}return new av(o,s,this.set)}}function hte(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function p4(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!i&&n instanceof yp&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=i?0:$c.IgnoreOverlays;if(i)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof yp&&s.index<0&&((r=a.enter(e,t,o))===null||r===void 0?void 0:r.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class dte{cursor(e=0){return new aR(this,e)}getChild(e,t=null,i=null){let r=pN(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return pN(this,e,t,i)}resolve(e,t=0){return p4(this,e,t,!1)}resolveInner(e,t=0){return p4(this,e,t,!0)}matchContext(e){return sR(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class yp extends dte{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,o=0){for(let s=this;;){for(let{children:a,positions:c}=s._tree,h=t>0?a.length:-1;e!=h;e+=t){let m=a[e],v=c[e]+s.from;if(hte(r,i,v,v+m.length)){if(m instanceof av){if(o&$c.ExcludeBuffers)continue;let x=m.findChild(0,m.buffer.length,t,i-v,r);if(x>-1)return new qy(new Fxe(s,m,e,v),null,x)}else if(o&$c.IncludeAnonymous||!m.type.isAnonymous||aK(m)){let x;if(!(o&$c.IgnoreMounts)&&(x=xS.get(m))&&!x.overlay)return new yp(x.tree,v,e,s);let E=new yp(m,v,e,s);return o&$c.IncludeAnonymous||!E.type.isAnonymous?E:E.nextChild(t<0?m.children.length-1:0,t,i,r)}}}if(o&$c.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&$c.IgnoreOverlays)&&(r=xS.get(this._tree))&&r.overlay){let o=e-this.from;for(let{from:s,to:a}of r.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new yp(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function pN(n,e,t,i){let r=n.cursor(),o=[];if(!r.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=r.type.is(t),!r.nextSibling())return o}for(;;){if(i!=null&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return i==null?o:[]}}function sR(n,e,t=e.length-1){for(let i=n;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class Fxe{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class qy extends dte{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new qy(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&$c.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new qy(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new qy(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new qy(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,o=i.buffer[this.index+3];if(o>r){let s=i.buffer[this.index+1];e.push(i.slice(r,o,s)),t.push(0)}return new ec(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function fte(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let i=t instanceof yp&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new jxe(r,t)}class jxe{constructor(e,t){this.heads=e,this.node=t}get next(){return fte(this.heads)}}function Nxe(n,e,t){let i=n.resolveInner(e,t),r=null;for(let o=i instanceof yp?i:i.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(r||(r=[i])).push(s.resolve(e,t)),o=s}else{let s=xS.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let a=new yp(s.tree,s.overlay[0].from+o.from,-1,o);(r||(r=[i])).push(p4(a,e,t,!1))}}return r?fte(r):i}class aR{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof yp)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof yp?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&$c.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$c.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$c.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,s=e<0?-1:i._tree.children.length;o!=s;o+=e){let a=i._tree.children[o];if(this.mode&$c.IncludeAnonymous||a instanceof av||!a.type.isAnonymous||aK(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==r){if(r==this.index)return s;t=s,i=o+1;break e}r=this.stack[--o]}for(let r=i;r<this.stack.length;r++)t=new qy(this.buffer,t,this.stack[r]);return this.bufferNode=new qy(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return sR(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return sR(this._tree,e,r);let s=i[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[r]&&e[r]!=s.name)return!1;r--}}return!0}}function aK(n){return n.children.some(e=>e instanceof av||!e.type.isAnonymous||aK(e))}function Gxe(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=Ate,reused:o=[],minRepeatType:s=i.types.length}=n,a=Array.isArray(t)?new sK(t,t.length):t,c=i.types,h=0,m=0;function v(J,$,G,oe,ue,xe){let{id:ge,start:Ie,end:Me,size:ke}=a,je=m,Be=h;if(ke<0)if(a.next(),ke==-1){let De=o[ge];G.push(De),oe.push(Ie-J);return}else if(ke==-3){h=ge;return}else if(ke==-4){m=ge;return}else throw new RangeError(`Unrecognized record size: ${ke}`);let Ye=c[ge],At,yt,Le=Ie-J;if(Me-Ie<=r&&(yt=z(a.pos-$,ue))){let De=new Uint16Array(yt.size-yt.skip),Ge=a.pos-yt.size,Te=De.length;for(;a.pos>Ge;)Te=Q(yt.start,De,Te);At=new av(De,Me-yt.start,i),Le=yt.start-J}else{let De=a.pos-ke;a.next();let Ge=[],Te=[],xt=ge>=s?ge:-1,st=0,Tt=Me;for(;a.pos>De;)xt>=0&&a.id==xt&&a.size>=0?(a.end<=Tt-r&&(R(Ge,Te,Ie,st,a.end,Tt,xt,je,Be),st=Ge.length,Tt=a.end),a.next()):xe>2500?x(Ie,De,Ge,Te):v(Ie,De,Ge,Te,xt,xe+1);if(xt>=0&&st>0&&st<Ge.length&&R(Ge,Te,Ie,st,Ie,Tt,xt,je,Be),Ge.reverse(),Te.reverse(),xt>-1&&st>0){let Lt=E(Ye,Be);At=lK(Ye,Ge,Te,0,Ge.length,0,Me-Ie,Lt,Lt)}else At=P(Ye,Ge,Te,Me-Ie,je-Me,Be)}G.push(At),oe.push(Le)}function x(J,$,G,oe){let ue=[],xe=0,ge=-1;for(;a.pos>$;){let{id:Ie,start:Me,end:ke,size:je}=a;if(je>4)a.next();else{if(ge>-1&&Me<ge)break;ge<0&&(ge=ke-r),ue.push(Ie,Me,ke),xe++,a.next()}}if(xe){let Ie=new Uint16Array(xe*4),Me=ue[ue.length-2];for(let ke=ue.length-3,je=0;ke>=0;ke-=3)Ie[je++]=ue[ke],Ie[je++]=ue[ke+1]-Me,Ie[je++]=ue[ke+2]-Me,Ie[je++]=je;G.push(new av(Ie,ue[2]-Me,i)),oe.push(Me-J)}}function E(J,$){return(G,oe,ue)=>{let xe=0,ge=G.length-1,Ie,Me;if(ge>=0&&(Ie=G[ge])instanceof ec){if(!ge&&Ie.type==J&&Ie.length==ue)return Ie;(Me=Ie.prop(Eo.lookAhead))&&(xe=oe[ge]+Ie.length+Me)}return P(J,G,oe,ue,xe,$)}}function R(J,$,G,oe,ue,xe,ge,Ie,Me){let ke=[],je=[];for(;J.length>oe;)ke.push(J.pop()),je.push($.pop()+G-ue);J.push(P(i.types[ge],ke,je,xe-ue,Ie-xe,Me)),$.push(ue-G)}function P(J,$,G,oe,ue,xe,ge){if(xe){let Ie=[Eo.contextHash,xe];ge=ge?[Ie].concat(ge):[Ie]}if(ue>25){let Ie=[Eo.lookAhead,ue];ge=ge?[Ie].concat(ge):[Ie]}return new ec(J,$,G,oe,ge)}function z(J,$){let G=a.fork(),oe=0,ue=0,xe=0,ge=G.end-r,Ie={size:0,start:0,skip:0};e:for(let Me=G.pos-J;G.pos>Me;){let ke=G.size;if(G.id==$&&ke>=0){Ie.size=oe,Ie.start=ue,Ie.skip=xe,xe+=4,oe+=4,G.next();continue}let je=G.pos-ke;if(ke<0||je<Me||G.start<ge)break;let Be=G.id>=s?4:0,Ye=G.start;for(G.next();G.pos>je;){if(G.size<0)if(G.size==-3)Be+=4;else break e;else G.id>=s&&(Be+=4);G.next()}ue=Ye,oe+=ke,xe+=Be}return($<0||oe==J)&&(Ie.size=oe,Ie.start=ue,Ie.skip=xe),Ie.size>4?Ie:void 0}function Q(J,$,G){let{id:oe,start:ue,end:xe,size:ge}=a;if(a.next(),ge>=0&&oe<s){let Ie=G;if(ge>4){let Me=a.pos-(ge-4);for(;a.pos>Me;)G=Q(J,$,G)}$[--G]=Ie,$[--G]=xe-J,$[--G]=ue-J,$[--G]=oe}else ge==-3?h=oe:ge==-4&&(m=oe);return G}let Y=[],H=[];for(;a.pos>0;)v(n.start||0,n.bufferStart||0,Y,H,-1,0);let Z=(e=n.length)!==null&&e!==void 0?e:Y.length?H[0]+Y[0].length:0;return new ec(c[n.topID],Y.reverse(),H.reverse(),Z)}const mN=new WeakMap;function gw(n,e){if(!n.isAnonymous||e instanceof av||e.type!=n)return 1;let t=mN.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof ec)){t=1;break}t+=gw(n,i)}mN.set(e,t)}return t}function lK(n,e,t,i,r,o,s,a,c){let h=0;for(let R=i;R<r;R++)h+=gw(n,e[R]);let m=Math.ceil(h*1.5/8),v=[],x=[];function E(R,P,z,Q,Y){for(let H=z;H<Q;){let Z=H,J=P[H],$=gw(n,R[H]);for(H++;H<Q;H++){let G=gw(n,R[H]);if($+G>=m)break;$+=G}if(H==Z+1){if($>m){let G=R[Z];E(G.children,G.positions,0,G.children.length,P[Z]+Y);continue}v.push(R[Z])}else{let G=P[H-1]+R[H-1].length-J;v.push(lK(n,R,P,Z,H,J,G,null,c))}x.push(J+Y-o)}}return E(e,t,i,r,0),(a||c)(v,x,s)}class kb{constructor(e,t,i,r,o=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new kb(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&r.push(o);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],o=1,s=e.length?e[0]:null;for(let a=0,c=0,h=0;;a++){let m=a<t.length?t[a]:null,v=m?m.fromA:1e9;if(v-c>=i)for(;s&&s.from<v;){let x=s;if(c>=x.from||v<=x.to||h){let E=Math.max(x.from,c)-h,R=Math.min(x.to,v)-h;x=E>=R?null:new kb(E,R,x.tree,x.offset+h,a>0,!!m)}if(x&&r.push(x),s.to>v)break;s=o<e.length?e[o++]:null}if(!m)break;c=m.toA,h=m.toA-m.toB}return r}}class pte{startParse(e,t,i){return typeof e=="string"&&(e=new Qxe(e)),i=i?i.length?i.map(r=>new LO(r.from,r.to)):[new LO(0,0)]:[new LO(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let o=r.advance();if(o)return o}}}class Qxe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Eo({perNode:!0});let Wxe=0;class ap{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=Wxe++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof ap&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new ap(i,[],null,[]);if(r.set.push(r),t)for(let o of t.set)r.set.push(o);return r}static defineModifier(e){let t=new MS(e);return i=>i.modified.indexOf(t)>-1?i:MS.get(i.base||i,i.modified.concat(t).sort((r,o)=>r.id-o.id))}}let qxe=0;class MS{constructor(e){this.name=e,this.instances=[],this.id=qxe++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(a=>a.base==e&&Yxe(t,a.modified));if(i)return i;let r=[],o=new ap(e.name,r,e,t);for(let a of t)a.instances.push(o);let s=Vxe(t);for(let a of e.set)if(!a.modified.length)for(let c of s)r.push(MS.get(a,c));return o}}function Yxe(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function Vxe(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function mte(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let o=[],s=2,a=r;for(let v=0;;){if(a=="..."&&v>0&&v+3==r.length){s=1;break}let x=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!x)throw new RangeError("Invalid path: "+r);if(o.push(x[0]=="*"?"":x[0][0]=='"'?JSON.parse(x[0]):x[0]),v+=x[0].length,v==r.length)break;let E=r[v++];if(v==r.length&&E=="!"){s=0;break}if(E!="/")throw new RangeError("Invalid path: "+r);a=r.slice(v)}let c=o.length-1,h=o[c];if(!h)throw new RangeError("Invalid path: "+r);let m=new m4(i,s,c>0?o.slice(0,c):null);e[h]=m.sort(e[h])}}return gte.add(e)}const gte=new Eo({combine(n,e){let t,i,r;for(;n||e;){if(!n||e&&n.depth>=e.depth?(r=e,e=e.next):(r=n,n=n.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let o=new m4(r.tags,r.mode,r.context);t?t.next=o:i=o,t=o}return i}});class m4{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}m4.empty=new m4([],2,null);function yte(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:o=>{let s=r;for(let a of o)for(let c of a.set){let h=t[c.id];if(h){s=s?s+" "+h:h;break}}return s},scope:i}}function $xe(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function Hxe(n,e,t,i=0,r=n.length){let o=new Zxe(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,r,"",o.highlighters),o.flush(r)}class Zxe{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,o){let{type:s,from:a,to:c}=e;if(a>=i||c<=t)return;s.isTop&&(o=this.highlighters.filter(E=>!E.scope||E.scope(s)));let h=r,m=Xxe(e)||m4.empty,v=$xe(o,m.tags);if(v&&(h&&(h+=" "),h+=v,m.mode==1&&(r+=(r?" ":"")+v)),this.startSpan(Math.max(t,a),h),m.opaque)return;let x=e.tree&&e.tree.prop(Eo.mounted);if(x&&x.overlay){let E=e.node.enter(x.overlay[0].from+a,1),R=this.highlighters.filter(z=>!z.scope||z.scope(x.tree.type)),P=e.firstChild();for(let z=0,Q=a;;z++){let Y=z<x.overlay.length?x.overlay[z]:null,H=Y?Y.from+a:c,Z=Math.max(t,Q),J=Math.min(i,H);if(Z<J&&P)for(;e.from<J&&(this.highlightRange(e,Z,J,r,o),this.startSpan(Math.min(J,e.to),h),!(e.to>=H||!e.nextSibling())););if(!Y||H>i)break;Q=Y.to+a,Q>t&&(this.highlightRange(E.cursor(),Math.max(t,Y.from+a),Math.min(i,Q),"",R),this.startSpan(Math.min(i,Q),h))}P&&e.parent()}else if(e.firstChild()){x&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,o),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function Xxe(n){let e=n.type.prop(gte);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ai=ap.define,MM=ai(),Iy=ai(),gN=ai(Iy),yN=ai(Iy),ky=ai(),wM=ai(ky),zO=ai(ky),Sg=ai(),nb=ai(Sg),Mg=ai(),wg=ai(),lR=ai(),v2=ai(lR),SM=ai(),cn={comment:MM,lineComment:ai(MM),blockComment:ai(MM),docComment:ai(MM),name:Iy,variableName:ai(Iy),typeName:gN,tagName:ai(gN),propertyName:yN,attributeName:ai(yN),className:ai(Iy),labelName:ai(Iy),namespace:ai(Iy),macroName:ai(Iy),literal:ky,string:wM,docString:ai(wM),character:ai(wM),attributeValue:ai(wM),number:zO,integer:ai(zO),float:ai(zO),bool:ai(ky),regexp:ai(ky),escape:ai(ky),color:ai(ky),url:ai(ky),keyword:Mg,self:ai(Mg),null:ai(Mg),atom:ai(Mg),unit:ai(Mg),modifier:ai(Mg),operatorKeyword:ai(Mg),controlKeyword:ai(Mg),definitionKeyword:ai(Mg),moduleKeyword:ai(Mg),operator:wg,derefOperator:ai(wg),arithmeticOperator:ai(wg),logicOperator:ai(wg),bitwiseOperator:ai(wg),compareOperator:ai(wg),updateOperator:ai(wg),definitionOperator:ai(wg),typeOperator:ai(wg),controlOperator:ai(wg),punctuation:lR,separator:ai(lR),bracket:v2,angleBracket:ai(v2),squareBracket:ai(v2),paren:ai(v2),brace:ai(v2),content:Sg,heading:nb,heading1:ai(nb),heading2:ai(nb),heading3:ai(nb),heading4:ai(nb),heading5:ai(nb),heading6:ai(nb),contentSeparator:ai(Sg),list:ai(Sg),quote:ai(Sg),emphasis:ai(Sg),strong:ai(Sg),link:ai(Sg),monospace:ai(Sg),strikethrough:ai(Sg),inserted:ai(),deleted:ai(),changed:ai(),invalid:ai(),meta:SM,documentMeta:ai(SM),annotation:ai(SM),processingInstruction:ai(SM),definition:ap.defineModifier("definition"),constant:ap.defineModifier("constant"),function:ap.defineModifier("function"),standard:ap.defineModifier("standard"),local:ap.defineModifier("local"),special:ap.defineModifier("special")};for(let n in cn){let e=cn[n];e instanceof ap&&(e.name=n)}yte([{tag:cn.link,class:"tok-link"},{tag:cn.heading,class:"tok-heading"},{tag:cn.emphasis,class:"tok-emphasis"},{tag:cn.strong,class:"tok-strong"},{tag:cn.keyword,class:"tok-keyword"},{tag:cn.atom,class:"tok-atom"},{tag:cn.bool,class:"tok-bool"},{tag:cn.url,class:"tok-url"},{tag:cn.labelName,class:"tok-labelName"},{tag:cn.inserted,class:"tok-inserted"},{tag:cn.deleted,class:"tok-deleted"},{tag:cn.literal,class:"tok-literal"},{tag:cn.string,class:"tok-string"},{tag:cn.number,class:"tok-number"},{tag:[cn.regexp,cn.escape,cn.special(cn.string)],class:"tok-string2"},{tag:cn.variableName,class:"tok-variableName"},{tag:cn.local(cn.variableName),class:"tok-variableName tok-local"},{tag:cn.definition(cn.variableName),class:"tok-variableName tok-definition"},{tag:cn.special(cn.variableName),class:"tok-variableName2"},{tag:cn.definition(cn.propertyName),class:"tok-propertyName tok-definition"},{tag:cn.typeName,class:"tok-typeName"},{tag:cn.namespace,class:"tok-namespace"},{tag:cn.className,class:"tok-className"},{tag:cn.macroName,class:"tok-macroName"},{tag:cn.propertyName,class:"tok-propertyName"},{tag:cn.operator,class:"tok-operator"},{tag:cn.comment,class:"tok-comment"},{tag:cn.meta,class:"tok-meta"},{tag:cn.invalid,class:"tok-invalid"},{tag:cn.punctuation,class:"tok-punctuation"}]);var FO;const I_=new Eo;function Jxe(n){return Bi.define({combine:n?e=>e.concat(n):void 0})}const e2e=new Eo;class mm{constructor(e,t,i=[],r=""){this.data=e,this.name=r,ds.prototype.hasOwnProperty("tree")||Object.defineProperty(ds.prototype,"tree",{get(){return VA(this)}}),this.parser=t,this.extension=[lv.of(this),ds.languageData.of((o,s,a)=>{let c=vN(o,s,a),h=c.type.prop(I_);if(!h)return[];let m=o.facet(h),v=c.type.prop(e2e);if(v){let x=c.resolve(s-c.from,a);for(let E of v)if(E.test(x,o)){let R=o.facet(E.facet);return E.type=="replace"?R:R.concat(m)}}return m})].concat(i)}isActiveAt(e,t,i=-1){return vN(e,t,i).type.prop(I_)==this.data}findRegions(e){let t=e.facet(lv);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(o,s)=>{if(o.prop(I_)==this.data){i.push({from:s,to:s+o.length});return}let a=o.prop(Eo.mounted);if(a){if(a.tree.prop(I_)==this.data){if(a.overlay)for(let c of a.overlay)i.push({from:c.from+s,to:c.to+s});else i.push({from:s,to:s+o.length});return}else if(a.overlay){let c=i.length;if(r(a.tree,a.overlay[0].from+s),i.length>c)return}}for(let c=0;c<o.children.length;c++){let h=o.children[c];h instanceof ec&&r(h,o.positions[c]+s)}};return r(VA(e),0),i}get allowsNesting(){return!0}}mm.setState=ro.define();function vN(n,e,t){let i=n.facet(lv),r=VA(n).topNode;if(!i||i.allowsNesting)for(let o=r;o;o=o.enter(e,t,$c.ExcludeBuffers))o.type.isTop&&(r=o);return r}class wS extends mm{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=Jxe(e.languageData);return new wS(t,e.parser.configure({props:[I_.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new wS(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function VA(n){let e=n.field(mm.state,!1);return e?e.tree:ec.empty}class t2e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let b2=null;class SS{constructor(e,t,i=[],r,o,s,a,c){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new SS(e,t,[],ec.empty,0,i,[],null)}startParse(){return this.parser.startParse(new t2e(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ec.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(kb.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(kb.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=b2;b2=this;try{return e()}finally{b2=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=bN(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((h,m,v,x)=>c.push({fromA:h,toA:m,fromB:v,toB:x})),i=kb.applyChanges(i,c),r=ec.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let m=e.mapPos(h.from,1),v=e.mapPos(h.to,-1);m<v&&a.push({from:m,to:v})}}}return new SS(this.parser,t,i,r,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:o}=this.skipped[i];r<e.to&&o>e.from&&(this.fragments=bN(this.fragments,r,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends pte{createParse(t,i,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let c=b2;if(c){for(let h of r)c.tempSkipped.push(h);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=s,new ec(Id.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return b2}}function bN(n,e,t){return kb.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class _x{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new _x(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=SS.create(e.facet(lv).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new _x(i)}}mm.state=Sc.define({create:_x.init,update(n,e){for(let t of e.effects)if(t.is(mm.setState))return t.value;return e.startState.facet(lv)!=e.state.facet(lv)?_x.init(e.state):n.apply(e)}});let vte=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(vte=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const jO=typeof navigator<"u"&&(!((FO=navigator.scheduling)===null||FO===void 0)&&FO.isInputPending)?()=>navigator.scheduling.isInputPending():null,n2e=wu.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(mm.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(mm.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=vte(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,o=i.field(mm.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!jO?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<r&&i.doc.length>r+1e3,c=o.context.work(()=>jO&&jO()||Date.now()>s,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:mm.setState.of(new _x(o.context))})),this.chunkBudget>0&&!(c&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>kh(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),lv=Bi.define({combine(n){return n.length?n[0]:null},enables:n=>[mm.state,n2e,Mi.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class i2e{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const r2e=Bi.define(),uK=Bi.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function ES(n){let e=n.facet(uK);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function g4(n,e){let t="",i=n.tabSize,r=n.facet(uK)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let o=0;o<e;o++)t+=r;return t}function cK(n,e){n instanceof ds&&(n=new h6(n));for(let i of n.state.facet(r2e)){let r=i(n,e);if(r!==void 0)return r}let t=VA(n.state);return t.length>=e?o2e(n,t,e):null}class h6{constructor(e,t={}){this.state=e,this.options=t,this.unit=ES(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=i.from&&r<=i.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.countColumn(i,e-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return Fx(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const bte=new Eo;function o2e(n,e,t){let i=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=i.node){let o=[];for(let s=r;s&&!(s.from<i.node.from||s.to>i.node.to||s.from==i.node.from&&s.type==i.node.type);s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)i={node:o[s],next:i}}return Cte(i,n,t)}function Cte(n,e,t){for(let i=n;i;i=i.next){let r=a2e(i.node);if(r)return r(AK.create(e,t,i))}return 0}function s2e(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function a2e(n){let e=n.type.prop(bte);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Eo.closedBy))){let r=n.lastChild,o=r&&i.indexOf(r.name)>-1;return s=>A2e(s,!0,1,void 0,o&&!s2e(s)?r.from:void 0)}return n.parent==null?l2e:null}function l2e(){return 0}class AK extends h6{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new AK(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(u2e(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Cte(this.context.next,this.base,this.pos)}}function u2e(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function c2e(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=t.to;;){let c=e.childAfter(a);if(!c||c==i)return null;if(!c.type.isSkipped){if(c.from>=s)return null;let h=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+h}}a=c.to}}function A2e(n,e,t,i,r){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==n.pos+s,c=c2e(n);return c?a?n.column(c.from):n.column(c.to):n.baseIndent+(a?0:n.unit*t)}function CN({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const h2e=200;function d2e(){return ds.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+h2e)return n;let o=t.sliceString(r.from,i);if(!e.some(h=>h.test(o)))return n;let{state:s}=n,a=-1,c=[];for(let{head:h}of s.selection.ranges){let m=s.doc.lineAt(h);if(m.from==a)continue;a=m.from;let v=cK(s,m.from);if(v==null)continue;let x=/^\s*/.exec(m.text)[0],E=g4(s,v);x!=E&&c.push({from:m.from,to:m.from+x.length,insert:E})}return c.length?[n,{changes:c,sequential:!0}]:n})}const f2e=Bi.define(),_te=new Eo;function p2e(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function m2e(n,e,t){let i=VA(n);if(i.length<t)return null;let r=i.resolveStack(t,1),o=null;for(let s=r;s;s=s.next){let a=s.node;if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let c=a.type.prop(_te);if(c&&(a.to<i.length-50||i.length==n.doc.length||!g2e(a))){let h=c(a,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(o=h)}}return o}function g2e(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function BS(n,e,t){for(let i of n.facet(f2e)){let r=i(n,e,t);if(r)return r}return m2e(n,e,t)}function xte(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const d6=ro.define({map:xte}),y5=ro.define({map:xte});function Mte(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Yb=Sc.define({create(){return Br.none},update(n,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>n=_N(n,t,i)),n=n.map(e.changes);for(let t of e.effects)if(t.is(d6)&&!y2e(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Ete),r=i?Br.replace({widget:new w2e(i(e.state,t.value))}):xN;n=n.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(y5)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(n=_N(n,e.selection.main.head)),n},provide:n=>Mi.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(xN.range(i,r))}return Br.set(e,!0)}});function _N(n,e,t=e){let i=!1;return n.between(e,t,(r,o)=>{r<t&&o>e&&(i=!0)}),i?n.update({filterFrom:e,filterTo:t,filter:(r,o)=>r>=t||o<=e}):n}function OS(n,e,t){var i;let r=null;return(i=n.field(Yb,!1))===null||i===void 0||i.between(e,t,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function y2e(n,e,t){let i=!1;return n.between(e,e,(r,o)=>{r==e&&o==t&&(i=!0)}),i}function wte(n,e){return n.field(Yb,!1)?e:e.concat(ro.appendConfig.of(Bte()))}const v2e=n=>{for(let e of Mte(n)){let t=BS(n.state,e.from,e.to);if(t)return n.dispatch({effects:wte(n.state,[d6.of(t),Ste(n,t)])}),!0}return!1},b2e=n=>{if(!n.state.field(Yb,!1))return!1;let e=[];for(let t of Mte(n)){let i=OS(n.state,t.from,t.to);i&&e.push(y5.of(i),Ste(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Ste(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return Mi.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const C2e=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),o=BS(e,r.from,r.to);o&&t.push(d6.of(o)),i=(o?n.lineBlockAt(o.to):r).to+1}return t.length&&n.dispatch({effects:wte(n.state,t)}),!!t.length},_2e=n=>{let e=n.state.field(Yb,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(y5.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},x2e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:v2e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:b2e},{key:"Ctrl-Alt-[",run:C2e},{key:"Ctrl-Alt-]",run:_2e}],M2e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Ete=Bi.define({combine(n){return Bm(n,M2e)}});function Bte(n){return[Yb,B2e]}function Ote(n,e){let{state:t}=n,i=t.facet(Ete),r=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),c=OS(n.state,a.from,a.to);c&&n.dispatch({effects:y5.of(c)}),s.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const xN=Br.replace({widget:new class extends hv{toDOM(n){return Ote(n,null)}}});class w2e extends hv{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Ote(e,this.value)}}const S2e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class NO extends r0{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function E2e(n={}){let e={...S2e,...n},t=new NO(e,!0),i=new NO(e,!1),r=wu.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(lv)!=s.state.facet(lv)||s.startState.field(Yb,!1)!=s.state.field(Yb,!1)||VA(s.startState)!=VA(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new f1;for(let c of s.viewportLineBlocks){let h=OS(s.state,c.from,c.to)?i:BS(s.state,c.from,c.to)?t:null;h&&a.add(c.from,c.from,h)}return a.finish()}}),{domEventHandlers:o}=e;return[r,lte({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(r))===null||a===void 0?void 0:a.markers)||Vo.empty},initialSpacer(){return new NO(e,!1)},domEventHandlers:{...o,click:(s,a,c)=>{if(o.click&&o.click(s,a,c))return!0;let h=OS(s.state,a.from,a.to);if(h)return s.dispatch({effects:y5.of(h)}),!0;let m=BS(s.state,a.from,a.to);return m?(s.dispatch({effects:d6.of(m)}),!0):!1}}}),Bte()]}const B2e=Mi.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class v5{constructor(e,t){this.specs=e;let i;function r(a){let c=rv.newName();return(i||(i=Object.create(null)))["."+c]=a,c}const o=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof mm?a=>a.prop(I_)==s.data:s?a=>a==s:void 0,this.style=yte(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=i?new rv(i):null,this.themeType=t.themeType}static define(e,t){return new v5(e,t||{})}}const uR=Bi.define(),Ite=Bi.define({combine(n){return n.length?[n[0]]:null}});function GO(n){let e=n.facet(uR);return e.length?e:n.facet(Ite)}function kte(n,e){let t=[I2e],i;return n instanceof v5&&(n.module&&t.push(Mi.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(Ite.of(n)):i?t.push(uR.computeN([Mi.darkTheme],r=>r.facet(Mi.darkTheme)==(i=="dark")?[n]:[])):t.push(uR.of(n)),t}class O2e{constructor(e){this.markCache=Object.create(null),this.tree=VA(e.state),this.decorations=this.buildDeco(e,GO(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=VA(e.state),i=GO(e.state),r=i!=GO(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return Br.none;let i=new f1;for(let{from:r,to:o}of e.visibleRanges)Hxe(this.tree,t,(s,a,c)=>{i.add(s,a,this.markCache[c]||(this.markCache[c]=Br.mark({class:c})))},r,o);return i.finish()}}const I2e=nC.high(wu.fromClass(O2e,{decorations:n=>n.decorations})),k2e=v5.define([{tag:cn.meta,color:"#404740"},{tag:cn.link,textDecoration:"underline"},{tag:cn.heading,textDecoration:"underline",fontWeight:"bold"},{tag:cn.emphasis,fontStyle:"italic"},{tag:cn.strong,fontWeight:"bold"},{tag:cn.strikethrough,textDecoration:"line-through"},{tag:cn.keyword,color:"#708"},{tag:[cn.atom,cn.bool,cn.url,cn.contentSeparator,cn.labelName],color:"#219"},{tag:[cn.literal,cn.inserted],color:"#164"},{tag:[cn.string,cn.deleted],color:"#a11"},{tag:[cn.regexp,cn.escape,cn.special(cn.string)],color:"#e40"},{tag:cn.definition(cn.variableName),color:"#00f"},{tag:cn.local(cn.variableName),color:"#30a"},{tag:[cn.typeName,cn.namespace],color:"#085"},{tag:cn.className,color:"#167"},{tag:[cn.special(cn.variableName),cn.macroName],color:"#256"},{tag:cn.definition(cn.propertyName),color:"#00c"},{tag:cn.comment,color:"#940"},{tag:cn.invalid,color:"#f00"}]),T2e=Mi.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Tte=1e4,Rte="()[]{}",Dte=Bi.define({combine(n){return Bm(n,{afterCursor:!0,brackets:Rte,maxScanDistance:Tte,renderMatch:P2e})}}),R2e=Br.mark({class:"cm-matchingBracket"}),D2e=Br.mark({class:"cm-nonmatchingBracket"});function P2e(n){let e=[],t=n.matched?R2e:D2e;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const K2e=Sc.define({create(){return Br.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(Dte);for(let r of e.state.selection.ranges){if(!r.empty)continue;let o=Gg(e.state,r.head,-1,i)||r.head>0&&Gg(e.state,r.head-1,1,i)||i.afterCursor&&(Gg(e.state,r.head,1,i)||r.head<e.state.doc.length&&Gg(e.state,r.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return Br.set(t,!0)},provide:n=>Mi.decorations.from(n)}),U2e=[K2e,T2e];function L2e(n={}){return[Dte.of(n),U2e]}const z2e=new Eo;function cR(n,e,t){let i=n.prop(e<0?Eo.openedBy:Eo.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function AR(n){let e=n.type.prop(z2e);return e?e(n.node):n}function Gg(n,e,t,i={}){let r=i.maxScanDistance||Tte,o=i.brackets||Rte,s=VA(n),a=s.resolveInner(e,t);for(let c=a;c;c=c.parent){let h=cR(c.type,t,o);if(h&&c.from<c.to){let m=AR(c);if(m&&(t>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return F2e(n,e,t,c,m,h,o)}}return j2e(n,e,t,s,a.type,r,o)}function F2e(n,e,t,i,r,o,s){let a=i.parent,c={from:r.from,to:r.to},h=0,m=a?.cursor();if(m&&(t<0?m.childBefore(i.from):m.childAfter(i.to)))do if(t<0?m.to<=i.from:m.from>=i.to){if(h==0&&o.indexOf(m.type.name)>-1&&m.from<m.to){let v=AR(m);return{start:c,end:v?{from:v.from,to:v.to}:void 0,matched:!0}}else if(cR(m.type,t,s))h++;else if(cR(m.type,-t,s)){if(h==0){let v=AR(m);return{start:c,end:v&&v.from<v.to?{from:v.from,to:v.to}:void 0,matched:!1}}h--}}while(t<0?m.prevSibling():m.nextSibling());return{start:c,matched:!1}}function j2e(n,e,t,i,r,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=s.indexOf(a);if(c<0||c%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},m=n.doc.iterRange(e,t>0?n.doc.length:0),v=0;for(let x=0;!m.next().done&&x<=o;){let E=m.value;t<0&&(x+=E.length);let R=e+x*t;for(let P=t>0?0:E.length-1,z=t>0?E.length:-1;P!=z;P+=t){let Q=s.indexOf(E[P]);if(!(Q<0||i.resolveInner(R+P,1).type!=r))if(Q%2==0==t>0)v++;else{if(v==1)return{start:h,end:{from:R+P,to:R+P+1},matched:Q>>1==c>>1};v--}}t>0&&(x+=E.length)}return m.done?{start:h,matched:!1}:null}const N2e=Object.create(null),MN=[Id.none],wN=[],SN=Object.create(null),G2e=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])G2e[n]=Q2e(N2e,e);function QO(n,e){wN.indexOf(n)>-1||(wN.push(n),console.warn(e))}function Q2e(n,e){let t=[];for(let a of e.split(" ")){let c=[];for(let h of a.split(".")){let m=n[h]||cn[h];m?typeof m=="function"?c.length?c=c.map(m):QO(h,`Modifier ${h} used at start of tag`):c.length?QO(h,`Tag ${h} used as modifier`):c=Array.isArray(m)?m:[m]:QO(h,`Unknown highlighting tag ${h}`)}for(let h of c)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(a=>a.id),o=SN[r];if(o)return o.id;let s=SN[r]=Id.define({id:MN.length,name:i,props:[mte({[i]:t})]});return MN.push(s),s.id}tl.RTL,tl.LTR;const W2e=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=dK(n.state,t.from);return i.line?q2e(n):i.block?V2e(n):!1};function hK(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const q2e=hK(Z2e,0),Y2e=hK(Pte,0),V2e=hK((n,e)=>Pte(n,e,H2e(e)),0);function dK(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const C2=50;function $2e(n,{open:e,close:t},i,r){let o=n.sliceDoc(i-C2,i),s=n.sliceDoc(r,r+C2),a=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(s)[0].length,h=o.length-a;if(o.slice(h-e.length,h)==e&&s.slice(c,c+t.length)==t)return{open:{pos:i-a,margin:a&&1},close:{pos:r+c,margin:c&&1}};let m,v;r-i<=2*C2?m=v=n.sliceDoc(i,r):(m=n.sliceDoc(i,i+C2),v=n.sliceDoc(r-C2,r));let x=/^\s*/.exec(m)[0].length,E=/\s*$/.exec(v)[0].length,R=v.length-E-t.length;return m.slice(x,x+e.length)==e&&v.slice(R,R+t.length)==t?{open:{pos:i+x+e.length,margin:/\s/.test(m.charAt(x+e.length))?1:0},close:{pos:r-E-t.length,margin:/\s/.test(v.charAt(R-1))?1:0}}:null}function H2e(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to);r.from>i.from&&r.from==t.to&&(r=t.to==i.to+1?i:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Pte(n,e,t=e.selection.ranges){let i=t.map(o=>dK(e,o.from).block);if(!i.every(o=>o))return null;let r=t.map((o,s)=>$2e(e,i[s],o.from,o.to));if(n!=2&&!r.every(o=>o))return{changes:e.changes(t.map((o,s)=>r[s]?[]:[{from:o.from,insert:i[s].open+" "},{from:o.to,insert:" "+i[s].close}]))};if(n!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let c=i[s],{open:h,close:m}=a;o.push({from:h.pos-c.open.length,to:h.pos+h.margin},{from:m.pos-m.margin,to:m.pos+c.close.length})}return{changes:o}}return null}function Z2e(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:o,to:s}of t){let a=i.length,c=1e9,h=dK(e,o).line;if(h){for(let m=o;m<=s;){let v=e.doc.lineAt(m);if(v.from>r&&(o==s||s>v.from)){r=v.from;let x=/^\s*/.exec(v.text)[0].length,E=x==v.length,R=v.text.slice(x,x+h.length)==h?x:-1;x<v.text.length&&x<c&&(c=x),i.push({line:v,comment:R,token:h,indent:x,empty:E,single:!1})}m=v.to+1}if(c<1e9)for(let m=a;m<i.length;m++)i[m].indent<i[m].line.text.length&&(i[m].indent=c);i.length==a+1&&(i[a].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:c,indent:h,empty:m,single:v}of i)(v||!m)&&o.push({from:a.from+h,insert:c+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:c}of i)if(a>=0){let h=s.from+a,m=h+c.length;s.text[m-s.from]==" "&&m++,o.push({from:h,to:m})}return{changes:o}}return null}const hR=v1.define(),X2e=v1.define(),J2e=Bi.define(),Kte=Bi.define({combine(n){return Bm(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}}),Ute=Sc.define({create(){return Qg.empty},update(n,e){let t=e.state.facet(Kte),i=e.annotation(hR);if(i){let c=Sd.fromTransaction(e,i.selection),h=i.side,m=h==0?n.undone:n.done;return c?m=IS(m,m.length,t.minDepth,c):m=Fte(m,e.startState.selection),new Qg(h==0?i.rest:m,h==0?m:i.rest)}let r=e.annotation(X2e);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(wc.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Sd.fromTransaction(e),s=e.annotation(wc.time),a=e.annotation(wc.userEvent);return o?n=n.addChanges(o,s,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Qg(n.done.map(Sd.fromJSON),n.undone.map(Sd.fromJSON))}});function e3e(n={}){return[Ute,Kte.of(n),Mi.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Lte:e.inputType=="historyRedo"?dR:null;return i?(e.preventDefault(),i(t)):!1}})]}function f6(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(Ute,!1);if(!r)return!1;let o=r.pop(n,t,e);return o?(i(o),!0):!1}}const Lte=f6(0,!1),dR=f6(1,!1),t3e=f6(0,!0),n3e=f6(1,!0);class Sd{constructor(e,t,i,r,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new Sd(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Sd(e.changes&&_c.fromJSON(e.changes),[],e.mapped&&t0.fromJSON(e.mapped),e.startSelection&&wn.fromJSON(e.startSelection),e.selectionsAfter.map(wn.fromJSON))}static fromTransaction(e,t){let i=dp;for(let r of e.startState.facet(J2e)){let o=r(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Sd(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,dp)}static selection(e){return new Sd(void 0,dp,void 0,void 0,e)}}function IS(n,e,t,i){let r=e+1>t+20?e-t-1:0,o=n.slice(r,e);return o.push(i),o}function i3e(n,e){let t=[],i=!1;return n.iterChangedRanges((r,o)=>t.push(r,o)),e.iterChangedRanges((r,o,s,a)=>{for(let c=0;c<t.length;){let h=t[c++],m=t[c++];a>=h&&s<=m&&(i=!0)}}),i}function r3e(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function zte(n,e){return n.length?e.length?n.concat(e):n:e}const dp=[],o3e=200;function Fte(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-o3e));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),IS(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Sd.selection([e])]}function s3e(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function WO(n,e){if(!n.length)return n;let t=n.length,i=dp;for(;t;){let r=a3e(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let o=n.slice(0,t);return o[t-1]=r,o}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[Sd.selection(i)]:dp}function a3e(n,e,t){let i=zte(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):dp,t);if(!n.changes)return Sd.selection(i);let r=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new Sd(r,ro.mapEffects(n.effects,e),s,n.startSelection.map(o),i)}const l3e=/^(input\.type|delete)($|\.)/;class Qg{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Qg(this.done,this.undone):this}addChanges(e,t,i,r,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||l3e.test(i))&&(!a.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,i3e(a.changes,e.changes))||i=="input.type.compose")?s=IS(s,s.length-1,r.minDepth,new Sd(e.changes.compose(a.changes),zte(ro.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,dp)):s=IS(s,s.length,r.minDepth,e),new Qg(s,dp,t,i)}addSelection(e,t,i,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:dp;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&r3e(o[o.length-1],e)?this:new Qg(Fte(this.done,e),this.undone,t,i)}addMapping(e){return new Qg(WO(this.done,e),WO(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1],s=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:hR.of({side:e,rest:s3e(r),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=r.length==1?dp:r.slice(0,r.length-1);return o.mapped&&(a=WO(a,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:hR.of({side:e,rest:a,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Qg.empty=new Qg(dp,dp);const u3e=[{key:"Mod-z",run:Lte,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:dR,preventDefault:!0},{linux:"Ctrl-Shift-z",run:dR,preventDefault:!0},{key:"Mod-u",run:t3e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:n3e,preventDefault:!0}];function jx(n,e){return wn.create(n.ranges.map(e),n.mainIndex)}function Om(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Im({state:n,dispatch:e},t){let i=jx(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Om(n,i)),!0)}function p6(n,e){return wn.cursor(e?n.to:n.from)}function jte(n,e){return Im(n,t=>t.empty?n.moveByChar(t,e):p6(t,e))}function $A(n){return n.textDirectionAt(n.state.selection.main.head)==tl.LTR}const Nte=n=>jte(n,!$A(n)),Gte=n=>jte(n,$A(n));function Qte(n,e){return Im(n,t=>t.empty?n.moveByGroup(t,e):p6(t,e))}const c3e=n=>Qte(n,!$A(n)),A3e=n=>Qte(n,$A(n));function h3e(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function m6(n,e,t){let i=VA(n).resolveInner(e.head),r=t?Eo.closedBy:Eo.openedBy;for(let c=e.head;;){let h=t?i.childAfter(c):i.childBefore(c);if(!h)break;h3e(n,h,r)?i=h:c=t?h.to:h.from}let o=i.type.prop(r),s,a;return o&&(s=t?Gg(n,i.from,1):Gg(n,i.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?i.to:i.from,wn.cursor(a,t?-1:1)}const d3e=n=>Im(n,e=>m6(n.state,e,!$A(n))),f3e=n=>Im(n,e=>m6(n.state,e,$A(n)));function Wte(n,e){return Im(n,t=>{if(!t.empty)return p6(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const qte=n=>Wte(n,!1),Yte=n=>Wte(n,!0);function Vte(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let o of n.state.facet(Mi.scrollMargins)){let s=o(n);s?.top&&(t=Math.max(s?.top,t)),s?.bottom&&(i=Math.max(s?.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function $te(n,e){let t=Vte(n),{state:i}=n,r=jx(i.selection,s=>s.empty?n.moveVertically(s,e,t.height):p6(s,e));if(r.eq(i.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(i.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),c=a.top+t.marginTop,h=a.bottom-t.marginBottom;s&&s.top>c&&s.bottom<h&&(o=Mi.scrollIntoView(r.main.head,{y:"start",yMargin:s.top-c}))}return n.dispatch(Om(i,r),{effects:o}),!0}const EN=n=>$te(n,!1),fR=n=>$te(n,!0);function dv(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=wn.cursor(i.from+o))}return r}const p3e=n=>Im(n,e=>dv(n,e,!0)),m3e=n=>Im(n,e=>dv(n,e,!1)),g3e=n=>Im(n,e=>dv(n,e,!$A(n))),y3e=n=>Im(n,e=>dv(n,e,$A(n))),v3e=n=>Im(n,e=>wn.cursor(n.lineBlockAt(e.head).from,1)),b3e=n=>Im(n,e=>wn.cursor(n.lineBlockAt(e.head).to,-1));function C3e(n,e,t){let i=!1,r=jx(n.selection,o=>{let s=Gg(n,o.head,-1)||Gg(n,o.head,1)||o.head>0&&Gg(n,o.head-1,1)||o.head<n.doc.length&&Gg(n,o.head+1,-1);if(!s||!s.end)return o;i=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return wn.cursor(a)});return i?(e(Om(n,r)),!0):!1}const _3e=({state:n,dispatch:e})=>C3e(n,e);function Cp(n,e){let t=jx(n.state.selection,i=>{let r=e(i);return wn.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Om(n.state,t)),!0)}function Hte(n,e){return Cp(n,t=>n.moveByChar(t,e))}const Zte=n=>Hte(n,!$A(n)),Xte=n=>Hte(n,$A(n));function Jte(n,e){return Cp(n,t=>n.moveByGroup(t,e))}const x3e=n=>Jte(n,!$A(n)),M3e=n=>Jte(n,$A(n)),w3e=n=>Cp(n,e=>m6(n.state,e,!$A(n))),S3e=n=>Cp(n,e=>m6(n.state,e,$A(n)));function ene(n,e){return Cp(n,t=>n.moveVertically(t,e))}const tne=n=>ene(n,!1),nne=n=>ene(n,!0);function ine(n,e){return Cp(n,t=>n.moveVertically(t,e,Vte(n).height))}const BN=n=>ine(n,!1),ON=n=>ine(n,!0),E3e=n=>Cp(n,e=>dv(n,e,!0)),B3e=n=>Cp(n,e=>dv(n,e,!1)),O3e=n=>Cp(n,e=>dv(n,e,!$A(n))),I3e=n=>Cp(n,e=>dv(n,e,$A(n))),k3e=n=>Cp(n,e=>wn.cursor(n.lineBlockAt(e.head).from)),T3e=n=>Cp(n,e=>wn.cursor(n.lineBlockAt(e.head).to)),IN=({state:n,dispatch:e})=>(e(Om(n,{anchor:0})),!0),kN=({state:n,dispatch:e})=>(e(Om(n,{anchor:n.doc.length})),!0),TN=({state:n,dispatch:e})=>(e(Om(n,{anchor:n.selection.main.anchor,head:0})),!0),RN=({state:n,dispatch:e})=>(e(Om(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),R3e=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),D3e=({state:n,dispatch:e})=>{let t=g6(n).map(({from:i,to:r})=>wn.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:wn.create(t),userEvent:"select"})),!0},P3e=({state:n,dispatch:e})=>{let t=jx(n.selection,i=>{let r=VA(n),o=r.resolveStack(i.from,1);if(i.empty){let s=r.resolveStack(i.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:a}=s;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&s.next)return wn.range(a.to,a.from)}return i});return t.eq(n.selection)?!1:(e(Om(n,t)),!0)};function rne(n,e){let{state:t}=n,i=t.selection,r=t.selection.ranges.slice();for(let o of t.selection.ranges){let s=t.doc.lineAt(o.head);if(e?s.to<n.state.doc.length:s.from>0)for(let a=o;;){let c=n.moveVertically(a,e);if(c.head<s.from||c.head>s.to){r.some(h=>h.head==c.head)||r.push(c);break}else{if(c.head==a.head)break;a=c}}}return r.length==i.ranges.length?!1:(n.dispatch(Om(t,wn.create(r,r.length-1))),!0)}const K3e=n=>rne(n,!1),U3e=n=>rne(n,!0),L3e=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=wn.create([t.main]):t.main.empty||(i=wn.create([wn.cursor(t.main.head)])),i?(e(Om(n,i)),!0):!1};function b5(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let c=e(o);c<s?(t="delete.backward",c=EM(n,c,!1)):c>s&&(t="delete.forward",c=EM(n,c,!0)),s=Math.min(s,c),a=Math.max(a,c)}else s=EM(n,s,!1),a=EM(n,a,!0);return s==a?{range:o}:{changes:{from:s,to:a},range:wn.cursor(s,s<o.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Mi.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function EM(n,e,t){if(n instanceof Mi)for(let i of n.state.facet(Mi.atomicRanges).map(r=>r(n)))i.between(e,e,(r,o)=>{r<e&&o>e&&(e=t?o:r)});return e}const one=(n,e,t)=>b5(n,i=>{let r=i.from,{state:o}=n,s=o.doc.lineAt(r),a,c;if(t&&!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,r-s.from))){if(a[a.length-1]=="	")return r-1;let h=Fx(a,o.tabSize),m=h%ES(o)||ES(o);for(let v=0;v<m&&a[a.length-1-v]==" ";v++)r--;c=r}else c=mA(s.text,r-s.from,e,e)+s.from,c==r&&s.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(c-s.from,r-s.from))&&(c=mA(s.text,c-s.from,!1,!1)+s.from);return c}),pR=n=>one(n,!1,!0),sne=n=>one(n,!0,!1),ane=(n,e)=>b5(n,t=>{let i=t.head,{state:r}=n,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let a=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let c=mA(o.text,i-o.from,e)+o.from,h=o.text.slice(Math.min(i,c)-o.from,Math.max(i,c)-o.from),m=s(h);if(a!=null&&m!=a)break;(h!=" "||i!=t.head)&&(a=m),i=c}return i}),lne=n=>ane(n,!1),z3e=n=>ane(n,!0),F3e=n=>b5(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),j3e=n=>b5(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),N3e=n=>b5(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),G3e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:fs.of(["",""])},range:wn.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Q3e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,o=n.doc.lineAt(r),s=r==o.from?r-1:mA(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:mA(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(r,a).append(n.doc.slice(s,r))},range:wn.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function g6(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=r.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});t=o.number+1}return e}function une(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let o of g6(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){i.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let c of o.ranges)r.push(wn.range(Math.min(n.doc.length,c.anchor+a),Math.min(n.doc.length,c.head+a)))}else{i.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let c of o.ranges)r.push(wn.range(c.anchor-a,c.head-a))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:wn.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const W3e=({state:n,dispatch:e})=>une(n,e,!1),q3e=({state:n,dispatch:e})=>une(n,e,!0);function cne(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of g6(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Y3e=({state:n,dispatch:e})=>cne(n,e,!1),V3e=({state:n,dispatch:e})=>cne(n,e,!0),$3e=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(g6(e).map(({from:r,to:o})=>(r>0?r--:o<e.doc.length&&o++,{from:r,to:o}))),i=jx(e.selection,r=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(r.head),a=n.coordsAtPos(r.head,r.assoc||1);a&&(o=s.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function H3e(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=VA(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),o;return i&&r&&i.to<=e&&r.from>=e&&(o=i.type.prop(Eo.closedBy))&&o.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const DN=Ane(!1),Z3e=Ane(!0);function Ane(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:o,to:s}=r,a=e.doc.lineAt(o),c=!n&&o==s&&H3e(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let h=new h6(e,{simulateBreak:o,simulateDoubleBreak:!!c}),m=cK(h,o);for(m==null&&(m=Fx(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<a.to&&/\s/.test(a.text[s-a.from]);)s++;c?{from:o,to:s}=c:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let v=["",g4(e,m)];return c&&v.push(g4(e,h.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:fs.of(v)},range:wn.cursor(o+1+v[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function fK(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let a=n.doc.lineAt(s);a.number>t&&(i.empty||i.to>a.from)&&(e(a,r,i),t=a.number),s=a.to+1}let o=n.changes(r);return{changes:r,range:wn.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const X3e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new h6(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),r=fK(n,(o,s,a)=>{let c=cK(i,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let h=/^\s*/.exec(o.text)[0],m=g4(n,c);(h!=m||a.from<o.from+h.length)&&(t[o.from]=c,s.push({from:o.from,to:o.from+h.length,insert:m}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},J3e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(fK(n,(t,i)=>{i.push({from:t.from,insert:n.facet(uK)})}),{userEvent:"input.indent"})),!0),e4e=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(fK(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=Fx(r,n.tabSize),s=0,a=g4(n,Math.max(0,o-ES(n)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),t4e=n=>(n.setTabFocusMode(),!0),n4e=[{key:"Ctrl-b",run:Nte,shift:Zte,preventDefault:!0},{key:"Ctrl-f",run:Gte,shift:Xte},{key:"Ctrl-p",run:qte,shift:tne},{key:"Ctrl-n",run:Yte,shift:nne},{key:"Ctrl-a",run:v3e,shift:k3e},{key:"Ctrl-e",run:b3e,shift:T3e},{key:"Ctrl-d",run:sne},{key:"Ctrl-h",run:pR},{key:"Ctrl-k",run:F3e},{key:"Ctrl-Alt-h",run:lne},{key:"Ctrl-o",run:G3e},{key:"Ctrl-t",run:Q3e},{key:"Ctrl-v",run:fR}],i4e=[{key:"ArrowLeft",run:Nte,shift:Zte,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:c3e,shift:x3e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:g3e,shift:O3e,preventDefault:!0},{key:"ArrowRight",run:Gte,shift:Xte,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:A3e,shift:M3e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:y3e,shift:I3e,preventDefault:!0},{key:"ArrowUp",run:qte,shift:tne,preventDefault:!0},{mac:"Cmd-ArrowUp",run:IN,shift:TN},{mac:"Ctrl-ArrowUp",run:EN,shift:BN},{key:"ArrowDown",run:Yte,shift:nne,preventDefault:!0},{mac:"Cmd-ArrowDown",run:kN,shift:RN},{mac:"Ctrl-ArrowDown",run:fR,shift:ON},{key:"PageUp",run:EN,shift:BN},{key:"PageDown",run:fR,shift:ON},{key:"Home",run:m3e,shift:B3e,preventDefault:!0},{key:"Mod-Home",run:IN,shift:TN},{key:"End",run:p3e,shift:E3e,preventDefault:!0},{key:"Mod-End",run:kN,shift:RN},{key:"Enter",run:DN,shift:DN},{key:"Mod-a",run:R3e},{key:"Backspace",run:pR,shift:pR,preventDefault:!0},{key:"Delete",run:sne,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:lne,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:z3e,preventDefault:!0},{mac:"Mod-Backspace",run:j3e,preventDefault:!0},{mac:"Mod-Delete",run:N3e,preventDefault:!0}].concat(n4e.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),r4e=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:d3e,shift:w3e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:f3e,shift:S3e},{key:"Alt-ArrowUp",run:W3e},{key:"Shift-Alt-ArrowUp",run:Y3e},{key:"Alt-ArrowDown",run:q3e},{key:"Shift-Alt-ArrowDown",run:V3e},{key:"Mod-Alt-ArrowUp",run:K3e},{key:"Mod-Alt-ArrowDown",run:U3e},{key:"Escape",run:L3e},{key:"Mod-Enter",run:Z3e},{key:"Alt-l",mac:"Ctrl-l",run:D3e},{key:"Mod-i",run:P3e,preventDefault:!0},{key:"Mod-[",run:e4e},{key:"Mod-]",run:J3e},{key:"Mod-Alt-\\",run:X3e},{key:"Shift-Mod-k",run:$3e},{key:"Shift-Mod-\\",run:_3e},{key:"Mod-/",run:W2e},{key:"Alt-A",run:Y2e},{key:"Ctrl-m",mac:"Shift-Alt-m",run:t4e}].concat(i4e),PN=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class xx{constructor(e,t,i=0,r=e.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=o?a=>o(PN(a)):PN,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return xd(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=QP(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Pg(e);let r=this.normalize(t);if(r.length)for(let o=0,s=i;;o++){let a=r.charCodeAt(o),c=this.match(a,s,this.bufferPos+this.bufferStart);if(o==r.length-1){if(c)return this.value=c,this;break}s==i&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t,i){let r=null;for(let o=0;o<this.matches.length;o+=2){let s=this.matches[o],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[o+1],to:i}:(this.matches[o]++,a=!0)),a||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(xx.prototype[Symbol.iterator]=function(){return this});const hne={from:-1,to:-1,match:/.*/.exec("")},pK="gm"+(/x/.unicode==null?"":"u");class dne{constructor(e,t,i,r=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=hne,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new fne(e,t,i,r,o);this.re=new RegExp(t,pK+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let s=e.lineAt(r);this.curLineStart=s.from,this.matchPos=kS(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=kS(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const qO=new WeakMap;class V_{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=qO.get(e);if(!r||r.from>=i||r.to<=t){let a=new V_(t,e.sliceString(t,i));return qO.set(e,a),a}if(r.from==t&&r.to==i)return r;let{text:o,from:s}=r;return s>t&&(o=e.sliceString(t,s)+o,s=t),r.to<i&&(o+=e.sliceString(r.to,i)),qO.set(e,new V_(s,o)),new V_(t,o.slice(t-s,i-s))}}class fne{constructor(e,t,i,r,o){this.text=e,this.to=o,this.done=!1,this.value=hne,this.matchPos=kS(e,r),this.re=new RegExp(t,pK+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=V_.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=kS(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=V_.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(dne.prototype[Symbol.iterator]=fne.prototype[Symbol.iterator]=function(){return this});function o4e(n){try{return new RegExp(n,pK),!0}catch{return!1}}function kS(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function mR(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=wa("input",{class:"cm-textfield",name:"line",value:e}),i=wa("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:y3.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),r())},onsubmit:o=>{o.preventDefault(),r()}},wa("label",n.state.phrase("Go to line"),": ",t)," ",wa("button",{class:"cm-button",type:"submit"},n.state.phrase("go")),wa("button",{name:"close",onclick:()=>{n.dispatch({effects:y3.of(!1)}),n.focus()},"aria-label":n.state.phrase("close"),type:"button"},[""]));function r(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,c,h,m,v]=o,x=m?+m.slice(1):0,E=h?+h:a.number;if(h&&v){let z=E/100;c&&(z=z*(c=="-"?-1:1)+a.number/s.doc.lines),E=Math.round(s.doc.lines*z)}else h&&c&&(E=E*(c=="-"?-1:1)+a.number);let R=s.doc.line(Math.max(1,Math.min(s.doc.lines,E))),P=wn.cursor(R.from+Math.max(0,Math.min(x,R.length)));n.dispatch({effects:[y3.of(!1),Mi.scrollIntoView(P.from,{y:"center"})],selection:P}),n.focus()}return{dom:i}}const y3=ro.define(),KN=Sc.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(y3)&&(n=t.value);return n},provide:n=>f4.from(n,e=>e?mR:null)}),s4e=n=>{let e=d4(n,mR);if(!e){let t=[y3.of(!0)];n.state.field(KN,!1)==null&&t.push(ro.appendConfig.of([KN,a4e])),n.dispatch({effects:t}),e=d4(n,mR)}return e&&e.dom.querySelector("input").select(),!0},a4e=Mi.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),l4e={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},u4e=Bi.define({combine(n){return Bm(n,l4e,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function c4e(n){return[p4e,f4e]}const A4e=Br.mark({class:"cm-selectionMatch"}),h4e=Br.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function UN(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=pl.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=pl.Word)}function d4e(n,e,t,i){return n(e.sliceDoc(t,t+1))==pl.Word&&n(e.sliceDoc(i-1,i))==pl.Word}const f4e=wu.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(u4e),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Br.none;let r=i.main,o,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return Br.none;let c=t.wordAt(r.head);if(!c)return Br.none;s=t.charCategorizer(r.head),o=t.sliceDoc(c.from,c.to)}else{let c=r.to-r.from;if(c<e.minSelectionLength||c>200)return Br.none;if(e.wholeWords){if(o=t.sliceDoc(r.from,r.to),s=t.charCategorizer(r.head),!(UN(s,t,r.from,r.to)&&d4e(s,t,r.from,r.to)))return Br.none}else if(o=t.sliceDoc(r.from,r.to),!o)return Br.none}let a=[];for(let c of n.visibleRanges){let h=new xx(t.doc,o,c.from,c.to);for(;!h.next().done;){let{from:m,to:v}=h.value;if((!s||UN(s,t,m,v))&&(r.empty&&m<=r.from&&v>=r.to?a.push(h4e.range(m,v)):(m>=r.to||v<=r.from)&&a.push(A4e.range(m,v)),a.length>e.maxMatches))return Br.none}}return Br.set(a)}},{decorations:n=>n.decorations}),p4e=Mi.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),m4e=({state:n,dispatch:e})=>{let{selection:t}=n,i=wn.create(t.ranges.map(r=>n.wordAt(r.head)||wn.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function g4e(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),o=r&&r.from==t.from&&r.to==t.to;for(let s=!1,a=new xx(n.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new xx(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),s=!0}else{if(s&&i.some(c=>c.from==a.value.from))continue;if(o){let c=n.wordAt(a.value.from);if(!c||c.from!=a.value.from||c.to!=a.value.to)continue}return a.value}}const y4e=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return m4e({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let r=g4e(n,i);return r?(e(n.update({selection:n.selection.addRange(wn.range(r.from,r.to),!1),effects:Mi.scrollIntoView(r.to)})),!0):!1},Nx=Bi.define({combine(n){return Bm(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new I4e(e),scrollToMatch:e=>Mi.scrollIntoView(e)})}});class pne{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||o4e(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new _4e(this):new b4e(this)}getCursor(e,t=0,i){let r=e.doc?e:ds.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?x_(this,r,t,i):__(this,r,t,i)}}class mne{constructor(e){this.spec=e}}function __(n,e,t,i){return new xx(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?v4e(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function v4e(n,e){return(t,i,r,o)=>((o>t||o+r.length<i)&&(o=Math.max(0,t-2),r=n.sliceString(o,Math.min(n.length,i+2))),(e(TS(r,t-o))!=pl.Word||e(RS(r,t-o))!=pl.Word)&&(e(RS(r,i-o))!=pl.Word||e(TS(r,i-o))!=pl.Word))}class b4e extends mne{constructor(e){super(e)}nextMatch(e,t,i){let r=__(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);r=__(this.spec,e,0,o).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let o=Math.max(t,r-1e4-this.spec.unquoted.length),s=__(this.spec,e,o,r),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=__(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=__(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function x_(n,e,t,i){return new dne(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?C4e(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function TS(n,e){return n.slice(mA(n,e,!1),e)}function RS(n,e){return n.slice(e,mA(n,e))}function C4e(n){return(e,t,i)=>!i[0].length||(n(TS(i.input,i.index))!=pl.Word||n(RS(i.input,i.index))!=pl.Word)&&(n(RS(i.input,i.index+i[0].length))!=pl.Word||n(TS(i.input,i.index+i[0].length))!=pl.Word)}class _4e extends mne{nextMatch(e,t,i){let r=x_(this.spec,e,i,e.doc.length).next();return r.done&&(r=x_(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let o=Math.max(t,i-r*1e4),s=x_(this.spec,e,o,i),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let o=+i.slice(0,r);if(o>0&&o<e.match.length)return e.match[o]+i.slice(r)}return t})}matchAll(e,t){let i=x_(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let o=x_(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const y4=ro.define(),mK=ro.define(),ev=Sc.define({create(n){return new YO(gR(n).create(),null)},update(n,e){for(let t of e.effects)t.is(y4)?n=new YO(t.value.create(),n.panel):t.is(mK)&&(n=new YO(n.query,t.value?gK:null));return n},provide:n=>f4.from(n,e=>e.panel)});class YO{constructor(e,t){this.query=e,this.panel=t}}const x4e=Br.mark({class:"cm-searchMatch"}),M4e=Br.mark({class:"cm-searchMatch cm-searchMatch-selected"}),w4e=wu.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(ev))}update(n){let e=n.state.field(ev);(e!=n.startState.field(ev)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Br.none;let{view:t}=this,i=new f1;for(let r=0,o=t.visibleRanges,s=o.length;r<s;r++){let{from:a,to:c}=o[r];for(;r<s-1&&c>o[r+1].from-500;)c=o[++r].to;n.highlight(t.state,a,c,(h,m)=>{let v=t.state.selection.ranges.some(x=>x.from==h&&x.to==m);i.add(h,m,v?M4e:x4e)})}return i.finish()}},{decorations:n=>n.decorations});function C5(n){return e=>{let t=e.state.field(ev,!1);return t&&t.query.spec.valid?n(e,t):vne(e)}}const DS=C5((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let r=wn.single(i.from,i.to),o=n.state.facet(Nx);return n.dispatch({selection:r,effects:[yK(n,i),o.scrollToMatch(r.main,n)],userEvent:"select.search"}),yne(n),!0}),PS=C5((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);if(!r)return!1;let o=wn.single(r.from,r.to),s=n.state.facet(Nx);return n.dispatch({selection:o,effects:[yK(n,r),s.scrollToMatch(o.main,n)],userEvent:"select.search"}),yne(n),!0}),S4e=C5((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:wn.create(t.map(i=>wn.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),E4e=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,o=[],s=0;for(let a=new xx(n.doc,n.sliceDoc(i,r));!a.next().done;){if(o.length>1e3)return!1;a.value.from==i&&(s=o.length),o.push(wn.range(a.value.from,a.value.to))}return e(n.update({selection:wn.create(o,s),userEvent:"select.search.matches"})),!0},LN=C5((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let s=o,a=[],c,h,m=[];s.from==i&&s.to==r&&(h=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:h}),s=e.nextMatch(t,s.from,s.to),m.push(Mi.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let v=n.state.changes(a);return s&&(c=wn.single(s.from,s.to).map(v),m.push(yK(n,s)),m.push(t.facet(Nx).scrollToMatch(c.main,n))),n.dispatch({changes:v,selection:c,effects:m,userEvent:"input.replace"}),!0}),B4e=C5((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Mi.announce.of(i),userEvent:"input.replace.all"}),!0});function gK(n){return n.state.facet(Nx).createPanel(n)}function gR(n,e){var t,i,r,o,s;let a=n.selection.main,c=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!c)return e;let h=n.facet(Nx);return new pne({search:((t=e?.literal)!==null&&t!==void 0?t:h.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(r=e?.literal)!==null&&r!==void 0?r:h.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:h.regexp,wholeWord:(s=e?.wholeWord)!==null&&s!==void 0?s:h.wholeWord})}function gne(n){let e=d4(n,gK);return e&&e.dom.querySelector("[main-field]")}function yne(n){let e=gne(n);e&&e==n.root.activeElement&&e.select()}const vne=n=>{let e=n.state.field(ev,!1);if(e&&e.panel){let t=gne(n);if(t&&t!=n.root.activeElement){let i=gR(n.state,e.query.spec);i.valid&&n.dispatch({effects:y4.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[mK.of(!0),e?y4.of(gR(n.state,e.query.spec)):ro.appendConfig.of(T4e)]});return!0},bne=n=>{let e=n.state.field(ev,!1);if(!e||!e.panel)return!1;let t=d4(n,gK);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:mK.of(!1)}),!0},O4e=[{key:"Mod-f",run:vne,scope:"editor search-panel"},{key:"F3",run:DS,shift:PS,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:DS,shift:PS,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:bne,scope:"editor search-panel"},{key:"Mod-Shift-l",run:E4e},{key:"Mod-Alt-g",run:s4e},{key:"Mod-d",run:y4e,preventDefault:!0}];class I4e{constructor(e){this.view=e;let t=this.query=e.state.field(ev).query.spec;this.commit=this.commit.bind(this),this.searchField=wa("input",{value:t.search,placeholder:uf(e,"Find"),"aria-label":uf(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=wa("input",{value:t.replace,placeholder:uf(e,"Replace"),"aria-label":uf(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=wa("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=wa("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=wa("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,o,s){return wa("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=wa("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>DS(e),[uf(e,"next")]),i("prev",()=>PS(e),[uf(e,"previous")]),i("select",()=>S4e(e),[uf(e,"all")]),wa("label",null,[this.caseField,uf(e,"match case")]),wa("label",null,[this.reField,uf(e,"regexp")]),wa("label",null,[this.wordField,uf(e,"by word")]),...e.state.readOnly?[]:[wa("br"),this.replaceField,i("replace",()=>LN(e),[uf(e,"replace")]),i("replaceAll",()=>B4e(e),[uf(e,"replace all")])],wa("button",{name:"close",onclick:()=>bne(e),"aria-label":uf(e,"close"),type:"button"},[""])])}commit(){let e=new pne({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:y4.of(e)}))}keydown(e){L_e(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?PS:DS)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),LN(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(y4)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Nx).top}}function uf(n,e){return n.state.phrase(e)}const BM=30,OM=/[\s\.,:;?!]/;function yK(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-BM),s=Math.min(r,t+BM),a=n.state.sliceDoc(o,s);if(o!=i.from){for(let c=0;c<BM;c++)if(!OM.test(a[c+1])&&OM.test(a[c])){a=a.slice(c);break}}if(s!=r){for(let c=a.length-1;c>a.length-BM;c--)if(!OM.test(a[c-1])&&OM.test(a[c])){a=a.slice(0,c);break}}return Mi.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${i.number}.`)}const k4e=Mi.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),T4e=[ev,nC.low(w4e),k4e];class Cne{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=VA(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),o=r.search(_ne(e,!1));return o<0?null:{from:i+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function zN(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function R4e(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let o=1;o<r.length;o++)t[r[o]]=!0}let i=zN(e)+zN(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function D4e(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:R4e(e);return r=>{let o=r.matchBefore(i);return o||r.explicit?{from:o?o.from:r.pos,options:e,validFor:t}:null}}class FN{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function Tb(n){return n.selection.main.from}function _ne(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",o=i[i.length-1]!="$";return!r&&!o?n:new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const xne=v1.define();function P4e(n,e,t,i){let{main:r}=n.selection,o=t-r.from,s=i-r.from;return{...n.changeByRange(a=>{if(a!=r&&t!=i&&n.sliceDoc(a.from+o,a.from+s)!=n.sliceDoc(t,i))return{range:a};let c=n.toText(e);return{changes:{from:a.from+o,to:i==r.from?a.to:a.from+s,insert:c},range:wn.cursor(a.from+o+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const jN=new WeakMap;function K4e(n){if(!Array.isArray(n))return n;let e=jN.get(n);return e||jN.set(n,e=D4e(n)),e}const KS=ro.define(),v4=ro.define();class U4e{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=xd(e,t),r=Pg(i);this.chars.push(i);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push(xd(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:o,byWord:s}=this;if(t.length==1){let Y=xd(e,0),H=Pg(Y),Z=H==e.length?0:-100;if(Y!=t[0])if(Y==i[0])Z+=-200;else return null;return this.ret(Z,[0,H])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,h=0;if(a<0){for(let Y=0,H=Math.min(e.length,200);Y<H&&h<c;){let Z=xd(e,Y);(Z==t[h]||Z==i[h])&&(r[h++]=Y),Y+=Pg(Z)}if(h<c)return null}let m=0,v=0,x=!1,E=0,R=-1,P=-1,z=/[a-z]/.test(e),Q=!0;for(let Y=0,H=Math.min(e.length,200),Z=0;Y<H&&v<c;){let J=xd(e,Y);a<0&&(m<c&&J==t[m]&&(o[m++]=Y),E<c&&(J==t[E]||J==i[E]?(E==0&&(R=Y),P=Y+1,E++):E=0));let $,G=J<255?J>=48&&J<=57||J>=97&&J<=122?2:J>=65&&J<=90?1:0:($=QP(J))!=$.toLowerCase()?1:$!=$.toUpperCase()?2:0;(!Y||G==1&&z||Z==0&&G!=0)&&(t[v]==J||i[v]==J&&(x=!0)?s[v++]=Y:s.length&&(Q=!1)),Z=G,Y+=Pg(J)}return v==c&&s[0]==0&&Q?this.result(-100+(x?-200:0),s,e):E==c&&R==0?this.ret(-200-e.length+(P==e.length?0:-100),[0,P]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):E==c?this.ret(-900-e.length,[R,P]):v==c?this.result(-100+(x?-200:0)+-700+(Q?0:-1100),s,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],o=0;for(let s of t){let a=s+(this.astral?Pg(xd(i,s)):1);o&&r[o-1]==s?r[o-1]=a:(r[o++]=s,r[o++]=a)}return this.ret(e-i.length,r)}}class L4e{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Zc=Bi.define({combine(n){return Bm(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:z4e,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>NN(e(i),t(i)),optionClass:(e,t)=>i=>NN(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function NN(n,e){return n?e?n+" "+e:n:e}function z4e(n,e,t,i,r,o){let s=n.textDirection==tl.RTL,a=s,c=!1,h="top",m,v,x=e.left-r.left,E=r.right-e.right,R=i.right-i.left,P=i.bottom-i.top;if(a&&x<Math.min(R,E)?a=!1:!a&&E<Math.min(R,x)&&(a=!0),R<=(a?x:E))m=Math.max(r.top,Math.min(t.top,r.bottom-P))-e.top,v=Math.min(400,a?x:E);else{c=!0,v=Math.min(400,(s?e.right:r.right-e.left)-30);let Y=r.bottom-e.bottom;Y>=P||Y>e.top?m=t.bottom-e.top:(h="bottom",m=e.bottom-t.top)}let z=(e.bottom-e.top)/o.offsetHeight,Q=(e.right-e.left)/o.offsetWidth;return{style:`${h}: ${m/z}px; max-width: ${v/Q}px`,class:"cm-completionInfo-"+(c?s?"left-narrow":"right-narrow":a?"left":"right")}}function F4e(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,o){let s=document.createElement("span");s.className="cm-completionLabel";let a=t.displayLabel||t.label,c=0;for(let h=0;h<o.length;){let m=o[h++],v=o[h++];m>c&&s.appendChild(document.createTextNode(a.slice(c,m)));let x=s.appendChild(document.createElement("span"));x.appendChild(document.createTextNode(a.slice(m,v))),x.className="cm-completionMatchedText",c=v}return c<a.length&&s.appendChild(document.createTextNode(a.slice(c))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function VO(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class j4e{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:o,selected:s}=r.open,a=e.state.facet(Zc);this.optionContent=F4e(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=VO(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:h}=e.state.field(t).open;for(let m=c.target,v;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(v=/-(\d+)$/.exec(m.id))&&+v[1]<h.length){this.applyCompletion(e,h[+v[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(Zc).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:v4.of(null)})}),this.showOptions(o,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:o,selected:s,disabled:a}=i.open;(!r.open||r.open.options!=o)&&(this.range=VO(o.length,s,e.state.facet(Zc).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),a!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=VO(t.options.length,t.selected,this.view.state.facet(Zc).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:o}=r;if(!o)return;let s=typeof o=="string"?document.createTextNode(o):o(r);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,r)}).catch(a=>kh(this.view.state,a,"completion info")):(this.addInfoPane(s,r),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:o}=e;i.appendChild(r),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&G4e(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}}return r.top>Math.min(o.bottom,t.bottom)-10||r.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Zc).positionInfo(this.view,t,r,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",s=>{s.target==r&&s.preventDefault()});let o=null;for(let s=i.from;s<i.to;s++){let{completion:a,match:c}=e[s],{section:h}=a;if(h){let x=typeof h=="string"?h:h.name;if(x!=o&&(s>i.from||i.from==0))if(o=x,typeof h!="string"&&h.header)r.appendChild(h.header(h));else{let E=r.appendChild(document.createElement("completion-section"));E.textContent=x}}const m=r.appendChild(document.createElement("li"));m.id=t+"-"+s,m.setAttribute("role","option");let v=this.optionClass(a);v&&(m.className=v);for(let x of this.optionContent){let E=x(a,this.view.state,this.view,c);E&&m.appendChild(E)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function N4e(n,e){return t=>new j4e(t,n,e)}function G4e(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function GN(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function Q4e(n,e){let t=[],i=null,r=null,o=m=>{t.push(m);let{section:v}=m.completion;if(v){i||(i=[]);let x=typeof v=="string"?v:v.name;i.some(E=>E.name==x)||i.push(typeof v=="string"?{name:x}:v)}},s=e.facet(Zc);for(let m of n)if(m.hasResult()){let v=m.result.getMatch;if(m.result.filter===!1)for(let x of m.result.options)o(new FN(x,m.source,v?v(x):[],1e9-t.length));else{let x=e.sliceDoc(m.from,m.to),E,R=s.filterStrict?new L4e(x):new U4e(x);for(let P of m.result.options)if(E=R.match(P.label)){let z=P.displayLabel?v?v(P,E.matched):[]:E.matched,Q=E.score+(P.boost||0);if(o(new FN(P,m.source,z,Q)),typeof P.section=="object"&&P.section.rank==="dynamic"){let{name:Y}=P.section;r||(r=Object.create(null)),r[Y]=Math.max(Q,r[Y]||-1e9)}}}}if(i){let m=Object.create(null),v=0,x=(E,R)=>(E.rank==="dynamic"&&R.rank==="dynamic"?r[R.name]-r[E.name]:0)||(typeof E.rank=="number"?E.rank:1e9)-(typeof R.rank=="number"?R.rank:1e9)||(E.name<R.name?-1:1);for(let E of i.sort(x))v-=1e5,m[E.name]=v;for(let E of t){let{section:R}=E.completion;R&&(E.score+=m[typeof R=="string"?R:R.name])}}let a=[],c=null,h=s.compareCompletions;for(let m of t.sort((v,x)=>x.score-v.score||h(v.completion,x.completion))){let v=m.completion;!c||c.label!=v.label||c.detail!=v.detail||c.type!=null&&v.type!=null&&c.type!=v.type||c.apply!=v.apply||c.boost!=v.boost?a.push(m):GN(m.completion)>GN(c)&&(a[a.length-1]=m),c=m.completion}return a}class k_{constructor(e,t,i,r,o,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new k_(this.options,QN(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,o,s){if(r&&!s&&e.some(h=>h.isPending))return r.setDisabled();let a=Q4e(e,t);if(!a.length)return r&&e.some(h=>h.isPending)?r.setDisabled():null;let c=t.facet(Zc).selectOnOpen?0:-1;if(r&&r.selected!=c&&r.selected!=-1){let h=r.options[r.selected].completion;for(let m=0;m<a.length;m++)if(a[m].completion==h){c=m;break}}return new k_(a,QN(i,c),{pos:e.reduce((h,m)=>m.hasResult()?Math.min(h,m.from):h,1e8),create:H4e,above:o.aboveCursor},r?r.timestamp:Date.now(),c,!1)}map(e){return new k_(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new k_(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class US{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new US(V4e,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Zc),o=(i.override||t.languageDataAt("autocomplete",Tb(t)).map(K4e)).map(c=>(this.active.find(m=>m.source==c)||new fp(c,this.active.some(m=>m.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((c,h)=>c==this.active[h])&&(o=this.active);let s=this.open,a=e.effects.some(c=>c.is(vK));s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!W4e(o,this.active)||a?s=k_.build(o,t,this.id,s,i,a):s&&s.disabled&&!o.some(c=>c.isPending)&&(s=null),!s&&o.every(c=>!c.isPending)&&o.some(c=>c.hasResult())&&(o=o.map(c=>c.hasResult()?new fp(c.source,0):c));for(let c of e.effects)c.is(wne)&&(s=s&&s.setSelected(c.value,this.id));return o==this.active&&s==this.open?this:new US(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?q4e:Y4e}}function W4e(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let r=t==n.length,o=i==e.length;if(r||o)return r==o;if(n[t++].result!=e[i++].result)return!1}}const q4e={"aria-autocomplete":"list"},Y4e={};function QN(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const V4e=[];function Mne(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(xne);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class fp{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=Mne(e,t),r=this;(i&8||i&16&&this.touches(e))&&(r=new fp(r.source,0)),i&4&&r.state==0&&(r=new fp(this.source,1)),r=r.updateFor(e,i);for(let o of e.effects)if(o.is(KS))r=new fp(r.source,1,o.value);else if(o.is(v4))r=new fp(r.source,0);else if(o.is(vK))for(let s of o.value)s.source==r.source&&(r=s);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Tb(e.state))}}class $_ extends fp{constructor(e,t,i,r,o,s){super(e,3,t),this.limit=i,this.result=r,this.from=o,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=Tb(e.state);if(a>s||!r||t&2&&(Tb(e.startState)==this.from||a<this.limit))return new fp(this.source,t&4?1:0);let c=e.changes.mapPos(this.limit);return $4e(r.validFor,e.state,o,s)?new $_(this.source,this.explicit,c,r,o,s):r.update&&(r=r.update(r,o,s,new Cne(e.state,a,!1)))?new $_(this.source,this.explicit,c,r,r.from,(i=r.to)!==null&&i!==void 0?i:Tb(e.state)):new fp(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new $_(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new fp(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function $4e(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):_ne(n,!0).test(r)}const vK=ro.define({map(n,e){return n.map(t=>t.map(e))}}),wne=ro.define(),Md=Sc.define({create(){return US.start()},update(n,e){return n.update(e)},provide:n=>[c6.from(n,e=>e.tooltip),Mi.contentAttributes.from(n,e=>e.attrs)]});function bK(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(Md).active.find(r=>r.source==e.source);return i instanceof $_?(typeof t=="string"?n.dispatch({...P4e(n.state,t,i.from,i.to),annotations:xne.of(e.completion)}):t(n,e.completion,i.from,i.to),!0):!1}const H4e=N4e(Md,bK);function IM(n,e="option"){return t=>{let i=t.state.field(Md,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Zc).interactionDelay)return!1;let r=1,o;e=="page"&&(o=ste(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:wne.of(a)}),!0}}const Z4e=n=>{let e=n.state.field(Md,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Zc).interactionDelay?!1:bK(n,e.open.options[e.open.selected])},$O=n=>n.state.field(Md,!1)?(n.dispatch({effects:KS.of(!0)}),!0):!1,X4e=n=>{let e=n.state.field(Md,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:v4.of(null)}),!0)};class J4e{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const e5e=50,t5e=1e3,n5e=wu.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Md).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(Md),t=n.state.facet(Zc);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Md)==e)return;let i=n.transactions.some(o=>{let s=Mne(o,t);return s&8||(o.selection||o.docChanged)&&!(s&3)});for(let o=0;o<this.running.length;o++){let s=this.running[o];if(i||s.context.abortOnDocChange&&n.docChanged||s.updates.length+n.transactions.length>e5e&&Date.now()-s.time>t5e){for(let a of s.context.abortListeners)try{a()}catch(c){kh(this.view.state,c)}s.context.abortListeners=null,this.running.splice(o--,1)}else s.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(s=>s.is(KS)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(s=>s.active.source==o.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Md);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zc).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Tb(e),i=new Cne(e,t,n.explicit,this.view),r=new J4e(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:v4.of(null)}),kh(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Zc).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Zc),i=this.view.state.field(Md);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(o.done===void 0)continue;if(this.running.splice(r--,1),o.done){let a=Tb(o.updates.length?o.updates[0].startState:this.view.state),c=Math.min(a,o.done.from+(o.active.explicit?0:1)),h=new $_(o.active.source,o.active.explicit,c,o.done,o.done.from,(n=o.done.to)!==null&&n!==void 0?n:a);for(let m of o.updates)h=h.update(m,t);if(h.hasResult()){e.push(h);continue}}let s=i.active.find(a=>a.source==o.active.source);if(s&&s.isPending)if(o.done==null){let a=new fp(o.active.source,0);for(let c of o.updates)a=a.update(c,t);a.isPending||e.push(a)}else this.startQuery(s)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:vK.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Md,!1);if(e&&e.tooltip&&this.view.state.facet(Zc).closeOnBlur){let t=e.open&&ste(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:v4.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:KS.of(!1)}),20),this.composing=0}}}),i5e=typeof navigator=="object"&&/Win/.test(navigator.platform),r5e=nC.highest(Mi.domEventHandlers({keydown(n,e){let t=e.state.field(Md,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(i5e&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(s=>s.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&bK(e,i),!1}})),o5e=Mi.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),b4={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},vb=ro.define({map(n,e){let t=e.mapPos(n,-1,Oh.TrackAfter);return t??void 0}}),CK=new class extends Gb{};CK.startSide=1;CK.endSide=-1;const Sne=Sc.define({create(){return Vo.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(vb)&&(n=n.update({add:[CK.range(t.value,t.value+1)]}));return n}});function s5e(){return[l5e,Sne]}const HO="()[]{}<>";function Ene(n){for(let e=0;e<HO.length;e+=2)if(HO.charCodeAt(e)==n)return HO.charAt(e+1);return QP(n<128?n:n+1)}function Bne(n,e){return n.languageDataAt("closeBrackets",e)[0]||b4}const a5e=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),l5e=Mi.inputHandler.of((n,e,t,i)=>{if((a5e?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&Pg(xd(i,0))==1||e!=r.from||t!=r.to)return!1;let o=A5e(n.state,i);return o?(n.dispatch(o),!0):!1}),u5e=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Bne(n,n.selection.main.head).brackets||b4.brackets,r=null,o=n.changeByRange(s=>{if(s.empty){let a=h5e(n.doc,s.head);for(let c of i)if(c==a&&y6(n.doc,s.head)==Ene(xd(c,0)))return{changes:{from:s.head-c.length,to:s.head+c.length},range:wn.cursor(s.head-c.length)}}return{range:r=s}});return r||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},c5e=[{key:"Backspace",run:u5e}];function A5e(n,e){let t=Bne(n,n.selection.main.head),i=t.brackets||b4.brackets;for(let r of i){let o=Ene(xd(r,0));if(e==r)return o==r?p5e(n,r,i.indexOf(r+r+r)>-1,t):d5e(n,r,o,t.before||b4.before);if(e==o&&One(n,n.selection.main.from))return f5e(n,r,o)}return null}function One(n,e){let t=!1;return n.field(Sne).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function y6(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Pg(xd(t,0)))}function h5e(n,e){let t=n.sliceString(e-2,e);return Pg(xd(t,0))==t.length?t:t.slice(1)}function d5e(n,e,t,i){let r=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:vb.of(s.to+e.length),range:wn.range(s.anchor+e.length,s.head+e.length)};let a=y6(n.doc,s.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:vb.of(s.head+e.length),range:wn.cursor(s.head+e.length)}:{range:r=s}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function f5e(n,e,t){let i=null,r=n.changeByRange(o=>o.empty&&y6(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:wn.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function p5e(n,e,t,i){let r=i.stringPrefixes||b4.stringPrefixes,o=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:vb.of(a.to+e.length),range:wn.range(a.anchor+e.length,a.head+e.length)};let c=a.head,h=y6(n.doc,c),m;if(h==e){if(WN(n,c))return{changes:{insert:e+e,from:c},effects:vb.of(c+e.length),range:wn.cursor(c+e.length)};if(One(n,c)){let x=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+x.length,insert:x},range:wn.cursor(c+x.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(m=qN(n,c-2*e.length,r))>-1&&WN(n,m))return{changes:{insert:e+e+e+e,from:c},effects:vb.of(c+e.length),range:wn.cursor(c+e.length)};if(n.charCategorizer(c)(h)!=pl.Word&&qN(n,c,r)>-1&&!m5e(n,c,e,r))return{changes:{insert:e+e,from:c},effects:vb.of(c+e.length),range:wn.cursor(c+e.length)}}return{range:o=a}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function WN(n,e){let t=VA(n).resolveInner(e+1);return t.parent&&t.from==e}function m5e(n,e,t,i){let r=VA(n).resolveInner(e,-1),o=i.reduce((s,a)=>Math.max(s,a.length),0);for(let s=0;s<5;s++){let a=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+o)),c=a.indexOf(t);if(!c||c>-1&&i.indexOf(a.slice(0,c))>-1){let m=r.firstChild;for(;m&&m.from==r.from&&m.to-m.from>t.length+c;){if(n.sliceDoc(m.to-t.length,m.to)==t)return!1;m=m.firstChild}return!0}let h=r.to==e&&r.parent;if(!h)break;r=h}return!1}function qN(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=pl.Word)return e;for(let r of t){let o=e-r.length;if(n.sliceDoc(o,e)==r&&i(n.sliceDoc(o-1,o))!=pl.Word)return o}return-1}function g5e(n={}){return[r5e,Md,Zc.of(n),n5e,y5e,o5e]}const Ine=[{key:"Ctrl-Space",run:$O},{mac:"Alt-`",run:$O},{mac:"Alt-i",run:$O},{key:"Escape",run:X4e},{key:"ArrowDown",run:IM(!0)},{key:"ArrowUp",run:IM(!1)},{key:"PageDown",run:IM(!0,"page")},{key:"PageUp",run:IM(!1,"page")},{key:"Enter",run:Z4e}],y5e=nC.highest(iK.computeN([Zc],n=>n.facet(Zc).defaultKeymap?[Ine]:[]));class YN{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class cb{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet(Wg).markerFilter;r&&(e=r(e,i));let o=e.slice().sort((x,E)=>x.from-E.from||x.to-E.to),s=new f1,a=[],c=0,h=i.doc.iter(),m=0;for(let x=0;;){let E=x==o.length?null:o[x];if(!E&&!a.length)break;let R,P;for(a.length?(R=c,P=a.reduce((Y,H)=>Math.min(Y,H.to),E&&E.from>R?E.from:1e8)):(R=E.from,P=E.to,a.push(E),x++);x<o.length;){let Y=o[x];if(Y.from==R&&(Y.to>Y.from||Y.to==R))a.push(Y),x++,P=Math.min(Y.to,P);else{P=Math.min(Y.from,P);break}}let z=!1;if(a.some(Y=>Y.from==R&&Y.to==P)&&(z=R==P,!z&&P-R<10)){let Y=R-(m+h.value.length);Y>0&&(h.next(Y),m=R);for(let H=R;;){if(H>=P){z=!0;break}if(!h.lineBreak&&m+h.value.length>H)break;H=m+h.value.length,m+=h.value.length,h.next()}}let Q=Une(a);if(z)s.add(R,R,Br.widget({widget:new B5e(Q),diagnostics:a.slice()}));else{let Y=a.reduce((H,Z)=>Z.markClass?H+" "+Z.markClass:H,"");s.add(R,P,Br.mark({class:"cm-lintRange cm-lintRange-"+Q+Y,diagnostics:a.slice(),inclusiveEnd:a.some(H=>H.to>P)}))}c=P;for(let Y=0;Y<a.length;Y++)a[Y].to<=c&&a.splice(Y--,1)}let v=s.finish();return new cb(v,t,Mx(v))}}function Mx(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,o,{spec:s})=>{if(!(e&&s.diagnostics.indexOf(e)<0))if(!i)i=new YN(r,o,e||s.diagnostics[0]);else{if(s.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new YN(i.from,o,i.diagnostic)}}),i}function kne(n,e){let t=e.pos,i=e.end||t,r=n.state.facet(Wg).hideOn(n,t,i);if(r!=null)return r;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(s=>s.is(v6))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function Tne(n,e){return n.field(_f,!1)?e:e.concat(ro.appendConfig.of(Fne))}function v5e(n,e){return{effects:Tne(n,[v6.of(e)])}}const v6=ro.define(),_K=ro.define(),Rne=ro.define(),_f=Sc.define({create(){return new cb(Br.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,r=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=Mx(t,n.selected.diagnostic,o)||Mx(t,null,o)}!t.size&&r&&e.state.facet(Wg).autoPanel&&(r=null),n=new cb(t,r,i)}for(let t of e.effects)if(t.is(v6)){let i=e.state.facet(Wg).autoPanel?t.value.length?C4.open:null:n.panel;n=cb.init(t.value,i,e.state)}else t.is(_K)?n=new cb(n.diagnostics,t.value?C4.open:null,n.selected):t.is(Rne)&&(n=new cb(n.diagnostics,n.panel,t.value));return n},provide:n=>[f4.from(n,e=>e.panel),Mi.decorations.from(n,e=>e.diagnostics)]}),b5e=Br.mark({class:"cm-lintRange cm-lintRange-active"});function C5e(n,e,t){let{diagnostics:i}=n.state.field(_f),r,o=-1,s=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,h,{spec:m})=>{if(e>=c&&e<=h&&(c==h||(e>c||t>0)&&(e<h||t<0)))return r=m.diagnostics,o=c,s=h,!1});let a=n.state.facet(Wg).tooltipFilter;return r&&a&&(r=a(r,n.state)),r?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:Dne(n,r)}}}:null}function Dne(n,e){return wa("ul",{class:"cm-tooltip-lint"},e.map(t=>Kne(n,t,!1)))}const _5e=n=>{let e=n.state.field(_f,!1);(!e||!e.panel)&&n.dispatch({effects:Tne(n.state,[_K.of(!0)])});let t=d4(n,C4.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},VN=n=>{let e=n.state.field(_f,!1);return!e||!e.panel?!1:(n.dispatch({effects:_K.of(!1)}),!0)},x5e=n=>{let e=n.state.field(_f,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},M5e=[{key:"Mod-Shift-m",run:_5e,preventDefault:!0},{key:"F8",run:x5e}],w5e=wu.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Wg);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Wg);t.length&&S5e(t.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(v5e(this.view.state,i.reduce((r,o)=>r.concat(o))))},i=>{kh(this.view.state,i)})}}update(n){let e=n.state.facet(Wg);(n.docChanged||e!=n.startState.facet(Wg)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function S5e(n,e,t){let i=[],r=-1;for(let o of n)o.then(s=>{i.push(s),clearTimeout(r),i.length==n.length?e(i):r=setTimeout(()=>e(i),200)},t)}const Wg=Bi.define({combine(n){return{sources:n.map(e=>e.source).filter(e=>e!=null),...Bm(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:$N,tooltipFilter:$N,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,o)=>e(i,r,o)||t(i,r,o):e:t,autoPanel:(e,t)=>e||t})}}});function $N(n,e){return n?e?(t,i)=>e(n(t,i),i):n:e}function E5e(n,e={}){return[Wg.of({source:n,config:e}),w5e,Fne]}function Pne(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(o=>o.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Kne(n,e,t){var i;let r=t?Pne(e.actions):[];return wa("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},wa("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,s)=>{let a=!1,c=E=>{if(E.preventDefault(),a)return;a=!0;let R=Mx(n.state.field(_f).diagnostics,e);R&&o.apply(n,R.from,R.to)},{name:h}=o,m=r[s]?h.indexOf(r[s]):-1,v=m<0?h:[h.slice(0,m),wa("u",h.slice(m,m+1)),h.slice(m+1)],x=o.markClass?" "+o.markClass:"";return wa("button",{type:"button",class:"cm-diagnosticAction"+x,onclick:c,onmousedown:c,"aria-label":` Action: ${h}${m<0?"":` (access key "${r[s]})"`}.`},v)}),e.source&&wa("div",{class:"cm-diagnosticSource"},e.source))}class B5e extends hv{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return wa("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class HN{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Kne(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class C4{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)VN(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=Pne(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let c=Mx(this.view.state.field(_f).diagnostics,o);c&&o.actions[a].apply(e,c.from,c.to)}}else return;r.preventDefault()},i=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=wa("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=wa("div",{class:"cm-panel-lint"},this.list,wa("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>VN(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(_f).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(_f),i=0,r=!1,o=null,s=new Set;for(e.between(0,this.view.state.doc.length,(a,c,{spec:h})=>{for(let m of h.diagnostics){if(s.has(m))continue;s.add(m);let v=-1,x;for(let E=i;E<this.items.length;E++)if(this.items[E].diagnostic==m){v=E;break}v<0?(x=new HN(this.view,m),this.items.splice(i,0,x),r=!0):(x=this.items[v],v>i&&(this.items.splice(i,v-i),r=!0)),t&&x.diagnostic==t.diagnostic?x.dom.hasAttribute("aria-selected")||(x.dom.setAttribute("aria-selected","true"),o=x):x.dom.hasAttribute("aria-selected")&&x.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new HN(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let h=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/h:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(_f),i=Mx(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Rne.of(i)})}static open(e){return new C4(e)}}function yw(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function kM(n){return yw(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const O5e=Mi.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:kM("#d11")},".cm-lintRange-warning":{backgroundImage:kM("orange")},".cm-lintRange-info":{backgroundImage:kM("#999")},".cm-lintRange-hint":{backgroundImage:kM("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function I5e(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Une(n){let e="hint",t=1;for(let i of n){let r=I5e(i.severity);r>t&&(t=r,e=i.severity)}return e}class Lne extends r0{constructor(e){super(),this.diagnostics=e,this.severity=Une(e)}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,r=e.state.facet(b6).tooltipFilter;return r&&(i=r(i,e.state)),i.length&&(t.onmouseover=()=>T5e(e,t,i)),t}}function k5e(n,e){let t=i=>{let r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(let o=i.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(zne)&&n.dispatch({effects:xK.of(null)})}};window.addEventListener("mousemove",t)}function T5e(n,e,t){function i(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:xK.of({pos:s.from,above:!1,clip:!1,create(){return{dom:Dne(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,k5e(n,e)}let{hoverTime:r}=n.state.facet(b6),o=setTimeout(i,r);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}}function R5e(n,e){let t=Object.create(null);for(let r of e){let o=n.lineAt(r.from);(t[o.from]||(t[o.from]=[])).push(r)}let i=[];for(let r in t)i.push(new Lne(t[r]).range(+r));return Vo.of(i,!0)}const D5e=lte({class:"cm-gutter-lint",markers:n=>n.state.field(yR),widgetMarker:(n,e,t)=>{let i=[];return n.state.field(yR).between(t.from,t.to,(r,o,s)=>{r>t.from&&r<t.to&&i.push(...s.diagnostics)}),i.length?new Lne(i):null}}),yR=Sc.define({create(){return Vo.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(b6).markerFilter;for(let i of e.effects)if(i.is(v6)){let r=i.value;t&&(r=t(r||[],e.state)),n=R5e(e.state.doc,r.slice(0))}return n}}),xK=ro.define(),zne=Sc.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=kne(e,n)?null:{...n,pos:e.changes.mapPos(n.pos)}),e.effects.reduce((t,i)=>i.is(xK)?i.value:t,n)},provide:n=>c6.from(n)}),P5e=Mi.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:yw('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:yw('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:yw('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Fne=[_f,Mi.decorations.compute([_f],n=>{let{selected:e,panel:t}=n.field(_f);return!e||!t||e.from==e.to?Br.none:Br.set([b5e.range(e.from,e.to)])}),Mxe(C5e,{hideOn:kne}),O5e],b6=Bi.define({combine(n){return Bm(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function K5e(n={}){return[b6.of(n),yR,D5e,P5e,zne]}const U5e=[Dxe(),Uxe(),txe(),e3e(),E2e(),Q_e(),$_e(),ds.allowMultipleSelections.of(!0),d2e(),kte(k2e,{fallback:!0}),L2e(),s5e(),g5e(),dxe(),mxe(),axe(),c4e(),iK.of([...c5e,...r4e,...O4e,...u3e,...x2e,...Ine,...M5e])];var ZN={};class LS{constructor(e,t,i,r,o,s,a,c,h,m=0,v){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=c,this.curContext=h,this.lookAhead=m,this.parent=v}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new LS(e,[],t,i,i,0,[],0,r?new XN(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:o}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let a=o.dynamicPrecedence(r);if(a&&(this.score+=a),i==0){this.pushState(o.getGoto(this.state,r,!0),this.reducePos),r<o.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,s?8:4,!0),this.reduceContext(r,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),h=c?this.stack[c-2]:this.p.ranges[0].from,m=this.reducePos-h;m>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=m));let v=c?this.stack[c-1]:0,x=this.bufferBase+this.buffer.length-v;if(r<o.minRepeatTerm||e&131072){let E=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,h,E,x+4,!0)}if(e&262144)this.state=this.stack[c];else{let E=this.stack[c-3];this.state=o.getGoto(E,r,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(r,h)}storeNode(e,t,i,r=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==i)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0){let a=!1;for(let c=s;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){a=!0;break}if(a)for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4)}this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new LS(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new L5e(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&r.push(t[o],s);if(this.stack.length<120)for(let o=0;r.length<8&&o<t.length;o+=2){let s=t[o+1];r.some((a,c)=>c&1&&a==s)||r.push(t[o],s)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let o=t[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.reducePos=this.pos,s.score-=200,i.push(s)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],r,!1)<0){let s=this.findForcedReduction();if(s==null)return!1;t=s}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,o)=>{if(!t.includes(r))return t.push(r),e.allActions(r,s=>{if(!(s&393216))if(s&65536){let a=(s>>19)-o;if(a>1){let c=s&65535,h=this.stack.length-a*3;if(h>=0&&e.getGoto(this.stack[h],c,!1)>=0)return a<<19|65536|c}}else{let a=i(s,o+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new XN(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class XN{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class L5e{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class zS{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new zS(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new zS(this.stack,this.pos,this.index)}}function TM(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let o=0;for(;;){let s=n.charCodeAt(i++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let c=s-32;if(c>=46&&(c-=46,a=!0),o+=c,a)break;o*=46}t?t[r++]=o:t=new e(o)}return t}class vw{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const JN=new vw;class z5e{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=JN,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!r)return null;let s=this.ranges[--r];o-=i.from-s.to,i=s}for(;t<0?o>i.to:o>=i.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-i.to,i=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=JN,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class H_{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;F5e(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}H_.prototype.contextual=H_.prototype.fallback=H_.prototype.extend=!1;H_.prototype.fallback=H_.prototype.extend=!1;function F5e(n,e,t,i,r,o){let s=0,a=1<<i,{dialect:c}=t.p.parser;e:for(;(a&n[s])!=0;){let h=n[s+1];for(let E=s+3;E<h;E+=2)if((n[E+1]&a)>0){let R=n[E];if(c.allows(R)&&(e.token.value==-1||e.token.value==R||j5e(R,e.token.value,r,o))){e.acceptToken(R);break}}let m=e.next,v=0,x=n[s+2];if(e.next<0&&x>v&&n[h+x*3-3]==65535){s=n[h+x*3-1];continue e}for(;v<x;){let E=v+x>>1,R=h+E+(E<<1),P=n[R],z=n[R+1]||65536;if(m<P)x=E;else if(m>=z)v=E+1;else{s=n[R+2],e.advance();continue e}}break}}function eG(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function j5e(n,e,t,i){let r=eG(t,i,e);return r<0||eG(t,i,n)<r}const cf=typeof process<"u"&&ZN&&/\bparse\b/.test(ZN.LOG);let ZO=null;function tG(n,e,t){let i=n.cursor($c.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class N5e{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?tG(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?tG(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[r],s=this.start[t]+i.positions[r];if(s>e)return this.nextStart=s,null;if(o instanceof ec){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let c=o.prop(Eo.lookAhead);if(!c||a+c<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class G5e{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new vw)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:o}=r,s=r.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,c=0;for(let h=0;h<o.length;h++){if((1<<h&s)==0)continue;let m=o[h],v=this.tokens[h];if(!(i&&!m.fallback)&&((m.contextual||v.start!=e.pos||v.mask!=s||v.context!=a)&&(this.updateCachedToken(v,m,e),v.mask=s,v.context=a),v.lookAhead>v.end+25&&(c=Math.max(v.lookAhead,c)),v.value!=0)){let x=t;if(v.extended>-1&&(t=this.addActions(e,v.extended,v.end,t)),t=this.addActions(e,v.value,v.end,t),!m.extend&&(i=v,t>x))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new vw,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new vw,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:o}=i.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let o=0;o<r;o+=3)if(this.actions[o]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let c=0;c<2;c++)for(let h=s.stateSlot(o,c?2:1);;h+=3){if(a[h]==65535)if(a[h+1]==1)h=J0(a,h+2);else{r==0&&a[h+1]==2&&(r=this.putAction(J0(a,h+2),t,i,r));break}a[h]==t&&(r=this.putAction(J0(a,h+1),t,i,r))}return r}}class Q5e{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new z5e(t,r),this.tokens=new G5e(e,this.stream),this.topTerm=e.top[1];let{from:o}=r[0];this.stacks=[LS.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new N5e(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,o;if(this.bigReductionCount>300&&e.length==1){let[s]=e;for(;s.forceReduce()&&s.stack.length&&s.stack[s.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)i.push(a);else{if(this.advanceStack(a,i,e))continue;{r||(r=[],o=[]),r.push(a);let c=this.tokens.getMainToken(a);o.push(c.value,c.end)}}break}}if(!i.length){let s=r&&q5e(r);if(s)return cf&&console.log("Finish with "+this.stackID(s)),this.stackToTree(s);if(this.parser.strict)throw cf&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,i);if(s)return cf&&console.log("Force-finish "+this.stackID(s)),this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(i.length>s)for(i.sort((a,c)=>c.score-a.score);i.length>s;)i.pop();i.some(a=>a.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let s=0;s<i.length-1;s++){let a=i[s];for(let c=s+1;c<i.length;c++){let h=i[c];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500)if((a.score-h.score||a.buffer.length-h.buffer.length)>0)i.splice(c--,1);else{i.splice(s--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let s=1;s<i.length;s++)i[s].pos<this.minStackPos&&(this.minStackPos=i[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:o}=this,s=cf?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,m=h?e.curContext.hash:0;for(let v=this.fragments.nodeAt(r);v;){let x=this.parser.nodeSet.types[v.type.id]==v.type?o.getGoto(e.state,v.type.id):-1;if(x>-1&&v.length&&(!h||(v.prop(Eo.contextHash)||0)==m))return e.useNode(v,x),cf&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(v.type.id)})`),!0;if(!(v instanceof ec)||v.children.length==0||v.positions[0]>0)break;let E=v.children[0];if(E instanceof ec&&v.positions[0]==0)v=E;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),cf&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let h=0;h<c.length;){let m=c[h++],v=c[h++],x=c[h++],E=h==c.length||!i,R=E?e:e.split(),P=this.tokens.mainToken;if(R.apply(m,v,P?P.start:R.pos,x),cf&&console.log(s+this.stackID(R)+` (via ${(m&65536)==0?"shift":`reduce of ${o.getName(m&65535)}`} for ${o.getName(v)} @ ${r}${R==e?"":", split"})`),E)return!0;R.pos>r?t.push(R):i.push(R)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return nG(e,t),!0}}runRecovery(e,t,i){let r=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],c=t[s<<1],h=t[(s<<1)+1],m=cf?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),cf&&console.log(m+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let v=a.split(),x=m;for(let E=0;v.forceReduce()&&E<10&&(cf&&console.log(x+this.stackID(v)+" (via force-reduce)"),!this.advanceFully(v,i));E++)cf&&(x=this.stackID(v)+" -> ");for(let E of a.recoverByInsert(c))cf&&console.log(m+this.stackID(E)+" (via recover-insert)"),this.advanceFully(E,i);this.stream.end>a.pos?(h==a.pos&&(h++,c=0),a.recoverByDelete(c,h),cf&&console.log(m+this.stackID(a)+` (via recover-delete ${this.parser.getName(c)})`),nG(a,i)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(e){return e.close(),ec.build({buffer:zS.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(ZO||(ZO=new WeakMap)).get(e);return t||ZO.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function nG(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class W5e{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class FS extends pte{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),r=[];for(let a=0;a<t.length;a++)r.push([]);function o(a,c,h){r[a].push([c,c.deserialize(String(h))])}if(e.nodeProps)for(let a of e.nodeProps){let c=a[0];typeof c=="string"&&(c=Eo[c]);for(let h=1;h<a.length;){let m=a[h++];if(m>=0)o(m,c,a[h++]);else{let v=a[h+-m];for(let x=-m;x>0;x--)o(a[h++],c,v);h++}}}this.nodeSet=new oK(t.map((a,c)=>Id.define({name:c>=this.minRepeatTerm?void 0:a,id:c,props:r[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Ate;let s=TM(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(iG),this.states=TM(e.states,Uint32Array),this.data=TM(e.stateData),this.goto=TM(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new H_(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new Q5e(this,e,t,i);for(let o of this.wrappers)r=o(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let o=r[t+1];;){let s=r[o++],a=s&1,c=r[o++];if(a&&i)return c;for(let h=o+(s>>1);o<h;o++)if(r[o]==e)return c;if(a)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(e,r?2:1),s;;o+=3){if((s=i[o])==65535)if(i[o+1]==1)s=i[o=J0(i,o+2)];else{if(i[o+1]==2)return J0(i,o+2);break}if(s==t||s==0)return J0(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let o=this.stateSlot(e,1);r==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=J0(this.data,o+2);else break;r=t(J0(this.data,o+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=J0(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((o,s)=>s&1&&o==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(FS.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(o=>o.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let o=e.specializers.find(a=>a.from==i.external);if(!o)return i;let s=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[r]=iG(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(i[s]=!0)}let r=null;for(let o=0;o<t.length;o++)if(!i[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new W5e(e,i,r)}static deserialize(e){return new FS(e)}}function J0(n,e){return n[e]|n[e+1]<<16}function q5e(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function iG(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const Y5e=mte({String:cn.string,Number:cn.number,"True False":cn.bool,PropertyName:cn.propertyName,Null:cn.null,", :":cn.separator,"[ ]":cn.squareBracket,"{ }":cn.brace}),V5e=FS.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[Y5e],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),$5e=()=>n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=H5e(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]};function H5e(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}const Z5e=wS.define({name:"json",parser:V5e.configure({props:[bte.add({Object:CN({except:/^\s*\}/}),Array:CN({except:/^\s*\]/})}),_te.add({"Object Array":p2e})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function X5e(){return new i2e(Z5e)}const J5e="#e5c07b",rG="#e06c75",eMe="#56b6c2",tMe="#ffffff",bw="#abb2bf",vR="#7d8799",nMe="#61afef",iMe="#98c379",oG="#d19a66",rMe="#c678dd",oMe="#21252b",sG="#2c313a",aG="#282c34",XO="#353a42",sMe="#3E4451",lG="#528bff",aMe=Mi.theme({"&":{color:bw,backgroundColor:aG},".cm-content":{caretColor:lG},".cm-cursor, .cm-dropCursor":{borderLeftColor:lG},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:sMe},".cm-panels":{backgroundColor:oMe,color:bw},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:aG,color:vR,border:"none"},".cm-activeLineGutter":{backgroundColor:sG},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:XO},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:XO,borderBottomColor:XO},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:sG,color:bw}}},{dark:!0}),lMe=v5.define([{tag:cn.keyword,color:rMe},{tag:[cn.name,cn.deleted,cn.character,cn.propertyName,cn.macroName],color:rG},{tag:[cn.function(cn.variableName),cn.labelName],color:nMe},{tag:[cn.color,cn.constant(cn.name),cn.standard(cn.name)],color:oG},{tag:[cn.definition(cn.name),cn.separator],color:bw},{tag:[cn.typeName,cn.className,cn.number,cn.changed,cn.annotation,cn.modifier,cn.self,cn.namespace],color:J5e},{tag:[cn.operator,cn.operatorKeyword,cn.url,cn.escape,cn.regexp,cn.link,cn.special(cn.string)],color:eMe},{tag:[cn.meta,cn.comment],color:vR},{tag:cn.strong,fontWeight:"bold"},{tag:cn.emphasis,fontStyle:"italic"},{tag:cn.strikethrough,textDecoration:"line-through"},{tag:cn.link,color:vR,textDecoration:"underline"},{tag:cn.heading,fontWeight:"bold",color:rG},{tag:[cn.atom,cn.bool,cn.special(cn.variableName)],color:oG},{tag:[cn.processingInstruction,cn.string,cn.inserted],color:iMe},{tag:cn.invalid,color:tMe}]),uMe=[aMe,kte(lMe)];var Cw={exports:{}},cMe=Cw.exports,uG;function AMe(){return uG||(uG=1,(function(n,e){(function(t,i){n.exports=i()})(cMe,(function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function i(Oe,Ee){return Ee={exports:{}},Oe(Ee,Ee.exports),Ee.exports}var r=i(function(Oe){function Ee(){var Ve=0,mt=1,pt=2,Ct=3,Rt=4,Kt=5,on=6,qn=7,Qn=8,xi=9,Kn=10,Un=11,Cn=12,ei=13,Dn=14,It=15,Ce=16,re=17,le=0,he=1,se=2,Ae=3,be=4;function We(y,at){return 55296<=y.charCodeAt(at)&&y.charCodeAt(at)<=56319&&56320<=y.charCodeAt(at+1)&&y.charCodeAt(at+1)<=57343}function et(y,at){at===void 0&&(at=0);var Pt=y.charCodeAt(at);if(55296<=Pt&&Pt<=56319&&at<y.length-1){var Mt=Pt,en=y.charCodeAt(at+1);return 56320<=en&&en<=57343?(Mt-55296)*1024+(en-56320)+65536:Mt}if(56320<=Pt&&Pt<=57343&&at>=1){var Mt=y.charCodeAt(at-1),en=Pt;return 55296<=Mt&&Mt<=56319?(Mt-55296)*1024+(en-56320)+65536:en}return Pt}function Pe(y,at,Pt){var Mt=[y].concat(at).concat([Pt]),en=Mt[Mt.length-2],dt=Pt,Zn=Mt.lastIndexOf(Dn);if(Zn>1&&Mt.slice(1,Zn).every(function(zn){return zn==Ct})&&[Ct,ei,re].indexOf(y)==-1)return se;var gi=Mt.lastIndexOf(Rt);if(gi>0&&Mt.slice(1,gi).every(function(zn){return zn==Rt})&&[Cn,Rt].indexOf(en)==-1)return Mt.filter(function(zn){return zn==Rt}).length%2==1?Ae:be;if(en==Ve&&dt==mt)return le;if(en==pt||en==Ve||en==mt)return dt==Dn&&at.every(function(zn){return zn==Ct})?se:he;if(dt==pt||dt==Ve||dt==mt)return he;if(en==on&&(dt==on||dt==qn||dt==xi||dt==Kn))return le;if((en==xi||en==qn)&&(dt==qn||dt==Qn))return le;if((en==Kn||en==Qn)&&dt==Qn)return le;if(dt==Ct||dt==It)return le;if(dt==Kt)return le;if(en==Cn)return le;var Tn=Mt.indexOf(Ct)!=-1?Mt.lastIndexOf(Ct)-1:Mt.length-2;return[ei,re].indexOf(Mt[Tn])!=-1&&Mt.slice(Tn+1,-1).every(function(zn){return zn==Ct})&&dt==Dn||en==It&&[Ce,re].indexOf(dt)!=-1?le:at.indexOf(Rt)!=-1?se:en==Rt&&dt==Rt?le:he}this.nextBreak=function(y,at){if(at===void 0&&(at=0),at<0)return 0;if(at>=y.length-1)return y.length;for(var Pt=Ze(et(y,at)),Mt=[],en=at+1;en<y.length;en++)if(!We(y,en-1)){var dt=Ze(et(y,en));if(Pe(Pt,Mt,dt))return en;Mt.push(dt)}return y.length},this.splitGraphemes=function(y){for(var at=[],Pt=0,Mt;(Mt=this.nextBreak(y,Pt))<y.length;)at.push(y.slice(Pt,Mt)),Pt=Mt;return Pt<y.length&&at.push(y.slice(Pt)),at},this.iterateGraphemes=function(y){var at=0,Pt={next:(function(){var Mt,en;return(en=this.nextBreak(y,at))<y.length?(Mt=y.slice(at,en),at=en,{value:Mt,done:!1}):at<y.length?(Mt=y.slice(at),at=y.length,{value:Mt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(Pt[Symbol.iterator]=function(){return Pt}),Pt},this.countGraphemes=function(y){for(var at=0,Pt=0,Mt;(Mt=this.nextBreak(y,Pt))<y.length;)Pt=Mt,at++;return Pt<y.length&&at++,at};function Ze(y){return 1536<=y&&y<=1541||y==1757||y==1807||y==2274||y==3406||y==69821||70082<=y&&y<=70083||y==72250||72326<=y&&y<=72329||y==73030?Cn:y==13?Ve:y==10?mt:0<=y&&y<=9||11<=y&&y<=12||14<=y&&y<=31||127<=y&&y<=159||y==173||y==1564||y==6158||y==8203||8206<=y&&y<=8207||y==8232||y==8233||8234<=y&&y<=8238||8288<=y&&y<=8292||y==8293||8294<=y&&y<=8303||55296<=y&&y<=57343||y==65279||65520<=y&&y<=65528||65529<=y&&y<=65531||113824<=y&&y<=113827||119155<=y&&y<=119162||y==917504||y==917505||917506<=y&&y<=917535||917632<=y&&y<=917759||918e3<=y&&y<=921599?pt:768<=y&&y<=879||1155<=y&&y<=1159||1160<=y&&y<=1161||1425<=y&&y<=1469||y==1471||1473<=y&&y<=1474||1476<=y&&y<=1477||y==1479||1552<=y&&y<=1562||1611<=y&&y<=1631||y==1648||1750<=y&&y<=1756||1759<=y&&y<=1764||1767<=y&&y<=1768||1770<=y&&y<=1773||y==1809||1840<=y&&y<=1866||1958<=y&&y<=1968||2027<=y&&y<=2035||2070<=y&&y<=2073||2075<=y&&y<=2083||2085<=y&&y<=2087||2089<=y&&y<=2093||2137<=y&&y<=2139||2260<=y&&y<=2273||2275<=y&&y<=2306||y==2362||y==2364||2369<=y&&y<=2376||y==2381||2385<=y&&y<=2391||2402<=y&&y<=2403||y==2433||y==2492||y==2494||2497<=y&&y<=2500||y==2509||y==2519||2530<=y&&y<=2531||2561<=y&&y<=2562||y==2620||2625<=y&&y<=2626||2631<=y&&y<=2632||2635<=y&&y<=2637||y==2641||2672<=y&&y<=2673||y==2677||2689<=y&&y<=2690||y==2748||2753<=y&&y<=2757||2759<=y&&y<=2760||y==2765||2786<=y&&y<=2787||2810<=y&&y<=2815||y==2817||y==2876||y==2878||y==2879||2881<=y&&y<=2884||y==2893||y==2902||y==2903||2914<=y&&y<=2915||y==2946||y==3006||y==3008||y==3021||y==3031||y==3072||3134<=y&&y<=3136||3142<=y&&y<=3144||3146<=y&&y<=3149||3157<=y&&y<=3158||3170<=y&&y<=3171||y==3201||y==3260||y==3263||y==3266||y==3270||3276<=y&&y<=3277||3285<=y&&y<=3286||3298<=y&&y<=3299||3328<=y&&y<=3329||3387<=y&&y<=3388||y==3390||3393<=y&&y<=3396||y==3405||y==3415||3426<=y&&y<=3427||y==3530||y==3535||3538<=y&&y<=3540||y==3542||y==3551||y==3633||3636<=y&&y<=3642||3655<=y&&y<=3662||y==3761||3764<=y&&y<=3769||3771<=y&&y<=3772||3784<=y&&y<=3789||3864<=y&&y<=3865||y==3893||y==3895||y==3897||3953<=y&&y<=3966||3968<=y&&y<=3972||3974<=y&&y<=3975||3981<=y&&y<=3991||3993<=y&&y<=4028||y==4038||4141<=y&&y<=4144||4146<=y&&y<=4151||4153<=y&&y<=4154||4157<=y&&y<=4158||4184<=y&&y<=4185||4190<=y&&y<=4192||4209<=y&&y<=4212||y==4226||4229<=y&&y<=4230||y==4237||y==4253||4957<=y&&y<=4959||5906<=y&&y<=5908||5938<=y&&y<=5940||5970<=y&&y<=5971||6002<=y&&y<=6003||6068<=y&&y<=6069||6071<=y&&y<=6077||y==6086||6089<=y&&y<=6099||y==6109||6155<=y&&y<=6157||6277<=y&&y<=6278||y==6313||6432<=y&&y<=6434||6439<=y&&y<=6440||y==6450||6457<=y&&y<=6459||6679<=y&&y<=6680||y==6683||y==6742||6744<=y&&y<=6750||y==6752||y==6754||6757<=y&&y<=6764||6771<=y&&y<=6780||y==6783||6832<=y&&y<=6845||y==6846||6912<=y&&y<=6915||y==6964||6966<=y&&y<=6970||y==6972||y==6978||7019<=y&&y<=7027||7040<=y&&y<=7041||7074<=y&&y<=7077||7080<=y&&y<=7081||7083<=y&&y<=7085||y==7142||7144<=y&&y<=7145||y==7149||7151<=y&&y<=7153||7212<=y&&y<=7219||7222<=y&&y<=7223||7376<=y&&y<=7378||7380<=y&&y<=7392||7394<=y&&y<=7400||y==7405||y==7412||7416<=y&&y<=7417||7616<=y&&y<=7673||7675<=y&&y<=7679||y==8204||8400<=y&&y<=8412||8413<=y&&y<=8416||y==8417||8418<=y&&y<=8420||8421<=y&&y<=8432||11503<=y&&y<=11505||y==11647||11744<=y&&y<=11775||12330<=y&&y<=12333||12334<=y&&y<=12335||12441<=y&&y<=12442||y==42607||42608<=y&&y<=42610||42612<=y&&y<=42621||42654<=y&&y<=42655||42736<=y&&y<=42737||y==43010||y==43014||y==43019||43045<=y&&y<=43046||43204<=y&&y<=43205||43232<=y&&y<=43249||43302<=y&&y<=43309||43335<=y&&y<=43345||43392<=y&&y<=43394||y==43443||43446<=y&&y<=43449||y==43452||y==43493||43561<=y&&y<=43566||43569<=y&&y<=43570||43573<=y&&y<=43574||y==43587||y==43596||y==43644||y==43696||43698<=y&&y<=43700||43703<=y&&y<=43704||43710<=y&&y<=43711||y==43713||43756<=y&&y<=43757||y==43766||y==44005||y==44008||y==44013||y==64286||65024<=y&&y<=65039||65056<=y&&y<=65071||65438<=y&&y<=65439||y==66045||y==66272||66422<=y&&y<=66426||68097<=y&&y<=68099||68101<=y&&y<=68102||68108<=y&&y<=68111||68152<=y&&y<=68154||y==68159||68325<=y&&y<=68326||y==69633||69688<=y&&y<=69702||69759<=y&&y<=69761||69811<=y&&y<=69814||69817<=y&&y<=69818||69888<=y&&y<=69890||69927<=y&&y<=69931||69933<=y&&y<=69940||y==70003||70016<=y&&y<=70017||70070<=y&&y<=70078||70090<=y&&y<=70092||70191<=y&&y<=70193||y==70196||70198<=y&&y<=70199||y==70206||y==70367||70371<=y&&y<=70378||70400<=y&&y<=70401||y==70460||y==70462||y==70464||y==70487||70502<=y&&y<=70508||70512<=y&&y<=70516||70712<=y&&y<=70719||70722<=y&&y<=70724||y==70726||y==70832||70835<=y&&y<=70840||y==70842||y==70845||70847<=y&&y<=70848||70850<=y&&y<=70851||y==71087||71090<=y&&y<=71093||71100<=y&&y<=71101||71103<=y&&y<=71104||71132<=y&&y<=71133||71219<=y&&y<=71226||y==71229||71231<=y&&y<=71232||y==71339||y==71341||71344<=y&&y<=71349||y==71351||71453<=y&&y<=71455||71458<=y&&y<=71461||71463<=y&&y<=71467||72193<=y&&y<=72198||72201<=y&&y<=72202||72243<=y&&y<=72248||72251<=y&&y<=72254||y==72263||72273<=y&&y<=72278||72281<=y&&y<=72283||72330<=y&&y<=72342||72344<=y&&y<=72345||72752<=y&&y<=72758||72760<=y&&y<=72765||y==72767||72850<=y&&y<=72871||72874<=y&&y<=72880||72882<=y&&y<=72883||72885<=y&&y<=72886||73009<=y&&y<=73014||y==73018||73020<=y&&y<=73021||73023<=y&&y<=73029||y==73031||92912<=y&&y<=92916||92976<=y&&y<=92982||94095<=y&&y<=94098||113821<=y&&y<=113822||y==119141||119143<=y&&y<=119145||119150<=y&&y<=119154||119163<=y&&y<=119170||119173<=y&&y<=119179||119210<=y&&y<=119213||119362<=y&&y<=119364||121344<=y&&y<=121398||121403<=y&&y<=121452||y==121461||y==121476||121499<=y&&y<=121503||121505<=y&&y<=121519||122880<=y&&y<=122886||122888<=y&&y<=122904||122907<=y&&y<=122913||122915<=y&&y<=122916||122918<=y&&y<=122922||125136<=y&&y<=125142||125252<=y&&y<=125258||917536<=y&&y<=917631||917760<=y&&y<=917999?Ct:127462<=y&&y<=127487?Rt:y==2307||y==2363||2366<=y&&y<=2368||2377<=y&&y<=2380||2382<=y&&y<=2383||2434<=y&&y<=2435||2495<=y&&y<=2496||2503<=y&&y<=2504||2507<=y&&y<=2508||y==2563||2622<=y&&y<=2624||y==2691||2750<=y&&y<=2752||y==2761||2763<=y&&y<=2764||2818<=y&&y<=2819||y==2880||2887<=y&&y<=2888||2891<=y&&y<=2892||y==3007||3009<=y&&y<=3010||3014<=y&&y<=3016||3018<=y&&y<=3020||3073<=y&&y<=3075||3137<=y&&y<=3140||3202<=y&&y<=3203||y==3262||3264<=y&&y<=3265||3267<=y&&y<=3268||3271<=y&&y<=3272||3274<=y&&y<=3275||3330<=y&&y<=3331||3391<=y&&y<=3392||3398<=y&&y<=3400||3402<=y&&y<=3404||3458<=y&&y<=3459||3536<=y&&y<=3537||3544<=y&&y<=3550||3570<=y&&y<=3571||y==3635||y==3763||3902<=y&&y<=3903||y==3967||y==4145||4155<=y&&y<=4156||4182<=y&&y<=4183||y==4228||y==6070||6078<=y&&y<=6085||6087<=y&&y<=6088||6435<=y&&y<=6438||6441<=y&&y<=6443||6448<=y&&y<=6449||6451<=y&&y<=6456||6681<=y&&y<=6682||y==6741||y==6743||6765<=y&&y<=6770||y==6916||y==6965||y==6971||6973<=y&&y<=6977||6979<=y&&y<=6980||y==7042||y==7073||7078<=y&&y<=7079||y==7082||y==7143||7146<=y&&y<=7148||y==7150||7154<=y&&y<=7155||7204<=y&&y<=7211||7220<=y&&y<=7221||y==7393||7410<=y&&y<=7411||y==7415||43043<=y&&y<=43044||y==43047||43136<=y&&y<=43137||43188<=y&&y<=43203||43346<=y&&y<=43347||y==43395||43444<=y&&y<=43445||43450<=y&&y<=43451||43453<=y&&y<=43456||43567<=y&&y<=43568||43571<=y&&y<=43572||y==43597||y==43755||43758<=y&&y<=43759||y==43765||44003<=y&&y<=44004||44006<=y&&y<=44007||44009<=y&&y<=44010||y==44012||y==69632||y==69634||y==69762||69808<=y&&y<=69810||69815<=y&&y<=69816||y==69932||y==70018||70067<=y&&y<=70069||70079<=y&&y<=70080||70188<=y&&y<=70190||70194<=y&&y<=70195||y==70197||70368<=y&&y<=70370||70402<=y&&y<=70403||y==70463||70465<=y&&y<=70468||70471<=y&&y<=70472||70475<=y&&y<=70477||70498<=y&&y<=70499||70709<=y&&y<=70711||70720<=y&&y<=70721||y==70725||70833<=y&&y<=70834||y==70841||70843<=y&&y<=70844||y==70846||y==70849||71088<=y&&y<=71089||71096<=y&&y<=71099||y==71102||71216<=y&&y<=71218||71227<=y&&y<=71228||y==71230||y==71340||71342<=y&&y<=71343||y==71350||71456<=y&&y<=71457||y==71462||72199<=y&&y<=72200||y==72249||72279<=y&&y<=72280||y==72343||y==72751||y==72766||y==72873||y==72881||y==72884||94033<=y&&y<=94078||y==119142||y==119149?Kt:4352<=y&&y<=4447||43360<=y&&y<=43388?on:4448<=y&&y<=4519||55216<=y&&y<=55238?qn:4520<=y&&y<=4607||55243<=y&&y<=55291?Qn:y==44032||y==44060||y==44088||y==44116||y==44144||y==44172||y==44200||y==44228||y==44256||y==44284||y==44312||y==44340||y==44368||y==44396||y==44424||y==44452||y==44480||y==44508||y==44536||y==44564||y==44592||y==44620||y==44648||y==44676||y==44704||y==44732||y==44760||y==44788||y==44816||y==44844||y==44872||y==44900||y==44928||y==44956||y==44984||y==45012||y==45040||y==45068||y==45096||y==45124||y==45152||y==45180||y==45208||y==45236||y==45264||y==45292||y==45320||y==45348||y==45376||y==45404||y==45432||y==45460||y==45488||y==45516||y==45544||y==45572||y==45600||y==45628||y==45656||y==45684||y==45712||y==45740||y==45768||y==45796||y==45824||y==45852||y==45880||y==45908||y==45936||y==45964||y==45992||y==46020||y==46048||y==46076||y==46104||y==46132||y==46160||y==46188||y==46216||y==46244||y==46272||y==46300||y==46328||y==46356||y==46384||y==46412||y==46440||y==46468||y==46496||y==46524||y==46552||y==46580||y==46608||y==46636||y==46664||y==46692||y==46720||y==46748||y==46776||y==46804||y==46832||y==46860||y==46888||y==46916||y==46944||y==46972||y==47e3||y==47028||y==47056||y==47084||y==47112||y==47140||y==47168||y==47196||y==47224||y==47252||y==47280||y==47308||y==47336||y==47364||y==47392||y==47420||y==47448||y==47476||y==47504||y==47532||y==47560||y==47588||y==47616||y==47644||y==47672||y==47700||y==47728||y==47756||y==47784||y==47812||y==47840||y==47868||y==47896||y==47924||y==47952||y==47980||y==48008||y==48036||y==48064||y==48092||y==48120||y==48148||y==48176||y==48204||y==48232||y==48260||y==48288||y==48316||y==48344||y==48372||y==48400||y==48428||y==48456||y==48484||y==48512||y==48540||y==48568||y==48596||y==48624||y==48652||y==48680||y==48708||y==48736||y==48764||y==48792||y==48820||y==48848||y==48876||y==48904||y==48932||y==48960||y==48988||y==49016||y==49044||y==49072||y==49100||y==49128||y==49156||y==49184||y==49212||y==49240||y==49268||y==49296||y==49324||y==49352||y==49380||y==49408||y==49436||y==49464||y==49492||y==49520||y==49548||y==49576||y==49604||y==49632||y==49660||y==49688||y==49716||y==49744||y==49772||y==49800||y==49828||y==49856||y==49884||y==49912||y==49940||y==49968||y==49996||y==50024||y==50052||y==50080||y==50108||y==50136||y==50164||y==50192||y==50220||y==50248||y==50276||y==50304||y==50332||y==50360||y==50388||y==50416||y==50444||y==50472||y==50500||y==50528||y==50556||y==50584||y==50612||y==50640||y==50668||y==50696||y==50724||y==50752||y==50780||y==50808||y==50836||y==50864||y==50892||y==50920||y==50948||y==50976||y==51004||y==51032||y==51060||y==51088||y==51116||y==51144||y==51172||y==51200||y==51228||y==51256||y==51284||y==51312||y==51340||y==51368||y==51396||y==51424||y==51452||y==51480||y==51508||y==51536||y==51564||y==51592||y==51620||y==51648||y==51676||y==51704||y==51732||y==51760||y==51788||y==51816||y==51844||y==51872||y==51900||y==51928||y==51956||y==51984||y==52012||y==52040||y==52068||y==52096||y==52124||y==52152||y==52180||y==52208||y==52236||y==52264||y==52292||y==52320||y==52348||y==52376||y==52404||y==52432||y==52460||y==52488||y==52516||y==52544||y==52572||y==52600||y==52628||y==52656||y==52684||y==52712||y==52740||y==52768||y==52796||y==52824||y==52852||y==52880||y==52908||y==52936||y==52964||y==52992||y==53020||y==53048||y==53076||y==53104||y==53132||y==53160||y==53188||y==53216||y==53244||y==53272||y==53300||y==53328||y==53356||y==53384||y==53412||y==53440||y==53468||y==53496||y==53524||y==53552||y==53580||y==53608||y==53636||y==53664||y==53692||y==53720||y==53748||y==53776||y==53804||y==53832||y==53860||y==53888||y==53916||y==53944||y==53972||y==54e3||y==54028||y==54056||y==54084||y==54112||y==54140||y==54168||y==54196||y==54224||y==54252||y==54280||y==54308||y==54336||y==54364||y==54392||y==54420||y==54448||y==54476||y==54504||y==54532||y==54560||y==54588||y==54616||y==54644||y==54672||y==54700||y==54728||y==54756||y==54784||y==54812||y==54840||y==54868||y==54896||y==54924||y==54952||y==54980||y==55008||y==55036||y==55064||y==55092||y==55120||y==55148||y==55176?xi:44033<=y&&y<=44059||44061<=y&&y<=44087||44089<=y&&y<=44115||44117<=y&&y<=44143||44145<=y&&y<=44171||44173<=y&&y<=44199||44201<=y&&y<=44227||44229<=y&&y<=44255||44257<=y&&y<=44283||44285<=y&&y<=44311||44313<=y&&y<=44339||44341<=y&&y<=44367||44369<=y&&y<=44395||44397<=y&&y<=44423||44425<=y&&y<=44451||44453<=y&&y<=44479||44481<=y&&y<=44507||44509<=y&&y<=44535||44537<=y&&y<=44563||44565<=y&&y<=44591||44593<=y&&y<=44619||44621<=y&&y<=44647||44649<=y&&y<=44675||44677<=y&&y<=44703||44705<=y&&y<=44731||44733<=y&&y<=44759||44761<=y&&y<=44787||44789<=y&&y<=44815||44817<=y&&y<=44843||44845<=y&&y<=44871||44873<=y&&y<=44899||44901<=y&&y<=44927||44929<=y&&y<=44955||44957<=y&&y<=44983||44985<=y&&y<=45011||45013<=y&&y<=45039||45041<=y&&y<=45067||45069<=y&&y<=45095||45097<=y&&y<=45123||45125<=y&&y<=45151||45153<=y&&y<=45179||45181<=y&&y<=45207||45209<=y&&y<=45235||45237<=y&&y<=45263||45265<=y&&y<=45291||45293<=y&&y<=45319||45321<=y&&y<=45347||45349<=y&&y<=45375||45377<=y&&y<=45403||45405<=y&&y<=45431||45433<=y&&y<=45459||45461<=y&&y<=45487||45489<=y&&y<=45515||45517<=y&&y<=45543||45545<=y&&y<=45571||45573<=y&&y<=45599||45601<=y&&y<=45627||45629<=y&&y<=45655||45657<=y&&y<=45683||45685<=y&&y<=45711||45713<=y&&y<=45739||45741<=y&&y<=45767||45769<=y&&y<=45795||45797<=y&&y<=45823||45825<=y&&y<=45851||45853<=y&&y<=45879||45881<=y&&y<=45907||45909<=y&&y<=45935||45937<=y&&y<=45963||45965<=y&&y<=45991||45993<=y&&y<=46019||46021<=y&&y<=46047||46049<=y&&y<=46075||46077<=y&&y<=46103||46105<=y&&y<=46131||46133<=y&&y<=46159||46161<=y&&y<=46187||46189<=y&&y<=46215||46217<=y&&y<=46243||46245<=y&&y<=46271||46273<=y&&y<=46299||46301<=y&&y<=46327||46329<=y&&y<=46355||46357<=y&&y<=46383||46385<=y&&y<=46411||46413<=y&&y<=46439||46441<=y&&y<=46467||46469<=y&&y<=46495||46497<=y&&y<=46523||46525<=y&&y<=46551||46553<=y&&y<=46579||46581<=y&&y<=46607||46609<=y&&y<=46635||46637<=y&&y<=46663||46665<=y&&y<=46691||46693<=y&&y<=46719||46721<=y&&y<=46747||46749<=y&&y<=46775||46777<=y&&y<=46803||46805<=y&&y<=46831||46833<=y&&y<=46859||46861<=y&&y<=46887||46889<=y&&y<=46915||46917<=y&&y<=46943||46945<=y&&y<=46971||46973<=y&&y<=46999||47001<=y&&y<=47027||47029<=y&&y<=47055||47057<=y&&y<=47083||47085<=y&&y<=47111||47113<=y&&y<=47139||47141<=y&&y<=47167||47169<=y&&y<=47195||47197<=y&&y<=47223||47225<=y&&y<=47251||47253<=y&&y<=47279||47281<=y&&y<=47307||47309<=y&&y<=47335||47337<=y&&y<=47363||47365<=y&&y<=47391||47393<=y&&y<=47419||47421<=y&&y<=47447||47449<=y&&y<=47475||47477<=y&&y<=47503||47505<=y&&y<=47531||47533<=y&&y<=47559||47561<=y&&y<=47587||47589<=y&&y<=47615||47617<=y&&y<=47643||47645<=y&&y<=47671||47673<=y&&y<=47699||47701<=y&&y<=47727||47729<=y&&y<=47755||47757<=y&&y<=47783||47785<=y&&y<=47811||47813<=y&&y<=47839||47841<=y&&y<=47867||47869<=y&&y<=47895||47897<=y&&y<=47923||47925<=y&&y<=47951||47953<=y&&y<=47979||47981<=y&&y<=48007||48009<=y&&y<=48035||48037<=y&&y<=48063||48065<=y&&y<=48091||48093<=y&&y<=48119||48121<=y&&y<=48147||48149<=y&&y<=48175||48177<=y&&y<=48203||48205<=y&&y<=48231||48233<=y&&y<=48259||48261<=y&&y<=48287||48289<=y&&y<=48315||48317<=y&&y<=48343||48345<=y&&y<=48371||48373<=y&&y<=48399||48401<=y&&y<=48427||48429<=y&&y<=48455||48457<=y&&y<=48483||48485<=y&&y<=48511||48513<=y&&y<=48539||48541<=y&&y<=48567||48569<=y&&y<=48595||48597<=y&&y<=48623||48625<=y&&y<=48651||48653<=y&&y<=48679||48681<=y&&y<=48707||48709<=y&&y<=48735||48737<=y&&y<=48763||48765<=y&&y<=48791||48793<=y&&y<=48819||48821<=y&&y<=48847||48849<=y&&y<=48875||48877<=y&&y<=48903||48905<=y&&y<=48931||48933<=y&&y<=48959||48961<=y&&y<=48987||48989<=y&&y<=49015||49017<=y&&y<=49043||49045<=y&&y<=49071||49073<=y&&y<=49099||49101<=y&&y<=49127||49129<=y&&y<=49155||49157<=y&&y<=49183||49185<=y&&y<=49211||49213<=y&&y<=49239||49241<=y&&y<=49267||49269<=y&&y<=49295||49297<=y&&y<=49323||49325<=y&&y<=49351||49353<=y&&y<=49379||49381<=y&&y<=49407||49409<=y&&y<=49435||49437<=y&&y<=49463||49465<=y&&y<=49491||49493<=y&&y<=49519||49521<=y&&y<=49547||49549<=y&&y<=49575||49577<=y&&y<=49603||49605<=y&&y<=49631||49633<=y&&y<=49659||49661<=y&&y<=49687||49689<=y&&y<=49715||49717<=y&&y<=49743||49745<=y&&y<=49771||49773<=y&&y<=49799||49801<=y&&y<=49827||49829<=y&&y<=49855||49857<=y&&y<=49883||49885<=y&&y<=49911||49913<=y&&y<=49939||49941<=y&&y<=49967||49969<=y&&y<=49995||49997<=y&&y<=50023||50025<=y&&y<=50051||50053<=y&&y<=50079||50081<=y&&y<=50107||50109<=y&&y<=50135||50137<=y&&y<=50163||50165<=y&&y<=50191||50193<=y&&y<=50219||50221<=y&&y<=50247||50249<=y&&y<=50275||50277<=y&&y<=50303||50305<=y&&y<=50331||50333<=y&&y<=50359||50361<=y&&y<=50387||50389<=y&&y<=50415||50417<=y&&y<=50443||50445<=y&&y<=50471||50473<=y&&y<=50499||50501<=y&&y<=50527||50529<=y&&y<=50555||50557<=y&&y<=50583||50585<=y&&y<=50611||50613<=y&&y<=50639||50641<=y&&y<=50667||50669<=y&&y<=50695||50697<=y&&y<=50723||50725<=y&&y<=50751||50753<=y&&y<=50779||50781<=y&&y<=50807||50809<=y&&y<=50835||50837<=y&&y<=50863||50865<=y&&y<=50891||50893<=y&&y<=50919||50921<=y&&y<=50947||50949<=y&&y<=50975||50977<=y&&y<=51003||51005<=y&&y<=51031||51033<=y&&y<=51059||51061<=y&&y<=51087||51089<=y&&y<=51115||51117<=y&&y<=51143||51145<=y&&y<=51171||51173<=y&&y<=51199||51201<=y&&y<=51227||51229<=y&&y<=51255||51257<=y&&y<=51283||51285<=y&&y<=51311||51313<=y&&y<=51339||51341<=y&&y<=51367||51369<=y&&y<=51395||51397<=y&&y<=51423||51425<=y&&y<=51451||51453<=y&&y<=51479||51481<=y&&y<=51507||51509<=y&&y<=51535||51537<=y&&y<=51563||51565<=y&&y<=51591||51593<=y&&y<=51619||51621<=y&&y<=51647||51649<=y&&y<=51675||51677<=y&&y<=51703||51705<=y&&y<=51731||51733<=y&&y<=51759||51761<=y&&y<=51787||51789<=y&&y<=51815||51817<=y&&y<=51843||51845<=y&&y<=51871||51873<=y&&y<=51899||51901<=y&&y<=51927||51929<=y&&y<=51955||51957<=y&&y<=51983||51985<=y&&y<=52011||52013<=y&&y<=52039||52041<=y&&y<=52067||52069<=y&&y<=52095||52097<=y&&y<=52123||52125<=y&&y<=52151||52153<=y&&y<=52179||52181<=y&&y<=52207||52209<=y&&y<=52235||52237<=y&&y<=52263||52265<=y&&y<=52291||52293<=y&&y<=52319||52321<=y&&y<=52347||52349<=y&&y<=52375||52377<=y&&y<=52403||52405<=y&&y<=52431||52433<=y&&y<=52459||52461<=y&&y<=52487||52489<=y&&y<=52515||52517<=y&&y<=52543||52545<=y&&y<=52571||52573<=y&&y<=52599||52601<=y&&y<=52627||52629<=y&&y<=52655||52657<=y&&y<=52683||52685<=y&&y<=52711||52713<=y&&y<=52739||52741<=y&&y<=52767||52769<=y&&y<=52795||52797<=y&&y<=52823||52825<=y&&y<=52851||52853<=y&&y<=52879||52881<=y&&y<=52907||52909<=y&&y<=52935||52937<=y&&y<=52963||52965<=y&&y<=52991||52993<=y&&y<=53019||53021<=y&&y<=53047||53049<=y&&y<=53075||53077<=y&&y<=53103||53105<=y&&y<=53131||53133<=y&&y<=53159||53161<=y&&y<=53187||53189<=y&&y<=53215||53217<=y&&y<=53243||53245<=y&&y<=53271||53273<=y&&y<=53299||53301<=y&&y<=53327||53329<=y&&y<=53355||53357<=y&&y<=53383||53385<=y&&y<=53411||53413<=y&&y<=53439||53441<=y&&y<=53467||53469<=y&&y<=53495||53497<=y&&y<=53523||53525<=y&&y<=53551||53553<=y&&y<=53579||53581<=y&&y<=53607||53609<=y&&y<=53635||53637<=y&&y<=53663||53665<=y&&y<=53691||53693<=y&&y<=53719||53721<=y&&y<=53747||53749<=y&&y<=53775||53777<=y&&y<=53803||53805<=y&&y<=53831||53833<=y&&y<=53859||53861<=y&&y<=53887||53889<=y&&y<=53915||53917<=y&&y<=53943||53945<=y&&y<=53971||53973<=y&&y<=53999||54001<=y&&y<=54027||54029<=y&&y<=54055||54057<=y&&y<=54083||54085<=y&&y<=54111||54113<=y&&y<=54139||54141<=y&&y<=54167||54169<=y&&y<=54195||54197<=y&&y<=54223||54225<=y&&y<=54251||54253<=y&&y<=54279||54281<=y&&y<=54307||54309<=y&&y<=54335||54337<=y&&y<=54363||54365<=y&&y<=54391||54393<=y&&y<=54419||54421<=y&&y<=54447||54449<=y&&y<=54475||54477<=y&&y<=54503||54505<=y&&y<=54531||54533<=y&&y<=54559||54561<=y&&y<=54587||54589<=y&&y<=54615||54617<=y&&y<=54643||54645<=y&&y<=54671||54673<=y&&y<=54699||54701<=y&&y<=54727||54729<=y&&y<=54755||54757<=y&&y<=54783||54785<=y&&y<=54811||54813<=y&&y<=54839||54841<=y&&y<=54867||54869<=y&&y<=54895||54897<=y&&y<=54923||54925<=y&&y<=54951||54953<=y&&y<=54979||54981<=y&&y<=55007||55009<=y&&y<=55035||55037<=y&&y<=55063||55065<=y&&y<=55091||55093<=y&&y<=55119||55121<=y&&y<=55147||55149<=y&&y<=55175||55177<=y&&y<=55203?Kn:y==9757||y==9977||9994<=y&&y<=9997||y==127877||127938<=y&&y<=127940||y==127943||127946<=y&&y<=127948||128066<=y&&y<=128067||128070<=y&&y<=128080||y==128110||128112<=y&&y<=128120||y==128124||128129<=y&&y<=128131||128133<=y&&y<=128135||y==128170||128372<=y&&y<=128373||y==128378||y==128400||128405<=y&&y<=128406||128581<=y&&y<=128583||128587<=y&&y<=128591||y==128675||128692<=y&&y<=128694||y==128704||y==128716||129304<=y&&y<=129308||129310<=y&&y<=129311||y==129318||129328<=y&&y<=129337||129341<=y&&y<=129342||129489<=y&&y<=129501?ei:127995<=y&&y<=127999?Dn:y==8205?It:y==9792||y==9794||9877<=y&&y<=9878||y==9992||y==10084||y==127752||y==127806||y==127859||y==127891||y==127908||y==127912||y==127979||y==127981||y==128139||128187<=y&&y<=128188||y==128295||y==128300||y==128488||y==128640||y==128658?Ce:128102<=y&&y<=128105?re:Un}return this}Oe.exports&&(Oe.exports=Ee)}),o=new r,s=function(Ee,Ve,mt){for(var pt=o.iterateGraphemes(Ee.substring(Ve)),Ct="",Rt=0;Rt<mt-Ve;Rt++){var Kt=pt.next();if(Ct+=Kt.value,Kt.done)break}return Ct},a=(function(Oe,Ee,Ve,mt,pt,Ct,Rt){return{start:{line:Oe,column:Ee,offset:Ve},end:{line:mt,column:pt,offset:Ct},source:Rt||null}}),c=i(function(Oe,Ee){(function(Ve,mt){Oe.exports=mt()})(t,function(){var Ve="",mt,pt=Ct;function Ct(Kn,Un){if(typeof Kn!="string")throw new TypeError("expected a string");if(Un===1)return Kn;if(Un===2)return Kn+Kn;var Cn=Kn.length*Un;if(mt!==Kn||typeof mt>"u")mt=Kn,Ve="";else if(Ve.length>=Cn)return Ve.substr(0,Cn);for(;Cn>Ve.length&&Un>1;)Un&1&&(Ve+=Kn),Un>>=1,Kn+=Kn;return Ve+=Kn,Ve=Ve.substr(0,Cn),Ve}var Rt=function(Un,Cn,ei){if(Un==null||Cn==null)return Un;var Dn=String(Un),It=typeof Cn=="number"?Cn:parseInt(Cn,10);if(isNaN(It)||!isFinite(It))return Dn;var Ce=Dn.length;if(Ce>=It)return Dn;var re=String(ei);re===""&&(re=" ");for(var le=It-Ce;re.length<le;)re+=re;var he=re.length>le?re.substr(0,le):re;return he+Dn},Kt=Object.assign||function(Kn){for(var Un=1;Un<arguments.length;Un++){var Cn=arguments[Un];for(var ei in Cn)Object.prototype.hasOwnProperty.call(Cn,ei)&&(Kn[ei]=Cn[ei])}return Kn};function on(Kn,Un,Cn,ei){var Dn=String(Un),It=Rt(Dn,Cn," "),Ce=pt(" ",ei.tabSize);return It+" | "+Kn.replace(/\t/g,Ce)}function qn(Kn,Un,Cn,ei,Dn){return Kn.slice(Un,Cn).map(function(It,Ce){return on(It,Un+Ce+1,ei,Dn)}).join(`
`)}var Qn={extraLines:2,tabSize:4},xi=function(Un,Cn,ei,Dn){Dn=Kt({},Qn,Dn);var It=Un.split(/\r\n?|\n|\f/),Ce=Math.max(1,Cn-Dn.extraLines)-1,re=Math.min(Cn+Dn.extraLines,It.length),le=String(re).length,he=qn(It,Ce,Cn,le,Dn),se=on(It[Cn-1].substring(0,ei-1),Cn,le,Dn),Ae=pt(" ",se.length)+"^",be=qn(It,Cn,re,le,Dn);return[he,Ae,be].filter(Boolean).join(`
`)};return xi})}),h=new Error().stack,m=(function(Oe){var Ee=Object.create(SyntaxError.prototype);return Object.assign(Ee,Oe,{name:"SyntaxError"}),Object.defineProperty(Ee,"stack",{get:function(){return h?h.replace(/^(.+\n){1,3}/,String(Ee)+`
`):""}}),Ee}),v=(function(Oe,Ee,Ve,mt,pt){throw m({message:mt?Oe+`
`+c(Ee,mt,pt):Oe,rawMessage:Oe,source:Ve,line:mt,column:pt})}),x={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Ee){for(var Ve=arguments.length,mt=Array(Ve>1?Ve-1:0),pt=1;pt<Ve;pt++)mt[pt-1]=arguments[pt];return"Unexpected token <"+Ee+"> at "+mt.filter(Boolean).join(":")}},E={unexpectedSymbol:function(Ee){for(var Ve=arguments.length,mt=Array(Ve>1?Ve-1:0),pt=1;pt<Ve;pt++)mt[pt-1]=arguments[pt];return"Unexpected symbol <"+Ee+"> at "+mt.filter(Boolean).join(":")}},R={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},P={"{":R.LEFT_BRACE,"}":R.RIGHT_BRACE,"[":R.LEFT_BRACKET,"]":R.RIGHT_BRACKET,":":R.COLON,",":R.COMMA},z={true:R.TRUE,false:R.FALSE,null:R.NULL},Q={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},Y={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},H={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function Z(Oe){return Oe>="1"&&Oe<="9"}function J(Oe){return Oe>="0"&&Oe<="9"}function $(Oe){return J(Oe)||Oe>="a"&&Oe<="f"||Oe>="A"&&Oe<="F"}function G(Oe){return Oe==="e"||Oe==="E"}function oe(Oe,Ee,Ve,mt){var pt=Oe.charAt(Ee);if(pt==="\r")Ee++,Ve++,mt=1,Oe.charAt(Ee)===`
`&&Ee++;else if(pt===`
`)Ee++,Ve++,mt=1;else if(pt==="	"||pt===" ")Ee++,mt++;else return null;return{index:Ee,line:Ve,column:mt}}function ue(Oe,Ee,Ve,mt){var pt=Oe.charAt(Ee);return pt in P?{type:P[pt],line:Ve,column:mt+1,index:Ee+1,value:null}:null}function xe(Oe,Ee,Ve,mt){for(var pt in z)if(z.hasOwnProperty(pt)&&Oe.substr(Ee,pt.length)===pt)return{type:z[pt],line:Ve,column:mt+pt.length,index:Ee+pt.length,value:pt};return null}function ge(Oe,Ee,Ve,mt){for(var pt=Ee,Ct=Q._START_;Ee<Oe.length;){var Rt=Oe.charAt(Ee);switch(Ct){case Q._START_:{if(Rt==='"')Ee++,Ct=Q.START_QUOTE_OR_CHAR;else return null;break}case Q.START_QUOTE_OR_CHAR:{if(Rt==="\\")Ee++,Ct=Q.ESCAPE;else{if(Rt==='"')return Ee++,{type:R.STRING,line:Ve,column:mt+Ee-pt,index:Ee,value:Oe.slice(pt,Ee)};Ee++}break}case Q.ESCAPE:{if(Rt in Y){if(Ee++,Rt==="u")for(var Kt=0;Kt<4;Kt++){var on=Oe.charAt(Ee);if(on&&$(on))Ee++;else return null}Ct=Q.START_QUOTE_OR_CHAR}else return null;break}}}}function Ie(Oe,Ee,Ve,mt){var pt=Ee,Ct=Ee,Rt=H._START_;e:for(;Ee<Oe.length;){var Kt=Oe.charAt(Ee);switch(Rt){case H._START_:{if(Kt==="-")Rt=H.MINUS;else if(Kt==="0")Ct=Ee+1,Rt=H.ZERO;else if(Z(Kt))Ct=Ee+1,Rt=H.DIGIT;else return null;break}case H.MINUS:{if(Kt==="0")Ct=Ee+1,Rt=H.ZERO;else if(Z(Kt))Ct=Ee+1,Rt=H.DIGIT;else return null;break}case H.ZERO:{if(Kt===".")Rt=H.POINT;else if(G(Kt))Rt=H.EXP;else break e;break}case H.DIGIT:{if(J(Kt))Ct=Ee+1;else if(Kt===".")Rt=H.POINT;else if(G(Kt))Rt=H.EXP;else break e;break}case H.POINT:{if(J(Kt))Ct=Ee+1,Rt=H.DIGIT_FRACTION;else break e;break}case H.DIGIT_FRACTION:{if(J(Kt))Ct=Ee+1;else if(G(Kt))Rt=H.EXP;else break e;break}case H.EXP:{if(Kt==="+"||Kt==="-")Rt=H.EXP_DIGIT_OR_SIGN;else if(J(Kt))Ct=Ee+1,Rt=H.EXP_DIGIT_OR_SIGN;else break e;break}case H.EXP_DIGIT_OR_SIGN:{if(J(Kt))Ct=Ee+1;else break e;break}}Ee++}return Ct>0?{type:R.NUMBER,line:Ve,column:mt+Ct-pt,index:Ct,value:Oe.slice(pt,Ct)}:null}var Me=function(Ee,Ve){for(var mt=1,pt=1,Ct=0,Rt=[];Ct<Ee.length;){var Kt=[Ee,Ct,mt,pt],on=oe.apply(void 0,Kt);if(on){Ct=on.index,mt=on.line,pt=on.column;continue}var qn=ue.apply(void 0,Kt)||xe.apply(void 0,Kt)||ge.apply(void 0,Kt)||Ie.apply(void 0,Kt);if(qn){var Qn={type:qn.type,value:qn.value,loc:a(mt,pt,Ct,qn.line,qn.column,qn.index,Ve.source)};Rt.push(Qn),Ct=qn.index,mt=qn.line,pt=qn.column}else v(E.unexpectedSymbol(s(Ee,Ct,Ct+1),Ve.source,mt,pt),Ee,Ve.source,mt,pt)}return Rt},ke={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},je={_START_:0,KEY:1,COLON:2},Be={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Ye={loc:!0,source:null};function At(Oe,Ee,Ve){var mt=Ee.length>0?Ee[Ee.length-1].loc.end:{line:1,column:1};v(x.unexpectedEnd(),Oe,Ve.source,mt.line,mt.column)}function yt(Oe){for(var Ee=0,Ve=0;Ve<4;Ve++)Ee=Ee*16+parseInt(Oe[Ve],16);return String.fromCharCode(Ee)}var Le={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},De=['"',"\\","/"];function Ge(Oe){for(var Ee="",Ve=0;Ve<Oe.length;Ve++){var mt=Oe.charAt(Ve);if(mt==="\\"){Ve++;var pt=Oe.charAt(Ve);if(pt==="u")Ee+=yt(Oe.substr(Ve+1,4)),Ve+=4;else if(De.indexOf(pt)!==-1)Ee+=pt;else if(pt in Le)Ee+=Le[pt];else break}else Ee+=mt}return Ee}function Te(Oe,Ee,Ve,mt){for(var pt=void 0,Ct={type:"Object",children:[]},Rt=ke._START_;Ve<Ee.length;){var Kt=Ee[Ve];switch(Rt){case ke._START_:{if(Kt.type===R.LEFT_BRACE)pt=Kt,Rt=ke.OPEN_OBJECT,Ve++;else return null;break}case ke.OPEN_OBJECT:{if(Kt.type===R.RIGHT_BRACE)return mt.loc&&(Ct.loc=a(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,mt.source)),{value:Ct,index:Ve+1};var on=xt(Oe,Ee,Ve,mt);Ct.children.push(on.value),Rt=ke.PROPERTY,Ve=on.index;break}case ke.PROPERTY:{if(Kt.type===R.RIGHT_BRACE)return mt.loc&&(Ct.loc=a(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,mt.source)),{value:Ct,index:Ve+1};Kt.type===R.COMMA?(Rt=ke.COMMA,Ve++):v(x.unexpectedToken(s(Oe,Kt.loc.start.offset,Kt.loc.end.offset),mt.source,Kt.loc.start.line,Kt.loc.start.column),Oe,mt.source,Kt.loc.start.line,Kt.loc.start.column);break}case ke.COMMA:{var qn=xt(Oe,Ee,Ve,mt);qn?(Ve=qn.index,Ct.children.push(qn.value),Rt=ke.PROPERTY):v(x.unexpectedToken(s(Oe,Kt.loc.start.offset,Kt.loc.end.offset),mt.source,Kt.loc.start.line,Kt.loc.start.column),Oe,mt.source,Kt.loc.start.line,Kt.loc.start.column);break}}}At(Oe,Ee,mt)}function xt(Oe,Ee,Ve,mt){for(var pt=void 0,Ct={type:"Property",key:null,value:null},Rt=je._START_;Ve<Ee.length;){var Kt=Ee[Ve];switch(Rt){case je._START_:{if(Kt.type===R.STRING){var on={type:"Identifier",value:Ge(Oe.slice(Kt.loc.start.offset+1,Kt.loc.end.offset-1)),raw:Kt.value};mt.loc&&(on.loc=Kt.loc),pt=Kt,Ct.key=on,Rt=je.KEY,Ve++}else return null;break}case je.KEY:{Kt.type===R.COLON?(Rt=je.COLON,Ve++):v(x.unexpectedToken(s(Oe,Kt.loc.start.offset,Kt.loc.end.offset),mt.source,Kt.loc.start.line,Kt.loc.start.column),Oe,mt.source,Kt.loc.start.line,Kt.loc.start.column);break}case je.COLON:{var qn=Lt(Oe,Ee,Ve,mt);return Ct.value=qn.value,mt.loc&&(Ct.loc=a(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,qn.value.loc.end.line,qn.value.loc.end.column,qn.value.loc.end.offset,mt.source)),{value:Ct,index:qn.index}}}}}function st(Oe,Ee,Ve,mt){for(var pt=void 0,Ct={type:"Array",children:[]},Rt=Be._START_,Kt=void 0;Ve<Ee.length;)switch(Kt=Ee[Ve],Rt){case Be._START_:{if(Kt.type===R.LEFT_BRACKET)pt=Kt,Rt=Be.OPEN_ARRAY,Ve++;else return null;break}case Be.OPEN_ARRAY:{if(Kt.type===R.RIGHT_BRACKET)return mt.loc&&(Ct.loc=a(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,mt.source)),{value:Ct,index:Ve+1};var on=Lt(Oe,Ee,Ve,mt);Ve=on.index,Ct.children.push(on.value),Rt=Be.VALUE;break}case Be.VALUE:{if(Kt.type===R.RIGHT_BRACKET)return mt.loc&&(Ct.loc=a(pt.loc.start.line,pt.loc.start.column,pt.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,mt.source)),{value:Ct,index:Ve+1};Kt.type===R.COMMA?(Rt=Be.COMMA,Ve++):v(x.unexpectedToken(s(Oe,Kt.loc.start.offset,Kt.loc.end.offset),mt.source,Kt.loc.start.line,Kt.loc.start.column),Oe,mt.source,Kt.loc.start.line,Kt.loc.start.column);break}case Be.COMMA:{var qn=Lt(Oe,Ee,Ve,mt);Ve=qn.index,Ct.children.push(qn.value),Rt=Be.VALUE;break}}At(Oe,Ee,mt)}function Tt(Oe,Ee,Ve,mt){var pt=Ee[Ve],Ct=null;switch(pt.type){case R.STRING:{Ct=Ge(Oe.slice(pt.loc.start.offset+1,pt.loc.end.offset-1));break}case R.NUMBER:{Ct=Number(pt.value);break}case R.TRUE:{Ct=!0;break}case R.FALSE:{Ct=!1;break}case R.NULL:{Ct=null;break}default:return null}var Rt={type:"Literal",value:Ct,raw:pt.value};return mt.loc&&(Rt.loc=pt.loc),{value:Rt,index:Ve+1}}function Lt(Oe,Ee,Ve,mt){var pt=Ee[Ve],Ct=Tt.apply(void 0,arguments)||Te.apply(void 0,arguments)||st.apply(void 0,arguments);if(Ct)return Ct;v(x.unexpectedToken(s(Oe,pt.loc.start.offset,pt.loc.end.offset),mt.source,pt.loc.start.line,pt.loc.start.column),Oe,mt.source,pt.loc.start.line,pt.loc.start.column)}var Ue=(function(Oe,Ee){Ee=Object.assign({},Ye,Ee);var Ve=Me(Oe,Ee);Ve.length===0&&At(Oe,Ve,Ee);var mt=Lt(Oe,Ve,0,Ee);if(mt.index===Ve.length)return mt.value;var pt=Ve[mt.index];v(x.unexpectedToken(s(Oe,pt.loc.start.offset,pt.loc.end.offset),Ee.source,pt.loc.start.line,pt.loc.start.column),Oe,Ee.source,pt.loc.start.line,pt.loc.start.column)});return Ue}))})(Cw)),Cw.exports}var hMe=AMe();const MK=Su(hMe);function xa(){var n="/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",e="68bf9a3bcb07bd54be36702e0c3494ce552968d6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:18}},2:{start:{line:5,column:2},end:{line:7,column:3}},3:{start:{line:6,column:4},end:{line:6,column:16}},4:{start:{line:8,column:2},end:{line:10,column:3}},5:{start:{line:9,column:4},end:{line:9,column:18}},6:{start:{line:11,column:14},end:{line:11,column:21}},7:{start:{line:12,column:2},end:{line:14,column:3}},8:{start:{line:13,column:4},end:{line:13,column:70}},9:{start:{line:15,column:18},end:{line:17,column:4}},10:{start:{line:16,column:4},end:{line:16,column:100}},11:{start:{line:18,column:2},end:{line:18,column:59}}},fnMap:{0:{name:"jsonPathToPosition",decl:{start:{line:1,column:16},end:{line:1,column:34}},loc:{start:{line:1,column:47},end:{line:19,column:1}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:15,column:37},end:{line:15,column:38}},loc:{start:{line:15,column:52},end:{line:17,column:3}},line:15}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:5,column:2},end:{line:7,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:7,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},2:{loc:{start:{line:8,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:10,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},3:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},4:{loc:{start:{line:16,column:11},end:{line:16,column:99}},type:"binary-expr",locations:[{start:{line:16,column:11},end:{line:16,column:29}},{start:{line:16,column:33},end:{line:16,column:68}},{start:{line:16,column:72},end:{line:16,column:99}}],line:16}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/json-path-to-position.ts"],names:[],mappings:"AAEO,gBAAS,mBAAmB,MAAgB,MAA6C;AAC9F,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AACA,MAAI,KAAK,SAAS,GAAG;AACnB,WAAO;AAAA,EACT;AACA,MAAI,EAAE,cAAc,OAAO;AACzB,WAAO;AAAA,EACT;AACA,QAAM,MAAM,KAAK,CAAC;AAClB,MAAI,IAAI,MAAM,UAAU,GAAG;AACzB,WAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;AAAA,EAClE;AACA,QAAM,UAAU,KAAK,SAAS,KAAK,CAAC,cAAc;AAChD,WACE,SAAS,aACT,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,EAE5B,CAAC;AACD,SAAO,mBAAmB,KAAK,MAAM,CAAC,GAAG,SAAS,KAAK;AACzD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"68bf9a3bcb07bd54be36702e0c3494ce552968d6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return xa=function(){return s},s}xa();function bR(n,e){if(xa().f[0]++,xa().s[0]++,e)xa().b[0][1]++;else{xa().b[0][0]++,xa().s[1]++;return}if(xa().s[2]++,n.length<1)return xa().b[1][0]++,xa().s[3]++,e;if(xa().b[1][1]++,xa().s[4]++,"children"in e)xa().b[2][1]++;else{xa().b[2][0]++,xa().s[5]++;return}const t=(xa().s[6]++,n[0]);if(xa().s[7]++,t.match(/^[0-9]+$/))return xa().b[3][0]++,xa().s[8]++,bR(n.slice(1),e.children[+n[0]]);xa().b[3][1]++;const i=(xa().s[9]++,e.children.find(r=>(xa().f[1]++,xa().s[10]++,xa().b[4][0]++,"key"in r&&(xa().b[4][1]++,r.key.type==="Identifier")&&(xa().b[4][2]++,r.key.value===t))));return xa().s[11]++,bR(n.slice(1),i?.value)}function kn(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",e="fed5a4f9200b6a5cf90f61b2c7f89f45308868c6",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:24}},1:{start:{line:12,column:2},end:{line:37,column:3}},2:{start:{line:13,column:29},end:{line:13,column:34}},3:{start:{line:14,column:4},end:{line:36,column:5}},4:{start:{line:15,column:6},end:{line:20,column:9}},5:{start:{line:22,column:19},end:{line:22,column:81}},6:{start:{line:23,column:19},end:{line:23,column:48}},7:{start:{line:24,column:6},end:{line:27,column:7}},8:{start:{line:25,column:8},end:{line:25,column:67}},9:{start:{line:26,column:8},end:{line:26,column:17}},10:{start:{line:28,column:6},end:{line:35,column:7}},11:{start:{line:29,column:8},end:{line:34,column:11}},12:{start:{line:38,column:2},end:{line:38,column:21}},13:{start:{line:41,column:2},end:{line:70,column:4}},14:{start:{line:42,column:17},end:{line:42,column:42}},15:{start:{line:43,column:4},end:{line:68,column:5}},16:{start:{line:44,column:25},end:{line:44,column:41}},17:{start:{line:45,column:18},end:{line:45,column:33}},18:{start:{line:46,column:31},end:{line:56,column:8}},19:{start:{line:57,column:27},end:{line:65,column:8}},20:{start:{line:58,column:8},end:{line:58,column:74}},21:{start:{line:60,column:32},end:{line:60,column:83}},22:{start:{line:61,column:8},end:{line:64,column:10}},23:{start:{line:66,column:6},end:{line:66,column:67}},24:{start:{line:69,column:4},end:{line:69,column:14}},25:{start:{line:73,column:2},end:{line:89,column:4}},26:{start:{line:74,column:17},end:{line:74,column:42}},27:{start:{line:75,column:4},end:{line:87,column:5}},28:{start:{line:76,column:25},end:{line:76,column:41}},29:{start:{line:77,column:18},end:{line:77,column:33}},30:{start:{line:78,column:31},end:{line:78,column:59}},31:{start:{line:79,column:27},end:{line:84,column:8}},32:{start:{line:80,column:8},end:{line:83,column:10}},33:{start:{line:85,column:6},end:{line:85,column:67}},34:{start:{line:88,column:4},end:{line:88,column:14}},35:{start:{line:92,column:2},end:{line:102,column:4}},36:{start:{line:93,column:17},end:{line:93,column:42}},37:{start:{line:94,column:23},end:{line:94,column:39}},38:{start:{line:95,column:16},end:{line:95,column:31}},39:{start:{line:96,column:16},end:{line:96,column:61}},40:{start:{line:97,column:4},end:{line:99,column:5}},41:{start:{line:98,column:6},end:{line:98,column:16}},42:{start:{line:100,column:19},end:{line:100,column:28}},43:{start:{line:101,column:4},end:{line:101,column:59}},44:{start:{line:105,column:23},end:{line:105,column:31}},45:{start:{line:105,column:29},end:{line:105,column:31}},46:{start:{line:106,column:2},end:{line:119,column:3}},47:{start:{line:108,column:6},end:{line:108,column:51}},48:{start:{line:109,column:6},end:{line:109,column:12}},49:{start:{line:111,column:6},end:{line:111,column:51}},50:{start:{line:112,column:6},end:{line:112,column:12}},51:{start:{line:114,column:6},end:{line:114,column:66}},52:{start:{line:115,column:6},end:{line:115,column:12}},53:{start:{line:117,column:6},end:{line:117,column:32}},54:{start:{line:117,column:29},end:{line:117,column:31}},55:{start:{line:118,column:6},end:{line:118,column:12}},56:{start:{line:120,column:2},end:{line:156,column:5}},57:{start:{line:133,column:8},end:{line:137,column:9}},58:{start:{line:134,column:22},end:{line:134,column:38}},59:{start:{line:135,column:24},end:{line:135,column:38}},60:{start:{line:136,column:10},end:{line:136,column:32}},61:{start:{line:138,column:8},end:{line:144,column:9}},62:{start:{line:139,column:10},end:{line:143,column:11}},63:{start:{line:140,column:12},end:{line:140,column:28}},64:{start:{line:142,column:12},end:{line:142,column:27}},65:{start:{line:148,column:27},end:{line:148,column:50}},66:{start:{line:149,column:8},end:{line:151,column:9}},67:{start:{line:150,column:10},end:{line:150,column:28}},68:{start:{line:152,column:8},end:{line:152,column:36}}},fnMap:{0:{name:"getDiagnosticsFromExpressionErrors",decl:{start:{line:10,column:9},end:{line:10,column:43}},loc:{start:{line:10,column:57},end:{line:39,column:1}},line:10},1:{name:"createMaplibreLayerLinter",decl:{start:{line:40,column:9},end:{line:40,column:34}},loc:{start:{line:40,column:37},end:{line:71,column:1}},line:40},2:{name:"(anonymous_2)",decl:{start:{line:41,column:9},end:{line:41,column:10}},loc:{start:{line:41,column:19},end:{line:70,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:57,column:51},end:{line:57,column:52}},loc:{start:{line:57,column:60},end:{line:59,column:7}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:59,column:13},end:{line:59,column:14}},loc:{start:{line:59,column:22},end:{line:65,column:7}},line:59},5:{name:"createMaplibreStyleLinter",decl:{start:{line:72,column:9},end:{line:72,column:34}},loc:{start:{line:72,column:37},end:{line:90,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:73,column:9},end:{line:73,column:10}},loc:{start:{line:73,column:19},end:{line:89,column:3}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:79,column:48},end:{line:79,column:49}},loc:{start:{line:79,column:57},end:{line:84,column:7}},line:79},8:{name:"createMaplibreExpressionLinter",decl:{start:{line:91,column:9},end:{line:91,column:39}},loc:{start:{line:91,column:46},end:{line:103,column:1}},line:91},9:{name:"(anonymous_9)",decl:{start:{line:92,column:9},end:{line:92,column:10}},loc:{start:{line:92,column:19},end:{line:102,column:3}},line:92},10:{name:"createEditor",decl:{start:{line:104,column:16},end:{line:104,column:28}},loc:{start:{line:104,column:36},end:{line:157,column:1}},line:104},11:{name:"(anonymous_11)",decl:{start:{line:105,column:23},end:{line:105,column:24}},loc:{start:{line:105,column:29},end:{line:105,column:31}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:117,column:23},end:{line:117,column:24}},loc:{start:{line:117,column:29},end:{line:117,column:31}},line:117},13:{name:"(anonymous_13)",decl:{start:{line:132,column:35},end:{line:132,column:36}},loc:{start:{line:132,column:47},end:{line:145,column:7}},line:132},14:{name:"(anonymous_14)",decl:{start:{line:147,column:13},end:{line:147,column:14}},loc:{start:{line:147,column:23},end:{line:153,column:7}},line:147}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:36,column:5}},{start:{line:21,column:11},end:{line:36,column:5}}],line:14},1:{loc:{start:{line:17,column:12},end:{line:17,column:44}},type:"cond-expr",locations:[{start:{line:17,column:22},end:{line:17,column:40}},{start:{line:17,column:43},end:{line:17,column:44}}],line:17},2:{loc:{start:{line:24,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:28,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:97,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},5:{loc:{start:{line:106,column:2},end:{line:119,column:3}},type:"switch",locations:[{start:{line:107,column:4},end:{line:109,column:12}},{start:{line:110,column:4},end:{line:112,column:12}},{start:{line:113,column:4},end:{line:115,column:12}},{start:{line:116,column:4},end:{line:118,column:12}}],line:106},6:{loc:{start:{line:133,column:8},end:{line:137,column:9}},type:"if",locations:[{start:{line:133,column:8},end:{line:137,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:133},7:{loc:{start:{line:138,column:8},end:{line:144,column:9}},type:"if",locations:[{start:{line:138,column:8},end:{line:144,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:138},8:{loc:{start:{line:139,column:10},end:{line:143,column:11}},type:"if",locations:[{start:{line:139,column:10},end:{line:143,column:11}},{start:{line:141,column:17},end:{line:143,column:11}}],line:139},9:{loc:{start:{line:149,column:8},end:{line:151,column:9}},type:"if",locations:[{start:{line:149,column:8},end:{line:151,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-editor-factory.ts"],names:[],mappings:"AAAA,SAAS,kBAAkB;AAC3B,SAAS,kBAAkB;AAC3B,SAAS,aAAa,mBAAmB;AACzC,SAAS,MAAM,uBAAuB;AACtC,SAAS,QAAQ,kBAAmC;AACpD,SAAS,eAAe;AACxB,SAAS,YAA6C,wBAAwB;AAC9E,OAAO,eAAsD;AAC7D,SAAS,0BAA0B;AASnC,SAAS,mCAAmC,QAAuB,KAA+B;AAChG,QAAM,cAA4B,CAAC;AACnC,aAAW,SAAS,QAAQ;AAC1B,UAAM,EAAC,KAAK,QAAO,IAAI;AACvB,QAAI,CAAC,KAAK;AACR,kBAAY,KAAK;AAAA,QACf,MAAM;AAAA,QACN,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,SAAS;AAAA,QACnC,UAAU;AAAA,QACV;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,YAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,YAAM,OAAO,mBAAmB,MAAM,GAAG;AACzC,UAAI,CAAC,MAAM;AACT,gBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,MACF;AACA,UAAI,KAAK,KAAK;AACZ,oBAAY,KAAK;AAAA,UACf,MAAM,KAAK,IAAI,MAAM;AAAA,UACrB,IAAI,KAAK,IAAI,IAAI;AAAA,UACjB,UAAU;AAAA,UACV;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB;AAAA,QACxC,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,YAAY,CAAC;AAAA,QACb,WAAW,CAAC;AAAA,QACZ,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,UACR;AAAA,QACF;AAAA,MACF,CAAC;AAED,YAAM,eAAe,iBAClB,OAAO,SAAO;AAEb,eAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,MAClE,CAAC,EACA,IAAI,SAAO;AAEV,cAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,eAAO;AAAA,UACL,KAAK,gBAAgB,CAAC;AAAA,UACtB,SAAS,gBAAgB,CAAC;AAAA,QAC5B;AAAA,MACF,CAAC;AACH,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,4BAA4B;AACnC,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AAErC,QAAI;AAEF,YAAM,aAAa,KAAK,MAAM,IAAI;AAClC,YAAM,MAAM,UAAU,IAAI;AAG1B,YAAM,mBAAmB,iBAAiB,UAAU;AACpD,YAAM,eAAe,iBAAiB,IAAI,SAAO;AAC/C,eAAO;AAAA,UACL,KAAK,IAAI,QAAQ,MAAM,GAAG,EAAE,CAAC;AAAA,UAC7B,SAAS,IAAI;AAAA,QACf;AAAA,MACF,CAAC;AACD,aAAO,mCAAmC,cAAc,GAAG;AAAA,IAC7D,QAAQ;AAAA,IAER;AACA,WAAO,CAAC;AAAA,EACV;AACF;AAEA,SAAS,+BAA+B,MAAmC;AACzE,SAAO,CAAC,SAAqB;AAC3B,UAAM,OAAO,KAAK,MAAM,IAAI,SAAS;AACrC,UAAM,aAAa,KAAK,MAAM,IAAI;AAClC,UAAM,MAAM,UAAU,IAAI;AAC1B,UAAM,MAAM,WAAW,iBAAiB,YAAY,IAAI;AACxD,QAAI,KAAK,WAAW,SAAS;AAC3B,aAAO,CAAC;AAAA,IACV;AACA,UAAM,SAAS,IAAI;AACnB,WAAO,mCAAmC,QAAQ,GAAG;AAAA,EACvD;AACF;AAEO,gBAAS,aAAa,OAQd;AACb,MAAI,iBAAqD,MAAM,CAAC;AAChE,UAAQ,MAAM,UAAU;AAAA,IACtB,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,0BAA0B;AAC3C;AAAA,IACF,KAAK;AACH,uBAAiB,+BAA+B,MAAM,IAAI;AAC1D;AAAA,IACF,KAAK;AACH,uBAAiB,MAAM,CAAC;AACxB;AAAA,EACJ;AAEA,SAAO,IAAI,WAAW;AAAA,IACpB,KAAK,MAAM;AAAA,IACX,YAAY;AAAA,MACV;AAAA,MACA,KAAK;AAAA,MACL;AAAA,MACA,IAAI,YAAY,EAAE,GAAG,YAAY,QAAQ,GAAG,CAAC,CAAC;AAAA,MAC9C,WAAW,MAAM;AAAA,QACf,KAAK;AAAA,UACH,UAAU;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,MACD,WAAW,eAAe,GAAG,CAAC,WAAW;AACvC,YAAI,OAAO,YAAY;AACrB,gBAAM,MAAM,OAAO,MAAM;AACzB,gBAAM,QAAQ,IAAI,SAAS;AAC3B,gBAAM,SAAS,KAAK;AAAA,QACtB;AACA,YAAI,OAAO,cAAc;AACvB,cAAI,OAAO,KAAK,UAAU;AACxB,kBAAM,QAAQ;AAAA,UAChB,OAAO;AACL,kBAAM,OAAO;AAAA,UACf;AAAA,QACF;AAAA,MACF,CAAC;AAAA,MACD,WAAW;AAAA,MACX,OAAO,CAAC,SAAqB;AAC3B,cAAM,aAAa,gBAAgB,EAAE,IAAI;AACzC,YAAI,WAAW,SAAS,GAAG;AACzB,iBAAO;AAAA,QACT;AACA,eAAO,eAAe,IAAI;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,IACA,QAAQ,MAAM;AAAA,EAChB,CAAC;AACH;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fed5a4f9200b6a5cf90f61b2c7f89f45308868c6"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kn=function(){return s},s}kn();function wK(n,e){kn().f[0]++;const t=(kn().s[0]++,[]);kn().s[1]++;for(const i of n){const{key:r,message:o}=(kn().s[2]++,i);if(kn().s[3]++,!r)kn().b[0][0]++,kn().s[4]++,t.push({from:0,to:e.loc?(kn().b[1][0]++,e.loc.end.offset):(kn().b[1][1]++,0),severity:"error",message:o});else{kn().b[0][1]++;const s=(kn().s[5]++,r.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),a=(kn().s[6]++,bR(s,e));if(kn().s[7]++,a)kn().b[2][1]++;else{kn().b[2][0]++,kn().s[8]++,console.warn("Something went wrong parsing error:",i),kn().s[9]++;continue}kn().s[10]++,a.loc?(kn().b[3][0]++,kn().s[11]++,t.push({from:a.loc.start.offset,to:a.loc.end.offset,severity:"error",message:o})):kn().b[3][1]++}}return kn().s[12]++,t}function dMe(){return kn().f[1]++,kn().s[13]++,n=>{kn().f[2]++;const e=(kn().s[14]++,n.state.doc.toString());kn().s[15]++;try{const t=(kn().s[16]++,JSON.parse(e)),i=(kn().s[17]++,MK(e)),r=(kn().s[18]++,kd({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[t]})),o=(kn().s[19]++,r.filter(s=>(kn().f[3]++,kn().s[20]++,!s.message.match(/^layers\[0\]: source ".*" not found$/))).map(s=>{kn().f[4]++;const a=(kn().s[21]++,s.message.replace(/^layers\[0\]./,"").split(":"));return kn().s[22]++,{key:a[0],message:a[1]}}));return kn().s[23]++,wK(o,i)}catch{}return kn().s[24]++,[]}}function fMe(){return kn().f[5]++,kn().s[25]++,n=>{kn().f[6]++;const e=(kn().s[26]++,n.state.doc.toString());kn().s[27]++;try{const t=(kn().s[28]++,JSON.parse(e)),i=(kn().s[29]++,MK(e)),r=(kn().s[30]++,kd(t)),o=(kn().s[31]++,r.map(s=>(kn().f[7]++,kn().s[32]++,{key:s.message.split(":")[0],message:s.message})));return kn().s[33]++,wK(o,i)}catch{}return kn().s[34]++,[]}}function pMe(n){return kn().f[8]++,kn().s[35]++,e=>{kn().f[9]++;const t=(kn().s[36]++,e.state.doc.toString()),i=(kn().s[37]++,JSON.parse(t)),r=(kn().s[38]++,MK(t)),o=(kn().s[39]++,vAe.createExpression(i,n));if(kn().s[40]++,o?.result!=="error")return kn().b[4][0]++,kn().s[41]++,[];kn().b[4][1]++;const s=(kn().s[42]++,o.value);return kn().s[43]++,wK(s,r)}}function mMe(n){kn().f[10]++,kn().s[44]++;let e=()=>(kn().f[11]++,kn().s[45]++,[]);switch(kn().s[46]++,n.lintType){case"style":kn().b[5][0]++,kn().s[47]++,e=fMe(),kn().s[48]++;break;case"layer":kn().b[5][1]++,kn().s[49]++,e=dMe(),kn().s[50]++;break;case"expression":kn().b[5][2]++,kn().s[51]++,e=pMe(n.spec),kn().s[52]++;break;case"json":kn().b[5][3]++,kn().s[53]++,e=()=>(kn().f[12]++,kn().s[54]++,[]),kn().s[55]++;break}return kn().s[56]++,new Mi({doc:n.value,extensions:[U5e,X5e(),uMe,new d5().of(ds.tabSize.of(2)),Mi.theme({"&":{fontSize:"9pt"}}),Mi.updateListener.of(t=>{if(kn().f[13]++,kn().s[57]++,t.docChanged){kn().b[6][0]++;const i=(kn().s[58]++,t.state.doc),r=(kn().s[59]++,i.toString());kn().s[60]++,n.onChange(r)}else kn().b[6][1]++;kn().s[61]++,t.focusChanged?(kn().b[7][0]++,kn().s[62]++,t.view.hasFocus?(kn().b[8][0]++,kn().s[63]++,n.onFocus()):(kn().b[8][1]++,kn().s[64]++,n.onBlur())):kn().b[7][1]++}),K5e(),E5e(t=>{kn().f[14]++;const i=(kn().s[65]++,$5e()(t));return kn().s[66]++,i.length>0?(kn().b[9][0]++,kn().s[67]++,i):(kn().b[9][1]++,kn().s[68]++,e(t))})],parent:n.parent})}function vi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="e43efd61468be8295ce1a3716ba2dc0dff5d493c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:8},end:{line:15,column:12}},2:{start:{line:16,column:22},end:{line:16,column:27}},3:{start:{line:18,column:4},end:{line:18,column:17}},4:{start:{line:19,column:4},end:{line:22,column:6}},5:{start:{line:25,column:4},end:{line:25,column:63}},6:{start:{line:28,column:4},end:{line:36,column:7}},7:{start:{line:32,column:27},end:{line:32,column:47}},8:{start:{line:33,column:21},end:{line:33,column:35}},9:{start:{line:34,column:20},end:{line:34,column:33}},10:{start:{line:38,column:12},end:{line:43,column:3}},11:{start:{line:39,column:4},end:{line:39,column:49}},12:{start:{line:39,column:28},end:{line:39,column:49}},13:{start:{line:40,column:4},end:{line:42,column:7}},14:{start:{line:44,column:11},end:{line:49,column:3}},15:{start:{line:45,column:4},end:{line:45,column:47}},16:{start:{line:45,column:27},end:{line:45,column:47}},17:{start:{line:46,column:4},end:{line:48,column:7}},18:{start:{line:51,column:4},end:{line:60,column:5}},19:{start:{line:52,column:6},end:{line:52,column:36}},20:{start:{line:53,column:6},end:{line:59,column:9}},21:{start:{line:62,column:13},end:{line:86,column:3}},22:{start:{line:63,column:4},end:{line:69,column:5}},23:{start:{line:64,column:6},end:{line:64,column:37}},24:{start:{line:65,column:6},end:{line:67,column:9}},25:{start:{line:68,column:6},end:{line:68,column:13}},26:{start:{line:70,column:20},end:{line:70,column:51}},27:{start:{line:71,column:4},end:{line:82,column:5}},28:{start:{line:73,column:6},end:{line:78,column:7}},29:{start:{line:74,column:8},end:{line:74,column:42}},30:{start:{line:76,column:8},end:{line:76,column:19}},31:{start:{line:77,column:8},end:{line:77,column:27}},32:{start:{line:79,column:6},end:{line:81,column:7}},33:{start:{line:80,column:8},end:{line:80,column:66}},34:{start:{line:80,column:33},end:{line:80,column:66}},35:{start:{line:83,column:4},end:{line:85,column:7}},36:{start:{line:88,column:4},end:{line:96,column:9}},37:{start:{line:93,column:10},end:{line:93,column:24}},38:{start:{line:99,column:18},end:{line:99,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:18},end:{line:12,column:5}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:23,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:22},end:{line:26,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:37,column:3}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:32,column:16},end:{line:32,column:17}},loc:{start:{line:32,column:27},end:{line:32,column:47}},line:32},6:{name:"(anonymous_6)",decl:{start:{line:33,column:15},end:{line:33,column:16}},loc:{start:{line:33,column:21},end:{line:33,column:35}},line:33},7:{name:"(anonymous_7)",decl:{start:{line:34,column:14},end:{line:34,column:15}},loc:{start:{line:34,column:20},end:{line:34,column:33}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:38,column:12},end:{line:38,column:13}},loc:{start:{line:38,column:18},end:{line:43,column:3}},line:38},9:{name:"(anonymous_9)",decl:{start:{line:44,column:11},end:{line:44,column:12}},loc:{start:{line:44,column:17},end:{line:49,column:3}},line:44},10:{name:"(anonymous_10)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:32},end:{line:61,column:3}},line:50},11:{name:"(anonymous_11)",decl:{start:{line:62,column:13},end:{line:62,column:14}},loc:{start:{line:62,column:21},end:{line:86,column:3}},line:62},12:{name:"(anonymous_12)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:11},end:{line:97,column:3}},line:87},13:{name:"(anonymous_13)",decl:{start:{line:92,column:13},end:{line:92,column:14}},loc:{start:{line:92,column:21},end:{line:94,column:9}},line:92}},branchMap:{0:{loc:{start:{line:31,column:16},end:{line:31,column:46}},type:"binary-expr",locations:[{start:{line:31,column:16},end:{line:31,column:35}},{start:{line:31,column:39},end:{line:31,column:46}}],line:31},1:{loc:{start:{line:39,column:4},end:{line:39,column:49}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:45,column:47}},type:"if",locations:[{start:{line:45,column:4},end:{line:45,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},3:{loc:{start:{line:51,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:51},4:{loc:{start:{line:51,column:8},end:{line:51,column:69}},type:"binary-expr",locations:[{start:{line:51,column:8},end:{line:51,column:29}},{start:{line:51,column:33},end:{line:51,column:69}}],line:51},5:{loc:{start:{line:63,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:69,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},6:{loc:{start:{line:71,column:4},end:{line:82,column:5}},type:"if",locations:[{start:{line:71,column:4},end:{line:82,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},7:{loc:{start:{line:79,column:6},end:{line:81,column:7}},type:"if",locations:[{start:{line:79,column:6},end:{line:81,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},8:{loc:{start:{line:80,column:8},end:{line:80,column:66}},type:"if",locations:[{start:{line:80,column:8},end:{line:80,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAqHM;AArHN,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAGtD,OAAO,qBAAqB;AAE5B,SAAQ,oBAAmB;AAmB3B,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,WAAW,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,cAAc,MAAW;AACvB,WAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,EACzD;AAAA,EAEA,oBAAqB;AACnB,SAAK,QAAQ,aAAa;AAAA,MACxB,QAAQ,KAAK;AAAA,MACb,OAAO,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,MAC1C,UAAU,KAAK,MAAM,YAAY;AAAA,MACjC,UAAU,CAAC,UAAiB,KAAK,SAAS,KAAK;AAAA,MAC/C,SAAS,MAAM,KAAK,QAAQ;AAAA,MAC5B,QAAQ,MAAM,KAAK,OAAO;AAAA,MAC1B,MAAM,KAAK,MAAM;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,MAAO,SAAS;AAAA,QACnB,SAAS;AAAA,UACP,MAAM;AAAA,UACN,IAAI,KAAK,MAAO,MAAM,IAAI;AAAA,UAC1B,QAAQ,KAAK,cAAc,KAAK,MAAM,KAAK;AAAA,QAC7C;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,MAAO,MAAM,IAAI,SAAS;AAAA,MAC5C,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,MAAO,MAAM,IAAI,SAAS;AAE/C,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,CAAC,KAAK;AACR,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AAAA,MAC1D;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,eAAc,eAAY,eAAc,eAAY,QAAO,OAAO,EAAC,QAAQ,OAAM,GACrG;AAAA,MAAC;AAAA;AAAA,QACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,QAClE,KAAK,CAAC,OAAO;AAAC,eAAK,MAAM;AAAA,QAAG;AAAA;AAAA,IAC9B,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e43efd61468be8295ce1a3716ba2dc0dff5d493c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vi=function(){return s},s}vi();class gMe extends En.Component{static defaultProps=(vi().s[0]++,{onFocus:()=>{vi().f[0]++},onBlur:()=>{vi().f[1]++}});_view;_el=(vi().s[1]++,null);_cancelNextChange=(vi().s[2]++,!1);constructor(e){vi().f[2]++,vi().s[3]++,super(e),vi().s[4]++,this.state={isEditing:!1,prevValue:this.getPrettyJson(this.props.value)}}getPrettyJson(e){return vi().f[3]++,vi().s[5]++,zbe(e,{indent:2,maxLength:40})}componentDidMount(){vi().f[4]++,vi().s[6]++,this._view=mMe({parent:this._el,value:this.getPrettyJson(this.props.value),lintType:(vi().b[0][0]++,this.props.lintType||(vi().b[0][1]++,"layer")),onChange:e=>(vi().f[5]++,vi().s[7]++,this.onChange(e)),onFocus:()=>(vi().f[6]++,vi().s[8]++,this.onFocus()),onBlur:()=>(vi().f[7]++,vi().s[9]++,this.onBlur()),spec:this.props.spec})}onFocus=(vi().s[10]++,()=>{vi().f[8]++,vi().s[11]++,this.props.onFocus?(vi().b[1][0]++,vi().s[12]++,this.props.onFocus()):vi().b[1][1]++,vi().s[13]++,this.setState({isEditing:!0})});onBlur=(vi().s[14]++,()=>{vi().f[9]++,vi().s[15]++,this.props.onBlur?(vi().b[2][0]++,vi().s[16]++,this.props.onBlur()):vi().b[2][1]++,vi().s[17]++,this.setState({isEditing:!1})});componentDidUpdate(e){vi().f[10]++,vi().s[18]++,vi().b[4][0]++,!this.state.isEditing&&(vi().b[4][1]++,e.value!==this.props.value)?(vi().b[3][0]++,vi().s[19]++,this._cancelNextChange=!0,vi().s[20]++,this._view.dispatch({changes:{from:0,to:this._view.state.doc.length,insert:this.getPrettyJson(this.props.value)}})):vi().b[3][1]++}onChange=(vi().s[21]++,e=>{if(vi().f[11]++,vi().s[22]++,this._cancelNextChange){vi().b[5][0]++,vi().s[23]++,this._cancelNextChange=!1,vi().s[24]++,this.setState({prevValue:this._view.state.doc.toString()}),vi().s[25]++;return}else vi().b[5][1]++;const t=(vi().s[26]++,this._view.state.doc.toString());if(vi().s[27]++,this.state.prevValue!==t){vi().b[6][0]++;let i,r;vi().s[28]++;try{vi().s[29]++,i=JSON.parse(t)}catch(o){vi().s[30]++,r=o,vi().s[31]++,console.warn(o)}vi().s[32]++,r?vi().b[7][1]++:(vi().b[7][0]++,vi().s[33]++,this.props.onChange?(vi().b[8][0]++,vi().s[34]++,this.props.onChange(i)):vi().b[8][1]++)}else vi().b[6][1]++;vi().s[35]++,this.setState({prevValue:t})});render(){return vi().f[12]++,vi().s[36]++,te.jsx("div",{className:"json-editor","data-wd-key":"json-editor","aria-hidden":"true",style:{cursor:"text"},children:te.jsx("div",{className:c0("codemirror-container",this.props.className),ref:e=>{vi().f[13]++,vi().s[37]++,this._el=e}})})}}const jne=(vi().s[38]++,Fo()(gMe));function wx(){var n="/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",e="f03c466cea7ee39fb10a8d84cec1e620e7e892a5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx",statementMap:{0:{start:{line:4,column:27},end:{line:18,column:1}},1:{start:{line:5,column:2},end:{line:17,column:7}},2:{start:{line:19,column:19},end:{line:19,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:27},end:{line:4,column:28}},loc:{start:{line:4,column:38},end:{line:18,column:1}},line:4}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/CodeEditor.tsx"],names:[],mappings:"AAcS,mBACL,KADK;AAdT,OAAO,eAAe;AAEtB,SAAS,uBAA6C;AAUtD,MAAM,qBAAgD,CAAC,UAAU;AAE/D,SAAO,iCACL;AAAA,wBAAC,YAAO,WAAU,mBAAkB,SAAS,MAAM,SAAS,cAAY,MAAM,EAAE,OAAO,GAAG,OAAO,EAAE,UAAU,UAAU,KAAK,KAAK,QAAQ,EAAE,GAAI,gBAAM,EAAE,2BAA2B,GAAE;AAAA,IACpL;AAAA,MAAC;AAAA;AAAA,QACC,UAAS;AAAA,QACT,OAAO,MAAM;AAAA,QACb,UAAU,MAAM;AAAA,QAChB,WAAW;AAAA;AAAA,IACb;AAAA,IAAE;AAAA,KACJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AAEvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f03c466cea7ee39fb10a8d84cec1e620e7e892a5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wx=function(){return s},s}wx();wx().s[0]++;const yMe=n=>(wx().f[0]++,wx().s[1]++,te.jsxs(te.Fragment,{children:[te.jsx("button",{className:"maputnik-button",onClick:n.onClose,"aria-label":n.t("Close"),style:{position:"sticky",top:"0",zIndex:1},children:n.t("Click to close the editor")}),te.jsx(jne,{lintType:"style",value:n.value,onChange:n.onChange,className:"maputnik-code-editor"}),";"]})),vMe=(wx().s[2]++,Fo()(yMe));var $2=$R();function bMe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return _t.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const C6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gx(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function SK(n){return"nodeType"in n}function Td(n){var e,t;return n?Gx(n)?n:SK(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function EK(n){const{Document:e}=Td(n);return n instanceof e}function _5(n){return Gx(n)?!1:n instanceof Td(n).HTMLElement}function Nne(n){return n instanceof Td(n).SVGElement}function Qx(n){return n?Gx(n)?n.document:SK(n)?EK(n)?n:_5(n)||Nne(n)?n.ownerDocument:document:document:document}const o0=C6?_t.useLayoutEffect:_t.useEffect;function BK(n){const e=_t.useRef(n);return o0(()=>{e.current=n}),_t.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function CMe(){const n=_t.useRef(null),e=_t.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=_t.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function _4(n,e){e===void 0&&(e=[n]);const t=_t.useRef(n);return o0(()=>{t.current!==n&&(t.current=n)},e),t}function x5(n,e){const t=_t.useRef();return _t.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function jS(n){const e=BK(n),t=_t.useRef(null),i=_t.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function CR(n){const e=_t.useRef();return _t.useEffect(()=>{e.current=n},[n]),e.current}let JO={};function M5(n,e){return _t.useMemo(()=>{if(e)return e;const t=JO[n]==null?0:JO[n]+1;return JO[n]=t,n+"-"+t},[n,e])}function Gne(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((o,s)=>{const a=Object.entries(s);for(const[c,h]of a){const m=o[c];m!=null&&(o[c]=m+n*h)}return o},{...e})}}const Z_=Gne(1),NS=Gne(-1);function _Me(n){return"clientX"in n&&"clientY"in n}function OK(n){if(!n)return!1;const{KeyboardEvent:e}=Td(n.target);return e&&n instanceof e}function xMe(n){if(!n)return!1;const{TouchEvent:e}=Td(n.target);return e&&n instanceof e}function _R(n){if(xMe(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return _Me(n)?{x:n.clientX,y:n.clientY}:null}const x4=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[x4.Translate.toString(n),x4.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),cG="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function MMe(n){return n.matches(cG)?n:n.querySelector(cG)}const wMe={display:"none"};function SMe(n){let{id:e,value:t}=n;return En.createElement("div",{id:e,style:wMe},t)}function EMe(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return En.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function BMe(){const[n,e]=_t.useState("");return{announce:_t.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const Qne=_t.createContext(null);function OMe(n){const e=_t.useContext(Qne);_t.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function IMe(){const[n]=_t.useState(()=>new Set),e=_t.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[_t.useCallback(i=>{let{type:r,event:o}=i;n.forEach(s=>{var a;return(a=s[r])==null?void 0:a.call(s,o)})},[n]),e]}const kMe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},TMe={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function RMe(n){let{announcements:e=TMe,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=kMe}=n;const{announce:o,announcement:s}=BMe(),a=M5("DndLiveRegion"),[c,h]=_t.useState(!1);if(_t.useEffect(()=>{h(!0)},[]),OMe(_t.useMemo(()=>({onDragStart(v){let{active:x}=v;o(e.onDragStart({active:x}))},onDragMove(v){let{active:x,over:E}=v;e.onDragMove&&o(e.onDragMove({active:x,over:E}))},onDragOver(v){let{active:x,over:E}=v;o(e.onDragOver({active:x,over:E}))},onDragEnd(v){let{active:x,over:E}=v;o(e.onDragEnd({active:x,over:E}))},onDragCancel(v){let{active:x,over:E}=v;o(e.onDragCancel({active:x,over:E}))}}),[o,e])),!c)return null;const m=En.createElement(En.Fragment,null,En.createElement(SMe,{id:i,value:r.draggable}),En.createElement(EMe,{id:a,announcement:s}));return t?$2.createPortal(m,t):m}var xc;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(xc||(xc={}));function GS(){}function DMe(n,e){return _t.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function PMe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return _t.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const _m=Object.freeze({x:0,y:0});function KMe(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function UMe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function LMe(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function zMe(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function AG(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const FMe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=AG(e,e.left,e.top),o=[];for(const s of i){const{id:a}=s,c=t.get(a);if(c){const h=KMe(AG(c),r);o.push({id:a,data:{droppableContainer:s,value:h}})}}return o.sort(UMe)};function jMe(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),s=r-i,a=o-t;if(i<r&&t<o){const c=e.width*e.height,h=n.width*n.height,m=s*a,v=m/(c+h-m);return Number(v.toFixed(4))}return 0}const NMe=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const o of i){const{id:s}=o,a=t.get(s);if(a){const c=jMe(a,e);c>0&&r.push({id:s,data:{droppableContainer:o,value:c}})}}return r.sort(LMe)};function GMe(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Wne(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:_m}function QMe(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>({...s,top:s.top+n*a.y,bottom:s.bottom+n*a.y,left:s.left+n*a.x,right:s.right+n*a.x}),{...t})}}const WMe=QMe(1);function qMe(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function YMe(n,e,t){const i=qMe(e);if(!i)return n;const{scaleX:r,scaleY:o,x:s,y:a}=i,c=n.left-s-(1-r)*parseFloat(t),h=n.top-a-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),m=r?n.width/r:n.width,v=o?n.height/o:n.height;return{width:m,height:v,top:h,right:c+m,bottom:h+v,left:c}}const VMe={ignoreTransform:!1};function Wx(n,e){e===void 0&&(e=VMe);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:m}=Td(n).getComputedStyle(n);h&&(t=YMe(t,h,m))}const{top:i,left:r,width:o,height:s,bottom:a,right:c}=t;return{top:i,left:r,width:o,height:s,bottom:a,right:c}}function hG(n){return Wx(n,{ignoreTransform:!0})}function $Me(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function HMe(n,e){return e===void 0&&(e=Td(n).getComputedStyle(n)),e.position==="fixed"}function ZMe(n,e){e===void 0&&(e=Td(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=e[r];return typeof o=="string"?t.test(o):!1})}function IK(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(EK(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!_5(r)||Nne(r)||t.includes(r))return t;const o=Td(n).getComputedStyle(r);return r!==n&&ZMe(r,o)&&t.push(r),HMe(r,o)?t:i(r.parentNode)}return n?i(n):t}function qne(n){const[e]=IK(n,1);return e??null}function e8(n){return!C6||!n?null:Gx(n)?n:SK(n)?EK(n)||n===Qx(n).scrollingElement?window:_5(n)?n:null:null}function Yne(n){return Gx(n)?n.scrollX:n.scrollLeft}function Vne(n){return Gx(n)?n.scrollY:n.scrollTop}function xR(n){return{x:Yne(n),y:Vne(n)}}var Yc;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Yc||(Yc={}));function $ne(n){return!C6||!n?!1:n===document.scrollingElement}function Hne(n){const e={x:0,y:0},t=$ne(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,s=n.scrollTop>=i.y,a=n.scrollLeft>=i.x;return{isTop:r,isLeft:o,isBottom:s,isRight:a,maxScroll:i,minScroll:e}}const XMe={x:.2,y:.2};function JMe(n,e,t,i,r){let{top:o,left:s,right:a,bottom:c}=t;i===void 0&&(i=10),r===void 0&&(r=XMe);const{isTop:h,isBottom:m,isLeft:v,isRight:x}=Hne(n),E={x:0,y:0},R={x:0,y:0},P={height:e.height*r.y,width:e.width*r.x};return!h&&o<=e.top+P.height?(E.y=Yc.Backward,R.y=i*Math.abs((e.top+P.height-o)/P.height)):!m&&c>=e.bottom-P.height&&(E.y=Yc.Forward,R.y=i*Math.abs((e.bottom-P.height-c)/P.height)),!x&&a>=e.right-P.width?(E.x=Yc.Forward,R.x=i*Math.abs((e.right-P.width-a)/P.width)):!v&&s<=e.left+P.width&&(E.x=Yc.Backward,R.x=i*Math.abs((e.left+P.width-s)/P.width)),{direction:E,speed:R}}function ewe(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:s}=window;return{top:0,left:0,right:o,bottom:s,width:o,height:s}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function Zne(n){return n.reduce((e,t)=>Z_(e,xR(t)),_m)}function twe(n){return n.reduce((e,t)=>e+Yne(t),0)}function nwe(n){return n.reduce((e,t)=>e+Vne(t),0)}function iwe(n,e){if(e===void 0&&(e=Wx),!n)return;const{top:t,left:i,bottom:r,right:o}=e(n);qne(n)&&(r<=0||o<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const rwe=[["x",["left","right"],twe],["y",["top","bottom"],nwe]];class kK{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=IK(t),r=Zne(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,s,a]of rwe)for(const c of s)Object.defineProperty(this,c,{get:()=>{const h=a(i),m=r[o]-h;return this.rect[c]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class v3{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function owe(n){const{EventTarget:e}=Td(n);return n instanceof e?n:Qx(n)}function t8(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var sp;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(sp||(sp={}));function dG(n){n.preventDefault()}function swe(n){n.stopPropagation()}var Ds;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Ds||(Ds={}));const Xne={start:[Ds.Space,Ds.Enter],cancel:[Ds.Esc],end:[Ds.Space,Ds.Enter,Ds.Tab]},awe=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Ds.Right:return{...t,x:t.x+25};case Ds.Left:return{...t,x:t.x-25};case Ds.Down:return{...t,y:t.y+25};case Ds.Up:return{...t,y:t.y-25}}};class Jne{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new v3(Qx(t)),this.windowListeners=new v3(Td(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(sp.Resize,this.handleCancel),this.windowListeners.add(sp.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(sp.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&iwe(i),t(_m)}handleKeyDown(e){if(OK(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:o=Xne,coordinateGetter:s=awe,scrollBehavior:a="smooth"}=r,{code:c}=e;if(o.end.includes(c)){this.handleEnd(e);return}if(o.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:h}=i.current,m=h?{x:h.left,y:h.top}:_m;this.referenceCoordinates||(this.referenceCoordinates=m);const v=s(e,{active:t,context:i.current,currentCoordinates:m});if(v){const x=NS(v,m),E={x:0,y:0},{scrollableAncestors:R}=i.current;for(const P of R){const z=e.code,{isTop:Q,isRight:Y,isLeft:H,isBottom:Z,maxScroll:J,minScroll:$}=Hne(P),G=ewe(P),oe={x:Math.min(z===Ds.Right?G.right-G.width/2:G.right,Math.max(z===Ds.Right?G.left:G.left+G.width/2,v.x)),y:Math.min(z===Ds.Down?G.bottom-G.height/2:G.bottom,Math.max(z===Ds.Down?G.top:G.top+G.height/2,v.y))},ue=z===Ds.Right&&!Y||z===Ds.Left&&!H,xe=z===Ds.Down&&!Z||z===Ds.Up&&!Q;if(ue&&oe.x!==v.x){const ge=P.scrollLeft+x.x,Ie=z===Ds.Right&&ge<=J.x||z===Ds.Left&&ge>=$.x;if(Ie&&!x.y){P.scrollTo({left:ge,behavior:a});return}Ie?E.x=P.scrollLeft-ge:E.x=z===Ds.Right?P.scrollLeft-J.x:P.scrollLeft-$.x,E.x&&P.scrollBy({left:-E.x,behavior:a});break}else if(xe&&oe.y!==v.y){const ge=P.scrollTop+x.y,Ie=z===Ds.Down&&ge<=J.y||z===Ds.Up&&ge>=$.y;if(Ie&&!x.x){P.scrollTo({top:ge,behavior:a});return}Ie?E.y=P.scrollTop-ge:E.y=z===Ds.Down?P.scrollTop-J.y:P.scrollTop-$.y,E.y&&P.scrollBy({top:-E.y,behavior:a});break}}this.handleMove(e,Z_(NS(v,this.referenceCoordinates),E))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Jne.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=Xne,onActivation:r}=e,{active:o}=t;const{code:s}=n.nativeEvent;if(i.start.includes(s)){const a=o.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function fG(n){return!!(n&&"distance"in n)}function pG(n){return!!(n&&"delay"in n)}class TK{constructor(e,t,i){var r;i===void 0&&(i=owe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:s}=o;this.props=e,this.events=t,this.document=Qx(s),this.documentListeners=new v3(this.document),this.listeners=new v3(i),this.windowListeners=new v3(Td(s)),this.initialCoordinates=(r=_R(o))!=null?r:_m,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(sp.Resize,this.handleCancel),this.windowListeners.add(sp.DragStart,dG),this.windowListeners.add(sp.VisibilityChange,this.handleCancel),this.windowListeners.add(sp.ContextMenu,dG),this.documentListeners.add(sp.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(pG(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(fG(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(sp.Click,swe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(sp.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:o}=this,{onMove:s,options:{activationConstraint:a}}=o;if(!r)return;const c=(t=_R(e))!=null?t:_m,h=NS(r,c);if(!i&&a){if(fG(a)){if(a.tolerance!=null&&t8(h,a.tolerance))return this.handleCancel();if(t8(h,a.distance))return this.handleStart()}if(pG(a)&&t8(h,a.tolerance))return this.handleCancel();this.handlePending(a,h);return}e.cancelable&&e.preventDefault(),s(c)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Ds.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const lwe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class RK extends TK{constructor(e){const{event:t}=e,i=Qx(t.target);super(e,lwe,i)}}RK.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const uwe={move:{name:"mousemove"},end:{name:"mouseup"}};var MR;(function(n){n[n.RightClick=2]="RightClick"})(MR||(MR={}));class cwe extends TK{constructor(e){super(e,uwe,Qx(e.event.target))}}cwe.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===MR.RightClick?!1:(i?.({event:t}),!0)}}];const n8={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Awe extends TK{constructor(e){super(e,n8)}static setup(){return window.addEventListener(n8.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(n8.move.name,e)};function e(){}}}Awe.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var b3;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(b3||(b3={}));var QS;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(QS||(QS={}));function hwe(n){let{acceleration:e,activator:t=b3.Pointer,canScroll:i,draggingRect:r,enabled:o,interval:s=5,order:a=QS.TreeOrder,pointerCoordinates:c,scrollableAncestors:h,scrollableAncestorRects:m,delta:v,threshold:x}=n;const E=fwe({delta:v,disabled:!o}),[R,P]=CMe(),z=_t.useRef({x:0,y:0}),Q=_t.useRef({x:0,y:0}),Y=_t.useMemo(()=>{switch(t){case b3.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case b3.DraggableRect:return r}},[t,r,c]),H=_t.useRef(null),Z=_t.useCallback(()=>{const $=H.current;if(!$)return;const G=z.current.x*Q.current.x,oe=z.current.y*Q.current.y;$.scrollBy(G,oe)},[]),J=_t.useMemo(()=>a===QS.TreeOrder?[...h].reverse():h,[a,h]);_t.useEffect(()=>{if(!o||!h.length||!Y){P();return}for(const $ of J){if(i?.($)===!1)continue;const G=h.indexOf($),oe=m[G];if(!oe)continue;const{direction:ue,speed:xe}=JMe($,oe,Y,e,x);for(const ge of["x","y"])E[ge][ue[ge]]||(xe[ge]=0,ue[ge]=0);if(xe.x>0||xe.y>0){P(),H.current=$,R(Z,s),z.current=xe,Q.current=ue;return}}z.current={x:0,y:0},Q.current={x:0,y:0},P()},[e,Z,i,P,o,s,JSON.stringify(Y),JSON.stringify(E),R,h,J,m,JSON.stringify(x)])}const dwe={x:{[Yc.Backward]:!1,[Yc.Forward]:!1},y:{[Yc.Backward]:!1,[Yc.Forward]:!1}};function fwe(n){let{delta:e,disabled:t}=n;const i=CR(e);return x5(r=>{if(t||!i||!r)return dwe;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Yc.Backward]:r.x[Yc.Backward]||o.x===-1,[Yc.Forward]:r.x[Yc.Forward]||o.x===1},y:{[Yc.Backward]:r.y[Yc.Backward]||o.y===-1,[Yc.Forward]:r.y[Yc.Forward]||o.y===1}}},[t,e,i])}function pwe(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return x5(r=>{var o;return e==null?null:(o=i??r)!=null?o:null},[i,e])}function mwe(n,e){return _t.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,o=r.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,i)}));return[...t,...o]},[]),[n,e])}var M4;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(M4||(M4={}));var wR;(function(n){n.Optimized="optimized"})(wR||(wR={}));const mG=new Map;function gwe(n,e){let{dragging:t,dependencies:i,config:r}=e;const[o,s]=_t.useState(null),{frequency:a,measure:c,strategy:h}=r,m=_t.useRef(n),v=z(),x=_4(v),E=_t.useCallback(function(Q){Q===void 0&&(Q=[]),!x.current&&s(Y=>Y===null?Q:Y.concat(Q.filter(H=>!Y.includes(H))))},[x]),R=_t.useRef(null),P=x5(Q=>{if(v&&!t)return mG;if(!Q||Q===mG||m.current!==n||o!=null){const Y=new Map;for(let H of n){if(!H)continue;if(o&&o.length>0&&!o.includes(H.id)&&H.rect.current){Y.set(H.id,H.rect.current);continue}const Z=H.node.current,J=Z?new kK(c(Z),Z):null;H.rect.current=J,J&&Y.set(H.id,J)}return Y}return Q},[n,o,t,v,c]);return _t.useEffect(()=>{m.current=n},[n]),_t.useEffect(()=>{v||E()},[t,v]),_t.useEffect(()=>{o&&o.length>0&&s(null)},[JSON.stringify(o)]),_t.useEffect(()=>{v||typeof a!="number"||R.current!==null||(R.current=setTimeout(()=>{E(),R.current=null},a))},[a,v,E,...i]),{droppableRects:P,measureDroppableContainers:E,measuringScheduled:o!=null};function z(){switch(h){case M4.Always:return!1;case M4.BeforeDragging:return t;default:return!t}}}function eie(n,e){return x5(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function ywe(n,e){return eie(n,e)}function vwe(n){let{callback:e,disabled:t}=n;const i=BK(e),r=_t.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,t]);return _t.useEffect(()=>()=>r?.disconnect(),[r]),r}function _6(n){let{callback:e,disabled:t}=n;const i=BK(e),r=_t.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[t]);return _t.useEffect(()=>()=>r?.disconnect(),[r]),r}function bwe(n){return new kK(Wx(n),n)}function gG(n,e,t){e===void 0&&(e=bwe);const[i,r]=_t.useState(null);function o(){r(c=>{if(!n)return null;if(n.isConnected===!1){var h;return(h=c??t)!=null?h:null}const m=e(n);return JSON.stringify(c)===JSON.stringify(m)?c:m})}const s=vwe({callback(c){if(n)for(const h of c){const{type:m,target:v}=h;if(m==="childList"&&v instanceof HTMLElement&&v.contains(n)){o();break}}}}),a=_6({callback:o});return o0(()=>{o(),n?(a?.observe(n),s?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),s?.disconnect())},[n]),i}function Cwe(n){const e=eie(n);return Wne(n,e)}const yG=[];function _we(n){const e=_t.useRef(n),t=x5(i=>n?i&&i!==yG&&n&&e.current&&n.parentNode===e.current.parentNode?i:IK(n):yG,[n]);return _t.useEffect(()=>{e.current=n},[n]),t}function xwe(n){const[e,t]=_t.useState(null),i=_t.useRef(n),r=_t.useCallback(o=>{const s=e8(o.target);s&&t(a=>a?(a.set(s,xR(s)),new Map(a)):null)},[]);return _t.useEffect(()=>{const o=i.current;if(n!==o){s(o);const a=n.map(c=>{const h=e8(c);return h?(h.addEventListener("scroll",r,{passive:!0}),[h,xR(h)]):null}).filter(c=>c!=null);t(a.length?new Map(a):null),i.current=n}return()=>{s(n),s(o)};function s(a){a.forEach(c=>{const h=e8(c);h?.removeEventListener("scroll",r)})}},[r,n]),_t.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,s)=>Z_(o,s),_m):Zne(n):_m,[n,e])}function vG(n,e){e===void 0&&(e=[]);const t=_t.useRef(null);return _t.useEffect(()=>{t.current=null},e),_t.useEffect(()=>{const i=n!==_m;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?NS(n,t.current):_m}function Mwe(n){_t.useEffect(()=>{if(!C6)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function wwe(n,e){return _t.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:o}=i;return t[r]=s=>{o(s,e)},t},{}),[n,e])}function tie(n){return _t.useMemo(()=>n?$Me(n):null,[n])}const bG=[];function Swe(n,e){e===void 0&&(e=Wx);const[t]=n,i=tie(t?Td(t):null),[r,o]=_t.useState(bG);function s(){o(()=>n.length?n.map(c=>$ne(c)?i:new kK(e(c),c)):bG)}const a=_6({callback:s});return o0(()=>{a?.disconnect(),s(),n.forEach(c=>a?.observe(c))},[n]),r}function Ewe(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return _5(e)?e:n}function Bwe(n){let{measure:e}=n;const[t,i]=_t.useState(null),r=_t.useCallback(h=>{for(const{target:m}of h)if(_5(m)){i(v=>{const x=e(m);return v?{...v,width:x.width,height:x.height}:x});break}},[e]),o=_6({callback:r}),s=_t.useCallback(h=>{const m=Ewe(h);o?.disconnect(),m&&o?.observe(m),i(m?e(m):null)},[e,o]),[a,c]=jS(s);return _t.useMemo(()=>({nodeRef:a,rect:t,setRef:c}),[t,a,c])}const Owe=[{sensor:RK,options:{}},{sensor:Jne,options:{}}],Iwe={current:{}},_w={draggable:{measure:hG},droppable:{measure:hG,strategy:M4.WhileDragging,frequency:wR.Optimized},dragOverlay:{measure:Wx}};class C3 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const kwe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new C3,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:GS},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:_w,measureDroppableContainers:GS,windowRect:null,measuringScheduled:!1},Twe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:GS,draggableNodes:new Map,over:null,measureDroppableContainers:GS},x6=_t.createContext(Twe),nie=_t.createContext(kwe);function Rwe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new C3}}}function Dwe(n,e){switch(e.type){case xc.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case xc.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case xc.DragEnd:case xc.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xc.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new C3(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case xc.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,o=n.droppable.containers.get(t);if(!o||i!==o.key)return n;const s=new C3(n.droppable.containers);return s.set(t,{...o,disabled:r}),{...n,droppable:{...n.droppable,containers:s}}}case xc.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const o=new C3(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function Pwe(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=_t.useContext(x6),o=CR(i),s=CR(t?.id);return _t.useEffect(()=>{if(!e&&!i&&o&&s!=null){if(!OK(o)||document.activeElement===o.target)return;const a=r.get(s);if(!a)return;const{activatorNode:c,node:h}=a;if(!c.current&&!h.current)return;requestAnimationFrame(()=>{for(const m of[c.current,h.current]){if(!m)continue;const v=MMe(m);if(v){v.focus();break}}})}},[i,e,r,s,o]),null}function Kwe(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,o)=>o({transform:r,...i}),t):t}function Uwe(n){return _t.useMemo(()=>({draggable:{..._w.draggable,...n?.draggable},droppable:{..._w.droppable,...n?.droppable},dragOverlay:{..._w.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function Lwe(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const o=_t.useRef(!1),{x:s,y:a}=typeof r=="boolean"?{x:r,y:r}:r;o0(()=>{if(!s&&!a||!e){o.current=!1;return}if(o.current||!i)return;const h=e?.node.current;if(!h||h.isConnected===!1)return;const m=t(h),v=Wne(m,i);if(s||(v.x=0),a||(v.y=0),o.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const x=qne(h);x&&x.scrollBy({top:v.y,left:v.x})}},[e,s,a,i,t])}const iie=_t.createContext({..._m,scaleX:1,scaleY:1});var Ty;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Ty||(Ty={}));const zwe=_t.memo(function(e){var t,i,r,o;let{id:s,accessibility:a,autoScroll:c=!0,children:h,sensors:m=Owe,collisionDetection:v=NMe,measuring:x,modifiers:E,...R}=e;const P=_t.useReducer(Dwe,void 0,Rwe),[z,Q]=P,[Y,H]=IMe(),[Z,J]=_t.useState(Ty.Uninitialized),$=Z===Ty.Initialized,{draggable:{active:G,nodes:oe,translate:ue},droppable:{containers:xe}}=z,ge=G!=null?oe.get(G):null,Ie=_t.useRef({initial:null,translated:null}),Me=_t.useMemo(()=>{var en;return G!=null?{id:G,data:(en=ge?.data)!=null?en:Iwe,rect:Ie}:null},[G,ge]),ke=_t.useRef(null),[je,Be]=_t.useState(null),[Ye,At]=_t.useState(null),yt=_4(R,Object.values(R)),Le=M5("DndDescribedBy",s),De=_t.useMemo(()=>xe.getEnabled(),[xe]),Ge=Uwe(x),{droppableRects:Te,measureDroppableContainers:xt,measuringScheduled:st}=gwe(De,{dragging:$,dependencies:[ue.x,ue.y],config:Ge.droppable}),Tt=pwe(oe,G),Lt=_t.useMemo(()=>Ye?_R(Ye):null,[Ye]),Ue=Mt(),Oe=ywe(Tt,Ge.draggable.measure);Lwe({activeNode:G!=null?oe.get(G):null,config:Ue.layoutShiftCompensation,initialRect:Oe,measure:Ge.draggable.measure});const Ee=gG(Tt,Ge.draggable.measure,Oe),Ve=gG(Tt?Tt.parentElement:null),mt=_t.useRef({activatorEvent:null,active:null,activeNode:Tt,collisionRect:null,collisions:null,droppableRects:Te,draggableNodes:oe,draggingNode:null,draggingNodeRect:null,droppableContainers:xe,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),pt=xe.getNodeFor((t=mt.current.over)==null?void 0:t.id),Ct=Bwe({measure:Ge.dragOverlay.measure}),Rt=(i=Ct.nodeRef.current)!=null?i:Tt,Kt=$?(r=Ct.rect)!=null?r:Ee:null,on=!!(Ct.nodeRef.current&&Ct.rect),qn=Cwe(on?null:Ee),Qn=tie(Rt?Td(Rt):null),xi=_we($?pt??Tt:null),Kn=Swe(xi),Un=Kwe(E,{transform:{x:ue.x-qn.x,y:ue.y-qn.y,scaleX:1,scaleY:1},activatorEvent:Ye,active:Me,activeNodeRect:Ee,containerNodeRect:Ve,draggingNodeRect:Kt,over:mt.current.over,overlayNodeRect:Ct.rect,scrollableAncestors:xi,scrollableAncestorRects:Kn,windowRect:Qn}),Cn=Lt?Z_(Lt,ue):null,ei=xwe(xi),Dn=vG(ei),It=vG(ei,[Ee]),Ce=Z_(Un,Dn),re=Kt?WMe(Kt,Un):null,le=Me&&re?v({active:Me,collisionRect:re,droppableRects:Te,droppableContainers:De,pointerCoordinates:Cn}):null,he=zMe(le,"id"),[se,Ae]=_t.useState(null),be=on?Un:Z_(Un,It),We=GMe(be,(o=se?.rect)!=null?o:null,Ee),et=_t.useRef(null),Pe=_t.useCallback((en,dt)=>{let{sensor:Zn,options:gi}=dt;if(ke.current==null)return;const Tn=oe.get(ke.current);if(!Tn)return;const zn=en.nativeEvent,si=new Zn({active:ke.current,activeNode:Tn,event:zn,options:gi,context:mt,onAbort(Di){if(!oe.get(Di))return;const{onDragAbort:Oi}=yt.current,Ri={id:Di};Oi?.(Ri),Y({type:"onDragAbort",event:Ri})},onPending(Di,gr,Oi,Ri){if(!oe.get(Di))return;const{onDragPending:nn}=yt.current,Pi={id:Di,constraint:gr,initialCoordinates:Oi,offset:Ri};nn?.(Pi),Y({type:"onDragPending",event:Pi})},onStart(Di){const gr=ke.current;if(gr==null)return;const Oi=oe.get(gr);if(!Oi)return;const{onDragStart:Ri}=yt.current,cr={activatorEvent:zn,active:{id:gr,data:Oi.data,rect:Ie}};$2.unstable_batchedUpdates(()=>{Ri?.(cr),J(Ty.Initializing),Q({type:xc.DragStart,initialCoordinates:Di,active:gr}),Y({type:"onDragStart",event:cr}),Be(et.current),At(zn)})},onMove(Di){Q({type:xc.DragMove,coordinates:Di})},onEnd:ir(xc.DragEnd),onCancel:ir(xc.DragCancel)});et.current=si;function ir(Di){return async function(){const{active:Oi,collisions:Ri,over:cr,scrollAdjustedTranslate:nn}=mt.current;let Pi=null;if(Oi&&nn){const{cancelDrop:$o}=yt.current;Pi={activatorEvent:zn,active:Oi,collisions:Ri,delta:nn,over:cr},Di===xc.DragEnd&&typeof $o=="function"&&await Promise.resolve($o(Pi))&&(Di=xc.DragCancel)}ke.current=null,$2.unstable_batchedUpdates(()=>{Q({type:Di}),J(Ty.Uninitialized),Ae(null),Be(null),At(null),et.current=null;const $o=Di===xc.DragEnd?"onDragEnd":"onDragCancel";if(Pi){const Ks=yt.current[$o];Ks?.(Pi),Y({type:$o,event:Pi})}})}}},[oe]),Ze=_t.useCallback((en,dt)=>(Zn,gi)=>{const Tn=Zn.nativeEvent,zn=oe.get(gi);if(ke.current!==null||!zn||Tn.dndKit||Tn.defaultPrevented)return;const si={active:zn};en(Zn,dt.options,si)===!0&&(Tn.dndKit={capturedBy:dt.sensor},ke.current=gi,Pe(Zn,dt))},[oe,Pe]),y=mwe(m,Ze);Mwe(m),o0(()=>{Ee&&Z===Ty.Initializing&&J(Ty.Initialized)},[Ee,Z]),_t.useEffect(()=>{const{onDragMove:en}=yt.current,{active:dt,activatorEvent:Zn,collisions:gi,over:Tn}=mt.current;if(!dt||!Zn)return;const zn={active:dt,activatorEvent:Zn,collisions:gi,delta:{x:Ce.x,y:Ce.y},over:Tn};$2.unstable_batchedUpdates(()=>{en?.(zn),Y({type:"onDragMove",event:zn})})},[Ce.x,Ce.y]),_t.useEffect(()=>{const{active:en,activatorEvent:dt,collisions:Zn,droppableContainers:gi,scrollAdjustedTranslate:Tn}=mt.current;if(!en||ke.current==null||!dt||!Tn)return;const{onDragOver:zn}=yt.current,si=gi.get(he),ir=si&&si.rect.current?{id:si.id,rect:si.rect.current,data:si.data,disabled:si.disabled}:null,Di={active:en,activatorEvent:dt,collisions:Zn,delta:{x:Tn.x,y:Tn.y},over:ir};$2.unstable_batchedUpdates(()=>{Ae(ir),zn?.(Di),Y({type:"onDragOver",event:Di})})},[he]),o0(()=>{mt.current={activatorEvent:Ye,active:Me,activeNode:Tt,collisionRect:re,collisions:le,droppableRects:Te,draggableNodes:oe,draggingNode:Rt,draggingNodeRect:Kt,droppableContainers:xe,over:se,scrollableAncestors:xi,scrollAdjustedTranslate:Ce},Ie.current={initial:Kt,translated:re}},[Me,Tt,le,re,oe,Rt,Kt,Te,xe,se,xi,Ce]),hwe({...Ue,delta:ue,draggingRect:re,pointerCoordinates:Cn,scrollableAncestors:xi,scrollableAncestorRects:Kn});const at=_t.useMemo(()=>({active:Me,activeNode:Tt,activeNodeRect:Ee,activatorEvent:Ye,collisions:le,containerNodeRect:Ve,dragOverlay:Ct,draggableNodes:oe,droppableContainers:xe,droppableRects:Te,over:se,measureDroppableContainers:xt,scrollableAncestors:xi,scrollableAncestorRects:Kn,measuringConfiguration:Ge,measuringScheduled:st,windowRect:Qn}),[Me,Tt,Ee,Ye,le,Ve,Ct,oe,xe,Te,se,xt,xi,Kn,Ge,st,Qn]),Pt=_t.useMemo(()=>({activatorEvent:Ye,activators:y,active:Me,activeNodeRect:Ee,ariaDescribedById:{draggable:Le},dispatch:Q,draggableNodes:oe,over:se,measureDroppableContainers:xt}),[Ye,y,Me,Ee,Q,Le,oe,se,xt]);return En.createElement(Qne.Provider,{value:H},En.createElement(x6.Provider,{value:Pt},En.createElement(nie.Provider,{value:at},En.createElement(iie.Provider,{value:We},h)),En.createElement(Pwe,{disabled:a?.restoreFocus===!1})),En.createElement(RMe,{...a,hiddenTextDescribedById:Le}));function Mt(){const en=je?.autoScrollEnabled===!1,dt=typeof c=="object"?c.enabled===!1:c===!1,Zn=$&&!en&&!dt;return typeof c=="object"?{...c,enabled:Zn}:{enabled:Zn}}}),Fwe=_t.createContext(null),CG="button",jwe="Draggable";function Nwe(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const o=M5(jwe),{activators:s,activatorEvent:a,active:c,activeNodeRect:h,ariaDescribedById:m,draggableNodes:v,over:x}=_t.useContext(x6),{role:E=CG,roleDescription:R="draggable",tabIndex:P=0}=r??{},z=c?.id===e,Q=_t.useContext(z?iie:Fwe),[Y,H]=jS(),[Z,J]=jS(),$=wwe(s,e),G=_4(t);o0(()=>(v.set(e,{id:e,key:o,node:Y,activatorNode:Z,data:G}),()=>{const ue=v.get(e);ue&&ue.key===o&&v.delete(e)}),[v,e]);const oe=_t.useMemo(()=>({role:E,tabIndex:P,"aria-disabled":i,"aria-pressed":z&&E===CG?!0:void 0,"aria-roledescription":R,"aria-describedby":m.draggable}),[i,E,P,z,R,m.draggable]);return{active:c,activatorEvent:a,activeNodeRect:h,attributes:oe,isDragging:z,listeners:i?void 0:$,node:Y,over:x,setNodeRef:H,setActivatorNodeRef:J,transform:Q}}function Gwe(){return _t.useContext(nie)}const Qwe="Droppable",Wwe={timeout:25};function qwe(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const o=M5(Qwe),{active:s,dispatch:a,over:c,measureDroppableContainers:h}=_t.useContext(x6),m=_t.useRef({disabled:t}),v=_t.useRef(!1),x=_t.useRef(null),E=_t.useRef(null),{disabled:R,updateMeasurementsFor:P,timeout:z}={...Wwe,...r},Q=_4(P??i),Y=_t.useCallback(()=>{if(!v.current){v.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{h(Array.isArray(Q.current)?Q.current:[Q.current]),E.current=null},z)},[z]),H=_6({callback:Y,disabled:R||!s}),Z=_t.useCallback((oe,ue)=>{H&&(ue&&(H.unobserve(ue),v.current=!1),oe&&H.observe(oe))},[H]),[J,$]=jS(Z),G=_4(e);return _t.useEffect(()=>{!H||!J.current||(H.disconnect(),v.current=!1,H.observe(J.current))},[J,H]),_t.useEffect(()=>(a({type:xc.RegisterDroppable,element:{id:i,key:o,disabled:t,node:J,rect:x,data:G}}),()=>a({type:xc.UnregisterDroppable,key:o,id:i})),[i]),_t.useEffect(()=>{t!==m.current.disabled&&(a({type:xc.SetDroppableDisabled,id:i,key:o,disabled:t}),m.current.disabled=t)},[i,o,t,a]),{active:s,rect:x,isOver:c?.id===i,node:J,over:c,setNodeRef:$}}function rie(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function Ywe(n,e){return n.reduce((t,i,r)=>{const o=e.get(i);return o&&(t[r]=o),t},Array(n.length))}function RM(n){return n!==null&&n>=0}function Vwe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function $we(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const oie=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const o=rie(e,i,t),s=e[r],a=o[r];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},DM={scaleX:1,scaleY:1},Hwe=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:r,rects:o,overIndex:s}=n;const a=(e=o[t])!=null?e:i;if(!a)return null;if(r===t){const h=o[s];return h?{x:0,y:t<s?h.top+h.height-(a.top+a.height):h.top-a.top,...DM}:null}const c=Zwe(o,r,t);return r>t&&r<=s?{x:0,y:-a.height-c,...DM}:r<t&&r>=s?{x:0,y:a.height+c,...DM}:{x:0,y:0,...DM}};function Zwe(n,e,t){const i=n[e],r=n[e-1],o=n[e+1];return i?t<e?r?i.top-(r.top+r.height):o?o.top-(i.top+i.height):0:o?o.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const sie="Sortable",aie=En.createContext({activeIndex:-1,containerId:sie,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:oie,disabled:{draggable:!1,droppable:!1}});function Xwe(n){let{children:e,id:t,items:i,strategy:r=oie,disabled:o=!1}=n;const{active:s,dragOverlay:a,droppableRects:c,over:h,measureDroppableContainers:m}=Gwe(),v=M5(sie,t),x=a.rect!==null,E=_t.useMemo(()=>i.map($=>typeof $=="object"&&"id"in $?$.id:$),[i]),R=s!=null,P=s?E.indexOf(s.id):-1,z=h?E.indexOf(h.id):-1,Q=_t.useRef(E),Y=!Vwe(E,Q.current),H=z!==-1&&P===-1||Y,Z=$we(o);o0(()=>{Y&&R&&m(E)},[Y,E,R,m]),_t.useEffect(()=>{Q.current=E},[E]);const J=_t.useMemo(()=>({activeIndex:P,containerId:v,disabled:Z,disableTransforms:H,items:E,overIndex:z,useDragOverlay:x,sortedRects:Ywe(E,c),strategy:r}),[P,v,Z.draggable,Z.droppable,H,E,z,c,x,r]);return En.createElement(aie.Provider,{value:J},e)}const Jwe=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return rie(t,i,r).indexOf(e)},eSe=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:o,newIndex:s,previousItems:a,previousContainerId:c,transition:h}=n;return!h||!i||a!==o&&r===s?!1:t?!0:s!==r&&e===c},tSe={duration:200,easing:"ease"},lie="transform",nSe=x4.Transition.toString({property:lie,duration:0,easing:"linear"}),iSe={roleDescription:"sortable"};function rSe(n){let{disabled:e,index:t,node:i,rect:r}=n;const[o,s]=_t.useState(null),a=_t.useRef(t);return o0(()=>{if(!e&&t!==a.current&&i.current){const c=r.current;if(c){const h=Wx(i.current,{ignoreTransform:!0}),m={x:c.left-h.left,y:c.top-h.top,scaleX:c.width/h.width,scaleY:c.height/h.height};(m.x||m.y)&&s(m)}}t!==a.current&&(a.current=t)},[e,t,i,r]),_t.useEffect(()=>{o&&s(null)},[o]),o}function oSe(n){let{animateLayoutChanges:e=eSe,attributes:t,disabled:i,data:r,getNewIndex:o=Jwe,id:s,strategy:a,resizeObserverConfig:c,transition:h=tSe}=n;const{items:m,containerId:v,activeIndex:x,disabled:E,disableTransforms:R,sortedRects:P,overIndex:z,useDragOverlay:Q,strategy:Y}=_t.useContext(aie),H=sSe(i,E),Z=m.indexOf(s),J=_t.useMemo(()=>({sortable:{containerId:v,index:Z,items:m},...r}),[v,r,Z,m]),$=_t.useMemo(()=>m.slice(m.indexOf(s)),[m,s]),{rect:G,node:oe,isOver:ue,setNodeRef:xe}=qwe({id:s,data:J,disabled:H.droppable,resizeObserverConfig:{updateMeasurementsFor:$,...c}}),{active:ge,activatorEvent:Ie,activeNodeRect:Me,attributes:ke,setNodeRef:je,listeners:Be,isDragging:Ye,over:At,setActivatorNodeRef:yt,transform:Le}=Nwe({id:s,data:J,attributes:{...iSe,...t},disabled:H.draggable}),De=bMe(xe,je),Ge=!!ge,Te=Ge&&!R&&RM(x)&&RM(z),xt=!Q&&Ye,st=xt&&Te?Le:null,Lt=Te?st??(a??Y)({rects:P,activeNodeRect:Me,activeIndex:x,overIndex:z,index:Z}):null,Ue=RM(x)&&RM(z)?o({id:s,items:m,activeIndex:x,overIndex:z}):Z,Oe=ge?.id,Ee=_t.useRef({activeId:Oe,items:m,newIndex:Ue,containerId:v}),Ve=m!==Ee.current.items,mt=e({active:ge,containerId:v,isDragging:Ye,isSorting:Ge,id:s,index:Z,items:m,newIndex:Ee.current.newIndex,previousItems:Ee.current.items,previousContainerId:Ee.current.containerId,transition:h,wasDragging:Ee.current.activeId!=null}),pt=rSe({disabled:!mt,index:Z,node:oe,rect:G});return _t.useEffect(()=>{Ge&&Ee.current.newIndex!==Ue&&(Ee.current.newIndex=Ue),v!==Ee.current.containerId&&(Ee.current.containerId=v),m!==Ee.current.items&&(Ee.current.items=m)},[Ge,Ue,v,m]),_t.useEffect(()=>{if(Oe===Ee.current.activeId)return;if(Oe!=null&&Ee.current.activeId==null){Ee.current.activeId=Oe;return}const Rt=setTimeout(()=>{Ee.current.activeId=Oe},50);return()=>clearTimeout(Rt)},[Oe]),{active:ge,activeIndex:x,attributes:ke,data:J,rect:G,index:Z,newIndex:Ue,items:m,isOver:ue,isSorting:Ge,isDragging:Ye,listeners:Be,node:oe,overIndex:z,over:At,setNodeRef:De,setActivatorNodeRef:yt,setDroppableNodeRef:xe,setDraggableNodeRef:je,transform:pt??Lt,transition:Ct()};function Ct(){if(pt||Ve&&Ee.current.newIndex===Z)return nSe;if(!(xt&&!OK(Ie)||!h)&&(Ge||mt))return x4.Transition.toString({...h,property:lie})}}function sSe(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}Ds.Down,Ds.Right,Ds.Up,Ds.Left;function Ab(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ab=function(){return s},s}Ab();class aSe extends En.Component{render(){Ab().f[0]++;const e=(Ab().s[0]++,{width:20,height:20,...this.props.style});return Ab().s[1]++,this.props.isCollapsed?(Ab().b[0][0]++,te.jsx(lZ,{style:e})):(Ab().b[0][1]++,te.jsx(aZ,{style:e}))}}function T_(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return T_=function(){return s},s}T_();class lSe extends En.Component{render(){return T_().f[0]++,T_().s[0]++,te.jsx("li",{className:"maputnik-layer-list-group",children:te.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(T_().f[1]++,T_().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[te.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx(aSe,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function Qi(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="65a9cb0d1a08cfab21a14c1632991e31e3063aa8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:22,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:21,column:7}},3:{start:{line:25,column:4},end:{line:34,column:5}},4:{start:{line:27,column:8},end:{line:27,column:54}},5:{start:{line:29,column:8},end:{line:29,column:53}},6:{start:{line:31,column:8},end:{line:31,column:56}},7:{start:{line:33,column:8},end:{line:33,column:49}},8:{start:{line:37,column:51},end:{line:37,column:61}},9:{start:{line:38,column:25},end:{line:38,column:27}},10:{start:{line:39,column:4},end:{line:44,column:5}},11:{start:{line:40,column:6},end:{line:40,column:76}},12:{start:{line:41,column:6},end:{line:43,column:7}},13:{start:{line:42,column:8},end:{line:42,column:103}},14:{start:{line:45,column:4},end:{line:56,column:6}},15:{start:{line:59,column:22},end:{line:145,column:2}},16:{start:{line:69,column:6},end:{line:69,column:11}},17:{start:{line:77,column:6},end:{line:77,column:40}},18:{start:{line:78,column:16},end:{line:82,column:3}},19:{start:{line:83,column:27},end:{line:83,column:69}},20:{start:{line:84,column:20},end:{line:84,column:23}},21:{start:{line:85,column:2},end:{line:144,column:7}},22:{start:{line:89,column:8},end:{line:89,column:25}},23:{start:{line:90,column:8},end:{line:92,column:9}},24:{start:{line:91,column:10},end:{line:91,column:35}},25:{start:{line:96,column:23},end:{line:96,column:60}},26:{start:{line:120,column:29},end:{line:120,column:61}},27:{start:{line:129,column:29},end:{line:129,column:58}},28:{start:{line:139,column:29},end:{line:139,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:22,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:35,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:57,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:59,column:39},end:{line:59,column:40}},loc:{start:{line:59,column:55},end:{line:145,column:1}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:64,column:5}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:27},end:{line:66,column:5}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:67,column:30},end:{line:67,column:31}},loc:{start:{line:67,column:36},end:{line:68,column:5}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:88,column:11},end:{line:88,column:12}},loc:{start:{line:88,column:21},end:{line:93,column:7}},line:88},8:{name:"(anonymous_8)",decl:{start:{line:96,column:15},end:{line:96,column:16}},loc:{start:{line:96,column:23},end:{line:96,column:60}},line:96},9:{name:"(anonymous_9)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:29},end:{line:120,column:61}},line:120},10:{name:"(anonymous_10)",decl:{start:{line:129,column:21},end:{line:129,column:22}},loc:{start:{line:129,column:29},end:{line:129,column:58}},line:129},11:{name:"(anonymous_11)",decl:{start:{line:139,column:21},end:{line:139,column:22}},loc:{start:{line:139,column:29},end:{line:139,column:70}},line:139}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"switch",locations:[{start:{line:26,column:6},end:{line:27,column:54}},{start:{line:28,column:6},end:{line:29,column:53}},{start:{line:30,column:6},end:{line:31,column:56}},{start:{line:32,column:6},end:{line:33,column:49}}],line:25},1:{loc:{start:{line:39,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:41,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:43,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:61,column:4},end:{line:61,column:22}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:22}}],line:61},4:{loc:{start:{line:62,column:4},end:{line:62,column:26}},type:"default-arg",locations:[{start:{line:62,column:17},end:{line:62,column:26}}],line:62},5:{loc:{start:{line:63,column:4},end:{line:64,column:5}},type:"default-arg",locations:[{start:{line:63,column:18},end:{line:64,column:5}}],line:63},6:{loc:{start:{line:65,column:4},end:{line:66,column:5}},type:"default-arg",locations:[{start:{line:65,column:21},end:{line:66,column:5}}],line:65},7:{loc:{start:{line:67,column:4},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:67,column:30},end:{line:68,column:5}}],line:67},8:{loc:{start:{line:81,column:13},end:{line:81,column:33}},type:"cond-expr",locations:[{start:{line:81,column:26},end:{line:81,column:29}},{start:{line:81,column:32},end:{line:81,column:33}}],line:81},9:{loc:{start:{line:83,column:27},end:{line:83,column:69}},type:"cond-expr",locations:[{start:{line:83,column:54},end:{line:83,column:60}},{start:{line:83,column:63},end:{line:83,column:69}}],line:83},10:{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA,QACZ,OAAO,EAAE,OAAO,OAAO,QAAQ,OAAO,eAAe,SAAS;AAAA;AAAA,IAChE;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MACxB,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"65a9cb0d1a08cfab21a14c1632991e31e3063aa8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Qi=function(){return s},s}Qi();Qi().s[0]++;const uSe=n=>{Qi().f[0]++;const{dragAttributes:e,dragListeners:t}=(Qi().s[1]++,n);return Qi().s[2]++,te.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[te.jsx(uZ,{className:"layer-handle__icon",type:n.layerType,style:{width:"1em",height:"1em",verticalAlign:"middle"}}),te.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class i8 extends En.Component{renderIcon(){switch(Qi().f[1]++,Qi().s[3]++,this.props.action){case"duplicate":return Qi().b[0][0]++,Qi().s[4]++,te.jsx(Vhe,{});case"show":return Qi().b[0][1]++,Qi().s[5]++,te.jsx(Yhe,{});case"hide":return Qi().b[0][2]++,Qi().s[6]++,te.jsx(qhe,{});case"delete":return Qi().b[0][3]++,Qi().s[7]++,te.jsx(Hb,{})}}render(){Qi().f[2]++;const{classBlockName:e,classBlockModifier:t}=(Qi().s[8]++,this.props);let i=(Qi().s[9]++,"");return Qi().s[10]++,e?(Qi().b[1][0]++,Qi().s[11]++,i=`maputnik-layer-list-icon-action__${e}`,Qi().s[12]++,t?(Qi().b[2][0]++,Qi().s[13]++,i+=` maputnik-layer-list-icon-action__${e}--${t}`):Qi().b[2][1]++):Qi().b[1][1]++,Qi().s[14]++,te.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${i}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const cSe=(Qi().s[15]++,En.forwardRef((n,e)=>{Qi().f[3]++;const{isSelected:t=(Qi().b[3][0]++,!1),visibility:i=(Qi().b[4][0]++,"visible"),onLayerCopy:r=(Qi().b[5][0]++,()=>{Qi().f[4]++}),onLayerDestroy:o=(Qi().b[6][0]++,()=>{Qi().f[5]++}),onLayerVisibilityToggle:s=(Qi().b[7][0]++,()=>{Qi().f[6]++})}=(Qi().s[16]++,n),{attributes:a,listeners:c,setNodeRef:h,transform:m,transition:v,isDragging:x}=(Qi().s[17]++,oSe({id:n.layerId})),E=(Qi().s[18]++,{transform:x4.Transform.toString(m),transition:v,opacity:x?(Qi().b[8][0]++,.5):(Qi().b[8][1]++,1)}),R=(Qi().s[19]++,i==="visible"?(Qi().b[9][0]++,"show"):(Qi().b[9][1]++,"hide")),P=(Qi().s[20]++,e);return Qi().s[21]++,te.jsx(rx.Provider,{value:{size:"14px"},children:te.jsxs("li",{ref:z=>{Qi().f[7]++,Qi().s[22]++,h(z),Qi().s[23]++,P?(Qi().b[10][0]++,Qi().s[24]++,P.current=z):Qi().b[10][1]++},style:E,id:n.id,onClick:z=>(Qi().f[8]++,Qi().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:c0({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[te.jsx(uSe,{layerId:n.layerId,layerType:n.layerType,dragAttributes:a,dragListeners:c}),te.jsx("span",{style:{flexGrow:1}}),te.jsx(i8,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:z=>(Qi().f[9]++,Qi().s[26]++,o(n.layerIndex))}),te.jsx(i8,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:z=>(Qi().f[10]++,Qi().s[27]++,r(n.layerIndex))}),te.jsx(i8,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:R,classBlockName:"visibility",classBlockModifier:R,onClick:z=>(Qi().f[11]++,Qi().s[28]++,s(n.layerIndex))})]})})}));function WS(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return WS=function(){return s},s}WS();class Zs extends En.Component{render(){return WS().f[0]++,WS().s[0]++,te.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:c0("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}var r8={exports:{}},o8,_G;function ASe(){if(_G)return o8;_G=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return o8=n,o8}var s8,xG;function hSe(){if(xG)return s8;xG=1;var n=ASe();function e(){}function t(){}return t.resetWarningCache=e,s8=function(){function i(s,a,c,h,m,v){if(v!==n){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},s8}var MG;function b1(){return MG||(MG=1,r8.exports=hSe()()),r8.exports}/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var uie=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],qS=uie.join(","),cie=typeof Element>"u",Vb=cie?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,YS=!cie&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},w4=function(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),o=r===""||r==="true",s=o||t&&e&&w4(e.parentNode);return s},dSe=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},Aie=function(e,t,i){if(w4(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(qS));return t&&Vb.call(e,qS)&&r.unshift(e),r=r.filter(i),r},VS=function(e,t,i){for(var r=[],o=Array.from(e);o.length;){var s=o.shift();if(!w4(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,h=VS(c,!0,i);i.flatten?r.push.apply(r,h):r.push({scopeParent:s,candidates:h})}else{var m=Vb.call(s,qS);m&&i.filter(s)&&(t||!e.includes(s))&&r.push(s);var v=s.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(s),x=!w4(v,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(s));if(v&&x){var E=VS(v===!0?s.children:v.children,!0,i);i.flatten?r.push.apply(r,E):r.push({scopeParent:s,candidates:E})}else o.unshift.apply(o,s.children)}}return r},hie=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Dy=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||dSe(e))&&!hie(e)?0:e.tabIndex},fSe=function(e,t){var i=Dy(e);return i<0&&t&&!hie(e)?0:i},pSe=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},die=function(e){return e.tagName==="INPUT"},mSe=function(e){return die(e)&&e.type==="hidden"},gSe=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},ySe=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},vSe=function(e){if(!e.name)return!0;var t=e.form||YS(e),i=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=ySe(r,e.form);return!o||o===e},bSe=function(e){return die(e)&&e.type==="radio"},CSe=function(e){return bSe(e)&&!vSe(e)},_Se=function(e){var t,i=e&&YS(e),r=(t=i)===null||t===void 0?void 0:t.host,o=!1;if(i&&i!==e){var s,a,c;for(o=!!((s=r)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!o&&r;){var h,m,v;i=YS(r),r=(h=i)===null||h===void 0?void 0:h.host,o=!!((m=r)!==null&&m!==void 0&&(v=m.ownerDocument)!==null&&v!==void 0&&v.contains(r))}}return o},wG=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},xSe=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(i==="full-native"&&"checkVisibility"in e){var o=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(e).visibility==="hidden")return!0;var s=Vb.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(Vb.call(a,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="full-native"||i==="legacy-full"){if(typeof r=="function"){for(var c=e;e;){var h=e.parentElement,m=YS(e);if(h&&!h.shadowRoot&&r(h)===!0)return wG(e);e.assignedSlot?e=e.assignedSlot:!h&&m!==e.ownerDocument?e=m.host:e=h}e=c}if(_Se(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return wG(e);return!1},MSe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return Vb.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},$S=function(e,t){return!(t.disabled||w4(t)||mSe(t)||xSe(t,e)||gSe(t)||MSe(t))},SR=function(e,t){return!(CSe(t)||Dy(t)<0||!$S(e,t))},wSe=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},fie=function(e){var t=[],i=[];return e.forEach(function(r,o){var s=!!r.scopeParent,a=s?r.scopeParent:r,c=fSe(a,s),h=s?fie(r.candidates):a;c===0?s?t.push.apply(t,h):t.push(a):i.push({documentOrder:o,tabIndex:c,item:r,isScope:s,content:h})}),i.sort(pSe).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(t)},pie=function(e,t){t=t||{};var i;return t.getShadowRoot?i=VS([e],t.includeContainer,{filter:SR.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:wSe}):i=Aie(e,t.includeContainer,SR.bind(null,t)),fie(i)},mie=function(e,t){t=t||{};var i;return t.getShadowRoot?i=VS([e],t.includeContainer,{filter:$S.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=Aie(e,t.includeContainer,$S.bind(null,t)),i},sb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Vb.call(e,qS)===!1?!1:SR(t,e)},SSe=uie.concat("iframe").join(","),xw=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Vb.call(e,SSe)===!1?!1:$S(t,e)};const ESe=Object.freeze(Object.defineProperty({__proto__:null,focusable:mie,getTabIndex:Dy,isFocusable:xw,isTabbable:sb,tabbable:pie},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.6.6
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ER(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function BSe(n){if(Array.isArray(n))return ER(n)}function OSe(n,e,t){return(e=DSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ISe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function kSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SG(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function EG(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SG(Object(t),!0).forEach(function(i){OSe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):SG(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function TSe(n){return BSe(n)||ISe(n)||PSe(n)||kSe()}function RSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DSe(n){var e=RSe(n,"string");return typeof e=="symbol"?e:e+""}function PSe(n,e){if(n){if(typeof n=="string")return ER(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ER(n,e):void 0}}var BG={activateTrap:function(e,t){if(e.length>0){var i=e[e.length-1];i!==t&&i._setPausedState(!0)}var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},KSe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},USe=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},_3=function(e){return e?.key==="Tab"||e?.keyCode===9},LSe=function(e){return _3(e)&&!e.shiftKey},zSe=function(e){return _3(e)&&e.shiftKey},OG=function(e){return setTimeout(e,0)},_2=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},PM=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},FSe=[],jSe=function(e,t){var i=t?.document||document,r=t?.trapStack||FSe,o=EG({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:LSe,isKeyBackward:zSe},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,c=function(Me,ke,je){return Me&&Me[ke]!==void 0?Me[ke]:o[je||ke]},h=function(Me,ke){var je=typeof ke?.composedPath=="function"?ke.composedPath():void 0;return s.containerGroups.findIndex(function(Be){var Ye=Be.container,At=Be.tabbableNodes;return Ye.contains(Me)||je?.includes(Ye)||At.find(function(yt){return yt===Me})})},m=function(Me){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},je=ke.hasFallback,Be=je===void 0?!1:je,Ye=ke.params,At=Ye===void 0?[]:Ye,yt=o[Me];if(typeof yt=="function"&&(yt=yt.apply(void 0,TSe(At))),yt===!0&&(yt=void 0),!yt){if(yt===void 0||yt===!1)return yt;throw new Error("`".concat(Me,"` was specified but was not a node, or did not return a node"))}var Le=yt;if(typeof yt=="string"){try{Le=i.querySelector(yt)}catch(De){throw new Error("`".concat(Me,'` appears to be an invalid selector; error="').concat(De.message,'"'))}if(!Le&&!Be)throw new Error("`".concat(Me,"` as selector refers to no known node"))}return Le},v=function(){var Me=m("initialFocus",{hasFallback:!0});if(Me===!1)return!1;if(Me===void 0||Me&&!xw(Me,o.tabbableOptions))if(h(i.activeElement)>=0)Me=i.activeElement;else{var ke=s.tabbableGroups[0],je=ke&&ke.firstTabbableNode;Me=je||m("fallbackFocus")}else Me===null&&(Me=m("fallbackFocus"));if(!Me)throw new Error("Your focus-trap needs to have at least one focusable element");return Me},x=function(){if(s.containerGroups=s.containers.map(function(Me){var ke=pie(Me,o.tabbableOptions),je=mie(Me,o.tabbableOptions),Be=ke.length>0?ke[0]:void 0,Ye=ke.length>0?ke[ke.length-1]:void 0,At=je.find(function(De){return sb(De)}),yt=je.slice().reverse().find(function(De){return sb(De)}),Le=!!ke.find(function(De){return Dy(De)>0});return{container:Me,tabbableNodes:ke,focusableNodes:je,posTabIndexesFound:Le,firstTabbableNode:Be,lastTabbableNode:Ye,firstDomTabbableNode:At,lastDomTabbableNode:yt,nextTabbableNode:function(Ge){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,xt=ke.indexOf(Ge);return xt<0?Te?je.slice(je.indexOf(Ge)+1).find(function(st){return sb(st)}):je.slice(0,je.indexOf(Ge)).reverse().find(function(st){return sb(st)}):ke[xt+(Te?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(Me){return Me.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(Me){return Me.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},E=function(Me){var ke=Me.activeElement;if(ke)return ke.shadowRoot&&ke.shadowRoot.activeElement!==null?E(ke.shadowRoot):ke},R=function(Me){if(Me!==!1&&Me!==E(document)){if(!Me||!Me.focus){R(v());return}Me.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=Me,KSe(Me)&&Me.select()}},P=function(Me){var ke=m("setReturnFocus",{params:[Me]});return ke||(ke===!1?!1:Me)},z=function(Me){var ke=Me.target,je=Me.event,Be=Me.isBackward,Ye=Be===void 0?!1:Be;ke=ke||PM(je),x();var At=null;if(s.tabbableGroups.length>0){var yt=h(ke,je),Le=yt>=0?s.containerGroups[yt]:void 0;if(yt<0)Ye?At=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:At=s.tabbableGroups[0].firstTabbableNode;else if(Ye){var De=s.tabbableGroups.findIndex(function(Lt){var Ue=Lt.firstTabbableNode;return ke===Ue});if(De<0&&(Le.container===ke||xw(ke,o.tabbableOptions)&&!sb(ke,o.tabbableOptions)&&!Le.nextTabbableNode(ke,!1))&&(De=yt),De>=0){var Ge=De===0?s.tabbableGroups.length-1:De-1,Te=s.tabbableGroups[Ge];At=Dy(ke)>=0?Te.lastTabbableNode:Te.lastDomTabbableNode}else _3(je)||(At=Le.nextTabbableNode(ke,!1))}else{var xt=s.tabbableGroups.findIndex(function(Lt){var Ue=Lt.lastTabbableNode;return ke===Ue});if(xt<0&&(Le.container===ke||xw(ke,o.tabbableOptions)&&!sb(ke,o.tabbableOptions)&&!Le.nextTabbableNode(ke))&&(xt=yt),xt>=0){var st=xt===s.tabbableGroups.length-1?0:xt+1,Tt=s.tabbableGroups[st];At=Dy(ke)>=0?Tt.firstTabbableNode:Tt.firstDomTabbableNode}else _3(je)||(At=Le.nextTabbableNode(ke))}}else At=m("fallbackFocus");return At},Q=function(Me){var ke=PM(Me);if(!(h(ke,Me)>=0)){if(_2(o.clickOutsideDeactivates,Me)){a.deactivate({returnFocus:o.returnFocusOnDeactivate});return}_2(o.allowOutsideClick,Me)||Me.preventDefault()}},Y=function(Me){var ke=PM(Me),je=h(ke,Me)>=0;if(je||ke instanceof Document)je&&(s.mostRecentlyFocusedNode=ke);else{Me.stopImmediatePropagation();var Be,Ye=!0;if(s.mostRecentlyFocusedNode)if(Dy(s.mostRecentlyFocusedNode)>0){var At=h(s.mostRecentlyFocusedNode),yt=s.containerGroups[At].tabbableNodes;if(yt.length>0){var Le=yt.findIndex(function(De){return De===s.mostRecentlyFocusedNode});Le>=0&&(o.isKeyForward(s.recentNavEvent)?Le+1<yt.length&&(Be=yt[Le+1],Ye=!1):Le-1>=0&&(Be=yt[Le-1],Ye=!1))}}else s.containerGroups.some(function(De){return De.tabbableNodes.some(function(Ge){return Dy(Ge)>0})})||(Ye=!1);else Ye=!1;Ye&&(Be=z({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),R(Be||s.mostRecentlyFocusedNode||v())}s.recentNavEvent=void 0},H=function(Me){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=Me;var je=z({event:Me,isBackward:ke});je&&(_3(Me)&&Me.preventDefault(),R(je))},Z=function(Me){(o.isKeyForward(Me)||o.isKeyBackward(Me))&&H(Me,o.isKeyBackward(Me))},J=function(Me){USe(Me)&&_2(o.escapeDeactivates,Me)!==!1&&(Me.preventDefault(),a.deactivate())},$=function(Me){var ke=PM(Me);h(ke,Me)>=0||_2(o.clickOutsideDeactivates,Me)||_2(o.allowOutsideClick,Me)||(Me.preventDefault(),Me.stopImmediatePropagation())},G=function(){if(s.active)return BG.activateTrap(r,a),s.delayInitialFocusTimer=o.delayInitialFocus?OG(function(){R(v())}):R(v()),i.addEventListener("focusin",Y,!0),i.addEventListener("mousedown",Q,{capture:!0,passive:!1}),i.addEventListener("touchstart",Q,{capture:!0,passive:!1}),i.addEventListener("click",$,{capture:!0,passive:!1}),i.addEventListener("keydown",Z,{capture:!0,passive:!1}),i.addEventListener("keydown",J),a},oe=function(){if(s.active)return i.removeEventListener("focusin",Y,!0),i.removeEventListener("mousedown",Q,!0),i.removeEventListener("touchstart",Q,!0),i.removeEventListener("click",$,!0),i.removeEventListener("keydown",Z,!0),i.removeEventListener("keydown",J),a},ue=function(Me){var ke=Me.some(function(je){var Be=Array.from(je.removedNodes);return Be.some(function(Ye){return Ye===s.mostRecentlyFocusedNode})});ke&&R(v())},xe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ue):void 0,ge=function(){xe&&(xe.disconnect(),s.active&&!s.paused&&s.containers.map(function(Me){xe.observe(Me,{subtree:!0,childList:!0})}))};return a={get active(){return s.active},get paused(){return s.paused},activate:function(Me){if(s.active)return this;var ke=c(Me,"onActivate"),je=c(Me,"onPostActivate"),Be=c(Me,"checkCanFocusTrap");Be||x(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=E(i),ke?.();var Ye=function(){Be&&x(),G(),ge(),je?.()};return Be?(Be(s.containers.concat()).then(Ye,Ye),this):(Ye(),this)},deactivate:function(Me){if(!s.active)return this;var ke=EG({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},Me);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,oe(),s.active=!1,s.paused=!1,ge(),BG.deactivateTrap(r,a);var je=c(ke,"onDeactivate"),Be=c(ke,"onPostDeactivate"),Ye=c(ke,"checkCanReturnFocus"),At=c(ke,"returnFocus","returnFocusOnDeactivate");je?.();var yt=function(){OG(function(){At&&R(P(s.nodeFocusedBeforeActivation)),Be?.()})};return At&&Ye?(Ye(P(s.nodeFocusedBeforeActivation)).then(yt,yt),this):(yt(),this)},pause:function(Me){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,Me)):this},unpause:function(Me){return s.active?(s.manuallyPaused=!1,r[r.length-1]!==this?this:this._setPausedState(!1,Me)):this},updateContainerElements:function(Me){var ke=[].concat(Me).filter(Boolean);return s.containers=ke.map(function(je){return typeof je=="string"?i.querySelector(je):je}),s.active&&x(),ge(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(Me,ke){if(s.paused===Me)return this;if(s.paused=Me,Me){var je=c(ke,"onPause"),Be=c(ke,"onPostPause");je?.(),oe(),ge(),Be?.()}else{var Ye=c(ke,"onUnpause"),At=c(ke,"onPostUnpause");Ye?.(),x(),G(),ge(),At?.()}return this}}}),a.updateContainerElements(e),a};const NSe=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:jSe},Symbol.toStringTag,{value:"Module"})),GSe=A$(NSe),QSe=A$(ESe);var a8,IG;function WSe(){if(IG)return a8;IG=1;function n($){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},n($)}function e($,G){if(!($ instanceof G))throw new TypeError("Cannot call a class as a function")}function t($,G){for(var oe=0;oe<G.length;oe++){var ue=G[oe];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty($,x(ue.key),ue)}}function i($,G,oe){return G&&t($.prototype,G),Object.defineProperty($,"prototype",{writable:!1}),$}function r($,G,oe){return G=c(G),o($,a()?Reflect.construct(G,oe||[],c($).constructor):G.apply($,oe))}function o($,G){if(G&&(n(G)=="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s($)}function s($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function a(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!$})()}function c($){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(G){return G.__proto__||Object.getPrototypeOf(G)},c($)}function h($,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(G&&G.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),G&&m($,G)}function m($,G){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(oe,ue){return oe.__proto__=ue,oe},m($,G)}function v($,G,oe){return(G=x(G))in $?Object.defineProperty($,G,{value:oe,enumerable:!0,configurable:!0,writable:!0}):$[G]=oe,$}function x($){var G=E($,"string");return n(G)=="symbol"?G:G+""}function E($,G){if(n($)!="object"||!$)return $;var oe=$[Symbol.toPrimitive];if(oe!==void 0){var ue=oe.call($,G);if(n(ue)!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)($)}var R=Ba(),P=b1(),z=GSe,Q=z.createFocusTrap,Y=QSe,H=Y.isFocusable,Z=(function($){function G(oe){var ue;e(this,G),ue=r(this,G,[oe]),v(ue,"getNodeForOption",function(Ie){var Me,ke=(Me=this.internalOptions[Ie])!==null&&Me!==void 0?Me:this.originalOptions[Ie];if(typeof ke=="function"){for(var je=arguments.length,Be=new Array(je>1?je-1:0),Ye=1;Ye<je;Ye++)Be[Ye-1]=arguments[Ye];ke=ke.apply(void 0,Be)}if(ke===!0&&(ke=void 0),!ke){if(ke===void 0||ke===!1)return ke;throw new Error("`".concat(Ie,"` was specified but was not a node, or did not return a node"))}var At=ke;if(typeof ke=="string"){var yt;if(At=(yt=this.getDocument())===null||yt===void 0?void 0:yt.querySelector(ke),!At)throw new Error("`".concat(Ie,"` as selector refers to no known node"))}return At}),ue.handleDeactivate=ue.handleDeactivate.bind(ue),ue.handlePostDeactivate=ue.handlePostDeactivate.bind(ue),ue.handleClickOutsideDeactivates=ue.handleClickOutsideDeactivates.bind(ue),ue.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ue.handleDeactivate,onPostDeactivate:ue.handlePostDeactivate,clickOutsideDeactivates:ue.handleClickOutsideDeactivates},ue.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var xe=oe.focusTrapOptions;for(var ge in xe)if(Object.prototype.hasOwnProperty.call(xe,ge)){if(ge==="returnFocusOnDeactivate"||ge==="onDeactivate"||ge==="onPostDeactivate"||ge==="checkCanReturnFocus"||ge==="clickOutsideDeactivates"){ue.originalOptions[ge]=xe[ge];continue}ue.internalOptions[ge]=xe[ge]}return ue.outsideClick=null,ue.focusTrapElements=oe.containerElements||[],ue.updatePreviousElement(),ue}return h(G,$),i(G,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var ue=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return ue||(ue===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var ue=this.getDocument();ue&&(this.previouslyFocusedElement=ue.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(ue){var xe=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,ue):this.originalOptions.clickOutsideDeactivates;return xe&&(this.outsideClick={target:ue.target,allowDeactivation:xe}),xe}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var ue=this,xe=function(){var Ie=ue.getReturnFocusNode(),Me=!!(ue.originalOptions.returnFocusOnDeactivate&&Ie!==null&&Ie!==void 0&&Ie.focus&&(!ue.outsideClick||ue.outsideClick.allowDeactivation&&!H(ue.outsideClick.target,ue.internalOptions.tabbableOptions))),ke=ue.internalOptions.preventScroll,je=ke===void 0?!1:ke;Me&&Ie.focus({preventScroll:je}),ue.originalOptions.onPostDeactivate&&ue.originalOptions.onPostDeactivate.call(null),ue.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(xe,xe):xe()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var ue=this.focusTrapElements.some(Boolean);ue&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(ue){if(this.focusTrap){ue.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var xe=!ue.active&&this.props.active,ge=ue.active&&!this.props.active,Ie=!ue.paused&&this.props.paused,Me=ue.paused&&!this.props.paused;if(xe&&(this.updatePreviousElement(),this.focusTrap.activate()),ge){this.deactivateTrap();return}Ie&&this.focusTrap.pause(),Me&&this.focusTrap.unpause()}else ue.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var ue=this,xe=this.props.children?R.Children.only(this.props.children):void 0;if(xe){if(xe.type&&xe.type===R.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var ge=function(ke){var je=ue.props.containerElements;xe&&(typeof xe.ref=="function"?xe.ref(ke):xe.ref&&(xe.ref.current=ke)),ue.focusTrapElements=je||[ke]},Ie=R.cloneElement(xe,{ref:ge});return Ie}return null}}])})(R.Component),J=typeof Element>"u"?Function:Element;return Z.propTypes={active:P.bool,paused:P.bool,focusTrapOptions:P.shape({document:P.object,onActivate:P.func,onPostActivate:P.func,checkCanFocusTrap:P.func,onPause:P.func,onPostPause:P.func,onUnpause:P.func,onPostUnpause:P.func,onDeactivate:P.func,onPostDeactivate:P.func,checkCanReturnFocus:P.func,initialFocus:P.oneOfType([P.instanceOf(J),P.string,P.bool,P.func]),fallbackFocus:P.oneOfType([P.instanceOf(J),P.string,P.func]),escapeDeactivates:P.oneOfType([P.bool,P.func]),clickOutsideDeactivates:P.oneOfType([P.bool,P.func]),returnFocusOnDeactivate:P.bool,setReturnFocus:P.oneOfType([P.instanceOf(J),P.string,P.bool,P.func]),allowOutsideClick:P.oneOfType([P.bool,P.func]),preventScroll:P.bool,tabbableOptions:P.shape({displayCheck:P.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:P.oneOfType([P.bool,P.func])}),trapStack:P.array,isKeyForward:P.func,isKeyBackward:P.func}),containerElements:P.arrayOf(P.instanceOf(J)),children:P.oneOfType([P.element,P.instanceOf(J)])},Z.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:Q},a8=Z,a8}var l8={exports:{}},kG;function qSe(){return kG||(kG=1,(function(n){(function(e){var t=!1,i,r;function o(){if(typeof i<"u")return i;var v=document.documentElement,x=document.createElement("div");return x.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),v.appendChild(x),i=x.offsetWidth-x.clientWidth,v.removeChild(x),i}function s(){return document.documentElement.scrollHeight>window.innerHeight}function a(v){if(!(typeof document>"u"||t)){var x=document.documentElement;r=window.pageYOffset,s()?x.style.width="calc(100% - "+o()+"px)":x.style.width="100%",x.style.position="fixed",x.style.top=-r+"px",x.style.overflow="hidden",t=!0}}function c(){if(!(typeof document>"u"||!t)){var v=document.documentElement;v.style.width="",v.style.position="",v.style.top="",v.style.overflow="",window.scroll(0,r),t=!1}}function h(){if(t){c();return}a()}var m={on:a,off:c,toggle:h};n.exports=m})()})(l8)),l8.exports}var u8,TG;function YSe(){if(TG)return u8;TG=1;function n(H){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},n(H)}function e(H,Z){if(!(H instanceof Z))throw new TypeError("Cannot call a class as a function")}function t(H,Z){for(var J=0;J<Z.length;J++){var $=Z[J];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(H,$.key,$)}}function i(H,Z,J){return Z&&t(H.prototype,Z),Object.defineProperty(H,"prototype",{writable:!1}),H}function r(H,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(Z&&Z.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),Z&&o(H,Z)}function o(H,Z){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($,G){return $.__proto__=G,$},o(H,Z)}function s(H){var Z=h();return function(){var $=m(H),G;if(Z){var oe=m(this).constructor;G=Reflect.construct($,arguments,oe)}else G=$.apply(this,arguments);return a(this,G)}}function a(H,Z){if(Z&&(n(Z)==="object"||typeof Z=="function"))return Z;if(Z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(H)}function c(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(H){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(J){return J.__proto__||Object.getPrototypeOf(J)},m(H)}function v(H,Z,J){return Z in H?Object.defineProperty(H,Z,{value:J,enumerable:!0,configurable:!0,writable:!0}):H[Z]=J,H}var x=Ba(),E=$R(),R=WSe(),P=qSe(),z=(function(H){r(J,H);var Z=s(J);function J($){var G;if(e(this,J),G=Z.call(this,$),v(c(G),"getApplicationNode",function(){return G.props.getApplicationNode?G.props.getApplicationNode():G.props.applicationNode}),v(c(G),"checkUnderlayClick",function(oe){G.dialogNode&&G.dialogNode.contains(oe.target)||oe.pageX>oe.target.ownerDocument.documentElement.offsetWidth||oe.pageY>oe.target.ownerDocument.documentElement.offsetHeight||G.exit(oe)}),v(c(G),"checkDocumentKeyDown",function(oe){G.props.escapeExits&&(oe.key==="Escape"||oe.key==="Esc"||oe.keyCode===27)&&G.exit(oe)}),v(c(G),"exit",function(oe){G.props.onExit&&G.props.onExit(oe)}),!$.titleText&&!$.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return G}return i(J,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var G=this.getApplicationNode();setTimeout(function(){G&&G.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&P.on()}},{key:"componentDidUpdate",value:function(G){G.scrollDisabled&&!this.props.scrollDisabled?P.off():!G.scrollDisabled&&this.props.scrollDisabled&&P.on(),this.props.escapeExits&&!G.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&G.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&P.off();var G=this.getApplicationNode();G&&G.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var G=this;setTimeout(function(){document.addEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var G=this;setTimeout(function(){document.removeEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"render",value:function(){var G=this.props,oe={};if(G.includeDefaultStyles&&(oe={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},G.underlayColor&&(oe.background=G.underlayColor),G.underlayClickExits&&(oe.cursor="pointer")),G.underlayStyle)for(var ue in G.underlayStyle)G.underlayStyle.hasOwnProperty(ue)&&(oe[ue]=G.underlayStyle[ue]);var xe={className:G.underlayClass,style:oe};G.underlayClickExits&&(xe.onMouseDown=this.checkUnderlayClick);for(var ge in this.props.underlayProps)xe[ge]=this.props.underlayProps[ge];var Ie={};G.includeDefaultStyles&&(Ie={display:"inline-block",height:"100%",verticalAlign:"middle"});var Me={key:"a",style:Ie},ke={};if(G.includeDefaultStyles&&(ke={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:G.focusDialog?0:null},G.verticallyCenter&&(ke.verticalAlign="middle",ke.top=0)),G.dialogStyle)for(var je in G.dialogStyle)G.dialogStyle.hasOwnProperty(je)&&(ke[je]=G.dialogStyle[je]);var Be={key:"b",ref:(function(Le){this.dialogNode=Le}).bind(this),role:G.alert?"alertdialog":"dialog",id:G.dialogId,className:G.dialogClass,style:ke};G.titleId?Be["aria-labelledby"]=G.titleId:G.titleText&&(Be["aria-label"]=G.titleText),G.focusDialog&&(Be.tabIndex="-1");for(var Ye in G)/^(data-|aria-)/.test(Ye)&&(Be[Ye]=G[Ye]);var At=[x.createElement("div",Be,G.children)];G.verticallyCenter&&At.unshift(x.createElement("div",Me));var yt=G.focusTrapOptions||{};return(G.focusDialog||G.initialFocus)&&(yt.initialFocus=G.focusDialog?"#".concat(this.props.dialogId):G.initialFocus),yt.escapeDeactivates=G.escapeExits,x.createElement(R,{focusTrapOptions:yt,paused:G.focusTrapPaused},x.createElement("div",xe,At))}}]),J})(x.Component);v(z,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function Q(H,Z){if(!window.document)return function(){return null};Z=Z||{};var J=(function($){r(oe,$);var G=s(oe);function oe(){var ue;e(this,oe);for(var xe=arguments.length,ge=new Array(xe),Ie=0;Ie<xe;Ie++)ge[Ie]=arguments[Ie];return ue=G.call.apply(G,[this].concat(ge)),v(c(ue),"container",null),ue}return i(oe,[{key:"componentDidMount",value:function(){Z.renderTo?this.container=typeof Z.renderTo=="string"?document.querySelector(Z.renderTo):Z.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){Z.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:E.createPortal(x.createElement(H,this.props,this.props.children),this.container)}}]),oe})(x.Component);return v(J,"defaultProps",{mounted:!0}),J}var Y=Q(z);return Y.renderTo=function(H){return Q(z,{renderTo:H})},u8=Y,u8}var VSe=YSe();const $Se=Su(VSe);function qu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",e="b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:32}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx"],names:[],mappings:"AA8CU,SACE,KADF;AA9CV,OAAO,WAAuC;AAC9C,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAYtD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa;AAAA,IAC1B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAC/B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UACb,aAAY;AAAA,UAEZ;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,kBAAiB;AAAA,kBACjC;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b56a3b702e6eec99855202d1cfe05d2ba4d6a2ce"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qu=function(){return s},s}qu();class HSe extends En.Component{static defaultProps=(qu().s[0]++,{underlayClickExits:!0});onClose=(qu().s[1]++,()=>{qu().f[0]++,qu().s[2]++,document.activeElement?(qu().b[0][0]++,qu().s[3]++,document.activeElement.blur()):qu().b[0][1]++,qu().s[4]++,setTimeout(()=>{qu().f[1]++,qu().s[5]++,this.props.onOpenToggle()},0)});render(){qu().f[2]++;const e=(qu().s[6]++,this.props.t);return qu().s[7]++,this.props.isOpen?(qu().b[1][0]++,qu().s[8]++,te.jsx($Se,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,dialogClass:"maputnik-modal-container",children:te.jsxs("div",{className:c0("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[te.jsxs("header",{className:"maputnik-modal-header",children:[te.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:te.jsx(ide,{})})]}),te.jsx("div",{className:"maputnik-modal-scroller",children:te.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(qu().b[1][1]++,qu().s[9]++,!1)}}const C1=(qu().s[10]++,Fo()(HSe));function hs(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="227136badbf4464e3a73e0852e3bc3d4b9112a08",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAyB;AAChC,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"227136badbf4464e3a73e0852e3bc3d4b9112a08"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hs=function(){return s},s}hs();hs().s[0]++;const DK=n=>{hs().f[0]++;const[e,t]=(hs().s[1]++,En.useState(!1));hs().s[2]++;const i=a=>{hs().f[1]++,hs().s[3]++,t(a),hs().s[4]++,n.onToggleDoc?(hs().b[0][0]++,hs().s[5]++,n.onToggleDoc(a)):hs().b[0][1]++},{label:r,fieldSpec:o}=(hs().s[6]++,n),{doc:s}=(hs().s[7]++,hs().b[1][0]++,o||(hs().b[1][1]++,{}));return hs().s[8]++,s?(hs().b[2][0]++,hs().s[9]++,te.jsx("label",{className:"maputnik-doc-wrapper",children:te.jsxs("div",{className:"maputnik-doc-target",children:[r,"",te.jsx("button",{"aria-label":e?(hs().b[3][0]++,"close property documentation"):(hs().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(hs().b[4][0]++,"open"):(hs().b[4][1]++,"closed")}`,onClick:()=>(hs().f[2]++,hs().s[10]++,i(!e)),"data-wd-key":"field-doc-button-"+r,children:e?(hs().b[5][0]++,te.jsx(jhe,{})):(hs().b[5][1]++,te.jsx(Nhe,{}))})]})})):(hs().b[2][1]++,hs().s[11]++,r?(hs().b[6][0]++,hs().s[12]++,te.jsx("label",{className:"maputnik-doc-wrapper",children:te.jsx("div",{className:"maputnik-doc-target",children:r})})):(hs().b[6][1]++,hs().s[13]++,te.jsx("div",{})))};function ZSe(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const XSe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,JSe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,eEe={};function RG(n,e){return(eEe.jsx?JSe:XSe).test(n)}const tEe=/[ \t\n\f\r]/g;function nEe(n){return typeof n=="object"?n.type==="text"?DG(n.value):!1:DG(n)}function DG(n){return n.replace(tEe,"")===""}class w5{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}w5.prototype.normal={};w5.prototype.property={};w5.prototype.space=void 0;function gie(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new w5(t,i,e)}function BR(n){return n.toLowerCase()}class Rd{constructor(e,t){this.attribute=t,this.property=e}}Rd.prototype.attribute="";Rd.prototype.booleanish=!1;Rd.prototype.boolean=!1;Rd.prototype.commaOrSpaceSeparated=!1;Rd.prototype.commaSeparated=!1;Rd.prototype.defined=!1;Rd.prototype.mustUseProperty=!1;Rd.prototype.number=!1;Rd.prototype.overloadedBoolean=!1;Rd.prototype.property="";Rd.prototype.spaceSeparated=!1;Rd.prototype.space=void 0;let iEe=0;const fo=iC(),Yu=iC(),OR=iC(),Vn=iC(),La=iC(),X_=iC(),Af=iC();function iC(){return 2**++iEe}const IR=Object.freeze(Object.defineProperty({__proto__:null,boolean:fo,booleanish:Yu,commaOrSpaceSeparated:Af,commaSeparated:X_,number:Vn,overloadedBoolean:OR,spaceSeparated:La},Symbol.toStringTag,{value:"Module"})),c8=Object.keys(IR);class PK extends Rd{constructor(e,t,i,r){let o=-1;if(super(e,t),PG(this,"space",r),typeof i=="number")for(;++o<c8.length;){const s=c8[o];PG(this,c8[o],(i&IR[s])===IR[s])}}}PK.prototype.defined=!0;function PG(n,e,t){t&&(n[e]=t)}function qx(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const o=new PK(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,t[BR(i)]=i,t[BR(o.attribute)]=i}return new w5(e,t,n.space)}const yie=qx({properties:{ariaActiveDescendant:null,ariaAtomic:Yu,ariaAutoComplete:null,ariaBusy:Yu,ariaChecked:Yu,ariaColCount:Vn,ariaColIndex:Vn,ariaColSpan:Vn,ariaControls:La,ariaCurrent:null,ariaDescribedBy:La,ariaDetails:null,ariaDisabled:Yu,ariaDropEffect:La,ariaErrorMessage:null,ariaExpanded:Yu,ariaFlowTo:La,ariaGrabbed:Yu,ariaHasPopup:null,ariaHidden:Yu,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:La,ariaLevel:Vn,ariaLive:null,ariaModal:Yu,ariaMultiLine:Yu,ariaMultiSelectable:Yu,ariaOrientation:null,ariaOwns:La,ariaPlaceholder:null,ariaPosInSet:Vn,ariaPressed:Yu,ariaReadOnly:Yu,ariaRelevant:null,ariaRequired:Yu,ariaRoleDescription:La,ariaRowCount:Vn,ariaRowIndex:Vn,ariaRowSpan:Vn,ariaSelected:Yu,ariaSetSize:Vn,ariaSort:null,ariaValueMax:Vn,ariaValueMin:Vn,ariaValueNow:Vn,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function vie(n,e){return e in n?n[e]:e}function bie(n,e){return vie(n,e.toLowerCase())}const rEe=qx({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:X_,acceptCharset:La,accessKey:La,action:null,allow:null,allowFullScreen:fo,allowPaymentRequest:fo,allowUserMedia:fo,alt:null,as:null,async:fo,autoCapitalize:null,autoComplete:La,autoFocus:fo,autoPlay:fo,blocking:La,capture:null,charSet:null,checked:fo,cite:null,className:La,cols:Vn,colSpan:null,content:null,contentEditable:Yu,controls:fo,controlsList:La,coords:Vn|X_,crossOrigin:null,data:null,dateTime:null,decoding:null,default:fo,defer:fo,dir:null,dirName:null,disabled:fo,download:OR,draggable:Yu,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:fo,formTarget:null,headers:La,height:Vn,hidden:OR,high:Vn,href:null,hrefLang:null,htmlFor:La,httpEquiv:La,id:null,imageSizes:null,imageSrcSet:null,inert:fo,inputMode:null,integrity:null,is:null,isMap:fo,itemId:null,itemProp:La,itemRef:La,itemScope:fo,itemType:La,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:fo,low:Vn,manifest:null,max:null,maxLength:Vn,media:null,method:null,min:null,minLength:Vn,multiple:fo,muted:fo,name:null,nonce:null,noModule:fo,noValidate:fo,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:fo,optimum:Vn,pattern:null,ping:La,placeholder:null,playsInline:fo,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:fo,referrerPolicy:null,rel:La,required:fo,reversed:fo,rows:Vn,rowSpan:Vn,sandbox:La,scope:null,scoped:fo,seamless:fo,selected:fo,shadowRootClonable:fo,shadowRootDelegatesFocus:fo,shadowRootMode:null,shape:null,size:Vn,sizes:null,slot:null,span:Vn,spellCheck:Yu,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Vn,step:null,style:null,tabIndex:Vn,target:null,title:null,translate:null,type:null,typeMustMatch:fo,useMap:null,value:Yu,width:Vn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:La,axis:null,background:null,bgColor:null,border:Vn,borderColor:null,bottomMargin:Vn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:fo,declare:fo,event:null,face:null,frame:null,frameBorder:null,hSpace:Vn,leftMargin:Vn,link:null,longDesc:null,lowSrc:null,marginHeight:Vn,marginWidth:Vn,noResize:fo,noHref:fo,noShade:fo,noWrap:fo,object:null,profile:null,prompt:null,rev:null,rightMargin:Vn,rules:null,scheme:null,scrolling:Yu,standby:null,summary:null,text:null,topMargin:Vn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Vn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:fo,disableRemotePlayback:fo,prefix:null,property:null,results:Vn,security:null,unselectable:null},space:"html",transform:bie}),oEe=qx({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Af,accentHeight:Vn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Vn,amplitude:Vn,arabicForm:null,ascent:Vn,attributeName:null,attributeType:null,azimuth:Vn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Vn,by:null,calcMode:null,capHeight:Vn,className:La,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Vn,diffuseConstant:Vn,direction:null,display:null,dur:null,divisor:Vn,dominantBaseline:null,download:fo,dx:null,dy:null,edgeMode:null,editable:null,elevation:Vn,enableBackground:null,end:null,event:null,exponent:Vn,externalResourcesRequired:null,fill:null,fillOpacity:Vn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:X_,g2:X_,glyphName:X_,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Vn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Vn,horizOriginX:Vn,horizOriginY:Vn,id:null,ideographic:Vn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Vn,k:Vn,k1:Vn,k2:Vn,k3:Vn,k4:Vn,kernelMatrix:Af,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Vn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Vn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Vn,overlineThickness:Vn,paintOrder:null,panose1:null,path:null,pathLength:Vn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:La,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Vn,pointsAtY:Vn,pointsAtZ:Vn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Af,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Af,rev:Af,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Af,requiredFeatures:Af,requiredFonts:Af,requiredFormats:Af,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Vn,specularExponent:Vn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Vn,strikethroughThickness:Vn,string:null,stroke:null,strokeDashArray:Af,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Vn,strokeOpacity:Vn,strokeWidth:null,style:null,surfaceScale:Vn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Af,tabIndex:Vn,tableValues:null,target:null,targetX:Vn,targetY:Vn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Af,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Vn,underlineThickness:Vn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Vn,values:null,vAlphabetic:Vn,vMathematical:Vn,vectorEffect:null,vHanging:Vn,vIdeographic:Vn,version:null,vertAdvY:Vn,vertOriginX:Vn,vertOriginY:Vn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Vn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:vie}),Cie=qx({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),_ie=qx({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:bie}),xie=qx({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),sEe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},aEe=/[A-Z]/g,KG=/-[a-z]/g,lEe=/^data[-\w.:]+$/i;function uEe(n,e){const t=BR(e);let i=e,r=Rd;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&lEe.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(KG,AEe);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!KG.test(o)){let s=o.replace(aEe,cEe);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=PK}return new r(i,e)}function cEe(n){return"-"+n.toLowerCase()}function AEe(n){return n.charAt(1).toUpperCase()}const hEe=gie([yie,rEe,Cie,_ie,xie],"html"),KK=gie([yie,oEe,Cie,_ie,xie],"svg");function dEe(n){return n.join(" ").trim()}var WC={},A8,UG;function fEe(){if(UG)return A8;UG=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,h="/",m="*",v="",x="comment",E="declaration";A8=function(P,z){if(typeof P!="string")throw new TypeError("First argument must be a string");if(!P)return[];z=z||{};var Q=1,Y=1;function H(Me){var ke=Me.match(e);ke&&(Q+=ke.length);var je=Me.lastIndexOf(c);Y=~je?Me.length-je:Y+Me.length}function Z(){var Me={line:Q,column:Y};return function(ke){return ke.position=new J(Me),oe(),ke}}function J(Me){this.start=Me,this.end={line:Q,column:Y},this.source=z.source}J.prototype.content=P;function $(Me){var ke=new Error(z.source+":"+Q+":"+Y+": "+Me);if(ke.reason=Me,ke.filename=z.source,ke.line=Q,ke.column=Y,ke.source=P,!z.silent)throw ke}function G(Me){var ke=Me.exec(P);if(ke){var je=ke[0];return H(je),P=P.slice(je.length),ke}}function oe(){G(t)}function ue(Me){var ke;for(Me=Me||[];ke=xe();)ke!==!1&&Me.push(ke);return Me}function xe(){var Me=Z();if(!(h!=P.charAt(0)||m!=P.charAt(1))){for(var ke=2;v!=P.charAt(ke)&&(m!=P.charAt(ke)||h!=P.charAt(ke+1));)++ke;if(ke+=2,v===P.charAt(ke-1))return $("End of comment missing");var je=P.slice(2,ke-2);return Y+=2,H(je),P=P.slice(ke),Y+=2,Me({type:x,comment:je})}}function ge(){var Me=Z(),ke=G(i);if(ke){if(xe(),!G(r))return $("property missing ':'");var je=G(o),Be=Me({type:E,property:R(ke[0].replace(n,v)),value:je?R(je[0].replace(n,v)):v});return G(s),Be}}function Ie(){var Me=[];ue(Me);for(var ke;ke=ge();)ke!==!1&&(Me.push(ke),ue(Me));return Me}return oe(),Ie()};function R(P){return P?P.replace(a,v):v}return A8}var LG;function pEe(){if(LG)return WC;LG=1;var n=WC&&WC.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(WC,"__esModule",{value:!0}),WC.default=t;const e=n(fEe());function t(i,r){let o=null;if(!i||typeof i!="string")return o;const s=(0,e.default)(i),a=typeof r=="function";return s.forEach(c=>{if(c.type!=="declaration")return;const{property:h,value:m}=c;a?r(h,m,c):m&&(o=o||{},o[h]=m)}),o}return WC}var x2={},zG;function mEe(){if(zG)return x2;zG=1,Object.defineProperty(x2,"__esModule",{value:!0}),x2.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,o=function(h){return!h||t.test(h)||n.test(h)},s=function(h,m){return m.toUpperCase()},a=function(h,m){return"".concat(m,"-")},c=function(h,m){return m===void 0&&(m={}),o(h)?h:(h=h.toLowerCase(),m.reactCompat?h=h.replace(r,a):h=h.replace(i,a),h.replace(e,s))};return x2.camelCase=c,x2}var M2,FG;function gEe(){if(FG)return M2;FG=1;var n=M2&&M2.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(pEe()),t=mEe();function i(r,o){var s={};return!r||typeof r!="string"||(0,e.default)(r,function(a,c){a&&c&&(s[(0,t.camelCase)(a,o)]=c)}),s}return i.default=i,M2=i,M2}var yEe=gEe();const vEe=Su(yEe),Mie=wie("end"),UK=wie("start");function wie(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function bEe(n){const e=UK(n),t=Mie(n);if(e&&t)return{start:e,end:t}}function x3(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?jG(n.position):"start"in n||"end"in n?jG(n):"line"in n||"column"in n?kR(n):""}function kR(n){return NG(n&&n.line)+":"+NG(n&&n.column)}function jG(n){return kR(n&&n.start)+"-"+kR(n&&n.end)}function NG(n){return n&&typeof n=="number"?n:1}class HA extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",o={},s=!1;if(t&&("line"in t&&"column"in t?o={place:t}:"start"in t&&"end"in t?o={place:t}:"type"in t?o={ancestors:[t],place:t.position}:o={...t}),typeof e=="string"?r=e:!o.cause&&e&&(s=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?o.ruleId=i:(o.source=i.slice(0,c),o.ruleId=i.slice(c+1))}if(!o.place&&o.ancestors&&o.ancestors){const c=o.ancestors[o.ancestors.length-1];c&&(o.place=c.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=x3(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}HA.prototype.file="";HA.prototype.name="";HA.prototype.reason="";HA.prototype.message="";HA.prototype.stack="";HA.prototype.column=void 0;HA.prototype.line=void 0;HA.prototype.ancestors=void 0;HA.prototype.cause=void 0;HA.prototype.fatal=void 0;HA.prototype.place=void 0;HA.prototype.ruleId=void 0;HA.prototype.source=void 0;const LK={}.hasOwnProperty,CEe=new Map,_Ee=/[A-Z]/g,xEe=new Set(["table","tbody","thead","tfoot","tr"]),MEe=new Set(["td","th"]),Sie="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function wEe(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=REe(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=TEe(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?KK:hEe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=Eie(r,n,void 0);return o&&typeof o!="string"?o:r.create(n,r.Fragment,{children:o||void 0},void 0)}function Eie(n,e,t){if(e.type==="element")return SEe(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return EEe(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return OEe(n,e,t);if(e.type==="mdxjsEsm")return BEe(n,e);if(e.type==="root")return IEe(n,e,t);if(e.type==="text")return kEe(n,e)}function SEe(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=KK,n.schema=r),n.ancestors.push(e);const o=Oie(n,e.tagName,!1),s=DEe(n,e);let a=FK(n,e);return xEe.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!nEe(c):!0})),Bie(n,s,o,e),zK(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function EEe(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}S4(n,e.position)}function BEe(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);S4(n,e.position)}function OEe(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=KK,n.schema=r),n.ancestors.push(e);const o=e.name===null?n.Fragment:Oie(n,e.name,!0),s=PEe(n,e),a=FK(n,e);return Bie(n,s,o,e),zK(s,a),n.ancestors.pop(),n.schema=i,n.create(e,o,s,t)}function IEe(n,e,t){const i={};return zK(i,FK(n,e)),n.create(e,n.Fragment,i,t)}function kEe(n,e){return e.value}function Bie(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function zK(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function TEe(n,e,t){return i;function i(r,o,s,a){const h=Array.isArray(s.children)?t:e;return a?h(o,s,a):h(o,s)}}function REe(n,e){return t;function t(i,r,o,s){const a=Array.isArray(o.children),c=UK(i);return e(r,o,s,a,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function DEe(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&LK.call(e.properties,r)){const o=KEe(n,r,e.properties[r]);if(o){const[s,a]=o;n.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&MEe.has(e.tagName)?i=a:t[s]=a}}if(i){const o=t.style||(t.style={});o[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function PEe(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const o=i.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(t,n.evaluater.evaluateExpression(a.argument))}else S4(n,e.position);else{const r=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const a=i.value.data.estree.body[0];a.type,o=n.evaluater.evaluateExpression(a.expression)}else S4(n,e.position);else o=i.value===null?!0:i.value;t[r]=o}return t}function FK(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:CEe;for(;++i<e.children.length;){const o=e.children[i];let s;if(n.passKeys){const c=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(c){const h=r.get(c)||0;s=c+"-"+h,r.set(c,h+1)}}const a=Eie(n,o,s);a!==void 0&&t.push(a)}return t}function KEe(n,e,t){const i=uEe(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?ZSe(t):dEe(t)),i.property==="style"){let r=typeof t=="object"?t:UEe(n,String(t));return n.stylePropertyNameCase==="css"&&(r=LEe(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?sEe[i.property]||i.property:i.attribute,t]}}function UEe(n,e){try{return vEe(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new HA("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=Sie+"#cannot-parse-style-attribute",r}}function Oie(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let o=-1,s;for(;++o<r.length;){const a=RG(r[o])?{type:"Identifier",name:r[o]}:{type:"Literal",value:r[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}i=s}else i=RG(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return LK.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);S4(n)}function S4(n,e){const t=new HA("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=Sie+"#cannot-handle-mdx-estrees-without-createevaluater",t}function LEe(n){const e={};let t;for(t in n)LK.call(n,t)&&(e[zEe(t)]=n[t]);return e}function zEe(n){let e=n.replace(_Ee,FEe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function FEe(n){return"-"+n.toLowerCase()}const h8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},jEe={};function NEe(n,e){const t=jEe,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return Iie(n,i,r)}function Iie(n,e,t){if(GEe(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return GG(n.children,e,t)}return Array.isArray(n)?GG(n,e,t):""}function GG(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=Iie(n[r],e,t);return i.join("")}function GEe(n){return!!(n&&typeof n=="object")}const QG=document.createElement("i");function jK(n){const e="&"+n+";";QG.innerHTML=e;const t=QG.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function s0(n,e,t,i){const r=n.length;let o=0,s;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)s=Array.from(i),s.unshift(e,t),n.splice(...s);else for(t&&n.splice(e,t);o<i.length;)s=i.slice(o,o+1e4),s.unshift(e,0),n.splice(...s),o+=1e4,e+=1e4}function lp(n,e){return n.length>0?(s0(n,n.length,0,e),n):e}const WG={}.hasOwnProperty;function QEe(n){const e={};let t=-1;for(;++t<n.length;)WEe(e,n[t]);return e}function WEe(n,e){let t;for(t in e){const r=(WG.call(n,t)?n[t]:void 0)||(n[t]={}),o=e[t];let s;if(o)for(s in o){WG.call(r,s)||(r[s]=[]);const a=o[s];qEe(r[s],Array.isArray(a)?a:a?[a]:[])}}}function qEe(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);s0(n,0,0,i)}function kie(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function J_(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ug=fv(/[A-Za-z]/),xf=fv(/[\dA-Za-z]/),YEe=fv(/[#-'*+\--9=?A-Z^-~]/);function TR(n){return n!==null&&(n<32||n===127)}const RR=fv(/\d/),VEe=fv(/[\dA-Fa-f]/),$Ee=fv(/[!-/:-@[-`{-~]/);function Ur(n){return n!==null&&n<-2}function Bd(n){return n!==null&&(n<0||n===32)}function Ps(n){return n===-2||n===-1||n===32}const HEe=fv(new RegExp("\\p{P}|\\p{S}","u")),ZEe=fv(/\s/);function fv(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Yx(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const o=n.charCodeAt(t);let s="";if(o===37&&xf(n.charCodeAt(t+1))&&xf(n.charCodeAt(t+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=n.charCodeAt(t+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),r=1):s=""}else s=String.fromCharCode(o);s&&(e.push(n.slice(i,t),encodeURIComponent(s)),i=t+r+1,s=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function za(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(c){return Ps(c)?(n.enter(t),a(c)):e(c)}function a(c){return Ps(c)&&o++<r?(n.consume(c),a):(n.exit(t),e(c))}}const XEe={tokenize:JEe};function JEe(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),za(n,e,"linePrefix")}function r(a){return n.enter("paragraph"),o(a)}function o(a){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,s(a)}function s(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return Ur(a)?(n.consume(a),n.exit("chunkText"),o):(n.consume(a),s)}}const e6e={tokenize:t6e},qG={tokenize:n6e};function t6e(n){const e=this,t=[];let i=0,r,o,s;return a;function a(H){if(i<t.length){const Z=t[i];return e.containerState=Z[1],n.attempt(Z[0].continuation,c,h)(H)}return h(H)}function c(H){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&Y();const Z=e.events.length;let J=Z,$;for(;J--;)if(e.events[J][0]==="exit"&&e.events[J][1].type==="chunkFlow"){$=e.events[J][1].end;break}Q(i);let G=Z;for(;G<e.events.length;)e.events[G][1].end={...$},G++;return s0(e.events,J+1,0,e.events.slice(Z)),e.events.length=G,h(H)}return a(H)}function h(H){if(i===t.length){if(!r)return x(H);if(r.currentConstruct&&r.currentConstruct.concrete)return R(H);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(qG,m,v)(H)}function m(H){return r&&Y(),Q(i),x(H)}function v(H){return e.parser.lazy[e.now().line]=i!==t.length,s=e.now().offset,R(H)}function x(H){return e.containerState={},n.attempt(qG,E,R)(H)}function E(H){return i++,t.push([e.currentConstruct,e.containerState]),x(H)}function R(H){if(H===null){r&&Y(),Q(0),n.consume(H);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:o}),P(H)}function P(H){if(H===null){z(n.exit("chunkFlow"),!0),Q(0),n.consume(H);return}return Ur(H)?(n.consume(H),z(n.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(n.consume(H),P)}function z(H,Z){const J=e.sliceStream(H);if(Z&&J.push(null),H.previous=o,o&&(o.next=H),o=H,r.defineSkip(H.start),r.write(J),e.parser.lazy[H.start.line]){let $=r.events.length;for(;$--;)if(r.events[$][1].start.offset<s&&(!r.events[$][1].end||r.events[$][1].end.offset>s))return;const G=e.events.length;let oe=G,ue,xe;for(;oe--;)if(e.events[oe][0]==="exit"&&e.events[oe][1].type==="chunkFlow"){if(ue){xe=e.events[oe][1].end;break}ue=!0}for(Q(i),$=G;$<e.events.length;)e.events[$][1].end={...xe},$++;s0(e.events,oe+1,0,e.events.slice(G)),e.events.length=$}}function Q(H){let Z=t.length;for(;Z-- >H;){const J=t[Z];e.containerState=J[1],J[0].exit.call(e,n)}t.length=H}function Y(){r.write([null]),o=void 0,r=void 0,e.containerState._closeFlow=void 0}}function n6e(n,e,t){return za(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function YG(n){if(n===null||Bd(n)||ZEe(n))return 1;if(HEe(n))return 2}function NK(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const o=n[r].resolveAll;o&&!i.includes(o)&&(e=o(e,t),i.push(o))}return e}const DR={name:"attention",resolveAll:i6e,tokenize:r6e};function i6e(n,e){let t=-1,i,r,o,s,a,c,h,m;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const v={...n[i][1].end},x={...n[t][1].start};VG(v,-c),VG(x,c),s={type:c>1?"strongSequence":"emphasisSequence",start:v,end:{...n[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:x},o={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:c>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},n[i][1].end={...s.start},n[t][1].start={...a.end},h=[],n[i][1].end.offset-n[i][1].start.offset&&(h=lp(h,[["enter",n[i][1],e],["exit",n[i][1],e]])),h=lp(h,[["enter",r,e],["enter",s,e],["exit",s,e],["enter",o,e]]),h=lp(h,NK(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),h=lp(h,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(m=2,h=lp(h,[["enter",n[t][1],e],["exit",n[t][1],e]])):m=0,s0(n,i-1,t-i+3,h),t=i+h.length-m-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function r6e(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=YG(i);let o;return s;function s(c){return o=c,n.enter("attentionSequence"),a(c)}function a(c){if(c===o)return n.consume(c),a;const h=n.exit("attentionSequence"),m=YG(c),v=!m||m===2&&r||t.includes(c),x=!r||r===2&&m||t.includes(i);return h._open=!!(o===42?v:v&&(r||!x)),h._close=!!(o===42?x:x&&(m||!v)),e(c)}}function VG(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const o6e={name:"autolink",tokenize:s6e};function s6e(n,e,t){let i=0;return r;function r(E){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(E),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(E){return Ug(E)?(n.consume(E),s):E===64?t(E):h(E)}function s(E){return E===43||E===45||E===46||xf(E)?(i=1,a(E)):h(E)}function a(E){return E===58?(n.consume(E),i=0,c):(E===43||E===45||E===46||xf(E))&&i++<32?(n.consume(E),a):(i=0,h(E))}function c(E){return E===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(E),n.exit("autolinkMarker"),n.exit("autolink"),e):E===null||E===32||E===60||TR(E)?t(E):(n.consume(E),c)}function h(E){return E===64?(n.consume(E),m):YEe(E)?(n.consume(E),h):t(E)}function m(E){return xf(E)?v(E):t(E)}function v(E){return E===46?(n.consume(E),i=0,m):E===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(E),n.exit("autolinkMarker"),n.exit("autolink"),e):x(E)}function x(E){if((E===45||xf(E))&&i++<63){const R=E===45?x:v;return n.consume(E),R}return t(E)}}const M6={partial:!0,tokenize:a6e};function a6e(n,e,t){return i;function i(o){return Ps(o)?za(n,r,"linePrefix")(o):r(o)}function r(o){return o===null||Ur(o)?e(o):t(o)}}const Tie={continuation:{tokenize:u6e},exit:c6e,name:"blockQuote",tokenize:l6e};function l6e(n,e,t){const i=this;return r;function r(s){if(s===62){const a=i.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(s),n.exit("blockQuoteMarker"),o}return t(s)}function o(s){return Ps(s)?(n.enter("blockQuotePrefixWhitespace"),n.consume(s),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(s))}}function u6e(n,e,t){const i=this;return r;function r(s){return Ps(s)?za(n,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return n.attempt(Tie,e,t)(s)}}function c6e(n){n.exit("blockQuote")}const Rie={name:"characterEscape",tokenize:A6e};function A6e(n,e,t){return i;function i(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),r}function r(o){return $Ee(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(o)}}const Die={name:"characterReference",tokenize:h6e};function h6e(n,e,t){const i=this;let r=0,o,s;return a;function a(v){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),c}function c(v){return v===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(v),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),o=31,s=xf,m(v))}function h(v){return v===88||v===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(v),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,s=VEe,m):(n.enter("characterReferenceValue"),o=7,s=RR,m(v))}function m(v){if(v===59&&r){const x=n.exit("characterReferenceValue");return s===xf&&!jK(i.sliceSerialize(x))?t(v):(n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return s(v)&&r++<o?(n.consume(v),m):t(v)}}const $G={partial:!0,tokenize:f6e},HG={concrete:!0,name:"codeFenced",tokenize:d6e};function d6e(n,e,t){const i=this,r={partial:!0,tokenize:J};let o=0,s=0,a;return c;function c($){return h($)}function h($){const G=i.events[i.events.length-1];return o=G&&G[1].type==="linePrefix"?G[2].sliceSerialize(G[1],!0).length:0,a=$,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),m($)}function m($){return $===a?(s++,n.consume($),m):s<3?t($):(n.exit("codeFencedFenceSequence"),Ps($)?za(n,v,"whitespace")($):v($))}function v($){return $===null||Ur($)?(n.exit("codeFencedFence"),i.interrupt?e($):n.check($G,P,Z)($)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),x($))}function x($){return $===null||Ur($)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),v($)):Ps($)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),za(n,E,"whitespace")($)):$===96&&$===a?t($):(n.consume($),x)}function E($){return $===null||Ur($)?v($):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),R($))}function R($){return $===null||Ur($)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),v($)):$===96&&$===a?t($):(n.consume($),R)}function P($){return n.attempt(r,Z,z)($)}function z($){return n.enter("lineEnding"),n.consume($),n.exit("lineEnding"),Q}function Q($){return o>0&&Ps($)?za(n,Y,"linePrefix",o+1)($):Y($)}function Y($){return $===null||Ur($)?n.check($G,P,Z)($):(n.enter("codeFlowValue"),H($))}function H($){return $===null||Ur($)?(n.exit("codeFlowValue"),Y($)):(n.consume($),H)}function Z($){return n.exit("codeFenced"),e($)}function J($,G,oe){let ue=0;return xe;function xe(je){return $.enter("lineEnding"),$.consume(je),$.exit("lineEnding"),ge}function ge(je){return $.enter("codeFencedFence"),Ps(je)?za($,Ie,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(je):Ie(je)}function Ie(je){return je===a?($.enter("codeFencedFenceSequence"),Me(je)):oe(je)}function Me(je){return je===a?(ue++,$.consume(je),Me):ue>=s?($.exit("codeFencedFenceSequence"),Ps(je)?za($,ke,"whitespace")(je):ke(je)):oe(je)}function ke(je){return je===null||Ur(je)?($.exit("codeFencedFence"),G(je)):oe(je)}}}function f6e(n,e,t){const i=this;return r;function r(s){return s===null?t(s):(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}const d8={name:"codeIndented",tokenize:m6e},p6e={partial:!0,tokenize:g6e};function m6e(n,e,t){const i=this;return r;function r(h){return n.enter("codeIndented"),za(n,o,"linePrefix",5)(h)}function o(h){const m=i.events[i.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?s(h):t(h)}function s(h){return h===null?c(h):Ur(h)?n.attempt(p6e,s,c)(h):(n.enter("codeFlowValue"),a(h))}function a(h){return h===null||Ur(h)?(n.exit("codeFlowValue"),s(h)):(n.consume(h),a)}function c(h){return n.exit("codeIndented"),e(h)}}function g6e(n,e,t){const i=this;return r;function r(s){return i.parser.lazy[i.now().line]?t(s):Ur(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),r):za(n,o,"linePrefix",5)(s)}function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):Ur(s)?r(s):t(s)}}const y6e={name:"codeText",previous:b6e,resolve:v6e,tokenize:C6e};function v6e(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function b6e(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function C6e(n,e,t){let i=0,r,o;return s;function s(v){return n.enter("codeText"),n.enter("codeTextSequence"),a(v)}function a(v){return v===96?(n.consume(v),i++,a):(n.exit("codeTextSequence"),c(v))}function c(v){return v===null?t(v):v===32?(n.enter("space"),n.consume(v),n.exit("space"),c):v===96?(o=n.enter("codeTextSequence"),r=0,m(v)):Ur(v)?(n.enter("lineEnding"),n.consume(v),n.exit("lineEnding"),c):(n.enter("codeTextData"),h(v))}function h(v){return v===null||v===32||v===96||Ur(v)?(n.exit("codeTextData"),c(v)):(n.consume(v),h)}function m(v){return v===96?(n.consume(v),r++,m):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(v)):(o.type="codeTextData",h(v))}}class _6e{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&w2(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),w2(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),w2(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);w2(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);w2(this.left,t.reverse())}}}function w2(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function Pie(n){const e={};let t=-1,i,r,o,s,a,c,h;const m=new _6e(n);for(;++t<m.length;){for(;t in e;)t=e[t];if(i=m.get(t),t&&i[1].type==="chunkFlow"&&m.get(t-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,o=0,o<c.length&&c[o][1].type==="lineEndingBlank"&&(o+=2),o<c.length&&c[o][1].type==="content"))for(;++o<c.length&&c[o][1].type!=="content";)c[o][1].type==="chunkText"&&(c[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,x6e(m,t)),t=e[t],h=!0);else if(i[1]._container){for(o=t,r=void 0;o--;)if(s=m.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(r&&(m.get(r)[1].type="lineEndingBlank"),s[1].type="lineEnding",r=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;r&&(i[1].end={...m.get(r)[1].start},a=m.slice(r,t),a.unshift(i),m.splice(r,t-r+1,a))}}return s0(n,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function x6e(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const o=[];let s=t._tokenizer;s||(s=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,c=[],h={};let m,v,x=-1,E=t,R=0,P=0;const z=[P];for(;E;){for(;n.get(++r)[1]!==E;);o.push(r),E._tokenizer||(m=i.sliceStream(E),E.next||m.push(null),v&&s.defineSkip(E.start),E._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(m),E._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),v=E,E=E.next}for(E=t;++x<a.length;)a[x][0]==="exit"&&a[x-1][0]==="enter"&&a[x][1].type===a[x-1][1].type&&a[x][1].start.line!==a[x][1].end.line&&(P=x+1,z.push(P),E._tokenizer=void 0,E.previous=void 0,E=E.next);for(s.events=[],E?(E._tokenizer=void 0,E.previous=void 0):z.pop(),x=z.length;x--;){const Q=a.slice(z[x],z[x+1]),Y=o.pop();c.push([Y,Y+Q.length-1]),n.splice(Y,2,Q)}for(c.reverse(),x=-1;++x<c.length;)h[R+c[x][0]]=R+c[x][1],R+=c[x][1]-c[x][0]-1;return h}const M6e={resolve:S6e,tokenize:E6e},w6e={partial:!0,tokenize:B6e};function S6e(n){return Pie(n),n}function E6e(n,e){let t;return i;function i(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?o(a):Ur(a)?n.check(w6e,s,o)(a):(n.consume(a),r)}function o(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function s(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function B6e(n,e,t){const i=this;return r;function r(s){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),za(n,o,"linePrefix")}function o(s){if(s===null||Ur(s))return t(s);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):n.interrupt(i.parser.constructs.flow,t,e)(s)}}function Kie(n,e,t,i,r,o,s,a,c){const h=c||Number.POSITIVE_INFINITY;let m=0;return v;function v(Q){return Q===60?(n.enter(i),n.enter(r),n.enter(o),n.consume(Q),n.exit(o),x):Q===null||Q===32||Q===41||TR(Q)?t(Q):(n.enter(i),n.enter(s),n.enter(a),n.enter("chunkString",{contentType:"string"}),P(Q))}function x(Q){return Q===62?(n.enter(o),n.consume(Q),n.exit(o),n.exit(r),n.exit(i),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),E(Q))}function E(Q){return Q===62?(n.exit("chunkString"),n.exit(a),x(Q)):Q===null||Q===60||Ur(Q)?t(Q):(n.consume(Q),Q===92?R:E)}function R(Q){return Q===60||Q===62||Q===92?(n.consume(Q),E):E(Q)}function P(Q){return!m&&(Q===null||Q===41||Bd(Q))?(n.exit("chunkString"),n.exit(a),n.exit(s),n.exit(i),e(Q)):m<h&&Q===40?(n.consume(Q),m++,P):Q===41?(n.consume(Q),m--,P):Q===null||Q===32||Q===40||TR(Q)?t(Q):(n.consume(Q),Q===92?z:P)}function z(Q){return Q===40||Q===41||Q===92?(n.consume(Q),P):P(Q)}}function Uie(n,e,t,i,r,o){const s=this;let a=0,c;return h;function h(E){return n.enter(i),n.enter(r),n.consume(E),n.exit(r),n.enter(o),m}function m(E){return a>999||E===null||E===91||E===93&&!c||E===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?t(E):E===93?(n.exit(o),n.enter(r),n.consume(E),n.exit(r),n.exit(i),e):Ur(E)?(n.enter("lineEnding"),n.consume(E),n.exit("lineEnding"),m):(n.enter("chunkString",{contentType:"string"}),v(E))}function v(E){return E===null||E===91||E===93||Ur(E)||a++>999?(n.exit("chunkString"),m(E)):(n.consume(E),c||(c=!Ps(E)),E===92?x:v)}function x(E){return E===91||E===92||E===93?(n.consume(E),a++,v):v(E)}}function Lie(n,e,t,i,r,o){let s;return a;function a(x){return x===34||x===39||x===40?(n.enter(i),n.enter(r),n.consume(x),n.exit(r),s=x===40?41:x,c):t(x)}function c(x){return x===s?(n.enter(r),n.consume(x),n.exit(r),n.exit(i),e):(n.enter(o),h(x))}function h(x){return x===s?(n.exit(o),c(s)):x===null?t(x):Ur(x)?(n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),za(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===s||x===null||Ur(x)?(n.exit("chunkString"),h(x)):(n.consume(x),x===92?v:m)}function v(x){return x===s||x===92?(n.consume(x),m):m(x)}}function M3(n,e){let t;return i;function i(r){return Ur(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):Ps(r)?za(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const O6e={name:"definition",tokenize:k6e},I6e={partial:!0,tokenize:T6e};function k6e(n,e,t){const i=this;let r;return o;function o(E){return n.enter("definition"),s(E)}function s(E){return Uie.call(i,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(E)}function a(E){return r=J_(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),E===58?(n.enter("definitionMarker"),n.consume(E),n.exit("definitionMarker"),c):t(E)}function c(E){return Bd(E)?M3(n,h)(E):h(E)}function h(E){return Kie(n,m,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(E)}function m(E){return n.attempt(I6e,v,v)(E)}function v(E){return Ps(E)?za(n,x,"whitespace")(E):x(E)}function x(E){return E===null||Ur(E)?(n.exit("definition"),i.parser.defined.push(r),e(E)):t(E)}}function T6e(n,e,t){return i;function i(a){return Bd(a)?M3(n,r)(a):t(a)}function r(a){return Lie(n,o,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Ps(a)?za(n,s,"whitespace")(a):s(a)}function s(a){return a===null||Ur(a)?e(a):t(a)}}const R6e={name:"hardBreakEscape",tokenize:D6e};function D6e(n,e,t){return i;function i(o){return n.enter("hardBreakEscape"),n.consume(o),r}function r(o){return Ur(o)?(n.exit("hardBreakEscape"),e(o)):t(o)}}const P6e={name:"headingAtx",resolve:K6e,tokenize:U6e};function K6e(n,e){let t=n.length-2,i=3,r,o;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},o={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},s0(n,i,t-i+1,[["enter",r,e],["enter",o,e],["exit",o,e],["exit",r,e]])),n}function U6e(n,e,t){let i=0;return r;function r(m){return n.enter("atxHeading"),o(m)}function o(m){return n.enter("atxHeadingSequence"),s(m)}function s(m){return m===35&&i++<6?(n.consume(m),s):m===null||Bd(m)?(n.exit("atxHeadingSequence"),a(m)):t(m)}function a(m){return m===35?(n.enter("atxHeadingSequence"),c(m)):m===null||Ur(m)?(n.exit("atxHeading"),e(m)):Ps(m)?za(n,a,"whitespace")(m):(n.enter("atxHeadingText"),h(m))}function c(m){return m===35?(n.consume(m),c):(n.exit("atxHeadingSequence"),a(m))}function h(m){return m===null||m===35||Bd(m)?(n.exit("atxHeadingText"),a(m)):(n.consume(m),h)}}const L6e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ZG=["pre","script","style","textarea"],z6e={concrete:!0,name:"htmlFlow",resolveTo:N6e,tokenize:G6e},F6e={partial:!0,tokenize:W6e},j6e={partial:!0,tokenize:Q6e};function N6e(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function G6e(n,e,t){const i=this;let r,o,s,a,c;return h;function h(Te){return m(Te)}function m(Te){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(Te),v}function v(Te){return Te===33?(n.consume(Te),x):Te===47?(n.consume(Te),o=!0,P):Te===63?(n.consume(Te),r=3,i.interrupt?e:Le):Ug(Te)?(n.consume(Te),s=String.fromCharCode(Te),z):t(Te)}function x(Te){return Te===45?(n.consume(Te),r=2,E):Te===91?(n.consume(Te),r=5,a=0,R):Ug(Te)?(n.consume(Te),r=4,i.interrupt?e:Le):t(Te)}function E(Te){return Te===45?(n.consume(Te),i.interrupt?e:Le):t(Te)}function R(Te){const xt="CDATA[";return Te===xt.charCodeAt(a++)?(n.consume(Te),a===xt.length?i.interrupt?e:Ie:R):t(Te)}function P(Te){return Ug(Te)?(n.consume(Te),s=String.fromCharCode(Te),z):t(Te)}function z(Te){if(Te===null||Te===47||Te===62||Bd(Te)){const xt=Te===47,st=s.toLowerCase();return!xt&&!o&&ZG.includes(st)?(r=1,i.interrupt?e(Te):Ie(Te)):L6e.includes(s.toLowerCase())?(r=6,xt?(n.consume(Te),Q):i.interrupt?e(Te):Ie(Te)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(Te):o?Y(Te):H(Te))}return Te===45||xf(Te)?(n.consume(Te),s+=String.fromCharCode(Te),z):t(Te)}function Q(Te){return Te===62?(n.consume(Te),i.interrupt?e:Ie):t(Te)}function Y(Te){return Ps(Te)?(n.consume(Te),Y):xe(Te)}function H(Te){return Te===47?(n.consume(Te),xe):Te===58||Te===95||Ug(Te)?(n.consume(Te),Z):Ps(Te)?(n.consume(Te),H):xe(Te)}function Z(Te){return Te===45||Te===46||Te===58||Te===95||xf(Te)?(n.consume(Te),Z):J(Te)}function J(Te){return Te===61?(n.consume(Te),$):Ps(Te)?(n.consume(Te),J):H(Te)}function $(Te){return Te===null||Te===60||Te===61||Te===62||Te===96?t(Te):Te===34||Te===39?(n.consume(Te),c=Te,G):Ps(Te)?(n.consume(Te),$):oe(Te)}function G(Te){return Te===c?(n.consume(Te),c=null,ue):Te===null||Ur(Te)?t(Te):(n.consume(Te),G)}function oe(Te){return Te===null||Te===34||Te===39||Te===47||Te===60||Te===61||Te===62||Te===96||Bd(Te)?J(Te):(n.consume(Te),oe)}function ue(Te){return Te===47||Te===62||Ps(Te)?H(Te):t(Te)}function xe(Te){return Te===62?(n.consume(Te),ge):t(Te)}function ge(Te){return Te===null||Ur(Te)?Ie(Te):Ps(Te)?(n.consume(Te),ge):t(Te)}function Ie(Te){return Te===45&&r===2?(n.consume(Te),Be):Te===60&&r===1?(n.consume(Te),Ye):Te===62&&r===4?(n.consume(Te),De):Te===63&&r===3?(n.consume(Te),Le):Te===93&&r===5?(n.consume(Te),yt):Ur(Te)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(F6e,Ge,Me)(Te)):Te===null||Ur(Te)?(n.exit("htmlFlowData"),Me(Te)):(n.consume(Te),Ie)}function Me(Te){return n.check(j6e,ke,Ge)(Te)}function ke(Te){return n.enter("lineEnding"),n.consume(Te),n.exit("lineEnding"),je}function je(Te){return Te===null||Ur(Te)?Me(Te):(n.enter("htmlFlowData"),Ie(Te))}function Be(Te){return Te===45?(n.consume(Te),Le):Ie(Te)}function Ye(Te){return Te===47?(n.consume(Te),s="",At):Ie(Te)}function At(Te){if(Te===62){const xt=s.toLowerCase();return ZG.includes(xt)?(n.consume(Te),De):Ie(Te)}return Ug(Te)&&s.length<8?(n.consume(Te),s+=String.fromCharCode(Te),At):Ie(Te)}function yt(Te){return Te===93?(n.consume(Te),Le):Ie(Te)}function Le(Te){return Te===62?(n.consume(Te),De):Te===45&&r===2?(n.consume(Te),Le):Ie(Te)}function De(Te){return Te===null||Ur(Te)?(n.exit("htmlFlowData"),Ge(Te)):(n.consume(Te),De)}function Ge(Te){return n.exit("htmlFlow"),e(Te)}}function Q6e(n,e,t){const i=this;return r;function r(s){return Ur(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o):t(s)}function o(s){return i.parser.lazy[i.now().line]?t(s):e(s)}}function W6e(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(M6,e,t)}}const q6e={name:"htmlText",tokenize:Y6e};function Y6e(n,e,t){const i=this;let r,o,s;return a;function a(Le){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(Le),c}function c(Le){return Le===33?(n.consume(Le),h):Le===47?(n.consume(Le),J):Le===63?(n.consume(Le),H):Ug(Le)?(n.consume(Le),oe):t(Le)}function h(Le){return Le===45?(n.consume(Le),m):Le===91?(n.consume(Le),o=0,R):Ug(Le)?(n.consume(Le),Y):t(Le)}function m(Le){return Le===45?(n.consume(Le),E):t(Le)}function v(Le){return Le===null?t(Le):Le===45?(n.consume(Le),x):Ur(Le)?(s=v,Ye(Le)):(n.consume(Le),v)}function x(Le){return Le===45?(n.consume(Le),E):v(Le)}function E(Le){return Le===62?Be(Le):Le===45?x(Le):v(Le)}function R(Le){const De="CDATA[";return Le===De.charCodeAt(o++)?(n.consume(Le),o===De.length?P:R):t(Le)}function P(Le){return Le===null?t(Le):Le===93?(n.consume(Le),z):Ur(Le)?(s=P,Ye(Le)):(n.consume(Le),P)}function z(Le){return Le===93?(n.consume(Le),Q):P(Le)}function Q(Le){return Le===62?Be(Le):Le===93?(n.consume(Le),Q):P(Le)}function Y(Le){return Le===null||Le===62?Be(Le):Ur(Le)?(s=Y,Ye(Le)):(n.consume(Le),Y)}function H(Le){return Le===null?t(Le):Le===63?(n.consume(Le),Z):Ur(Le)?(s=H,Ye(Le)):(n.consume(Le),H)}function Z(Le){return Le===62?Be(Le):H(Le)}function J(Le){return Ug(Le)?(n.consume(Le),$):t(Le)}function $(Le){return Le===45||xf(Le)?(n.consume(Le),$):G(Le)}function G(Le){return Ur(Le)?(s=G,Ye(Le)):Ps(Le)?(n.consume(Le),G):Be(Le)}function oe(Le){return Le===45||xf(Le)?(n.consume(Le),oe):Le===47||Le===62||Bd(Le)?ue(Le):t(Le)}function ue(Le){return Le===47?(n.consume(Le),Be):Le===58||Le===95||Ug(Le)?(n.consume(Le),xe):Ur(Le)?(s=ue,Ye(Le)):Ps(Le)?(n.consume(Le),ue):Be(Le)}function xe(Le){return Le===45||Le===46||Le===58||Le===95||xf(Le)?(n.consume(Le),xe):ge(Le)}function ge(Le){return Le===61?(n.consume(Le),Ie):Ur(Le)?(s=ge,Ye(Le)):Ps(Le)?(n.consume(Le),ge):ue(Le)}function Ie(Le){return Le===null||Le===60||Le===61||Le===62||Le===96?t(Le):Le===34||Le===39?(n.consume(Le),r=Le,Me):Ur(Le)?(s=Ie,Ye(Le)):Ps(Le)?(n.consume(Le),Ie):(n.consume(Le),ke)}function Me(Le){return Le===r?(n.consume(Le),r=void 0,je):Le===null?t(Le):Ur(Le)?(s=Me,Ye(Le)):(n.consume(Le),Me)}function ke(Le){return Le===null||Le===34||Le===39||Le===60||Le===61||Le===96?t(Le):Le===47||Le===62||Bd(Le)?ue(Le):(n.consume(Le),ke)}function je(Le){return Le===47||Le===62||Bd(Le)?ue(Le):t(Le)}function Be(Le){return Le===62?(n.consume(Le),n.exit("htmlTextData"),n.exit("htmlText"),e):t(Le)}function Ye(Le){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(Le),n.exit("lineEnding"),At}function At(Le){return Ps(Le)?za(n,yt,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Le):yt(Le)}function yt(Le){return n.enter("htmlTextData"),s(Le)}}const GK={name:"labelEnd",resolveAll:Z6e,resolveTo:X6e,tokenize:J6e},V6e={tokenize:eBe},$6e={tokenize:tBe},H6e={tokenize:nBe};function Z6e(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&s0(n,0,n.length,t),n}function X6e(n,e){let t=n.length,i=0,r,o,s,a;for(;t--;)if(r=n[t][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(s){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(s=t);const c={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},h={type:"label",start:{...n[o][1].start},end:{...n[s][1].end}},m={type:"labelText",start:{...n[o+i+2][1].end},end:{...n[s-2][1].start}};return a=[["enter",c,e],["enter",h,e]],a=lp(a,n.slice(o+1,o+i+3)),a=lp(a,[["enter",m,e]]),a=lp(a,NK(e.parser.constructs.insideSpan.null,n.slice(o+i+4,s-3),e)),a=lp(a,[["exit",m,e],n[s-2],n[s-1],["exit",h,e]]),a=lp(a,n.slice(s+1)),a=lp(a,[["exit",c,e]]),s0(n,o,n.length,a),n}function J6e(n,e,t){const i=this;let r=i.events.length,o,s;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){o=i.events[r][1];break}return a;function a(x){return o?o._inactive?v(x):(s=i.parser.defined.includes(J_(i.sliceSerialize({start:o.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(x),n.exit("labelMarker"),n.exit("labelEnd"),c):t(x)}function c(x){return x===40?n.attempt(V6e,m,s?m:v)(x):x===91?n.attempt($6e,m,s?h:v)(x):s?m(x):v(x)}function h(x){return n.attempt(H6e,m,v)(x)}function m(x){return e(x)}function v(x){return o._balanced=!0,t(x)}}function eBe(n,e,t){return i;function i(v){return n.enter("resource"),n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),r}function r(v){return Bd(v)?M3(n,o)(v):o(v)}function o(v){return v===41?m(v):Kie(n,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(v)}function s(v){return Bd(v)?M3(n,c)(v):m(v)}function a(v){return t(v)}function c(v){return v===34||v===39||v===40?Lie(n,h,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(v):m(v)}function h(v){return Bd(v)?M3(n,m)(v):m(v)}function m(v){return v===41?(n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),n.exit("resource"),e):t(v)}}function tBe(n,e,t){const i=this;return r;function r(a){return Uie.call(i,n,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return i.parser.defined.includes(J_(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function s(a){return t(a)}}function nBe(n,e,t){return i;function i(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),r}function r(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),e):t(o)}}const iBe={name:"labelStartImage",resolveAll:GK.resolveAll,tokenize:rBe};function rBe(n,e,t){const i=this;return r;function r(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),o}function o(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),s):t(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):e(a)}}const oBe={name:"labelStartLink",resolveAll:GK.resolveAll,tokenize:sBe};function sBe(n,e,t){const i=this;return r;function r(s){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(s):e(s)}}const f8={name:"lineEnding",tokenize:aBe};function aBe(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),za(n,e,"linePrefix")}}const Mw={name:"thematicBreak",tokenize:lBe};function lBe(n,e,t){let i=0,r;return o;function o(h){return n.enter("thematicBreak"),s(h)}function s(h){return r=h,a(h)}function a(h){return h===r?(n.enter("thematicBreakSequence"),c(h)):i>=3&&(h===null||Ur(h))?(n.exit("thematicBreak"),e(h)):t(h)}function c(h){return h===r?(n.consume(h),i++,c):(n.exit("thematicBreakSequence"),Ps(h)?za(n,a,"whitespace")(h):a(h))}}const gd={continuation:{tokenize:hBe},exit:fBe,name:"list",tokenize:ABe},uBe={partial:!0,tokenize:pBe},cBe={partial:!0,tokenize:dBe};function ABe(n,e,t){const i=this,r=i.events[i.events.length-1];let o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,s=0;return a;function a(E){const R=i.containerState.type||(E===42||E===43||E===45?"listUnordered":"listOrdered");if(R==="listUnordered"?!i.containerState.marker||E===i.containerState.marker:RR(E)){if(i.containerState.type||(i.containerState.type=R,n.enter(R,{_container:!0})),R==="listUnordered")return n.enter("listItemPrefix"),E===42||E===45?n.check(Mw,t,h)(E):h(E);if(!i.interrupt||E===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(E)}return t(E)}function c(E){return RR(E)&&++s<10?(n.consume(E),c):(!i.interrupt||s<2)&&(i.containerState.marker?E===i.containerState.marker:E===41||E===46)?(n.exit("listItemValue"),h(E)):t(E)}function h(E){return n.enter("listItemMarker"),n.consume(E),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||E,n.check(M6,i.interrupt?t:m,n.attempt(uBe,x,v))}function m(E){return i.containerState.initialBlankLine=!0,o++,x(E)}function v(E){return Ps(E)?(n.enter("listItemPrefixWhitespace"),n.consume(E),n.exit("listItemPrefixWhitespace"),x):t(E)}function x(E){return i.containerState.size=o+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(E)}}function hBe(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(M6,r,o);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,za(n,e,"listItemIndent",i.containerState.size+1)(a)}function o(a){return i.containerState.furtherBlankLines||!Ps(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(cBe,e,s)(a))}function s(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,za(n,n.attempt(gd,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function dBe(n,e,t){const i=this;return za(n,r,"listItemIndent",i.containerState.size+1);function r(o){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?e(o):t(o)}}function fBe(n){n.exit(this.containerState.type)}function pBe(n,e,t){const i=this;return za(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){const s=i.events[i.events.length-1];return!Ps(o)&&s&&s[1].type==="listItemPrefixWhitespace"?e(o):t(o)}}const XG={name:"setextUnderline",resolveTo:mBe,tokenize:gBe};function mBe(n,e){let t=n.length,i,r,o;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!o&&n[t][1].type==="definition"&&(o=t);const s={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",o?(n.splice(r,0,["enter",s,e]),n.splice(o+1,0,["exit",n[i][1],e]),n[i][1].end={...n[o][1].end}):n[i][1]=s,n.push(["exit",s,e]),n}function gBe(n,e,t){const i=this;let r;return o;function o(h){let m=i.events.length,v;for(;m--;)if(i.events[m][1].type!=="lineEnding"&&i.events[m][1].type!=="linePrefix"&&i.events[m][1].type!=="content"){v=i.events[m][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||v)?(n.enter("setextHeadingLine"),r=h,s(h)):t(h)}function s(h){return n.enter("setextHeadingLineSequence"),a(h)}function a(h){return h===r?(n.consume(h),a):(n.exit("setextHeadingLineSequence"),Ps(h)?za(n,c,"lineSuffix")(h):c(h))}function c(h){return h===null||Ur(h)?(n.exit("setextHeadingLine"),e(h)):t(h)}}const yBe={tokenize:vBe};function vBe(n){const e=this,t=n.attempt(M6,i,n.attempt(this.parser.constructs.flowInitial,r,za(n,n.attempt(this.parser.constructs.flow,r,n.attempt(M6e,r)),"linePrefix")));return t;function i(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const bBe={resolveAll:Fie()},CBe=zie("string"),_Be=zie("text");function zie(n){return{resolveAll:Fie(n==="text"?xBe:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],o=t.attempt(r,s,a);return s;function s(m){return h(m)?o(m):a(m)}function a(m){if(m===null){t.consume(m);return}return t.enter("data"),t.consume(m),c}function c(m){return h(m)?(t.exit("data"),o(m)):(t.consume(m),c)}function h(m){if(m===null)return!0;const v=r[m];let x=-1;if(v)for(;++x<v.length;){const E=v[x];if(!E.previous||E.previous.call(i,i.previous))return!0}return!1}}}function Fie(n){return e;function e(t,i){let r=-1,o;for(;++r<=t.length;)o===void 0?t[r]&&t[r][1].type==="data"&&(o=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),r=o+2),o=void 0);return n?n(t,i):t}}function xBe(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let o=r.length,s=-1,a=0,c;for(;o--;){const h=r[o];if(typeof h=="string"){for(s=h.length;h.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(h===-2)c=!0,a++;else if(h!==-1){o++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const h={type:t===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...h.start},i.start.offset===i.end.offset?Object.assign(i,h):(n.splice(t,0,["enter",h,e],["exit",h,e]),t+=2)}t++}return n}const MBe={42:gd,43:gd,45:gd,48:gd,49:gd,50:gd,51:gd,52:gd,53:gd,54:gd,55:gd,56:gd,57:gd,62:Tie},wBe={91:O6e},SBe={[-2]:d8,[-1]:d8,32:d8},EBe={35:P6e,42:Mw,45:[XG,Mw],60:z6e,61:XG,95:Mw,96:HG,126:HG},BBe={38:Die,92:Rie},OBe={[-5]:f8,[-4]:f8,[-3]:f8,33:iBe,38:Die,42:DR,60:[o6e,q6e],91:oBe,92:[R6e,Rie],93:GK,95:DR,96:y6e},IBe={null:[DR,bBe]},kBe={null:[42,95]},TBe={null:[]},RBe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:kBe,contentInitial:wBe,disable:TBe,document:MBe,flow:EBe,flowInitial:SBe,insideSpan:IBe,string:BBe,text:OBe},Symbol.toStringTag,{value:"Module"}));function DBe(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},o=[];let s=[],a=[];const c={attempt:G(J),check:G($),consume:Y,enter:H,exit:Z,interrupt:G($,{interrupt:!0})},h={code:null,containerState:{},defineSkip:P,events:[],now:R,parser:n,previous:null,sliceSerialize:x,sliceStream:E,write:v};let m=e.tokenize.call(h,c);return e.resolveAll&&o.push(e),h;function v(ge){return s=lp(s,ge),z(),s[s.length-1]!==null?[]:(oe(e,0),h.events=NK(o,h.events,h),h.events)}function x(ge,Ie){return KBe(E(ge),Ie)}function E(ge){return PBe(s,ge)}function R(){const{_bufferIndex:ge,_index:Ie,line:Me,column:ke,offset:je}=i;return{_bufferIndex:ge,_index:Ie,line:Me,column:ke,offset:je}}function P(ge){r[ge.line]=ge.column,xe()}function z(){let ge;for(;i._index<s.length;){const Ie=s[i._index];if(typeof Ie=="string")for(ge=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===ge&&i._bufferIndex<Ie.length;)Q(Ie.charCodeAt(i._bufferIndex));else Q(Ie)}}function Q(ge){m=m(ge)}function Y(ge){Ur(ge)?(i.line++,i.column=1,i.offset+=ge===-3?2:1,xe()):ge!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),h.previous=ge}function H(ge,Ie){const Me=Ie||{};return Me.type=ge,Me.start=R(),h.events.push(["enter",Me,h]),a.push(Me),Me}function Z(ge){const Ie=a.pop();return Ie.end=R(),h.events.push(["exit",Ie,h]),Ie}function J(ge,Ie){oe(ge,Ie.from)}function $(ge,Ie){Ie.restore()}function G(ge,Ie){return Me;function Me(ke,je,Be){let Ye,At,yt,Le;return Array.isArray(ke)?Ge(ke):"tokenize"in ke?Ge([ke]):De(ke);function De(Tt){return Lt;function Lt(Ue){const Oe=Ue!==null&&Tt[Ue],Ee=Ue!==null&&Tt.null,Ve=[...Array.isArray(Oe)?Oe:Oe?[Oe]:[],...Array.isArray(Ee)?Ee:Ee?[Ee]:[]];return Ge(Ve)(Ue)}}function Ge(Tt){return Ye=Tt,At=0,Tt.length===0?Be:Te(Tt[At])}function Te(Tt){return Lt;function Lt(Ue){return Le=ue(),yt=Tt,Tt.partial||(h.currentConstruct=Tt),Tt.name&&h.parser.constructs.disable.null.includes(Tt.name)?st():Tt.tokenize.call(Ie?Object.assign(Object.create(h),Ie):h,c,xt,st)(Ue)}}function xt(Tt){return ge(yt,Le),je}function st(Tt){return Le.restore(),++At<Ye.length?Te(Ye[At]):Be}}}function oe(ge,Ie){ge.resolveAll&&!o.includes(ge)&&o.push(ge),ge.resolve&&s0(h.events,Ie,h.events.length-Ie,ge.resolve(h.events.slice(Ie),h)),ge.resolveTo&&(h.events=ge.resolveTo(h.events,h))}function ue(){const ge=R(),Ie=h.previous,Me=h.currentConstruct,ke=h.events.length,je=Array.from(a);return{from:ke,restore:Be};function Be(){i=ge,h.previous=Ie,h.currentConstruct=Me,h.events.length=ke,a=je,xe()}}function xe(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function PBe(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,o=e.end._bufferIndex;let s;if(t===r)s=[n[t].slice(i,o)];else{if(s=n.slice(t,r),i>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(i):s.shift()}o>0&&s.push(n[r].slice(0,o))}return s}function KBe(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const o=n[t];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&r)continue;s=" ";break}default:s=String.fromCharCode(o)}r=o===-2,i.push(s)}return i.join("")}function UBe(n){const i={constructs:QEe([RBe,...(n||{}).extensions||[]]),content:r(XEe),defined:[],document:r(e6e),flow:r(yBe),lazy:{},string:r(CBe),text:r(_Be)};return i;function r(o){return s;function s(a){return DBe(i,o,a)}}}function LBe(n){for(;!Pie(n););return n}const JG=/[\0\t\n\r]/g;function zBe(){let n=1,e="",t=!0,i;return r;function r(o,s,a){const c=[];let h,m,v,x,E;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),v=0,e="",t&&(o.charCodeAt(0)===65279&&v++,t=void 0);v<o.length;){if(JG.lastIndex=v,h=JG.exec(o),x=h&&h.index!==void 0?h.index:o.length,E=o.charCodeAt(x),!h){e=o.slice(v);break}if(E===10&&v===x&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),v<x&&(c.push(o.slice(v,x)),n+=x-v),E){case 0:{c.push(65533),n++;break}case 9:{for(m=Math.ceil(n/4)*4,c.push(-2);n++<m;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}v=x+1}return a&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const FBe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function jBe(n){return n.replace(FBe,NBe)}function NBe(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),o=r===120||r===88;return kie(t.slice(o?2:1),o?16:10)}return jK(t)||n}const jie={}.hasOwnProperty;function GBe(n,e,t){return typeof e!="string"&&(t=e,e=void 0),QBe(t)(LBe(UBe(t).document().write(zBe()(n,e,!0))))}function QBe(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Qn),autolinkProtocol:ue,autolinkEmail:ue,atxHeading:o(Rt),blockQuote:o(Ee),characterEscape:ue,characterReference:ue,codeFenced:o(Ve),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(Ve,s),codeText:o(mt,s),codeTextData:ue,data:ue,codeFlowValue:ue,definition:o(pt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Ct),hardBreakEscape:o(Kt),hardBreakTrailing:o(Kt),htmlFlow:o(on,s),htmlFlowData:ue,htmlText:o(on,s),htmlTextData:ue,image:o(qn),label:s,link:o(Qn),listItem:o(Kn),listItemValue:x,listOrdered:o(xi,v),listUnordered:o(xi),paragraph:o(Un),reference:Te,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Rt),strong:o(Cn),thematicBreak:o(Dn)},exit:{atxHeading:c(),atxHeadingSequence:J,autolink:c(),autolinkEmail:Oe,autolinkProtocol:Ue,blockQuote:c(),characterEscapeValue:xe,characterReferenceMarkerHexadecimal:st,characterReferenceMarkerNumeric:st,characterReferenceValue:Tt,characterReference:Lt,codeFenced:c(z),codeFencedFence:P,codeFencedFenceInfo:E,codeFencedFenceMeta:R,codeFlowValue:xe,codeIndented:c(Q),codeText:c(je),codeTextData:xe,data:xe,definition:c(),definitionDestinationString:Z,definitionLabelString:Y,definitionTitleString:H,emphasis:c(),hardBreakEscape:c(Ie),hardBreakTrailing:c(Ie),htmlFlow:c(Me),htmlFlowData:xe,htmlText:c(ke),htmlTextData:xe,image:c(Ye),label:yt,labelText:At,lineEnding:ge,link:c(Be),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:xt,resourceDestinationString:Le,resourceTitleString:De,resource:Ge,setextHeading:c(oe),setextHeadingLineSequence:G,setextHeadingText:$,strong:c(),thematicBreak:c()}};Nie(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(It){let Ce={type:"root",children:[]};const re={stack:[Ce],tokenStack:[],config:e,enter:a,exit:h,buffer:s,resume:m,data:t},le=[];let he=-1;for(;++he<It.length;)if(It[he][1].type==="listOrdered"||It[he][1].type==="listUnordered")if(It[he][0]==="enter")le.push(he);else{const se=le.pop();he=r(It,se,he)}for(he=-1;++he<It.length;){const se=e[It[he][0]];jie.call(se,It[he][1].type)&&se[It[he][1].type].call(Object.assign({sliceSerialize:It[he][2].sliceSerialize},re),It[he][1])}if(re.tokenStack.length>0){const se=re.tokenStack[re.tokenStack.length-1];(se[1]||eQ).call(re,void 0,se[0])}for(Ce.position={start:wy(It.length>0?It[0][1].start:{line:1,column:1,offset:0}),end:wy(It.length>0?It[It.length-2][1].end:{line:1,column:1,offset:0})},he=-1;++he<e.transforms.length;)Ce=e.transforms[he](Ce)||Ce;return Ce}function r(It,Ce,re){let le=Ce-1,he=-1,se=!1,Ae,be,We,et;for(;++le<=re;){const Pe=It[le];switch(Pe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Pe[0]==="enter"?he++:he--,et=void 0;break}case"lineEndingBlank":{Pe[0]==="enter"&&(Ae&&!et&&!he&&!We&&(We=le),et=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:et=void 0}if(!he&&Pe[0]==="enter"&&Pe[1].type==="listItemPrefix"||he===-1&&Pe[0]==="exit"&&(Pe[1].type==="listUnordered"||Pe[1].type==="listOrdered")){if(Ae){let Ze=le;for(be=void 0;Ze--;){const y=It[Ze];if(y[1].type==="lineEnding"||y[1].type==="lineEndingBlank"){if(y[0]==="exit")continue;be&&(It[be][1].type="lineEndingBlank",se=!0),y[1].type="lineEnding",be=Ze}else if(!(y[1].type==="linePrefix"||y[1].type==="blockQuotePrefix"||y[1].type==="blockQuotePrefixWhitespace"||y[1].type==="blockQuoteMarker"||y[1].type==="listItemIndent"))break}We&&(!be||We<be)&&(Ae._spread=!0),Ae.end=Object.assign({},be?It[be][1].start:Pe[1].end),It.splice(be||le,0,["exit",Ae,Pe[2]]),le++,re++}if(Pe[1].type==="listItemPrefix"){const Ze={type:"listItem",_spread:!1,start:Object.assign({},Pe[1].start),end:void 0};Ae=Ze,It.splice(le,0,["enter",Ze,Pe[2]]),le++,re++,We=void 0,et=!0}}}return It[Ce][1]._spread=se,re}function o(It,Ce){return re;function re(le){a.call(this,It(le),le),Ce&&Ce.call(this,le)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(It,Ce,re){this.stack[this.stack.length-1].children.push(It),this.stack.push(It),this.tokenStack.push([Ce,re||void 0]),It.position={start:wy(Ce.start),end:void 0}}function c(It){return Ce;function Ce(re){It&&It.call(this,re),h.call(this,re)}}function h(It,Ce){const re=this.stack.pop(),le=this.tokenStack.pop();if(le)le[0].type!==It.type&&(Ce?Ce.call(this,It,le[0]):(le[1]||eQ).call(this,It,le[0]));else throw new Error("Cannot close `"+It.type+"` ("+x3({start:It.start,end:It.end})+"): its not open");re.position.end=wy(It.end)}function m(){return NEe(this.stack.pop())}function v(){this.data.expectingFirstListItemValue=!0}function x(It){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(It),10),this.data.expectingFirstListItemValue=void 0}}function E(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=It}function R(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=It}function P(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function z(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=It.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function Q(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=It.replace(/(\r?\n|\r)$/g,"")}function Y(It){const Ce=this.resume(),re=this.stack[this.stack.length-1];re.label=Ce,re.identifier=J_(this.sliceSerialize(It)).toLowerCase()}function H(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=It}function Z(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=It}function J(It){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const re=this.sliceSerialize(It).length;Ce.depth=re}}function $(){this.data.setextHeadingSlurpLineEnding=!0}function G(It){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(It).codePointAt(0)===61?1:2}function oe(){this.data.setextHeadingSlurpLineEnding=void 0}function ue(It){const re=this.stack[this.stack.length-1].children;let le=re[re.length-1];(!le||le.type!=="text")&&(le=ei(),le.position={start:wy(It.start),end:void 0},re.push(le)),this.stack.push(le)}function xe(It){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(It),Ce.position.end=wy(It.end)}function ge(It){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const re=Ce.children[Ce.children.length-1];re.position.end=wy(It.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ce.type)&&(ue.call(this,It),xe.call(this,It))}function Ie(){this.data.atHardBreak=!0}function Me(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=It}function ke(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=It}function je(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=It}function Be(){const It=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";It.type+="Reference",It.referenceType=Ce,delete It.url,delete It.title}else delete It.identifier,delete It.label;this.data.referenceType=void 0}function Ye(){const It=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";It.type+="Reference",It.referenceType=Ce,delete It.url,delete It.title}else delete It.identifier,delete It.label;this.data.referenceType=void 0}function At(It){const Ce=this.sliceSerialize(It),re=this.stack[this.stack.length-2];re.label=jBe(Ce),re.identifier=J_(Ce).toLowerCase()}function yt(){const It=this.stack[this.stack.length-1],Ce=this.resume(),re=this.stack[this.stack.length-1];if(this.data.inReference=!0,re.type==="link"){const le=It.children;re.children=le}else re.alt=Ce}function Le(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=It}function De(){const It=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=It}function Ge(){this.data.inReference=void 0}function Te(){this.data.referenceType="collapsed"}function xt(It){const Ce=this.resume(),re=this.stack[this.stack.length-1];re.label=Ce,re.identifier=J_(this.sliceSerialize(It)).toLowerCase(),this.data.referenceType="full"}function st(It){this.data.characterReferenceType=It.type}function Tt(It){const Ce=this.sliceSerialize(It),re=this.data.characterReferenceType;let le;re?(le=kie(Ce,re==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):le=jK(Ce);const he=this.stack[this.stack.length-1];he.value+=le}function Lt(It){const Ce=this.stack.pop();Ce.position.end=wy(It.end)}function Ue(It){xe.call(this,It);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(It)}function Oe(It){xe.call(this,It);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(It)}function Ee(){return{type:"blockquote",children:[]}}function Ve(){return{type:"code",lang:null,meta:null,value:""}}function mt(){return{type:"inlineCode",value:""}}function pt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ct(){return{type:"emphasis",children:[]}}function Rt(){return{type:"heading",depth:0,children:[]}}function Kt(){return{type:"break"}}function on(){return{type:"html",value:""}}function qn(){return{type:"image",title:null,url:"",alt:null}}function Qn(){return{type:"link",title:null,url:"",children:[]}}function xi(It){return{type:"list",ordered:It.type==="listOrdered",start:null,spread:It._spread,children:[]}}function Kn(It){return{type:"listItem",spread:It._spread,checked:null,children:[]}}function Un(){return{type:"paragraph",children:[]}}function Cn(){return{type:"strong",children:[]}}function ei(){return{type:"text",value:""}}function Dn(){return{type:"thematicBreak"}}}function wy(n){return{line:n.line,column:n.column,offset:n.offset}}function Nie(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?Nie(n,i):WBe(n,i)}}function WBe(n,e){let t;for(t in e)if(jie.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function eQ(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+x3({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+x3({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+x3({start:e.start,end:e.end})+") is still open")}function qBe(n){const e=this;e.parser=t;function t(i){return GBe(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function YBe(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function VBe(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function $Be(n,e){const t=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(r.data={meta:e.meta}),n.patch(e,r),r=n.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(e,r),r}function HBe(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function ZBe(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function XBe(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=Yx(i.toLowerCase()),o=n.footnoteOrder.indexOf(i);let s,a=n.footnoteCounts.get(i);a===void 0?(a=0,n.footnoteOrder.push(i),s=n.footnoteOrder.length):s=o+1,a+=1,n.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};n.patch(e,c);const h={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(e,h),n.applyData(e,h)}function JBe(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function eOe(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function Gie(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});const s=r[r.length-1];return s&&s.type==="text"?s.value+=i:r.push({type:"text",value:i}),r}function tOe(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Gie(n,e);const r={src:Yx(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,o),n.applyData(e,o)}function nOe(n,e){const t={src:Yx(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function iOe(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function rOe(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return Gie(n,e);const r={href:Yx(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const o={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,o),n.applyData(e,o)}function oOe(n,e){const t={href:Yx(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function sOe(n,e,t){const i=n.all(e),r=t?aOe(t):Qie(e),o={},s=[];if(typeof e.checked=="boolean"){const m=i[0];let v;m&&m.type==="element"&&m.tagName==="p"?v=m:(v={type:"element",tagName:"p",properties:{},children:[]},i.unshift(v)),v.children.length>0&&v.children.unshift({type:"text",value:" "}),v.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const m=i[a];(r||a!==0||m.type!=="element"||m.tagName!=="p")&&s.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!r?s.push(...m.children):s.push(m)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:o,children:s};return n.patch(e,h),n.applyData(e,h)}function aOe(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=Qie(t[i])}return e}function Qie(n){const e=n.spread;return e??n.children.length>1}function lOe(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const s=i[r];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,o),n.applyData(e,o)}function uOe(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function cOe(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function AOe(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function hOe(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],s),r.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=UK(e.children[1]),c=Mie(e.children[e.children.length-1]);a&&c&&(s.position={start:a,end:c}),r.push(s)}const o={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,o),n.applyData(e,o)}function dOe(n,e,t){const i=t?t.children:void 0,o=(i?i.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,a=s?s.length:e.children.length;let c=-1;const h=[];for(;++c<a;){const v=e.children[c],x={},E=s?s[c]:void 0;E&&(x.align=E);let R={type:"element",tagName:o,properties:x,children:[]};v&&(R.children=n.all(v),n.patch(v,R),R=n.applyData(v,R)),h.push(R)}const m={type:"element",tagName:"tr",properties:{},children:n.wrap(h,!0)};return n.patch(e,m),n.applyData(e,m)}function fOe(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const tQ=9,nQ=32;function pOe(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const o=[];for(;i;)o.push(iQ(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return o.push(iQ(e.slice(r),r>0,!1)),o.join("")}function iQ(n,e,t){let i=0,r=n.length;if(e){let o=n.codePointAt(i);for(;o===tQ||o===nQ;)i++,o=n.codePointAt(i)}if(t){let o=n.codePointAt(r-1);for(;o===tQ||o===nQ;)r--,o=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function mOe(n,e){const t={type:"text",value:pOe(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function gOe(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const yOe={blockquote:YBe,break:VBe,code:$Be,delete:HBe,emphasis:ZBe,footnoteReference:XBe,heading:JBe,html:eOe,imageReference:tOe,image:nOe,inlineCode:iOe,linkReference:rOe,link:oOe,listItem:sOe,list:lOe,paragraph:uOe,root:cOe,strong:AOe,table:hOe,tableCell:fOe,tableRow:dOe,text:mOe,thematicBreak:gOe,toml:KM,yaml:KM,definition:KM,footnoteDefinition:KM};function KM(){}const Wie=-1,w6=0,w3=1,HS=2,QK=3,WK=4,qK=5,YK=6,qie=7,Yie=8,rQ=typeof self=="object"?self:globalThis,vOe=(n,e)=>{const t=(r,o)=>(n.set(o,r),r),i=r=>{if(n.has(r))return n.get(r);const[o,s]=e[r];switch(o){case w6:case Wie:return t(s,r);case w3:{const a=t([],r);for(const c of s)a.push(i(c));return a}case HS:{const a=t({},r);for(const[c,h]of s)a[i(c)]=i(h);return a}case QK:return t(new Date(s),r);case WK:{const{source:a,flags:c}=s;return t(new RegExp(a,c),r)}case qK:{const a=t(new Map,r);for(const[c,h]of s)a.set(i(c),i(h));return a}case YK:{const a=t(new Set,r);for(const c of s)a.add(i(c));return a}case qie:{const{name:a,message:c}=s;return t(new rQ[a](c),r)}case Yie:return t(BigInt(s),r);case"BigInt":return t(Object(BigInt(s)),r);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return t(new DataView(a),s)}}return t(new rQ[o](s),r)};return i},oQ=n=>vOe(new Map,n)(0),qC="",{toString:bOe}={},{keys:COe}=Object,S2=n=>{const e=typeof n;if(e!=="object"||!n)return[w6,e];const t=bOe.call(n).slice(8,-1);switch(t){case"Array":return[w3,qC];case"Object":return[HS,qC];case"Date":return[QK,qC];case"RegExp":return[WK,qC];case"Map":return[qK,qC];case"Set":return[YK,qC];case"DataView":return[w3,t]}return t.includes("Array")?[w3,t]:t.includes("Error")?[qie,t]:[HS,t]},UM=([n,e])=>n===w6&&(e==="function"||e==="symbol"),_Oe=(n,e,t,i)=>{const r=(s,a)=>{const c=i.push(s)-1;return t.set(a,c),c},o=s=>{if(t.has(s))return t.get(s);let[a,c]=S2(s);switch(a){case w6:{let m=s;switch(c){case"bigint":a=Yie,m=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);m=null;break;case"undefined":return r([Wie],s)}return r([a,m],s)}case w3:{if(c){let x=s;return c==="DataView"?x=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(x=new Uint8Array(s)),r([c,[...x]],s)}const m=[],v=r([a,m],s);for(const x of s)m.push(o(x));return v}case HS:{if(c)switch(c){case"BigInt":return r([c,s.toString()],s);case"Boolean":case"Number":case"String":return r([c,s.valueOf()],s)}if(e&&"toJSON"in s)return o(s.toJSON());const m=[],v=r([a,m],s);for(const x of COe(s))(n||!UM(S2(s[x])))&&m.push([o(x),o(s[x])]);return v}case QK:return r([a,s.toISOString()],s);case WK:{const{source:m,flags:v}=s;return r([a,{source:m,flags:v}],s)}case qK:{const m=[],v=r([a,m],s);for(const[x,E]of s)(n||!(UM(S2(x))||UM(S2(E))))&&m.push([o(x),o(E)]);return v}case YK:{const m=[],v=r([a,m],s);for(const x of s)(n||!UM(S2(x)))&&m.push(o(x));return v}}const{message:h}=s;return r([a,{name:c,message:h}],s)};return o},sQ=(n,{json:e,lossy:t}={})=>{const i=[];return _Oe(!(e||t),!!e,new Map,i)(n),i},ZS=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?oQ(sQ(n,e)):structuredClone(n):(n,e)=>oQ(sQ(n,e));function xOe(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function MOe(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function wOe(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||xOe,i=n.options.footnoteBackLabel||MOe,r=n.options.footnoteLabel||"Footnotes",o=n.options.footnoteLabelTagName||"h2",s=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<n.footnoteOrder.length;){const h=n.footnoteById.get(n.footnoteOrder[c]);if(!h)continue;const m=n.all(h),v=String(h.identifier).toUpperCase(),x=Yx(v.toLowerCase());let E=0;const R=[],P=n.footnoteCounts.get(v);for(;P!==void 0&&++E<=P;){R.length>0&&R.push({type:"text",value:" "});let Y=typeof t=="string"?t:t(c,E);typeof Y=="string"&&(Y={type:"text",value:Y}),R.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+x+(E>1?"-"+E:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,E),className:["data-footnote-backref"]},children:Array.isArray(Y)?Y:[Y]})}const z=m[m.length-1];if(z&&z.type==="element"&&z.tagName==="p"){const Y=z.children[z.children.length-1];Y&&Y.type==="text"?Y.value+=" ":z.children.push({type:"text",value:" "}),z.children.push(...R)}else m.push(...R);const Q={type:"element",tagName:"li",properties:{id:e+"fn-"+x},children:n.wrap(m,!0)};n.patch(h,Q),a.push(Q)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...ZS(s),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const Vie=(function(n){if(n==null)return OOe;if(typeof n=="function")return S6(n);if(typeof n=="object")return Array.isArray(n)?SOe(n):EOe(n);if(typeof n=="string")return BOe(n);throw new Error("Expected function, string, or object as test")});function SOe(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Vie(n[t]);return S6(i);function i(...r){let o=-1;for(;++o<e.length;)if(e[o].apply(this,r))return!0;return!1}}function EOe(n){const e=n;return S6(t);function t(i){const r=i;let o;for(o in n)if(r[o]!==e[o])return!1;return!0}}function BOe(n){return S6(e);function e(t){return t&&t.type===n}}function S6(n){return e;function e(t,i,r){return!!(IOe(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function OOe(){return!0}function IOe(n){return n!==null&&typeof n=="object"&&"type"in n}const $ie=[],kOe=!0,aQ=!1,TOe="skip";function ROe(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const o=Vie(r),s=i?-1:1;a(n,void 0,[])();function a(c,h,m){const v=c&&typeof c=="object"?c:{};if(typeof v.type=="string"){const E=typeof v.tagName=="string"?v.tagName:typeof v.name=="string"?v.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(c.type+(E?"<"+E+">":""))+")"})}return x;function x(){let E=$ie,R,P,z;if((!e||o(c,h,m[m.length-1]||void 0))&&(E=DOe(t(c,m)),E[0]===aQ))return E;if("children"in c&&c.children){const Q=c;if(Q.children&&E[0]!==TOe)for(P=(i?Q.children.length:-1)+s,z=m.concat(Q);P>-1&&P<Q.children.length;){const Y=Q.children[P];if(R=a(Y,P,z)(),R[0]===aQ)return R;P=typeof R[1]=="number"?R[1]:P+s}}return E}}}function DOe(n){return Array.isArray(n)?n:typeof n=="number"?[kOe,n]:n==null?$ie:[n]}function Hie(n,e,t,i){let r,o,s;typeof e=="function"&&typeof t!="function"?(o=void 0,s=e,r=t):(o=e,s=t,r=i),ROe(n,o,a,r);function a(c,h){const m=h[h.length-1],v=m?m.children.indexOf(c):void 0;return s(c,v,m)}}const PR={}.hasOwnProperty,POe={};function KOe(n,e){const t=e||POe,i=new Map,r=new Map,o=new Map,s={...yOe,...t.handlers},a={all:h,applyData:LOe,definitionById:i,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:s,one:c,options:t,patch:UOe,wrap:FOe};return Hie(n,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const v=m.type==="definition"?i:r,x=String(m.identifier).toUpperCase();v.has(x)||v.set(x,m)}}),a;function c(m,v){const x=m.type,E=a.handlers[x];if(PR.call(a.handlers,x)&&E)return E(a,m,v);if(a.options.passThrough&&a.options.passThrough.includes(x)){if("children"in m){const{children:P,...z}=m,Q=ZS(z);return Q.children=a.all(m),Q}return ZS(m)}return(a.options.unknownHandler||zOe)(a,m,v)}function h(m){const v=[];if("children"in m){const x=m.children;let E=-1;for(;++E<x.length;){const R=a.one(x[E],m);if(R){if(E&&x[E-1].type==="break"&&(!Array.isArray(R)&&R.type==="text"&&(R.value=lQ(R.value)),!Array.isArray(R)&&R.type==="element")){const P=R.children[0];P&&P.type==="text"&&(P.value=lQ(P.value))}Array.isArray(R)?v.push(...R):v.push(R)}}}return v}}function UOe(n,e){n.position&&(e.position=bEe(n))}function LOe(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,o=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const s="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:s}}t.type==="element"&&o&&Object.assign(t.properties,ZS(o)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function zOe(n,e){const t=e.data||{},i="value"in e&&!(PR.call(t,"hProperties")||PR.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function FOe(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function lQ(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function uQ(n,e){const t=KOe(n,e),i=t.one(n,void 0),r=wOe(t),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&o.children.push({type:"text",value:`
`},r),o}function jOe(n,e){return n&&"run"in n?async function(t,i){const r=uQ(t,{file:i,...e});await n.run(r,i)}:function(t,i){return uQ(t,{file:i,...n||e})}}function cQ(n){if(n)throw n}var p8,AQ;function NOe(){if(AQ)return p8;AQ=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},o=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var m=n.call(h,"constructor"),v=h.constructor&&h.constructor.prototype&&n.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!v)return!1;var x;for(x in h);return typeof x>"u"||n.call(h,x)},s=function(h,m){t&&m.name==="__proto__"?t(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},a=function(h,m){if(m==="__proto__")if(n.call(h,m)){if(i)return i(h,m).value}else return;return h[m]};return p8=function c(){var h,m,v,x,E,R,P=arguments[0],z=1,Q=arguments.length,Y=!1;for(typeof P=="boolean"&&(Y=P,P=arguments[1]||{},z=2),(P==null||typeof P!="object"&&typeof P!="function")&&(P={});z<Q;++z)if(h=arguments[z],h!=null)for(m in h)v=a(P,m),x=a(h,m),P!==x&&(Y&&x&&(o(x)||(E=r(x)))?(E?(E=!1,R=v&&r(v)?v:[]):R=v&&o(v)?v:{},s(P,{name:m,newValue:c(Y,R,x)})):typeof x<"u"&&s(P,{name:m,newValue:x}));return P},p8}var GOe=NOe();const m8=Su(GOe);function KR(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function QOe(){const n=[],e={run:t,use:i};return e;function t(...r){let o=-1;const s=r.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...r);function a(c,...h){const m=n[++o];let v=-1;if(c){s(c);return}for(;++v<r.length;)(h[v]===null||h[v]===void 0)&&(h[v]=r[v]);r=h,m?WOe(m,a)(...h):s(null,...h)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function WOe(n,e){let t;return i;function i(...s){const a=n.length>s.length;let c;a&&s.push(r);try{c=n.apply(this,s)}catch(h){const m=h;if(a&&t)throw m;return r(m)}a||(c&&c.then&&typeof c.then=="function"?c.then(o,r):c instanceof Error?r(c):o(c))}function r(s,...a){t||(t=!0,e(s,...a))}function o(s){r(null,s)}}const Eg={basename:qOe,dirname:YOe,extname:VOe,join:$Oe,sep:"/"};function qOe(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');S5(n);let t=0,i=-1,r=n.length,o;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else i<0&&(o=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let s=-1,a=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(o){t=r+1;break}}else s<0&&(o=!0,s=r+1),a>-1&&(n.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=s));return t===i?i=s:i<0&&(i=n.length),n.slice(t,i)}function YOe(n){if(S5(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function VOe(n){S5(n);let e=n.length,t=-1,i=0,r=-1,o=0,s;for(;e--;){const a=n.codePointAt(e);if(a===47){if(s){i=e+1;break}continue}t<0&&(s=!0,t=e+1),a===46?r<0?r=e:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||t<0||o===0||o===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function $Oe(...n){let e=-1,t;for(;++e<n.length;)S5(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":HOe(t)}function HOe(n){S5(n);const e=n.codePointAt(0)===47;let t=ZOe(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function ZOe(n,e){let t="",i=0,r=-1,o=0,s=-1,a,c;for(;++s<=n.length;){if(s<n.length)a=n.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(r===s-1||o===1))if(r!==s-1&&o===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(c=t.lastIndexOf("/"),c!==t.length-1){c<0?(t="",i=0):(t=t.slice(0,c),i=t.length-1-t.lastIndexOf("/")),r=s,o=0;continue}}else if(t.length>0){t="",i=0,r=s,o=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,s):t=n.slice(r+1,s),i=s-r-1;r=s,o=0}else a===46&&o>-1?o++:o=-1}return t}function S5(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const XOe={cwd:JOe};function JOe(){return"/"}function UR(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function e8e(n){if(typeof n=="string")n=new URL(n);else if(!UR(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return t8e(n)}function t8e(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const g8=["history","path","basename","stem","extname","dirname"];class Zie{constructor(e){let t;e?UR(e)?t={path:e}:typeof e=="string"||n8e(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":XOe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<g8.length;){const o=g8[i];o in t&&t[o]!==void 0&&t[o]!==null&&(this[o]=o==="history"?[...t[o]]:t[o])}let r;for(r in t)g8.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?Eg.basename(this.path):void 0}set basename(e){v8(e,"basename"),y8(e,"basename"),this.path=Eg.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Eg.dirname(this.path):void 0}set dirname(e){hQ(this.basename,"dirname"),this.path=Eg.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Eg.extname(this.path):void 0}set extname(e){if(y8(e,"extname"),hQ(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Eg.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){UR(e)&&(e=e8e(e)),v8(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Eg.basename(this.path,this.extname):void 0}set stem(e){v8(e,"stem"),y8(e,"stem"),this.path=Eg.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new HA(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function y8(n,e){if(n&&n.includes(Eg.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Eg.sep+"`")}function v8(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function hQ(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function n8e(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const i8e=(function(n){const i=this.constructor.prototype,r=i[n],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),r8e={}.hasOwnProperty;class VK extends i8e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=QOe()}copy(){const e=new VK;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(m8(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(_8("data",this.frozen),this.namespace[e]=t,this):r8e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(_8("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=LM(e),i=this.parser||this.Parser;return b8("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),b8("process",this.parser||this.Parser),C8("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(o,s){const a=LM(e),c=i.parse(a);i.run(c,a,function(m,v,x){if(m||!v||!x)return h(m);const E=v,R=i.stringify(E,x);a8e(R)?x.value=R:x.result=R,h(m,x)});function h(m,v){m||!v?s(m):o?o(v):t(void 0,v)}}}processSync(e){let t=!1,i;return this.freeze(),b8("processSync",this.parser||this.Parser),C8("processSync",this.compiler||this.Compiler),this.process(e,r),fQ("processSync","process",t),i;function r(o,s){t=!0,cQ(o),i=s}}run(e,t,i){dQ(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?o(void 0,i):new Promise(o);function o(s,a){const c=LM(t);r.run(e,c,h);function h(m,v,x){const E=v||e;m?a(m):s?s(E):i(void 0,E,x)}}}runSync(e,t){let i=!1,r;return this.run(e,t,o),fQ("runSync","run",i),r;function o(s,a){cQ(s),r=a,i=!0}}stringify(e,t){this.freeze();const i=LM(t),r=this.compiler||this.Compiler;return C8("stringify",r),dQ(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(_8("use",this.frozen),e!=null)if(typeof e=="function")c(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(h){if(typeof h=="function")c(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...v]=h;c(m,v)}else s(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function s(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(h.plugins),h.settings&&(r.settings=m8(!0,r.settings,h.settings))}function a(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const v=h[m];o(v)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function c(h,m){let v=-1,x=-1;for(;++v<i.length;)if(i[v][0]===h){x=v;break}if(x===-1)i.push([h,...m]);else if(m.length>0){let[E,...R]=m;const P=i[x][1];KR(P)&&KR(E)&&(E=m8(!0,P,E)),i[x]=[h,E,...R]}}}}const o8e=new VK().freeze();function b8(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function C8(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function _8(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function dQ(n){if(!KR(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function fQ(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function LM(n){return s8e(n)?n:new Zie(n)}function s8e(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function a8e(n){return typeof n=="string"||l8e(n)}function l8e(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const u8e="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",pQ=[],mQ={allowDangerousHtml:!0},c8e=/^(https?|ircs?|mailto|xmpp)$/i,A8e=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function h8e(n){const e=d8e(n),t=f8e(n);return p8e(e.runSync(e.parse(t),t),n)}function d8e(n){const e=n.rehypePlugins||pQ,t=n.remarkPlugins||pQ,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...mQ}:mQ;return o8e().use(qBe).use(t).use(jOe,i).use(e)}function f8e(n){const e=n.children||"",t=new Zie;return typeof e=="string"&&(t.value=e),t}function p8e(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,o=e.disallowedElements,s=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||m8e;for(const m of A8e)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+u8e+m.id,void 0);return Hie(n,h),wEe(n,{Fragment:te.Fragment,components:r,ignoreInvalidStyle:!0,jsx:te.jsx,jsxs:te.jsxs,passKeys:!0,passNode:!0});function h(m,v,x){if(m.type==="raw"&&x&&typeof v=="number")return s?x.children.splice(v,1):x.children[v]={type:"text",value:m.value},v;if(m.type==="element"){let E;for(E in h8)if(Object.hasOwn(h8,E)&&Object.hasOwn(m.properties,E)){const R=m.properties[E],P=h8[E];(P===null||P.includes(m.tagName))&&(m.properties[E]=c(String(R||""),E,m))}}if(m.type==="element"){let E=t?!t.includes(m.tagName):o?o.includes(m.tagName):!1;if(!E&&i&&typeof v=="number"&&(E=!i(m,v,x)),E&&x&&typeof v=="number")return a&&m.children?x.children.splice(v,1,...m.children):x.children.splice(v,1),v}}}function m8e(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||c8e.test(n.slice(0,e))?n:""}function to(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="a7edc49bc306eb20f0cc16abd4c84f78b7cc6807",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:4,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:28},end:{line:23,column:5}},6:{start:{line:18,column:27},end:{line:18,column:46}},7:{start:{line:19,column:6},end:{line:21,column:7}},8:{start:{line:20,column:8},end:{line:20,column:148}},9:{start:{line:22,column:6},end:{line:22,column:19}},10:{start:{line:24,column:4},end:{line:57,column:9}},11:{start:{line:27,column:76},end:{line:27,column:132}},12:{start:{line:30,column:10},end:{line:33,column:20}},13:{start:{line:40,column:12},end:{line:40,column:75}},14:{start:{line:44,column:10},end:{line:53,column:20}},15:{start:{line:47,column:14},end:{line:51,column:15}},16:{start:{line:48,column:16},end:{line:48,column:98}},17:{start:{line:50,column:16},end:{line:50,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:58,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:17,column:28},end:{line:17,column:29}},loc:{start:{line:17,column:39},end:{line:23,column:5}},line:17},2:{name:"(anonymous_2)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:76},end:{line:27,column:132}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:29,column:119},end:{line:29,column:120}},loc:{start:{line:29,column:137},end:{line:34,column:9}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:39,column:37},end:{line:39,column:38}},loc:{start:{line:39,column:49},end:{line:41,column:11}},line:39},5:{name:"(anonymous_5)",decl:{start:{line:43,column:80},end:{line:43,column:81}},loc:{start:{line:43,column:103},end:{line:54,column:9}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:46,column:37},end:{line:46,column:38}},loc:{start:{line:46,column:44},end:{line:52,column:13}},line:46}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:25,column:6},end:{line:35,column:10}},type:"binary-expr",locations:[{start:{line:25,column:6},end:{line:25,column:9}},{start:{line:25,column:29},end:{line:35,column:10}}],line:25},3:{loc:{start:{line:29,column:8},end:{line:34,column:13}},type:"binary-expr",locations:[{start:{line:29,column:8},end:{line:29,column:20}},{start:{line:29,column:40},end:{line:34,column:13}}],line:29},4:{loc:{start:{line:36,column:6},end:{line:55,column:13}},type:"binary-expr",locations:[{start:{line:36,column:6},end:{line:36,column:16}},{start:{line:36,column:36},end:{line:55,column:13}}],line:36},5:{loc:{start:{line:47,column:14},end:{line:51,column:15}},type:"if",locations:[{start:{line:47,column:14},end:{line:51,column:15}},{start:{line:49,column:21},end:{line:51,column:15}}],line:47},6:{loc:{start:{line:56,column:6},end:{line:56,column:215}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:12}},{start:{line:56,column:16},end:{line:56,column:30}},{start:{line:56,column:50},end:{line:56,column:215}}],line:56}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AA0Ce,SAMT,UANS,KAkBK,YAlBL;AA1Cf,OAAO,WAAW;AAClB,OAAO,cAAc;AAErB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AACP;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,UAAM,kBAAkB,CAAC,UAAkB;AACzC,YAAM,eAAe,MAAM,YAAY;AACvC,UAAI,aAAa,WAAW,UAAU,GAAG;AACvC,eAAO,oBAAC,OAAE,MAAM,cAAc,QAAO,UAAS,KAAI,cAAc,gBAAM,aAAa,MAAM,GAAG,EAAE,IAAI,GAAE;AAAA,MACtG;AACA,aAAO;AAAA,IACT;AAEA,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBACxC,8BAAC,YAAS,YAAY;AAAA,UACpB,GAAG,CAAC,EAAC,MAAM,OAAO,MAAM,UAAU,GAAG,MAAK,MAAM,oBAAC,OAAE,MAAY,QAAO,UAAU,GAAG,OAAQ,UAAS;AAAA,QACtG,GAAI,eAAI,GACV;AAAA,QACC,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,0BAAgB,WAAW,CAAyB,CAAC,KAAzD,CAA2D;AAAA,cAC7E,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a7edc49bc306eb20f0cc16abd4c84f78b7cc6807"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return to=function(){return s},s}to();const gQ=(to().s[0]++,{js:"JS",android:"Android",ios:"iOS"});class E6 extends En.Component{render(){to().f[0]++;const{fieldSpec:e}=(to().s[1]++,this.props),{doc:t,values:i,docUrl:r,docUrlLinkText:o}=(to().s[2]++,e),s=(to().s[3]++,e["sdk-support"]),a=(to().s[4]++,to().b[0][0]++,!!i&&(to().b[0][1]++,!Array.isArray(i)));to().s[5]++;const c=h=>{to().f[1]++;const m=(to().s[6]++,h.toLowerCase());return to().s[7]++,m.startsWith("https://")?(to().b[1][0]++,to().s[8]++,te.jsx("a",{href:m,target:"_blank",rel:"noreferrer",children:"#"+m.split("/").pop()})):(to().b[1][1]++,to().s[9]++,h)};return to().s[10]++,te.jsxs(te.Fragment,{children:[(to().b[2][0]++,t&&(to().b[2][1]++,te.jsxs("div",{className:"SpecDoc",children:[te.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:te.jsx(h8e,{components:{a:({node:h,href:m,children:v,...x})=>(to().f[2]++,to().s[11]++,te.jsx("a",{href:m,target:"_blank",...x,children:v}))},children:t})}),(to().b[3][0]++,a&&(to().b[3][1]++,te.jsx("ul",{className:"SpecDoc__values",children:Object.entries(i).map(([h,m])=>(to().f[3]++,to().s[12]++,te.jsxs("li",{children:[te.jsx("code",{children:JSON.stringify(h)}),te.jsx("div",{children:m.doc})]},h)))})))]}))),(to().b[4][0]++,s&&(to().b[4][1]++,te.jsx("div",{className:"SpecDoc__sdk-support",children:te.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{}),Object.values(gQ).map(h=>(to().f[4]++,to().s[13]++,te.jsx("th",{children:h},h)))]})}),te.jsx("tbody",{children:Object.entries(s).map(([h,m])=>(to().f[5]++,to().s[14]++,te.jsxs("tr",{children:[te.jsx("td",{children:h}),Object.keys(gQ).map(v=>(to().f[6]++,to().s[15]++,Object.prototype.hasOwnProperty.call(m,v)?(to().b[5][0]++,to().s[16]++,te.jsx("td",{children:c(m[v])},v)):(to().b[5][1]++,to().s[17]++,te.jsx("td",{children:"no"},v))))]},h)))})]})}))),(to().b[6][0]++,r&&(to().b[6][1]++,o)&&(to().b[6][2]++,te.jsx("div",{className:"SpecDoc__learn-more",children:te.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:o})})))]})}}function Hr(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="a026f5c10cd11169be04acaaf924d5e996792a37",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:78,column:6}},16:{start:{line:66,column:12},end:{line:66,column:31}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:79,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:65,column:87},end:{line:65,column:88}},loc:{start:{line:65,column:95},end:{line:67,column:11}},line:65}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:55,column:10},end:{line:62,column:14}},type:"binary-expr",locations:[{start:{line:55,column:10},end:{line:55,column:30}},{start:{line:55,column:50},end:{line:62,column:14}}],line:55},6:{loc:{start:{line:63,column:10},end:{line:63,column:134}},type:"binary-expr",locations:[{start:{line:63,column:10},end:{line:63,column:31}},{start:{line:63,column:51},end:{line:63,column:134}}],line:63},7:{loc:{start:{line:68,column:10},end:{line:75,column:11}},type:"binary-expr",locations:[{start:{line:68,column:10},end:{line:68,column:30}},{start:{line:68,column:50},end:{line:75,column:11}}],line:68},8:{loc:{start:{line:72,column:32},end:{line:72,column:64}},type:"cond-expr",locations:[{start:{line:72,column:53},end:{line:72,column:55}},{start:{line:72,column:58},end:{line:72,column:64}}],line:72}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AA+DW,SAYD,KAZC;AA/DX,OAAO,WAA8E;AACrF,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAkBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,UACpC,+BAA+B,KAAK,MAAM;AAAA,QAC5C,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM;AAAC,iBAAK,WAAW;AAAA,UAAG,GAC1E,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a026f5c10cd11169be04acaaf924d5e996792a37"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Hr=function(){return s},s}Hr();class _s extends En.Component{_blockEl=(Hr().s[0]++,null);constructor(e){Hr().f[0]++,Hr().s[1]++,super(e),Hr().s[2]++,this.state={showDoc:!1}}onChange(e){Hr().f[1]++;const t=(Hr().s[3]++,e.target.value);if(Hr().s[4]++,this.props.onChange)return Hr().b[0][0]++,Hr().s[5]++,this.props.onChange(t===""?(Hr().b[1][0]++,void 0):(Hr().b[1][1]++,t));Hr().b[0][1]++}onToggleDoc=(Hr().s[6]++,e=>{Hr().f[2]++,Hr().s[7]++,this.setState({showDoc:e})});onLabelClick=(Hr().s[8]++,e=>{Hr().f[3]++;const t=(Hr().s[9]++,e.nativeEvent.target),i=(Hr().s[10]++,this._blockEl?.contains(t));Hr().s[11]++,Hr().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Hr().b[3][1]++,!i)?(Hr().b[2][0]++,Hr().s[12]++,e.stopPropagation()):Hr().b[2][1]++,Hr().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Hr().b[4][0]++,Hr().s[14]++,e.preventDefault()):Hr().b[4][1]++});render(){return Hr().f[4]++,Hr().s[15]++,te.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:c0({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action,"maputnik-input-block--error":this.props.error}),onClick:this.onLabelClick,children:[(Hr().b[5][0]++,this.props.fieldSpec&&(Hr().b[5][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:te.jsx(DK,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Hr().b[6][0]++,!this.props.fieldSpec&&(Hr().b[6][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),te.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),te.jsx("div",{className:"maputnik-input-block-content",ref:e=>{Hr().f[5]++,Hr().s[16]++,this._blockEl=e},children:this.props.children}),(Hr().b[7][0]++,this.props.fieldSpec&&(Hr().b[7][1]++,te.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Hr().b[8][0]++,""):(Hr().b[8][1]++,"none")},children:te.jsx(E6,{fieldSpec:this.props.fieldSpec})})))]})}}function hA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return hA=function(){return s},s}hA();class rC extends En.Component{render(){hA().f[0]++;let e=(hA().s[0]++,this.props.options);return hA().s[1]++,hA().b[1][0]++,e.length>0&&(hA().b[1][1]++,!Array.isArray(e[0]))?(hA().b[0][0]++,hA().s[2]++,e=e.map(t=>(hA().f[1]++,hA().s[3]++,[t,t]))):hA().b[0][1]++,hA().s[4]++,te.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(hA().f[2]++,hA().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,i])=>(hA().f[3]++,hA().s[6]++,te.jsx("option",{value:t,children:i},t)))})}}function sr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return sr=function(){return s},s}sr();class xm extends En.Component{static defaultProps=(sr().s[0]++,{onInput:()=>{sr().f[0]++}});constructor(e){sr().f[1]++,sr().s[1]++,super(e),sr().s[2]++,this.state={editing:!1,value:(sr().b[0][0]++,e.value||(sr().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(sr().f[2]++,sr().s[3]++,t.editing)sr().b[1][1]++;else return sr().b[1][0]++,sr().s[4]++,{value:e.value};return sr().s[5]++,{}}render(){sr().f[3]++;let e,t;return sr().s[6]++,this.props.multi?(sr().b[2][0]++,sr().s[7]++,e="textarea",sr().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(sr().b[2][1]++,sr().s[9]++,e="input",sr().s[10]++,t=["maputnik-string"]),sr().s[11]++,this.props.disabled?(sr().b[3][0]++,sr().s[12]++,t.push("maputnik-string--disabled")):sr().b[3][1]++,sr().s[13]++,En.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(sr().b[4][0]++,this.props.spellCheck):(sr().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(sr().b[5][0]++,""):(sr().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:i=>{sr().f[4]++,sr().s[14]++,this.setState({editing:!0,value:i.target.value},()=>{sr().f[5]++,sr().s[15]++,this.props.onInput?(sr().b[6][0]++,sr().s[16]++,this.props.onInput(this.state.value)):sr().b[6][1]++})},onBlur:()=>{sr().f[6]++,sr().s[17]++,this.state.value!==this.props.value?(sr().b[7][0]++,sr().s[18]++,this.setState({editing:!1}),sr().s[19]++,this.props.onChange?(sr().b[8][0]++,sr().s[20]++,this.props.onChange(this.state.value)):sr().b[8][1]++):sr().b[7][1]++},onKeyDown:i=>{sr().f[7]++,sr().s[21]++,sr().b[10][0]++,i.keyCode===13&&(sr().b[10][1]++,this.props.onChange)?(sr().b[9][0]++,sr().s[22]++,this.props.onChange(this.state.value)):sr().b[9][1]++},required:this.props.required})}}function GA(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="599a12b14a1057b6bb554b629d0d81238d4af16c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AACtD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"599a12b14a1057b6bb554b629d0d81238d4af16c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return GA=function(){return s},s}GA();GA().s[0]++;const g8e=({t:n,value:e,wdKey:t,onChange:i,error:r,disabled:o=(GA().b[0][0]++,!1)})=>{GA().f[0]++;const s=(GA().s[1]++,Object.keys((GA().b[1][0]++,up.layer.type.values||(GA().b[1][1]++,{}))).map(a=>(GA().f[1]++,GA().s[2]++,[a,N4.startCase(a.replace(/-/g," "))])));return GA().s[3]++,te.jsxs(_s,{label:n("Type"),fieldSpec:up.layer.type,"data-wd-key":t,error:r,children:[(GA().b[2][0]++,o&&(GA().b[2][1]++,te.jsx(xm,{value:e,disabled:!0}))),(GA().b[3][0]++,!o&&(GA().b[3][1]++,te.jsx(rC,{options:s,onChange:i,value:e,"data-wd-key":t+".select"})))]})},Xie=(GA().s[4]++,Fo()(g8e));function E4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return E4=function(){return s},s}E4();E4().s[0]++;const Jie=n=>(E4().f[0]++,E4().s[1]++,te.jsx(_s,{label:"ID",fieldSpec:Zr.layer.id,"data-wd-key":n.wdKey,error:n.error,children:te.jsx(xm,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function zM(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Sl(){return Sl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Sl.apply(null,arguments)}var y8e=b1();const pr=Su(y8e);var x8={exports:{}},Vs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yQ;function v8e(){if(yQ)return Vs;yQ=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),R;R=Symbol.for("react.module.reference");function P(z){if(typeof z=="object"&&z!==null){var Q=z.$$typeof;switch(Q){case n:switch(z=z.type,z){case t:case r:case i:case h:case m:return z;default:switch(z=z&&z.$$typeof,z){case a:case s:case c:case x:case v:case o:return z;default:return Q}}case e:return Q}}}return Vs.ContextConsumer=s,Vs.ContextProvider=o,Vs.Element=n,Vs.ForwardRef=c,Vs.Fragment=t,Vs.Lazy=x,Vs.Memo=v,Vs.Portal=e,Vs.Profiler=r,Vs.StrictMode=i,Vs.Suspense=h,Vs.SuspenseList=m,Vs.isAsyncMode=function(){return!1},Vs.isConcurrentMode=function(){return!1},Vs.isContextConsumer=function(z){return P(z)===s},Vs.isContextProvider=function(z){return P(z)===o},Vs.isElement=function(z){return typeof z=="object"&&z!==null&&z.$$typeof===n},Vs.isForwardRef=function(z){return P(z)===c},Vs.isFragment=function(z){return P(z)===t},Vs.isLazy=function(z){return P(z)===x},Vs.isMemo=function(z){return P(z)===v},Vs.isPortal=function(z){return P(z)===e},Vs.isProfiler=function(z){return P(z)===r},Vs.isStrictMode=function(z){return P(z)===i},Vs.isSuspense=function(z){return P(z)===h},Vs.isSuspenseList=function(z){return P(z)===m},Vs.isValidElementType=function(z){return typeof z=="string"||typeof z=="function"||z===t||z===r||z===i||z===h||z===m||z===E||typeof z=="object"&&z!==null&&(z.$$typeof===x||z.$$typeof===v||z.$$typeof===o||z.$$typeof===s||z.$$typeof===c||z.$$typeof===R||z.getModuleId!==void 0)},Vs.typeOf=P,Vs}var vQ;function b8e(){return vQ||(vQ=1,x8.exports=v8e()),x8.exports}b8e();const bQ=n=>typeof n=="object"&&n!=null&&n.nodeType===1,CQ=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",FM=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return CQ(t.overflowY,e)||CQ(t.overflowX,e)||(i=>{const r=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(n)}return!1},jM=(n,e,t,i,r,o,s,a)=>o<n&&s>e||o>n&&s<e?0:o<=n&&a<=t||s>=e&&a>=t?o-n-i:s>e&&a<t||o<n&&a>t?s-e+r:0,C8e=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},_8e=(n,e)=>{var t,i,r,o;if(typeof document>"u")return[];const{inline:s,boundary:a,skipOverflowHiddenElements:c}=e,h=typeof a=="function"?a:Me=>Me!==a;if(!bQ(n))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,v=[];let x=n;for(;bQ(x)&&h(x);){if(x=C8e(x),x===m){v.push(x);break}x!=null&&x===document.body&&FM(x)&&!FM(document.documentElement)||x!=null&&FM(x,c)&&v.push(x)}const E=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,R=(o=(r=window.visualViewport)==null?void 0:r.height)!=null?o:innerHeight,{scrollX:P,scrollY:z}=window,{height:Q,width:Y,top:H,right:Z,bottom:J,left:$}=n.getBoundingClientRect(),{top:G,right:oe,left:ue}=(Me=>{const ke=window.getComputedStyle(Me);return{top:parseFloat(ke.scrollMarginTop)||0,right:parseFloat(ke.scrollMarginRight)||0,bottom:parseFloat(ke.scrollMarginBottom)||0,left:parseFloat(ke.scrollMarginLeft)||0}})(n);let xe=H-G,ge=s==="center"?$+Y/2-ue+oe:s==="end"?Z+oe:$-ue;const Ie=[];for(let Me=0;Me<v.length;Me++){const ke=v[Me],{height:je,width:Be,top:Ye,right:At,bottom:yt,left:Le}=ke.getBoundingClientRect();if(H>=0&&$>=0&&J<=R&&Z<=E&&(ke===m&&!FM(ke)||H>=Ye&&J<=yt&&$>=Le&&Z<=At))return Ie;const De=getComputedStyle(ke),Ge=parseInt(De.borderLeftWidth,10),Te=parseInt(De.borderTopWidth,10),xt=parseInt(De.borderRightWidth,10),st=parseInt(De.borderBottomWidth,10);let Tt=0,Lt=0;const Ue="offsetWidth"in ke?ke.offsetWidth-ke.clientWidth-Ge-xt:0,Oe="offsetHeight"in ke?ke.offsetHeight-ke.clientHeight-Te-st:0,Ee="offsetWidth"in ke?ke.offsetWidth===0?0:Be/ke.offsetWidth:0,Ve="offsetHeight"in ke?ke.offsetHeight===0?0:je/ke.offsetHeight:0;if(m===ke)Tt=jM(z,z+R,R,Te,st,z+xe,z+xe+Q,Q),Lt=s==="start"?ge:s==="center"?ge-E/2:s==="end"?ge-E:jM(P,P+E,E,Ge,xt,P+ge,P+ge+Y,Y),Tt=Math.max(0,Tt+z),Lt=Math.max(0,Lt+P);else{Tt=jM(Ye,yt,je,Te,st+Oe,xe,xe+Q,Q),Lt=s==="start"?ge-Le-Ge:s==="center"?ge-(Le+Be/2)+Ue/2:s==="end"?ge-At+xt+Ue:jM(Le,At,Be,Ge,xt+Ue,ge,ge+Y,Y);const{scrollLeft:mt,scrollTop:pt}=ke;Tt=Ve===0?0:Math.max(0,Math.min(pt+Tt/Ve,ke.scrollHeight-je/Ve+Oe)),Lt=Ee===0?0:Math.max(0,Math.min(mt+Lt/Ee,ke.scrollWidth-Be/Ee+Ue)),xe+=pt-Tt,ge+=mt-Lt}Ie.push({el:ke,top:Tt,left:Lt})}return Ie};var Sx=function(){return Sx=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Sx.apply(this,arguments)};var x8e=0;function ere(){}function M8e(n,e){if(n){var t=_8e(n,{boundary:e});t.forEach(function(i){var r=i.el,o=i.top,s=i.left;r.scrollTop=o,r.scrollLeft=s})}}function _Q(n,e,t){var i=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return i}function tre(n,e){var t;function i(){t&&clearTimeout(t)}function r(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];i(),t=setTimeout(function(){t=null,n.apply(void 0,s)},e)}return r.cancel=i,r}function Y0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return e.some(function(a){return a&&a.apply(void 0,[i].concat(o)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function NM(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}function w8e(){return String(x8e++)}function LR(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,i){return t[i]=nre(e,i)?e[i]:n[i],t},{})}function nre(n,e){return n[e]!==void 0}function S8e(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function GM(n,e,t,i,r){var o=t.length;if(o===0)return-1;var s=o-1;(typeof n!="number"||n<0||n>s)&&(n=e>0?-1:s+1);var a=n+e;a<0?a=s:a>s&&(a=0);var c=XS(a,e<0,t,i,r);return c===-1?n>=o?-1:n:c}function XS(n,e,t,i,r){r===void 0&&(r=!1);var o=t.length;if(e){for(var s=n;s>=0;s--)if(!i(t[s],s))return s}else for(var a=n;a<o;a++)if(!i(t[a],a))return a;return r?XS(e?o-1:0,e,t,i):-1}function xQ(n,e,t,i){return i===void 0&&(i=!0),t&&e.some(function(r){return r&&(_Q(r,n,t)||i&&_Q(r,t.document.activeElement,t))})}var E8e=tre(function(n){ire(n).textContent=""},500);function ire(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function B8e(n,e){if(!(!n||!e)){var t=ire(e);t.textContent=n,E8e(e)}}function O8e(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var rre={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function I8e(n,e,t){var i=n.props,r=n.type,o={};Object.keys(e).forEach(function(s){k8e(s,n,e,t),t[s]!==e[s]&&(o[s]=t[s])}),i.onStateChange&&Object.keys(o).length&&i.onStateChange(Sl({type:r},o))}function k8e(n,e,t,i){var r=e.props,o=e.type,s="on"+$K(n)+"Change";r[s]&&i[n]!==void 0&&i[n]!==t[n]&&r[s](Sl({type:o},i))}function T8e(n,e){return e.changes}var MQ=tre(function(n,e){B8e(n,e)},200),R8e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?_t.useLayoutEffect:_t.useEffect,D8e="useId"in En?function(e){var t=e.id,i=e.labelId,r=e.menuId,o=e.getItemId,s=e.toggleButtonId,a=e.inputId,c="downshift-"+En.useId();t||(t=c);var h=_t.useRef({labelId:i||t+"-label",menuId:r||t+"-menu",getItemId:o||function(m){return t+"-item-"+m},toggleButtonId:s||t+"-toggle-button",inputId:a||t+"-input"});return h.current}:function(e){var t=e.id,i=t===void 0?"downshift-"+w8e():t,r=e.labelId,o=e.menuId,s=e.getItemId,a=e.toggleButtonId,c=e.inputId,h=_t.useRef({labelId:r||i+"-label",menuId:o||i+"-menu",getItemId:s||function(m){return i+"-item-"+m},toggleButtonId:a||i+"-toggle-button",inputId:c||i+"-input"});return h.current};function P8e(n,e,t,i){var r,o;if(n===void 0){if(e===void 0)throw new Error(i);r=t[e],o=e}else o=e===void 0?t.indexOf(n):e,r=n;return[r,o]}function $K(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function ore(n){var e=_t.useRef(n);return e.current=n,e}function K8e(n,e,t,i){var r=_t.useRef(),o=_t.useRef(),s=_t.useCallback(function(E,R){o.current=R,E=LR(E,R.props);var P=n(E,R),z=R.props.stateReducer(E,Sl({},R,{changes:P}));return z},[n]),a=_t.useReducer(s,e,t),c=a[0],h=a[1],m=ore(e),v=_t.useCallback(function(E){return h(Sl({props:m.current},E))},[m]),x=o.current;return _t.useEffect(function(){var E=LR(r.current,x?.props),R=x&&r.current&&!i(E,c);R&&I8e(x,E,c),r.current=c},[c,x,i]),[c,v]}var S3={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:T8e,scrollIntoView:M8e,environment:typeof window>"u"?void 0:window};function tv(n,e,t){t===void 0&&(t=rre);var i=n["default"+$K(e)];return i!==void 0?i:t[e]}function E3(n,e,t){t===void 0&&(t=rre);var i=n[e];if(i!==void 0)return i;var r=n["initial"+$K(e)];return r!==void 0?r:tv(n,e,t)}function U8e(n){var e=E3(n,"selectedItem"),t=E3(n,"isOpen"),i=G8e(n),r=E3(n,"inputValue");return{highlightedIndex:i<0&&e&&t?n.items.findIndex(function(o){return n.itemToKey(o)===n.itemToKey(e)}):i,isOpen:t,selectedItem:e,inputValue:r}}function B3(n,e,t){var i=n.items,r=n.initialHighlightedIndex,o=n.defaultHighlightedIndex,s=n.isItemDisabled,a=n.itemToKey,c=e.selectedItem,h=e.highlightedIndex;return i.length===0?-1:r!==void 0&&h===r&&!s(i[r],r)?r:o!==void 0&&!s(i[o],o)?o:c?i.findIndex(function(m){return a(c)===a(m)}):t<0&&!s(i[i.length-1],i.length-1)?i.length-1:t>0&&!s(i[0],0)?0:-1}function L8e(n,e,t){var i=_t.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return _t.useEffect(function(){if(!n)return ere;var r=t.map(function(m){return m.current});function o(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function s(m){i.current.isMouseDown=!1,xQ(m.target,r,n)||e()}function a(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function c(){i.current.isTouchMove=!0}function h(m){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!xQ(m.target,r,n,!1)&&e()}return n.addEventListener("mousedown",o),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",c),n.addEventListener("touchend",h),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",c),n.removeEventListener("touchend",h)}},[t,n,e]),i.current}var z8e=function(){return ere};function F8e(n,e,t,i){i===void 0&&(i={});var r=i.document,o=HK();_t.useEffect(function(){if(!(!n||o||!r)){var s=n(e);MQ(s,r)}},t),_t.useEffect(function(){return function(){MQ.cancel(),O8e(r)}},[r])}function j8e(n){var e=n.highlightedIndex,t=n.isOpen,i=n.itemRefs,r=n.getItemNodeFromIndex,o=n.menuElement,s=n.scrollIntoView,a=_t.useRef(!0);return R8e(function(){e<0||!t||!Object.keys(i.current).length||(a.current===!1?a.current=!0:s(r(e),o))},[e]),a}function wQ(n,e,t){var i;t===void 0&&(t=!0);var r=((i=n.items)==null?void 0:i.length)&&e>=0;return Sl({isOpen:!1,highlightedIndex:-1},r&&Sl({selectedItem:n.items[e],isOpen:tv(n,"isOpen"),highlightedIndex:tv(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function N8e(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function HK(){var n=En.useRef(!0);return En.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function zR(n){var e=tv(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function G8e(n){var e=E3(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var ww={environment:pr.shape({addEventListener:pr.func.isRequired,removeEventListener:pr.func.isRequired,document:pr.shape({createElement:pr.func.isRequired,getElementById:pr.func.isRequired,activeElement:pr.any.isRequired,body:pr.any.isRequired}).isRequired,Node:pr.func.isRequired}),itemToString:pr.func,itemToKey:pr.func,stateReducer:pr.func},sre=Sl({},ww,{getA11yStatusMessage:pr.func,highlightedIndex:pr.number,defaultHighlightedIndex:pr.number,initialHighlightedIndex:pr.number,isOpen:pr.bool,defaultIsOpen:pr.bool,initialIsOpen:pr.bool,selectedItem:pr.any,initialSelectedItem:pr.any,defaultSelectedItem:pr.any,id:pr.string,labelId:pr.string,menuId:pr.string,getItemId:pr.func,toggleButtonId:pr.string,onSelectedItemChange:pr.func,onHighlightedIndexChange:pr.func,onStateChange:pr.func,onIsOpenChange:pr.func,scrollIntoView:pr.func});function Q8e(n,e,t){var i=e.type,r=e.props,o;switch(i){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:B3(r,n,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:B3(r,n,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:r.isItemDisabled(r.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:zR(r),isOpen:tv(r,"isOpen"),selectedItem:tv(r,"selectedItem"),inputValue:tv(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Sl({},n,o)}Sx(Sx({},sre),{items:pr.array.isRequired,isItemDisabled:pr.func});Sx(Sx({},S3),{isItemDisabled:function(){return!1}});var ZK=0,XK=1,JK=2,eU=3,tU=4,nU=5,iU=6,rU=7,oU=8,JS=9,sU=10,are=11,lre=12,aU=13,ure=14,cre=15,Are=16,hre=17,dre=18,lU=19,fre=20,pre=21,uU=22,mre=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:uU,FunctionCloseMenu:hre,FunctionOpenMenu:Are,FunctionReset:pre,FunctionSelectItem:lU,FunctionSetHighlightedIndex:dre,FunctionSetInputValue:fre,FunctionToggleMenu:cre,InputBlur:JS,InputChange:oU,InputClick:sU,InputKeyDownArrowDown:ZK,InputKeyDownArrowUp:XK,InputKeyDownEnd:tU,InputKeyDownEnter:rU,InputKeyDownEscape:JK,InputKeyDownHome:eU,InputKeyDownPageDown:iU,InputKeyDownPageUp:nU,ItemClick:aU,ItemMouseMove:lre,MenuMouseLeave:are,ToggleButtonClick:ure});function W8e(n){var e=U8e(n),t=e.selectedItem,i=e.inputValue;return i===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(i=n.itemToString(t)),Sl({},e,{inputValue:i})}Sl({},sre,{items:pr.array.isRequired,isItemDisabled:pr.func,inputValue:pr.string,defaultInputValue:pr.string,initialInputValue:pr.string,inputId:pr.string,onInputValueChange:pr.func});function q8e(n,e,t,i){var r=_t.useRef(),o=K8e(n,e,t,i),s=o[0],a=o[1],c=HK();return _t.useEffect(function(){if(nre(e,"selectedItem")){if(!c){var h=e.itemToKey(e.selectedItem)!==e.itemToKey(r.current);h&&a({type:uU,inputValue:e.itemToString(e.selectedItem)})}r.current=s.selectedItem===r.current?e.selectedItem:s.selectedItem}},[s.selectedItem,e.selectedItem]),[LR(s,e),a]}var Y8e=Sl({},S3,{isItemDisabled:function(){return!1}});function V8e(n,e){var t,i=e.type,r=e.props,o=e.altKey,s;switch(i){case aU:s={isOpen:tv(r,"isOpen"),highlightedIndex:zR(r),selectedItem:r.items[e.index],inputValue:r.itemToString(r.items[e.index])};break;case ZK:n.isOpen?s={highlightedIndex:GM(n.highlightedIndex,1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:o&&n.selectedItem==null?-1:B3(r,n,1),isOpen:r.items.length>=0};break;case XK:n.isOpen?o?s=wQ(r,n.highlightedIndex):s={highlightedIndex:GM(n.highlightedIndex,-1,r.items,r.isItemDisabled,!0)}:s={highlightedIndex:B3(r,n,-1),isOpen:r.items.length>=0};break;case rU:s=wQ(r,n.highlightedIndex);break;case JK:s=Sl({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case nU:s={highlightedIndex:GM(n.highlightedIndex,-10,r.items,r.isItemDisabled,!0)};break;case iU:s={highlightedIndex:GM(n.highlightedIndex,10,r.items,r.isItemDisabled,!0)};break;case eU:s={highlightedIndex:XS(0,!1,r.items,r.isItemDisabled)};break;case tU:s={highlightedIndex:XS(r.items.length-1,!0,r.items,r.isItemDisabled)};break;case JS:s=Sl({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=r.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:r.items[n.highlightedIndex],inputValue:r.itemToString(r.items[n.highlightedIndex])});break;case oU:s={isOpen:!0,highlightedIndex:zR(r),inputValue:e.inputValue};break;case sU:s={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:B3(r,n,0)};break;case lU:s={selectedItem:e.selectedItem,inputValue:r.itemToString(e.selectedItem)};break;case uU:s={inputValue:e.inputValue};break;default:return Q8e(n,e,mre)}return Sl({},n,s)}var $8e=["onMouseLeave","refKey","ref"],H8e=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],Z8e=["onClick","onPress","refKey","ref"],X8e=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];FR.stateChangeTypes=mre;function FR(n){n===void 0&&(n={});var e=Sl({},Y8e,n),t=e.items,i=e.scrollIntoView,r=e.environment,o=e.getA11yStatusMessage,s=q8e(V8e,e,W8e,N8e),a=s[0],c=s[1],h=a.isOpen,m=a.highlightedIndex,v=a.selectedItem,x=a.inputValue,E=_t.useRef(null),R=_t.useRef({}),P=_t.useRef(null),z=_t.useRef(null),Q=HK(),Y=D8e(e),H=_t.useRef(),Z=ore({state:a,props:e}),J=_t.useCallback(function(Ge){return R.current[Y.getItemId(Ge)]},[Y]);F8e(o,a,[h,m,v,x],r);var $=j8e({menuElement:E.current,highlightedIndex:m,isOpen:h,itemRefs:R,scrollIntoView:i,getItemNodeFromIndex:J});_t.useEffect(function(){var Ge=E3(e,"isOpen");Ge&&P.current&&P.current.focus()},[]),_t.useEffect(function(){Q||(H.current=t.length)});var G=L8e(r,_t.useCallback(function(){Z.current.state.isOpen&&c({type:JS,selectItem:!1})},[c,Z]),_t.useMemo(function(){return[E,z,P]},[E.current,z.current,P.current])),oe=z8e();_t.useEffect(function(){h||(R.current={})},[h]),_t.useEffect(function(){var Ge;!h||!(r!=null&&r.document)||!(P!=null&&(Ge=P.current)!=null&&Ge.focus)||r.document.activeElement!==P.current&&P.current.focus()},[h,r]);var ue=_t.useMemo(function(){return{ArrowDown:function(Te){Te.preventDefault(),c({type:ZK,altKey:Te.altKey})},ArrowUp:function(Te){Te.preventDefault(),c({type:XK,altKey:Te.altKey})},Home:function(Te){Z.current.state.isOpen&&(Te.preventDefault(),c({type:eU}))},End:function(Te){Z.current.state.isOpen&&(Te.preventDefault(),c({type:tU}))},Escape:function(Te){var xt=Z.current.state;(xt.isOpen||xt.inputValue||xt.selectedItem||xt.highlightedIndex>-1)&&(Te.preventDefault(),c({type:JK}))},Enter:function(Te){var xt=Z.current.state;!xt.isOpen||Te.which===229||(Te.preventDefault(),c({type:rU}))},PageUp:function(Te){Z.current.state.isOpen&&(Te.preventDefault(),c({type:nU}))},PageDown:function(Te){Z.current.state.isOpen&&(Te.preventDefault(),c({type:iU}))}}},[c,Z]),xe=_t.useCallback(function(Ge){return Sl({id:Y.labelId,htmlFor:Y.inputId},Ge)},[Y]),ge=_t.useCallback(function(Ge,Te){var xt,st=Ge===void 0?{}:Ge,Tt=st.onMouseLeave,Lt=st.refKey,Ue=Lt===void 0?"ref":Lt,Oe=st.ref,Ee=zM(st,$8e),Ve=Te===void 0?{}:Te;return Ve.suppressRefError,Sl((xt={},xt[Ue]=NM(Oe,function(mt){E.current=mt}),xt.id=Y.menuId,xt.role="listbox",xt["aria-labelledby"]=Ee&&Ee["aria-label"]?void 0:""+Y.labelId,xt.onMouseLeave=Y0(Tt,function(){c({type:are})}),xt),Ee)},[c,oe,Y]),Ie=_t.useCallback(function(Ge){var Te,xt,st=Ge===void 0?{}:Ge,Tt=st.item,Lt=st.index,Ue=st.refKey,Oe=Ue===void 0?"ref":Ue,Ee=st.ref,Ve=st.onMouseMove,mt=st.onMouseDown,pt=st.onClick;st.onPress;var Ct=st.disabled,Rt=zM(st,H8e);Ct!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var Kt=Z.current,on=Kt.props,qn=Kt.state,Qn=P8e(Tt,Lt,on.items,"Pass either item or index to getItemProps!"),xi=Qn[0],Kn=Qn[1],Un=on.isItemDisabled(xi,Kn),Cn="onClick",ei=pt,Dn=function(){G.isTouchEnd||Kn===qn.highlightedIndex||($.current=!1,c({type:lre,index:Kn,disabled:Un}))},It=function(){c({type:aU,index:Kn})},Ce=function(le){return le.preventDefault()};return Sl((Te={},Te[Oe]=NM(Ee,function(re){re&&(R.current[Y.getItemId(Kn)]=re)}),Te["aria-disabled"]=Un,Te["aria-selected"]=Kn===qn.highlightedIndex,Te.id=Y.getItemId(Kn),Te.role="option",Te),!Un&&(xt={},xt[Cn]=Y0(ei,It),xt),{onMouseMove:Y0(Ve,Dn),onMouseDown:Y0(mt,Ce)},Rt)},[c,Y,Z,G,$]),Me=_t.useCallback(function(Ge){var Te,xt=Ge===void 0?{}:Ge,st=xt.onClick;xt.onPress;var Tt=xt.refKey,Lt=Tt===void 0?"ref":Tt,Ue=xt.ref,Oe=zM(xt,Z8e),Ee=Z.current.state,Ve=function(){c({type:ure})};return Sl((Te={},Te[Lt]=NM(Ue,function(mt){z.current=mt}),Te["aria-controls"]=Y.menuId,Te["aria-expanded"]=Ee.isOpen,Te.id=Y.toggleButtonId,Te.tabIndex=-1,Te),!Oe.disabled&&Sl({},{onClick:Y0(st,Ve)}),Oe)},[c,Z,Y]),ke=_t.useCallback(function(Ge,Te){var xt,st=Ge===void 0?{}:Ge,Tt=st.onKeyDown,Lt=st.onChange,Ue=st.onInput,Oe=st.onBlur;st.onChangeText;var Ee=st.onClick,Ve=st.refKey,mt=Ve===void 0?"ref":Ve,pt=st.ref,Ct=zM(st,X8e),Rt=Te===void 0?{}:Te;Rt.suppressRefError;var Kt=Z.current.state,on=function(Dn){var It=S8e(Dn);It&&ue[It]&&ue[It](Dn)},qn=function(Dn){c({type:oU,inputValue:Dn.target.value})},Qn=function(Dn){if(r!=null&&r.document&&Kt.isOpen&&!G.isMouseDown){var It=Dn.relatedTarget===null&&r.document.activeElement!==r.document.body;c({type:JS,selectItem:!It})}},xi=function(){c({type:sU})},Kn="onChange",Un={};if(!Ct.disabled){var Cn;Un=(Cn={},Cn[Kn]=Y0(Lt,Ue,qn),Cn.onKeyDown=Y0(Tt,on),Cn.onBlur=Y0(Oe,Qn),Cn.onClick=Y0(Ee,xi),Cn)}return Sl((xt={},xt[mt]=NM(pt,function(ei){P.current=ei}),xt["aria-activedescendant"]=Kt.isOpen&&Kt.highlightedIndex>-1?Y.getItemId(Kt.highlightedIndex):"",xt["aria-autocomplete"]="list",xt["aria-controls"]=Y.menuId,xt["aria-expanded"]=Kt.isOpen,xt["aria-labelledby"]=Ct&&Ct["aria-label"]?void 0:Y.labelId,xt.autoComplete="off",xt.id=Y.inputId,xt.role="combobox",xt.value=Kt.inputValue,xt),Un,Ct)},[c,Y,r,ue,Z,G,oe]),je=_t.useCallback(function(){c({type:cre})},[c]),Be=_t.useCallback(function(){c({type:hre})},[c]),Ye=_t.useCallback(function(){c({type:Are})},[c]),At=_t.useCallback(function(Ge){c({type:dre,highlightedIndex:Ge})},[c]),yt=_t.useCallback(function(Ge){c({type:lU,selectedItem:Ge})},[c]),Le=_t.useCallback(function(Ge){c({type:fre,inputValue:Ge})},[c]),De=_t.useCallback(function(){c({type:pre})},[c]);return{getItemProps:Ie,getLabelProps:xe,getMenuProps:ge,getInputProps:ke,getToggleButtonProps:Me,toggleMenu:je,openMenu:Ye,closeMenu:Be,setHighlightedIndex:At,setInputValue:Le,selectItem:yt,reset:De,highlightedIndex:m,isOpen:h,selectedItem:v,inputValue:x}}ww.stateReducer,ww.itemToKey,ww.environment,pr.array,pr.array,pr.array,pr.func,pr.number,pr.number,pr.number,pr.func,pr.func,pr.string,pr.string;S3.itemToKey,S3.stateReducer,S3.environment;function ci(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ci=function(){return s},s}ci();const SQ=(ci().s[0]++,140);function E5({value:n,options:e=(ci().b[0][0]++,[]),onChange:t=(ci().b[1][0]++,()=>{ci().f[1]++}),"aria-label":i}){ci().f[0]++;const[r,o]=(ci().s[1]++,En.useState((ci().b[2][0]++,n||(ci().b[2][1]++,"")))),s=(ci().s[2]++,En.useRef(null)),[a,c]=(ci().s[3]++,En.useState(SQ)),h=(ci().s[4]++,En.useMemo(()=>{ci().f[2]++;const Q=(ci().s[5]++,r.toLowerCase());return ci().s[6]++,e.filter(Y=>(ci().f[3]++,ci().s[7]++,Y[0].toLowerCase().includes(Q)))},[e,r])),m=(ci().s[8]++,En.useCallback(()=>{if(ci().f[4]++,ci().s[9]++,s.current){ci().b[3][0]++;const Q=(ci().s[10]++,window.innerHeight-s.current.getBoundingClientRect().top);ci().s[11]++,c(Math.min(Q,SQ))}else ci().b[3][1]++},[])),{isOpen:v,getMenuProps:x,getInputProps:E,getItemProps:R,highlightedIndex:P,openMenu:z}=(ci().s[12]++,FR({items:h,inputValue:r,itemToString:Q=>(ci().f[5]++,ci().s[13]++,Q?(ci().b[4][0]++,Q[0]):(ci().b[4][1]++,"")),stateReducer:(Q,Y)=>(ci().f[6]++,ci().s[14]++,Y.type===FR.stateChangeTypes.InputClick?(ci().b[5][0]++,ci().s[15]++,{...Y.changes,isOpen:!0}):(ci().b[5][1]++,ci().s[16]++,Y.changes)),onSelectedItemChange:({selectedItem:Q})=>{ci().f[7]++;const Y=(ci().s[17]++,Q?(ci().b[6][0]++,Q[0]):(ci().b[6][1]++,""));ci().s[18]++,o(Y),ci().s[19]++,t(Q?(ci().b[7][0]++,Q[0]):(ci().b[7][1]++,void 0))},onInputValueChange:({inputValue:Q})=>{ci().f[8]++,ci().s[20]++,typeof Q=="string"?(ci().b[8][0]++,ci().s[21]++,o(Q),ci().s[22]++,t(Q===""?(ci().b[9][0]++,void 0):(ci().b[9][1]++,Q)),ci().s[23]++,z()):ci().b[8][1]++}}));return ci().s[24]++,En.useEffect(()=>{ci().f[9]++,ci().s[25]++,v?(ci().b[10][0]++,ci().s[26]++,m()):ci().b[10][1]++},[v,m]),ci().s[27]++,En.useEffect(()=>(ci().f[10]++,ci().s[28]++,window.addEventListener("resize",m),ci().s[29]++,()=>(ci().f[11]++,ci().s[30]++,window.removeEventListener("resize",m))),[m]),ci().s[31]++,En.useEffect(()=>{ci().f[12]++,ci().s[32]++,o((ci().b[11][0]++,n||(ci().b[11][1]++,"")))},[n]),ci().s[33]++,te.jsxs("div",{className:"maputnik-autocomplete",children:[te.jsx("input",{...E({"aria-label":i,className:"maputnik-string",spellCheck:!1,onFocus:()=>(ci().f[13]++,ci().s[34]++,z())})}),te.jsx("div",{...x({},{suppressRefError:!0}),ref:s,style:{position:"fixed",overflow:"auto",maxHeight:a,zIndex:998},className:"maputnik-autocomplete-menu",children:(ci().b[12][0]++,v&&(ci().b[12][1]++,h.map((Q,Y)=>(ci().f[14]++,ci().s[35]++,te.jsx("div",{...R({item:Q,index:Y,className:c0("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":P===Y})}),children:Q[1]},Q[0])))))})]})}function om(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="787db584cc9becf4089365283e16f9ba747f4840",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAUtD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"787db584cc9becf4089365283e16f9ba747f4840"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return om=function(){return s},s}om();om().s[0]++;const J8e=({onChange:n=(om().b[0][0]++,()=>{om().f[1]++}),sourceIds:e=(om().b[1][0]++,[]),wdKey:t,value:i,error:r,t:o})=>(om().f[0]++,om().s[1]++,te.jsx(_s,{label:o("Source"),fieldSpec:Zr.layer.source,error:r,"data-wd-key":t,children:te.jsx(E5,{value:i,onChange:n,options:e?.map(s=>(om().f[2]++,om().s[2]++,[s,s]))})})),gre=(om().s[3]++,Fo()(J8e));function sm(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="61cb059654b456e27f782356448ebd0362f3cb6a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAStD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"61cb059654b456e27f782356448ebd0362f3cb6a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return sm=function(){return s},s}sm();sm().s[0]++;const e7e=({onChange:n=(sm().b[0][0]++,()=>{sm().f[1]++}),sourceLayerIds:e=(sm().b[1][0]++,[]),value:t,error:i,t:r})=>(sm().f[0]++,sm().s[1]++,te.jsx(_s,{label:r("Source Layer"),fieldSpec:ns.layer["source-layer"],"data-wd-key":"layer-source-layer",error:i,children:te.jsx(E5,{value:t,onChange:n,options:e?.map(o=>(sm().f[2]++,sm().s[2]++,[o,o]))})})),yre=(sm().s[3]++,Fo()(e7e));function cU(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return cU=function(){return s},s}cU();const jR=(cU().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function yn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",e="90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAGtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa;AAAA,IAC1B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACX,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACZ;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90da8e5ee6bdbe488a5f45bfae015ac94b0d70a9"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yn=function(){return s},s}yn();class t7e extends En.Component{addLayer=(yn().s[0]++,()=>{if(yn().f[0]++,yn().s[1]++,this.props.layers.some(i=>(yn().f[1]++,yn().s[2]++,i.id===this.state.id))){yn().b[0][0]++,yn().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),yn().s[4]++;return}else yn().b[0][1]++;const e=(yn().s[5]++,this.props.layers.slice(0)),t=(yn().s[6]++,{id:this.state.id,type:this.state.type});yn().s[7]++,this.state.type!=="background"?(yn().b[1][0]++,yn().s[8]++,t.source=this.state.source,yn().s[9]++,yn().b[3][0]++,!jR.includes(this.state.type)&&(yn().b[3][1]++,this.state["source-layer"])?(yn().b[2][0]++,yn().s[10]++,t["source-layer"]=this.state["source-layer"]):yn().b[2][1]++):yn().b[1][1]++,yn().s[11]++,e.push(t),yn().s[12]++,this.setState({error:null},()=>{yn().f[2]++,yn().s[13]++,this.props.onLayersChange(e),yn().s[14]++,this.props.onOpenToggle()})});constructor(e){yn().f[3]++,yn().s[15]++,super(e);const t=(yn().s[16]++,{type:"fill",id:"",error:null});if(yn().s[17]++,Object.keys(e.sources).length>0){yn().b[4][0]++,yn().s[18]++,t.source=Object.keys(this.props.sources)[0];const i=(yn().s[19]++,yn().b[5][0]++,this.props.sources[t.source].layers||(yn().b[5][1]++,[]));yn().s[20]++,i.length>0?(yn().b[6][0]++,yn().s[21]++,t["source-layer"]=i[0]):yn().b[6][1]++}else yn().b[4][1]++;yn().s[22]++,this.state=t}componentDidUpdate(e,t){yn().f[4]++;const i=(yn().s[23]++,t.type),r=(yn().s[24]++,this.state.type),o=(yn().s[25]++,this.getSources(i)),s=(yn().s[26]++,this.getSources(r));yn().s[27]++,yn().b[8][0]++,i!==r&&(yn().b[8][1]++,t.source!=="")&&(yn().b[8][2]++,o.indexOf(t.source)>-1)&&(yn().b[8][3]++,s.indexOf(this.state.source)<0)?(yn().b[7][0]++,yn().s[28]++,this.setState({source:""})):yn().b[7][1]++}getLayersForSource(e){yn().f[5]++;const t=(yn().s[29]++,yn().b[9][0]++,this.props.sources[e]||(yn().b[9][1]++,{}));return yn().s[30]++,yn().b[10][0]++,t.layers||(yn().b[10][1]++,[])}getSources(e){switch(yn().f[6]++,yn().s[31]++,e){case"background":return yn().b[11][0]++,yn().s[32]++,[];case"hillshade":yn().b[11][1]++;case"color-relief":return yn().b[11][2]++,yn().s[33]++,Object.entries(this.props.sources).filter(([t,i])=>(yn().f[7]++,yn().s[34]++,i.type==="raster-dem")).map(([t,i])=>(yn().f[8]++,yn().s[35]++,t));case"raster":return yn().b[11][3]++,yn().s[36]++,Object.entries(this.props.sources).filter(([t,i])=>(yn().f[9]++,yn().s[37]++,i.type==="raster")).map(([t,i])=>(yn().f[10]++,yn().s[38]++,t));case"heatmap":yn().b[11][4]++;case"circle":yn().b[11][5]++;case"fill":yn().b[11][6]++;case"fill-extrusion":yn().b[11][7]++;case"line":yn().b[11][8]++;case"symbol":return yn().b[11][9]++,yn().s[39]++,Object.entries(this.props.sources).filter(([t,i])=>(yn().f[11]++,yn().s[40]++,yn().b[12][0]++,i.type==="vector"||(yn().b[12][1]++,i.type==="geojson"))).map(([t,i])=>(yn().f[12]++,yn().s[41]++,t));default:return yn().b[11][10]++,yn().s[42]++,[]}}render(){yn().f[13]++;const e=(yn().s[43]++,this.props.t),t=(yn().s[44]++,this.getSources(this.state.type)),i=(yn().s[45]++,this.getLayersForSource(this.state.source));let r;return yn().s[46]++,this.state.error?(yn().b[13][0]++,yn().s[47]++,r=te.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,te.jsx("a",{href:"#",onClick:()=>(yn().f[14]++,yn().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:""})]})):yn().b[13][1]++,yn().s[49]++,te.jsxs(C1,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[r,te.jsxs("div",{className:"maputnik-add-layer",children:[te.jsx(Jie,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:o=>{yn().f[15]++,yn().s[50]++,this.setState({id:o,error:null})}}),te.jsx(Xie,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:o=>(yn().f[16]++,yn().s[51]++,this.setState({type:o}))}),(yn().b[14][0]++,this.state.type!=="background"&&(yn().b[14][1]++,te.jsx(gre,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:o=>(yn().f[17]++,yn().s[52]++,this.setState({source:o}))}))),(yn().b[15][0]++,!jR.includes(this.state.type)&&(yn().b[15][1]++,te.jsx(yre,{sourceLayerIds:i,value:this.state["source-layer"],onChange:o=>(yn().f[18]++,yn().s[53]++,this.setState({"source-layer":o}))}))),te.jsx(Zs,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const n7e=(yn().s[54]++,Fo()(t7e));function bb(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bb=function(){return s},s}bb();let EQ=(bb().s[0]++,0);function Ex(n=(bb().b[0][0]++,"")){return bb().f[0]++,bb().s[1]++,EQ++,bb().s[2]++,n+EQ}function ur(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAId,gBAAS,WAAW,OAA2B,SAAqC;AACzF,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a81b3c8ffc06f88598225aa1f9b90e3bb6da08e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ur=function(){return s},s}ur();function i7e(n,e){ur().f[0]++;const t=(ur().s[0]++,{...n.paint});ur().s[1]++,Object.keys(t).forEach(r=>{ur().f[1]++,ur().s[2]++,r in ns["paint_"+e]?ur().b[0][1]++:(ur().b[0][0]++,ur().s[3]++,delete t[r])});const i=(ur().s[4]++,{...n.layout});return ur().s[5]++,Object.keys(i).forEach(r=>{ur().f[2]++,ur().s[6]++,r in ns["layout_"+e]?ur().b[1][1]++:(ur().b[1][0]++,ur().s[7]++,delete i[r])}),ur().s[8]++,{...n,paint:t,layout:i,type:e}}function r7e(n,e,t,i){if(ur().f[3]++,ur().s[9]++,i===void 0)if(ur().b[2][0]++,ur().s[10]++,e){ur().b[3][0]++;const r=(ur().s[11]++,{...n,[e]:{...n[e]}});return ur().s[12]++,delete r[e][t],ur().s[13]++,Object.keys(r[e]).length<1?(ur().b[4][0]++,ur().s[14]++,delete r[e]):ur().b[4][1]++,ur().s[15]++,r}else{ur().b[3][1]++;const r=(ur().s[16]++,{...n});return ur().s[17]++,delete r[t],ur().s[18]++,r}else return ur().b[2][1]++,ur().s[19]++,e?(ur().b[5][0]++,ur().s[20]++,{...n,[e]:{...n[e],[t]:i}}):(ur().b[5][1]++,ur().s[21]++,{...n,[t]:i})}function R_(n){return ur().f[4]++,ur().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function o7e(n,e){ur().f[5]++;const t=(ur().s[23]++,R_(n[e].id));let i=(ur().s[24]++,e);ur().s[25]++;for(let r=(ur().s[26]++,e);r>0;r--){const o=(ur().s[27]++,R_(n[r-1].id));if(ur().s[28]++,o===t)ur().b[6][0]++,ur().s[29]++,i=r-1;else return ur().b[6][1]++,ur().s[30]++,i}return ur().s[31]++,i}function zt(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="3031fd34f43c8d651f443f714d2dfaaa5f809423",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:274,column:6}},82:{start:{line:277,column:27},end:{line:277,column:72}},83:{start:{line:278,column:18},end:{line:291,column:1}},84:{start:{line:279,column:18},end:{line:279,column:97}},85:{start:{line:280,column:24},end:{line:288,column:3}},86:{start:{line:281,column:29},end:{line:281,column:34}},87:{start:{line:282,column:4},end:{line:282,column:22}},88:{start:{line:282,column:15},end:{line:282,column:22}},89:{start:{line:283,column:21},end:{line:283,column:78}},90:{start:{line:283,column:55},end:{line:283,column:77}},91:{start:{line:284,column:21},end:{line:284,column:76}},92:{start:{line:284,column:55},end:{line:284,column:75}},93:{start:{line:285,column:4},end:{line:287,column:5}},94:{start:{line:286,column:6},end:{line:286,column:48}},95:{start:{line:289,column:19},end:{line:289,column:56}},96:{start:{line:289,column:47},end:{line:289,column:55}},97:{start:{line:290,column:2},end:{line:290,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:275,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:278,column:18},end:{line:278,column:19}},loc:{start:{line:278,column:29},end:{line:291,column:1}},line:278},20:{name:"(anonymous_20)",decl:{start:{line:280,column:24},end:{line:280,column:25}},loc:{start:{line:280,column:35},end:{line:288,column:3}},line:280},21:{name:"(anonymous_21)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:77}},line:283},22:{name:"(anonymous_22)",decl:{start:{line:284,column:44},end:{line:284,column:45}},loc:{start:{line:284,column:55},end:{line:284,column:75}},line:284},23:{name:"(anonymous_23)",decl:{start:{line:289,column:36},end:{line:289,column:37}},loc:{start:{line:289,column:47},end:{line:289,column:55}},line:289}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:251,column:26},end:{line:251,column:96}},type:"cond-expr",locations:[{start:{line:251,column:69},end:{line:251,column:82}},{start:{line:251,column:85},end:{line:251,column:96}}],line:251},22:{loc:{start:{line:282,column:4},end:{line:282,column:22}},type:"if",locations:[{start:{line:282,column:4},end:{line:282,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},23:{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},24:{loc:{start:{line:285,column:8},end:{line:285,column:67}},type:"binary-expr",locations:[{start:{line:285,column:8},end:{line:285,column:23}},{start:{line:285,column:27},end:{line:285,column:42}},{start:{line:285,column:46},end:{line:285,column:67}}],line:285}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAoEd,YApEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA+B,uBAAuB;AAwBtD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAA6B,eAAY,qBACzD;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,eAAe,EAAE,sBAAsB,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;AAE9F,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3031fd34f43c8d651f443f714d2dfaaa5f809423"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return zt=function(){return s},s}zt();class s7e extends En.Component{static defaultProps=(zt().s[0]++,{onLayerSelect:()=>{zt().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){zt().f[1]++,zt().s[1]++,super(e),zt().s[2]++,this.selectedItemRef=En.createRef(),zt().s[3]++,this.scrollContainerRef=En.createRef(),zt().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Ex()},isOpen:{add:!1}}}toggleModal(e){zt().f[2]++,zt().s[5]++,this.setState({keys:{...this.state.keys,[e]:+Ex()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(zt().s[6]++,()=>{zt().f[3]++;let e=(zt().s[7]++,0);const t=(zt().s[8]++,{});zt().s[9]++,this.groupedLayers().forEach(i=>{zt().f[4]++;const r=(zt().s[10]++,R_(i[0].id)),o=(zt().s[11]++,[r,e].join("-"));zt().s[12]++,i.length>1?(zt().b[0][0]++,zt().s[13]++,t[o]=this.state.areAllGroupsExpanded):zt().b[0][1]++,zt().s[14]++,i.forEach(s=>{zt().f[5]++,zt().s[15]++,e+=1})}),zt().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){zt().f[6]++;const e=(zt().s[17]++,[]),t=(zt().s[18]++,new Map);zt().s[19]++;for(let i=(zt().s[20]++,0);i<this.props.layers.length;i++){const r=(zt().s[21]++,this.props.layers[i]),o=(zt().s[22]++,this.props.layers[i-1]);zt().s[23]++,t.set(r.id,t.has(r.id)?(zt().b[1][0]++,t.get(r.id)+1):(zt().b[1][1]++,0));const s=(zt().s[24]++,{...r,key:`layers-list-${r.id}-${t.get(r.id)}`});if(zt().s[25]++,zt().b[3][0]++,o&&(zt().b[3][1]++,R_(o.id)==R_(s.id))){zt().b[2][0]++;const a=(zt().s[26]++,e[e.length-1]);zt().s[27]++,a.push(s)}else zt().b[2][1]++,zt().s[28]++,e.push([s])}return zt().s[29]++,e}toggleLayerGroup(e,t){zt().f[7]++;const i=(zt().s[30]++,[e,t].join("-")),r=(zt().s[31]++,{...this.state.collapsedGroups});zt().s[32]++,i in this.state.collapsedGroups?(zt().b[4][0]++,zt().s[33]++,r[i]=!this.state.collapsedGroups[i]):(zt().b[4][1]++,zt().s[34]++,r[i]=!1),zt().s[35]++,this.setState({collapsedGroups:r})}isCollapsed(e,t){zt().f[8]++;const i=(zt().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return zt().s[37]++,i===void 0?(zt().b[5][0]++,!0):(zt().b[5][1]++,i)}shouldComponentUpdate(e,t){if(zt().f[9]++,zt().s[38]++,this.state!==t)return zt().b[6][0]++,zt().s[39]++,!0;zt().b[6][1]++;function i(c){zt().f[10]++;const h=(zt().s[40]++,{id:c.id});return zt().s[41]++,c.layout?(zt().b[7][0]++,zt().s[42]++,h.layout={visibility:c.layout.visibility}):zt().b[7][1]++,zt().s[43]++,h}const r=(zt().s[44]++,cT.isEqual(e.layers.map(i),this.props.layers.map(i)));function o(c){zt().f[11]++;const h=(zt().s[45]++,{...c});return zt().s[46]++,delete h.layers,zt().s[47]++,h}const s=(zt().s[48]++,cT.isEqual(o(this.props),o(e))),a=(zt().s[49]++,zt().b[8][0]++,!(r&&(zt().b[8][1]++,s)));return zt().s[50]++,a}componentDidUpdate(e){if(zt().f[12]++,zt().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){zt().b[9][0]++;const t=(zt().s[52]++,this.selectedItemRef.current);if(zt().s[53]++,zt().b[11][0]++,t&&(zt().b[11][1]++,t.node)){zt().b[10][0]++;const i=(zt().s[54]++,t.node),r=(zt().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),o=(zt().s[56]++,new IntersectionObserver(s=>{zt().f[13]++,zt().s[57]++,o.unobserve(i),zt().s[58]++,zt().b[13][0]++,s.length>0&&(zt().b[13][1]++,s[0].intersectionRatio<1)?(zt().b[12][0]++,zt().s[59]++,i.scrollIntoView()):zt().b[12][1]++},r));zt().s[60]++,o.observe(i)}else zt().b[10][1]++}else zt().b[9][1]++}render(){zt().f[14]++;const e=(zt().s[61]++,[]);let t=(zt().s[62]++,0);const i=(zt().s[63]++,this.groupedLayers());zt().s[64]++,i.forEach(o=>{zt().f[15]++;const s=(zt().s[65]++,R_(o[0].id));if(zt().s[66]++,o.length>1){zt().b[14][0]++;const a=(zt().s[67]++,te.jsx(lSe,{"data-wd-key":[s,t].join("-"),"aria-controls":o.map(c=>(zt().f[16]++,zt().s[68]++,c.key)).join(" "),title:s,isActive:(zt().b[15][0]++,!this.isCollapsed(s,t)||(zt().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,s,t)},`group-${s}-${t}`));zt().s[69]++,e.push(a)}else zt().b[14][1]++;zt().s[70]++,o.forEach((a,c)=>{zt().f[17]++;const h=(zt().s[71]++,o7e(this.props.layers,t)),m=(zt().s[72]++,this.props.errors.find(E=>(zt().f[18]++,zt().s[73]++,zt().b[16][0]++,E.parsed&&(zt().b[16][1]++,E.parsed.type==="layer")&&(zt().b[16][2]++,E.parsed.data.index==t)))),v=(zt().s[74]++,{});zt().s[75]++,t===this.props.selectedLayerIndex?(zt().b[17][0]++,zt().s[76]++,v.ref=this.selectedItemRef):zt().b[17][1]++;const x=(zt().s[77]++,te.jsx(cSe,{className:c0({"maputnik-layer-list-item-collapsed":(zt().b[18][0]++,o.length>1&&(zt().b[18][1]++,this.isCollapsed(s,h))&&(zt().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(zt().b[19][0]++,c==o.length-1&&(zt().b[19][1]++,o.length>1)),"maputnik-layer-list-item--error":!!m}),id:a.key,layerId:a.id,layerIndex:t,layerType:a.type,visibility:(zt().b[20][0]++,a.layout||(zt().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...v},a.key));zt().s[78]++,e.push(x),zt().s[79]++,t+=1})});const r=(zt().s[80]++,this.props.t);return zt().s[81]++,te.jsxs("section",{className:"maputnik-layer-list","data-wd-key":"layer-list",role:"complementary","aria-label":r("Layers list"),ref:this.scrollContainerRef,children:[te.jsx(n7e,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),te.jsxs("header",{className:"maputnik-layer-list-header","data-wd-key":"layer-list.header",children:[te.jsx("span",{className:"maputnik-layer-list-header-title",children:r("Layers")}),te.jsx("span",{className:"maputnik-space"}),te.jsx("div",{className:"maputnik-default-property",children:te.jsx("div",{className:"maputnik-multibutton",children:te.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(zt().b[21][0]++,r("Collapse")):(zt().b[21][1]++,r("Expand"))})})}),te.jsx("div",{className:"maputnik-default-property",children:te.jsx("div",{className:"maputnik-multibutton",children:te.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:r("Add Layer")})})})]}),te.jsx("div",{role:"navigation","aria-label":r("Layers list"),children:te.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const a7e=(zt().s[82]++,Fo()(s7e));zt().s[83]++;const l7e=n=>{zt().f[19]++;const e=(zt().s[84]++,PMe(DMe(RK,{activationConstraint:{distance:5}})));zt().s[85]++;const t=r=>{zt().f[20]++;const{active:o,over:s}=(zt().s[86]++,r);if(zt().s[87]++,s)zt().b[22][1]++;else{zt().b[22][0]++,zt().s[88]++;return}const a=(zt().s[89]++,n.layers.findIndex(h=>(zt().f[21]++,zt().s[90]++,h.id===o.id))),c=(zt().s[91]++,n.layers.findIndex(h=>(zt().f[22]++,zt().s[92]++,h.id===s.id)));zt().s[93]++,zt().b[24][0]++,a!==-1&&(zt().b[24][1]++,c!==-1)&&(zt().b[24][2]++,a!==c)?(zt().b[23][0]++,zt().s[94]++,n.onMoveLayer({oldIndex:a,newIndex:c})):zt().b[23][1]++},i=(zt().s[95]++,n.layers.map(r=>(zt().f[23]++,zt().s[96]++,r.id)));return zt().s[97]++,te.jsx(zwe,{sensors:e,collisionDetection:FMe,onDragEnd:t,children:te.jsx(Xwe,{items:i,strategy:Hwe,children:te.jsx(a7e,{...n})})})};var M8,BQ;function vre(){if(BQ)return M8;BQ=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(s,a){n[s]=a}function i(s){delete n[s]}function r(s,a){var c=n[s];if(!c)throw new Error("Cannot open "+e);c.openMenu(a)}function o(s,a){var c=n[s];if(!c)throw new Error("Cannot close "+e);c.closeMenu(a)}return M8={registerManager:t,unregisterManager:i,openMenu:r,closeMenu:o},M8}var w8,OQ;function u7e(){if(OQ)return w8;OQ=1;function n(r){r=r||{};var o=r.keybindings||{};this._settings={keybindings:{next:o.next||{keyCode:40},prev:o.prev||{keyCode:38},first:o.first,last:o.last},wrap:r.wrap,stringSearch:r.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var s,a;for(s in this._settings.keybindings)a=this._settings.keybindings[s],a&&[].concat(a).forEach((function(c){c.metaKey=c.metaKey||!1,c.ctrlKey=c.ctrlKey||!1,c.altKey=c.altKey||!1,c.shiftKey=c.shiftKey||!1,this._keybindingsLookup.push({action:s,eventMatcher:c})}).bind(this));this._searchString="",this._members=[],r.members&&this.setMembers(r.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(r){var o=this._getActiveElementIndex();if(o!==-1){var s=!1;this._keybindingsLookup.forEach((function(a){if(e(a.eventMatcher,r))switch(s=!0,r.preventDefault(),a.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),s||this._handleUnboundKey(r)}},n.prototype.moveFocusForward=function(){var r=this._getActiveElementIndex(),o;return r<this._members.length-1?o=r+1:this._settings.wrap?o=0:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusBack=function(){var r=this._getActiveElementIndex(),o;return r>0?o=r-1:this._settings.wrap?o=this._members.length-1:o=r,this.focusNodeAtIndex(o),o},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(r){if(this._settings.stringSearch){if(this._searchString!==""&&(r.key===" "||r.keyCode===32))return r.preventDefault(),-1;if(!t(r.keyCode)||r.ctrlKey||r.metaKey||r.altKey)return-1;r.preventDefault(),this._addToSearchString(String.fromCharCode(r.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(r){this._searchString+=r.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var r=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){r._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(r){for(var o,s=0,a=this._members.length;s<a;s++)if(o=this._members[s],!!o.text&&o.text.indexOf(r)===0)return i(o.node)},n.prototype._findIndexOfNode=function(r){for(var o=0,s=this._members.length;o<s;o++)if(this._members[o].node===r)return o;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(r){var o=this._members[r];return o&&i(o.node),this},n.prototype.addMember=function(r,o){var s=r.node||r,a=r.text||s.getAttribute("data-focus-group-text")||s.textContent||"";this._checkNode(s);var c=a.replace(/[\W_]/g,"").toLowerCase(),h={node:s,text:c};return o!=null?this._members.splice(o,0,h):this._members.push(h),this},n.prototype.removeMember=function(r){var o=typeof r=="number"?r:this._findIndexOfNode(r);if(o!==-1)return this._members.splice(o,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(r){this.clearMembers();for(var o=0,s=r.length;o<s;o++)this.addMember(r[o]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(r){if(!r.nodeType||r.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return r};function e(r,o){for(var s in r)if(o[s]!==void 0&&r[s]!==o[s])return!1;return!0}function t(r){return r>=65&&r<=90}function i(r){!r||!r.focus||(r.focus(),r.tagName.toLowerCase()==="input"&&r.select())}return w8=function(o){return new n(o)},w8}var S8,IQ;function c7e(){if(IQ)return S8;IQ=1;var n=u7e(),e=vre(),t={wrap:!0,stringSearch:!0},i={init:function(c){this.updateOptions(c),this.handleBlur=r.bind(this),this.handleSelection=o.bind(this),this.handleMenuKey=s.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(c){var h=this.options;this.options=c||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),h&&h.id&&h.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(c){this.focusGroup.focusNodeAtIndex(c)},addItem:function(c){this.focusGroup.addMember(c)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(c){this.focusGroup._handleUnboundKey(c)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(c){if(!this.isOpen&&(c=c||{},c.focusMenu===void 0&&(c.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),c.focusMenu)){var h=this;this.moveFocusTimer=setTimeout(function(){h.focusItem(0)},0)}},closeMenu:function(c){this.isOpen&&(c=c||{},this.isOpen=!1,this.update(),c.focusButton&&this.button.ref.current.focus())},toggleMenu:function(c,h){c=c||{},h=h||{},this.isOpen?this.closeMenu(c):this.openMenu(h)}};function r(){var a=this;a.blurTimer=setTimeout(function(){if(a.button){var c=a.button.ref.current;if(c){var h=c.ownerDocument.activeElement;if(!(c&&h===c)){var m=a.menu.ref.current;if(m===h){a.focusItem(0);return}m&&m.contains(h)||a.isOpen&&a.closeMenu({focusButton:!1})}}}},0)}function o(a,c){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(a,c)}function s(a){if(this.isOpen)switch(a.key){case"Escape":a.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":a.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":a.preventDefault(),this.focusGroup.moveFocusToLast();break}}return S8=function(a){var c=Object.create(i);return c.init(a),c},S8}var E8,kQ;function B6(){if(kQ)return E8;kQ=1;var n=Ba(),e=n.createContext();return E8=e,E8}var B8,TQ;function O6(){if(TQ)return B8;TQ=1;var n=b1();return B8={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},B8}var O8,RQ;function I6(){return RQ||(RQ=1,O8=function(n,e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]||(n[i]=e[i]))}),O8}var I8,DQ;function A7e(){if(DQ)return I8;DQ=1;function n(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")}function e(E,R){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:E}function t(E,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);E.prototype=Object.create(R&&R.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(E,R):E.__proto__=R)}var i=Ba(),r=b1(),o=c7e(),s=B6(),a=O6(),c=a.refType,h=I6(),m={children:r.node.isRequired,forwardedRef:c,onMenuToggle:r.func,onSelection:r.func,closeOnSelection:r.bool,closeOnBlur:r.bool,tag:r.string},v=function(R){return{onMenuToggle:R.onMenuToggle,onSelection:R.onSelection,closeOnSelection:R.closeOnSelection,closeOnBlur:R.closeOnBlur,id:R.id}},x=(function(E){t(R,E);function R(P){n(this,R);var z=e(this,E.call(this,P));return z.manager=o(v(P)),z}return R.prototype.componentDidUpdate=function(){this.manager.updateOptions(v(this.props))},R.prototype.render=function(){var z={};return h(z,this.props,m),i.createElement(s.Provider,{value:this.manager},i.createElement(this.props.tag,z,this.props.children))},R})(i.Component);return x.propTypes=m,x.defaultProps={tag:"div"},I8=i.forwardRef(function(E,R){var P={forwardedRef:R};return h(P,E,{children:m.children,forwardedRef:m.forwardedRef}),h(P,{forwardedRef:R}),i.createElement(x,P,E.children)}),I8}var k8,PQ;function h7e(){if(PQ)return k8;PQ=1;function n(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function e(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function t(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}var i=Ba(),r=b1(),o=B6(),s=O6(),a=s.refType,c=I6(),h={ambManager:r.object.isRequired,children:r.node.isRequired,disabled:r.bool,forwardedRef:a,tag:r.string},m=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},v=(function(x){t(E,x);function E(){var R,P,z;n(this,E);for(var Q=arguments.length,Y=Array(Q),H=0;H<Q;H++)Y[H]=arguments[H];return z=(R=(P=e(this,x.call.apply(x,[this].concat(Y))),P),P.ref=i.createRef(),P.handleKeyDown=function(Z){if(!P.props.disabled){var J=P.props.ambManager;switch(Z.key){case"ArrowDown":Z.preventDefault(),J.isOpen?J.focusItem(0):J.openMenu();break;case"Enter":case" ":Z.preventDefault(),J.toggleMenu();break;case"Escape":J.handleMenuKey(Z);break;default:J.handleButtonNonArrowKey(Z)}}},P.handleClick=function(){P.props.disabled||P.props.ambManager.toggleMenu({},{focusMenu:!1})},P.setRef=function(Z){P.ref.current=Z,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(Z):P.props.forwardedRef&&(P.props.forwardedRef.current=Z)},R),e(P,z)}return E.prototype.componentDidMount=function(){this.props.ambManager.button=this},E.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},E.prototype.render=function(){var P=this.props,z=this.props.ambManager,Q={role:"button",tabIndex:P.disabled?"":"0","aria-haspopup":!0,"aria-expanded":z.isOpen,"aria-disabled":P.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},Y={};return c(Y,h),m().indexOf(P.tag)>=0&&delete Y.disabled,z.options.closeOnBlur&&(Q.onBlur=z.handleBlur),c(Q,P,Y),c(Q,{ref:this.setRef}),i.createElement(P.tag,Q,P.children)},E})(i.Component);return v.propTypes=h,v.defaultProps={tag:"span"},k8=i.forwardRef(function(x,E){return i.createElement(o.Consumer,null,function(R){var P={ambManager:R,forwardedRef:E};return c(P,x,{ambManager:h.ambManager,children:h.children,forwardedRef:h.forwardedRef}),i.createElement(v,P,x.children)})}),k8}var T8,KQ;function d7e(){return KQ||(KQ=1,T8=function(e,t,i){var r=0,o=0,s=!1,a=!1,c=!1;e.addEventListener("click",h,i),e.addEventListener("touchstart",m,i);function h(z){c||t(z)}function m(z){c=!0,!s&&(s=!0,e.addEventListener("touchmove",v,i),e.addEventListener("touchend",x,i),e.addEventListener("touchcancel",E,i),a=!1,r=z.touches[0].clientX,o=z.touches[0].clientY)}function v(z){a||Math.abs(z.touches[0].clientX-r)<=10&&Math.abs(z.touches[0].clientY-o)<=10||(a=!0)}function x(z){s=!1,R(),a||t(z)}function E(){s=!1,a=!1,r=0,o=0}function R(){e.removeEventListener("touchmove",v,i),e.removeEventListener("touchend",x,i),e.removeEventListener("touchcancel",E,i)}function P(){e.removeEventListener("click",h,i),e.removeEventListener("touchstart",m,i),R()}return{remove:P}}),T8}var R8,UQ;function f7e(){if(UQ)return R8;UQ=1;function n(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function e(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function t(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}var i=Ba(),r=b1(),o=d7e(),s=B6(),a=O6(),c=a.refType,h=I6(),m={ambManager:r.object.isRequired,children:r.oneOfType([r.func,r.node]).isRequired,forwardedRef:c,tag:r.string},v=(function(x){t(E,x);function E(){var R,P,z;n(this,E);for(var Q=arguments.length,Y=Array(Q),H=0;H<Q;H++)Y[H]=arguments[H];return z=(R=(P=e(this,x.call.apply(x,[this].concat(Y))),P),P.ref=i.createRef(),P.addTapListener=function(){var Z=P.ref.current;if(Z){var J=Z.ownerDocument;J&&(P.tapListener=o(J.documentElement,P.handleTap))}},P.handleTap=function(Z){P.ref.current.contains(Z.target)||P.props.ambManager.button.ref.current.contains(Z.target)||P.props.ambManager.closeMenu()},P.setRef=function(Z){P.ref.current=Z,typeof P.props.forwardedRef=="function"?P.props.forwardedRef(Z):P.props.forwardedRef&&(P.props.forwardedRef.current=Z)},R),e(P,z)}return E.prototype.componentDidMount=function(){this.props.ambManager.menu=this},E.prototype.componentDidUpdate=function(){var P=this.props.ambManager;P.options.closeOnBlur&&(P.isOpen&&!this.tapListener?this.addTapListener():!P.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),P.isOpen||P.clearItems())},E.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},E.prototype.render=function(){var P=this.props,z=this.props.ambManager,Q=(function(){return typeof P.children=="function"?P.children({isOpen:z.isOpen}):z.isOpen?P.children:!1})();if(!Q)return!1;var Y={onKeyDown:z.handleMenuKey,role:"menu",tabIndex:-1};return z.options.closeOnBlur&&(Y.onBlur=z.handleBlur),h(Y,P,m),h(Y,{ref:this.setRef}),i.createElement(P.tag,Y,Q)},E})(i.Component);return v.propTypes=m,v.defaultProps={tag:"div"},R8=i.forwardRef(function(x,E){return i.createElement(s.Consumer,null,function(R){var P={ambManager:R,forwardedRef:E};return h(P,x,{ambManager:m.ambManager,children:m.children,forwardedRef:m.forwardedRef}),i.createElement(v,P,x.children)})}),R8}var D8,LQ;function p7e(){if(LQ)return D8;LQ=1;function n(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function e(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function t(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var i=Ba(),r=b1(),o=B6(),s=O6(),a=s.refType,c=I6(),h={ambManager:r.object.isRequired,children:r.node.isRequired,forwardedRef:a,tag:r.string,text:r.string,value:r.any},m=(function(v){t(x,v);function x(){var E,R,P;n(this,x);for(var z=arguments.length,Q=Array(z),Y=0;Y<z;Y++)Q[Y]=arguments[Y];return P=(E=(R=e(this,v.call.apply(v,[this].concat(Q))),R),R.ref=i.createRef(),R.handleKeyDown=function(H){H.key!=="Enter"&&H.key!==" "||R.props.tag==="a"&&R.props.href||(H.preventDefault(),R.selectItem(H))},R.selectItem=function(H){var Z=typeof R.props.value<"u"?R.props.value:R.props.children;R.props.ambManager.handleSelection(Z,H)},R.setRef=function(H){R.ref.current=H,typeof R.props.forwardedRef=="function"?R.props.forwardedRef(H):R.props.forwardedRef&&(R.props.forwardedRef.current=H)},E),e(R,P)}return x.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},x.prototype.render=function(){var R={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return c(R,this.props,h),i.createElement(this.props.tag,R,this.props.children)},x})(i.Component);return m.propTypes=h,m.defaultProps={tag:"div"},D8=i.forwardRef(function(v,x){return i.createElement(o.Consumer,null,function(E){var R={ambManager:E,forwardedRef:x};return c(R,v,{ambManager:h.ambManager,children:h.children,forwardedRef:h.forwardedRef}),i.createElement(m,R,v.children)})}),D8}var P8,zQ;function m7e(){if(zQ)return P8;zQ=1;var n=vre();return P8={Wrapper:A7e(),Button:h7e(),Menu:f7e(),MenuItem:p7e(),openMenu:n.openMenu,closeMenu:n.closeMenu},P8}var QM=m7e();function FQ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function NR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FQ(Object(t),!0).forEach(function(i){Xa(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):FQ(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function k6(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jQ(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function T6(n,e,t){return e&&jQ(n.prototype,e),t&&jQ(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Xa(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a0(){return a0=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},a0.apply(this,arguments)}function AU(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&GR(n,e)}function eE(n){return eE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},eE(n)}function GR(n,e){return GR=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},GR(n,e)}function g7e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y7e(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function R6(n,e){if(n==null)return{};var t=y7e(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function am(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function v7e(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return am(n)}function hU(n){var e=g7e();return function(){var i=eE(n),r;if(e){var o=eE(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return v7e(this,r)}}function b7e(n,e){return x7e(n)||w7e(n,e)||bre(n,e)||E7e()}function C7e(n){return _7e(n)||M7e(n)||bre(n)||S7e()}function _7e(n){if(Array.isArray(n))return QR(n)}function x7e(n){if(Array.isArray(n))return n}function M7e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function w7e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,o=!1,s,a;try{for(t=t.call(n);!(r=(s=t.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return i}}function bre(n,e){if(n){if(typeof n=="string")return QR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return QR(n,e)}}function QR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function S7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B7e=T6(function n(e){var t=this,i=e.expanded,r=i===void 0?[]:i,o=e.allowMultipleExpanded,s=o===void 0?!1:o,a=e.allowZeroExpanded,c=a===void 0?!1:a;k6(this,n),Xa(this,"expanded",void 0),Xa(this,"allowMultipleExpanded",void 0),Xa(this,"allowZeroExpanded",void 0),Xa(this,"toggleExpanded",function(h){if(t.isItemDisabled(h))return t;var m=t.isItemExpanded(h);return m?t.augment({expanded:t.expanded.filter(function(v){return v!==h})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(C7e(t.expanded),[h]):[h]})}),Xa(this,"isItemDisabled",function(h){var m=t.isItemExpanded(h),v=t.expanded.length===1;return!!(m&&!t.allowZeroExpanded&&v)}),Xa(this,"isItemExpanded",function(h){return t.expanded.indexOf(h)!==-1}),Xa(this,"getPanelAttributes",function(h,m){var v=m??t.isItemExpanded(h);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!v:void 0,"aria-labelledby":t.getButtonId(h),id:t.getPanelId(h),hidden:v?void 0:!0}}),Xa(this,"getHeadingAttributes",function(){return{role:"heading"}}),Xa(this,"getButtonAttributes",function(h,m){var v=m??t.isItemExpanded(h),x=t.isItemDisabled(h);return{id:t.getButtonId(h),"aria-disabled":x,"aria-expanded":v,"aria-controls":t.getPanelId(h),role:"button",tabIndex:0}}),Xa(this,"getPanelId",function(h){return"accordion__panel-".concat(h)}),Xa(this,"getButtonId",function(h){return"accordion__heading-".concat(h)}),Xa(this,"augment",function(h){return new n(NR({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},h))}),this.expanded=r,this.allowMultipleExpanded=s,this.allowZeroExpanded=c}),Cre=_t.createContext(null),_re=(function(n){AU(t,n);var e=hU(t);function t(){var i;k6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Xa(am(i),"state",new B7e({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),Xa(am(i),"toggleExpanded",function(a){i.setState(function(c){return c.toggleExpanded(a)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),Xa(am(i),"isItemDisabled",function(a){return i.state.isItemDisabled(a)}),Xa(am(i),"isItemExpanded",function(a){return i.state.isItemExpanded(a)}),Xa(am(i),"getPanelAttributes",function(a,c){return i.state.getPanelAttributes(a,c)}),Xa(am(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),Xa(am(i),"getButtonAttributes",function(a,c){return i.state.getButtonAttributes(a,c)}),i}return T6(t,[{key:"render",value:function(){var r=this.state,o=r.allowZeroExpanded,s=r.allowMultipleExpanded;return _t.createElement(Cre.Provider,{value:{allowMultipleExpanded:s,allowZeroExpanded:o,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t})(_t.PureComponent);Xa(_re,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var xre=(function(n){AU(t,n);var e=hU(t);function t(){var i;k6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Xa(am(i),"renderChildren",function(a){return a?i.props.children(a):null}),i}return T6(t,[{key:"render",value:function(){return _t.createElement(Cre.Consumer,null,this.renderChildren)}}]),t})(_t.PureComponent),O7e=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],I7e=function(e){var t=e.className,i=t===void 0?"accordion":t,r=e.allowMultipleExpanded,o=e.allowZeroExpanded,s=e.onChange,a=e.preExpanded,c=R6(e,O7e);return _t.createElement(_re,{preExpanded:a,allowMultipleExpanded:r,allowZeroExpanded:o,onChange:s},_t.createElement("div",a0({"data-accordion-component":"Accordion",className:i},c)))},WR;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(WR||(WR={}));var Mre=WR,K8=0;function k7e(){var n=K8;return K8=K8+1,"raa-".concat(n)}var T7e=_t.useId||k7e,R7e=/[\u0009\u000a\u000c\u000d\u0020]/g;function B4(n){return n===""||R7e.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var wre=_t.createContext(null),D7e=function(e){var t=e.children,i=e.uuid,r=e.accordionContext,o=e.dangerouslySetExpanded,s=function(){r.toggleExpanded(i)},a=function(h){var m=o??h.isItemExpanded(i),v=h.isItemDisabled(i),x=h.getPanelAttributes(i,o),E=h.getHeadingAttributes(i),R=h.getButtonAttributes(i,o);return _t.createElement(wre.Provider,{value:{uuid:i,expanded:m,disabled:v,toggleExpanded:s,panelAttributes:x,headingAttributes:E,buttonAttributes:R}},t)};return _t.createElement(xre,null,a)},P7e=function(e){return _t.createElement(xre,null,function(t){return _t.createElement(D7e,a0({},e,{accordionContext:t}))})},D6=function(e){var t=e.children,i=function(o){return o?t(o):null};return _t.createElement(wre.Consumer,null,i)},K7e=["uuid","dangerouslySetExpanded","className","activeClassName"],Sre=function(e){var t=e.uuid,i=e.dangerouslySetExpanded,r=e.className,o=r===void 0?"accordion__item":r,s=e.activeClassName,a=R6(e,K7e),c=_t.useState(T7e()),h=b7e(c,1),m=h[0],v=t??m,x=function(R){var P=R.expanded,z=P&&s?s:o;return _t.createElement("div",a0({"data-accordion-component":"AccordionItem",className:z},a))};return B4(v.toString()),a.id&&B4(a.id),_t.createElement(P7e,{uuid:v,dangerouslySetExpanded:i},_t.createElement(D6,null,x))};Sre.displayName=Mre.AccordionItem;function Ere(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:Ere(n.parentElement))}function P6(n){var e=Ere(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function U7e(n){var e=P6(n)||[],t=e[0];t&&t.focus()}function L7e(n){var e=P6(n)||[],t=e[e.length-1];t&&t.focus()}function z7e(n){var e=P6(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t+1];i&&i.focus()}}function F7e(n){var e=P6(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t-1];i&&i.focus()}}var V0={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},j7e=["toggleExpanded","className"],N7e=function(e){var t=e.toggleExpanded,i=e.className,r=i===void 0?"accordion__button":i,o=R6(e,j7e),s=function(c){var h=c.key;if((h===V0.ENTER||h===V0.SPACE||h===V0.SPACE_DEPRECATED)&&(c.preventDefault(),t()),c.target instanceof HTMLElement)switch(h){case V0.HOME:{c.preventDefault(),U7e(c.target);break}case V0.END:{c.preventDefault(),L7e(c.target);break}case V0.LEFT:case V0.UP:{c.preventDefault(),F7e(c.target);break}case V0.RIGHT:case V0.DOWN:{c.preventDefault(),z7e(c.target);break}}};return o.id&&B4(o.id),_t.createElement("div",a0({className:r},o,{role:"button",tabIndex:0,onClick:t,onKeyDown:s,"data-accordion-component":"AccordionItemButton"}))},G7e=function(e){return _t.createElement(D6,null,function(t){var i=t.toggleExpanded,r=t.buttonAttributes;return _t.createElement(N7e,a0({toggleExpanded:i},e,r))})},Q7e={className:"accordion__heading","aria-level":3},W7e=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,Bre=(function(n){AU(t,n);var e=hU(t);function t(){var i;k6(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),Xa(am(i),"ref",void 0),Xa(am(i),"setRef",function(a){i.ref=a}),i}return T6(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return _t.createElement("div",a0({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(r){if(r===void 0)throw new Error("ref is undefined");if(!(r.childElementCount===1&&r.firstElementChild&&r.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(W7e)}}]),t})(_t.PureComponent);Xa(Bre,"defaultProps",Q7e);var Ore=function(e){return _t.createElement(D6,null,function(t){var i=t.headingAttributes;return e.id&&B4(e.id),_t.createElement(Bre,a0({},e,i))})};Ore.displayName=Mre.AccordionItemHeading;var q7e=["className","region","id"],Y7e=function(e){var t=e.className,i=t===void 0?"accordion__panel":t,r=e.region,o=e.id,s=R6(e,q7e),a=function(h){var m=h.panelAttributes;o&&B4(o);var v=NR(NR({},m),{},{"aria-labelledby":r?m["aria-labelledby"]:void 0});return _t.createElement("div",a0({"data-accordion-component":"AccordionItemPanel",className:i},s,v,{role:r?"region":void 0}))};return _t.createElement(D6,null,a)};function O4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ee4be309accf3b6f15b0a988cbdadd67c7132608",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAsC;AAM7C,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee4be309accf3b6f15b0a988cbdadd67c7132608"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return O4=function(){return s},s}O4();O4().s[0]++;const K6=n=>(O4().f[0]++,O4().s[1]++,te.jsx(jne,{...n}));function I4(n){return Bo({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 19a2 2 0 0 0 2 2c2 0 2 -4 3 -9s1 -9 3 -9a2 2 0 0 1 2 2"},child:[]},{tag:"path",attr:{d:"M5 12h6"},child:[]},{tag:"path",attr:{d:"M15 12l6 6"},child:[]},{tag:"path",attr:{d:"M15 18l6 -6"},child:[]}]})(n)}function U6(n){return Bo({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,76H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm104,40H40a12,12,0,0,0,0,24H144a12,12,0,0,0,0-24Zm88,0H220V168a12,12,0,0,0-24,0v12H184a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V204h12a12,12,0,0,0,0-24Z"},child:[]}]})(n)}function Rb(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Rb=function(){return s},s}Rb();const dU=(Rb().s[0]++,["all","any","none"]);Rb().s[1]++;const V7e=(Rb().s[2]++,Object.keys(Zr.filter_operator.values).filter(n=>(Rb().f[0]++,Rb().s[3]++,dU.indexOf(n)<0)));function $i(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $i=function(){return s},s}$i();function $7e(n){return $i().f[0]++,$i().s[0]++,n===""?($i().b[0][0]++,$i().s[1]++,n):($i().b[0][1]++,$i().s[2]++,isNaN(n)?($i().b[1][0]++,$i().s[3]++,n):($i().b[1][1]++,$i().s[4]++,parseFloat(n)))}function H7e(n){$i().f[1]++;const e=($i().s[5]++,typeof n=="string");if($i().s[6]++,e)$i().b[2][1]++;else return $i().b[2][0]++,$i().s[7]++,n;return $i().s[8]++,n.match(/^\s*true\s*$/)?($i().b[3][0]++,$i().s[9]++,!0):($i().b[3][1]++,$i().s[10]++,n.match(/^\s*false\s*$/)?($i().b[4][0]++,$i().s[11]++,!1):($i().b[4][1]++,$i().s[12]++,n))}function Z7e(n){return $i().f[2]++,$i().s[13]++,n=$7e(n),$i().s[14]++,n=H7e(n),$i().s[15]++,n}class X7e extends En.Component{static defaultProps=($i().s[16]++,{properties:{}});onFilterPartChanged(e,t,i){$i().f[3]++;let r=($i().s[17]++,[e,t,...i.map(Z7e)]);$i().s[18]++,$i().b[6][0]++,e==="has"||($i().b[6][1]++,e==="!has")?($i().b[5][0]++,$i().s[19]++,r=[e,t]):($i().b[5][1]++,$i().s[20]++,i.length===0?($i().b[7][0]++,$i().s[21]++,r=[e,t,""]):$i().b[7][1]++),$i().s[22]++,this.props.onChange(r)}render(){$i().f[4]++;const e=($i().s[23]++,this.props.filter),t=($i().s[24]++,e[0]),i=($i().s[25]++,e[1]),r=($i().s[26]++,e.slice(2));return $i().s[27]++,te.jsxs("div",{className:"maputnik-filter-editor-single",children:[te.jsx("div",{className:"maputnik-filter-editor-property",children:te.jsx(E5,{"aria-label":"key",value:i,options:Object.keys(this.props.properties).map(o=>($i().f[5]++,$i().s[28]++,[o,o])),onChange:o=>($i().f[6]++,$i().s[29]++,this.onFilterPartChanged(t,o,r))})}),te.jsx("div",{className:"maputnik-filter-editor-operator",children:te.jsx(rC,{"aria-label":"function",value:t,onChange:o=>($i().f[7]++,$i().s[30]++,this.onFilterPartChanged(o,i,r)),options:V7e})}),($i().b[8][0]++,r.length>0&&($i().b[8][1]++,te.jsx("div",{className:"maputnik-filter-editor-args",children:te.jsx(xm,{"aria-label":"value",value:r.join(","),onChange:o=>($i().f[8]++,$i().s[31]++,this.onFilterPartChanged(t,i,o.split(",")))})})))]})}}function ex(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="1beba484bbe354357d7ce4f43a423306cbd22032",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAuC;AAC9C,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAMtD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1beba484bbe354357d7ce4f43a423306cbd22032"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ex=function(){return s},s}ex();class J7e extends En.Component{render(){ex().f[0]++;const e=(ex().s[0]++,this.props.t);return ex().s[1]++,te.jsxs("div",{className:"maputnik-filter-editor-block",children:[te.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),te.jsx("div",{className:"maputnik-filter-editor-block-action",children:te.jsx(Zs,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:te.jsx(Hb,{})})})]})}}const eIe=(ex().s[2]++,Fo()(J7e));var U8,NQ;function tIe(){if(NQ)return U8;NQ=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",r="\\ufe0e\\ufe0f",o="["+e+"]",s="["+t+i+"]",a="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+a+")",h="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",E=c+"?",R="["+r+"]?",P="(?:"+x+"(?:"+[h,m,v].join("|")+")"+R+E+")*",z=R+E+P,Q="(?:"+[h+s+"?",s,m,v,o].join("|")+")",Y=RegExp(a+"(?="+a+")|"+Q+z,"g"),H=RegExp("["+x+e+t+i+r+"]"),Z=typeof window=="object"&&window&&window.Object===Object&&window,J=typeof self=="object"&&self&&self.Object===Object&&self,$=Z||J||Function("return this")();function G(st){return st.split("")}function oe(st){return H.test(st)}function ue(st){return oe(st)?xe(st):G(st)}function xe(st){return st.match(Y)||[]}var ge=Object.prototype,Ie=ge.toString,Me=$.Symbol,ke=Me?Me.prototype:void 0,je=ke?ke.toString:void 0;function Be(st,Tt,Lt){var Ue=-1,Oe=st.length;Tt<0&&(Tt=-Tt>Oe?0:Oe+Tt),Lt=Lt>Oe?Oe:Lt,Lt<0&&(Lt+=Oe),Oe=Tt>Lt?0:Lt-Tt>>>0,Tt>>>=0;for(var Ee=Array(Oe);++Ue<Oe;)Ee[Ue]=st[Ue+Tt];return Ee}function Ye(st){if(typeof st=="string")return st;if(De(st))return je?je.call(st):"";var Tt=st+"";return Tt=="0"&&1/st==-1/0?"-0":Tt}function At(st,Tt,Lt){var Ue=st.length;return Lt=Lt===void 0?Ue:Lt,!Tt&&Lt>=Ue?st:Be(st,Tt,Lt)}function yt(st){return function(Tt){Tt=Ge(Tt);var Lt=oe(Tt)?ue(Tt):void 0,Ue=Lt?Lt[0]:Tt.charAt(0),Oe=Lt?At(Lt,1).join(""):Tt.slice(1);return Ue[st]()+Oe}}function Le(st){return!!st&&typeof st=="object"}function De(st){return typeof st=="symbol"||Le(st)&&Ie.call(st)==n}function Ge(st){return st==null?"":Ye(st)}function Te(st){return xt(Ge(st).toLowerCase())}var xt=yt("toUpperCase");return U8=Te,U8}var nIe=tIe();const fU=Su(nIe);function Bg(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Bg=function(){return s},s}Bg();function L6(n){Bg().f[0]++;let e;const t=(Bg().s[0]++,n.split("-"));return Bg().s[1]++,t.length>1?(Bg().b[0][0]++,Bg().s[2]++,e=n.split("-").slice(1).join(" ")):(Bg().b[0][1]++,Bg().s[3]++,e=n),Bg().s[4]++,fU(e)}function Ua(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="421a194a894795caa98e9aaeb6be503f0178c030",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:10,column:24},end:{line:16,column:3}},1:{start:{line:18,column:4},end:{line:18,column:17}},2:{start:{line:19,column:4},end:{line:21,column:6}},3:{start:{line:24,column:34},end:{line:24,column:44}},4:{start:{line:25,column:25},end:{line:25,column:52}},5:{start:{line:26,column:42},end:{line:48,column:8}},6:{start:{line:49,column:16},end:{line:49,column:22}},7:{start:{line:50,column:4},end:{line:53,column:5}},8:{start:{line:51,column:23},end:{line:51,column:118}},9:{start:{line:52,column:6},end:{line:52,column:42}},10:{start:{line:54,column:4},end:{line:75,column:6}},11:{start:{line:78,column:27},end:{line:78,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:14,column:12},end:{line:14,column:13}},loc:{start:{line:14,column:18},end:{line:15,column:5}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:21},end:{line:22,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:76,column:3}},line:23}},branchMap:{0:{loc:{start:{line:25,column:25},end:{line:25,column:52}},type:"cond-expr",locations:[{start:{line:25,column:35},end:{line:25,column:45}},{start:{line:25,column:48},end:{line:25,column:52}}],line:25},1:{loc:{start:{line:27,column:6},end:{line:37,column:7}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:23}},{start:{line:27,column:43},end:{line:37,column:7}}],line:27},2:{loc:{start:{line:50,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},3:{loc:{start:{line:51,column:23},end:{line:51,column:118}},type:"cond-expr",locations:[{start:{line:51,column:46},end:{line:51,column:95}},{start:{line:51,column:98},end:{line:51,column:118}}],line:51}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6CM,mBASM,KATN;AA7CN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAmBtB,MAAM,mCAAmC,MAAM,UAA2C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,OAAO,QAAO,IAAI,KAAK;AACjC,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAEF,QAAI,QAAQ;AACZ,QAAI,KAAK,MAAM,QAAQ;AACrB,YAAM,WAAW,KAAK,MAAM,YAAY,KAAK,MAAM,YAAY,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM;AACvG,cAAQ,KAAK,MAAM,OAAO,QAAQ;AAAA,IACpC;AACA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QACV;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,UAAS;AAAA,YACT,MAAM,KAAK,MAAM;AAAA,YACjB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"421a194a894795caa98e9aaeb6be503f0178c030"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ua=function(){return s},s}Ua();class iIe extends En.Component{static defaultProps=(Ua().s[0]++,{errors:{},onFocus:()=>{Ua().f[0]++},onBlur:()=>{Ua().f[1]++}});constructor(e){Ua().f[2]++,Ua().s[1]++,super(e),Ua().s[2]++,this.state={jsonError:!1}}render(){Ua().f[3]++;const{t:e,value:t,canUndo:i}=(Ua().s[3]++,this.props),r=(Ua().s[4]++,i?(Ua().b[0][0]++,!i()):(Ua().b[0][1]++,!0)),o=(Ua().s[5]++,te.jsxs(te.Fragment,{children:[(Ua().b[1][0]++,this.props.onUndo&&(Ua().b[1][1]++,te.jsx(Zs,{onClick:this.props.onUndo,disabled:r,className:"maputnik-delete-stop",title:e("Revert from expression"),children:te.jsx($he,{})},"undo_action"))),te.jsx(Zs,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:te.jsx(Hb,{})},"delete_action")]}));let s=(Ua().s[6]++,void 0);if(Ua().s[7]++,this.props.errors){Ua().b[2][0]++;const a=(Ua().s[8]++,this.props.fieldType?(Ua().b[3][0]++,this.props.fieldType+"."+this.props.fieldName):(Ua().b[3][1]++,this.props.fieldName));Ua().s[9]++,s=this.props.errors[a]}else Ua().b[2][1]++;return Ua().s[10]++,te.jsx(_s,{fieldSpec:this.props.fieldSpec,label:e(L6(this.props.fieldName)),action:o,wideMode:!0,error:s,children:te.jsx(K6,{lintType:"expression",spec:this.props.fieldSpec,className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,value:t,onChange:this.props.onChange})})}}const Ire=(Ua().s[11]++,Fo()(iIe));function An(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="e47fcaaf47a881c798f8d8c8b2982ffb5ed75681",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:18,column:17},end:{line:18,column:40}},1:{start:{line:19,column:2},end:{line:21,column:3}},2:{start:{line:20,column:4},end:{line:20,column:18}},3:{start:{line:22,column:20},end:{line:22,column:29}},4:{start:{line:23,column:16},end:{line:23,column:31}},5:{start:{line:24,column:2},end:{line:27,column:3}},6:{start:{line:25,column:4},end:{line:25,column:24}},7:{start:{line:26,column:4},end:{line:26,column:32}},8:{start:{line:28,column:2},end:{line:28,column:35}},9:{start:{line:31,column:2},end:{line:31,column:65}},10:{start:{line:34,column:2},end:{line:55,column:4}},11:{start:{line:57,column:19},end:{line:61,column:1}},12:{start:{line:63,column:2},end:{line:65,column:3}},13:{start:{line:64,column:4},end:{line:64,column:16}},14:{start:{line:66,column:21},end:{line:66,column:42}},15:{start:{line:67,column:2},end:{line:67,column:38}},16:{start:{line:70,column:2},end:{line:70,column:52}},17:{start:{line:73,column:2},end:{line:75,column:3}},18:{start:{line:74,column:4},end:{line:74,column:97}},19:{start:{line:74,column:38},end:{line:74,column:59}},20:{start:{line:74,column:75},end:{line:74,column:84}},21:{start:{line:76,column:2},end:{line:76,column:15}},22:{start:{line:79,column:24},end:{line:81,column:3}},23:{start:{line:83,column:4},end:{line:83,column:17}},24:{start:{line:84,column:4},end:{line:87,column:6}},25:{start:{line:91,column:22},end:{line:91,column:58}},26:{start:{line:92,column:4},end:{line:92,column:35}},27:{start:{line:93,column:4},end:{line:93,column:35}},28:{start:{line:96,column:22},end:{line:96,column:58}},29:{start:{line:97,column:4},end:{line:97,column:39}},30:{start:{line:98,column:4},end:{line:98,column:35}},31:{start:{line:100,column:18},end:{line:104,column:3}},32:{start:{line:101,column:26},end:{line:101,column:62}},33:{start:{line:102,column:4},end:{line:102,column:43}},34:{start:{line:103,column:4},end:{line:103,column:39}},35:{start:{line:105,column:16},end:{line:109,column:3}},36:{start:{line:106,column:4},end:{line:108,column:7}},37:{start:{line:110,column:15},end:{line:114,column:3}},38:{start:{line:111,column:4},end:{line:113,column:7}},39:{start:{line:115,column:19},end:{line:121,column:3}},40:{start:{line:116,column:19},end:{line:116,column:46}},41:{start:{line:117,column:4},end:{line:117,column:47}},42:{start:{line:118,column:4},end:{line:120,column:7}},43:{start:{line:123,column:32},end:{line:123,column:75}},44:{start:{line:124,column:4},end:{line:137,column:5}},45:{start:{line:125,column:6},end:{line:128,column:8}},46:{start:{line:129,column:11},end:{line:137,column:5}},47:{start:{line:130,column:6},end:{line:132,column:8}},48:{start:{line:134,column:6},end:{line:136,column:8}},49:{start:{line:140,column:26},end:{line:140,column:36}},50:{start:{line:141,column:36},end:{line:141,column:46}},51:{start:{line:142,column:22},end:{line:144,column:5}},52:{start:{line:145,column:26},end:{line:145,column:33}},53:{start:{line:146,column:36},end:{line:146,column:112}},54:{start:{line:147,column:4},end:{line:270,column:5}},55:{start:{line:148,column:6},end:{line:161,column:11}},56:{start:{line:162,column:11},end:{line:270,column:5}},57:{start:{line:163,column:21},end:{line:163,column:48}},58:{start:{line:164,column:26},end:{line:164,column:35}},59:{start:{line:165,column:22},end:{line:165,column:37}},60:{start:{line:166,column:38},end:{line:174,column:10}},61:{start:{line:175,column:27},end:{line:188,column:8}},62:{start:{line:176,column:22},end:{line:176,column:50}},63:{start:{line:177,column:8},end:{line:187,column:29}},64:{start:{line:189,column:6},end:{line:240,column:11}},65:{start:{line:200,column:33},end:{line:200,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:269,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:273,column:21},end:{line:273,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:17,column:9},end:{line:17,column:24}},loc:{start:{line:17,column:32},end:{line:29,column:1}},line:17},1:{name:"migrateFilter",decl:{start:{line:30,column:9},end:{line:30,column:22}},loc:{start:{line:30,column:31},end:{line:32,column:1}},line:30},2:{name:"createStyleFromFilter",decl:{start:{line:33,column:9},end:{line:33,column:30}},loc:{start:{line:33,column:39},end:{line:56,column:1}},line:33},3:{name:"checkIfSimpleFilter",decl:{start:{line:62,column:9},end:{line:62,column:28}},loc:{start:{line:62,column:37},end:{line:68,column:1}},line:62},4:{name:"hasCombiningFilter",decl:{start:{line:69,column:9},end:{line:69,column:27}},loc:{start:{line:69,column:36},end:{line:71,column:1}},line:69},5:{name:"hasNestedCombiningFilter",decl:{start:{line:72,column:9},end:{line:72,column:33}},loc:{start:{line:72,column:42},end:{line:77,column:1}},line:72},6:{name:"(anonymous_6)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:38},end:{line:74,column:59}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:74,column:68},end:{line:74,column:69}},loc:{start:{line:74,column:75},end:{line:74,column:84}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:21},end:{line:88,column:3}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:90,column:2},end:{line:90,column:3}},loc:{start:{line:90,column:42},end:{line:94,column:3}},line:90},10:{name:"(anonymous_10)",decl:{start:{line:95,column:2},end:{line:95,column:3}},loc:{start:{line:95,column:30},end:{line:99,column:3}},line:95},11:{name:"(anonymous_11)",decl:{start:{line:100,column:18},end:{line:100,column:19}},loc:{start:{line:100,column:24},end:{line:104,column:3}},line:100},12:{name:"(anonymous_12)",decl:{start:{line:105,column:16},end:{line:105,column:17}},loc:{start:{line:105,column:25},end:{line:109,column:3}},line:105},13:{name:"(anonymous_13)",decl:{start:{line:110,column:15},end:{line:110,column:16}},loc:{start:{line:110,column:21},end:{line:114,column:3}},line:110},14:{name:"(anonymous_14)",decl:{start:{line:115,column:19},end:{line:115,column:20}},loc:{start:{line:115,column:25},end:{line:121,column:3}},line:115},15:{name:"(anonymous_15)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:48},end:{line:138,column:3}},line:122},16:{name:"(anonymous_16)",decl:{start:{line:139,column:2},end:{line:139,column:3}},loc:{start:{line:139,column:11},end:{line:271,column:3}},line:139},17:{name:"(anonymous_17)",decl:{start:{line:175,column:39},end:{line:175,column:40}},loc:{start:{line:175,column:51},end:{line:188,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:200,column:26},end:{line:200,column:27}},loc:{start:{line:200,column:33},end:{line:200,column:63}},line:200},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:18,column:17},end:{line:18,column:40}},type:"binary-expr",locations:[{start:{line:18,column:17},end:{line:18,column:29}},{start:{line:18,column:33},end:{line:18,column:40}}],line:18},1:{loc:{start:{line:19,column:2},end:{line:21,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:21,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:24,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:63,column:2},end:{line:65,column:3}},type:"if",locations:[{start:{line:63,column:2},end:{line:65,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},4:{loc:{start:{line:63,column:6},end:{line:63,column:59}},type:"binary-expr",locations:[{start:{line:63,column:6},end:{line:63,column:25}},{start:{line:63,column:29},end:{line:63,column:59}}],line:63},5:{loc:{start:{line:73,column:2},end:{line:75,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:75,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},6:{loc:{start:{line:124,column:4},end:{line:137,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:137,column:5}},{start:{line:129,column:11},end:{line:137,column:5}}],line:124},7:{loc:{start:{line:124,column:8},end:{line:124,column:66}},type:"binary-expr",locations:[{start:{line:124,column:8},end:{line:124,column:28}},{start:{line:124,column:32},end:{line:124,column:66}}],line:124},8:{loc:{start:{line:129,column:11},end:{line:137,column:5}},type:"if",locations:[{start:{line:129,column:11},end:{line:137,column:5}},{start:{line:133,column:11},end:{line:137,column:5}}],line:129},9:{loc:{start:{line:129,column:15},end:{line:129,column:73}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:34}},{start:{line:129,column:38},end:{line:129,column:73}}],line:129},10:{loc:{start:{line:146,column:36},end:{line:146,column:112}},type:"binary-expr",locations:[{start:{line:146,column:36},end:{line:146,column:55}},{start:{line:146,column:59},end:{line:146,column:112}}],line:146},11:{loc:{start:{line:147,column:4},end:{line:270,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:270,column:5}},{start:{line:162,column:11},end:{line:270,column:5}}],line:147},12:{loc:{start:{line:162,column:11},end:{line:270,column:5}},type:"if",locations:[{start:{line:162,column:11},end:{line:270,column:5}},{start:{line:241,column:11},end:{line:270,column:5}}],line:162},13:{loc:{start:{line:186,column:10},end:{line:186,column:119}},type:"binary-expr",locations:[{start:{line:186,column:10},end:{line:186,column:15}},{start:{line:186,column:35},end:{line:186,column:119}}],line:186},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:257,column:8},end:{line:268,column:12}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:38}},{start:{line:257,column:58},end:{line:268,column:12}}],line:257}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAkMQ,SAkDA,UAlDA,KAGA,YAHA;AAlMR,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAQ,eAAc;AAEtB,SAAQ,SAAS,qBAAoB;AACrC,OAAO,YAAY;AAEnB,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA+B,uBAAuB;AAItD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,kBAAe;AAAA,cACf,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,kBAAe;AAAA;AAAA,MAClB,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,kBACxD,EAAE,YAAY;AAAA;AAAA;AAAA,YACjB;AAAA;AAAA,UAVI;AAAA,QAWN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e47fcaaf47a881c798f8d8c8b2982ffb5ed75681"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return An=function(){return s},s}An();function Sy(n){An().f[0]++;const e=(An().s[0]++,An().b[0][0]++,n.filter||(An().b[0][1]++,["all"]));if(An().s[1]++,Array.isArray(e))An().b[1][1]++;else return An().b[1][0]++,An().s[2]++,e;let t=(An().s[3]++,e[0]),i=(An().s[4]++,e.slice(1));return An().s[5]++,dU.indexOf(t)<0?(An().b[2][0]++,An().s[6]++,t="all",An().s[7]++,i=[e.slice(0)]):An().b[2][1]++,An().s[8]++,[t,...i]}function rIe(n){return An().f[1]++,An().s[9]++,yAe(oIe(n)).layers[0].filter}function oIe(n){return An().f[2]++,An().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const sIe=(An().s[11]++,["all","any","none"]);function GQ(n){if(An().f[3]++,An().s[12]++,An().b[4][0]++,n.length===1&&(An().b[4][1]++,sIe.includes(n[0])))return An().b[3][0]++,An().s[13]++,!0;An().b[3][1]++;const e=(An().s[14]++,o3(n));return An().s[15]++,!N4.isEqual(e,n)}function QQ(n){return An().f[4]++,An().s[16]++,dU.indexOf(n[0])>=0}function aIe(n){return An().f[5]++,An().s[17]++,QQ(n)?(An().b[5][0]++,An().s[18]++,n.slice(1).map(e=>(An().f[6]++,An().s[19]++,QQ(e))).filter(e=>(An().f[7]++,An().s[20]++,e==!0)).length>0):(An().b[5][1]++,An().s[21]++,!1)}class lIe extends En.Component{static defaultProps=(An().s[22]++,{filter:["all"]});constructor(e){An().f[8]++,An().s[23]++,super(e),An().s[24]++,this.state={showDoc:!1,displaySimpleFilter:GQ(Sy(e))}}onFilterPartChanged(e,t){An().f[9]++;const i=(An().s[25]++,Sy(this.props).slice(0));An().s[26]++,i[e]=t,An().s[27]++,this.props.onChange(i)}deleteFilterItem(e){An().f[10]++;const t=(An().s[28]++,Sy(this.props).slice(0));An().s[29]++,t.splice(e+1,1),An().s[30]++,this.props.onChange(t)}addFilterItem=(An().s[31]++,()=>{An().f[11]++;const e=(An().s[32]++,Sy(this.props).slice(0));An().s[33]++,e.push(["==","name",""]),An().s[34]++,this.props.onChange(e)});onToggleDoc=(An().s[35]++,e=>{An().f[12]++,An().s[36]++,this.setState({showDoc:e})});makeFilter=(An().s[37]++,()=>{An().f[13]++,An().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(An().s[39]++,()=>{An().f[14]++;const e=(An().s[40]++,Sy(this.props));An().s[41]++,this.props.onChange(rIe(e)),An().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){An().f[15]++;const i=(An().s[43]++,GQ(Sy(e)));return An().s[44]++,An().b[7][0]++,!i&&(An().b[7][1]++,t.displaySimpleFilter===!0)?(An().b[6][0]++,An().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(An().b[6][1]++,An().s[46]++,An().b[9][0]++,i&&(An().b[9][1]++,t.displaySimpleFilter===!1)?(An().b[8][0]++,An().s[47]++,{valueIsSimpleFilter:!0}):(An().b[8][1]++,An().s[48]++,{valueIsSimpleFilter:!1}))}render(){An().f[16]++;const{errors:e,t}=(An().s[49]++,this.props),{displaySimpleFilter:i}=(An().s[50]++,this.state),r=(An().s[51]++,{doc:Zr.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),o=(An().s[52]++,["all"]),s=(An().s[53]++,An().b[10][0]++,i&&(An().b[10][1]++,aIe(Sy(this.props))));if(An().s[54]++,s)return An().b[11][0]++,An().s[55]++,te.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[te.jsx("p",{children:t("Nested filters are not supported.")}),te.jsxs(Zs,{onClick:this.makeExpression,title:t("Convert to expression"),children:[te.jsx(I4,{}),t("Upgrade to expression")]})]});if(An().b[11][1]++,An().s[56]++,i){An().b[12][0]++;const a=(An().s[57]++,Sy(this.props)),c=(An().s[58]++,a[0]),h=(An().s[59]++,a.slice(1)),m=(An().s[60]++,te.jsx("div",{children:te.jsx(Zs,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:te.jsx(I4,{})})})),v=(An().s[61]++,h.map((x,E)=>{An().f[17]++;const R=(An().s[62]++,e[`filter[${E+1}]`]);return An().s[63]++,te.jsxs("div",{children:[te.jsx(eIe,{onDelete:this.deleteFilterItem.bind(this,E),children:te.jsx(X7e,{properties:this.props.properties,filter:x,onChange:this.onFilterPartChanged.bind(this,E+1)})},E),(An().b[13][0]++,R&&(An().b[13][1]++,te.jsx("div",{className:"maputnik-inline-error",children:R.message},"error")))]},`block-${E}`)}));return An().s[64]++,te.jsxs(te.Fragment,{children:[te.jsx(_s,{fieldSpec:r,label:t("Filter"),action:m,children:te.jsx(rC,{value:c,onChange:x=>(An().f[18]++,An().s[65]++,this.onFilterPartChanged(0,x)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),v,te.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:te.jsxs(Zs,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[te.jsx(U6,{style:{verticalAlign:"text-bottom"}}),t("Add filter")]})},"buttons"),te.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(An().b[14][0]++,""):(An().b[14][1]++,"none")},children:te.jsx(E6,{fieldSpec:r})},"doc")]})}else{An().b[12][1]++;const{filter:a}=(An().s[66]++,this.props);return An().s[67]++,te.jsxs(te.Fragment,{children:[te.jsx(Ire,{onDelete:()=>{An().f[19]++,An().s[68]++,this.setState({displaySimpleFilter:!0}),An().s[69]++,this.props.onChange(o)},fieldName:"filter",value:a,errors:e,onChange:this.props.onChange}),(An().b[15][0]++,this.state.valueIsSimpleFilter&&(An().b[15][1]++,te.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",te.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const uIe=(An().s[70]++,Fo()(lIe));var YC={},md={},VC={},L8,WQ;function kre(){if(WQ)return L8;WQ=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return L8=n,L8}var z8,qQ;function km(){if(qQ)return z8;qQ=1;var n=kre(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return z8=t,z8}var F8,YQ;function B5(){if(YQ)return F8;YQ=1;var n=km(),e=n.Symbol;return F8=e,F8}var j8,VQ;function cIe(){if(VQ)return j8;VQ=1;var n=B5(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function o(s){var a=t.call(s,r),c=s[r];try{s[r]=void 0;var h=!0}catch{}var m=i.call(s);return h&&(a?s[r]=c:delete s[r]),m}return j8=o,j8}var N8,$Q;function AIe(){if($Q)return N8;$Q=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return N8=t,N8}var G8,HQ;function oC(){if(HQ)return G8;HQ=1;var n=B5(),e=cIe(),t=AIe(),i="[object Null]",r="[object Undefined]",o=n?n.toStringTag:void 0;function s(a){return a==null?a===void 0?r:i:o&&o in Object(a)?e(a):t(a)}return G8=s,G8}var Q8,ZQ;function Ef(){if(ZQ)return Q8;ZQ=1;var n=Array.isArray;return Q8=n,Q8}var W8,XQ;function A0(){if(XQ)return W8;XQ=1;function n(e){return e!=null&&typeof e=="object"}return W8=n,W8}var q8,JQ;function hIe(){if(JQ)return q8;JQ=1;var n=oC(),e=Ef(),t=A0(),i="[object String]";function r(o){return typeof o=="string"||!e(o)&&t(o)&&n(o)==i}return q8=r,q8}var Y8,eW;function dIe(){if(eW)return Y8;eW=1;function n(e){return function(t,i,r){for(var o=-1,s=Object(t),a=r(t),c=a.length;c--;){var h=a[e?c:++o];if(i(s[h],h,s)===!1)break}return t}}return Y8=n,Y8}var V8,tW;function Tre(){if(tW)return V8;tW=1;var n=dIe(),e=n();return V8=e,V8}var $8,nW;function fIe(){if(nW)return $8;nW=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return $8=n,$8}var H8,iW;function pIe(){if(iW)return H8;iW=1;var n=oC(),e=A0(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return H8=i,H8}var Z8,rW;function pU(){if(rW)return Z8;rW=1;var n=pIe(),e=A0(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,o=n((function(){return arguments})())?n:function(s){return e(s)&&i.call(s,"callee")&&!r.call(s,"callee")};return Z8=o,Z8}var H2={exports:{}},X8,oW;function mIe(){if(oW)return X8;oW=1;function n(){return!1}return X8=n,X8}H2.exports;var sW;function z6(){return sW||(sW=1,(function(n,e){var t=km(),i=mIe(),r=e&&!e.nodeType&&e,o=r&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===r,a=s?t.Buffer:void 0,c=a?a.isBuffer:void 0,h=c||i;n.exports=h})(H2,H2.exports)),H2.exports}var J8,aW;function mU(){if(aW)return J8;aW=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var o=typeof i;return r=r??n,!!r&&(o=="number"||o!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return J8=t,J8}var e7,lW;function gU(){if(lW)return e7;lW=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return e7=e,e7}var t7,uW;function gIe(){if(uW)return t7;uW=1;var n=oC(),e=gU(),t=A0(),i="[object Arguments]",r="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",h="[object Map]",m="[object Number]",v="[object Object]",x="[object RegExp]",E="[object Set]",R="[object String]",P="[object WeakMap]",z="[object ArrayBuffer]",Q="[object DataView]",Y="[object Float32Array]",H="[object Float64Array]",Z="[object Int8Array]",J="[object Int16Array]",$="[object Int32Array]",G="[object Uint8Array]",oe="[object Uint8ClampedArray]",ue="[object Uint16Array]",xe="[object Uint32Array]",ge={};ge[Y]=ge[H]=ge[Z]=ge[J]=ge[$]=ge[G]=ge[oe]=ge[ue]=ge[xe]=!0,ge[i]=ge[r]=ge[z]=ge[o]=ge[Q]=ge[s]=ge[a]=ge[c]=ge[h]=ge[m]=ge[v]=ge[x]=ge[E]=ge[R]=ge[P]=!1;function Ie(Me){return t(Me)&&e(Me.length)&&!!ge[n(Me)]}return t7=Ie,t7}var n7,cW;function yU(){if(cW)return n7;cW=1;function n(e){return function(t){return e(t)}}return n7=n,n7}var Z2={exports:{}};Z2.exports;var AW;function vU(){return AW||(AW=1,(function(n,e){var t=kre(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o&&t.process,a=(function(){try{var c=r&&r.require&&r.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();n.exports=a})(Z2,Z2.exports)),Z2.exports}var i7,hW;function bU(){if(hW)return i7;hW=1;var n=gIe(),e=yU(),t=vU(),i=t&&t.isTypedArray,r=i?e(i):n;return i7=r,i7}var r7,dW;function Rre(){if(dW)return r7;dW=1;var n=fIe(),e=pU(),t=Ef(),i=z6(),r=mU(),o=bU(),s=Object.prototype,a=s.hasOwnProperty;function c(h,m){var v=t(h),x=!v&&e(h),E=!v&&!x&&i(h),R=!v&&!x&&!E&&o(h),P=v||x||E||R,z=P?n(h.length,String):[],Q=z.length;for(var Y in h)(m||a.call(h,Y))&&!(P&&(Y=="length"||E&&(Y=="offset"||Y=="parent")||R&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||r(Y,Q)))&&z.push(Y);return z}return r7=c,r7}var o7,fW;function CU(){if(fW)return o7;fW=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return o7=e,o7}var s7,pW;function Dre(){if(pW)return s7;pW=1;function n(e,t){return function(i){return e(t(i))}}return s7=n,s7}var a7,mW;function yIe(){if(mW)return a7;mW=1;var n=Dre(),e=n(Object.keys,Object);return a7=e,a7}var l7,gW;function vIe(){if(gW)return l7;gW=1;var n=CU(),e=yIe(),t=Object.prototype,i=t.hasOwnProperty;function r(o){if(!n(o))return e(o);var s=[];for(var a in Object(o))i.call(o,a)&&a!="constructor"&&s.push(a);return s}return l7=r,l7}var u7,yW;function _p(){if(yW)return u7;yW=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return u7=n,u7}var c7,vW;function _U(){if(vW)return c7;vW=1;var n=oC(),e=_p(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",o="[object Proxy]";function s(a){if(!e(a))return!1;var c=n(a);return c==i||c==r||c==t||c==o}return c7=s,c7}var A7,bW;function Vx(){if(bW)return A7;bW=1;var n=_U(),e=gU();function t(i){return i!=null&&e(i.length)&&!n(i)}return A7=t,A7}var h7,CW;function O5(){if(CW)return h7;CW=1;var n=Rre(),e=vIe(),t=Vx();function i(r){return t(r)?n(r):e(r)}return h7=i,h7}var d7,_W;function Pre(){if(_W)return d7;_W=1;var n=Tre(),e=O5();function t(i,r){return i&&n(i,r,e)}return d7=t,d7}var f7,xW;function F6(){if(xW)return f7;xW=1;function n(e){return e}return f7=n,f7}var p7,MW;function Kre(){if(MW)return p7;MW=1;var n=F6();function e(t){return typeof t=="function"?t:n}return p7=e,p7}var m7,wW;function xU(){if(wW)return m7;wW=1;var n=Pre(),e=Kre();function t(i,r){return i&&n(i,e(r))}return m7=t,m7}var g7,SW;function MU(){if(SW)return g7;SW=1;var n=Dre(),e=n(Object.getPrototypeOf,Object);return g7=e,g7}var y7,EW;function Ure(){if(EW)return y7;EW=1;var n=oC(),e=MU(),t=A0(),i="[object Object]",r=Function.prototype,o=Object.prototype,s=r.toString,a=o.hasOwnProperty,c=s.call(Object);function h(m){if(!t(m)||n(m)!=i)return!1;var v=e(m);if(v===null)return!0;var x=a.call(v,"constructor")&&v.constructor;return typeof x=="function"&&x instanceof x&&s.call(x)==c}return y7=h,y7}var v7,BW;function Lre(){if(BW)return v7;BW=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=Array(r);++i<r;)o[i]=t(e[i],i,e);return o}return v7=n,v7}var b7,OW;function bIe(){if(OW)return b7;OW=1;function n(){this.__data__=[],this.size=0}return b7=n,b7}var C7,IW;function I5(){if(IW)return C7;IW=1;function n(e,t){return e===t||e!==e&&t!==t}return C7=n,C7}var _7,kW;function j6(){if(kW)return _7;kW=1;var n=I5();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return _7=e,_7}var x7,TW;function CIe(){if(TW)return x7;TW=1;var n=j6(),e=Array.prototype,t=e.splice;function i(r){var o=this.__data__,s=n(o,r);if(s<0)return!1;var a=o.length-1;return s==a?o.pop():t.call(o,s,1),--this.size,!0}return x7=i,x7}var M7,RW;function _Ie(){if(RW)return M7;RW=1;var n=j6();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return M7=e,M7}var w7,DW;function xIe(){if(DW)return w7;DW=1;var n=j6();function e(t){return n(this.__data__,t)>-1}return w7=e,w7}var S7,PW;function MIe(){if(PW)return S7;PW=1;var n=j6();function e(t,i){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,i])):r[o][1]=i,this}return S7=e,S7}var E7,KW;function N6(){if(KW)return E7;KW=1;var n=bIe(),e=CIe(),t=_Ie(),i=xIe(),r=MIe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,E7=o,E7}var B7,UW;function wIe(){if(UW)return B7;UW=1;var n=N6();function e(){this.__data__=new n,this.size=0}return B7=e,B7}var O7,LW;function SIe(){if(LW)return O7;LW=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return O7=n,O7}var I7,zW;function EIe(){if(zW)return I7;zW=1;function n(e){return this.__data__.get(e)}return I7=n,I7}var k7,FW;function BIe(){if(FW)return k7;FW=1;function n(e){return this.__data__.has(e)}return k7=n,k7}var T7,jW;function OIe(){if(jW)return T7;jW=1;var n=km(),e=n["__core-js_shared__"];return T7=e,T7}var R7,NW;function IIe(){if(NW)return R7;NW=1;var n=OIe(),e=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function t(i){return!!e&&e in i}return R7=t,R7}var D7,GW;function zre(){if(GW)return D7;GW=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return D7=t,D7}var P7,QW;function kIe(){if(QW)return P7;QW=1;var n=_U(),e=IIe(),t=_p(),i=zre(),r=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,a=Object.prototype,c=s.toString,h=a.hasOwnProperty,m=RegExp("^"+c.call(h).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(x){if(!t(x)||e(x))return!1;var E=n(x)?m:o;return E.test(i(x))}return P7=v,P7}var K7,WW;function TIe(){if(WW)return K7;WW=1;function n(e,t){return e?.[t]}return K7=n,K7}var U7,qW;function sC(){if(qW)return U7;qW=1;var n=kIe(),e=TIe();function t(i,r){var o=e(i,r);return n(o)?o:void 0}return U7=t,U7}var L7,YW;function wU(){if(YW)return L7;YW=1;var n=sC(),e=km(),t=n(e,"Map");return L7=t,L7}var z7,VW;function G6(){if(VW)return z7;VW=1;var n=sC(),e=n(Object,"create");return z7=e,z7}var F7,$W;function RIe(){if($W)return F7;$W=1;var n=G6();function e(){this.__data__=n?n(null):{},this.size=0}return F7=e,F7}var j7,HW;function DIe(){if(HW)return j7;HW=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return j7=n,j7}var N7,ZW;function PIe(){if(ZW)return N7;ZW=1;var n=G6(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(o){var s=this.__data__;if(n){var a=s[o];return a===e?void 0:a}return i.call(s,o)?s[o]:void 0}return N7=r,N7}var G7,XW;function KIe(){if(XW)return G7;XW=1;var n=G6(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var o=this.__data__;return n?o[r]!==void 0:t.call(o,r)}return G7=i,G7}var Q7,JW;function UIe(){if(JW)return Q7;JW=1;var n=G6(),e="__lodash_hash_undefined__";function t(i,r){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=n&&r===void 0?e:r,this}return Q7=t,Q7}var W7,eq;function LIe(){if(eq)return W7;eq=1;var n=RIe(),e=DIe(),t=PIe(),i=KIe(),r=UIe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,W7=o,W7}var q7,tq;function zIe(){if(tq)return q7;tq=1;var n=LIe(),e=N6(),t=wU();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return q7=i,q7}var Y7,nq;function FIe(){if(nq)return Y7;nq=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Y7=n,Y7}var V7,iq;function Q6(){if(iq)return V7;iq=1;var n=FIe();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return V7=e,V7}var $7,rq;function jIe(){if(rq)return $7;rq=1;var n=Q6();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return $7=e,$7}var H7,oq;function NIe(){if(oq)return H7;oq=1;var n=Q6();function e(t){return n(this,t).get(t)}return H7=e,H7}var Z7,sq;function GIe(){if(sq)return Z7;sq=1;var n=Q6();function e(t){return n(this,t).has(t)}return Z7=e,Z7}var X7,aq;function QIe(){if(aq)return X7;aq=1;var n=Q6();function e(t,i){var r=n(this,t),o=r.size;return r.set(t,i),this.size+=r.size==o?0:1,this}return X7=e,X7}var J7,lq;function SU(){if(lq)return J7;lq=1;var n=zIe(),e=jIe(),t=NIe(),i=GIe(),r=QIe();function o(s){var a=-1,c=s==null?0:s.length;for(this.clear();++a<c;){var h=s[a];this.set(h[0],h[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=i,o.prototype.set=r,J7=o,J7}var eI,uq;function WIe(){if(uq)return eI;uq=1;var n=N6(),e=wU(),t=SU(),i=200;function r(o,s){var a=this.__data__;if(a instanceof n){var c=a.__data__;if(!e||c.length<i-1)return c.push([o,s]),this.size=++a.size,this;a=this.__data__=new t(c)}return a.set(o,s),this.size=a.size,this}return eI=r,eI}var tI,cq;function W6(){if(cq)return tI;cq=1;var n=N6(),e=wIe(),t=SIe(),i=EIe(),r=BIe(),o=WIe();function s(a){var c=this.__data__=new n(a);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=i,s.prototype.has=r,s.prototype.set=o,tI=s,tI}var nI,Aq;function qIe(){if(Aq)return nI;Aq=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return nI=e,nI}var iI,hq;function YIe(){if(hq)return iI;hq=1;function n(e){return this.__data__.has(e)}return iI=n,iI}var rI,dq;function VIe(){if(dq)return rI;dq=1;var n=SU(),e=qIe(),t=YIe();function i(r){var o=-1,s=r==null?0:r.length;for(this.__data__=new n;++o<s;)this.add(r[o])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,rI=i,rI}var oI,fq;function $Ie(){if(fq)return oI;fq=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return oI=n,oI}var sI,pq;function HIe(){if(pq)return sI;pq=1;function n(e,t){return e.has(t)}return sI=n,sI}var aI,mq;function Fre(){if(mq)return aI;mq=1;var n=VIe(),e=$Ie(),t=HIe(),i=1,r=2;function o(s,a,c,h,m,v){var x=c&i,E=s.length,R=a.length;if(E!=R&&!(x&&R>E))return!1;var P=v.get(s),z=v.get(a);if(P&&z)return P==a&&z==s;var Q=-1,Y=!0,H=c&r?new n:void 0;for(v.set(s,a),v.set(a,s);++Q<E;){var Z=s[Q],J=a[Q];if(h)var $=x?h(J,Z,Q,a,s,v):h(Z,J,Q,s,a,v);if($!==void 0){if($)continue;Y=!1;break}if(H){if(!e(a,function(G,oe){if(!t(H,oe)&&(Z===G||m(Z,G,c,h,v)))return H.push(oe)})){Y=!1;break}}else if(!(Z===J||m(Z,J,c,h,v))){Y=!1;break}}return v.delete(s),v.delete(a),Y}return aI=o,aI}var lI,gq;function jre(){if(gq)return lI;gq=1;var n=km(),e=n.Uint8Array;return lI=e,lI}var uI,yq;function ZIe(){if(yq)return uI;yq=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,o){i[++t]=[o,r]}),i}return uI=n,uI}var cI,vq;function XIe(){if(vq)return cI;vq=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return cI=n,cI}var AI,bq;function JIe(){if(bq)return AI;bq=1;var n=B5(),e=jre(),t=I5(),i=Fre(),r=ZIe(),o=XIe(),s=1,a=2,c="[object Boolean]",h="[object Date]",m="[object Error]",v="[object Map]",x="[object Number]",E="[object RegExp]",R="[object Set]",P="[object String]",z="[object Symbol]",Q="[object ArrayBuffer]",Y="[object DataView]",H=n?n.prototype:void 0,Z=H?H.valueOf:void 0;function J($,G,oe,ue,xe,ge,Ie){switch(oe){case Y:if($.byteLength!=G.byteLength||$.byteOffset!=G.byteOffset)return!1;$=$.buffer,G=G.buffer;case Q:return!($.byteLength!=G.byteLength||!ge(new e($),new e(G)));case c:case h:case x:return t(+$,+G);case m:return $.name==G.name&&$.message==G.message;case E:case P:return $==G+"";case v:var Me=r;case R:var ke=ue&s;if(Me||(Me=o),$.size!=G.size&&!ke)return!1;var je=Ie.get($);if(je)return je==G;ue|=a,Ie.set($,G);var Be=i(Me($),Me(G),ue,xe,ge,Ie);return Ie.delete($),Be;case z:if(Z)return Z.call($)==Z.call(G)}return!1}return AI=J,AI}var hI,Cq;function Nre(){if(Cq)return hI;Cq=1;function n(e,t){for(var i=-1,r=t.length,o=e.length;++i<r;)e[o+i]=t[i];return e}return hI=n,hI}var dI,_q;function Gre(){if(_q)return dI;_q=1;var n=Nre(),e=Ef();function t(i,r,o){var s=r(i);return e(i)?s:n(s,o(i))}return dI=t,dI}var fI,xq;function eke(){if(xq)return fI;xq=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,o=0,s=[];++i<r;){var a=e[i];t(a,i,e)&&(s[o++]=a)}return s}return fI=n,fI}var pI,Mq;function Qre(){if(Mq)return pI;Mq=1;function n(){return[]}return pI=n,pI}var mI,wq;function EU(){if(wq)return mI;wq=1;var n=eke(),e=Qre(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,o=r?function(s){return s==null?[]:(s=Object(s),n(r(s),function(a){return i.call(s,a)}))}:e;return mI=o,mI}var gI,Sq;function Wre(){if(Sq)return gI;Sq=1;var n=Gre(),e=EU(),t=O5();function i(r){return n(r,t,e)}return gI=i,gI}var yI,Eq;function tke(){if(Eq)return yI;Eq=1;var n=Wre(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a,c,h,m){var v=a&e,x=n(o),E=x.length,R=n(s),P=R.length;if(E!=P&&!v)return!1;for(var z=E;z--;){var Q=x[z];if(!(v?Q in s:i.call(s,Q)))return!1}var Y=m.get(o),H=m.get(s);if(Y&&H)return Y==s&&H==o;var Z=!0;m.set(o,s),m.set(s,o);for(var J=v;++z<E;){Q=x[z];var $=o[Q],G=s[Q];if(c)var oe=v?c(G,$,Q,s,o,m):c($,G,Q,o,s,m);if(!(oe===void 0?$===G||h($,G,a,c,m):oe)){Z=!1;break}J||(J=Q=="constructor")}if(Z&&!J){var ue=o.constructor,xe=s.constructor;ue!=xe&&"constructor"in o&&"constructor"in s&&!(typeof ue=="function"&&ue instanceof ue&&typeof xe=="function"&&xe instanceof xe)&&(Z=!1)}return m.delete(o),m.delete(s),Z}return yI=r,yI}var vI,Bq;function nke(){if(Bq)return vI;Bq=1;var n=sC(),e=km(),t=n(e,"DataView");return vI=t,vI}var bI,Oq;function ike(){if(Oq)return bI;Oq=1;var n=sC(),e=km(),t=n(e,"Promise");return bI=t,bI}var CI,Iq;function rke(){if(Iq)return CI;Iq=1;var n=sC(),e=km(),t=n(e,"Set");return CI=t,CI}var _I,kq;function oke(){if(kq)return _I;kq=1;var n=sC(),e=km(),t=n(e,"WeakMap");return _I=t,_I}var xI,Tq;function q6(){if(Tq)return xI;Tq=1;var n=nke(),e=wU(),t=ike(),i=rke(),r=oke(),o=oC(),s=zre(),a="[object Map]",c="[object Object]",h="[object Promise]",m="[object Set]",v="[object WeakMap]",x="[object DataView]",E=s(n),R=s(e),P=s(t),z=s(i),Q=s(r),Y=o;return(n&&Y(new n(new ArrayBuffer(1)))!=x||e&&Y(new e)!=a||t&&Y(t.resolve())!=h||i&&Y(new i)!=m||r&&Y(new r)!=v)&&(Y=function(H){var Z=o(H),J=Z==c?H.constructor:void 0,$=J?s(J):"";if($)switch($){case E:return x;case R:return a;case P:return h;case z:return m;case Q:return v}return Z}),xI=Y,xI}var MI,Rq;function ske(){if(Rq)return MI;Rq=1;var n=W6(),e=Fre(),t=JIe(),i=tke(),r=q6(),o=Ef(),s=z6(),a=bU(),c=1,h="[object Arguments]",m="[object Array]",v="[object Object]",x=Object.prototype,E=x.hasOwnProperty;function R(P,z,Q,Y,H,Z){var J=o(P),$=o(z),G=J?m:r(P),oe=$?m:r(z);G=G==h?v:G,oe=oe==h?v:oe;var ue=G==v,xe=oe==v,ge=G==oe;if(ge&&s(P)){if(!s(z))return!1;J=!0,ue=!1}if(ge&&!ue)return Z||(Z=new n),J||a(P)?e(P,z,Q,Y,H,Z):t(P,z,G,Q,Y,H,Z);if(!(Q&c)){var Ie=ue&&E.call(P,"__wrapped__"),Me=xe&&E.call(z,"__wrapped__");if(Ie||Me){var ke=Ie?P.value():P,je=Me?z.value():z;return Z||(Z=new n),H(ke,je,Q,Y,Z)}}return ge?(Z||(Z=new n),i(P,z,Q,Y,H,Z)):!1}return MI=R,MI}var wI,Dq;function qre(){if(Dq)return wI;Dq=1;var n=ske(),e=A0();function t(i,r,o,s,a){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,o,s,t,a)}return wI=t,wI}var SI,Pq;function ake(){if(Pq)return SI;Pq=1;var n=W6(),e=qre(),t=1,i=2;function r(o,s,a,c){var h=a.length,m=h,v=!c;if(o==null)return!m;for(o=Object(o);h--;){var x=a[h];if(v&&x[2]?x[1]!==o[x[0]]:!(x[0]in o))return!1}for(;++h<m;){x=a[h];var E=x[0],R=o[E],P=x[1];if(v&&x[2]){if(R===void 0&&!(E in o))return!1}else{var z=new n;if(c)var Q=c(R,P,E,o,s,z);if(!(Q===void 0?e(P,R,t|i,c,z):Q))return!1}}return!0}return SI=r,SI}var EI,Kq;function Yre(){if(Kq)return EI;Kq=1;var n=_p();function e(t){return t===t&&!n(t)}return EI=e,EI}var BI,Uq;function lke(){if(Uq)return BI;Uq=1;var n=Yre(),e=O5();function t(i){for(var r=e(i),o=r.length;o--;){var s=r[o],a=i[s];r[o]=[s,a,n(a)]}return r}return BI=t,BI}var OI,Lq;function Vre(){if(Lq)return OI;Lq=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return OI=n,OI}var II,zq;function uke(){if(zq)return II;zq=1;var n=ake(),e=lke(),t=Vre();function i(r){var o=e(r);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(s){return s===r||n(s,r,o)}}return II=i,II}var kI,Fq;function Y6(){if(Fq)return kI;Fq=1;var n=oC(),e=A0(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return kI=i,kI}var TI,jq;function BU(){if(jq)return TI;jq=1;var n=Ef(),e=Y6(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(o,s){if(n(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||e(o)?!0:i.test(o)||!t.test(o)||s!=null&&o in Object(s)}return TI=r,TI}var RI,Nq;function cke(){if(Nq)return RI;Nq=1;var n=SU(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var o=function(){var s=arguments,a=r?r.apply(this,s):s[0],c=o.cache;if(c.has(a))return c.get(a);var h=i.apply(this,s);return o.cache=c.set(a,h)||c,h};return o.cache=new(t.Cache||n),o}return t.Cache=n,RI=t,RI}var DI,Gq;function Ake(){if(Gq)return DI;Gq=1;var n=cke(),e=500;function t(i){var r=n(i,function(s){return o.size===e&&o.clear(),s}),o=r.cache;return r}return DI=t,DI}var PI,Qq;function hke(){if(Qq)return PI;Qq=1;var n=Ake(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(e,function(s,a,c,h){o.push(c?h.replace(t,"$1"):a||s)}),o});return PI=i,PI}var KI,Wq;function dke(){if(Wq)return KI;Wq=1;var n=B5(),e=Lre(),t=Ef(),i=Y6(),r=n?n.prototype:void 0,o=r?r.toString:void 0;function s(a){if(typeof a=="string")return a;if(t(a))return e(a,s)+"";if(i(a))return o?o.call(a):"";var c=a+"";return c=="0"&&1/a==-1/0?"-0":c}return KI=s,KI}var UI,qq;function fke(){if(qq)return UI;qq=1;var n=dke();function e(t){return t==null?"":n(t)}return UI=e,UI}var LI,Yq;function $re(){if(Yq)return LI;Yq=1;var n=Ef(),e=BU(),t=hke(),i=fke();function r(o,s){return n(o)?o:e(o,s)?[o]:t(i(o))}return LI=r,LI}var zI,Vq;function V6(){if(Vq)return zI;Vq=1;var n=Y6();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return zI=e,zI}var FI,$q;function Hre(){if($q)return FI;$q=1;var n=$re(),e=V6();function t(i,r){r=n(r,i);for(var o=0,s=r.length;i!=null&&o<s;)i=i[e(r[o++])];return o&&o==s?i:void 0}return FI=t,FI}var jI,Hq;function pke(){if(Hq)return jI;Hq=1;var n=Hre();function e(t,i,r){var o=t==null?void 0:n(t,i);return o===void 0?r:o}return jI=e,jI}var NI,Zq;function mke(){if(Zq)return NI;Zq=1;function n(e,t){return e!=null&&t in Object(e)}return NI=n,NI}var GI,Xq;function gke(){if(Xq)return GI;Xq=1;var n=$re(),e=pU(),t=Ef(),i=mU(),r=gU(),o=V6();function s(a,c,h){c=n(c,a);for(var m=-1,v=c.length,x=!1;++m<v;){var E=o(c[m]);if(!(x=a!=null&&h(a,E)))break;a=a[E]}return x||++m!=v?x:(v=a==null?0:a.length,!!v&&r(v)&&i(E,v)&&(t(a)||e(a)))}return GI=s,GI}var QI,Jq;function yke(){if(Jq)return QI;Jq=1;var n=mke(),e=gke();function t(i,r){return i!=null&&e(i,r,n)}return QI=t,QI}var WI,eY;function vke(){if(eY)return WI;eY=1;var n=qre(),e=pke(),t=yke(),i=BU(),r=Yre(),o=Vre(),s=V6(),a=1,c=2;function h(m,v){return i(m)&&r(v)?o(s(m),v):function(x){var E=e(x,m);return E===void 0&&E===v?t(x,m):n(v,E,a|c)}}return WI=h,WI}var qI,tY;function bke(){if(tY)return qI;tY=1;function n(e){return function(t){return t?.[e]}}return qI=n,qI}var YI,nY;function Cke(){if(nY)return YI;nY=1;var n=Hre();function e(t){return function(i){return n(i,t)}}return YI=e,YI}var VI,iY;function _ke(){if(iY)return VI;iY=1;var n=bke(),e=Cke(),t=BU(),i=V6();function r(o){return t(o)?n(i(o)):e(o)}return VI=r,VI}var $I,rY;function xke(){if(rY)return $I;rY=1;var n=uke(),e=vke(),t=F6(),i=Ef(),r=_ke();function o(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?i(s)?e(s[0],s[1]):n(s):r(s)}return $I=o,$I}var HI,oY;function Mke(){if(oY)return HI;oY=1;var n=Vx();function e(t,i){return function(r,o){if(r==null)return r;if(!n(r))return t(r,o);for(var s=r.length,a=i?s:-1,c=Object(r);(i?a--:++a<s)&&o(c[a],a,c)!==!1;);return r}}return HI=e,HI}var ZI,sY;function Zre(){if(sY)return ZI;sY=1;var n=Pre(),e=Mke(),t=e(n);return ZI=t,ZI}var XI,aY;function wke(){if(aY)return XI;aY=1;var n=Zre(),e=Vx();function t(i,r){var o=-1,s=e(i)?Array(i.length):[];return n(i,function(a,c,h){s[++o]=r(a,c,h)}),s}return XI=t,XI}var JI,lY;function Ske(){if(lY)return JI;lY=1;var n=Lre(),e=xke(),t=wke(),i=Ef();function r(o,s){var a=i(o)?n:t;return a(o,e(s,3))}return JI=r,JI}var uY;function Eke(){if(uY)return VC;uY=1,Object.defineProperty(VC,"__esModule",{value:!0}),VC.flattenNames=void 0;var n=hIe(),e=c(n),t=xU(),i=c(t),r=Ure(),o=c(r),s=Ske(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var h=VC.flattenNames=function m(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=[];return(0,a.default)(v,function(E){Array.isArray(E)?m(E).map(function(R){return x.push(R)}):(0,o.default)(E)?(0,i.default)(E,function(R,P){R===!0&&x.push(P),x.push(P+"-"+R)}):(0,e.default)(E)&&x.push(E)}),x};return VC.default=h,VC}var $C={},ek,cY;function Xre(){if(cY)return ek;cY=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return ek=n,ek}var tk,AY;function Jre(){if(AY)return tk;AY=1;var n=sC(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return tk=e,tk}var nk,hY;function OU(){if(hY)return nk;hY=1;var n=Jre();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return nk=e,nk}var ik,dY;function eoe(){if(dY)return ik;dY=1;var n=OU(),e=I5(),t=Object.prototype,i=t.hasOwnProperty;function r(o,s,a){var c=o[s];(!(i.call(o,s)&&e(c,a))||a===void 0&&!(s in o))&&n(o,s,a)}return ik=r,ik}var rk,fY;function k5(){if(fY)return rk;fY=1;var n=eoe(),e=OU();function t(i,r,o,s){var a=!o;o||(o={});for(var c=-1,h=r.length;++c<h;){var m=r[c],v=s?s(o[m],i[m],m,o,i):void 0;v===void 0&&(v=i[m]),a?e(o,m,v):n(o,m,v)}return o}return rk=t,rk}var ok,pY;function Bke(){if(pY)return ok;pY=1;var n=k5(),e=O5();function t(i,r){return i&&n(r,e(r),i)}return ok=t,ok}var sk,mY;function Oke(){if(mY)return sk;mY=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return sk=n,sk}var ak,gY;function Ike(){if(gY)return ak;gY=1;var n=_p(),e=CU(),t=Oke(),i=Object.prototype,r=i.hasOwnProperty;function o(s){if(!n(s))return t(s);var a=e(s),c=[];for(var h in s)h=="constructor"&&(a||!r.call(s,h))||c.push(h);return c}return ak=o,ak}var lk,yY;function T5(){if(yY)return lk;yY=1;var n=Rre(),e=Ike(),t=Vx();function i(r){return t(r)?n(r,!0):e(r)}return lk=i,lk}var uk,vY;function kke(){if(vY)return uk;vY=1;var n=k5(),e=T5();function t(i,r){return i&&n(r,e(r),i)}return uk=t,uk}var X2={exports:{}};X2.exports;var bY;function toe(){return bY||(bY=1,(function(n,e){var t=km(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,o=r&&r.exports===i,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(h,m){if(m)return h.slice();var v=h.length,x=a?a(v):new h.constructor(v);return h.copy(x),x}n.exports=c})(X2,X2.exports)),X2.exports}var ck,CY;function noe(){if(CY)return ck;CY=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return ck=n,ck}var Ak,_Y;function Tke(){if(_Y)return Ak;_Y=1;var n=k5(),e=EU();function t(i,r){return n(i,e(i),r)}return Ak=t,Ak}var hk,xY;function ioe(){if(xY)return hk;xY=1;var n=Nre(),e=MU(),t=EU(),i=Qre(),r=Object.getOwnPropertySymbols,o=r?function(s){for(var a=[];s;)n(a,t(s)),s=e(s);return a}:i;return hk=o,hk}var dk,MY;function Rke(){if(MY)return dk;MY=1;var n=k5(),e=ioe();function t(i,r){return n(i,e(i),r)}return dk=t,dk}var fk,wY;function Dke(){if(wY)return fk;wY=1;var n=Gre(),e=ioe(),t=T5();function i(r){return n(r,t,e)}return fk=i,fk}var pk,SY;function Pke(){if(SY)return pk;SY=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,o=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(o.index=i.index,o.input=i.input),o}return pk=t,pk}var mk,EY;function IU(){if(EY)return mk;EY=1;var n=jre();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return mk=e,mk}var gk,BY;function Kke(){if(BY)return gk;BY=1;var n=IU();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return gk=e,gk}var yk,OY;function Uke(){if(OY)return yk;OY=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return yk=e,yk}var vk,IY;function Lke(){if(IY)return vk;IY=1;var n=B5(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return vk=i,vk}var bk,kY;function roe(){if(kY)return bk;kY=1;var n=IU();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return bk=e,bk}var Ck,TY;function zke(){if(TY)return Ck;TY=1;var n=IU(),e=Kke(),t=Uke(),i=Lke(),r=roe(),o="[object Boolean]",s="[object Date]",a="[object Map]",c="[object Number]",h="[object RegExp]",m="[object Set]",v="[object String]",x="[object Symbol]",E="[object ArrayBuffer]",R="[object DataView]",P="[object Float32Array]",z="[object Float64Array]",Q="[object Int8Array]",Y="[object Int16Array]",H="[object Int32Array]",Z="[object Uint8Array]",J="[object Uint8ClampedArray]",$="[object Uint16Array]",G="[object Uint32Array]";function oe(ue,xe,ge){var Ie=ue.constructor;switch(xe){case E:return n(ue);case o:case s:return new Ie(+ue);case R:return e(ue,ge);case P:case z:case Q:case Y:case H:case Z:case J:case $:case G:return r(ue,ge);case a:return new Ie;case c:case v:return new Ie(ue);case h:return t(ue);case m:return new Ie;case x:return i(ue)}}return Ck=oe,Ck}var _k,RY;function Fke(){if(RY)return _k;RY=1;var n=_p(),e=Object.create,t=(function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var o=new i;return i.prototype=void 0,o}})();return _k=t,_k}var xk,DY;function ooe(){if(DY)return xk;DY=1;var n=Fke(),e=MU(),t=CU();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return xk=i,xk}var Mk,PY;function jke(){if(PY)return Mk;PY=1;var n=q6(),e=A0(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return Mk=i,Mk}var wk,KY;function Nke(){if(KY)return wk;KY=1;var n=jke(),e=yU(),t=vU(),i=t&&t.isMap,r=i?e(i):n;return wk=r,wk}var Sk,UY;function Gke(){if(UY)return Sk;UY=1;var n=q6(),e=A0(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return Sk=i,Sk}var Ek,LY;function Qke(){if(LY)return Ek;LY=1;var n=Gke(),e=yU(),t=vU(),i=t&&t.isSet,r=i?e(i):n;return Ek=r,Ek}var Bk,zY;function Wke(){if(zY)return Bk;zY=1;var n=W6(),e=Xre(),t=eoe(),i=Bke(),r=kke(),o=toe(),s=noe(),a=Tke(),c=Rke(),h=Wre(),m=Dke(),v=q6(),x=Pke(),E=zke(),R=ooe(),P=Ef(),z=z6(),Q=Nke(),Y=_p(),H=Qke(),Z=O5(),J=T5(),$=1,G=2,oe=4,ue="[object Arguments]",xe="[object Array]",ge="[object Boolean]",Ie="[object Date]",Me="[object Error]",ke="[object Function]",je="[object GeneratorFunction]",Be="[object Map]",Ye="[object Number]",At="[object Object]",yt="[object RegExp]",Le="[object Set]",De="[object String]",Ge="[object Symbol]",Te="[object WeakMap]",xt="[object ArrayBuffer]",st="[object DataView]",Tt="[object Float32Array]",Lt="[object Float64Array]",Ue="[object Int8Array]",Oe="[object Int16Array]",Ee="[object Int32Array]",Ve="[object Uint8Array]",mt="[object Uint8ClampedArray]",pt="[object Uint16Array]",Ct="[object Uint32Array]",Rt={};Rt[ue]=Rt[xe]=Rt[xt]=Rt[st]=Rt[ge]=Rt[Ie]=Rt[Tt]=Rt[Lt]=Rt[Ue]=Rt[Oe]=Rt[Ee]=Rt[Be]=Rt[Ye]=Rt[At]=Rt[yt]=Rt[Le]=Rt[De]=Rt[Ge]=Rt[Ve]=Rt[mt]=Rt[pt]=Rt[Ct]=!0,Rt[Me]=Rt[ke]=Rt[Te]=!1;function Kt(on,qn,Qn,xi,Kn,Un){var Cn,ei=qn&$,Dn=qn&G,It=qn&oe;if(Qn&&(Cn=Kn?Qn(on,xi,Kn,Un):Qn(on)),Cn!==void 0)return Cn;if(!Y(on))return on;var Ce=P(on);if(Ce){if(Cn=x(on),!ei)return s(on,Cn)}else{var re=v(on),le=re==ke||re==je;if(z(on))return o(on,ei);if(re==At||re==ue||le&&!Kn){if(Cn=Dn||le?{}:R(on),!ei)return Dn?c(on,r(Cn,on)):a(on,i(Cn,on))}else{if(!Rt[re])return Kn?on:{};Cn=E(on,re,ei)}}Un||(Un=new n);var he=Un.get(on);if(he)return he;Un.set(on,Cn),H(on)?on.forEach(function(be){Cn.add(Kt(be,qn,Qn,be,on,Un))}):Q(on)&&on.forEach(function(be,We){Cn.set(We,Kt(be,qn,Qn,We,on,Un))});var se=It?Dn?m:h:Dn?J:Z,Ae=Ce?void 0:se(on);return e(Ae||on,function(be,We){Ae&&(We=be,be=on[We]),t(Cn,We,Kt(be,qn,Qn,We,on,Un))}),Cn}return Bk=Kt,Bk}var Ok,FY;function qke(){if(FY)return Ok;FY=1;var n=Wke(),e=1,t=4;function i(r){return n(r,e|t)}return Ok=i,Ok}var jY;function Yke(){if(jY)return $C;jY=1,Object.defineProperty($C,"__esModule",{value:!0}),$C.mergeClasses=void 0;var n=xU(),e=o(n),t=qke(),i=o(t),r=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(a[m]=h[m])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var s=$C.mergeClasses=function(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=c.default&&(0,i.default)(c.default)||{};return h.map(function(v){var x=c[v];return x&&(0,e.default)(x,function(E,R){m[R]||(m[R]={}),m[R]=r({},m[R],x[R])}),v}),m};return $C.default=s,$C}var HC={},NY;function Vke(){if(NY)return HC;NY=1,Object.defineProperty(HC,"__esModule",{value:!0}),HC.autoprefix=void 0;var n=xU(),e=i(n),t=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s};function i(s){return s&&s.__esModule?s:{default:s}}var r={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var c=a&&a.split(" ");return{position:"absolute",top:c&&c[0],right:c&&c[1],bottom:c&&c[2],left:c&&c[3]}},extend:function(a,c){var h=c[a];return h||{extend:a}}},o=HC.autoprefix=function(a){var c={};return(0,e.default)(a,function(h,m){var v={};(0,e.default)(h,function(x,E){var R=r[E];R?v=t({},v,R(x)):v[E]=x}),c[m]=v}),c};return HC.default=o,HC}var ZC={},GY;function $ke(){if(GY)return ZC;GY=1,Object.defineProperty(ZC,"__esModule",{value:!0}),ZC.hover=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=Ba(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=ZC.hover=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){s(x,v);function x(){var E,R,P,z;r(this,x);for(var Q=arguments.length,Y=Array(Q),H=0;H<Q;H++)Y[H]=arguments[H];return z=(R=(P=o(this,(E=x.__proto__||Object.getPrototypeOf(x)).call.apply(E,[this].concat(Y))),P),P.state={hover:!1},P.handleMouseOver=function(){return P.setState({hover:!0})},P.handleMouseOut=function(){return P.setState({hover:!1})},P.render=function(){return t.default.createElement(m,{onMouseOver:P.handleMouseOver,onMouseOut:P.handleMouseOut},t.default.createElement(h,n({},P.props,P.state)))},R),o(P,z)}return x})(t.default.Component)};return ZC.default=a,ZC}var XC={},QY;function Hke(){if(QY)return XC;QY=1,Object.defineProperty(XC,"__esModule",{value:!0}),XC.active=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=Ba(),t=i(e);function i(c){return c&&c.__esModule?c:{default:c}}function r(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function s(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}var a=XC.active=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){s(x,v);function x(){var E,R,P,z;r(this,x);for(var Q=arguments.length,Y=Array(Q),H=0;H<Q;H++)Y[H]=arguments[H];return z=(R=(P=o(this,(E=x.__proto__||Object.getPrototypeOf(x)).call.apply(E,[this].concat(Y))),P),P.state={active:!1},P.handleMouseDown=function(){return P.setState({active:!0})},P.handleMouseUp=function(){return P.setState({active:!1})},P.render=function(){return t.default.createElement(m,{onMouseDown:P.handleMouseDown,onMouseUp:P.handleMouseUp},t.default.createElement(h,n({},P.props,P.state)))},R),o(P,z)}return x})(t.default.Component)};return XC.default=a,XC}var WM={},WY;function Zke(){if(WY)return WM;WY=1,Object.defineProperty(WM,"__esModule",{value:!0});var n=function(t,i){var r={},o=function(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[a]=c};return t===0&&o("first-child"),t===i-1&&o("last-child"),(t===0||t%2===0)&&o("even"),Math.abs(t%2)===1&&o("odd"),o("nth-child",t),r};return WM.default=n,WM}var qY;function Tm(){if(qY)return md;qY=1,Object.defineProperty(md,"__esModule",{value:!0}),md.ReactCSS=md.loop=md.handleActive=md.handleHover=md.hover=void 0;var n=Eke(),e=x(n),t=Yke(),i=x(t),r=Vke(),o=x(r),s=$ke(),a=x(s),c=Hke(),h=x(c),m=Zke(),v=x(m);function x(R){return R&&R.__esModule?R:{default:R}}md.hover=a.default,md.handleHover=a.default,md.handleActive=h.default,md.loop=v.default;var E=md.ReactCSS=function(P){for(var z=arguments.length,Q=Array(z>1?z-1:0),Y=1;Y<z;Y++)Q[Y-1]=arguments[Y];var H=(0,e.default)(Q),Z=(0,i.default)(P,H);return(0,o.default)(Z)};return md.default=E,md}var Ik,YY;function soe(){if(YY)return Ik;YY=1;var n=OU(),e=I5();function t(i,r,o){(o!==void 0&&!e(i[r],o)||o===void 0&&!(r in i))&&n(i,r,o)}return Ik=t,Ik}var kk,VY;function Xke(){if(VY)return kk;VY=1;var n=Vx(),e=A0();function t(i){return e(i)&&n(i)}return kk=t,kk}var Tk,$Y;function aoe(){if($Y)return Tk;$Y=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return Tk=n,Tk}var Rk,HY;function Jke(){if(HY)return Rk;HY=1;var n=k5(),e=T5();function t(i){return n(i,e(i))}return Rk=t,Rk}var Dk,ZY;function eTe(){if(ZY)return Dk;ZY=1;var n=soe(),e=toe(),t=roe(),i=noe(),r=ooe(),o=pU(),s=Ef(),a=Xke(),c=z6(),h=_U(),m=_p(),v=Ure(),x=bU(),E=aoe(),R=Jke();function P(z,Q,Y,H,Z,J,$){var G=E(z,Y),oe=E(Q,Y),ue=$.get(oe);if(ue){n(z,Y,ue);return}var xe=J?J(G,oe,Y+"",z,Q,$):void 0,ge=xe===void 0;if(ge){var Ie=s(oe),Me=!Ie&&c(oe),ke=!Ie&&!Me&&x(oe);xe=oe,Ie||Me||ke?s(G)?xe=G:a(G)?xe=i(G):Me?(ge=!1,xe=e(oe,!0)):ke?(ge=!1,xe=t(oe,!0)):xe=[]:v(oe)||o(oe)?(xe=G,o(G)?xe=R(G):(!m(G)||h(G))&&(xe=r(oe))):ge=!1}ge&&($.set(oe,xe),Z(xe,oe,H,J,$),$.delete(oe)),n(z,Y,xe)}return Dk=P,Dk}var Pk,XY;function tTe(){if(XY)return Pk;XY=1;var n=W6(),e=soe(),t=Tre(),i=eTe(),r=_p(),o=T5(),s=aoe();function a(c,h,m,v,x){c!==h&&t(h,function(E,R){if(x||(x=new n),r(E))i(c,h,R,m,a,v,x);else{var P=v?v(s(c,R),E,R+"",c,h,x):void 0;P===void 0&&(P=E),e(c,R,P)}},o)}return Pk=a,Pk}var Kk,JY;function nTe(){if(JY)return Kk;JY=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return Kk=n,Kk}var Uk,eV;function iTe(){if(eV)return Uk;eV=1;var n=nTe(),e=Math.max;function t(i,r,o){return r=e(r===void 0?i.length-1:r,0),function(){for(var s=arguments,a=-1,c=e(s.length-r,0),h=Array(c);++a<c;)h[a]=s[r+a];a=-1;for(var m=Array(r+1);++a<r;)m[a]=s[a];return m[r]=o(h),n(i,this,m)}}return Uk=t,Uk}var Lk,tV;function rTe(){if(tV)return Lk;tV=1;function n(e){return function(){return e}}return Lk=n,Lk}var zk,nV;function oTe(){if(nV)return zk;nV=1;var n=rTe(),e=Jre(),t=F6(),i=e?function(r,o){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:t;return zk=i,zk}var Fk,iV;function sTe(){if(iV)return Fk;iV=1;var n=800,e=16,t=Date.now;function i(r){var o=0,s=0;return function(){var a=t(),c=e-(a-s);if(s=a,c>0){if(++o>=n)return arguments[0]}else o=0;return r.apply(void 0,arguments)}}return Fk=i,Fk}var jk,rV;function aTe(){if(rV)return jk;rV=1;var n=oTe(),e=sTe(),t=e(n);return jk=t,jk}var Nk,oV;function lTe(){if(oV)return Nk;oV=1;var n=F6(),e=iTe(),t=aTe();function i(r,o){return t(e(r,o,n),r+"")}return Nk=i,Nk}var Gk,sV;function uTe(){if(sV)return Gk;sV=1;var n=I5(),e=Vx(),t=mU(),i=_p();function r(o,s,a){if(!i(a))return!1;var c=typeof s;return(c=="number"?e(a)&&t(s,a.length):c=="string"&&s in a)?n(a[s],o):!1}return Gk=r,Gk}var Qk,aV;function cTe(){if(aV)return Qk;aV=1;var n=lTe(),e=uTe();function t(i){return n(function(r,o){var s=-1,a=o.length,c=a>1?o[a-1]:void 0,h=a>2?o[2]:void 0;for(c=i.length>3&&typeof c=="function"?(a--,c):void 0,h&&e(o[0],o[1],h)&&(c=a<3?void 0:c,a=1),r=Object(r);++s<a;){var m=o[s];m&&i(r,m,s,c)}return r})}return Qk=t,Qk}var Wk,lV;function loe(){if(lV)return Wk;lV=1;var n=tTe(),e=cTe(),t=e(function(i,r,o){n(i,r,o)});return Wk=t,Wk}var qk={},JC={},qM={},uV;function ATe(){return uV||(uV=1,Object.defineProperty(qM,"__esModule",{value:!0}),qM.calculateChange=function(e,t,i,r,o){var s=o.clientWidth,a=o.clientHeight,c=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,h=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,m=c-(o.getBoundingClientRect().left+window.pageXOffset),v=h-(o.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var x=void 0;if(v<0?x=0:v>a?x=1:x=Math.round(v*100/a)/100,t.a!==x)return{h:t.h,s:t.s,l:t.l,a:x,source:"rgb"}}else{var E=void 0;if(m<0?E=0:m>s?E=1:E=Math.round(m*100/s)/100,r!==E)return{h:t.h,s:t.s,l:t.l,a:E,source:"rgb"}}return null}),qM}var e_={},E2={},cV;function hTe(){if(cV)return E2;cV=1,Object.defineProperty(E2,"__esModule",{value:!0});var n={},e=E2.render=function(i,r,o,s){if(typeof document>"u"&&!s)return null;var a=s?new s:document.createElement("canvas");a.width=o*2,a.height=o*2;var c=a.getContext("2d");return c?(c.fillStyle=i,c.fillRect(0,0,a.width,a.height),c.fillStyle=r,c.fillRect(0,0,o,o),c.translate(o,o),c.fillRect(0,0,o,o),a.toDataURL()):null};return E2.get=function(i,r,o,s){var a=i+"-"+r+"-"+o+(s?"-server":"");if(n[a])return n[a];var c=e(i,r,o,s);return n[a]=c,c},E2}var AV;function kU(){if(AV)return e_;AV=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.Checkboard=void 0;var n=Object.assign||function(m){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(m[E]=x[E])}return m},e=Ba(),t=c(e),i=Tm(),r=c(i),o=hTe(),s=a(o);function a(m){if(m&&m.__esModule)return m;var v={};if(m!=null)for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(v[x]=m[x]);return v.default=m,v}function c(m){return m&&m.__esModule?m:{default:m}}var h=e_.Checkboard=function(v){var x=v.white,E=v.grey,R=v.size,P=v.renderers,z=v.borderRadius,Q=v.boxShadow,Y=v.children,H=(0,r.default)({default:{grid:{borderRadius:z,boxShadow:Q,absolute:"0px 0px 0px 0px",background:"url("+s.get(x,E,R,P.canvas)+") center left"}}});return(0,e.isValidElement)(Y)?t.default.cloneElement(Y,n({},Y.props,{style:n({},Y.props.style,H.grid)})):t.default.createElement("div",{style:H.grid})};return h.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},e_.default=h,e_}var hV;function dTe(){if(hV)return JC;hV=1,Object.defineProperty(JC,"__esModule",{value:!0}),JC.Alpha=void 0;var n=Object.assign||function(z){for(var Q=1;Q<arguments.length;Q++){var Y=arguments[Q];for(var H in Y)Object.prototype.hasOwnProperty.call(Y,H)&&(z[H]=Y[H])}return z},e=(function(){function z(Q,Y){for(var H=0;H<Y.length;H++){var Z=Y[H];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(Q,Z.key,Z)}}return function(Q,Y,H){return Y&&z(Q.prototype,Y),H&&z(Q,H),Q}})(),t=Ba(),i=v(t),r=Tm(),o=v(r),s=ATe(),a=m(s),c=kU(),h=v(c);function m(z){if(z&&z.__esModule)return z;var Q={};if(z!=null)for(var Y in z)Object.prototype.hasOwnProperty.call(z,Y)&&(Q[Y]=z[Y]);return Q.default=z,Q}function v(z){return z&&z.__esModule?z:{default:z}}function x(z,Q){if(!(z instanceof Q))throw new TypeError("Cannot call a class as a function")}function E(z,Q){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q&&(typeof Q=="object"||typeof Q=="function")?Q:z}function R(z,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Q);z.prototype=Object.create(Q&&Q.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(z,Q):z.__proto__=Q)}var P=JC.Alpha=(function(z){R(Q,z);function Q(){var Y,H,Z,J;x(this,Q);for(var $=arguments.length,G=Array($),oe=0;oe<$;oe++)G[oe]=arguments[oe];return J=(H=(Z=E(this,(Y=Q.__proto__||Object.getPrototypeOf(Q)).call.apply(Y,[this].concat(G))),Z),Z.handleChange=function(ue){var xe=a.calculateChange(ue,Z.props.hsl,Z.props.direction,Z.props.a,Z.container);xe&&typeof Z.props.onChange=="function"&&Z.props.onChange(xe,ue)},Z.handleMouseDown=function(ue){Z.handleChange(ue),window.addEventListener("mousemove",Z.handleChange),window.addEventListener("mouseup",Z.handleMouseUp)},Z.handleMouseUp=function(){Z.unbindEventListeners()},Z.unbindEventListeners=function(){window.removeEventListener("mousemove",Z.handleChange),window.removeEventListener("mouseup",Z.handleMouseUp)},H),E(Z,J)}return e(Q,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var H=this,Z=this.props.rgb,J=(0,o.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+Z.r+","+Z.g+","+Z.b+`, 0) 0%,
           rgba(`+Z.r+","+Z.g+","+Z.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:Z.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+Z.r+","+Z.g+","+Z.b+`, 0) 0%,
           rgba(`+Z.r+","+Z.g+","+Z.b+", 1) 100%)"},pointer:{left:0,top:Z.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return i.default.createElement("div",{style:J.alpha},i.default.createElement("div",{style:J.checkboard},i.default.createElement(h.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:J.gradient}),i.default.createElement("div",{style:J.container,ref:function(G){return H.container=G},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:J.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:J.slider}))))}}]),Q})(t.PureComponent||t.Component);return JC.default=P,JC}var t_={},dV;function fTe(){if(dV)return t_;dV=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.EditableInput=void 0;var n=(function(){function Y(H,Z){for(var J=0;J<Z.length;J++){var $=Z[J];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(H,$.key,$)}}return function(H,Z,J){return Z&&Y(H.prototype,Z),J&&Y(H,J),H}})(),e=Ba(),t=o(e),i=Tm(),r=o(i);function o(Y){return Y&&Y.__esModule?Y:{default:Y}}function s(Y,H,Z){return H in Y?Object.defineProperty(Y,H,{value:Z,enumerable:!0,configurable:!0,writable:!0}):Y[H]=Z,Y}function a(Y,H){if(!(Y instanceof H))throw new TypeError("Cannot call a class as a function")}function c(Y,H){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:Y}function h(Y,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);Y.prototype=Object.create(H&&H.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,H):Y.__proto__=H)}var m=1,v=38,x=40,E=[v,x],R=function(H){return E.indexOf(H)>-1},P=function(H){return Number(String(H).replace(/%/g,""))},z=1,Q=t_.EditableInput=(function(Y){h(H,Y);function H(Z){a(this,H);var J=c(this,(H.__proto__||Object.getPrototypeOf(H)).call(this));return J.handleBlur=function(){J.state.blurValue&&J.setState({value:J.state.blurValue,blurValue:null})},J.handleChange=function($){J.setUpdatedValue($.target.value,$)},J.handleKeyDown=function($){var G=P($.target.value);if(!isNaN(G)&&R($.keyCode)){var oe=J.getArrowOffset(),ue=$.keyCode===v?G+oe:G-oe;J.setUpdatedValue(ue,$)}},J.handleDrag=function($){if(J.props.dragLabel){var G=Math.round(J.props.value+$.movementX);G>=0&&G<=J.props.dragMax&&J.props.onChange&&J.props.onChange(J.getValueObjectWithLabel(G),$)}},J.handleMouseDown=function($){J.props.dragLabel&&($.preventDefault(),J.handleDrag($),window.addEventListener("mousemove",J.handleDrag),window.addEventListener("mouseup",J.handleMouseUp))},J.handleMouseUp=function(){J.unbindEventListeners()},J.unbindEventListeners=function(){window.removeEventListener("mousemove",J.handleDrag),window.removeEventListener("mouseup",J.handleMouseUp)},J.state={value:String(Z.value).toUpperCase(),blurValue:String(Z.value).toUpperCase()},J.inputId="rc-editable-input-"+z++,J}return n(H,[{key:"componentDidUpdate",value:function(J,$){this.props.value!==this.state.value&&(J.value!==this.props.value||$.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(J){return s({},this.props.label,J)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||m}},{key:"setUpdatedValue",value:function(J,$){var G=this.props.label?this.getValueObjectWithLabel(J):J;this.props.onChange&&this.props.onChange(G,$),this.setState({value:J})}},{key:"render",value:function(){var J=this,$=(0,r.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:$.wrap},t.default.createElement("input",{id:this.inputId,style:$.input,ref:function(oe){return J.input=oe},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:$.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),H})(e.PureComponent||e.Component);return t_.default=Q,t_}var n_={},YM={},fV;function pTe(){return fV||(fV=1,Object.defineProperty(YM,"__esModule",{value:!0}),YM.calculateChange=function(e,t,i,r){var o=r.clientWidth,s=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(r.getBoundingClientRect().left+window.pageXOffset),m=c-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var v=void 0;if(m<0)v=359;else if(m>s)v=0;else{var x=-(m*100/s)+100;v=360*x/100}if(i.h!==v)return{h:v,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var E=void 0;if(h<0)E=0;else if(h>o)E=359;else{var R=h*100/o;E=360*R/100}if(i.h!==E)return{h:E,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null}),YM}var pV;function mTe(){if(pV)return n_;pV=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.Hue=void 0;var n=(function(){function E(R,P){for(var z=0;z<P.length;z++){var Q=P[z];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(R,Q.key,Q)}}return function(R,P,z){return P&&E(R.prototype,P),z&&E(R,z),R}})(),e=Ba(),t=c(e),i=Tm(),r=c(i),o=pTe(),s=a(o);function a(E){if(E&&E.__esModule)return E;var R={};if(E!=null)for(var P in E)Object.prototype.hasOwnProperty.call(E,P)&&(R[P]=E[P]);return R.default=E,R}function c(E){return E&&E.__esModule?E:{default:E}}function h(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")}function m(E,R){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:E}function v(E,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);E.prototype=Object.create(R&&R.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(E,R):E.__proto__=R)}var x=n_.Hue=(function(E){v(R,E);function R(){var P,z,Q,Y;h(this,R);for(var H=arguments.length,Z=Array(H),J=0;J<H;J++)Z[J]=arguments[J];return Y=(z=(Q=m(this,(P=R.__proto__||Object.getPrototypeOf(R)).call.apply(P,[this].concat(Z))),Q),Q.handleChange=function($){var G=s.calculateChange($,Q.props.direction,Q.props.hsl,Q.container);G&&typeof Q.props.onChange=="function"&&Q.props.onChange(G,$)},Q.handleMouseDown=function($){Q.handleChange($),window.addEventListener("mousemove",Q.handleChange),window.addEventListener("mouseup",Q.handleMouseUp)},Q.handleMouseUp=function(){Q.unbindEventListeners()},z),m(Q,Y)}return n(R,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var z=this,Q=this.props.direction,Y=Q===void 0?"horizontal":Q,H=(0,r.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:Y==="vertical"});return t.default.createElement("div",{style:H.hue},t.default.createElement("div",{className:"hue-"+Y,style:H.container,ref:function(J){return z.container=J},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:H.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:H.slider}))))}}]),R})(e.PureComponent||e.Component);return n_.default=x,n_}var i_={},mV;function gTe(){if(mV)return i_;mV=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.Raised=void 0;var n=Ba(),e=c(n),t=b1(),i=c(t),r=Tm(),o=c(r),s=loe(),a=c(s);function c(m){return m&&m.__esModule?m:{default:m}}var h=i_.Raised=function(v){var x=v.zDepth,E=v.radius,R=v.background,P=v.children,z=v.styles,Q=z===void 0?{}:z,Y=(0,o.default)((0,a.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+x+"px "+x*4+"px rgba(0,0,0,.24)",borderRadius:E,background:R}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},Q),{"zDepth-1":x===1});return e.default.createElement("div",{style:Y.wrap},e.default.createElement("div",{style:Y.bg}),e.default.createElement("div",{style:Y.content},P))};return h.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},h.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},i_.default=h,i_}var r_={},Yk,gV;function yTe(){if(gV)return Yk;gV=1;var n=km(),e=function(){return n.Date.now()};return Yk=e,Yk}var Vk,yV;function vTe(){if(yV)return Vk;yV=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return Vk=e,Vk}var $k,vV;function bTe(){if(vV)return $k;vV=1;var n=vTe(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return $k=t,$k}var Hk,bV;function CTe(){if(bV)return Hk;bV=1;var n=bTe(),e=_p(),t=Y6(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function c(h){if(typeof h=="number")return h;if(t(h))return i;if(e(h)){var m=typeof h.valueOf=="function"?h.valueOf():h;h=e(m)?m+"":m}if(typeof h!="string")return h===0?h:+h;h=n(h);var v=o.test(h);return v||s.test(h)?a(h.slice(2),v?2:8):r.test(h)?i:+h}return Hk=c,Hk}var Zk,CV;function uoe(){if(CV)return Zk;CV=1;var n=_p(),e=yTe(),t=CTe(),i="Expected a function",r=Math.max,o=Math.min;function s(a,c,h){var m,v,x,E,R,P,z=0,Q=!1,Y=!1,H=!0;if(typeof a!="function")throw new TypeError(i);c=t(c)||0,n(h)&&(Q=!!h.leading,Y="maxWait"in h,x=Y?r(t(h.maxWait)||0,c):x,H="trailing"in h?!!h.trailing:H);function Z(Me){var ke=m,je=v;return m=v=void 0,z=Me,E=a.apply(je,ke),E}function J(Me){return z=Me,R=setTimeout(oe,c),Q?Z(Me):E}function $(Me){var ke=Me-P,je=Me-z,Be=c-ke;return Y?o(Be,x-je):Be}function G(Me){var ke=Me-P,je=Me-z;return P===void 0||ke>=c||ke<0||Y&&je>=x}function oe(){var Me=e();if(G(Me))return ue(Me);R=setTimeout(oe,$(Me))}function ue(Me){return R=void 0,H&&m?Z(Me):(m=v=void 0,E)}function xe(){R!==void 0&&clearTimeout(R),z=0,m=P=v=R=void 0}function ge(){return R===void 0?E:ue(e())}function Ie(){var Me=e(),ke=G(Me);if(m=arguments,v=this,P=Me,ke){if(R===void 0)return J(P);if(Y)return clearTimeout(R),R=setTimeout(oe,c),Z(P)}return R===void 0&&(R=setTimeout(oe,c)),E}return Ie.cancel=xe,Ie.flush=ge,Ie}return Zk=s,Zk}var Xk,_V;function _Te(){if(_V)return Xk;_V=1;var n=uoe(),e=_p(),t="Expected a function";function i(r,o,s){var a=!0,c=!0;if(typeof r!="function")throw new TypeError(t);return e(s)&&(a="leading"in s?!!s.leading:a,c="trailing"in s?!!s.trailing:c),n(r,o,{leading:a,maxWait:o,trailing:c})}return Xk=i,Xk}var VM={},xV;function xTe(){return xV||(xV=1,Object.defineProperty(VM,"__esModule",{value:!0}),VM.calculateChange=function(e,t,i){var r=i.getBoundingClientRect(),o=r.width,s=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,h=a-(i.getBoundingClientRect().left+window.pageXOffset),m=c-(i.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>o&&(h=o),m<0?m=0:m>s&&(m=s);var v=h/o,x=1-m/s;return{h:t.h,s:v,v:x,a:t.a,source:"hsv"}}),VM}var MV;function MTe(){if(MV)return r_;MV=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.Saturation=void 0;var n=(function(){function P(z,Q){for(var Y=0;Y<Q.length;Y++){var H=Q[Y];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(z,H.key,H)}}return function(z,Q,Y){return Q&&P(z.prototype,Q),Y&&P(z,Y),z}})(),e=Ba(),t=m(e),i=Tm(),r=m(i),o=_Te(),s=m(o),a=xTe(),c=h(a);function h(P){if(P&&P.__esModule)return P;var z={};if(P!=null)for(var Q in P)Object.prototype.hasOwnProperty.call(P,Q)&&(z[Q]=P[Q]);return z.default=P,z}function m(P){return P&&P.__esModule?P:{default:P}}function v(P,z){if(!(P instanceof z))throw new TypeError("Cannot call a class as a function")}function x(P,z){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:P}function E(P,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);P.prototype=Object.create(z&&z.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(P,z):P.__proto__=z)}var R=r_.Saturation=(function(P){E(z,P);function z(Q){v(this,z);var Y=x(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,Q));return Y.handleChange=function(H){typeof Y.props.onChange=="function"&&Y.throttle(Y.props.onChange,c.calculateChange(H,Y.props.hsl,Y.container),H)},Y.handleMouseDown=function(H){Y.handleChange(H);var Z=Y.getContainerRenderWindow();Z.addEventListener("mousemove",Y.handleChange),Z.addEventListener("mouseup",Y.handleMouseUp)},Y.handleMouseUp=function(){Y.unbindEventListeners()},Y.throttle=(0,s.default)(function(H,Z,J){H(Z,J)},50),Y}return n(z,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var Y=this.container,H=window;!H.document.contains(Y)&&H.parent!==H;)H=H.parent;return H}},{key:"unbindEventListeners",value:function(){var Y=this.getContainerRenderWindow();Y.removeEventListener("mousemove",this.handleChange),Y.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Y=this,H=this.props.style||{},Z=H.color,J=H.white,$=H.black,G=H.pointer,oe=H.circle,ue=(0,r.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:Z,white:J,black:$,pointer:G,circle:oe}},{custom:!!this.props.style});return t.default.createElement("div",{style:ue.color,ref:function(ge){return Y.container=ge},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:ue.white,className:"saturation-white"},t.default.createElement("div",{style:ue.black,className:"saturation-black"}),t.default.createElement("div",{style:ue.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ue.circle}))))}}]),z})(e.PureComponent||e.Component);return r_.default=R,r_}var o_={},wh={},Jk,wV;function wTe(){if(wV)return Jk;wV=1;var n=Xre(),e=Zre(),t=Kre(),i=Ef();function r(o,s){var a=i(o)?n:e;return a(o,t(s))}return Jk=r,Jk}var eT,SV;function STe(){return SV||(SV=1,eT=wTe()),eT}var Sw={exports:{}},ETe=Sw.exports,EV;function BTe(){return EV||(EV=1,(function(n,e){(function(t,i){n.exports=i()})(ETe,(function(){function t(Ue){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof Symbol=="function"&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe},t(Ue)}var i=/^\s+/,r=/\s+$/;function o(Ue,Oe){if(Ue=Ue||"",Oe=Oe||{},Ue instanceof o)return Ue;if(!(this instanceof o))return new o(Ue,Oe);var Ee=s(Ue);this._originalInput=Ue,this._r=Ee.r,this._g=Ee.g,this._b=Ee.b,this._a=Ee.a,this._roundA=Math.round(100*this._a)/100,this._format=Oe.format||Ee.format,this._gradientType=Oe.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Ee.ok}o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Oe=this.toRgb();return(Oe.r*299+Oe.g*587+Oe.b*114)/1e3},getLuminance:function(){var Oe=this.toRgb(),Ee,Ve,mt,pt,Ct,Rt;return Ee=Oe.r/255,Ve=Oe.g/255,mt=Oe.b/255,Ee<=.03928?pt=Ee/12.92:pt=Math.pow((Ee+.055)/1.055,2.4),Ve<=.03928?Ct=Ve/12.92:Ct=Math.pow((Ve+.055)/1.055,2.4),mt<=.03928?Rt=mt/12.92:Rt=Math.pow((mt+.055)/1.055,2.4),.2126*pt+.7152*Ct+.0722*Rt},setAlpha:function(Oe){return this._a=ke(Oe),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Oe=m(this._r,this._g,this._b);return{h:Oe.h*360,s:Oe.s,v:Oe.v,a:this._a}},toHsvString:function(){var Oe=m(this._r,this._g,this._b),Ee=Math.round(Oe.h*360),Ve=Math.round(Oe.s*100),mt=Math.round(Oe.v*100);return this._a==1?"hsv("+Ee+", "+Ve+"%, "+mt+"%)":"hsva("+Ee+", "+Ve+"%, "+mt+"%, "+this._roundA+")"},toHsl:function(){var Oe=c(this._r,this._g,this._b);return{h:Oe.h*360,s:Oe.s,l:Oe.l,a:this._a}},toHslString:function(){var Oe=c(this._r,this._g,this._b),Ee=Math.round(Oe.h*360),Ve=Math.round(Oe.s*100),mt=Math.round(Oe.l*100);return this._a==1?"hsl("+Ee+", "+Ve+"%, "+mt+"%)":"hsla("+Ee+", "+Ve+"%, "+mt+"%, "+this._roundA+")"},toHex:function(Oe){return x(this._r,this._g,this._b,Oe)},toHexString:function(Oe){return"#"+this.toHex(Oe)},toHex8:function(Oe){return E(this._r,this._g,this._b,this._a,Oe)},toHex8String:function(Oe){return"#"+this.toHex8(Oe)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(je(this._r,255)*100)+"%",g:Math.round(je(this._g,255)*100)+"%",b:Math.round(je(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(je(this._r,255)*100)+"%, "+Math.round(je(this._g,255)*100)+"%, "+Math.round(je(this._b,255)*100)+"%)":"rgba("+Math.round(je(this._r,255)*100)+"%, "+Math.round(je(this._g,255)*100)+"%, "+Math.round(je(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ie[x(this._r,this._g,this._b,!0)]||!1},toFilter:function(Oe){var Ee="#"+R(this._r,this._g,this._b,this._a),Ve=Ee,mt=this._gradientType?"GradientType = 1, ":"";if(Oe){var pt=o(Oe);Ve="#"+R(pt._r,pt._g,pt._b,pt._a)}return"progid:DXImageTransform.Microsoft.gradient("+mt+"startColorstr="+Ee+",endColorstr="+Ve+")"},toString:function(Oe){var Ee=!!Oe;Oe=Oe||this._format;var Ve=!1,mt=this._a<1&&this._a>=0,pt=!Ee&&mt&&(Oe==="hex"||Oe==="hex6"||Oe==="hex3"||Oe==="hex4"||Oe==="hex8"||Oe==="name");return pt?Oe==="name"&&this._a===0?this.toName():this.toRgbString():(Oe==="rgb"&&(Ve=this.toRgbString()),Oe==="prgb"&&(Ve=this.toPercentageRgbString()),(Oe==="hex"||Oe==="hex6")&&(Ve=this.toHexString()),Oe==="hex3"&&(Ve=this.toHexString(!0)),Oe==="hex4"&&(Ve=this.toHex8String(!0)),Oe==="hex8"&&(Ve=this.toHex8String()),Oe==="name"&&(Ve=this.toName()),Oe==="hsl"&&(Ve=this.toHslString()),Oe==="hsv"&&(Ve=this.toHsvString()),Ve||this.toHexString())},clone:function(){return o(this.toString())},_applyModification:function(Oe,Ee){var Ve=Oe.apply(null,[this].concat([].slice.call(Ee)));return this._r=Ve._r,this._g=Ve._g,this._b=Ve._b,this.setAlpha(Ve._a),this},lighten:function(){return this._applyModification(Y,arguments)},brighten:function(){return this._applyModification(H,arguments)},darken:function(){return this._applyModification(Z,arguments)},desaturate:function(){return this._applyModification(P,arguments)},saturate:function(){return this._applyModification(z,arguments)},greyscale:function(){return this._applyModification(Q,arguments)},spin:function(){return this._applyModification(J,arguments)},_applyCombination:function(Oe,Ee){return Oe.apply(null,[this].concat([].slice.call(Ee)))},analogous:function(){return this._applyCombination(ue,arguments)},complement:function(){return this._applyCombination($,arguments)},monochromatic:function(){return this._applyCombination(xe,arguments)},splitcomplement:function(){return this._applyCombination(oe,arguments)},triad:function(){return this._applyCombination(G,[3])},tetrad:function(){return this._applyCombination(G,[4])}},o.fromRatio=function(Ue,Oe){if(t(Ue)=="object"){var Ee={};for(var Ve in Ue)Ue.hasOwnProperty(Ve)&&(Ve==="a"?Ee[Ve]=Ue[Ve]:Ee[Ve]=De(Ue[Ve]));Ue=Ee}return o(Ue,Oe)};function s(Ue){var Oe={r:0,g:0,b:0},Ee=1,Ve=null,mt=null,pt=null,Ct=!1,Rt=!1;return typeof Ue=="string"&&(Ue=Tt(Ue)),t(Ue)=="object"&&(st(Ue.r)&&st(Ue.g)&&st(Ue.b)?(Oe=a(Ue.r,Ue.g,Ue.b),Ct=!0,Rt=String(Ue.r).substr(-1)==="%"?"prgb":"rgb"):st(Ue.h)&&st(Ue.s)&&st(Ue.v)?(Ve=De(Ue.s),mt=De(Ue.v),Oe=v(Ue.h,Ve,mt),Ct=!0,Rt="hsv"):st(Ue.h)&&st(Ue.s)&&st(Ue.l)&&(Ve=De(Ue.s),pt=De(Ue.l),Oe=h(Ue.h,Ve,pt),Ct=!0,Rt="hsl"),Ue.hasOwnProperty("a")&&(Ee=Ue.a)),Ee=ke(Ee),{ok:Ct,format:Ue.format||Rt,r:Math.min(255,Math.max(Oe.r,0)),g:Math.min(255,Math.max(Oe.g,0)),b:Math.min(255,Math.max(Oe.b,0)),a:Ee}}function a(Ue,Oe,Ee){return{r:je(Ue,255)*255,g:je(Oe,255)*255,b:je(Ee,255)*255}}function c(Ue,Oe,Ee){Ue=je(Ue,255),Oe=je(Oe,255),Ee=je(Ee,255);var Ve=Math.max(Ue,Oe,Ee),mt=Math.min(Ue,Oe,Ee),pt,Ct,Rt=(Ve+mt)/2;if(Ve==mt)pt=Ct=0;else{var Kt=Ve-mt;switch(Ct=Rt>.5?Kt/(2-Ve-mt):Kt/(Ve+mt),Ve){case Ue:pt=(Oe-Ee)/Kt+(Oe<Ee?6:0);break;case Oe:pt=(Ee-Ue)/Kt+2;break;case Ee:pt=(Ue-Oe)/Kt+4;break}pt/=6}return{h:pt,s:Ct,l:Rt}}function h(Ue,Oe,Ee){var Ve,mt,pt;Ue=je(Ue,360),Oe=je(Oe,100),Ee=je(Ee,100);function Ct(on,qn,Qn){return Qn<0&&(Qn+=1),Qn>1&&(Qn-=1),Qn<1/6?on+(qn-on)*6*Qn:Qn<1/2?qn:Qn<2/3?on+(qn-on)*(2/3-Qn)*6:on}if(Oe===0)Ve=mt=pt=Ee;else{var Rt=Ee<.5?Ee*(1+Oe):Ee+Oe-Ee*Oe,Kt=2*Ee-Rt;Ve=Ct(Kt,Rt,Ue+1/3),mt=Ct(Kt,Rt,Ue),pt=Ct(Kt,Rt,Ue-1/3)}return{r:Ve*255,g:mt*255,b:pt*255}}function m(Ue,Oe,Ee){Ue=je(Ue,255),Oe=je(Oe,255),Ee=je(Ee,255);var Ve=Math.max(Ue,Oe,Ee),mt=Math.min(Ue,Oe,Ee),pt,Ct,Rt=Ve,Kt=Ve-mt;if(Ct=Ve===0?0:Kt/Ve,Ve==mt)pt=0;else{switch(Ve){case Ue:pt=(Oe-Ee)/Kt+(Oe<Ee?6:0);break;case Oe:pt=(Ee-Ue)/Kt+2;break;case Ee:pt=(Ue-Oe)/Kt+4;break}pt/=6}return{h:pt,s:Ct,v:Rt}}function v(Ue,Oe,Ee){Ue=je(Ue,360)*6,Oe=je(Oe,100),Ee=je(Ee,100);var Ve=Math.floor(Ue),mt=Ue-Ve,pt=Ee*(1-Oe),Ct=Ee*(1-mt*Oe),Rt=Ee*(1-(1-mt)*Oe),Kt=Ve%6,on=[Ee,Ct,pt,pt,Rt,Ee][Kt],qn=[Rt,Ee,Ee,Ct,pt,pt][Kt],Qn=[pt,pt,Rt,Ee,Ee,Ct][Kt];return{r:on*255,g:qn*255,b:Qn*255}}function x(Ue,Oe,Ee,Ve){var mt=[Le(Math.round(Ue).toString(16)),Le(Math.round(Oe).toString(16)),Le(Math.round(Ee).toString(16))];return Ve&&mt[0].charAt(0)==mt[0].charAt(1)&&mt[1].charAt(0)==mt[1].charAt(1)&&mt[2].charAt(0)==mt[2].charAt(1)?mt[0].charAt(0)+mt[1].charAt(0)+mt[2].charAt(0):mt.join("")}function E(Ue,Oe,Ee,Ve,mt){var pt=[Le(Math.round(Ue).toString(16)),Le(Math.round(Oe).toString(16)),Le(Math.round(Ee).toString(16)),Le(Ge(Ve))];return mt&&pt[0].charAt(0)==pt[0].charAt(1)&&pt[1].charAt(0)==pt[1].charAt(1)&&pt[2].charAt(0)==pt[2].charAt(1)&&pt[3].charAt(0)==pt[3].charAt(1)?pt[0].charAt(0)+pt[1].charAt(0)+pt[2].charAt(0)+pt[3].charAt(0):pt.join("")}function R(Ue,Oe,Ee,Ve){var mt=[Le(Ge(Ve)),Le(Math.round(Ue).toString(16)),Le(Math.round(Oe).toString(16)),Le(Math.round(Ee).toString(16))];return mt.join("")}o.equals=function(Ue,Oe){return!Ue||!Oe?!1:o(Ue).toRgbString()==o(Oe).toRgbString()},o.random=function(){return o.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function P(Ue,Oe){Oe=Oe===0?0:Oe||10;var Ee=o(Ue).toHsl();return Ee.s-=Oe/100,Ee.s=Be(Ee.s),o(Ee)}function z(Ue,Oe){Oe=Oe===0?0:Oe||10;var Ee=o(Ue).toHsl();return Ee.s+=Oe/100,Ee.s=Be(Ee.s),o(Ee)}function Q(Ue){return o(Ue).desaturate(100)}function Y(Ue,Oe){Oe=Oe===0?0:Oe||10;var Ee=o(Ue).toHsl();return Ee.l+=Oe/100,Ee.l=Be(Ee.l),o(Ee)}function H(Ue,Oe){Oe=Oe===0?0:Oe||10;var Ee=o(Ue).toRgb();return Ee.r=Math.max(0,Math.min(255,Ee.r-Math.round(255*-(Oe/100)))),Ee.g=Math.max(0,Math.min(255,Ee.g-Math.round(255*-(Oe/100)))),Ee.b=Math.max(0,Math.min(255,Ee.b-Math.round(255*-(Oe/100)))),o(Ee)}function Z(Ue,Oe){Oe=Oe===0?0:Oe||10;var Ee=o(Ue).toHsl();return Ee.l-=Oe/100,Ee.l=Be(Ee.l),o(Ee)}function J(Ue,Oe){var Ee=o(Ue).toHsl(),Ve=(Ee.h+Oe)%360;return Ee.h=Ve<0?360+Ve:Ve,o(Ee)}function $(Ue){var Oe=o(Ue).toHsl();return Oe.h=(Oe.h+180)%360,o(Oe)}function G(Ue,Oe){if(isNaN(Oe)||Oe<=0)throw new Error("Argument to polyad must be a positive number");for(var Ee=o(Ue).toHsl(),Ve=[o(Ue)],mt=360/Oe,pt=1;pt<Oe;pt++)Ve.push(o({h:(Ee.h+pt*mt)%360,s:Ee.s,l:Ee.l}));return Ve}function oe(Ue){var Oe=o(Ue).toHsl(),Ee=Oe.h;return[o(Ue),o({h:(Ee+72)%360,s:Oe.s,l:Oe.l}),o({h:(Ee+216)%360,s:Oe.s,l:Oe.l})]}function ue(Ue,Oe,Ee){Oe=Oe||6,Ee=Ee||30;var Ve=o(Ue).toHsl(),mt=360/Ee,pt=[o(Ue)];for(Ve.h=(Ve.h-(mt*Oe>>1)+720)%360;--Oe;)Ve.h=(Ve.h+mt)%360,pt.push(o(Ve));return pt}function xe(Ue,Oe){Oe=Oe||6;for(var Ee=o(Ue).toHsv(),Ve=Ee.h,mt=Ee.s,pt=Ee.v,Ct=[],Rt=1/Oe;Oe--;)Ct.push(o({h:Ve,s:mt,v:pt})),pt=(pt+Rt)%1;return Ct}o.mix=function(Ue,Oe,Ee){Ee=Ee===0?0:Ee||50;var Ve=o(Ue).toRgb(),mt=o(Oe).toRgb(),pt=Ee/100,Ct={r:(mt.r-Ve.r)*pt+Ve.r,g:(mt.g-Ve.g)*pt+Ve.g,b:(mt.b-Ve.b)*pt+Ve.b,a:(mt.a-Ve.a)*pt+Ve.a};return o(Ct)},o.readability=function(Ue,Oe){var Ee=o(Ue),Ve=o(Oe);return(Math.max(Ee.getLuminance(),Ve.getLuminance())+.05)/(Math.min(Ee.getLuminance(),Ve.getLuminance())+.05)},o.isReadable=function(Ue,Oe,Ee){var Ve=o.readability(Ue,Oe),mt,pt;switch(pt=!1,mt=Lt(Ee),mt.level+mt.size){case"AAsmall":case"AAAlarge":pt=Ve>=4.5;break;case"AAlarge":pt=Ve>=3;break;case"AAAsmall":pt=Ve>=7;break}return pt},o.mostReadable=function(Ue,Oe,Ee){var Ve=null,mt=0,pt,Ct,Rt,Kt;Ee=Ee||{},Ct=Ee.includeFallbackColors,Rt=Ee.level,Kt=Ee.size;for(var on=0;on<Oe.length;on++)pt=o.readability(Ue,Oe[on]),pt>mt&&(mt=pt,Ve=o(Oe[on]));return o.isReadable(Ue,Ve,{level:Rt,size:Kt})||!Ct?Ve:(Ee.includeFallbackColors=!1,o.mostReadable(Ue,["#fff","#000"],Ee))};var ge=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ie=o.hexNames=Me(ge);function Me(Ue){var Oe={};for(var Ee in Ue)Ue.hasOwnProperty(Ee)&&(Oe[Ue[Ee]]=Ee);return Oe}function ke(Ue){return Ue=parseFloat(Ue),(isNaN(Ue)||Ue<0||Ue>1)&&(Ue=1),Ue}function je(Ue,Oe){At(Ue)&&(Ue="100%");var Ee=yt(Ue);return Ue=Math.min(Oe,Math.max(0,parseFloat(Ue))),Ee&&(Ue=parseInt(Ue*Oe,10)/100),Math.abs(Ue-Oe)<1e-6?1:Ue%Oe/parseFloat(Oe)}function Be(Ue){return Math.min(1,Math.max(0,Ue))}function Ye(Ue){return parseInt(Ue,16)}function At(Ue){return typeof Ue=="string"&&Ue.indexOf(".")!=-1&&parseFloat(Ue)===1}function yt(Ue){return typeof Ue=="string"&&Ue.indexOf("%")!=-1}function Le(Ue){return Ue.length==1?"0"+Ue:""+Ue}function De(Ue){return Ue<=1&&(Ue=Ue*100+"%"),Ue}function Ge(Ue){return Math.round(parseFloat(Ue)*255).toString(16)}function Te(Ue){return Ye(Ue)/255}var xt=(function(){var Ue="[-\\+]?\\d+%?",Oe="[-\\+]?\\d*\\.\\d+%?",Ee="(?:"+Oe+")|(?:"+Ue+")",Ve="[\\s|\\(]+("+Ee+")[,|\\s]+("+Ee+")[,|\\s]+("+Ee+")\\s*\\)?",mt="[\\s|\\(]+("+Ee+")[,|\\s]+("+Ee+")[,|\\s]+("+Ee+")[,|\\s]+("+Ee+")\\s*\\)?";return{CSS_UNIT:new RegExp(Ee),rgb:new RegExp("rgb"+Ve),rgba:new RegExp("rgba"+mt),hsl:new RegExp("hsl"+Ve),hsla:new RegExp("hsla"+mt),hsv:new RegExp("hsv"+Ve),hsva:new RegExp("hsva"+mt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function st(Ue){return!!xt.CSS_UNIT.exec(Ue)}function Tt(Ue){Ue=Ue.replace(i,"").replace(r,"").toLowerCase();var Oe=!1;if(ge[Ue])Ue=ge[Ue],Oe=!0;else if(Ue=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Ee;return(Ee=xt.rgb.exec(Ue))?{r:Ee[1],g:Ee[2],b:Ee[3]}:(Ee=xt.rgba.exec(Ue))?{r:Ee[1],g:Ee[2],b:Ee[3],a:Ee[4]}:(Ee=xt.hsl.exec(Ue))?{h:Ee[1],s:Ee[2],l:Ee[3]}:(Ee=xt.hsla.exec(Ue))?{h:Ee[1],s:Ee[2],l:Ee[3],a:Ee[4]}:(Ee=xt.hsv.exec(Ue))?{h:Ee[1],s:Ee[2],v:Ee[3]}:(Ee=xt.hsva.exec(Ue))?{h:Ee[1],s:Ee[2],v:Ee[3],a:Ee[4]}:(Ee=xt.hex8.exec(Ue))?{r:Ye(Ee[1]),g:Ye(Ee[2]),b:Ye(Ee[3]),a:Te(Ee[4]),format:Oe?"name":"hex8"}:(Ee=xt.hex6.exec(Ue))?{r:Ye(Ee[1]),g:Ye(Ee[2]),b:Ye(Ee[3]),format:Oe?"name":"hex"}:(Ee=xt.hex4.exec(Ue))?{r:Ye(Ee[1]+""+Ee[1]),g:Ye(Ee[2]+""+Ee[2]),b:Ye(Ee[3]+""+Ee[3]),a:Te(Ee[4]+""+Ee[4]),format:Oe?"name":"hex8"}:(Ee=xt.hex3.exec(Ue))?{r:Ye(Ee[1]+""+Ee[1]),g:Ye(Ee[2]+""+Ee[2]),b:Ye(Ee[3]+""+Ee[3]),format:Oe?"name":"hex"}:!1}function Lt(Ue){var Oe,Ee;return Ue=Ue||{level:"AA",size:"small"},Oe=(Ue.level||"AA").toUpperCase(),Ee=(Ue.size||"small").toLowerCase(),Oe!=="AA"&&Oe!=="AAA"&&(Oe="AA"),Ee!=="small"&&Ee!=="large"&&(Ee="small"),{level:Oe,size:Ee}}return o}))})(Sw)),Sw.exports}var BV;function coe(){if(BV)return wh;BV=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.isvalidColorString=wh.red=wh.getContrastingColor=wh.isValidHex=wh.toState=wh.simpleCheckForValidColor=void 0;var n=STe(),e=r(n),t=BTe(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}wh.simpleCheckForValidColor=function(a){var c=["r","g","b","a","h","s","l","v"],h=0,m=0;return(0,e.default)(c,function(v){if(a[v]&&(h+=1,isNaN(a[v])||(m+=1),v==="s"||v==="l")){var x=/^\d+%$/;x.test(a[v])&&(m+=1)}}),h===m?a:!1};var o=wh.toState=function(a,c){var h=a.hex?(0,i.default)(a.hex):(0,i.default)(a),m=h.toHsl(),v=h.toHsv(),x=h.toRgb(),E=h.toHex();m.s===0&&(m.h=c||0,v.h=c||0);var R=E==="000000"&&x.a===0;return{hsl:m,hex:R?"transparent":"#"+E,rgb:x,hsv:v,oldHue:a.h||c||m.h,source:a.source}};return wh.isValidHex=function(a){if(a==="transparent")return!0;var c=String(a).charAt(0)==="#"?1:0;return a.length!==4+c&&a.length<7+c&&(0,i.default)(a).isValid()},wh.getContrastingColor=function(a){if(!a)return"#fff";var c=o(a);if(c.hex==="transparent")return"rgba(0,0,0,0.4)";var h=(c.rgb.r*299+c.rgb.g*587+c.rgb.b*114)/1e3;return h>=128?"#000":"#fff"},wh.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},wh.isvalidColorString=function(a,c){var h=a.replace("","");return(0,i.default)(c+" ("+h+")")._ok},wh}var OV;function OTe(){if(OV)return o_;OV=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.ColorWrap=void 0;var n=Object.assign||function(R){for(var P=1;P<arguments.length;P++){var z=arguments[P];for(var Q in z)Object.prototype.hasOwnProperty.call(z,Q)&&(R[Q]=z[Q])}return R},e=(function(){function R(P,z){for(var Q=0;Q<z.length;Q++){var Y=z[Q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(P,Y.key,Y)}}return function(P,z,Q){return z&&R(P.prototype,z),Q&&R(P,Q),P}})(),t=Ba(),i=h(t),r=uoe(),o=h(r),s=coe(),a=c(s);function c(R){if(R&&R.__esModule)return R;var P={};if(R!=null)for(var z in R)Object.prototype.hasOwnProperty.call(R,z)&&(P[z]=R[z]);return P.default=R,P}function h(R){return R&&R.__esModule?R:{default:R}}function m(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function v(R,P){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:R}function x(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(R,P):R.__proto__=P)}var E=o_.ColorWrap=function(P){var z=(function(Q){x(Y,Q);function Y(H){m(this,Y);var Z=v(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this));return Z.handleChange=function(J,$){var G=a.simpleCheckForValidColor(J);if(G){var oe=a.toState(J,J.h||Z.state.oldHue);Z.setState(oe),Z.props.onChangeComplete&&Z.debounce(Z.props.onChangeComplete,oe,$),Z.props.onChange&&Z.props.onChange(oe,$)}},Z.handleSwatchHover=function(J,$){var G=a.simpleCheckForValidColor(J);if(G){var oe=a.toState(J,J.h||Z.state.oldHue);Z.props.onSwatchHover&&Z.props.onSwatchHover(oe,$)}},Z.state=n({},a.toState(H.color,0)),Z.debounce=(0,o.default)(function(J,$,G){J($,G)},100),Z}return e(Y,[{key:"render",value:function(){var Z={};return this.props.onSwatchHover&&(Z.onSwatchHover=this.handleSwatchHover),i.default.createElement(P,n({},this.props,this.state,{onChange:this.handleChange},Z))}}],[{key:"getDerivedStateFromProps",value:function(Z,J){return n({},a.toState(Z.color,J.oldHue))}}]),Y})(t.PureComponent||t.Component);return z.propTypes=n({},P.propTypes),z.defaultProps=n({},P.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),z};return o_.default=E,o_}var s_={},B2={},IV;function ITe(){if(IV)return B2;IV=1,Object.defineProperty(B2,"__esModule",{value:!0}),B2.handleFocus=void 0;var n=Object.assign||function(c){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(c[v]=m[v])}return c},e=(function(){function c(h,m){for(var v=0;v<m.length;v++){var x=m[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(h,x.key,x)}}return function(h,m,v){return m&&c(h.prototype,m),v&&c(h,v),h}})(),t=Ba(),i=r(t);function r(c){return c&&c.__esModule?c:{default:c}}function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function s(c,h){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:c}function a(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(c,h):c.__proto__=h)}return B2.handleFocus=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){a(x,v);function x(){var E,R,P,z;o(this,x);for(var Q=arguments.length,Y=Array(Q),H=0;H<Q;H++)Y[H]=arguments[H];return z=(R=(P=s(this,(E=x.__proto__||Object.getPrototypeOf(x)).call.apply(E,[this].concat(Y))),P),P.state={focus:!1},P.handleFocus=function(){return P.setState({focus:!0})},P.handleBlur=function(){return P.setState({focus:!1})},R),s(P,z)}return e(x,[{key:"render",value:function(){return i.default.createElement(m,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(h,n({},this.props,this.state)))}}]),x})(i.default.Component)},B2}var kV;function kTe(){if(kV)return s_;kV=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.Swatch=void 0;var n=Object.assign||function(v){for(var x=1;x<arguments.length;x++){var E=arguments[x];for(var R in E)Object.prototype.hasOwnProperty.call(E,R)&&(v[R]=E[R])}return v},e=Ba(),t=c(e),i=Tm(),r=c(i),o=ITe(),s=kU(),a=c(s);function c(v){return v&&v.__esModule?v:{default:v}}var h=13,m=s_.Swatch=function(x){var E=x.color,R=x.style,P=x.onClick,z=P===void 0?function(){}:P,Q=x.onHover,Y=x.title,H=Y===void 0?E:Y,Z=x.children,J=x.focus,$=x.focusStyle,G=$===void 0?{}:$,oe=E==="transparent",ue=(0,r.default)({default:{swatch:n({background:E,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},R,J?G:{})}}),xe=function(je){return z(E,je)},ge=function(je){return je.keyCode===h&&z(E,je)},Ie=function(je){return Q(E,je)},Me={};return Q&&(Me.onMouseOver=Ie),t.default.createElement("div",n({style:ue.swatch,onClick:xe,title:H,tabIndex:0,onKeyDown:ge},Me),Z,oe&&t.default.createElement(a.default,{borderRadius:ue.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return s_.default=(0,o.handleFocus)(m),s_}var TV;function Aoe(){return TV||(TV=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=dTe();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return h(e).default}});var t=kU();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return h(t).default}});var i=fTe();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return h(i).default}});var r=mTe();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return h(r).default}});var o=gTe();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return h(o).default}});var s=MTe();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return h(s).default}});var a=OTe();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return h(a).default}});var c=kTe();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return h(c).default}});function h(m){return m&&m.__esModule?m:{default:m}}})(qk)),qk}var a_={},tT,RV;function TTe(){if(RV)return tT;RV=1;function n(e){return e===void 0}return tT=n,tT}var $M={},DV;function RTe(){if(DV)return $M;DV=1,Object.defineProperty($M,"__esModule",{value:!0});var n=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])}return s},e=Ba(),t=i(e);function i(s){return s&&s.__esModule?s:{default:s}}function r(s,a){var c={};for(var h in s)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(s,h)&&(c[h]=s[h]);return c}var o=24;return $M.default=function(s){var a=s.fill,c=a===void 0?"currentColor":a,h=s.width,m=h===void 0?o:h,v=s.height,x=v===void 0?o:v,E=s.style,R=E===void 0?{}:E,P=r(s,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+o+" "+o,style:n({fill:c,width:m,height:x},R)},P),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},$M}var PV;function DTe(){if(PV)return a_;PV=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.ChromeFields=void 0;var n=(function(){function Y(H,Z){for(var J=0;J<Z.length;J++){var $=Z[J];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(H,$.key,$)}}return function(H,Z,J){return Z&&Y(H.prototype,Z),J&&Y(H,J),H}})(),e=Ba(),t=E(e),i=Tm(),r=E(i),o=coe(),s=x(o),a=TTe(),c=E(a),h=Aoe(),m=RTe(),v=E(m);function x(Y){if(Y&&Y.__esModule)return Y;var H={};if(Y!=null)for(var Z in Y)Object.prototype.hasOwnProperty.call(Y,Z)&&(H[Z]=Y[Z]);return H.default=Y,H}function E(Y){return Y&&Y.__esModule?Y:{default:Y}}function R(Y,H){if(!(Y instanceof H))throw new TypeError("Cannot call a class as a function")}function P(Y,H){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:Y}function z(Y,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);Y.prototype=Object.create(H&&H.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,H):Y.__proto__=H)}var Q=a_.ChromeFields=(function(Y){z(H,Y);function H(Z){R(this,H);var J=P(this,(H.__proto__||Object.getPrototypeOf(H)).call(this));return J.toggleViews=function(){J.state.view==="hex"?J.setState({view:"rgb"}):J.state.view==="rgb"?J.setState({view:"hsl"}):J.state.view==="hsl"&&(J.props.hsl.a===1?J.setState({view:"hex"}):J.setState({view:"rgb"}))},J.handleChange=function($,G){$.hex?s.isValidHex($.hex)&&J.props.onChange({hex:$.hex,source:"hex"},G):$.r||$.g||$.b?J.props.onChange({r:$.r||J.props.rgb.r,g:$.g||J.props.rgb.g,b:$.b||J.props.rgb.b,source:"rgb"},G):$.a?($.a<0?$.a=0:$.a>1&&($.a=1),J.props.onChange({h:J.props.hsl.h,s:J.props.hsl.s,l:J.props.hsl.l,a:Math.round($.a*100)/100,source:"rgb"},G)):($.h||$.s||$.l)&&(typeof $.s=="string"&&$.s.includes("%")&&($.s=$.s.replace("%","")),typeof $.l=="string"&&$.l.includes("%")&&($.l=$.l.replace("%","")),$.s==1?$.s=.01:$.l==1&&($.l=.01),J.props.onChange({h:$.h||J.props.hsl.h,s:Number((0,c.default)($.s)?J.props.hsl.s:$.s),l:Number((0,c.default)($.l)?J.props.hsl.l:$.l),source:"hsl"},G))},J.showHighlight=function($){$.currentTarget.style.background="#eee"},J.hideHighlight=function($){$.currentTarget.style.background="transparent"},Z.hsl.a!==1&&Z.view==="hex"?J.state={view:"rgb"}:J.state={view:Z.view},J}return n(H,[{key:"render",value:function(){var J=this,$=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),G=void 0;return this.state.view==="hex"?G=t.default.createElement("div",{style:$.fields,className:"flexbox-fix"},t.default.createElement("div",{style:$.field},t.default.createElement(h.EditableInput,{style:{input:$.input,label:$.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?G=t.default.createElement("div",{style:$.fields,className:"flexbox-fix"},t.default.createElement("div",{style:$.field},t.default.createElement(h.EditableInput,{style:{input:$.input,label:$.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:$.field},t.default.createElement(h.EditableInput,{style:{input:$.input,label:$.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:$.field},t.default.createElement(h.EditableInput,{style:{input:$.input,label:$.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:$.alpha},t.default.createElement(h.EditableInput,{style:{input:$.input,label:$.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(G=t.default.createElement("div",{style:$.fields,className:"flexbox-fix"},t.default.createElement("div",{style:$.field},t.default.createElement(h.EditableInput,{style:{input:$.input,label:$.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:$.field},t.default.createElement(h.EditableInput,{style:{input:$.input,label:$.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:$.field},t.default.createElement(h.EditableInput,{style:{input:$.input,label:$.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:$.alpha},t.default.createElement(h.EditableInput,{style:{input:$.input,label:$.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:$.wrap,className:"flexbox-fix"},G,t.default.createElement("div",{style:$.toggle},t.default.createElement("div",{style:$.icon,onClick:this.toggleViews,ref:function(ue){return J.icon=ue}},t.default.createElement(v.default,{style:$.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(J,$){return J.hsl.a!==1&&$.view==="hex"?{view:"rgb"}:null}}]),H})(t.default.Component);return Q.defaultProps={view:"hex"},a_.default=Q,a_}var l_={},KV;function PTe(){if(KV)return l_;KV=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.ChromePointer=void 0;var n=Ba(),e=r(n),t=Tm(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=l_.ChromePointer=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:a.picker})};return l_.default=o,l_}var u_={},UV;function KTe(){if(UV)return u_;UV=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.ChromePointerCircle=void 0;var n=Ba(),e=r(n),t=Tm(),i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}var o=u_.ChromePointerCircle=function(){var a=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:a.picker})};return u_.default=o,u_}var LV;function UTe(){if(LV)return YC;LV=1,Object.defineProperty(YC,"__esModule",{value:!0}),YC.Chrome=void 0;var n=Ba(),e=P(n),t=b1(),i=P(t),r=Tm(),o=P(r),s=loe(),a=P(s),c=Aoe(),h=DTe(),m=P(h),v=PTe(),x=P(v),E=KTe(),R=P(E);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var z=YC.Chrome=function(Y){var H=Y.width,Z=Y.onChange,J=Y.disableAlpha,$=Y.rgb,G=Y.hsl,oe=Y.hsv,ue=Y.hex,xe=Y.renderers,ge=Y.styles,Ie=ge===void 0?{}:ge,Me=Y.className,ke=Me===void 0?"":Me,je=Y.defaultView,Be=(0,o.default)((0,a.default)({default:{picker:{width:H,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+$.r+", "+$.g+", "+$.b+", "+$.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Ie),{disableAlpha:J});return e.default.createElement("div",{style:Be.picker,className:"chrome-picker "+ke},e.default.createElement("div",{style:Be.saturation},e.default.createElement(c.Saturation,{style:Be.Saturation,hsl:G,hsv:oe,pointer:R.default,onChange:Z})),e.default.createElement("div",{style:Be.body},e.default.createElement("div",{style:Be.controls,className:"flexbox-fix"},e.default.createElement("div",{style:Be.color},e.default.createElement("div",{style:Be.swatch},e.default.createElement("div",{style:Be.active}),e.default.createElement(c.Checkboard,{renderers:xe}))),e.default.createElement("div",{style:Be.toggles},e.default.createElement("div",{style:Be.hue},e.default.createElement(c.Hue,{style:Be.Hue,hsl:G,pointer:x.default,onChange:Z})),e.default.createElement("div",{style:Be.alpha},e.default.createElement(c.Alpha,{style:Be.Alpha,rgb:$,hsl:G,pointer:x.default,renderers:xe,onChange:Z})))),e.default.createElement(m.default,{rgb:$,hsl:G,hex:ue,view:je,onChange:Z,disableAlpha:J})))};return z.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object,defaultView:i.default.oneOf(["hex","rgb","hsl"])},z.defaultProps={width:225,disableAlpha:!1,styles:{}},YC.default=(0,c.ColorWrap)(z),YC}var LTe=UTe();const zTe=Su(LTe);function Mr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="04cff10f573f4461c1718b34a830d9c914f6fa95",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:124,column:9}},27:{start:{line:114,column:12},end:{line:114,column:36}},28:{start:{line:121,column:27},end:{line:121,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:125,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:115,column:11}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:121,column:20},end:{line:121,column:21}},loc:{start:{line:121,column:27},end:{line:121,column:56}},line:121}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:120,column:17},end:{line:120,column:57}},type:"cond-expr",locations:[{start:{line:120,column:36},end:{line:120,column:52}},{start:{line:120,column:55},end:{line:120,column:57}}],line:120}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU;AAAC,iBAAK,aAAa;AAAA,UAAM;AAAA,UACzC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04cff10f573f4461c1718b34a830d9c914f6fa95"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mr=function(){return s},s}Mr();function FTe(n){Mr().f[0]++;const e=(Mr().s[0]++,n.rgb);return Mr().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class TU extends En.Component{state=(Mr().s[2]++,{pickerOpened:!1});colorInput=(Mr().s[3]++,null);constructor(e){Mr().f[1]++,Mr().s[4]++,super(e),Mr().s[5]++,this.onChangeNoCheck=cT.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){Mr().f[2]++,Mr().s[6]++,this.props.onChange(e)}calcPickerOffset=(Mr().s[7]++,()=>{Mr().f[3]++;const e=(Mr().s[8]++,this.colorInput);if(Mr().s[9]++,e){Mr().b[0][0]++;const t=(Mr().s[10]++,e.getBoundingClientRect());return Mr().s[11]++,{top:t.top,left:t.left+196}}else return Mr().b[0][1]++,Mr().s[12]++,{top:160,left:555}});togglePicker=(Mr().s[13]++,()=>{Mr().f[4]++,Mr().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){Mr().f[5]++,Mr().s[15]++;try{return Mr().s[16]++,$u(this.props.value).rgb()}catch(e){return Mr().s[17]++,console.warn("Error parsing color: ",e),Mr().s[18]++,$u("rgb(255,255,255)")}}onChange(e){Mr().f[6]++,Mr().s[19]++,this.props.onChange(e===""?(Mr().b[1][0]++,void 0):(Mr().b[1][1]++,e))}render(){Mr().f[7]++;const e=(Mr().s[20]++,this.calcPickerOffset()),t=(Mr().s[21]++,this.color.object()),i=(Mr().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),r=(Mr().s[23]++,te.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[te.jsx(zTe,{color:i,onChange:s=>(Mr().f[8]++,Mr().s[24]++,this.onChangeNoCheck(FTe(s)))}),te.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),o=(Mr().s[25]++,{backgroundColor:this.props.value});return Mr().s[26]++,te.jsxs("div",{className:"maputnik-color-wrapper",children:[(Mr().b[2][0]++,this.state.pickerOpened&&(Mr().b[2][1]++,r)),te.jsx("div",{className:"maputnik-color-swatch",style:o}),te.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:s=>{Mr().f[9]++,Mr().s[27]++,this.colorInput=s},onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(Mr().b[3][0]++,this.props.value):(Mr().b[3][1]++,""),onChange:s=>(Mr().f[10]++,Mr().s[28]++,this.onChange(s.target.value))})]})}}function Ht(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="4f1ef08718bb93faa62aae09b5e3576a9aa3bb04",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAwC;AAC/C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f1ef08718bb93faa62aae09b5e3576a9aa3bb04"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ht=function(){return s},s}Ht();class m1 extends En.Component{static defaultProps=(Ht().s[0]++,{rangeStep:1});_keyboardEvent=(Ht().s[1]++,!1);constructor(e){Ht().f[0]++,Ht().s[2]++,super(e),Ht().s[3]++,this.state={uuid:+Ex(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return Ht().f[1]++,Ht().s[4]++,Ht().b[1][0]++,!t.editing&&(Ht().b[1][1]++,e.value!==t.value)?(Ht().b[0][0]++,Ht().s[5]++,{value:e.value,dirtyValue:e.value}):(Ht().b[0][1]++,Ht().s[6]++,null)}changeValue(e){Ht().f[2]++;const t=(Ht().s[7]++,Ht().b[3][0]++,e===""||(Ht().b[3][1]++,e===void 0)?(Ht().b[2][0]++,void 0):(Ht().b[2][1]++,+e)),i=(Ht().s[8]++,this.props.value!==t);Ht().s[9]++,Ht().b[5][0]++,this.isValid(t)&&(Ht().b[5][1]++,i)?(Ht().b[4][0]++,Ht().s[10]++,this.props.onChange?(Ht().b[6][0]++,Ht().s[11]++,this.props.onChange(t)):Ht().b[6][1]++,Ht().s[12]++,this.setState({value:t})):(Ht().b[4][1]++,Ht().s[13]++,Ht().b[8][0]++,!this.isValid(t)&&(Ht().b[8][1]++,i)?(Ht().b[7][0]++,Ht().s[14]++,this.setState({value:void 0})):Ht().b[7][1]++),Ht().s[15]++,this.setState({dirtyValue:e===""?(Ht().b[9][0]++,void 0):(Ht().b[9][1]++,e)})}isValid(e){if(Ht().f[3]++,Ht().s[16]++,e===void 0)return Ht().b[10][0]++,Ht().s[17]++,!0;Ht().b[10][1]++;const t=(Ht().s[18]++,+e);return Ht().s[19]++,isNaN(t)?(Ht().b[11][0]++,Ht().s[20]++,!1):(Ht().b[11][1]++,Ht().s[21]++,Ht().b[13][0]++,!isNaN(this.props.min)&&(Ht().b[13][1]++,t<this.props.min)?(Ht().b[12][0]++,Ht().s[22]++,!1):(Ht().b[12][1]++,Ht().s[23]++,Ht().b[15][0]++,!isNaN(this.props.max)&&(Ht().b[15][1]++,t>this.props.max)?(Ht().b[14][0]++,Ht().s[24]++,!1):(Ht().b[14][1]++,Ht().s[25]++,!0)))}resetValue=(Ht().s[26]++,()=>{if(Ht().f[4]++,Ht().s[27]++,this.setState({editing:!1}),Ht().s[28]++,this.state.value)Ht().b[16][1]++;else{Ht().b[16][0]++,Ht().s[29]++;return}Ht().s[30]++,this.isValid(this.state.value)?Ht().b[17][1]++:(Ht().b[17][0]++,Ht().s[31]++,this.isValid(this.props.value)?(Ht().b[18][0]++,Ht().s[32]++,this.changeValue(this.props.value),Ht().s[33]++,this.setState({dirtyValue:this.props.value})):(Ht().b[18][1]++,Ht().s[34]++,this.changeValue(void 0),Ht().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(Ht().s[36]++,e=>{Ht().f[5]++;let t=(Ht().s[37]++,parseFloat(e.target.value));const i=(Ht().s[38]++,this.props.rangeStep);let r=(Ht().s[39]++,t);if(Ht().s[40]++,i){Ht().b[19][0]++;const o=(Ht().s[41]++,t%i);Ht().s[42]++,this._keyboardEvent?(Ht().b[20][0]++,Ht().s[43]++,t<+this.state.dirtyValue?(Ht().b[21][0]++,Ht().s[44]++,t=this.state.value-i):(Ht().b[21][1]++,Ht().s[45]++,t=this.state.value+i),Ht().s[46]++,r=t):(Ht().b[20][1]++,Ht().s[47]++,o<i/2?(Ht().b[22][0]++,Ht().s[48]++,t=t-o):(Ht().b[22][1]++,Ht().s[49]++,t=t+(i-o)))}else Ht().b[19][1]++;Ht().s[50]++,this._keyboardEvent=!1,Ht().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),Ht().s[52]++,this.setState({value:t,dirtyValue:r}),Ht().s[53]++,this.props.onChange?(Ht().b[23][0]++,Ht().s[54]++,this.props.onChange(t)):Ht().b[23][1]++});render(){if(Ht().f[6]++,Ht().s[55]++,Ht().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(Ht().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(Ht().b[25][2]++,this.props.min!==void 0)&&(Ht().b[25][3]++,this.props.max!==void 0)&&(Ht().b[25][4]++,this.props.allowRange)){Ht().b[24][0]++;const e=(Ht().s[56]++,this.state.editing?(Ht().b[26][0]++,this.state.dirtyValue):(Ht().b[26][1]++,this.state.value)),t=(Ht().s[57]++,this.props.default===void 0?(Ht().b[27][0]++,""):(Ht().b[27][1]++,this.props.default));let i;return Ht().s[58]++,this.state.editingRange?(Ht().b[28][0]++,Ht().s[59]++,i=this.state.value):(Ht().b[28][1]++,Ht().s[60]++,i=e),Ht().s[61]++,te.jsxs("div",{className:"maputnik-number-container",children:[te.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(Ht().b[29][0]++,t):(Ht().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{Ht().f[7]++,Ht().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{Ht().f[8]++,Ht().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{Ht().f[9]++,Ht().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{Ht().f[10]++,Ht().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),te.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:i===void 0?(Ht().b[30][0]++,""):(Ht().b[30][1]++,i),onFocus:r=>{Ht().f[11]++,Ht().s[66]++,this.setState({editing:!0})},onChange:r=>{Ht().f[12]++,Ht().s[67]++,this.changeValue(r.target.value)},onBlur:r=>{Ht().f[13]++,Ht().s[68]++,this.setState({editing:!1}),Ht().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{Ht().b[24][1]++;const e=(Ht().s[70]++,this.state.editing?(Ht().b[31][0]++,this.state.dirtyValue):(Ht().b[31][1]++,this.state.value));return Ht().s[71]++,te.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(Ht().b[32][0]++,""):(Ht().b[32][1]++,e),onChange:t=>(Ht().f[14]++,Ht().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{Ht().f[15]++,Ht().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function Og(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Og=function(){return s},s}Og();class hoe extends En.Component{static defaultProps=(Og().s[0]++,{value:!1});onChange=(Og().s[1]++,()=>{Og().f[0]++,Og().s[2]++,this.props.onChange(!this.props.value)});render(){return Og().f[1]++,Og().s[3]++,te.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[te.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),te.jsx("div",{className:"maputnik-checkbox-box",children:te.jsx("svg",{style:{display:this.props.value?(Og().b[0][0]++,"inline"):(Og().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:te.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function fi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fi=function(){return s},s}fi();class qR extends En.Component{static defaultProps=(fi().s[0]++,{value:[],default:[]});constructor(e){fi().f[0]++,fi().s[1]++,super(e),fi().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){fi().f[1]++;const i=(fi().s[3]++,[]),r=(fi().s[4]++,t.initialPropsValue.slice(0));return fi().s[5]++,Array(e.length).fill(null).map((o,s)=>{fi().f[2]++,fi().s[6]++,e.value[s]===t.initialPropsValue[s]?(fi().b[0][0]++,fi().s[7]++,i[s]=t.value[s]):(fi().b[0][1]++,fi().s[8]++,i[s]=t.value[s],fi().s[9]++,r[s]=t.value[s])}),fi().s[10]++,{value:i,initialPropsValue:r}}isComplete(e){return fi().f[3]++,fi().s[11]++,Array(this.props.length).fill(null).every((t,i)=>{fi().f[4]++;const r=(fi().s[12]++,e[i]);return fi().s[13]++,fi().b[1][0]++,!(r===void 0||(fi().b[1][1]++,r===""))})}changeValue(e,t){fi().f[5]++;const i=(fi().s[14]++,this.state.value.slice(0));fi().s[15]++,i[e]=t,fi().s[16]++,this.setState({value:i},()=>{fi().f[6]++,fi().s[17]++,fi().b[3][0]++,this.isComplete(i)&&(fi().b[3][1]++,this.props.onChange)?(fi().b[2][0]++,fi().s[18]++,this.props.onChange(i)):(fi().b[2][1]++,fi().s[19]++,this.props.onChange?(fi().b[4][0]++,fi().s[20]++,this.props.onChange(void 0)):fi().b[4][1]++)})}render(){fi().f[7]++;const{value:e}=(fi().s[21]++,this.state),t=(fi().s[22]++,fi().b[5][0]++,e.length>0&&(fi().b[5][1]++,!e.every(r=>(fi().f[8]++,fi().s[23]++,fi().b[6][0]++,r===""||(fi().b[6][1]++,r===void 0))))),i=(fi().s[24]++,Array(this.props.length).fill(null).map((r,o)=>(fi().f[9]++,fi().s[25]++,this.props.type==="number"?(fi().b[7][0]++,fi().s[26]++,te.jsx(m1,{default:(fi().b[9][0]++,t||(fi().b[9][1]++,!this.props.default)?(fi().b[8][0]++,void 0):(fi().b[8][1]++,this.props.default[o])),value:e[o],required:t?(fi().b[10][0]++,!0):(fi().b[10][1]++,!1),onChange:s=>(fi().f[10]++,fi().s[27]++,this.changeValue(o,s)),"aria-label":(fi().b[11][0]++,this.props["aria-label"]||(fi().b[11][1]++,this.props.label))},o)):(fi().b[7][1]++,fi().s[28]++,te.jsx(xm,{default:(fi().b[13][0]++,t||(fi().b[13][1]++,!this.props.default)?(fi().b[12][0]++,void 0):(fi().b[12][1]++,this.props.default[o])),value:e[o],required:t?(fi().b[14][0]++,!0):(fi().b[14][1]++,!1),onChange:this.changeValue.bind(this,o),"aria-label":(fi().b[15][0]++,this.props["aria-label"]||(fi().b[15][1]++,this.props.label))},o)))));return fi().s[29]++,te.jsx("div",{className:"maputnik-array",children:i})}}function Cu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cu=function(){return s},s}Cu();class jTe extends En.Component{render(){Cu().f[0]++;let e=(Cu().s[0]++,this.props.options);Cu().s[1]++,Cu().b[1][0]++,e.length>0&&(Cu().b[1][1]++,!Array.isArray(e[0]))?(Cu().b[0][0]++,Cu().s[2]++,e=e.map(r=>(Cu().f[1]++,Cu().s[3]++,[r,r]))):Cu().b[0][1]++;const t=(Cu().s[4]++,Cu().b[2][0]++,this.props.value||(Cu().b[2][1]++,e[0][0])),i=(Cu().s[5]++,e.map(([r,o])=>(Cu().f[2]++,Cu().s[6]++,te.jsxs("label",{className:c0("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":r===t}),children:[te.jsx("input",{type:"radio",name:this.props.name,onChange:s=>(Cu().f[3]++,Cu().s[7]++,this.props.onChange(r)),value:r,checked:r===t}),o]},r))));return Cu().s[8]++,te.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:i})}}function Za(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Za=function(){return s},s}Za();function NTe(n){Za().f[0]++;let e=(Za().s[0]++,0);return Za().s[1]++,n.forEach(([t,i])=>{Za().f[1]++,Za().s[2]++,e+=i.length}),Za().s[3]++,e}class RU extends En.Component{render(){Za().f[2]++;const{options:e,value:t,onChange:i,name:r,label:o}=(Za().s[4]++,this.props);return Za().s[5]++,Za().b[1][0]++,e.length<=3&&(Za().b[1][1]++,NTe(e)<=20)?(Za().b[0][0]++,Za().s[6]++,te.jsx(jTe,{name:r,options:e,value:(Za().b[2][0]++,t||(Za().b[2][1]++,this.props.default)),onChange:i,"aria-label":(Za().b[3][0]++,this.props["aria-label"]||(Za().b[3][1]++,o))})):(Za().b[0][1]++,Za().s[7]++,te.jsx(rC,{options:e,value:(Za().b[4][0]++,t||(Za().b[4][1]++,this.props.default)),onChange:i,"aria-label":(Za().b[5][0]++,this.props["aria-label"]||(Za().b[5][1]++,o))}))}}function tx(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AACtD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tx=function(){return s},s}tx();class GTe extends En.Component{render(){tx().f[0]++;const e=(tx().s[0]++,this.props.t);return tx().s[1]++,te.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const nT=(tx().s[2]++,Fo()(GTe));function wr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="447f54dcea7174dfde20df5fd4ad658ec6e8baa0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAyB;AAChC,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAA6B,uBAAuB;AAG7D,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"447f54dcea7174dfde20df5fd4ad658ec6e8baa0"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return wr=function(){return s},s}wr();function iT(n,e){if(wr().f[0]++,wr().s[0]++,n===""){wr().b[0][0]++,wr().s[1]++;return}else wr().b[0][1]++;let t;wr().s[2]++;const i=s=>{wr().f[1]++,wr().s[3]++;try{const a=(wr().s[4]++,new URL(s));return wr().s[5]++,a.protocol}catch{wr().s[6]++;return}},r=(wr().s[7]++,i(n)),o=(wr().s[8]++,window.location.protocol==="https:");return wr().s[9]++,r?(wr().b[1][1]++,wr().s[13]++,wr().b[4][0]++,r&&(wr().b[4][1]++,r==="http:")&&(wr().b[4][2]++,window.location.protocol==="https:")?(wr().b[3][0]++,wr().s[14]++,t=te.jsx(nT,{children:te.jsxs(Cb,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",te.jsx("code",{children:"https://"})," domain"]})})):wr().b[3][1]++):(wr().b[1][0]++,wr().s[10]++,o?(wr().b[2][0]++,wr().s[11]++,t=te.jsx(nT,{children:te.jsxs(Cb,{t:e,children:["Must provide protocol: ",te.jsx("code",{children:"https://"})]})})):(wr().b[2][1]++,wr().s[12]++,t=te.jsx(nT,{children:te.jsxs(Cb,{t:e,children:["Must provide protocol: ",te.jsx("code",{children:"http://"})," or ",te.jsx("code",{children:"https://"})]})}))),wr().s[15]++,t}class QTe extends En.Component{static defaultProps=(wr().s[16]++,{onInput:()=>{wr().f[2]++}});constructor(e){wr().f[3]++,wr().s[17]++,super(e),wr().s[18]++,this.state={error:iT(e.value,e.t)}}onInput=(wr().s[19]++,e=>{wr().f[4]++,wr().s[20]++,this.setState({error:iT(e,this.props.t)}),wr().s[21]++,this.props.onInput?(wr().b[5][0]++,wr().s[22]++,this.props.onInput(e)):wr().b[5][1]++});onChange=(wr().s[23]++,e=>{wr().f[5]++,wr().s[24]++,this.setState({error:iT(e,this.props.t)}),wr().s[25]++,this.props.onChange(e)});render(){return wr().f[6]++,wr().s[26]++,te.jsxs("div",{children:[te.jsx(xm,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}const DU=(wr().s[27]++,Fo()(QTe));function Yn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:15,column:19},end:{line:15,column:39}},1:{start:{line:16,column:4},end:{line:16,column:27}},2:{start:{line:17,column:4},end:{line:17,column:57}},3:{start:{line:17,column:29},end:{line:17,column:57}},4:{start:{line:20,column:4},end:{line:20,column:56}},5:{start:{line:22,column:13},end:{line:38,column:3}},6:{start:{line:23,column:19},end:{line:23,column:39}},7:{start:{line:24,column:4},end:{line:36,column:5}},8:{start:{line:25,column:6},end:{line:25,column:21}},9:{start:{line:26,column:11},end:{line:36,column:5}},10:{start:{line:27,column:6},end:{line:27,column:22}},11:{start:{line:28,column:11},end:{line:36,column:5}},12:{start:{line:29,column:28},end:{line:29,column:38}},13:{start:{line:30,column:27},end:{line:30,column:59}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:32,column:11},end:{line:36,column:5}},16:{start:{line:33,column:6},end:{line:33,column:29}},17:{start:{line:35,column:6},end:{line:35,column:22}},18:{start:{line:37,column:4},end:{line:37,column:57}},19:{start:{line:37,column:29},end:{line:37,column:57}},20:{start:{line:40,column:19},end:{line:40,column:39}},21:{start:{line:41,column:4},end:{line:41,column:31}},22:{start:{line:42,column:4},end:{line:42,column:86}},23:{start:{line:42,column:29},end:{line:42,column:86}},24:{start:{line:45,column:14},end:{line:45,column:26}},25:{start:{line:46,column:22},end:{line:46,column:77}},26:{start:{line:47,column:19},end:{line:116,column:6}},27:{start:{line:48,column:45},end:{line:54,column:7}},28:{start:{line:56,column:6},end:{line:103,column:7}},29:{start:{line:57,column:8},end:{line:64,column:10}},30:{start:{line:65,column:13},end:{line:103,column:7}},31:{start:{line:66,column:8},end:{line:73,column:10}},32:{start:{line:74,column:13},end:{line:103,column:7}},33:{start:{line:75,column:24},end:{line:75,column:99}},34:{start:{line:75,column:78},end:{line:75,column:98}},35:{start:{line:76,column:8},end:{line:84,column:10}},36:{start:{line:85,column:13},end:{line:103,column:7}},37:{start:{line:86,column:8},end:{line:93,column:10}},38:{start:{line:95,column:8},end:{line:102,column:10}},39:{start:{line:104,column:6},end:{line:115,column:8}},40:{start:{line:117,column:4},end:{line:127,column:9}},41:{start:{line:130,column:26},end:{line:130,column:70}},42:{start:{line:134,column:14},end:{line:134,column:26}},43:{start:{line:135,column:4},end:{line:148,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:29},end:{line:18,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:15},end:{line:21,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:22,column:13},end:{line:22,column:14}},loc:{start:{line:22,column:19},end:{line:38,column:3}},line:22},3:{name:"(anonymous_3)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:24},end:{line:43,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:11},end:{line:128,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:47,column:35},end:{line:47,column:36}},loc:{start:{line:47,column:45},end:{line:116,column:5}},line:47},6:{name:"(anonymous_6)",decl:{start:{line:75,column:70},end:{line:75,column:71}},loc:{start:{line:75,column:78},end:{line:75,column:98}},line:75},7:{name:"(anonymous_7)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:11},end:{line:149,column:3}},line:133}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:17,column:57}},type:"if",locations:[{start:{line:17,column:4},end:{line:17,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:11},end:{line:20,column:55}},type:"binary-expr",locations:[{start:{line:20,column:11},end:{line:20,column:27}},{start:{line:20,column:31},end:{line:20,column:49}},{start:{line:20,column:53},end:{line:20,column:55}}],line:20},2:{loc:{start:{line:24,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:24},3:{loc:{start:{line:26,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:26,column:11},end:{line:36,column:5}},{start:{line:28,column:11},end:{line:36,column:5}}],line:26},4:{loc:{start:{line:28,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:28,column:11},end:{line:36,column:5}},{start:{line:32,column:11},end:{line:36,column:5}}],line:28},5:{loc:{start:{line:32,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:32,column:11},end:{line:36,column:5}},{start:{line:34,column:11},end:{line:36,column:5}}],line:32},6:{loc:{start:{line:37,column:4},end:{line:37,column:57}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},7:{loc:{start:{line:42,column:4},end:{line:42,column:86}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},8:{loc:{start:{line:42,column:49},end:{line:42,column:84}},type:"cond-expr",locations:[{start:{line:42,column:69},end:{line:42,column:75}},{start:{line:42,column:78},end:{line:42,column:84}}],line:42},9:{loc:{start:{line:56,column:6},end:{line:103,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:103,column:7}},{start:{line:65,column:13},end:{line:103,column:7}}],line:56},10:{loc:{start:{line:62,column:26},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:26},end:{line:62,column:50}},{start:{line:62,column:54},end:{line:62,column:70}}],line:62},11:{loc:{start:{line:65,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:65,column:13},end:{line:103,column:7}},{start:{line:74,column:13},end:{line:103,column:7}}],line:65},12:{loc:{start:{line:71,column:26},end:{line:71,column:70}},type:"binary-expr",locations:[{start:{line:71,column:26},end:{line:71,column:50}},{start:{line:71,column:54},end:{line:71,column:70}}],line:71},13:{loc:{start:{line:74,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:74,column:13},end:{line:103,column:7}},{start:{line:85,column:13},end:{line:103,column:7}}],line:74},14:{loc:{start:{line:82,column:26},end:{line:82,column:70}},type:"binary-expr",locations:[{start:{line:82,column:26},end:{line:82,column:50}},{start:{line:82,column:54},end:{line:82,column:70}}],line:82},15:{loc:{start:{line:85,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:85,column:13},end:{line:103,column:7}},{start:{line:94,column:13},end:{line:103,column:7}}],line:85},16:{loc:{start:{line:91,column:26},end:{line:91,column:70}},type:"binary-expr",locations:[{start:{line:91,column:26},end:{line:91,column:50}},{start:{line:91,column:54},end:{line:91,column:70}}],line:91},17:{loc:{start:{line:100,column:26},end:{line:100,column:70}},type:"binary-expr",locations:[{start:{line:100,column:26},end:{line:100,column:50}},{start:{line:100,column:54},end:{line:100,column:70}}],line:100}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAwE4B,cA2Cf,YA3Ce;AAxE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AAkBvB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,WAAW,KAAK,MAAM,SAAS,SAAS;AACtC,aAAO,KAAK,SAAS;AAAA,IACvB,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,SAAS;AACpC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yn=function(){return s},s}Yn();class WTe extends En.Component{changeValue(e,t){Yn().f[0]++;const i=(Yn().s[0]++,this.values.slice(0));Yn().s[1]++,i[e]=t,Yn().s[2]++,this.props.onChange?(Yn().b[0][0]++,Yn().s[3]++,this.props.onChange(i)):Yn().b[0][1]++}get values(){return Yn().f[1]++,Yn().s[4]++,Yn().b[1][0]++,this.props.value||(Yn().b[1][1]++,this.props.default)||(Yn().b[1][2]++,[])}addValue=(Yn().s[5]++,()=>{Yn().f[2]++;const e=(Yn().s[6]++,this.values.slice(0));if(Yn().s[7]++,this.props.type==="number")Yn().b[2][0]++,Yn().s[8]++,e.push(0);else if(Yn().b[2][1]++,Yn().s[9]++,this.props.type==="url")Yn().b[3][0]++,Yn().s[10]++,e.push("");else if(Yn().b[3][1]++,Yn().s[11]++,this.props.type==="enum"){Yn().b[4][0]++;const{fieldSpec:t}=(Yn().s[12]++,this.props),i=(Yn().s[13]++,Object.keys(t.values)[0]);Yn().s[14]++,e.push(i)}else Yn().b[4][1]++,Yn().s[15]++,this.props.type==="color"?(Yn().b[5][0]++,Yn().s[16]++,e.push("#000000")):(Yn().b[5][1]++,Yn().s[17]++,e.push(""));Yn().s[18]++,this.props.onChange?(Yn().b[6][0]++,Yn().s[19]++,this.props.onChange(e)):Yn().b[6][1]++});deleteValue(e){Yn().f[3]++;const t=(Yn().s[20]++,this.values.slice(0));Yn().s[21]++,t.splice(e,1),Yn().s[22]++,this.props.onChange?(Yn().b[7][0]++,Yn().s[23]++,this.props.onChange(t.length>0?(Yn().b[8][0]++,t):(Yn().b[8][1]++,void 0))):Yn().b[7][1]++}render(){Yn().f[4]++;const e=(Yn().s[24]++,this.props.t),t=(Yn().s[25]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Yn().s[26]++,this.values.map((r,o)=>{Yn().f[5]++;const s=(Yn().s[27]++,te.jsx(qTe,{onClick:this.deleteValue.bind(this,o),...t}));let a;if(Yn().s[28]++,this.props.type==="url")Yn().b[9][0]++,Yn().s[29]++,a=te.jsx(DU,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Yn().b[10][0]++,this.props["aria-label"]||(Yn().b[10][1]++,this.props.label))});else if(Yn().b[9][1]++,Yn().s[30]++,this.props.type==="number")Yn().b[11][0]++,Yn().s[31]++,a=te.jsx(m1,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Yn().b[12][0]++,this.props["aria-label"]||(Yn().b[12][1]++,this.props.label))});else if(Yn().b[11][1]++,Yn().s[32]++,this.props.type==="enum"){Yn().b[13][0]++;const c=(Yn().s[33]++,Object.keys(this.props.fieldSpec?.values).map(h=>(Yn().f[6]++,Yn().s[34]++,[h,fU(h)])));Yn().s[35]++,a=te.jsx(RU,{options:c,value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Yn().b[14][0]++,this.props["aria-label"]||(Yn().b[14][1]++,this.props.label))})}else Yn().b[13][1]++,Yn().s[36]++,this.props.type==="color"?(Yn().b[15][0]++,Yn().s[37]++,a=te.jsx(TU,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Yn().b[16][0]++,this.props["aria-label"]||(Yn().b[16][1]++,this.props.label))})):(Yn().b[15][1]++,Yn().s[38]++,a=te.jsx(xm,{value:r,onChange:this.changeValue.bind(this,o),"aria-label":(Yn().b[17][0]++,this.props["aria-label"]||(Yn().b[17][1]++,this.props.label))}));return Yn().s[39]++,te.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[te.jsx("div",{className:"maputnik-array-block-action",children:s}),te.jsx("div",{className:"maputnik-array-block-content",children:a})]},o)}));return Yn().s[40]++,te.jsxs("div",{className:"maputnik-array",children:[i,te.jsx(Zs,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const Ew=(Yn().s[41]++,Fo()(WTe));class qTe extends En.Component{render(){Yn().f[7]++;const e=(Yn().s[42]++,this.props.t);return Yn().s[43]++,te.jsx(Zs,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:te.jsx(DK,{label:te.jsx(Hb,{})})})}}function Ts(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ts=function(){return s},s}Ts();class YTe extends En.Component{static defaultProps=(Ts().s[0]++,{fonts:[]});get values(){Ts().f[0]++;const e=(Ts().s[1]++,Ts().b[0][0]++,this.props.value||(Ts().b[0][1]++,this.props.default)||(Ts().b[0][2]++,[]));return Ts().s[2]++,e[e.length-1]!==""?(Ts().b[1][0]++,Ts().s[3]++,e.concat("")):(Ts().b[1][1]++,Ts().s[4]++,e)}changeFont(e,t){Ts().f[1]++;const i=(Ts().s[5]++,this.values.slice(0));Ts().s[6]++,i[e]=t;const r=(Ts().s[7]++,i.filter(o=>(Ts().f[2]++,Ts().s[8]++,o!==void 0)).filter(o=>(Ts().f[3]++,Ts().s[9]++,o!=="")));Ts().s[10]++,this.props.onChange(r)}render(){Ts().f[4]++;const e=(Ts().s[11]++,this.values.map((t,i)=>(Ts().f[5]++,Ts().s[12]++,te.jsx("li",{children:te.jsx(E5,{"aria-label":(Ts().b[2][0]++,this.props["aria-label"]||(Ts().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(r=>(Ts().f[6]++,Ts().s[13]++,[r,r])),onChange:this.changeFont.bind(this,i)})},i))));return Ts().s[14]++,te.jsx("ul",{className:"maputnik-font",children:e})}}function Yi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="123acbe81166b3a98d021f01f94ef258a8456edf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:27,column:5}},2:{start:{line:25,column:30},end:{line:25,column:81}},3:{start:{line:28,column:4},end:{line:145,column:5}},4:{start:{line:30,column:8},end:{line:37,column:10}},5:{start:{line:39,column:24},end:{line:39,column:101}},6:{start:{line:39,column:82},end:{line:39,column:100}},7:{start:{line:40,column:8},end:{line:46,column:10}},8:{start:{line:51,column:8},end:{line:67,column:9}},9:{start:{line:52,column:26},end:{line:52,column:59}},10:{start:{line:53,column:10},end:{line:59,column:12}},11:{start:{line:57,column:42},end:{line:57,column:48}},12:{start:{line:61,column:10},end:{line:66,column:12}},13:{start:{line:69,column:8},end:{line:74,column:10}},14:{start:{line:76,column:8},end:{line:81,column:10}},15:{start:{line:83,column:8},end:{line:111,column:9}},16:{start:{line:84,column:10},end:{line:90,column:12}},17:{start:{line:92,column:10},end:{line:110,column:11}},18:{start:{line:93,column:12},end:{line:100,column:14}},19:{start:{line:102,column:12},end:{line:109,column:14}},20:{start:{line:113,column:8},end:{line:121,column:10}},21:{start:{line:123,column:8},end:{line:131,column:10}},22:{start:{line:133,column:8},end:{line:141,column:10}},23:{start:{line:143,column:8},end:{line:143,column:110}},24:{start:{line:144,column:8},end:{line:144,column:20}},25:{start:{line:148,column:4},end:{line:148,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:146,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:25,column:16},end:{line:25,column:17}},loc:{start:{line:25,column:30},end:{line:25,column:81}},line:25},2:{name:"(anonymous_2)",decl:{start:{line:39,column:75},end:{line:39,column:76}},loc:{start:{line:39,column:82},end:{line:39,column:100}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:57,column:35},end:{line:57,column:36}},loc:{start:{line:57,column:42},end:{line:57,column:48}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:147,column:2},end:{line:147,column:3}},loc:{start:{line:147,column:11},end:{line:149,column:3}},line:147}},branchMap:{0:{loc:{start:{line:28,column:4},end:{line:145,column:5}},type:"switch",locations:[{start:{line:29,column:6},end:{line:37,column:10}},{start:{line:38,column:6},end:{line:47,column:7}},{start:{line:48,column:6},end:{line:48,column:27}},{start:{line:49,column:6},end:{line:49,column:23}},{start:{line:50,column:6},end:{line:67,column:9}},{start:{line:68,column:6},end:{line:74,column:10}},{start:{line:75,column:6},end:{line:81,column:10}},{start:{line:82,column:6},end:{line:111,column:9}},{start:{line:112,column:6},end:{line:121,column:10}},{start:{line:122,column:6},end:{line:131,column:10}},{start:{line:132,column:6},end:{line:141,column:10}},{start:{line:142,column:6},end:{line:144,column:20}}],line:28},1:{loc:{start:{line:39,column:36},end:{line:39,column:69}},type:"binary-expr",locations:[{start:{line:39,column:36},end:{line:39,column:63}},{start:{line:39,column:67},end:{line:39,column:69}}],line:39},2:{loc:{start:{line:51,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:67,column:9}},{start:{line:60,column:15},end:{line:67,column:9}}],line:51},3:{loc:{start:{line:52,column:26},end:{line:52,column:59}},type:"binary-expr",locations:[{start:{line:52,column:26},end:{line:52,column:53}},{start:{line:52,column:57},end:{line:52,column:59}}],line:52},4:{loc:{start:{line:83,column:8},end:{line:111,column:9}},type:"if",locations:[{start:{line:83,column:8},end:{line:111,column:9}},{start:{line:91,column:15},end:{line:111,column:9}}],line:83},5:{loc:{start:{line:92,column:10},end:{line:110,column:11}},type:"if",locations:[{start:{line:92,column:10},end:{line:110,column:11}},{start:{line:101,column:17},end:{line:110,column:11}}],line:92},6:{loc:{start:{line:119,column:19},end:{line:119,column:90}},type:"cond-expr",locations:[{start:{line:119,column:53},end:{line:119,column:69}},{start:{line:119,column:72},end:{line:119,column:90}}],line:119},7:{loc:{start:{line:129,column:19},end:{line:129,column:90}},type:"cond-expr",locations:[{start:{line:129,column:53},end:{line:129,column:69}},{start:{line:129,column:72},end:{line:129,column:90}}],line:129},8:{loc:{start:{line:138,column:19},end:{line:138,column:90}},type:"cond-expr",locations:[{start:{line:138,column:53},end:{line:138,column:69}},{start:{line:138,column:72},end:{line:138,column:90}}],line:138}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDQ;AAzDR,OAAO,WAAkC;AAEzC,OAAO,gBAA0C;AACjD,OAAO,iBAA4C;AACnD,OAAO,mBAAgD;AACvD,OAAO,iBAA4C;AACnD,OAAO,gBAA0C;AACjD,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA2BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACjC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF,KAAK;AAAe,eAClB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAc,eACjB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA,YAC9E,QAAQ;AAAA;AAAA,QACV;AAAA,MAEF;AACE,gBAAQ,KAAK,6BAA6B,KAAK,MAAM,SAAS,UAAU,KAAK,MAAM,WAAW,IAAI,EAAE;AACpG,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"123acbe81166b3a98d021f01f94ef258a8456edf"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yi=function(){return s},s}Yi();const VTe=(Yi().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);class nx extends En.Component{childNodes(){Yi().f[0]++;const e=(Yi().s[1]++,{fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(Yi().f[1]++,Yi().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(Yi().s[3]++,this.props.fieldSpec?.type){case"number":return Yi().b[0][0]++,Yi().s[4]++,te.jsx(m1,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":Yi().b[0][1]++;{const t=(Yi().s[5]++,Object.keys((Yi().b[1][0]++,this.props.fieldSpec.values||(Yi().b[1][1]++,[]))).map(i=>(Yi().f[2]++,Yi().s[6]++,[i,fU(i)])));return Yi().s[7]++,te.jsx(RU,{...e,options:t})}case"resolvedImage":Yi().b[0][2]++;case"formatted":Yi().b[0][3]++;case"string":if(Yi().b[0][4]++,Yi().s[8]++,VTe.indexOf(this.props.fieldName)>=0){Yi().b[2][0]++;const t=(Yi().s[9]++,Yi().b[3][0]++,this.props.fieldSpec.values||(Yi().b[3][1]++,[]));return Yi().s[10]++,te.jsx(E5,{...e,options:t.map(i=>(Yi().f[3]++,Yi().s[11]++,[i,i]))})}else return Yi().b[2][1]++,Yi().s[12]++,te.jsx(xm,{...e});case"color":return Yi().b[0][5]++,Yi().s[13]++,te.jsx(TU,{...e});case"boolean":return Yi().b[0][6]++,Yi().s[14]++,te.jsx(hoe,{...e});case"array":return Yi().b[0][7]++,Yi().s[15]++,this.props.fieldName==="text-font"?(Yi().b[4][0]++,Yi().s[16]++,te.jsx(YTe,{...e,fonts:this.props.fieldSpec.values})):(Yi().b[4][1]++,Yi().s[17]++,this.props.fieldSpec.length?(Yi().b[5][0]++,Yi().s[18]++,te.jsx(qR,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(Yi().b[5][1]++,Yi().s[19]++,te.jsx(Ew,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));case"numberArray":return Yi().b[0][8]++,Yi().s[20]++,te.jsx(Ew,{...e,fieldSpec:this.props.fieldSpec,type:"number",value:Array.isArray(this.props.value)?(Yi().b[6][0]++,this.props.value):(Yi().b[6][1]++,[this.props.value])});case"colorArray":return Yi().b[0][9]++,Yi().s[21]++,te.jsx(Ew,{...e,fieldSpec:this.props.fieldSpec,type:"color",value:Array.isArray(this.props.value)?(Yi().b[7][0]++,this.props.value):(Yi().b[7][1]++,[this.props.value])});case"padding":return Yi().b[0][10]++,Yi().s[22]++,te.jsx(qR,{...e,type:"number",value:Array.isArray(this.props.value)?(Yi().b[8][0]++,this.props.value):(Yi().b[8][1]++,[this.props.value]),length:4});default:return Yi().b[0][11]++,Yi().s[23]++,console.warn(`No proper field input for ${this.props.fieldName} type: ${this.props.fieldSpec?.type}`),Yi().s[24]++,null}}render(){return Yi().f[4]++,Yi().s[25]++,te.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}}function Wc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="92ea2bb9889070368abe40f809481200c126aae8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:7,column:17},end:{line:30,column:1}},1:{start:{line:8,column:32},end:{line:8,column:53}},2:{start:{line:9,column:18},end:{line:9,column:67}},3:{start:{line:10,column:22},end:{line:12,column:3}},4:{start:{line:11,column:4},end:{line:11,column:20}},5:{start:{line:13,column:2},end:{line:29,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:28},end:{line:30,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:22},end:{line:10,column:23}},loc:{start:{line:10,column:31},end:{line:12,column:3}},line:10}},branchMap:{0:{loc:{start:{line:14,column:4},end:{line:21,column:8}},type:"binary-expr",locations:[{start:{line:14,column:4},end:{line:14,column:19}},{start:{line:14,column:39},end:{line:21,column:8}}],line:14},1:{loc:{start:{line:22,column:4},end:{line:25,column:32}},type:"binary-expr",locations:[{start:{line:22,column:4},end:{line:22,column:20}},{start:{line:22,column:40},end:{line:25,column:32}}],line:22},2:{loc:{start:{line:28,column:4},end:{line:28,column:198}},type:"binary-expr",locations:[{start:{line:28,column:4},end:{line:28,column:19}},{start:{line:28,column:39},end:{line:28,column:198}}],line:28},3:{loc:{start:{line:28,column:104},end:{line:28,column:125}},type:"cond-expr",locations:[{start:{line:28,column:114},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:125}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAuBI,SAGM,KAHN;AAvBJ,OAAO,WAA0D;AACjE,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAU7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAW,WAAW;AAAA,MACzB,8BAA8B;AAAA,MAC9B,+BAA+B,MAAM;AAAA,IACvC,CAAC,GACE,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"92ea2bb9889070368abe40f809481200c126aae8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Wc=function(){return s},s}Wc();Wc().s[0]++;const Py=n=>{Wc().f[0]++;const[e,t]=(Wc().s[1]++,En.useState(!1)),i=(Wc().s[2]++,En.useRef(Ex("fieldset_label_")));Wc().s[3]++;const r=o=>{Wc().f[1]++,Wc().s[4]++,t(o)};return Wc().s[5]++,te.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":i.current,children:[(Wc().b[0][0]++,n.fieldSpec&&(Wc().b[0][1]++,te.jsx("div",{className:"maputnik-input-block-label",children:te.jsx(DK,{label:n.label,onToggleDoc:r,fieldSpec:n.fieldSpec})}))),(Wc().b[1][0]++,!n.fieldSpec&&(Wc().b[1][1]++,te.jsx("div",{className:c0({"maputnik-input-block-label":!0,"maputnik-input-block--error":n.error}),children:n.label}))),te.jsx("div",{className:"maputnik-input-block-action",children:n.action}),te.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(Wc().b[2][0]++,n.fieldSpec&&(Wc().b[2][1]++,te.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(Wc().b[3][0]++,""):(Wc().b[3][1]++,"none")},children:te.jsx(E6,{fieldSpec:n.fieldSpec})})))]})};function Po(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",e="93d4690989e2b2b09b13eab9ee3382c32a103823",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",statementMap:{0:{start:{line:6,column:2},end:{line:34,column:3}},1:{start:{line:8,column:6},end:{line:8,column:19}},2:{start:{line:10,column:6},end:{line:10,column:74}},3:{start:{line:12,column:6},end:{line:12,column:19}},4:{start:{line:14,column:6},end:{line:14,column:22}},5:{start:{line:16,column:6},end:{line:16,column:19}},6:{start:{line:18,column:6},end:{line:18,column:19}},7:{start:{line:20,column:6},end:{line:20,column:19}},8:{start:{line:22,column:6},end:{line:22,column:19}},9:{start:{line:24,column:6},end:{line:24,column:19}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:28,column:6},end:{line:28,column:22}},12:{start:{line:30,column:6},end:{line:30,column:22}},13:{start:{line:32,column:6},end:{line:32,column:58}},14:{start:{line:33,column:6},end:{line:33,column:19}},15:{start:{line:36,column:18},end:{line:39,column:1}},16:{start:{line:37,column:20},end:{line:37,column:55}},17:{start:{line:38,column:2},end:{line:38,column:190}}},fnMap:{0:{name:"getElementFromType",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:39},end:{line:35,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:29},end:{line:39,column:1}},line:36}},branchMap:{0:{loc:{start:{line:6,column:2},end:{line:34,column:3}},type:"switch",locations:[{start:{line:7,column:4},end:{line:8,column:19}},{start:{line:9,column:4},end:{line:10,column:74}},{start:{line:11,column:4},end:{line:12,column:19}},{start:{line:13,column:4},end:{line:14,column:22}},{start:{line:15,column:4},end:{line:16,column:19}},{start:{line:17,column:4},end:{line:18,column:19}},{start:{line:19,column:4},end:{line:20,column:19}},{start:{line:21,column:4},end:{line:22,column:19}},{start:{line:23,column:4},end:{line:24,column:19}},{start:{line:25,column:4},end:{line:26,column:22}},{start:{line:27,column:4},end:{line:28,column:22}},{start:{line:29,column:4},end:{line:30,column:22}},{start:{line:31,column:4},end:{line:33,column:19}}],line:6},1:{loc:{start:{line:10,column:13},end:{line:10,column:73}},type:"cond-expr",locations:[{start:{line:10,column:57},end:{line:10,column:65}},{start:{line:10,column:68},end:{line:10,column:73}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx"],names:[],mappings:"AA2CM;AA3CN,OAAO,WAAgC;AACvC,OAAO,eAA4D;AACnE,OAAO,cAAsC;AAE7C,SAAS,mBAAmB,WAAyF;AACnH,UAAO,UAAU,MAAM;AAAA,IACrB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAQ,OAAO,KAAK,UAAU,MAAO,EAAE,UAAU,IAAI,WAAW;AAAA,IAClE,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,cAAQ,KAAK,uBAAuB,UAAU,IAAI;AAClD,aAAO;AAAA,EACX;AACF;AAIA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,mBAAmB,MAAM,SAAU;AAErD,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WAAW,OAAO,MAAM,OAC5F,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"93d4690989e2b2b09b13eab9ee3382c32a103823"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Po=function(){return s},s}Po();function $Te(n){switch(Po().f[0]++,Po().s[0]++,n.type){case"color":return Po().b[0][0]++,Po().s[1]++,_s;case"enum":return Po().b[0][1]++,Po().s[2]++,Object.keys(n.values).length<=3?(Po().b[1][0]++,Py):(Po().b[1][1]++,_s);case"boolean":return Po().b[0][2]++,Po().s[3]++,_s;case"array":return Po().b[0][3]++,Po().s[4]++,Py;case"resolvedImage":return Po().b[0][4]++,Po().s[5]++,_s;case"number":return Po().b[0][5]++,Po().s[6]++,_s;case"string":return Po().b[0][6]++,Po().s[7]++,_s;case"formatted":return Po().b[0][7]++,Po().s[8]++,_s;case"padding":return Po().b[0][8]++,Po().s[9]++,_s;case"numberArray":return Po().b[0][9]++,Po().s[10]++,Py;case"colorArray":return Po().b[0][10]++,Po().s[11]++,Py;case"variableAnchorOffsetCollection":return Po().b[0][11]++,Po().s[12]++,Py;default:return Po().b[0][12]++,Po().s[13]++,console.warn("No such type for: "+n.type),Po().s[14]++,_s}}Po().s[15]++;const HTe=n=>{Po().f[1]++;const e=(Po().s[16]++,$Te(n.fieldSpec));return Po().s[17]++,te.jsx(e,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,error:n.error,children:te.jsx(nx,{...n})})};function _u(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="8e77c8fbe0fbc5796ba925837fc7526418b4854b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:60,column:5}},2:{start:{line:11,column:52},end:{line:19,column:7}},3:{start:{line:20,column:50},end:{line:28,column:7}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:46,column:11},end:{line:60,column:5}},8:{start:{line:47,column:51},end:{line:56,column:7}},9:{start:{line:57,column:6},end:{line:57,column:76}},10:{start:{line:59,column:6},end:{line:59,column:44}},11:{start:{line:63,column:29},end:{line:63,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:61,column:3}},line:8}},branchMap:{0:{loc:{start:{line:10,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:60,column:5}},{start:{line:46,column:11},end:{line:60,column:5}}],line:10},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},2:{loc:{start:{line:46,column:11},end:{line:60,column:5}},type:"if",locations:[{start:{line:46,column:11},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA0BU,cAsBG,YAtBH;AA1BV,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAS,sBAAsB;AAC/B,SAA+B,uBAAuB;AAUtD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,YAAM,wBACJ;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,kBAAe;AAAA;AAAA,MAClB;AAGF,YAAM,sBAAsB;AAAA,QAAC;AAAA;AAAA,UAC3B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI;AACJ,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,WAAW,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,WAAW,GAAG;AAC5E,YAAM,uBAAuB;AAAA,QAAC;AAAA;AAAA,UAC5B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,4CAA4C;AAAA,UACrD,eAAY;AAAA,UAEZ,8BAAC,eAAY;AAAA;AAAA,MACf;AACA,aAAO,oBAAC,SAAK,gCAAqB;AAAA,IACpC,OAAO;AACL,aAAO,oBAAC,SAAI;AAAA,IACd;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8e77c8fbe0fbc5796ba925837fc7526418b4854b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return _u=function(){return s},s}_u();class ZTe extends En.Component{render(){_u().f[0]++;const e=(_u().s[0]++,this.props.t);if(_u().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")){_u().b[0][0]++;const t=(_u().s[2]++,te.jsx(Zs,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:te.jsx(I4,{})})),i=(_u().s[3]++,te.jsx(Zs,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:te.jsx(lz,{})}));let r;return _u().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(_u().b[1][0]++,_u().s[5]++,r=te.jsx(Zs,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:te.jsx(Zhe,{})})):_u().b[1][1]++,_u().s[6]++,te.jsxs("div",{children:[t,r,i]})}else if(_u().b[0][1]++,_u().s[7]++,this.props.fieldSpec.expression?.parameters.includes("elevation")){_u().b[2][0]++;const t=(_u().s[8]++,te.jsx(Zs,{className:"maputnik-make-elevation-function",onClick:this.props.onElevationClick,title:e("Convert property into a elevation function"),"data-wd-key":"make-elevation-function",children:te.jsx(lz,{})}));return _u().s[9]++,te.jsx("div",{children:t})}else return _u().b[2][1]++,_u().s[10]++,te.jsx("div",{})}}const XTe=(_u().s[11]++,Fo()(ZTe));function Ig(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:21,column:5}},3:{start:{line:22,column:18},end:{line:22,column:53}},4:{start:{line:23,column:4},end:{line:32,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:33,column:3}},line:10}},branchMap:{0:{loc:{start:{line:29,column:34},end:{line:29,column:60}},type:"binary-expr",locations:[{start:{line:29,column:34},end:{line:29,column:54}},{start:{line:29,column:58},end:{line:29,column:60}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA6BwB;AA7BxB,OAAO,WAAW;AAElB,OAAO,eAAsC;AAC7C,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAgB/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA,QAC9B,kBAAkB,KAAK,MAAM;AAAA;AAAA,IAC/B;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ig=function(){return s},s}Ig();class JTe extends En.Component{static defaultProps=(Ig().s[0]++,{errors:{}});render(){Ig().f[0]++;const{errors:e,fieldName:t,fieldType:i}=(Ig().s[1]++,this.props),r=(Ig().s[2]++,te.jsx(XTe,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick,onElevationClick:this.props.onElevationClick})),o=(Ig().s[3]++,e[i+"."+t]);return Ig().s[4]++,te.jsx(HTe,{...this.props,error:o,fieldSpec:this.props.fieldSpec,label:L6((Ig().b[0][0]++,this.props.fieldName||(Ig().b[0][1]++,""))),action:r})}}function yd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return yd=function(){return s},s}yd();function doe(n,e){yd().f[0]++;const t=(yd().s[0]++,+n),i=(yd().s[1]++,+e);return yd().s[2]++,t<i?(yd().b[0][0]++,yd().s[3]++,-1):(yd().b[0][1]++,yd().s[4]++,t>i?(yd().b[1][0]++,yd().s[5]++,1):(yd().b[1][1]++,yd().s[6]++,0))}function rm(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rm=function(){return s},s}rm();function np(n){if(rm().f[0]++,rm().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return rm().b[0][0]++,rm().s[1]++,n.default;rm().b[0][1]++;const e=(rm().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return rm().s[3]++,rm().b[1][0]++,e[n.type]||(rm().b[1][1]++,"")}function ix(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="03de18cded5f486201afd886787bbdda710eafe3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAQtD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"03de18cded5f486201afd886787bbdda710eafe3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ix=function(){return s},s}ix();class e9e extends En.Component{render(){ix().f[0]++;const e=(ix().s[0]++,this.props.t);return ix().s[1]++,te.jsx(Zs,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:te.jsx(Hb,{})})}}const foe=(ix().s[2]++,Fo()(e9e));function $t(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="a1f2034e8330e69a4f4de946d81cea8ff55472f7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:29,column:3}},1:{start:{line:21,column:4},end:{line:28,column:7}},2:{start:{line:22,column:6},end:{line:27,column:7}},3:{start:{line:23,column:8},end:{line:25,column:9}},4:{start:{line:24,column:10},end:{line:24,column:33}},5:{start:{line:26,column:8},end:{line:26,column:39}},6:{start:{line:30,column:2},end:{line:30,column:17}},7:{start:{line:33,column:10},end:{line:35,column:3}},8:{start:{line:37,column:20},end:{line:37,column:55}},9:{start:{line:38,column:4},end:{line:42,column:5}},10:{start:{line:39,column:6},end:{line:41,column:9}},11:{start:{line:45,column:20},end:{line:45,column:45}},12:{start:{line:46,column:4},end:{line:50,column:5}},13:{start:{line:47,column:6},end:{line:49,column:8}},14:{start:{line:51,column:4},end:{line:51,column:16}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:27}},17:{start:{line:57,column:4},end:{line:59,column:5}},18:{start:{line:58,column:6},end:{line:58,column:24}},19:{start:{line:60,column:4},end:{line:60,column:25}},20:{start:{line:63,column:4},end:{line:67,column:5}},21:{start:{line:64,column:6},end:{line:64,column:83}},22:{start:{line:66,column:6},end:{line:66,column:53}},23:{start:{line:71,column:26},end:{line:76,column:70}},24:{start:{line:72,column:6},end:{line:75,column:8}},25:{start:{line:76,column:22},end:{line:76,column:69}},26:{start:{line:77,column:20},end:{line:77,column:22}},27:{start:{line:78,column:4},end:{line:80,column:7}},28:{start:{line:79,column:6},end:{line:79,column:30}},29:{start:{line:81,column:4},end:{line:83,column:7}},30:{start:{line:84,column:4},end:{line:84,column:50}},31:{start:{line:84,column:39},end:{line:84,column:48}},32:{start:{line:86,column:13},end:{line:106,column:3}},33:{start:{line:87,column:4},end:{line:104,column:5}},34:{start:{line:88,column:6},end:{line:91,column:8}},35:{start:{line:93,column:24},end:{line:93,column:61}},36:{start:{line:94,column:6},end:{line:103,column:8}},37:{start:{line:105,column:4},end:{line:105,column:42}},38:{start:{line:108,column:18},end:{line:108,column:56}},39:{start:{line:109,column:4},end:{line:115,column:6}},40:{start:{line:116,column:25},end:{line:116,column:53}},41:{start:{line:117,column:25},end:{line:120,column:5}},42:{start:{line:121,column:4},end:{line:121,column:54}},43:{start:{line:124,column:25},end:{line:127,column:5}},44:{start:{line:128,column:4},end:{line:130,column:5}},45:{start:{line:129,column:6},end:{line:129,column:34}},46:{start:{line:131,column:4},end:{line:131,column:60}},47:{start:{line:134,column:4},end:{line:141,column:5}},48:{start:{line:135,column:6},end:{line:135,column:42}},49:{start:{line:137,column:6},end:{line:140,column:9}},50:{start:{line:144,column:4},end:{line:148,column:5}},51:{start:{line:145,column:6},end:{line:145,column:43}},52:{start:{line:147,column:6},end:{line:147,column:40}},53:{start:{line:149,column:4},end:{line:149,column:58}},54:{start:{line:152,column:14},end:{line:152,column:26}},55:{start:{line:153,column:4},end:{line:155,column:5}},56:{start:{line:154,column:6},end:{line:154,column:78}},57:{start:{line:157,column:4},end:{line:205,column:5}},58:{start:{line:158,column:6},end:{line:204,column:9}},59:{start:{line:159,column:26},end:{line:159,column:77}},60:{start:{line:160,column:20},end:{line:160,column:40}},61:{start:{line:161,column:26},end:{line:161,column:79}},62:{start:{line:162,column:22},end:{line:162,column:29}},63:{start:{line:163,column:46},end:{line:163,column:122}},64:{start:{line:164,column:26},end:{line:169,column:9}},65:{start:{line:168,column:33},end:{line:168,column:97}},66:{start:{line:171,column:8},end:{line:175,column:9}},67:{start:{line:172,column:10},end:{line:172,column:73}},68:{start:{line:174,column:10},end:{line:174,column:73}},69:{start:{line:176,column:24},end:{line:176,column:28}},70:{start:{line:177,column:8},end:{line:188,column:9}},71:{start:{line:178,column:10},end:{line:187,column:15}},72:{start:{line:183,column:37},end:{line:183,column:101}},73:{start:{line:189,column:8},end:{line:203,column:18}},74:{start:{line:199,column:41},end:{line:199,column:110}},75:{start:{line:206,column:4},end:{line:306,column:12}},76:{start:{line:217,column:39},end:{line:217,column:67}},77:{start:{line:235,column:43},end:{line:235,column:68}},78:{start:{line:250,column:39},end:{line:250,column:83}},79:{start:{line:266,column:42},end:{line:266,column:85}},80:{start:{line:309,column:21},end:{line:309,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:18,column:9},end:{line:18,column:20}},loc:{start:{line:18,column:35},end:{line:31,column:1}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:30},end:{line:21,column:31}},loc:{start:{line:21,column:45},end:{line:28,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:22},end:{line:43,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:48},end:{line:52,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:34},end:{line:61,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:34},end:{line:68,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:26},end:{line:85,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:51},end:{line:76,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:76,column:12},end:{line:76,column:13}},loc:{start:{line:76,column:22},end:{line:76,column:69}},line:76},9:{name:"(anonymous_9)",decl:{start:{line:78,column:26},end:{line:78,column:27}},loc:{start:{line:78,column:41},end:{line:80,column:5}},line:78},10:{name:"(anonymous_10)",decl:{start:{line:84,column:29},end:{line:84,column:30}},loc:{start:{line:84,column:39},end:{line:84,column:48}},line:84},11:{name:"(anonymous_11)",decl:{start:{line:86,column:13},end:{line:86,column:14}},loc:{start:{line:86,column:35},end:{line:106,column:3}},line:86},12:{name:"(anonymous_12)",decl:{start:{line:107,column:2},end:{line:107,column:3}},loc:{start:{line:107,column:41},end:{line:122,column:3}},line:107},13:{name:"(anonymous_13)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:23},end:{line:132,column:3}},line:123},14:{name:"(anonymous_14)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:26},end:{line:142,column:3}},line:133},15:{name:"(anonymous_15)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:40},end:{line:150,column:3}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:151,column:2},end:{line:151,column:3}},loc:{start:{line:151,column:11},end:{line:307,column:3}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:158,column:46},end:{line:158,column:47}},loc:{start:{line:158,column:61},end:{line:204,column:7}},line:158},18:{name:"(anonymous_18)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:33},end:{line:168,column:97}},line:168},19:{name:"(anonymous_19)",decl:{start:{line:183,column:24},end:{line:183,column:25}},loc:{start:{line:183,column:37},end:{line:183,column:101}},line:183},20:{name:"(anonymous_20)",decl:{start:{line:199,column:24},end:{line:199,column:25}},loc:{start:{line:199,column:41},end:{line:199,column:110}},line:199},21:{name:"(anonymous_21)",decl:{start:{line:217,column:26},end:{line:217,column:27}},loc:{start:{line:217,column:39},end:{line:217,column:67}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:43},end:{line:235,column:68}},line:235},23:{name:"(anonymous_23)",decl:{start:{line:250,column:26},end:{line:250,column:27}},loc:{start:{line:250,column:39},end:{line:250,column:83}},line:250},24:{name:"(anonymous_24)",decl:{start:{line:266,column:26},end:{line:266,column:27}},loc:{start:{line:266,column:42},end:{line:266,column:85}},line:266}},branchMap:{0:{loc:{start:{line:20,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},1:{loc:{start:{line:20,column:6},end:{line:20,column:38}},type:"binary-expr",locations:[{start:{line:20,column:6},end:{line:20,column:17}},{start:{line:20,column:21},end:{line:20,column:38}}],line:20},2:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},3:{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:38,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},5:{loc:{start:{line:46,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},8:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},9:{loc:{start:{line:87,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:104,column:5}},{start:{line:92,column:11},end:{line:104,column:5}}],line:87},10:{loc:{start:{line:93,column:24},end:{line:93,column:61}},type:"cond-expr",locations:[{start:{line:93,column:55},end:{line:93,column:57}},{start:{line:93,column:60},end:{line:93,column:61}}],line:93},11:{loc:{start:{line:108,column:18},end:{line:108,column:56}},type:"binary-expr",locations:[{start:{line:108,column:18},end:{line:108,column:50}},{start:{line:108,column:54},end:{line:108,column:56}}],line:108},12:{loc:{start:{line:112,column:14},end:{line:112,column:58}},type:"cond-expr",locations:[{start:{line:112,column:41},end:{line:112,column:42}},{start:{line:112,column:45},end:{line:112,column:58}}],line:112},13:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128},14:{loc:{start:{line:134,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:141,column:5}},{start:{line:136,column:11},end:{line:141,column:5}}],line:134},15:{loc:{start:{line:134,column:8},end:{line:134,column:70}},type:"binary-expr",locations:[{start:{line:134,column:8},end:{line:134,column:33}},{start:{line:134,column:37},end:{line:134,column:70}}],line:134},16:{loc:{start:{line:144,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:144,column:4},end:{line:148,column:5}},{start:{line:146,column:11},end:{line:148,column:5}}],line:144},17:{loc:{start:{line:153,column:4},end:{line:155,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:155,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:153},18:{loc:{start:{line:157,column:4},end:{line:205,column:5}},type:"if",locations:[{start:{line:157,column:4},end:{line:205,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},19:{loc:{start:{line:159,column:26},end:{line:159,column:77}},type:"cond-expr",locations:[{start:{line:159,column:56},end:{line:159,column:68}},{start:{line:159,column:71},end:{line:159,column:77}}],line:159},20:{loc:{start:{line:161,column:26},end:{line:161,column:79}},type:"cond-expr",locations:[{start:{line:161,column:56},end:{line:161,column:69}},{start:{line:161,column:72},end:{line:161,column:79}}],line:161},21:{loc:{start:{line:171,column:8},end:{line:175,column:9}},type:"if",locations:[{start:{line:171,column:8},end:{line:175,column:9}},{start:{line:173,column:15},end:{line:175,column:9}}],line:171},22:{loc:{start:{line:177,column:8},end:{line:188,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:188,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},23:{loc:{start:{line:225,column:8},end:{line:240,column:9}},type:"binary-expr",locations:[{start:{line:225,column:8},end:{line:225,column:45}},{start:{line:225,column:65},end:{line:240,column:9}}],line:225},24:{loc:{start:{line:256,column:8},end:{line:271,column:9}},type:"binary-expr",locations:[{start:{line:256,column:8},end:{line:256,column:18}},{start:{line:256,column:38},end:{line:271,column:9}}],line:256},25:{loc:{start:{line:272,column:8},end:{line:280,column:15}},type:"binary-expr",locations:[{start:{line:272,column:8},end:{line:272,column:18}},{start:{line:272,column:38},end:{line:280,column:15}}],line:272},26:{loc:{start:{line:282,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:282,column:10},end:{line:282,column:20}},{start:{line:282,column:40},end:{line:292,column:11}}],line:282}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAuO8B,cA8Bf,YA9Be;AAvO9B,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAC7B,SAAQ,sBAAqB;AAC7B,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA+B,uBAAuB;AAEtD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAK7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1f2034e8330e69a4f4de946d81cea8ff55472f7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return $t=function(){return s},s}$t();function zV(n,e){$t().f[0]++;let t;return $t().s[0]++,$t().b[1][0]++,n.value&&($t().b[1][1]++,n.value.stops)?($t().b[0][0]++,$t().s[1]++,n.value.stops.forEach((i,r)=>{$t().f[1]++,$t().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,r)?$t().b[2][1]++:($t().b[2][0]++,$t().s[3]++,t?$t().b[3][1]++:($t().b[3][0]++,$t().s[4]++,t={...e}),$t().s[5]++,t[r]=Ex("stop-"))})):$t().b[0][1]++,$t().s[6]++,t}class t9e extends En.Component{state=($t().s[7]++,{refs:{}});componentDidMount(){$t().f[2]++;const e=($t().s[8]++,zV(this.props,this.state));$t().s[9]++,e?($t().b[4][0]++,$t().s[10]++,this.setState({refs:e})):$t().b[4][1]++}static getDerivedStateFromProps(e,t){$t().f[3]++;const i=($t().s[11]++,zV(e,t));return $t().s[12]++,i?($t().b[5][0]++,$t().s[13]++,{refs:i}):($t().b[5][1]++,$t().s[14]++,null)}getFieldFunctionType(e){return $t().f[4]++,$t().s[15]++,e.expression.interpolated?($t().b[6][0]++,$t().s[16]++,"exponential"):($t().b[6][1]++,$t().s[17]++,e.type==="number"?($t().b[7][0]++,$t().s[18]++,"interval"):($t().b[7][1]++,$t().s[19]++,"categorical"))}getDataFunctionTypes(e){return $t().f[5]++,$t().s[20]++,e.expression.interpolated?($t().b[8][0]++,$t().s[21]++,["interpolate","categorical","interval","exponential","identity"]):($t().b[8][1]++,$t().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){$t().f[6]++;const t=($t().s[23]++,e.map((r,o)=>($t().f[7]++,$t().s[24]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>($t().f[8]++,$t().s[25]++,doe(r.data[0].zoom,o.data[0].zoom)))),i=($t().s[26]++,{});return $t().s[27]++,t.forEach((r,o)=>{$t().f[9]++,$t().s[28]++,i[o]=r.ref}),$t().s[29]++,this.setState({refs:i}),$t().s[30]++,t.map(r=>($t().f[10]++,$t().s[31]++,r.data))}onChange=($t().s[32]++,(e,t)=>{if($t().f[11]++,$t().s[33]++,t.type==="identity")$t().b[9][0]++,$t().s[34]++,t={type:t.type,property:t.property};else{$t().b[9][1]++;const i=($t().s[35]++,t.type==="categorical"?($t().b[10][0]++,""):($t().b[10][1]++,0));$t().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:i},np(this.props.fieldSpec)],[{zoom:10,value:i},np(this.props.fieldSpec)]],...t}}$t().s[37]++,this.props.onChange(e,t)});changeStop(e,t,i){$t().f[12]++;const r=($t().s[38]++,$t().b[11][0]++,this.props.value?.stops.slice(0)||($t().b[11][1]++,[]));$t().s[39]++,r[e]=[{value:t.value,zoom:t.zoom===void 0?($t().b[12][0]++,0):($t().b[12][1]++,t.zoom)},i];const o=($t().s[40]++,this.orderStopsByZoom(r)),s=($t().s[41]++,{...this.props.value,stops:o});$t().s[42]++,this.onChange(this.props.fieldName,s)}changeBase(e){$t().f[13]++;const t=($t().s[43]++,{...this.props.value,base:e});$t().s[44]++,t.base===void 0?($t().b[13][0]++,$t().s[45]++,delete t.base):$t().b[13][1]++,$t().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){$t().f[14]++,$t().s[47]++,$t().b[15][0]++,e==="interpolate"&&($t().b[15][1]++,this.props.onChangeToZoomFunction)?($t().b[14][0]++,$t().s[48]++,this.props.onChangeToZoomFunction()):($t().b[14][1]++,$t().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){$t().f[15]++,$t().s[50]++,t?($t().b[16][0]++,$t().s[51]++,this.props.value[e]=t):($t().b[16][1]++,$t().s[52]++,delete this.props.value[e]),$t().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){$t().f[16]++;const e=($t().s[54]++,this.props.t);$t().s[55]++,typeof this.props.value?.type>"u"?($t().b[17][0]++,$t().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):$t().b[17][1]++;let t;return $t().s[57]++,this.props.value?.stops?($t().b[18][0]++,$t().s[58]++,t=this.props.value.stops.map((i,r)=>{$t().f[17]++;const o=($t().s[59]++,typeof i[0]=="object"?($t().b[19][0]++,i[0].zoom):($t().b[19][1]++,void 0)),s=($t().s[60]++,this.state.refs[r]),a=($t().s[61]++,typeof i[0]=="object"?($t().b[20][0]++,i[0].value):($t().b[20][1]++,i[0])),c=($t().s[62]++,i[1]),h=($t().s[63]++,te.jsx(foe,{onClick:this.props.onDeleteStop?.bind(this,r)})),m=($t().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:a,onChange:E=>($t().f[18]++,$t().s[65]++,this.changeStop(r,{zoom:o,value:E},c))});let v;$t().s[66]++,this.props.value?.type==="categorical"?($t().b[21][0]++,$t().s[67]++,v=te.jsx(xm,{...m})):($t().b[21][1]++,$t().s[68]++,v=te.jsx(m1,{...m}));let x=($t().s[69]++,null);return $t().s[70]++,o!==void 0?($t().b[22][0]++,$t().s[71]++,x=te.jsx("div",{children:te.jsx(m1,{"aria-label":"Zoom",value:o,onChange:E=>($t().f[19]++,$t().s[72]++,this.changeStop(r,{zoom:E,value:a},c)),min:0,max:22})})):$t().b[22][1]++,$t().s[73]++,te.jsxs("tr",{children:[te.jsx("td",{children:x}),te.jsx("td",{children:v}),te.jsx("td",{children:te.jsx(nx,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:c,onChange:(E,R)=>($t().f[20]++,$t().s[74]++,this.changeStop(r,{zoom:o,value:a},R))})}),te.jsx("td",{children:h})]},s)})):$t().b[18][1]++,$t().s[75]++,te.jsx("div",{className:"maputnik-data-spec-block",children:te.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[te.jsx("legend",{children:L6(this.props.fieldName)}),te.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[te.jsx(_s,{label:e("Function"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(rC,{value:this.props.value.type,onChange:i=>($t().f[21]++,$t().s[76]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),($t().b[23][0]++,this.props.value?.type!=="identity"&&($t().b[23][1]++,te.jsx(_s,{label:e("Base"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(nx,{fieldName:"base",fieldSpec:Zr.function.base,value:this.props.value?.base,onChange:(i,r)=>($t().f[22]++,$t().s[77]++,this.changeBase(r))})})},"base"))),te.jsx(_s,{label:"Property",children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(xm,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:i=>($t().f[23]++,$t().s[78]++,this.changeDataProperty("property",i))})})},"property"),($t().b[24][0]++,t&&($t().b[24][1]++,te.jsx(_s,{label:e("Default"),children:te.jsx(nx,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(i,r)=>($t().f[24]++,$t().s[79]++,this.changeDataProperty("default",r))})},"default"))),($t().b[25][0]++,t&&($t().b[25][1]++,te.jsx("div",{className:"maputnik-function-stop",children:te.jsxs("table",{className:"maputnik-function-stop-table",children:[te.jsx("caption",{children:e("Stops")}),te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{children:e("Zoom")}),te.jsx("th",{children:e("Input value")}),te.jsx("th",{rowSpan:2,children:e("Output value")})]})}),te.jsx("tbody",{children:t})]})}))),te.jsxs("div",{className:"maputnik-toolbox",children:[($t().b[26][0]++,t&&($t().b[26][1]++,te.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[te.jsx(U6,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}))),te.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[te.jsx(I4,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}}const n9e=($t().s[80]++,Fo()(t9e));function Gn(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="374899057a1493811ae396622fb1b276448ec163",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:17,column:16},end:{line:17,column:18}},1:{start:{line:18,column:2},end:{line:29,column:3}},2:{start:{line:19,column:4},end:{line:28,column:7}},3:{start:{line:20,column:6},end:{line:27,column:7}},4:{start:{line:21,column:8},end:{line:23,column:9}},5:{start:{line:22,column:10},end:{line:22,column:33}},6:{start:{line:24,column:8},end:{line:24,column:39}},7:{start:{line:26,column:8},end:{line:26,column:39}},8:{start:{line:30,column:2},end:{line:30,column:17}},9:{start:{line:33,column:24},end:{line:35,column:3}},10:{start:{line:36,column:10},end:{line:38,column:3}},11:{start:{line:40,column:20},end:{line:40,column:55}},12:{start:{line:41,column:4},end:{line:45,column:5}},13:{start:{line:42,column:6},end:{line:44,column:9}},14:{start:{line:48,column:20},end:{line:48,column:45}},15:{start:{line:49,column:4},end:{line:53,column:5}},16:{start:{line:50,column:6},end:{line:52,column:8}},17:{start:{line:54,column:4},end:{line:54,column:16}},18:{start:{line:58,column:26},end:{line:63,column:60}},19:{start:{line:59,column:6},end:{line:62,column:8}},20:{start:{line:63,column:22},end:{line:63,column:59}},21:{start:{line:64,column:20},end:{line:64,column:22}},22:{start:{line:65,column:4},end:{line:67,column:7}},23:{start:{line:66,column:6},end:{line:66,column:30}},24:{start:{line:68,column:4},end:{line:70,column:7}},25:{start:{line:71,column:4},end:{line:71,column:50}},26:{start:{line:71,column:39},end:{line:71,column:48}},27:{start:{line:74,column:18},end:{line:74,column:49}},28:{start:{line:75,column:4},end:{line:75,column:41}},29:{start:{line:76,column:25},end:{line:76,column:53}},30:{start:{line:77,column:25},end:{line:80,column:5}},31:{start:{line:81,column:4},end:{line:81,column:60}},32:{start:{line:84,column:25},end:{line:87,column:5}},33:{start:{line:88,column:4},end:{line:90,column:5}},34:{start:{line:89,column:6},end:{line:89,column:34}},35:{start:{line:91,column:4},end:{line:91,column:60}},36:{start:{line:93,column:19},end:{line:97,column:3}},37:{start:{line:94,column:4},end:{line:96,column:5}},38:{start:{line:95,column:6},end:{line:95,column:46}},39:{start:{line:99,column:14},end:{line:99,column:26}},40:{start:{line:100,column:23},end:{line:133,column:6}},41:{start:{line:101,column:24},end:{line:101,column:31}},42:{start:{line:102,column:20},end:{line:102,column:27}},43:{start:{line:103,column:44},end:{line:103,column:120}},44:{start:{line:104,column:6},end:{line:132,column:8}},45:{start:{line:113,column:43},end:{line:113,column:87}},46:{start:{line:125,column:43},end:{line:125,column:88}},47:{start:{line:134,column:4},end:{line:200,column:12}},48:{start:{line:145,column:39},end:{line:145,column:67}},49:{start:{line:162,column:43},end:{line:162,column:68}},50:{start:{line:203,column:4},end:{line:207,column:5}},51:{start:{line:204,column:6},end:{line:204,column:83}},52:{start:{line:206,column:6},end:{line:206,column:29}},53:{start:{line:210,column:21},end:{line:210,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:35},end:{line:31,column:1}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:45},end:{line:28,column:5}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:22},end:{line:46,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:48},end:{line:55,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:26},end:{line:72,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:58,column:36},end:{line:58,column:37}},loc:{start:{line:58,column:51},end:{line:63,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:63,column:12},end:{line:63,column:13}},loc:{start:{line:63,column:22},end:{line:63,column:59}},line:63},7:{name:"(anonymous_7)",decl:{start:{line:65,column:26},end:{line:65,column:27}},loc:{start:{line:65,column:41},end:{line:67,column:5}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:71,column:29},end:{line:71,column:30}},loc:{start:{line:71,column:39},end:{line:71,column:48}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:45},end:{line:82,column:3}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:92,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:93,column:19},end:{line:93,column:20}},loc:{start:{line:93,column:29},end:{line:97,column:3}},line:93},12:{name:"(anonymous_12)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:11},end:{line:201,column:3}},line:98},13:{name:"(anonymous_13)",decl:{start:{line:100,column:51},end:{line:100,column:52}},loc:{start:{line:100,column:66},end:{line:133,column:5}},line:100},14:{name:"(anonymous_14)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:43},end:{line:113,column:87}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:125,column:26},end:{line:125,column:27}},loc:{start:{line:125,column:43},end:{line:125,column:88}},line:125},16:{name:"(anonymous_16)",decl:{start:{line:145,column:26},end:{line:145,column:27}},loc:{start:{line:145,column:39},end:{line:145,column:67}},line:145},17:{name:"(anonymous_17)",decl:{start:{line:162,column:26},end:{line:162,column:27}},loc:{start:{line:162,column:43},end:{line:162,column:68}},line:162},18:{name:"(anonymous_18)",decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:34},end:{line:208,column:3}},line:202}},branchMap:{0:{loc:{start:{line:18,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:18,column:6},end:{line:18,column:38}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:17}},{start:{line:18,column:21},end:{line:18,column:38}}],line:18},2:{loc:{start:{line:20,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:27,column:7}},{start:{line:25,column:13},end:{line:27,column:7}}],line:20},3:{loc:{start:{line:21,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:21,column:8},end:{line:23,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:41,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},6:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},7:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:67}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:34},end:{line:94,column:67}}],line:94},9:{loc:{start:{line:203,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:203,column:4},end:{line:207,column:5}},{start:{line:205,column:11},end:{line:207,column:5}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AAiK4B,cACf,YADe;AAjK5B,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,OAAO,YAAY;AACnB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAS5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"374899057a1493811ae396622fb1b276448ec163"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Gn=function(){return s},s}Gn();function FV(n,e){Gn().f[0]++;let t=(Gn().s[0]++,{});return Gn().s[1]++,Gn().b[1][0]++,n.value&&(Gn().b[1][1]++,n.value.stops)?(Gn().b[0][0]++,Gn().s[2]++,n.value.stops.forEach((i,r)=>{Gn().f[1]++,Gn().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,r)?(Gn().b[2][0]++,Gn().s[4]++,t?Gn().b[3][1]++:(Gn().b[3][0]++,Gn().s[5]++,t={...e}),Gn().s[6]++,t[r]=Ex("stop-")):(Gn().b[2][1]++,Gn().s[7]++,t[r]=e.refs[r])})):Gn().b[0][1]++,Gn().s[8]++,t}class i9e extends En.Component{static defaultProps=(Gn().s[9]++,{errors:{}});state=(Gn().s[10]++,{refs:{}});componentDidMount(){Gn().f[2]++;const e=(Gn().s[11]++,FV(this.props,this.state));Gn().s[12]++,e?(Gn().b[4][0]++,Gn().s[13]++,this.setState({refs:e})):Gn().b[4][1]++}static getDerivedStateFromProps(e,t){Gn().f[3]++;const i=(Gn().s[14]++,FV(e,t));return Gn().s[15]++,i?(Gn().b[5][0]++,Gn().s[16]++,{refs:i}):(Gn().b[5][1]++,Gn().s[17]++,null)}orderStopsByZoom(e){Gn().f[4]++;const t=(Gn().s[18]++,e.map((r,o)=>(Gn().f[5]++,Gn().s[19]++,{ref:this.state.refs[o],data:r})).sort((r,o)=>(Gn().f[6]++,Gn().s[20]++,doe(r.data[0],o.data[0])))),i=(Gn().s[21]++,{});return Gn().s[22]++,t.forEach((r,o)=>{Gn().f[7]++,Gn().s[23]++,i[o]=r.ref}),Gn().s[24]++,this.setState({refs:i}),Gn().s[25]++,t.map(r=>(Gn().f[8]++,Gn().s[26]++,r.data))}changeZoomStop(e,t,i){Gn().f[9]++;const r=(Gn().s[27]++,this.props.value.stops.slice(0));Gn().s[28]++,r[e]=[t,i];const o=(Gn().s[29]++,this.orderStopsByZoom(r)),s=(Gn().s[30]++,{...this.props.value,stops:o});Gn().s[31]++,this.props.onChange(this.props.fieldName,s)}changeBase(e){Gn().f[10]++;const t=(Gn().s[32]++,{...this.props.value,base:e});Gn().s[33]++,t.base===void 0?(Gn().b[6][0]++,Gn().s[34]++,delete t.base):Gn().b[6][1]++,Gn().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(Gn().s[36]++,e=>{Gn().f[11]++,Gn().s[37]++,Gn().b[8][0]++,e!=="interpolate"&&(Gn().b[8][1]++,this.props.onChangeToDataFunction)?(Gn().b[7][0]++,Gn().s[38]++,this.props.onChangeToDataFunction(e)):Gn().b[7][1]++});render(){Gn().f[12]++;const e=(Gn().s[39]++,this.props.t),t=(Gn().s[40]++,this.props.value?.stops.map((i,r)=>{Gn().f[13]++;const o=(Gn().s[41]++,i[0]),s=(Gn().s[42]++,i[1]),a=(Gn().s[43]++,te.jsx(foe,{onClick:this.props.onDeleteStop?.bind(this,r)}));return Gn().s[44]++,te.jsxs("tr",{children:[te.jsx("td",{children:te.jsx(m1,{"aria-label":e("Zoom"),value:o,onChange:c=>(Gn().f[14]++,Gn().s[45]++,this.changeZoomStop(r,c,s)),min:0,max:22})}),te.jsx("td",{children:te.jsx(nx,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:s,onChange:(c,h)=>(Gn().f[15]++,Gn().s[46]++,this.changeZoomStop(r,o,h))})}),te.jsx("td",{children:a})]},`${i[0]}-${i[1]}`)}));return Gn().s[47]++,te.jsx("div",{className:"maputnik-data-spec-block",children:te.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[te.jsx("legend",{children:L6(this.props.fieldName)}),te.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[te.jsx(_s,{label:e("Function"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(rC,{value:"interpolate",onChange:i=>(Gn().f[16]++,Gn().s[48]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),te.jsx(_s,{label:e("Base"),children:te.jsx("div",{className:"maputnik-data-spec-property-input",children:te.jsx(nx,{fieldName:"base",fieldSpec:Zr.function.base,value:this.props.value?.base,onChange:(i,r)=>(Gn().f[17]++,Gn().s[49]++,this.changeBase(r))})})}),te.jsx("div",{className:"maputnik-function-stop",children:te.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[te.jsx("caption",{children:e("Stops")}),te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{children:e("Zoom")}),te.jsx("th",{rowSpan:2,children:e("Output value")})]})}),te.jsx("tbody",{children:t})]})}),te.jsxs("div",{className:"maputnik-toolbox",children:[te.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[te.jsx(U6,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}),te.jsxs(Zs,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[te.jsx(I4,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return Gn().f[18]++,Gn().s[50]++,e["property-type"]==="data-driven"?(Gn().b[9][0]++,Gn().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(Gn().b[9][1]++,Gn().s[52]++,["interpolate"])}}const r9e=(Gn().s[53]++,Fo()(i9e));function ut(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="cec93a709e0799aecc929100cb853febe363652d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:62,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:62,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:62,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:62,column:3}},20:{start:{line:49,column:4},end:{line:49,column:19}},21:{start:{line:50,column:9},end:{line:62,column:3}},22:{start:{line:51,column:4},end:{line:51,column:19}},23:{start:{line:52,column:9},end:{line:62,column:3}},24:{start:{line:53,column:4},end:{line:53,column:19}},25:{start:{line:54,column:9},end:{line:62,column:3}},26:{start:{line:55,column:4},end:{line:55,column:19}},27:{start:{line:56,column:9},end:{line:62,column:3}},28:{start:{line:57,column:4},end:{line:57,column:27}},29:{start:{line:58,column:9},end:{line:62,column:3}},30:{start:{line:59,column:4},end:{line:59,column:27}},31:{start:{line:61,column:4},end:{line:61,column:24}},32:{start:{line:64,column:22},end:{line:302,column:1}},33:{start:{line:65,column:34},end:{line:67,column:3}},34:{start:{line:68,column:36},end:{line:68,column:57}},35:{start:{line:69,column:2},end:{line:73,column:48}},36:{start:{line:70,column:4},end:{line:72,column:5}},37:{start:{line:71,column:6},end:{line:71,column:61}},38:{start:{line:74,column:31},end:{line:82,column:3}},39:{start:{line:75,column:4},end:{line:77,column:5}},40:{start:{line:76,column:6},end:{line:76,column:27}},41:{start:{line:78,column:4},end:{line:80,column:5}},42:{start:{line:79,column:6},end:{line:79,column:24}},43:{start:{line:81,column:4},end:{line:81,column:25}},44:{start:{line:83,column:18},end:{line:99,column:3}},45:{start:{line:84,column:18},end:{line:84,column:44}},46:{start:{line:85,column:21},end:{line:85,column:44}},47:{start:{line:86,column:4},end:{line:93,column:5}},48:{start:{line:87,column:6},end:{line:90,column:9}},49:{start:{line:92,column:6},end:{line:92,column:49}},50:{start:{line:94,column:25},end:{line:97,column:5}},51:{start:{line:98,column:4},end:{line:98,column:50}},52:{start:{line:100,column:27},end:{line:104,column:3}},53:{start:{line:101,column:37},end:{line:101,column:42}},54:{start:{line:102,column:4},end:{line:102,column:49}},55:{start:{line:103,column:4},end:{line:103,column:25}},56:{start:{line:105,column:21},end:{line:116,column:3}},57:{start:{line:106,column:18},end:{line:106,column:44}},58:{start:{line:107,column:4},end:{line:107,column:29}},59:{start:{line:108,column:23},end:{line:111,column:5}},60:{start:{line:112,column:4},end:{line:114,column:5}},61:{start:{line:113,column:6},end:{line:113,column:33}},62:{start:{line:115,column:4},end:{line:115,column:50}},63:{start:{line:117,column:27},end:{line:146,column:3}},64:{start:{line:118,column:22},end:{line:118,column:27}},65:{start:{line:120,column:4},end:{line:144,column:5}},66:{start:{line:121,column:6},end:{line:136,column:7}},67:{start:{line:122,column:8},end:{line:127,column:10}},68:{start:{line:125,column:12},end:{line:125,column:83}},69:{start:{line:129,column:8},end:{line:135,column:10}},70:{start:{line:138,column:6},end:{line:143,column:8}},71:{start:{line:145,column:4},end:{line:145,column:46}},72:{start:{line:147,column:25},end:{line:159,column:3}},73:{start:{line:148,column:33},end:{line:148,column:38}},74:{start:{line:149,column:4},end:{line:158,column:5}},75:{start:{line:150,column:6},end:{line:153,column:9}},76:{start:{line:154,column:6},end:{line:154,column:27}},77:{start:{line:155,column:11},end:{line:158,column:5}},78:{start:{line:156,column:6},end:{line:156,column:42}},79:{start:{line:157,column:6},end:{line:157,column:27}},80:{start:{line:160,column:18},end:{line:163,column:3}},81:{start:{line:161,column:33},end:{line:161,column:38}},82:{start:{line:162,column:4},end:{line:162,column:140}},83:{start:{line:164,column:25},end:{line:175,column:3}},84:{start:{line:165,column:33},end:{line:165,column:38}},85:{start:{line:167,column:4},end:{line:173,column:5}},86:{start:{line:168,column:6},end:{line:168,column:67}},87:{start:{line:169,column:11},end:{line:173,column:5}},88:{start:{line:170,column:6},end:{line:170,column:43}},89:{start:{line:172,column:6},end:{line:172,column:65}},90:{start:{line:174,column:4},end:{line:174,column:48}},91:{start:{line:176,column:27},end:{line:214,column:3}},92:{start:{line:177,column:25},end:{line:177,column:62}},93:{start:{line:178,column:22},end:{line:178,column:61}},94:{start:{line:179,column:22},end:{line:179,column:27}},95:{start:{line:181,column:4},end:{line:212,column:5}},96:{start:{line:182,column:6},end:{line:201,column:7}},97:{start:{line:183,column:8},end:{line:190,column:10}},98:{start:{line:188,column:12},end:{line:188,column:106}},99:{start:{line:192,column:8},end:{line:200,column:10}},100:{start:{line:203,column:6},end:{line:211,column:8}},101:{start:{line:213,column:4},end:{line:213,column:46}},102:{start:{line:215,column:32},end:{line:226,column:3}},103:{start:{line:216,column:23},end:{line:224,column:5}},104:{start:{line:225,column:4},end:{line:225,column:48}},105:{start:{line:227,column:24},end:{line:229,column:3}},106:{start:{line:228,column:4},end:{line:228,column:23}},107:{start:{line:230,column:26},end:{line:232,column:3}},108:{start:{line:231,column:4},end:{line:231,column:24}},109:{start:{line:233,column:20},end:{line:233,column:120}},110:{start:{line:235,column:2},end:{line:300,column:3}},111:{start:{line:236,column:4},end:{line:251,column:6}},112:{start:{line:252,column:9},end:{line:300,column:3}},113:{start:{line:253,column:4},end:{line:267,column:6}},114:{start:{line:268,column:9},end:{line:300,column:3}},115:{start:{line:269,column:4},end:{line:283,column:6}},116:{start:{line:285,column:4},end:{line:299,column:6}},117:{start:{line:301,column:2},end:{line:301,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:63,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:33},end:{line:302,column:1}},line:64},12:{name:"(anonymous_12)",decl:{start:{line:69,column:18},end:{line:69,column:19}},loc:{start:{line:69,column:24},end:{line:73,column:3}},line:69},13:{name:"(anonymous_13)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:46},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:18},end:{line:83,column:19}},loc:{start:{line:83,column:24},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:27},end:{line:100,column:28}},loc:{start:{line:100,column:33},end:{line:104,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:34},end:{line:116,column:3}},line:105},17:{name:"(anonymous_17)",decl:{start:{line:117,column:27},end:{line:117,column:28}},loc:{start:{line:117,column:33},end:{line:146,column:3}},line:117},18:{name:"(anonymous_18)",decl:{start:{line:124,column:33},end:{line:124,column:34}},loc:{start:{line:124,column:43},end:{line:126,column:11}},line:124},19:{name:"(anonymous_19)",decl:{start:{line:147,column:25},end:{line:147,column:26}},loc:{start:{line:147,column:31},end:{line:159,column:3}},line:147},20:{name:"(anonymous_20)",decl:{start:{line:160,column:18},end:{line:160,column:19}},loc:{start:{line:160,column:24},end:{line:163,column:3}},line:160},21:{name:"(anonymous_21)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:175,column:3}},line:164},22:{name:"(anonymous_22)",decl:{start:{line:176,column:27},end:{line:176,column:28}},loc:{start:{line:176,column:33},end:{line:214,column:3}},line:176},23:{name:"(anonymous_23)",decl:{start:{line:187,column:33},end:{line:187,column:34}},loc:{start:{line:187,column:43},end:{line:189,column:11}},line:187},24:{name:"(anonymous_24)",decl:{start:{line:215,column:32},end:{line:215,column:33}},loc:{start:{line:215,column:38},end:{line:226,column:3}},line:215},25:{name:"(anonymous_25)",decl:{start:{line:227,column:24},end:{line:227,column:25}},loc:{start:{line:227,column:30},end:{line:229,column:3}},line:227},26:{name:"(anonymous_26)",decl:{start:{line:230,column:26},end:{line:230,column:27}},loc:{start:{line:230,column:32},end:{line:232,column:3}},line:230}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:62,column:3}},{start:{line:44,column:9},end:{line:62,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:62,column:3}},{start:{line:46,column:9},end:{line:62,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:62,column:3}},{start:{line:48,column:9},end:{line:62,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:62,column:3}},{start:{line:50,column:9},end:{line:62,column:3}}],line:48},15:{loc:{start:{line:48,column:13},end:{line:48,column:75}},type:"binary-expr",locations:[{start:{line:48,column:13},end:{line:48,column:45}},{start:{line:48,column:49},end:{line:48,column:75}}],line:48},16:{loc:{start:{line:50,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:62,column:3}},{start:{line:52,column:9},end:{line:62,column:3}}],line:50},17:{loc:{start:{line:52,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:62,column:3}},{start:{line:54,column:9},end:{line:62,column:3}}],line:52},18:{loc:{start:{line:54,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:54,column:9},end:{line:62,column:3}},{start:{line:56,column:9},end:{line:62,column:3}}],line:54},19:{loc:{start:{line:56,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:56,column:9},end:{line:62,column:3}},{start:{line:58,column:9},end:{line:62,column:3}}],line:56},20:{loc:{start:{line:58,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:58,column:9},end:{line:62,column:3}},{start:{line:60,column:9},end:{line:62,column:3}}],line:58},21:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},22:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},23:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},24:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},25:{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},26:{loc:{start:{line:120,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:120,column:4},end:{line:144,column:5}},{start:{line:137,column:11},end:{line:144,column:5}}],line:120},27:{loc:{start:{line:121,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:136,column:7}},{start:{line:128,column:13},end:{line:136,column:7}}],line:121},28:{loc:{start:{line:125,column:34},end:{line:125,column:81}},type:"binary-expr",locations:[{start:{line:125,column:34},end:{line:125,column:41}},{start:{line:125,column:45},end:{line:125,column:81}}],line:125},29:{loc:{start:{line:140,column:14},end:{line:140,column:59}},type:"binary-expr",locations:[{start:{line:140,column:14},end:{line:140,column:19}},{start:{line:140,column:23},end:{line:140,column:59}}],line:140},30:{loc:{start:{line:141,column:15},end:{line:141,column:60}},type:"binary-expr",locations:[{start:{line:141,column:15},end:{line:141,column:20}},{start:{line:141,column:24},end:{line:141,column:60}}],line:141},31:{loc:{start:{line:149,column:4},end:{line:158,column:5}},type:"if",locations:[{start:{line:149,column:4},end:{line:158,column:5}},{start:{line:155,column:11},end:{line:158,column:5}}],line:149},32:{loc:{start:{line:155,column:11},end:{line:158,column:5}},type:"if",locations:[{start:{line:155,column:11},end:{line:158,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:155},33:{loc:{start:{line:162,column:11},end:{line:162,column:139}},type:"binary-expr",locations:[{start:{line:162,column:11},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:63}},{start:{line:162,column:67},end:{line:162,column:85}},{start:{line:162,column:89},end:{line:162,column:109}},{start:{line:162,column:113},end:{line:162,column:139}}],line:162},34:{loc:{start:{line:167,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:167,column:4},end:{line:173,column:5}},{start:{line:169,column:11},end:{line:173,column:5}}],line:167},35:{loc:{start:{line:167,column:8},end:{line:167,column:53}},type:"binary-expr",locations:[{start:{line:167,column:8},end:{line:167,column:33}},{start:{line:167,column:37},end:{line:167,column:53}}],line:167},36:{loc:{start:{line:169,column:11},end:{line:173,column:5}},type:"if",locations:[{start:{line:169,column:11},end:{line:173,column:5}},{start:{line:171,column:11},end:{line:173,column:5}}],line:169},37:{loc:{start:{line:172,column:31},end:{line:172,column:63}},type:"binary-expr",locations:[{start:{line:172,column:31},end:{line:172,column:36}},{start:{line:172,column:40},end:{line:172,column:63}}],line:172},38:{loc:{start:{line:178,column:22},end:{line:178,column:61}},type:"cond-expr",locations:[{start:{line:178,column:55},end:{line:178,column:57}},{start:{line:178,column:60},end:{line:178,column:61}}],line:178},39:{loc:{start:{line:181,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:181,column:4},end:{line:212,column:5}},{start:{line:202,column:11},end:{line:212,column:5}}],line:181},40:{loc:{start:{line:182,column:6},end:{line:201,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:201,column:7}},{start:{line:191,column:13},end:{line:201,column:7}}],line:182},41:{loc:{start:{line:188,column:57},end:{line:188,column:104}},type:"binary-expr",locations:[{start:{line:188,column:57},end:{line:188,column:64}},{start:{line:188,column:68},end:{line:188,column:104}}],line:188},42:{loc:{start:{line:208,column:42},end:{line:208,column:93}},type:"binary-expr",locations:[{start:{line:208,column:42},end:{line:208,column:53}},{start:{line:208,column:57},end:{line:208,column:93}}],line:208},43:{loc:{start:{line:209,column:43},end:{line:209,column:94}},type:"binary-expr",locations:[{start:{line:209,column:43},end:{line:209,column:54}},{start:{line:209,column:58},end:{line:209,column:94}}],line:209},44:{loc:{start:{line:233,column:20},end:{line:233,column:120}},type:"cond-expr",locations:[{start:{line:233,column:62},end:{line:233,column:89}},{start:{line:233,column:92},end:{line:233,column:120}}],line:233},45:{loc:{start:{line:235,column:2},end:{line:300,column:3}},type:"if",locations:[{start:{line:235,column:2},end:{line:300,column:3}},{start:{line:252,column:9},end:{line:300,column:3}}],line:235},46:{loc:{start:{line:252,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:252,column:9},end:{line:300,column:3}},{start:{line:268,column:9},end:{line:300,column:3}}],line:252},47:{loc:{start:{line:268,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:268,column:9},end:{line:300,column:3}},{start:{line:284,column:9},end:{line:300,column:3}}],line:268}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0,0,0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAiVM;AAjVN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAAiC;AACxC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAIlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,iBAAiB,oBAAoB,KAAK,GAAG;AACvE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,cAAc;AACxC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW;AACrC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,kCAAkC;AAC5D,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,wBAAwB,MAAM;AAClC,UAAM,aAAa;AAAA,MACjB;AAAA,MACA,CAAC,QAAQ;AAAA,MACT,CAAC,WAAW;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA,QACnB,kBAAkB;AAAA;AAAA,IACpB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cec93a709e0799aecc929100cb853febe363652d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ut=function(){return s},s}ut();function jV(n){return ut().f[0]++,ut().s[0]++,ut().b[0][0]++,Array.isArray(n)&&(ut().b[0][1]++,n.length===2)&&(ut().b[0][2]++,n[0]==="literal")}function NV(n){return ut().f[1]++,ut().s[1]++,ut().b[1][0]++,Array.isArray(n)&&(ut().b[1][1]++,n.length===2)&&(ut().b[1][2]++,n[0]==="get")}function o9e(n){return ut().f[2]++,ut().s[2]++,ut().b[2][0]++,typeof n=="object"&&(ut().b[2][1]++,n.stops)&&(ut().b[2][2]++,typeof n.property>"u")&&(ut().b[2][3]++,Array.isArray(n.stops))&&(ut().b[2][4]++,n.stops.length>1)&&(ut().b[2][5]++,n.stops.every(e=>(ut().f[3]++,ut().s[3]++,ut().b[3][0]++,Array.isArray(e)&&(ut().b[3][1]++,e.length===2))))}function poe(n){return ut().f[4]++,ut().s[4]++,ut().b[4][0]++,typeof n=="object"&&(ut().b[4][1]++,n.type==="identity")&&(ut().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function s9e(n){return ut().f[5]++,ut().s[5]++,ut().b[5][0]++,typeof n=="object"&&(ut().b[5][1]++,n.stops)&&(ut().b[5][2]++,typeof n.property<"u")&&(ut().b[5][3]++,n.stops.length>1)&&(ut().b[5][4]++,Array.isArray(n.stops))&&(ut().b[5][5]++,n.stops.every(e=>(ut().f[6]++,ut().s[6]++,ut().b[6][0]++,Array.isArray(e)&&(ut().b[6][1]++,e.length===2)&&(ut().b[6][2]++,typeof e[0]=="object"))))}function a9e(n){return ut().f[7]++,ut().s[7]++,ut().b[7][0]++,poe(n)||(ut().b[7][1]++,s9e(n))}function PU(n){ut().f[8]++;const e=(ut().s[8]++,["string","boolean","number"]);return ut().s[9]++,e.includes(typeof n)}function GV(n){return ut().f[9]++,ut().s[10]++,Array.isArray(n)?(ut().b[8][0]++,ut().s[11]++,n.every(PU)):(ut().b[8][1]++,ut().s[12]++,!1)}function QV(n,e=(ut().b[9][0]++,{})){return ut().f[10]++,ut().s[13]++,n===void 0?(ut().b[10][0]++,ut().s[14]++,"value"):(ut().b[10][1]++,ut().s[15]++,PU(n)?(ut().b[11][0]++,ut().s[16]++,"value"):(ut().b[11][1]++,ut().s[17]++,ut().b[13][0]++,e.type==="array"&&(ut().b[13][1]++,GV(n))?(ut().b[12][0]++,ut().s[18]++,"value"):(ut().b[12][1]++,ut().s[19]++,ut().b[15][0]++,e.type==="numberArray"&&(ut().b[15][1]++,GV(n))?(ut().b[14][0]++,ut().s[20]++,"value"):(ut().b[14][1]++,ut().s[21]++,e.type==="colorArray"?(ut().b[16][0]++,ut().s[22]++,"value"):(ut().b[16][1]++,ut().s[23]++,e.type==="padding"?(ut().b[17][0]++,ut().s[24]++,"value"):(ut().b[17][1]++,ut().s[25]++,e.type==="variableAnchorOffsetCollection"?(ut().b[18][0]++,ut().s[26]++,"value"):(ut().b[18][1]++,ut().s[27]++,o9e(n)?(ut().b[19][0]++,ut().s[28]++,"zoom_function"):(ut().b[19][1]++,ut().s[29]++,a9e(n)?(ut().b[20][0]++,ut().s[30]++,"data_function"):(ut().b[20][1]++,ut().s[31]++,"expression")))))))))}ut().s[32]++;const l9e=n=>{ut().f[11]++;const[e,t]=(ut().s[33]++,En.useState(QV(n.value,n.fieldSpec))),[i,r]=(ut().s[34]++,En.useState(!1));ut().s[35]++,En.useEffect(()=>{ut().f[12]++,ut().s[36]++,i?ut().b[21][1]++:(ut().b[21][0]++,ut().s[37]++,t(QV(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,i]),ut().s[38]++;const o=H=>(ut().f[13]++,ut().s[39]++,H.expression.interpolated?(ut().b[22][0]++,ut().s[40]++,"exponential"):(ut().b[22][1]++,ut().s[41]++,H.type==="number"?(ut().b[23][0]++,ut().s[42]++,"interval"):(ut().b[23][1]++,ut().s[43]++,"categorical")));ut().s[44]++;const s=()=>{ut().f[14]++;const H=(ut().s[45]++,n.value.stops.slice(0)),Z=(ut().s[46]++,H[H.length-1]);ut().s[47]++,typeof Z[0]=="object"?(ut().b[24][0]++,ut().s[48]++,H.push([{zoom:Z[0].zoom+1,value:Z[0].value},Z[1]])):(ut().b[24][1]++,ut().s[49]++,H.push([Z[0]+1,Z[1]]));const J=(ut().s[50]++,{...n.value,stops:H});ut().s[51]++,n.onChange(n.fieldName,J)};ut().s[52]++;const a=()=>{ut().f[15]++;const{fieldSpec:H,fieldName:Z}=(ut().s[53]++,n);ut().s[54]++,n.onChange(Z,H.default),ut().s[55]++,t("value")};ut().s[56]++;const c=H=>{ut().f[16]++;const Z=(ut().s[57]++,n.value.stops.slice(0));ut().s[58]++,Z.splice(H,1);let J=(ut().s[59]++,{...n.value,stops:Z});ut().s[60]++,Z.length===1?(ut().b[25][0]++,ut().s[61]++,J=Z[0][1]):ut().b[25][1]++,ut().s[62]++,n.onChange(n.fieldName,J)};ut().s[63]++;const h=()=>{ut().f[17]++;const{value:H}=(ut().s[64]++,n);let Z;ut().s[65]++,typeof H=="object"?(ut().b[26][0]++,ut().s[66]++,H.stops?(ut().b[27][0]++,ut().s[67]++,Z={base:H.base,stops:H.stops.map(J=>(ut().f[18]++,ut().s[68]++,[J[0].zoom,(ut().b[28][0]++,J[1]||(ut().b[28][1]++,np(n.fieldSpec)))]))}):(ut().b[27][1]++,ut().s[69]++,Z={base:H.base,stops:[[6,np(n.fieldSpec)],[10,np(n.fieldSpec)]]})):(ut().b[26][1]++,ut().s[70]++,Z={stops:[[6,(ut().b[29][0]++,H||(ut().b[29][1]++,np(n.fieldSpec)))],[10,(ut().b[30][0]++,H||(ut().b[30][1]++,np(n.fieldSpec)))]]}),ut().s[71]++,n.onChange(n.fieldName,Z)};ut().s[72]++;const m=()=>{ut().f[19]++;const{value:H,fieldName:Z}=(ut().s[73]++,n);ut().s[74]++,NV(H)?(ut().b[31][0]++,ut().s[75]++,n.onChange(Z,{type:"identity",property:H[1]}),ut().s[76]++,t("value")):(ut().b[31][1]++,ut().s[77]++,jV(H)?(ut().b[32][0]++,ut().s[78]++,n.onChange(Z,H[1]),ut().s[79]++,t("value")):ut().b[32][1]++)};ut().s[80]++;const v=()=>{ut().f[20]++;const{value:H,fieldSpec:Z}=(ut().s[81]++,n);return ut().s[82]++,ut().b[33][0]++,NV(H)||(ut().b[33][1]++,jV(H))||(ut().b[33][2]++,PU(H))||(ut().b[33][3]++,Array.isArray(H)&&(ut().b[33][4]++,Z.type==="array"))};ut().s[83]++;const x=()=>{ut().f[21]++;const{value:H,fieldSpec:Z}=(ut().s[84]++,n);let J;ut().s[85]++,ut().b[35][0]++,typeof H=="object"&&(ut().b[35][1]++,"stops"in H)?(ut().b[34][0]++,ut().s[86]++,J=bAe.convertFunction(H,Z)):(ut().b[34][1]++,ut().s[87]++,poe(H)?(ut().b[36][0]++,ut().s[88]++,J=["get",H.property]):(ut().b[36][1]++,ut().s[89]++,J=["literal",(ut().b[37][0]++,H||(ut().b[37][1]++,n.fieldSpec.default))])),ut().s[90]++,n.onChange(n.fieldName,J)};ut().s[91]++;const E=()=>{ut().f[22]++;const H=(ut().s[92]++,o(n.fieldSpec)),Z=(ut().s[93]++,H==="categorical"?(ut().b[38][0]++,""):(ut().b[38][1]++,0)),{value:J}=(ut().s[94]++,n);let $;ut().s[95]++,typeof J=="object"?(ut().b[39][0]++,ut().s[96]++,J.stops?(ut().b[40][0]++,ut().s[97]++,$={property:"",type:H,base:J.base,stops:J.stops.map(G=>(ut().f[23]++,ut().s[98]++,[{zoom:G[0],value:Z},(ut().b[41][0]++,G[1]||(ut().b[41][1]++,np(n.fieldSpec)))]))}):(ut().b[40][1]++,ut().s[99]++,$={property:"",type:H,base:J.base,stops:[[{zoom:6,value:Z},np(n.fieldSpec)],[{zoom:10,value:Z},np(n.fieldSpec)]]})):(ut().b[39][1]++,ut().s[100]++,$={property:"",type:H,base:J.base,stops:[[{zoom:6,value:Z},(ut().b[42][0]++,n.value||(ut().b[42][1]++,np(n.fieldSpec)))],[{zoom:10,value:Z},(ut().b[43][0]++,n.value||(ut().b[43][1]++,np(n.fieldSpec)))]]}),ut().s[101]++,n.onChange(n.fieldName,$)};ut().s[102]++;const R=()=>{ut().f[24]++;const H=(ut().s[103]++,["interpolate",["linear"],["elevation"],0,"black",2e3,"white"]);ut().s[104]++,n.onChange(n.fieldName,H)};ut().s[105]++;const P=()=>{ut().f[25]++,ut().s[106]++,r(!0)};ut().s[107]++;const z=()=>{ut().f[26]++,ut().s[108]++,r(!1)},Q=(ut().s[109]++,n.fieldSpec.default===n.value?(ut().b[44][0]++,"maputnik-default-property"):(ut().b[44][1]++,"maputnik-modified-property"));let Y;return ut().s[110]++,e==="expression"?(ut().b[45][0]++,ut().s[111]++,Y=te.jsx(Ire,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:v,onUndo:m,onDelete:a,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:P,onBlur:z})):(ut().b[45][1]++,ut().s[112]++,e==="zoom_function"?(ut().b[46][0]++,ut().s[113]++,Y=te.jsx(r9e,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToDataFunction:E,onExpressionClick:x})):(ut().b[46][1]++,ut().s[114]++,e==="data_function"?(ut().b[47][0]++,ut().s[115]++,Y=te.jsx(n9e,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:c,onAddStop:s,onChangeToZoomFunction:h,onExpressionClick:x})):(ut().b[47][1]++,ut().s[116]++,Y=te.jsx(JTe,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:h,onDataClick:E,onExpressionClick:x,onElevationClick:R})))),ut().s[117]++,te.jsx("div",{className:Q,"data-wd-key":"spec-field-container:"+n.fieldName,children:Y})};function Fr(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="2b5da791871b9b38760c659b15188ae0aee85eaa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:25,column:49}},11:{start:{line:28,column:21},end:{line:31,column:3}},12:{start:{line:29,column:18},end:{line:29,column:80}},13:{start:{line:30,column:4},end:{line:30,column:51}},14:{start:{line:33,column:23},end:{line:33,column:33}},15:{start:{line:34,column:19},end:{line:52,column:6}},16:{start:{line:35,column:24},end:{line:35,column:87}},17:{start:{line:36,column:20},end:{line:36,column:48}},18:{start:{line:37,column:21},end:{line:37,column:50}},19:{start:{line:38,column:25},end:{line:38,column:82}},20:{start:{line:39,column:24},end:{line:39,column:63}},21:{start:{line:40,column:6},end:{line:51,column:8}},22:{start:{line:53,column:4},end:{line:53,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:26,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:28,column:21},end:{line:28,column:22}},loc:{start:{line:28,column:45},end:{line:31,column:3}},line:28},3:{name:"(anonymous_3)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:11},end:{line:54,column:3}},line:32},4:{name:"(anonymous_4)",decl:{start:{line:34,column:46},end:{line:34,column:47}},loc:{start:{line:34,column:61},end:{line:52,column:5}},line:34}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:9},end:{line:25,column:48}},type:"cond-expr",locations:[{start:{line:25,column:30},end:{line:25,column:37}},{start:{line:25,column:40},end:{line:25,column:48}}],line:25},4:{loc:{start:{line:36,column:20},end:{line:36,column:48}},type:"binary-expr",locations:[{start:{line:36,column:20},end:{line:36,column:42}},{start:{line:36,column:46},end:{line:36,column:48}}],line:36},5:{loc:{start:{line:37,column:21},end:{line:37,column:50}},type:"binary-expr",locations:[{start:{line:37,column:21},end:{line:37,column:44}},{start:{line:37,column:48},end:{line:37,column:50}}],line:37},6:{loc:{start:{line:38,column:25},end:{line:38,column:82}},type:"cond-expr",locations:[{start:{line:38,column:46},end:{line:38,column:62}},{start:{line:38,column:65},end:{line:38,column:82}}],line:38},7:{loc:{start:{line:39,column:24},end:{line:39,column:63}},type:"cond-expr",locations:[{start:{line:39,column:45},end:{line:39,column:52}},{start:{line:39,column:55},end:{line:39,column:63}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA4Da;AA5Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAI1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAuC;AAC7G,QAAM,QAAQ,KAAK,WAAW,SAAS,KAAK,CAAC;AAC7C,SAAQ,aAAa,QAAS,UAAU;AAC1C;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2b5da791871b9b38760c659b15188ae0aee85eaa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Fr=function(){return s},s}Fr();const u9e=(Fr().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function c9e(n,e,t){Fr().f[0]++;const i=(Fr().s[1]++,moe(n,e,t)),r=(Fr().s[2]++,n[i+"_"+e]),o=(Fr().s[3]++,r[t]);return Fr().s[4]++,u9e.indexOf(t)>=0?(Fr().b[0][0]++,Fr().s[5]++,{...o,values:n.$root.sprite.values}):(Fr().b[0][1]++,Fr().s[6]++,t==="text-font"?(Fr().b[1][0]++,Fr().s[7]++,{...o,values:n.$root.glyphs.values}):(Fr().b[1][1]++,Fr().s[8]++,o))}function moe(n,e,t){Fr().f[1]++;const i=(Fr().s[9]++,Fr().b[2][0]++,n["paint_"+e]||(Fr().b[2][1]++,{}));return Fr().s[10]++,t in i?(Fr().b[3][0]++,"paint"):(Fr().b[3][1]++,"layout")}class A9e extends En.Component{onPropertyChange=(Fr().s[11]++,(e,t)=>{Fr().f[2]++;const i=(Fr().s[12]++,moe(this.props.spec,this.props.layer.type,e));Fr().s[13]++,this.props.onChange(i,e,t)});render(){Fr().f[3]++;const{errors:e}=(Fr().s[14]++,this.props),t=(Fr().s[15]++,this.props.groupFields.map(i=>{Fr().f[4]++;const r=(Fr().s[16]++,c9e(this.props.spec,this.props.layer.type,i)),o=(Fr().s[17]++,Fr().b[4][0]++,this.props.layer.paint||(Fr().b[4][1]++,{})),s=(Fr().s[18]++,Fr().b[5][0]++,this.props.layer.layout||(Fr().b[5][1]++,{})),a=(Fr().s[19]++,i in o?(Fr().b[6][0]++,o[i]):(Fr().b[6][1]++,s[i])),c=(Fr().s[20]++,i in o?(Fr().b[7][0]++,"paint"):(Fr().b[7][1]++,"layout"));return Fr().s[21]++,te.jsx(l9e,{errors:e,onChange:this.onPropertyChange,fieldName:i,value:a,fieldType:c,fieldSpec:r},i)}));return Fr().s[22]++,te.jsx("div",{className:"maputnik-property-group",children:t})}}function D_(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:12,column:4},end:{line:27,column:9}},1:{start:{line:18,column:27},end:{line:18,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:11},end:{line:28,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:18,column:74}},line:18}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA2BQ,SACE,KADF;AA3BR,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAC7C;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,GAAG,cAAc,SAAQ,GAAI,eAAK,MAAM,OAAM;AAAA,YACtE,oBAAC,iBAAc,MAAM,OAAO,WAAU,2FAA0F;AAAA,YAChI,oBAAC,mBAAgB,MAAM,OAAO,WAAU,6FAA4F;AAAA,aACtI;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return D_=function(){return s},s}D_();class h9e extends En.Component{render(){return D_().f[0]++,D_().s[0]++,te.jsxs(Sre,{uuid:this.props.id,children:[te.jsx(Ore,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(D_().f[1]++,D_().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:te.jsxs(G7e,{className:"maputnik-layer-editor-group__button",children:[te.jsx("span",{style:{flexGrow:1,alignContent:"center"},children:this.props.title}),te.jsx(lZ,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),te.jsx(aZ,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),te.jsx(Y7e,{children:this.props.children})]})}}function Db(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="331998a9ac6b18663bcbca1301c32952f465e1af",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"331998a9ac6b18663bcbca1301c32952f465e1af"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Db=function(){return s},s}Db();Db().s[0]++;const d9e=n=>{Db().f[0]++;const e=(Db().s[1]++,n.t);return Db().s[2]++,te.jsx(_s,{label:e("Min Zoom"),fieldSpec:Zr.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:te.jsx(m1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Zr.layer.minzoom.minimum,max:Zr.layer.minzoom.maximum,default:Zr.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},f9e=(Db().s[3]++,Fo()(d9e));function Pb(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="030101242d82e9c9c34c00cb0f1ee3a368ba29e3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"030101242d82e9c9c34c00cb0f1ee3a368ba29e3"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Pb=function(){return s},s}Pb();Pb().s[0]++;const p9e=n=>{Pb().f[0]++;const e=(Pb().s[1]++,n.t);return Pb().s[2]++,te.jsx(_s,{label:e("Max Zoom"),fieldSpec:Zr.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:te.jsx(m1,{allowRange:!0,value:n.value,onChange:n.onChange,min:Zr.layer.maxzoom.minimum,max:Zr.layer.maxzoom.maximum,default:Zr.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},m9e=(Pb().s[3]++,Fo()(p9e));function Yy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="bbd273b6557a5df907fed987aa83b7e8030607a2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bbd273b6557a5df907fed987aa83b7e8030607a2"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yy=function(){return s},s}Yy();Yy().s[0]++;const g9e=n=>{Yy().f[0]++;const e=(Yy().s[1]++,n.t),t=(Yy().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return Yy().s[3]++,te.jsx(_s,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:te.jsx(xm,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},y9e=(Yy().s[4]++,Fo()(g9e));function P_(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return P_=function(){return s},s}P_();function goe(n){return P_().f[0]++,P_().s[0]++,n===""?(P_().b[0][0]++,"[empty_string]"):(P_().b[0][1]++,`'${n}'`)}function Yt(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="838074c1cccc813ecacd0208f5f23e782debdabc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:267,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:264,column:10}},64:{start:{line:258,column:14},end:{line:261,column:16}},65:{start:{line:266,column:8},end:{line:266,column:49}},66:{start:{line:270,column:4},end:{line:273,column:7}},67:{start:{line:276,column:14},end:{line:276,column:26}},68:{start:{line:277,column:21},end:{line:277,column:23}},69:{start:{line:278,column:22},end:{line:278,column:43}},70:{start:{line:279,column:19},end:{line:296,column:6}},71:{start:{line:280,column:6},end:{line:280,column:70}},72:{start:{line:282,column:22},end:{line:282,column:30}},73:{start:{line:283,column:6},end:{line:283,column:29}},74:{start:{line:284,column:6},end:{line:295,column:8}},75:{start:{line:297,column:19},end:{line:297,column:48}},76:{start:{line:298,column:18},end:{line:326,column:5}},77:{start:{line:301,column:23},end:{line:301,column:71}},78:{start:{line:306,column:23},end:{line:306,column:68}},79:{start:{line:311,column:23},end:{line:311,column:80}},80:{start:{line:317,column:23},end:{line:317,column:41}},81:{start:{line:323,column:23},end:{line:323,column:40}},82:{start:{line:328,column:6},end:{line:328,column:30}},83:{start:{line:329,column:6},end:{line:329,column:26}},84:{start:{line:331,column:4},end:{line:377,column:9}},85:{start:{line:359,column:33},end:{line:359,column:42}},86:{start:{line:360,column:20},end:{line:360,column:201}},87:{start:{line:380,column:20},end:{line:380,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:268,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:257,column:22},end:{line:257,column:23}},loc:{start:{line:257,column:34},end:{line:262,column:13}},line:257},26:{name:"(anonymous_26)",decl:{start:{line:269,column:2},end:{line:269,column:3}},loc:{start:{line:269,column:20},end:{line:274,column:3}},line:269},27:{name:"(anonymous_27)",decl:{start:{line:275,column:2},end:{line:275,column:3}},loc:{start:{line:275,column:11},end:{line:378,column:3}},line:275},28:{name:"(anonymous_28)",decl:{start:{line:279,column:53},end:{line:279,column:54}},loc:{start:{line:279,column:64},end:{line:281,column:5}},line:279},29:{name:"(anonymous_29)",decl:{start:{line:281,column:11},end:{line:281,column:12}},loc:{start:{line:281,column:22},end:{line:296,column:5}},line:281},30:{name:"(anonymous_30)",decl:{start:{line:301,column:17},end:{line:301,column:18}},loc:{start:{line:301,column:23},end:{line:301,column:71}},line:301},31:{name:"(anonymous_31)",decl:{start:{line:306,column:17},end:{line:306,column:18}},loc:{start:{line:306,column:23},end:{line:306,column:68}},line:306},32:{name:"(anonymous_32)",decl:{start:{line:311,column:17},end:{line:311,column:18}},loc:{start:{line:311,column:23},end:{line:311,column:80}},line:311},33:{name:"(anonymous_33)",decl:{start:{line:317,column:17},end:{line:317,column:18}},loc:{start:{line:317,column:23},end:{line:317,column:41}},line:317},34:{name:"(anonymous_34)",decl:{start:{line:323,column:17},end:{line:323,column:18}},loc:{start:{line:323,column:23},end:{line:323,column:40}},line:323},35:{name:"handleSelection",decl:{start:{line:327,column:13},end:{line:327,column:28}},loc:{start:{line:327,column:40},end:{line:330,column:5}},line:327},36:{name:"(anonymous_36)",decl:{start:{line:358,column:147},end:{line:358,column:148}},loc:{start:{line:358,column:155},end:{line:361,column:19}},line:358}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:267,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:264,column:10}},{start:{line:265,column:6},end:{line:266,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:280,column:15},end:{line:280,column:68}},type:"binary-expr",locations:[{start:{line:280,column:15},end:{line:280,column:41}},{start:{line:280,column:45},end:{line:280,column:68}}],line:280},14:{loc:{start:{line:297,column:19},end:{line:297,column:48}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:42}},{start:{line:297,column:46},end:{line:297,column:48}}],line:297},15:{loc:{start:{line:310,column:14},end:{line:310,column:66}},type:"cond-expr",locations:[{start:{line:310,column:45},end:{line:310,column:54}},{start:{line:310,column:57},end:{line:310,column:66}}],line:310}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuN2B,SA4EL,UA3Ed,KADmB;AAvN3B,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA+B,uBAAuB;AAEtD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAA+B,CAAC;AACtC,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACX,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAClD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,UAAS;AAAA,YACT,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAA8B;AACvC,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAC5B,eAAY;AAAA,QAEZ;AAAA,8BAAC,YAAO,eAAY,uBAClB,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"838074c1cccc813ecacd0208f5f23e782debdabc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Yt=function(){return s},s}Yt();function v9e(n){Yt().f[0]++;const e=(Yt().s[0]++,[]);return Yt().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(up.layout_symbol).filter(t=>(Yt().f[1]++,Yt().s[2]++,t.startsWith("symbol-")))}),Yt().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(up.layout_symbol).filter(t=>(Yt().f[2]++,Yt().s[4]++,t.startsWith("text-")))}),Yt().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(up.layout_symbol).filter(t=>(Yt().f[3]++,Yt().s[6]++,t.startsWith("icon-")))}),Yt().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(up.paint_symbol).filter(t=>(Yt().f[4]++,Yt().s[8]++,t.startsWith("text-")))}),Yt().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(up.paint_symbol).filter(t=>(Yt().f[5]++,Yt().s[10]++,t.startsWith("icon-")))}),Yt().s[11]++,e}function yoe(n,e){if(Yt().f[6]++,Yt().s[12]++,Object.keys(up.layer.type.values).indexOf(n)<0)return Yt().b[0][0]++,Yt().s[13]++,[];if(Yt().b[0][1]++,Yt().s[14]++,n==="symbol")return Yt().b[1][0]++,Yt().s[15]++,v9e(e);Yt().b[1][1]++;const t=(Yt().s[16]++,[]);return Yt().s[17]++,Object.keys(up["paint_"+n]).length>0?(Yt().b[2][0]++,Yt().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(up["paint_"+n])})):Yt().b[2][1]++,Yt().s[19]++,Object.keys(up["layout_"+n]).length>0?(Yt().b[3][0]++,Yt().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(up["layout_"+n])})):Yt().b[3][1]++,Yt().s[21]++,t}function WV(n,e){Yt().f[7]++;const t=(Yt().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),i=(Yt().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),r=(Yt().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Yt().s[25]++,[t,i].concat(yoe(n,e)).concat([r])}class b9e extends En.Component{static defaultProps=(Yt().s[26]++,{onLayerChanged:()=>{Yt().f[8]++},onLayerIdChange:()=>{Yt().f[9]++},onLayerDestroyed:()=>{Yt().f[10]++}});constructor(e){Yt().f[11]++,Yt().s[27]++,super(e);const t=(Yt().s[28]++,{});Yt().s[29]++;for(const i of WV(this.props.layer.type,e.t))Yt().s[30]++,t[i.title]=!0;Yt().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Yt().f[12]++;const i=(Yt().s[32]++,{...t.editorGroups});Yt().s[33]++;for(const r of yoe(e.layer.type,e.t))Yt().s[34]++,r.title in i?Yt().b[4][1]++:(Yt().b[4][0]++,Yt().s[35]++,i[r.title]=!0);return Yt().s[36]++,{editorGroups:i}}changeProperty(e,t,i){Yt().f[13]++,Yt().s[37]++,this.props.onLayerChanged(this.props.layerIndex,r7e(this.props.layer,e,t,i))}onGroupToggle(e,t){Yt().f[14]++;const i=(Yt().s[38]++,{...this.state.editorGroups,[e]:t});Yt().s[39]++,this.setState({editorGroups:i})}renderGroupType(e,t){Yt().f[15]++;let i=(Yt().s[40]++,"");Yt().s[41]++,this.props.layer.metadata?(Yt().b[5][0]++,Yt().s[42]++,i=this.props.layer.metadata["maputnik:comment"]):Yt().b[5][1]++;const{errors:r,layerIndex:o}=(Yt().s[43]++,this.props),s=(Yt().s[44]++,{});Yt().s[45]++,r.forEach(h=>{Yt().f[16]++,Yt().s[46]++,Yt().b[7][0]++,h.parsed&&(Yt().b[7][1]++,h.parsed.type==="layer")&&(Yt().b[7][2]++,h.parsed.data.index==o)?(Yt().b[6][0]++,Yt().s[47]++,s[h.parsed.data.key]={message:h.parsed.data.message}):Yt().b[6][1]++});let a;const c=(Yt().s[48]++,this.props.layer);switch(Yt().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,c.source)?(Yt().b[8][0]++,Yt().s[50]++,a=this.props.sources[c.source].layers):Yt().b[8][1]++,Yt().s[51]++,e){case"layer":return Yt().b[9][0]++,Yt().s[52]++,te.jsxs("div",{children:[te.jsx(Jie,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:s.id,onChange:h=>(Yt().f[17]++,Yt().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,h))}),te.jsx(Xie,{disabled:!0,error:s.type,value:this.props.layer.type,onChange:h=>(Yt().f[18]++,Yt().s[54]++,this.props.onLayerChanged(this.props.layerIndex,i7e(this.props.layer,h)))}),(Yt().b[10][0]++,this.props.layer.type!=="background"&&(Yt().b[10][1]++,te.jsx(gre,{error:s.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:h=>(Yt().f[19]++,Yt().s[55]++,this.changeProperty(null,"source",h))}))),(Yt().b[11][0]++,!jR.includes(this.props.layer.type)&&(Yt().b[11][1]++,te.jsx(yre,{error:s["source-layer"],sourceLayerIds:a,value:this.props.layer["source-layer"],onChange:h=>(Yt().f[20]++,Yt().s[56]++,this.changeProperty(null,"source-layer",h))}))),te.jsx(f9e,{error:s.minzoom,value:this.props.layer.minzoom,onChange:h=>(Yt().f[21]++,Yt().s[57]++,this.changeProperty(null,"minzoom",h))}),te.jsx(m9e,{error:s.maxzoom,value:this.props.layer.maxzoom,onChange:h=>(Yt().f[22]++,Yt().s[58]++,this.changeProperty(null,"maxzoom",h))}),te.jsx(y9e,{error:s.comment,value:i,onChange:h=>(Yt().f[23]++,Yt().s[59]++,this.changeProperty("metadata","maputnik:comment",h==""?(Yt().b[12][0]++,void 0):(Yt().b[12][1]++,h)))})]});case"filter":return Yt().b[9][1]++,Yt().s[60]++,te.jsx("div",{children:te.jsx("div",{className:"maputnik-filter-editor-wrapper",children:te.jsx(uIe,{errors:s,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:h=>(Yt().f[24]++,Yt().s[61]++,this.changeProperty(null,"filter",h))})})});case"properties":return Yt().b[9][2]++,Yt().s[62]++,te.jsx(A9e,{errors:s,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Yt().b[9][3]++,Yt().s[63]++,te.jsx(K6,{lintType:"layer",value:this.props.layer,onChange:h=>{Yt().f[25]++,Yt().s[64]++,this.props.onLayerChanged(this.props.layerIndex,h)}});default:return Yt().b[9][4]++,Yt().s[65]++,te.jsx(te.Fragment,{})}}moveLayer(e){Yt().f[26]++,Yt().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Yt().f[27]++;const e=(Yt().s[67]++,this.props.t),t=(Yt().s[68]++,[]),i=(Yt().s[69]++,this.props.layer.type),r=(Yt().s[70]++,WV(i,e).filter(c=>(Yt().f[28]++,Yt().s[71]++,Yt().b[13][0]++,!(i==="background"&&(Yt().b[13][1]++,c.type==="source")))).map(c=>{Yt().f[29]++;const h=(Yt().s[72]++,c.id);return Yt().s[73]++,t.push(h),Yt().s[74]++,te.jsx(h9e,{"data-wd-key":c.title,id:h,title:c.title,isActive:this.state.editorGroups[c.title],onActiveToggle:this.onGroupToggle.bind(this,c.title),children:this.renderGroupType(c.type,c.fields)},h)})),o=(Yt().s[75]++,Yt().b[14][0]++,this.props.layer.layout||(Yt().b[14][1]++,{})),s=(Yt().s[76]++,{delete:{text:e("Delete"),handler:()=>(Yt().f[30]++,Yt().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>(Yt().f[31]++,Yt().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:o.visibility==="none"?(Yt().b[15][0]++,e("Show")):(Yt().b[15][1]++,e("Hide")),handler:()=>(Yt().f[32]++,Yt().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Yt().f[33]++,Yt().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Yt().f[34]++,Yt().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function a(c,h){Yt().f[35]++,Yt().s[82]++,h.stopPropagation(),Yt().s[83]++,s[c].handler()}return Yt().s[84]++,te.jsx(rx.Provider,{value:{size:"14px",color:"#8e8e8e"},children:te.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),"data-wd-key":"layer-editor",children:[te.jsx("header",{"data-wd-key":"layer-editor.header",children:te.jsxs("div",{className:"layer-header",children:[te.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:goe(this.props.layer.id)})}),te.jsx("div",{className:"layer-header__info",children:te.jsxs(QM.Wrapper,{className:"more-menu",onSelection:a,closeOnSelection:!1,children:[te.jsx(QM.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:te.jsx(rde,{className:"more-menu__button__svg"})}),te.jsx(QM.Menu,{children:te.jsx("ul",{className:"more-menu__menu",children:Object.keys(s).map(c=>{Yt().f[36]++;const h=(Yt().s[85]++,s[c]);return Yt().s[86]++,te.jsx("li",{children:te.jsx(QM.MenuItem,{value:c,className:"more-menu__menu__item","data-wd-key":h.wdKey,children:h.text})},c)})})})]})})]})}),te.jsx(I7e,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:r})]})})}}const C9e=(Yt().s[87]++,Fo()(b9e));var qV=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},_9e=(function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n})(),x9e=(function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n})(),M9e=(function(){function n(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"}return n})(),w9e=(function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n})(),S9e=(function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n})(),E9e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,B9e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,YV=3,O9e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",E9e]],VV=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function I9e(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new S9e:typeof navigator<"u"?T9e(navigator.userAgent):D9e()}function k9e(n){return n!==""&&O9e.reduce(function(e,t){var i=t[0],r=t[1];if(e)return e;var o=r.exec(n);return!!o&&[i,o]},!1)}function T9e(n){var e=k9e(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new w9e;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<YV&&(r=qV(qV([],r,!0),P9e(YV-r.length),!0)):r=[];var o=r.join("."),s=R9e(n),a=B9e.exec(n);return a&&a[1]?new M9e(t,o,s,a[1]):new _9e(t,o,s)}function R9e(n){for(var e=0,t=VV.length;e<t;e++){var i=VV[e],r=i[0],o=i[1],s=o.exec(n);if(s)return r}return null}function D9e(){var n=typeof process<"u"&&process.version;return n?new x9e(process.version.slice(1)):null}function P9e(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const K9e="maputnik",U9e="3.0.0",$V={name:K9e,version:U9e},L9e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Li(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="d581519332bdff74d3cb5001df8051c24d7c7191",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:20,column:16},end:{line:20,column:24}},1:{start:{line:21,column:41},end:{line:21,column:89}},2:{start:{line:24,column:4},end:{line:24,column:107}},3:{start:{line:29,column:4},end:{line:39,column:6}},4:{start:{line:44,column:4},end:{line:51,column:6}},5:{start:{line:56,column:4},end:{line:64,column:6}},6:{start:{line:68,column:10},end:{line:76,column:3}},7:{start:{line:78,column:4},end:{line:78,column:34}},8:{start:{line:81,column:4},end:{line:81,column:40}},9:{start:{line:83,column:11},end:{line:90,column:3}},10:{start:{line:84,column:4},end:{line:89,column:5}},11:{start:{line:85,column:6},end:{line:85,column:59}},12:{start:{line:87,column:17},end:{line:87,column:65}},13:{start:{line:88,column:6},end:{line:88,column:17}},14:{start:{line:92,column:14},end:{line:92,column:26}},15:{start:{line:93,column:18},end:{line:129,column:5}},16:{start:{line:130,column:24},end:{line:132,column:6}},17:{start:{line:131,column:6},end:{line:131,column:45}},18:{start:{line:133,column:4},end:{line:259,column:12}},19:{start:{line:144,column:33},end:{line:144,column:58}},20:{start:{line:153,column:33},end:{line:153,column:60}},21:{start:{line:162,column:33},end:{line:162,column:51}},22:{start:{line:189,column:80},end:{line:189,column:112}},23:{start:{line:193,column:82},end:{line:193,column:116}},24:{start:{line:197,column:87},end:{line:197,column:125}},25:{start:{line:201,column:83},end:{line:201,column:118}},26:{start:{line:205,column:84},end:{line:205,column:120}},27:{start:{line:209,column:88},end:{line:209,column:127}},28:{start:{line:222,column:33},end:{line:222,column:69}},29:{start:{line:225,column:38},end:{line:225,column:59}},30:{start:{line:226,column:20},end:{line:226,column:157}},31:{start:{line:228,column:115},end:{line:228,column:148}},32:{start:{line:229,column:20},end:{line:229,column:133}},33:{start:{line:245,column:33},end:{line:245,column:74}},34:{start:{line:248,column:18},end:{line:248,column:94}},35:{start:{line:262,column:19},end:{line:262,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:23,column:2},end:{line:23,column:3}},loc:{start:{line:23,column:11},end:{line:25,column:3}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:11},end:{line:40,column:3}},line:28},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:52,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:55,column:2},end:{line:55,column:3}},loc:{start:{line:55,column:11},end:{line:65,column:3}},line:55},4:{name:"(anonymous_4)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:23},end:{line:79,column:3}},line:77},5:{name:"(anonymous_5)",decl:{start:{line:80,column:2},end:{line:80,column:3}},loc:{start:{line:80,column:28},end:{line:82,column:3}},line:80},6:{name:"(anonymous_6)",decl:{start:{line:83,column:11},end:{line:83,column:12}},loc:{start:{line:83,column:23},end:{line:90,column:3}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:11},end:{line:260,column:3}},line:91},8:{name:"(anonymous_8)",decl:{start:{line:130,column:35},end:{line:130,column:36}},loc:{start:{line:130,column:45},end:{line:132,column:5}},line:130},9:{name:"(anonymous_9)",decl:{start:{line:144,column:25},end:{line:144,column:26}},loc:{start:{line:144,column:33},end:{line:144,column:58}},line:144},10:{name:"(anonymous_10)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:33},end:{line:153,column:60}},line:153},11:{name:"(anonymous_11)",decl:{start:{line:162,column:25},end:{line:162,column:26}},loc:{start:{line:162,column:33},end:{line:162,column:51}},line:162},12:{name:"(anonymous_12)",decl:{start:{line:189,column:74},end:{line:189,column:75}},loc:{start:{line:189,column:80},end:{line:189,column:112}},line:189},13:{name:"(anonymous_13)",decl:{start:{line:193,column:76},end:{line:193,column:77}},loc:{start:{line:193,column:82},end:{line:193,column:116}},line:193},14:{name:"(anonymous_14)",decl:{start:{line:197,column:81},end:{line:197,column:82}},loc:{start:{line:197,column:87},end:{line:197,column:125}},line:197},15:{name:"(anonymous_15)",decl:{start:{line:201,column:77},end:{line:201,column:78}},loc:{start:{line:201,column:83},end:{line:201,column:118}},line:201},16:{name:"(anonymous_16)",decl:{start:{line:205,column:78},end:{line:205,column:79}},loc:{start:{line:205,column:84},end:{line:205,column:120}},line:205},17:{name:"(anonymous_17)",decl:{start:{line:209,column:82},end:{line:209,column:83}},loc:{start:{line:209,column:88},end:{line:209,column:127}},line:209},18:{name:"(anonymous_18)",decl:{start:{line:222,column:26},end:{line:222,column:27}},loc:{start:{line:222,column:33},end:{line:222,column:69}},line:222},19:{name:"(anonymous_19)",decl:{start:{line:225,column:31},end:{line:225,column:32}},loc:{start:{line:225,column:38},end:{line:225,column:59}},line:225},20:{name:"(anonymous_20)",decl:{start:{line:225,column:65},end:{line:225,column:66}},loc:{start:{line:225,column:75},end:{line:227,column:19}},line:225},21:{name:"(anonymous_21)",decl:{start:{line:228,column:108},end:{line:228,column:109}},loc:{start:{line:228,column:115},end:{line:228,column:148}},line:228},22:{name:"(anonymous_22)",decl:{start:{line:228,column:154},end:{line:228,column:155}},loc:{start:{line:228,column:164},end:{line:230,column:19}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:245,column:26},end:{line:245,column:27}},loc:{start:{line:245,column:33},end:{line:245,column:74}},line:245},24:{name:"(anonymous_24)",decl:{start:{line:247,column:65},end:{line:247,column:66}},loc:{start:{line:247,column:83},end:{line:249,column:17}},line:247}},branchMap:{0:{loc:{start:{line:84,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:89,column:5}},{start:{line:86,column:11},end:{line:89,column:5}}],line:84}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAmCW,SAAA,KAwLG,YAxLH;AAnCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAA6C;AACtD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AASxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,+BAAQ,QAAA,EAAK,WAAU,sBAAsB,UAAA,KAAK,MAAM,SAAA,CAAS;AAAA,EACnE;AACF;AAQA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA,MAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACnB,eAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,+BAAQ,OAAA,EAAI,WAAU,oBACpB,UAAA,qBAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,WAAU;AAAA,UAGV,UAAA;AAAA,YAAA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA,cAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA,cAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,CAAA,OAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA,cAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL,UAAA;AAAA,kBAAA,oBAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,EAAA,CAAG;AAAA,uCACrD,MAAA,EACC,UAAA;AAAA,oBAAA,oBAAC,QAAA,EAAK,WAAU,yBAAyB,UAAA,QAAQ,KAAA,CAAK;AAAA,oBACtD,qBAAC,QAAA,EAAK,WAAU,4BAA2B,UAAA;AAAA,sBAAA;AAAA,sBAAE,QAAQ;AAAA,oBAAA,EAAA,CAAQ;AAAA,kBAAA,EAAA,CAC/D;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA;AAAA,QAAA;AAAA,MACF;AAAA,2BACC,OAAA,EAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE,UAAA;AAAA,QAAA,qBAAC,eAAA,EAAc,OAAM,YAAW,SAAS,MAAM,KAAK,MAAM,cAAc,MAAM,GAC5E,UAAA;AAAA,UAAA,oBAAC,iBAAA,CAAA,CAAgB;AAAA,UACjB,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,cAAa,SAAS,MAAM,KAAK,MAAM,cAAc,QAAQ,GAChF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,mBAAkB,SAAS,MAAM,KAAK,MAAM,cAAc,YAAY,GACzF,UAAA;AAAA,UAAA,oBAAC,QAAA,CAAA,CAAO;AAAA,UACR,oBAAC,UAAA,EAAU,UAAA,EAAE,aAAa,EAAA,CAAE;AAAA,QAAA,EAAA,CAC9B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,eAAc,SAAS,MAAM,KAAK,MAAM,cAAc,SAAS,GAClF,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,gBAAe,SAAS,MAAM,KAAK,MAAM,cAAc,UAAU,GACpF,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,UACZ,oBAAC,UAAA,EAAU,UAAA,EAAE,gBAAgB,EAAA,CAAE;AAAA,QAAA,EAAA,CACjC;AAAA,QACA,qBAAC,eAAA,EAAc,OAAM,oBAAmB,SAAS,MAAM,KAAK,MAAM,cAAc,aAAa,GAC3F,UAAA;AAAA,UAAA,oBAAC,UAAA,CAAA,CAAS;AAAA,UACV,oBAAC,UAAA,EAAU,UAAA,EAAE,cAAc,EAAA,CAAE;AAAA,QAAA,EAAA,CAC/B;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,eACnB,UAAA;AAAA,UAAA,oBAAC,cAAA,CAAA,CAAa;AAAA,+BACb,UAAA,EAAU,UAAA;AAAA,YAAA,EAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB,UAAA;AAAA,kBAAA,MAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,YAAA,EAAS,OAAO,EAAE,qBAAqB,GACrC,UAAA,MAAM,OAAO,CAAA,MAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,UAAA,EAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,UAAA,KAAK,MAAA,GADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,EAAA,CACH;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,eAAA,EAAc,OAAM,gBACnB,UAAA;AAAA,UAAA,oBAAC,YAAA,CAAA,CAAW;AAAA,+BACX,UAAA,EAAS,UAAA;AAAA,YAAA;AAAA,YACR;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,UAAA,OAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,UAAA,EAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA,cAAA;AAAA,YACH;AAAA,UAAA,EAAA,CACF;AAAA,QAAA,EAAA,CACF;AAAA,QAEA,qBAAC,aAAA,EAAY,MAAM,6CACjB,UAAA;AAAA,UAAA,oBAAC,eAAA,CAAA,CAAc;AAAA,UACf,oBAAC,UAAA,EAAU,UAAA,EAAE,MAAM,EAAA,CAAE;AAAA,QAAA,EAAA,CACvB;AAAA,MAAA,EAAA,CACF;AAAA,IAAA,EAAA,CACF,EAAA,CACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d581519332bdff74d3cb5001df8051c24d7c7191"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Li=function(){return s},s}Li();const z9e=(Li().s[0]++,I9e()),HM=(Li().s[1]++,["chrome","firefox"].indexOf(z9e.name)>-1);class $0 extends En.Component{render(){return Li().f[0]++,Li().s[2]++,te.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class F9e extends En.Component{render(){return Li().f[1]++,Li().s[3]++,te.jsx("a",{className:c0("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class HV extends En.Component{render(){return Li().f[2]++,Li().s[4]++,te.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class c_ extends En.Component{render(){return Li().f[3]++,Li().s[5]++,te.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class j9e extends En.Component{state=(Li().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){Li().f[4]++,Li().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){Li().f[5]++,Li().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(Li().s[9]++,e=>{if(Li().f[6]++,Li().s[10]++,e==="map")Li().b[0][0]++,Li().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Li().b[0][1]++;const t=(Li().s[12]++,document.querySelector("#skip-target-"+e));Li().s[13]++,t.focus()}});render(){Li().f[7]++;const e=(Li().s[14]++,this.props.t),t=(Li().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!HM},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!HM},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!HM},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!HM}]),i=(Li().s[16]++,t.find(r=>(Li().f[8]++,Li().s[17]++,r.id===this.props.mapState)));return Li().s[18]++,te.jsx("nav",{className:"maputnik-toolbar",children:te.jsxs("div",{className:"maputnik-toolbar__inner",children:[te.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[te.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:r=>(Li().f[9]++,Li().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),te.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:r=>(Li().f[10]++,Li().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),te.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:r=>(Li().f[11]++,Li().s[21]++,this.onSkip("map")),children:e("Map view")}),te.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[te.jsx("img",{src:L9e,alt:e("Maputnik on GitHub")}),te.jsxs("h1",{children:[te.jsx("span",{className:"maputnik-toolbar-name",children:$V.name}),te.jsxs("span",{className:"maputnik-toolbar-version",children:["v",$V.version]})]})]})]}),te.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[te.jsxs(c_,{wdKey:"nav:open",onClick:()=>(Li().f[12]++,Li().s[22]++,this.props.onToggleModal("open")),children:[te.jsx(Qhe,{}),te.jsx($0,{children:e("Open")})]}),te.jsxs(c_,{wdKey:"nav:export",onClick:()=>(Li().f[13]++,Li().s[23]++,this.props.onToggleModal("export")),children:[te.jsx(RT,{}),te.jsx($0,{children:e("Save")})]}),te.jsxs(c_,{wdKey:"nav:code-editor",onClick:()=>(Li().f[14]++,Li().s[24]++,this.props.onToggleModal("codeEditor")),children:[te.jsx(Lhe,{}),te.jsx($0,{children:e("Code Editor")})]}),te.jsxs(c_,{wdKey:"nav:sources",onClick:()=>(Li().f[15]++,Li().s[25]++,this.props.onToggleModal("sources")),children:[te.jsx(ede,{}),te.jsx($0,{children:e("Data Sources")})]}),te.jsxs(c_,{wdKey:"nav:settings",onClick:()=>(Li().f[16]++,Li().s[26]++,this.props.onToggleModal("settings")),children:[te.jsx(Whe,{}),te.jsx($0,{children:e("Style Settings")})]}),te.jsxs(c_,{wdKey:"nav:global-state",onClick:()=>(Li().f[17]++,Li().s[27]++,this.props.onToggleModal("globalState")),children:[te.jsx(sde,{}),te.jsx($0,{children:e("Global State")})]}),te.jsxs(HV,{wdKey:"nav:inspect",children:[te.jsx(zhe,{}),te.jsxs($0,{children:[e("View"),te.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:r=>(Li().f[18]++,Li().s[28]++,this.handleSelection(r.target.value)),value:i?.id,children:[t.filter(r=>(Li().f[19]++,Li().s[29]++,r.group==="general")).map(r=>(Li().f[20]++,Li().s[30]++,te.jsx("option",{value:r.id,disabled:r.disabled,"data-wd-key":r.id,children:r.title},r.id))),te.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(r=>(Li().f[21]++,Li().s[31]++,r.group==="color-accessibility")).map(r=>(Li().f[22]++,Li().s[32]++,te.jsx("option",{value:r.id,disabled:r.disabled,children:r.title},r.id)))})]})]})]}),te.jsxs(HV,{wdKey:"nav:language",children:[te.jsx(Ghe,{}),te.jsxs($0,{children:["Language",te.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:r=>(Li().f[23]++,Li().s[33]++,this.handleLanguageChange(r.target.value)),value:this.props.i18n.language,children:Object.entries(B$).map(([r,o])=>(Li().f[24]++,Li().s[34]++,te.jsx("option",{value:r,children:o},r)))})]})]}),te.jsxs(F9e,{href:"https://github.com/maplibre/maputnik/wiki",children:[te.jsx(Fhe,{}),te.jsx($0,{children:e("Help")})]})]})]})})}}const N9e=(Li().s[35]++,Fo()(j9e));function tE(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return tE=function(){return s},s}tE();class ZV extends En.Component{render(){return tE().f[0]++,tE().s[0]++,te.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function rp(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:21,column:12}},2:{start:{line:24,column:18},end:{line:24,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:22,column:3}},line:7}},branchMap:{0:{loc:{start:{line:12,column:8},end:{line:12,column:190}},type:"binary-expr",locations:[{start:{line:12,column:8},end:{line:12,column:29}},{start:{line:12,column:49},end:{line:12,column:190}}],line:12},1:{loc:{start:{line:13,column:8},end:{line:16,column:12}},type:"binary-expr",locations:[{start:{line:13,column:8},end:{line:13,column:30}},{start:{line:13,column:50},end:{line:16,column:12}}],line:13},2:{loc:{start:{line:19,column:6},end:{line:19,column:123}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:23}},{start:{line:19,column:43},end:{line:19,column:123}}],line:19}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAyBY,SAKyB,UALzB,KAKyB,YALzB;AAzBZ,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA+B,uBAAuB;AACtD,SAAS,mBAAmB;AAY5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM,cAAc,oBAAC,SAAI,WAAU,+BACvC,8BAAC,mBACE,eAAK,MAAM,YACd,GACF;AAAA,QAEC,CAAC,KAAK,MAAM,cAAc,iCACzB;AAAA,8BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,UACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,WACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d10f2b4393c64530a7dc27936dc2b0d9d69d1ee7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return rp=function(){return s},s}rp();class G9e extends En.Component{render(){return rp().f[0]++,rp().s[0]++,document.body.dir=this.props.i18n.dir(),rp().s[1]++,te.jsx(rx.Provider,{value:{size:"14px"},children:te.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,te.jsxs("div",{className:"maputnik-layout-main",children:[(rp().b[0][0]++,this.props.codeEditor&&(rp().b[0][1]++,te.jsx("div",{className:"maputnik-layout-code-editor",children:te.jsx(ZV,{children:this.props.codeEditor})}))),(rp().b[1][0]++,!this.props.codeEditor&&(rp().b[1][1]++,te.jsxs(te.Fragment,{children:[te.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),te.jsx("div",{className:"maputnik-layout-drawer",children:te.jsx(ZV,{children:this.props.layerEditor})})]}))),this.props.map]}),(rp().b[2][0]++,this.props.bottom&&(rp().b[2][1]++,te.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const Q9e=(rp().s[2]++,Fo()(G9e));function Ma(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="35d9aec71cb86113da5d8ac4f197fbf609a8818e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA6BY,SAIE,UAHM,KADR;AA7BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAA6B,uBAAuB;AAY7D,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAO,QAAQ;AACpD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35d9aec71cb86113da5d8ac4f197fbf609a8818e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ma=function(){return s},s}Ma();class W9e extends En.Component{static defaultProps=(Ma().s[0]++,{onLayerSelect:()=>{Ma().f[0]++}});render(){Ma().f[1]++;const{t:e,selectedLayerIndex:t}=(Ma().s[1]++,this.props),i=(Ma().s[2]++,this.props.errors?.map((o,s)=>{Ma().f[2]++;let a;if(Ma().s[3]++,Ma().b[1][0]++,o.parsed&&(Ma().b[1][1]++,o.parsed.type==="layer")){Ma().b[0][0]++;const{parsed:c}=(Ma().s[4]++,o),h=(Ma().s[5]++,this.props.mapStyle?.layers[c.data.index].id);Ma().s[6]++,a=te.jsxs(te.Fragment,{children:[te.jsxs(Cb,{t:e,children:["Layer ",te.jsx("span",{children:goe(h)}),": ",c.data.message]}),(Ma().b[2][0]++,t!==c.data.index&&(Ma().b[2][1]++,te.jsxs(te.Fragment,{children:["",te.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(Ma().f[3]++,Ma().s[7]++,this.props.onLayerSelect(c.data.index)),children:e("switch to layer")})]})))]})}else Ma().b[0][1]++,Ma().s[8]++,a=o.message;return Ma().s[9]++,te.jsx("p",{className:"maputnik-message-panel-error",children:a},"error-"+s)})),r=(Ma().s[10]++,this.props.infos?.map((o,s)=>(Ma().f[4]++,Ma().s[11]++,te.jsx("p",{children:o},"info-"+s))));return Ma().s[12]++,te.jsxs("div",{className:"maputnik-message-panel",children:[i,r]})}}const q9e=(Ma().s[13]++,Fo()(W9e));function k4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="6904abccc922d01222214bca1ee3bdee75077020",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAA0C;AACjD,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6904abccc922d01222214bca1ee3bdee75077020"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return k4=function(){return s},s}k4();k4().s[0]++;const nE=n=>(k4().f[0]++,k4().s[1]++,te.jsx(Py,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(qR,{...n})}));function T4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4d2523cd21b202fb5e80e08624becdbab30e967f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAA0C;AACjD,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d2523cd21b202fb5e80e08624becdbab30e967f"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return T4=function(){return s},s}T4();T4().s[0]++;const lm=n=>(T4().f[0]++,T4().s[1]++,te.jsx(_s,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(m1,{...n})}));function R4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="5d41bf44c48c380a773c8c6219651c4348518afa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAUjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d41bf44c48c380a773c8c6219651c4348518afa"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return R4=function(){return s},s}R4();R4().s[0]++;const vd=n=>(R4().f[0]++,R4().s[1]++,te.jsx(_s,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(xm,{...n})}));function D4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="6e4f23f735ab05a9622545421c68df85e4603d43",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAqD;AAC5D,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6e4f23f735ab05a9622545421c68df85e4603d43"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return D4=function(){return s},s}D4();D4().s[0]++;const R5=n=>(D4().f[0]++,D4().s[1]++,te.jsx(_s,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(DU,{...n})}));function P4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="245ef066962174fcd1012332d28af93e7b97872c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAWjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"245ef066962174fcd1012332d28af93e7b97872c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return P4=function(){return s},s}P4();P4().s[0]++;const K4=n=>(P4().f[0]++,P4().s[1]++,te.jsx(_s,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(rC,{...n})}));function U4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="c3637509a0af6618b52e814bed4254c2e3fa3b7a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAsC;AAC7C,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c3637509a0af6618b52e814bed4254c2e3fa3b7a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return U4=function(){return s},s}U4();U4().s[0]++;const Y9e=n=>(U4().f[0]++,U4().s[1]++,te.jsx(Py,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(RU,{...n})}));function L4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="81b03af9ad032d255df7823d843b73e8fa5e3f61",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAwC;AAW/C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81b03af9ad032d255df7823d843b73e8fa5e3f61"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return L4=function(){return s},s}L4();L4().s[0]++;const V9e=n=>(L4().f[0]++,L4().s[1]++,te.jsx(_s,{label:n.label,fieldSpec:n.fieldSpec,children:te.jsx(TU,{...n})}));function z4(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return z4=function(){return s},s}z4();z4().s[0]++;const voe=n=>(z4().f[0]++,z4().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Sn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",e="88fb94a6f90f9fea29b8036f99aee1df40b81df7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",statementMap:{0:{start:{line:18,column:23},end:{line:20,column:5}},1:{start:{line:21,column:4},end:{line:25,column:5}},2:{start:{line:22,column:6},end:{line:22,column:34}},3:{start:{line:24,column:6},end:{line:24,column:35}},4:{start:{line:26,column:4},end:{line:29,column:7}},5:{start:{line:32,column:18},end:{line:34,column:5}},6:{start:{line:35,column:4},end:{line:39,column:5}},7:{start:{line:36,column:6},end:{line:36,column:29}},8:{start:{line:38,column:6},end:{line:38,column:30}},9:{start:{line:40,column:4},end:{line:43,column:7}},10:{start:{line:46,column:20},end:{line:48,column:5}},11:{start:{line:49,column:4},end:{line:53,column:5}},12:{start:{line:50,column:6},end:{line:50,column:31}},13:{start:{line:52,column:6},end:{line:52,column:32}},14:{start:{line:54,column:4},end:{line:57,column:7}},15:{start:{line:60,column:23},end:{line:62,column:5}},16:{start:{line:63,column:4},end:{line:67,column:5}},17:{start:{line:64,column:6},end:{line:64,column:29}},18:{start:{line:66,column:6},end:{line:66,column:30}},19:{start:{line:68,column:4},end:{line:71,column:7}},20:{start:{line:74,column:25},end:{line:76,column:5}},21:{start:{line:77,column:4},end:{line:81,column:5}},22:{start:{line:78,column:6},end:{line:78,column:36}},23:{start:{line:80,column:6},end:{line:80,column:37}},24:{start:{line:82,column:4},end:{line:82,column:44}},25:{start:{line:85,column:21},end:{line:85,column:55}},26:{start:{line:86,column:54},end:{line:86,column:64}},27:{start:{line:87,column:16},end:{line:87,column:38}},28:{start:{line:88,column:18},end:{line:88,column:49}},29:{start:{line:89,column:23},end:{line:89,column:59}},30:{start:{line:90,column:20},end:{line:90,column:53}},31:{start:{line:91,column:23},end:{line:91,column:59}},32:{start:{line:92,column:4},end:{line:335,column:6}},33:{start:{line:107,column:35},end:{line:107,column:74}},34:{start:{line:117,column:35},end:{line:117,column:75}},35:{start:{line:125,column:35},end:{line:125,column:76}},36:{start:{line:135,column:35},end:{line:135,column:76}},37:{start:{line:145,column:35},end:{line:145,column:104}},38:{start:{line:155,column:35},end:{line:155,column:105}},39:{start:{line:165,column:35},end:{line:165,column:98}},40:{start:{line:175,column:35},end:{line:175,column:102}},41:{start:{line:187,column:35},end:{line:187,column:76}},42:{start:{line:197,column:35},end:{line:197,column:74}},43:{start:{line:207,column:35},end:{line:207,column:77}},44:{start:{line:217,column:35},end:{line:217,column:75}},45:{start:{line:229,column:35},end:{line:229,column:76}},46:{start:{line:239,column:35},end:{line:239,column:75}},47:{start:{line:249,column:35},end:{line:249,column:79}},48:{start:{line:261,column:35},end:{line:261,column:78}},49:{start:{line:271,column:35},end:{line:271,column:78}},50:{start:{line:281,column:35},end:{line:281,column:84}},51:{start:{line:291,column:35},end:{line:291,column:80}},52:{start:{line:301,column:35},end:{line:301,column:83}},53:{start:{line:316,column:35},end:{line:316,column:67}},54:{start:{line:330,column:35},end:{line:330,column:87}},55:{start:{line:338,column:22},end:{line:338,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:44},end:{line:30,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:39},end:{line:44,column:3}},line:31},2:{name:"(anonymous_2)",decl:{start:{line:45,column:2},end:{line:45,column:3}},loc:{start:{line:45,column:41},end:{line:58,column:3}},line:45},3:{name:"(anonymous_3)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:30},end:{line:72,column:3}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:39},end:{line:83,column:3}},line:73},5:{name:"(anonymous_5)",decl:{start:{line:84,column:2},end:{line:84,column:3}},loc:{start:{line:84,column:11},end:{line:336,column:3}},line:84},6:{name:"(anonymous_6)",decl:{start:{line:107,column:24},end:{line:107,column:25}},loc:{start:{line:107,column:35},end:{line:107,column:74}},line:107},7:{name:"(anonymous_7)",decl:{start:{line:117,column:24},end:{line:117,column:25}},loc:{start:{line:117,column:35},end:{line:117,column:75}},line:117},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:35},end:{line:125,column:76}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:135,column:24},end:{line:135,column:25}},loc:{start:{line:135,column:35},end:{line:135,column:76}},line:135},10:{name:"(anonymous_10)",decl:{start:{line:145,column:24},end:{line:145,column:25}},loc:{start:{line:145,column:35},end:{line:145,column:104}},line:145},11:{name:"(anonymous_11)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:35},end:{line:155,column:105}},line:155},12:{name:"(anonymous_12)",decl:{start:{line:165,column:24},end:{line:165,column:25}},loc:{start:{line:165,column:35},end:{line:165,column:98}},line:165},13:{name:"(anonymous_13)",decl:{start:{line:175,column:24},end:{line:175,column:25}},loc:{start:{line:175,column:35},end:{line:175,column:102}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:187,column:24},end:{line:187,column:25}},loc:{start:{line:187,column:35},end:{line:187,column:76}},line:187},15:{name:"(anonymous_15)",decl:{start:{line:197,column:24},end:{line:197,column:25}},loc:{start:{line:197,column:35},end:{line:197,column:74}},line:197},16:{name:"(anonymous_16)",decl:{start:{line:207,column:24},end:{line:207,column:25}},loc:{start:{line:207,column:35},end:{line:207,column:77}},line:207},17:{name:"(anonymous_17)",decl:{start:{line:217,column:24},end:{line:217,column:25}},loc:{start:{line:217,column:35},end:{line:217,column:75}},line:217},18:{name:"(anonymous_18)",decl:{start:{line:229,column:24},end:{line:229,column:25}},loc:{start:{line:229,column:35},end:{line:229,column:76}},line:229},19:{name:"(anonymous_19)",decl:{start:{line:239,column:24},end:{line:239,column:25}},loc:{start:{line:239,column:35},end:{line:239,column:75}},line:239},20:{name:"(anonymous_20)",decl:{start:{line:249,column:24},end:{line:249,column:25}},loc:{start:{line:249,column:35},end:{line:249,column:79}},line:249},21:{name:"(anonymous_21)",decl:{start:{line:261,column:24},end:{line:261,column:25}},loc:{start:{line:261,column:35},end:{line:261,column:78}},line:261},22:{name:"(anonymous_22)",decl:{start:{line:271,column:24},end:{line:271,column:25}},loc:{start:{line:271,column:35},end:{line:271,column:78}},line:271},23:{name:"(anonymous_23)",decl:{start:{line:281,column:24},end:{line:281,column:25}},loc:{start:{line:281,column:35},end:{line:281,column:84}},line:281},24:{name:"(anonymous_24)",decl:{start:{line:291,column:24},end:{line:291,column:25}},loc:{start:{line:291,column:35},end:{line:291,column:80}},line:291},25:{name:"(anonymous_25)",decl:{start:{line:301,column:24},end:{line:301,column:25}},loc:{start:{line:301,column:35},end:{line:301,column:83}},line:301},26:{name:"(anonymous_26)",decl:{start:{line:316,column:24},end:{line:316,column:25}},loc:{start:{line:316,column:35},end:{line:316,column:67}},line:316},27:{name:"(anonymous_27)",decl:{start:{line:330,column:24},end:{line:330,column:25}},loc:{start:{line:330,column:35},end:{line:330,column:87}},line:330}},branchMap:{0:{loc:{start:{line:21,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:25,column:5}},{start:{line:23,column:11},end:{line:25,column:5}}],line:21},1:{loc:{start:{line:35,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:39,column:5}},{start:{line:37,column:11},end:{line:39,column:5}}],line:35},2:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:49},3:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},4:{loc:{start:{line:77,column:4},end:{line:81,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:81,column:5}},{start:{line:79,column:11},end:{line:81,column:5}}],line:77},5:{loc:{start:{line:85,column:21},end:{line:85,column:55}},type:"binary-expr",locations:[{start:{line:85,column:21},end:{line:85,column:49}},{start:{line:85,column:53},end:{line:85,column:55}}],line:85},6:{loc:{start:{line:88,column:18},end:{line:88,column:49}},type:"binary-expr",locations:[{start:{line:88,column:18},end:{line:88,column:43}},{start:{line:88,column:47},end:{line:88,column:49}}],line:88},7:{loc:{start:{line:89,column:23},end:{line:89,column:59}},type:"binary-expr",locations:[{start:{line:89,column:23},end:{line:89,column:53}},{start:{line:89,column:57},end:{line:89,column:59}}],line:89},8:{loc:{start:{line:90,column:20},end:{line:90,column:53}},type:"binary-expr",locations:[{start:{line:90,column:20},end:{line:90,column:47}},{start:{line:90,column:51},end:{line:90,column:53}}],line:90},9:{loc:{start:{line:91,column:23},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:23},end:{line:91,column:53}},{start:{line:91,column:57},end:{line:91,column:59}}],line:91},10:{loc:{start:{line:185,column:21},end:{line:185,column:42}},type:"binary-expr",locations:[{start:{line:185,column:21},end:{line:185,column:36}},{start:{line:185,column:40},end:{line:185,column:42}}],line:185},11:{loc:{start:{line:315,column:21},end:{line:315,column:55}},type:"binary-expr",locations:[{start:{line:315,column:21},end:{line:315,column:49}},{start:{line:315,column:53},end:{line:315,column:55}}],line:315},12:{loc:{start:{line:329,column:21},end:{line:329,column:62}},type:"binary-expr",locations:[{start:{line:329,column:21},end:{line:329,column:50}},{start:{line:329,column:54},end:{line:329,column:62}}],line:329}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx"],names:[],mappings:"AAqIM,SACE,KADF;AArIN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,qBAAqB,OAAY;AAC/B,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW;AAAA,IACpB,OACK;AACH,iBAAW,OAAO;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAChD,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AAEtD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UACA,oBAAC,SAAM,OAAO,EAAE,YAAY,GAAG,WAAW,OAAO,MAAM,QAAQ,eAAY,yBACzE;AAAA,YAAC;AAAA;AAAA,cACC,UAAS;AAAA,cACT,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D,GACF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,CAAC,UAAU,yBAAyB,sCAAsC,KAAK;AAAA;AAAA,UAC3F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,CAAC,UAAU,yBAAyB,uCAAuC,KAAK;AAAA;AAAA,UAC5F;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,CAAC,UAAU,yBAAyB,gCAAgC,KAAK;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,CAAC,UAAU,yBAAyB,oCAAoC,KAAK;AAAA;AAAA,UACzF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,CAAC,UAAU,KAAK,oBAAoB,QAAQ,KAAK;AAAA;AAAA,UAC7D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,CAAC,UAAU,KAAK,oBAAoB,WAAW,KAAK;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,CAAC,UAAU,KAAK,oBAAoB,UAAU,KAAK;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,CAAC,UAAU,KAAK,oBAAoB,SAAS,KAAK;AAAA;AAAA,UAC9D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,CAAC,UAAU,KAAK,oBAAoB,aAAa,KAAK;AAAA;AAAA,UAClE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,CAAC,UAAU,KAAK,oBAAoB,YAAY,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,CAAC,UAAU,KAAK,sBAAsB,UAAU,KAAK;AAAA;AAAA,UACjE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,CAAC,UAAU,KAAK,sBAAsB,gBAAgB,KAAK;AAAA;AAAA,UACvE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,CAAC,UAAU,KAAK,yBAAyB,SAAS,KAAK;AAAA;AAAA,UACnE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,CAAC,UAAU,KAAK,yBAAyB,YAAY,KAAK;AAAA;AAAA,UACtE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,IAAI,WAAW;AAAA,gBAChB,CAAC,YAAY,UAAU;AAAA,gBACvB,CAAC,SAAS,OAAO;AAAA,gBACjB,CAAC,wBAAwB,sBAAsB;AAAA,cACjD;AAAA,cACA,OAAO,YAAY,MAAM,SAAS,KAAK;AAAA,cACvC,UAAU,CAAC,UAAU,KAAK,qBAAqB,KAAK;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,CAAC,UAAU,yBAAyB,qBAAqB,KAAK;AAAA;AAAA,UAC1E;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"88fb94a6f90f9fea29b8036f99aee1df40b81df7"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sn=function(){return s},s}Sn();class $9e extends En.Component{changeTransitionProperty(e,t){Sn().f[0]++;const i=(Sn().s[0]++,{...this.props.mapStyle.transition});Sn().s[1]++,t===void 0?(Sn().b[0][0]++,Sn().s[2]++,delete i[e]):(Sn().b[0][1]++,Sn().s[3]++,i[e]=t),Sn().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:i})}changeLightProperty(e,t){Sn().f[1]++;const i=(Sn().s[5]++,{...this.props.mapStyle.light});Sn().s[6]++,t===void 0?(Sn().b[1][0]++,Sn().s[7]++,delete i[e]):(Sn().b[1][1]++,Sn().s[8]++,i[e]=t),Sn().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:i})}changeTerrainProperty(e,t){Sn().f[2]++;const i=(Sn().s[10]++,{...this.props.mapStyle.terrain});Sn().s[11]++,t===void 0?(Sn().b[2][0]++,Sn().s[12]++,delete i[e]):(Sn().b[2][1]++,Sn().s[13]++,i[e]=t),Sn().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:i})}changeProjectionType(e){Sn().f[3]++;const t=(Sn().s[15]++,{...this.props.mapStyle.projection});Sn().s[16]++,e===void 0?(Sn().b[3][0]++,Sn().s[17]++,delete t.type):(Sn().b[3][1]++,Sn().s[18]++,t.type=e),Sn().s[19]++,this.props.onStyleChanged({...this.props.mapStyle,projection:t})}changeStyleProperty(e,t){Sn().f[4]++;const i=(Sn().s[20]++,{...this.props.mapStyle});Sn().s[21]++,t===void 0?(Sn().b[4][0]++,Sn().s[22]++,delete i[e]):(Sn().b[4][1]++,Sn().s[23]++,i[e]=t),Sn().s[24]++,this.props.onStyleChanged(i)}render(){Sn().f[5]++;const e=(Sn().s[25]++,Sn().b[5][0]++,this.props.mapStyle.metadata||(Sn().b[5][1]++,{})),{t,onChangeMetadataProperty:i,mapStyle:r}=(Sn().s[26]++,this.props),o=(Sn().s[27]++,voe(t)),s=(Sn().s[28]++,Sn().b[6][0]++,this.props.mapStyle.light||(Sn().b[6][1]++,{})),a=(Sn().s[29]++,Sn().b[7][0]++,this.props.mapStyle.transition||(Sn().b[7][1]++,{})),c=(Sn().s[30]++,Sn().b[8][0]++,this.props.mapStyle.terrain||(Sn().b[8][1]++,{})),h=(Sn().s[31]++,Sn().b[9][0]++,this.props.mapStyle.projection||(Sn().b[9][1]++,{}));return Sn().s[32]++,te.jsx(C1,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:te.jsxs("div",{className:"modal:settings",children:[te.jsx(vd,{label:t("Name"),fieldSpec:Zr.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:m=>(Sn().f[6]++,Sn().s[33]++,this.changeStyleProperty("name",m))}),te.jsx(vd,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:m=>(Sn().f[7]++,Sn().s[34]++,this.changeStyleProperty("owner",m))}),te.jsx(_s,{label:t("Sprite URL"),fieldSpec:Zr.$root.sprite,"data-wd-key":"modal:settings.sprite",children:te.jsx(K6,{lintType:"json",value:this.props.mapStyle.sprite,onChange:m=>(Sn().f[8]++,Sn().s[35]++,this.changeStyleProperty("sprite",m))})}),te.jsx(R5,{label:t("Glyphs URL"),fieldSpec:Zr.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:m=>(Sn().f[9]++,Sn().s[36]++,this.changeStyleProperty("glyphs",m))}),te.jsx(vd,{label:o.maputnik.maptiler_access_token.label,fieldSpec:o.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:m=>(Sn().f[10]++,Sn().s[37]++,i("maputnik:openmaptiles_access_token",m))}),te.jsx(vd,{label:o.maputnik.thunderforest_access_token.label,fieldSpec:o.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:m=>(Sn().f[11]++,Sn().s[38]++,i("maputnik:thunderforest_access_token",m))}),te.jsx(vd,{label:o.maputnik.stadia_access_token.label,fieldSpec:o.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:m=>(Sn().f[12]++,Sn().s[39]++,i("maputnik:stadia_access_token",m))}),te.jsx(vd,{label:o.maputnik.locationiq_access_token.label,fieldSpec:o.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:m=>(Sn().f[13]++,Sn().s[40]++,i("maputnik:locationiq_access_token",m))}),te.jsx(nE,{label:t("Center"),fieldSpec:Zr.$root.center,length:2,type:"number",value:(Sn().b[10][0]++,r.center||(Sn().b[10][1]++,[])),default:[0,0],onChange:m=>(Sn().f[14]++,Sn().s[41]++,this.changeStyleProperty("center",m))}),te.jsx(lm,{label:t("Zoom"),fieldSpec:Zr.$root.zoom,value:r.zoom,default:0,onChange:m=>(Sn().f[15]++,Sn().s[42]++,this.changeStyleProperty("zoom",m))}),te.jsx(lm,{label:t("Bearing"),fieldSpec:Zr.$root.bearing,value:r.bearing,default:Zr.$root.bearing.default,onChange:m=>(Sn().f[16]++,Sn().s[43]++,this.changeStyleProperty("bearing",m))}),te.jsx(lm,{label:t("Pitch"),fieldSpec:Zr.$root.pitch,value:r.pitch,default:Zr.$root.pitch.default,onChange:m=>(Sn().f[17]++,Sn().s[44]++,this.changeStyleProperty("pitch",m))}),te.jsx(Y9e,{label:t("Light anchor"),fieldSpec:Zr.light.anchor,name:"light-anchor",value:s.anchor,options:Object.keys(Zr.light.anchor.values),default:Zr.light.anchor.default,onChange:m=>(Sn().f[18]++,Sn().s[45]++,this.changeLightProperty("anchor",m))}),te.jsx(V9e,{label:t("Light color"),fieldSpec:Zr.light.color,value:s.color,default:Zr.light.color.default,onChange:m=>(Sn().f[19]++,Sn().s[46]++,this.changeLightProperty("color",m))}),te.jsx(lm,{label:t("Light intensity"),fieldSpec:Zr.light.intensity,value:s.intensity,default:Zr.light.intensity.default,onChange:m=>(Sn().f[20]++,Sn().s[47]++,this.changeLightProperty("intensity",m))}),te.jsx(nE,{label:t("Light position"),fieldSpec:Zr.light.position,type:"number",length:Zr.light.position.length,value:s.position,default:Zr.light.position.default,onChange:m=>(Sn().f[21]++,Sn().s[48]++,this.changeLightProperty("position",m))}),te.jsx(vd,{label:t("Terrain source"),fieldSpec:Zr.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:c.source,onChange:m=>(Sn().f[22]++,Sn().s[49]++,this.changeTerrainProperty("source",m))}),te.jsx(lm,{label:t("Terrain exaggeration"),fieldSpec:Zr.terrain.exaggeration,value:c.exaggeration,default:Zr.terrain.exaggeration.default,onChange:m=>(Sn().f[23]++,Sn().s[50]++,this.changeTerrainProperty("exaggeration",m))}),te.jsx(lm,{label:t("Transition delay"),fieldSpec:Zr.transition.delay,value:a.delay,default:Zr.transition.delay.default,onChange:m=>(Sn().f[24]++,Sn().s[51]++,this.changeTransitionProperty("delay",m))}),te.jsx(lm,{label:t("Transition duration"),fieldSpec:Zr.transition.duration,value:a.duration,default:Zr.transition.duration.default,onChange:m=>(Sn().f[25]++,Sn().s[52]++,this.changeTransitionProperty("duration",m))}),te.jsx(K4,{label:t("Projection"),"data-wd-key":"modal:settings.projection",options:[["","Undefined"],["mercator","Mercator"],["globe","Globe"],["vertical-perspective","Vertical Perspective"]],value:(Sn().b[11][0]++,h?.type?.toString()||(Sn().b[11][1]++,"")),onChange:m=>(Sn().f[26]++,Sn().s[53]++,this.changeProjectionType(m))}),te.jsx(K4,{label:o.maputnik.style_renderer.label,fieldSpec:o.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Sn().b[12][0]++,e["maputnik:renderer"]||(Sn().b[12][1]++,"mlgljs")),onChange:m=>(Sn().f[27]++,Sn().s[54]++,i("maputnik:renderer",m))})]})})}}const H9e=(Sn().s[55]++,Fo()($9e));var Bw={exports:{}},Z9e=Bw.exports,XV;function X9e(){return XV||(XV=1,(function(n,e){(function(t,i,r){n.exports=r(),n.exports.default=r()})("slugify",Z9e,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function r(o,s){if(typeof o!="string")throw new Error("slugify: string argument expected");s=typeof s=="string"?{replacement:s}:s||{};var a=i[s.locale]||{},c=s.replacement===void 0?"-":s.replacement,h=s.trim===void 0?!0:s.trim,m=o.normalize().split("").reduce(function(v,x){var E=a[x];return E===void 0&&(E=t[x]),E===void 0&&(E=x),E===c&&(E=" "),v+E.replace(s.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return s.strict&&(m=m.replace(/[^A-Za-z0-9\s]/g,"")),h&&(m=m.trim()),m=m.replace(/\s+/g,c),s.lower&&(m=m.toLowerCase()),m}return r.extend=function(o){Object.assign(t,o)},r})})(Bw)),Bw.exports}var J9e=X9e();const eRe=Su(J9e);var Ow={exports:{}},tRe=Ow.exports,JV;function nRe(){return JV||(JV=1,(function(n,e){(function(t,i){i()})(tRe,function(){function t(h,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,m,v){var x=new XMLHttpRequest;x.open("GET",h),x.responseType="blob",x.onload=function(){c(x.response,m,v)},x.onerror=function(){console.error("could not download file")},x.send()}function r(h){var m=new XMLHttpRequest;m.open("HEAD",h,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(m)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(h,m,v){var x=s.URL||s.webkitURL,E=document.createElement("a");m=m||h.name||"download",E.download=m,E.rel="noopener",typeof h=="string"?(E.href=h,E.origin===location.origin?o(E):r(E.href)?i(h,m,v):o(E,E.target="_blank")):(E.href=x.createObjectURL(h),setTimeout(function(){x.revokeObjectURL(E.href)},4e4),setTimeout(function(){o(E)},0))}:"msSaveOrOpenBlob"in navigator?function(h,m,v){if(m=m||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,v),m);else if(r(h))i(h,m,v);else{var x=document.createElement("a");x.href=h,x.target="_blank",setTimeout(function(){o(x)})}}:function(h,m,v,x){if(x=x||open("","_blank"),x&&(x.document.title=x.document.body.innerText="downloading..."),typeof h=="string")return i(h,m,v);var E=h.type==="application/octet-stream",R=/constructor/i.test(s.HTMLElement)||s.safari,P=/CriOS\/[\d]+/.test(navigator.userAgent);if((P||E&&R||a)&&typeof FileReader<"u"){var z=new FileReader;z.onloadend=function(){var H=z.result;H=P?H:H.replace(/^data:[^;]*;/,"data:attachment/file;"),x?x.location.href=H:location=H,x=null},z.readAsDataURL(h)}else{var Q=s.URL||s.webkitURL,Y=Q.createObjectURL(h);x?x.location=Y:location.href=Y,x=null,setTimeout(function(){Q.revokeObjectURL(Y)},4e4)}});s.saveAs=c.saveAs=c,n.exports=c})})(Ow)),Ow.exports}var e$=nRe();const iRe="5.10.0",rRe="get_your_own_OpIi9ZULNHzrESv6T2vL",oRe="b71f7f0ba4064f5eb9e903859a9cf5c6",sRe="pk.put_your_api_key_here7bb23dffeb4",boe={openmaptiles:rRe,thunderforest:oRe,locationiq:sRe};function Mn(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Mn=function(){return s},s}Mn();const aRe=(Mn().s[0]++,_oe({version:8,sources:{},layers:[]}));function Coe(){return Mn().f[0]++,Mn().s[1]++,Math.random().toString(36).substring(2,9)}function lRe(n){return Mn().f[1]++,Mn().s[2]++,Mn().b[1][0]++,!("id"in n)||(Mn().b[1][1]++,!n.id)?(Mn().b[0][0]++,Mn().s[3]++,n.id=Coe()):Mn().b[0][1]++,Mn().s[4]++,n}function uRe(n){Mn().f[2]++;const e=(Mn().s[5]++,n.layers.map(t=>{Mn().f[3]++;const i=(Mn().s[6]++,{...t});return Mn().s[7]++,delete i.interactive,Mn().s[8]++,i}));return Mn().s[9]++,{...n,layers:e}}function cRe(n){return Mn().f[4]++,Mn().s[10]++,{...n,layers:rue(n.layers)}}function _oe(n){return Mn().f[5]++,Mn().s[11]++,uRe(cRe(lRe(n)))}function ARe(n,e){Mn().f[6]++,Mn().s[12]++;for(let t=(Mn().s[13]++,0);t<n.length;t++){if(Mn().s[14]++,n[t].id===e)return Mn().b[2][0]++,Mn().s[15]++,t;Mn().b[2][1]++}return Mn().s[16]++,null}function KU(n,e,t){Mn().f[7]++;const i=(Mn().s[17]++,Mn().b[3][0]++,e.metadata||(Mn().b[3][1]++,{}));let r=(Mn().s[18]++,i[`maputnik:${n}_access_token`]);return Mn().s[19]++,Mn().b[5][0]++,t.allowFallback&&(Mn().b[5][1]++,!r)?(Mn().b[4][0]++,Mn().s[20]++,r=boe[n]):Mn().b[4][1]++,Mn().s[21]++,r}function hRe(n,e,t=(Mn().b[6][0]++,{})){Mn().f[8]++;const i=(Mn().s[22]++,n.sources[e]);if(Mn().s[23]++,i)Mn().b[7][1]++;else return Mn().b[7][0]++,Mn().s[24]++,n;if(Mn().s[25]++,Mn().b[9][0]++,!("url"in i)||(Mn().b[9][1]++,!i.url))return Mn().b[8][0]++,Mn().s[26]++,n;Mn().b[8][1]++;let r=(Mn().s[27]++,e);Mn().s[28]++,Mn().b[11][0]++,e==="thunderforest_transport"||(Mn().b[11][1]++,e==="thunderforest_outdoors")?(Mn().b[10][0]++,Mn().s[29]++,r="thunderforest"):(Mn().b[10][1]++,Mn().s[30]++,Mn().b[13][0]++,"url"in i&&(Mn().b[13][1]++,i.url?.match(/\.stadiamaps\.com/))?(Mn().b[12][0]++,Mn().s[31]++,r="stadia"):(Mn().b[12][1]++,Mn().s[32]++,Mn().b[15][0]++,"url"in i&&(Mn().b[15][1]++,i.url?.match(/\.locationiq\.com/))?(Mn().b[14][0]++,Mn().s[33]++,r="locationiq"):Mn().b[14][1]++));const o=(Mn().s[34]++,KU(r,n,t));if(Mn().s[35]++,o)Mn().b[16][1]++;else return Mn().b[16][0]++,Mn().s[36]++,n;let s;Mn().s[37]++,r=="stadia"?(Mn().b[17][0]++,Mn().s[38]++,s=`${i.url}?api_key=${o}`):(Mn().b[17][1]++,Mn().s[39]++,s=i.url.replace("{key}",o));const a=(Mn().s[40]++,{...n.sources,[e]:{...i,url:s}}),c=(Mn().s[41]++,{...n,sources:a});return Mn().s[42]++,c}function dRe(n,e=(Mn().b[18][0]++,{})){Mn().f[9]++;let t=(Mn().s[43]++,n);if(Mn().s[44]++,Object.keys(n.sources).forEach(i=>{Mn().f[10]++,Mn().s[45]++,t=hRe(t,i,e)}),Mn().s[46]++,Mn().b[20][0]++,n.glyphs&&(Mn().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||(Mn().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){Mn().b[19][0]++;const i=(Mn().s[47]++,KU("openmaptiles",n,e));Mn().s[48]++,i?(Mn().b[21][0]++,Mn().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",i)}):Mn().b[21][1]++}else Mn().b[19][1]++;return Mn().s[50]++,t}function fRe(n){Mn().f[11]++;const e=(Mn().s[51]++,{...n.metadata});return Mn().s[52]++,delete e["maputnik:openmaptiles_access_token"],Mn().s[53]++,delete e["maputnik:thunderforest_access_token"],Mn().s[54]++,delete e["maputnik:stadia_access_token"],Mn().s[55]++,delete e["maputnik:locationiq_access_token"],Mn().s[56]++,{...n,metadata:e}}const Od={ensureStyleValidity:_oe,emptyStyle:aRe,indexOfLayer:ARe,generateId:Coe,getAccessToken:KU,replaceAccessTokens:dRe,stripAccessTokens:fRe};function oi(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",e="0479ae849bf143a83f826f9fdcad7b323ec1b109",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAA8B,uBAAsB;AAEpD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0479ae849bf143a83f826f9fdcad7b323ec1b109"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return oi=function(){return s},s}oi();const t$=(oi().s[0]++,iRe),n$=(oi().s[1]++,typeof window.showSaveFilePicker=="function");class pRe extends En.Component{tokenizedStyle(){return oi().f[0]++,oi().s[2]++,hAe(Od.stripAccessTokens(Od.replaceAccessTokens(this.props.mapStyle)))}exportName(){return oi().f[1]++,oi().s[3]++,this.props.mapStyle.name?(oi().b[0][0]++,oi().s[4]++,eRe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(oi().b[0][1]++,oi().s[5]++,this.props.mapStyle.id)}createHtml(){oi().f[2]++;const e=(oi().s[6]++,this.tokenizedStyle()),t=(oi().s[7]++,oi().b[1][0]++,this.props.mapStyle.name||(oi().b[1][1]++,this.props.t("Map"))),i=(oi().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${t$}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${t$}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),r=(oi().s[9]++,new Blob([i],{type:"text/html;charset=utf-8"})),o=(oi().s[10]++,this.exportName());oi().s[11]++,e$.saveAs(r,o+".html")}async saveStyle(){oi().f[3]++;const e=(oi().s[12]++,this.tokenizedStyle());if(oi().s[13]++,n$)oi().b[2][1]++;else{oi().b[2][0]++;const r=(oi().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),o=(oi().s[15]++,this.exportName());oi().s[16]++,e$.saveAs(r,o+".json"),oi().s[17]++;return}let t=(oi().s[18]++,this.props.fileHandle);if(oi().s[19]++,t==null)if(oi().b[3][0]++,oi().s[20]++,t=await this.createFileHandle(),oi().s[21]++,this.props.onSetFileHandle(t),oi().s[22]++,t==null){oi().b[4][0]++,oi().s[23]++;return}else oi().b[4][1]++;else oi().b[3][1]++;const i=(oi().s[24]++,await t.createWritable());oi().s[25]++,await i.write(e),oi().s[26]++,await i.close(),oi().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){oi().f[4]++;const e=(oi().s[28]++,this.tokenizedStyle()),t=(oi().s[29]++,await this.createFileHandle());if(oi().s[30]++,this.props.onSetFileHandle(t),oi().s[31]++,t==null){oi().b[5][0]++,oi().s[32]++;return}else oi().b[5][1]++;const i=(oi().s[33]++,await t.createWritable());oi().s[34]++,await i.write(e),oi().s[35]++,await i.close(),oi().s[36]++,this.props.onOpenToggle()}async createFileHandle(){oi().f[5]++;const e=(oi().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(oi().s[38]++,await window.showSaveFilePicker(e));return oi().s[39]++,this.props.onSetFileHandle(t),oi().s[40]++,t}changeMetadataProperty(e,t){oi().f[6]++;const i=(oi().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});oi().s[42]++,this.props.onStyleChanged(i)}render(){oi().f[7]++;const e=(oi().s[43]++,this.props.t),t=(oi().s[44]++,voe(e));return oi().s[45]++,te.jsx(C1,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Save Style")}),te.jsx("p",{children:e("Save the JSON style to your computer.")}),te.jsxs("div",{children:[te.jsx(vd,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(oi().b[6][0]++,this.props.mapStyle.metadata||(oi().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),te.jsx(vd,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(oi().b[7][0]++,this.props.mapStyle.metadata||(oi().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),te.jsx(vd,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(oi().b[8][0]++,this.props.mapStyle.metadata||(oi().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),te.jsx(vd,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(oi().b[9][0]++,this.props.mapStyle.metadata||(oi().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),te.jsxs("div",{className:"maputnik-modal-export-buttons",children:[te.jsxs(Zs,{onClick:this.saveStyle.bind(this),children:[te.jsx(RT,{}),e("Save")]}),(oi().b[10][0]++,n$&&(oi().b[10][1]++,te.jsxs(Zs,{onClick:this.saveStyleAs.bind(this),children:[te.jsx(RT,{}),e("Save as")]}))),te.jsxs(Zs,{onClick:this.createHtml.bind(this),children:[te.jsx(nde,{}),e("Create HTML")]})]})]})})}}const mRe=(oi().s[46]++,Fo()(pRe));function F4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="d4204cb1114c57682afd09034f9cc8268e27db52",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAAsD;AAC7D,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4204cb1114c57682afd09034f9cc8268e27db52"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return F4=function(){return s},s}F4();F4().s[0]++;const xoe=n=>(F4().f[0]++,F4().s[1]++,te.jsx(Py,{label:n.label,children:te.jsx(Ew,{...n})}));function j4(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="10be4a5b6db1d1fa2555f9b6247244050c0b65b8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAA8C;AAQrD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10be4a5b6db1d1fa2555f9b6247244050c0b65b8"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return j4=function(){return s},s}j4();j4().s[0]++;const gRe=n=>(j4().f[0]++,j4().s[1]++,te.jsx(_s,{label:n.label,children:te.jsx(hoe,{...n})}));function vn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",e="18323b845fc84e69550b153f838c0967a64d83cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:242,column:9}},37:{start:{line:222,column:12},end:{line:225,column:15}},38:{start:{line:235,column:12},end:{line:238,column:15}},39:{start:{line:247,column:14},end:{line:247,column:26}},40:{start:{line:248,column:4},end:{line:263,column:9}},41:{start:{line:256,column:29},end:{line:259,column:12}},42:{start:{line:268,column:14},end:{line:268,column:26}},43:{start:{line:269,column:24},end:{line:275,column:5}},44:{start:{line:276,column:4},end:{line:340,column:5}},45:{start:{line:278,column:8},end:{line:278,column:79}},46:{start:{line:280,column:8},end:{line:280,column:85}},47:{start:{line:282,column:8},end:{line:282,column:77}},48:{start:{line:284,column:8},end:{line:284,column:76}},49:{start:{line:286,column:8},end:{line:286,column:77}},50:{start:{line:288,column:8},end:{line:300,column:13}},51:{start:{line:293,column:36},end:{line:296,column:14}},52:{start:{line:302,column:8},end:{line:302,column:77}},53:{start:{line:304,column:8},end:{line:331,column:13}},54:{start:{line:310,column:38},end:{line:313,column:16}},55:{start:{line:324,column:38},end:{line:327,column:16}},56:{start:{line:333,column:8},end:{line:333,column:76}},57:{start:{line:335,column:8},end:{line:335,column:74}},58:{start:{line:337,column:8},end:{line:337,column:74}},59:{start:{line:339,column:8},end:{line:339,column:20}},60:{start:{line:343,column:31},end:{line:343,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:243,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:221,column:20},end:{line:221,column:21}},loc:{start:{line:221,column:30},end:{line:226,column:11}},line:221},23:{name:"(anonymous_23)",decl:{start:{line:234,column:20},end:{line:234,column:21}},loc:{start:{line:234,column:33},end:{line:239,column:11}},line:234},24:{name:"(anonymous_24)",decl:{start:{line:246,column:2},end:{line:246,column:3}},loc:{start:{line:246,column:11},end:{line:264,column:3}},line:246},25:{name:"(anonymous_25)",decl:{start:{line:256,column:20},end:{line:256,column:21}},loc:{start:{line:256,column:29},end:{line:259,column:12}},line:256},26:{name:"(anonymous_26)",decl:{start:{line:267,column:2},end:{line:267,column:3}},loc:{start:{line:267,column:11},end:{line:341,column:3}},line:267},27:{name:"(anonymous_27)",decl:{start:{line:293,column:22},end:{line:293,column:23}},loc:{start:{line:293,column:36},end:{line:296,column:14}},line:293},28:{name:"(anonymous_28)",decl:{start:{line:310,column:24},end:{line:310,column:25}},loc:{start:{line:310,column:38},end:{line:313,column:16}},line:310},29:{name:"(anonymous_29)",decl:{start:{line:324,column:24},end:{line:324,column:25}},loc:{start:{line:324,column:38},end:{line:327,column:16}},line:324}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:258,column:17},end:{line:258,column:72}},type:"cond-expr",locations:[{start:{line:258,column:48},end:{line:258,column:51}},{start:{line:258,column:54},end:{line:258,column:72}}],line:258},4:{loc:{start:{line:276,column:4},end:{line:340,column:5}},type:"switch",locations:[{start:{line:277,column:6},end:{line:278,column:79}},{start:{line:279,column:6},end:{line:280,column:85}},{start:{line:281,column:6},end:{line:282,column:77}},{start:{line:283,column:6},end:{line:284,column:76}},{start:{line:285,column:6},end:{line:286,column:77}},{start:{line:287,column:6},end:{line:300,column:13}},{start:{line:301,column:6},end:{line:302,column:77}},{start:{line:303,column:6},end:{line:331,column:13}},{start:{line:332,column:6},end:{line:333,column:76}},{start:{line:334,column:6},end:{line:335,column:74}},{start:{line:336,column:6},end:{line:337,column:74}},{start:{line:338,column:6},end:{line:339,column:20}}],line:276},5:{loc:{start:{line:297,column:19},end:{line:297,column:86}},type:"binary-expr",locations:[{start:{line:297,column:19},end:{line:297,column:45}},{start:{line:297,column:49},end:{line:297,column:86}}],line:297},6:{loc:{start:{line:314,column:21},end:{line:314,column:92}},type:"binary-expr",locations:[{start:{line:314,column:21},end:{line:314,column:47}},{start:{line:314,column:51},end:{line:314,column:92}}],line:314},7:{loc:{start:{line:328,column:21},end:{line:328,column:92}},type:"binary-expr",locations:[{start:{line:328,column:21},end:{line:328,column:47}},{start:{line:328,column:51},end:{line:328,column:92}}],line:328}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA6BW,SACL,KADK;AA7BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,SAA+B,uBAAuB;AAGtD,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAc1B,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAS;AAAA,UACT,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACtB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAClB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"18323b845fc84e69550b153f838c0967a64d83cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return vn=function(){return s},s}vn();class rT extends En.Component{render(){vn().f[0]++;const e=(vn().s[0]++,this.props.t);return vn().s[1]++,te.jsxs("div",{children:[te.jsx(R5,{label:e("TileJSON URL"),fieldSpec:ns.source_vector.url,value:this.props.source.url,onChange:t=>(vn().f[1]++,vn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class oT extends En.Component{changeTileUrls(e){vn().f[2]++,vn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){vn().f[3]++;const e=(vn().s[4]++,vn().b[0][0]++,this.props.source.tiles||(vn().b[0][1]++,[]));return vn().s[5]++,te.jsx(xoe,{label:this.props.t("Tile URL"),fieldSpec:ns.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){vn().f[4]++;const e=(vn().s[6]++,this.props.t);return vn().s[7]++,te.jsxs("div",{children:[this.renderTileUrls(),te.jsx(K4,{label:e("Scheme Type"),fieldSpec:ns.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(vn().f[5]++,vn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),te.jsx(lm,{label:e("Min Zoom"),fieldSpec:ns.source_vector.minzoom,value:(vn().b[1][0]++,this.props.source.minzoom||(vn().b[1][1]++,0)),onChange:t=>(vn().f[6]++,vn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),te.jsx(lm,{label:e("Max Zoom"),fieldSpec:ns.source_vector.maxzoom,value:(vn().b[2][0]++,this.props.source.maxzoom||(vn().b[2][1]++,22)),onChange:t=>(vn().f[7]++,vn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}vn().s[11]++;const Moe=n=>(vn().f[8]++,vn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class yRe extends En.Component{render(){vn().f[9]++;const e=(vn().s[13]++,this.props.t);vn().s[14]++;const t=(i,r)=>{vn().f[10]++;const o=(vn().s[15]++,this.props.source.coordinates.slice(0));vn().s[16]++,o[i]=r,vn().s[17]++,this.props.onChange({...this.props.source,coordinates:o})};return vn().s[18]++,te.jsxs("div",{children:[te.jsx(R5,{label:e("Image URL"),fieldSpec:ns.source_image.url,value:this.props.source.url,onChange:i=>(vn().f[11]++,vn().s[19]++,this.props.onChange({...this.props.source,url:i}))}),Moe(e).map(({label:i,key:r},o)=>(vn().f[12]++,vn().s[20]++,te.jsx(nE,{label:i,length:2,type:"number",value:this.props.source.coordinates[o],default:[0,0],onChange:s=>(vn().f[13]++,vn().s[21]++,t(o,s))},r)))]})}}class vRe extends En.Component{render(){vn().f[14]++;const e=(vn().s[22]++,this.props.t);vn().s[23]++;const t=(r,o)=>{vn().f[15]++;const s=(vn().s[24]++,this.props.source.coordinates.slice(0));vn().s[25]++,s[r]=o,vn().s[26]++,this.props.onChange({...this.props.source,coordinates:s})};vn().s[27]++;const i=r=>{vn().f[16]++,vn().s[28]++,this.props.onChange({...this.props.source,urls:r})};return vn().s[29]++,te.jsxs("div",{children:[te.jsx(xoe,{label:e("Video URL"),fieldSpec:ns.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:i}),Moe(e).map(({label:r,key:o},s)=>(vn().f[17]++,vn().s[30]++,te.jsx(nE,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(vn().f[18]++,vn().s[31]++,t(s,a))},o)))]})}}class bRe extends En.Component{render(){vn().f[19]++;const e=(vn().s[32]++,this.props.t);return vn().s[33]++,te.jsx(R5,{label:e("GeoJSON URL"),fieldSpec:ns.source_geojson.data,value:this.props.source.data,onChange:t=>(vn().f[20]++,vn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class CRe extends En.Component{render(){vn().f[21]++;const e=(vn().s[35]++,this.props.t);return vn().s[36]++,te.jsxs("div",{children:[te.jsx(_s,{label:e("GeoJSON"),fieldSpec:ns.source_geojson.data,children:te.jsx(K6,{value:this.props.source.data,lintType:"json",onChange:t=>{vn().f[22]++,vn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),te.jsx(gRe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{vn().f[23]++,vn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class _Re extends En.Component{render(){vn().f[24]++;const e=(vn().s[39]++,this.props.t);return vn().s[40]++,te.jsxs("div",{children:[te.jsx(R5,{label:e("PMTiles URL"),fieldSpec:ns.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(vn().f[25]++,vn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(vn().b[3][0]++,t):(vn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class xRe extends En.Component{render(){vn().f[26]++;const e=(vn().s[42]++,this.props.t),t=(vn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(vn().s[44]++,this.props.mode){case"geojson_url":return vn().b[4][0]++,vn().s[45]++,te.jsx(bRe,{...t});case"geojson_json":return vn().b[4][1]++,vn().s[46]++,te.jsx(CRe,{...t});case"tilejson_vector":return vn().b[4][2]++,vn().s[47]++,te.jsx(rT,{...t});case"tile_vector":return vn().b[4][3]++,vn().s[48]++,te.jsx(oT,{...t});case"tilejson_raster":return vn().b[4][4]++,vn().s[49]++,te.jsx(rT,{...t});case"tile_raster":return vn().b[4][5]++,vn().s[50]++,te.jsx(oT,{...t,children:te.jsx(lm,{label:e("Tile Size"),fieldSpec:ns.source_raster.tileSize,onChange:i=>(vn().f[27]++,vn().s[51]++,this.props.onChange({...this.props.source,tileSize:i})),value:(vn().b[5][0]++,this.props.source.tileSize||(vn().b[5][1]++,ns.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return vn().b[4][6]++,vn().s[52]++,te.jsx(rT,{...t});case"tilexyz_raster-dem":return vn().b[4][7]++,vn().s[53]++,te.jsxs(oT,{...t,children:[te.jsx(lm,{label:e("Tile Size"),fieldSpec:ns.source_raster_dem.tileSize,onChange:i=>(vn().f[28]++,vn().s[54]++,this.props.onChange({...this.props.source,tileSize:i})),value:(vn().b[6][0]++,this.props.source.tileSize||(vn().b[6][1]++,ns.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),te.jsx(K4,{label:e("Encoding"),fieldSpec:ns.source_raster_dem.encoding,options:Object.keys(ns.source_raster_dem.encoding.values),onChange:i=>(vn().f[29]++,vn().s[55]++,this.props.onChange({...this.props.source,encoding:i})),value:(vn().b[7][0]++,this.props.source.encoding||(vn().b[7][1]++,ns.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return vn().b[4][8]++,vn().s[56]++,te.jsx(_Re,{...t});case"image":return vn().b[4][9]++,vn().s[57]++,te.jsx(yRe,{...t});case"video":return vn().b[4][10]++,vn().s[58]++,te.jsx(vRe,{...t});default:return vn().b[4][11]++,vn().s[59]++,null}}}const woe=(vn().s[60]++,Fo()(xRe));function gm(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return gm=function(){return s},s}gm();function MRe(n,e){gm().f[0]++;const t=(gm().s[0]++,{...n.sources});return gm().s[1]++,delete t[e],gm().s[2]++,{...n,sources:t}}function i$(n,e,t){return gm().f[1]++,gm().s[3]++,Soe(n,e,t)}function Soe(n,e,t){gm().f[2]++;const i=(gm().s[4]++,{...n.sources,[e]:t});return gm().s[5]++,{...n,sources:i}}const wRe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},SRe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},ERe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},BRe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},ORe={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},r$={openmaptiles:wRe,thunderforest_transport:SRe,thunderforest_outdoors:ERe,open_zoomstack:BRe,locationiq:ORe};function Gt(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",e="30dc2f79b5d8eab063b35a7a783386d299d39465",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAAiD;AAExD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACX,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACnB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"30dc2f79b5d8eab063b35a7a783386d299d39465"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Gt=function(){return s},s}Gt();class IRe extends En.Component{render(){return Gt().f[0]++,Gt().s[0]++,te.jsx("div",{className:"maputnik-public-source",children:te.jsxs(Zs,{className:"maputnik-public-source-select",onClick:()=>(Gt().f[1]++,Gt().s[1]++,this.props.onSelect(this.props.id)),children:[te.jsxs("div",{className:"maputnik-public-source-info",children:[te.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),te.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),te.jsx("span",{className:"maputnik-space"}),te.jsx(sZ,{})]})})}}function kRe(n){return Gt().f[2]++,Gt().s[2]++,n.type==="raster"?(Gt().b[0][0]++,Gt().s[3]++,n.tiles?(Gt().b[1][0]++,Gt().s[4]++,"tile_raster"):(Gt().b[1][1]++,Gt().s[5]++,"tilejson_raster")):(Gt().b[0][1]++,Gt().s[6]++,n.type==="raster-dem"?(Gt().b[2][0]++,Gt().s[7]++,n.tiles?(Gt().b[3][0]++,Gt().s[8]++,"tilexyz_raster-dem"):(Gt().b[3][1]++,Gt().s[9]++,"tilejson_raster-dem")):(Gt().b[2][1]++,Gt().s[10]++,n.type==="vector"?(Gt().b[4][0]++,Gt().s[11]++,n.tiles?(Gt().b[5][0]++,Gt().s[12]++,"tile_vector"):(Gt().b[5][1]++,Gt().s[13]++,Gt().b[7][0]++,n.url&&(Gt().b[7][1]++,n.url.startsWith("pmtiles://"))?(Gt().b[6][0]++,Gt().s[14]++,"pmtiles_vector"):(Gt().b[6][1]++,Gt().s[15]++,"tilejson_vector"))):(Gt().b[4][1]++,Gt().s[16]++,n.type==="geojson"?(Gt().b[8][0]++,Gt().s[17]++,typeof n.data=="string"?(Gt().b[9][0]++,Gt().s[18]++,"geojson_url"):(Gt().b[9][1]++,Gt().s[19]++,"geojson_json")):(Gt().b[8][1]++,Gt().s[20]++,n.type==="image"?(Gt().b[10][0]++,Gt().s[21]++,"image"):(Gt().b[10][1]++,Gt().s[22]++,n.type==="video"?(Gt().b[11][0]++,Gt().s[23]++,"video"):(Gt().b[11][1]++,Gt().s[24]++,null))))))}class TRe extends En.Component{render(){Gt().f[3]++;const e=(Gt().s[25]++,this.props.t);return Gt().s[26]++,te.jsxs("div",{className:"maputnik-active-source-type-editor",children:[te.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[te.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),te.jsx("span",{className:"maputnik-space"}),te.jsx(Zs,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(Gt().f[4]++,Gt().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:te.jsx(Hb,{})})]}),te.jsx("div",{className:"maputnik-active-source-type-editor-content",children:te.jsx(woe,{onChange:this.props.onChange,mode:kRe(this.props.source),source:this.props.source})})]})}}class RRe extends En.Component{constructor(e){Gt().f[5]++,Gt().s[28]++,super(e),Gt().s[29]++,this.state={mode:"tilejson_vector",sourceId:Od.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){Gt().f[6]++;const t=(Gt().s[30]++,Gt().b[12][0]++,(Gt().b[13][0]++,this.state||(Gt().b[13][1]++,{})).source||(Gt().b[12][1]++,{})),{protocol:i}=(Gt().s[31]++,window.location);switch(Gt().s[32]++,e){case"pmtiles_vector":return Gt().b[14][0]++,Gt().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return Gt().b[14][1]++,Gt().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return Gt().b[14][2]++,Gt().s[35]++,{type:"geojson",cluster:(Gt().b[15][0]++,t.cluster||(Gt().b[15][1]++,!1)),data:""};case"tilejson_vector":return Gt().b[14][3]++,Gt().s[36]++,{type:"vector",url:(Gt().b[16][0]++,t.url||(Gt().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return Gt().b[14][4]++,Gt().s[37]++,{type:"vector",tiles:(Gt().b[17][0]++,t.tiles||(Gt().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(Gt().b[18][0]++,t.minzoom||(Gt().b[18][1]++,0)),maxzoom:(Gt().b[19][0]++,t.maxzoom||(Gt().b[19][1]++,14)),scheme:(Gt().b[20][0]++,t.scheme||(Gt().b[20][1]++,"xyz"))};case"tilejson_raster":return Gt().b[14][5]++,Gt().s[38]++,{type:"raster",url:(Gt().b[21][0]++,t.url||(Gt().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return Gt().b[14][6]++,Gt().s[39]++,{type:"raster",tiles:(Gt().b[22][0]++,t.tiles||(Gt().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Gt().b[23][0]++,t.minzoom||(Gt().b[23][1]++,0)),maxzoom:(Gt().b[24][0]++,t.maxzoom||(Gt().b[24][1]++,14)),scheme:(Gt().b[25][0]++,t.scheme||(Gt().b[25][1]++,"xyz")),tileSize:(Gt().b[26][0]++,t.tileSize||(Gt().b[26][1]++,512))};case"tilejson_raster-dem":return Gt().b[14][7]++,Gt().s[40]++,{type:"raster-dem",url:(Gt().b[27][0]++,t.url||(Gt().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return Gt().b[14][8]++,Gt().s[41]++,{type:"raster-dem",tiles:(Gt().b[28][0]++,t.tiles||(Gt().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(Gt().b[29][0]++,t.minzoom||(Gt().b[29][1]++,0)),maxzoom:(Gt().b[30][0]++,t.maxzoom||(Gt().b[30][1]++,14)),tileSize:(Gt().b[31][0]++,t.tileSize||(Gt().b[31][1]++,512))};case"image":return Gt().b[14][9]++,Gt().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return Gt().b[14][10]++,Gt().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return Gt().b[14][11]++,Gt().s[44]++,{}}}onAdd=(Gt().s[45]++,()=>{Gt().f[7]++;const{source:e,sourceId:t}=(Gt().s[46]++,this.state);Gt().s[47]++,this.props.onAdd(t,e)});onChangeSource=(Gt().s[48]++,e=>{Gt().f[8]++,Gt().s[49]++,this.setState({source:e})});render(){Gt().f[9]++;const e=(Gt().s[50]++,this.props.t),t=(Gt().s[51]++,{doc:Zr.source_vector.type.doc});return Gt().s[52]++,te.jsxs("div",{className:"maputnik-add-source",children:[te.jsx(vd,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(Gt().f[10]++,Gt().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),te.jsx(K4,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:i=>(Gt().f[11]++,Gt().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),te.jsx(woe,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),te.jsx(Zs,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class DRe extends En.Component{stripTitle(e){Gt().f[12]++;const t=(Gt().s[55]++,{...e});return Gt().s[56]++,delete t.title,Gt().s[57]++,t}render(){Gt().f[13]++;const{t:e,mapStyle:t}=(Gt().s[58]++,this.props),i=(Gt().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(Gt().s[60]++,Object.keys(t.sources).map(s=>{Gt().f[14]++;const a=(Gt().s[61]++,t.sources[s]);return Gt().s[62]++,te.jsx(TRe,{sourceId:s,source:a,onChange:c=>(Gt().f[15]++,Gt().s[63]++,this.props.onStyleChanged(Soe(t,s,c))),onDelete:()=>(Gt().f[16]++,Gt().s[64]++,this.props.onStyleChanged(MRe(t,s))),...i},s)})),o=(Gt().s[65]++,Object.keys(r$).filter(s=>(Gt().f[17]++,Gt().s[66]++,!(s in t.sources))).map(s=>{Gt().f[18]++;const a=(Gt().s[67]++,r$[s]);return Gt().s[68]++,te.jsx(IRe,{id:s,type:a.type,title:a.title,onSelect:()=>(Gt().f[19]++,Gt().s[69]++,this.props.onStyleChanged(i$(t,s,this.stripTitle(a))))},s)}));return Gt().s[70]++,te.jsxs(C1,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Active Sources")}),r]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Choose Public Source")}),te.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),te.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:o})]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Add New Source")}),te.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),te.jsx(RRe,{onAdd:(s,a)=>(Gt().f[20]++,Gt().s[71]++,this.props.onStyleChanged(i$(t,s,a))),...i})]})]})}}const PRe=(Gt().s[72]++,Fo()(DRe));function kg(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",e="14882741b03cd24dba8e21fe7c0f0c38039a7560",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:22,column:6}},2:{start:{line:16,column:28},end:{line:16,column:49}},3:{start:{line:19,column:137},end:{line:19,column:159}},4:{start:{line:25,column:21},end:{line:25,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:23,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:28},end:{line:16,column:49}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:130},end:{line:19,column:131}},loc:{start:{line:19,column:137},end:{line:19,column:159}},line:19}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx"],names:[],mappings:"AAkBW,SAOL,KAPK;AAlBX,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAWlB,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"14882741b03cd24dba8e21fe7c0f0c38039a7560"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return kg=function(){return s},s}kg();class KRe extends En.Component{render(){kg().f[0]++;const e=(kg().s[0]++,this.props.t);return kg().s[1]++,te.jsxs(C1,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,title:this.props.title,onOpenToggle:()=>(kg().f[1]++,kg().s[2]++,this.props.onCancel()),children:[te.jsx("p",{children:this.props.message}),te.jsx("p",{className:"maputnik-dialog__buttons",children:te.jsx(Zs,{onClick:t=>(kg().f[2]++,kg().s[3]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const URe=(kg().s[4]++,Fo()(KRe)),Eoe=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function bn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",e="f3a6249e96d42fc8e59bc18fb123f3ec8de2b220",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",statementMap:{0:{start:{line:14,column:4},end:{line:37,column:9}},1:{start:{line:19,column:23},end:{line:19,column:58}},2:{start:{line:42,column:4},end:{line:42,column:17}},3:{start:{line:43,column:4},end:{line:45,column:6}},4:{start:{line:48,column:4},end:{line:50,column:7}},5:{start:{line:53,column:4},end:{line:53,column:31}},6:{start:{line:53,column:11},end:{line:53,column:31}},7:{start:{line:54,column:4},end:{line:60,column:5}},8:{start:{line:55,column:6},end:{line:55,column:39}},9:{start:{line:56,column:6},end:{line:59,column:9}},10:{start:{line:62,column:18},end:{line:99,column:3}},11:{start:{line:63,column:4},end:{line:63,column:22}},12:{start:{line:64,column:19},end:{line:64,column:24}},13:{start:{line:65,column:4},end:{line:90,column:7}},14:{start:{line:69,column:6},end:{line:69,column:29}},15:{start:{line:71,column:6},end:{line:73,column:7}},16:{start:{line:72,column:8},end:{line:72,column:15}},17:{start:{line:74,column:6},end:{line:77,column:9}},18:{start:{line:78,column:23},end:{line:78,column:54}},19:{start:{line:79,column:6},end:{line:79,column:48}},20:{start:{line:80,column:6},end:{line:80,column:39}},21:{start:{line:81,column:6},end:{line:81,column:26}},22:{start:{line:83,column:6},end:{line:87,column:9}},23:{start:{line:88,column:6},end:{line:88,column:25}},24:{start:{line:89,column:6},end:{line:89,column:61}},25:{start:{line:91,column:4},end:{line:98,column:7}},26:{start:{line:94,column:10},end:{line:94,column:26}},27:{start:{line:100,column:16},end:{line:103,column:3}},28:{start:{line:101,column:4},end:{line:101,column:23}},29:{start:{line:102,column:4},end:{line:102,column:44}},30:{start:{line:104,column:15},end:{line:131,column:3}},31:{start:{line:105,column:4},end:{line:105,column:22}},32:{start:{line:106,column:23},end:{line:114,column:5}},33:{start:{line:115,column:25},end:{line:115,column:68}},34:{start:{line:116,column:17},end:{line:116,column:43}},35:{start:{line:117,column:20},end:{line:117,column:37}},36:{start:{line:119,column:4},end:{line:126,column:5}},37:{start:{line:120,column:6},end:{line:120,column:37}},38:{start:{line:122,column:6},end:{line:124,column:9}},39:{start:{line:125,column:6},end:{line:125,column:13}},40:{start:{line:127,column:4},end:{line:127,column:51}},41:{start:{line:128,column:4},end:{line:128,column:49}},42:{start:{line:129,column:4},end:{line:129,column:24}},43:{start:{line:130,column:4},end:{line:130,column:16}},44:{start:{line:134,column:18},end:{line:156,column:3}},45:{start:{line:135,column:4},end:{line:135,column:23}},46:{start:{line:135,column:16},end:{line:135,column:23}},47:{start:{line:136,column:4},end:{line:136,column:35}},48:{start:{line:136,column:28},end:{line:136,column:35}},49:{start:{line:137,column:17},end:{line:137,column:25}},50:{start:{line:138,column:19},end:{line:138,column:35}},51:{start:{line:139,column:4},end:{line:139,column:22}},52:{start:{line:140,column:4},end:{line:140,column:37}},53:{start:{line:141,column:4},end:{line:154,column:6}},54:{start:{line:143,column:6},end:{line:150,column:7}},55:{start:{line:144,column:8},end:{line:144,column:48}},56:{start:{line:146,column:8},end:{line:148,column:11}},57:{start:{line:149,column:8},end:{line:149,column:15}},58:{start:{line:151,column:6},end:{line:151,column:53}},59:{start:{line:152,column:6},end:{line:152,column:39}},60:{start:{line:153,column:6},end:{line:153,column:26}},61:{start:{line:155,column:4},end:{line:155,column:50}},62:{start:{line:155,column:28},end:{line:155,column:49}},63:{start:{line:158,column:4},end:{line:160,column:7}},64:{start:{line:161,column:4},end:{line:161,column:22}},65:{start:{line:162,column:4},end:{line:162,column:30}},66:{start:{line:164,column:16},end:{line:168,column:3}},67:{start:{line:165,column:4},end:{line:167,column:7}},68:{start:{line:170,column:14},end:{line:170,column:26}},69:{start:{line:171,column:25},end:{line:182,column:6}},70:{start:{line:172,column:6},end:{line:181,column:8}},71:{start:{line:184,column:4},end:{line:189,column:5}},72:{start:{line:185,column:6},end:{line:188,column:11}},73:{start:{line:187,column:61},end:{line:187,column:78}},74:{start:{line:190,column:4},end:{line:272,column:9}},75:{start:{line:196,column:30},end:{line:196,column:49}},76:{start:{line:221,column:146},end:{line:221,column:180}},77:{start:{line:268,column:27},end:{line:268,column:56}},78:{start:{line:275,column:18},end:{line:275,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:38,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:19,column:58}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:21},end:{line:46,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:15},end:{line:51,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:27},end:{line:61,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:32},end:{line:99,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:31},end:{line:70,column:5}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:70,column:12},end:{line:70,column:13}},loc:{start:{line:70,column:22},end:{line:82,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:82,column:13},end:{line:82,column:14}},loc:{start:{line:82,column:22},end:{line:90,column:5}},line:82},9:{name:"(anonymous_9)",decl:{start:{line:93,column:15},end:{line:93,column:16}},loc:{start:{line:93,column:26},end:{line:95,column:9}},line:93},10:{name:"(anonymous_10)",decl:{start:{line:100,column:16},end:{line:100,column:17}},loc:{start:{line:100,column:23},end:{line:103,column:3}},line:100},11:{name:"(anonymous_11)",decl:{start:{line:104,column:15},end:{line:104,column:16}},loc:{start:{line:104,column:27},end:{line:131,column:3}},line:104},12:{name:"(anonymous_12)",decl:{start:{line:134,column:18},end:{line:134,column:19}},loc:{start:{line:134,column:29},end:{line:156,column:3}},line:134},13:{name:"(anonymous_13)",decl:{start:{line:141,column:20},end:{line:141,column:21}},loc:{start:{line:141,column:27},end:{line:154,column:5}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:155,column:21},end:{line:155,column:22}},loc:{start:{line:155,column:28},end:{line:155,column:49}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:157,column:2},end:{line:157,column:3}},loc:{start:{line:157,column:17},end:{line:163,column:3}},line:157},16:{name:"(anonymous_16)",decl:{start:{line:164,column:16},end:{line:164,column:17}},loc:{start:{line:164,column:25},end:{line:168,column:3}},line:164},17:{name:"(anonymous_17)",decl:{start:{line:169,column:2},end:{line:169,column:3}},loc:{start:{line:169,column:11},end:{line:273,column:3}},line:169},18:{name:"(anonymous_18)",decl:{start:{line:171,column:42},end:{line:171,column:43}},loc:{start:{line:171,column:54},end:{line:182,column:5}},line:171},19:{name:"(anonymous_19)",decl:{start:{line:187,column:55},end:{line:187,column:56}},loc:{start:{line:187,column:61},end:{line:187,column:78}},line:187},20:{name:"(anonymous_20)",decl:{start:{line:196,column:24},end:{line:196,column:25}},loc:{start:{line:196,column:30},end:{line:196,column:49}},line:196},21:{name:"(anonymous_21)",decl:{start:{line:221,column:139},end:{line:221,column:140}},loc:{start:{line:221,column:146},end:{line:221,column:180}},line:221},22:{name:"(anonymous_22)",decl:{start:{line:268,column:20},end:{line:268,column:21}},loc:{start:{line:268,column:27},end:{line:268,column:56}},line:268}},branchMap:{0:{loc:{start:{line:53,column:4},end:{line:53,column:31}},type:"if",locations:[{start:{line:53,column:4},end:{line:53,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},1:{loc:{start:{line:54,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:60,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},2:{loc:{start:{line:71,column:6},end:{line:73,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:73,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71},3:{loc:{start:{line:135,column:4},end:{line:135,column:23}},type:"if",locations:[{start:{line:135,column:4},end:{line:135,column:23}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:135},4:{loc:{start:{line:136,column:4},end:{line:136,column:35}},type:"if",locations:[{start:{line:136,column:4},end:{line:136,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:136},5:{loc:{start:{line:184,column:4},end:{line:189,column:5}},type:"if",locations:[{start:{line:184,column:4},end:{line:189,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},6:{loc:{start:{line:203,column:53},end:{line:222,column:18}},type:"cond-expr",locations:[{start:{line:203,column:119},end:{line:215,column:15}},{start:{line:215,column:34},end:{line:222,column:18}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx"],names:["style"],mappings:"AA4BQ,SACE,KADF;AA5BR,OAAO,WAA+B;AACtC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,CAAC,UAA2B;AAC1C,QAAI,CAAC,MAAO;AACZ,QAAI,MAAM,WAAW,EAAG;AACxB,UAAM,OAAO,MAAM,CAAC;AACpB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,qBAAC,WACC;AAAA,qCAAC,OAAE,WAAU,0CAAyC,cAAY,EAAE,YAAY,GAAG;AAAA,sCAAC,gBAAa;AAAA,kBAAE;AAAA,kBAAE,EAAE,YAAY;AAAA,mBAAE;AAAA,gBACrH,oBAAC,WAAM,eAAY,yBAAwB,MAAK,QAAO,OAAO,EAAE,SAAS,OAAO,GAAG,UAAU,CAAC,MAAM,KAAK,cAAc,EAAE,OAAO,KAAK,GAAG;AAAA,iBAC1I,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3a6249e96d42fc8e59bc18fb123f3ec8de2b220"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return bn=function(){return s},s}bn();class LRe extends En.Component{render(){return bn().f[0]++,bn().s[0]++,te.jsx("div",{className:"maputnik-public-style",children:te.jsxs(Zs,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(bn().f[1]++,bn().s[1]++,this.props.onSelect(this.props.url)),children:[te.jsxs("div",{className:"maputnik-public-style-header",children:[te.jsx("div",{children:this.props.title}),te.jsx("span",{className:"maputnik-space"}),te.jsx(sZ,{})]}),te.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class zRe extends En.Component{constructor(e){bn().f[2]++,bn().s[2]++,super(e),bn().s[3]++,this.state={styleUrl:""}}clearError(){bn().f[3]++,bn().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){bn().f[4]++,bn().s[5]++,e?(bn().b[0][0]++,bn().s[6]++,e.stopPropagation()):bn().b[0][1]++,bn().s[7]++,this.state.activeRequest?(bn().b[1][0]++,bn().s[8]++,this.state.activeRequest.abort(),bn().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):bn().b[1][1]++}onStyleSelect=(bn().s[10]++,e=>{bn().f[5]++,bn().s[11]++,this.clearError();let t=(bn().s[12]++,!1);bn().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(i){return bn().f[6]++,bn().s[14]++,i.json()}).then(i=>{if(bn().f[7]++,bn().s[15]++,t){bn().b[2][0]++,bn().s[16]++;return}else bn().b[2][1]++;bn().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const r=(bn().s[18]++,Od.ensureStyleValidity(i));bn().s[19]++,console.log("Loaded style ",r.id),bn().s[20]++,this.props.onStyleOpen(r),bn().s[21]++,this.onOpenToggle()}).catch(i=>{bn().f[8]++,bn().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),bn().s[23]++,console.error(i),bn().s[24]++,console.warn("Could not open the style URL",e)}),bn().s[25]++,this.setState({activeRequest:{abort:function(){bn().f[9]++,bn().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(bn().s[27]++,e=>{bn().f[10]++,bn().s[28]++,e.preventDefault(),bn().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(bn().s[30]++,async()=>{bn().f[11]++,bn().s[31]++,this.clearError();const e=(bn().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(bn().s[33]++,await window.showOpenFilePicker(e)),i=(bn().s[34]++,await t.getFile()),r=(bn().s[35]++,await i.text());let o;bn().s[36]++;try{bn().s[37]++,o=JSON.parse(r)}catch(s){bn().s[38]++,this.setState({error:s.toString()}),bn().s[39]++;return}return bn().s[40]++,o=Od.ensureStyleValidity(o),bn().s[41]++,this.props.onStyleOpen(o,t),bn().s[42]++,this.onOpenToggle(),bn().s[43]++,i});onFileChanged=(bn().s[44]++,e=>{if(bn().f[12]++,bn().s[45]++,e)bn().b[3][1]++;else{bn().b[3][0]++,bn().s[46]++;return}if(bn().s[47]++,e.length===0){bn().b[4][0]++,bn().s[48]++;return}else bn().b[4][1]++;const t=(bn().s[49]++,e[0]),i=(bn().s[50]++,new FileReader);bn().s[51]++,this.clearError(),bn().s[52]++,i.readAsText(t,"UTF-8"),bn().s[53]++,i.onload=r=>{bn().f[13]++;let o;bn().s[54]++;try{bn().s[55]++,o=JSON.parse(r.target?.result)}catch(s){bn().s[56]++,this.setState({error:s.toString()}),bn().s[57]++;return}bn().s[58]++,o=Od.ensureStyleValidity(o),bn().s[59]++,this.props.onStyleOpen(o),bn().s[60]++,this.onOpenToggle()},bn().s[61]++,i.onerror=r=>(bn().f[14]++,bn().s[62]++,console.log(r.target))});onOpenToggle(){bn().f[15]++,bn().s[63]++,this.setState({styleUrl:""}),bn().s[64]++,this.clearError(),bn().s[65]++,this.props.onOpenToggle()}onChangeUrl=(bn().s[66]++,e=>{bn().f[16]++,bn().s[67]++,this.setState({styleUrl:e})});render(){bn().f[17]++;const e=(bn().s[68]++,this.props.t),t=(bn().s[69]++,Eoe.map(r=>(bn().f[18]++,bn().s[70]++,te.jsx(LRe,{url:r.url,title:r.title,thumbnailUrl:r.thumbnail,onSelect:this.onStyleSelect},r.id))));let i;return bn().s[71]++,this.state.error?(bn().b[5][0]++,bn().s[72]++,i=te.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,te.jsx("a",{href:"#",onClick:()=>(bn().f[19]++,bn().s[73]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):bn().b[5][1]++,bn().s[74]++,te.jsxs("div",{children:[te.jsxs(C1,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(bn().f[20]++,bn().s[75]++,this.onOpenToggle()),title:e("Open Style"),children:[i,te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Open local Style")}),te.jsx("p",{children:e("Open a local JSON style from your computer.")}),te.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(bn().b[6][0]++,te.jsxs(Zs,{"data-wd-key":"modal:open.file.button",className:"maputnik-big-button",onClick:this.onOpenFile,children:[te.jsx(uz,{})," ",e("Open Style")]})):(bn().b[6][1]++,te.jsxs("label",{children:[te.jsxs("a",{className:"maputnik-button maputnik-upload-button","aria-label":e("Open Style"),children:[te.jsx(uz,{})," ",e("Open Style")]}),te.jsx("input",{"data-wd-key":"modal:open.file.input",type:"file",style:{display:"none"},onChange:r=>(bn().f[21]++,bn().s[76]++,this.onFileChanged(r.target.files))})]}))})]}),te.jsx("section",{className:"maputnik-modal-section",children:te.jsxs("form",{onSubmit:this.onSubmitUrl,children:[te.jsx("h1",{children:e("Load from URL")}),te.jsx("p",{children:te.jsxs(Cb,{t:e,children:["Load from a URL. Note that the URL must have ",te.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),te.jsx(DU,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),te.jsx("div",{children:te.jsx(Zs,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[te.jsx("h1",{children:e("Gallery Styles")}),te.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),te.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),te.jsx(URe,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:r=>(bn().f[22]++,bn().s[77]++,this.onCancelActiveRequest(r)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const FRe=(bn().s[78]++,Fo()(zRe));function op(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",e="56c3984d0ef3534e088a574117d91f5af2db0afb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"56c3984d0ef3534e088a574117d91f5af2db0afb"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return op=function(){return s},s}op();class jRe extends En.Component{render(){op().f[0]++;const e=(op().s[0]++,this.props.t),t=(op().s[1]++,[{key:te.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:te.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:te.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:te.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:te.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:te.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:te.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:te.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),i=(op().s[2]++,[{key:te.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:te.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:te.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:te.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:te.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:te.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:te.jsxs(te.Fragment,{children:[te.jsx("kbd",{children:"Shift"})," + ",te.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return op().s[3]++,te.jsx(C1,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[te.jsx("p",{children:te.jsxs(Cb,{t:e,children:["Press ",te.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),te.jsx("dl",{children:t.map((r,o)=>(op().f[1]++,op().s[4]++,te.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[te.jsx("dt",{children:r.key},"dt"+o),te.jsx("dd",{children:r.text},"dd"+o)]},o)))}),te.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),te.jsx("ul",{children:i.map((r,o)=>(op().f[2]++,op().s[5]++,te.jsxs("li",{children:[te.jsx("span",{children:r.key})," ",r.text]},o)))})]})})}}const NRe=(op().s[6]++,Fo()(jRe));function xu(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",e="c09f0bfde95742e69af0d091b2de9baefbfef43a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,OAAO,GAAE;AAAA,YAChB,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c09f0bfde95742e69af0d091b2de9baefbfef43a"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return xu=function(){return s},s}xu();class GRe extends En.Component{render(){xu().f[0]++;const{t:e,mapView:t}=(xu().s[0]++,this.props),i=(xu().s[1]++,Math.round(t.zoom)+1),r=(xu().s[2]++,+t.center.lng.toFixed(5)),o=(xu().s[3]++,+t.center.lat.toFixed(5));return xu().s[4]++,te.jsxs(C1,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[te.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[te.jsx("h1",{children:e("Options")}),(xu().b[0][0]++,this.props.renderer==="mlgljs"&&(xu().b[0][1]++,te.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([s,a])=>(xu().f[1]++,xu().s[5]++,te.jsx("li",{children:te.jsxs("label",{children:[te.jsx("input",{type:"checkbox",checked:a,onChange:c=>(xu().f[2]++,xu().s[6]++,this.props.onChangeMaplibreGlDebug(s,c.target.checked))})," ",s]})},s)))}))),(xu().b[1][0]++,this.props.renderer==="ol"&&(xu().b[1][1]++,te.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([s,a])=>(xu().f[3]++,xu().s[7]++,te.jsx("li",{children:te.jsxs("label",{children:[te.jsx("input",{type:"checkbox",checked:a,onChange:c=>(xu().f[4]++,xu().s[8]++,this.props.onChangeOpenlayersDebug(s,c.target.checked))})," ",s]})},s)))})))]}),te.jsxs("section",{className:"maputnik-modal-section",children:[te.jsx("h1",{children:e("Links")}),te.jsx("p",{children:te.jsxs(Cb,{t:e,children:[te.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${i}/${o}/${r}`,children:"Open in OSM"}),". Opens the current view on openstreetmap.org"]})})]})]})}}const QRe=(xu().s[9]++,Fo()(GRe));function pi(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",e="681e0b3080d4effb89e735abebd0878f77572d27",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx",statementMap:{0:{start:{line:10,column:33},end:{line:116,column:1}},1:{start:{line:11,column:34},end:{line:18,column:3}},2:{start:{line:12,column:18},end:{line:12,column:32}},3:{start:{line:13,column:24},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:17,column:8}},5:{start:{line:14,column:62},end:{line:17,column:5}},6:{start:{line:19,column:34},end:{line:31,column:3}},7:{start:{line:20,column:18},end:{line:20,column:39}},8:{start:{line:21,column:24},end:{line:21,column:26}},9:{start:{line:22,column:4},end:{line:28,column:5}},10:{start:{line:23,column:6},end:{line:27,column:7}},11:{start:{line:24,column:8},end:{line:26,column:10}},12:{start:{line:29,column:4},end:{line:29,column:77}},13:{start:{line:30,column:4},end:{line:30,column:32}},14:{start:{line:32,column:24},end:{line:40,column:3}},15:{start:{line:33,column:23},end:{line:33,column:48}},16:{start:{line:34,column:16},end:{line:34,column:17}},17:{start:{line:35,column:4},end:{line:37,column:5}},18:{start:{line:35,column:34},end:{line:35,column:57}},19:{start:{line:36,column:6},end:{line:36,column:14}},20:{start:{line:38,column:4},end:{line:38,column:60}},21:{start:{line:39,column:4},end:{line:39,column:40}},22:{start:{line:41,column:27},end:{line:45,column:3}},23:{start:{line:42,column:23},end:{line:42,column:48}},24:{start:{line:43,column:4},end:{line:43,column:32}},25:{start:{line:44,column:4},end:{line:44,column:40}},26:{start:{line:46,column:30},end:{line:50,column:3}},27:{start:{line:47,column:23},end:{line:47,column:48}},28:{start:{line:48,column:4},end:{line:48,column:41}},29:{start:{line:49,column:4},end:{line:49,column:40}},30:{start:{line:51,column:32},end:{line:55,column:3}},31:{start:{line:52,column:23},end:{line:52,column:48}},32:{start:{line:53,column:4},end:{line:53,column:45}},33:{start:{line:54,column:4},end:{line:54,column:40}},34:{start:{line:56,column:20},end:{line:56,column:45}},35:{start:{line:57,column:25},end:{line:85,column:14}},36:{start:{line:57,column:76},end:{line:85,column:13}},37:{start:{line:63,column:29},end:{line:63,column:68}},38:{start:{line:72,column:29},end:{line:72,column:70}},39:{start:{line:79,column:23},end:{line:79,column:46}},40:{start:{line:86,column:2},end:{line:115,column:4}},41:{start:{line:117,column:25},end:{line:117,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:33},end:{line:10,column:34}},loc:{start:{line:10,column:44},end:{line:116,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:11,column:34},end:{line:11,column:35}},loc:{start:{line:11,column:40},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:43},end:{line:14,column:44}},loc:{start:{line:14,column:62},end:{line:17,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:19,column:34},end:{line:19,column:35}},loc:{start:{line:19,column:50},end:{line:31,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:32,column:24},end:{line:32,column:25}},loc:{start:{line:32,column:30},end:{line:40,column:3}},line:32},5:{name:"(anonymous_5)",decl:{start:{line:35,column:27},end:{line:35,column:28}},loc:{start:{line:35,column:34},end:{line:35,column:57}},line:35},6:{name:"(anonymous_6)",decl:{start:{line:41,column:27},end:{line:41,column:28}},loc:{start:{line:41,column:38},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:30},end:{line:46,column:31}},loc:{start:{line:46,column:49},end:{line:50,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:51,column:32},end:{line:51,column:33}},loc:{start:{line:51,column:53},end:{line:55,column:3}},line:51},9:{name:"(anonymous_9)",decl:{start:{line:57,column:39},end:{line:57,column:40}},loc:{start:{line:57,column:76},end:{line:85,column:13}},line:57},10:{name:"(anonymous_10)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:29},end:{line:63,column:68}},line:63},11:{name:"(anonymous_11)",decl:{start:{line:72,column:18},end:{line:72,column:19}},loc:{start:{line:72,column:29},end:{line:72,column:70}},line:72},12:{name:"(anonymous_12)",decl:{start:{line:79,column:17},end:{line:79,column:18}},loc:{start:{line:79,column:23},end:{line:79,column:46}},line:79}},branchMap:{0:{loc:{start:{line:13,column:24},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:24},end:{line:13,column:35}},{start:{line:13,column:39},end:{line:13,column:41}}],line:13},1:{loc:{start:{line:23,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:23,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},2:{loc:{start:{line:29,column:18},end:{line:29,column:76}},type:"cond-expr",locations:[{start:{line:29,column:56},end:{line:29,column:67}},{start:{line:29,column:70},end:{line:29,column:76}}],line:29},3:{loc:{start:{line:48,column:28},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:28},end:{line:48,column:34}},{start:{line:48,column:38},end:{line:48,column:40}}],line:48},4:{loc:{start:{line:53,column:30},end:{line:53,column:44}},type:"binary-expr",locations:[{start:{line:53,column:30},end:{line:53,column:38}},{start:{line:53,column:42},end:{line:53,column:44}}],line:53},5:{loc:{start:{line:63,column:56},end:{line:63,column:67}},type:"binary-expr",locations:[{start:{line:63,column:56},end:{line:63,column:61}},{start:{line:63,column:65},end:{line:63,column:67}}],line:63},6:{loc:{start:{line:72,column:58},end:{line:72,column:69}},type:"binary-expr",locations:[{start:{line:72,column:58},end:{line:72,column:63}},{start:{line:72,column:67},end:{line:72,column:69}}],line:72},7:{loc:{start:{line:94,column:8},end:{line:97,column:12}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:50},end:{line:97,column:12}}],line:94},8:{loc:{start:{line:98,column:8},end:{line:101,column:12}},type:"binary-expr",locations:[{start:{line:98,column:8},end:{line:98,column:28}},{start:{line:98,column:48},end:{line:101,column:12}}],line:98}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalGlobalState.tsx"],names:["variables"],mappings:"AAsFI,SAEI,KAFJ,YAAA;AArFJ,SAAS,uBAA6C;AACtD,SAAS,gBAAgB;AACzB,OAAO,YAAY;AAEnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAAS,sBAAsB;AAG/B,OAAO,SAAS;AAchB,MAAM,2BAAoE,CAAC,UAAU;AACnF,QAAM,0BAA0B,MAA6B;AAC3D,UAAM,QAAQ,MAAM;AACpB,UAAM,cAAc,MAAM,SAAS,CAAC;AAEpC,WAAO,OAAO,QAAQ,WAAW,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,OAAO;AAAA,MACxD;AAAA,MACA,OAAO,MAAM;AAAA,IACf,EAAE;AAAA,EACJ;AAEA,QAAM,0BAA0B,CAACA,eAAqC;AACpE,UAAM,QAAQ,EAAE,GAAG,MAAM,SAAS;AAGlC,UAAM,cAAmD,CAAC;AAC1D,eAAW,YAAYA,YAAW;AAChC,UAAI,SAAS,IAAI,KAAK,MAAM,IAAI;AAC9B,oBAAY,SAAS,GAAG,IAAI;AAAA,UAC1B,SAAS,SAAS;AAAA,QACpB;AAAA,MACF;AAAA,IACF;AAEA,UAAM,QAAQ,OAAO,KAAK,WAAW,EAAE,SAAS,IAAI,cAAc;AAElE,UAAM,eAAe,KAAK;AAAA,EAC5B;AAEA,QAAM,gBAAgB,MAAM;AAC1B,UAAMA,aAAY,wBAAwB;AAC1C,QAAI,QAAQ;AACZ,WAAOA,WAAU,KAAK,CAAA,MAAK,EAAE,QAAQ,MAAM,KAAK,EAAE,GAAG;AACnD;AAAA,IACF;AACAA,eAAU,KAAK,EAAE,KAAK,MAAM,KAAK,IAAI,OAAO,QAAQ,CAAC;AACrD,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,mBAAmB,CAAC,UAAkB;AAC1C,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,OAAO,OAAO,CAAC;AACzB,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,sBAAsB,CAAC,OAAe,WAAmB;AAC7D,UAAMA,aAAY,wBAAwB;AAC1CA,eAAU,KAAK,EAAE,MAAM,UAAU;AACjC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,wBAAwB,CAAC,OAAe,aAAqB;AACjE,UAAMA,aAAY,wBAAwB;AAE1CA,eAAU,KAAK,EAAE,QAAQ,YAAY;AACrC,4BAAwBA,UAAS;AAAA,EACnC;AAEA,QAAM,YAAY,wBAAwB;AAE1C,QAAM,iBAAiB,UAAU,IAAI,CAAC,UAAU,+BAC7C,MAAA,EACC,UAAA;AAAA,IAAA,oBAAC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,KAAK;AAAA,QACpB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,oBAAoB,OAAO,SAAS,EAAE;AAAA,QAC3D,eAAa,+BAA+B;AAAA,MAAA;AAAA,IAC9C,EAAA,CACF;AAAA,wBACC,MAAA,EACC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO,MAAM,EAAE,OAAO;AAAA,QACtB,OAAO,SAAS;AAAA,QAChB,UAAU,CAAC,UAAU,sBAAsB,OAAO,SAAS,EAAE;AAAA,QAC7D,eAAa,iCAAiC;AAAA,MAAA;AAAA,IAChD,EAAA,CACF;AAAA,wBACC,MAAA,EAAG,OAAO,EAAE,eAAe,SAAQ,GAClC,UAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS,MAAM,iBAAiB,KAAK;AAAA,QACrC,OAAO,MAAM,EAAE,iBAAiB;AAAA,QAChC,eAAY;AAAA,QAEZ,8BAAC,UAAA,CAAA,CAAS;AAAA,MAAA;AAAA,IACZ,EAAA,CACF;AAAA,EAAA,EAAA,GAzBO,KA0BT,CACD;AAED,SACE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,QAAQ,MAAM;AAAA,MACd,cAAc,MAAM;AAAA,MACpB,OAAO,MAAM,EAAE,wBAAwB;AAAA,MAGtC,UAAA;AAAA,QAAA,UAAU,WAAW,KAChB,qBAAC,OAAA,EACC,UAAA;AAAA,UAAA,oBAAC,KAAA,EAAG,UAAA,MAAM,EAAE,2FAA2F,EAAA,CAAE;AAAA,UACzG,oBAAC,OAAA,EAAc,WAAU,uBACvB,UAAA,oBAAC,KAAA,EAAI,WAAW,OAAO,MAAM,MAAA,CAAO,EAAA,GAD7B,KAET;AAAA,QAAA,EAAA,CACF;AAAA,QAEL,UAAU,SAAS,KACpB,qBAAC,SAAA,EACC,UAAA;AAAA,UAAA,oBAAC,SAAA,CAAA,CACD;AAAA,UACA,oBAAC,WACE,UAAA,eAAA,CACH;AAAA,QAAA,EAAA,CACF;AAAA,4BAEC,OAAA,EACC,UAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,SAAS;AAAA,YACT,eAAY;AAAA,YAEZ,UAAA;AAAA,cAAA,oBAAC,gBAAA,CAAA,CAAe;AAAA,cACf,MAAM,EAAE,cAAc;AAAA,YAAA;AAAA,UAAA;AAAA,QACzB,EAAA,CACF;AAAA,MAAA;AAAA,IAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"681e0b3080d4effb89e735abebd0878f77572d27"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return pi=function(){return s},s}pi();pi().s[0]++;const WRe=n=>{pi().f[0]++,pi().s[1]++;const e=()=>{pi().f[1]++;const h=(pi().s[2]++,n.mapStyle),m=(pi().s[3]++,pi().b[0][0]++,h.state||(pi().b[0][1]++,{}));return pi().s[4]++,Object.entries(m).map(([v,x])=>(pi().f[2]++,pi().s[5]++,{key:v,value:x.default}))};pi().s[6]++;const t=h=>{pi().f[3]++;const m=(pi().s[7]++,{...n.mapStyle}),v=(pi().s[8]++,{});pi().s[9]++;for(const x of h)pi().s[10]++,x.key.trim()!==""?(pi().b[1][0]++,pi().s[11]++,v[x.key]={default:x.value}):pi().b[1][1]++;pi().s[12]++,m.state=Object.keys(v).length>0?(pi().b[2][0]++,v):(pi().b[2][1]++,void 0),pi().s[13]++,n.onStyleChanged(m)};pi().s[14]++;const i=()=>{pi().f[4]++;const h=(pi().s[15]++,e());let m=(pi().s[16]++,1);for(pi().s[17]++;h.find(v=>(pi().f[5]++,pi().s[18]++,v.key===`key${m}`));)pi().s[19]++,m++;pi().s[20]++,h.push({key:`key${m}`,value:"value"}),pi().s[21]++,t(h)};pi().s[22]++;const r=h=>{pi().f[6]++;const m=(pi().s[23]++,e());pi().s[24]++,m.splice(h,1),pi().s[25]++,t(m)};pi().s[26]++;const o=(h,m)=>{pi().f[7]++;const v=(pi().s[27]++,e());pi().s[28]++,v[h].key=(pi().b[3][0]++,m||(pi().b[3][1]++,"")),pi().s[29]++,t(v)};pi().s[30]++;const s=(h,m)=>{pi().f[8]++;const v=(pi().s[31]++,e());pi().s[32]++,v[h].value=(pi().b[4][0]++,m||(pi().b[4][1]++,"")),pi().s[33]++,t(v)},a=(pi().s[34]++,e()),c=(pi().s[35]++,a.map((h,m)=>(pi().f[9]++,pi().s[36]++,te.jsxs("tr",{children:[te.jsx("td",{children:te.jsx(vd,{label:n.t("Key"),value:h.key,onChange:v=>(pi().f[10]++,pi().s[37]++,o(m,(pi().b[5][0]++,v||(pi().b[5][1]++,"")))),"data-wd-key":"global-state-variable-key:"+m})}),te.jsx("td",{children:te.jsx(vd,{label:n.t("Value"),value:h.value,onChange:v=>(pi().f[11]++,pi().s[38]++,s(m,(pi().b[6][0]++,v||(pi().b[6][1]++,"")))),"data-wd-key":"global-state-variable-value:"+m})}),te.jsx("td",{style:{verticalAlign:"middle"},children:te.jsx(Zs,{onClick:()=>(pi().f[12]++,pi().s[39]++,r(m)),title:n.t("Remove variable"),"data-wd-key":"global-state-remove-variable",children:te.jsx(Hb,{})})})]},m))));return pi().s[40]++,te.jsxs(C1,{"data-wd-key":"modal:global-state",isOpen:n.isOpen,onOpenToggle:n.onOpenToggle,title:n.t("Global State Variables"),children:[(pi().b[7][0]++,a.length===0&&(pi().b[7][1]++,te.jsxs("div",{children:[te.jsx("p",{children:n.t("No global state variables defined. Add variables to create reusable values in your style.")}),te.jsx("div",{className:"maputnik-doc-inline",children:te.jsx(E6,{fieldSpec:Zr.$root.state})},"doc")]}))),(pi().b[8][0]++,a.length>0&&(pi().b[8][1]++,te.jsxs("table",{children:[te.jsx("thead",{}),te.jsx("tbody",{children:c})]}))),te.jsx("div",{children:te.jsxs(Zs,{onClick:i,"data-wd-key":"global-state-add-variable",children:[te.jsx(U6,{}),n.t("Add Variable")]})})]})},qRe=(pi().s[41]++,Fo()(WRe));function qo(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="5a9c2665b160f40983faeb4cc69ad8e0d0d449de",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:2,column:2},end:{line:14,column:3}},1:{start:{line:3,column:21},end:{line:6,column:6}},2:{start:{line:7,column:4},end:{line:9,column:5}},3:{start:{line:8,column:6},end:{line:8,column:60}},4:{start:{line:10,column:4},end:{line:10,column:33}},5:{start:{line:12,column:4},end:{line:12,column:95}},6:{start:{line:13,column:4},end:{line:13,column:24}},7:{start:{line:17,column:2},end:{line:17,column:30}},8:{start:{line:17,column:20},end:{line:17,column:30}},9:{start:{line:18,column:17},end:{line:18,column:37}},10:{start:{line:19,column:23},end:{line:19,column:109}},11:{start:{line:20,column:2},end:{line:24,column:3}},12:{start:{line:21,column:4},end:{line:21,column:41}},13:{start:{line:23,column:4},end:{line:23,column:69}},14:{start:{line:25,column:14},end:{line:25,column:31}},15:{start:{line:26,column:16},end:{line:26,column:39}},16:{start:{line:27,column:2},end:{line:27,column:29}},17:{start:{line:30,column:2},end:{line:30,column:26}},18:{start:{line:30,column:16},end:{line:30,column:26}},19:{start:{line:31,column:14},end:{line:31,column:31}},20:{start:{line:32,column:17},end:{line:32,column:40}},21:{start:{line:33,column:2},end:{line:33,column:29}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:1,column:15},end:{line:1,column:23}},loc:{start:{line:1,column:43},end:{line:15,column:1}},line:1},1:{name:"downloadGlyphsMetadata",decl:{start:{line:16,column:22},end:{line:16,column:44}},loc:{start:{line:16,column:58},end:{line:28,column:1}},line:16},2:{name:"downloadSpriteMetadata",decl:{start:{line:29,column:22},end:{line:29,column:44}},loc:{start:{line:29,column:54},end:{line:34,column:1}},line:29}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:17,column:2},end:{line:17,column:30}},type:"if",locations:[{start:{line:17,column:2},end:{line:17,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},2:{loc:{start:{line:20,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:24,column:3}},{start:{line:22,column:9},end:{line:24,column:3}}],line:20},3:{loc:{start:{line:30,column:2},end:{line:30,column:26}},type:"if",locations:[{start:{line:30,column:2},end:{line:30,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,eAAe,SAAY,KAAa,cAA6B;AACnE,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,KAAK;AAAA,MAChC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,MAAM,SAAS,KAAK;AAAA,EAC7B,QAAQ;AACN,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,WAAO;AAAA,EACT;AACF;AAEA,sBAAsB,uBAAuB,aAAwC;AACnF,MAAG,CAAC,YAAa,QAAO,CAAC;AAIzB,QAAM,SAAS,IAAI,IAAI,WAAW;AAClC,QAAM,eAAe,MAAM,mBAAmB,aAAa,IAAI,MAAM,mBAAmB,SAAS,IAAI;AACrG,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,SAAS;AAC5B,QAAM,QAAQ,MAAM,SAAS,KAAK,CAAC,CAAa;AAChD,SAAO,CAAC,GAAG,IAAI,IAAI,KAAK,CAAC;AAC3B;AAEA,sBAAsB,uBAAuB,SAAoC;AAC/E,MAAG,CAAC,QAAS,QAAO,CAAC;AACrB,QAAM,MAAM,UAAU;AACtB,QAAM,SAAS,MAAM,SAAS,KAAK,CAAC,CAA2B;AAC/D,SAAO,OAAO,KAAK,MAAM;AAC3B;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5a9c2665b160f40983faeb4cc69ad8e0d0d449de"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return qo=function(){return s},s}qo();async function Boe(n,e){qo().f[0]++,qo().s[0]++;try{const t=(qo().s[1]++,await fetch(n,{mode:"cors",credentials:"same-origin"}));if(qo().s[2]++,t.ok)qo().b[0][1]++;else throw qo().b[0][0]++,qo().s[3]++,new Error("Failed to load metadata for "+n);return qo().s[4]++,await t.json()}catch{return qo().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),qo().s[6]++,e}}async function YRe(n){if(qo().f[1]++,qo().s[7]++,n)qo().b[1][1]++;else return qo().b[1][0]++,qo().s[8]++,[];const e=(qo().s[9]++,new URL(n)),t=(qo().s[10]++,"/"+encodeURIComponent("{fontstack}")+"/"+encodeURIComponent("{range}")+".pbf");qo().s[11]++,e.pathname===t?(qo().b[2][0]++,qo().s[12]++,e.pathname="/fontstacks.json"):(qo().b[2][1]++,qo().s[13]++,e.pathname=e.pathname.replace(t,".json"));const i=(qo().s[14]++,e.toString()),r=(qo().s[15]++,await Boe(i,[]));return qo().s[16]++,[...new Set(r)]}async function VRe(n){if(qo().f[2]++,qo().s[17]++,n)qo().b[3][1]++;else return qo().b[3][0]++,qo().s[18]++,[];const e=(qo().s[19]++,n+".json"),t=(qo().s[20]++,await Boe(e,{}));return qo().s[21]++,Object.keys(t)}function Ih(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ih=function(){return s},s}Ih();function Ooe(n,e){Ih().f[0]++;const t=(Ih().s[0]++,uue(n,e));return Ih().s[1]++,t.map(i=>(Ih().f[1]++,Ih().s[2]++,i.command+" "+i.args.join(" ")))}function $Re(n,e){return Ih().f[2]++,Ih().s[3]++,Ooe(n,e).map(t=>(Ih().f[3]++,Ih().s[4]++,"Undo "+t))}function HRe(n,e){return Ih().f[4]++,Ih().s[5]++,Ooe(n,e).map(t=>(Ih().f[5]++,Ih().s[6]++,"Redo "+t))}function Cc(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="d72dae9738057e855ea98626011f8090b99877cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d72dae9738057e855ea98626011f8090b99877cc"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Cc=function(){return s},s}Cc();function ZRe(){Cc().f[0]++;const n=(Cc().s[0]++,new URL(window.location.href)),e=(Cc().s[1]++,n.searchParams.get("style"));return Cc().s[2]++,e?(Cc().b[0][0]++,Cc().s[3]++,n.searchParams.delete("style"),Cc().s[4]++,window.history.replaceState({},document.title,n.toString())):Cc().b[0][1]++,Cc().s[5]++,e}async function Ioe(n){Cc().f[1]++,Cc().s[6]++,console.log("Loading style",n),Cc().s[7]++;try{const e=(Cc().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(Cc().s[9]++,await e.json());return Cc().s[10]++,Od.ensureStyleValidity(t)}catch{return Cc().s[11]++,console.warn("Could not fetch default style: "+n),Cc().s[12]++,Od.emptyStyle}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var YR=function(n,e){return YR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},YR(n,e)};function koe(n,e){YR(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function XRe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function JRe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return o}function eDe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(JRe(arguments[e]));return n}var Toe=(function(){function n(e,t){this.target=t,this.type=e}return n})(),tDe=(function(n){koe(e,n);function e(t,i){var r=n.call(this,"error",i)||this;return r.message=t.message,r.error=t,r}return e})(Toe),nDe=(function(n){koe(e,n);function e(t,i,r){t===void 0&&(t=1e3),i===void 0&&(i="");var o=n.call(this,"close",r)||this;return o.wasClean=!0,o.code=t,o.reason=i,o}return e})(Toe);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var iDe=function(){if(typeof WebSocket<"u")return WebSocket},rDe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},ib={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){r._debug("open event");var s=r._options.minUptime,a=s===void 0?ib.minUptime:s;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},a),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(c){return r._ws.send(c)}),r._messageQueue=[],r.onopen&&r.onopen(o),r._listeners.open.forEach(function(c){return r._callEventListener(o,c)})},this._handleMessage=function(o){r._debug("message event"),r.onmessage&&r.onmessage(o),r._listeners.message.forEach(function(s){return r._callEventListener(o,s)})},this._handleError=function(o){r._debug("error event",o.message),r._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(o),r._debug("exec error listeners"),r._listeners.error.forEach(function(s){return r._callEventListener(o,s)}),r._connect()},this._handleClose=function(o){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(o),r._listeners.close.forEach(function(s){return r._callEventListener(o,s)})},this._url=e,this._protocols=t,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,i){return typeof i=="string"?t+=i.length:i instanceof Blob?t+=i.size:t+=i.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,i=t===void 0?ib.maxEnqueuedMessages:t;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,i,r=this._listeners[e.type];if(r)try{for(var o=XRe(r),s=o.next();!s.done;s=o.next()){var a=s.value;this._callEventListener(e,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,eDe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,i=t===void 0?ib.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,o=r===void 0?ib.minReconnectionDelay:r,s=e.maxReconnectionDelay,a=s===void 0?ib.maxReconnectionDelay:s,c=0;return this._retryCount>0&&(c=o*Math.pow(i,this._retryCount-1),c>a&&(c=a)),this._debug("next delay",c),c},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,i=t.maxRetries,r=i===void 0?ib.maxRetries:i,o=t.connectionTimeout,s=o===void 0?ib.connectionTimeout:o,a=t.WebSocket,c=a===void 0?iDe():a;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!rDe(c))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(h){e._closeCalled||(e._debug("connect",{url:h,protocols:e._protocols}),e._ws=e._protocols?new c(h,e._protocols):new c(h),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new tDe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new nDe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function Roe(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Roe=function(){return s},s}Roe();function Ai(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ai=function(){return s},s}Ai();const $6=(Ai().s[0]++,"maputnik"),Doe=(Ai().s[1]++,"style"),o$=(Ai().s[2]++,{latest:[$6,"latest_style"].join(":")}),oDe=(Ai().s[3]++,Eoe[0].url);function s$(){return Ai().f[0]++,Ai().s[4]++,Ioe(oDe)}function sDe(){Ai().f[1]++;const n=(Ai().s[5]++,[]);Ai().s[6]++;for(let e=(Ai().s[7]++,0);e<window.localStorage.length;e++){const t=(Ai().s[8]++,window.localStorage.key(e));Ai().s[9]++,Poe(t)?(Ai().b[0][0]++,Ai().s[10]++,n.push(aDe(t))):Ai().b[0][1]++}return Ai().s[11]++,n}function Poe(n){Ai().f[2]++;const e=(Ai().s[12]++,n.split(":"));return Ai().s[13]++,Ai().b[1][0]++,e.length===3&&(Ai().b[1][1]++,e[0]===$6)&&(Ai().b[1][2]++,e[1]===Doe)}function aDe(n){if(Ai().f[3]++,Ai().s[14]++,Poe(n))Ai().b[2][1]++;else throw Ai().b[2][0]++,Ai().s[15]++,"Key is not a valid style key";const e=(Ai().s[16]++,n.split(":")),t=(Ai().s[17]++,e[2]);return Ai().s[18]++,t}function a$(n){return Ai().f[4]++,Ai().s[19]++,[$6,Doe,n].join(":")}class lDe{mapStyles;constructor(){Ai().f[5]++,Ai().s[20]++,this.mapStyles=sDe()}purge(){Ai().f[6]++,Ai().s[21]++;for(let e=(Ai().s[22]++,0);e<window.localStorage.length;e++){const t=(Ai().s[23]++,window.localStorage.key(e));Ai().s[24]++,t.startsWith($6)?(Ai().b[3][0]++,Ai().s[25]++,window.localStorage.removeItem(t)):Ai().b[3][1]++}}async getLatestStyle(){if(Ai().f[7]++,Ai().s[26]++,this.mapStyles.length===0)return Ai().b[4][0]++,Ai().s[27]++,s$();Ai().b[4][1]++;const e=(Ai().s[28]++,window.localStorage.getItem(o$.latest)),t=(Ai().s[29]++,window.localStorage.getItem(a$(e)));return Ai().s[30]++,t?(Ai().b[5][0]++,Ai().s[31]++,JSON.parse(t)):(Ai().b[5][1]++,Ai().s[32]++,s$())}save(e){Ai().f[8]++,Ai().s[33]++,e=Od.ensureStyleValidity(e);const t=(Ai().s[34]++,a$(e.id));Ai().s[35]++;const i=()=>{Ai().f[9]++,Ai().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),Ai().s[37]++,window.localStorage.setItem(o$.latest,e.id)};Ai().s[38]++;try{Ai().s[39]++,i()}catch(r){if(Ai().s[40]++,Ai().b[7][0]++,r instanceof DOMException&&(Ai().b[7][1]++,r.code===22||(Ai().b[7][2]++,r.code===1014)||(Ai().b[7][3]++,r.name==="QuotaExceededError")||(Ai().b[7][4]++,r.name==="NS_ERROR_DOM_QUOTA_REACHED")))Ai().b[6][0]++,Ai().s[41]++,this.purge(),Ai().s[42]++,i();else throw Ai().b[6][1]++,Ai().s[43]++,r}return Ai().s[44]++,e}}function Sh(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Sh=function(){return s},s}Sh();async function uDe(n){Sh().f[0]++;const e=(Sh().s[0]++,ZRe()),t=(Sh().s[1]++,Sh().b[0][0]++,e&&(Sh().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let i;Sh().s[2]++,Sh().b[1][1]++,Sh().s[9]++,i=new lDe;const r=(Sh().s[10]++,t?(Sh().b[2][0]++,await Ioe(e)):(Sh().b[2][1]++,await i.getLatestStyle()));return Sh().s[11]++,n(r,{initialLoad:!0,save:!1}),Sh().s[12]++,i}function Ka(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return Ka=function(){return s},s}Ka();class cDe{revisions;currentIdx;constructor(e=(Ka().b[0][0]++,[])){Ka().f[0]++,Ka().s[0]++,this.revisions=e,Ka().s[1]++,this.currentIdx=e.length-1}get latest(){return Ka().f[1]++,Ka().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Ka().f[2]++,Ka().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Ka().f[3]++,Ka().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Ka().s[5]++,this.revisions.push(e),Ka().s[6]++,this.currentIdx++}undo(){return Ka().f[4]++,Ka().s[7]++,this.currentIdx>0?(Ka().b[1][0]++,Ka().s[8]++,this.currentIdx--):Ka().b[1][1]++,Ka().s[9]++,this.current}redo(){return Ka().f[5]++,Ka().s[10]++,this.currentIdx<this.revisions.length-1?(Ka().b[2][0]++,Ka().s[11]++,this.currentIdx++):Ka().b[2][1]++,Ka().s[12]++,this.current}}var sT,l$;function ADe(){if(l$)return sT;l$=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c=typeof window=="object"&&window&&window.Object===Object&&window,h=typeof self=="object"&&self&&self.Object===Object&&self,m=c||h||Function("return this")(),v=Object.prototype,x=v.toString,E=Math.max,R=Math.min,P=function(){return m.Date.now()};function z($,G,oe){var ue,xe,ge,Ie,Me,ke,je=0,Be=!1,Ye=!1,At=!0;if(typeof $!="function")throw new TypeError(n);G=J(G)||0,Y(oe)&&(Be=!!oe.leading,Ye="maxWait"in oe,ge=Ye?E(J(oe.maxWait)||0,G):ge,At="trailing"in oe?!!oe.trailing:At);function yt(Ue){var Oe=ue,Ee=xe;return ue=xe=void 0,je=Ue,Ie=$.apply(Ee,Oe),Ie}function Le(Ue){return je=Ue,Me=setTimeout(Te,G),Be?yt(Ue):Ie}function De(Ue){var Oe=Ue-ke,Ee=Ue-je,Ve=G-Oe;return Ye?R(Ve,ge-Ee):Ve}function Ge(Ue){var Oe=Ue-ke,Ee=Ue-je;return ke===void 0||Oe>=G||Oe<0||Ye&&Ee>=ge}function Te(){var Ue=P();if(Ge(Ue))return xt(Ue);Me=setTimeout(Te,De(Ue))}function xt(Ue){return Me=void 0,At&&ue?yt(Ue):(ue=xe=void 0,Ie)}function st(){Me!==void 0&&clearTimeout(Me),je=0,ue=ke=xe=Me=void 0}function Tt(){return Me===void 0?Ie:xt(P())}function Lt(){var Ue=P(),Oe=Ge(Ue);if(ue=arguments,xe=this,ke=Ue,Oe){if(Me===void 0)return Le(ke);if(Ye)return Me=setTimeout(Te,G),yt(ke)}return Me===void 0&&(Me=setTimeout(Te,G)),Ie}return Lt.cancel=st,Lt.flush=Tt,Lt}function Q($,G,oe){var ue=!0,xe=!0;if(typeof $!="function")throw new TypeError(n);return Y(oe)&&(ue="leading"in oe?!!oe.leading:ue,xe="trailing"in oe?!!oe.trailing:xe),z($,G,{leading:ue,maxWait:G,trailing:xe})}function Y($){var G=typeof $;return!!$&&(G=="object"||G=="function")}function H($){return!!$&&typeof $=="object"}function Z($){return typeof $=="symbol"||H($)&&x.call($)==t}function J($){if(typeof $=="number")return $;if(Z($))return e;if(Y($)){var G=typeof $.valueOf=="function"?$.valueOf():$;$=Y(G)?G+"":G}if(typeof $!="string")return $===0?$:+$;$=$.replace(i,"");var oe=o.test($);return oe||s.test($)?a($.slice(2),oe?2:8):r.test($)?e:+$}return sT=Q,sT}var hDe=ADe();const dDe=Su(hDe);var J2={exports:{}};J2.exports;var u$;function fDe(){return u$||(u$=1,(function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",v="[object Date]",x="[object Error]",E="[object Function]",R="[object GeneratorFunction]",P="[object Map]",z="[object Number]",Q="[object Null]",Y="[object Object]",H="[object Promise]",Z="[object Proxy]",J="[object RegExp]",$="[object Set]",G="[object String]",oe="[object Symbol]",ue="[object Undefined]",xe="[object WeakMap]",ge="[object ArrayBuffer]",Ie="[object DataView]",Me="[object Float32Array]",ke="[object Float64Array]",je="[object Int8Array]",Be="[object Int16Array]",Ye="[object Int32Array]",At="[object Uint8Array]",yt="[object Uint8ClampedArray]",Le="[object Uint16Array]",De="[object Uint32Array]",Ge=/[\\^$.*+?()[\]{}|]/g,Te=/^\[object .+?Constructor\]$/,xt=/^(?:0|[1-9]\d*)$/,st={};st[Me]=st[ke]=st[je]=st[Be]=st[Ye]=st[At]=st[yt]=st[Le]=st[De]=!0,st[a]=st[c]=st[ge]=st[m]=st[Ie]=st[v]=st[x]=st[E]=st[P]=st[z]=st[Y]=st[J]=st[$]=st[G]=st[xe]=!1;var Tt=typeof window=="object"&&window&&window.Object===Object&&window,Lt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Tt||Lt||Function("return this")(),Oe=e&&!e.nodeType&&e,Ee=Oe&&!0&&n&&!n.nodeType&&n,Ve=Ee&&Ee.exports===Oe,mt=Ve&&Tt.process,pt=(function(){try{return mt&&mt.binding&&mt.binding("util")}catch{}})(),Ct=pt&&pt.isTypedArray;function Rt(X,me){for(var Ne=-1,wt=X==null?0:X.length,hn=0,Bn=[];++Ne<wt;){var li=X[Ne];me(li,Ne,X)&&(Bn[hn++]=li)}return Bn}function Kt(X,me){for(var Ne=-1,wt=me.length,hn=X.length;++Ne<wt;)X[hn+Ne]=me[Ne];return X}function on(X,me){for(var Ne=-1,wt=X==null?0:X.length;++Ne<wt;)if(me(X[Ne],Ne,X))return!0;return!1}function qn(X,me){for(var Ne=-1,wt=Array(X);++Ne<X;)wt[Ne]=me(Ne);return wt}function Qn(X){return function(me){return X(me)}}function xi(X,me){return X.has(me)}function Kn(X,me){return X?.[me]}function Un(X){var me=-1,Ne=Array(X.size);return X.forEach(function(wt,hn){Ne[++me]=[hn,wt]}),Ne}function Cn(X,me){return function(Ne){return X(me(Ne))}}function ei(X){var me=-1,Ne=Array(X.size);return X.forEach(function(wt){Ne[++me]=wt}),Ne}var Dn=Array.prototype,It=Function.prototype,Ce=Object.prototype,re=Ue["__core-js_shared__"],le=It.toString,he=Ce.hasOwnProperty,se=(function(){var X=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""})(),Ae=Ce.toString,be=RegExp("^"+le.call(he).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=Ve?Ue.Buffer:void 0,et=Ue.Symbol,Pe=Ue.Uint8Array,Ze=Ce.propertyIsEnumerable,y=Dn.splice,at=et?et.toStringTag:void 0,Pt=Object.getOwnPropertySymbols,Mt=We?We.isBuffer:void 0,en=Cn(Object.keys,Object),dt=Io(Ue,"DataView"),Zn=Io(Ue,"Map"),gi=Io(Ue,"Promise"),Tn=Io(Ue,"Set"),zn=Io(Ue,"WeakMap"),si=Io(Object,"create"),ir=Xo(dt),Di=Xo(Zn),gr=Xo(gi),Oi=Xo(Tn),Ri=Xo(zn),cr=et?et.prototype:void 0,nn=cr?cr.valueOf:void 0;function Pi(X){var me=-1,Ne=X==null?0:X.length;for(this.clear();++me<Ne;){var wt=X[me];this.set(wt[0],wt[1])}}function $o(){this.__data__=si?si(null):{},this.size=0}function Ks(X){var me=this.has(X)&&delete this.__data__[X];return this.size-=me?1:0,me}function Vr(X){var me=this.__data__;if(si){var Ne=me[X];return Ne===i?void 0:Ne}return he.call(me,X)?me[X]:void 0}function mn(X){var me=this.__data__;return si?me[X]!==void 0:he.call(me,X)}function Ni(X,me){var Ne=this.__data__;return this.size+=this.has(X)?0:1,Ne[X]=si&&me===void 0?i:me,this}Pi.prototype.clear=$o,Pi.prototype.delete=Ks,Pi.prototype.get=Vr,Pi.prototype.has=mn,Pi.prototype.set=Ni;function ri(X){var me=-1,Ne=X==null?0:X.length;for(this.clear();++me<Ne;){var wt=X[me];this.set(wt[0],wt[1])}}function nl(){this.__data__=[],this.size=0}function Xc(X){var me=this.__data__,Ne=Oo(me,X);if(Ne<0)return!1;var wt=me.length-1;return Ne==wt?me.pop():y.call(me,Ne,1),--this.size,!0}function kl(X){var me=this.__data__,Ne=Oo(me,X);return Ne<0?void 0:me[Ne][1]}function Ki(X){return Oo(this.__data__,X)>-1}function Jl(X,me){var Ne=this.__data__,wt=Oo(Ne,X);return wt<0?(++this.size,Ne.push([X,me])):Ne[wt][1]=me,this}ri.prototype.clear=nl,ri.prototype.delete=Xc,ri.prototype.get=kl,ri.prototype.has=Ki,ri.prototype.set=Jl;function po(X){var me=-1,Ne=X==null?0:X.length;for(this.clear();++me<Ne;){var wt=X[me];this.set(wt[0],wt[1])}}function Oa(){this.size=0,this.__data__={hash:new Pi,map:new(Zn||ri),string:new Pi}}function eu(X){var me=Ms(this,X).delete(X);return this.size-=me?1:0,me}function da(X){return Ms(this,X).get(X)}function Ho(X){return Ms(this,X).has(X)}function Tl(X,me){var Ne=Ms(this,X),wt=Ne.size;return Ne.set(X,me),this.size+=Ne.size==wt?0:1,this}po.prototype.clear=Oa,po.prototype.delete=eu,po.prototype.get=da,po.prototype.has=Ho,po.prototype.set=Tl;function Zo(X){var me=-1,Ne=X==null?0:X.length;for(this.__data__=new po;++me<Ne;)this.add(X[me])}function Wi(X){return this.__data__.set(X,i),this}function Rl(X){return this.__data__.has(X)}Zo.prototype.add=Zo.prototype.push=Wi,Zo.prototype.has=Rl;function rs(X){var me=this.__data__=new ri(X);this.size=me.size}function Dl(){this.__data__=new ri,this.size=0}function tu(X){var me=this.__data__,Ne=me.delete(X);return this.size=me.size,Ne}function Eu(X){return this.__data__.get(X)}function Jc(X){return this.__data__.has(X)}function tc(X,me){var Ne=this.__data__;if(Ne instanceof ri){var wt=Ne.__data__;if(!Zn||wt.length<t-1)return wt.push([X,me]),this.size=++Ne.size,this;Ne=this.__data__=new po(wt)}return Ne.set(X,me),this.size=Ne.size,this}rs.prototype.clear=Dl,rs.prototype.delete=tu,rs.prototype.get=Eu,rs.prototype.has=Jc,rs.prototype.set=tc;function ml(X,me){var Ne=oo(X),wt=!Ne&&Ko(X),hn=!Ne&&!wt&&Mo(X),Bn=!Ne&&!wt&&!hn&&ol(X),li=Ne||wt||hn||Bn,Ui=li?qn(X.length,String):[],wi=Ui.length;for(var Si in X)he.call(X,Si)&&!(li&&(Si=="length"||hn&&(Si=="offset"||Si=="parent")||Bn&&(Si=="buffer"||Si=="byteLength"||Si=="byteOffset")||ja(Si,wi)))&&Ui.push(Si);return Ui}function Oo(X,me){for(var Ne=X.length;Ne--;)if(su(X[Ne][0],me))return Ne;return-1}function nc(X,me,Ne){var wt=me(X);return oo(X)?wt:Kt(wt,Ne(X))}function nu(X){return X==null?X===void 0?ue:Q:at&&at in Object(X)?ru(X):Na(X)}function Ec(X){return so(X)&&nu(X)==a}function ic(X,me,Ne,wt,hn){return X===me?!0:X==null||me==null||!so(X)&&!so(me)?X!==X&&me!==me:Bc(X,me,Ne,wt,ic,hn)}function Bc(X,me,Ne,wt,hn,Bn){var li=oo(X),Ui=oo(me),wi=li?c:Us(X),Si=Ui?c:Us(me);wi=wi==a?Y:wi,Si=Si==a?Y:Si;var fr=wi==Y,ao=Si==Y,br=wi==Si;if(br&&Mo(X)){if(!Mo(me))return!1;li=!0,fr=!1}if(br&&!fr)return Bn||(Bn=new rs),li||ol(X)?il(X,me,Ne,wt,hn,Bn):eA(X,me,wi,Ne,wt,hn,Bn);if(!(Ne&r)){var yr=fr&&he.call(X,"__wrapped__"),eo=ao&&he.call(me,"__wrapped__");if(yr||eo){var Uo=yr?X.value():X,Or=eo?me.value():me;return Bn||(Bn=new rs),hn(Uo,Or,Ne,wt,Bn)}}return br?(Bn||(Bn=new rs),iu(X,me,Ne,wt,hn,Bn)):!1}function Dh(X){if(!os(X)||rl(X))return!1;var me=au(X)?be:Te;return me.test(Xo(X))}function fa(X){return so(X)&&mo(X.length)&&!!st[nu(X)]}function rc(X){if(!Gi(X))return en(X);var me=[];for(var Ne in Object(X))he.call(X,Ne)&&Ne!="constructor"&&me.push(Ne);return me}function il(X,me,Ne,wt,hn,Bn){var li=Ne&r,Ui=X.length,wi=me.length;if(Ui!=wi&&!(li&&wi>Ui))return!1;var Si=Bn.get(X);if(Si&&Bn.get(me))return Si==me;var fr=-1,ao=!0,br=Ne&o?new Zo:void 0;for(Bn.set(X,me),Bn.set(me,X);++fr<Ui;){var yr=X[fr],eo=me[fr];if(wt)var Uo=li?wt(eo,yr,fr,me,X,Bn):wt(yr,eo,fr,X,me,Bn);if(Uo!==void 0){if(Uo)continue;ao=!1;break}if(br){if(!on(me,function(Or,Ss){if(!xi(br,Ss)&&(yr===Or||hn(yr,Or,Ne,wt,Bn)))return br.push(Ss)})){ao=!1;break}}else if(!(yr===eo||hn(yr,eo,Ne,wt,Bn))){ao=!1;break}}return Bn.delete(X),Bn.delete(me),ao}function eA(X,me,Ne,wt,hn,Bn,li){switch(Ne){case Ie:if(X.byteLength!=me.byteLength||X.byteOffset!=me.byteOffset)return!1;X=X.buffer,me=me.buffer;case ge:return!(X.byteLength!=me.byteLength||!Bn(new Pe(X),new Pe(me)));case m:case v:case z:return su(+X,+me);case x:return X.name==me.name&&X.message==me.message;case J:case G:return X==me+"";case P:var Ui=Un;case $:var wi=wt&r;if(Ui||(Ui=ei),X.size!=me.size&&!wi)return!1;var Si=li.get(X);if(Si)return Si==me;wt|=o,li.set(X,me);var fr=il(Ui(X),Ui(me),wt,hn,Bn,li);return li.delete(X),fr;case oe:if(nn)return nn.call(X)==nn.call(me)}return!1}function iu(X,me,Ne,wt,hn,Bn){var li=Ne&r,Ui=Fa(X),wi=Ui.length,Si=Fa(me),fr=Si.length;if(wi!=fr&&!li)return!1;for(var ao=wi;ao--;){var br=Ui[ao];if(!(li?br in me:he.call(me,br)))return!1}var yr=Bn.get(X);if(yr&&Bn.get(me))return yr==me;var eo=!0;Bn.set(X,me),Bn.set(me,X);for(var Uo=li;++ao<wi;){br=Ui[ao];var Or=X[br],Ss=me[br];if(wt)var ZA=li?wt(Ss,Or,br,me,X,Bn):wt(Or,Ss,br,X,me,Bn);if(!(ZA===void 0?Or===Ss||hn(Or,Ss,Ne,wt,Bn):ZA)){eo=!1;break}Uo||(Uo=br=="constructor")}if(eo&&!Uo){var gl=X.constructor,kr=me.constructor;gl!=kr&&"constructor"in X&&"constructor"in me&&!(typeof gl=="function"&&gl instanceof gl&&typeof kr=="function"&&kr instanceof kr)&&(eo=!1)}return Bn.delete(X),Bn.delete(me),eo}function Fa(X){return nc(X,Pl,ou)}function Ms(X,me){var Ne=X.__data__;return Ji(me)?Ne[typeof me=="string"?"string":"hash"]:Ne.map}function Io(X,me){var Ne=Kn(X,me);return Dh(Ne)?Ne:void 0}function ru(X){var me=he.call(X,at),Ne=X[at];try{X[at]=void 0;var wt=!0}catch{}var hn=Ae.call(X);return wt&&(me?X[at]=Ne:delete X[at]),hn}var ou=Pt?function(X){return X==null?[]:(X=Object(X),Rt(Pt(X),function(me){return Ze.call(X,me)}))}:ji,Us=nu;(dt&&Us(new dt(new ArrayBuffer(1)))!=Ie||Zn&&Us(new Zn)!=P||gi&&Us(gi.resolve())!=H||Tn&&Us(new Tn)!=$||zn&&Us(new zn)!=xe)&&(Us=function(X){var me=nu(X),Ne=me==Y?X.constructor:void 0,wt=Ne?Xo(Ne):"";if(wt)switch(wt){case ir:return Ie;case Di:return P;case gr:return H;case Oi:return $;case Ri:return xe}return me});function ja(X,me){return me=me??s,!!me&&(typeof X=="number"||xt.test(X))&&X>-1&&X%1==0&&X<me}function Ji(X){var me=typeof X;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?X!=="__proto__":X===null}function rl(X){return!!se&&se in X}function Gi(X){var me=X&&X.constructor,Ne=typeof me=="function"&&me.prototype||Ce;return X===Ne}function Na(X){return Ae.call(X)}function Xo(X){if(X!=null){try{return le.call(X)}catch{}try{return X+""}catch{}}return""}function su(X,me){return X===me||X!==X&&me!==me}var Ko=Ec((function(){return arguments})())?Ec:function(X){return so(X)&&he.call(X,"callee")&&!Ze.call(X,"callee")},oo=Array.isArray;function ws(X){return X!=null&&mo(X.length)&&!au(X)}var Mo=Mt||ki;function _o(X,me){return ic(X,me)}function au(X){if(!os(X))return!1;var me=nu(X);return me==E||me==R||me==h||me==Z}function mo(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=s}function os(X){var me=typeof X;return X!=null&&(me=="object"||me=="function")}function so(X){return X!=null&&typeof X=="object"}var ol=Ct?Qn(Ct):fa;function Pl(X){return ws(X)?ml(X):rc(X)}function ji(){return[]}function ki(){return!1}n.exports=_o})(J2,J2.exports)),J2.exports}var pDe=fDe();const VR=Su(pDe);function ar(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return ar=function(){return s},s}ar();class mDe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(ar().b[0][0]++,{})){ar().f[0]++,ar().s[0]++,this.onSourcesChange=(ar().b[1][0]++,e.onSourcesChange||(ar().b[1][1]++,()=>{ar().f[1]++})),ar().s[1]++,this.onVectorLayersChange=(ar().b[2][0]++,e.onVectorLayersChange||(ar().b[2][1]++,()=>{ar().f[2]++})),ar().s[2]++,this._sources={},ar().s[3]++,this._vectorLayers={},ar().s[4]++,this.throttledAnalyzeVectorLayerFields=dDe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){ar().f[3]++;const t=(ar().s[5]++,{...this._sources});ar().s[6]++,Object.keys(e.style.sourceCaches).forEach(i=>{ar().f[4]++,ar().s[7]++,this._sources[i]=e.style.sourceCaches[i]._source.vectorLayerIds}),ar().s[8]++,VR(t,this._sources)?ar().b[3][1]++:(ar().b[3][0]++,ar().s[9]++,this.onSourcesChange(this._sources)),ar().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){ar().f[5]++;const t=(ar().s[11]++,{...this._vectorLayers});ar().s[12]++,Object.keys(this._sources).forEach(i=>{ar().f[6]++,ar().s[13]++,(ar().b[4][0]++,this._sources[i]||(ar().b[4][1]++,[])).forEach(r=>{ar().f[7]++;const o=(ar().s[14]++,ar().b[5][0]++,this._vectorLayers[r]||(ar().b[5][1]++,{})),s=(ar().s[15]++,{sourceLayer:r});ar().s[16]++,e.querySourceFeatures(i,s).forEach(a=>{ar().f[8]++,ar().s[17]++,Object.keys(a.properties).forEach(c=>{ar().f[9]++;const h=(ar().s[18]++,ar().b[6][0]++,o[c]||(ar().b[6][1]++,{}));ar().s[19]++,h[a.properties[c]]={},ar().s[20]++,o[c]=h})}),ar().s[21]++,this._vectorLayers[r]=o})}),ar().s[22]++,VR(t,this._vectorLayers)?ar().b[7][1]++:(ar().b[7][0]++,ar().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return ar().f[10]++,ar().s[24]++,this._sources}get vectorLayers(){return ar().f[11]++,ar().s[25]++,this._vectorLayers}}function fe(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="8a07c2afbabbb0ad6515959638246d740e8d9d6d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:36,column:0},end:{line:36,column:30}},1:{start:{line:38,column:29},end:{line:38,column:60}},2:{start:{line:39,column:26},end:{line:39,column:54}},3:{start:{line:40,column:31},end:{line:40,column:64}},4:{start:{line:41,column:28},end:{line:41,column:58}},5:{start:{line:42,column:2},end:{line:59,column:3}},6:{start:{line:43,column:24},end:{line:43,column:95}},7:{start:{line:44,column:4},end:{line:46,column:5}},8:{start:{line:45,column:6},end:{line:45,column:47}},9:{start:{line:47,column:9},end:{line:59,column:3}},10:{start:{line:48,column:24},end:{line:48,column:96}},11:{start:{line:49,column:4},end:{line:51,column:5}},12:{start:{line:50,column:6},end:{line:50,column:47}},13:{start:{line:52,column:9},end:{line:59,column:3}},14:{start:{line:53,column:24},end:{line:53,column:93}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:47}},17:{start:{line:58,column:4},end:{line:58,column:15}},18:{start:{line:62,column:2},end:{line:71,column:4}},19:{start:{line:75,column:15},end:{line:75,column:19}},20:{start:{line:78,column:4},end:{line:78,column:17}},21:{start:{line:79,column:4},end:{line:79,column:45}},22:{start:{line:80,column:4},end:{line:80,column:38}},23:{start:{line:81,column:4},end:{line:116,column:6}},24:{start:{line:117,column:4},end:{line:119,column:7}},25:{start:{line:118,column:35},end:{line:118,column:69}},26:{start:{line:121,column:31},end:{line:194,column:3}},27:{start:{line:122,column:22},end:{line:179,column:5}},28:{start:{line:126,column:10},end:{line:126,column:40}},29:{start:{line:132,column:10},end:{line:132,column:35}},30:{start:{line:138,column:10},end:{line:138,column:37}},31:{start:{line:144,column:10},end:{line:144,column:38}},32:{start:{line:150,column:10},end:{line:150,column:39}},33:{start:{line:156,column:10},end:{line:156,column:42}},34:{start:{line:162,column:10},end:{line:164,column:12}},35:{start:{line:170,column:10},end:{line:170,column:63}},36:{start:{line:176,column:10},end:{line:176,column:36}},37:{start:{line:180,column:4},end:{line:193,column:7}},38:{start:{line:181,column:6},end:{line:192,column:7}},39:{start:{line:182,column:8},end:{line:182,column:24}},40:{start:{line:183,column:8},end:{line:183,column:30}},41:{start:{line:184,column:13},end:{line:192,column:7}},42:{start:{line:185,column:25},end:{line:187,column:10}},43:{start:{line:186,column:10},end:{line:186,column:41}},44:{start:{line:188,column:8},end:{line:191,column:9}},45:{start:{line:189,column:10},end:{line:189,column:44}},46:{start:{line:190,column:10},end:{line:190,column:29}},47:{start:{line:195,column:19},end:{line:213,column:3}},48:{start:{line:196,column:4},end:{line:212,column:5}},49:{start:{line:197,column:6},end:{line:203,column:7}},50:{start:{line:198,column:8},end:{line:198,column:27}},51:{start:{line:199,column:8},end:{line:199,column:22}},52:{start:{line:200,column:13},end:{line:203,column:7}},53:{start:{line:201,column:8},end:{line:201,column:27}},54:{start:{line:202,column:8},end:{line:202,column:22}},55:{start:{line:205,column:6},end:{line:211,column:7}},56:{start:{line:206,column:8},end:{line:206,column:27}},57:{start:{line:207,column:8},end:{line:207,column:22}},58:{start:{line:208,column:13},end:{line:211,column:7}},59:{start:{line:209,column:8},end:{line:209,column:27}},60:{start:{line:210,column:8},end:{line:210,column:22}},61:{start:{line:215,column:4},end:{line:215,column:102}},62:{start:{line:215,column:65},end:{line:215,column:100}},63:{start:{line:216,column:4},end:{line:216,column:60}},64:{start:{line:219,column:4},end:{line:219,column:63}},65:{start:{line:222,column:4},end:{line:222,column:41}},66:{start:{line:225,column:21},end:{line:225,column:55}},67:{start:{line:226,column:24},end:{line:226,column:93}},68:{start:{line:227,column:21},end:{line:227,column:110}},69:{start:{line:228,column:4},end:{line:230,column:7}},70:{start:{line:229,column:6},end:{line:229,column:80}},71:{start:{line:233,column:4},end:{line:235,column:7}},72:{start:{line:234,column:6},end:{line:234,column:80}},73:{start:{line:237,column:29},end:{line:251,column:3}},74:{start:{line:238,column:4},end:{line:242,column:5}},75:{start:{line:239,column:6},end:{line:241,column:9}},76:{start:{line:243,column:25},end:{line:249,column:5}},77:{start:{line:250,column:4},end:{line:250,column:38}},78:{start:{line:252,column:19},end:{line:375,column:3}},79:{start:{line:253,column:4},end:{line:258,column:6}},80:{start:{line:259,column:4},end:{line:261,column:5}},81:{start:{line:260,column:6},end:{line:260,column:71}},82:{start:{line:262,column:4},end:{line:264,column:5}},83:{start:{line:263,column:6},end:{line:263,column:71}},84:{start:{line:265,column:4},end:{line:269,column:5}},85:{start:{line:266,column:6},end:{line:268,column:7}},86:{start:{line:267,column:8},end:{line:267,column:63}},87:{start:{line:270,column:4},end:{line:272,column:5}},88:{start:{line:271,column:6},end:{line:271,column:44}},89:{start:{line:273,column:19},end:{line:273,column:51}},90:{start:{line:274,column:24},end:{line:274,column:26}},91:{start:{line:275,column:4},end:{line:286,column:5}},92:{start:{line:276,column:26},end:{line:276,column:42}},93:{start:{line:277,column:6},end:{line:285,column:9}},94:{start:{line:278,column:8},end:{line:283,column:9}},95:{start:{line:279,column:24},end:{line:281,column:11}},96:{start:{line:282,column:10},end:{line:282,column:34}},97:{start:{line:284,column:8},end:{line:284,column:40}},98:{start:{line:287,column:25},end:{line:338,column:6}},99:{start:{line:288,column:23},end:{line:288,column:109}},100:{start:{line:289,column:6},end:{line:302,column:7}},101:{start:{line:290,column:35},end:{line:290,column:43}},102:{start:{line:291,column:8},end:{line:301,column:10}},103:{start:{line:303,column:33},end:{line:303,column:100}},104:{start:{line:304,column:6},end:{line:317,column:7}},105:{start:{line:305,column:35},end:{line:305,column:53}},106:{start:{line:306,column:8},end:{line:316,column:10}},107:{start:{line:318,column:25},end:{line:318,column:88}},108:{start:{line:319,column:6},end:{line:337,column:7}},109:{start:{line:320,column:52},end:{line:320,column:62}},110:{start:{line:321,column:20},end:{line:321,column:78}},111:{start:{line:322,column:8},end:{line:332,column:10}},112:{start:{line:334,column:8},end:{line:336,column:10}},113:{start:{line:339,column:24},end:{line:339,column:30}},114:{start:{line:340,column:4},end:{line:354,column:5}},115:{start:{line:341,column:6},end:{line:341,column:42}},116:{start:{line:342,column:6},end:{line:353,column:7}},117:{start:{line:343,column:28},end:{line:343,column:33}},118:{start:{line:344,column:8},end:{line:352,column:9}},119:{start:{line:345,column:10},end:{line:351,column:11}},120:{start:{line:346,column:28},end:{line:346,column:49}},121:{start:{line:347,column:30},end:{line:347,column:69}},122:{start:{line:348,column:12},end:{line:348,column:44}},123:{start:{line:350,column:12},end:{line:350,column:46}},124:{start:{line:355,column:4},end:{line:357,column:5}},125:{start:{line:356,column:6},end:{line:356,column:40}},126:{start:{line:358,column:4},end:{line:360,column:5}},127:{start:{line:359,column:6},end:{line:359,column:40}},128:{start:{line:361,column:4},end:{line:363,column:5}},129:{start:{line:362,column:6},end:{line:362,column:47}},130:{start:{line:364,column:4},end:{line:366,column:5}},131:{start:{line:365,column:6},end:{line:365,column:31}},132:{start:{line:367,column:4},end:{line:374,column:7}},133:{start:{line:372,column:6},end:{line:372,column:26}},134:{start:{line:373,column:6},end:{line:373,column:27}},135:{start:{line:376,column:11},end:{line:383,column:3}},136:{start:{line:377,column:24},end:{line:377,column:49}},137:{start:{line:378,column:21},end:{line:378,column:67}},138:{start:{line:379,column:4},end:{line:379,column:61}},139:{start:{line:380,column:4},end:{line:382,column:7}},140:{start:{line:384,column:11},end:{line:391,column:3}},141:{start:{line:385,column:24},end:{line:385,column:49}},142:{start:{line:386,column:21},end:{line:386,column:67}},143:{start:{line:387,column:4},end:{line:387,column:61}},144:{start:{line:388,column:4},end:{line:390,column:7}},145:{start:{line:392,column:16},end:{line:406,column:3}},146:{start:{line:393,column:33},end:{line:393,column:37}},147:{start:{line:394,column:17},end:{line:394,column:43}},148:{start:{line:395,column:4},end:{line:395,column:53}},149:{start:{line:396,column:4},end:{line:396,column:53}},150:{start:{line:397,column:4},end:{line:397,column:38}},151:{start:{line:397,column:31},end:{line:397,column:38}},152:{start:{line:398,column:4},end:{line:402,column:5}},153:{start:{line:399,column:6},end:{line:401,column:9}},154:{start:{line:403,column:4},end:{line:403,column:29}},155:{start:{line:404,column:4},end:{line:404,column:49}},156:{start:{line:405,column:4},end:{line:405,column:32}},157:{start:{line:407,column:19},end:{line:413,column:3}},158:{start:{line:408,column:25},end:{line:411,column:5}},159:{start:{line:412,column:4},end:{line:412,column:38}},160:{start:{line:414,column:19},end:{line:419,column:3}},161:{start:{line:415,column:19},end:{line:415,column:45}},162:{start:{line:416,column:28},end:{line:416,column:43}},163:{start:{line:417,column:4},end:{line:417,column:37}},164:{start:{line:418,column:4},end:{line:418,column:41}},165:{start:{line:420,column:16},end:{line:427,column:3}},166:{start:{line:421,column:19},end:{line:421,column:45}},167:{start:{line:422,column:26},end:{line:422,column:41}},168:{start:{line:423,column:24},end:{line:423,column:55}},169:{start:{line:424,column:4},end:{line:424,column:46}},170:{start:{line:425,column:4},end:{line:425,column:48}},171:{start:{line:426,column:4},end:{line:426,column:39}},172:{start:{line:428,column:28},end:{line:437,column:3}},173:{start:{line:429,column:19},end:{line:429,column:45}},174:{start:{line:430,column:26},end:{line:430,column:41}},175:{start:{line:431,column:18},end:{line:431,column:45}},176:{start:{line:432,column:26},end:{line:432,column:70}},177:{start:{line:433,column:4},end:{line:433,column:88}},178:{start:{line:434,column:4},end:{line:434,column:33}},179:{start:{line:435,column:4},end:{line:435,column:33}},180:{start:{line:436,column:4},end:{line:436,column:39}},181:{start:{line:438,column:20},end:{line:445,column:3}},182:{start:{line:439,column:26},end:{line:439,column:61}},183:{start:{line:440,column:4},end:{line:443,column:6}},184:{start:{line:444,column:4},end:{line:444,column:39}},185:{start:{line:446,column:19},end:{line:450,column:3}},186:{start:{line:447,column:26},end:{line:447,column:61}},187:{start:{line:448,column:4},end:{line:448,column:33}},188:{start:{line:449,column:4},end:{line:449,column:39}},189:{start:{line:451,column:16},end:{line:455,column:3}},190:{start:{line:452,column:4},end:{line:454,column:27}},191:{start:{line:456,column:21},end:{line:470,column:3}},192:{start:{line:457,column:21},end:{line:457,column:44}},193:{start:{line:458,column:4},end:{line:469,column:5}},194:{start:{line:459,column:27},end:{line:465,column:7}},195:{start:{line:466,column:6},end:{line:466,column:26}},196:{start:{line:468,column:6},end:{line:468,column:22}},197:{start:{line:471,column:14},end:{line:475,column:3}},198:{start:{line:472,column:4},end:{line:472,column:34}},199:{start:{line:473,column:4},end:{line:473,column:47}},200:{start:{line:474,column:4},end:{line:474,column:34}},201:{start:{line:477,column:23},end:{line:477,column:25}},202:{start:{line:478,column:4},end:{line:517,column:5}},203:{start:{line:479,column:21},end:{line:479,column:53}},204:{start:{line:480,column:6},end:{line:516,column:7}},205:{start:{line:481,column:8},end:{line:481,column:93}},206:{start:{line:482,column:8},end:{line:484,column:9}},207:{start:{line:483,column:10},end:{line:483,column:38}},208:{start:{line:486,column:8},end:{line:489,column:10}},209:{start:{line:490,column:18},end:{line:490,column:28}},210:{start:{line:491,column:8},end:{line:495,column:9}},211:{start:{line:492,column:10},end:{line:492,column:62}},212:{start:{line:494,column:10},end:{line:494,column:63}},213:{start:{line:496,column:32},end:{line:503,column:9}},214:{start:{line:497,column:10},end:{line:499,column:11}},215:{start:{line:498,column:12},end:{line:498,column:19}},216:{start:{line:500,column:10},end:{line:502,column:11}},217:{start:{line:501,column:12},end:{line:501,column:50}},218:{start:{line:504,column:8},end:{line:515,column:9}},219:{start:{line:505,column:10},end:{line:512,column:11}},220:{start:{line:506,column:25},end:{line:506,column:77}},221:{start:{line:507,column:12},end:{line:507,column:34}},222:{start:{line:509,column:29},end:{line:509,column:63}},223:{start:{line:510,column:25},end:{line:510,column:46}},224:{start:{line:511,column:12},end:{line:511,column:34}},225:{start:{line:514,column:10},end:{line:514,column:78}},226:{start:{line:518,column:4},end:{line:523,column:5}},227:{start:{line:519,column:6},end:{line:519,column:51}},228:{start:{line:520,column:6},end:{line:522,column:9}},229:{start:{line:526,column:21},end:{line:526,column:55}},230:{start:{line:527,column:4},end:{line:527,column:53}},231:{start:{line:529,column:16},end:{line:533,column:3}},232:{start:{line:530,column:4},end:{line:532,column:7}},233:{start:{line:535,column:40},end:{line:535,column:50}},234:{start:{line:536,column:21},end:{line:547,column:5}},235:{start:{line:539,column:8},end:{line:541,column:11}},236:{start:{line:544,column:8},end:{line:544,column:44}},237:{start:{line:545,column:8},end:{line:545,column:28}},238:{start:{line:548,column:21},end:{line:548,column:40}},239:{start:{line:550,column:4},end:{line:572,column:5}},240:{start:{line:551,column:6},end:{line:559,column:8}},241:{start:{line:557,column:38},end:{line:557,column:66}},242:{start:{line:561,column:6},end:{line:571,column:8}},243:{start:{line:574,column:4},end:{line:576,column:5}},244:{start:{line:575,column:6},end:{line:575,column:63}},245:{start:{line:577,column:25},end:{line:577,column:27}},246:{start:{line:578,column:4},end:{line:580,column:5}},247:{start:{line:579,column:6},end:{line:579,column:52}},248:{start:{line:581,column:4},end:{line:581,column:160}},249:{start:{line:583,column:18},end:{line:601,column:3}},250:{start:{line:584,column:43},end:{line:584,column:53}},251:{start:{line:585,column:35},end:{line:585,column:45}},252:{start:{line:586,column:16},end:{line:586,column:38}},253:{start:{line:587,column:20},end:{line:587,column:50}},254:{start:{line:588,column:4},end:{line:588,column:70}},255:{start:{line:589,column:23},end:{line:589,column:122}},256:{start:{line:589,column:66},end:{line:589,column:91}},257:{start:{line:589,column:109},end:{line:589,column:121}},258:{start:{line:590,column:4},end:{line:594,column:5}},259:{start:{line:591,column:6},end:{line:591,column:58}},260:{start:{line:593,column:6},end:{line:593,column:39}},261:{start:{line:595,column:4},end:{line:599,column:5}},262:{start:{line:596,column:6},end:{line:596,column:38}},263:{start:{line:597,column:11},end:{line:599,column:5}},264:{start:{line:598,column:6},end:{line:598,column:46}},265:{start:{line:600,column:4},end:{line:600,column:71}},266:{start:{line:602,column:27},end:{line:647,column:3}},267:{start:{line:603,column:16},end:{line:603,column:38}},268:{start:{line:604,column:23},end:{line:604,column:52}},269:{start:{line:605,column:4},end:{line:617,column:5}},270:{start:{line:606,column:21},end:{line:606,column:42}},271:{start:{line:607,column:23},end:{line:607,column:25}},272:{start:{line:608,column:6},end:{line:610,column:9}},273:{start:{line:609,column:8},end:{line:609,column:35}},274:{start:{line:611,column:6},end:{line:616,column:9}},275:{start:{line:618,column:17},end:{line:618,column:45}},276:{start:{line:619,column:4},end:{line:621,column:5}},277:{start:{line:620,column:6},end:{line:620,column:29}},278:{start:{line:622,column:17},end:{line:622,column:46}},279:{start:{line:623,column:4},end:{line:646,column:5}},280:{start:{line:624,column:6},end:{line:645,column:7}},281:{start:{line:625,column:22},end:{line:625,column:37}},282:{start:{line:626,column:46},end:{line:629,column:9}},283:{start:{line:630,column:20},end:{line:630,column:24}},284:{start:{line:631,column:8},end:{line:636,column:9}},285:{start:{line:632,column:33},end:{line:632,column:63}},286:{start:{line:633,column:10},end:{line:635,column:11}},287:{start:{line:634,column:12},end:{line:634,column:26}},288:{start:{line:637,column:8},end:{line:642,column:9}},289:{start:{line:638,column:10},end:{line:641,column:13}},290:{start:{line:644,column:8},end:{line:644,column:26}},291:{start:{line:648,column:18},end:{line:653,column:3}},292:{start:{line:649,column:4},end:{line:652,column:27}},293:{start:{line:655,column:4},end:{line:660,column:27}},294:{start:{line:663,column:4},end:{line:663,column:60}},295:{start:{line:665,column:20},end:{line:667,column:3}},296:{start:{line:666,column:4},end:{line:666,column:34}},297:{start:{line:668,column:28},end:{line:675,column:3}},298:{start:{line:669,column:4},end:{line:674,column:7}},299:{start:{line:676,column:28},end:{line:683,column:3}},300:{start:{line:677,column:4},end:{line:682,column:7}},301:{start:{line:685,column:19},end:{line:685,column:51}},302:{start:{line:686,column:26},end:{line:686,column:92}},303:{start:{line:687,column:36},end:{line:700,column:5}},304:{start:{line:698,column:34},end:{line:698,column:57}},305:{start:{line:701,column:23},end:{line:708,column:14}},306:{start:{line:705,column:30},end:{line:705,column:57}},307:{start:{line:706,column:23},end:{line:706,column:57}},308:{start:{line:709,column:38},end:{line:723,column:5}},309:{start:{line:724,column:24},end:{line:743,column:14}},310:{start:{line:744,column:24},end:{line:754,column:14}},311:{start:{line:755,column:35},end:{line:824,column:8}},312:{start:{line:765,column:30},end:{line:765,column:55}},313:{start:{line:773,column:30},end:{line:773,column:59}},314:{start:{line:783,column:30},end:{line:783,column:58}},315:{start:{line:792,column:30},end:{line:792,column:56}},316:{start:{line:802,column:30},end:{line:802,column:54}},317:{start:{line:812,column:30},end:{line:812,column:57}},318:{start:{line:821,column:30},end:{line:821,column:61}},319:{start:{line:825,column:4},end:{line:836,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:37,column:9},end:{line:37,column:28}},loc:{start:{line:37,column:44},end:{line:60,column:1}},line:37},1:{name:"updateRootSpec",decl:{start:{line:61,column:9},end:{line:61,column:23}},loc:{start:{line:61,column:52},end:{line:72,column:1}},line:61},2:{name:"(anonymous_2)",decl:{start:{line:77,column:2},end:{line:77,column:3}},loc:{start:{line:77,column:21},end:{line:120,column:3}},line:77},3:{name:"(anonymous_3)",decl:{start:{line:118,column:28},end:{line:118,column:29}},loc:{start:{line:118,column:35},end:{line:118,column:69}},line:118},4:{name:"(anonymous_4)",decl:{start:{line:121,column:31},end:{line:121,column:32}},loc:{start:{line:121,column:37},end:{line:194,column:3}},line:121},5:{name:"(anonymous_5)",decl:{start:{line:125,column:17},end:{line:125,column:18}},loc:{start:{line:125,column:23},end:{line:127,column:9}},line:125},6:{name:"(anonymous_6)",decl:{start:{line:131,column:17},end:{line:131,column:18}},loc:{start:{line:131,column:23},end:{line:133,column:9}},line:131},7:{name:"(anonymous_7)",decl:{start:{line:137,column:17},end:{line:137,column:18}},loc:{start:{line:137,column:23},end:{line:139,column:9}},line:137},8:{name:"(anonymous_8)",decl:{start:{line:143,column:17},end:{line:143,column:18}},loc:{start:{line:143,column:23},end:{line:145,column:9}},line:143},9:{name:"(anonymous_9)",decl:{start:{line:149,column:17},end:{line:149,column:18}},loc:{start:{line:149,column:23},end:{line:151,column:9}},line:149},10:{name:"(anonymous_10)",decl:{start:{line:155,column:17},end:{line:155,column:18}},loc:{start:{line:155,column:23},end:{line:157,column:9}},line:155},11:{name:"(anonymous_11)",decl:{start:{line:161,column:17},end:{line:161,column:18}},loc:{start:{line:161,column:23},end:{line:165,column:9}},line:161},12:{name:"(anonymous_12)",decl:{start:{line:169,column:17},end:{line:169,column:18}},loc:{start:{line:169,column:23},end:{line:171,column:9}},line:169},13:{name:"(anonymous_13)",decl:{start:{line:175,column:17},end:{line:175,column:18}},loc:{start:{line:175,column:23},end:{line:177,column:9}},line:175},14:{name:"(anonymous_14)",decl:{start:{line:180,column:44},end:{line:180,column:45}},loc:{start:{line:180,column:51},end:{line:193,column:5}},line:180},15:{name:"(anonymous_15)",decl:{start:{line:185,column:40},end:{line:185,column:41}},loc:{start:{line:185,column:55},end:{line:187,column:9}},line:185},16:{name:"(anonymous_16)",decl:{start:{line:195,column:19},end:{line:195,column:20}},loc:{start:{line:195,column:26},end:{line:213,column:3}},line:195},17:{name:"(anonymous_17)",decl:{start:{line:214,column:2},end:{line:214,column:3}},loc:{start:{line:214,column:28},end:{line:217,column:3}},line:214},18:{name:"(anonymous_18)",decl:{start:{line:215,column:45},end:{line:215,column:46}},loc:{start:{line:215,column:65},end:{line:215,column:100}},line:215},19:{name:"(anonymous_19)",decl:{start:{line:218,column:2},end:{line:218,column:3}},loc:{start:{line:218,column:25},end:{line:220,column:3}},line:218},20:{name:"(anonymous_20)",decl:{start:{line:221,column:2},end:{line:221,column:3}},loc:{start:{line:221,column:27},end:{line:223,column:3}},line:221},21:{name:"(anonymous_21)",decl:{start:{line:224,column:2},end:{line:224,column:3}},loc:{start:{line:224,column:27},end:{line:231,column:3}},line:224},22:{name:"(anonymous_22)",decl:{start:{line:228,column:42},end:{line:228,column:43}},loc:{start:{line:228,column:53},end:{line:230,column:5}},line:228},23:{name:"(anonymous_23)",decl:{start:{line:232,column:2},end:{line:232,column:3}},loc:{start:{line:232,column:23},end:{line:236,column:3}},line:232},24:{name:"(anonymous_24)",decl:{start:{line:233,column:41},end:{line:233,column:42}},loc:{start:{line:233,column:52},end:{line:235,column:5}},line:233},25:{name:"(anonymous_25)",decl:{start:{line:237,column:29},end:{line:237,column:30}},loc:{start:{line:237,column:50},end:{line:251,column:3}},line:237},26:{name:"(anonymous_26)",decl:{start:{line:252,column:19},end:{line:252,column:20}},loc:{start:{line:252,column:44},end:{line:375,column:3}},line:252},27:{name:"(anonymous_27)",decl:{start:{line:277,column:30},end:{line:277,column:31}},loc:{start:{line:277,column:48},end:{line:285,column:7}},line:277},28:{name:"(anonymous_28)",decl:{start:{line:287,column:56},end:{line:287,column:57}},loc:{start:{line:287,column:67},end:{line:338,column:5}},line:287},29:{name:"(anonymous_29)",decl:{start:{line:371,column:7},end:{line:371,column:8}},loc:{start:{line:371,column:13},end:{line:374,column:5}},line:371},30:{name:"(anonymous_30)",decl:{start:{line:376,column:11},end:{line:376,column:12}},loc:{start:{line:376,column:17},end:{line:383,column:3}},line:376},31:{name:"(anonymous_31)",decl:{start:{line:384,column:11},end:{line:384,column:12}},loc:{start:{line:384,column:17},end:{line:391,column:3}},line:384},32:{name:"(anonymous_32)",decl:{start:{line:392,column:16},end:{line:392,column:17}},loc:{start:{line:392,column:26},end:{line:406,column:3}},line:392},33:{name:"(anonymous_33)",decl:{start:{line:407,column:19},end:{line:407,column:20}},loc:{start:{line:407,column:38},end:{line:413,column:3}},line:407},34:{name:"(anonymous_34)",decl:{start:{line:414,column:19},end:{line:414,column:20}},loc:{start:{line:414,column:30},end:{line:419,column:3}},line:414},35:{name:"(anonymous_35)",decl:{start:{line:420,column:16},end:{line:420,column:17}},loc:{start:{line:420,column:27},end:{line:427,column:3}},line:420},36:{name:"(anonymous_36)",decl:{start:{line:428,column:28},end:{line:428,column:29}},loc:{start:{line:428,column:39},end:{line:437,column:3}},line:428},37:{name:"(anonymous_37)",decl:{start:{line:438,column:20},end:{line:438,column:21}},loc:{start:{line:438,column:46},end:{line:445,column:3}},line:438},38:{name:"(anonymous_38)",decl:{start:{line:446,column:19},end:{line:446,column:20}},loc:{start:{line:446,column:37},end:{line:450,column:3}},line:446},39:{name:"(anonymous_39)",decl:{start:{line:451,column:16},end:{line:451,column:17}},loc:{start:{line:451,column:30},end:{line:455,column:3}},line:451},40:{name:"(anonymous_40)",decl:{start:{line:456,column:21},end:{line:456,column:22}},loc:{start:{line:456,column:35},end:{line:470,column:3}},line:456},41:{name:"(anonymous_41)",decl:{start:{line:471,column:14},end:{line:471,column:15}},loc:{start:{line:471,column:40},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:2},end:{line:476,column:3}},loc:{start:{line:476,column:23},end:{line:524,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:496,column:32},end:{line:496,column:33}},loc:{start:{line:496,column:42},end:{line:503,column:9}},line:496},44:{name:"(anonymous_44)",decl:{start:{line:525,column:2},end:{line:525,column:3}},loc:{start:{line:525,column:17},end:{line:528,column:3}},line:525},45:{name:"(anonymous_45)",decl:{start:{line:529,column:16},end:{line:529,column:17}},loc:{start:{line:529,column:29},end:{line:533,column:3}},line:529},46:{name:"(anonymous_46)",decl:{start:{line:534,column:2},end:{line:534,column:3}},loc:{start:{line:534,column:16},end:{line:582,column:3}},line:534},47:{name:"(anonymous_47)",decl:{start:{line:538,column:27},end:{line:538,column:28}},loc:{start:{line:538,column:42},end:{line:542,column:7}},line:538},48:{name:"(anonymous_48)",decl:{start:{line:543,column:20},end:{line:543,column:21}},loc:{start:{line:543,column:27},end:{line:546,column:7}},line:543},49:{name:"(anonymous_49)",decl:{start:{line:557,column:25},end:{line:557,column:26}},loc:{start:{line:557,column:38},end:{line:557,column:66}},line:557},50:{name:"(anonymous_50)",decl:{start:{line:583,column:18},end:{line:583,column:19}},loc:{start:{line:583,column:24},end:{line:601,column:3}},line:583},51:{name:"(anonymous_51)",decl:{start:{line:589,column:50},end:{line:589,column:51}},loc:{start:{line:589,column:66},end:{line:589,column:91}},line:589},52:{name:"(anonymous_52)",decl:{start:{line:589,column:100},end:{line:589,column:101}},loc:{start:{line:589,column:109},end:{line:589,column:121}},line:589},53:{name:"(anonymous_53)",decl:{start:{line:602,column:27},end:{line:602,column:28}},loc:{start:{line:602,column:41},end:{line:647,column:3}},line:602},54:{name:"(anonymous_54)",decl:{start:{line:608,column:21},end:{line:608,column:22}},loc:{start:{line:608,column:36},end:{line:610,column:7}},line:608},55:{name:"(anonymous_55)",decl:{start:{line:648,column:18},end:{line:648,column:19}},loc:{start:{line:648,column:29},end:{line:653,column:3}},line:648},56:{name:"(anonymous_56)",decl:{start:{line:654,column:2},end:{line:654,column:3}},loc:{start:{line:654,column:29},end:{line:661,column:3}},line:654},57:{name:"(anonymous_57)",decl:{start:{line:662,column:2},end:{line:662,column:3}},loc:{start:{line:662,column:25},end:{line:664,column:3}},line:662},58:{name:"(anonymous_58)",decl:{start:{line:665,column:20},end:{line:665,column:21}},loc:{start:{line:665,column:36},end:{line:667,column:3}},line:665},59:{name:"(anonymous_59)",decl:{start:{line:668,column:28},end:{line:668,column:29}},loc:{start:{line:668,column:44},end:{line:675,column:3}},line:668},60:{name:"(anonymous_60)",decl:{start:{line:676,column:28},end:{line:676,column:29}},loc:{start:{line:676,column:44},end:{line:683,column:3}},line:676},61:{name:"(anonymous_61)",decl:{start:{line:684,column:2},end:{line:684,column:3}},loc:{start:{line:684,column:11},end:{line:837,column:3}},line:684},62:{name:"(anonymous_62)",decl:{start:{line:698,column:23},end:{line:698,column:24}},loc:{start:{line:698,column:34},end:{line:698,column:57}},line:698},63:{name:"(anonymous_63)",decl:{start:{line:705,column:18},end:{line:705,column:19}},loc:{start:{line:705,column:30},end:{line:705,column:57}},line:705},64:{name:"(anonymous_64)",decl:{start:{line:706,column:17},end:{line:706,column:18}},loc:{start:{line:706,column:23},end:{line:706,column:57}},line:706},65:{name:"(anonymous_65)",decl:{start:{line:765,column:24},end:{line:765,column:25}},loc:{start:{line:765,column:30},end:{line:765,column:55}},line:765},66:{name:"(anonymous_66)",decl:{start:{line:773,column:24},end:{line:773,column:25}},loc:{start:{line:773,column:30},end:{line:773,column:59}},line:773},67:{name:"(anonymous_67)",decl:{start:{line:783,column:24},end:{line:783,column:25}},loc:{start:{line:783,column:30},end:{line:783,column:58}},line:783},68:{name:"(anonymous_68)",decl:{start:{line:792,column:24},end:{line:792,column:25}},loc:{start:{line:792,column:30},end:{line:792,column:56}},line:792},69:{name:"(anonymous_69)",decl:{start:{line:802,column:24},end:{line:802,column:25}},loc:{start:{line:802,column:30},end:{line:802,column:54}},line:802},70:{name:"(anonymous_70)",decl:{start:{line:812,column:24},end:{line:812,column:25}},loc:{start:{line:812,column:30},end:{line:812,column:57}},line:812},71:{name:"(anonymous_71)",decl:{start:{line:821,column:24},end:{line:821,column:25}},loc:{start:{line:821,column:30},end:{line:821,column:61}},line:821}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:59,column:3}},{start:{line:47,column:9},end:{line:59,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:59,column:3}},{start:{line:52,column:9},end:{line:59,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:52,column:9},end:{line:59,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:59,column:3}},{start:{line:57,column:9},end:{line:59,column:3}}],line:52},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:163,column:12},end:{line:163,column:61}},type:"cond-expr",locations:[{start:{line:163,column:44},end:{line:163,column:53}},{start:{line:163,column:56},end:{line:163,column:61}}],line:163},8:{loc:{start:{line:181,column:6},end:{line:192,column:7}},type:"if",locations:[{start:{line:181,column:6},end:{line:192,column:7}},{start:{line:184,column:13},end:{line:192,column:7}}],line:181},9:{loc:{start:{line:184,column:13},end:{line:192,column:7}},type:"if",locations:[{start:{line:184,column:13},end:{line:192,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:184},10:{loc:{start:{line:184,column:17},end:{line:184,column:88}},type:"binary-expr",locations:[{start:{line:184,column:17},end:{line:184,column:44}},{start:{line:184,column:48},end:{line:184,column:88}}],line:184},11:{loc:{start:{line:188,column:8},end:{line:191,column:9}},type:"if",locations:[{start:{line:188,column:8},end:{line:191,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:188},12:{loc:{start:{line:196,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:196,column:4},end:{line:212,column:5}},{start:{line:204,column:11},end:{line:212,column:5}}],line:196},13:{loc:{start:{line:197,column:6},end:{line:203,column:7}},type:"if",locations:[{start:{line:197,column:6},end:{line:203,column:7}},{start:{line:200,column:13},end:{line:203,column:7}}],line:197},14:{loc:{start:{line:197,column:10},end:{line:197,column:53}},type:"binary-expr",locations:[{start:{line:197,column:10},end:{line:197,column:19}},{start:{line:197,column:23},end:{line:197,column:33}},{start:{line:197,column:37},end:{line:197,column:53}}],line:197},15:{loc:{start:{line:200,column:13},end:{line:203,column:7}},type:"if",locations:[{start:{line:200,column:13},end:{line:203,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:200},16:{loc:{start:{line:200,column:17},end:{line:200,column:46}},type:"binary-expr",locations:[{start:{line:200,column:17},end:{line:200,column:26}},{start:{line:200,column:30},end:{line:200,column:46}}],line:200},17:{loc:{start:{line:205,column:6},end:{line:211,column:7}},type:"if",locations:[{start:{line:205,column:6},end:{line:211,column:7}},{start:{line:208,column:13},end:{line:211,column:7}}],line:205},18:{loc:{start:{line:205,column:10},end:{line:205,column:39}},type:"binary-expr",locations:[{start:{line:205,column:10},end:{line:205,column:19}},{start:{line:205,column:23},end:{line:205,column:39}}],line:205},19:{loc:{start:{line:208,column:13},end:{line:211,column:7}},type:"if",locations:[{start:{line:208,column:13},end:{line:211,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:208},20:{loc:{start:{line:208,column:17},end:{line:208,column:46}},type:"binary-expr",locations:[{start:{line:208,column:17},end:{line:208,column:26}},{start:{line:208,column:30},end:{line:208,column:46}}],line:208},21:{loc:{start:{line:225,column:21},end:{line:225,column:55}},type:"binary-expr",locations:[{start:{line:225,column:21},end:{line:225,column:49}},{start:{line:225,column:53},end:{line:225,column:55}}],line:225},22:{loc:{start:{line:226,column:24},end:{line:226,column:93}},type:"binary-expr",locations:[{start:{line:226,column:24},end:{line:226,column:70}},{start:{line:226,column:74},end:{line:226,column:93}}],line:226},23:{loc:{start:{line:227,column:21},end:{line:227,column:110}},type:"cond-expr",locations:[{start:{line:227,column:55},end:{line:227,column:96}},{start:{line:227,column:99},end:{line:227,column:110}}],line:227},24:{loc:{start:{line:238,column:4},end:{line:242,column:5}},type:"if",locations:[{start:{line:238,column:4},end:{line:242,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:238},25:{loc:{start:{line:238,column:8},end:{line:238,column:123}},type:"binary-expr",locations:[{start:{line:238,column:8},end:{line:238,column:40}},{start:{line:238,column:44},end:{line:238,column:123}}],line:238},26:{loc:{start:{line:252,column:30},end:{line:252,column:39}},type:"default-arg",locations:[{start:{line:252,column:37},end:{line:252,column:39}}],line:252},27:{loc:{start:{line:259,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:259,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:259},28:{loc:{start:{line:259,column:8},end:{line:259,column:62}},type:"binary-expr",locations:[{start:{line:259,column:8},end:{line:259,column:23}},{start:{line:259,column:27},end:{line:259,column:62}}],line:259},29:{loc:{start:{line:262,column:4},end:{line:264,column:5}},type:"if",locations:[{start:{line:262,column:4},end:{line:264,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:262},30:{loc:{start:{line:262,column:8},end:{line:262,column:62}},type:"binary-expr",locations:[{start:{line:262,column:8},end:{line:262,column:23}},{start:{line:262,column:27},end:{line:262,column:62}}],line:262},31:{loc:{start:{line:266,column:6},end:{line:268,column:7}},type:"if",locations:[{start:{line:266,column:6},end:{line:268,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:266},32:{loc:{start:{line:266,column:10},end:{line:266,column:69}},type:"binary-expr",locations:[{start:{line:266,column:10},end:{line:266,column:16}},{start:{line:266,column:20},end:{line:266,column:35}},{start:{line:266,column:39},end:{line:266,column:69}}],line:266},33:{loc:{start:{line:270,column:4},end:{line:272,column:5}},type:"if",locations:[{start:{line:270,column:4},end:{line:272,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:270},34:{loc:{start:{line:273,column:19},end:{line:273,column:51}},type:"binary-expr",locations:[{start:{line:273,column:19},end:{line:273,column:45}},{start:{line:273,column:49},end:{line:273,column:51}}],line:273},35:{loc:{start:{line:275,column:4},end:{line:286,column:5}},type:"if",locations:[{start:{line:275,column:4},end:{line:286,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:275},36:{loc:{start:{line:275,column:8},end:{line:275,column:35}},type:"binary-expr",locations:[{start:{line:275,column:8},end:{line:275,column:16}},{start:{line:275,column:20},end:{line:275,column:35}}],line:275},37:{loc:{start:{line:278,column:8},end:{line:283,column:9}},type:"if",locations:[{start:{line:278,column:8},end:{line:283,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},38:{loc:{start:{line:278,column:12},end:{line:278,column:56}},type:"binary-expr",locations:[{start:{line:278,column:12},end:{line:278,column:27}},{start:{line:278,column:31},end:{line:278,column:56}}],line:278},39:{loc:{start:{line:289,column:6},end:{line:302,column:7}},type:"if",locations:[{start:{line:289,column:6},end:{line:302,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:289},40:{loc:{start:{line:304,column:6},end:{line:317,column:7}},type:"if",locations:[{start:{line:304,column:6},end:{line:317,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:304},41:{loc:{start:{line:319,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:319,column:6},end:{line:337,column:7}},{start:{line:333,column:13},end:{line:337,column:7}}],line:319},42:{loc:{start:{line:321,column:20},end:{line:321,column:78}},type:"cond-expr",locations:[{start:{line:321,column:40},end:{line:321,column:67}},{start:{line:321,column:70},end:{line:321,column:78}}],line:321},43:{loc:{start:{line:321,column:20},end:{line:321,column:37}},type:"binary-expr",locations:[{start:{line:321,column:20},end:{line:321,column:25}},{start:{line:321,column:29},end:{line:321,column:37}}],line:321},44:{loc:{start:{line:340,column:4},end:{line:354,column:5}},type:"if",locations:[{start:{line:340,column:4},end:{line:354,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:340},45:{loc:{start:{line:344,column:8},end:{line:352,column:9}},type:"if",locations:[{start:{line:344,column:8},end:{line:352,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:344},46:{loc:{start:{line:355,column:4},end:{line:357,column:5}},type:"if",locations:[{start:{line:355,column:4},end:{line:357,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:355},47:{loc:{start:{line:358,column:4},end:{line:360,column:5}},type:"if",locations:[{start:{line:358,column:4},end:{line:360,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:358},48:{loc:{start:{line:361,column:4},end:{line:363,column:5}},type:"if",locations:[{start:{line:361,column:4},end:{line:363,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:361},49:{loc:{start:{line:364,column:4},end:{line:366,column:5}},type:"if",locations:[{start:{line:364,column:4},end:{line:366,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},50:{loc:{start:{line:397,column:4},end:{line:397,column:38}},type:"if",locations:[{start:{line:397,column:4},end:{line:397,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:397},51:{loc:{start:{line:398,column:4},end:{line:402,column:5}},type:"if",locations:[{start:{line:398,column:4},end:{line:402,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:398},52:{loc:{start:{line:432,column:26},end:{line:432,column:70}},type:"cond-expr",locations:[{start:{line:432,column:46},end:{line:432,column:65}},{start:{line:432,column:68},end:{line:432,column:70}}],line:432},53:{loc:{start:{line:433,column:31},end:{line:433,column:87}},type:"cond-expr",locations:[{start:{line:433,column:69},end:{line:433,column:78}},{start:{line:433,column:81},end:{line:433,column:87}}],line:433},54:{loc:{start:{line:457,column:21},end:{line:457,column:44}},type:"binary-expr",locations:[{start:{line:457,column:21},end:{line:457,column:38}},{start:{line:457,column:42},end:{line:457,column:44}}],line:457},55:{loc:{start:{line:458,column:4},end:{line:469,column:5}},type:"if",locations:[{start:{line:458,column:4},end:{line:469,column:5}},{start:{line:467,column:11},end:{line:469,column:5}}],line:458},56:{loc:{start:{line:480,column:6},end:{line:516,column:7}},type:"if",locations:[{start:{line:480,column:6},end:{line:516,column:7}},{start:{line:485,column:13},end:{line:516,column:7}}],line:480},57:{loc:{start:{line:480,column:10},end:{line:480,column:56}},type:"binary-expr",locations:[{start:{line:480,column:10},end:{line:480,column:34}},{start:{line:480,column:38},end:{line:480,column:56}}],line:480},58:{loc:{start:{line:481,column:26},end:{line:481,column:92}},type:"binary-expr",locations:[{start:{line:481,column:26},end:{line:481,column:49}},{start:{line:481,column:53},end:{line:481,column:92}}],line:481},59:{loc:{start:{line:482,column:8},end:{line:484,column:9}},type:"if",locations:[{start:{line:482,column:8},end:{line:484,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:482},60:{loc:{start:{line:497,column:10},end:{line:499,column:11}},type:"if",locations:[{start:{line:497,column:10},end:{line:499,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:497},61:{loc:{start:{line:505,column:10},end:{line:512,column:11}},type:"if",locations:[{start:{line:505,column:10},end:{line:512,column:11}},{start:{line:508,column:17},end:{line:512,column:11}}],line:505},62:{loc:{start:{line:518,column:4},end:{line:523,column:5}},type:"if",locations:[{start:{line:518,column:4},end:{line:523,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:518},63:{loc:{start:{line:526,column:21},end:{line:526,column:55}},type:"binary-expr",locations:[{start:{line:526,column:21},end:{line:526,column:49}},{start:{line:526,column:53},end:{line:526,column:55}}],line:526},64:{loc:{start:{line:527,column:11},end:{line:527,column:52}},type:"binary-expr",locations:[{start:{line:527,column:11},end:{line:527,column:40}},{start:{line:527,column:44},end:{line:527,column:52}}],line:527},65:{loc:{start:{line:537,column:16},end:{line:537,column:41}},type:"binary-expr",locations:[{start:{line:537,column:16},end:{line:537,column:29}},{start:{line:537,column:33},end:{line:537,column:41}}],line:537},66:{loc:{start:{line:550,column:4},end:{line:572,column:5}},type:"if",locations:[{start:{line:550,column:4},end:{line:572,column:5}},{start:{line:560,column:11},end:{line:572,column:5}}],line:550},67:{loc:{start:{line:574,column:4},end:{line:576,column:5}},type:"if",locations:[{start:{line:574,column:4},end:{line:576,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:574},68:{loc:{start:{line:578,column:4},end:{line:580,column:5}},type:"if",locations:[{start:{line:578,column:4},end:{line:580,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:578},69:{loc:{start:{line:589,column:66},end:{line:589,column:91}},type:"cond-expr",locations:[{start:{line:589,column:81},end:{line:589,column:84}},{start:{line:589,column:87},end:{line:589,column:91}}],line:589},70:{loc:{start:{line:590,column:4},end:{line:594,column:5}},type:"if",locations:[{start:{line:590,column:4},end:{line:594,column:5}},{start:{line:592,column:11},end:{line:594,column:5}}],line:590},71:{loc:{start:{line:595,column:4},end:{line:599,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:599,column:5}},{start:{line:597,column:11},end:{line:599,column:5}}],line:595},72:{loc:{start:{line:597,column:11},end:{line:599,column:5}},type:"if",locations:[{start:{line:597,column:11},end:{line:599,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:597},73:{loc:{start:{line:605,column:4},end:{line:617,column:5}},type:"if",locations:[{start:{line:605,column:4},end:{line:617,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:605},74:{loc:{start:{line:605,column:8},end:{line:605,column:39}},type:"binary-expr",locations:[{start:{line:605,column:8},end:{line:605,column:18}},{start:{line:605,column:22},end:{line:605,column:39}}],line:605},75:{loc:{start:{line:619,column:4},end:{line:621,column:5}},type:"if",locations:[{start:{line:619,column:4},end:{line:621,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:619},76:{loc:{start:{line:619,column:8},end:{line:619,column:27}},type:"binary-expr",locations:[{start:{line:619,column:8},end:{line:619,column:12}},{start:{line:619,column:16},end:{line:619,column:27}}],line:619},77:{loc:{start:{line:623,column:4},end:{line:646,column:5}},type:"if",locations:[{start:{line:623,column:4},end:{line:646,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:623},78:{loc:{start:{line:631,column:8},end:{line:636,column:9}},type:"if",locations:[{start:{line:631,column:8},end:{line:636,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:631},79:{loc:{start:{line:633,column:10},end:{line:635,column:11}},type:"if",locations:[{start:{line:633,column:10},end:{line:635,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:633},80:{loc:{start:{line:637,column:8},end:{line:642,column:9}},type:"if",locations:[{start:{line:637,column:8},end:{line:642,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:637},81:{loc:{start:{line:685,column:19},end:{line:685,column:51}},type:"binary-expr",locations:[{start:{line:685,column:19},end:{line:685,column:45}},{start:{line:685,column:49},end:{line:685,column:51}}],line:685},82:{loc:{start:{line:686,column:26},end:{line:686,column:92}},type:"cond-expr",locations:[{start:{line:686,column:46},end:{line:686,column:83}},{start:{line:686,column:86},end:{line:686,column:92}}],line:686},83:{loc:{start:{line:701,column:23},end:{line:708,column:14}},type:"cond-expr",locations:[{start:{line:701,column:70},end:{line:708,column:5}},{start:{line:708,column:8},end:{line:708,column:14}}],line:701},84:{loc:{start:{line:724,column:24},end:{line:743,column:14}},type:"cond-expr",locations:[{start:{line:724,column:56},end:{line:743,column:5}},{start:{line:743,column:8},end:{line:743,column:14}}],line:724},85:{loc:{start:{line:744,column:24},end:{line:754,column:14}},type:"cond-expr",locations:[{start:{line:744,column:97},end:{line:754,column:5}},{start:{line:754,column:8},end:{line:754,column:14}}],line:744}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle","style"],mappings:"AAurBmB,SAAA,KAwNA,YAxNA;AAvrBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,wBAAuB;AAC/B,OAAO,YAAY;AAEnB,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAAmC;AAC1C,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,sBAAsB;AAE7B,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyCA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,YAAY;AAAA,MACd;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,aAAa;AAAA,QAChC;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,QAAQ,EAAE,KAAK,CAAA,UAAS;AAC7C,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,OAAO,EAAE,KAAK,CAAA,UAAS;AAC5C,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAA8B,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE1E,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO;AAAA,QAAA;AAAA,MACzD;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,CAAC,UAAoC,KAAK,YAAY,KAAK;AAAA,MAAA;AAAA,IAC5E;AAEA,UAAM,aAAa,KAAK,MAAM,OAAO,aAAa;AAAA,MAAC;AAAA,MAAA;AAAA,QACjD,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,CAACC,WAAU,KAAK,eAAeA,MAAK;AAAA,QAC9C,SAAS,MAAM,KAAK,SAAS,cAAc,KAAK;AAAA,MAAA;AAAA,IAClD,IAAK;AAEL,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,OAAO;AAAA,UAC5C,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,WAAW;AAAA,QAAA;AAAA,MAClD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,UAAU;AAAA,QAAA;AAAA,MACjD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,QAAQ;AAAA,UAC7C,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,MAAM,KAAK,YAAY,MAAM;AAAA,UAC3C,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,SAAS;AAAA,QAAA;AAAA,MAChD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,MAAM,KAAK,YAAY,aAAa;AAAA,QAAA;AAAA,MACpD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a07c2afbabbb0ad6515959638246d740e8d9d6d"},o=t[i]||(t[i]={});(!o[n]||o[n].hash!==e)&&(o[n]=r);var s=o[n];return fe=function(){return s},s}fe();fe().s[0]++;window.Buffer=Oae.Buffer;function ZM(n,e){fe().f[0]++;const t=(fe().s[1]++,n.match(/\.tilehosting\.com/)),i=(fe().s[2]++,n.match(/\.maptiler\.com/)),r=(fe().s[3]++,n.match(/\.thunderforest\.com/)),o=(fe().s[4]++,n.match(/\.locationiq\.com/));if(fe().s[5]++,fe().b[1][0]++,t||(fe().b[1][1]++,i)){fe().b[0][0]++;const s=(fe().s[6]++,Od.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(fe().s[7]++,s)return fe().b[2][0]++,fe().s[8]++,n.replace("{key}",s);fe().b[2][1]++}else if(fe().b[0][1]++,fe().s[9]++,r){fe().b[3][0]++;const s=(fe().s[10]++,Od.getAccessToken("thunderforest",e,{allowFallback:!0}));if(fe().s[11]++,s)return fe().b[4][0]++,fe().s[12]++,n.replace("{key}",s);fe().b[4][1]++}else if(fe().b[3][1]++,fe().s[13]++,o){fe().b[5][0]++;const s=(fe().s[14]++,Od.getAccessToken("locationiq",e,{allowFallback:!0}));if(fe().s[15]++,s)return fe().b[6][0]++,fe().s[16]++,n.replace("{key}",s);fe().b[6][1]++}else return fe().b[5][1]++,fe().s[17]++,n}function c$(n,e,t){return fe().f[1]++,fe().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class gDe extends En.Component{revisionStore;styleStore=(fe().s[19]++,null);layerWatcher;constructor(e){fe().f[2]++,fe().s[20]++,super(e),fe().s[21]++,this.revisionStore=new cDe,fe().s[22]++,this.configureKeyboardShortcuts(),fe().s[23]++,this.state={errors:[],infos:[],mapStyle:Od.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Zr,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1,globalState:!1,codeEditor:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},fe().s[24]++,this.layerWatcher=new mDe({onVectorLayersChange:t=>(fe().f[3]++,fe().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(fe().s[26]++,()=>{fe().f[4]++;const e=(fe().s[27]++,[{key:"?",handler:()=>{fe().f[5]++,fe().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{fe().f[6]++,fe().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{fe().f[7]++,fe().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{fe().f[8]++,fe().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{fe().f[9]++,fe().s[32]++,this.toggleModal("settings")}},{key:"g",handler:()=>{fe().f[10]++,fe().s[33]++,this.toggleModal("globalState")}},{key:"i",handler:()=>{fe().f[11]++,fe().s[34]++,this.setMapState(this.state.mapState==="map"?(fe().b[7][0]++,"inspect"):(fe().b[7][1]++,"map"))}},{key:"m",handler:()=>{fe().f[12]++,fe().s[35]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{fe().f[13]++,fe().s[36]++,this.toggleModal("debug")}}]);fe().s[37]++,document.body.addEventListener("keyup",t=>{if(fe().f[14]++,fe().s[38]++,t.key==="Escape")fe().b[8][0]++,fe().s[39]++,t.target.blur(),fe().s[40]++,document.body.focus();else if(fe().b[8][1]++,fe().s[41]++,fe().b[10][0]++,this.state.isOpen.shortcuts||(fe().b[10][1]++,document.activeElement===document.body)){fe().b[9][0]++;const i=(fe().s[42]++,e.find(r=>(fe().f[15]++,fe().s[43]++,r.key===t.key)));fe().s[44]++,i?(fe().b[11][0]++,fe().s[45]++,this.setModal("shortcuts",!1),fe().s[46]++,i.handler()):fe().b[11][1]++}else fe().b[9][1]++})});handleKeyPress=(fe().s[47]++,e=>{fe().f[16]++,fe().s[48]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(fe().b[12][0]++,fe().s[49]++,fe().b[14][0]++,e.metaKey&&(fe().b[14][1]++,e.shiftKey)&&(fe().b[14][2]++,e.keyCode===90)?(fe().b[13][0]++,fe().s[50]++,e.preventDefault(),fe().s[51]++,this.onRedo()):(fe().b[13][1]++,fe().s[52]++,fe().b[16][0]++,e.metaKey&&(fe().b[16][1]++,e.keyCode===90)?(fe().b[15][0]++,fe().s[53]++,e.preventDefault(),fe().s[54]++,this.onUndo()):fe().b[15][1]++)):(fe().b[12][1]++,fe().s[55]++,fe().b[18][0]++,e.ctrlKey&&(fe().b[18][1]++,e.keyCode===90)?(fe().b[17][0]++,fe().s[56]++,e.preventDefault(),fe().s[57]++,this.onUndo()):(fe().b[17][1]++,fe().s[58]++,fe().b[20][0]++,e.ctrlKey&&(fe().b[20][1]++,e.keyCode===89)?(fe().b[19][0]++,fe().s[59]++,e.preventDefault(),fe().s[60]++,this.onRedo()):fe().b[19][1]++))});async componentDidMount(){fe().f[17]++,fe().s[61]++,this.styleStore=await uDe((e,t)=>(fe().f[18]++,fe().s[62]++,this.onStyleChanged(e,t))),fe().s[63]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){fe().f[19]++,fe().s[64]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){fe().f[20]++,fe().s[65]++,this.styleStore?.save(e)}updateFonts(e){fe().f[21]++;const t=(fe().s[66]++,fe().b[21][0]++,this.state.mapStyle.metadata||(fe().b[21][1]++,{})),i=(fe().s[67]++,fe().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(fe().b[22][1]++,boe.openmaptiles)),r=(fe().s[68]++,typeof e=="string"?(fe().b[23][0]++,e.replace("{key}",i)):(fe().b[23][1]++,e));fe().s[69]++,YRe(r).then(o=>{fe().f[22]++,fe().s[70]++,this.setState({spec:c$(this.state.spec,"glyphs",o)})})}updateIcons(e){fe().f[23]++,fe().s[71]++,VRe(e).then(t=>{fe().f[24]++,fe().s[72]++,this.setState({spec:c$(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(fe().s[73]++,(e,t)=>{fe().f[25]++,fe().s[74]++,fe().b[25][0]++,e==="maputnik:renderer"&&(fe().b[25][1]++,t!==Tae(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(fe().b[24][0]++,fe().s[75]++,this.setState({mapState:"map"})):fe().b[24][1]++;const i=(fe().s[76]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});fe().s[77]++,this.onStyleChanged(i)});onStyleChanged=(fe().s[78]++,(e,t=(fe().b[26][0]++,{}))=>{fe().f[26]++,fe().s[79]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},fe().s[80]++,fe().b[28][0]++,e.glyphs&&(fe().b[28][1]++,typeof e.glyphs=="string")?(fe().b[27][0]++,fe().s[81]++,e.glyphs=ZM(e.glyphs,e)):fe().b[27][1]++,fe().s[82]++,fe().b[30][0]++,e.sprite&&(fe().b[30][1]++,typeof e.sprite=="string")?(fe().b[29][0]++,fe().s[83]++,e.sprite=ZM(e.sprite,e)):fe().b[29][1]++,fe().s[84]++;for(const[a,c]of Object.entries(e.sources))fe().s[85]++,fe().b[32][0]++,c&&(fe().b[32][1]++,"url"in c)&&(fe().b[32][2]++,typeof c.url=="string")?(fe().b[31][0]++,fe().s[86]++,c.url=ZM(c.url,e)):fe().b[31][1]++;fe().s[87]++,t.initialLoad?(fe().b[33][0]++,fe().s[88]++,this.getInitialStateFromUrl(e)):fe().b[33][1]++;const i=(fe().s[89]++,fe().b[34][0]++,kd(e)||(fe().b[34][1]++,[])),r=(fe().s[90]++,[]);if(fe().s[91]++,fe().b[36][0]++,e&&(fe().b[36][1]++,e.layers)){fe().b[35][0]++;const a=(fe().s[92]++,new window.Map);fe().s[93]++,e.layers.forEach((c,h)=>{if(fe().f[27]++,fe().s[94]++,fe().b[38][0]++,c.id===""&&(fe().b[38][1]++,a.has(c.id))){fe().b[37][0]++;const m=(fe().s[95]++,new Error(`layers[${h}]: duplicate layer id [empty_string], previously used`));fe().s[96]++,r.push(m)}else fe().b[37][1]++;fe().s[97]++,a.set(c.id,!0)})}else fe().b[35][1]++;const o=(fe().s[98]++,r.concat(i).map(a=>{fe().f[28]++;const c=(fe().s[99]++,a.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(fe().s[100]++,c){fe().b[39][0]++;const[,v,x]=(fe().s[101]++,c);return fe().s[102]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:"id",message:x}}}}else fe().b[39][1]++;const h=(fe().s[103]++,a.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(fe().s[104]++,h){fe().b[40][0]++;const[,v,x]=(fe().s[105]++,h);return fe().s[106]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:"source",message:x}}}}else fe().b[40][1]++;const m=(fe().s[107]++,a.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(fe().s[108]++,m){fe().b[41][0]++;const[,v,x,E,R]=(fe().s[109]++,m),P=(fe().s[110]++,fe().b[43][0]++,x&&(fe().b[43][1]++,E)?(fe().b[42][0]++,[x,E].join(".")):(fe().b[42][1]++,E));return fe().s[111]++,{message:a.message,parsed:{type:"layer",data:{index:parseInt(v,10),key:P,message:R}}}}else return fe().b[41][1]++,fe().s[112]++,{message:a.message}}));let s=(fe().s[113]++,void 0);if(fe().s[114]++,i.length>0){fe().b[44][0]++,fe().s[115]++,s=bL(e),fe().s[116]++;for(const a of i){const{message:c}=(fe().s[117]++,a);if(fe().s[118]++,c){fe().b[45][0]++,fe().s[119]++;try{const h=(fe().s[120]++,c.split(":")[0]),m=(fe().s[121]++,h.match(/^\S+?\[\d+\]\.[^[]+/)[0]);fe().s[122]++,N4.unset(s,m)}catch(h){fe().s[123]++,console.warn(c+" "+h)}}else fe().b[45][1]++}}else fe().b[44][1]++;fe().s[124]++,e.glyphs!==this.state.mapStyle.glyphs?(fe().b[46][0]++,fe().s[125]++,this.updateFonts(e.glyphs)):fe().b[46][1]++,fe().s[126]++,e.sprite!==this.state.mapStyle.sprite?(fe().b[47][0]++,fe().s[127]++,this.updateIcons(e.sprite)):fe().b[47][1]++,fe().s[128]++,t.addRevision?(fe().b[48][0]++,fe().s[129]++,this.revisionStore.addRevision(e)):fe().b[48][1]++,fe().s[130]++,t.save?(fe().b[49][0]++,fe().s[131]++,this.saveStyle(e)):fe().b[49][1]++,fe().s[132]++,this.setState({mapStyle:e,dirtyMapStyle:s,errors:o},()=>{fe().f[29]++,fe().s[133]++,this.fetchSources(),fe().s[134]++,this.setStateInUrl()})});onUndo=(fe().s[135]++,()=>{fe().f[30]++;const e=(fe().s[136]++,this.revisionStore.undo()),t=(fe().s[137]++,$Re(this.state.mapStyle,e));fe().s[138]++,this.onStyleChanged(e,{addRevision:!1}),fe().s[139]++,this.setState({infos:t})});onRedo=(fe().s[140]++,()=>{fe().f[31]++;const e=(fe().s[141]++,this.revisionStore.redo()),t=(fe().s[142]++,HRe(this.state.mapStyle,e));fe().s[143]++,this.onStyleChanged(e,{addRevision:!1}),fe().s[144]++,this.setState({infos:t})});onMoveLayer=(fe().s[145]++,e=>{fe().f[32]++;let{oldIndex:t,newIndex:i}=(fe().s[146]++,e),r=(fe().s[147]++,this.state.mapStyle.layers);if(fe().s[148]++,t=_L(t,0,r.length-1),fe().s[149]++,i=_L(i,0,r.length-1),fe().s[150]++,t===i){fe().b[50][0]++,fe().s[151]++;return}else fe().b[50][1]++;fe().s[152]++,t===this.state.selectedLayerIndex?(fe().b[51][0]++,fe().s[153]++,this.setState({selectedLayerIndex:i})):fe().b[51][1]++,fe().s[154]++,r=r.slice(0),fe().s[155]++,Pae(r,t,i),fe().s[156]++,this.onLayersChange(r)});onLayersChange=(fe().s[157]++,e=>{fe().f[33]++;const t=(fe().s[158]++,{...this.state.mapStyle,layers:e});fe().s[159]++,this.onStyleChanged(t)});onLayerDestroy=(fe().s[160]++,e=>{fe().f[34]++;const t=(fe().s[161]++,this.state.mapStyle.layers),i=(fe().s[162]++,t.slice(0));fe().s[163]++,i.splice(e,1),fe().s[164]++,this.onLayersChange(i)});onLayerCopy=(fe().s[165]++,e=>{fe().f[35]++;const t=(fe().s[166]++,this.state.mapStyle.layers),i=(fe().s[167]++,t.slice(0)),r=(fe().s[168]++,bL(i[e]));fe().s[169]++,r.id=r.id+"-copy",fe().s[170]++,i.splice(e,0,r),fe().s[171]++,this.onLayersChange(i)});onLayerVisibilityToggle=(fe().s[172]++,e=>{fe().f[36]++;const t=(fe().s[173]++,this.state.mapStyle.layers),i=(fe().s[174]++,t.slice(0)),r=(fe().s[175]++,{...i[e]}),o=(fe().s[176]++,"layout"in r?(fe().b[52][0]++,{...r.layout}):(fe().b[52][1]++,{}));fe().s[177]++,o.visibility=o.visibility==="none"?(fe().b[53][0]++,"visible"):(fe().b[53][1]++,"none"),fe().s[178]++,r.layout=o,fe().s[179]++,i[e]=r,fe().s[180]++,this.onLayersChange(i)});onLayerIdChange=(fe().s[181]++,(e,t,i)=>{fe().f[37]++;const r=(fe().s[182]++,this.state.mapStyle.layers.slice(0));fe().s[183]++,r[e]={...r[e],id:i},fe().s[184]++,this.onLayersChange(r)});onLayerChanged=(fe().s[185]++,(e,t)=>{fe().f[38]++;const i=(fe().s[186]++,this.state.mapStyle.layers.slice(0));fe().s[187]++,i[e]=t,fe().s[188]++,this.onLayersChange(i)});setMapState=(fe().s[189]++,e=>{fe().f[39]++,fe().s[190]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(fe().s[191]++,e=>{fe().f[40]++;const t=(fe().s[192]++,fe().b[54][0]++,e.metadata||(fe().b[54][1]++,{}));if(fe().s[193]++,t["maputnik:renderer"]===void 0){fe().b[55][0]++;const i=(fe().s[194]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return fe().s[195]++,i}else return fe().b[55][1]++,fe().s[196]++,e});openStyle=(fe().s[197]++,(e,t)=>{fe().f[41]++,fe().s[198]++,this.setState({fileHandle:t}),fe().s[199]++,e=this.setDefaultValues(e),fe().s[200]++,this.onStyleChanged(e)});async fetchSources(){fe().f[42]++;const e=(fe().s[201]++,{});fe().s[202]++;for(const t of Object.keys(this.state.mapStyle.sources)){const i=(fe().s[203]++,this.state.mapStyle.sources[t]);if(fe().s[204]++,fe().b[57][0]++,i.type!=="vector"||(fe().b[57][1]++,!("url"in i)))fe().b[56][0]++,fe().s[205]++,e[t]=(fe().b[58][0]++,this.state.sources[t]||(fe().b[58][1]++,{...this.state.mapStyle.sources[t]})),fe().s[206]++,e[t].layers===void 0?(fe().b[59][0]++,fe().s[207]++,e[t].layers=[]):fe().b[59][1]++;else{fe().b[56][1]++,fe().s[208]++,e[t]={type:i.type,layers:[]};let r=(fe().s[209]++,i.url);fe().s[210]++;try{fe().s[211]++,r=ZM(r,this.state.mapStyle)}catch(s){fe().s[212]++,console.warn("Failed to setFetchAccessToken: ",s)}fe().s[213]++;const o=s=>{if(fe().f[43]++,fe().s[214]++,Object.prototype.hasOwnProperty.call(s,"vector_layers"))fe().b[60][1]++;else{fe().b[60][0]++,fe().s[215]++;return}fe().s[216]++;for(const a of s.vector_layers)fe().s[217]++,e[t].layers.push(a.id)};fe().s[218]++;try{if(fe().s[219]++,r.startsWith("pmtiles://")){fe().b[61][0]++;const s=(fe().s[220]++,await new dT(r.substring(10)).getTileJson(""));fe().s[221]++,o(s)}else{fe().b[61][1]++;const s=(fe().s[222]++,await fetch(r,{mode:"cors"})),a=(fe().s[223]++,await s.json());fe().s[224]++,o(a)}}catch(s){fe().s[225]++,console.error(`Failed to process source for url: '${r}', ${s}`)}}}fe().s[226]++,VR(this.state.sources,e)?fe().b[62][1]++:(fe().b[62][0]++,fe().s[227]++,console.debug("Setting sources",e),fe().s[228]++,this.setState({sources:e}))}_getRenderer(){fe().f[44]++;const e=(fe().s[229]++,fe().b[63][0]++,this.state.mapStyle.metadata||(fe().b[63][1]++,{}));return fe().s[230]++,fe().b[64][0]++,e["maputnik:renderer"]||(fe().b[64][1]++,"mlgljs")}onMapChange=(fe().s[231]++,e=>{fe().f[45]++,fe().s[232]++,this.setState({mapView:e})});mapRenderer(){fe().f[46]++;const{mapStyle:e,dirtyMapStyle:t}=(fe().s[233]++,this.state),i=(fe().s[234]++,{mapStyle:(fe().b[65][0]++,t||(fe().b[65][1]++,e)),replaceAccessTokens:c=>(fe().f[47]++,fe().s[235]++,Od.replaceAccessTokens(c,{allowFallback:!0})),onDataChange:c=>{fe().f[48]++,fe().s[236]++,this.layerWatcher.analyzeMap(c.map),fe().s[237]++,this.fetchSources()}}),r=(fe().s[238]++,this._getRenderer());let o;fe().s[239]++,r==="ol"?(fe().b[66][0]++,fe().s[240]++,o=te.jsx(Pbe,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:c=>(fe().f[49]++,fe().s[241]++,this.onLayerSelect(+c))})):(fe().b[66][1]++,fe().s[242]++,o=te.jsx(Jde,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let s;fe().s[243]++,this.state.mapState.match(/^filter-/)?(fe().b[67][0]++,fe().s[244]++,s=this.state.mapState.replace(/^filter-/,"")):fe().b[67][1]++;const a=(fe().s[245]++,{});return fe().s[246]++,s?(fe().b[68][0]++,fe().s[247]++,a.filter=`url('#${s}')`):fe().b[68][1]++,fe().s[248]++,te.jsx("div",{style:a,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:o})}setStateInUrl=(fe().s[249]++,()=>{fe().f[50]++;const{mapState:e,mapStyle:t,isOpen:i}=(fe().s[250]++,this.state),{selectedLayerIndex:r}=(fe().s[251]++,this.state),o=(fe().s[252]++,new URL(location.href)),s=(fe().s[253]++,OL(JSON.stringify(t)));fe().s[254]++,o.searchParams.set("layer",`${s}~${r}`);const a=(fe().s[255]++,Object.entries(i).map(([c,h])=>(fe().f[51]++,fe().s[256]++,h===!0?(fe().b[69][0]++,c):(fe().b[69][1]++,null))).filter(c=>(fe().f[52]++,fe().s[257]++,c!==null)));fe().s[258]++,a.length>0?(fe().b[70][0]++,fe().s[259]++,o.searchParams.set("modal",a.join(","))):(fe().b[70][1]++,fe().s[260]++,o.searchParams.delete("modal")),fe().s[261]++,e==="map"?(fe().b[71][0]++,fe().s[262]++,o.searchParams.delete("view")):(fe().b[71][1]++,fe().s[263]++,e==="inspect"?(fe().b[72][0]++,fe().s[264]++,o.searchParams.set("view","inspect")):fe().b[72][1]++),fe().s[265]++,history.replaceState({selectedLayerIndex:r},"Maputnik",o.href)});getInitialStateFromUrl=(fe().s[266]++,e=>{fe().f[53]++;const t=(fe().s[267]++,new URL(location.href)),i=(fe().s[268]++,t.searchParams.get("modal"));if(fe().s[269]++,fe().b[74][0]++,i&&(fe().b[74][1]++,i!=="")){fe().b[73][0]++;const s=(fe().s[270]++,i.split(",")),a=(fe().s[271]++,{});fe().s[272]++,s.forEach(c=>{fe().f[54]++,fe().s[273]++,a[c]=!0}),fe().s[274]++,this.setState({isOpen:{...this.state.isOpen,...a}})}else fe().b[73][1]++;const r=(fe().s[275]++,t.searchParams.get("view"));fe().s[276]++,fe().b[76][0]++,r&&(fe().b[76][1]++,r!=="")?(fe().b[75][0]++,fe().s[277]++,this.setMapState(r)):fe().b[75][1]++;const o=(fe().s[278]++,t.searchParams.get("layer"));if(fe().s[279]++,o){fe().b[77][0]++,fe().s[280]++;try{const s=(fe().s[281]++,o.split("~")),[a,c]=(fe().s[282]++,[s[0],parseInt(s[1],10)]);let h=(fe().s[283]++,!0);if(fe().s[284]++,a!=="-"){fe().b[78][0]++;const m=(fe().s[285]++,OL(JSON.stringify(e)));fe().s[286]++,m!==parseInt(a,10)?(fe().b[79][0]++,fe().s[287]++,h=!1):fe().b[79][1]++}else fe().b[78][1]++;fe().s[288]++,h?(fe().b[80][0]++,fe().s[289]++,this.setState({selectedLayerIndex:c,selectedLayerOriginalId:e.layers[c].id})):fe().b[80][1]++}catch(s){fe().s[290]++,console.warn(s)}}else fe().b[77][1]++});onLayerSelect=(fe().s[291]++,e=>{fe().f[55]++,fe().s[292]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){fe().f[56]++,fe().s[293]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){fe().f[57]++,fe().s[294]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(fe().s[295]++,e=>{fe().f[58]++,fe().s[296]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(fe().s[297]++,(e,t)=>{fe().f[59]++,fe().s[298]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(fe().s[299]++,(e,t)=>{fe().f[60]++,fe().s[300]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){fe().f[61]++;const e=(fe().s[301]++,fe().b[81][0]++,this.state.mapStyle.layers||(fe().b[81][1]++,[])),t=(fe().s[302]++,e.length>0?(fe().b[82][0]++,e[this.state.selectedLayerIndex]):(fe().b[82][1]++,void 0)),i=(fe().s[303]++,te.jsx(N9e,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:h=>(fe().f[62]++,fe().s[304]++,this.toggleModal(h))})),r=(fe().s[305]++,this.state.isOpen.codeEditor?(fe().b[83][0]++,te.jsx(vMe,{value:this.state.mapStyle,onChange:h=>(fe().f[63]++,fe().s[306]++,this.onStyleChanged(h)),onClose:()=>(fe().f[64]++,fe().s[307]++,this.setModal("codeEditor",!1))})):(fe().b[83][1]++,void 0)),o=(fe().s[308]++,te.jsx(l7e,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),s=(fe().s[309]++,t?(fe().b[84][0]++,te.jsx(C9e,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(fe().b[84][1]++,void 0)),a=(fe().s[310]++,this.state.errors.length+this.state.infos.length>0?(fe().b[85][0]++,te.jsx(q9e,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(fe().b[85][1]++,void 0)),c=(fe().s[311]++,te.jsxs("div",{children:[te.jsx(QRe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:()=>(fe().f[65]++,fe().s[312]++,this.toggleModal("debug")),mapView:this.state.mapView}),te.jsx(NRe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:()=>(fe().f[66]++,fe().s[313]++,this.toggleModal("shortcuts"))}),te.jsx(H9e,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:()=>(fe().f[67]++,fe().s[314]++,this.toggleModal("settings"))}),te.jsx(mRe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:()=>(fe().f[68]++,fe().s[315]++,this.toggleModal("export")),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),te.jsx(FRe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:()=>(fe().f[69]++,fe().s[316]++,this.toggleModal("open")),fileHandle:this.state.fileHandle}),te.jsx(PRe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:()=>(fe().f[70]++,fe().s[317]++,this.toggleModal("sources"))}),te.jsx(qRe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.globalState,onOpenToggle:()=>(fe().f[71]++,fe().s[318]++,this.toggleModal("globalState"))})]}));return fe().s[319]++,te.jsx(Q9e,{toolbar:i,layerList:o,layerEditor:s,codeEditor:r,map:this.mapRenderer(),bottom:a,modals:c})}}const yDe=f$.createRoot(document.querySelector("#app"));yDe.render(te.jsx(rx.Provider,{value:{className:"react-icons"},children:te.jsx(gDe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-pgHxvTFy.js.map
