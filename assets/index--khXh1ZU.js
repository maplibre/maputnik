(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function AA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function SB(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var e4={exports:{}},hC={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s7;function HG(){if(s7)return hC;s7=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:a}}return hC.Fragment=e,hC.jsx=t,hC.jsxs=t,hC}var l7;function VG(){return l7||(l7=1,e4.exports=HG()),e4.exports}var Ae=VG(),t4={exports:{}},ia={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u7;function $G(){if(u7)return ia;u7=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),O=Symbol.iterator;function U(be){return be===null||typeof be!="object"?null:(be=O&&be[O]||be["@@iterator"],typeof be=="function"?be:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,W={};function Y(be,Ne,tt){this.props=be,this.context=Ne,this.refs=W,this.updater=tt||K}Y.prototype.isReactComponent={},Y.prototype.setState=function(be,Ne){if(typeof be!="object"&&typeof be!="function"&&be!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,be,Ne,"setState")},Y.prototype.forceUpdate=function(be){this.updater.enqueueForceUpdate(this,be,"forceUpdate")};function te(){}te.prototype=Y.prototype;function J(be,Ne,tt){this.props=be,this.context=Ne,this.refs=W,this.updater=tt||K}var oe=J.prototype=new te;oe.constructor=J,j(oe,Y.prototype),oe.isPureReactComponent=!0;var ne=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},ae=Object.prototype.hasOwnProperty;function G(be,Ne,tt,lt,kt,gt){return tt=gt.ref,{$$typeof:n,type:be,key:Ne,ref:tt!==void 0?tt:null,props:gt}}function ce(be,Ne){return G(be.type,Ne,void 0,void 0,void 0,be.props)}function ge(be){return typeof be=="object"&&be!==null&&be.$$typeof===n}function ye(be){var Ne={"=":"=0",":":"=2"};return"$"+be.replace(/[=:]/g,function(tt){return Ne[tt]})}var we=/\/+/g;function Oe(be,Ne){return typeof be=="object"&&be!==null&&be.key!=null?ye(""+be.key):Ne.toString(36)}function Se(){}function Ve(be){switch(be.status){case"fulfilled":return be.value;case"rejected":throw be.reason;default:switch(typeof be.status=="string"?be.then(Se,Se):(be.status="pending",be.then(function(Ne){be.status==="pending"&&(be.status="fulfilled",be.value=Ne)},function(Ne){be.status==="pending"&&(be.status="rejected",be.reason=Ne)})),be.status){case"fulfilled":return be.value;case"rejected":throw be.reason}}throw be}function xe(be,Ne,tt,lt,kt){var gt=typeof be;(gt==="undefined"||gt==="boolean")&&(be=null);var St=!1;if(be===null)St=!0;else switch(gt){case"bigint":case"string":case"number":St=!0;break;case"object":switch(be.$$typeof){case n:case e:St=!0;break;case w:return St=be._init,xe(St(be._payload),Ne,tt,lt,kt)}}if(St)return kt=kt(be),St=lt===""?"."+Oe(be,0):lt,ne(kt)?(tt="",St!=null&&(tt=St.replace(we,"$&/")+"/"),xe(kt,Ne,tt,"",function(Ke){return Ke})):kt!=null&&(ge(kt)&&(kt=ce(kt,tt+(kt.key==null||be&&be.key===kt.key?"":(""+kt.key).replace(we,"$&/")+"/")+St)),Ne.push(kt)),1;St=0;var Ut=lt===""?".":lt+":";if(ne(be))for(var Fe=0;Fe<be.length;Fe++)lt=be[Fe],gt=Ut+Oe(lt,Fe),St+=xe(lt,Ne,tt,gt,kt);else if(Fe=U(be),typeof Fe=="function")for(be=Fe.call(be),Fe=0;!(lt=be.next()).done;)lt=lt.value,gt=Ut+Oe(lt,Fe++),St+=xe(lt,Ne,tt,gt,kt);else if(gt==="object"){if(typeof be.then=="function")return xe(Ve(be),Ne,tt,lt,kt);throw Ne=String(be),Error("Objects are not valid as a React child (found: "+(Ne==="[object Object]"?"object with keys {"+Object.keys(be).join(", ")+"}":Ne)+"). If you meant to render a collection of children, use an array instead.")}return St}function ze(be,Ne,tt){if(be==null)return be;var lt=[],kt=0;return xe(be,lt,"","",function(gt){return Ne.call(tt,gt,kt++)}),lt}function st(be){if(be._status===-1){var Ne=be._result;Ne=Ne(),Ne.then(function(tt){(be._status===0||be._status===-1)&&(be._status=1,be._result=tt)},function(tt){(be._status===0||be._status===-1)&&(be._status=2,be._result=tt)}),be._status===-1&&(be._status=0,be._result=Ne)}if(be._status===1)return be._result.default;throw be._result}var Ct=typeof reportError=="function"?reportError:function(be){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof be=="object"&&be!==null&&typeof be.message=="string"?String(be.message):String(be),error:be});if(!window.dispatchEvent(Ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",be);return}console.error(be)};function nt(){}return ia.Children={map:ze,forEach:function(be,Ne,tt){ze(be,function(){Ne.apply(this,arguments)},tt)},count:function(be){var Ne=0;return ze(be,function(){Ne++}),Ne},toArray:function(be){return ze(be,function(Ne){return Ne})||[]},only:function(be){if(!ge(be))throw Error("React.Children.only expected to receive a single React element child.");return be}},ia.Component=Y,ia.Fragment=t,ia.Profiler=r,ia.PureComponent=J,ia.StrictMode=i,ia.Suspense=p,ia.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ia.__COMPILER_RUNTIME={__proto__:null,c:function(be){return $.H.useMemoCache(be)}},ia.cache=function(be){return function(){return be.apply(null,arguments)}},ia.cloneElement=function(be,Ne,tt){if(be==null)throw Error("The argument must be a React element, but you passed "+be+".");var lt=j({},be.props),kt=be.key,gt=void 0;if(Ne!=null)for(St in Ne.ref!==void 0&&(gt=void 0),Ne.key!==void 0&&(kt=""+Ne.key),Ne)!ae.call(Ne,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&Ne.ref===void 0||(lt[St]=Ne[St]);var St=arguments.length-2;if(St===1)lt.children=tt;else if(1<St){for(var Ut=Array(St),Fe=0;Fe<St;Fe++)Ut[Fe]=arguments[Fe+2];lt.children=Ut}return G(be.type,kt,void 0,void 0,gt,lt)},ia.createContext=function(be){return be={$$typeof:l,_currentValue:be,_currentValue2:be,_threadCount:0,Provider:null,Consumer:null},be.Provider=be,be.Consumer={$$typeof:a,_context:be},be},ia.createElement=function(be,Ne,tt){var lt,kt={},gt=null;if(Ne!=null)for(lt in Ne.key!==void 0&&(gt=""+Ne.key),Ne)ae.call(Ne,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(kt[lt]=Ne[lt]);var St=arguments.length-2;if(St===1)kt.children=tt;else if(1<St){for(var Ut=Array(St),Fe=0;Fe<St;Fe++)Ut[Fe]=arguments[Fe+2];kt.children=Ut}if(be&&be.defaultProps)for(lt in St=be.defaultProps,St)kt[lt]===void 0&&(kt[lt]=St[lt]);return G(be,gt,void 0,void 0,null,kt)},ia.createRef=function(){return{current:null}},ia.forwardRef=function(be){return{$$typeof:o,render:be}},ia.isValidElement=ge,ia.lazy=function(be){return{$$typeof:w,_payload:{_status:-1,_result:be},_init:st}},ia.memo=function(be,Ne){return{$$typeof:C,type:be,compare:Ne===void 0?null:Ne}},ia.startTransition=function(be){var Ne=$.T,tt={};$.T=tt;try{var lt=be(),kt=$.S;kt!==null&&kt(tt,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(nt,Ct)}catch(gt){Ct(gt)}finally{$.T=Ne}},ia.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ia.use=function(be){return $.H.use(be)},ia.useActionState=function(be,Ne,tt){return $.H.useActionState(be,Ne,tt)},ia.useCallback=function(be,Ne){return $.H.useCallback(be,Ne)},ia.useContext=function(be){return $.H.useContext(be)},ia.useDebugValue=function(){},ia.useDeferredValue=function(be,Ne){return $.H.useDeferredValue(be,Ne)},ia.useEffect=function(be,Ne,tt){var lt=$.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return lt.useEffect(be,Ne)},ia.useId=function(){return $.H.useId()},ia.useImperativeHandle=function(be,Ne,tt){return $.H.useImperativeHandle(be,Ne,tt)},ia.useInsertionEffect=function(be,Ne){return $.H.useInsertionEffect(be,Ne)},ia.useLayoutEffect=function(be,Ne){return $.H.useLayoutEffect(be,Ne)},ia.useMemo=function(be,Ne){return $.H.useMemo(be,Ne)},ia.useOptimistic=function(be,Ne){return $.H.useOptimistic(be,Ne)},ia.useReducer=function(be,Ne,tt){return $.H.useReducer(be,Ne,tt)},ia.useRef=function(be){return $.H.useRef(be)},ia.useState=function(be){return $.H.useState(be)},ia.useSyncExternalStore=function(be,Ne,tt){return $.H.useSyncExternalStore(be,Ne,tt)},ia.useTransition=function(){return $.H.useTransition()},ia.version="19.1.1",ia}var A7;function Ol(){return A7||(A7=1,t4.exports=$G()),t4.exports}var Nt=Ol();const ni=AA(Nt);var kU={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Sv=ni.createContext&&ni.createContext(kU),ZG=["attr","size","title"];function XG(n,e){if(n==null)return{};var t=JG(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function JG(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Kx(){return Kx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Kx.apply(this,arguments)}function c7(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ux(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?c7(Object(t),!0).forEach(function(i){eW(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c7(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function eW(n,e,t){return e=tW(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tW(n){var e=nW(n,"string");return typeof e=="symbol"?e:e+""}function nW(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DU(n){return n&&n.map((e,t)=>ni.createElement(e.tag,Ux({key:t},e.attr),DU(e.child)))}function La(n){return e=>ni.createElement(iW,Kx({attr:Ux({},n.attr)},e),DU(n.child))}function iW(n){var e=t=>{var{attr:i,size:r,title:a}=n,l=XG(n,ZG),o=r||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),ni.createElement("svg",Kx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,l,{className:p,style:Ux(Ux({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&ni.createElement("title",null,a),n.children)};return Sv!==void 0?ni.createElement(Sv.Consumer,null,t=>e(t)):e(kU)}var n4={exports:{}},dC={},i4={exports:{}},r4={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h7;function rW(){return h7||(h7=1,function(n){function e(ze,st){var Ct=ze.length;ze.push(st);e:for(;0<Ct;){var nt=Ct-1>>>1,be=ze[nt];if(0<r(be,st))ze[nt]=st,ze[Ct]=be,Ct=nt;else break e}}function t(ze){return ze.length===0?null:ze[0]}function i(ze){if(ze.length===0)return null;var st=ze[0],Ct=ze.pop();if(Ct!==st){ze[0]=Ct;e:for(var nt=0,be=ze.length,Ne=be>>>1;nt<Ne;){var tt=2*(nt+1)-1,lt=ze[tt],kt=tt+1,gt=ze[kt];if(0>r(lt,Ct))kt<be&&0>r(gt,lt)?(ze[nt]=gt,ze[kt]=Ct,nt=kt):(ze[nt]=lt,ze[tt]=Ct,nt=tt);else if(kt<be&&0>r(gt,Ct))ze[nt]=gt,ze[kt]=Ct,nt=kt;else break e}}return st}function r(ze,st){var Ct=ze.sortIndex-st.sortIndex;return Ct!==0?Ct:ze.id-st.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();n.unstable_now=function(){return l.now()-o}}var p=[],C=[],w=1,O=null,U=3,K=!1,j=!1,W=!1,Y=!1,te=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function ne(ze){for(var st=t(C);st!==null;){if(st.callback===null)i(C);else if(st.startTime<=ze)i(C),st.sortIndex=st.expirationTime,e(p,st);else break;st=t(C)}}function $(ze){if(W=!1,ne(ze),!j)if(t(p)!==null)j=!0,ae||(ae=!0,Oe());else{var st=t(C);st!==null&&xe($,st.startTime-ze)}}var ae=!1,G=-1,ce=5,ge=-1;function ye(){return Y?!0:!(n.unstable_now()-ge<ce)}function we(){if(Y=!1,ae){var ze=n.unstable_now();ge=ze;var st=!0;try{e:{j=!1,W&&(W=!1,J(G),G=-1),K=!0;var Ct=U;try{t:{for(ne(ze),O=t(p);O!==null&&!(O.expirationTime>ze&&ye());){var nt=O.callback;if(typeof nt=="function"){O.callback=null,U=O.priorityLevel;var be=nt(O.expirationTime<=ze);if(ze=n.unstable_now(),typeof be=="function"){O.callback=be,ne(ze),st=!0;break t}O===t(p)&&i(p),ne(ze)}else i(p);O=t(p)}if(O!==null)st=!0;else{var Ne=t(C);Ne!==null&&xe($,Ne.startTime-ze),st=!1}}break e}finally{O=null,U=Ct,K=!1}st=void 0}}finally{st?Oe():ae=!1}}}var Oe;if(typeof oe=="function")Oe=function(){oe(we)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Ve=Se.port2;Se.port1.onmessage=we,Oe=function(){Ve.postMessage(null)}}else Oe=function(){te(we,0)};function xe(ze,st){G=te(function(){ze(n.unstable_now())},st)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ze){ze.callback=null},n.unstable_forceFrameRate=function(ze){0>ze||125<ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<ze?Math.floor(1e3/ze):5},n.unstable_getCurrentPriorityLevel=function(){return U},n.unstable_next=function(ze){switch(U){case 1:case 2:case 3:var st=3;break;default:st=U}var Ct=U;U=st;try{return ze()}finally{U=Ct}},n.unstable_requestPaint=function(){Y=!0},n.unstable_runWithPriority=function(ze,st){switch(ze){case 1:case 2:case 3:case 4:case 5:break;default:ze=3}var Ct=U;U=ze;try{return st()}finally{U=Ct}},n.unstable_scheduleCallback=function(ze,st,Ct){var nt=n.unstable_now();switch(typeof Ct=="object"&&Ct!==null?(Ct=Ct.delay,Ct=typeof Ct=="number"&&0<Ct?nt+Ct:nt):Ct=nt,ze){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Ct+be,ze={id:w++,callback:st,priorityLevel:ze,startTime:Ct,expirationTime:be,sortIndex:-1},Ct>nt?(ze.sortIndex=Ct,e(C,ze),t(p)===null&&ze===t(C)&&(W?(J(G),G=-1):W=!0,xe($,Ct-nt))):(ze.sortIndex=be,e(p,ze),j||K||(j=!0,ae||(ae=!0,Oe()))),ze},n.unstable_shouldYield=ye,n.unstable_wrapCallback=function(ze){var st=U;return function(){var Ct=U;U=st;try{return ze.apply(this,arguments)}finally{U=Ct}}}}(r4)),r4}var d7;function oW(){return d7||(d7=1,i4.exports=rW()),i4.exports}var o4={exports:{}},Ph={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f7;function aW(){if(f7)return Ph;f7=1;var n=Ol();function e(p){var C="https://react.dev/errors/"+p;if(1<arguments.length){C+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)C+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+p+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(p,C,w){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:O==null?null:""+O,children:p,containerInfo:C,implementation:w}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(p,C){if(p==="font")return"";if(typeof C=="string")return C==="use-credentials"?C:""}return Ph.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ph.createPortal=function(p,C){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C||C.nodeType!==1&&C.nodeType!==9&&C.nodeType!==11)throw Error(e(299));return a(p,C,null,w)},Ph.flushSync=function(p){var C=l.T,w=i.p;try{if(l.T=null,i.p=2,p)return p()}finally{l.T=C,i.p=w,i.d.f()}},Ph.preconnect=function(p,C){typeof p=="string"&&(C?(C=C.crossOrigin,C=typeof C=="string"?C==="use-credentials"?C:"":void 0):C=null,i.d.C(p,C))},Ph.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Ph.preinit=function(p,C){if(typeof p=="string"&&C&&typeof C.as=="string"){var w=C.as,O=o(w,C.crossOrigin),U=typeof C.integrity=="string"?C.integrity:void 0,K=typeof C.fetchPriority=="string"?C.fetchPriority:void 0;w==="style"?i.d.S(p,typeof C.precedence=="string"?C.precedence:void 0,{crossOrigin:O,integrity:U,fetchPriority:K}):w==="script"&&i.d.X(p,{crossOrigin:O,integrity:U,fetchPriority:K,nonce:typeof C.nonce=="string"?C.nonce:void 0})}},Ph.preinitModule=function(p,C){if(typeof p=="string")if(typeof C=="object"&&C!==null){if(C.as==null||C.as==="script"){var w=o(C.as,C.crossOrigin);i.d.M(p,{crossOrigin:w,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0})}}else C==null&&i.d.M(p)},Ph.preload=function(p,C){if(typeof p=="string"&&typeof C=="object"&&C!==null&&typeof C.as=="string"){var w=C.as,O=o(w,C.crossOrigin);i.d.L(p,w,{crossOrigin:O,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0,type:typeof C.type=="string"?C.type:void 0,fetchPriority:typeof C.fetchPriority=="string"?C.fetchPriority:void 0,referrerPolicy:typeof C.referrerPolicy=="string"?C.referrerPolicy:void 0,imageSrcSet:typeof C.imageSrcSet=="string"?C.imageSrcSet:void 0,imageSizes:typeof C.imageSizes=="string"?C.imageSizes:void 0,media:typeof C.media=="string"?C.media:void 0})}},Ph.preloadModule=function(p,C){if(typeof p=="string")if(C){var w=o(C.as,C.crossOrigin);i.d.m(p,{as:typeof C.as=="string"&&C.as!=="script"?C.as:void 0,crossOrigin:w,integrity:typeof C.integrity=="string"?C.integrity:void 0})}else i.d.m(p)},Ph.requestFormReset=function(p){i.d.r(p)},Ph.unstable_batchedUpdates=function(p,C){return p(C)},Ph.useFormState=function(p,C,w){return l.H.useFormState(p,C,w)},Ph.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ph.version="19.1.1",Ph}var p7;function O3(){if(p7)return o4.exports;p7=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),o4.exports=aW(),o4.exports}var m7;function sW(){if(m7)return dC;m7=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=oW(),e=Ol(),t=O3();function i(A){var m="https://react.dev/errors/"+A;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+A+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function a(A){var m=A,b=A;if(A.alternate)for(;m.return;)m=m.return;else{A=m;do m=A,(m.flags&4098)!==0&&(b=m.return),A=m.return;while(A)}return m.tag===3?b:null}function l(A){if(A.tag===13){var m=A.memoizedState;if(m===null&&(A=A.alternate,A!==null&&(m=A.memoizedState)),m!==null)return m.dehydrated}return null}function o(A){if(a(A)!==A)throw Error(i(188))}function p(A){var m=A.alternate;if(!m){if(m=a(A),m===null)throw Error(i(188));return m!==A?null:A}for(var b=A,T=m;;){var Q=b.return;if(Q===null)break;var se=Q.alternate;if(se===null){if(T=Q.return,T!==null){b=T;continue}break}if(Q.child===se.child){for(se=Q.child;se;){if(se===b)return o(Q),A;if(se===T)return o(Q),m;se=se.sibling}throw Error(i(188))}if(b.return!==T.return)b=Q,T=se;else{for(var Ge=!1,ot=Q.child;ot;){if(ot===b){Ge=!0,b=Q,T=se;break}if(ot===T){Ge=!0,T=Q,b=se;break}ot=ot.sibling}if(!Ge){for(ot=se.child;ot;){if(ot===b){Ge=!0,b=se,T=Q;break}if(ot===T){Ge=!0,T=se,b=Q;break}ot=ot.sibling}if(!Ge)throw Error(i(189))}}if(b.alternate!==T)throw Error(i(190))}if(b.tag!==3)throw Error(i(188));return b.stateNode.current===b?A:m}function C(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A;for(A=A.child;A!==null;){if(m=C(A),m!==null)return m;A=A.sibling}return null}var w=Object.assign,O=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),ye=Symbol.for("react.memo_cache_sentinel"),we=Symbol.iterator;function Oe(A){return A===null||typeof A!="object"?null:(A=we&&A[we]||A["@@iterator"],typeof A=="function"?A:null)}var Se=Symbol.for("react.client.reference");function Ve(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Se?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case j:return"Fragment";case Y:return"Profiler";case W:return"StrictMode";case $:return"Suspense";case ae:return"SuspenseList";case ge:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case K:return"Portal";case oe:return(A.displayName||"Context")+".Provider";case J:return(A._context.displayName||"Context")+".Consumer";case ne:var m=A.render;return A=A.displayName,A||(A=m.displayName||m.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case G:return m=A.displayName||null,m!==null?m:Ve(A.type)||"Memo";case ce:m=A._payload,A=A._init;try{return Ve(A(m))}catch{}}return null}var xe=Array.isArray,ze=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ct={pending:!1,data:null,method:null,action:null},nt=[],be=-1;function Ne(A){return{current:A}}function tt(A){0>be||(A.current=nt[be],nt[be]=null,be--)}function lt(A,m){be++,nt[be]=A.current,A.current=m}var kt=Ne(null),gt=Ne(null),St=Ne(null),Ut=Ne(null);function Fe(A,m){switch(lt(St,m),lt(gt,A),lt(kt,null),m.nodeType){case 9:case 11:A=(A=m.documentElement)&&(A=A.namespaceURI)?ll(A):0;break;default:if(A=m.tagName,m=m.namespaceURI)m=ll(m),A=ul(m,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}tt(kt),lt(kt,A)}function Ke(){tt(kt),tt(gt),tt(St)}function Re(A){A.memoizedState!==null&&lt(Ut,A);var m=kt.current,b=ul(m,A.type);m!==b&&(lt(gt,A),lt(kt,b))}function He(A){gt.current===A&&(tt(kt),tt(gt)),Ut.current===A&&(tt(Ut),Qt._currentValue=Ct)}var bt=Object.prototype.hasOwnProperty,_t=n.unstable_scheduleCallback,Ot=n.unstable_cancelCallback,qt=n.unstable_shouldYield,Kt=n.unstable_requestPaint,on=n.unstable_now,Jn=n.unstable_getCurrentPriorityLevel,Wt=n.unstable_ImmediatePriority,$n=n.unstable_UserBlockingPriority,On=n.unstable_NormalPriority,Bn=n.unstable_LowPriority,In=n.unstable_IdlePriority,Oi=n.log,ei=n.unstable_setDisableYieldValue,Kn=null,je=null;function de(A){if(typeof Oi=="function"&&ei(A),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Kn,A)}catch{}}var re=Math.clz32?Math.clz32:Te,le=Math.log,pe=Math.LN2;function Te(A){return A>>>=0,A===0?32:31-(le(A)/pe|0)|0}var We=256,dt=4194304;function Ye(A){var m=A&42;if(m!==0)return m;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function De(A,m,b){var T=A.pendingLanes;if(T===0)return 0;var Q=0,se=A.suspendedLanes,Ge=A.pingedLanes;A=A.warmLanes;var ot=T&134217727;return ot!==0?(T=ot&~se,T!==0?Q=Ye(T):(Ge&=ot,Ge!==0?Q=Ye(Ge):b||(b=ot&~A,b!==0&&(Q=Ye(b))))):(ot=T&~se,ot!==0?Q=Ye(ot):Ge!==0?Q=Ye(Ge):b||(b=T&~A,b!==0&&(Q=Ye(b)))),Q===0?0:m!==0&&m!==Q&&(m&se)===0&&(se=Q&-Q,b=m&-m,se>=b||se===32&&(b&4194048)!==0)?m:Q}function Ze(A,m){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&m)===0}function g(A,m){switch(A){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var A=We;return We<<=1,(We&4194048)===0&&(We=256),A}function ht(){var A=dt;return dt<<=1,(dt&62914560)===0&&(dt=4194304),A}function Tt(A){for(var m=[],b=0;31>b;b++)m.push(A);return m}function it(A,m){A.pendingLanes|=m,m!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function en(A,m,b,T,Q,se){var Ge=A.pendingLanes;A.pendingLanes=b,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=b,A.entangledLanes&=b,A.errorRecoveryDisabledLanes&=b,A.shellSuspendCounter=0;var ot=A.entanglements,zt=A.expirationTimes,hn=A.hiddenUpdates;for(b=Ge&~b;0<b;){var kn=31-re(b),Nn=1<<kn;ot[kn]=0,zt[kn]=-1;var pn=hn[kn];if(pn!==null)for(hn[kn]=null,kn=0;kn<pn.length;kn++){var fn=pn[kn];fn!==null&&(fn.lane&=-536870913)}b&=~Nn}T!==0&&Dn(A,T,0),se!==0&&Q===0&&A.tag!==0&&(A.suspendedLanes|=se&~(Ge&~m))}function Dn(A,m,b){A.pendingLanes|=m,A.suspendedLanes&=~m;var T=31-re(m);A.entangledLanes|=m,A.entanglements[T]=A.entanglements[T]|1073741824|b&4194090}function Mn(A,m){var b=A.entangledLanes|=m;for(A=A.entanglements;b;){var T=31-re(b),Q=1<<T;Q&m|A[T]&m&&(A[T]|=m),b&=~Q}}function ii(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Wn(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function qi(){var A=st.p;return A!==0?A:(A=window.event,A===void 0?32:sr(A.type))}function er(A,m){var b=st.p;try{return st.p=A,m()}finally{st.p=b}}var Ei=Math.random().toString(36).slice(2),hi="__reactFiber$"+Ei,ti="__reactProps$"+Ei,Wi="__reactContainer$"+Ei,wn="__reactEvents$"+Ei,uo="__reactListeners$"+Ei,Hi="__reactHandles$"+Ei,ma="__reactResources$"+Ei,To="__reactMarker$"+Ei;function Zn(A){delete A[hi],delete A[ti],delete A[wn],delete A[uo],delete A[Hi]}function lr(A){var m=A[hi];if(m)return m;for(var b=A.parentNode;b;){if(m=b[Wi]||b[hi]){if(b=m.alternate,m.child!==null||b!==null&&b.child!==null)for(A=Lp(A);A!==null;){if(b=A[hi])return b;A=Lp(A)}return m}A=b,b=A.parentNode}return null}function zi(A){if(A=A[hi]||A[Wi]){var m=A.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return A}return null}function vr(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A.stateNode;throw Error(i(33))}function Fa(A){var m=A[ma];return m||(m=A[ma]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function Tr(A){A[To]=!0}var ji=new Set,gl={};function ka(A,m){wo(A,m),wo(A+"Capture",m)}function wo(A,m){for(gl[A]=m,A=0;A<m.length;A++)ji.add(m[A])}var Xa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Il={},Ao={};function Wu(A){return bt.call(Ao,A)?!0:bt.call(Il,A)?!1:Xa.test(A)?Ao[A]=!0:(Il[A]=!0,!1)}function Da(A,m,b){if(Wu(m))if(b===null)A.removeAttribute(m);else{switch(typeof b){case"undefined":case"function":case"symbol":A.removeAttribute(m);return;case"boolean":var T=m.toLowerCase().slice(0,5);if(T!=="data-"&&T!=="aria-"){A.removeAttribute(m);return}}A.setAttribute(m,""+b)}}function Vi(A,m,b){if(b===null)A.removeAttribute(m);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(m);return}A.setAttribute(m,""+b)}}function Mi(A,m,b,T){if(T===null)A.removeAttribute(b);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(b);return}A.setAttributeNS(m,b,""+T)}}var us,Ma;function Vo(A){if(us===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);us=m&&m[1]||"",Ma=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+us+A+Ma}var $e=!1;function Et(A,m){if(!A||$e)return"";$e=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var T={DetermineComponentFrameRoot:function(){try{if(m){var Nn=function(){throw Error()};if(Object.defineProperty(Nn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Nn,[])}catch(fn){var pn=fn}Reflect.construct(A,[],Nn)}else{try{Nn.call()}catch(fn){pn=fn}A.call(Nn.prototype)}}else{try{throw Error()}catch(fn){pn=fn}(Nn=A())&&typeof Nn.catch=="function"&&Nn.catch(function(){})}}catch(fn){if(fn&&pn&&typeof fn.stack=="string")return[fn.stack,pn.stack]}return[null,null]}};T.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Q=Object.getOwnPropertyDescriptor(T.DetermineComponentFrameRoot,"name");Q&&Q.configurable&&Object.defineProperty(T.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var se=T.DetermineComponentFrameRoot(),Ge=se[0],ot=se[1];if(Ge&&ot){var zt=Ge.split(`
`),hn=ot.split(`
`);for(Q=T=0;T<zt.length&&!zt[T].includes("DetermineComponentFrameRoot");)T++;for(;Q<hn.length&&!hn[Q].includes("DetermineComponentFrameRoot");)Q++;if(T===zt.length||Q===hn.length)for(T=zt.length-1,Q=hn.length-1;1<=T&&0<=Q&&zt[T]!==hn[Q];)Q--;for(;1<=T&&0<=Q;T--,Q--)if(zt[T]!==hn[Q]){if(T!==1||Q!==1)do if(T--,Q--,0>Q||zt[T]!==hn[Q]){var kn=`
`+zt[T].replace(" at new "," at ");return A.displayName&&kn.includes("<anonymous>")&&(kn=kn.replace("<anonymous>",A.displayName)),kn}while(1<=T&&0<=Q);break}}}finally{$e=!1,Error.prepareStackTrace=b}return(b=A?A.displayName||A.name:"")?Vo(b):""}function xn(A){switch(A.tag){case 26:case 27:case 5:return Vo(A.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 15:return Et(A.type,!1);case 11:return Et(A.type.render,!1);case 1:return Et(A.type,!0);case 31:return Vo("Activity");default:return""}}function Gn(A){try{var m="";do m+=xn(A),A=A.return;while(A);return m}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function rn(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function si(A){var m=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function eo(A){var m=si(A)?"checked":"value",b=Object.getOwnPropertyDescriptor(A.constructor.prototype,m),T=""+A[m];if(!A.hasOwnProperty(m)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var Q=b.get,se=b.set;return Object.defineProperty(A,m,{configurable:!0,get:function(){return Q.call(this)},set:function(Ge){T=""+Ge,se.call(this,Ge)}}),Object.defineProperty(A,m,{enumerable:b.enumerable}),{getValue:function(){return T},setValue:function(Ge){T=""+Ge},stopTracking:function(){A._valueTracker=null,delete A[m]}}}}function So(A){A._valueTracker||(A._valueTracker=eo(A))}function As(A){if(!A)return!1;var m=A._valueTracker;if(!m)return!0;var b=m.getValue(),T="";return A&&(T=si(A)?A.checked?"true":"false":A.value),A=T,A!==b?(m.setValue(A),!0):!1}function Ls(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Qu=/[\n"\\]/g;function Qi(A){return A.replace(Qu,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function RA(A,m,b,T,Q,se,Ge,ot){A.name="",Ge!=null&&typeof Ge!="function"&&typeof Ge!="symbol"&&typeof Ge!="boolean"?A.type=Ge:A.removeAttribute("type"),m!=null?Ge==="number"?(m===0&&A.value===""||A.value!=m)&&(A.value=""+rn(m)):A.value!==""+rn(m)&&(A.value=""+rn(m)):Ge!=="submit"&&Ge!=="reset"||A.removeAttribute("value"),m!=null?yl(A,Ge,rn(m)):b!=null?yl(A,Ge,rn(b)):T!=null&&A.removeAttribute("value"),Q==null&&se!=null&&(A.defaultChecked=!!se),Q!=null&&(A.checked=Q&&typeof Q!="function"&&typeof Q!="symbol"),ot!=null&&typeof ot!="function"&&typeof ot!="symbol"&&typeof ot!="boolean"?A.name=""+rn(ot):A.removeAttribute("name")}function _u(A,m,b,T,Q,se,Ge,ot){if(se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(A.type=se),m!=null||b!=null){if(!(se!=="submit"&&se!=="reset"||m!=null))return;b=b!=null?""+rn(b):"",m=m!=null?""+rn(m):b,ot||m===A.value||(A.value=m),A.defaultValue=m}T=T??Q,T=typeof T!="function"&&typeof T!="symbol"&&!!T,A.checked=ot?A.checked:!!T,A.defaultChecked=!!T,Ge!=null&&typeof Ge!="function"&&typeof Ge!="symbol"&&typeof Ge!="boolean"&&(A.name=Ge)}function yl(A,m,b){m==="number"&&Ls(A.ownerDocument)===A||A.defaultValue===""+b||(A.defaultValue=""+b)}function Ss(A,m,b,T){if(A=A.options,m){m={};for(var Q=0;Q<b.length;Q++)m["$"+b[Q]]=!0;for(b=0;b<A.length;b++)Q=m.hasOwnProperty("$"+A[b].value),A[b].selected!==Q&&(A[b].selected=Q),Q&&T&&(A[b].defaultSelected=!0)}else{for(b=""+rn(b),m=null,Q=0;Q<A.length;Q++){if(A[Q].value===b){A[Q].selected=!0,T&&(A[Q].defaultSelected=!0);return}m!==null||A[Q].disabled||(m=A[Q])}m!==null&&(m.selected=!0)}}function xc(A,m,b){if(m!=null&&(m=""+rn(m),m!==A.value&&(A.value=m),b==null)){A.defaultValue!==m&&(A.defaultValue=m);return}A.defaultValue=b!=null?""+rn(b):""}function Ys(A,m,b,T){if(m==null){if(T!=null){if(b!=null)throw Error(i(92));if(xe(T)){if(1<T.length)throw Error(i(93));T=T[0]}b=T}b==null&&(b=""),m=b}b=rn(m),A.defaultValue=b,T=A.textContent,T===b&&T!==""&&T!==null&&(A.value=T)}function $o(A,m){if(m){var b=A.firstChild;if(b&&b===A.lastChild&&b.nodeType===3){b.nodeValue=m;return}}A.textContent=m}var ko=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dr(A,m,b){var T=m.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?T?A.setProperty(m,""):m==="float"?A.cssFloat="":A[m]="":T?A.setProperty(m,b):typeof b!="number"||b===0||ko.has(m)?m==="float"?A.cssFloat=b:A[m]=(""+b).trim():A[m]=b+"px"}function Kl(A,m,b){if(m!=null&&typeof m!="object")throw Error(i(62));if(A=A.style,b!=null){for(var T in b)!b.hasOwnProperty(T)||m!=null&&m.hasOwnProperty(T)||(T.indexOf("--")===0?A.setProperty(T,""):T==="float"?A.cssFloat="":A[T]="");for(var Q in m)T=m[Q],m.hasOwnProperty(Q)&&b[Q]!==T&&dr(A,Q,T)}else for(var se in m)m.hasOwnProperty(se)&&dr(A,se,m[se])}function ga(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xr(A){return bu.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var iu=null;function cA(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var jo=null,Eo=null;function za(A){var m=zi(A);if(m&&(A=m.stateNode)){var b=A[ti]||null;e:switch(A=m.stateNode,m.type){case"input":if(RA(A,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),m=b.name,b.type==="radio"&&m!=null){for(b=A;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+Qi(""+m)+'"][type="radio"]'),m=0;m<b.length;m++){var T=b[m];if(T!==A&&T.form===A.form){var Q=T[ti]||null;if(!Q)throw Error(i(90));RA(T,Q.value,Q.defaultValue,Q.defaultValue,Q.checked,Q.defaultChecked,Q.type,Q.name)}}for(m=0;m<b.length;m++)T=b[m],T.form===A.form&&As(T)}break e;case"textarea":xc(A,b.value,b.defaultValue);break e;case"select":m=b.value,m!=null&&Ss(A,!!b.multiple,m,!1)}}}var wa=!1;function aa(A,m,b){if(wa)return A(m,b);wa=!0;try{var T=A(m);return T}finally{if(wa=!1,(jo!==null||Eo!==null)&&(V0(),jo&&(m=jo,A=Eo,Eo=jo=null,za(m),A)))for(m=0;m<A.length;m++)za(A[m])}}function Dr(A,m){var b=A.stateNode;if(b===null)return null;var T=b[ti]||null;if(T===null)return null;b=T[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(A=A.type,T=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!T;break e;default:A=!1}if(A)return null;if(b&&typeof b!="function")throw Error(i(231,m,typeof b));return b}var ru=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=!1;if(ru)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){ja=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{ja=!1}var ya=null,Rr=null,vl=null;function Zi(){if(vl)return vl;var A,m=Rr,b=m.length,T,Q="value"in ya?ya.value:ya.textContent,se=Q.length;for(A=0;A<b&&m[A]===Q[A];A++);var Ge=b-A;for(T=1;T<=Ge&&m[b-T]===Q[se-T];T++);return vl=Q.slice(A,1<T?1-T:void 0)}function wi(A){var m=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&m===13&&(A=13)):A=m,A===10&&(A=13),32<=A||A===13?A:0}function Yr(){return!0}function ee(){return!1}function Be(A){function m(b,T,Q,se,Ge){this._reactName=b,this._targetInst=Q,this.type=T,this.nativeEvent=se,this.target=Ge,this.currentTarget=null;for(var ot in A)A.hasOwnProperty(ot)&&(b=A[ot],this[ot]=b?b(se):se[ot]);return this.isDefaultPrevented=(se.defaultPrevented!=null?se.defaultPrevented:se.returnValue===!1)?Yr:ee,this.isPropagationStopped=ee,this}return w(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){},isPersistent:Yr}),m}var at={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gt=Be(at),Si=w({},at,{view:0,detail:0}),Xn=Be(Si),$i,or,Ri,Xi=w({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qu,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==Ri&&(Ri&&A.type==="mousemove"?($i=A.screenX-Ri.screenX,or=A.screenY-Ri.screenY):or=$i=0,Ri=A),$i)},movementY:function(A){return"movementY"in A?A.movementY:or}}),to=Be(Xi),co=w({},Xi,{dataTransfer:0}),Ar=Be(co),mr=w({},Si,{relatedTarget:0}),ho=Be(mr),No=w({},at,{animationName:0,elapsedTime:0,pseudoElement:0}),jr=Be(No),qs=w({},at,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Ll=Be(qs),Yu=w({},at,{data:0}),ps=Be(Yu),gd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ra={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PA(A){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(A):(A=yd[A])?!!m[A]:!1}function qu(){return PA}var gh=w({},Si,{key:function(A){if(A.key){var m=gd[A.key]||A.key;if(m!=="Unidentified")return m}return A.type==="keypress"?(A=wi(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Ra[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qu,charCode:function(A){return A.type==="keypress"?wi(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?wi(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),jh=Be(gh),po=w({},Xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=Be(po),vd=w({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qu}),dm=Be(vd),yh=w({},at,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cd=Be(yh),r0=w({},Xi,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Tf=Be(r0),kf=w({},at,{newState:0,oldState:0}),Hu=Be(kf),es=[9,13,27,32],_d=ru&&"CompositionEvent"in window,Fl=null;ru&&"documentMode"in document&&(Fl=document.documentMode);var bd=ru&&"TextEvent"in window&&!Fl,Nh=ru&&(!_d||Fl&&8<Fl&&11>=Fl),qc=" ",Gh=!1;function Df(A,m){switch(A){case"keyup":return es.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vh(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Ch=!1;function Wh(A,m){switch(A){case"compositionend":return vh(m);case"keypress":return m.which!==32?null:(Gh=!0,qc);case"textInput":return A=m.data,A===qc&&Gh?null:A;default:return null}}function Rf(A,m){if(Ch)return A==="compositionend"||!_d&&Df(A,m)?(A=Zi(),vl=Rr=ya=null,Ch=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Nh&&m.locale!=="ko"?null:m.data;default:return null}}var ou={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pf(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m==="input"?!!ou[A.type]:m==="textarea"}function oc(A,m,b,T){jo?Eo?Eo.push(T):Eo=[T]:jo=T,m=p0(m,"onChange"),0<m.length&&(b=new Gt("onChange","change",null,b,T),A.push({event:b,listeners:m}))}var au=null,Mc=null;function xd(A){vy(A,0)}function Md(A){var m=vr(A);if(As(m))return A}function KA(A,m){if(A==="change")return m}var Vu=!1;if(ru){var Qh;if(ru){var wc="oninput"in document;if(!wc){var Yh=document.createElement("div");Yh.setAttribute("oninput","return;"),wc=typeof Yh.oninput=="function"}Qh=wc}else Qh=!1;Vu=Qh&&(!document.documentMode||9<document.documentMode)}function fm(){au&&(au.detachEvent("onpropertychange",Hc),Mc=au=null)}function Hc(A){if(A.propertyName==="value"&&Md(Mc)){var m=[];oc(m,Mc,A,cA(A)),aa(xd,m)}}function Vd(A,m,b){A==="focusin"?(fm(),au=m,Mc=b,au.attachEvent("onpropertychange",Hc)):A==="focusout"&&fm()}function hA(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Md(Mc)}function $u(A,m){if(A==="click")return Md(m)}function Mp(A,m){if(A==="input"||A==="change")return Md(m)}function Kf(A,m){return A===m&&(A!==0||1/A===1/m)||A!==A&&m!==m}var xu=typeof Object.is=="function"?Object.is:Kf;function ac(A,m){if(xu(A,m))return!0;if(typeof A!="object"||A===null||typeof m!="object"||m===null)return!1;var b=Object.keys(A),T=Object.keys(m);if(b.length!==T.length)return!1;for(T=0;T<b.length;T++){var Q=b[T];if(!bt.call(m,Q)||!xu(A[Q],m[Q]))return!1}return!0}function Mu(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function UA(A,m){var b=Mu(A);A=0;for(var T;b;){if(b.nodeType===3){if(T=A+b.textContent.length,A<=m&&T>=m)return{node:b,offset:m-A};A=T}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Mu(b)}}function Bo(A,m){return A&&m?A===m?!0:A&&A.nodeType===3?!1:m&&m.nodeType===3?Bo(A,m.parentNode):"contains"in A?A.contains(m):A.compareDocumentPosition?!!(A.compareDocumentPosition(m)&16):!1:!1}function _h(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var m=Ls(A.document);m instanceof A.HTMLIFrameElement;){try{var b=typeof m.contentWindow.location.href=="string"}catch{b=!1}if(b)A=m.contentWindow;else break;m=Ls(A.document)}return m}function wd(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m&&(m==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||m==="textarea"||A.contentEditable==="true")}var wp=ru&&"documentMode"in document&&11>=document.documentMode,Sc=null,zl=null,Zt=null,Sn=!1;function vn(A,m,b){var T=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Sn||Sc==null||Sc!==Ls(T)||(T=Sc,"selectionStart"in T&&wd(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),Zt&&ac(Zt,T)||(Zt=T,T=p0(zl,"onSelect"),0<T.length&&(m=new Gt("onSelect","select",null,m,b),A.push({event:m,listeners:T}),m.target=Sc)))}function Ti(A,m){var b={};return b[A.toLowerCase()]=m.toLowerCase(),b["Webkit"+A]="webkit"+m,b["Moz"+A]="moz"+m,b}var Sr={animationend:Ti("Animation","AnimationEnd"),animationiteration:Ti("Animation","AnimationIteration"),animationstart:Ti("Animation","AnimationStart"),transitionrun:Ti("Transition","TransitionRun"),transitionstart:Ti("Transition","TransitionStart"),transitioncancel:Ti("Transition","TransitionCancel"),transitionend:Ti("Transition","TransitionEnd")},Oo={},Hs={};ru&&(Hs=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);function Do(A){if(Oo[A])return Oo[A];if(!Sr[A])return A;var m=Sr[A],b;for(b in m)if(m.hasOwnProperty(b)&&b in Hs)return Oo[A]=m[b];return A}var Vc=Do("animationend"),$d=Do("animationiteration"),su=Do("animationstart"),Sd=Do("transitionrun"),dA=Do("transitionstart"),wu=Do("transitioncancel"),Su=Do("transitionend"),Tl=new Map,Go="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Go.push("scrollEnd");function fA(A,m){Tl.set(A,m),ka(m,[A])}var qh=new WeakMap;function Na(A,m){if(typeof A=="object"&&A!==null){var b=qh.get(A);return b!==void 0?b:(m={value:A,source:m,stack:Gn(m)},qh.set(A,m),m)}return{value:A,source:m,stack:Gn(m)}}var Vs=[],Es=0,Zu=0;function jl(){for(var A=Es,m=Zu=Es=0;m<A;){var b=Vs[m];Vs[m++]=null;var T=Vs[m];Vs[m++]=null;var Q=Vs[m];Vs[m++]=null;var se=Vs[m];if(Vs[m++]=null,T!==null&&Q!==null){var Ge=T.pending;Ge===null?Q.next=Q:(Q.next=Ge.next,Ge.next=Q),T.pending=Q}se!==0&&Ec(b,Q,se)}}function Eu(A,m,b,T){Vs[Es++]=A,Vs[Es++]=m,Vs[Es++]=b,Vs[Es++]=T,Zu|=T,A.lanes|=T,A=A.alternate,A!==null&&(A.lanes|=T)}function sc(A,m,b,T){return Eu(A,m,b,T),bh(A)}function Bu(A,m){return Eu(A,null,null,m),bh(A)}function Ec(A,m,b){A.lanes|=b;var T=A.alternate;T!==null&&(T.lanes|=b);for(var Q=!1,se=A.return;se!==null;)se.childLanes|=b,T=se.alternate,T!==null&&(T.childLanes|=b),se.tag===22&&(A=se.stateNode,A===null||A._visibility&1||(Q=!0)),A=se,se=se.return;return A.tag===3?(se=A.stateNode,Q&&m!==null&&(Q=31-re(b),A=se.hiddenUpdates,T=A[Q],T===null?A[Q]=[m]:T.push(m),m.lane=b|536870912),se):null}function bh(A){if(50<Jf)throw Jf=0,ep=null,Error(i(185));for(var m=A.return;m!==null;)A=m,m=A.return;return A.tag===3?A.stateNode:null}var kr={};function lc(A,m,b,T){this.tag=A,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xu(A,m,b,T){return new lc(A,m,b,T)}function Bc(A){return A=A.prototype,!(!A||!A.isReactComponent)}function Bs(A,m){var b=A.alternate;return b===null?(b=Xu(A.tag,m,A.key,A.mode),b.elementType=A.elementType,b.type=A.type,b.stateNode=A.stateNode,b.alternate=A,A.alternate=b):(b.pendingProps=m,b.type=A.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=A.flags&65011712,b.childLanes=A.childLanes,b.lanes=A.lanes,b.child=A.child,b.memoizedProps=A.memoizedProps,b.memoizedState=A.memoizedState,b.updateQueue=A.updateQueue,m=A.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=A.sibling,b.index=A.index,b.ref=A.ref,b.refCleanup=A.refCleanup,b}function xh(A,m){A.flags&=65011714;var b=A.alternate;return b===null?(A.childLanes=0,A.lanes=m,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=b.childLanes,A.lanes=b.lanes,A.child=b.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=b.memoizedProps,A.memoizedState=b.memoizedState,A.updateQueue=b.updateQueue,A.type=b.type,m=b.dependencies,A.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A}function Ed(A,m,b,T,Q,se){var Ge=0;if(T=A,typeof A=="function")Bc(A)&&(Ge=1);else if(typeof A=="string")Ge=H(A,b,kt.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case ge:return A=Xu(31,b,m,Q),A.elementType=ge,A.lanes=se,A;case j:return pA(b.children,Q,se,m);case W:Ge=8,Q|=24;break;case Y:return A=Xu(12,b,m,Q|2),A.elementType=Y,A.lanes=se,A;case $:return A=Xu(13,b,m,Q),A.elementType=$,A.lanes=se,A;case ae:return A=Xu(19,b,m,Q),A.elementType=ae,A.lanes=se,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case te:case oe:Ge=10;break e;case J:Ge=9;break e;case ne:Ge=11;break e;case G:Ge=14;break e;case ce:Ge=16,T=null;break e}Ge=29,b=Error(i(130,A===null?"null":typeof A,"")),T=null}return m=Xu(Ge,b,m,Q),m.elementType=A,m.type=T,m.lanes=se,m}function pA(A,m,b,T){return A=Xu(7,A,T,m),A.lanes=b,A}function Bd(A,m,b){return A=Xu(6,A,null,m),A.lanes=b,A}function $c(A,m,b){return m=Xu(4,A.children!==null?A.children:[],A.key,m),m.lanes=b,m.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},m}var Ou=[],LA=0,Mh=null,Hh=0,Iu=[],kl=0,Wo=null,sa=1,FA="";function zA(A,m){Ou[LA++]=Hh,Ou[LA++]=Mh,Mh=A,Hh=m}function Oc(A,m,b){Iu[kl++]=sa,Iu[kl++]=FA,Iu[kl++]=Wo,Wo=A;var T=sa;A=FA;var Q=32-re(T)-1;T&=~(1<<Q),b+=1;var se=32-re(m)+Q;if(30<se){var Ge=Q-Q%5;se=(T&(1<<Ge)-1).toString(32),T>>=Ge,Q-=Ge,sa=1<<32-re(m)+Q|b<<Q|T,FA=se+A}else sa=1<<se|b<<Q|T,FA=A}function Zc(A){A.return!==null&&(zA(A,1),Oc(A,1,0))}function Xc(A){for(;A===Mh;)Mh=Ou[--LA],Ou[LA]=null,Hh=Ou[--LA],Ou[LA]=null;for(;A===Wo;)Wo=Iu[--kl],Iu[kl]=null,FA=Iu[--kl],Iu[kl]=null,sa=Iu[--kl],Iu[kl]=null}var va=null,_a=null,Zr=!1,lu=null,Fs=!1,Jc=Error(i(519));function mA(A){var m=Error(i(418,""));throw jA(Na(m,A)),Jc}function Zd(A){var m=A.stateNode,b=A.type,T=A.memoizedProps;switch(m[hi]=A,m[ti]=T,b){case"dialog":na("cancel",m),na("close",m);break;case"iframe":case"object":case"embed":na("load",m);break;case"video":case"audio":for(b=0;b<d0.length;b++)na(d0[b],m);break;case"source":na("error",m);break;case"img":case"image":case"link":na("error",m),na("load",m);break;case"details":na("toggle",m);break;case"input":na("invalid",m),_u(m,T.value,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name,!0),So(m);break;case"select":na("invalid",m);break;case"textarea":na("invalid",m),Ys(m,T.value,T.defaultValue,T.children),So(m)}b=T.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||m.textContent===""+b||T.suppressHydrationWarning===!0||o1(m.textContent,b)?(T.popover!=null&&(na("beforetoggle",m),na("toggle",m)),T.onScroll!=null&&na("scroll",m),T.onScrollEnd!=null&&na("scrollend",m),T.onClick!=null&&(m.onclick=XA),m=!0):m=!1,m||mA(A)}function ms(A){for(va=A.return;va;)switch(va.tag){case 5:case 13:Fs=!1;return;case 27:case 3:Fs=!0;return;default:va=va.return}}function rl(A){if(A!==va)return!1;if(!Zr)return ms(A),Zr=!0,!1;var m=A.tag,b;if((b=m!==3&&m!==27)&&((b=m===5)&&(b=A.type,b=!(b!=="form"&&b!=="button")||sd(A.type,A.memoizedProps)),b=!b),b&&_a&&mA(A),ms(A),m===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));e:{for(A=A.nextSibling,m=0;A;){if(A.nodeType===8)if(b=A.data,b==="/$"){if(m===0){_a=ld(A.nextSibling);break e}m--}else b!=="$"&&b!=="$!"&&b!=="$?"||m++;A=A.nextSibling}_a=null}}else m===27?(m=_a,Ah(A.type)?(A=l1,l1=null,_a=A):_a=m):_a=va?ld(A.stateNode.nextSibling):null;return!0}function zs(){_a=va=null,Zr=!1}function Xd(){var A=lu;return A!==null&&(Lc===null?Lc=A:Lc.push.apply(Lc,A),lu=null),A}function jA(A){lu===null?lu=[A]:lu.push(A)}var wh=Ne(null),Ju=null,rt=null;function $s(A,m,b){lt(wh,m._currentValue),m._currentValue=b}function Ga(A){A._currentValue=wh.current,tt(wh)}function Zo(A,m,b){for(;A!==null;){var T=A.alternate;if((A.childLanes&m)!==m?(A.childLanes|=m,T!==null&&(T.childLanes|=m)):T!==null&&(T.childLanes&m)!==m&&(T.childLanes|=m),A===b)break;A=A.return}}function gr(A,m,b,T){var Q=A.child;for(Q!==null&&(Q.return=A);Q!==null;){var se=Q.dependencies;if(se!==null){var Ge=Q.child;se=se.firstContext;e:for(;se!==null;){var ot=se;se=Q;for(var zt=0;zt<m.length;zt++)if(ot.context===m[zt]){se.lanes|=b,ot=se.alternate,ot!==null&&(ot.lanes|=b),Zo(se.return,b,A),T||(Ge=null);break e}se=ot.next}}else if(Q.tag===18){if(Ge=Q.return,Ge===null)throw Error(i(341));Ge.lanes|=b,se=Ge.alternate,se!==null&&(se.lanes|=b),Zo(Ge,b,A),Ge=null}else Ge=Q.child;if(Ge!==null)Ge.return=Q;else for(Ge=Q;Ge!==null;){if(Ge===A){Ge=null;break}if(Q=Ge.sibling,Q!==null){Q.return=Ge.return,Ge=Q;break}Ge=Ge.return}Q=Ge}}function gs(A,m,b,T){A=null;for(var Q=m,se=!1;Q!==null;){if(!se){if((Q.flags&524288)!==0)se=!0;else if((Q.flags&262144)!==0)break}if(Q.tag===10){var Ge=Q.alternate;if(Ge===null)throw Error(i(387));if(Ge=Ge.memoizedProps,Ge!==null){var ot=Q.type;xu(Q.pendingProps.value,Ge.value)||(A!==null?A.push(ot):A=[ot])}}else if(Q===Ut.current){if(Ge=Q.alternate,Ge===null)throw Error(i(387));Ge.memoizedState.memoizedState!==Q.memoizedState.memoizedState&&(A!==null?A.push(Qt):A=[Qt])}Q=Q.return}A!==null&&gr(m,A,b,T),m.flags|=262144}function eh(A){for(A=A.firstContext;A!==null;){if(!xu(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Sh(A){Ju=A,rt=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Ro(A){return Tu(Ju,A)}function th(A,m){return Ju===null&&Sh(A),Tu(A,m)}function Tu(A,m){var b=m._currentValue;if(m={context:m,memoizedValue:b,next:null},rt===null){if(A===null)throw Error(i(308));rt=m,A.dependencies={lanes:0,firstContext:m},A.flags|=524288}else rt=rt.next=m;return b}var Od=typeof AbortController<"u"?AbortController:function(){var A=[],m=this.signal={aborted:!1,addEventListener:function(b,T){A.push(T)}};this.abort=function(){m.aborted=!0,A.forEach(function(b){return b()})}},Jd=n.unstable_scheduleCallback,Sp=n.unstable_NormalPriority,ba={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Eh(){return{controller:new Od,data:new Map,refCount:0}}function nh(A){A.refCount--,A.refCount===0&&Jd(Sp,function(){A.controller.abort()})}var NA=null,ef=0,ol=0,ts=null;function Vh(A,m){if(NA===null){var b=NA=[];ef=0,ol=km(),ts={status:"pending",value:void 0,then:function(T){b.push(T)}}}return ef++,m.then(uu,uu),m}function uu(){if(--ef===0&&NA!==null){ts!==null&&(ts.status="fulfilled");var A=NA;NA=null,ol=0,ts=null;for(var m=0;m<A.length;m++)(0,A[m])()}}function Id(A,m){var b=[],T={status:"pending",value:null,reason:null,then:function(Q){b.push(Q)}};return A.then(function(){T.status="fulfilled",T.value=m;for(var Q=0;Q<b.length;Q++)(0,b[Q])(m)},function(Q){for(T.status="rejected",T.reason=Q,Q=0;Q<b.length;Q++)(0,b[Q])(void 0)}),T}var tf=ze.S;ze.S=function(A,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Vh(A,m),tf!==null&&tf(A,m)};var Cl=Ne(null);function Ic(){var A=Cl.current;return A!==null?A:Gs.pooledCache}function Uf(A,m){m===null?lt(Cl,Cl.current):lt(Cl,m.pool)}function $h(){var A=Ic();return A===null?null:{parent:ba._currentValue,pool:A}}var Ca=Error(i(460)),Xr=Error(i(474)),ci=Error(i(542)),GA={then:function(){}};function WA(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Zh(){}function Tc(A,m,b){switch(b=A[b],b===void 0?A.push(m):b!==m&&(m.then(Zh,Zh),m=b),m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,no(A),A;default:if(typeof m.status=="string")m.then(Zh,Zh);else{if(A=Gs,A!==null&&100<A.shellSuspendCounter)throw Error(i(482));A=m,A.status="pending",A.then(function(T){if(m.status==="pending"){var Q=m;Q.status="fulfilled",Q.value=T}},function(T){if(m.status==="pending"){var Q=m;Q.status="rejected",Q.reason=T}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,no(A),A}throw gA=m,Ca}}var gA=null;function nf(){if(gA===null)throw Error(i(459));var A=gA;return gA=null,A}function no(A){if(A===Ca||A===ci)throw Error(i(483))}var Nl=!1;function Bh(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uc(A,m){A=A.updateQueue,m.updateQueue===A&&(m.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function ku(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Ac(A,m,b){var T=A.updateQueue;if(T===null)return null;if(T=T.shared,(os&2)!==0){var Q=T.pending;return Q===null?m.next=m:(m.next=Q.next,Q.next=m),T.pending=m,m=bh(A),Ec(A,null,b),m}return Eu(A,T,m,b),bh(A)}function Oh(A,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194048)!==0)){var T=m.lanes;T&=A.pendingLanes,b|=T,m.lanes=b,Mn(A,b)}}function yA(A,m){var b=A.updateQueue,T=A.alternate;if(T!==null&&(T=T.updateQueue,b===T)){var Q=null,se=null;if(b=b.firstBaseUpdate,b!==null){do{var Ge={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};se===null?Q=se=Ge:se=se.next=Ge,b=b.next}while(b!==null);se===null?Q=se=m:se=se.next=m}else Q=se=m;b={baseState:T.baseState,firstBaseUpdate:Q,lastBaseUpdate:se,shared:T.shared,callbacks:T.callbacks},A.updateQueue=b;return}A=b.lastBaseUpdate,A===null?b.firstBaseUpdate=m:A.next=m,b.lastBaseUpdate=m}var ih=!1;function eA(){if(ih){var A=ts;if(A!==null)throw A}}function _l(A,m,b,T){ih=!1;var Q=A.updateQueue;Nl=!1;var se=Q.firstBaseUpdate,Ge=Q.lastBaseUpdate,ot=Q.shared.pending;if(ot!==null){Q.shared.pending=null;var zt=ot,hn=zt.next;zt.next=null,Ge===null?se=hn:Ge.next=hn,Ge=zt;var kn=A.alternate;kn!==null&&(kn=kn.updateQueue,ot=kn.lastBaseUpdate,ot!==Ge&&(ot===null?kn.firstBaseUpdate=hn:ot.next=hn,kn.lastBaseUpdate=zt))}if(se!==null){var Nn=Q.baseState;Ge=0,kn=hn=zt=null,ot=se;do{var pn=ot.lane&-536870913,fn=pn!==ot.lane;if(fn?(Yo&pn)===pn:(T&pn)===pn){pn!==0&&pn===ol&&(ih=!0),kn!==null&&(kn=kn.next={lane:0,tag:ot.tag,payload:ot.payload,callback:null,next:null});e:{var Kr=A,Ur=ot;pn=m;var xs=b;switch(Ur.tag){case 1:if(Kr=Ur.payload,typeof Kr=="function"){Nn=Kr.call(xs,Nn,pn);break e}Nn=Kr;break e;case 3:Kr.flags=Kr.flags&-65537|128;case 0:if(Kr=Ur.payload,pn=typeof Kr=="function"?Kr.call(xs,Nn,pn):Kr,pn==null)break e;Nn=w({},Nn,pn);break e;case 2:Nl=!0}}pn=ot.callback,pn!==null&&(A.flags|=64,fn&&(A.flags|=8192),fn=Q.callbacks,fn===null?Q.callbacks=[pn]:fn.push(pn))}else fn={lane:pn,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},kn===null?(hn=kn=fn,zt=Nn):kn=kn.next=fn,Ge|=pn;if(ot=ot.next,ot===null){if(ot=Q.shared.pending,ot===null)break;fn=ot,ot=fn.next,fn.next=null,Q.lastBaseUpdate=fn,Q.shared.pending=null}}while(!0);kn===null&&(zt=Nn),Q.baseState=zt,Q.firstBaseUpdate=hn,Q.lastBaseUpdate=kn,se===null&&(Q.shared.lanes=0),Pd|=Ge,A.lanes=Ge,A.memoizedState=Nn}}function Ep(A,m){if(typeof A!="function")throw Error(i(191,A));A.call(m)}function rf(A,m){var b=A.callbacks;if(b!==null)for(A.callbacks=null,A=0;A<b.length;A++)Ep(b[A],m)}var Gl=Ne(null),Po=Ne(0);function Wl(A,m){A=cf,lt(Po,A),lt(Gl,m),cf=A|m.baseLanes}function Xh(){lt(Po,cf),lt(Gl,Gl.current)}function Lf(){cf=Po.current,tt(Gl),tt(Po)}var vA=0,io=null,Ko=null,Pr=null,QA=!1,Ii=!1,ki=!1,kc=0,Du=0,Au=null,la=0;function mo(){throw Error(i(321))}function Ql(A,m){if(m===null)return!1;for(var b=0;b<m.length&&b<A.length;b++)if(!xu(A[b],m[b]))return!1;return!0}function Ff(A,m,b,T,Q,se){return vA=se,io=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,ze.H=A===null||A.memoizedState===null?HA:xl,ki=!1,se=b(T,Q),ki=!1,Ii&&(se=Uo(m,b,T,Q)),Jh(A),se}function Jh(A){ze.H=bl;var m=Ko!==null&&Ko.next!==null;if(vA=0,Pr=Ko=io=null,QA=!1,Du=0,Au=null,m)throw Error(i(300));A===null||Xs||(A=A.dependencies,A!==null&&eh(A)&&(Xs=!0))}function Uo(A,m,b,T){io=A;var Q=0;do{if(Ii&&(Au=null),Du=0,Ii=!1,25<=Q)throw Error(i(301));if(Q+=1,Pr=Ko=null,A.updateQueue!=null){var se=A.updateQueue;se.lastEffect=null,se.events=null,se.stores=null,se.memoCache!=null&&(se.memoCache.index=0)}ze.H=Kc,se=m(b,T)}while(Ii);return se}function Wa(){var A=ze.H,m=A.useState()[0];return m=typeof m.then=="function"?Rc(m):m,A=A.useState()[0],(Ko!==null?Ko.memoizedState:null)!==A&&(io.flags|=1024),m}function ed(){var A=kc!==0;return kc=0,A}function CA(A,m,b){m.updateQueue=A.updateQueue,m.flags&=-2053,A.lanes&=~b}function Dc(A){if(QA){for(A=A.memoizedState;A!==null;){var m=A.queue;m!==null&&(m.pending=null),A=A.next}QA=!1}vA=0,Pr=Ko=io=null,Ii=!1,Du=kc=0,Au=null}function Zs(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?io.memoizedState=Pr=A:Pr=Pr.next=A,Pr}function ns(){if(Ko===null){var A=io.alternate;A=A!==null?A.memoizedState:null}else A=Ko.next;var m=Pr===null?io.memoizedState:Pr.next;if(m!==null)Pr=m,Ko=A;else{if(A===null)throw io.alternate===null?Error(i(467)):Error(i(310));Ko=A,A={memoizedState:Ko.memoizedState,baseState:Ko.baseState,baseQueue:Ko.baseQueue,queue:Ko.queue,next:null},Pr===null?io.memoizedState=Pr=A:Pr=Pr.next=A}return Pr}function cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rc(A){var m=Du;return Du+=1,Au===null&&(Au=[]),A=Tc(Au,A,m),m=io,(Pr===null?m.memoizedState:Pr.next)===null&&(m=m.alternate,ze.H=m===null||m.memoizedState===null?HA:xl),A}function cc(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Rc(A);if(A.$$typeof===oe)return Ro(A)}throw Error(i(438,String(A)))}function hc(A){var m=null,b=io.updateQueue;if(b!==null&&(m=b.memoCache),m==null){var T=io.alternate;T!==null&&(T=T.updateQueue,T!==null&&(T=T.memoCache,T!=null&&(m={data:T.data.map(function(Q){return Q.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),b===null&&(b=cu(),io.updateQueue=b),b.memoCache=m,b=m.data[m.index],b===void 0)for(b=m.data[m.index]=Array(A),T=0;T<A;T++)b[T]=ye;return m.index++,b}function Yl(A,m){return typeof m=="function"?m(A):m}function td(A){var m=ns();return nd(m,Ko,A)}function nd(A,m,b){var T=A.queue;if(T===null)throw Error(i(311));T.lastRenderedReducer=b;var Q=A.baseQueue,se=T.pending;if(se!==null){if(Q!==null){var Ge=Q.next;Q.next=se.next,se.next=Ge}m.baseQueue=Q=se,T.pending=null}if(se=A.baseState,Q===null)A.memoizedState=se;else{m=Q.next;var ot=Ge=null,zt=null,hn=m,kn=!1;do{var Nn=hn.lane&-536870913;if(Nn!==hn.lane?(Yo&Nn)===Nn:(vA&Nn)===Nn){var pn=hn.revertLane;if(pn===0)zt!==null&&(zt=zt.next={lane:0,revertLane:0,action:hn.action,hasEagerState:hn.hasEagerState,eagerState:hn.eagerState,next:null}),Nn===ol&&(kn=!0);else if((vA&pn)===pn){hn=hn.next,pn===ol&&(kn=!0);continue}else Nn={lane:0,revertLane:hn.revertLane,action:hn.action,hasEagerState:hn.hasEagerState,eagerState:hn.eagerState,next:null},zt===null?(ot=zt=Nn,Ge=se):zt=zt.next=Nn,io.lanes|=pn,Pd|=pn;Nn=hn.action,ki&&b(se,Nn),se=hn.hasEagerState?hn.eagerState:b(se,Nn)}else pn={lane:Nn,revertLane:hn.revertLane,action:hn.action,hasEagerState:hn.hasEagerState,eagerState:hn.eagerState,next:null},zt===null?(ot=zt=pn,Ge=se):zt=zt.next=pn,io.lanes|=Nn,Pd|=Nn;hn=hn.next}while(hn!==null&&hn!==m);if(zt===null?Ge=se:zt.next=ot,!xu(se,A.memoizedState)&&(Xs=!0,kn&&(b=ts,b!==null)))throw b;A.memoizedState=se,A.baseState=Ge,A.baseQueue=zt,T.lastRenderedState=se}return Q===null&&(T.lanes=0),[A.memoizedState,T.dispatch]}function Td(A){var m=ns(),b=m.queue;if(b===null)throw Error(i(311));b.lastRenderedReducer=A;var T=b.dispatch,Q=b.pending,se=m.memoizedState;if(Q!==null){b.pending=null;var Ge=Q=Q.next;do se=A(se,Ge.action),Ge=Ge.next;while(Ge!==Q);xu(se,m.memoizedState)||(Xs=!0),m.memoizedState=se,m.baseQueue===null&&(m.baseState=se),b.lastRenderedState=se}return[se,T]}function I(A,m,b){var T=io,Q=ns(),se=Zr;if(se){if(b===void 0)throw Error(i(407));b=b()}else b=m();var Ge=!xu((Ko||Q).memoizedState,b);Ge&&(Q.memoizedState=b,Xs=!0),Q=Q.queue;var ot=_.bind(null,T,Q,A);if(Yt(2048,8,ot,[A]),Q.getSnapshot!==m||Ge||Pr!==null&&Pr.memoizedState.tag&1){if(T.flags|=2048,wt(9,Pt(),f.bind(null,T,Q,b,m),null),Gs===null)throw Error(i(349));se||(vA&124)!==0||s(T,m,b)}return b}function s(A,m,b){A.flags|=16384,A={getSnapshot:m,value:b},m=io.updateQueue,m===null?(m=cu(),io.updateQueue=m,m.stores=[A]):(b=m.stores,b===null?m.stores=[A]:b.push(A))}function f(A,m,b,T){m.value=b,m.getSnapshot=T,S(m)&&k(A)}function _(A,m,b){return b(function(){S(m)&&k(A)})}function S(A){var m=A.getSnapshot;A=A.value;try{var b=m();return!xu(A,b)}catch{return!0}}function k(A){var m=Bu(A,2);m!==null&&lh(m,A,2)}function z(A){var m=Zs();if(typeof A=="function"){var b=A;if(A=b(),ki){de(!0);try{b()}finally{de(!1)}}}return m.memoizedState=m.baseState=A,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:A},m}function q(A,m,b,T){return A.baseState=b,nd(A,Ko,typeof T=="function"?T:Yl)}function X(A,m,b,T,Q){if(rh(A))throw Error(i(485));if(A=m.action,A!==null){var se={payload:Q,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ge){se.listeners.push(Ge)}};ze.T!==null?b(!0):se.isTransition=!1,T(se),b=m.pending,b===null?(se.next=m.pending=se,he(m,se)):(se.next=b.next,m.pending=b.next=se)}}function he(A,m){var b=m.action,T=m.payload,Q=A.state;if(m.isTransition){var se=ze.T,Ge={};ze.T=Ge;try{var ot=b(Q,T),zt=ze.S;zt!==null&&zt(Ge,ot),me(A,m,ot)}catch(hn){Me(A,m,hn)}finally{ze.T=se}}else try{se=b(Q,T),me(A,m,se)}catch(hn){Me(A,m,hn)}}function me(A,m,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(T){Ee(A,m,T)},function(T){return Me(A,m,T)}):Ee(A,m,b)}function Ee(A,m,b){m.status="fulfilled",m.value=b,Ue(m),A.state=b,m=A.pending,m!==null&&(b=m.next,b===m?A.pending=null:(b=b.next,m.next=b,he(A,b)))}function Me(A,m,b){var T=A.pending;if(A.pending=null,T!==null){T=T.next;do m.status="rejected",m.reason=b,Ue(m),m=m.next;while(m!==T)}A.action=null}function Ue(A){A=A.listeners;for(var m=0;m<A.length;m++)(0,A[m])()}function Xe(A,m){return m}function ut(A,m){if(Zr){var b=Gs.formState;if(b!==null){e:{var T=io;if(Zr){if(_a){t:{for(var Q=_a,se=Fs;Q.nodeType!==8;){if(!se){Q=null;break t}if(Q=ld(Q.nextSibling),Q===null){Q=null;break t}}se=Q.data,Q=se==="F!"||se==="F"?Q:null}if(Q){_a=ld(Q.nextSibling),T=Q.data==="F!";break e}}mA(T)}T=!1}T&&(m=b[0])}}return b=Zs(),b.memoizedState=b.baseState=m,T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xe,lastRenderedState:m},b.queue=T,b=dc.bind(null,io,T),T.dispatch=b,T=z(!1),se=Ih.bind(null,io,!1,T.queue),T=Zs(),Q={state:m,dispatch:null,action:A,pending:null},T.queue=Q,b=X.bind(null,io,Q,se,b),Q.dispatch=b,T.memoizedState=A,[m,b,!1]}function ct(A){var m=ns();return ft(m,Ko,A)}function ft(A,m,b){if(m=nd(A,m,Xe)[0],A=td(Yl)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var T=Rc(m)}catch(Ge){throw Ge===Ca?ci:Ge}else T=m;m=ns();var Q=m.queue,se=Q.dispatch;return b!==m.memoizedState&&(io.flags|=2048,wt(9,Pt(),xt.bind(null,Q,b),null)),[T,se,A]}function xt(A,m){A.action=m}function yt(A){var m=ns(),b=Ko;if(b!==null)return ft(m,b,A);ns(),m=m.memoizedState,b=ns();var T=b.queue.dispatch;return b.memoizedState=A,[m,T,!1]}function wt(A,m,b,T){return A={tag:A,create:b,deps:T,inst:m,next:null},m=io.updateQueue,m===null&&(m=cu(),io.updateQueue=m),b=m.lastEffect,b===null?m.lastEffect=A.next=A:(T=b.next,b.next=A,A.next=T,m.lastEffect=A),A}function Pt(){return{destroy:void 0,resource:void 0}}function Ft(){return ns().memoizedState}function Bt(A,m,b,T){var Q=Zs();T=T===void 0?null:T,io.flags|=A,Q.memoizedState=wt(1|m,Pt(),b,T)}function Yt(A,m,b,T){var Q=ns();T=T===void 0?null:T;var se=Q.memoizedState.inst;Ko!==null&&T!==null&&Ql(T,Ko.memoizedState.deps)?Q.memoizedState=wt(m,se,b,T):(io.flags|=A,Q.memoizedState=wt(1|m,se,b,T))}function dn(A,m){Bt(8390656,8,A,m)}function Xt(A,m){Yt(2048,8,A,m)}function nn(A,m){return Yt(4,2,A,m)}function un(A,m){return Yt(4,4,A,m)}function qn(A,m){if(typeof m=="function"){A=A();var b=m(A);return function(){typeof b=="function"?b():m(null)}}if(m!=null)return A=A(),m.current=A,function(){m.current=null}}function Qn(A,m,b){b=b!=null?b.concat([A]):null,Yt(4,4,qn.bind(null,m,A),b)}function Tn(){}function xi(A,m){var b=ns();m=m===void 0?null:m;var T=b.memoizedState;return m!==null&&Ql(m,T[1])?T[0]:(b.memoizedState=[A,m],A)}function cr(A,m){var b=ns();m=m===void 0?null:m;var T=b.memoizedState;if(m!==null&&Ql(m,T[1]))return T[0];if(T=A(),ki){de(!0);try{A()}finally{de(!1)}}return b.memoizedState=[T,m],T}function Co(A,m,b){return b===void 0||(vA&1073741824)!==0?A.memoizedState=m:(A.memoizedState=b,A=ay(),io.lanes|=A,Pd|=A,b)}function ua(A,m,b,T){return xu(b,m)?b:Gl.current!==null?(A=Co(A,b,T),xu(A,m)||(Xs=!0),A):(vA&42)===0?(Xs=!0,A.memoizedState=b):(A=ay(),io.lanes|=A,Pd|=A,m)}function Lo(A,m,b,T,Q){var se=st.p;st.p=se!==0&&8>se?se:8;var Ge=ze.T,ot={};ze.T=ot,Ih(A,!1,m,b);try{var zt=Q(),hn=ze.S;if(hn!==null&&hn(ot,zt),zt!==null&&typeof zt=="object"&&typeof zt.then=="function"){var kn=Id(zt,T);ql(A,m,kn,BA(A))}else ql(A,m,T,BA(A))}catch(Nn){ql(A,m,{then:function(){},status:"rejected",reason:Nn},BA())}finally{st.p=se,ze.T=Ge}}function Pa(){}function Aa(A,m,b,T){if(A.tag!==5)throw Error(i(476));var Q=Br(A).queue;Lo(A,Q,m,Ct,b===null?Pa:function(){return Qo(A),b(T)})}function Br(A){var m=A.memoizedState;if(m!==null)return m;m={memoizedState:Ct,baseState:Ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:Ct},next:null};var b={};return m.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:b},next:null},A.memoizedState=m,A=A.alternate,A!==null&&(A.memoizedState=m),m}function Qo(A){var m=Br(A).next.queue;ql(A,m,{},BA())}function is(){return Ro(Qt)}function Qa(){return ns().memoizedState}function Os(){return ns().memoizedState}function Is(A){for(var m=A.return;m!==null;){switch(m.tag){case 24:case 3:var b=BA();A=ku(b);var T=Ac(m,A,b);T!==null&&(lh(T,m,b),Oh(T,m,b)),m={cache:Eh()},A.payload=m;return}m=m.return}}function YA(A,m,b){var T=BA();b={lane:T,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},rh(A)?qA(m,b):(b=sc(A,m,b,T),b!==null&&(lh(b,A,T),Pc(b,m,T)))}function dc(A,m,b){var T=BA();ql(A,m,b,T)}function ql(A,m,b,T){var Q={lane:T,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(rh(A))qA(m,Q);else{var se=A.alternate;if(A.lanes===0&&(se===null||se.lanes===0)&&(se=m.lastRenderedReducer,se!==null))try{var Ge=m.lastRenderedState,ot=se(Ge,b);if(Q.hasEagerState=!0,Q.eagerState=ot,xu(ot,Ge))return Eu(A,m,Q,0),Gs===null&&jl(),!1}catch{}finally{}if(b=sc(A,m,Q,T),b!==null)return lh(b,A,T),Pc(b,m,T),!0}return!1}function Ih(A,m,b,T){if(T={lane:2,revertLane:km(),action:T,hasEagerState:!1,eagerState:null,next:null},rh(A)){if(m)throw Error(i(479))}else m=sc(A,b,T,2),m!==null&&lh(m,A,2)}function rh(A){var m=A.alternate;return A===io||m!==null&&m===io}function qA(A,m){Ii=QA=!0;var b=A.pending;b===null?m.next=m:(m.next=b.next,b.next=m),A.pending=m}function Pc(A,m,b){if((b&4194048)!==0){var T=m.lanes;T&=A.pendingLanes,b|=T,m.lanes=b,Mn(A,b)}}var bl={readContext:Ro,use:cc,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useLayoutEffect:mo,useInsertionEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useSyncExternalStore:mo,useId:mo,useHostTransitionStatus:mo,useFormState:mo,useActionState:mo,useOptimistic:mo,useMemoCache:mo,useCacheRefresh:mo},HA={readContext:Ro,use:cc,useCallback:function(A,m){return Zs().memoizedState=[A,m===void 0?null:m],A},useContext:Ro,useEffect:dn,useImperativeHandle:function(A,m,b){b=b!=null?b.concat([A]):null,Bt(4194308,4,qn.bind(null,m,A),b)},useLayoutEffect:function(A,m){return Bt(4194308,4,A,m)},useInsertionEffect:function(A,m){Bt(4,2,A,m)},useMemo:function(A,m){var b=Zs();m=m===void 0?null:m;var T=A();if(ki){de(!0);try{A()}finally{de(!1)}}return b.memoizedState=[T,m],T},useReducer:function(A,m,b){var T=Zs();if(b!==void 0){var Q=b(m);if(ki){de(!0);try{b(m)}finally{de(!1)}}}else Q=m;return T.memoizedState=T.baseState=Q,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:Q},T.queue=A,A=A.dispatch=YA.bind(null,io,A),[T.memoizedState,A]},useRef:function(A){var m=Zs();return A={current:A},m.memoizedState=A},useState:function(A){A=z(A);var m=A.queue,b=dc.bind(null,io,m);return m.dispatch=b,[A.memoizedState,b]},useDebugValue:Tn,useDeferredValue:function(A,m){var b=Zs();return Co(b,A,m)},useTransition:function(){var A=z(!1);return A=Lo.bind(null,io,A.queue,!0,!1),Zs().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,m,b){var T=io,Q=Zs();if(Zr){if(b===void 0)throw Error(i(407));b=b()}else{if(b=m(),Gs===null)throw Error(i(349));(Yo&124)!==0||s(T,m,b)}Q.memoizedState=b;var se={value:b,getSnapshot:m};return Q.queue=se,dn(_.bind(null,T,se,A),[A]),T.flags|=2048,wt(9,Pt(),f.bind(null,T,se,b,m),null),b},useId:function(){var A=Zs(),m=Gs.identifierPrefix;if(Zr){var b=FA,T=sa;b=(T&~(1<<32-re(T)-1)).toString(32)+b,m=""+m+"R"+b,b=kc++,0<b&&(m+="H"+b.toString(32)),m+=""}else b=la++,m=""+m+"r"+b.toString(32)+"";return A.memoizedState=m},useHostTransitionStatus:is,useFormState:ut,useActionState:ut,useOptimistic:function(A){var m=Zs();m.memoizedState=m.baseState=A;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=b,m=Ih.bind(null,io,!0,b),b.dispatch=m,[A,m]},useMemoCache:hc,useCacheRefresh:function(){return Zs().memoizedState=Is.bind(null,io)}},xl={readContext:Ro,use:cc,useCallback:xi,useContext:Ro,useEffect:Xt,useImperativeHandle:Qn,useInsertionEffect:nn,useLayoutEffect:un,useMemo:cr,useReducer:td,useRef:Ft,useState:function(){return td(Yl)},useDebugValue:Tn,useDeferredValue:function(A,m){var b=ns();return ua(b,Ko.memoizedState,A,m)},useTransition:function(){var A=td(Yl)[0],m=ns().memoizedState;return[typeof A=="boolean"?A:Rc(A),m]},useSyncExternalStore:I,useId:Qa,useHostTransitionStatus:is,useFormState:ct,useActionState:ct,useOptimistic:function(A,m){var b=ns();return q(b,Ko,A,m)},useMemoCache:hc,useCacheRefresh:Os},Kc={readContext:Ro,use:cc,useCallback:xi,useContext:Ro,useEffect:Xt,useImperativeHandle:Qn,useInsertionEffect:nn,useLayoutEffect:un,useMemo:cr,useReducer:Td,useRef:Ft,useState:function(){return Td(Yl)},useDebugValue:Tn,useDeferredValue:function(A,m){var b=ns();return Ko===null?Co(b,A,m):ua(b,Ko.memoizedState,A,m)},useTransition:function(){var A=Td(Yl)[0],m=ns().memoizedState;return[typeof A=="boolean"?A:Rc(A),m]},useSyncExternalStore:I,useId:Qa,useHostTransitionStatus:is,useFormState:yt,useActionState:yt,useOptimistic:function(A,m){var b=ns();return Ko!==null?q(b,Ko,A,m):(b.baseState=A,[A,b.queue.dispatch])},useMemoCache:hc,useCacheRefresh:Os},_o=null,Xo=0;function hu(A){var m=Xo;return Xo+=1,_o===null&&(_o=[]),Tc(_o,A,m)}function ys(A,m){m=m.props.ref,A.ref=m!==void 0?m:null}function _A(A,m){throw m.$$typeof===O?Error(i(525)):(A=Object.prototype.toString.call(m),Error(i(31,A==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":A)))}function du(A){var m=A._init;return m(A._payload)}function Ru(A){function m(tn,$t){if(A){var An=tn.deletions;An===null?(tn.deletions=[$t],tn.flags|=16):An.push($t)}}function b(tn,$t){if(!A)return null;for(;$t!==null;)m(tn,$t),$t=$t.sibling;return null}function T(tn){for(var $t=new Map;tn!==null;)tn.key!==null?$t.set(tn.key,tn):$t.set(tn.index,tn),tn=tn.sibling;return $t}function Q(tn,$t){return tn=Bs(tn,$t),tn.index=0,tn.sibling=null,tn}function se(tn,$t,An){return tn.index=An,A?(An=tn.alternate,An!==null?(An=An.index,An<$t?(tn.flags|=67108866,$t):An):(tn.flags|=67108866,$t)):(tn.flags|=1048576,$t)}function Ge(tn){return A&&tn.alternate===null&&(tn.flags|=67108866),tn}function ot(tn,$t,An,Ln){return $t===null||$t.tag!==6?($t=Bd(An,tn.mode,Ln),$t.return=tn,$t):($t=Q($t,An),$t.return=tn,$t)}function zt(tn,$t,An,Ln){var ir=An.type;return ir===j?kn(tn,$t,An.props.children,Ln,An.key):$t!==null&&($t.elementType===ir||typeof ir=="object"&&ir!==null&&ir.$$typeof===ce&&du(ir)===$t.type)?($t=Q($t,An.props),ys($t,An),$t.return=tn,$t):($t=Ed(An.type,An.key,An.props,null,tn.mode,Ln),ys($t,An),$t.return=tn,$t)}function hn(tn,$t,An,Ln){return $t===null||$t.tag!==4||$t.stateNode.containerInfo!==An.containerInfo||$t.stateNode.implementation!==An.implementation?($t=$c(An,tn.mode,Ln),$t.return=tn,$t):($t=Q($t,An.children||[]),$t.return=tn,$t)}function kn(tn,$t,An,Ln,ir){return $t===null||$t.tag!==7?($t=pA(An,tn.mode,Ln,ir),$t.return=tn,$t):($t=Q($t,An),$t.return=tn,$t)}function Nn(tn,$t,An){if(typeof $t=="string"&&$t!==""||typeof $t=="number"||typeof $t=="bigint")return $t=Bd(""+$t,tn.mode,An),$t.return=tn,$t;if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case U:return An=Ed($t.type,$t.key,$t.props,null,tn.mode,An),ys(An,$t),An.return=tn,An;case K:return $t=$c($t,tn.mode,An),$t.return=tn,$t;case ce:var Ln=$t._init;return $t=Ln($t._payload),Nn(tn,$t,An)}if(xe($t)||Oe($t))return $t=pA($t,tn.mode,An,null),$t.return=tn,$t;if(typeof $t.then=="function")return Nn(tn,hu($t),An);if($t.$$typeof===oe)return Nn(tn,th(tn,$t),An);_A(tn,$t)}return null}function pn(tn,$t,An,Ln){var ir=$t!==null?$t.key:null;if(typeof An=="string"&&An!==""||typeof An=="number"||typeof An=="bigint")return ir!==null?null:ot(tn,$t,""+An,Ln);if(typeof An=="object"&&An!==null){switch(An.$$typeof){case U:return An.key===ir?zt(tn,$t,An,Ln):null;case K:return An.key===ir?hn(tn,$t,An,Ln):null;case ce:return ir=An._init,An=ir(An._payload),pn(tn,$t,An,Ln)}if(xe(An)||Oe(An))return ir!==null?null:kn(tn,$t,An,Ln,null);if(typeof An.then=="function")return pn(tn,$t,hu(An),Ln);if(An.$$typeof===oe)return pn(tn,$t,th(tn,An),Ln);_A(tn,An)}return null}function fn(tn,$t,An,Ln,ir){if(typeof Ln=="string"&&Ln!==""||typeof Ln=="number"||typeof Ln=="bigint")return tn=tn.get(An)||null,ot($t,tn,""+Ln,ir);if(typeof Ln=="object"&&Ln!==null){switch(Ln.$$typeof){case U:return tn=tn.get(Ln.key===null?An:Ln.key)||null,zt($t,tn,Ln,ir);case K:return tn=tn.get(Ln.key===null?An:Ln.key)||null,hn($t,tn,Ln,ir);case ce:var qo=Ln._init;return Ln=qo(Ln._payload),fn(tn,$t,An,Ln,ir)}if(xe(Ln)||Oe(Ln))return tn=tn.get(An)||null,kn($t,tn,Ln,ir,null);if(typeof Ln.then=="function")return fn(tn,$t,An,hu(Ln),ir);if(Ln.$$typeof===oe)return fn(tn,$t,An,th($t,Ln),ir);_A($t,Ln)}return null}function Kr(tn,$t,An,Ln){for(var ir=null,qo=null,nr=$t,Ir=$t=0,Fu=null;nr!==null&&Ir<An.length;Ir++){nr.index>Ir?(Fu=nr,nr=null):Fu=nr.sibling;var Oa=pn(tn,nr,An[Ir],Ln);if(Oa===null){nr===null&&(nr=Fu);break}A&&nr&&Oa.alternate===null&&m(tn,nr),$t=se(Oa,$t,Ir),qo===null?ir=Oa:qo.sibling=Oa,qo=Oa,nr=Fu}if(Ir===An.length)return b(tn,nr),Zr&&zA(tn,Ir),ir;if(nr===null){for(;Ir<An.length;Ir++)nr=Nn(tn,An[Ir],Ln),nr!==null&&($t=se(nr,$t,Ir),qo===null?ir=nr:qo.sibling=nr,qo=nr);return Zr&&zA(tn,Ir),ir}for(nr=T(nr);Ir<An.length;Ir++)Fu=fn(nr,tn,Ir,An[Ir],Ln),Fu!==null&&(A&&Fu.alternate!==null&&nr.delete(Fu.key===null?Ir:Fu.key),$t=se(Fu,$t,Ir),qo===null?ir=Fu:qo.sibling=Fu,qo=Fu);return A&&nr.forEach(function(ap){return m(tn,ap)}),Zr&&zA(tn,Ir),ir}function Ur(tn,$t,An,Ln){if(An==null)throw Error(i(151));for(var ir=null,qo=null,nr=$t,Ir=$t=0,Fu=null,Oa=An.next();nr!==null&&!Oa.done;Ir++,Oa=An.next()){nr.index>Ir?(Fu=nr,nr=null):Fu=nr.sibling;var ap=pn(tn,nr,Oa.value,Ln);if(ap===null){nr===null&&(nr=Fu);break}A&&nr&&ap.alternate===null&&m(tn,nr),$t=se(ap,$t,Ir),qo===null?ir=ap:qo.sibling=ap,qo=ap,nr=Fu}if(Oa.done)return b(tn,nr),Zr&&zA(tn,Ir),ir;if(nr===null){for(;!Oa.done;Ir++,Oa=An.next())Oa=Nn(tn,Oa.value,Ln),Oa!==null&&($t=se(Oa,$t,Ir),qo===null?ir=Oa:qo.sibling=Oa,qo=Oa);return Zr&&zA(tn,Ir),ir}for(nr=T(nr);!Oa.done;Ir++,Oa=An.next())Oa=fn(nr,tn,Ir,Oa.value,Ln),Oa!==null&&(A&&Oa.alternate!==null&&nr.delete(Oa.key===null?Ir:Oa.key),$t=se(Oa,$t,Ir),qo===null?ir=Oa:qo.sibling=Oa,qo=Oa);return A&&nr.forEach(function(cC){return m(tn,cC)}),Zr&&zA(tn,Ir),ir}function xs(tn,$t,An,Ln){if(typeof An=="object"&&An!==null&&An.type===j&&An.key===null&&(An=An.props.children),typeof An=="object"&&An!==null){switch(An.$$typeof){case U:e:{for(var ir=An.key;$t!==null;){if($t.key===ir){if(ir=An.type,ir===j){if($t.tag===7){b(tn,$t.sibling),Ln=Q($t,An.props.children),Ln.return=tn,tn=Ln;break e}}else if($t.elementType===ir||typeof ir=="object"&&ir!==null&&ir.$$typeof===ce&&du(ir)===$t.type){b(tn,$t.sibling),Ln=Q($t,An.props),ys(Ln,An),Ln.return=tn,tn=Ln;break e}b(tn,$t);break}else m(tn,$t);$t=$t.sibling}An.type===j?(Ln=pA(An.props.children,tn.mode,Ln,An.key),Ln.return=tn,tn=Ln):(Ln=Ed(An.type,An.key,An.props,null,tn.mode,Ln),ys(Ln,An),Ln.return=tn,tn=Ln)}return Ge(tn);case K:e:{for(ir=An.key;$t!==null;){if($t.key===ir)if($t.tag===4&&$t.stateNode.containerInfo===An.containerInfo&&$t.stateNode.implementation===An.implementation){b(tn,$t.sibling),Ln=Q($t,An.children||[]),Ln.return=tn,tn=Ln;break e}else{b(tn,$t);break}else m(tn,$t);$t=$t.sibling}Ln=$c(An,tn.mode,Ln),Ln.return=tn,tn=Ln}return Ge(tn);case ce:return ir=An._init,An=ir(An._payload),xs(tn,$t,An,Ln)}if(xe(An))return Kr(tn,$t,An,Ln);if(Oe(An)){if(ir=Oe(An),typeof ir!="function")throw Error(i(150));return An=ir.call(An),Ur(tn,$t,An,Ln)}if(typeof An.then=="function")return xs(tn,$t,hu(An),Ln);if(An.$$typeof===oe)return xs(tn,$t,th(tn,An),Ln);_A(tn,An)}return typeof An=="string"&&An!==""||typeof An=="number"||typeof An=="bigint"?(An=""+An,$t!==null&&$t.tag===6?(b(tn,$t.sibling),Ln=Q($t,An),Ln.return=tn,tn=Ln):(b(tn,$t),Ln=Bd(An,tn.mode,Ln),Ln.return=tn,tn=Ln),Ge(tn)):b(tn,$t)}return function(tn,$t,An,Ln){try{Xo=0;var ir=xs(tn,$t,An,Ln);return _o=null,ir}catch(nr){if(nr===Ca||nr===ci)throw nr;var qo=Xu(29,nr,null,tn.mode);return qo.lanes=Ln,qo.return=tn,qo}finally{}}}var Hl=Ru(!0),Uc=Ru(!1),tA=Ne(null),Ya=null;function bA(A){var m=A.alternate;lt(Sa,Sa.current&1),lt(tA,A),Ya===null&&(m===null||Gl.current!==null||m.memoizedState!==null)&&(Ya=A)}function zf(A){if(A.tag===22){if(lt(Sa,Sa.current),lt(tA,A),Ya===null){var m=A.alternate;m!==null&&m.memoizedState!==null&&(Ya=A)}}else xA()}function xA(){lt(Sa,Sa.current),lt(tA,tA.current)}function MA(A){tt(tA),Ya===A&&(Ya=null),tt(Sa)}var Sa=Ne(0);function nA(A){for(var m=A;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||rA(b)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function id(A,m,b,T){m=A.memoizedState,b=b(T,m),b=b==null?m:w({},m,b),A.memoizedState=b,A.lanes===0&&(A.updateQueue.baseState=b)}var jf={enqueueSetState:function(A,m,b){A=A._reactInternals;var T=BA(),Q=ku(T);Q.payload=m,b!=null&&(Q.callback=b),m=Ac(A,Q,T),m!==null&&(lh(m,A,T),Oh(m,A,T))},enqueueReplaceState:function(A,m,b){A=A._reactInternals;var T=BA(),Q=ku(T);Q.tag=1,Q.payload=m,b!=null&&(Q.callback=b),m=Ac(A,Q,T),m!==null&&(lh(m,A,T),Oh(m,A,T))},enqueueForceUpdate:function(A,m){A=A._reactInternals;var b=BA(),T=ku(b);T.tag=2,m!=null&&(T.callback=m),m=Ac(A,T,b),m!==null&&(lh(m,A,b),Oh(m,A,b))}};function of(A,m,b,T,Q,se,Ge){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(T,se,Ge):m.prototype&&m.prototype.isPureReactComponent?!ac(b,T)||!ac(Q,se):!0}function pm(A,m,b,T){A=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,T),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,T),m.state!==A&&jf.enqueueReplaceState(m,m.state,null)}function fc(A,m){var b=m;if("ref"in m){b={};for(var T in m)T!=="ref"&&(b[T]=m[T])}if(A=A.defaultProps){b===m&&(b=w({},b));for(var Q in A)b[Q]===void 0&&(b[Q]=A[Q])}return b}var rd=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function Nf(A){rd(A)}function Gf(A){console.error(A)}function W0(A){rd(A)}function af(A,m){try{var b=A.onUncaughtError;b(m.value,{componentStack:m.stack})}catch(T){setTimeout(function(){throw T})}}function Jo(A,m,b){try{var T=A.onCaughtError;T(b.value,{componentStack:b.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(Q){setTimeout(function(){throw Q})}}function Bp(A,m,b){return b=ku(b),b.tag=3,b.payload={element:null},b.callback=function(){af(A,m)},b}function Th(A){return A=ku(A),A.tag=3,A}function Wf(A,m,b,T){var Q=b.type.getDerivedStateFromError;if(typeof Q=="function"){var se=T.value;A.payload=function(){return Q(se)},A.callback=function(){Jo(m,b,T)}}var Ge=b.stateNode;Ge!==null&&typeof Ge.componentDidCatch=="function"&&(A.callback=function(){Jo(m,b,T),typeof Q!="function"&&(hf===null?hf=new Set([this]):hf.add(this));var ot=T.stack;this.componentDidCatch(T.value,{componentStack:ot!==null?ot:""})})}function iA(A,m,b,T,Q){if(b.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){if(m=b.alternate,m!==null&&gs(m,b,Q,!0),b=tA.current,b!==null){switch(b.tag){case 13:return Ya===null?$0():b.alternate===null&&wl===0&&(wl=3),b.flags&=-257,b.flags|=65536,b.lanes=Q,T===GA?b.flags|=16384:(m=b.updateQueue,m===null?b.updateQueue=new Set([T]):m.add(T),Xg(A,T,Q)),!1;case 22:return b.flags|=65536,T===GA?b.flags|=16384:(m=b.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([T])},b.updateQueue=m):(b=m.retryQueue,b===null?m.retryQueue=new Set([T]):b.add(T)),Xg(A,T,Q)),!1}throw Error(i(435,b.tag))}return Xg(A,T,Q),$0(),!1}if(Zr)return m=tA.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=Q,T!==Jc&&(A=Error(i(422),{cause:T}),jA(Na(A,b)))):(T!==Jc&&(m=Error(i(423),{cause:T}),jA(Na(m,b))),A=A.current.alternate,A.flags|=65536,Q&=-Q,A.lanes|=Q,T=Na(T,b),Q=Bp(A.stateNode,T,Q),yA(A,Q),wl!==4&&(wl=2)),!1;var se=Error(i(520),{cause:T});if(se=Na(se,b),Zf===null?Zf=[se]:Zf.push(se),wl!==4&&(wl=2),m===null)return!0;T=Na(T,b),b=m;do{switch(b.tag){case 3:return b.flags|=65536,A=Q&-Q,b.lanes|=A,A=Bp(b.stateNode,T,A),yA(b,A),!1;case 1:if(m=b.type,se=b.stateNode,(b.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(hf===null||!hf.has(se))))return b.flags|=65536,Q&=-Q,b.lanes|=Q,Q=Th(Q),Wf(Q,A,b,T),yA(b,Q),!1}b=b.return}while(b!==null);return!1}var kd=Error(i(461)),Xs=!1;function cs(A,m,b,T){m.child=A===null?Uc(m,null,b,T):Hl(m,A.child,b,T)}function Qf(A,m,b,T,Q){b=b.render;var se=m.ref;if("ref"in T){var Ge={};for(var ot in T)ot!=="ref"&&(Ge[ot]=T[ot])}else Ge=T;return Sh(m),T=Ff(A,m,b,Ge,se,Q),ot=ed(),A!==null&&!Xs?(CA(A,m,Q),v(A,m,Q)):(Zr&&ot&&Zc(m),m.flags|=1,cs(A,m,T,Q),m.child)}function Op(A,m,b,T,Q){if(A===null){var se=b.type;return typeof se=="function"&&!Bc(se)&&se.defaultProps===void 0&&b.compare===null?(m.tag=15,m.type=se,Yf(A,m,se,T,Q)):(A=Ed(b.type,null,T,m,m.mode,Q),A.ref=m.ref,A.return=m,m.child=A)}if(se=A.child,!B(A,Q)){var Ge=se.memoizedProps;if(b=b.compare,b=b!==null?b:ac,b(Ge,T)&&A.ref===m.ref)return v(A,m,Q)}return m.flags|=1,A=Bs(se,T),A.ref=m.ref,A.return=m,m.child=A}function Yf(A,m,b,T,Q){if(A!==null){var se=A.memoizedProps;if(ac(se,T)&&A.ref===m.ref)if(Xs=!1,m.pendingProps=T=se,B(A,Q))(A.flags&131072)!==0&&(Xs=!0);else return m.lanes=A.lanes,v(A,m,Q)}return lf(A,m,b,T,Q)}function sf(A,m,b){var T=m.pendingProps,Q=T.children,se=A!==null?A.memoizedState:null;if(T.mode==="hidden"){if((m.flags&128)!==0){if(T=se!==null?se.baseLanes|b:b,A!==null){for(Q=m.child=A.child,se=0;Q!==null;)se=se|Q.lanes|Q.childLanes,Q=Q.sibling;m.childLanes=se&~T}else m.childLanes=0,m.child=null;return Dd(A,m,T,b)}if((b&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},A!==null&&Uf(m,se!==null?se.cachePool:null),se!==null?Wl(m,se):Xh(),zf(m);else return m.lanes=m.childLanes=536870912,Dd(A,m,se!==null?se.baseLanes|b:b,b)}else se!==null?(Uf(m,se.cachePool),Wl(m,se),xA(),m.memoizedState=null):(A!==null&&Uf(m,null),Xh(),xA());return cs(A,m,Q,b),m.child}function Dd(A,m,b,T){var Q=Ic();return Q=Q===null?null:{parent:ba._currentValue,pool:Q},m.memoizedState={baseLanes:b,cachePool:Q},A!==null&&Uf(m,null),Xh(),zf(m),A!==null&&gs(A,m,T,!0),null}function pr(A,m){var b=m.ref;if(b===null)A!==null&&A.ref!==null&&(m.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(i(284));(A===null||A.ref!==b)&&(m.flags|=4194816)}}function lf(A,m,b,T,Q){return Sh(m),b=Ff(A,m,b,T,void 0,Q),T=ed(),A!==null&&!Xs?(CA(A,m,Q),v(A,m,Q)):(Zr&&T&&Zc(m),m.flags|=1,cs(A,m,b,Q),m.child)}function ea(A,m,b,T,Q,se){return Sh(m),m.updateQueue=null,b=Uo(m,T,b,Q),Jh(A),T=ed(),A!==null&&!Xs?(CA(A,m,se),v(A,m,se)):(Zr&&T&&Zc(m),m.flags|=1,cs(A,m,b,se),m.child)}function kh(A,m,b,T,Q){if(Sh(m),m.stateNode===null){var se=kr,Ge=b.contextType;typeof Ge=="object"&&Ge!==null&&(se=Ro(Ge)),se=new b(T,se),m.memoizedState=se.state!==null&&se.state!==void 0?se.state:null,se.updater=jf,m.stateNode=se,se._reactInternals=m,se=m.stateNode,se.props=T,se.state=m.memoizedState,se.refs={},Bh(m),Ge=b.contextType,se.context=typeof Ge=="object"&&Ge!==null?Ro(Ge):kr,se.state=m.memoizedState,Ge=b.getDerivedStateFromProps,typeof Ge=="function"&&(id(m,b,Ge,T),se.state=m.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof se.getSnapshotBeforeUpdate=="function"||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(Ge=se.state,typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount(),Ge!==se.state&&jf.enqueueReplaceState(se,se.state,null),_l(m,T,se,Q),eA(),se.state=m.memoizedState),typeof se.componentDidMount=="function"&&(m.flags|=4194308),T=!0}else if(A===null){se=m.stateNode;var ot=m.memoizedProps,zt=fc(b,ot);se.props=zt;var hn=se.context,kn=b.contextType;Ge=kr,typeof kn=="object"&&kn!==null&&(Ge=Ro(kn));var Nn=b.getDerivedStateFromProps;kn=typeof Nn=="function"||typeof se.getSnapshotBeforeUpdate=="function",ot=m.pendingProps!==ot,kn||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(ot||hn!==Ge)&&pm(m,se,T,Ge),Nl=!1;var pn=m.memoizedState;se.state=pn,_l(m,T,se,Q),eA(),hn=m.memoizedState,ot||pn!==hn||Nl?(typeof Nn=="function"&&(id(m,b,Nn,T),hn=m.memoizedState),(zt=Nl||of(m,b,zt,T,pn,hn,Ge))?(kn||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(m.flags|=4194308)):(typeof se.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=T,m.memoizedState=hn),se.props=T,se.state=hn,se.context=Ge,T=zt):(typeof se.componentDidMount=="function"&&(m.flags|=4194308),T=!1)}else{se=m.stateNode,uc(A,m),Ge=m.memoizedProps,kn=fc(b,Ge),se.props=kn,Nn=m.pendingProps,pn=se.context,hn=b.contextType,zt=kr,typeof hn=="object"&&hn!==null&&(zt=Ro(hn)),ot=b.getDerivedStateFromProps,(hn=typeof ot=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Ge!==Nn||pn!==zt)&&pm(m,se,T,zt),Nl=!1,pn=m.memoizedState,se.state=pn,_l(m,T,se,Q),eA();var fn=m.memoizedState;Ge!==Nn||pn!==fn||Nl||A!==null&&A.dependencies!==null&&eh(A.dependencies)?(typeof ot=="function"&&(id(m,b,ot,T),fn=m.memoizedState),(kn=Nl||of(m,b,kn,T,pn,fn,zt)||A!==null&&A.dependencies!==null&&eh(A.dependencies))?(hn||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(T,fn,zt),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(T,fn,zt)),typeof se.componentDidUpdate=="function"&&(m.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof se.componentDidUpdate!="function"||Ge===A.memoizedProps&&pn===A.memoizedState||(m.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Ge===A.memoizedProps&&pn===A.memoizedState||(m.flags|=1024),m.memoizedProps=T,m.memoizedState=fn),se.props=T,se.state=fn,se.context=zt,T=kn):(typeof se.componentDidUpdate!="function"||Ge===A.memoizedProps&&pn===A.memoizedState||(m.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Ge===A.memoizedProps&&pn===A.memoizedState||(m.flags|=1024),T=!1)}return se=T,pr(A,m),T=(m.flags&128)!==0,se||T?(se=m.stateNode,b=T&&typeof b.getDerivedStateFromError!="function"?null:se.render(),m.flags|=1,A!==null&&T?(m.child=Hl(m,A.child,null,Q),m.child=Hl(m,null,b,Q)):cs(A,m,b,Q),m.memoizedState=se.state,A=m.child):A=v(A,m,Q),A}function mm(A,m,b,T){return zs(),m.flags|=256,cs(A,m,b,T),m.child}var VA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fu(A){return{baseLanes:A,cachePool:$h()}}function al(A,m,b){return A=A!==null?A.childLanes&~b:0,m&&(A|=sh),A}function gm(A,m,b){var T=m.pendingProps,Q=!1,se=(m.flags&128)!==0,Ge;if((Ge=se)||(Ge=A!==null&&A.memoizedState===null?!1:(Sa.current&2)!==0),Ge&&(Q=!0,m.flags&=-129),Ge=(m.flags&32)!==0,m.flags&=-33,A===null){if(Zr){if(Q?bA(m):xA(),Zr){var ot=_a,zt;if(zt=ot){e:{for(zt=ot,ot=Fs;zt.nodeType!==8;){if(!ot){ot=null;break e}if(zt=ld(zt.nextSibling),zt===null){ot=null;break e}}ot=zt}ot!==null?(m.memoizedState={dehydrated:ot,treeContext:Wo!==null?{id:sa,overflow:FA}:null,retryLane:536870912,hydrationErrors:null},zt=Xu(18,null,null,0),zt.stateNode=ot,zt.return=m,m.child=zt,va=m,_a=null,zt=!0):zt=!1}zt||mA(m)}if(ot=m.memoizedState,ot!==null&&(ot=ot.dehydrated,ot!==null))return rA(ot)?m.lanes=32:m.lanes=536870912,null;MA(m)}return ot=T.children,T=T.fallback,Q?(xA(),Q=m.mode,ot=qf({mode:"hidden",children:ot},Q),T=pA(T,Q,b,null),ot.return=m,T.return=m,ot.sibling=T,m.child=ot,Q=m.child,Q.memoizedState=fu(b),Q.childLanes=al(A,Ge,b),m.memoizedState=VA,T):(bA(m),js(m,ot))}if(zt=A.memoizedState,zt!==null&&(ot=zt.dehydrated,ot!==null)){if(se)m.flags&256?(bA(m),m.flags&=-257,m=o0(A,m,b)):m.memoizedState!==null?(xA(),m.child=A.child,m.flags|=128,m=null):(xA(),Q=T.fallback,ot=m.mode,T=qf({mode:"visible",children:T.children},ot),Q=pA(Q,ot,b,null),Q.flags|=2,T.return=m,Q.return=m,T.sibling=Q,m.child=T,Hl(m,A.child,null,b),T=m.child,T.memoizedState=fu(b),T.childLanes=al(A,Ge,b),m.memoizedState=VA,m=Q);else if(bA(m),rA(ot)){if(Ge=ot.nextSibling&&ot.nextSibling.dataset,Ge)var hn=Ge.dgst;Ge=hn,T=Error(i(419)),T.stack="",T.digest=Ge,jA({value:T,source:null,stack:null}),m=o0(A,m,b)}else if(Xs||gs(A,m,b,!1),Ge=(b&A.childLanes)!==0,Xs||Ge){if(Ge=Gs,Ge!==null&&(T=b&-b,T=(T&42)!==0?1:ii(T),T=(T&(Ge.suspendedLanes|b))!==0?0:T,T!==0&&T!==zt.retryLane))throw zt.retryLane=T,Bu(A,T),lh(Ge,A,T),kd;ot.data==="$?"||$0(),m=o0(A,m,b)}else ot.data==="$?"?(m.flags|=192,m.child=A.child,m=null):(A=zt.treeContext,_a=ld(ot.nextSibling),va=m,Zr=!0,lu=null,Fs=!1,A!==null&&(Iu[kl++]=sa,Iu[kl++]=FA,Iu[kl++]=Wo,sa=A.id,FA=A.overflow,Wo=m),m=js(m,T.children),m.flags|=4096);return m}return Q?(xA(),Q=T.fallback,ot=m.mode,zt=A.child,hn=zt.sibling,T=Bs(zt,{mode:"hidden",children:T.children}),T.subtreeFlags=zt.subtreeFlags&65011712,hn!==null?Q=Bs(hn,Q):(Q=pA(Q,ot,b,null),Q.flags|=2),Q.return=m,T.return=m,T.sibling=Q,m.child=T,T=Q,Q=m.child,ot=A.child.memoizedState,ot===null?ot=fu(b):(zt=ot.cachePool,zt!==null?(hn=ba._currentValue,zt=zt.parent!==hn?{parent:hn,pool:hn}:zt):zt=$h(),ot={baseLanes:ot.baseLanes|b,cachePool:zt}),Q.memoizedState=ot,Q.childLanes=al(A,Ge,b),m.memoizedState=VA,T):(bA(m),b=A.child,A=b.sibling,b=Bs(b,{mode:"visible",children:T.children}),b.return=m,b.sibling=null,A!==null&&(Ge=m.deletions,Ge===null?(m.deletions=[A],m.flags|=16):Ge.push(A)),m.child=b,m.memoizedState=null,b)}function js(A,m){return m=qf({mode:"visible",children:m},A.mode),m.return=A,A.child=m}function qf(A,m){return A=Xu(22,A,null,m),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function o0(A,m,b){return Hl(m,A.child,null,b),A=js(m,m.pendingProps.children),A.flags|=2,m.memoizedState=null,A}function a0(A,m,b){A.lanes|=m;var T=A.alternate;T!==null&&(T.lanes|=m),Zo(A.return,m,b)}function uf(A,m,b,T,Q){var se=A.memoizedState;se===null?A.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:T,tail:b,tailMode:Q}:(se.isBackwards=m,se.rendering=null,se.renderingStartTime=0,se.last=T,se.tail=b,se.tailMode=Q)}function d(A,m,b){var T=m.pendingProps,Q=T.revealOrder,se=T.tail;if(cs(A,m,T.children,b),T=Sa.current,(T&2)!==0)T=T&1|2,m.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=m.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&a0(A,b,m);else if(A.tag===19)a0(A,b,m);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break e;for(;A.sibling===null;){if(A.return===null||A.return===m)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}T&=1}switch(lt(Sa,T),Q){case"forwards":for(b=m.child,Q=null;b!==null;)A=b.alternate,A!==null&&nA(A)===null&&(Q=b),b=b.sibling;b=Q,b===null?(Q=m.child,m.child=null):(Q=b.sibling,b.sibling=null),uf(m,!1,Q,b,se);break;case"backwards":for(b=null,Q=m.child,m.child=null;Q!==null;){if(A=Q.alternate,A!==null&&nA(A)===null){m.child=Q;break}A=Q.sibling,Q.sibling=b,b=Q,Q=A}uf(m,!0,b,null,se);break;case"together":uf(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function v(A,m,b){if(A!==null&&(m.dependencies=A.dependencies),Pd|=m.lanes,(b&m.childLanes)===0)if(A!==null){if(gs(A,m,b,!1),(b&m.childLanes)===0)return null}else return null;if(A!==null&&m.child!==A.child)throw Error(i(153));if(m.child!==null){for(A=m.child,b=Bs(A,A.pendingProps),m.child=b,b.return=m;A.sibling!==null;)A=A.sibling,b=b.sibling=Bs(A,A.pendingProps),b.return=m;b.sibling=null}return m.child}function B(A,m){return(A.lanes&m)!==0?!0:(A=A.dependencies,!!(A!==null&&eh(A)))}function E(A,m,b){switch(m.tag){case 3:Fe(m,m.stateNode.containerInfo),$s(m,ba,A.memoizedState.cache),zs();break;case 27:case 5:Re(m);break;case 4:Fe(m,m.stateNode.containerInfo);break;case 10:$s(m,m.type,m.memoizedProps.value);break;case 13:var T=m.memoizedState;if(T!==null)return T.dehydrated!==null?(bA(m),m.flags|=128,null):(b&m.child.childLanes)!==0?gm(A,m,b):(bA(m),A=v(A,m,b),A!==null?A.sibling:null);bA(m);break;case 19:var Q=(A.flags&128)!==0;if(T=(b&m.childLanes)!==0,T||(gs(A,m,b,!1),T=(b&m.childLanes)!==0),Q){if(T)return d(A,m,b);m.flags|=128}if(Q=m.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),lt(Sa,Sa.current),T)break;return null;case 22:case 23:return m.lanes=0,sf(A,m,b);case 24:$s(m,ba,A.memoizedState.cache)}return v(A,m,b)}function F(A,m,b){if(A!==null)if(A.memoizedProps!==m.pendingProps)Xs=!0;else{if(!B(A,b)&&(m.flags&128)===0)return Xs=!1,E(A,m,b);Xs=(A.flags&131072)!==0}else Xs=!1,Zr&&(m.flags&1048576)!==0&&Oc(m,Hh,m.index);switch(m.lanes=0,m.tag){case 16:e:{A=m.pendingProps;var T=m.elementType,Q=T._init;if(T=Q(T._payload),m.type=T,typeof T=="function")Bc(T)?(A=fc(T,A),m.tag=1,m=kh(null,m,T,A,b)):(m.tag=0,m=lf(null,m,T,A,b));else{if(T!=null){if(Q=T.$$typeof,Q===ne){m.tag=11,m=Qf(null,m,T,A,b);break e}else if(Q===G){m.tag=14,m=Op(null,m,T,A,b);break e}}throw m=Ve(T)||T,Error(i(306,m,""))}}return m;case 0:return lf(A,m,m.type,m.pendingProps,b);case 1:return T=m.type,Q=fc(T,m.pendingProps),kh(A,m,T,Q,b);case 3:e:{if(Fe(m,m.stateNode.containerInfo),A===null)throw Error(i(387));T=m.pendingProps;var se=m.memoizedState;Q=se.element,uc(A,m),_l(m,T,null,b);var Ge=m.memoizedState;if(T=Ge.cache,$s(m,ba,T),T!==se.cache&&gr(m,[ba],b,!0),eA(),T=Ge.element,se.isDehydrated)if(se={element:T,isDehydrated:!1,cache:Ge.cache},m.updateQueue.baseState=se,m.memoizedState=se,m.flags&256){m=mm(A,m,T,b);break e}else if(T!==Q){Q=Na(Error(i(424)),m),jA(Q),m=mm(A,m,T,b);break e}else{switch(A=m.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(_a=ld(A.firstChild),va=m,Zr=!0,lu=null,Fs=!0,b=Uc(m,null,T,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(zs(),T===Q){m=v(A,m,b);break e}cs(A,m,T,b)}m=m.child}return m;case 26:return pr(A,m),A===null?(b=_0(m.type,null,m.pendingProps,null))?m.memoizedState=b:Zr||(b=m.type,A=m.pendingProps,T=op(St.current).createElement(b),T[hi]=m,T[ti]=A,el(T,b,A),Tr(T),m.stateNode=T):m.memoizedState=_0(m.type,A.memoizedProps,m.pendingProps,A.memoizedState),null;case 27:return Re(m),A===null&&Zr&&(T=m.stateNode=Pu(m.type,m.pendingProps,St.current),va=m,Fs=!0,Q=_a,Ah(m.type)?(l1=Q,_a=ld(T.firstChild)):_a=Q),cs(A,m,m.pendingProps.children,b),pr(A,m),A===null&&(m.flags|=4194304),m.child;case 5:return A===null&&Zr&&((Q=T=_a)&&(T=y0(T,m.type,m.pendingProps,Fs),T!==null?(m.stateNode=T,va=m,_a=ld(T.firstChild),Fs=!1,Q=!0):Q=!1),Q||mA(m)),Re(m),Q=m.type,se=m.pendingProps,Ge=A!==null?A.memoizedProps:null,T=se.children,sd(Q,se)?T=null:Ge!==null&&sd(Q,Ge)&&(m.flags|=32),m.memoizedState!==null&&(Q=Ff(A,m,Wa,null,null,b),Qt._currentValue=Q),pr(A,m),cs(A,m,T,b),m.child;case 6:return A===null&&Zr&&((A=b=_a)&&(b=Up(b,m.pendingProps,Fs),b!==null?(m.stateNode=b,va=m,_a=null,A=!0):A=!1),A||mA(m)),null;case 13:return gm(A,m,b);case 4:return Fe(m,m.stateNode.containerInfo),T=m.pendingProps,A===null?m.child=Hl(m,null,T,b):cs(A,m,T,b),m.child;case 11:return Qf(A,m,m.type,m.pendingProps,b);case 7:return cs(A,m,m.pendingProps,b),m.child;case 8:return cs(A,m,m.pendingProps.children,b),m.child;case 12:return cs(A,m,m.pendingProps.children,b),m.child;case 10:return T=m.pendingProps,$s(m,m.type,T.value),cs(A,m,T.children,b),m.child;case 9:return Q=m.type._context,T=m.pendingProps.children,Sh(m),Q=Ro(Q),T=T(Q),m.flags|=1,cs(A,m,T,b),m.child;case 14:return Op(A,m,m.type,m.pendingProps,b);case 15:return Yf(A,m,m.type,m.pendingProps,b);case 19:return d(A,m,b);case 31:return T=m.pendingProps,b=m.mode,T={mode:T.mode,children:T.children},A===null?(b=qf(T,b),b.ref=m.ref,m.child=b,b.return=m,m=b):(b=Bs(A.child,T),b.ref=m.ref,m.child=b,b.return=m,m=b),m;case 22:return sf(A,m,b);case 24:return Sh(m),T=Ro(ba),A===null?(Q=Ic(),Q===null&&(Q=Gs,se=Eh(),Q.pooledCache=se,se.refCount++,se!==null&&(Q.pooledCacheLanes|=b),Q=se),m.memoizedState={parent:T,cache:Q},Bh(m),$s(m,ba,Q)):((A.lanes&b)!==0&&(uc(A,m),_l(m,null,null,b),eA()),Q=A.memoizedState,se=m.memoizedState,Q.parent!==T?(Q={parent:T,cache:T},m.memoizedState=Q,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=Q),$s(m,ba,T)):(T=se.cache,$s(m,ba,T),T!==Q.cache&&gr(m,[ba],b,!0))),cs(A,m,m.pendingProps.children,b),m.child;case 29:throw m.pendingProps}throw Error(i(156,m.tag))}function Z(A){A.flags|=4}function fe(A,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!ie(m)){if(m=tA.current,m!==null&&((Yo&4194048)===Yo?Ya!==null:(Yo&62914560)!==Yo&&(Yo&536870912)===0||m!==Ya))throw gA=GA,Xr;A.flags|=8192}}function _e(A,m){m!==null&&(A.flags|=4),A.flags&16384&&(m=A.tag!==22?ht():536870912,A.lanes|=m,xm|=m)}function ke(A,m){if(!Zr)switch(A.tailMode){case"hidden":m=A.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?A.tail=null:b.sibling=null;break;case"collapsed":b=A.tail;for(var T=null;b!==null;)b.alternate!==null&&(T=b),b=b.sibling;T===null?m||A.tail===null?A.tail=null:A.tail.sibling=null:T.sibling=null}}function Le(A){var m=A.alternate!==null&&A.alternate.child===A.child,b=0,T=0;if(m)for(var Q=A.child;Q!==null;)b|=Q.lanes|Q.childLanes,T|=Q.subtreeFlags&65011712,T|=Q.flags&65011712,Q.return=A,Q=Q.sibling;else for(Q=A.child;Q!==null;)b|=Q.lanes|Q.childLanes,T|=Q.subtreeFlags,T|=Q.flags,Q.return=A,Q=Q.sibling;return A.subtreeFlags|=T,A.childLanes=b,m}function vt(A,m,b){var T=m.pendingProps;switch(Xc(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(m),null;case 1:return Le(m),null;case 3:return b=m.stateNode,T=null,A!==null&&(T=A.memoizedState.cache),m.memoizedState.cache!==T&&(m.flags|=2048),Ga(ba),Ke(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(A===null||A.child===null)&&(rl(m)?Z(m):A===null||A.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Xd())),Le(m),null;case 26:return b=m.memoizedState,A===null?(Z(m),b!==null?(Le(m),fe(m,b)):(Le(m),m.flags&=-16777217)):b?b!==A.memoizedState?(Z(m),Le(m),fe(m,b)):(Le(m),m.flags&=-16777217):(A.memoizedProps!==T&&Z(m),Le(m),m.flags&=-16777217),null;case 27:He(m),b=St.current;var Q=m.type;if(A!==null&&m.stateNode!=null)A.memoizedProps!==T&&Z(m);else{if(!T){if(m.stateNode===null)throw Error(i(166));return Le(m),null}A=kt.current,rl(m)?Zd(m):(A=Pu(Q,T,b),m.stateNode=A,Z(m))}return Le(m),null;case 5:if(He(m),b=m.type,A!==null&&m.stateNode!=null)A.memoizedProps!==T&&Z(m);else{if(!T){if(m.stateNode===null)throw Error(i(166));return Le(m),null}if(A=kt.current,rl(m))Zd(m);else{switch(Q=op(St.current),A){case 1:A=Q.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:A=Q.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":A=Q.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":A=Q.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":A=Q.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof T.is=="string"?Q.createElement("select",{is:T.is}):Q.createElement("select"),T.multiple?A.multiple=!0:T.size&&(A.size=T.size);break;default:A=typeof T.is=="string"?Q.createElement(b,{is:T.is}):Q.createElement(b)}}A[hi]=m,A[ti]=T;e:for(Q=m.child;Q!==null;){if(Q.tag===5||Q.tag===6)A.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===m)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===m)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}m.stateNode=A;e:switch(el(A,b,T),b){case"button":case"input":case"select":case"textarea":A=!!T.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&Z(m)}}return Le(m),m.flags&=-16777217,null;case 6:if(A&&m.stateNode!=null)A.memoizedProps!==T&&Z(m);else{if(typeof T!="string"&&m.stateNode===null)throw Error(i(166));if(A=St.current,rl(m)){if(A=m.stateNode,b=m.memoizedProps,T=null,Q=va,Q!==null)switch(Q.tag){case 27:case 5:T=Q.memoizedProps}A[hi]=m,A=!!(A.nodeValue===b||T!==null&&T.suppressHydrationWarning===!0||o1(A.nodeValue,b)),A||mA(m)}else A=op(A).createTextNode(T),A[hi]=m,m.stateNode=A}return Le(m),null;case 13:if(T=m.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(Q=rl(m),T!==null&&T.dehydrated!==null){if(A===null){if(!Q)throw Error(i(318));if(Q=m.memoizedState,Q=Q!==null?Q.dehydrated:null,!Q)throw Error(i(317));Q[hi]=m}else zs(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Le(m),Q=!1}else Q=Xd(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=Q),Q=!0;if(!Q)return m.flags&256?(MA(m),m):(MA(m),null)}if(MA(m),(m.flags&128)!==0)return m.lanes=b,m;if(b=T!==null,A=A!==null&&A.memoizedState!==null,b){T=m.child,Q=null,T.alternate!==null&&T.alternate.memoizedState!==null&&T.alternate.memoizedState.cachePool!==null&&(Q=T.alternate.memoizedState.cachePool.pool);var se=null;T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(se=T.memoizedState.cachePool.pool),se!==Q&&(T.flags|=2048)}return b!==A&&b&&(m.child.flags|=8192),_e(m,m.updateQueue),Le(m),null;case 4:return Ke(),A===null&&tg(m.stateNode.containerInfo),Le(m),null;case 10:return Ga(m.type),Le(m),null;case 19:if(tt(Sa),Q=m.memoizedState,Q===null)return Le(m),null;if(T=(m.flags&128)!==0,se=Q.rendering,se===null)if(T)ke(Q,!1);else{if(wl!==0||A!==null&&(A.flags&128)!==0)for(A=m.child;A!==null;){if(se=nA(A),se!==null){for(m.flags|=128,ke(Q,!1),A=se.updateQueue,m.updateQueue=A,_e(m,A),m.subtreeFlags=0,A=b,b=m.child;b!==null;)xh(b,A),b=b.sibling;return lt(Sa,Sa.current&1|2),m.child}A=A.sibling}Q.tail!==null&&on()>Mm&&(m.flags|=128,T=!0,ke(Q,!1),m.lanes=4194304)}else{if(!T)if(A=nA(se),A!==null){if(m.flags|=128,T=!0,A=A.updateQueue,m.updateQueue=A,_e(m,A),ke(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!se.alternate&&!Zr)return Le(m),null}else 2*on()-Q.renderingStartTime>Mm&&b!==536870912&&(m.flags|=128,T=!0,ke(Q,!1),m.lanes=4194304);Q.isBackwards?(se.sibling=m.child,m.child=se):(A=Q.last,A!==null?A.sibling=se:m.child=se,Q.last=se)}return Q.tail!==null?(m=Q.tail,Q.rendering=m,Q.tail=m.sibling,Q.renderingStartTime=on(),m.sibling=null,A=Sa.current,lt(Sa,T?A&1|2:A&1),m):(Le(m),null);case 22:case 23:return MA(m),Lf(),T=m.memoizedState!==null,A!==null?A.memoizedState!==null!==T&&(m.flags|=8192):T&&(m.flags|=8192),T?(b&536870912)!==0&&(m.flags&128)===0&&(Le(m),m.subtreeFlags&6&&(m.flags|=8192)):Le(m),b=m.updateQueue,b!==null&&_e(m,b.retryQueue),b=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),T=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==b&&(m.flags|=2048),A!==null&&tt(Cl),null;case 24:return b=null,A!==null&&(b=A.memoizedState.cache),m.memoizedState.cache!==b&&(m.flags|=2048),Ga(ba),Le(m),null;case 25:return null;case 30:return null}throw Error(i(156,m.tag))}function It(A,m){switch(Xc(m),m.tag){case 1:return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 3:return Ga(ba),Ke(),A=m.flags,(A&65536)!==0&&(A&128)===0?(m.flags=A&-65537|128,m):null;case 26:case 27:case 5:return He(m),null;case 13:if(MA(m),A=m.memoizedState,A!==null&&A.dehydrated!==null){if(m.alternate===null)throw Error(i(340));zs()}return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 19:return tt(Sa),null;case 4:return Ke(),null;case 10:return Ga(m.type),null;case 22:case 23:return MA(m),Lf(),A!==null&&tt(Cl),A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 24:return Ga(ba),null;case 25:return null;default:return null}}function Jt(A,m){switch(Xc(m),m.tag){case 3:Ga(ba),Ke();break;case 26:case 27:case 5:He(m);break;case 4:Ke();break;case 13:MA(m);break;case 19:tt(Sa);break;case 10:Ga(m.type);break;case 22:case 23:MA(m),Lf(),A!==null&&tt(Cl);break;case 24:Ga(ba)}}function Ht(A,m){try{var b=m.updateQueue,T=b!==null?b.lastEffect:null;if(T!==null){var Q=T.next;b=Q;do{if((b.tag&A)===A){T=void 0;var se=b.create,Ge=b.inst;T=se(),Ge.destroy=T}b=b.next}while(b!==Q)}}catch(ot){_s(m,m.return,ot)}}function _n(A,m,b){try{var T=m.updateQueue,Q=T!==null?T.lastEffect:null;if(Q!==null){var se=Q.next;T=se;do{if((T.tag&A)===A){var Ge=T.inst,ot=Ge.destroy;if(ot!==void 0){Ge.destroy=void 0,Q=m;var zt=b,hn=ot;try{hn()}catch(kn){_s(Q,zt,kn)}}}T=T.next}while(T!==se)}}catch(kn){_s(m,m.return,kn)}}function Rn(A){var m=A.updateQueue;if(m!==null){var b=A.stateNode;try{rf(m,b)}catch(T){_s(A,A.return,T)}}}function oi(A,m,b){b.props=fc(A.type,A.memoizedProps),b.state=A.memoizedState;try{b.componentWillUnmount()}catch(T){_s(A,m,T)}}function mi(A,m){try{var b=A.ref;if(b!==null){switch(A.tag){case 26:case 27:case 5:var T=A.stateNode;break;case 30:T=A.stateNode;break;default:T=A.stateNode}typeof b=="function"?A.refCleanup=b(T):b.current=T}}catch(Q){_s(A,m,Q)}}function Ci(A,m){var b=A.ref,T=A.refCleanup;if(b!==null)if(typeof T=="function")try{T()}catch(Q){_s(A,m,Q)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(Q){_s(A,m,Q)}else b.current=null}function gi(A){var m=A.type,b=A.memoizedProps,T=A.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":b.autoFocus&&T.focus();break e;case"img":b.src?T.src=b.src:b.srcSet&&(T.srcset=b.srcSet)}}catch(Q){_s(A,A.return,Q)}}function Di(A,m,b){try{var T=A.stateNode;Cy(T,A.type,b,m),T[ti]=m}catch(Q){_s(A,A.return,Q)}}function ar(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&Ah(A.type)||A.tag===4}function Yi(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||ar(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&Ah(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Jr(A,m,b){var T=A.tag;if(T===5||T===6)A=A.stateNode,m?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(A,m):(m=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,m.appendChild(A),b=b._reactRootContainer,b!=null||m.onclick!==null||(m.onclick=XA));else if(T!==4&&(T===27&&Ah(A.type)&&(b=A.stateNode,m=null),A=A.child,A!==null))for(Jr(A,m,b),A=A.sibling;A!==null;)Jr(A,m,b),A=A.sibling}function Mr(A,m,b){var T=A.tag;if(T===5||T===6)A=A.stateNode,m?b.insertBefore(A,m):b.appendChild(A);else if(T!==4&&(T===27&&Ah(A.type)&&(b=A.stateNode),A=A.child,A!==null))for(Mr(A,m,b),A=A.sibling;A!==null;)Mr(A,m,b),A=A.sibling}function rs(A){var m=A.stateNode,b=A.memoizedProps;try{for(var T=A.type,Q=m.attributes;Q.length;)m.removeAttributeNode(Q[0]);el(m,T,b),m[hi]=A,m[ti]=b}catch(se){_s(A,A.return,se)}}var ca=!1,qr=!1,vs=!1,Cs=typeof WeakSet=="function"?WeakSet:Set,ha=null;function Vl(A,m){if(A=A.containerInfo,Dh=di,A=_h(A),wd(A)){if("selectionStart"in A)var b={start:A.selectionStart,end:A.selectionEnd};else e:{b=(b=A.ownerDocument)&&b.defaultView||window;var T=b.getSelection&&b.getSelection();if(T&&T.rangeCount!==0){b=T.anchorNode;var Q=T.anchorOffset,se=T.focusNode;T=T.focusOffset;try{b.nodeType,se.nodeType}catch{b=null;break e}var Ge=0,ot=-1,zt=-1,hn=0,kn=0,Nn=A,pn=null;t:for(;;){for(var fn;Nn!==b||Q!==0&&Nn.nodeType!==3||(ot=Ge+Q),Nn!==se||T!==0&&Nn.nodeType!==3||(zt=Ge+T),Nn.nodeType===3&&(Ge+=Nn.nodeValue.length),(fn=Nn.firstChild)!==null;)pn=Nn,Nn=fn;for(;;){if(Nn===A)break t;if(pn===b&&++hn===Q&&(ot=Ge),pn===se&&++kn===T&&(zt=Ge),(fn=Nn.nextSibling)!==null)break;Nn=pn,pn=Nn.parentNode}Nn=fn}b=ot===-1||zt===-1?null:{start:ot,end:zt}}else b=null}b=b||{start:0,end:0}}else b=null;for(g0={focusedElem:A,selectionRange:b},di=!1,ha=m;ha!==null;)if(m=ha,A=m.child,(m.subtreeFlags&1024)!==0&&A!==null)A.return=m,ha=A;else for(;ha!==null;){switch(m=ha,se=m.alternate,A=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&se!==null){A=void 0,b=m,Q=se.memoizedProps,se=se.memoizedState,T=b.stateNode;try{var Kr=fc(b.type,Q,b.elementType===b.type);A=T.getSnapshotBeforeUpdate(Kr,se),T.__reactInternalSnapshotBeforeUpdate=A}catch(Ur){_s(b,b.return,Ur)}}break;case 3:if((A&1024)!==0){if(A=m.stateNode.containerInfo,b=A.nodeType,b===9)rg(A);else if(b===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":rg(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(i(163))}if(A=m.sibling,A!==null){A.return=m.return,ha=A;break}ha=m.return}}function Ts(A,m,b){var T=b.flags;switch(b.tag){case 0:case 11:case 15:$A(A,b),T&4&&Ht(5,b);break;case 1:if($A(A,b),T&4)if(A=b.stateNode,m===null)try{A.componentDidMount()}catch(Ge){_s(b,b.return,Ge)}else{var Q=fc(b.type,m.memoizedProps);m=m.memoizedState;try{A.componentDidUpdate(Q,m,A.__reactInternalSnapshotBeforeUpdate)}catch(Ge){_s(b,b.return,Ge)}}T&64&&Rn(b),T&512&&mi(b,b.return);break;case 3:if($A(A,b),T&64&&(A=b.updateQueue,A!==null)){if(m=null,b.child!==null)switch(b.child.tag){case 27:case 5:m=b.child.stateNode;break;case 1:m=b.child.stateNode}try{rf(A,m)}catch(Ge){_s(b,b.return,Ge)}}break;case 27:m===null&&T&4&&rs(b);case 26:case 5:$A(A,b),m===null&&T&4&&gi(b),T&512&&mi(b,b.return);break;case 12:$A(A,b);break;case 13:$A(A,b),T&4&&pu(A,b),T&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=J0.bind(null,b),Dm(A,b))));break;case 22:if(T=b.memoizedState!==null||ca,!T){m=m!==null&&m.memoizedState!==null||qr,Q=ca;var se=qr;ca=T,(qr=m)&&!se?Af(A,b,(b.subtreeFlags&8772)!==0):$A(A,b),ca=Q,qr=se}break;case 30:break;default:$A(A,b)}}function Ns(A){var m=A.alternate;m!==null&&(A.alternate=null,Ns(m)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(m=A.stateNode,m!==null&&Zn(m)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Or=null,Ea=!1;function $l(A,m,b){for(b=b.child;b!==null;)pc(A,m,b),b=b.sibling}function pc(A,m,b){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Kn,b)}catch{}switch(b.tag){case 26:qr||Ci(b,m),$l(A,m,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:qr||Ci(b,m);var T=Or,Q=Ea;Ah(b.type)&&(Or=b.stateNode,Ea=!1),$l(A,m,b),Fp(b.stateNode),Or=T,Ea=Q;break;case 5:qr||Ci(b,m);case 6:if(T=Or,Q=Ea,Or=null,$l(A,m,b),Or=T,Ea=Q,Or!==null)if(Ea)try{(Or.nodeType===9?Or.body:Or.nodeName==="HTML"?Or.ownerDocument.body:Or).removeChild(b.stateNode)}catch(se){_s(b,m,se)}else try{Or.removeChild(b.stateNode)}catch(se){_s(b,m,se)}break;case 18:Or!==null&&(Ea?(A=Or,Kp(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,b.stateNode),hl(A)):Kp(Or,b.stateNode));break;case 4:T=Or,Q=Ea,Or=b.stateNode.containerInfo,Ea=!0,$l(A,m,b),Or=T,Ea=Q;break;case 0:case 11:case 14:case 15:qr||_n(2,b,m),qr||_n(4,b,m),$l(A,m,b);break;case 1:qr||(Ci(b,m),T=b.stateNode,typeof T.componentWillUnmount=="function"&&oi(b,m,T)),$l(A,m,b);break;case 21:$l(A,m,b);break;case 22:qr=(T=qr)||b.memoizedState!==null,$l(A,m,b),qr=T;break;default:$l(A,m,b)}}function pu(A,m){if(m.memoizedState===null&&(A=m.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{hl(A)}catch(b){_s(m,m.return,b)}}function oh(A){switch(A.tag){case 13:case 19:var m=A.stateNode;return m===null&&(m=A.stateNode=new Cs),m;case 22:return A=A.stateNode,m=A._retryCache,m===null&&(m=A._retryCache=new Cs),m;default:throw Error(i(435,A.tag))}}function hs(A,m){var b=oh(A);m.forEach(function(T){var Q=aC.bind(null,A,T);b.has(T)||(b.add(T),T.then(Q,Q))})}function wA(A,m){var b=m.deletions;if(b!==null)for(var T=0;T<b.length;T++){var Q=b[T],se=A,Ge=m,ot=Ge;e:for(;ot!==null;){switch(ot.tag){case 27:if(Ah(ot.type)){Or=ot.stateNode,Ea=!1;break e}break;case 5:Or=ot.stateNode,Ea=!1;break e;case 3:case 4:Or=ot.stateNode.containerInfo,Ea=!0;break e}ot=ot.return}if(Or===null)throw Error(i(160));pc(se,Ge,Q),Or=null,Ea=!1,se=Q.alternate,se!==null&&(se.return=null),Q.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)mc(m,A),m=m.sibling}var Ml=null;function mc(A,m){var b=A.alternate,T=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:wA(m,A),sl(A),T&4&&(_n(3,A,A.return),Ht(3,A),_n(5,A,A.return));break;case 1:wA(m,A),sl(A),T&512&&(qr||b===null||Ci(b,b.return)),T&64&&ca&&(A=A.updateQueue,A!==null&&(T=A.callbacks,T!==null&&(b=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=b===null?T:b.concat(T))));break;case 26:var Q=Ml;if(wA(m,A),sl(A),T&512&&(qr||b===null||Ci(b,b.return)),T&4){var se=b!==null?b.memoizedState:null;if(T=A.memoizedState,b===null)if(T===null)if(A.stateNode===null){e:{T=A.type,b=A.memoizedProps,Q=Q.ownerDocument||Q;t:switch(T){case"title":se=Q.getElementsByTagName("title")[0],(!se||se[To]||se[hi]||se.namespaceURI==="http://www.w3.org/2000/svg"||se.hasAttribute("itemprop"))&&(se=Q.createElement(T),Q.head.insertBefore(se,Q.querySelector("head > title"))),el(se,T,b),se[hi]=A,Tr(se),T=se;break e;case"link":var Ge=P("link","href",Q).get(T+(b.href||""));if(Ge){for(var ot=0;ot<Ge.length;ot++)if(se=Ge[ot],se.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&se.getAttribute("rel")===(b.rel==null?null:b.rel)&&se.getAttribute("title")===(b.title==null?null:b.title)&&se.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){Ge.splice(ot,1);break t}}se=Q.createElement(T),el(se,T,b),Q.head.appendChild(se);break;case"meta":if(Ge=P("meta","content",Q).get(T+(b.content||""))){for(ot=0;ot<Ge.length;ot++)if(se=Ge[ot],se.getAttribute("content")===(b.content==null?null:""+b.content)&&se.getAttribute("name")===(b.name==null?null:b.name)&&se.getAttribute("property")===(b.property==null?null:b.property)&&se.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&se.getAttribute("charset")===(b.charSet==null?null:b.charSet)){Ge.splice(ot,1);break t}}se=Q.createElement(T),el(se,T,b),Q.head.appendChild(se);break;default:throw Error(i(468,T))}se[hi]=A,Tr(se),T=se}A.stateNode=T}else N(Q,A.type,A.stateNode);else A.stateNode=u(Q,T,A.memoizedProps);else se!==T?(se===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):se.count--,T===null?N(Q,A.type,A.stateNode):u(Q,T,A.memoizedProps)):T===null&&A.stateNode!==null&&Di(A,A.memoizedProps,b.memoizedProps)}break;case 27:wA(m,A),sl(A),T&512&&(qr||b===null||Ci(b,b.return)),b!==null&&T&4&&Di(A,A.memoizedProps,b.memoizedProps);break;case 5:if(wA(m,A),sl(A),T&512&&(qr||b===null||Ci(b,b.return)),A.flags&32){Q=A.stateNode;try{$o(Q,"")}catch(fn){_s(A,A.return,fn)}}T&4&&A.stateNode!=null&&(Q=A.memoizedProps,Di(A,Q,b!==null?b.memoizedProps:Q)),T&1024&&(vs=!0);break;case 6:if(wA(m,A),sl(A),T&4){if(A.stateNode===null)throw Error(i(162));T=A.memoizedProps,b=A.stateNode;try{b.nodeValue=T}catch(fn){_s(A,A.return,fn)}}break;case 3:if(R=null,Q=Ml,Ml=ro(m.containerInfo),wA(m,A),Ml=Q,sl(A),T&4&&b!==null&&b.memoizedState.isDehydrated)try{hl(m.containerInfo)}catch(fn){_s(A,A.return,fn)}vs&&(vs=!1,mu(A));break;case 4:T=Ml,Ml=ro(A.stateNode.containerInfo),wA(m,A),sl(A),Ml=T;break;case 12:wA(m,A),sl(A);break;case 13:wA(m,A),sl(A),A.child.flags&8192&&A.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Yg=on()),T&4&&(T=A.updateQueue,T!==null&&(A.updateQueue=null,hs(A,T)));break;case 22:Q=A.memoizedState!==null;var zt=b!==null&&b.memoizedState!==null,hn=ca,kn=qr;if(ca=hn||Q,qr=kn||zt,wA(m,A),qr=kn,ca=hn,sl(A),T&8192)e:for(m=A.stateNode,m._visibility=Q?m._visibility&-2:m._visibility|1,Q&&(b===null||zt||ca||qr||od(A)),b=null,m=A;;){if(m.tag===5||m.tag===26){if(b===null){zt=b=m;try{if(se=zt.stateNode,Q)Ge=se.style,typeof Ge.setProperty=="function"?Ge.setProperty("display","none","important"):Ge.display="none";else{ot=zt.stateNode;var Nn=zt.memoizedProps.style,pn=Nn!=null&&Nn.hasOwnProperty("display")?Nn.display:null;ot.style.display=pn==null||typeof pn=="boolean"?"":(""+pn).trim()}}catch(fn){_s(zt,zt.return,fn)}}}else if(m.tag===6){if(b===null){zt=m;try{zt.stateNode.nodeValue=Q?"":zt.memoizedProps}catch(fn){_s(zt,zt.return,fn)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===A)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break e;for(;m.sibling===null;){if(m.return===null||m.return===A)break e;b===m&&(b=null),m=m.return}b===m&&(b=null),m.sibling.return=m.return,m=m.sibling}T&4&&(T=A.updateQueue,T!==null&&(b=T.retryQueue,b!==null&&(T.retryQueue=null,hs(A,b))));break;case 19:wA(m,A),sl(A),T&4&&(T=A.updateQueue,T!==null&&(A.updateQueue=null,hs(A,T)));break;case 30:break;case 21:break;default:wA(m,A),sl(A)}}function sl(A){var m=A.flags;if(m&2){try{for(var b,T=A.return;T!==null;){if(ar(T)){b=T;break}T=T.return}if(b==null)throw Error(i(160));switch(b.tag){case 27:var Q=b.stateNode,se=Yi(A);Mr(A,se,Q);break;case 5:var Ge=b.stateNode;b.flags&32&&($o(Ge,""),b.flags&=-33);var ot=Yi(A);Mr(A,ot,Ge);break;case 3:case 4:var zt=b.stateNode.containerInfo,hn=Yi(A);Jr(A,hn,zt);break;default:throw Error(i(161))}}catch(kn){_s(A,A.return,kn)}A.flags&=-3}m&4096&&(A.flags&=-4097)}function mu(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var m=A;mu(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),A=A.sibling}}function $A(A,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)Ts(A,m.alternate,m),m=m.sibling}function od(A){for(A=A.child;A!==null;){var m=A;switch(m.tag){case 0:case 11:case 14:case 15:_n(4,m,m.return),od(m);break;case 1:Ci(m,m.return);var b=m.stateNode;typeof b.componentWillUnmount=="function"&&oi(m,m.return,b),od(m);break;case 27:Fp(m.stateNode);case 26:case 5:Ci(m,m.return),od(m);break;case 22:m.memoizedState===null&&od(m);break;case 30:od(m);break;default:od(m)}A=A.sibling}}function Af(A,m,b){for(b=b&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var T=m.alternate,Q=A,se=m,Ge=se.flags;switch(se.tag){case 0:case 11:case 15:Af(Q,se,b),Ht(4,se);break;case 1:if(Af(Q,se,b),T=se,Q=T.stateNode,typeof Q.componentDidMount=="function")try{Q.componentDidMount()}catch(hn){_s(T,T.return,hn)}if(T=se,Q=T.updateQueue,Q!==null){var ot=T.stateNode;try{var zt=Q.shared.hiddenCallbacks;if(zt!==null)for(Q.shared.hiddenCallbacks=null,Q=0;Q<zt.length;Q++)Ep(zt[Q],ot)}catch(hn){_s(T,T.return,hn)}}b&&Ge&64&&Rn(se),mi(se,se.return);break;case 27:rs(se);case 26:case 5:Af(Q,se,b),b&&T===null&&Ge&4&&gi(se),mi(se,se.return);break;case 12:Af(Q,se,b);break;case 13:Af(Q,se,b),b&&Ge&4&&pu(Q,se);break;case 22:se.memoizedState===null&&Af(Q,se,b),mi(se,se.return);break;case 30:break;default:Af(Q,se,b)}m=m.sibling}}function Ng(A,m){var b=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(b=A.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==b&&(A!=null&&A.refCount++,b!=null&&nh(b))}function Gg(A,m){A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&nh(A))}function Rd(A,m,b,T){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Ip(A,m,b,T),m=m.sibling}function Ip(A,m,b,T){var Q=m.flags;switch(m.tag){case 0:case 11:case 15:Rd(A,m,b,T),Q&2048&&Ht(9,m);break;case 1:Rd(A,m,b,T);break;case 3:Rd(A,m,b,T),Q&2048&&(A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&nh(A)));break;case 12:if(Q&2048){Rd(A,m,b,T),A=m.stateNode;try{var se=m.memoizedProps,Ge=se.id,ot=se.onPostCommit;typeof ot=="function"&&ot(Ge,m.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(zt){_s(m,m.return,zt)}}else Rd(A,m,b,T);break;case 13:Rd(A,m,b,T);break;case 23:break;case 22:se=m.stateNode,Ge=m.alternate,m.memoizedState!==null?se._visibility&2?Rd(A,m,b,T):s0(A,m):se._visibility&2?Rd(A,m,b,T):(se._visibility|=2,ym(A,m,b,T,(m.subtreeFlags&10256)!==0)),Q&2048&&Ng(Ge,m);break;case 24:Rd(A,m,b,T),Q&2048&&Gg(m.alternate,m);break;default:Rd(A,m,b,T)}}function ym(A,m,b,T,Q){for(Q=Q&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var se=A,Ge=m,ot=b,zt=T,hn=Ge.flags;switch(Ge.tag){case 0:case 11:case 15:ym(se,Ge,ot,zt,Q),Ht(8,Ge);break;case 23:break;case 22:var kn=Ge.stateNode;Ge.memoizedState!==null?kn._visibility&2?ym(se,Ge,ot,zt,Q):s0(se,Ge):(kn._visibility|=2,ym(se,Ge,ot,zt,Q)),Q&&hn&2048&&Ng(Ge.alternate,Ge);break;case 24:ym(se,Ge,ot,zt,Q),Q&&hn&2048&&Gg(Ge.alternate,Ge);break;default:ym(se,Ge,ot,zt,Q)}m=m.sibling}}function s0(A,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var b=A,T=m,Q=T.flags;switch(T.tag){case 22:s0(b,T),Q&2048&&Ng(T.alternate,T);break;case 24:s0(b,T),Q&2048&&Gg(T.alternate,T);break;default:s0(b,T)}m=m.sibling}}var SA=8192;function vm(A){if(A.subtreeFlags&SA)for(A=A.child;A!==null;)Wg(A),A=A.sibling}function Wg(A){switch(A.tag){case 26:vm(A),A.flags&SA&&A.memoizedState!==null&&Pe(Ml,A.memoizedState,A.memoizedProps);break;case 5:vm(A);break;case 3:case 4:var m=Ml;Ml=ro(A.stateNode.containerInfo),vm(A),Ml=m;break;case 22:A.memoizedState===null&&(m=A.alternate,m!==null&&m.memoizedState!==null?(m=SA,SA=16777216,vm(A),SA=m):vm(A));break;default:vm(A)}}function ry(A){var m=A.alternate;if(m!==null&&(A=m.child,A!==null)){m.child=null;do m=A.sibling,A.sibling=null,A=m;while(A!==null)}}function Hf(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var b=0;b<m.length;b++){var T=m[b];ha=T,oy(T,A)}ry(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)Cm(A),A=A.sibling}function Cm(A){switch(A.tag){case 0:case 11:case 15:Hf(A),A.flags&2048&&_n(9,A,A.return);break;case 3:Hf(A);break;case 12:Hf(A);break;case 22:var m=A.stateNode;A.memoizedState!==null&&m._visibility&2&&(A.return===null||A.return.tag!==13)?(m._visibility&=-3,_m(A)):Hf(A);break;default:Hf(A)}}function _m(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var b=0;b<m.length;b++){var T=m[b];ha=T,oy(T,A)}ry(A)}for(A=A.child;A!==null;){switch(m=A,m.tag){case 0:case 11:case 15:_n(8,m,m.return),_m(m);break;case 22:b=m.stateNode,b._visibility&2&&(b._visibility&=-3,_m(m));break;default:_m(m)}A=A.sibling}}function oy(A,m){for(;ha!==null;){var b=ha;switch(b.tag){case 0:case 11:case 15:_n(8,b,m);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var T=b.memoizedState.cachePool.pool;T!=null&&T.refCount++}break;case 24:nh(b.memoizedState.cache)}if(T=b.child,T!==null)T.return=b,ha=T;else e:for(b=A;ha!==null;){T=ha;var Q=T.sibling,se=T.return;if(Ns(T),T===b){ha=null;break e}if(Q!==null){Q.return=se,ha=Q;break e}ha=se}}}var iC={getCacheForType:function(A){var m=Ro(ba),b=m.data.get(A);return b===void 0&&(b=A(),m.data.set(A,b)),b}},Q0=typeof WeakMap=="function"?WeakMap:Map,os=0,Gs=null,ta=null,Yo=0,as=0,ah=null,Vf=!1,bm=!1,Qg=!1,cf=0,wl=0,Pd=0,$f=0,Y0=0,sh=0,xm=0,Zf=null,Lc=null,q0=!1,Yg=0,Mm=1/0,l0=null,hf=null,EA=0,Xf=null,Kd=null,Js=0,u0=0,H0=null,qg=null,Jf=0,ep=null;function BA(){if((os&2)!==0&&Yo!==0)return Yo&-Yo;if(ze.T!==null){var A=ol;return A!==0?A:km()}return qi()}function ay(){sh===0&&(sh=(Yo&536870912)===0||Zr?mt():536870912);var A=tA.current;return A!==null&&(A.flags|=32),sh}function lh(A,m,b){(A===Gs&&(as===2||as===9)||A.cancelPendingCommit!==null)&&(wm(A,0),tp(A,Yo,sh,!1)),it(A,b),((os&2)===0||A!==Gs)&&(A===Gs&&((os&2)===0&&($f|=b),wl===4&&tp(A,Yo,sh,!1)),uh(A))}function sy(A,m,b){if((os&6)!==0)throw Error(i(327));var T=!b&&(m&124)===0&&(m&A.expiredLanes)===0||Ze(A,m),Q=T?np(A,m):A0(A,m,!0),se=T;do{if(Q===0){bm&&!T&&tp(A,m,0,!1);break}else{if(b=A.current.alternate,se&&!rC(b)){Q=A0(A,m,!1),se=!1;continue}if(Q===2){if(se=m,A.errorRecoveryDisabledLanes&se)var Ge=0;else Ge=A.pendingLanes&-536870913,Ge=Ge!==0?Ge:Ge&536870912?536870912:0;if(Ge!==0){m=Ge;e:{var ot=A;Q=Zf;var zt=ot.current.memoizedState.isDehydrated;if(zt&&(wm(ot,Ge).flags|=256),Ge=A0(ot,Ge,!1),Ge!==2){if(Qg&&!zt){ot.errorRecoveryDisabledLanes|=se,$f|=se,Q=4;break e}se=Lc,Lc=Q,se!==null&&(Lc===null?Lc=se:Lc.push.apply(Lc,se))}Q=Ge}if(se=!1,Q!==2)continue}}if(Q===1){wm(A,0),tp(A,m,0,!0);break}e:{switch(T=A,se=Q,se){case 0:case 1:throw Error(i(345));case 4:if((m&4194048)!==m)break;case 6:tp(T,m,sh,!Vf);break e;case 2:Lc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((m&62914560)===m&&(Q=Yg+300-on(),10<Q)){if(tp(T,m,sh,!Vf),De(T,0,!0)!==0)break e;T.timeoutHandle=a1(ly.bind(null,T,b,Lc,l0,q0,m,sh,$f,xm,Vf,se,2,-0,0),Q);break e}ly(T,b,Lc,l0,q0,m,sh,$f,xm,Vf,se,0,-0,0)}}break}while(!0);uh(A)}function ly(A,m,b,T,Q,se,Ge,ot,zt,hn,kn,Nn,pn,fn){if(A.timeoutHandle=-1,Nn=m.subtreeFlags,(Nn&8192||(Nn&16785408)===16785408)&&(ue={stylesheets:null,count:0,unsuspend:ve},Wg(m),Nn=Qe(),Nn!==null)){A.cancelPendingCommit=Nn(Em.bind(null,A,m,se,b,T,Q,Ge,ot,zt,kn,1,pn,fn)),tp(A,se,Ge,!hn);return}Em(A,m,se,b,T,Q,Ge,ot,zt)}function rC(A){for(var m=A;;){var b=m.tag;if((b===0||b===11||b===15)&&m.flags&16384&&(b=m.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var T=0;T<b.length;T++){var Q=b[T],se=Q.getSnapshot;Q=Q.value;try{if(!xu(se(),Q))return!1}catch{return!1}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function tp(A,m,b,T){m&=~Y0,m&=~$f,A.suspendedLanes|=m,A.pingedLanes&=~m,T&&(A.warmLanes|=m),T=A.expirationTimes;for(var Q=m;0<Q;){var se=31-re(Q),Ge=1<<se;T[se]=-1,Q&=~Ge}b!==0&&Dn(A,b,m)}function V0(){return(os&6)===0?(Tp(0),!1):!0}function Hg(){if(ta!==null){if(as===0)var A=ta.return;else A=ta,rt=Ju=null,Dc(A),_o=null,Xo=0,A=ta;for(;A!==null;)Jt(A.alternate,A),A=A.return;ta=null}}function wm(A,m){var b=A.timeoutHandle;b!==-1&&(A.timeoutHandle=-1,by(b)),b=A.cancelPendingCommit,b!==null&&(A.cancelPendingCommit=null,b()),Hg(),Gs=A,ta=b=Bs(A.current,null),Yo=m,as=0,ah=null,Vf=!1,bm=Ze(A,m),Qg=!1,xm=sh=Y0=$f=Pd=wl=0,Lc=Zf=null,q0=!1,(m&8)!==0&&(m|=m&32);var T=A.entangledLanes;if(T!==0)for(A=A.entanglements,T&=m;0<T;){var Q=31-re(T),se=1<<Q;m|=A[Q],T&=~se}return cf=m,jl(),b}function uy(A,m){io=null,ze.H=bl,m===Ca||m===ci?(m=nf(),as=3):m===Xr?(m=nf(),as=4):as=m===kd?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,ah=m,ta===null&&(wl=1,af(A,Na(m,A.current)))}function Ay(){var A=ze.H;return ze.H=bl,A===null?bl:A}function cy(){var A=ze.A;return ze.A=iC,A}function $0(){wl=4,Vf||(Yo&4194048)!==Yo&&tA.current!==null||(bm=!0),(Pd&134217727)===0&&($f&134217727)===0||Gs===null||tp(Gs,Yo,sh,!1)}function A0(A,m,b){var T=os;os|=2;var Q=Ay(),se=cy();(Gs!==A||Yo!==m)&&(l0=null,wm(A,m)),m=!1;var Ge=wl;e:do try{if(as!==0&&ta!==null){var ot=ta,zt=ah;switch(as){case 8:Hg(),Ge=6;break e;case 3:case 2:case 9:case 6:tA.current===null&&(m=!0);var hn=as;if(as=0,ah=null,df(A,ot,zt,hn),b&&bm){Ge=0;break e}break;default:hn=as,as=0,ah=null,df(A,ot,zt,hn)}}hy(),Ge=wl;break}catch(kn){uy(A,kn)}while(!0);return m&&A.shellSuspendCounter++,rt=Ju=null,os=T,ze.H=Q,ze.A=se,ta===null&&(Gs=null,Yo=0,jl()),Ge}function hy(){for(;ta!==null;)ip(ta)}function np(A,m){var b=os;os|=2;var T=Ay(),Q=cy();Gs!==A||Yo!==m?(l0=null,Mm=on()+500,wm(A,m)):bm=Ze(A,m);e:do try{if(as!==0&&ta!==null){m=ta;var se=ah;t:switch(as){case 1:as=0,ah=null,df(A,m,se,1);break;case 2:case 9:if(WA(se)){as=0,ah=null,c0(m);break}m=function(){as!==2&&as!==9||Gs!==A||(as=7),uh(A)},se.then(m,m);break e;case 3:as=7;break e;case 4:as=5;break e;case 7:WA(se)?(as=0,ah=null,c0(m)):(as=0,ah=null,df(A,m,se,7));break;case 5:var Ge=null;switch(ta.tag){case 26:Ge=ta.memoizedState;case 5:case 27:var ot=ta;if(!Ge||ie(Ge)){as=0,ah=null;var zt=ot.sibling;if(zt!==null)ta=zt;else{var hn=ot.return;hn!==null?(ta=hn,Z0(hn)):ta=null}break t}}as=0,ah=null,df(A,m,se,5);break;case 6:as=0,ah=null,df(A,m,se,6);break;case 8:Hg(),wl=6;break e;default:throw Error(i(462))}}Sm();break}catch(kn){uy(A,kn)}while(!0);return rt=Ju=null,ze.H=T,ze.A=Q,os=b,ta!==null?0:(Gs=null,Yo=0,jl(),wl)}function Sm(){for(;ta!==null&&!qt();)ip(ta)}function ip(A){var m=F(A.alternate,A,cf);A.memoizedProps=A.pendingProps,m===null?Z0(A):ta=m}function c0(A){var m=A,b=m.alternate;switch(m.tag){case 15:case 0:m=ea(b,m,m.pendingProps,m.type,void 0,Yo);break;case 11:m=ea(b,m,m.pendingProps,m.type.render,m.ref,Yo);break;case 5:Dc(m);default:Jt(b,m),m=ta=xh(m,cf),m=F(b,m,cf)}A.memoizedProps=A.pendingProps,m===null?Z0(A):ta=m}function df(A,m,b,T){rt=Ju=null,Dc(m),_o=null,Xo=0;var Q=m.return;try{if(iA(A,Q,m,b,Yo)){wl=1,af(A,Na(b,A.current)),ta=null;return}}catch(se){if(Q!==null)throw ta=Q,se;wl=1,af(A,Na(b,A.current)),ta=null;return}m.flags&32768?(Zr||T===1?A=!0:bm||(Yo&536870912)!==0?A=!1:(Vf=A=!0,(T===2||T===9||T===3||T===6)&&(T=tA.current,T!==null&&T.tag===13&&(T.flags|=16384))),dy(m,A)):Z0(m)}function Z0(A){var m=A;do{if((m.flags&32768)!==0){dy(m,Vf);return}A=m.return;var b=vt(m.alternate,m,cf);if(b!==null){ta=b;return}if(m=m.sibling,m!==null){ta=m;return}ta=m=A}while(m!==null);wl===0&&(wl=5)}function dy(A,m){do{var b=It(A.alternate,A);if(b!==null){b.flags&=32767,ta=b;return}if(b=A.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!m&&(A=A.sibling,A!==null)){ta=A;return}ta=A=b}while(A!==null);wl=6,ta=null}function Em(A,m,b,T,Q,se,Ge,ot,zt){A.cancelPendingCommit=null;do Bm();while(EA!==0);if((os&6)!==0)throw Error(i(327));if(m!==null){if(m===A.current)throw Error(i(177));if(se=m.lanes|m.childLanes,se|=Zu,en(A,b,se,Ge,ot,zt),A===Gs&&(ta=Gs=null,Yo=0),Kd=m,Xf=A,Js=b,u0=se,H0=Q,qg=T,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,Jg(On,function(){return X0(),null})):(A.callbackNode=null,A.callbackPriority=0),T=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||T){T=ze.T,ze.T=null,Q=st.p,st.p=2,Ge=os,os|=4;try{Vl(A,m,b)}finally{os=Ge,st.p=Q,ze.T=T}}EA=1,Vg(),fy(),$g()}}function Vg(){if(EA===1){EA=0;var A=Xf,m=Kd,b=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||b){b=ze.T,ze.T=null;var T=st.p;st.p=2;var Q=os;os|=4;try{mc(m,A);var se=g0,Ge=_h(A.containerInfo),ot=se.focusedElem,zt=se.selectionRange;if(Ge!==ot&&ot&&ot.ownerDocument&&Bo(ot.ownerDocument.documentElement,ot)){if(zt!==null&&wd(ot)){var hn=zt.start,kn=zt.end;if(kn===void 0&&(kn=hn),"selectionStart"in ot)ot.selectionStart=hn,ot.selectionEnd=Math.min(kn,ot.value.length);else{var Nn=ot.ownerDocument||document,pn=Nn&&Nn.defaultView||window;if(pn.getSelection){var fn=pn.getSelection(),Kr=ot.textContent.length,Ur=Math.min(zt.start,Kr),xs=zt.end===void 0?Ur:Math.min(zt.end,Kr);!fn.extend&&Ur>xs&&(Ge=xs,xs=Ur,Ur=Ge);var tn=UA(ot,Ur),$t=UA(ot,xs);if(tn&&$t&&(fn.rangeCount!==1||fn.anchorNode!==tn.node||fn.anchorOffset!==tn.offset||fn.focusNode!==$t.node||fn.focusOffset!==$t.offset)){var An=Nn.createRange();An.setStart(tn.node,tn.offset),fn.removeAllRanges(),Ur>xs?(fn.addRange(An),fn.extend($t.node,$t.offset)):(An.setEnd($t.node,$t.offset),fn.addRange(An))}}}}for(Nn=[],fn=ot;fn=fn.parentNode;)fn.nodeType===1&&Nn.push({element:fn,left:fn.scrollLeft,top:fn.scrollTop});for(typeof ot.focus=="function"&&ot.focus(),ot=0;ot<Nn.length;ot++){var Ln=Nn[ot];Ln.element.scrollLeft=Ln.left,Ln.element.scrollTop=Ln.top}}di=!!Dh,g0=Dh=null}finally{os=Q,st.p=T,ze.T=b}}A.current=m,EA=2}}function fy(){if(EA===2){EA=0;var A=Xf,m=Kd,b=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||b){b=ze.T,ze.T=null;var T=st.p;st.p=2;var Q=os;os|=4;try{Ts(A,m.alternate,m)}finally{os=Q,st.p=T,ze.T=b}}EA=3}}function $g(){if(EA===4||EA===3){EA=0,Kt();var A=Xf,m=Kd,b=Js,T=qg;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?EA=5:(EA=0,Kd=Xf=null,Zg(A,A.pendingLanes));var Q=A.pendingLanes;if(Q===0&&(hf=null),Wn(b),m=m.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Kn,m,void 0,(m.current.flags&128)===128)}catch{}if(T!==null){m=ze.T,Q=st.p,st.p=2,ze.T=null;try{for(var se=A.onRecoverableError,Ge=0;Ge<T.length;Ge++){var ot=T[Ge];se(ot.value,{componentStack:ot.stack})}}finally{ze.T=m,st.p=Q}}(Js&3)!==0&&Bm(),uh(A),Q=A.pendingLanes,(b&4194090)!==0&&(Q&42)!==0?A===ep?Jf++:(Jf=0,ep=A):Jf=0,Tp(0)}}function Zg(A,m){(A.pooledCacheLanes&=m)===0&&(m=A.pooledCache,m!=null&&(A.pooledCache=null,nh(m)))}function Bm(A){return Vg(),fy(),$g(),X0()}function X0(){if(EA!==5)return!1;var A=Xf,m=u0;u0=0;var b=Wn(Js),T=ze.T,Q=st.p;try{st.p=32>b?32:b,ze.T=null,b=H0,H0=null;var se=Xf,Ge=Js;if(EA=0,Kd=Xf=null,Js=0,(os&6)!==0)throw Error(i(331));var ot=os;if(os|=4,Cm(se.current),Ip(se,se.current,Ge,b),os=ot,Tp(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Kn,se)}catch{}return!0}finally{st.p=Q,ze.T=T,Zg(A,m)}}function py(A,m,b){m=Na(b,m),m=Bp(A.stateNode,m,2),A=Ac(A,m,2),A!==null&&(it(A,2),uh(A))}function _s(A,m,b){if(A.tag===3)py(A,A,b);else for(;m!==null;){if(m.tag===3){py(m,A,b);break}else if(m.tag===1){var T=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(hf===null||!hf.has(T))){A=Na(b,A),b=Th(2),T=Ac(m,b,2),T!==null&&(Wf(b,T,m,A),it(T,2),uh(T));break}}m=m.return}}function Xg(A,m,b){var T=A.pingCache;if(T===null){T=A.pingCache=new Q0;var Q=new Set;T.set(m,Q)}else Q=T.get(m),Q===void 0&&(Q=new Set,T.set(m,Q));Q.has(b)||(Qg=!0,Q.add(b),A=oC.bind(null,A,m,b),m.then(A,A))}function oC(A,m,b){var T=A.pingCache;T!==null&&T.delete(m),A.pingedLanes|=A.suspendedLanes&b,A.warmLanes&=~b,Gs===A&&(Yo&b)===b&&(wl===4||wl===3&&(Yo&62914560)===Yo&&300>on()-Yg?(os&2)===0&&wm(A,0):Y0|=b,xm===Yo&&(xm=0)),uh(A)}function my(A,m){m===0&&(m=ht()),A=Bu(A,m),A!==null&&(it(A,m),uh(A))}function J0(A){var m=A.memoizedState,b=0;m!==null&&(b=m.retryLane),my(A,b)}function aC(A,m){var b=0;switch(A.tag){case 13:var T=A.stateNode,Q=A.memoizedState;Q!==null&&(b=Q.retryLane);break;case 19:T=A.stateNode;break;case 22:T=A.stateNode._retryCache;break;default:throw Error(i(314))}T!==null&&T.delete(m),my(A,b)}function Jg(A,m){return _t(A,m)}var Om=null,ZA=null,ad=!1,Im=!1,Tm=!1,rp=0;function uh(A){A!==ZA&&A.next===null&&(ZA===null?Om=ZA=A:ZA=ZA.next=A),Im=!0,ad||(ad=!0,eg())}function Tp(A,m){if(!Tm&&Im){Tm=!0;do for(var b=!1,T=Om;T!==null;){if(A!==0){var Q=T.pendingLanes;if(Q===0)var se=0;else{var Ge=T.suspendedLanes,ot=T.pingedLanes;se=(1<<31-re(42|A)+1)-1,se&=Q&~(Ge&~ot),se=se&201326741?se&201326741|1:se?se|2:0}se!==0&&(b=!0,e1(T,se))}else se=Yo,se=De(T,T===Gs?se:0,T.cancelPendingCommit!==null||T.timeoutHandle!==-1),(se&3)===0||Ze(T,se)||(b=!0,e1(T,se));T=T.next}while(b);Tm=!1}}function sC(){kp()}function kp(){Im=ad=!1;var A=0;rp!==0&&(_y()&&(A=rp),rp=0);for(var m=on(),b=null,T=Om;T!==null;){var Q=T.next,se=Dp(T,m);se===0?(T.next=null,b===null?Om=Q:b.next=Q,Q===null&&(ZA=b)):(b=T,(A!==0||(se&3)!==0)&&(Im=!0)),T=Q}Tp(A)}function Dp(A,m){for(var b=A.suspendedLanes,T=A.pingedLanes,Q=A.expirationTimes,se=A.pendingLanes&-62914561;0<se;){var Ge=31-re(se),ot=1<<Ge,zt=Q[Ge];zt===-1?((ot&b)===0||(ot&T)!==0)&&(Q[Ge]=g(ot,m)):zt<=m&&(A.expiredLanes|=ot),se&=~ot}if(m=Gs,b=Yo,b=De(A,A===m?b:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),T=A.callbackNode,b===0||A===m&&(as===2||as===9)||A.cancelPendingCommit!==null)return T!==null&&T!==null&&Ot(T),A.callbackNode=null,A.callbackPriority=0;if((b&3)===0||Ze(A,b)){if(m=b&-b,m===A.callbackPriority)return m;switch(T!==null&&Ot(T),Wn(b)){case 2:case 8:b=$n;break;case 32:b=On;break;case 268435456:b=In;break;default:b=On}return T=Rp.bind(null,A),b=_t(b,T),A.callbackPriority=m,A.callbackNode=b,m}return T!==null&&T!==null&&Ot(T),A.callbackPriority=2,A.callbackNode=null,2}function Rp(A,m){if(EA!==0&&EA!==5)return A.callbackNode=null,A.callbackPriority=0,null;var b=A.callbackNode;if(Bm()&&A.callbackNode!==b)return null;var T=Yo;return T=De(A,A===Gs?T:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),T===0?null:(sy(A,T,m),Dp(A,on()),A.callbackNode!=null&&A.callbackNode===b?Rp.bind(null,A):null)}function e1(A,m){if(Bm())return null;sy(A,m,!0)}function eg(){AC(function(){(os&6)!==0?_t(Wt,sC):kp()})}function km(){return rp===0&&(rp=mt()),rp}function t1(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:xr(""+A)}function h0(A,m){var b=m.ownerDocument.createElement("input");return b.name=m.name,b.value=m.value,A.id&&b.setAttribute("form",A.id),m.parentNode.insertBefore(b,m),A=new FormData(A),b.parentNode.removeChild(b),A}function gy(A,m,b,T,Q){if(m==="submit"&&b&&b.stateNode===Q){var se=t1((Q[ti]||null).action),Ge=T.submitter;Ge&&(m=(m=Ge[ti]||null)?t1(m.formAction):Ge.getAttribute("formAction"),m!==null&&(se=m,Ge=null));var ot=new Gt("action","action",null,T,Q);A.push({event:ot,listeners:[{instance:null,listener:function(){if(T.defaultPrevented){if(rp!==0){var zt=Ge?h0(Q,Ge):new FormData(Q);Aa(b,{pending:!0,data:zt,method:Q.method,action:se},null,zt)}}else typeof se=="function"&&(ot.preventDefault(),zt=Ge?h0(Q,Ge):new FormData(Q),Aa(b,{pending:!0,data:zt,method:Q.method,action:se},se,zt))},currentTarget:Q}]})}}for(var n1=0;n1<Go.length;n1++){var i1=Go[n1],yy=i1.toLowerCase(),lC=i1[0].toUpperCase()+i1.slice(1);fA(yy,"on"+lC)}fA(Vc,"onAnimationEnd"),fA($d,"onAnimationIteration"),fA(su,"onAnimationStart"),fA("dblclick","onDoubleClick"),fA("focusin","onFocus"),fA("focusout","onBlur"),fA(Sd,"onTransitionRun"),fA(dA,"onTransitionStart"),fA(wu,"onTransitionCancel"),fA(Su,"onTransitionEnd"),wo("onMouseEnter",["mouseout","mouseover"]),wo("onMouseLeave",["mouseout","mouseover"]),wo("onPointerEnter",["pointerout","pointerover"]),wo("onPointerLeave",["pointerout","pointerover"]),ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ka("onBeforeInput",["compositionend","keypress","textInput","paste"]),ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var d0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(d0));function vy(A,m){m=(m&4)!==0;for(var b=0;b<A.length;b++){var T=A[b],Q=T.event;T=T.listeners;e:{var se=void 0;if(m)for(var Ge=T.length-1;0<=Ge;Ge--){var ot=T[Ge],zt=ot.instance,hn=ot.currentTarget;if(ot=ot.listener,zt!==se&&Q.isPropagationStopped())break e;se=ot,Q.currentTarget=hn;try{se(Q)}catch(kn){rd(kn)}Q.currentTarget=null,se=zt}else for(Ge=0;Ge<T.length;Ge++){if(ot=T[Ge],zt=ot.instance,hn=ot.currentTarget,ot=ot.listener,zt!==se&&Q.isPropagationStopped())break e;se=ot,Q.currentTarget=hn;try{se(Q)}catch(kn){rd(kn)}Q.currentTarget=null,se=zt}}}}function na(A,m){var b=m[wn];b===void 0&&(b=m[wn]=new Set);var T=A+"__bubble";b.has(T)||(r1(m,A,2,!1),b.add(T))}function f0(A,m,b){var T=0;m&&(T|=4),r1(b,A,T,m)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function tg(A){if(!A[Zl]){A[Zl]=!0,ji.forEach(function(b){b!=="selectionchange"&&(uC.has(b)||f0(b,!1,A),f0(b,!0,A))});var m=A.nodeType===9?A:A.ownerDocument;m===null||m[Zl]||(m[Zl]=!0,f0("selectionchange",!1,m))}}function r1(A,m,b,T){switch(sr(m)){case 2:var Q=tr;break;case 8:Q=ui;break;default:Q=fi}b=Q.bind(null,m,b,A),Q=void 0,!ja||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(Q=!0),T?Q!==void 0?A.addEventListener(m,b,{capture:!0,passive:Q}):A.addEventListener(m,b,!0):Q!==void 0?A.addEventListener(m,b,{passive:Q}):A.addEventListener(m,b,!1)}function Ud(A,m,b,T,Q){var se=T;if((m&1)===0&&(m&2)===0&&T!==null)e:for(;;){if(T===null)return;var Ge=T.tag;if(Ge===3||Ge===4){var ot=T.stateNode.containerInfo;if(ot===Q)break;if(Ge===4)for(Ge=T.return;Ge!==null;){var zt=Ge.tag;if((zt===3||zt===4)&&Ge.stateNode.containerInfo===Q)return;Ge=Ge.return}for(;ot!==null;){if(Ge=lr(ot),Ge===null)return;if(zt=Ge.tag,zt===5||zt===6||zt===26||zt===27){T=se=Ge;continue e}ot=ot.parentNode}}T=T.return}aa(function(){var hn=se,kn=cA(b),Nn=[];e:{var pn=Tl.get(A);if(pn!==void 0){var fn=Gt,Kr=A;switch(A){case"keypress":if(wi(b)===0)break e;case"keydown":case"keyup":fn=jh;break;case"focusin":Kr="focus",fn=ho;break;case"focusout":Kr="blur",fn=ho;break;case"beforeblur":case"afterblur":fn=ho;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fn=to;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fn=Ar;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fn=dm;break;case Vc:case $d:case su:fn=jr;break;case Su:fn=Cd;break;case"scroll":case"scrollend":fn=Xn;break;case"wheel":fn=Tf;break;case"copy":case"cut":case"paste":fn=Ll;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fn=rc;break;case"toggle":case"beforetoggle":fn=Hu}var Ur=(m&4)!==0,xs=!Ur&&(A==="scroll"||A==="scrollend"),tn=Ur?pn!==null?pn+"Capture":null:pn;Ur=[];for(var $t=hn,An;$t!==null;){var Ln=$t;if(An=Ln.stateNode,Ln=Ln.tag,Ln!==5&&Ln!==26&&Ln!==27||An===null||tn===null||(Ln=Dr($t,tn),Ln!=null&&Ur.push(Hr($t,Ln,An))),xs)break;$t=$t.return}0<Ur.length&&(pn=new fn(pn,Kr,null,b,kn),Nn.push({event:pn,listeners:Ur}))}}if((m&7)===0){e:{if(pn=A==="mouseover"||A==="pointerover",fn=A==="mouseout"||A==="pointerout",pn&&b!==iu&&(Kr=b.relatedTarget||b.fromElement)&&(lr(Kr)||Kr[Wi]))break e;if((fn||pn)&&(pn=kn.window===kn?kn:(pn=kn.ownerDocument)?pn.defaultView||pn.parentWindow:window,fn?(Kr=b.relatedTarget||b.toElement,fn=hn,Kr=Kr?lr(Kr):null,Kr!==null&&(xs=a(Kr),Ur=Kr.tag,Kr!==xs||Ur!==5&&Ur!==27&&Ur!==6)&&(Kr=null)):(fn=null,Kr=hn),fn!==Kr)){if(Ur=to,Ln="onMouseLeave",tn="onMouseEnter",$t="mouse",(A==="pointerout"||A==="pointerover")&&(Ur=rc,Ln="onPointerLeave",tn="onPointerEnter",$t="pointer"),xs=fn==null?pn:vr(fn),An=Kr==null?pn:vr(Kr),pn=new Ur(Ln,$t+"leave",fn,b,kn),pn.target=xs,pn.relatedTarget=An,Ln=null,lr(kn)===hn&&(Ur=new Ur(tn,$t+"enter",Kr,b,kn),Ur.target=An,Ur.relatedTarget=xs,Ln=Ur),xs=Ln,fn&&Kr)t:{for(Ur=fn,tn=Kr,$t=0,An=Ur;An;An=Xl(An))$t++;for(An=0,Ln=tn;Ln;Ln=Xl(Ln))An++;for(;0<$t-An;)Ur=Xl(Ur),$t--;for(;0<An-$t;)tn=Xl(tn),An--;for(;$t--;){if(Ur===tn||tn!==null&&Ur===tn.alternate)break t;Ur=Xl(Ur),tn=Xl(tn)}Ur=null}else Ur=null;fn!==null&&Sl(Nn,pn,fn,Ur,!1),Kr!==null&&xs!==null&&Sl(Nn,xs,Kr,Ur,!0)}}e:{if(pn=hn?vr(hn):window,fn=pn.nodeName&&pn.nodeName.toLowerCase(),fn==="select"||fn==="input"&&pn.type==="file")var ir=KA;else if(Pf(pn))if(Vu)ir=Mp;else{ir=hA;var qo=Vd}else fn=pn.nodeName,!fn||fn.toLowerCase()!=="input"||pn.type!=="checkbox"&&pn.type!=="radio"?hn&&ga(hn.elementType)&&(ir=KA):ir=$u;if(ir&&(ir=ir(A,hn))){oc(Nn,ir,b,kn);break e}qo&&qo(A,pn,hn),A==="focusout"&&hn&&pn.type==="number"&&hn.memoizedProps.value!=null&&yl(pn,"number",pn.value)}switch(qo=hn?vr(hn):window,A){case"focusin":(Pf(qo)||qo.contentEditable==="true")&&(Sc=qo,zl=hn,Zt=null);break;case"focusout":Zt=zl=Sc=null;break;case"mousedown":Sn=!0;break;case"contextmenu":case"mouseup":case"dragend":Sn=!1,vn(Nn,b,kn);break;case"selectionchange":if(wp)break;case"keydown":case"keyup":vn(Nn,b,kn)}var nr;if(_d)e:{switch(A){case"compositionstart":var Ir="onCompositionStart";break e;case"compositionend":Ir="onCompositionEnd";break e;case"compositionupdate":Ir="onCompositionUpdate";break e}Ir=void 0}else Ch?Df(A,b)&&(Ir="onCompositionEnd"):A==="keydown"&&b.keyCode===229&&(Ir="onCompositionStart");Ir&&(Nh&&b.locale!=="ko"&&(Ch||Ir!=="onCompositionStart"?Ir==="onCompositionEnd"&&Ch&&(nr=Zi()):(ya=kn,Rr="value"in ya?ya.value:ya.textContent,Ch=!0)),qo=p0(hn,Ir),0<qo.length&&(Ir=new ps(Ir,A,null,b,kn),Nn.push({event:Ir,listeners:qo}),nr?Ir.data=nr:(nr=vh(b),nr!==null&&(Ir.data=nr)))),(nr=bd?Wh(A,b):Rf(A,b))&&(Ir=p0(hn,"onBeforeInput"),0<Ir.length&&(qo=new ps("onBeforeInput","beforeinput",null,b,kn),Nn.push({event:qo,listeners:Ir}),qo.data=nr)),gy(Nn,A,hn,b,kn)}vy(Nn,m)})}function Hr(A,m,b){return{instance:A,listener:m,currentTarget:b}}function p0(A,m){for(var b=m+"Capture",T=[];A!==null;){var Q=A,se=Q.stateNode;if(Q=Q.tag,Q!==5&&Q!==26&&Q!==27||se===null||(Q=Dr(A,b),Q!=null&&T.unshift(Hr(A,Q,se)),Q=Dr(A,m),Q!=null&&T.push(Hr(A,Q,se))),A.tag===3)return T;A=A.return}return[]}function Xl(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function Sl(A,m,b,T,Q){for(var se=m._reactName,Ge=[];b!==null&&b!==T;){var ot=b,zt=ot.alternate,hn=ot.stateNode;if(ot=ot.tag,zt!==null&&zt===T)break;ot!==5&&ot!==26&&ot!==27||hn===null||(zt=hn,Q?(hn=Dr(b,se),hn!=null&&Ge.unshift(Hr(b,hn,zt))):Q||(hn=Dr(b,se),hn!=null&&Ge.push(Hr(b,hn,zt)))),b=b.return}Ge.length!==0&&A.push({event:m,listeners:Ge})}var m0=/\r\n?/g,ff=/\u0000|\uFFFD/g;function ng(A){return(typeof A=="string"?A:""+A).replace(m0,`
`).replace(ff,"")}function o1(A,m){return m=ng(m),ng(A)===m}function XA(){}function Ba(A,m,b,T,Q,se){switch(b){case"children":typeof T=="string"?m==="body"||m==="textarea"&&T===""||$o(A,T):(typeof T=="number"||typeof T=="bigint")&&m!=="body"&&$o(A,""+T);break;case"className":Vi(A,"class",T);break;case"tabIndex":Vi(A,"tabindex",T);break;case"dir":case"role":case"viewBox":case"width":case"height":Vi(A,b,T);break;case"style":Kl(A,T,se);break;case"data":if(m!=="object"){Vi(A,"data",T);break}case"src":case"href":if(T===""&&(m!=="a"||b!=="href")){A.removeAttribute(b);break}if(T==null||typeof T=="function"||typeof T=="symbol"||typeof T=="boolean"){A.removeAttribute(b);break}T=xr(""+T),A.setAttribute(b,T);break;case"action":case"formAction":if(typeof T=="function"){A.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof se=="function"&&(b==="formAction"?(m!=="input"&&Ba(A,m,"name",Q.name,Q,null),Ba(A,m,"formEncType",Q.formEncType,Q,null),Ba(A,m,"formMethod",Q.formMethod,Q,null),Ba(A,m,"formTarget",Q.formTarget,Q,null)):(Ba(A,m,"encType",Q.encType,Q,null),Ba(A,m,"method",Q.method,Q,null),Ba(A,m,"target",Q.target,Q,null)));if(T==null||typeof T=="symbol"||typeof T=="boolean"){A.removeAttribute(b);break}T=xr(""+T),A.setAttribute(b,T);break;case"onClick":T!=null&&(A.onclick=XA);break;case"onScroll":T!=null&&na("scroll",A);break;case"onScrollEnd":T!=null&&na("scrollend",A);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(i(61));if(b=T.__html,b!=null){if(Q.children!=null)throw Error(i(60));A.innerHTML=b}}break;case"multiple":A.multiple=T&&typeof T!="function"&&typeof T!="symbol";break;case"muted":A.muted=T&&typeof T!="function"&&typeof T!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(T==null||typeof T=="function"||typeof T=="boolean"||typeof T=="symbol"){A.removeAttribute("xlink:href");break}b=xr(""+T),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":T!=null&&typeof T!="function"&&typeof T!="symbol"?A.setAttribute(b,""+T):A.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":T&&typeof T!="function"&&typeof T!="symbol"?A.setAttribute(b,""):A.removeAttribute(b);break;case"capture":case"download":T===!0?A.setAttribute(b,""):T!==!1&&T!=null&&typeof T!="function"&&typeof T!="symbol"?A.setAttribute(b,T):A.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":T!=null&&typeof T!="function"&&typeof T!="symbol"&&!isNaN(T)&&1<=T?A.setAttribute(b,T):A.removeAttribute(b);break;case"rowSpan":case"start":T==null||typeof T=="function"||typeof T=="symbol"||isNaN(T)?A.removeAttribute(b):A.setAttribute(b,T);break;case"popover":na("beforetoggle",A),na("toggle",A),Da(A,"popover",T);break;case"xlinkActuate":Mi(A,"http://www.w3.org/1999/xlink","xlink:actuate",T);break;case"xlinkArcrole":Mi(A,"http://www.w3.org/1999/xlink","xlink:arcrole",T);break;case"xlinkRole":Mi(A,"http://www.w3.org/1999/xlink","xlink:role",T);break;case"xlinkShow":Mi(A,"http://www.w3.org/1999/xlink","xlink:show",T);break;case"xlinkTitle":Mi(A,"http://www.w3.org/1999/xlink","xlink:title",T);break;case"xlinkType":Mi(A,"http://www.w3.org/1999/xlink","xlink:type",T);break;case"xmlBase":Mi(A,"http://www.w3.org/XML/1998/namespace","xml:base",T);break;case"xmlLang":Mi(A,"http://www.w3.org/XML/1998/namespace","xml:lang",T);break;case"xmlSpace":Mi(A,"http://www.w3.org/XML/1998/namespace","xml:space",T);break;case"is":Da(A,"is",T);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=Ul.get(b)||b,Da(A,b,T))}}function Pp(A,m,b,T,Q,se){switch(b){case"style":Kl(A,T,se);break;case"dangerouslySetInnerHTML":if(T!=null){if(typeof T!="object"||!("__html"in T))throw Error(i(61));if(b=T.__html,b!=null){if(Q.children!=null)throw Error(i(60));A.innerHTML=b}}break;case"children":typeof T=="string"?$o(A,T):(typeof T=="number"||typeof T=="bigint")&&$o(A,""+T);break;case"onScroll":T!=null&&na("scroll",A);break;case"onScrollEnd":T!=null&&na("scrollend",A);break;case"onClick":T!=null&&(A.onclick=XA);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gl.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(Q=b.endsWith("Capture"),m=b.slice(2,Q?b.length-7:void 0),se=A[ti]||null,se=se!=null?se[b]:null,typeof se=="function"&&A.removeEventListener(m,se,Q),typeof T=="function")){typeof se!="function"&&se!==null&&(b in A?A[b]=null:A.hasAttribute(b)&&A.removeAttribute(b)),A.addEventListener(m,T,Q);break e}b in A?A[b]=T:T===!0?A.setAttribute(b,""):Da(A,b,T)}}}function el(A,m,b){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":na("error",A),na("load",A);var T=!1,Q=!1,se;for(se in b)if(b.hasOwnProperty(se)){var Ge=b[se];if(Ge!=null)switch(se){case"src":T=!0;break;case"srcSet":Q=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Ba(A,m,se,Ge,b,null)}}Q&&Ba(A,m,"srcSet",b.srcSet,b,null),T&&Ba(A,m,"src",b.src,b,null);return;case"input":na("invalid",A);var ot=se=Ge=Q=null,zt=null,hn=null;for(T in b)if(b.hasOwnProperty(T)){var kn=b[T];if(kn!=null)switch(T){case"name":Q=kn;break;case"type":Ge=kn;break;case"checked":zt=kn;break;case"defaultChecked":hn=kn;break;case"value":se=kn;break;case"defaultValue":ot=kn;break;case"children":case"dangerouslySetInnerHTML":if(kn!=null)throw Error(i(137,m));break;default:Ba(A,m,T,kn,b,null)}}_u(A,se,ot,zt,hn,Ge,Q,!1),So(A);return;case"select":na("invalid",A),T=Ge=se=null;for(Q in b)if(b.hasOwnProperty(Q)&&(ot=b[Q],ot!=null))switch(Q){case"value":se=ot;break;case"defaultValue":Ge=ot;break;case"multiple":T=ot;default:Ba(A,m,Q,ot,b,null)}m=se,b=Ge,A.multiple=!!T,m!=null?Ss(A,!!T,m,!1):b!=null&&Ss(A,!!T,b,!0);return;case"textarea":na("invalid",A),se=Q=T=null;for(Ge in b)if(b.hasOwnProperty(Ge)&&(ot=b[Ge],ot!=null))switch(Ge){case"value":T=ot;break;case"defaultValue":Q=ot;break;case"children":se=ot;break;case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(91));break;default:Ba(A,m,Ge,ot,b,null)}Ys(A,T,Q,se),So(A);return;case"option":for(zt in b)if(b.hasOwnProperty(zt)&&(T=b[zt],T!=null))switch(zt){case"selected":A.selected=T&&typeof T!="function"&&typeof T!="symbol";break;default:Ba(A,m,zt,T,b,null)}return;case"dialog":na("beforetoggle",A),na("toggle",A),na("cancel",A),na("close",A);break;case"iframe":case"object":na("load",A);break;case"video":case"audio":for(T=0;T<d0.length;T++)na(d0[T],A);break;case"image":na("error",A),na("load",A);break;case"details":na("toggle",A);break;case"embed":case"source":case"link":na("error",A),na("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(hn in b)if(b.hasOwnProperty(hn)&&(T=b[hn],T!=null))switch(hn){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Ba(A,m,hn,T,b,null)}return;default:if(ga(m)){for(kn in b)b.hasOwnProperty(kn)&&(T=b[kn],T!==void 0&&Pp(A,m,kn,T,b,void 0));return}}for(ot in b)b.hasOwnProperty(ot)&&(T=b[ot],T!=null&&Ba(A,m,ot,T,b,null))}function Cy(A,m,b,T){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Q=null,se=null,Ge=null,ot=null,zt=null,hn=null,kn=null;for(fn in b){var Nn=b[fn];if(b.hasOwnProperty(fn)&&Nn!=null)switch(fn){case"checked":break;case"value":break;case"defaultValue":zt=Nn;default:T.hasOwnProperty(fn)||Ba(A,m,fn,null,T,Nn)}}for(var pn in T){var fn=T[pn];if(Nn=b[pn],T.hasOwnProperty(pn)&&(fn!=null||Nn!=null))switch(pn){case"type":se=fn;break;case"name":Q=fn;break;case"checked":hn=fn;break;case"defaultChecked":kn=fn;break;case"value":Ge=fn;break;case"defaultValue":ot=fn;break;case"children":case"dangerouslySetInnerHTML":if(fn!=null)throw Error(i(137,m));break;default:fn!==Nn&&Ba(A,m,pn,fn,T,Nn)}}RA(A,Ge,ot,zt,hn,kn,se,Q);return;case"select":fn=Ge=ot=pn=null;for(se in b)if(zt=b[se],b.hasOwnProperty(se)&&zt!=null)switch(se){case"value":break;case"multiple":fn=zt;default:T.hasOwnProperty(se)||Ba(A,m,se,null,T,zt)}for(Q in T)if(se=T[Q],zt=b[Q],T.hasOwnProperty(Q)&&(se!=null||zt!=null))switch(Q){case"value":pn=se;break;case"defaultValue":ot=se;break;case"multiple":Ge=se;default:se!==zt&&Ba(A,m,Q,se,T,zt)}m=ot,b=Ge,T=fn,pn!=null?Ss(A,!!b,pn,!1):!!T!=!!b&&(m!=null?Ss(A,!!b,m,!0):Ss(A,!!b,b?[]:"",!1));return;case"textarea":fn=pn=null;for(ot in b)if(Q=b[ot],b.hasOwnProperty(ot)&&Q!=null&&!T.hasOwnProperty(ot))switch(ot){case"value":break;case"children":break;default:Ba(A,m,ot,null,T,Q)}for(Ge in T)if(Q=T[Ge],se=b[Ge],T.hasOwnProperty(Ge)&&(Q!=null||se!=null))switch(Ge){case"value":pn=Q;break;case"defaultValue":fn=Q;break;case"children":break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(91));break;default:Q!==se&&Ba(A,m,Ge,Q,T,se)}xc(A,pn,fn);return;case"option":for(var Kr in b)if(pn=b[Kr],b.hasOwnProperty(Kr)&&pn!=null&&!T.hasOwnProperty(Kr))switch(Kr){case"selected":A.selected=!1;break;default:Ba(A,m,Kr,null,T,pn)}for(zt in T)if(pn=T[zt],fn=b[zt],T.hasOwnProperty(zt)&&pn!==fn&&(pn!=null||fn!=null))switch(zt){case"selected":A.selected=pn&&typeof pn!="function"&&typeof pn!="symbol";break;default:Ba(A,m,zt,pn,T,fn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ur in b)pn=b[Ur],b.hasOwnProperty(Ur)&&pn!=null&&!T.hasOwnProperty(Ur)&&Ba(A,m,Ur,null,T,pn);for(hn in T)if(pn=T[hn],fn=b[hn],T.hasOwnProperty(hn)&&pn!==fn&&(pn!=null||fn!=null))switch(hn){case"children":case"dangerouslySetInnerHTML":if(pn!=null)throw Error(i(137,m));break;default:Ba(A,m,hn,pn,T,fn)}return;default:if(ga(m)){for(var xs in b)pn=b[xs],b.hasOwnProperty(xs)&&pn!==void 0&&!T.hasOwnProperty(xs)&&Pp(A,m,xs,void 0,T,pn);for(kn in T)pn=T[kn],fn=b[kn],!T.hasOwnProperty(kn)||pn===fn||pn===void 0&&fn===void 0||Pp(A,m,kn,pn,T,fn);return}}for(var tn in b)pn=b[tn],b.hasOwnProperty(tn)&&pn!=null&&!T.hasOwnProperty(tn)&&Ba(A,m,tn,null,T,pn);for(Nn in T)pn=T[Nn],fn=b[Nn],!T.hasOwnProperty(Nn)||pn===fn||pn==null&&fn==null||Ba(A,m,Nn,pn,T,fn)}var Dh=null,g0=null;function op(A){return A.nodeType===9?A:A.ownerDocument}function ll(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ul(A,m){if(A===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&m==="foreignObject"?0:A}function sd(A,m){return A==="textarea"||A==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var ig=null;function _y(){var A=window.event;return A&&A.type==="popstate"?A===ig?!1:(ig=A,!0):(ig=null,!1)}var a1=typeof setTimeout=="function"?setTimeout:void 0,by=typeof clearTimeout=="function"?clearTimeout:void 0,xy=typeof Promise=="function"?Promise:void 0,AC=typeof queueMicrotask=="function"?queueMicrotask:typeof xy<"u"?function(A){return xy.resolve(null).then(A).catch(s1)}:a1;function s1(A){setTimeout(function(){throw A})}function Ah(A){return A==="head"}function Kp(A,m){var b=m,T=0,Q=0;do{var se=b.nextSibling;if(A.removeChild(b),se&&se.nodeType===8)if(b=se.data,b==="/$"){if(0<T&&8>T){b=T;var Ge=A.ownerDocument;if(b&1&&Fp(Ge.documentElement),b&2&&Fp(Ge.body),b&4)for(b=Ge.head,Fp(b),Ge=b.firstChild;Ge;){var ot=Ge.nextSibling,zt=Ge.nodeName;Ge[To]||zt==="SCRIPT"||zt==="STYLE"||zt==="LINK"&&Ge.rel.toLowerCase()==="stylesheet"||b.removeChild(Ge),Ge=ot}}if(Q===0){A.removeChild(se),hl(m);return}Q--}else b==="$"||b==="$?"||b==="$!"?Q++:T=b.charCodeAt(0)-48;else T=0;b=se}while(b);hl(m)}function rg(A){var m=A.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var b=m;switch(m=m.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":rg(b),Zn(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}A.removeChild(b)}}function y0(A,m,b,T){for(;A.nodeType===1;){var Q=b;if(A.nodeName.toLowerCase()!==m.toLowerCase()){if(!T&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(T){if(!A[To])switch(m){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(se=A.getAttribute("rel"),se==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(se!==Q.rel||A.getAttribute("href")!==(Q.href==null||Q.href===""?null:Q.href)||A.getAttribute("crossorigin")!==(Q.crossOrigin==null?null:Q.crossOrigin)||A.getAttribute("title")!==(Q.title==null?null:Q.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(se=A.getAttribute("src"),(se!==(Q.src==null?null:Q.src)||A.getAttribute("type")!==(Q.type==null?null:Q.type)||A.getAttribute("crossorigin")!==(Q.crossOrigin==null?null:Q.crossOrigin))&&se&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(m==="input"&&A.type==="hidden"){var se=Q.name==null?null:""+Q.name;if(Q.type==="hidden"&&A.getAttribute("name")===se)return A}else return A;if(A=ld(A.nextSibling),A===null)break}return null}function Up(A,m,b){if(m==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!b||(A=ld(A.nextSibling),A===null))return null;return A}function rA(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function Dm(A,m){var b=A.ownerDocument;if(A.data!=="$?"||b.readyState==="complete")m();else{var T=function(){m(),b.removeEventListener("DOMContentLoaded",T)};b.addEventListener("DOMContentLoaded",T),A._reactRetry=T}}function ld(A){for(;A!=null;A=A.nextSibling){var m=A.nodeType;if(m===1||m===3)break;if(m===8){if(m=A.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return A}var l1=null;function Lp(A){A=A.previousSibling;for(var m=0;A;){if(A.nodeType===8){var b=A.data;if(b==="$"||b==="$!"||b==="$?"){if(m===0)return A;m--}else b==="/$"&&m++}A=A.previousSibling}return null}function Pu(A,m,b){switch(m=op(b),A){case"html":if(A=m.documentElement,!A)throw Error(i(452));return A;case"head":if(A=m.head,!A)throw Error(i(453));return A;case"body":if(A=m.body,!A)throw Error(i(454));return A;default:throw Error(i(451))}}function Fp(A){for(var m=A.attributes;m.length;)A.removeAttributeNode(m[0]);Zn(A)}var Fc=new Map,ud=new Set;function ro(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Ld=st.d;st.d={f:ch,r:u1,D:A1,C:og,L:v0,m:C0,X:My,S:c1,M:h1};function ch(){var A=Ld.f(),m=V0();return A||m}function u1(A){var m=zi(A);m!==null&&m.tag===5&&m.type==="form"?Qo(m):Ld.r(A)}var Rm=typeof document>"u"?null:document;function Ka(A,m,b){var T=Rm;if(T&&typeof m=="string"&&m){var Q=Qi(m);Q='link[rel="'+A+'"][href="'+Q+'"]',typeof b=="string"&&(Q+='[crossorigin="'+b+'"]'),ud.has(Q)||(ud.add(Q),A={rel:A,crossOrigin:b,href:m},T.querySelector(Q)===null&&(m=T.createElement("link"),el(m,"link",A),Tr(m),T.head.appendChild(m)))}}function A1(A){Ld.D(A),Ka("dns-prefetch",A,null)}function og(A,m){Ld.C(A,m),Ka("preconnect",A,m)}function v0(A,m,b){Ld.L(A,m,b);var T=Rm;if(T&&A&&m){var Q='link[rel="preload"][as="'+Qi(m)+'"]';m==="image"&&b&&b.imageSrcSet?(Q+='[imagesrcset="'+Qi(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(Q+='[imagesizes="'+Qi(b.imageSizes)+'"]')):Q+='[href="'+Qi(A)+'"]';var se=Q;switch(m){case"style":se=Fd(A);break;case"script":se=Pm(A)}Fc.has(se)||(A=w({rel:"preload",href:m==="image"&&b&&b.imageSrcSet?void 0:A,as:m},b),Fc.set(se,A),T.querySelector(Q)!==null||m==="style"&&T.querySelector(zp(se))||m==="script"&&T.querySelector(h(se))||(m=T.createElement("link"),el(m,"link",A),Tr(m),T.head.appendChild(m)))}}function C0(A,m){Ld.m(A,m);var b=Rm;if(b&&A){var T=m&&typeof m.as=="string"?m.as:"script",Q='link[rel="modulepreload"][as="'+Qi(T)+'"][href="'+Qi(A)+'"]',se=Q;switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":se=Pm(A)}if(!Fc.has(se)&&(A=w({rel:"modulepreload",href:A},m),Fc.set(se,A),b.querySelector(Q)===null)){switch(T){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(h(se)))return}T=b.createElement("link"),el(T,"link",A),Tr(T),b.head.appendChild(T)}}}function c1(A,m,b){Ld.S(A,m,b);var T=Rm;if(T&&A){var Q=Fa(T).hoistableStyles,se=Fd(A);m=m||"default";var Ge=Q.get(se);if(!Ge){var ot={loading:0,preload:null};if(Ge=T.querySelector(zp(se)))ot.loading=5;else{A=w({rel:"stylesheet",href:A,"data-precedence":m},b),(b=Fc.get(se))&&y(A,b);var zt=Ge=T.createElement("link");Tr(zt),el(zt,"link",A),zt._p=new Promise(function(hn,kn){zt.onload=hn,zt.onerror=kn}),zt.addEventListener("load",function(){ot.loading|=1}),zt.addEventListener("error",function(){ot.loading|=2}),ot.loading|=4,c(Ge,m,T)}Ge={type:"stylesheet",instance:Ge,count:1,state:ot},Q.set(se,Ge)}}}function My(A,m){Ld.X(A,m);var b=Rm;if(b&&A){var T=Fa(b).hoistableScripts,Q=Pm(A),se=T.get(Q);se||(se=b.querySelector(h(Q)),se||(A=w({src:A,async:!0},m),(m=Fc.get(Q))&&M(A,m),se=b.createElement("script"),Tr(se),el(se,"link",A),b.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},T.set(Q,se))}}function h1(A,m){Ld.M(A,m);var b=Rm;if(b&&A){var T=Fa(b).hoistableScripts,Q=Pm(A),se=T.get(Q);se||(se=b.querySelector(h(Q)),se||(A=w({src:A,async:!0,type:"module"},m),(m=Fc.get(Q))&&M(A,m),se=b.createElement("script"),Tr(se),el(se,"link",A),b.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},T.set(Q,se))}}function _0(A,m,b,T){var Q=(Q=St.current)?ro(Q):null;if(!Q)throw Error(i(446));switch(A){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(m=Fd(b.href),b=Fa(Q).hoistableStyles,T=b.get(m),T||(T={type:"style",instance:null,count:0,state:null},b.set(m,T)),T):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){A=Fd(b.href);var se=Fa(Q).hoistableStyles,Ge=se.get(A);if(Ge||(Q=Q.ownerDocument||Q,Ge={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},se.set(A,Ge),(se=Q.querySelector(zp(A)))&&!se._p&&(Ge.instance=se,Ge.state.loading=5),Fc.has(A)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},Fc.set(A,b),se||d1(Q,A,b,Ge.state))),m&&T===null)throw Error(i(528,""));return Ge}if(m&&T!==null)throw Error(i(529,""));return null;case"script":return m=b.async,b=b.src,typeof b=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Pm(b),b=Fa(Q).hoistableScripts,T=b.get(m),T||(T={type:"script",instance:null,count:0,state:null},b.set(m,T)),T):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,A))}}function Fd(A){return'href="'+Qi(A)+'"'}function zp(A){return'link[rel="stylesheet"]['+A+"]"}function ag(A){return w({},A,{"data-precedence":A.precedence,precedence:null})}function d1(A,m,b,T){A.querySelector('link[rel="preload"][as="style"]['+m+"]")?T.loading=1:(m=A.createElement("link"),T.preload=m,m.addEventListener("load",function(){return T.loading|=1}),m.addEventListener("error",function(){return T.loading|=2}),el(m,"link",b),Tr(m),A.head.appendChild(m))}function Pm(A){return'[src="'+Qi(A)+'"]'}function h(A){return"script[async]"+A}function u(A,m,b){if(m.count++,m.instance===null)switch(m.type){case"style":var T=A.querySelector('style[data-href~="'+Qi(b.href)+'"]');if(T)return m.instance=T,Tr(T),T;var Q=w({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return T=(A.ownerDocument||A).createElement("style"),Tr(T),el(T,"style",Q),c(T,b.precedence,A),m.instance=T;case"stylesheet":Q=Fd(b.href);var se=A.querySelector(zp(Q));if(se)return m.state.loading|=4,m.instance=se,Tr(se),se;T=ag(b),(Q=Fc.get(Q))&&y(T,Q),se=(A.ownerDocument||A).createElement("link"),Tr(se);var Ge=se;return Ge._p=new Promise(function(ot,zt){Ge.onload=ot,Ge.onerror=zt}),el(se,"link",T),m.state.loading|=4,c(se,b.precedence,A),m.instance=se;case"script":return se=Pm(b.src),(Q=A.querySelector(h(se)))?(m.instance=Q,Tr(Q),Q):(T=b,(Q=Fc.get(se))&&(T=w({},b),M(T,Q)),A=A.ownerDocument||A,Q=A.createElement("script"),Tr(Q),el(Q,"link",T),A.head.appendChild(Q),m.instance=Q);case"void":return null;default:throw Error(i(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(T=m.instance,m.state.loading|=4,c(T,b.precedence,A));return m.instance}function c(A,m,b){for(var T=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Q=T.length?T[T.length-1]:null,se=Q,Ge=0;Ge<T.length;Ge++){var ot=T[Ge];if(ot.dataset.precedence===m)se=ot;else if(se!==Q)break}se?se.parentNode.insertBefore(A,se.nextSibling):(m=b.nodeType===9?b.head:b,m.insertBefore(A,m.firstChild))}function y(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.title==null&&(A.title=m.title)}function M(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.integrity==null&&(A.integrity=m.integrity)}var R=null;function P(A,m,b){if(R===null){var T=new Map,Q=R=new Map;Q.set(b,T)}else Q=R,T=Q.get(b),T||(T=new Map,Q.set(b,T));if(T.has(A))return T;for(T.set(A,null),b=b.getElementsByTagName(A),Q=0;Q<b.length;Q++){var se=b[Q];if(!(se[To]||se[hi]||A==="link"&&se.getAttribute("rel")==="stylesheet")&&se.namespaceURI!=="http://www.w3.org/2000/svg"){var Ge=se.getAttribute(m)||"";Ge=A+Ge;var ot=T.get(Ge);ot?ot.push(se):T.set(Ge,[se])}}return T}function N(A,m,b){A=A.ownerDocument||A,A.head.insertBefore(b,m==="title"?A.querySelector("head > title"):null)}function H(A,m,b){if(b===1||m.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return A=m.disabled,typeof m.precedence=="string"&&A==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function ie(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var ue=null;function ve(){}function Pe(A,m,b){if(ue===null)throw Error(i(475));var T=ue;if(m.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var Q=Fd(b.href),se=A.querySelector(zp(Q));if(se){A=se._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(T.count++,T=qe.bind(T),A.then(T,T)),m.state.loading|=4,m.instance=se,Tr(se);return}se=A.ownerDocument||A,b=ag(b),(Q=Fc.get(Q))&&y(b,Q),se=se.createElement("link"),Tr(se);var Ge=se;Ge._p=new Promise(function(ot,zt){Ge.onload=ot,Ge.onerror=zt}),el(se,"link",b),m.instance=se}T.stylesheets===null&&(T.stylesheets=new Map),T.stylesheets.set(m,A),(A=m.state.preload)&&(m.state.loading&3)===0&&(T.count++,m=qe.bind(T),A.addEventListener("load",m),A.addEventListener("error",m))}}function Qe(){if(ue===null)throw Error(i(475));var A=ue;return A.stylesheets&&A.count===0&&At(A,A.stylesheets),0<A.count?function(m){var b=setTimeout(function(){if(A.stylesheets&&At(A,A.stylesheets),A.unsuspend){var T=A.unsuspend;A.unsuspend=null,T()}},6e4);return A.unsuspend=m,function(){A.unsuspend=null,clearTimeout(b)}}:null}function qe(){if(this.count--,this.count===0){if(this.stylesheets)At(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var et=null;function At(A,m){A.stylesheets=null,A.unsuspend!==null&&(A.count++,et=new Map,m.forEach(Mt,A),et=null,qe.call(A))}function Mt(A,m){if(!(m.state.loading&4)){var b=et.get(A);if(b)var T=b.get(null);else{b=new Map,et.set(A,b);for(var Q=A.querySelectorAll("link[data-precedence],style[data-precedence]"),se=0;se<Q.length;se++){var Ge=Q[se];(Ge.nodeName==="LINK"||Ge.getAttribute("media")!=="not all")&&(b.set(Ge.dataset.precedence,Ge),T=Ge)}T&&b.set(null,T)}Q=m.instance,Ge=Q.getAttribute("data-precedence"),se=b.get(Ge)||T,se===T&&b.set(null,Q),b.set(Ge,Q),this.count++,T=qe.bind(this),Q.addEventListener("load",T),Q.addEventListener("error",T),se?se.parentNode.insertBefore(Q,se.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(Q,A.firstChild)),m.state.loading|=4}}var Qt={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Ct,_currentValue2:Ct,_threadCount:0};function Dt(A,m,b,T,Q,se,Ge,ot){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=T,this.onUncaughtError=Q,this.onCaughtError=se,this.onRecoverableError=Ge,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ot,this.incompleteTransitions=new Map}function jt(A,m,b,T,Q,se,Ge,ot,zt,hn,kn,Nn){return A=new Dt(A,m,b,Ge,ot,zt,hn,Nn),m=1,se===!0&&(m|=24),se=Xu(3,null,null,m),A.current=se,se.stateNode=A,m=Eh(),m.refCount++,A.pooledCache=m,m.refCount++,se.memoizedState={element:T,isDehydrated:b,cache:m},Bh(se),A}function ln(A){return A?(A=kr,A):kr}function Cn(A,m,b,T,Q,se){Q=ln(Q),T.context===null?T.context=Q:T.pendingContext=Q,T=ku(m),T.payload={element:b},se=se===void 0?null:se,se!==null&&(T.callback=se),b=Ac(A,T,m),b!==null&&(lh(b,A,m),Oh(b,A,m))}function Un(A,m){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var b=A.retryLane;A.retryLane=b!==0&&b<m?b:m}}function pi(A,m){Un(A,m),(A=A.alternate)&&Un(A,m)}function ai(A){if(A.tag===13){var m=Bu(A,67108864);m!==null&&lh(m,A,67108864),pi(A,67108864)}}var di=!0;function tr(A,m,b,T){var Q=ze.T;ze.T=null;var se=st.p;try{st.p=2,fi(A,m,b,T)}finally{st.p=se,ze.T=Q}}function ui(A,m,b,T){var Q=ze.T;ze.T=null;var se=st.p;try{st.p=8,fi(A,m,b,T)}finally{st.p=se,ze.T=Q}}function fi(A,m,b,T){if(di){var Q=En(T);if(Q===null)Ud(A,m,T,fr,b),ks(A,T);else if(Uu(Q,A,m,b,T))T.stopPropagation();else if(ks(A,T),m&4&&-1<Ku.indexOf(A)){for(;Q!==null;){var se=zi(Q);if(se!==null)switch(se.tag){case 3:if(se=se.stateNode,se.current.memoizedState.isDehydrated){var Ge=Ye(se.pendingLanes);if(Ge!==0){var ot=se;for(ot.pendingLanes|=2,ot.entangledLanes|=2;Ge;){var zt=1<<31-re(Ge);ot.entanglements[1]|=zt,Ge&=~zt}uh(se),(os&6)===0&&(Mm=on()+500,Tp(0))}}break;case 13:ot=Bu(se,2),ot!==null&&lh(ot,se,2),V0(),pi(se,2)}if(se=En(T),se===null&&Ud(A,m,T,fr,b),se===Q)break;Q=se}Q!==null&&T.stopPropagation()}else Ud(A,m,T,null,b)}}function En(A){return A=cA(A),Er(A)}var fr=null;function Er(A){if(fr=null,A=lr(A),A!==null){var m=a(A);if(m===null)A=null;else{var b=m.tag;if(b===13){if(A=l(m),A!==null)return A;A=null}else if(b===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;A=null}else m!==A&&(A=null)}}return fr=A,null}function sr(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jn()){case Wt:return 2;case $n:return 8;case On:case Bn:return 32;case In:return 268435456;default:return 32}default:return 32}}var Ui=!1,Gr=null,Ua=null,bs=null,Dl=new Map,OA=new Map,Rl=[],Ku="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ks(A,m){switch(A){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Dl.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":OA.delete(m.pointerId)}}function Al(A,m,b,T,Q,se){return A===null||A.nativeEvent!==se?(A={blockedOn:m,domEventName:b,eventSystemFlags:T,nativeEvent:se,targetContainers:[Q]},m!==null&&(m=zi(m),m!==null&&ai(m)),A):(A.eventSystemFlags|=T,m=A.targetContainers,Q!==null&&m.indexOf(Q)===-1&&m.push(Q),A)}function Uu(A,m,b,T,Q){switch(m){case"focusin":return Gr=Al(Gr,A,m,b,T,Q),!0;case"dragenter":return Ua=Al(Ua,A,m,b,T,Q),!0;case"mouseover":return bs=Al(bs,A,m,b,T,Q),!0;case"pointerover":var se=Q.pointerId;return Dl.set(se,Al(Dl.get(se)||null,A,m,b,T,Q)),!0;case"gotpointercapture":return se=Q.pointerId,OA.set(se,Al(OA.get(se)||null,A,m,b,T,Q)),!0}return!1}function gu(A){var m=lr(A.target);if(m!==null){var b=a(m);if(b!==null){if(m=b.tag,m===13){if(m=l(b),m!==null){A.blockedOn=m,er(A.priority,function(){if(b.tag===13){var T=BA();T=ii(T);var Q=Bu(b,T);Q!==null&&lh(Q,b,T),pi(b,T)}});return}}else if(m===3&&b.stateNode.current.memoizedState.isDehydrated){A.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}A.blockedOn=null}function Lu(A){if(A.blockedOn!==null)return!1;for(var m=A.targetContainers;0<m.length;){var b=En(A.nativeEvent);if(b===null){b=A.nativeEvent;var T=new b.constructor(b.type,b);iu=T,b.target.dispatchEvent(T),iu=null}else return m=zi(b),m!==null&&ai(m),A.blockedOn=b,!1;m.shift()}return!0}function zc(A,m,b){Lu(A)&&b.delete(m)}function yu(){Ui=!1,Gr!==null&&Lu(Gr)&&(Gr=null),Ua!==null&&Lu(Ua)&&(Ua=null),bs!==null&&Lu(bs)&&(bs=null),Dl.forEach(zc),OA.forEach(zc)}function oA(A,m){A.blockedOn===m&&(A.blockedOn=null,Ui||(Ui=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,yu)))}var cl=null;function Jl(A){cl!==A&&(cl=A,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cl===A&&(cl=null);for(var m=0;m<A.length;m+=3){var b=A[m],T=A[m+1],Q=A[m+2];if(typeof T!="function"){if(Er(T||b)===null)continue;break}var se=zi(b);se!==null&&(A.splice(m,3),m-=3,Aa(se,{pending:!0,data:Q,method:b.method,action:T},T,Q))}}))}function hl(A){function m(zt){return oA(zt,A)}Gr!==null&&oA(Gr,A),Ua!==null&&oA(Ua,A),bs!==null&&oA(bs,A),Dl.forEach(m),OA.forEach(m);for(var b=0;b<Rl.length;b++){var T=Rl[b];T.blockedOn===A&&(T.blockedOn=null)}for(;0<Rl.length&&(b=Rl[0],b.blockedOn===null);)gu(b),b.blockedOn===null&&Rl.shift();if(b=(A.ownerDocument||A).$$reactFormReplay,b!=null)for(T=0;T<b.length;T+=3){var Q=b[T],se=b[T+1],Ge=Q[ti]||null;if(typeof se=="function")Ge||Jl(b);else if(Ge){var ot=null;if(se&&se.hasAttribute("formAction")){if(Q=se,Ge=se[ti]||null)ot=Ge.formAction;else if(Er(Q)!==null)continue}else ot=Ge.action;typeof ot=="function"?b[T+1]=ot:(b.splice(T,3),T-=3),Jl(b)}}}function dl(A){this._internalRoot=A}qa.prototype.render=dl.prototype.render=function(A){var m=this._internalRoot;if(m===null)throw Error(i(409));var b=m.current,T=BA();Cn(b,T,A,m,null,null)},qa.prototype.unmount=dl.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var m=A.containerInfo;Cn(A.current,2,null,A,null,null),V0(),m[Wi]=null}};function qa(A){this._internalRoot=A}qa.prototype.unstable_scheduleHydration=function(A){if(A){var m=qi();A={blockedOn:null,target:A,priority:m};for(var b=0;b<Rl.length&&m!==0&&m<Rl[b].priority;b++);Rl.splice(b,0,A),b===0&&gu(A)}};var Rh=e.version;if(Rh!=="19.1.1")throw Error(i(527,Rh,"19.1.1"));st.findDOMNode=function(A){var m=A._reactInternals;if(m===void 0)throw typeof A.render=="function"?Error(i(188)):(A=Object.keys(A).join(","),Error(i(268,A)));return A=p(m),A=A!==null?C(A):null,A=A===null?null:A.stateNode,A};var Km={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ze,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{Kn=jc.inject(Km),je=jc}catch{}}return dC.createRoot=function(A,m){if(!r(A))throw Error(i(299));var b=!1,T="",Q=Nf,se=Gf,Ge=W0,ot=null;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onUncaughtError!==void 0&&(Q=m.onUncaughtError),m.onCaughtError!==void 0&&(se=m.onCaughtError),m.onRecoverableError!==void 0&&(Ge=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ot=m.unstable_transitionCallbacks)),m=jt(A,1,!1,null,null,b,T,Q,se,Ge,ot,null),A[Wi]=m.current,tg(A),new dl(m)},dC.hydrateRoot=function(A,m,b){if(!r(A))throw Error(i(299));var T=!1,Q="",se=Nf,Ge=Gf,ot=W0,zt=null,hn=null;return b!=null&&(b.unstable_strictMode===!0&&(T=!0),b.identifierPrefix!==void 0&&(Q=b.identifierPrefix),b.onUncaughtError!==void 0&&(se=b.onUncaughtError),b.onCaughtError!==void 0&&(Ge=b.onCaughtError),b.onRecoverableError!==void 0&&(ot=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(zt=b.unstable_transitionCallbacks),b.formState!==void 0&&(hn=b.formState)),m=jt(A,1,!0,m,b??null,T,Q,se,Ge,ot,zt,hn),m.context=ln(null),b=m.current,T=BA(),T=ii(T),Q=ku(T),Q.callback=null,Ac(b,Q,T),b=T,m.current.lanes=b,it(m,b),uh(m),A[Wi]=m.current,tg(A),new qa(m)},dC.version="19.1.1",dC}var g7;function lW(){if(g7)return n4.exports;g7=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),n4.exports=sW(),n4.exports}var RU=lW();const uW="modulepreload",AW=function(n){return"/maputnik/"+n},y7={},wy=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let C=function(w){return Promise.all(w.map(O=>Promise.resolve(O).then(U=>({status:"fulfilled",value:U}),U=>({status:"rejected",reason:U}))))};var l=C;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),p=o?.nonce||o?.getAttribute("nonce");r=C(t.map(w=>{if(w=AW(w),w in y7)return;y7[w]=!0;const O=w.endsWith(".css"),U=O?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${U}`))return;const K=document.createElement("link");if(K.rel=O?"stylesheet":uW,O||(K.as="script"),K.crossOrigin="",K.href=w,p&&K.setAttribute("nonce",p),document.head.appendChild(K),O)return new Promise((j,W)=>{K.addEventListener("load",j),K.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${w}`)))})}))}function a(o){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=o,window.dispatchEvent(p),!p.defaultPrevented)throw o}return r.then(o=>{for(const p of o||[])p.status==="rejected"&&a(p.reason);return e().catch(a)})},cW=(n,e,t)=>{const i=n[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((r,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Mo=n=>typeof n=="string",fC=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},v7=n=>n==null?"":""+n,hW=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},dW=/###/g,C7=n=>n&&n.indexOf("###")>-1?n.replace(dW,"."):n,_7=n=>!n||Mo(n),qC=(n,e,t)=>{const i=Mo(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(_7(n))return{};const a=C7(i[r]);!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={},++r}return _7(n)?{}:{obj:n,k:C7(i[r])}},b7=(n,e,t)=>{const{obj:i,k:r}=qC(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let a=e[e.length-1],l=e.slice(0,e.length-1),o=qC(n,l,Object);for(;o.obj===void 0&&l.length;)a=`${l[l.length-1]}.${a}`,l=l.slice(0,l.length-1),o=qC(n,l,Object),o?.obj&&typeof o.obj[`${o.k}.${a}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${a}`]=t},fW=(n,e,t,i)=>{const{obj:r,k:a}=qC(n,e,Object);r[a]=r[a]||[],r[a].push(t)},Lx=(n,e)=>{const{obj:t,k:i}=qC(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},pW=(n,e,t)=>{const i=Lx(n,t);return i!==void 0?i:Lx(e,t)},PU=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Mo(n[i])||n[i]instanceof String||Mo(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):PU(n[i],e[i],t):n[i]=e[i]);return n},Sy=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var mW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const gW=n=>Mo(n)?n.replace(/[&<>"'\/]/g,e=>mW[e]):n;class yW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const vW=[" ",",","?","!",";"],CW=new yW(20),_W=(n,e,t)=>{e=e||"",t=t||"";const i=vW.filter(l=>e.indexOf(l)<0&&t.indexOf(l)<0);if(i.length===0)return!0;const r=CW.getRegExp(`(${i.map(l=>l==="?"?"\\?":l).join("|")})`);let a=!r.test(n);if(!a){const l=n.indexOf(t);l>0&&!r.test(n.substring(0,l))&&(a=!0)}return a},r6=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let a=0;a<i.length;){if(!r||typeof r!="object")return;let l,o="";for(let p=a;p<i.length;++p)if(p!==a&&(o+=t),o+=i[p],l=r[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&p<i.length-1)continue;a+=p-a+1;break}r=l}return r},c_=n=>n?.replace("_","-"),bW={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Fx{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||bW,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(Mo(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Fx(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Fx(this.logger,e)}}var Nm=new Fx;class I3{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,a])=>{for(let l=0;l<a;l++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,a])=>{for(let l=0;l<a;l++)r.apply(r,[e,...t])})}}class x7 extends I3{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,l=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],i&&(Array.isArray(i)?o.push(...i):Mo(i)&&a?o.push(...i.split(a)):o.push(i)));const p=Lx(this.data,o);return!p&&!t&&!i&&e.indexOf(".")>-1&&(e=o[0],t=o[1],i=o.slice(2).join(".")),p||!l||!Mo(i)?p:r6(this.data?.[e]?.[t],i,a)}addResource(e,t,i,r,a={silent:!1}){const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let o=[e,t];i&&(o=o.concat(l?i.split(l):i)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),b7(this.data,o,r),a.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const a in i)(Mo(i[a])||Array.isArray(i[a]))&&this.addResource(e,t,a,i[a],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,a,l={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=i,i=t,t=o[1]),this.addNamespaces(t);let p=Lx(this.data,o)||{};l.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?PU(p,i,a):p={...p,...i},b7(this.data,o,p),l.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var KU={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(a=>{e=this.processors[a]?.process(e,t,i,r)??e}),e}};const UU=Symbol("i18next/PATH_KEY");function xW(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>(t?.revoke?.(),r===UU?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function o6(n,e){const{[UU]:t}=n(xW());return t.join(e?.keySeparator??".")}const M7={},w7=n=>!Mo(n)&&typeof n!="boolean"&&typeof n!="number";class zx extends I3{constructor(e,t={}){super(),hW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Nm.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};return e==null?!1:this.resolve(e,i)?.res!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const l=i&&e.indexOf(i)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!_W(e,i,r);if(l&&!o){const p=e.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:e,namespaces:Mo(a)?[a]:a};const C=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(C[0])>-1)&&(a=C.shift()),e=C.join(r)}return{key:e,namespaces:Mo(a)?[a]:a}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=o6(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const a=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,l=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:o,namespaces:p}=this.extractFromKey(e[e.length-1],r),C=p[p.length-1];let w=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;w===void 0&&(w=":");const O=r.lng||this.language,U=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(O?.toLowerCase()==="cimode")return U?a?{res:`${C}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:O,usedNS:C,usedParams:this.getUsedParamsDetails(r)}:`${C}${w}${o}`:a?{res:o,usedKey:o,exactUsedKey:o,usedLng:O,usedNS:C,usedParams:this.getUsedParamsDetails(r)}:o;const K=this.resolve(e,r);let j=K?.res;const W=K?.usedKey||o,Y=K?.exactUsedKey||o,te=["[object Number]","[object Function]","[object RegExp]"],J=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,oe=!this.i18nFormat||this.i18nFormat.handleAsObject,ne=r.count!==void 0&&!Mo(r.count),$=zx.hasDefaultValue(r),ae=ne?this.pluralResolver.getSuffix(O,r.count,r):"",G=r.ordinal&&ne?this.pluralResolver.getSuffix(O,r.count,{ordinal:!1}):"",ce=ne&&!r.ordinal&&r.count===0,ge=ce&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${ae}`]||r[`defaultValue${G}`]||r.defaultValue;let ye=j;oe&&!j&&$&&(ye=ge);const we=w7(ye),Oe=Object.prototype.toString.apply(ye);if(oe&&ye&&we&&te.indexOf(Oe)<0&&!(Mo(J)&&Array.isArray(ye))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Se=this.options.returnedObjectHandler?this.options.returnedObjectHandler(W,ye,{...r,ns:p}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(K.res=Se,K.usedParams=this.getUsedParamsDetails(r),K):Se}if(l){const Se=Array.isArray(ye),Ve=Se?[]:{},xe=Se?Y:W;for(const ze in ye)if(Object.prototype.hasOwnProperty.call(ye,ze)){const st=`${xe}${l}${ze}`;$&&!j?Ve[ze]=this.translate(st,{...r,defaultValue:w7(ge)?ge[ze]:void 0,joinArrays:!1,ns:p}):Ve[ze]=this.translate(st,{...r,joinArrays:!1,ns:p}),Ve[ze]===st&&(Ve[ze]=ye[ze])}j=Ve}}else if(oe&&Mo(J)&&Array.isArray(j))j=j.join(J),j&&(j=this.extendTranslation(j,e,r,i));else{let Se=!1,Ve=!1;!this.isValidLookup(j)&&$&&(Se=!0,j=ge),this.isValidLookup(j)||(Ve=!0,j=o);const ze=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Ve?void 0:j,st=$&&ge!==j&&this.options.updateMissing;if(Ve||Se||st){if(this.logger.log(st?"updateKey":"missingKey",O,C,o,st?ge:j),l){const Ne=this.resolve(o,{...r,keySeparator:!1});Ne&&Ne.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ct=[];const nt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&nt&&nt[0])for(let Ne=0;Ne<nt.length;Ne++)Ct.push(nt[Ne]);else this.options.saveMissingTo==="all"?Ct=this.languageUtils.toResolveHierarchy(r.lng||this.language):Ct.push(r.lng||this.language);const be=(Ne,tt,lt)=>{const kt=$&&lt!==j?lt:ze;this.options.missingKeyHandler?this.options.missingKeyHandler(Ne,C,tt,kt,st,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Ne,C,tt,kt,st,r),this.emit("missingKey",Ne,C,tt,j)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ne?Ct.forEach(Ne=>{const tt=this.pluralResolver.getSuffixes(Ne,r);ce&&r[`defaultValue${this.options.pluralSeparator}zero`]&&tt.indexOf(`${this.options.pluralSeparator}zero`)<0&&tt.push(`${this.options.pluralSeparator}zero`),tt.forEach(lt=>{be([Ne],o+lt,r[`defaultValue${lt}`]||ge)})}):be(Ct,o,ge))}j=this.extendTranslation(j,e,r,K,i),Ve&&j===o&&this.options.appendNamespaceToMissingKey&&(j=`${C}${w}${o}`),(Ve||Se)&&this.options.parseMissingKeyHandler&&(j=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${C}${w}${o}`:o,Se?j:void 0,r))}return a?(K.res=j,K.usedParams=this.getUsedParamsDetails(r),K):j}extendTranslation(e,t,i,r,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const p=Mo(e)&&(i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let C;if(p){const O=e.match(this.interpolator.nestingRegexp);C=O&&O.length}let w=i.replace&&!Mo(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(w={...this.options.interpolation.defaultVariables,...w}),e=this.interpolator.interpolate(e,w,i.lng||this.language||r.usedLng,i),p){const O=e.match(this.interpolator.nestingRegexp),U=O&&O.length;C<U&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...O)=>a?.[0]===O[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${O[0]} in key: ${t[0]}`),null):this.translate(...O,t),i)),i.interpolation&&this.interpolator.reset()}const l=i.postProcess||this.options.postProcess,o=Mo(l)?[l]:l;return e!=null&&o?.length&&i.applyPostProcessor!==!1&&(e=KU.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,a,l,o;return Mo(e)&&(e=[e]),e.forEach(p=>{if(this.isValidLookup(i))return;const C=this.extractFromKey(p,t),w=C.key;r=w;let O=C.namespaces;this.options.fallbackNS&&(O=O.concat(this.options.fallbackNS));const U=t.count!==void 0&&!Mo(t.count),K=U&&!t.ordinal&&t.count===0,j=t.context!==void 0&&(Mo(t.context)||typeof t.context=="number")&&t.context!=="",W=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);O.forEach(Y=>{this.isValidLookup(i)||(o=Y,!M7[`${W[0]}-${Y}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(M7[`${W[0]}-${Y}`]=!0,this.logger.warn(`key "${r}" for languages "${W.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),W.forEach(te=>{if(this.isValidLookup(i))return;l=te;const J=[w];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(J,w,te,Y,t);else{let ne;U&&(ne=this.pluralResolver.getSuffix(te,t.count,t));const $=`${this.options.pluralSeparator}zero`,ae=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(U&&(t.ordinal&&ne.indexOf(ae)===0&&J.push(w+ne.replace(ae,this.options.pluralSeparator)),J.push(w+ne),K&&J.push(w+$)),j){const G=`${w}${this.options.contextSeparator||"_"}${t.context}`;J.push(G),U&&(t.ordinal&&ne.indexOf(ae)===0&&J.push(G+ne.replace(ae,this.options.pluralSeparator)),J.push(G+ne),K&&J.push(G+$))}}let oe;for(;oe=J.pop();)this.isValidLookup(i)||(a=oe,i=this.getResource(te,Y,oe,t))}))})}),{res:i,usedKey:r,exactUsedKey:a,usedLng:l,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Mo(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const a of t)delete r[a]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class S7{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Nm.create("languageUtils")}getScriptPartFromCode(e){if(e=c_(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=c_(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Mo(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const a=this.getLanguagePartFromCode(i);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&(l.indexOf("-")>0&&a.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===a||l.indexOf(a)===0&&a.length>1))return l})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Mo(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],a=l=>{l&&(this.isSupportedCode(l)?r.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Mo(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Mo(e)&&a(this.formatLanguageCode(e)),i.forEach(l=>{r.indexOf(l)<0&&a(this.formatLanguageCode(l))}),r}}const E7={zero:0,one:1,two:2,few:3,many:4,other:5},B7={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class MW{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Nm.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=c_(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:i,type:r});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let l;try{l=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),B7;if(!e.match(/-|_/))return B7;const p=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(p,t)}return this.pluralRulesCache[a]=l,l}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,a)=>E7[r]-E7[a]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const O7=(n,e,t,i=".",r=!0)=>{let a=pW(n,e,t);return!a&&r&&Mo(t)&&(a=r6(n,t,i),a===void 0&&(a=r6(e,t,i))),a},a4=n=>n.replace(/\$/g,"$$$$");class wW{constructor(e={}){this.logger=Nm.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:a,prefixEscaped:l,suffix:o,suffixEscaped:p,formatSeparator:C,unescapeSuffix:w,unescapePrefix:O,nestingPrefix:U,nestingPrefixEscaped:K,nestingSuffix:j,nestingSuffixEscaped:W,nestingOptionsSeparator:Y,maxReplaces:te,alwaysFormat:J}=e.interpolation;this.escape=t!==void 0?t:gW,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=a?Sy(a):l||"{{",this.suffix=o?Sy(o):p||"}}",this.formatSeparator=C||",",this.unescapePrefix=w?"":O||"-",this.unescapeSuffix=this.unescapePrefix?"":w||"",this.nestingPrefix=U?Sy(U):K||Sy("$t("),this.nestingSuffix=j?Sy(j):W||Sy(")"),this.nestingOptionsSeparator=Y||",",this.maxReplaces=te||1e3,this.alwaysFormat=J!==void 0?J:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t?.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){let a,l,o;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},C=K=>{if(K.indexOf(this.formatSeparator)<0){const te=O7(t,p,K,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(te,void 0,i,{...r,...t,interpolationkey:K}):te}const j=K.split(this.formatSeparator),W=j.shift().trim(),Y=j.join(this.formatSeparator).trim();return this.format(O7(t,p,W,this.options.keySeparator,this.options.ignoreJSONStructure),Y,i,{...r,...t,interpolationkey:W})};this.resetRegExp();const w=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,O=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:K=>a4(K)},{regex:this.regexp,safeValue:K=>this.escapeValue?a4(this.escape(K)):a4(K)}].forEach(K=>{for(o=0;a=K.regex.exec(e);){const j=a[1].trim();if(l=C(j),l===void 0)if(typeof w=="function"){const Y=w(e,a,r);l=Mo(Y)?Y:""}else if(r&&Object.prototype.hasOwnProperty.call(r,j))l="";else if(O){l=a[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${e}`),l="";else!Mo(l)&&!this.useRawValueToEscape&&(l=v7(l));const W=K.safeValue(l);if(e=e.replace(a[0],W),O?(K.regex.lastIndex+=l.length,K.regex.lastIndex-=a[0].length):K.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,a,l;const o=(p,C)=>{const w=this.nestingOptionsSeparator;if(p.indexOf(w)<0)return p;const O=p.split(new RegExp(`${w}[ ]*{`));let U=`{${O[1]}`;p=O[0],U=this.interpolate(U,l);const K=U.match(/'/g),j=U.match(/"/g);((K?.length??0)%2===0&&!j||j.length%2!==0)&&(U=U.replace(/'/g,'"'));try{l=JSON.parse(U),C&&(l={...C,...l})}catch(W){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,W),`${p}${w}${U}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,p};for(;r=this.nestingRegexp.exec(e);){let p=[];l={...i},l=l.replace&&!Mo(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const C=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(C!==-1&&(p=r[1].slice(C).split(this.formatSeparator).map(w=>w.trim()).filter(Boolean),r[1]=r[1].slice(0,C)),a=t(o.call(this,r[1].trim(),l),l),a&&r[0]===e&&!Mo(a))return a;Mo(a)||(a=v7(a)),a||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),a=""),p.length&&(a=p.reduce((w,O)=>this.format(w,O,i.lng,{...i,interpolationkey:r[1].trim()}),a.trim())),e=e.replace(r[0],a),this.regexp.lastIndex=0}return e}}const SW=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(l=>{if(l){const[o,...p]=l.split(":"),C=p.join(":").trim().replace(/^'+|'+$/g,""),w=o.trim();t[w]||(t[w]=C),C==="false"&&(t[w]=!1),C==="true"&&(t[w]=!0),isNaN(C)||(t[w]=parseInt(C,10))}})}return{formatName:e,formatOptions:t}},I7=n=>{const e={};return(t,i,r)=>{let a=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(a={...a,[r.interpolationkey]:void 0});const l=i+JSON.stringify(a);let o=e[l];return o||(o=n(c_(i),r),e[l]=o),o(t)}},EW=n=>(e,t,i)=>n(c_(t),i)(e);class BW{constructor(e={}){this.logger=Nm.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?I7:EW;this.formats={number:i((r,a)=>{const l=new Intl.NumberFormat(r,{...a});return o=>l.format(o)}),currency:i((r,a)=>{const l=new Intl.NumberFormat(r,{...a,style:"currency"});return o=>l.format(o)}),datetime:i((r,a)=>{const l=new Intl.DateTimeFormat(r,{...a});return o=>l.format(o)}),relativetime:i((r,a)=>{const l=new Intl.RelativeTimeFormat(r,{...a});return o=>l.format(o,a.range||"day")}),list:i((r,a)=>{const l=new Intl.ListFormat(r,{...a});return o=>l.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=I7(t)}format(e,t,i,r={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(o=>o.indexOf(")")>-1)){const o=a.findIndex(p=>p.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,o)].join(this.formatSeparator)}return a.reduce((o,p)=>{const{formatName:C,formatOptions:w}=SW(p);if(this.formats[C]){let O=o;try{const U=r?.formatParams?.[r.interpolationkey]||{},K=U.locale||U.lng||r.locale||r.lng||i;O=this.formats[C](o,K,{...w,...r,...U})}catch(U){this.logger.warn(U)}return O}else this.logger.warn(`there was no format function for ${C}`);return o},e)}}const OW=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class IW extends I3{constructor(e,t,i,r={}){super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Nm.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(i,r.backend,r)}queueLoad(e,t,i,r){const a={},l={},o={},p={};return e.forEach(C=>{let w=!0;t.forEach(O=>{const U=`${C}|${O}`;!i.reload&&this.store.hasResourceBundle(C,O)?this.state[U]=2:this.state[U]<0||(this.state[U]===1?l[U]===void 0&&(l[U]=!0):(this.state[U]=1,w=!1,l[U]===void 0&&(l[U]=!0),a[U]===void 0&&(a[U]=!0),p[O]===void 0&&(p[O]=!0)))}),w||(o[C]=!0)}),(Object.keys(a).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(p)}}loaded(e,t,i){const r=e.split("|"),a=r[0],l=r[1];t&&this.emit("failedLoading",a,l,t),!t&&i&&this.store.addResourceBundle(a,l,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const o={};this.queue.forEach(p=>{fW(p.loaded,[a],l),OW(p,e),t&&p.errors.push(t),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(C=>{o[C]||(o[C]={});const w=p.loaded[C];w.length&&w.forEach(O=>{o[C][O]===void 0&&(o[C][O]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(p=>!p.done)}read(e,t,i,r=0,a=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:a,callback:l});return}this.readingCalls++;const o=(C,w)=>{if(this.readingCalls--,this.waitingReads.length>0){const O=this.waitingReads.shift();this.read(O.lng,O.ns,O.fcName,O.tried,O.wait,O.callback)}if(C&&w&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,a*2,l)},a);return}l(C,w)},p=this.backend[i].bind(this.backend);if(p.length===2){try{const C=p(e,t);C&&typeof C.then=="function"?C.then(w=>o(null,w)).catch(o):o(null,C)}catch(C){o(C)}return}return p(e,t,o)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Mo(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Mo(t)&&(t=[t]);const a=this.queueLoad(e,t,i,r);if(!a.toLoad.length)return a.pending.length||r(),null;a.toLoad.forEach(l=>{this.loadOne(l)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],a=i[1];this.read(r,a,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${t}loading namespace ${a} for language ${r} failed`,l),!l&&o&&this.logger.log(`${t}loaded namespace ${a} for language ${r}`,o),this.loaded(e,l,o)})}saveMissing(e,t,i,r,a,l={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend?.create){const p={...l,isUpdate:a},C=this.backend.create.bind(this.backend);if(C.length<6)try{let w;C.length===5?w=C(e,t,i,r,p):w=C(e,t,i,r),w&&typeof w.then=="function"?w.then(O=>o(null,O)).catch(o):o(null,w)}catch(w){o(w)}else C(e,t,i,r,o,p)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const T7=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Mo(n[1])&&(e.defaultValue=n[1]),Mo(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),k7=n=>(Mo(n.ns)&&(n.ns=[n.ns]),Mo(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Mo(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),Tb=()=>{},TW=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class h_ extends I3{constructor(e={},t){if(super(),this.options=k7(e),this.services={},this.logger=Nm,this.modules={external:[]},TW(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Mo(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=T7();this.options={...i,...this.options,...k7(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=C=>C?typeof C=="function"?new C:C:null;if(!this.options.isClone){this.modules.logger?Nm.init(r(this.modules.logger),this.options):Nm.init(null,this.options);let C;this.modules.formatter?C=this.modules.formatter:C=BW;const w=new S7(this.options);this.store=new x7(this.options.resources,this.options);const O=this.services;O.logger=Nm,O.resourceStore=this.store,O.languageUtils=w,O.pluralResolver=new MW(w,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),C&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(O.formatter=r(C),O.formatter.init&&O.formatter.init(O,this.options),this.options.interpolation.format=O.formatter.format.bind(O.formatter)),O.interpolator=new wW(this.options),O.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},O.backendConnector=new IW(r(this.modules.backend),O.resourceStore,O,this.options),O.backendConnector.on("*",(K,...j)=>{this.emit(K,...j)}),this.modules.languageDetector&&(O.languageDetector=r(this.modules.languageDetector),O.languageDetector.init&&O.languageDetector.init(O,this.options.detection,this.options)),this.modules.i18nFormat&&(O.i18nFormat=r(this.modules.i18nFormat),O.i18nFormat.init&&O.i18nFormat.init(this)),this.translator=new zx(this.services,this.options),this.translator.on("*",(K,...j)=>{this.emit(K,...j)}),this.modules.external.forEach(K=>{K.init&&K.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Tb),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const C=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);C.length>0&&C[0]!=="dev"&&(this.options.lng=C[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(C=>{this[C]=(...w)=>this.store[C](...w)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(C=>{this[C]=(...w)=>(this.store[C](...w),this)});const o=fC(),p=()=>{const C=(w,O)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(O),t(w,O)};if(this.languages&&!this.isInitialized)return C(null,this.t.bind(this));this.changeLanguage(this.options.lng,C)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),o}loadResources(e,t=Tb){let i=t;const r=Mo(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const a=[],l=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(C=>{C!=="cimode"&&a.indexOf(C)<0&&a.push(C)})};r?l(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>l(p)),this.options.preload?.forEach?.(o=>l(o)),this.services.backendConnector.load(a,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(o)})}else i(null)}reloadResources(e,t,i){const r=fC();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=Tb),this.services.backendConnector.reload(e,t,a=>{r.resolve(),i(a)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&KU.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=fC();this.emit("languageChanging",e);const r=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},a=(o,p)=>{p?this.isLanguageChangingTo===e&&(r(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,i.resolve((...C)=>this.t(...C)),t&&t(o,(...C)=>this.t(...C))},l=o=>{!e&&!o&&this.services.languageDetector&&(o=[]);const p=Mo(o)?o:o&&o[0],C=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(Mo(o)?[o]:o);C&&(this.language||r(C),this.translator.language||this.translator.changeLanguage(C),this.services.languageDetector?.cacheUserLanguage?.(C)),this.loadResources(C,w=>{a(w,C)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),i}getFixedT(e,t,i){const r=(a,l,...o)=>{let p;typeof l!="object"?p=this.options.overloadTranslationOptionHandler([a,l].concat(o)):p={...l},p.lng=p.lng||r.lng,p.lngs=p.lngs||r.lngs,p.ns=p.ns||r.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||i||r.keyPrefix);const C=this.options.keySeparator||".";let w;return p.keyPrefix&&Array.isArray(a)?w=a.map(O=>(typeof O=="function"&&(O=o6(O,{...this.options,...l})),`${p.keyPrefix}${C}${O}`)):(typeof a=="function"&&(a=o6(a,{...this.options,...l})),w=p.keyPrefix?`${p.keyPrefix}${C}${a}`:a),this.t(w,p)};return Mo(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const l=(o,p)=>{const C=this.services.backendConnector.state[`${o}|${p}`];return C===-1||C===0||C===2};if(t.precheck){const o=t.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(i,e)&&(!r||l(a,e)))}loadNamespaces(e,t){const i=fC();return this.options.ns?(Mo(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=fC();Mo(e)&&(e=[e]);const r=this.options.preload||[],a=e.filter(l=>r.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return a.length?(this.options.preload=r.concat(a),this.loadResources(l=>{i.resolve(),t&&t(l)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const a=r.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services?.languageUtils||new S7(T7());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new h_(e,t)}cloneInstance(e={},t=Tb){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},a=new h_(r);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(o=>{a[o]=this[o]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},i){const o=Object.keys(this.store.data).reduce((p,C)=>(p[C]={...this.store.data[C]},p[C]=Object.keys(p[C]).reduce((w,O)=>(w[O]={...p[C][O]},w),p[C]),p),{});a.store=new x7(o,r),a.services.resourceStore=a.store}return a.translator=new zx(a.services,r),a.translator.on("*",(o,...p)=>{a.emit(o,...p)}),a.init(r,t),a.translator.options=r,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const mh=h_.createInstance();mh.createInstance=h_.createInstance;mh.createInstance;mh.dir;mh.init;mh.loadResources;mh.reloadResources;mh.use;mh.changeLanguage;mh.getFixedT;mh.t;mh.exists;mh.setDefaultNamespace;mh.hasLoadedNamespace;mh.loadNamespaces;mh.loadLanguages;const{slice:kW,forEach:DW}=[];function RW(n){return DW.call(kW.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function PW(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const D7=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,KW=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let a=`${n}=${r}`;if(i.maxAge>0){const l=i.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(l)}`}if(i.domain){if(!D7.test(i.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${i.domain}`}if(i.path){if(!D7.test(i.path))throw new TypeError("option path is invalid");a+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(a+="; HttpOnly"),i.secure&&(a+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(a+="; Partitioned"),a},R7={create(n,e,t,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),i&&(r.domain=i),document.cookie=KW(n,e,r)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var UW={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return R7.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:i,cookieDomain:r,cookieOptions:a}=e;t&&typeof document<"u"&&R7.create(t,n,i,r,a)}},LW={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const a=i.substring(1).split("&");for(let l=0;l<a.length;l++){const o=a[l].indexOf("=");o>0&&a[l].substring(0,o)===e&&(t=a[l].substring(o+1))}}return t}},FW={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,i;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const a=r.substring(1);if(e){const l=a.split("&");for(let o=0;o<l.length;o++){const p=l[o].indexOf("=");p>0&&l[o].substring(0,p)===e&&(i=l[o].substring(p+1))}}if(i)return i;if(!i&&t>-1){const l=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return i}};let Ey=null;const P7=()=>{if(Ey!==null)return Ey;try{if(Ey=typeof window<"u"&&window.localStorage!==null,!Ey)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{Ey=!1}return Ey};var zW={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&P7())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&P7()&&window.localStorage.setItem(t,n)}};let By=null;const K7=()=>{if(By!==null)return By;try{if(By=typeof window<"u"&&window.sessionStorage!==null,!By)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{By=!1}return By};var jW={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&K7())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&K7()&&window.sessionStorage.setItem(t,n)}},NW={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:i,language:r}=navigator;if(t)for(let a=0;a<t.length;a++)e.push(t[a]);i&&e.push(i),r&&e.push(r)}return e.length>0?e:void 0}},GW={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(t=i.getAttribute("lang")),t}},WW={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},QW={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,i=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[t]}};let LU=!1;try{document.cookie,LU=!0}catch{}const FU=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];LU||FU.splice(1,1);const YW=()=>({order:FU,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class zU{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=RW(t,this.options||{},YW()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(UW),this.addDetector(LW),this.addDetector(zW),this.addDetector(jW),this.addDetector(NW),this.addDetector(GW),this.addDetector(WW),this.addDetector(QW),this.addDetector(FW)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(i=>{if(this.detectors[i]){let r=this.detectors[i].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(i=>i!=null&&!PW(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}zU.type="languageDetector";var qW=function(e){return{type:"backend",init:function(i,r,a){},read:function(i,r,a){if(typeof e=="function"){if(e.length<3){try{var l=e(i,r);l&&typeof l.then=="function"?l.then(function(o){return a(null,o&&o.default||o)}).catch(a):a(null,l)}catch(o){a(o)}return}e(i,r,a);return}a(null,e&&e[i]&&e[i][r])}}},s4,U7;function HW(){return U7||(U7=1,s4={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),s4}var VW=HW();const $W=AA(VW);var ZW=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function L7(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],($W[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var i=n.indexOf("-->");return{type:"comment",comment:i!==-1?n.slice(4,i):""}}for(var r=new RegExp(ZW),a=null;(a=r.exec(n))!==null;)if(a[0].trim())if(a[1]){var l=a[1].trim(),o=[l,""];l.indexOf("=")>-1&&(o=l.split("=")),e.attrs[o[0]]=o[1],r.lastIndex--}else a[2]&&(e.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return e}var XW=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,JW=/^\s*$/,eQ=Object.create(null);function jU(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var i=[];for(var r in t)i.push(r+'="'+t[r]+'"');return i.length?" "+i.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(jU,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var tQ={parse:function(n,e){e||(e={}),e.components||(e.components=eQ);var t,i=[],r=[],a=-1,l=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");i.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(XW,function(p,C){if(l){if(p!=="</"+t.name+">")return;l=!1}var w,O=p.charAt(1)!=="/",U=p.startsWith("<!--"),K=C+p.length,j=n.charAt(K);if(U){var W=L7(p);return a<0?(i.push(W),i):((w=r[a]).children.push(W),i)}if(O&&(a++,(t=L7(p)).type==="tag"&&e.components[t.name]&&(t.type="component",l=!0),t.voidElement||l||!j||j==="<"||t.children.push({type:"text",content:n.slice(K,n.indexOf("<",K))}),a===0&&i.push(t),(w=r[a-1])&&w.children.push(t),r[a]=t),(!O||t.voidElement)&&(a>-1&&(t.voidElement||t.name===p.slice(2,-1))&&(a--,t=a===-1?i:r[a]),!l&&j!=="<"&&j)){w=a===-1?i:r[a].children;var Y=n.indexOf("<",K),te=n.slice(K,Y===-1?void 0:Y);JW.test(te)&&(te=" "),(Y>-1&&a+w.length>=0||te!==" ")&&w.push({type:"text",content:te})}}),i},stringify:function(n){return n.reduce(function(e,t){return e+jU("",t)},"")}};const _x=(n,e,t,i)=>{const r=[t,{code:e,...i||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(r,"warn","react-i18next::",!0);Sf(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...r):console?.warn&&console.warn(...r)},F7={},d_=(n,e,t,i)=>{Sf(t)&&F7[t]||(Sf(t)&&(F7[t]=new Date),_x(n,e,t,i))},NU=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},a6=(n,e,t)=>{n.loadNamespaces(e,NU(n,t))},z7=(n,e,t,i)=>{if(Sf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return a6(n,t,i);t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,NU(n,i))},nQ=(n,e,t={})=>!e.languages||!e.languages.length?(d_(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!r(i.isLanguageChangingTo,n))return!1}}),iQ=n=>n.displayName||n.name||(Sf(n)&&n.length>0?n:"Unknown"),Sf=n=>typeof n=="string",bg=n=>typeof n=="object"&&n!==null,rQ=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,oQ={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},aQ=n=>oQ[n],sQ=n=>n.replace(rQ,aQ);let s6={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:sQ};const lQ=(n={})=>{s6={...s6,...n}},GU=()=>s6;let WU;const uQ=n=>{WU=n},EB=()=>WU,l4=(n,e)=>{if(!n)return!1;const t=n.props?.children??n.children;return e?t.length>0:!!t},u4=n=>{if(!n)return[];const e=n.props?.children??n.children;return n.props?.i18nIsDynamicList?uv(e):e},AQ=n=>Array.isArray(n)&&n.every(Nt.isValidElement),uv=n=>Array.isArray(n)?n:[n],cQ=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},QU=(n,e,t,i)=>{if(!n)return"";let r="";const a=uv(n),l=e?.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return a.forEach((o,p)=>{if(Sf(o)){r+=`${o}`;return}if(Nt.isValidElement(o)){const{props:C,type:w}=o,O=Object.keys(C).length,U=l.indexOf(w)>-1,K=C.children;if(!K&&U&&!O){r+=`<${w}/>`;return}if(!K&&(!U||O)||C.i18nIsDynamicList){r+=`<${p}></${p}>`;return}if(U&&O===1&&Sf(K)){r+=`<${w}>${K}</${w}>`;return}const j=QU(K,e,t,i);r+=`<${p}>${j}</${p}>`;return}if(o===null){_x(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:i});return}if(bg(o)){const{format:C,...w}=o,O=Object.keys(w);if(O.length===1){const U=C?`${O[0]}, ${C}`:O[0];r+=`{{${U}}}`;return}_x(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:i,child:o});return}_x(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:i,child:o})}),r},hQ=(n,e,t,i,r,a,l)=>{if(t==="")return[];const o=r.transKeepBasicHtmlNodesFor||[],p=t&&new RegExp(o.map(te=>`<${te}`).join("|")).test(t);if(!n&&!e&&!p&&!l)return[t];const C=e??{},w=te=>{uv(te).forEach(oe=>{Sf(oe)||(l4(oe)?w(u4(oe)):bg(oe)&&!Nt.isValidElement(oe)&&Object.assign(C,oe))})};w(n);const O=tQ.parse(`<0>${t}</0>`),U={...C,...a},K=(te,J,oe)=>{const ne=u4(te),$=W(ne,J.children,oe);return AQ(ne)&&$.length===0||te.props?.i18nIsDynamicList?ne:$},j=(te,J,oe,ne,$)=>{te.dummy?(te.children=J,oe.push(Nt.cloneElement(te,{key:ne},$?void 0:J))):oe.push(...Nt.Children.map([te],ae=>{const G={...ae.props};return delete G.i18nIsDynamicList,Nt.createElement(ae.type,{...G,key:ne,ref:ae.props.ref??ae.ref},$?null:J)}))},W=(te,J,oe)=>{const ne=uv(te);return uv(J).reduce((ae,G,ce)=>{const ge=G.children?.[0]?.content&&i.services.interpolator.interpolate(G.children[0].content,U,i.language);if(G.type==="tag"){let ye=ne[parseInt(G.name,10)];!ye&&e&&(ye=e[G.name]),oe.length===1&&!ye&&(ye=oe[0][G.name]),ye||(ye={});const we=Object.keys(G.attrs).length!==0?cQ({props:G.attrs},ye):ye,Oe=Nt.isValidElement(we),Se=Oe&&l4(G,!0)&&!G.voidElement,Ve=p&&bg(we)&&we.dummy&&!Oe,xe=bg(e)&&Object.hasOwnProperty.call(e,G.name);if(Sf(we)){const ze=i.services.interpolator.interpolate(we,U,i.language);ae.push(ze)}else if(l4(we)||Se){const ze=K(we,G,oe);j(we,ze,ae,ce)}else if(Ve){const ze=W(ne,G.children,oe);j(we,ze,ae,ce)}else if(Number.isNaN(parseFloat(G.name)))if(xe){const ze=K(we,G,oe);j(we,ze,ae,ce,G.voidElement)}else if(r.transSupportBasicHtmlNodes&&o.indexOf(G.name)>-1)if(G.voidElement)ae.push(Nt.createElement(G.name,{key:`${G.name}-${ce}`}));else{const ze=W(ne,G.children,oe);ae.push(Nt.createElement(G.name,{key:`${G.name}-${ce}`},ze))}else if(G.voidElement)ae.push(`<${G.name} />`);else{const ze=W(ne,G.children,oe);ae.push(`<${G.name}>${ze}</${G.name}>`)}else if(bg(we)&&!Oe){const ze=G.children[0]?ge:null;ze&&ae.push(ze)}else j(we,ge,ae,ce,G.children.length!==1||!ge)}else if(G.type==="text"){const ye=r.transWrapTextNodes,we=l?r.unescape(i.services.interpolator.interpolate(G.content,U,i.language)):i.services.interpolator.interpolate(G.content,U,i.language);ye?ae.push(Nt.createElement(ye,{key:`${G.name}-${ce}`},we)):ae.push(we)}return ae},[])},Y=W([{dummy:!0,children:n||[]}],O,uv(n||[]));return u4(Y[0])},YU=(n,e,t)=>{const i=n.key||e,r=Nt.cloneElement(n,{key:i});if(!r.props||!r.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return r;function a(){return Nt.createElement(Nt.Fragment,null,r)}return Nt.createElement(a,{key:i})},dQ=(n,e)=>n.map((t,i)=>YU(t,i,e)),fQ=(n,e)=>{const t={};return Object.keys(n).forEach(i=>{Object.assign(t,{[i]:YU(n[i],i,e)})}),t},pQ=(n,e,t,i)=>n?Array.isArray(n)?dQ(n,e):bg(n)?fQ(n,e):(d_(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:i}),null):null,mQ=n=>!bg(n)||Array.isArray(n)?!1:Object.keys(n).reduce((e,t)=>e&&Number.isNaN(Number.parseFloat(t)),!0);function gQ({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:a={},values:l,defaults:o,components:p,ns:C,i18n:w,t:O,shouldUnescape:U,...K}){const j=w||EB();if(!j)return d_(j,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:i}),n;const W=O||j.t.bind(j)||(Ve=>Ve),Y={...GU(),...j.options?.react};let te=C||W.ns||j.options?.defaultNS;te=Sf(te)?[te]:te||["translation"];const J=QU(n,Y,j,i),oe=o||J||Y.transEmptyNodeValue||i,{hashTransKey:ne}=Y,$=i||(ne?ne(J||oe):J||oe);j.options?.interpolation?.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...j.options.interpolation.defaultVariables}:{...j.options.interpolation.defaultVariables});const ae=l||e!==void 0&&!j.options?.interpolation?.alwaysFormat||!n?a.interpolation:{interpolation:{...a.interpolation,prefix:"#$?",suffix:"?$#"}},G={...a,context:r||a.context,count:e,...l,...ae,defaultValue:oe,ns:te},ce=$?W($,G):oe,ge=pQ(p,ce,j,i);let ye=ge||n,we=null;mQ(ge)&&(we=ge,ye=n);const Oe=hQ(ye,we,ce,j,Y,G,U),Se=t??Y.defaultTransParent;return Se?Nt.createElement(Se,K,Oe):Oe}const yQ={type:"3rdParty",init(n){lQ(n.options.react),uQ(n)}},qU=Nt.createContext();class vQ{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function Ig({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:a={},values:l,defaults:o,components:p,ns:C,i18n:w,t:O,shouldUnescape:U,...K}){const{i18n:j,defaultNS:W}=Nt.useContext(qU)||{},Y=w||j||EB(),te=O||Y?.t.bind(Y);return gQ({children:n,count:e,parent:t,i18nKey:i,context:r,tOptions:a,values:l,defaults:o,components:p,ns:C||te?.ns||W||Y?.options?.defaultNS,i18n:Y,t:O,shouldUnescape:U,...K})}const CQ=(n,e)=>{const t=Nt.useRef();return Nt.useEffect(()=>{t.current=n},[n,e]),t.current},HU=(n,e,t,i)=>n.getFixedT(e,t,i),_Q=(n,e,t,i)=>Nt.useCallback(HU(n,e,t,i),[n,e,t,i]),bQ=(n,e={})=>{const{i18n:t}=e,{i18n:i,defaultNS:r}=Nt.useContext(qU)||{},a=t||i||EB();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new vQ),!a){d_(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ne=(ae,G)=>Sf(G)?G:bg(G)&&Sf(G.defaultValue)?G.defaultValue:Array.isArray(ae)?ae[ae.length-1]:ae,$=[ne,{},!1];return $.t=ne,$.i18n={},$.ready=!1,$}a.options.react?.wait&&d_(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...GU(),...a.options.react,...e},{useSuspense:o,keyPrefix:p}=l;let C=r||a.options?.defaultNS;C=Sf(C)?[C]:C||["translation"],a.reportNamespaces.addUsedNamespaces?.(C);const w=(a.isInitialized||a.initializedStoreOnce)&&C.every(ne=>nQ(ne,a,l)),O=_Q(a,e.lng||null,l.nsMode==="fallback"?C:C[0],p),U=()=>O,K=()=>HU(a,e.lng||null,l.nsMode==="fallback"?C:C[0],p),[j,W]=Nt.useState(U);let Y=C.join();e.lng&&(Y=`${e.lng}${Y}`);const te=CQ(Y),J=Nt.useRef(!0);Nt.useEffect(()=>{const{bindI18n:ne,bindI18nStore:$}=l;J.current=!0,!w&&!o&&(e.lng?z7(a,e.lng,C,()=>{J.current&&W(K)}):a6(a,C,()=>{J.current&&W(K)})),w&&te&&te!==Y&&J.current&&W(K);const ae=()=>{J.current&&W(K)};return ne&&a?.on(ne,ae),$&&a?.store.on($,ae),()=>{J.current=!1,a&&ne&&ne?.split(" ").forEach(G=>a.off(G,ae)),$&&a&&$.split(" ").forEach(G=>a.store.off(G,ae))}},[a,Y]),Nt.useEffect(()=>{J.current&&w&&W(U)},[a,p,w]);const oe=[j,a,w];if(oe.t=j,oe.i18n=a,oe.ready=w,w||!w&&!o)return oe;throw new Promise(ne=>{e.lng?z7(a,e.lng,C,()=>ne()):a6(a,C,()=>ne())})},ls=(n,e={})=>function(i){function r({forwardedRef:l,...o}){const[p,C,w]=bQ(n,{...o,keyPrefix:e.keyPrefix}),O={...o,t:p,i18n:C,tReady:w};return e.withRef&&l?O.ref=l:!e.withRef&&l&&(O.forwardedRef=l),Nt.createElement(i,O)}r.displayName=`withI18nextTranslation(${iQ(i)})`,r.WrappedComponent=i;const a=(l,o)=>Nt.createElement(r,Object.assign({},l,{forwardedRef:o}));return e.withRef?Nt.forwardRef(a):r};function pl(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="529ee327821ff95d86675c5d3e41229f0d9cb0df",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAA,CAAA,IAAA,CAAU,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAA,CAAA,IAAA,CAAc,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAA,CAAA,IAAA,CAAwB,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAA,CAAA,CAAA,CAAA,IAAA,CAAwB,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAA,CAAA,CAAA,CAAqB;AAAA,CAAA,CAChC,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAA,EAAA,CAAA,CAAA,CAAM,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IAAA,CACG,GAAA,CAAI,QAAQ,CAAA,CACZ,GAAA;AAAA,CAAA,CACC,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAA,CAAA,CAAA,CAAA,CAAA,CAAe;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAA,EAAA,CAAA,CAAA,CAAM;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CAAA,CAAA,CAAA,CACV;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAAA,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAA8B;AAAA,CAAA,CACvC,CAAC;AACH,CAAA,CACC,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAA,CAAK;AAAA,CAAA,CACJ,aAAA,CAAA,CAAe,MAAA,CAAO,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAA,CAAA,CAAc,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CACb,aAAA,CAAA,CAAe;AAAA,CAAA,CAAA,CAAA,CACb,WAAA,CAAA,CAAa;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACf,CAAA;AAAA,CAAA,CACA,WAAA,CAAA,CAAa,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAA,CAAA,CAAa,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAA,CAAA,CAAmB,CAAC,IAAA,CAAA,CAAM,GAAA,CAAA,CAAK,GAAA,CAAA,CAAA,CAAA,CAAA,CAAQ;AACrC,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAA,EAAA,CAAA,CAAA,CAAM;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAA,CAAA,CAAA,CAAQ;AAChC,CAAA,CAAA,CAAA,CAAA,OAAA,CAAQ,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAA,CAAK,CAAA,CAAA,CAAA,CAAI,CAAC,CAAA,CAAA,CAAG,CAAA;AAAA,CAAA,CACzE;AACF,CAAC,CAAA;AAEH,MAAA,CAAA,OAAA,CAAe,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"529ee327821ff95d86675c5d3e41229f0d9cb0df"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return pl=function(){return l},l}pl();const VU=(pl().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});pl().s[1]++;mh.use(zU).use(qW((n,e)=>(pl().f[0]++,pl().s[2]++,n==="en"?(pl().b[0][0]++,pl().s[3]++,{}):(pl().b[0][1]++,pl().s[4]++,cW(Object.assign({"./locales/de/translation.json":()=>(pl().f[1]++,pl().s[5]++,wy(()=>import("./translation-CiEDmoES.js"),[])),"./locales/fr/translation.json":()=>(pl().f[2]++,pl().s[6]++,wy(()=>import("./translation-DpmH3u25.js"),[])),"./locales/he/translation.json":()=>(pl().f[3]++,pl().s[7]++,wy(()=>import("./translation--csVkTcS.js"),[])),"./locales/it/translation.json":()=>(pl().f[4]++,pl().s[8]++,wy(()=>import("./translation-CuNUfALR.js"),[])),"./locales/ja/translation.json":()=>(pl().f[5]++,pl().s[9]++,wy(()=>import("./translation-x4SrtxNF.js"),[])),"./locales/zh/translation.json":()=>(pl().f[6]++,pl().s[10]++,wy(()=>import("./translation-BmBNlV7n.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(yQ).init({supportedLngs:Object.keys(VU),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(pl().f[7]++,pl().s[11]++,n[0]==="en"){pl().b[1][0]++,pl().s[12]++;return}else pl().b[1][1]++;pl().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var BC={exports:{}};BC.exports;var j7;function xQ(){return j7||(j7=1,function(n,e){var t=200,i="__lodash_hash_undefined__",r=9007199254740991,a="[object Arguments]",l="[object Array]",o="[object Boolean]",p="[object Date]",C="[object Error]",w="[object Function]",O="[object GeneratorFunction]",U="[object Map]",K="[object Number]",j="[object Object]",W="[object Promise]",Y="[object RegExp]",te="[object Set]",J="[object String]",oe="[object Symbol]",ne="[object WeakMap]",$="[object ArrayBuffer]",ae="[object DataView]",G="[object Float32Array]",ce="[object Float64Array]",ge="[object Int8Array]",ye="[object Int16Array]",we="[object Int32Array]",Oe="[object Uint8Array]",Se="[object Uint8ClampedArray]",Ve="[object Uint16Array]",xe="[object Uint32Array]",ze=/[\\^$.*+?()[\]{}|]/g,st=/\w*$/,Ct=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,be={};be[a]=be[l]=be[$]=be[ae]=be[o]=be[p]=be[G]=be[ce]=be[ge]=be[ye]=be[we]=be[U]=be[K]=be[j]=be[Y]=be[te]=be[J]=be[oe]=be[Oe]=be[Se]=be[Ve]=be[xe]=!0,be[C]=be[w]=be[ne]=!1;var Ne=typeof window=="object"&&window&&window.Object===Object&&window,tt=typeof self=="object"&&self&&self.Object===Object&&self,lt=Ne||tt||Function("return this")(),kt=e&&!e.nodeType&&e,gt=kt&&!0&&n&&!n.nodeType&&n,St=gt&&gt.exports===kt;function Ut(ee,Be){return ee.set(Be[0],Be[1]),ee}function Fe(ee,Be){return ee.add(Be),ee}function Ke(ee,Be){for(var at=-1,Gt=ee?ee.length:0;++at<Gt&&Be(ee[at],at,ee)!==!1;);return ee}function Re(ee,Be){for(var at=-1,Gt=Be.length,Si=ee.length;++at<Gt;)ee[Si+at]=Be[at];return ee}function He(ee,Be,at,Gt){for(var Si=-1,Xn=ee?ee.length:0;++Si<Xn;)at=Be(at,ee[Si],Si,ee);return at}function bt(ee,Be){for(var at=-1,Gt=Array(ee);++at<ee;)Gt[at]=Be(at);return Gt}function _t(ee,Be){return ee?.[Be]}function Ot(ee){var Be=!1;if(ee!=null&&typeof ee.toString!="function")try{Be=!!(ee+"")}catch{}return Be}function qt(ee){var Be=-1,at=Array(ee.size);return ee.forEach(function(Gt,Si){at[++Be]=[Si,Gt]}),at}function Kt(ee,Be){return function(at){return ee(Be(at))}}function on(ee){var Be=-1,at=Array(ee.size);return ee.forEach(function(Gt){at[++Be]=Gt}),at}var Jn=Array.prototype,Wt=Function.prototype,$n=Object.prototype,On=lt["__core-js_shared__"],Bn=function(){var ee=/[^.]+$/.exec(On&&On.keys&&On.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),In=Wt.toString,Oi=$n.hasOwnProperty,ei=$n.toString,Kn=RegExp("^"+In.call(Oi).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=St?lt.Buffer:void 0,de=lt.Symbol,re=lt.Uint8Array,le=Kt(Object.getPrototypeOf,Object),pe=Object.create,Te=$n.propertyIsEnumerable,We=Jn.splice,dt=Object.getOwnPropertySymbols,Ye=je?je.isBuffer:void 0,De=Kt(Object.keys,Object),Ze=$o(lt,"DataView"),g=$o(lt,"Map"),mt=$o(lt,"Promise"),ht=$o(lt,"Set"),Tt=$o(lt,"WeakMap"),it=$o(Object,"create"),en=jo(Ze),Dn=jo(g),Mn=jo(mt),ii=jo(ht),Wn=jo(Tt),qi=de?de.prototype:void 0,er=qi?qi.valueOf:void 0;function Ei(ee){var Be=-1,at=ee?ee.length:0;for(this.clear();++Be<at;){var Gt=ee[Be];this.set(Gt[0],Gt[1])}}function hi(){this.__data__=it?it(null):{}}function ti(ee){return this.has(ee)&&delete this.__data__[ee]}function Wi(ee){var Be=this.__data__;if(it){var at=Be[ee];return at===i?void 0:at}return Oi.call(Be,ee)?Be[ee]:void 0}function wn(ee){var Be=this.__data__;return it?Be[ee]!==void 0:Oi.call(Be,ee)}function uo(ee,Be){var at=this.__data__;return at[ee]=it&&Be===void 0?i:Be,this}Ei.prototype.clear=hi,Ei.prototype.delete=ti,Ei.prototype.get=Wi,Ei.prototype.has=wn,Ei.prototype.set=uo;function Hi(ee){var Be=-1,at=ee?ee.length:0;for(this.clear();++Be<at;){var Gt=ee[Be];this.set(Gt[0],Gt[1])}}function ma(){this.__data__=[]}function To(ee){var Be=this.__data__,at=us(Be,ee);if(at<0)return!1;var Gt=Be.length-1;return at==Gt?Be.pop():We.call(Be,at,1),!0}function Zn(ee){var Be=this.__data__,at=us(Be,ee);return at<0?void 0:Be[at][1]}function lr(ee){return us(this.__data__,ee)>-1}function zi(ee,Be){var at=this.__data__,Gt=us(at,ee);return Gt<0?at.push([ee,Be]):at[Gt][1]=Be,this}Hi.prototype.clear=ma,Hi.prototype.delete=To,Hi.prototype.get=Zn,Hi.prototype.has=lr,Hi.prototype.set=zi;function vr(ee){var Be=-1,at=ee?ee.length:0;for(this.clear();++Be<at;){var Gt=ee[Be];this.set(Gt[0],Gt[1])}}function Fa(){this.__data__={hash:new Ei,map:new(g||Hi),string:new Ei}}function Tr(ee){return Ys(this,ee).delete(ee)}function ji(ee){return Ys(this,ee).get(ee)}function gl(ee){return Ys(this,ee).has(ee)}function ka(ee,Be){return Ys(this,ee).set(ee,Be),this}vr.prototype.clear=Fa,vr.prototype.delete=Tr,vr.prototype.get=ji,vr.prototype.has=gl,vr.prototype.set=ka;function wo(ee){this.__data__=new Hi(ee)}function Xa(){this.__data__=new Hi}function Il(ee){return this.__data__.delete(ee)}function Ao(ee){return this.__data__.get(ee)}function Wu(ee){return this.__data__.has(ee)}function Da(ee,Be){var at=this.__data__;if(at instanceof Hi){var Gt=at.__data__;if(!g||Gt.length<t-1)return Gt.push([ee,Be]),this;at=this.__data__=new vr(Gt)}return at.set(ee,Be),this}wo.prototype.clear=Xa,wo.prototype.delete=Il,wo.prototype.get=Ao,wo.prototype.has=Wu,wo.prototype.set=Da;function Vi(ee,Be){var at=aa(ee)||wa(ee)?bt(ee.length,String):[],Gt=at.length,Si=!!Gt;for(var Xn in ee)Oi.call(ee,Xn)&&!(Si&&(Xn=="length"||bu(Xn,Gt)))&&at.push(Xn);return at}function Mi(ee,Be,at){var Gt=ee[Be];(!(Oi.call(ee,Be)&&za(Gt,at))||at===void 0&&!(Be in ee))&&(ee[Be]=at)}function us(ee,Be){for(var at=ee.length;at--;)if(za(ee[at][0],Be))return at;return-1}function Ma(ee,Be){return ee&&yl(Be,Zi(Be),ee)}function Vo(ee,Be,at,Gt,Si,Xn,$i){var or;if(Gt&&(or=Xn?Gt(ee,Si,Xn,$i):Gt(ee)),or!==void 0)return or;if(!Rr(ee))return ee;var Ri=aa(ee);if(Ri){if(or=Kl(ee),!Be)return _u(ee,or)}else{var Xi=dr(ee),to=Xi==w||Xi==O;if(ja(ee))return si(ee,Be);if(Xi==j||Xi==a||to&&!Xn){if(Ot(ee))return Xn?ee:{};if(or=ga(to?{}:ee),!Be)return Ss(ee,Ma(or,ee))}else{if(!be[Xi])return Xn?ee:{};or=Ul(ee,Xi,Vo,Be)}}$i||($i=new wo);var co=$i.get(ee);if(co)return co;if($i.set(ee,or),!Ri)var Ar=at?xc(ee):Zi(ee);return Ke(Ar||ee,function(mr,ho){Ar&&(ho=mr,mr=ee[ho]),Mi(or,ho,Vo(mr,Be,at,Gt,ho,ee,$i))}),or}function $e(ee){return Rr(ee)?pe(ee):{}}function Et(ee,Be,at){var Gt=Be(ee);return aa(ee)?Gt:Re(Gt,at(ee))}function xn(ee){return ei.call(ee)}function Gn(ee){if(!Rr(ee)||iu(ee))return!1;var Be=Ja(ee)||Ot(ee)?Kn:Ct;return Be.test(jo(ee))}function rn(ee){if(!cA(ee))return De(ee);var Be=[];for(var at in Object(ee))Oi.call(ee,at)&&at!="constructor"&&Be.push(at);return Be}function si(ee,Be){if(Be)return ee.slice();var at=new ee.constructor(ee.length);return ee.copy(at),at}function eo(ee){var Be=new ee.constructor(ee.byteLength);return new re(Be).set(new re(ee)),Be}function So(ee,Be){var at=Be?eo(ee.buffer):ee.buffer;return new ee.constructor(at,ee.byteOffset,ee.byteLength)}function As(ee,Be,at){var Gt=Be?at(qt(ee),!0):qt(ee);return He(Gt,Ut,new ee.constructor)}function Ls(ee){var Be=new ee.constructor(ee.source,st.exec(ee));return Be.lastIndex=ee.lastIndex,Be}function Qu(ee,Be,at){var Gt=Be?at(on(ee),!0):on(ee);return He(Gt,Fe,new ee.constructor)}function Qi(ee){return er?Object(er.call(ee)):{}}function RA(ee,Be){var at=Be?eo(ee.buffer):ee.buffer;return new ee.constructor(at,ee.byteOffset,ee.length)}function _u(ee,Be){var at=-1,Gt=ee.length;for(Be||(Be=Array(Gt));++at<Gt;)Be[at]=ee[at];return Be}function yl(ee,Be,at,Gt){at||(at={});for(var Si=-1,Xn=Be.length;++Si<Xn;){var $i=Be[Si],or=void 0;Mi(at,$i,or===void 0?ee[$i]:or)}return at}function Ss(ee,Be){return yl(ee,ko(ee),Be)}function xc(ee){return Et(ee,Zi,ko)}function Ys(ee,Be){var at=ee.__data__;return xr(Be)?at[typeof Be=="string"?"string":"hash"]:at.map}function $o(ee,Be){var at=_t(ee,Be);return Gn(at)?at:void 0}var ko=dt?Kt(dt,Object):wi,dr=xn;(Ze&&dr(new Ze(new ArrayBuffer(1)))!=ae||g&&dr(new g)!=U||mt&&dr(mt.resolve())!=W||ht&&dr(new ht)!=te||Tt&&dr(new Tt)!=ne)&&(dr=function(ee){var Be=ei.call(ee),at=Be==j?ee.constructor:void 0,Gt=at?jo(at):void 0;if(Gt)switch(Gt){case en:return ae;case Dn:return U;case Mn:return W;case ii:return te;case Wn:return ne}return Be});function Kl(ee){var Be=ee.length,at=ee.constructor(Be);return Be&&typeof ee[0]=="string"&&Oi.call(ee,"index")&&(at.index=ee.index,at.input=ee.input),at}function ga(ee){return typeof ee.constructor=="function"&&!cA(ee)?$e(le(ee)):{}}function Ul(ee,Be,at,Gt){var Si=ee.constructor;switch(Be){case $:return eo(ee);case o:case p:return new Si(+ee);case ae:return So(ee,Gt);case G:case ce:case ge:case ye:case we:case Oe:case Se:case Ve:case xe:return RA(ee,Gt);case U:return As(ee,Gt,at);case K:case J:return new Si(ee);case Y:return Ls(ee);case te:return Qu(ee,Gt,at);case oe:return Qi(ee)}}function bu(ee,Be){return Be=Be??r,!!Be&&(typeof ee=="number"||nt.test(ee))&&ee>-1&&ee%1==0&&ee<Be}function xr(ee){var Be=typeof ee;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?ee!=="__proto__":ee===null}function iu(ee){return!!Bn&&Bn in ee}function cA(ee){var Be=ee&&ee.constructor,at=typeof Be=="function"&&Be.prototype||$n;return ee===at}function jo(ee){if(ee!=null){try{return In.call(ee)}catch{}try{return ee+""}catch{}}return""}function Eo(ee){return Vo(ee,!0,!0)}function za(ee,Be){return ee===Be||ee!==ee&&Be!==Be}function wa(ee){return ru(ee)&&Oi.call(ee,"callee")&&(!Te.call(ee,"callee")||ei.call(ee)==a)}var aa=Array.isArray;function Dr(ee){return ee!=null&&ya(ee.length)&&!Ja(ee)}function ru(ee){return vl(ee)&&Dr(ee)}var ja=Ye||Yr;function Ja(ee){var Be=Rr(ee)?ei.call(ee):"";return Be==w||Be==O}function ya(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=r}function Rr(ee){var Be=typeof ee;return!!ee&&(Be=="object"||Be=="function")}function vl(ee){return!!ee&&typeof ee=="object"}function Zi(ee){return Dr(ee)?Vi(ee):rn(ee)}function wi(){return[]}function Yr(){return!1}n.exports=Eo}(BC,BC.exports)),BC.exports}var MQ=xQ();const N7=AA(MQ);var A4,G7;function wQ(){if(G7)return A4;G7=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,o=Object.prototype,p=o.toString;function C(W,Y,te){return W===W&&(te!==void 0&&(W=W<=te?W:te),Y!==void 0&&(W=W>=Y?W:Y)),W}function w(W){var Y=typeof W;return!!W&&(Y=="object"||Y=="function")}function O(W){return!!W&&typeof W=="object"}function U(W){return typeof W=="symbol"||O(W)&&p.call(W)==e}function K(W){if(typeof W=="number")return W;if(U(W))return n;if(w(W)){var Y=typeof W.valueOf=="function"?W.valueOf():W;W=w(Y)?Y+"":Y}if(typeof W!="string")return W===0?W:+W;W=W.replace(t,"");var te=r.test(W);return te||a.test(W)?l(W.slice(2),te?2:8):i.test(W)?n:+W}function j(W,Y,te){return te===void 0&&(te=Y,Y=void 0),te!==void 0&&(te=K(te),te=te===te?te:0),Y!==void 0&&(Y=K(Y),Y=Y===Y?Y:0),C(K(W),Y,te)}return A4=j,A4}var SQ=wQ();const W7=AA(SQ);var c4={},pC={},Q7;function EQ(){if(Q7)return pC;Q7=1,pC.byteLength=o,pC.toByteArray=C,pC.fromByteArray=U;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,a=i.length;r<a;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function l(K){var j=K.length;if(j%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var W=K.indexOf("=");W===-1&&(W=j);var Y=W===j?0:4-W%4;return[W,Y]}function o(K){var j=l(K),W=j[0],Y=j[1];return(W+Y)*3/4-Y}function p(K,j,W){return(j+W)*3/4-W}function C(K){var j,W=l(K),Y=W[0],te=W[1],J=new t(p(K,Y,te)),oe=0,ne=te>0?Y-4:Y,$;for($=0;$<ne;$+=4)j=e[K.charCodeAt($)]<<18|e[K.charCodeAt($+1)]<<12|e[K.charCodeAt($+2)]<<6|e[K.charCodeAt($+3)],J[oe++]=j>>16&255,J[oe++]=j>>8&255,J[oe++]=j&255;return te===2&&(j=e[K.charCodeAt($)]<<2|e[K.charCodeAt($+1)]>>4,J[oe++]=j&255),te===1&&(j=e[K.charCodeAt($)]<<10|e[K.charCodeAt($+1)]<<4|e[K.charCodeAt($+2)]>>2,J[oe++]=j>>8&255,J[oe++]=j&255),J}function w(K){return n[K>>18&63]+n[K>>12&63]+n[K>>6&63]+n[K&63]}function O(K,j,W){for(var Y,te=[],J=j;J<W;J+=3)Y=(K[J]<<16&16711680)+(K[J+1]<<8&65280)+(K[J+2]&255),te.push(w(Y));return te.join("")}function U(K){for(var j,W=K.length,Y=W%3,te=[],J=16383,oe=0,ne=W-Y;oe<ne;oe+=J)te.push(O(K,oe,oe+J>ne?ne:oe+J));return Y===1?(j=K[W-1],te.push(n[j>>2]+n[j<<4&63]+"==")):Y===2&&(j=(K[W-2]<<8)+K[W-1],te.push(n[j>>10]+n[j>>4&63]+n[j<<2&63]+"=")),te.join("")}return pC}var kb={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Y7;function BQ(){return Y7||(Y7=1,kb.read=function(n,e,t,i,r){var a,l,o=r*8-i-1,p=(1<<o)-1,C=p>>1,w=-7,O=t?r-1:0,U=t?-1:1,K=n[e+O];for(O+=U,a=K&(1<<-w)-1,K>>=-w,w+=o;w>0;a=a*256+n[e+O],O+=U,w-=8);for(l=a&(1<<-w)-1,a>>=-w,w+=i;w>0;l=l*256+n[e+O],O+=U,w-=8);if(a===0)a=1-C;else{if(a===p)return l?NaN:(K?-1:1)*(1/0);l=l+Math.pow(2,i),a=a-C}return(K?-1:1)*l*Math.pow(2,a-i)},kb.write=function(n,e,t,i,r,a){var l,o,p,C=a*8-r-1,w=(1<<C)-1,O=w>>1,U=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=i?0:a-1,j=i?1:-1,W=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,l=w):(l=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-l))<1&&(l--,p*=2),l+O>=1?e+=U/p:e+=U*Math.pow(2,1-O),e*p>=2&&(l++,p/=2),l+O>=w?(o=0,l=w):l+O>=1?(o=(e*p-1)*Math.pow(2,r),l=l+O):(o=e*Math.pow(2,O-1)*Math.pow(2,r),l=0));r>=8;n[t+K]=o&255,K+=j,o/=256,r-=8);for(l=l<<r|o,C+=r;C>0;n[t+K]=l&255,K+=j,l/=256,C-=8);n[t+K-j]|=W*128}),kb}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var q7;function OQ(){return q7||(q7=1,function(n){const e=EQ(),t=BQ(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=J,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=a(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const je=new Uint8Array(1),de={foo:function(){return 42}};return Object.setPrototypeOf(de,Uint8Array.prototype),Object.setPrototypeOf(je,de),je.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(je){if(je>r)throw new RangeError('The value "'+je+'" is invalid for option "size"');const de=new Uint8Array(je);return Object.setPrototypeOf(de,o.prototype),de}function o(je,de,re){if(typeof je=="number"){if(typeof de=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(je)}return p(je,de,re)}o.poolSize=8192;function p(je,de,re){if(typeof je=="string")return U(je,de);if(ArrayBuffer.isView(je))return j(je);if(je==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof je);if(Bn(je,ArrayBuffer)||je&&Bn(je.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Bn(je,SharedArrayBuffer)||je&&Bn(je.buffer,SharedArrayBuffer)))return W(je,de,re);if(typeof je=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const le=je.valueOf&&je.valueOf();if(le!=null&&le!==je)return o.from(le,de,re);const pe=Y(je);if(pe)return pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof je[Symbol.toPrimitive]=="function")return o.from(je[Symbol.toPrimitive]("string"),de,re);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof je)}o.from=function(je,de,re){return p(je,de,re)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function C(je){if(typeof je!="number")throw new TypeError('"size" argument must be of type number');if(je<0)throw new RangeError('The value "'+je+'" is invalid for option "size"')}function w(je,de,re){return C(je),je<=0?l(je):de!==void 0?typeof re=="string"?l(je).fill(de,re):l(je).fill(de):l(je)}o.alloc=function(je,de,re){return w(je,de,re)};function O(je){return C(je),l(je<0?0:te(je)|0)}o.allocUnsafe=function(je){return O(je)},o.allocUnsafeSlow=function(je){return O(je)};function U(je,de){if((typeof de!="string"||de==="")&&(de="utf8"),!o.isEncoding(de))throw new TypeError("Unknown encoding: "+de);const re=oe(je,de)|0;let le=l(re);const pe=le.write(je,de);return pe!==re&&(le=le.slice(0,pe)),le}function K(je){const de=je.length<0?0:te(je.length)|0,re=l(de);for(let le=0;le<de;le+=1)re[le]=je[le]&255;return re}function j(je){if(Bn(je,Uint8Array)){const de=new Uint8Array(je);return W(de.buffer,de.byteOffset,de.byteLength)}return K(je)}function W(je,de,re){if(de<0||je.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(je.byteLength<de+(re||0))throw new RangeError('"length" is outside of buffer bounds');let le;return de===void 0&&re===void 0?le=new Uint8Array(je):re===void 0?le=new Uint8Array(je,de):le=new Uint8Array(je,de,re),Object.setPrototypeOf(le,o.prototype),le}function Y(je){if(o.isBuffer(je)){const de=te(je.length)|0,re=l(de);return re.length===0||je.copy(re,0,0,de),re}if(je.length!==void 0)return typeof je.length!="number"||In(je.length)?l(0):K(je);if(je.type==="Buffer"&&Array.isArray(je.data))return K(je.data)}function te(je){if(je>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return je|0}function J(je){return+je!=je&&(je=0),o.alloc(+je)}o.isBuffer=function(de){return de!=null&&de._isBuffer===!0&&de!==o.prototype},o.compare=function(de,re){if(Bn(de,Uint8Array)&&(de=o.from(de,de.offset,de.byteLength)),Bn(re,Uint8Array)&&(re=o.from(re,re.offset,re.byteLength)),!o.isBuffer(de)||!o.isBuffer(re))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===re)return 0;let le=de.length,pe=re.length;for(let Te=0,We=Math.min(le,pe);Te<We;++Te)if(de[Te]!==re[Te]){le=de[Te],pe=re[Te];break}return le<pe?-1:pe<le?1:0},o.isEncoding=function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(de,re){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(de.length===0)return o.alloc(0);let le;if(re===void 0)for(re=0,le=0;le<de.length;++le)re+=de[le].length;const pe=o.allocUnsafe(re);let Te=0;for(le=0;le<de.length;++le){let We=de[le];if(Bn(We,Uint8Array))Te+We.length>pe.length?(o.isBuffer(We)||(We=o.from(We)),We.copy(pe,Te)):Uint8Array.prototype.set.call(pe,We,Te);else if(o.isBuffer(We))We.copy(pe,Te);else throw new TypeError('"list" argument must be an Array of Buffers');Te+=We.length}return pe};function oe(je,de){if(o.isBuffer(je))return je.length;if(ArrayBuffer.isView(je)||Bn(je,ArrayBuffer))return je.byteLength;if(typeof je!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof je);const re=je.length,le=arguments.length>2&&arguments[2]===!0;if(!le&&re===0)return 0;let pe=!1;for(;;)switch(de){case"ascii":case"latin1":case"binary":return re;case"utf8":case"utf-8":return on(je).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re*2;case"hex":return re>>>1;case"base64":return $n(je).length;default:if(pe)return le?-1:on(je).length;de=(""+de).toLowerCase(),pe=!0}}o.byteLength=oe;function ne(je,de,re){let le=!1;if((de===void 0||de<0)&&(de=0),de>this.length||((re===void 0||re>this.length)&&(re=this.length),re<=0)||(re>>>=0,de>>>=0,re<=de))return"";for(je||(je="utf8");;)switch(je){case"hex":return nt(this,de,re);case"utf8":case"utf-8":return Ve(this,de,re);case"ascii":return st(this,de,re);case"latin1":case"binary":return Ct(this,de,re);case"base64":return Se(this,de,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,de,re);default:if(le)throw new TypeError("Unknown encoding: "+je);je=(je+"").toLowerCase(),le=!0}}o.prototype._isBuffer=!0;function $(je,de,re){const le=je[de];je[de]=je[re],je[re]=le}o.prototype.swap16=function(){const de=this.length;if(de%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let re=0;re<de;re+=2)$(this,re,re+1);return this},o.prototype.swap32=function(){const de=this.length;if(de%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let re=0;re<de;re+=4)$(this,re,re+3),$(this,re+1,re+2);return this},o.prototype.swap64=function(){const de=this.length;if(de%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let re=0;re<de;re+=8)$(this,re,re+7),$(this,re+1,re+6),$(this,re+2,re+5),$(this,re+3,re+4);return this},o.prototype.toString=function(){const de=this.length;return de===0?"":arguments.length===0?Ve(this,0,de):ne.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(de){if(!o.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de?!0:o.compare(this,de)===0},o.prototype.inspect=function(){let de="";const re=n.INSPECT_MAX_BYTES;return de=this.toString("hex",0,re).replace(/(.{2})/g,"$1 ").trim(),this.length>re&&(de+=" ... "),"<Buffer "+de+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(de,re,le,pe,Te){if(Bn(de,Uint8Array)&&(de=o.from(de,de.offset,de.byteLength)),!o.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof de);if(re===void 0&&(re=0),le===void 0&&(le=de?de.length:0),pe===void 0&&(pe=0),Te===void 0&&(Te=this.length),re<0||le>de.length||pe<0||Te>this.length)throw new RangeError("out of range index");if(pe>=Te&&re>=le)return 0;if(pe>=Te)return-1;if(re>=le)return 1;if(re>>>=0,le>>>=0,pe>>>=0,Te>>>=0,this===de)return 0;let We=Te-pe,dt=le-re;const Ye=Math.min(We,dt),De=this.slice(pe,Te),Ze=de.slice(re,le);for(let g=0;g<Ye;++g)if(De[g]!==Ze[g]){We=De[g],dt=Ze[g];break}return We<dt?-1:dt<We?1:0};function ae(je,de,re,le,pe){if(je.length===0)return-1;if(typeof re=="string"?(le=re,re=0):re>2147483647?re=2147483647:re<-2147483648&&(re=-2147483648),re=+re,In(re)&&(re=pe?0:je.length-1),re<0&&(re=je.length+re),re>=je.length){if(pe)return-1;re=je.length-1}else if(re<0)if(pe)re=0;else return-1;if(typeof de=="string"&&(de=o.from(de,le)),o.isBuffer(de))return de.length===0?-1:G(je,de,re,le,pe);if(typeof de=="number")return de=de&255,typeof Uint8Array.prototype.indexOf=="function"?pe?Uint8Array.prototype.indexOf.call(je,de,re):Uint8Array.prototype.lastIndexOf.call(je,de,re):G(je,[de],re,le,pe);throw new TypeError("val must be string, number or Buffer")}function G(je,de,re,le,pe){let Te=1,We=je.length,dt=de.length;if(le!==void 0&&(le=String(le).toLowerCase(),le==="ucs2"||le==="ucs-2"||le==="utf16le"||le==="utf-16le")){if(je.length<2||de.length<2)return-1;Te=2,We/=2,dt/=2,re/=2}function Ye(Ze,g){return Te===1?Ze[g]:Ze.readUInt16BE(g*Te)}let De;if(pe){let Ze=-1;for(De=re;De<We;De++)if(Ye(je,De)===Ye(de,Ze===-1?0:De-Ze)){if(Ze===-1&&(Ze=De),De-Ze+1===dt)return Ze*Te}else Ze!==-1&&(De-=De-Ze),Ze=-1}else for(re+dt>We&&(re=We-dt),De=re;De>=0;De--){let Ze=!0;for(let g=0;g<dt;g++)if(Ye(je,De+g)!==Ye(de,g)){Ze=!1;break}if(Ze)return De}return-1}o.prototype.includes=function(de,re,le){return this.indexOf(de,re,le)!==-1},o.prototype.indexOf=function(de,re,le){return ae(this,de,re,le,!0)},o.prototype.lastIndexOf=function(de,re,le){return ae(this,de,re,le,!1)};function ce(je,de,re,le){re=Number(re)||0;const pe=je.length-re;le?(le=Number(le),le>pe&&(le=pe)):le=pe;const Te=de.length;le>Te/2&&(le=Te/2);let We;for(We=0;We<le;++We){const dt=parseInt(de.substr(We*2,2),16);if(In(dt))return We;je[re+We]=dt}return We}function ge(je,de,re,le){return On(on(de,je.length-re),je,re,le)}function ye(je,de,re,le){return On(Jn(de),je,re,le)}function we(je,de,re,le){return On($n(de),je,re,le)}function Oe(je,de,re,le){return On(Wt(de,je.length-re),je,re,le)}o.prototype.write=function(de,re,le,pe){if(re===void 0)pe="utf8",le=this.length,re=0;else if(le===void 0&&typeof re=="string")pe=re,le=this.length,re=0;else if(isFinite(re))re=re>>>0,isFinite(le)?(le=le>>>0,pe===void 0&&(pe="utf8")):(pe=le,le=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Te=this.length-re;if((le===void 0||le>Te)&&(le=Te),de.length>0&&(le<0||re<0)||re>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");let We=!1;for(;;)switch(pe){case"hex":return ce(this,de,re,le);case"utf8":case"utf-8":return ge(this,de,re,le);case"ascii":case"latin1":case"binary":return ye(this,de,re,le);case"base64":return we(this,de,re,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,de,re,le);default:if(We)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),We=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Se(je,de,re){return de===0&&re===je.length?e.fromByteArray(je):e.fromByteArray(je.slice(de,re))}function Ve(je,de,re){re=Math.min(je.length,re);const le=[];let pe=de;for(;pe<re;){const Te=je[pe];let We=null,dt=Te>239?4:Te>223?3:Te>191?2:1;if(pe+dt<=re){let Ye,De,Ze,g;switch(dt){case 1:Te<128&&(We=Te);break;case 2:Ye=je[pe+1],(Ye&192)===128&&(g=(Te&31)<<6|Ye&63,g>127&&(We=g));break;case 3:Ye=je[pe+1],De=je[pe+2],(Ye&192)===128&&(De&192)===128&&(g=(Te&15)<<12|(Ye&63)<<6|De&63,g>2047&&(g<55296||g>57343)&&(We=g));break;case 4:Ye=je[pe+1],De=je[pe+2],Ze=je[pe+3],(Ye&192)===128&&(De&192)===128&&(Ze&192)===128&&(g=(Te&15)<<18|(Ye&63)<<12|(De&63)<<6|Ze&63,g>65535&&g<1114112&&(We=g))}}We===null?(We=65533,dt=1):We>65535&&(We-=65536,le.push(We>>>10&1023|55296),We=56320|We&1023),le.push(We),pe+=dt}return ze(le)}const xe=4096;function ze(je){const de=je.length;if(de<=xe)return String.fromCharCode.apply(String,je);let re="",le=0;for(;le<de;)re+=String.fromCharCode.apply(String,je.slice(le,le+=xe));return re}function st(je,de,re){let le="";re=Math.min(je.length,re);for(let pe=de;pe<re;++pe)le+=String.fromCharCode(je[pe]&127);return le}function Ct(je,de,re){let le="";re=Math.min(je.length,re);for(let pe=de;pe<re;++pe)le+=String.fromCharCode(je[pe]);return le}function nt(je,de,re){const le=je.length;(!de||de<0)&&(de=0),(!re||re<0||re>le)&&(re=le);let pe="";for(let Te=de;Te<re;++Te)pe+=Oi[je[Te]];return pe}function be(je,de,re){const le=je.slice(de,re);let pe="";for(let Te=0;Te<le.length-1;Te+=2)pe+=String.fromCharCode(le[Te]+le[Te+1]*256);return pe}o.prototype.slice=function(de,re){const le=this.length;de=~~de,re=re===void 0?le:~~re,de<0?(de+=le,de<0&&(de=0)):de>le&&(de=le),re<0?(re+=le,re<0&&(re=0)):re>le&&(re=le),re<de&&(re=de);const pe=this.subarray(de,re);return Object.setPrototypeOf(pe,o.prototype),pe};function Ne(je,de,re){if(je%1!==0||je<0)throw new RangeError("offset is not uint");if(je+de>re)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(de,re,le){de=de>>>0,re=re>>>0,le||Ne(de,re,this.length);let pe=this[de],Te=1,We=0;for(;++We<re&&(Te*=256);)pe+=this[de+We]*Te;return pe},o.prototype.readUintBE=o.prototype.readUIntBE=function(de,re,le){de=de>>>0,re=re>>>0,le||Ne(de,re,this.length);let pe=this[de+--re],Te=1;for(;re>0&&(Te*=256);)pe+=this[de+--re]*Te;return pe},o.prototype.readUint8=o.prototype.readUInt8=function(de,re){return de=de>>>0,re||Ne(de,1,this.length),this[de]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(de,re){return de=de>>>0,re||Ne(de,2,this.length),this[de]|this[de+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(de,re){return de=de>>>0,re||Ne(de,2,this.length),this[de]<<8|this[de+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+this[de+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),this[de]*16777216+(this[de+1]<<16|this[de+2]<<8|this[de+3])},o.prototype.readBigUInt64LE=ei(function(de){de=de>>>0,_t(de,"offset");const re=this[de],le=this[de+7];(re===void 0||le===void 0)&&Ot(de,this.length-8);const pe=re+this[++de]*2**8+this[++de]*2**16+this[++de]*2**24,Te=this[++de]+this[++de]*2**8+this[++de]*2**16+le*2**24;return BigInt(pe)+(BigInt(Te)<<BigInt(32))}),o.prototype.readBigUInt64BE=ei(function(de){de=de>>>0,_t(de,"offset");const re=this[de],le=this[de+7];(re===void 0||le===void 0)&&Ot(de,this.length-8);const pe=re*2**24+this[++de]*2**16+this[++de]*2**8+this[++de],Te=this[++de]*2**24+this[++de]*2**16+this[++de]*2**8+le;return(BigInt(pe)<<BigInt(32))+BigInt(Te)}),o.prototype.readIntLE=function(de,re,le){de=de>>>0,re=re>>>0,le||Ne(de,re,this.length);let pe=this[de],Te=1,We=0;for(;++We<re&&(Te*=256);)pe+=this[de+We]*Te;return Te*=128,pe>=Te&&(pe-=Math.pow(2,8*re)),pe},o.prototype.readIntBE=function(de,re,le){de=de>>>0,re=re>>>0,le||Ne(de,re,this.length);let pe=re,Te=1,We=this[de+--pe];for(;pe>0&&(Te*=256);)We+=this[de+--pe]*Te;return Te*=128,We>=Te&&(We-=Math.pow(2,8*re)),We},o.prototype.readInt8=function(de,re){return de=de>>>0,re||Ne(de,1,this.length),this[de]&128?(255-this[de]+1)*-1:this[de]},o.prototype.readInt16LE=function(de,re){de=de>>>0,re||Ne(de,2,this.length);const le=this[de]|this[de+1]<<8;return le&32768?le|4294901760:le},o.prototype.readInt16BE=function(de,re){de=de>>>0,re||Ne(de,2,this.length);const le=this[de+1]|this[de]<<8;return le&32768?le|4294901760:le},o.prototype.readInt32LE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},o.prototype.readInt32BE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},o.prototype.readBigInt64LE=ei(function(de){de=de>>>0,_t(de,"offset");const re=this[de],le=this[de+7];(re===void 0||le===void 0)&&Ot(de,this.length-8);const pe=this[de+4]+this[de+5]*2**8+this[de+6]*2**16+(le<<24);return(BigInt(pe)<<BigInt(32))+BigInt(re+this[++de]*2**8+this[++de]*2**16+this[++de]*2**24)}),o.prototype.readBigInt64BE=ei(function(de){de=de>>>0,_t(de,"offset");const re=this[de],le=this[de+7];(re===void 0||le===void 0)&&Ot(de,this.length-8);const pe=(re<<24)+this[++de]*2**16+this[++de]*2**8+this[++de];return(BigInt(pe)<<BigInt(32))+BigInt(this[++de]*2**24+this[++de]*2**16+this[++de]*2**8+le)}),o.prototype.readFloatLE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),t.read(this,de,!0,23,4)},o.prototype.readFloatBE=function(de,re){return de=de>>>0,re||Ne(de,4,this.length),t.read(this,de,!1,23,4)},o.prototype.readDoubleLE=function(de,re){return de=de>>>0,re||Ne(de,8,this.length),t.read(this,de,!0,52,8)},o.prototype.readDoubleBE=function(de,re){return de=de>>>0,re||Ne(de,8,this.length),t.read(this,de,!1,52,8)};function tt(je,de,re,le,pe,Te){if(!o.isBuffer(je))throw new TypeError('"buffer" argument must be a Buffer instance');if(de>pe||de<Te)throw new RangeError('"value" argument is out of bounds');if(re+le>je.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(de,re,le,pe){if(de=+de,re=re>>>0,le=le>>>0,!pe){const dt=Math.pow(2,8*le)-1;tt(this,de,re,le,dt,0)}let Te=1,We=0;for(this[re]=de&255;++We<le&&(Te*=256);)this[re+We]=de/Te&255;return re+le},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(de,re,le,pe){if(de=+de,re=re>>>0,le=le>>>0,!pe){const dt=Math.pow(2,8*le)-1;tt(this,de,re,le,dt,0)}let Te=le-1,We=1;for(this[re+Te]=de&255;--Te>=0&&(We*=256);)this[re+Te]=de/We&255;return re+le},o.prototype.writeUint8=o.prototype.writeUInt8=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,1,255,0),this[re]=de&255,re+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,2,65535,0),this[re]=de&255,this[re+1]=de>>>8,re+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,2,65535,0),this[re]=de>>>8,this[re+1]=de&255,re+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,4,4294967295,0),this[re+3]=de>>>24,this[re+2]=de>>>16,this[re+1]=de>>>8,this[re]=de&255,re+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,4,4294967295,0),this[re]=de>>>24,this[re+1]=de>>>16,this[re+2]=de>>>8,this[re+3]=de&255,re+4};function lt(je,de,re,le,pe){bt(de,le,pe,je,re,7);let Te=Number(de&BigInt(4294967295));je[re++]=Te,Te=Te>>8,je[re++]=Te,Te=Te>>8,je[re++]=Te,Te=Te>>8,je[re++]=Te;let We=Number(de>>BigInt(32)&BigInt(4294967295));return je[re++]=We,We=We>>8,je[re++]=We,We=We>>8,je[re++]=We,We=We>>8,je[re++]=We,re}function kt(je,de,re,le,pe){bt(de,le,pe,je,re,7);let Te=Number(de&BigInt(4294967295));je[re+7]=Te,Te=Te>>8,je[re+6]=Te,Te=Te>>8,je[re+5]=Te,Te=Te>>8,je[re+4]=Te;let We=Number(de>>BigInt(32)&BigInt(4294967295));return je[re+3]=We,We=We>>8,je[re+2]=We,We=We>>8,je[re+1]=We,We=We>>8,je[re]=We,re+8}o.prototype.writeBigUInt64LE=ei(function(de,re=0){return lt(this,de,re,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=ei(function(de,re=0){return kt(this,de,re,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(de,re,le,pe){if(de=+de,re=re>>>0,!pe){const Ye=Math.pow(2,8*le-1);tt(this,de,re,le,Ye-1,-Ye)}let Te=0,We=1,dt=0;for(this[re]=de&255;++Te<le&&(We*=256);)de<0&&dt===0&&this[re+Te-1]!==0&&(dt=1),this[re+Te]=(de/We>>0)-dt&255;return re+le},o.prototype.writeIntBE=function(de,re,le,pe){if(de=+de,re=re>>>0,!pe){const Ye=Math.pow(2,8*le-1);tt(this,de,re,le,Ye-1,-Ye)}let Te=le-1,We=1,dt=0;for(this[re+Te]=de&255;--Te>=0&&(We*=256);)de<0&&dt===0&&this[re+Te+1]!==0&&(dt=1),this[re+Te]=(de/We>>0)-dt&255;return re+le},o.prototype.writeInt8=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,1,127,-128),de<0&&(de=255+de+1),this[re]=de&255,re+1},o.prototype.writeInt16LE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,2,32767,-32768),this[re]=de&255,this[re+1]=de>>>8,re+2},o.prototype.writeInt16BE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,2,32767,-32768),this[re]=de>>>8,this[re+1]=de&255,re+2},o.prototype.writeInt32LE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,4,2147483647,-2147483648),this[re]=de&255,this[re+1]=de>>>8,this[re+2]=de>>>16,this[re+3]=de>>>24,re+4},o.prototype.writeInt32BE=function(de,re,le){return de=+de,re=re>>>0,le||tt(this,de,re,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[re]=de>>>24,this[re+1]=de>>>16,this[re+2]=de>>>8,this[re+3]=de&255,re+4},o.prototype.writeBigInt64LE=ei(function(de,re=0){return lt(this,de,re,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=ei(function(de,re=0){return kt(this,de,re,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gt(je,de,re,le,pe,Te){if(re+le>je.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("Index out of range")}function St(je,de,re,le,pe){return de=+de,re=re>>>0,pe||gt(je,de,re,4),t.write(je,de,re,le,23,4),re+4}o.prototype.writeFloatLE=function(de,re,le){return St(this,de,re,!0,le)},o.prototype.writeFloatBE=function(de,re,le){return St(this,de,re,!1,le)};function Ut(je,de,re,le,pe){return de=+de,re=re>>>0,pe||gt(je,de,re,8),t.write(je,de,re,le,52,8),re+8}o.prototype.writeDoubleLE=function(de,re,le){return Ut(this,de,re,!0,le)},o.prototype.writeDoubleBE=function(de,re,le){return Ut(this,de,re,!1,le)},o.prototype.copy=function(de,re,le,pe){if(!o.isBuffer(de))throw new TypeError("argument should be a Buffer");if(le||(le=0),!pe&&pe!==0&&(pe=this.length),re>=de.length&&(re=de.length),re||(re=0),pe>0&&pe<le&&(pe=le),pe===le||de.length===0||this.length===0)return 0;if(re<0)throw new RangeError("targetStart out of bounds");if(le<0||le>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),de.length-re<pe-le&&(pe=de.length-re+le);const Te=pe-le;return this===de&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(re,le,pe):Uint8Array.prototype.set.call(de,this.subarray(le,pe),re),Te},o.prototype.fill=function(de,re,le,pe){if(typeof de=="string"){if(typeof re=="string"?(pe=re,re=0,le=this.length):typeof le=="string"&&(pe=le,le=this.length),pe!==void 0&&typeof pe!="string")throw new TypeError("encoding must be a string");if(typeof pe=="string"&&!o.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(de.length===1){const We=de.charCodeAt(0);(pe==="utf8"&&We<128||pe==="latin1")&&(de=We)}}else typeof de=="number"?de=de&255:typeof de=="boolean"&&(de=Number(de));if(re<0||this.length<re||this.length<le)throw new RangeError("Out of range index");if(le<=re)return this;re=re>>>0,le=le===void 0?this.length:le>>>0,de||(de=0);let Te;if(typeof de=="number")for(Te=re;Te<le;++Te)this[Te]=de;else{const We=o.isBuffer(de)?de:o.from(de,pe),dt=We.length;if(dt===0)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(Te=0;Te<le-re;++Te)this[Te+re]=We[Te%dt]}return this};const Fe={};function Ke(je,de,re){Fe[je]=class extends re{constructor(){super(),Object.defineProperty(this,"message",{value:de.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${je}]`,this.stack,delete this.name}get code(){return je}set code(pe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:pe,writable:!0})}toString(){return`${this.name} [${je}]: ${this.message}`}}}Ke("ERR_BUFFER_OUT_OF_BOUNDS",function(je){return je?`${je} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ke("ERR_INVALID_ARG_TYPE",function(je,de){return`The "${je}" argument must be of type number. Received type ${typeof de}`},TypeError),Ke("ERR_OUT_OF_RANGE",function(je,de,re){let le=`The value of "${je}" is out of range.`,pe=re;return Number.isInteger(re)&&Math.abs(re)>2**32?pe=Re(String(re)):typeof re=="bigint"&&(pe=String(re),(re>BigInt(2)**BigInt(32)||re<-(BigInt(2)**BigInt(32)))&&(pe=Re(pe)),pe+="n"),le+=` It must be ${de}. Received ${pe}`,le},RangeError);function Re(je){let de="",re=je.length;const le=je[0]==="-"?1:0;for(;re>=le+4;re-=3)de=`_${je.slice(re-3,re)}${de}`;return`${je.slice(0,re)}${de}`}function He(je,de,re){_t(de,"offset"),(je[de]===void 0||je[de+re]===void 0)&&Ot(de,je.length-(re+1))}function bt(je,de,re,le,pe,Te){if(je>re||je<de){const We=typeof de=="bigint"?"n":"";let dt;throw de===0||de===BigInt(0)?dt=`>= 0${We} and < 2${We} ** ${(Te+1)*8}${We}`:dt=`>= -(2${We} ** ${(Te+1)*8-1}${We}) and < 2 ** ${(Te+1)*8-1}${We}`,new Fe.ERR_OUT_OF_RANGE("value",dt,je)}He(le,pe,Te)}function _t(je,de){if(typeof je!="number")throw new Fe.ERR_INVALID_ARG_TYPE(de,"number",je)}function Ot(je,de,re){throw Math.floor(je)!==je?(_t(je,re),new Fe.ERR_OUT_OF_RANGE("offset","an integer",je)):de<0?new Fe.ERR_BUFFER_OUT_OF_BOUNDS:new Fe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${de}`,je)}const qt=/[^+/0-9A-Za-z-_]/g;function Kt(je){if(je=je.split("=")[0],je=je.trim().replace(qt,""),je.length<2)return"";for(;je.length%4!==0;)je=je+"=";return je}function on(je,de){de=de||1/0;let re;const le=je.length;let pe=null;const Te=[];for(let We=0;We<le;++We){if(re=je.charCodeAt(We),re>55295&&re<57344){if(!pe){if(re>56319){(de-=3)>-1&&Te.push(239,191,189);continue}else if(We+1===le){(de-=3)>-1&&Te.push(239,191,189);continue}pe=re;continue}if(re<56320){(de-=3)>-1&&Te.push(239,191,189),pe=re;continue}re=(pe-55296<<10|re-56320)+65536}else pe&&(de-=3)>-1&&Te.push(239,191,189);if(pe=null,re<128){if((de-=1)<0)break;Te.push(re)}else if(re<2048){if((de-=2)<0)break;Te.push(re>>6|192,re&63|128)}else if(re<65536){if((de-=3)<0)break;Te.push(re>>12|224,re>>6&63|128,re&63|128)}else if(re<1114112){if((de-=4)<0)break;Te.push(re>>18|240,re>>12&63|128,re>>6&63|128,re&63|128)}else throw new Error("Invalid code point")}return Te}function Jn(je){const de=[];for(let re=0;re<je.length;++re)de.push(je.charCodeAt(re)&255);return de}function Wt(je,de){let re,le,pe;const Te=[];for(let We=0;We<je.length&&!((de-=2)<0);++We)re=je.charCodeAt(We),le=re>>8,pe=re%256,Te.push(pe),Te.push(le);return Te}function $n(je){return e.toByteArray(Kt(je))}function On(je,de,re,le){let pe;for(pe=0;pe<le&&!(pe+re>=de.length||pe>=je.length);++pe)de[pe+re]=je[pe];return pe}function Bn(je,de){return je instanceof de||je!=null&&je.constructor!=null&&je.constructor.name!=null&&je.constructor.name===de.name}function In(je){return je!==je}const Oi=function(){const je="0123456789abcdef",de=new Array(256);for(let re=0;re<16;++re){const le=re*16;for(let pe=0;pe<16;++pe)de[le+pe]=je[re]+je[pe]}return de}();function ei(je){return typeof BigInt>"u"?Kn:je}function Kn(){throw new Error("BigInt not supported")}}(c4)),c4}var IQ=OQ();const TQ=AA(IQ);var h4,H7;function kQ(){if(H7)return h4;H7=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",i="[object GeneratorFunction]",r="[object Symbol]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,o=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/[\\^$.*+?()[\]{}|]/g,w=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,U=typeof window=="object"&&window&&window.Object===Object&&window,K=typeof self=="object"&&self&&self.Object===Object&&self,j=U||K||Function("return this")();function W(De,Ze){return De?.[Ze]}function Y(De){var Ze=!1;if(De!=null&&typeof De.toString!="function")try{Ze=!!(De+"")}catch{}return Ze}var te=Array.prototype,J=Function.prototype,oe=Object.prototype,ne=j["__core-js_shared__"],$=function(){var De=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||"");return De?"Symbol(src)_1."+De:""}(),ae=J.toString,G=oe.hasOwnProperty,ce=oe.toString,ge=RegExp("^"+ae.call(G).replace(C,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=j.Symbol,we=te.splice,Oe=$n(j,"Map"),Se=$n(Object,"create"),Ve=ye?ye.prototype:void 0,xe=Ve?Ve.toString:void 0;function ze(De){var Ze=-1,g=De?De.length:0;for(this.clear();++Ze<g;){var mt=De[Ze];this.set(mt[0],mt[1])}}function st(){this.__data__=Se?Se(null):{}}function Ct(De){return this.has(De)&&delete this.__data__[De]}function nt(De){var Ze=this.__data__;if(Se){var g=Ze[De];return g===e?void 0:g}return G.call(Ze,De)?Ze[De]:void 0}function be(De){var Ze=this.__data__;return Se?Ze[De]!==void 0:G.call(Ze,De)}function Ne(De,Ze){var g=this.__data__;return g[De]=Se&&Ze===void 0?e:Ze,this}ze.prototype.clear=st,ze.prototype.delete=Ct,ze.prototype.get=nt,ze.prototype.has=be,ze.prototype.set=Ne;function tt(De){var Ze=-1,g=De?De.length:0;for(this.clear();++Ze<g;){var mt=De[Ze];this.set(mt[0],mt[1])}}function lt(){this.__data__=[]}function kt(De){var Ze=this.__data__,g=Ot(Ze,De);if(g<0)return!1;var mt=Ze.length-1;return g==mt?Ze.pop():we.call(Ze,g,1),!0}function gt(De){var Ze=this.__data__,g=Ot(Ze,De);return g<0?void 0:Ze[g][1]}function St(De){return Ot(this.__data__,De)>-1}function Ut(De,Ze){var g=this.__data__,mt=Ot(g,De);return mt<0?g.push([De,Ze]):g[mt][1]=Ze,this}tt.prototype.clear=lt,tt.prototype.delete=kt,tt.prototype.get=gt,tt.prototype.has=St,tt.prototype.set=Ut;function Fe(De){var Ze=-1,g=De?De.length:0;for(this.clear();++Ze<g;){var mt=De[Ze];this.set(mt[0],mt[1])}}function Ke(){this.__data__={hash:new ze,map:new(Oe||tt),string:new ze}}function Re(De){return Wt(this,De).delete(De)}function He(De){return Wt(this,De).get(De)}function bt(De){return Wt(this,De).has(De)}function _t(De,Ze){return Wt(this,De).set(De,Ze),this}Fe.prototype.clear=Ke,Fe.prototype.delete=Re,Fe.prototype.get=He,Fe.prototype.has=bt,Fe.prototype.set=_t;function Ot(De,Ze){for(var g=De.length;g--;)if(de(De[g][0],Ze))return g;return-1}function qt(De,Ze){Ze=On(Ze,De)?[Ze]:Jn(Ze);for(var g=0,mt=Ze.length;De!=null&&g<mt;)De=De[ei(Ze[g++])];return g&&g==mt?De:void 0}function Kt(De){if(!pe(De)||In(De))return!1;var Ze=le(De)||Y(De)?ge:O;return Ze.test(Kn(De))}function on(De){if(typeof De=="string")return De;if(We(De))return xe?xe.call(De):"";var Ze=De+"";return Ze=="0"&&1/De==-1/0?"-0":Ze}function Jn(De){return re(De)?De:Oi(De)}function Wt(De,Ze){var g=De.__data__;return Bn(Ze)?g[typeof Ze=="string"?"string":"hash"]:g.map}function $n(De,Ze){var g=W(De,Ze);return Kt(g)?g:void 0}function On(De,Ze){if(re(De))return!1;var g=typeof De;return g=="number"||g=="symbol"||g=="boolean"||De==null||We(De)?!0:l.test(De)||!a.test(De)||Ze!=null&&De in Object(Ze)}function Bn(De){var Ze=typeof De;return Ze=="string"||Ze=="number"||Ze=="symbol"||Ze=="boolean"?De!=="__proto__":De===null}function In(De){return!!$&&$ in De}var Oi=je(function(De){De=dt(De);var Ze=[];return o.test(De)&&Ze.push(""),De.replace(p,function(g,mt,ht,Tt){Ze.push(ht?Tt.replace(w,"$1"):mt||g)}),Ze});function ei(De){if(typeof De=="string"||We(De))return De;var Ze=De+"";return Ze=="0"&&1/De==-1/0?"-0":Ze}function Kn(De){if(De!=null){try{return ae.call(De)}catch{}try{return De+""}catch{}}return""}function je(De,Ze){if(typeof De!="function"||Ze&&typeof Ze!="function")throw new TypeError(n);var g=function(){var mt=arguments,ht=Ze?Ze.apply(this,mt):mt[0],Tt=g.cache;if(Tt.has(ht))return Tt.get(ht);var it=De.apply(this,mt);return g.cache=Tt.set(ht,it),it};return g.cache=new(je.Cache||Fe),g}je.Cache=Fe;function de(De,Ze){return De===Ze||De!==De&&Ze!==Ze}var re=Array.isArray;function le(De){var Ze=pe(De)?ce.call(De):"";return Ze==t||Ze==i}function pe(De){var Ze=typeof De;return!!De&&(Ze=="object"||Ze=="function")}function Te(De){return!!De&&typeof De=="object"}function We(De){return typeof De=="symbol"||Te(De)&&ce.call(De)==r}function dt(De){return De==null?"":on(De)}function Ye(De,Ze,g){var mt=De==null?void 0:qt(De,Ze);return mt===void 0?g:mt}return h4=Ye,h4}var DQ=kQ();const RQ=AA(DQ);var OC={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var PQ=OC.exports,V7;function KQ(){return V7||(V7=1,function(n,e){(function(){var t,i="4.17.21",r=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",C=500,w="__lodash_placeholder__",O=1,U=2,K=4,j=1,W=2,Y=1,te=2,J=4,oe=8,ne=16,$=32,ae=64,G=128,ce=256,ge=512,ye=30,we="...",Oe=800,Se=16,Ve=1,xe=2,ze=3,st=1/0,Ct=9007199254740991,nt=17976931348623157e292,be=NaN,Ne=4294967295,tt=Ne-1,lt=Ne>>>1,kt=[["ary",G],["bind",Y],["bindKey",te],["curry",oe],["curryRight",ne],["flip",ge],["partial",$],["partialRight",ae],["rearg",ce]],gt="[object Arguments]",St="[object Array]",Ut="[object AsyncFunction]",Fe="[object Boolean]",Ke="[object Date]",Re="[object DOMException]",He="[object Error]",bt="[object Function]",_t="[object GeneratorFunction]",Ot="[object Map]",qt="[object Number]",Kt="[object Null]",on="[object Object]",Jn="[object Promise]",Wt="[object Proxy]",$n="[object RegExp]",On="[object Set]",Bn="[object String]",In="[object Symbol]",Oi="[object Undefined]",ei="[object WeakMap]",Kn="[object WeakSet]",je="[object ArrayBuffer]",de="[object DataView]",re="[object Float32Array]",le="[object Float64Array]",pe="[object Int8Array]",Te="[object Int16Array]",We="[object Int32Array]",dt="[object Uint8Array]",Ye="[object Uint8ClampedArray]",De="[object Uint16Array]",Ze="[object Uint32Array]",g=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,ht=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tt=/&(?:amp|lt|gt|quot|#39);/g,it=/[&<>"']/g,en=RegExp(Tt.source),Dn=RegExp(it.source),Mn=/<%-([\s\S]+?)%>/g,ii=/<%([\s\S]+?)%>/g,Wn=/<%=([\s\S]+?)%>/g,qi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,er=/^\w*$/,Ei=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hi=/[\\^$.*+?()[\]{}|]/g,ti=RegExp(hi.source),Wi=/^\s+/,wn=/\s/,uo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hi=/\{\n\/\* \[wrapped with (.+)\] \*/,ma=/,? & /,To=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zn=/[()=,{}\[\]\/\s]/,lr=/\\(\\)?/g,zi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vr=/\w*$/,Fa=/^[-+]0x[0-9a-f]+$/i,Tr=/^0b[01]+$/i,ji=/^\[object .+?Constructor\]$/,gl=/^0o[0-7]+$/i,ka=/^(?:0|[1-9]\d*)$/,wo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xa=/($^)/,Il=/['\n\r\u2028\u2029\\]/g,Ao="\\ud800-\\udfff",Wu="\\u0300-\\u036f",Da="\\ufe20-\\ufe2f",Vi="\\u20d0-\\u20ff",Mi=Wu+Da+Vi,us="\\u2700-\\u27bf",Ma="a-z\\xdf-\\xf6\\xf8-\\xff",Vo="\\xac\\xb1\\xd7\\xf7",$e="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Et="\\u2000-\\u206f",xn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Gn="A-Z\\xc0-\\xd6\\xd8-\\xde",rn="\\ufe0e\\ufe0f",si=Vo+$e+Et+xn,eo="[']",So="["+Ao+"]",As="["+si+"]",Ls="["+Mi+"]",Qu="\\d+",Qi="["+us+"]",RA="["+Ma+"]",_u="[^"+Ao+si+Qu+us+Ma+Gn+"]",yl="\\ud83c[\\udffb-\\udfff]",Ss="(?:"+Ls+"|"+yl+")",xc="[^"+Ao+"]",Ys="(?:\\ud83c[\\udde6-\\uddff]){2}",$o="[\\ud800-\\udbff][\\udc00-\\udfff]",ko="["+Gn+"]",dr="\\u200d",Kl="(?:"+RA+"|"+_u+")",ga="(?:"+ko+"|"+_u+")",Ul="(?:"+eo+"(?:d|ll|m|re|s|t|ve))?",bu="(?:"+eo+"(?:D|LL|M|RE|S|T|VE))?",xr=Ss+"?",iu="["+rn+"]?",cA="(?:"+dr+"(?:"+[xc,Ys,$o].join("|")+")"+iu+xr+")*",jo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Eo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",za=iu+xr+cA,wa="(?:"+[Qi,Ys,$o].join("|")+")"+za,aa="(?:"+[xc+Ls+"?",Ls,Ys,$o,So].join("|")+")",Dr=RegExp(eo,"g"),ru=RegExp(Ls,"g"),ja=RegExp(yl+"(?="+yl+")|"+aa+za,"g"),Ja=RegExp([ko+"?"+RA+"+"+Ul+"(?="+[As,ko,"$"].join("|")+")",ga+"+"+bu+"(?="+[As,ko+Kl,"$"].join("|")+")",ko+"?"+Kl+"+"+Ul,ko+"+"+bu,Eo,jo,Qu,wa].join("|"),"g"),ya=RegExp("["+dr+Ao+Mi+rn+"]"),Rr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zi=-1,wi={};wi[re]=wi[le]=wi[pe]=wi[Te]=wi[We]=wi[dt]=wi[Ye]=wi[De]=wi[Ze]=!0,wi[gt]=wi[St]=wi[je]=wi[Fe]=wi[de]=wi[Ke]=wi[He]=wi[bt]=wi[Ot]=wi[qt]=wi[on]=wi[$n]=wi[On]=wi[Bn]=wi[ei]=!1;var Yr={};Yr[gt]=Yr[St]=Yr[je]=Yr[de]=Yr[Fe]=Yr[Ke]=Yr[re]=Yr[le]=Yr[pe]=Yr[Te]=Yr[We]=Yr[Ot]=Yr[qt]=Yr[on]=Yr[$n]=Yr[On]=Yr[Bn]=Yr[In]=Yr[dt]=Yr[Ye]=Yr[De]=Yr[Ze]=!0,Yr[He]=Yr[bt]=Yr[ei]=!1;var ee={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},at={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Si=parseFloat,Xn=parseInt,$i=typeof window=="object"&&window&&window.Object===Object&&window,or=typeof self=="object"&&self&&self.Object===Object&&self,Ri=$i||or||Function("return this")(),Xi=e&&!e.nodeType&&e,to=Xi&&!0&&n&&!n.nodeType&&n,co=to&&to.exports===Xi,Ar=co&&$i.process,mr=function(){try{var Zt=to&&to.require&&to.require("util").types;return Zt||Ar&&Ar.binding&&Ar.binding("util")}catch{}}(),ho=mr&&mr.isArrayBuffer,No=mr&&mr.isDate,jr=mr&&mr.isMap,qs=mr&&mr.isRegExp,Ll=mr&&mr.isSet,Yu=mr&&mr.isTypedArray;function ps(Zt,Sn,vn){switch(vn.length){case 0:return Zt.call(Sn);case 1:return Zt.call(Sn,vn[0]);case 2:return Zt.call(Sn,vn[0],vn[1]);case 3:return Zt.call(Sn,vn[0],vn[1],vn[2])}return Zt.apply(Sn,vn)}function gd(Zt,Sn,vn,Ti){for(var Sr=-1,Oo=Zt==null?0:Zt.length;++Sr<Oo;){var Hs=Zt[Sr];Sn(Ti,Hs,vn(Hs),Zt)}return Ti}function Ra(Zt,Sn){for(var vn=-1,Ti=Zt==null?0:Zt.length;++vn<Ti&&Sn(Zt[vn],vn,Zt)!==!1;);return Zt}function yd(Zt,Sn){for(var vn=Zt==null?0:Zt.length;vn--&&Sn(Zt[vn],vn,Zt)!==!1;);return Zt}function PA(Zt,Sn){for(var vn=-1,Ti=Zt==null?0:Zt.length;++vn<Ti;)if(!Sn(Zt[vn],vn,Zt))return!1;return!0}function qu(Zt,Sn){for(var vn=-1,Ti=Zt==null?0:Zt.length,Sr=0,Oo=[];++vn<Ti;){var Hs=Zt[vn];Sn(Hs,vn,Zt)&&(Oo[Sr++]=Hs)}return Oo}function gh(Zt,Sn){var vn=Zt==null?0:Zt.length;return!!vn&&es(Zt,Sn,0)>-1}function jh(Zt,Sn,vn){for(var Ti=-1,Sr=Zt==null?0:Zt.length;++Ti<Sr;)if(vn(Sn,Zt[Ti]))return!0;return!1}function po(Zt,Sn){for(var vn=-1,Ti=Zt==null?0:Zt.length,Sr=Array(Ti);++vn<Ti;)Sr[vn]=Sn(Zt[vn],vn,Zt);return Sr}function rc(Zt,Sn){for(var vn=-1,Ti=Sn.length,Sr=Zt.length;++vn<Ti;)Zt[Sr+vn]=Sn[vn];return Zt}function vd(Zt,Sn,vn,Ti){var Sr=-1,Oo=Zt==null?0:Zt.length;for(Ti&&Oo&&(vn=Zt[++Sr]);++Sr<Oo;)vn=Sn(vn,Zt[Sr],Sr,Zt);return vn}function dm(Zt,Sn,vn,Ti){var Sr=Zt==null?0:Zt.length;for(Ti&&Sr&&(vn=Zt[--Sr]);Sr--;)vn=Sn(vn,Zt[Sr],Sr,Zt);return vn}function yh(Zt,Sn){for(var vn=-1,Ti=Zt==null?0:Zt.length;++vn<Ti;)if(Sn(Zt[vn],vn,Zt))return!0;return!1}var Cd=Nh("length");function r0(Zt){return Zt.split("")}function Tf(Zt){return Zt.match(To)||[]}function kf(Zt,Sn,vn){var Ti;return vn(Zt,function(Sr,Oo,Hs){if(Sn(Sr,Oo,Hs))return Ti=Oo,!1}),Ti}function Hu(Zt,Sn,vn,Ti){for(var Sr=Zt.length,Oo=vn+(Ti?1:-1);Ti?Oo--:++Oo<Sr;)if(Sn(Zt[Oo],Oo,Zt))return Oo;return-1}function es(Zt,Sn,vn){return Sn===Sn?Kf(Zt,Sn,vn):Hu(Zt,Fl,vn)}function _d(Zt,Sn,vn,Ti){for(var Sr=vn-1,Oo=Zt.length;++Sr<Oo;)if(Ti(Zt[Sr],Sn))return Sr;return-1}function Fl(Zt){return Zt!==Zt}function bd(Zt,Sn){var vn=Zt==null?0:Zt.length;return vn?vh(Zt,Sn)/vn:be}function Nh(Zt){return function(Sn){return Sn==null?t:Sn[Zt]}}function qc(Zt){return function(Sn){return Zt==null?t:Zt[Sn]}}function Gh(Zt,Sn,vn,Ti,Sr){return Sr(Zt,function(Oo,Hs,Do){vn=Ti?(Ti=!1,Oo):Sn(vn,Oo,Hs,Do)}),vn}function Df(Zt,Sn){var vn=Zt.length;for(Zt.sort(Sn);vn--;)Zt[vn]=Zt[vn].value;return Zt}function vh(Zt,Sn){for(var vn,Ti=-1,Sr=Zt.length;++Ti<Sr;){var Oo=Sn(Zt[Ti]);Oo!==t&&(vn=vn===t?Oo:vn+Oo)}return vn}function Ch(Zt,Sn){for(var vn=-1,Ti=Array(Zt);++vn<Zt;)Ti[vn]=Sn(vn);return Ti}function Wh(Zt,Sn){return po(Sn,function(vn){return[vn,Zt[vn]]})}function Rf(Zt){return Zt&&Zt.slice(0,UA(Zt)+1).replace(Wi,"")}function ou(Zt){return function(Sn){return Zt(Sn)}}function Pf(Zt,Sn){return po(Sn,function(vn){return Zt[vn]})}function oc(Zt,Sn){return Zt.has(Sn)}function au(Zt,Sn){for(var vn=-1,Ti=Zt.length;++vn<Ti&&es(Sn,Zt[vn],0)>-1;);return vn}function Mc(Zt,Sn){for(var vn=Zt.length;vn--&&es(Sn,Zt[vn],0)>-1;);return vn}function xd(Zt,Sn){for(var vn=Zt.length,Ti=0;vn--;)Zt[vn]===Sn&&++Ti;return Ti}var Md=qc(ee),KA=qc(Be);function Vu(Zt){return"\\"+Gt[Zt]}function Qh(Zt,Sn){return Zt==null?t:Zt[Sn]}function wc(Zt){return ya.test(Zt)}function Yh(Zt){return Rr.test(Zt)}function fm(Zt){for(var Sn,vn=[];!(Sn=Zt.next()).done;)vn.push(Sn.value);return vn}function Hc(Zt){var Sn=-1,vn=Array(Zt.size);return Zt.forEach(function(Ti,Sr){vn[++Sn]=[Sr,Ti]}),vn}function Vd(Zt,Sn){return function(vn){return Zt(Sn(vn))}}function hA(Zt,Sn){for(var vn=-1,Ti=Zt.length,Sr=0,Oo=[];++vn<Ti;){var Hs=Zt[vn];(Hs===Sn||Hs===w)&&(Zt[vn]=w,Oo[Sr++]=vn)}return Oo}function $u(Zt){var Sn=-1,vn=Array(Zt.size);return Zt.forEach(function(Ti){vn[++Sn]=Ti}),vn}function Mp(Zt){var Sn=-1,vn=Array(Zt.size);return Zt.forEach(function(Ti){vn[++Sn]=[Ti,Ti]}),vn}function Kf(Zt,Sn,vn){for(var Ti=vn-1,Sr=Zt.length;++Ti<Sr;)if(Zt[Ti]===Sn)return Ti;return-1}function xu(Zt,Sn,vn){for(var Ti=vn+1;Ti--;)if(Zt[Ti]===Sn)return Ti;return Ti}function ac(Zt){return wc(Zt)?_h(Zt):Cd(Zt)}function Mu(Zt){return wc(Zt)?wd(Zt):r0(Zt)}function UA(Zt){for(var Sn=Zt.length;Sn--&&wn.test(Zt.charAt(Sn)););return Sn}var Bo=qc(at);function _h(Zt){for(var Sn=ja.lastIndex=0;ja.test(Zt);)++Sn;return Sn}function wd(Zt){return Zt.match(ja)||[]}function wp(Zt){return Zt.match(Ja)||[]}var Sc=function Zt(Sn){Sn=Sn==null?Ri:zl.defaults(Ri.Object(),Sn,zl.pick(Ri,vl));var vn=Sn.Array,Ti=Sn.Date,Sr=Sn.Error,Oo=Sn.Function,Hs=Sn.Math,Do=Sn.Object,Vc=Sn.RegExp,$d=Sn.String,su=Sn.TypeError,Sd=vn.prototype,dA=Oo.prototype,wu=Do.prototype,Su=Sn["__core-js_shared__"],Tl=dA.toString,Go=wu.hasOwnProperty,fA=0,qh=function(){var x=/[^.]+$/.exec(Su&&Su.keys&&Su.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),Na=wu.toString,Vs=Tl.call(Do),Es=Ri._,Zu=Vc("^"+Tl.call(Go).replace(hi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jl=co?Sn.Buffer:t,Eu=Sn.Symbol,sc=Sn.Uint8Array,Bu=jl?jl.allocUnsafe:t,Ec=Vd(Do.getPrototypeOf,Do),bh=Do.create,kr=wu.propertyIsEnumerable,lc=Sd.splice,Xu=Eu?Eu.isConcatSpreadable:t,Bc=Eu?Eu.iterator:t,Bs=Eu?Eu.toStringTag:t,xh=function(){try{var x=kh(Do,"defineProperty");return x({},"",{}),x}catch{}}(),Ed=Sn.clearTimeout!==Ri.clearTimeout&&Sn.clearTimeout,pA=Ti&&Ti.now!==Ri.Date.now&&Ti.now,Bd=Sn.setTimeout!==Ri.setTimeout&&Sn.setTimeout,$c=Hs.ceil,Ou=Hs.floor,LA=Do.getOwnPropertySymbols,Mh=jl?jl.isBuffer:t,Hh=Sn.isFinite,Iu=Sd.join,kl=Vd(Do.keys,Do),Wo=Hs.max,sa=Hs.min,FA=Ti.now,zA=Sn.parseInt,Oc=Hs.random,Zc=Sd.reverse,Xc=kh(Sn,"DataView"),va=kh(Sn,"Map"),_a=kh(Sn,"Promise"),Zr=kh(Sn,"Set"),lu=kh(Sn,"WeakMap"),Fs=kh(Do,"create"),Jc=lu&&new lu,mA={},Zd=vs(Xc),ms=vs(va),rl=vs(_a),zs=vs(Zr),Xd=vs(lu),jA=Eu?Eu.prototype:t,wh=jA?jA.valueOf:t,Ju=jA?jA.toString:t;function rt(x){if(ul(x)&&!Hr(x)&&!(x instanceof gr)){if(x instanceof Zo)return x;if(Go.call(x,"__wrapped__"))return ha(x)}return new Zo(x)}var $s=function(){function x(){}return function(D){if(!ll(D))return{};if(bh)return bh(D);x.prototype=D;var V=new x;return x.prototype=t,V}}();function Ga(){}function Zo(x,D){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!D,this.__index__=0,this.__values__=t}rt.templateSettings={escape:Mn,evaluate:ii,interpolate:Wn,variable:"",imports:{_:rt}},rt.prototype=Ga.prototype,rt.prototype.constructor=rt,Zo.prototype=$s(Ga.prototype),Zo.prototype.constructor=Zo;function gr(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ne,this.__views__=[]}function gs(){var x=new gr(this.__wrapped__);return x.__actions__=_o(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=_o(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=_o(this.__views__),x}function eh(){if(this.__filtered__){var x=new gr(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function Sh(){var x=this.__wrapped__.value(),D=this.__dir__,V=Hr(x),Ce=D<0,Je=V?x.length:0,pt=gm(0,Je,this.__views__),Lt=pt.start,Vt=pt.end,sn=Vt-Lt,Yn=Ce?Vt:Lt-1,Hn=this.__iteratees__,Ai=Hn.length,Ni=0,wr=sa(sn,this.__takeCount__);if(!V||!Ce&&Je==sn&&wr==sn)return Pa(x,this.__actions__);var oo=[];e:for(;sn--&&Ni<wr;){Yn+=D;for(var da=-1,ao=x[Yn];++da<Ai;){var Ia=Hn[da],Ha=Ia.iteratee,mf=Ia.type,Ad=Ha(ao);if(mf==xe)ao=Ad;else if(!Ad){if(mf==Ve)continue e;break e}}oo[Ni++]=ao}return oo}gr.prototype=$s(Ga.prototype),gr.prototype.constructor=gr;function Ro(x){var D=-1,V=x==null?0:x.length;for(this.clear();++D<V;){var Ce=x[D];this.set(Ce[0],Ce[1])}}function th(){this.__data__=Fs?Fs(null):{},this.size=0}function Tu(x){var D=this.has(x)&&delete this.__data__[x];return this.size-=D?1:0,D}function Od(x){var D=this.__data__;if(Fs){var V=D[x];return V===p?t:V}return Go.call(D,x)?D[x]:t}function Jd(x){var D=this.__data__;return Fs?D[x]!==t:Go.call(D,x)}function Sp(x,D){var V=this.__data__;return this.size+=this.has(x)?0:1,V[x]=Fs&&D===t?p:D,this}Ro.prototype.clear=th,Ro.prototype.delete=Tu,Ro.prototype.get=Od,Ro.prototype.has=Jd,Ro.prototype.set=Sp;function ba(x){var D=-1,V=x==null?0:x.length;for(this.clear();++D<V;){var Ce=x[D];this.set(Ce[0],Ce[1])}}function Eh(){this.__data__=[],this.size=0}function nh(x){var D=this.__data__,V=uc(D,x);if(V<0)return!1;var Ce=D.length-1;return V==Ce?D.pop():lc.call(D,V,1),--this.size,!0}function NA(x){var D=this.__data__,V=uc(D,x);return V<0?t:D[V][1]}function ef(x){return uc(this.__data__,x)>-1}function ol(x,D){var V=this.__data__,Ce=uc(V,x);return Ce<0?(++this.size,V.push([x,D])):V[Ce][1]=D,this}ba.prototype.clear=Eh,ba.prototype.delete=nh,ba.prototype.get=NA,ba.prototype.has=ef,ba.prototype.set=ol;function ts(x){var D=-1,V=x==null?0:x.length;for(this.clear();++D<V;){var Ce=x[D];this.set(Ce[0],Ce[1])}}function Vh(){this.size=0,this.__data__={hash:new Ro,map:new(va||ba),string:new Ro}}function uu(x){var D=lf(this,x).delete(x);return this.size-=D?1:0,D}function Id(x){return lf(this,x).get(x)}function tf(x){return lf(this,x).has(x)}function Cl(x,D){var V=lf(this,x),Ce=V.size;return V.set(x,D),this.size+=V.size==Ce?0:1,this}ts.prototype.clear=Vh,ts.prototype.delete=uu,ts.prototype.get=Id,ts.prototype.has=tf,ts.prototype.set=Cl;function Ic(x){var D=-1,V=x==null?0:x.length;for(this.__data__=new ts;++D<V;)this.add(x[D])}function Uf(x){return this.__data__.set(x,p),this}function $h(x){return this.__data__.has(x)}Ic.prototype.add=Ic.prototype.push=Uf,Ic.prototype.has=$h;function Ca(x){var D=this.__data__=new ba(x);this.size=D.size}function Xr(){this.__data__=new ba,this.size=0}function ci(x){var D=this.__data__,V=D.delete(x);return this.size=D.size,V}function GA(x){return this.__data__.get(x)}function WA(x){return this.__data__.has(x)}function Zh(x,D){var V=this.__data__;if(V instanceof ba){var Ce=V.__data__;if(!va||Ce.length<r-1)return Ce.push([x,D]),this.size=++V.size,this;V=this.__data__=new ts(Ce)}return V.set(x,D),this.size=V.size,this}Ca.prototype.clear=Xr,Ca.prototype.delete=ci,Ca.prototype.get=GA,Ca.prototype.has=WA,Ca.prototype.set=Zh;function Tc(x,D){var V=Hr(x),Ce=!V&&Ud(x),Je=!V&&!Ce&&ff(x),pt=!V&&!Ce&&!Je&&Dm(x),Lt=V||Ce||Je||pt,Vt=Lt?Ch(x.length,$d):[],sn=Vt.length;for(var Yn in x)(D||Go.call(x,Yn))&&!(Lt&&(Yn=="length"||Je&&(Yn=="offset"||Yn=="parent")||pt&&(Yn=="buffer"||Yn=="byteLength"||Yn=="byteOffset")||B(Yn,sn)))&&Vt.push(Yn);return Vt}function gA(x){var D=x.length;return D?x[ct(0,D-1)]:t}function nf(x,D){return rs(_o(x),eA(D,0,x.length))}function no(x){return rs(_o(x))}function Nl(x,D,V){(V!==t&&!Zl(x[D],V)||V===t&&!(D in x))&&yA(x,D,V)}function Bh(x,D,V){var Ce=x[D];(!(Go.call(x,D)&&Zl(Ce,V))||V===t&&!(D in x))&&yA(x,D,V)}function uc(x,D){for(var V=x.length;V--;)if(Zl(x[V][0],D))return V;return-1}function ku(x,D,V,Ce){return Wl(x,function(Je,pt,Lt){D(Ce,Je,V(Je),Lt)}),Ce}function Ac(x,D){return x&&Xo(D,ie(D),x)}function Oh(x,D){return x&&Xo(D,ue(D),x)}function yA(x,D,V){D=="__proto__"&&xh?xh(x,D,{configurable:!0,enumerable:!0,value:V,writable:!0}):x[D]=V}function ih(x,D){for(var V=-1,Ce=D.length,Je=vn(Ce),pt=x==null;++V<Ce;)Je[V]=pt?t:y(x,D[V]);return Je}function eA(x,D,V){return x===x&&(V!==t&&(x=x<=V?x:V),D!==t&&(x=x>=D?x:D)),x}function _l(x,D,V,Ce,Je,pt){var Lt,Vt=D&O,sn=D&U,Yn=D&K;if(V&&(Lt=Je?V(x,Ce,Je,pt):V(x)),Lt!==t)return Lt;if(!ll(x))return x;var Hn=Hr(x);if(Hn){if(Lt=o0(x),!Vt)return _o(x,Lt)}else{var Ai=al(x),Ni=Ai==bt||Ai==_t;if(ff(x))return dc(x,Vt);if(Ai==on||Ai==gt||Ni&&!Je){if(Lt=sn||Ni?{}:a0(x),!Vt)return sn?ys(x,Oh(Lt,x)):hu(x,Ac(Lt,x))}else{if(!Yr[Ai])return Je?x:{};Lt=uf(x,Ai,Vt)}}pt||(pt=new Ca);var wr=pt.get(x);if(wr)return wr;pt.set(x,Lt),y0(x)?x.forEach(function(ao){Lt.add(_l(ao,D,V,ao,x,pt))}):sd(x)&&x.forEach(function(ao,Ia){Lt.set(Ia,_l(ao,D,V,Ia,x,pt))});var oo=Yn?sn?Op:Qf:sn?ue:ie,da=Hn?t:oo(x);return Ra(da||x,function(ao,Ia){da&&(Ia=ao,ao=x[Ia]),Bh(Lt,Ia,_l(ao,D,V,Ia,x,pt))}),Lt}function Ep(x){var D=ie(x);return function(V){return rf(V,x,D)}}function rf(x,D,V){var Ce=V.length;if(x==null)return!Ce;for(x=Do(x);Ce--;){var Je=V[Ce],pt=D[Je],Lt=x[Je];if(Lt===t&&!(Je in x)||!pt(Lt))return!1}return!0}function Gl(x,D,V){if(typeof x!="function")throw new su(l);return ar(function(){x.apply(t,V)},D)}function Po(x,D,V,Ce){var Je=-1,pt=gh,Lt=!0,Vt=x.length,sn=[],Yn=D.length;if(!Vt)return sn;V&&(D=po(D,ou(V))),Ce?(pt=jh,Lt=!1):D.length>=r&&(pt=oc,Lt=!1,D=new Ic(D));e:for(;++Je<Vt;){var Hn=x[Je],Ai=V==null?Hn:V(Hn);if(Hn=Ce||Hn!==0?Hn:0,Lt&&Ai===Ai){for(var Ni=Yn;Ni--;)if(D[Ni]===Ai)continue e;sn.push(Hn)}else pt(D,Ai,Ce)||sn.push(Hn)}return sn}var Wl=Ru(ki),Xh=Ru(kc,!0);function Lf(x,D){var V=!0;return Wl(x,function(Ce,Je,pt){return V=!!D(Ce,Je,pt),V}),V}function vA(x,D,V){for(var Ce=-1,Je=x.length;++Ce<Je;){var pt=x[Ce],Lt=D(pt);if(Lt!=null&&(Vt===t?Lt===Lt&&!rA(Lt):V(Lt,Vt)))var Vt=Lt,sn=pt}return sn}function io(x,D,V,Ce){var Je=x.length;for(V=ro(V),V<0&&(V=-V>Je?0:Je+V),Ce=Ce===t||Ce>Je?Je:ro(Ce),Ce<0&&(Ce+=Je),Ce=V>Ce?0:Ld(Ce);V<Ce;)x[V++]=D;return x}function Ko(x,D){var V=[];return Wl(x,function(Ce,Je,pt){D(Ce,Je,pt)&&V.push(Ce)}),V}function Pr(x,D,V,Ce,Je){var pt=-1,Lt=x.length;for(V||(V=v),Je||(Je=[]);++pt<Lt;){var Vt=x[pt];D>0&&V(Vt)?D>1?Pr(Vt,D-1,V,Ce,Je):rc(Je,Vt):Ce||(Je[Je.length]=Vt)}return Je}var QA=Hl(),Ii=Hl(!0);function ki(x,D){return x&&QA(x,D,ie)}function kc(x,D){return x&&Ii(x,D,ie)}function Du(x,D){return qu(D,function(V){return Dh(x[V])})}function Au(x,D){D=Qa(D,x);for(var V=0,Ce=D.length;x!=null&&V<Ce;)x=x[qr(D[V++])];return V&&V==Ce?x:t}function la(x,D,V){var Ce=D(x);return Hr(x)?Ce:rc(Ce,V(x))}function mo(x){return x==null?x===t?Oi:Kt:Bs&&Bs in Do(x)?mm(x):Rn(x)}function Ql(x,D){return x>D}function Ff(x,D){return x!=null&&Go.call(x,D)}function Jh(x,D){return x!=null&&D in Do(x)}function Uo(x,D,V){return x>=sa(D,V)&&x<Wo(D,V)}function Wa(x,D,V){for(var Ce=V?jh:gh,Je=x[0].length,pt=x.length,Lt=pt,Vt=vn(pt),sn=1/0,Yn=[];Lt--;){var Hn=x[Lt];Lt&&D&&(Hn=po(Hn,ou(D))),sn=sa(Hn.length,sn),Vt[Lt]=!V&&(D||Je>=120&&Hn.length>=120)?new Ic(Lt&&Hn):t}Hn=x[0];var Ai=-1,Ni=Vt[0];e:for(;++Ai<Je&&Yn.length<sn;){var wr=Hn[Ai],oo=D?D(wr):wr;if(wr=V||wr!==0?wr:0,!(Ni?oc(Ni,oo):Ce(Yn,oo,V))){for(Lt=pt;--Lt;){var da=Vt[Lt];if(!(da?oc(da,oo):Ce(x[Lt],oo,V)))continue e}Ni&&Ni.push(oo),Yn.push(wr)}}return Yn}function ed(x,D,V,Ce){return ki(x,function(Je,pt,Lt){D(Ce,V(Je),pt,Lt)}),Ce}function CA(x,D,V){D=Qa(D,x),x=mi(x,D);var Ce=x==null?x:x[qr(SA(D))];return Ce==null?t:ps(Ce,x,V)}function Dc(x){return ul(x)&&mo(x)==gt}function Zs(x){return ul(x)&&mo(x)==je}function ns(x){return ul(x)&&mo(x)==Ke}function cu(x,D,V,Ce,Je){return x===D?!0:x==null||D==null||!ul(x)&&!ul(D)?x!==x&&D!==D:Rc(x,D,V,Ce,cu,Je)}function Rc(x,D,V,Ce,Je,pt){var Lt=Hr(x),Vt=Hr(D),sn=Lt?St:al(x),Yn=Vt?St:al(D);sn=sn==gt?on:sn,Yn=Yn==gt?on:Yn;var Hn=sn==on,Ai=Yn==on,Ni=sn==Yn;if(Ni&&ff(x)){if(!ff(D))return!1;Lt=!0,Hn=!1}if(Ni&&!Hn)return pt||(pt=new Ca),Lt||Dm(x)?iA(x,D,V,Ce,Je,pt):kd(x,D,sn,V,Ce,Je,pt);if(!(V&j)){var wr=Hn&&Go.call(x,"__wrapped__"),oo=Ai&&Go.call(D,"__wrapped__");if(wr||oo){var da=wr?x.value():x,ao=oo?D.value():D;return pt||(pt=new Ca),Je(da,ao,V,Ce,pt)}}return Ni?(pt||(pt=new Ca),Xs(x,D,V,Ce,Je,pt)):!1}function cc(x){return ul(x)&&al(x)==Ot}function hc(x,D,V,Ce){var Je=V.length,pt=Je,Lt=!Ce;if(x==null)return!pt;for(x=Do(x);Je--;){var Vt=V[Je];if(Lt&&Vt[2]?Vt[1]!==x[Vt[0]]:!(Vt[0]in x))return!1}for(;++Je<pt;){Vt=V[Je];var sn=Vt[0],Yn=x[sn],Hn=Vt[1];if(Lt&&Vt[2]){if(Yn===t&&!(sn in x))return!1}else{var Ai=new Ca;if(Ce)var Ni=Ce(Yn,Hn,sn,x,D,Ai);if(!(Ni===t?cu(Hn,Yn,j|W,Ce,Ai):Ni))return!1}}return!0}function Yl(x){if(!ll(x)||_e(x))return!1;var D=Dh(x)?Zu:ji;return D.test(vs(x))}function td(x){return ul(x)&&mo(x)==$n}function nd(x){return ul(x)&&al(x)==On}function Td(x){return ul(x)&&op(x.length)&&!!wi[mo(x)]}function I(x){return typeof x=="function"?x:x==null?fn:typeof x=="object"?Hr(x)?z(x[0],x[1]):k(x):Oa(x)}function s(x){if(!Le(x))return kl(x);var D=[];for(var V in Do(x))Go.call(x,V)&&V!="constructor"&&D.push(V);return D}function f(x){if(!ll(x))return _n(x);var D=Le(x),V=[];for(var Ce in x)Ce=="constructor"&&(D||!Go.call(x,Ce))||V.push(Ce);return V}function _(x,D){return x<D}function S(x,D){var V=-1,Ce=Xl(x)?vn(x.length):[];return Wl(x,function(Je,pt,Lt){Ce[++V]=D(Je,pt,Lt)}),Ce}function k(x){var D=ea(x);return D.length==1&&D[0][2]?It(D[0][0],D[0][1]):function(V){return V===x||hc(V,x,D)}}function z(x,D){return F(x)&&vt(D)?It(qr(x),D):function(V){var Ce=y(V,x);return Ce===t&&Ce===D?R(V,x):cu(D,Ce,j|W)}}function q(x,D,V,Ce,Je){x!==D&&QA(D,function(pt,Lt){if(Je||(Je=new Ca),ll(pt))X(x,D,Lt,V,q,Ce,Je);else{var Vt=Ce?Ce(gi(x,Lt),pt,Lt+"",x,D,Je):t;Vt===t&&(Vt=pt),Nl(x,Lt,Vt)}},ue)}function X(x,D,V,Ce,Je,pt,Lt){var Vt=gi(x,V),sn=gi(D,V),Yn=Lt.get(sn);if(Yn){Nl(x,V,Yn);return}var Hn=pt?pt(Vt,sn,V+"",x,D,Lt):t,Ai=Hn===t;if(Ai){var Ni=Hr(sn),wr=!Ni&&ff(sn),oo=!Ni&&!wr&&Dm(sn);Hn=sn,Ni||wr||oo?Hr(Vt)?Hn=Vt:Sl(Vt)?Hn=_o(Vt):wr?(Ai=!1,Hn=dc(sn,!0)):oo?(Ai=!1,Hn=Pc(sn,!0)):Hn=[]:Ah(sn)||Ud(sn)?(Hn=Vt,Ud(Vt)?Hn=u1(Vt):(!ll(Vt)||Dh(Vt))&&(Hn=a0(sn))):Ai=!1}Ai&&(Lt.set(sn,Hn),Je(Hn,sn,Ce,pt,Lt),Lt.delete(sn)),Nl(x,V,Hn)}function he(x,D){var V=x.length;if(V)return D+=D<0?V:0,B(D,V)?x[D]:t}function me(x,D,V){D.length?D=po(D,function(pt){return Hr(pt)?function(Lt){return Au(Lt,pt.length===1?pt[0]:pt)}:pt}):D=[fn];var Ce=-1;D=po(D,ou(pr()));var Je=S(x,function(pt,Lt,Vt){var sn=po(D,function(Yn){return Yn(pt)});return{criteria:sn,index:++Ce,value:pt}});return Df(Je,function(pt,Lt){return HA(pt,Lt,V)})}function Ee(x,D){return Me(x,D,function(V,Ce){return R(x,Ce)})}function Me(x,D,V){for(var Ce=-1,Je=D.length,pt={};++Ce<Je;){var Lt=D[Ce],Vt=Au(x,Lt);V(Vt,Lt)&&Ft(pt,Qa(Lt,x),Vt)}return pt}function Ue(x){return function(D){return Au(D,x)}}function Xe(x,D,V,Ce){var Je=Ce?_d:es,pt=-1,Lt=D.length,Vt=x;for(x===D&&(D=_o(D)),V&&(Vt=po(x,ou(V)));++pt<Lt;)for(var sn=0,Yn=D[pt],Hn=V?V(Yn):Yn;(sn=Je(Vt,Hn,sn,Ce))>-1;)Vt!==x&&lc.call(Vt,sn,1),lc.call(x,sn,1);return x}function ut(x,D){for(var V=x?D.length:0,Ce=V-1;V--;){var Je=D[V];if(V==Ce||Je!==pt){var pt=Je;B(Je)?lc.call(x,Je,1):Co(x,Je)}}return x}function ct(x,D){return x+Ou(Oc()*(D-x+1))}function ft(x,D,V,Ce){for(var Je=-1,pt=Wo($c((D-x)/(V||1)),0),Lt=vn(pt);pt--;)Lt[Ce?pt:++Je]=x,x+=V;return Lt}function xt(x,D){var V="";if(!x||D<1||D>Ct)return V;do D%2&&(V+=x),D=Ou(D/2),D&&(x+=x);while(D);return V}function yt(x,D){return Yi(oi(x,D,fn),x+"")}function wt(x){return gA(ui(x))}function Pt(x,D){var V=ui(x);return rs(V,eA(D,0,V.length))}function Ft(x,D,V,Ce){if(!ll(x))return x;D=Qa(D,x);for(var Je=-1,pt=D.length,Lt=pt-1,Vt=x;Vt!=null&&++Je<pt;){var sn=qr(D[Je]),Yn=V;if(sn==="__proto__"||sn==="constructor"||sn==="prototype")return x;if(Je!=Lt){var Hn=Vt[sn];Yn=Ce?Ce(Hn,sn,Vt):t,Yn===t&&(Yn=ll(Hn)?Hn:B(D[Je+1])?[]:{})}Bh(Vt,sn,Yn),Vt=Vt[sn]}return x}var Bt=Jc?function(x,D){return Jc.set(x,D),x}:fn,Yt=xh?function(x,D){return xh(x,"toString",{configurable:!0,enumerable:!1,value:hn(D),writable:!0})}:fn;function dn(x){return rs(ui(x))}function Xt(x,D,V){var Ce=-1,Je=x.length;D<0&&(D=-D>Je?0:Je+D),V=V>Je?Je:V,V<0&&(V+=Je),Je=D>V?0:V-D>>>0,D>>>=0;for(var pt=vn(Je);++Ce<Je;)pt[Ce]=x[Ce+D];return pt}function nn(x,D){var V;return Wl(x,function(Ce,Je,pt){return V=D(Ce,Je,pt),!V}),!!V}function un(x,D,V){var Ce=0,Je=x==null?Ce:x.length;if(typeof D=="number"&&D===D&&Je<=lt){for(;Ce<Je;){var pt=Ce+Je>>>1,Lt=x[pt];Lt!==null&&!rA(Lt)&&(V?Lt<=D:Lt<D)?Ce=pt+1:Je=pt}return Je}return qn(x,D,fn,V)}function qn(x,D,V,Ce){var Je=0,pt=x==null?0:x.length;if(pt===0)return 0;D=V(D);for(var Lt=D!==D,Vt=D===null,sn=rA(D),Yn=D===t;Je<pt;){var Hn=Ou((Je+pt)/2),Ai=V(x[Hn]),Ni=Ai!==t,wr=Ai===null,oo=Ai===Ai,da=rA(Ai);if(Lt)var ao=Ce||oo;else Yn?ao=oo&&(Ce||Ni):Vt?ao=oo&&Ni&&(Ce||!wr):sn?ao=oo&&Ni&&!wr&&(Ce||!da):wr||da?ao=!1:ao=Ce?Ai<=D:Ai<D;ao?Je=Hn+1:pt=Hn}return sa(pt,tt)}function Qn(x,D){for(var V=-1,Ce=x.length,Je=0,pt=[];++V<Ce;){var Lt=x[V],Vt=D?D(Lt):Lt;if(!V||!Zl(Vt,sn)){var sn=Vt;pt[Je++]=Lt===0?0:Lt}}return pt}function Tn(x){return typeof x=="number"?x:rA(x)?be:+x}function xi(x){if(typeof x=="string")return x;if(Hr(x))return po(x,xi)+"";if(rA(x))return Ju?Ju.call(x):"";var D=x+"";return D=="0"&&1/x==-st?"-0":D}function cr(x,D,V){var Ce=-1,Je=gh,pt=x.length,Lt=!0,Vt=[],sn=Vt;if(V)Lt=!1,Je=jh;else if(pt>=r){var Yn=D?null:W0(x);if(Yn)return $u(Yn);Lt=!1,Je=oc,sn=new Ic}else sn=D?[]:Vt;e:for(;++Ce<pt;){var Hn=x[Ce],Ai=D?D(Hn):Hn;if(Hn=V||Hn!==0?Hn:0,Lt&&Ai===Ai){for(var Ni=sn.length;Ni--;)if(sn[Ni]===Ai)continue e;D&&sn.push(Ai),Vt.push(Hn)}else Je(sn,Ai,V)||(sn!==Vt&&sn.push(Ai),Vt.push(Hn))}return Vt}function Co(x,D){return D=Qa(D,x),x=mi(x,D),x==null||delete x[qr(SA(D))]}function ua(x,D,V,Ce){return Ft(x,D,V(Au(x,D)),Ce)}function Lo(x,D,V,Ce){for(var Je=x.length,pt=Ce?Je:-1;(Ce?pt--:++pt<Je)&&D(x[pt],pt,x););return V?Xt(x,Ce?0:pt,Ce?pt+1:Je):Xt(x,Ce?pt+1:0,Ce?Je:pt)}function Pa(x,D){var V=x;return V instanceof gr&&(V=V.value()),vd(D,function(Ce,Je){return Je.func.apply(Je.thisArg,rc([Ce],Je.args))},V)}function Aa(x,D,V){var Ce=x.length;if(Ce<2)return Ce?cr(x[0]):[];for(var Je=-1,pt=vn(Ce);++Je<Ce;)for(var Lt=x[Je],Vt=-1;++Vt<Ce;)Vt!=Je&&(pt[Je]=Po(pt[Je]||Lt,x[Vt],D,V));return cr(Pr(pt,1),D,V)}function Br(x,D,V){for(var Ce=-1,Je=x.length,pt=D.length,Lt={};++Ce<Je;){var Vt=Ce<pt?D[Ce]:t;V(Lt,x[Ce],Vt)}return Lt}function Qo(x){return Sl(x)?x:[]}function is(x){return typeof x=="function"?x:fn}function Qa(x,D){return Hr(x)?x:F(x,D)?[x]:ca(Ka(x))}var Os=yt;function Is(x,D,V){var Ce=x.length;return V=V===t?Ce:V,!D&&V>=Ce?x:Xt(x,D,V)}var YA=Ed||function(x){return Ri.clearTimeout(x)};function dc(x,D){if(D)return x.slice();var V=x.length,Ce=Bu?Bu(V):new x.constructor(V);return x.copy(Ce),Ce}function ql(x){var D=new x.constructor(x.byteLength);return new sc(D).set(new sc(x)),D}function Ih(x,D){var V=D?ql(x.buffer):x.buffer;return new x.constructor(V,x.byteOffset,x.byteLength)}function rh(x){var D=new x.constructor(x.source,vr.exec(x));return D.lastIndex=x.lastIndex,D}function qA(x){return wh?Do(wh.call(x)):{}}function Pc(x,D){var V=D?ql(x.buffer):x.buffer;return new x.constructor(V,x.byteOffset,x.length)}function bl(x,D){if(x!==D){var V=x!==t,Ce=x===null,Je=x===x,pt=rA(x),Lt=D!==t,Vt=D===null,sn=D===D,Yn=rA(D);if(!Vt&&!Yn&&!pt&&x>D||pt&&Lt&&sn&&!Vt&&!Yn||Ce&&Lt&&sn||!V&&sn||!Je)return 1;if(!Ce&&!pt&&!Yn&&x<D||Yn&&V&&Je&&!Ce&&!pt||Vt&&V&&Je||!Lt&&Je||!sn)return-1}return 0}function HA(x,D,V){for(var Ce=-1,Je=x.criteria,pt=D.criteria,Lt=Je.length,Vt=V.length;++Ce<Lt;){var sn=bl(Je[Ce],pt[Ce]);if(sn){if(Ce>=Vt)return sn;var Yn=V[Ce];return sn*(Yn=="desc"?-1:1)}}return x.index-D.index}function xl(x,D,V,Ce){for(var Je=-1,pt=x.length,Lt=V.length,Vt=-1,sn=D.length,Yn=Wo(pt-Lt,0),Hn=vn(sn+Yn),Ai=!Ce;++Vt<sn;)Hn[Vt]=D[Vt];for(;++Je<Lt;)(Ai||Je<pt)&&(Hn[V[Je]]=x[Je]);for(;Yn--;)Hn[Vt++]=x[Je++];return Hn}function Kc(x,D,V,Ce){for(var Je=-1,pt=x.length,Lt=-1,Vt=V.length,sn=-1,Yn=D.length,Hn=Wo(pt-Vt,0),Ai=vn(Hn+Yn),Ni=!Ce;++Je<Hn;)Ai[Je]=x[Je];for(var wr=Je;++sn<Yn;)Ai[wr+sn]=D[sn];for(;++Lt<Vt;)(Ni||Je<pt)&&(Ai[wr+V[Lt]]=x[Je++]);return Ai}function _o(x,D){var V=-1,Ce=x.length;for(D||(D=vn(Ce));++V<Ce;)D[V]=x[V];return D}function Xo(x,D,V,Ce){var Je=!V;V||(V={});for(var pt=-1,Lt=D.length;++pt<Lt;){var Vt=D[pt],sn=Ce?Ce(V[Vt],x[Vt],Vt,V,x):t;sn===t&&(sn=x[Vt]),Je?yA(V,Vt,sn):Bh(V,Vt,sn)}return V}function hu(x,D){return Xo(x,VA(x),D)}function ys(x,D){return Xo(x,fu(x),D)}function _A(x,D){return function(V,Ce){var Je=Hr(V)?gd:ku,pt=D?D():{};return Je(V,x,pr(Ce,2),pt)}}function du(x){return yt(function(D,V){var Ce=-1,Je=V.length,pt=Je>1?V[Je-1]:t,Lt=Je>2?V[2]:t;for(pt=x.length>3&&typeof pt=="function"?(Je--,pt):t,Lt&&E(V[0],V[1],Lt)&&(pt=Je<3?t:pt,Je=1),D=Do(D);++Ce<Je;){var Vt=V[Ce];Vt&&x(D,Vt,Ce,pt)}return D})}function Ru(x,D){return function(V,Ce){if(V==null)return V;if(!Xl(V))return x(V,Ce);for(var Je=V.length,pt=D?Je:-1,Lt=Do(V);(D?pt--:++pt<Je)&&Ce(Lt[pt],pt,Lt)!==!1;);return V}}function Hl(x){return function(D,V,Ce){for(var Je=-1,pt=Do(D),Lt=Ce(D),Vt=Lt.length;Vt--;){var sn=Lt[x?Vt:++Je];if(V(pt[sn],sn,pt)===!1)break}return D}}function Uc(x,D,V){var Ce=D&Y,Je=bA(x);function pt(){var Lt=this&&this!==Ri&&this instanceof pt?Je:x;return Lt.apply(Ce?V:this,arguments)}return pt}function tA(x){return function(D){D=Ka(D);var V=wc(D)?Mu(D):t,Ce=V?V[0]:D.charAt(0),Je=V?Is(V,1).join(""):D.slice(1);return Ce[x]()+Je}}function Ya(x){return function(D){return vd(Q(Gr(D).replace(Dr,"")),x,"")}}function bA(x){return function(){var D=arguments;switch(D.length){case 0:return new x;case 1:return new x(D[0]);case 2:return new x(D[0],D[1]);case 3:return new x(D[0],D[1],D[2]);case 4:return new x(D[0],D[1],D[2],D[3]);case 5:return new x(D[0],D[1],D[2],D[3],D[4]);case 6:return new x(D[0],D[1],D[2],D[3],D[4],D[5]);case 7:return new x(D[0],D[1],D[2],D[3],D[4],D[5],D[6])}var V=$s(x.prototype),Ce=x.apply(V,D);return ll(Ce)?Ce:V}}function zf(x,D,V){var Ce=bA(x);function Je(){for(var pt=arguments.length,Lt=vn(pt),Vt=pt,sn=Dd(Je);Vt--;)Lt[Vt]=arguments[Vt];var Yn=pt<3&&Lt[0]!==sn&&Lt[pt-1]!==sn?[]:hA(Lt,sn);if(pt-=Yn.length,pt<V)return Nf(x,D,Sa,Je.placeholder,t,Lt,Yn,t,t,V-pt);var Hn=this&&this!==Ri&&this instanceof Je?Ce:x;return ps(Hn,this,Lt)}return Je}function xA(x){return function(D,V,Ce){var Je=Do(D);if(!Xl(D)){var pt=pr(V,3);D=ie(D),V=function(Vt){return pt(Je[Vt],Vt,Je)}}var Lt=x(D,V,Ce);return Lt>-1?Je[pt?D[Lt]:Lt]:t}}function MA(x){return cs(function(D){var V=D.length,Ce=V,Je=Zo.prototype.thru;for(x&&D.reverse();Ce--;){var pt=D[Ce];if(typeof pt!="function")throw new su(l);if(Je&&!Lt&&sf(pt)=="wrapper")var Lt=new Zo([],!0)}for(Ce=Lt?Ce:V;++Ce<V;){pt=D[Ce];var Vt=sf(pt),sn=Vt=="wrapper"?Yf(pt):t;sn&&fe(sn[0])&&sn[1]==(G|oe|$|ce)&&!sn[4].length&&sn[9]==1?Lt=Lt[sf(sn[0])].apply(Lt,sn[3]):Lt=pt.length==1&&fe(pt)?Lt[Vt]():Lt.thru(pt)}return function(){var Yn=arguments,Hn=Yn[0];if(Lt&&Yn.length==1&&Hr(Hn))return Lt.plant(Hn).value();for(var Ai=0,Ni=V?D[Ai].apply(this,Yn):Hn;++Ai<V;)Ni=D[Ai].call(this,Ni);return Ni}})}function Sa(x,D,V,Ce,Je,pt,Lt,Vt,sn,Yn){var Hn=D&G,Ai=D&Y,Ni=D&te,wr=D&(oe|ne),oo=D&ge,da=Ni?t:bA(x);function ao(){for(var Ia=arguments.length,Ha=vn(Ia),mf=Ia;mf--;)Ha[mf]=arguments[mf];if(wr)var Ad=Dd(ao),gf=xd(Ha,Ad);if(Ce&&(Ha=xl(Ha,Ce,Je,wr)),pt&&(Ha=Kc(Ha,pt,Lt,wr)),Ia-=gf,wr&&Ia<Yn){var IA=hA(Ha,Ad);return Nf(x,D,Sa,ao.placeholder,V,Ha,IA,Vt,sn,Yn-Ia)}var Np=Ai?V:this,x0=Ni?Np[x]:x;return Ia=Ha.length,Vt?Ha=Ci(Ha,Vt):oo&&Ia>1&&Ha.reverse(),Hn&&sn<Ia&&(Ha.length=sn),this&&this!==Ri&&this instanceof ao&&(x0=da||bA(x0)),x0.apply(Np,Ha)}return ao}function nA(x,D){return function(V,Ce){return ed(V,x,D(Ce),{})}}function id(x,D){return function(V,Ce){var Je;if(V===t&&Ce===t)return D;if(V!==t&&(Je=V),Ce!==t){if(Je===t)return Ce;typeof V=="string"||typeof Ce=="string"?(V=xi(V),Ce=xi(Ce)):(V=Tn(V),Ce=Tn(Ce)),Je=x(V,Ce)}return Je}}function jf(x){return cs(function(D){return D=po(D,ou(pr())),yt(function(V){var Ce=this;return x(D,function(Je){return ps(Je,Ce,V)})})})}function of(x,D){D=D===t?" ":xi(D);var V=D.length;if(V<2)return V?xt(D,x):D;var Ce=xt(D,$c(x/ac(D)));return wc(D)?Is(Mu(Ce),0,x).join(""):Ce.slice(0,x)}function pm(x,D,V,Ce){var Je=D&Y,pt=bA(x);function Lt(){for(var Vt=-1,sn=arguments.length,Yn=-1,Hn=Ce.length,Ai=vn(Hn+sn),Ni=this&&this!==Ri&&this instanceof Lt?pt:x;++Yn<Hn;)Ai[Yn]=Ce[Yn];for(;sn--;)Ai[Yn++]=arguments[++Vt];return ps(Ni,Je?V:this,Ai)}return Lt}function fc(x){return function(D,V,Ce){return Ce&&typeof Ce!="number"&&E(D,V,Ce)&&(V=Ce=t),D=ud(D),V===t?(V=D,D=0):V=ud(V),Ce=Ce===t?D<V?1:-1:ud(Ce),ft(D,V,Ce,x)}}function rd(x){return function(D,V){return typeof D=="string"&&typeof V=="string"||(D=ch(D),V=ch(V)),x(D,V)}}function Nf(x,D,V,Ce,Je,pt,Lt,Vt,sn,Yn){var Hn=D&oe,Ai=Hn?Lt:t,Ni=Hn?t:Lt,wr=Hn?pt:t,oo=Hn?t:pt;D|=Hn?$:ae,D&=~(Hn?ae:$),D&J||(D&=-4);var da=[x,D,Je,wr,Ai,oo,Ni,Vt,sn,Yn],ao=V.apply(t,da);return fe(x)&&Di(ao,da),ao.placeholder=Ce,Jr(ao,x,D)}function Gf(x){var D=Hs[x];return function(V,Ce){if(V=ch(V),Ce=Ce==null?0:sa(ro(Ce),292),Ce&&Hh(V)){var Je=(Ka(V)+"e").split("e"),pt=D(Je[0]+"e"+(+Je[1]+Ce));return Je=(Ka(pt)+"e").split("e"),+(Je[0]+"e"+(+Je[1]-Ce))}return D(V)}}var W0=Zr&&1/$u(new Zr([,-0]))[1]==st?function(x){return new Zr(x)}:ir;function af(x){return function(D){var V=al(D);return V==Ot?Hc(D):V==On?Mp(D):Wh(D,x(D))}}function Jo(x,D,V,Ce,Je,pt,Lt,Vt){var sn=D&te;if(!sn&&typeof x!="function")throw new su(l);var Yn=Ce?Ce.length:0;if(Yn||(D&=-97,Ce=Je=t),Lt=Lt===t?Lt:Wo(ro(Lt),0),Vt=Vt===t?Vt:ro(Vt),Yn-=Je?Je.length:0,D&ae){var Hn=Ce,Ai=Je;Ce=Je=t}var Ni=sn?t:Yf(x),wr=[x,D,V,Ce,Je,Hn,Ai,pt,Lt,Vt];if(Ni&&Ht(wr,Ni),x=wr[0],D=wr[1],V=wr[2],Ce=wr[3],Je=wr[4],Vt=wr[9]=wr[9]===t?sn?0:x.length:Wo(wr[9]-Yn,0),!Vt&&D&(oe|ne)&&(D&=-25),!D||D==Y)var oo=Uc(x,D,V);else D==oe||D==ne?oo=zf(x,D,Vt):(D==$||D==(Y|$))&&!Je.length?oo=pm(x,D,V,Ce):oo=Sa.apply(t,wr);var da=Ni?Bt:Di;return Jr(da(oo,wr),x,D)}function Bp(x,D,V,Ce){return x===t||Zl(x,wu[V])&&!Go.call(Ce,V)?D:x}function Th(x,D,V,Ce,Je,pt){return ll(x)&&ll(D)&&(pt.set(D,x),q(x,D,t,Th,pt),pt.delete(D)),x}function Wf(x){return Ah(x)?t:x}function iA(x,D,V,Ce,Je,pt){var Lt=V&j,Vt=x.length,sn=D.length;if(Vt!=sn&&!(Lt&&sn>Vt))return!1;var Yn=pt.get(x),Hn=pt.get(D);if(Yn&&Hn)return Yn==D&&Hn==x;var Ai=-1,Ni=!0,wr=V&W?new Ic:t;for(pt.set(x,D),pt.set(D,x);++Ai<Vt;){var oo=x[Ai],da=D[Ai];if(Ce)var ao=Lt?Ce(da,oo,Ai,D,x,pt):Ce(oo,da,Ai,x,D,pt);if(ao!==t){if(ao)continue;Ni=!1;break}if(wr){if(!yh(D,function(Ia,Ha){if(!oc(wr,Ha)&&(oo===Ia||Je(oo,Ia,V,Ce,pt)))return wr.push(Ha)})){Ni=!1;break}}else if(!(oo===da||Je(oo,da,V,Ce,pt))){Ni=!1;break}}return pt.delete(x),pt.delete(D),Ni}function kd(x,D,V,Ce,Je,pt,Lt){switch(V){case de:if(x.byteLength!=D.byteLength||x.byteOffset!=D.byteOffset)return!1;x=x.buffer,D=D.buffer;case je:return!(x.byteLength!=D.byteLength||!pt(new sc(x),new sc(D)));case Fe:case Ke:case qt:return Zl(+x,+D);case He:return x.name==D.name&&x.message==D.message;case $n:case Bn:return x==D+"";case Ot:var Vt=Hc;case On:var sn=Ce&j;if(Vt||(Vt=$u),x.size!=D.size&&!sn)return!1;var Yn=Lt.get(x);if(Yn)return Yn==D;Ce|=W,Lt.set(x,D);var Hn=iA(Vt(x),Vt(D),Ce,Je,pt,Lt);return Lt.delete(x),Hn;case In:if(wh)return wh.call(x)==wh.call(D)}return!1}function Xs(x,D,V,Ce,Je,pt){var Lt=V&j,Vt=Qf(x),sn=Vt.length,Yn=Qf(D),Hn=Yn.length;if(sn!=Hn&&!Lt)return!1;for(var Ai=sn;Ai--;){var Ni=Vt[Ai];if(!(Lt?Ni in D:Go.call(D,Ni)))return!1}var wr=pt.get(x),oo=pt.get(D);if(wr&&oo)return wr==D&&oo==x;var da=!0;pt.set(x,D),pt.set(D,x);for(var ao=Lt;++Ai<sn;){Ni=Vt[Ai];var Ia=x[Ni],Ha=D[Ni];if(Ce)var mf=Lt?Ce(Ha,Ia,Ni,D,x,pt):Ce(Ia,Ha,Ni,x,D,pt);if(!(mf===t?Ia===Ha||Je(Ia,Ha,V,Ce,pt):mf)){da=!1;break}ao||(ao=Ni=="constructor")}if(da&&!ao){var Ad=x.constructor,gf=D.constructor;Ad!=gf&&"constructor"in x&&"constructor"in D&&!(typeof Ad=="function"&&Ad instanceof Ad&&typeof gf=="function"&&gf instanceof gf)&&(da=!1)}return pt.delete(x),pt.delete(D),da}function cs(x){return Yi(oi(x,t,sl),x+"")}function Qf(x){return la(x,ie,VA)}function Op(x){return la(x,ue,fu)}var Yf=Jc?function(x){return Jc.get(x)}:ir;function sf(x){for(var D=x.name+"",V=mA[D],Ce=Go.call(mA,D)?V.length:0;Ce--;){var Je=V[Ce],pt=Je.func;if(pt==null||pt==x)return Je.name}return D}function Dd(x){var D=Go.call(rt,"placeholder")?rt:x;return D.placeholder}function pr(){var x=rt.iteratee||Kr;return x=x===Kr?I:x,arguments.length?x(arguments[0],arguments[1]):x}function lf(x,D){var V=x.__data__;return Z(D)?V[typeof D=="string"?"string":"hash"]:V.map}function ea(x){for(var D=ie(x),V=D.length;V--;){var Ce=D[V],Je=x[Ce];D[V]=[Ce,Je,vt(Je)]}return D}function kh(x,D){var V=Qh(x,D);return Yl(V)?V:t}function mm(x){var D=Go.call(x,Bs),V=x[Bs];try{x[Bs]=t;var Ce=!0}catch{}var Je=Na.call(x);return Ce&&(D?x[Bs]=V:delete x[Bs]),Je}var VA=LA?function(x){return x==null?[]:(x=Do(x),qu(LA(x),function(D){return kr.call(x,D)}))}:hh,fu=LA?function(x){for(var D=[];x;)rc(D,VA(x)),x=Ec(x);return D}:hh,al=mo;(Xc&&al(new Xc(new ArrayBuffer(1)))!=de||va&&al(new va)!=Ot||_a&&al(_a.resolve())!=Jn||Zr&&al(new Zr)!=On||lu&&al(new lu)!=ei)&&(al=function(x){var D=mo(x),V=D==on?x.constructor:t,Ce=V?vs(V):"";if(Ce)switch(Ce){case Zd:return de;case ms:return Ot;case rl:return Jn;case zs:return On;case Xd:return ei}return D});function gm(x,D,V){for(var Ce=-1,Je=V.length;++Ce<Je;){var pt=V[Ce],Lt=pt.size;switch(pt.type){case"drop":x+=Lt;break;case"dropRight":D-=Lt;break;case"take":D=sa(D,x+Lt);break;case"takeRight":x=Wo(x,D-Lt);break}}return{start:x,end:D}}function js(x){var D=x.match(Hi);return D?D[1].split(ma):[]}function qf(x,D,V){D=Qa(D,x);for(var Ce=-1,Je=D.length,pt=!1;++Ce<Je;){var Lt=qr(D[Ce]);if(!(pt=x!=null&&V(x,Lt)))break;x=x[Lt]}return pt||++Ce!=Je?pt:(Je=x==null?0:x.length,!!Je&&op(Je)&&B(Lt,Je)&&(Hr(x)||Ud(x)))}function o0(x){var D=x.length,V=new x.constructor(D);return D&&typeof x[0]=="string"&&Go.call(x,"index")&&(V.index=x.index,V.input=x.input),V}function a0(x){return typeof x.constructor=="function"&&!Le(x)?$s(Ec(x)):{}}function uf(x,D,V){var Ce=x.constructor;switch(D){case je:return ql(x);case Fe:case Ke:return new Ce(+x);case de:return Ih(x,V);case re:case le:case pe:case Te:case We:case dt:case Ye:case De:case Ze:return Pc(x,V);case Ot:return new Ce;case qt:case Bn:return new Ce(x);case $n:return rh(x);case On:return new Ce;case In:return qA(x)}}function d(x,D){var V=D.length;if(!V)return x;var Ce=V-1;return D[Ce]=(V>1?"& ":"")+D[Ce],D=D.join(V>2?", ":" "),x.replace(uo,`{
/* [wrapped with `+D+`] */
`)}function v(x){return Hr(x)||Ud(x)||!!(Xu&&x&&x[Xu])}function B(x,D){var V=typeof x;return D=D??Ct,!!D&&(V=="number"||V!="symbol"&&ka.test(x))&&x>-1&&x%1==0&&x<D}function E(x,D,V){if(!ll(V))return!1;var Ce=typeof D;return(Ce=="number"?Xl(V)&&B(D,V.length):Ce=="string"&&D in V)?Zl(V[D],x):!1}function F(x,D){if(Hr(x))return!1;var V=typeof x;return V=="number"||V=="symbol"||V=="boolean"||x==null||rA(x)?!0:er.test(x)||!qi.test(x)||D!=null&&x in Do(D)}function Z(x){var D=typeof x;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?x!=="__proto__":x===null}function fe(x){var D=sf(x),V=rt[D];if(typeof V!="function"||!(D in gr.prototype))return!1;if(x===V)return!0;var Ce=Yf(V);return!!Ce&&x===Ce[0]}function _e(x){return!!qh&&qh in x}var ke=Su?Dh:jp;function Le(x){var D=x&&x.constructor,V=typeof D=="function"&&D.prototype||wu;return x===V}function vt(x){return x===x&&!ll(x)}function It(x,D){return function(V){return V==null?!1:V[x]===D&&(D!==t||x in Do(V))}}function Jt(x){var D=kp(x,function(Ce){return V.size===C&&V.clear(),Ce}),V=D.cache;return D}function Ht(x,D){var V=x[1],Ce=D[1],Je=V|Ce,pt=Je<(Y|te|G),Lt=Ce==G&&V==oe||Ce==G&&V==ce&&x[7].length<=D[8]||Ce==(G|ce)&&D[7].length<=D[8]&&V==oe;if(!(pt||Lt))return x;Ce&Y&&(x[2]=D[2],Je|=V&Y?0:J);var Vt=D[3];if(Vt){var sn=x[3];x[3]=sn?xl(sn,Vt,D[4]):Vt,x[4]=sn?hA(x[3],w):D[4]}return Vt=D[5],Vt&&(sn=x[5],x[5]=sn?Kc(sn,Vt,D[6]):Vt,x[6]=sn?hA(x[5],w):D[6]),Vt=D[7],Vt&&(x[7]=Vt),Ce&G&&(x[8]=x[8]==null?D[8]:sa(x[8],D[8])),x[9]==null&&(x[9]=D[9]),x[0]=D[0],x[1]=Je,x}function _n(x){var D=[];if(x!=null)for(var V in Do(x))D.push(V);return D}function Rn(x){return Na.call(x)}function oi(x,D,V){return D=Wo(D===t?x.length-1:D,0),function(){for(var Ce=arguments,Je=-1,pt=Wo(Ce.length-D,0),Lt=vn(pt);++Je<pt;)Lt[Je]=Ce[D+Je];Je=-1;for(var Vt=vn(D+1);++Je<D;)Vt[Je]=Ce[Je];return Vt[D]=V(Lt),ps(x,this,Vt)}}function mi(x,D){return D.length<2?x:Au(x,Xt(D,0,-1))}function Ci(x,D){for(var V=x.length,Ce=sa(D.length,V),Je=_o(x);Ce--;){var pt=D[Ce];x[Ce]=B(pt,V)?Je[pt]:t}return x}function gi(x,D){if(!(D==="constructor"&&typeof x[D]=="function")&&D!="__proto__")return x[D]}var Di=Mr(Bt),ar=Bd||function(x,D){return Ri.setTimeout(x,D)},Yi=Mr(Yt);function Jr(x,D,V){var Ce=D+"";return Yi(x,d(Ce,Cs(js(Ce),V)))}function Mr(x){var D=0,V=0;return function(){var Ce=FA(),Je=Se-(Ce-V);if(V=Ce,Je>0){if(++D>=Oe)return arguments[0]}else D=0;return x.apply(t,arguments)}}function rs(x,D){var V=-1,Ce=x.length,Je=Ce-1;for(D=D===t?Ce:D;++V<D;){var pt=ct(V,Je),Lt=x[pt];x[pt]=x[V],x[V]=Lt}return x.length=D,x}var ca=Jt(function(x){var D=[];return x.charCodeAt(0)===46&&D.push(""),x.replace(Ei,function(V,Ce,Je,pt){D.push(Je?pt.replace(lr,"$1"):Ce||V)}),D});function qr(x){if(typeof x=="string"||rA(x))return x;var D=x+"";return D=="0"&&1/x==-st?"-0":D}function vs(x){if(x!=null){try{return Tl.call(x)}catch{}try{return x+""}catch{}}return""}function Cs(x,D){return Ra(kt,function(V){var Ce="_."+V[0];D&V[1]&&!gh(x,Ce)&&x.push(Ce)}),x.sort()}function ha(x){if(x instanceof gr)return x.clone();var D=new Zo(x.__wrapped__,x.__chain__);return D.__actions__=_o(x.__actions__),D.__index__=x.__index__,D.__values__=x.__values__,D}function Vl(x,D,V){(V?E(x,D,V):D===t)?D=1:D=Wo(ro(D),0);var Ce=x==null?0:x.length;if(!Ce||D<1)return[];for(var Je=0,pt=0,Lt=vn($c(Ce/D));Je<Ce;)Lt[pt++]=Xt(x,Je,Je+=D);return Lt}function Ts(x){for(var D=-1,V=x==null?0:x.length,Ce=0,Je=[];++D<V;){var pt=x[D];pt&&(Je[Ce++]=pt)}return Je}function Ns(){var x=arguments.length;if(!x)return[];for(var D=vn(x-1),V=arguments[0],Ce=x;Ce--;)D[Ce-1]=arguments[Ce];return rc(Hr(V)?_o(V):[V],Pr(D,1))}var Or=yt(function(x,D){return Sl(x)?Po(x,Pr(D,1,Sl,!0)):[]}),Ea=yt(function(x,D){var V=SA(D);return Sl(V)&&(V=t),Sl(x)?Po(x,Pr(D,1,Sl,!0),pr(V,2)):[]}),$l=yt(function(x,D){var V=SA(D);return Sl(V)&&(V=t),Sl(x)?Po(x,Pr(D,1,Sl,!0),t,V):[]});function pc(x,D,V){var Ce=x==null?0:x.length;return Ce?(D=V||D===t?1:ro(D),Xt(x,D<0?0:D,Ce)):[]}function pu(x,D,V){var Ce=x==null?0:x.length;return Ce?(D=V||D===t?1:ro(D),D=Ce-D,Xt(x,0,D<0?0:D)):[]}function oh(x,D){return x&&x.length?Lo(x,pr(D,3),!0,!0):[]}function hs(x,D){return x&&x.length?Lo(x,pr(D,3),!0):[]}function wA(x,D,V,Ce){var Je=x==null?0:x.length;return Je?(V&&typeof V!="number"&&E(x,D,V)&&(V=0,Ce=Je),io(x,D,V,Ce)):[]}function Ml(x,D,V){var Ce=x==null?0:x.length;if(!Ce)return-1;var Je=V==null?0:ro(V);return Je<0&&(Je=Wo(Ce+Je,0)),Hu(x,pr(D,3),Je)}function mc(x,D,V){var Ce=x==null?0:x.length;if(!Ce)return-1;var Je=Ce-1;return V!==t&&(Je=ro(V),Je=V<0?Wo(Ce+Je,0):sa(Je,Ce-1)),Hu(x,pr(D,3),Je,!0)}function sl(x){var D=x==null?0:x.length;return D?Pr(x,1):[]}function mu(x){var D=x==null?0:x.length;return D?Pr(x,st):[]}function $A(x,D){var V=x==null?0:x.length;return V?(D=D===t?1:ro(D),Pr(x,D)):[]}function od(x){for(var D=-1,V=x==null?0:x.length,Ce={};++D<V;){var Je=x[D];Ce[Je[0]]=Je[1]}return Ce}function Af(x){return x&&x.length?x[0]:t}function Ng(x,D,V){var Ce=x==null?0:x.length;if(!Ce)return-1;var Je=V==null?0:ro(V);return Je<0&&(Je=Wo(Ce+Je,0)),es(x,D,Je)}function Gg(x){var D=x==null?0:x.length;return D?Xt(x,0,-1):[]}var Rd=yt(function(x){var D=po(x,Qo);return D.length&&D[0]===x[0]?Wa(D):[]}),Ip=yt(function(x){var D=SA(x),V=po(x,Qo);return D===SA(V)?D=t:V.pop(),V.length&&V[0]===x[0]?Wa(V,pr(D,2)):[]}),ym=yt(function(x){var D=SA(x),V=po(x,Qo);return D=typeof D=="function"?D:t,D&&V.pop(),V.length&&V[0]===x[0]?Wa(V,t,D):[]});function s0(x,D){return x==null?"":Iu.call(x,D)}function SA(x){var D=x==null?0:x.length;return D?x[D-1]:t}function vm(x,D,V){var Ce=x==null?0:x.length;if(!Ce)return-1;var Je=Ce;return V!==t&&(Je=ro(V),Je=Je<0?Wo(Ce+Je,0):sa(Je,Ce-1)),D===D?xu(x,D,Je):Hu(x,Fl,Je,!0)}function Wg(x,D){return x&&x.length?he(x,ro(D)):t}var ry=yt(Hf);function Hf(x,D){return x&&x.length&&D&&D.length?Xe(x,D):x}function Cm(x,D,V){return x&&x.length&&D&&D.length?Xe(x,D,pr(V,2)):x}function _m(x,D,V){return x&&x.length&&D&&D.length?Xe(x,D,t,V):x}var oy=cs(function(x,D){var V=x==null?0:x.length,Ce=ih(x,D);return ut(x,po(D,function(Je){return B(Je,V)?+Je:Je}).sort(bl)),Ce});function iC(x,D){var V=[];if(!(x&&x.length))return V;var Ce=-1,Je=[],pt=x.length;for(D=pr(D,3);++Ce<pt;){var Lt=x[Ce];D(Lt,Ce,x)&&(V.push(Lt),Je.push(Ce))}return ut(x,Je),V}function Q0(x){return x==null?x:Zc.call(x)}function os(x,D,V){var Ce=x==null?0:x.length;return Ce?(V&&typeof V!="number"&&E(x,D,V)?(D=0,V=Ce):(D=D==null?0:ro(D),V=V===t?Ce:ro(V)),Xt(x,D,V)):[]}function Gs(x,D){return un(x,D)}function ta(x,D,V){return qn(x,D,pr(V,2))}function Yo(x,D){var V=x==null?0:x.length;if(V){var Ce=un(x,D);if(Ce<V&&Zl(x[Ce],D))return Ce}return-1}function as(x,D){return un(x,D,!0)}function ah(x,D,V){return qn(x,D,pr(V,2),!0)}function Vf(x,D){var V=x==null?0:x.length;if(V){var Ce=un(x,D,!0)-1;if(Zl(x[Ce],D))return Ce}return-1}function bm(x){return x&&x.length?Qn(x):[]}function Qg(x,D){return x&&x.length?Qn(x,pr(D,2)):[]}function cf(x){var D=x==null?0:x.length;return D?Xt(x,1,D):[]}function wl(x,D,V){return x&&x.length?(D=V||D===t?1:ro(D),Xt(x,0,D<0?0:D)):[]}function Pd(x,D,V){var Ce=x==null?0:x.length;return Ce?(D=V||D===t?1:ro(D),D=Ce-D,Xt(x,D<0?0:D,Ce)):[]}function $f(x,D){return x&&x.length?Lo(x,pr(D,3),!1,!0):[]}function Y0(x,D){return x&&x.length?Lo(x,pr(D,3)):[]}var sh=yt(function(x){return cr(Pr(x,1,Sl,!0))}),xm=yt(function(x){var D=SA(x);return Sl(D)&&(D=t),cr(Pr(x,1,Sl,!0),pr(D,2))}),Zf=yt(function(x){var D=SA(x);return D=typeof D=="function"?D:t,cr(Pr(x,1,Sl,!0),t,D)});function Lc(x){return x&&x.length?cr(x):[]}function q0(x,D){return x&&x.length?cr(x,pr(D,2)):[]}function Yg(x,D){return D=typeof D=="function"?D:t,x&&x.length?cr(x,t,D):[]}function Mm(x){if(!(x&&x.length))return[];var D=0;return x=qu(x,function(V){if(Sl(V))return D=Wo(V.length,D),!0}),Ch(D,function(V){return po(x,Nh(V))})}function l0(x,D){if(!(x&&x.length))return[];var V=Mm(x);return D==null?V:po(V,function(Ce){return ps(D,t,Ce)})}var hf=yt(function(x,D){return Sl(x)?Po(x,D):[]}),EA=yt(function(x){return Aa(qu(x,Sl))}),Xf=yt(function(x){var D=SA(x);return Sl(D)&&(D=t),Aa(qu(x,Sl),pr(D,2))}),Kd=yt(function(x){var D=SA(x);return D=typeof D=="function"?D:t,Aa(qu(x,Sl),t,D)}),Js=yt(Mm);function u0(x,D){return Br(x||[],D||[],Bh)}function H0(x,D){return Br(x||[],D||[],Ft)}var qg=yt(function(x){var D=x.length,V=D>1?x[D-1]:t;return V=typeof V=="function"?(x.pop(),V):t,l0(x,V)});function Jf(x){var D=rt(x);return D.__chain__=!0,D}function ep(x,D){return D(x),x}function BA(x,D){return D(x)}var ay=cs(function(x){var D=x.length,V=D?x[0]:0,Ce=this.__wrapped__,Je=function(pt){return ih(pt,x)};return D>1||this.__actions__.length||!(Ce instanceof gr)||!B(V)?this.thru(Je):(Ce=Ce.slice(V,+V+(D?1:0)),Ce.__actions__.push({func:BA,args:[Je],thisArg:t}),new Zo(Ce,this.__chain__).thru(function(pt){return D&&!pt.length&&pt.push(t),pt}))});function lh(){return Jf(this)}function sy(){return new Zo(this.value(),this.__chain__)}function ly(){this.__values__===t&&(this.__values__=Fc(this.value()));var x=this.__index__>=this.__values__.length,D=x?t:this.__values__[this.__index__++];return{done:x,value:D}}function rC(){return this}function tp(x){for(var D,V=this;V instanceof Ga;){var Ce=ha(V);Ce.__index__=0,Ce.__values__=t,D?Je.__wrapped__=Ce:D=Ce;var Je=Ce;V=V.__wrapped__}return Je.__wrapped__=x,D}function V0(){var x=this.__wrapped__;if(x instanceof gr){var D=x;return this.__actions__.length&&(D=new gr(this)),D=D.reverse(),D.__actions__.push({func:BA,args:[Q0],thisArg:t}),new Zo(D,this.__chain__)}return this.thru(Q0)}function Hg(){return Pa(this.__wrapped__,this.__actions__)}var wm=_A(function(x,D,V){Go.call(x,V)?++x[V]:yA(x,V,1)});function uy(x,D,V){var Ce=Hr(x)?PA:Lf;return V&&E(x,D,V)&&(D=t),Ce(x,pr(D,3))}function Ay(x,D){var V=Hr(x)?qu:Ko;return V(x,pr(D,3))}var cy=xA(Ml),$0=xA(mc);function A0(x,D){return Pr(Em(x,D),1)}function hy(x,D){return Pr(Em(x,D),st)}function np(x,D,V){return V=V===t?1:ro(V),Pr(Em(x,D),V)}function Sm(x,D){var V=Hr(x)?Ra:Wl;return V(x,pr(D,3))}function ip(x,D){var V=Hr(x)?yd:Xh;return V(x,pr(D,3))}var c0=_A(function(x,D,V){Go.call(x,V)?x[V].push(D):yA(x,V,[D])});function df(x,D,V,Ce){x=Xl(x)?x:ui(x),V=V&&!Ce?ro(V):0;var Je=x.length;return V<0&&(V=Wo(Je+V,0)),Up(x)?V<=Je&&x.indexOf(D,V)>-1:!!Je&&es(x,D,V)>-1}var Z0=yt(function(x,D,V){var Ce=-1,Je=typeof D=="function",pt=Xl(x)?vn(x.length):[];return Wl(x,function(Lt){pt[++Ce]=Je?ps(D,Lt,V):CA(Lt,D,V)}),pt}),dy=_A(function(x,D,V){yA(x,V,D)});function Em(x,D){var V=Hr(x)?po:S;return V(x,pr(D,3))}function Vg(x,D,V,Ce){return x==null?[]:(Hr(D)||(D=D==null?[]:[D]),V=Ce?t:V,Hr(V)||(V=V==null?[]:[V]),me(x,D,V))}var fy=_A(function(x,D,V){x[V?0:1].push(D)},function(){return[[],[]]});function $g(x,D,V){var Ce=Hr(x)?vd:Gh,Je=arguments.length<3;return Ce(x,pr(D,4),V,Je,Wl)}function Zg(x,D,V){var Ce=Hr(x)?dm:Gh,Je=arguments.length<3;return Ce(x,pr(D,4),V,Je,Xh)}function Bm(x,D){var V=Hr(x)?qu:Ko;return V(x,Dp(pr(D,3)))}function X0(x){var D=Hr(x)?gA:wt;return D(x)}function py(x,D,V){(V?E(x,D,V):D===t)?D=1:D=ro(D);var Ce=Hr(x)?nf:Pt;return Ce(x,D)}function _s(x){var D=Hr(x)?no:dn;return D(x)}function Xg(x){if(x==null)return 0;if(Xl(x))return Up(x)?ac(x):x.length;var D=al(x);return D==Ot||D==On?x.size:s(x).length}function oC(x,D,V){var Ce=Hr(x)?yh:nn;return V&&E(x,D,V)&&(D=t),Ce(x,pr(D,3))}var my=yt(function(x,D){if(x==null)return[];var V=D.length;return V>1&&E(x,D[0],D[1])?D=[]:V>2&&E(D[0],D[1],D[2])&&(D=[D[0]]),me(x,Pr(D,1),[])}),J0=pA||function(){return Ri.Date.now()};function aC(x,D){if(typeof D!="function")throw new su(l);return x=ro(x),function(){if(--x<1)return D.apply(this,arguments)}}function Jg(x,D,V){return D=V?t:D,D=x&&D==null?x.length:D,Jo(x,G,t,t,t,t,D)}function Om(x,D){var V;if(typeof D!="function")throw new su(l);return x=ro(x),function(){return--x>0&&(V=D.apply(this,arguments)),x<=1&&(D=t),V}}var ZA=yt(function(x,D,V){var Ce=Y;if(V.length){var Je=hA(V,Dd(ZA));Ce|=$}return Jo(x,Ce,D,V,Je)}),ad=yt(function(x,D,V){var Ce=Y|te;if(V.length){var Je=hA(V,Dd(ad));Ce|=$}return Jo(D,Ce,x,V,Je)});function Im(x,D,V){D=V?t:D;var Ce=Jo(x,oe,t,t,t,t,t,D);return Ce.placeholder=Im.placeholder,Ce}function Tm(x,D,V){D=V?t:D;var Ce=Jo(x,ne,t,t,t,t,t,D);return Ce.placeholder=Tm.placeholder,Ce}function rp(x,D,V){var Ce,Je,pt,Lt,Vt,sn,Yn=0,Hn=!1,Ai=!1,Ni=!0;if(typeof x!="function")throw new su(l);D=ch(D)||0,ll(V)&&(Hn=!!V.leading,Ai="maxWait"in V,pt=Ai?Wo(ch(V.maxWait)||0,D):pt,Ni="trailing"in V?!!V.trailing:Ni);function wr(IA){var Np=Ce,x0=Je;return Ce=Je=t,Yn=IA,Lt=x.apply(x0,Np),Lt}function oo(IA){return Yn=IA,Vt=ar(Ia,D),Hn?wr(IA):Lt}function da(IA){var Np=IA-sn,x0=IA-Yn,a7=D-Np;return Ai?sa(a7,pt-x0):a7}function ao(IA){var Np=IA-sn,x0=IA-Yn;return sn===t||Np>=D||Np<0||Ai&&x0>=pt}function Ia(){var IA=J0();if(ao(IA))return Ha(IA);Vt=ar(Ia,da(IA))}function Ha(IA){return Vt=t,Ni&&Ce?wr(IA):(Ce=Je=t,Lt)}function mf(){Vt!==t&&YA(Vt),Yn=0,Ce=sn=Je=Vt=t}function Ad(){return Vt===t?Lt:Ha(J0())}function gf(){var IA=J0(),Np=ao(IA);if(Ce=arguments,Je=this,sn=IA,Np){if(Vt===t)return oo(sn);if(Ai)return YA(Vt),Vt=ar(Ia,D),wr(sn)}return Vt===t&&(Vt=ar(Ia,D)),Lt}return gf.cancel=mf,gf.flush=Ad,gf}var uh=yt(function(x,D){return Gl(x,1,D)}),Tp=yt(function(x,D,V){return Gl(x,ch(D)||0,V)});function sC(x){return Jo(x,ge)}function kp(x,D){if(typeof x!="function"||D!=null&&typeof D!="function")throw new su(l);var V=function(){var Ce=arguments,Je=D?D.apply(this,Ce):Ce[0],pt=V.cache;if(pt.has(Je))return pt.get(Je);var Lt=x.apply(this,Ce);return V.cache=pt.set(Je,Lt)||pt,Lt};return V.cache=new(kp.Cache||ts),V}kp.Cache=ts;function Dp(x){if(typeof x!="function")throw new su(l);return function(){var D=arguments;switch(D.length){case 0:return!x.call(this);case 1:return!x.call(this,D[0]);case 2:return!x.call(this,D[0],D[1]);case 3:return!x.call(this,D[0],D[1],D[2])}return!x.apply(this,D)}}function Rp(x){return Om(2,x)}var e1=Os(function(x,D){D=D.length==1&&Hr(D[0])?po(D[0],ou(pr())):po(Pr(D,1),ou(pr()));var V=D.length;return yt(function(Ce){for(var Je=-1,pt=sa(Ce.length,V);++Je<pt;)Ce[Je]=D[Je].call(this,Ce[Je]);return ps(x,this,Ce)})}),eg=yt(function(x,D){var V=hA(D,Dd(eg));return Jo(x,$,t,D,V)}),km=yt(function(x,D){var V=hA(D,Dd(km));return Jo(x,ae,t,D,V)}),t1=cs(function(x,D){return Jo(x,ce,t,t,t,D)});function h0(x,D){if(typeof x!="function")throw new su(l);return D=D===t?D:ro(D),yt(x,D)}function gy(x,D){if(typeof x!="function")throw new su(l);return D=D==null?0:Wo(ro(D),0),yt(function(V){var Ce=V[D],Je=Is(V,0,D);return Ce&&rc(Je,Ce),ps(x,this,Je)})}function n1(x,D,V){var Ce=!0,Je=!0;if(typeof x!="function")throw new su(l);return ll(V)&&(Ce="leading"in V?!!V.leading:Ce,Je="trailing"in V?!!V.trailing:Je),rp(x,D,{leading:Ce,maxWait:D,trailing:Je})}function i1(x){return Jg(x,1)}function yy(x,D){return eg(is(D),x)}function lC(){if(!arguments.length)return[];var x=arguments[0];return Hr(x)?x:[x]}function d0(x){return _l(x,K)}function uC(x,D){return D=typeof D=="function"?D:t,_l(x,K,D)}function vy(x){return _l(x,O|K)}function na(x,D){return D=typeof D=="function"?D:t,_l(x,O|K,D)}function f0(x,D){return D==null||rf(x,D,ie(D))}function Zl(x,D){return x===D||x!==x&&D!==D}var tg=rd(Ql),r1=rd(function(x,D){return x>=D}),Ud=Dc(function(){return arguments}())?Dc:function(x){return ul(x)&&Go.call(x,"callee")&&!kr.call(x,"callee")},Hr=vn.isArray,p0=ho?ou(ho):Zs;function Xl(x){return x!=null&&op(x.length)&&!Dh(x)}function Sl(x){return ul(x)&&Xl(x)}function m0(x){return x===!0||x===!1||ul(x)&&mo(x)==Fe}var ff=Mh||jp,ng=No?ou(No):ns;function o1(x){return ul(x)&&x.nodeType===1&&!Ah(x)}function XA(x){if(x==null)return!0;if(Xl(x)&&(Hr(x)||typeof x=="string"||typeof x.splice=="function"||ff(x)||Dm(x)||Ud(x)))return!x.length;var D=al(x);if(D==Ot||D==On)return!x.size;if(Le(x))return!s(x).length;for(var V in x)if(Go.call(x,V))return!1;return!0}function Ba(x,D){return cu(x,D)}function Pp(x,D,V){V=typeof V=="function"?V:t;var Ce=V?V(x,D):t;return Ce===t?cu(x,D,t,V):!!Ce}function el(x){if(!ul(x))return!1;var D=mo(x);return D==He||D==Re||typeof x.message=="string"&&typeof x.name=="string"&&!Ah(x)}function Cy(x){return typeof x=="number"&&Hh(x)}function Dh(x){if(!ll(x))return!1;var D=mo(x);return D==bt||D==_t||D==Ut||D==Wt}function g0(x){return typeof x=="number"&&x==ro(x)}function op(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=Ct}function ll(x){var D=typeof x;return x!=null&&(D=="object"||D=="function")}function ul(x){return x!=null&&typeof x=="object"}var sd=jr?ou(jr):cc;function ig(x,D){return x===D||hc(x,D,ea(D))}function _y(x,D,V){return V=typeof V=="function"?V:t,hc(x,D,ea(D),V)}function a1(x){return s1(x)&&x!=+x}function by(x){if(ke(x))throw new Sr(a);return Yl(x)}function xy(x){return x===null}function AC(x){return x==null}function s1(x){return typeof x=="number"||ul(x)&&mo(x)==qt}function Ah(x){if(!ul(x)||mo(x)!=on)return!1;var D=Ec(x);if(D===null)return!0;var V=Go.call(D,"constructor")&&D.constructor;return typeof V=="function"&&V instanceof V&&Tl.call(V)==Vs}var Kp=qs?ou(qs):td;function rg(x){return g0(x)&&x>=-Ct&&x<=Ct}var y0=Ll?ou(Ll):nd;function Up(x){return typeof x=="string"||!Hr(x)&&ul(x)&&mo(x)==Bn}function rA(x){return typeof x=="symbol"||ul(x)&&mo(x)==In}var Dm=Yu?ou(Yu):Td;function ld(x){return x===t}function l1(x){return ul(x)&&al(x)==ei}function Lp(x){return ul(x)&&mo(x)==Kn}var Pu=rd(_),Fp=rd(function(x,D){return x<=D});function Fc(x){if(!x)return[];if(Xl(x))return Up(x)?Mu(x):_o(x);if(Bc&&x[Bc])return fm(x[Bc]());var D=al(x),V=D==Ot?Hc:D==On?$u:ui;return V(x)}function ud(x){if(!x)return x===0?x:0;if(x=ch(x),x===st||x===-st){var D=x<0?-1:1;return D*nt}return x===x?x:0}function ro(x){var D=ud(x),V=D%1;return D===D?V?D-V:D:0}function Ld(x){return x?eA(ro(x),0,Ne):0}function ch(x){if(typeof x=="number")return x;if(rA(x))return be;if(ll(x)){var D=typeof x.valueOf=="function"?x.valueOf():x;x=ll(D)?D+"":D}if(typeof x!="string")return x===0?x:+x;x=Rf(x);var V=Tr.test(x);return V||gl.test(x)?Xn(x.slice(2),V?2:8):Fa.test(x)?be:+x}function u1(x){return Xo(x,ue(x))}function Rm(x){return x?eA(ro(x),-Ct,Ct):x===0?x:0}function Ka(x){return x==null?"":xi(x)}var A1=du(function(x,D){if(Le(D)||Xl(D)){Xo(D,ie(D),x);return}for(var V in D)Go.call(D,V)&&Bh(x,V,D[V])}),og=du(function(x,D){Xo(D,ue(D),x)}),v0=du(function(x,D,V,Ce){Xo(D,ue(D),x,Ce)}),C0=du(function(x,D,V,Ce){Xo(D,ie(D),x,Ce)}),c1=cs(ih);function My(x,D){var V=$s(x);return D==null?V:Ac(V,D)}var h1=yt(function(x,D){x=Do(x);var V=-1,Ce=D.length,Je=Ce>2?D[2]:t;for(Je&&E(D[0],D[1],Je)&&(Ce=1);++V<Ce;)for(var pt=D[V],Lt=ue(pt),Vt=-1,sn=Lt.length;++Vt<sn;){var Yn=Lt[Vt],Hn=x[Yn];(Hn===t||Zl(Hn,wu[Yn])&&!Go.call(x,Yn))&&(x[Yn]=pt[Yn])}return x}),_0=yt(function(x){return x.push(t,Th),ps(qe,t,x)});function Fd(x,D){return kf(x,pr(D,3),ki)}function zp(x,D){return kf(x,pr(D,3),kc)}function ag(x,D){return x==null?x:QA(x,pr(D,3),ue)}function d1(x,D){return x==null?x:Ii(x,pr(D,3),ue)}function Pm(x,D){return x&&ki(x,pr(D,3))}function h(x,D){return x&&kc(x,pr(D,3))}function u(x){return x==null?[]:Du(x,ie(x))}function c(x){return x==null?[]:Du(x,ue(x))}function y(x,D,V){var Ce=x==null?t:Au(x,D);return Ce===t?V:Ce}function M(x,D){return x!=null&&qf(x,D,Ff)}function R(x,D){return x!=null&&qf(x,D,Jh)}var P=nA(function(x,D,V){D!=null&&typeof D.toString!="function"&&(D=Na.call(D)),x[D]=V},hn(fn)),N=nA(function(x,D,V){D!=null&&typeof D.toString!="function"&&(D=Na.call(D)),Go.call(x,D)?x[D].push(V):x[D]=[V]},pr),H=yt(CA);function ie(x){return Xl(x)?Tc(x):s(x)}function ue(x){return Xl(x)?Tc(x,!0):f(x)}function ve(x,D){var V={};return D=pr(D,3),ki(x,function(Ce,Je,pt){yA(V,D(Ce,Je,pt),Ce)}),V}function Pe(x,D){var V={};return D=pr(D,3),ki(x,function(Ce,Je,pt){yA(V,Je,D(Ce,Je,pt))}),V}var Qe=du(function(x,D,V){q(x,D,V)}),qe=du(function(x,D,V,Ce){q(x,D,V,Ce)}),et=cs(function(x,D){var V={};if(x==null)return V;var Ce=!1;D=po(D,function(pt){return pt=Qa(pt,x),Ce||(Ce=pt.length>1),pt}),Xo(x,Op(x),V),Ce&&(V=_l(V,O|U|K,Wf));for(var Je=D.length;Je--;)Co(V,D[Je]);return V});function At(x,D){return Qt(x,Dp(pr(D)))}var Mt=cs(function(x,D){return x==null?{}:Ee(x,D)});function Qt(x,D){if(x==null)return{};var V=po(Op(x),function(Ce){return[Ce]});return D=pr(D),Me(x,V,function(Ce,Je){return D(Ce,Je[0])})}function Dt(x,D,V){D=Qa(D,x);var Ce=-1,Je=D.length;for(Je||(Je=1,x=t);++Ce<Je;){var pt=x==null?t:x[qr(D[Ce])];pt===t&&(Ce=Je,pt=V),x=Dh(pt)?pt.call(x):pt}return x}function jt(x,D,V){return x==null?x:Ft(x,D,V)}function ln(x,D,V,Ce){return Ce=typeof Ce=="function"?Ce:t,x==null?x:Ft(x,D,V,Ce)}var Cn=af(ie),Un=af(ue);function pi(x,D,V){var Ce=Hr(x),Je=Ce||ff(x)||Dm(x);if(D=pr(D,4),V==null){var pt=x&&x.constructor;Je?V=Ce?new pt:[]:ll(x)?V=Dh(pt)?$s(Ec(x)):{}:V={}}return(Je?Ra:ki)(x,function(Lt,Vt,sn){return D(V,Lt,Vt,sn)}),V}function ai(x,D){return x==null?!0:Co(x,D)}function di(x,D,V){return x==null?x:ua(x,D,is(V))}function tr(x,D,V,Ce){return Ce=typeof Ce=="function"?Ce:t,x==null?x:ua(x,D,is(V),Ce)}function ui(x){return x==null?[]:Pf(x,ie(x))}function fi(x){return x==null?[]:Pf(x,ue(x))}function En(x,D,V){return V===t&&(V=D,D=t),V!==t&&(V=ch(V),V=V===V?V:0),D!==t&&(D=ch(D),D=D===D?D:0),eA(ch(x),D,V)}function fr(x,D,V){return D=ud(D),V===t?(V=D,D=0):V=ud(V),x=ch(x),Uo(x,D,V)}function Er(x,D,V){if(V&&typeof V!="boolean"&&E(x,D,V)&&(D=V=t),V===t&&(typeof D=="boolean"?(V=D,D=t):typeof x=="boolean"&&(V=x,x=t)),x===t&&D===t?(x=0,D=1):(x=ud(x),D===t?(D=x,x=0):D=ud(D)),x>D){var Ce=x;x=D,D=Ce}if(V||x%1||D%1){var Je=Oc();return sa(x+Je*(D-x+Si("1e-"+((Je+"").length-1))),D)}return ct(x,D)}var sr=Ya(function(x,D,V){return D=D.toLowerCase(),x+(V?Ui(D):D)});function Ui(x){return T(Ka(x).toLowerCase())}function Gr(x){return x=Ka(x),x&&x.replace(wo,Md).replace(ru,"")}function Ua(x,D,V){x=Ka(x),D=xi(D);var Ce=x.length;V=V===t?Ce:eA(ro(V),0,Ce);var Je=V;return V-=D.length,V>=0&&x.slice(V,Je)==D}function bs(x){return x=Ka(x),x&&Dn.test(x)?x.replace(it,KA):x}function Dl(x){return x=Ka(x),x&&ti.test(x)?x.replace(hi,"\\$&"):x}var OA=Ya(function(x,D,V){return x+(V?"-":"")+D.toLowerCase()}),Rl=Ya(function(x,D,V){return x+(V?" ":"")+D.toLowerCase()}),Ku=tA("toLowerCase");function ks(x,D,V){x=Ka(x),D=ro(D);var Ce=D?ac(x):0;if(!D||Ce>=D)return x;var Je=(D-Ce)/2;return of(Ou(Je),V)+x+of($c(Je),V)}function Al(x,D,V){x=Ka(x),D=ro(D);var Ce=D?ac(x):0;return D&&Ce<D?x+of(D-Ce,V):x}function Uu(x,D,V){x=Ka(x),D=ro(D);var Ce=D?ac(x):0;return D&&Ce<D?of(D-Ce,V)+x:x}function gu(x,D,V){return V||D==null?D=0:D&&(D=+D),zA(Ka(x).replace(Wi,""),D||0)}function Lu(x,D,V){return(V?E(x,D,V):D===t)?D=1:D=ro(D),xt(Ka(x),D)}function zc(){var x=arguments,D=Ka(x[0]);return x.length<3?D:D.replace(x[1],x[2])}var yu=Ya(function(x,D,V){return x+(V?"_":"")+D.toLowerCase()});function oA(x,D,V){return V&&typeof V!="number"&&E(x,D,V)&&(D=V=t),V=V===t?Ne:V>>>0,V?(x=Ka(x),x&&(typeof D=="string"||D!=null&&!Kp(D))&&(D=xi(D),!D&&wc(x))?Is(Mu(x),0,V):x.split(D,V)):[]}var cl=Ya(function(x,D,V){return x+(V?" ":"")+T(D)});function Jl(x,D,V){return x=Ka(x),V=V==null?0:eA(ro(V),0,x.length),D=xi(D),x.slice(V,V+D.length)==D}function hl(x,D,V){var Ce=rt.templateSettings;V&&E(x,D,V)&&(D=t),x=Ka(x),D=v0({},D,Ce,Bp);var Je=v0({},D.imports,Ce.imports,Bp),pt=ie(Je),Lt=Pf(Je,pt),Vt,sn,Yn=0,Hn=D.interpolate||Xa,Ai="__p += '",Ni=Vc((D.escape||Xa).source+"|"+Hn.source+"|"+(Hn===Wn?zi:Xa).source+"|"+(D.evaluate||Xa).source+"|$","g"),wr="//# sourceURL="+(Go.call(D,"sourceURL")?(D.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zi+"]")+`
`;x.replace(Ni,function(ao,Ia,Ha,mf,Ad,gf){return Ha||(Ha=mf),Ai+=x.slice(Yn,gf).replace(Il,Vu),Ia&&(Vt=!0,Ai+=`' +
__e(`+Ia+`) +
'`),Ad&&(sn=!0,Ai+=`';
`+Ad+`;
__p += '`),Ha&&(Ai+=`' +
((__t = (`+Ha+`)) == null ? '' : __t) +
'`),Yn=gf+ao.length,ao}),Ai+=`';
`;var oo=Go.call(D,"variable")&&D.variable;if(!oo)Ai=`with (obj) {
`+Ai+`
}
`;else if(Zn.test(oo))throw new Sr(o);Ai=(sn?Ai.replace(g,""):Ai).replace(mt,"$1").replace(ht,"$1;"),Ai="function("+(oo||"obj")+`) {
`+(oo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Vt?", __e = _.escape":"")+(sn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ai+`return __p
}`;var da=se(function(){return Oo(pt,wr+"return "+Ai).apply(t,Lt)});if(da.source=Ai,el(da))throw da;return da}function dl(x){return Ka(x).toLowerCase()}function qa(x){return Ka(x).toUpperCase()}function Rh(x,D,V){if(x=Ka(x),x&&(V||D===t))return Rf(x);if(!x||!(D=xi(D)))return x;var Ce=Mu(x),Je=Mu(D),pt=au(Ce,Je),Lt=Mc(Ce,Je)+1;return Is(Ce,pt,Lt).join("")}function Km(x,D,V){if(x=Ka(x),x&&(V||D===t))return x.slice(0,UA(x)+1);if(!x||!(D=xi(D)))return x;var Ce=Mu(x),Je=Mc(Ce,Mu(D))+1;return Is(Ce,0,Je).join("")}function jc(x,D,V){if(x=Ka(x),x&&(V||D===t))return x.replace(Wi,"");if(!x||!(D=xi(D)))return x;var Ce=Mu(x),Je=au(Ce,Mu(D));return Is(Ce,Je).join("")}function A(x,D){var V=ye,Ce=we;if(ll(D)){var Je="separator"in D?D.separator:Je;V="length"in D?ro(D.length):V,Ce="omission"in D?xi(D.omission):Ce}x=Ka(x);var pt=x.length;if(wc(x)){var Lt=Mu(x);pt=Lt.length}if(V>=pt)return x;var Vt=V-ac(Ce);if(Vt<1)return Ce;var sn=Lt?Is(Lt,0,Vt).join(""):x.slice(0,Vt);if(Je===t)return sn+Ce;if(Lt&&(Vt+=sn.length-Vt),Kp(Je)){if(x.slice(Vt).search(Je)){var Yn,Hn=sn;for(Je.global||(Je=Vc(Je.source,Ka(vr.exec(Je))+"g")),Je.lastIndex=0;Yn=Je.exec(Hn);)var Ai=Yn.index;sn=sn.slice(0,Ai===t?Vt:Ai)}}else if(x.indexOf(xi(Je),Vt)!=Vt){var Ni=sn.lastIndexOf(Je);Ni>-1&&(sn=sn.slice(0,Ni))}return sn+Ce}function m(x){return x=Ka(x),x&&en.test(x)?x.replace(Tt,Bo):x}var b=Ya(function(x,D,V){return x+(V?" ":"")+D.toUpperCase()}),T=tA("toUpperCase");function Q(x,D,V){return x=Ka(x),D=V?t:D,D===t?Yh(x)?wp(x):Tf(x):x.match(D)||[]}var se=yt(function(x,D){try{return ps(x,t,D)}catch(V){return el(V)?V:new Sr(V)}}),Ge=cs(function(x,D){return Ra(D,function(V){V=qr(V),yA(x,V,ZA(x[V],x))}),x});function ot(x){var D=x==null?0:x.length,V=pr();return x=D?po(x,function(Ce){if(typeof Ce[1]!="function")throw new su(l);return[V(Ce[0]),Ce[1]]}):[],yt(function(Ce){for(var Je=-1;++Je<D;){var pt=x[Je];if(ps(pt[0],this,Ce))return ps(pt[1],this,Ce)}})}function zt(x){return Ep(_l(x,O))}function hn(x){return function(){return x}}function kn(x,D){return x==null||x!==x?D:x}var Nn=MA(),pn=MA(!0);function fn(x){return x}function Kr(x){return I(typeof x=="function"?x:_l(x,O))}function Ur(x){return k(_l(x,O))}function xs(x,D){return z(x,_l(D,O))}var tn=yt(function(x,D){return function(V){return CA(V,x,D)}}),$t=yt(function(x,D){return function(V){return CA(x,V,D)}});function An(x,D,V){var Ce=ie(D),Je=Du(D,Ce);V==null&&!(ll(D)&&(Je.length||!Ce.length))&&(V=D,D=x,x=this,Je=Du(D,ie(D)));var pt=!(ll(V)&&"chain"in V)||!!V.chain,Lt=Dh(x);return Ra(Je,function(Vt){var sn=D[Vt];x[Vt]=sn,Lt&&(x.prototype[Vt]=function(){var Yn=this.__chain__;if(pt||Yn){var Hn=x(this.__wrapped__),Ai=Hn.__actions__=_o(this.__actions__);return Ai.push({func:sn,args:arguments,thisArg:x}),Hn.__chain__=Yn,Hn}return sn.apply(x,rc([this.value()],arguments))})}),x}function Ln(){return Ri._===this&&(Ri._=Es),this}function ir(){}function qo(x){return x=ro(x),yt(function(D){return he(D,x)})}var nr=jf(po),Ir=jf(PA),Fu=jf(yh);function Oa(x){return F(x)?Nh(qr(x)):Ue(x)}function ap(x){return function(D){return x==null?t:Au(x,D)}}var cC=fc(),gc=fc(!0);function hh(){return[]}function jp(){return!1}function pf(){return{}}function b0(){return""}function sp(){return!0}function IG(x,D){if(x=ro(x),x<1||x>Ct)return[];var V=Ne,Ce=sa(x,Ne);D=pr(D),x-=Ne;for(var Je=Ch(Ce,D);++V<x;)D(V);return Je}function TG(x){return Hr(x)?po(x,qr):rA(x)?[x]:_o(ca(Ka(x)))}function kG(x){var D=++fA;return Ka(x)+D}var DG=id(function(x,D){return x+D},0),RG=Gf("ceil"),PG=id(function(x,D){return x/D},1),KG=Gf("floor");function UG(x){return x&&x.length?vA(x,fn,Ql):t}function LG(x,D){return x&&x.length?vA(x,pr(D,2),Ql):t}function FG(x){return bd(x,fn)}function zG(x,D){return bd(x,pr(D,2))}function jG(x){return x&&x.length?vA(x,fn,_):t}function NG(x,D){return x&&x.length?vA(x,pr(D,2),_):t}var GG=id(function(x,D){return x*D},1),WG=Gf("round"),QG=id(function(x,D){return x-D},0);function YG(x){return x&&x.length?vh(x,fn):0}function qG(x,D){return x&&x.length?vh(x,pr(D,2)):0}return rt.after=aC,rt.ary=Jg,rt.assign=A1,rt.assignIn=og,rt.assignInWith=v0,rt.assignWith=C0,rt.at=c1,rt.before=Om,rt.bind=ZA,rt.bindAll=Ge,rt.bindKey=ad,rt.castArray=lC,rt.chain=Jf,rt.chunk=Vl,rt.compact=Ts,rt.concat=Ns,rt.cond=ot,rt.conforms=zt,rt.constant=hn,rt.countBy=wm,rt.create=My,rt.curry=Im,rt.curryRight=Tm,rt.debounce=rp,rt.defaults=h1,rt.defaultsDeep=_0,rt.defer=uh,rt.delay=Tp,rt.difference=Or,rt.differenceBy=Ea,rt.differenceWith=$l,rt.drop=pc,rt.dropRight=pu,rt.dropRightWhile=oh,rt.dropWhile=hs,rt.fill=wA,rt.filter=Ay,rt.flatMap=A0,rt.flatMapDeep=hy,rt.flatMapDepth=np,rt.flatten=sl,rt.flattenDeep=mu,rt.flattenDepth=$A,rt.flip=sC,rt.flow=Nn,rt.flowRight=pn,rt.fromPairs=od,rt.functions=u,rt.functionsIn=c,rt.groupBy=c0,rt.initial=Gg,rt.intersection=Rd,rt.intersectionBy=Ip,rt.intersectionWith=ym,rt.invert=P,rt.invertBy=N,rt.invokeMap=Z0,rt.iteratee=Kr,rt.keyBy=dy,rt.keys=ie,rt.keysIn=ue,rt.map=Em,rt.mapKeys=ve,rt.mapValues=Pe,rt.matches=Ur,rt.matchesProperty=xs,rt.memoize=kp,rt.merge=Qe,rt.mergeWith=qe,rt.method=tn,rt.methodOf=$t,rt.mixin=An,rt.negate=Dp,rt.nthArg=qo,rt.omit=et,rt.omitBy=At,rt.once=Rp,rt.orderBy=Vg,rt.over=nr,rt.overArgs=e1,rt.overEvery=Ir,rt.overSome=Fu,rt.partial=eg,rt.partialRight=km,rt.partition=fy,rt.pick=Mt,rt.pickBy=Qt,rt.property=Oa,rt.propertyOf=ap,rt.pull=ry,rt.pullAll=Hf,rt.pullAllBy=Cm,rt.pullAllWith=_m,rt.pullAt=oy,rt.range=cC,rt.rangeRight=gc,rt.rearg=t1,rt.reject=Bm,rt.remove=iC,rt.rest=h0,rt.reverse=Q0,rt.sampleSize=py,rt.set=jt,rt.setWith=ln,rt.shuffle=_s,rt.slice=os,rt.sortBy=my,rt.sortedUniq=bm,rt.sortedUniqBy=Qg,rt.split=oA,rt.spread=gy,rt.tail=cf,rt.take=wl,rt.takeRight=Pd,rt.takeRightWhile=$f,rt.takeWhile=Y0,rt.tap=ep,rt.throttle=n1,rt.thru=BA,rt.toArray=Fc,rt.toPairs=Cn,rt.toPairsIn=Un,rt.toPath=TG,rt.toPlainObject=u1,rt.transform=pi,rt.unary=i1,rt.union=sh,rt.unionBy=xm,rt.unionWith=Zf,rt.uniq=Lc,rt.uniqBy=q0,rt.uniqWith=Yg,rt.unset=ai,rt.unzip=Mm,rt.unzipWith=l0,rt.update=di,rt.updateWith=tr,rt.values=ui,rt.valuesIn=fi,rt.without=hf,rt.words=Q,rt.wrap=yy,rt.xor=EA,rt.xorBy=Xf,rt.xorWith=Kd,rt.zip=Js,rt.zipObject=u0,rt.zipObjectDeep=H0,rt.zipWith=qg,rt.entries=Cn,rt.entriesIn=Un,rt.extend=og,rt.extendWith=v0,An(rt,rt),rt.add=DG,rt.attempt=se,rt.camelCase=sr,rt.capitalize=Ui,rt.ceil=RG,rt.clamp=En,rt.clone=d0,rt.cloneDeep=vy,rt.cloneDeepWith=na,rt.cloneWith=uC,rt.conformsTo=f0,rt.deburr=Gr,rt.defaultTo=kn,rt.divide=PG,rt.endsWith=Ua,rt.eq=Zl,rt.escape=bs,rt.escapeRegExp=Dl,rt.every=uy,rt.find=cy,rt.findIndex=Ml,rt.findKey=Fd,rt.findLast=$0,rt.findLastIndex=mc,rt.findLastKey=zp,rt.floor=KG,rt.forEach=Sm,rt.forEachRight=ip,rt.forIn=ag,rt.forInRight=d1,rt.forOwn=Pm,rt.forOwnRight=h,rt.get=y,rt.gt=tg,rt.gte=r1,rt.has=M,rt.hasIn=R,rt.head=Af,rt.identity=fn,rt.includes=df,rt.indexOf=Ng,rt.inRange=fr,rt.invoke=H,rt.isArguments=Ud,rt.isArray=Hr,rt.isArrayBuffer=p0,rt.isArrayLike=Xl,rt.isArrayLikeObject=Sl,rt.isBoolean=m0,rt.isBuffer=ff,rt.isDate=ng,rt.isElement=o1,rt.isEmpty=XA,rt.isEqual=Ba,rt.isEqualWith=Pp,rt.isError=el,rt.isFinite=Cy,rt.isFunction=Dh,rt.isInteger=g0,rt.isLength=op,rt.isMap=sd,rt.isMatch=ig,rt.isMatchWith=_y,rt.isNaN=a1,rt.isNative=by,rt.isNil=AC,rt.isNull=xy,rt.isNumber=s1,rt.isObject=ll,rt.isObjectLike=ul,rt.isPlainObject=Ah,rt.isRegExp=Kp,rt.isSafeInteger=rg,rt.isSet=y0,rt.isString=Up,rt.isSymbol=rA,rt.isTypedArray=Dm,rt.isUndefined=ld,rt.isWeakMap=l1,rt.isWeakSet=Lp,rt.join=s0,rt.kebabCase=OA,rt.last=SA,rt.lastIndexOf=vm,rt.lowerCase=Rl,rt.lowerFirst=Ku,rt.lt=Pu,rt.lte=Fp,rt.max=UG,rt.maxBy=LG,rt.mean=FG,rt.meanBy=zG,rt.min=jG,rt.minBy=NG,rt.stubArray=hh,rt.stubFalse=jp,rt.stubObject=pf,rt.stubString=b0,rt.stubTrue=sp,rt.multiply=GG,rt.nth=Wg,rt.noConflict=Ln,rt.noop=ir,rt.now=J0,rt.pad=ks,rt.padEnd=Al,rt.padStart=Uu,rt.parseInt=gu,rt.random=Er,rt.reduce=$g,rt.reduceRight=Zg,rt.repeat=Lu,rt.replace=zc,rt.result=Dt,rt.round=WG,rt.runInContext=Zt,rt.sample=X0,rt.size=Xg,rt.snakeCase=yu,rt.some=oC,rt.sortedIndex=Gs,rt.sortedIndexBy=ta,rt.sortedIndexOf=Yo,rt.sortedLastIndex=as,rt.sortedLastIndexBy=ah,rt.sortedLastIndexOf=Vf,rt.startCase=cl,rt.startsWith=Jl,rt.subtract=QG,rt.sum=YG,rt.sumBy=qG,rt.template=hl,rt.times=IG,rt.toFinite=ud,rt.toInteger=ro,rt.toLength=Ld,rt.toLower=dl,rt.toNumber=ch,rt.toSafeInteger=Rm,rt.toString=Ka,rt.toUpper=qa,rt.trim=Rh,rt.trimEnd=Km,rt.trimStart=jc,rt.truncate=A,rt.unescape=m,rt.uniqueId=kG,rt.upperCase=b,rt.upperFirst=T,rt.each=Sm,rt.eachRight=ip,rt.first=Af,An(rt,function(){var x={};return ki(rt,function(D,V){Go.call(rt.prototype,V)||(x[V]=D)}),x}(),{chain:!1}),rt.VERSION=i,Ra(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){rt[x].placeholder=rt}),Ra(["drop","take"],function(x,D){gr.prototype[x]=function(V){V=V===t?1:Wo(ro(V),0);var Ce=this.__filtered__&&!D?new gr(this):this.clone();return Ce.__filtered__?Ce.__takeCount__=sa(V,Ce.__takeCount__):Ce.__views__.push({size:sa(V,Ne),type:x+(Ce.__dir__<0?"Right":"")}),Ce},gr.prototype[x+"Right"]=function(V){return this.reverse()[x](V).reverse()}}),Ra(["filter","map","takeWhile"],function(x,D){var V=D+1,Ce=V==Ve||V==ze;gr.prototype[x]=function(Je){var pt=this.clone();return pt.__iteratees__.push({iteratee:pr(Je,3),type:V}),pt.__filtered__=pt.__filtered__||Ce,pt}}),Ra(["head","last"],function(x,D){var V="take"+(D?"Right":"");gr.prototype[x]=function(){return this[V](1).value()[0]}}),Ra(["initial","tail"],function(x,D){var V="drop"+(D?"":"Right");gr.prototype[x]=function(){return this.__filtered__?new gr(this):this[V](1)}}),gr.prototype.compact=function(){return this.filter(fn)},gr.prototype.find=function(x){return this.filter(x).head()},gr.prototype.findLast=function(x){return this.reverse().find(x)},gr.prototype.invokeMap=yt(function(x,D){return typeof x=="function"?new gr(this):this.map(function(V){return CA(V,x,D)})}),gr.prototype.reject=function(x){return this.filter(Dp(pr(x)))},gr.prototype.slice=function(x,D){x=ro(x);var V=this;return V.__filtered__&&(x>0||D<0)?new gr(V):(x<0?V=V.takeRight(-x):x&&(V=V.drop(x)),D!==t&&(D=ro(D),V=D<0?V.dropRight(-D):V.take(D-x)),V)},gr.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},gr.prototype.toArray=function(){return this.take(Ne)},ki(gr.prototype,function(x,D){var V=/^(?:filter|find|map|reject)|While$/.test(D),Ce=/^(?:head|last)$/.test(D),Je=rt[Ce?"take"+(D=="last"?"Right":""):D],pt=Ce||/^find/.test(D);Je&&(rt.prototype[D]=function(){var Lt=this.__wrapped__,Vt=Ce?[1]:arguments,sn=Lt instanceof gr,Yn=Vt[0],Hn=sn||Hr(Lt),Ai=function(Ia){var Ha=Je.apply(rt,rc([Ia],Vt));return Ce&&Ni?Ha[0]:Ha};Hn&&V&&typeof Yn=="function"&&Yn.length!=1&&(sn=Hn=!1);var Ni=this.__chain__,wr=!!this.__actions__.length,oo=pt&&!Ni,da=sn&&!wr;if(!pt&&Hn){Lt=da?Lt:new gr(this);var ao=x.apply(Lt,Vt);return ao.__actions__.push({func:BA,args:[Ai],thisArg:t}),new Zo(ao,Ni)}return oo&&da?x.apply(this,Vt):(ao=this.thru(Ai),oo?Ce?ao.value()[0]:ao.value():ao)})}),Ra(["pop","push","shift","sort","splice","unshift"],function(x){var D=Sd[x],V=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",Ce=/^(?:pop|shift)$/.test(x);rt.prototype[x]=function(){var Je=arguments;if(Ce&&!this.__chain__){var pt=this.value();return D.apply(Hr(pt)?pt:[],Je)}return this[V](function(Lt){return D.apply(Hr(Lt)?Lt:[],Je)})}}),ki(gr.prototype,function(x,D){var V=rt[D];if(V){var Ce=V.name+"";Go.call(mA,Ce)||(mA[Ce]=[]),mA[Ce].push({name:D,func:V})}}),mA[Sa(t,te).name]=[{name:"wrapper",func:t}],gr.prototype.clone=gs,gr.prototype.reverse=eh,gr.prototype.value=Sh,rt.prototype.at=ay,rt.prototype.chain=lh,rt.prototype.commit=sy,rt.prototype.next=ly,rt.prototype.plant=tp,rt.prototype.reverse=V0,rt.prototype.toJSON=rt.prototype.valueOf=rt.prototype.value=Hg,rt.prototype.first=rt.prototype.head,Bc&&(rt.prototype[Bc]=rC),rt},zl=Sc();to?((to.exports=zl)._=zl,Xi._=zl):Ri._=zl}).call(PQ)}(OC,OC.exports)),OC.exports}var eb=KQ();const l6=AA(eb);function UQ(n,e,t){const i=e<0?n.length+e:e;if(i>=0&&i<n.length){const r=t<0?n.length+t:t,[a]=n.splice(e,1);n.splice(r,0,a)}}var d4,$7;function LQ(){if($7)return d4;$7=1;function n(e){for(var t=5381,i=e.length;i;)t=t*33^e.charCodeAt(--i);return t>>>0}return d4=n,d4}var FQ=LQ();const Z7=AA(FQ);var _f=Uint8Array,Av=Uint16Array,zQ=Int32Array,$U=new _f([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ZU=new _f([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jQ=new _f([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XU=function(n,e){for(var t=new Av(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new zQ(t[30]),i=1;i<30;++i)for(var a=t[i];a<t[i+1];++a)r[a]=a-t[i]<<5|i;return{b:t,r}},JU=XU($U,2),eL=JU.b,NQ=JU.r;eL[28]=258,NQ[258]=28;var GQ=XU(ZU,0),WQ=GQ.b,u6=new Av(32768);for(var nu=0;nu<32768;++nu){var sg=(nu&43690)>>1|(nu&21845)<<1;sg=(sg&52428)>>2|(sg&13107)<<2,sg=(sg&61680)>>4|(sg&3855)<<4,u6[nu]=((sg&65280)>>8|(sg&255)<<8)>>1}var HC=function(n,e,t){for(var i=n.length,r=0,a=new Av(e);r<i;++r)n[r]&&++a[n[r]-1];var l=new Av(e);for(r=1;r<e;++r)l[r]=l[r-1]+a[r-1]<<1;var o;if(t){o=new Av(1<<e);var p=15-e;for(r=0;r<i;++r)if(n[r])for(var C=r<<4|n[r],w=e-n[r],O=l[n[r]-1]++<<w,U=O|(1<<w)-1;O<=U;++O)o[u6[O]>>p]=C}else for(o=new Av(i),r=0;r<i;++r)n[r]&&(o[r]=u6[l[n[r]-1]++]>>15-n[r]);return o},tb=new _f(288);for(var nu=0;nu<144;++nu)tb[nu]=8;for(var nu=144;nu<256;++nu)tb[nu]=9;for(var nu=256;nu<280;++nu)tb[nu]=7;for(var nu=280;nu<288;++nu)tb[nu]=8;var tL=new _f(32);for(var nu=0;nu<32;++nu)tL[nu]=5;var QQ=HC(tb,9,1),YQ=HC(tL,5,1),f4=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Gp=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},p4=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},qQ=function(n){return(n+7)/8|0},HQ=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new _f(n.subarray(e,t))},VQ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yf=function(n,e,t){var i=new Error(e||VQ[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,yf),!t)throw i;return i},BB=function(n,e,t,i){var r=n.length,a=0;if(!r||e.f&&!e.l)return t||new _f(0);var l=!t,o=l||e.i!=2,p=e.i;l&&(t=new _f(r*3));var C=function(He){var bt=t.length;if(He>bt){var _t=new _f(Math.max(bt*2,He));_t.set(t),t=_t}},w=e.f||0,O=e.p||0,U=e.b||0,K=e.l,j=e.d,W=e.m,Y=e.n,te=r*8;do{if(!K){w=Gp(n,O,1);var J=Gp(n,O+1,3);if(O+=3,J)if(J==1)K=QQ,j=YQ,W=9,Y=5;else if(J==2){var ae=Gp(n,O,31)+257,G=Gp(n,O+10,15)+4,ce=ae+Gp(n,O+5,31)+1;O+=14;for(var ge=new _f(ce),ye=new _f(19),we=0;we<G;++we)ye[jQ[we]]=Gp(n,O+we*3,7);O+=G*3;for(var Oe=f4(ye),Se=(1<<Oe)-1,Ve=HC(ye,Oe,1),we=0;we<ce;){var xe=Ve[Gp(n,O,Se)];O+=xe&15;var oe=xe>>4;if(oe<16)ge[we++]=oe;else{var ze=0,st=0;for(oe==16?(st=3+Gp(n,O,3),O+=2,ze=ge[we-1]):oe==17?(st=3+Gp(n,O,7),O+=3):oe==18&&(st=11+Gp(n,O,127),O+=7);st--;)ge[we++]=ze}}var Ct=ge.subarray(0,ae),nt=ge.subarray(ae);W=f4(Ct),Y=f4(nt),K=HC(Ct,W,1),j=HC(nt,Y,1)}else yf(1);else{var oe=qQ(O)+4,ne=n[oe-4]|n[oe-3]<<8,$=oe+ne;if($>r){p&&yf(0);break}o&&C(U+ne),t.set(n.subarray(oe,$),U),e.b=U+=ne,e.p=O=$*8,e.f=w;continue}if(O>te){p&&yf(0);break}}o&&C(U+131072);for(var be=(1<<W)-1,Ne=(1<<Y)-1,tt=O;;tt=O){var ze=K[p4(n,O)&be],lt=ze>>4;if(O+=ze&15,O>te){p&&yf(0);break}if(ze||yf(2),lt<256)t[U++]=lt;else if(lt==256){tt=O,K=null;break}else{var kt=lt-254;if(lt>264){var we=lt-257,gt=$U[we];kt=Gp(n,O,(1<<gt)-1)+eL[we],O+=gt}var St=j[p4(n,O)&Ne],Ut=St>>4;St||yf(3),O+=St&15;var nt=WQ[Ut];if(Ut>3){var gt=ZU[Ut];nt+=p4(n,O)&(1<<gt)-1,O+=gt}if(O>te){p&&yf(0);break}o&&C(U+131072);var Fe=U+kt;if(U<nt){var Ke=a-nt,Re=Math.min(nt,Fe);for(Ke+U<0&&yf(3);U<Re;++U)t[U]=i[Ke+U]}for(;U<Fe;++U)t[U]=t[U-nt]}}e.l=K,e.p=tt,e.b=U,e.f=w,K&&(w=1,e.m=W,e.d=j,e.n=Y)}while(!w);return U!=t.length&&l?HQ(t,0,U):t.subarray(0,U)},$Q=new _f(0),ZQ=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&yf(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},XQ=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},JQ=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&yf(6,"invalid zlib data"),(n[1]>>5&1)==1&&yf(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function eY(n,e){return BB(n,{i:2},e,e)}function tY(n,e){var t=ZQ(n);return t+8>n.length&&yf(6,"invalid gzip data"),BB(n.subarray(t,-8),{i:2},new _f(XQ(n)),e)}function nY(n,e){return BB(n.subarray(JQ(n),-4),{i:2},e,e)}function iY(n,e){return n[0]==31&&n[1]==139&&n[2]==8?tY(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?eY(n,e):nY(n,e)}var rY=typeof TextDecoder<"u"&&new TextDecoder,oY=0;try{rY.decode($Q,{stream:!0}),oY=1}catch{}var aY=Object.defineProperty,VC=Math.pow,ml=(n,e)=>aY(n,"name",{value:e,configurable:!0}),Qc=(n,e,t)=>new Promise((i,r)=>{var a=p=>{try{o(t.next(p))}catch(C){r(C)}},l=p=>{try{o(t.throw(p))}catch(C){r(C)}},o=p=>p.done?i(p.value):Promise.resolve(p.value).then(a,l);o((t=t.apply(n,e)).next())});ml((n,e)=>{let t=!1,i="",r=L.GridLayer.extend({createTile:ml((a,l)=>{let o=document.createElement("img"),p=new AbortController,C=p.signal;return o.cancel=()=>{p.abort()},t||(n.getHeader().then(w=>{w.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):w.tileType===2?i="image/png":w.tileType===3?i="image/jpeg":w.tileType===4?i="image/webp":w.tileType===5&&(i="image/avif")}),t=!0),n.getZxy(a.z,a.x,a.y,C).then(w=>{if(w){let O=new Blob([w.data],{type:i}),U=window.URL.createObjectURL(O);o.src=U,o.cancel=void 0,l(void 0,o)}}).catch(w=>{if(w.name!=="AbortError")throw w}),o},"createTile"),_removeTile:ml(function(a){let l=this._tiles[a];l&&(l.el.cancel&&l.el.cancel(),l.el.width=0,l.el.height=0,l.el.deleted=!0,L.DomUtil.remove(l.el),delete this._tiles[a],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(a)}))},"_removeTile")});return new r(e)},"leafletRasterLayer");var sY=ml(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let i=new AbortController;return n(e,i).then(r=>t(void 0,r.data,r.cacheControl||"",r.expires||""),r=>t(r)).catch(r=>t(r)),{cancel:ml(()=>i.abort(),"cancel")}},"v3compat"),nL=class{constructor(e){this.tilev4=ml((t,i)=>Qc(this,null,function*(){if(t.type==="json"){let K=t.url.substr(10),j=this.tiles.get(K);if(j||(j=new c6(K),this.tiles.set(K,j)),this.metadata)return{data:yield j.getTileJson(t.url)};let W=yield j.getHeader();return(W.minLon>=W.maxLon||W.minLat>=W.maxLat)&&console.error(`Bounds of PMTiles archive ${W.minLon},${W.minLat},${W.maxLon},${W.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:W.minZoom,maxzoom:W.maxZoom,bounds:[W.minLon,W.minLat,W.maxLon,W.maxLat]}}}let r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),a=t.url.match(r);if(!a)throw new Error("Invalid PMTiles protocol URL");let l=a[1],o=this.tiles.get(l);o||(o=new c6(l),this.tiles.set(l,o));let p=a[2],C=a[3],w=a[4],O=yield o.getHeader(),U=yield o?.getZxy(+p,+C,+w,i.signal);if(U)return{data:new Uint8Array(U.data),cacheControl:U.cacheControl,expires:U.expires};if(O.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=sY(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};ml(nL,"Protocol");var lY=nL;function iL(n,e){return(e>>>0)*4294967296+(n>>>0)}ml(iL,"toNum");function rL(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return iL(n,r);throw new Error("Expected varint not more than 10 bytes")}ml(rL,"readVarintRemainder");function tv(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,rL(i,n))}ml(tv,"readVarint");function OB(n,e,t,i){if(i===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let r=e[0];e[0]=e[1],e[1]=r}}ml(OB,"rotate");function oL(n,e){let t=VC(2,n),i=e,r=e,a=e,l=[0,0],o=1;for(;o<t;)i=1&a/2,r=1&(a^i),OB(o,l,i,r),l[0]+=o*i,l[1]+=o*r,a=a/4,o*=2;return[n,l[0],l[1]]}ml(oL,"idOnLevel");var uY=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function aL(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>VC(2,n)-1||t>VC(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let i=uY[n],r=VC(2,n),a=0,l=0,o=0,p=[e,t],C=r/2;for(;C>0;)a=(p[0]&C)>0?1:0,l=(p[1]&C)>0?1:0,o+=C*C*(3*a^l),OB(C,p,a,l),C=C/2;return i+o}ml(aL,"zxyToTileId");function AY(n){let e=0;for(let t=0;t<27;t++){let i=(1<<t)*(1<<t);if(e+i>n)return oL(t,n-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}ml(AY,"tileIdToZxy");var cY=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(cY||{});function T3(n,e){return Qc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return iY(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw new Error("Compression method not supported")})}ml(T3,"defaultDecompress");var hY=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(hY||{});function sL(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}ml(sL,"tileTypeExt");var dY=127;function lL(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,a=e-n[r].tileId;if(a>0)t=r+1;else if(a<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}ml(lL,"findTile");var fY=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Qc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};ml(fY,"FileSource");var uL=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let i="";"navigator"in globalThis&&(i=globalThis.navigator.userAgent||"");let r=i.indexOf("Windows")>-1,a=/Chrome|Chromium|Edg|OPR|Brave/.test(i);this.chromeWindowsNoCache=!1,r&&a&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return Qc(this,null,function*(){let a,l;i?l=i:(a=new AbortController,l=a.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let p;this.mustReload?p="reload":this.chromeWindowsNoCache&&(p="no-store");let C=yield fetch(this.url,{signal:l,cache:p,headers:o});if(e===0&&C.status===416){let U=C.headers.get("Content-Range");if(!U||!U.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let K=+U.substr(8);C=yield fetch(this.url,{signal:l,cache:"reload",headers:{range:`bytes=0-${K-1}`}})}let w=C.headers.get("Etag");if(w!=null&&w.startsWith("W/")&&(w=null),C.status===416||r&&w&&w!==r)throw this.mustReload=!0,new A6(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(C.status>=300)throw new Error(`Bad response code: ${C.status}`);let O=C.headers.get("Content-Length");if(C.status===200&&(!O||+O>t))throw a&&a.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield C.arrayBuffer(),etag:w||void 0,cacheControl:C.headers.get("Cache-Control")||void 0,expires:C.headers.get("Expires")||void 0}})}};ml(uL,"FetchSource");var pY=uL;function up(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*VC(2,32)+i}ml(up,"getUint64");function AL(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:up(t,8),rootDirectoryLength:up(t,16),jsonMetadataOffset:up(t,24),jsonMetadataLength:up(t,32),leafDirectoryOffset:up(t,40),leafDirectoryLength:up(t,48),tileDataOffset:up(t,56),tileDataLength:up(t,64),numAddressedTiles:up(t,72),numTileEntries:up(t,80),numTileContents:up(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}ml(AL,"bytesToHeader");function IB(n){let e={buf:new Uint8Array(n),pos:0},t=tv(e),i=[],r=0;for(let a=0;a<t;a++){let l=tv(e);i.push({tileId:r+l,offset:0,length:0,runLength:1}),r+=l}for(let a=0;a<t;a++)i[a].runLength=tv(e);for(let a=0;a<t;a++)i[a].length=tv(e);for(let a=0;a<t;a++){let l=tv(e);l===0&&a>0?i[a].offset=i[a-1].offset+i[a-1].length:i[a].offset=l-1}return i}ml(IB,"deserializeIndex");var cL=class extends Error{};ml(cL,"EtagMismatch");var A6=cL;function TB(n,e){return Qc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,dY),r=AL(i,t.etag),a=t.data.slice(r.rootDirectoryOffset,r.rootDirectoryOffset+r.rootDirectoryLength),l=`${n.getKey()}|${r.etag||""}|${r.rootDirectoryOffset}|${r.rootDirectoryLength}`,o=IB(yield e(a,r.internalCompression));return[r,[l,o.length,o]]})}ml(TB,"getHeaderAndRoot");function kB(n,e,t,i,r){return Qc(this,null,function*(){let a=yield n.getBytes(t,i,void 0,r.etag),l=yield e(a.data,r.internalCompression),o=IB(l);if(o.length===0)throw new Error("Empty directory is invalid");return o})}ml(kB,"getDirectory");var mY=class{constructor(e=100,t=!0,i=T3){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Qc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,i.data;let r=yield TB(e,this.decompress);return r[1]&&this.cache.set(r[1][0],{lastUsed:this.counter++,data:r[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:r[0]}),this.prune(),r[0]})}getDirectory(e,t,i,r){return Qc(this,null,function*(){let a=`${e.getKey()}|${r.etag||""}|${t}|${i}`,l=this.cache.get(a);if(l)return l.lastUsed=this.counter++,l.data;let o=yield kB(e,this.decompress,t,i,r);return this.cache.set(a,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Qc(this,null,function*(){this.cache.delete(e.getKey())})}};ml(mY,"ResolvedValueCache");var hL=class{constructor(e=100,t=!0,i=T3){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return Qc(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((a,l)=>{TB(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),a(o[0]),this.prune()}).catch(o=>{l(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return Qc(this,null,function*(){let a=`${e.getKey()}|${r.etag||""}|${t}|${i}`,l=this.cache.get(a);if(l)return l.lastUsed=this.counter++,yield l.data;let o=new Promise((p,C)=>{kB(e,this.decompress,t,i,r).then(w=>{p(w),this.prune()}).catch(w=>{C(w)})});return this.cache.set(a,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return Qc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,a)=>{this.getHeader(e).then(l=>{r(),this.invalidations.delete(t)}).catch(l=>{a(l)})});this.invalidations.set(t,i)})}};ml(hL,"SharedPromiseCache");var gY=hL,dL=class{constructor(e,t,i){typeof e=="string"?this.source=new pY(e):this.source=e,i?this.decompress=i:this.decompress=T3,t?this.cache=t:this.cache=new gY}getHeader(){return Qc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return Qc(this,null,function*(){let a=aL(e,t,i),l=yield this.cache.getHeader(this.source);if(e<l.minZoom||e>l.maxZoom)return;let o=l.rootDirectoryOffset,p=l.rootDirectoryLength;for(let C=0;C<=3;C++){let w=yield this.cache.getDirectory(this.source,o,p,l),O=lL(w,a);if(O){if(O.runLength>0){let U=yield this.source.getBytes(l.tileDataOffset+O.offset,O.length,r,l.etag);return{data:yield this.decompress(U.data,l.tileCompression),cacheControl:U.cacheControl,expires:U.expires}}o=l.leafDirectoryOffset+O.offset,p=O.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return Qc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(a){if(a instanceof A6)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw a}})}getMetadataAttempt(){return Qc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return Qc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof A6)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Qc(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=sL(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};ml(dL,"PMTiles");var c6=dL,yY=8,vY={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},CY={"*":{type:"source"}},_Y=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],bY={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},xY={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},MY={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},wY={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},SY={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},EY={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},BY={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},OY=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],IY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},TY={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kY={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},DY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},RY={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},PY={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},KY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},UY={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},LY={type:"array",value:"*"},FY={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},zY={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},jY={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},NY={type:"array",value:"*",minimum:1},GY={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},WY={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},QY={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},YY={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},qY=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],HY={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},VY={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},$Y={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},ZY={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},XY={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},JY={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},eq={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},tq={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},nq={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},iq={"*":{type:"string"}},$a={$version:yY,$root:vY,sources:CY,source:_Y,source_vector:bY,source_raster:xY,source_raster_dem:MY,source_geojson:wY,source_video:SY,source_image:EY,layer:BY,layout:OY,layout_background:IY,layout_fill:TY,layout_circle:kY,layout_heatmap:DY,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:RY,layout_symbol:PY,layout_raster:KY,layout_hillshade:UY,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:LY,filter_operator:FY,geometry_type:zY,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:jY,expression:NY,light:GY,sky:WY,terrain:QY,projection:YY,paint:qY,paint_fill:HY,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:VY,paint_circle:$Y,paint_heatmap:ZY,paint_symbol:XY,paint_raster:JY,paint_hillshade:eq,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:tq,transition:nq,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:iq};const rq=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function oq(n,e){const t={};for(const i in n)i!=="ref"&&(t[i]=n[i]);return rq.forEach(i=>{i in e&&(t[i]=e[i])}),t}function DB(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=oq(n[t],e[n[t].ref]));return n}function Ps(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Ps(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(!Ps(n[i],e[i]))return!1;return!0}return n===e}function cp(n,e){n.push(e)}function fL(n,e,t){cp(t,{command:"addSource",args:[n,e[n]]})}function pL(n,e,t){cp(e,{command:"removeSource",args:[n]}),t[n]=!0}function aq(n,e,t,i){pL(n,t,i),fL(n,e,t)}function sq(n,e,t){let i;for(i in n[t])if(Object.prototype.hasOwnProperty.call(n[t],i)&&i!=="data"&&!Ps(n[t][i],e[t][i]))return!1;for(i in e[t])if(Object.prototype.hasOwnProperty.call(e[t],i)&&i!=="data"&&!Ps(n[t][i],e[t][i]))return!1;return!0}function lq(n,e,t,i){n=n||{},e=e||{};let r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(Object.prototype.hasOwnProperty.call(e,r)||pL(r,t,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(n,r)?Ps(n[r],e[r])||(n[r].type==="geojson"&&e[r].type==="geojson"&&sq(n,e,r)?cp(t,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):aq(r,e,t,i)):fL(r,e,t))}function Db(n,e,t,i,r,a){n=n||{},e=e||{};for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&(Ps(n[l],e[l])||t.push({command:a,args:[i,l,e[l],r]}));for(const l in e)!Object.prototype.hasOwnProperty.call(e,l)||Object.prototype.hasOwnProperty.call(n,l)||Ps(n[l],e[l])||t.push({command:a,args:[i,l,e[l],r]})}function X7(n){return n.id}function J7(n,e){return n[e.id]=e,n}function uq(n,e,t){n=n||[],e=e||[];const i=n.map(X7),r=e.map(X7),a=n.reduce(J7,{}),l=e.reduce(J7,{}),o=i.slice(),p=Object.create(null);let C,w,O,U,K;for(let j=0,W=0;j<i.length;j++)C=i[j],Object.prototype.hasOwnProperty.call(l,C)?W++:(cp(t,{command:"removeLayer",args:[C]}),o.splice(o.indexOf(C,W),1));for(let j=0,W=0;j<r.length;j++)C=r[r.length-1-j],o[o.length-1-j]!==C&&(Object.prototype.hasOwnProperty.call(a,C)?(cp(t,{command:"removeLayer",args:[C]}),o.splice(o.lastIndexOf(C,o.length-W),1)):W++,U=o[o.length-j],cp(t,{command:"addLayer",args:[l[C],U]}),o.splice(o.length-j,0,C),p[C]=!0);for(let j=0;j<r.length;j++)if(C=r[j],w=a[C],O=l[C],!(p[C]||Ps(w,O))){if(!Ps(w.source,O.source)||!Ps(w["source-layer"],O["source-layer"])||!Ps(w.type,O.type)){cp(t,{command:"removeLayer",args:[C]}),U=o[o.lastIndexOf(C)+1],cp(t,{command:"addLayer",args:[O,U]});continue}Db(w.layout,O.layout,t,C,null,"setLayoutProperty"),Db(w.paint,O.paint,t,C,null,"setPaintProperty"),Ps(w.filter,O.filter)||cp(t,{command:"setFilter",args:[C,O.filter]}),(!Ps(w.minzoom,O.minzoom)||!Ps(w.maxzoom,O.maxzoom))&&cp(t,{command:"setLayerZoomRange",args:[C,O.minzoom,O.maxzoom]});for(K in w)Object.prototype.hasOwnProperty.call(w,K)&&(K==="layout"||K==="paint"||K==="filter"||K==="metadata"||K==="minzoom"||K==="maxzoom"||(K.indexOf("paint.")===0?Db(w[K],O[K],t,C,K.slice(6),"setPaintProperty"):Ps(w[K],O[K])||cp(t,{command:"setLayerProperty",args:[C,K,O[K]]})));for(K in O)!Object.prototype.hasOwnProperty.call(O,K)||Object.prototype.hasOwnProperty.call(w,K)||K==="layout"||K==="paint"||K==="filter"||K==="metadata"||K==="minzoom"||K==="maxzoom"||(K.indexOf("paint.")===0?Db(w[K],O[K],t,C,K.slice(6),"setPaintProperty"):Ps(w[K],O[K])||cp(t,{command:"setLayerProperty",args:[C,K,O[K]]}))}}function Aq(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!Ps(n.version,e.version))return[{command:"setStyle",args:[e]}];Ps(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),Ps(n.state,e.state)||t.push({command:"setGlobalState",args:[e.state]}),Ps(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Ps(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),Ps(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),Ps(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),Ps(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),Ps(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),Ps(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),Ps(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),Ps(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),Ps(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),Ps(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),Ps(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const i={},r=[];lq(n.sources,e.sources,r,i);const a=[];n.layers&&n.layers.forEach(l=>{"source"in l&&i[l.source]?t.push({command:"removeLayer",args:[l.id]}):a.push(l)}),t=t.concat(r),uq(a,e.layers,t)}catch(i){console.warn("Unable to compute style diff:",i),t=[{command:"setStyle",args:[e]}]}return t}class _i{constructor(e,t,i,r){this.message=(e?`${e}: `:"")+i,r&&(this.identifier=r),t!=null&&t.__line__&&(this.line=t.__line__)}}function Ev(n,...e){for(const t of e)for(const i in t)n[i]=t[i];return n}class jm extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class RB{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new RB(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const k3={kind:"null"},Bi={kind:"number"},fa={kind:"string"},Ho={kind:"boolean"},qm={kind:"color"},D3={kind:"projectionDefinition"},D1={kind:"object"},zo={kind:"value"},cq={kind:"error"},R3={kind:"collator"},P3={kind:"formatted"},K3={kind:"padding"},f_={kind:"colorArray"},U3={kind:"numberArray"},nb={kind:"resolvedImage"},L3={kind:"variableAnchorOffsetCollection"};function bf(n,e){return{kind:"array",itemType:n,N:e}}function Cu(n){if(n.kind==="array"){const e=Cu(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const hq=[k3,Bi,fa,Ho,qm,D3,P3,D1,bf(zo),K3,U3,f_,nb,L3];function p_(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!p_(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of hq)if(!p_(t,e))return null}}return`Expected ${Cu(n)} but found ${Cu(e)} instead.`}function PB(n,e){return e.some(t=>t.kind===n.kind)}function R1(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function lg(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const mL=.96422,gL=1,yL=.82521,vL=4/29,mv=6/29,CL=3*mv*mv,dq=mv*mv*mv,fq=Math.PI/180,pq=180/Math.PI;function _L(n){return n=n%360,n<0&&(n+=360),n}function bL([n,e,t,i]){n=m4(n),e=m4(e),t=m4(t);let r,a;const l=g4((.2225045*n+.7168786*e+.0606169*t)/gL);n===e&&e===t?r=a=l:(r=g4((.4360747*n+.3850649*e+.1430804*t)/mL),a=g4((.0139322*n+.0971045*e+.7141733*t)/yL));const o=116*l-16;return[o<0?0:o,500*(r-l),200*(l-a),i]}function m4(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function g4(n){return n>dq?Math.pow(n,1/3):n/CL+vL}function xL([n,e,t,i]){let r=(n+16)/116,a=isNaN(e)?r:r+e/500,l=isNaN(t)?r:r-t/200;return r=gL*v4(r),a=mL*v4(a),l=yL*v4(l),[y4(3.1338561*a-1.6168667*r-.4906146*l),y4(-.9787684*a+1.9161415*r+.033454*l),y4(.0719453*a-.2289914*r+1.4052427*l),i]}function y4(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function v4(n){return n>mv?n*n*n:CL*(n-vL)}function mq(n){const[e,t,i,r]=bL(n),a=Math.sqrt(t*t+i*i);return[Math.round(a*1e4)?_L(Math.atan2(i,t)*pq):NaN,a,e,r]}function gq([n,e,t,i]){return n=isNaN(n)?0:n*fq,xL([t,Math.cos(n)*e,Math.sin(n)*e,i])}function yq([n,e,t,i]){n=_L(n),e/=100,t/=100;function r(a){const l=(a+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(l-3,9-l,1))}return[r(0),r(8),r(4),i]}const vq=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function $C(n,e){return vq(n,e)?n[e]:void 0}function Cq(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=$C(_q,n);if(e){const[r,a,l]=e;return[r/255,a/255,l/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const a=n.length<6?1:2;let l=1;return[Rb(n.slice(l,l+=a)),Rb(n.slice(l,l+=a)),Rb(n.slice(l,l+=a)),Rb(n.slice(l,l+a)||"ff")]}if(n.startsWith("rgb")){const r=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,a=n.match(r);if(a){const[l,o,p,C,w,O,U,K,j,W,Y,te]=a,J=[C||" ",U||" ",W].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const oe=[p,O,j].join(""),ne=oe==="%%%"?100:oe===""?255:0;if(ne){const $=[nv(+o/ne,0,1),nv(+w/ne,0,1),nv(+K/ne,0,1),Y?eI(+Y,te):1];if(tI($))return $}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=n.match(t);if(i){const[r,a,l,o,p,C,w,O,U]=i,K=[l||" ",p||" ",w].join("");if(K==="  "||K==="  /"||K===",,"||K===",,,"){const j=[+a,nv(+o,0,100),nv(+C,0,100),O?eI(+O,U):1];if(tI(j))return yq(j)}}}function Rb(n){return parseInt(n.padEnd(2,n),16)/255}function eI(n,e){return nv(e?n/100:n,0,1)}function nv(n,e,t){return Math.min(Math.max(e,n),t)}function tI(n){return!n.some(Number.isNaN)}const _q={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Tg(n,e,t){return n+t*(e-n)}function Bv(n,e,t){return n.map((i,r)=>Tg(i,e[r],t))}function bq(n){return n==="rgb"||n==="hcl"||n==="lab"}let il=class iv{constructor(e,t,i,r=1,a=!0){this.r=e,this.g=t,this.b=i,this.a=r,a||(this.r*=r,this.g*=r,this.b*=r,r||this.overwriteGetter("rgb",[e,t,i,r]))}static parse(e){if(e instanceof iv)return e;if(typeof e!="string")return;const t=Cq(e);if(t)return new iv(...t,!1)}get rgb(){const{r:e,g:t,b:i,a:r}=this,a=r||1/0;return this.overwriteGetter("rgb",[e/a,t/a,i/a,r])}get hcl(){return this.overwriteGetter("hcl",mq(this.rgb))}get lab(){return this.overwriteGetter("lab",bL(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,i,r]=this.rgb;return`rgba(${[e,t,i].map(a=>Math.round(a*255)).join(",")},${r})`}static interpolate(e,t,i,r="rgb"){switch(r){case"rgb":{const[a,l,o,p]=Bv(e.rgb,t.rgb,i);return new iv(a,l,o,p,!1)}case"hcl":{const[a,l,o,p]=e.hcl,[C,w,O,U]=t.hcl;let K,j;if(!isNaN(a)&&!isNaN(C)){let oe=C-a;C>a&&oe>180?oe-=360:C<a&&a-C>180&&(oe+=360),K=a+i*oe}else isNaN(a)?isNaN(C)?K=NaN:(K=C,(o===1||o===0)&&(j=w)):(K=a,(O===1||O===0)&&(j=l));const[W,Y,te,J]=gq([K,j??Tg(l,w,i),Tg(o,O,i),Tg(p,U,i)]);return new iv(W,Y,te,J,!1)}case"lab":{const[a,l,o,p]=xL(Bv(e.lab,t.lab,i));return new iv(a,l,o,p,!1)}}}};il.black=new il(0,0,0,1);il.white=new il(1,1,1,1);il.transparent=new il(0,0,0,0);il.red=new il(1,0,0,1);class KB{constructor(e,t,i){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const xq=["bottom","center","top"];class h6{constructor(e,t,i,r,a,l){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=a,this.verticalAlign=l}}class Hm{constructor(e){this.sections=e}static fromString(e){return new Hm([new h6(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Hm?e:Hm.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class pd{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof pd)return e;if(typeof e=="number")return new pd([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new pd(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new pd(Bv(e.values,t.values,i))}}class md{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof md)return e;if(typeof e=="number")return new md([e]);if(Array.isArray(e)){for(const t of e)if(typeof t!="number")return;return new md(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){return new md(Bv(e.values,t.values,i))}}class fh{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof fh)return e;if(typeof e=="string"){const i=il.parse(e);return i?new fh([i]):void 0}if(!Array.isArray(e))return;const t=[];for(const i of e){if(typeof i!="string")return;const r=il.parse(i);if(!r)return;t.push(r)}return new fh(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i,r="rgb"){const a=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let l=0;l<e.values.length;l++)a.push(il.interpolate(e.values[l],t.values[l],i,r));return new fh(a)}}class ju extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Mq=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class vp{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof vp)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];if(typeof i!="string"||!Mq.has(i)||!Array.isArray(r)||r.length!==2||typeof r[0]!="number"||typeof r[1]!="number")return}return new vp(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,i){const r=e.values,a=t.values;if(r.length!==a.length)throw new ju(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const l=[];for(let o=0;o<r.length;o+=2){if(r[o]!==a[o])throw new ju(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${r[o]}, to[${o}]: ${a[o]}`);l.push(r[o]);const[p,C]=r[o+1],[w,O]=a[o+1];l.push([Tg(p,w,i),Tg(C,O,i)])}return new vp(l)}}class z0{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new z0({name:e,available:!1}):null}}class pp{constructor(e,t,i){this.from=e,this.to=t,this.transition=i}static interpolate(e,t,i){return new pp(e,t,i)}static parse(e){if(e instanceof pp)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new pp(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new pp(e.from,e.to,e.transition);if(typeof e=="string")return new pp(e,e,1)}}function ML(n,e,t,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,t,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,t,i]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function m_(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof pp||n instanceof il||n instanceof KB||n instanceof Hm||n instanceof pd||n instanceof md||n instanceof fh||n instanceof vp||n instanceof z0)return!0;if(Array.isArray(n)){for(const e of n)if(!m_(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!m_(n[e]))return!1;return!0}else return!1}function nc(n){if(n===null)return k3;if(typeof n=="string")return fa;if(typeof n=="boolean")return Ho;if(typeof n=="number")return Bi;if(n instanceof il)return qm;if(n instanceof pp)return D3;if(n instanceof KB)return R3;if(n instanceof Hm)return P3;if(n instanceof pd)return K3;if(n instanceof md)return U3;if(n instanceof fh)return f_;if(n instanceof vp)return L3;if(n instanceof z0)return nb;if(Array.isArray(n)){const e=n.length;let t;for(const i of n){const r=nc(i);if(!t)t=r;else{if(t===r)continue;t=zo;break}}return bf(t||zo,e)}else return D1}function ZC(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof il||n instanceof pp||n instanceof Hm||n instanceof pd||n instanceof md||n instanceof fh||n instanceof vp||n instanceof z0?n.toString():JSON.stringify(n)}class Ov{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!m_(e[1]))return t.error("invalid value");const i=e[1];let r=nc(i);const a=t.expectedType;return r.kind==="array"&&r.N===0&&a&&a.kind==="array"&&(typeof a.N!="number"||a.N===0)&&(r=a),new Ov(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Pb={string:fa,number:Bi,boolean:Ho,object:D1};class Zp{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=1,r;const a=e[0];if(a==="array"){let o;if(e.length>2){const C=e[1];if(typeof C!="string"||!(C in Pb)||C==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=Pb[C],i++}else o=zo;let p;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);p=e[2],i++}r=bf(o,p)}else{if(!Pb[a])throw new Error(`Types doesn't contain name = ${a}`);r=Pb[a]}const l=[];for(;i<e.length;i++){const o=t.parse(e[i],i,zo);if(!o)return null;l.push(o)}return new Zp(r,l)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(p_(this.type,nc(i))){if(t===this.args.length-1)throw new ju(`Expected value to be of type ${Cu(this.type)}, but found ${Cu(nc(i))} instead.`)}else return i}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const nI={"to-boolean":Ho,"to-color":qm,"to-number":Bi,"to-string":fa};class xg{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(!nI[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=nI[i],a=[];for(let l=1;l<e.length;l++){const o=t.parse(e[l],l,zo);if(!o)return null;a.push(o)}return new xg(r,a)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof il)return t;if(typeof t=="string"){const a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&(t.length<3||t.length>4?i=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:i=ML(t[0],t[1],t[2],t[3]),!i))return new il(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ju(i||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const i of this.args){t=i.evaluate(e);const r=pd.parse(t);if(r)return r}throw new ju(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=md.parse(t);if(r)return r}throw new ju(`Could not parse numberArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const i of this.args){t=i.evaluate(e);const r=fh.parse(t);if(r)return r}throw new ju(`Could not parse colorArray from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const i of this.args){t=i.evaluate(e);const r=vp.parse(t);if(r)return r}throw new ju(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const i of this.args){if(t=i.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new ju(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Hm.fromString(ZC(this.args[0].evaluate(e)));case"resolvedImage":return z0.fromString(ZC(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return ZC(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const wq=["Unknown","Point","LineString","Polygon"];class wL{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?wq[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=il.parse(e),this._parseColorCache.set(e,t)),t}}class F3{constructor(e,t,i=[],r,a=new RB,l=[]){this.registry=e,this.path=i,this.key=i.map(o=>`[${o}]`).join(""),this.scope=a,this.errors=l,this.expectedType=r,this._isConstant=t}parse(e,t,i,r,a={}){return t?this.concat(t,i,r)._parse(e,a):this._parse(e,a)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function i(r,a,l){return l==="assert"?new Zp(a,[r]):l==="coerce"?new xg(a,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const a=this.registry[r];if(a){let l=a.parse(e,this);if(!l)return null;if(this.expectedType){const o=this.expectedType,p=l.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&p.kind==="value")l=i(l,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&["string","array"].includes(p.kind)||["color","formatted","resolvedImage"].includes(o.kind)&&["value","string"].includes(p.kind)||["padding","numberArray"].includes(o.kind)&&["value","number","array"].includes(p.kind)||o.kind==="colorArray"&&["value","string","array"].includes(p.kind)||o.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(p.kind))l=i(l,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,p))return null}if(!(l instanceof Ov)&&l.type.kind!=="resolvedImage"&&this._isConstant(l)){const o=new wL;try{l=new Ov(l.type,l.evaluate(o))}catch(p){return this.error(p.message),null}}return l}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const r=typeof e=="number"?this.path.concat(e):this.path,a=i?this.scope.concat(i):this.scope;return new F3(this.registry,this._isConstant,r,t||null,a,this.errors)}error(e,...t){const i=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new jm(i,e))}checkSubtype(e,t){const i=p_(e,t);return i&&this.error(i),i}}class z3{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let a=1;a<e.length-1;a+=2){const l=e[a];if(typeof l!="string")return t.error(`Expected string, but found ${typeof l} instead.`,a);if(/[^a-zA-Z0-9_]/.test(l))return t.error("Variable names must contain only alphanumeric characters or '_'.",a);const o=t.parse(e[a+1],a+1);if(!o)return null;i.push([l,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new z3(i,r):null}outputDefined(){return this.result.outputDefined()}}class j3{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new j3(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class UB{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Bi),r=t.parse(e[2],2,bf(t.expectedType||zo));if(!i||!r)return null;const a=r.type;return new UB(a.itemType,i,r)}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new ju(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new ju(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new ju(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class LB{constructor(e,t){this.type=Ho,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,zo),r=t.parse(e[2],2,zo);return!i||!r?null:PB(i.type,[Ho,fa,Bi,k3,zo])?new LB(i,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Cu(i.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!R1(t,["boolean","string","number","null"]))throw new ju(`Expected first argument to be of type boolean, string, number or null, but found ${Cu(nc(t))} instead.`);if(!R1(i,["string","array"]))throw new ju(`Expected second argument to be of type array or string, but found ${Cu(nc(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class jx{constructor(e,t,i){this.type=Bi,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,zo),r=t.parse(e[2],2,zo);if(!i||!r)return null;if(!PB(i.type,[Ho,fa,Bi,k3,zo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Cu(i.type)} instead`);if(e.length===4){const a=t.parse(e[3],3,Bi);return a?new jx(i,r,a):null}else return new jx(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!R1(t,["boolean","string","number","null"]))throw new ju(`Expected first argument to be of type boolean, string, number or null, but found ${Cu(nc(t))} instead.`);let r;if(this.fromIndex&&(r=this.fromIndex.evaluate(e)),R1(i,["string"])){const a=i.indexOf(t,r);return a===-1?-1:[...i.slice(0,a)].length}else{if(R1(i,["array"]))return i.indexOf(t,r);throw new ju(`Expected second argument to be of type array or string, but found ${Cu(nc(i))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class FB{constructor(e,t,i,r,a,l){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=a,this.otherwise=l}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const a={},l=[];for(let C=2;C<e.length-1;C+=2){let w=e[C];const O=e[C+1];Array.isArray(w)||(w=[w]);const U=t.concat(C);if(w.length===0)return U.error("Expected at least one branch label.");for(const j of w){if(typeof j!="number"&&typeof j!="string")return U.error("Branch labels must be numbers or strings.");if(typeof j=="number"&&Math.abs(j)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof j=="number"&&Math.floor(j)!==j)return U.error("Numeric branch labels must be integer values.");if(!i)i=nc(j);else if(U.checkSubtype(i,nc(j)))return null;if(typeof a[String(j)]<"u")return U.error("Branch labels must be unique.");a[String(j)]=l.length}const K=t.parse(O,C,r);if(!K)return null;r=r||K.type,l.push(K)}const o=t.parse(e[1],1,zo);if(!o)return null;const p=t.parse(e[e.length-1],e.length-1,r);return!p||o.type.kind!=="value"&&t.concat(1).checkSubtype(i,o.type)?null:new FB(i,r,o,a,l,p)}evaluate(e){const t=this.input.evaluate(e);return(nc(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class zB{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const r=[];for(let l=1;l<e.length-1;l+=2){const o=t.parse(e[l],l,Ho);if(!o)return null;const p=t.parse(e[l+1],l+1,i);if(!p)return null;r.push([o,p]),i=i||p.type}const a=t.parse(e[e.length-1],e.length-1,i);if(!a)return null;if(!i)throw new Error("Can't infer output type");return new zB(i,r,a)}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Nx{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,zo),r=t.parse(e[2],2,Bi);if(!i||!r)return null;if(!PB(i.type,[bf(zo),fa,zo]))return t.error(`Expected first argument to be of type array or string, but found ${Cu(i.type)} instead`);if(e.length===4){const a=t.parse(e[3],3,Bi);return a?new Nx(i.type,i,r,a):null}else return new Nx(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);let r;if(this.endIndex&&(r=this.endIndex.evaluate(e)),R1(t,["string"]))return[...t].slice(i,r).join("");if(R1(t,["array"]))return t.slice(i,r);throw new ju(`Expected first argument to be of type array or string, but found ${Cu(nc(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function N3(n,e){const t=n.length-1;let i=0,r=t,a=0,l,o;for(;i<=r;)if(a=Math.floor((i+r)/2),l=n[a],o=n[a+1],l<=e){if(a===t||e<o)return a;i=a+1}else if(l>e)r=a-1;else throw new ju("Input is not a number.");return 0}class G3{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,a]of i)this.labels.push(r),this.outputs.push(a)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,Bi);if(!i)return null;const r=[];let a=null;t.expectedType&&t.expectedType.kind!=="value"&&(a=t.expectedType);for(let l=1;l<e.length;l+=2){const o=l===1?-1/0:e[l],p=e[l+1],C=l,w=l+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const O=t.parse(p,w,a);if(!O)return null;a=a||O.type,r.push([o,O])}return new G3(a,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const a=t.length;if(r>=t[a-1])return i[a-1].evaluate(e);const l=N3(t,r);return i[l].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Sq(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var C4,iI;function Eq(){if(iI)return C4;iI=1,C4=n;function n(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var a=this.sampleCurveX(i)-e;if(Math.abs(a)<t)return i;var l=this.sampleCurveDerivativeX(i);if(Math.abs(l)<1e-6)break;i=i-a/l}var o=0,p=1;for(i=e,r=0;r<20&&(a=this.sampleCurveX(i),!(Math.abs(a-e)<t));r++)e>a?o=i:p=i,i=(p-o)*.5+o;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},C4}var Bq=Eq(),Oq=Sq(Bq);class Cp{constructor(e,t,i,r,a){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[l,o]of a)this.labels.push(l),this.outputs.push(o)}static interpolationFactor(e,t,i,r){let a=0;if(e.name==="exponential")a=_4(t,e.base,i,r);else if(e.name==="linear")a=_4(t,1,i,r);else if(e.name==="cubic-bezier"){const l=e.controlPoints;a=new Oq(l[0],l[1],l[2],l[3]).solve(_4(t,1,i,r))}return a}static parse(e,t){let[i,r,a,...l]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const C=r[1];if(typeof C!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:C}}else if(r[0]==="cubic-bezier"){const C=r.slice(1);if(C.length!==4||C.some(w=>typeof w!="number"||w<0||w>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:C}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(a=t.parse(a,2,Bi),!a)return null;const o=[];let p=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&t.expectedType!=f_?p=qm:t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(let C=0;C<l.length;C+=2){const w=l[C],O=l[C+1],U=C+3,K=C+4;if(typeof w!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(o.length&&o[o.length-1][0]>=w)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const j=t.parse(O,K,p);if(!j)return null;p=p||j.type,o.push([w,j])}return!lg(p,Bi)&&!lg(p,D3)&&!lg(p,qm)&&!lg(p,K3)&&!lg(p,U3)&&!lg(p,f_)&&!lg(p,L3)&&!lg(p,bf(Bi))?t.error(`Type ${Cu(p)} is not interpolatable.`):new Cp(p,i,r,a,o)}evaluate(e){const t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const a=t.length;if(r>=t[a-1])return i[a-1].evaluate(e);const l=N3(t,r),o=t[l],p=t[l+1],C=Cp.interpolationFactor(this.interpolation,r,o,p),w=i[l].evaluate(e),O=i[l+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Tg(w,O,C);case"color":return il.interpolate(w,O,C);case"padding":return pd.interpolate(w,O,C);case"colorArray":return fh.interpolate(w,O,C);case"numberArray":return md.interpolate(w,O,C);case"variableAnchorOffsetCollection":return vp.interpolate(w,O,C);case"array":return Bv(w,O,C);case"projectionDefinition":return pp.interpolate(w,O,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return il.interpolate(w,O,C,"hcl");case"colorArray":return fh.interpolate(w,O,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return il.interpolate(w,O,C,"lab");case"colorArray":return fh.interpolate(w,O,C,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function _4(n,e,t,i){const r=i-t,a=n-t;return r===0?0:e===1?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}const Iq={color:il.interpolate,number:Tg,padding:pd.interpolate,numberArray:md.interpolate,colorArray:fh.interpolate,variableAnchorOffsetCollection:vp.interpolate,array:Bv};class g_{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i=null;const r=t.expectedType;r&&r.kind!=="value"&&(i=r);const a=[];for(const o of e.slice(1)){const p=t.parse(o,1+a.length,i,void 0,{typeAnnotation:"omit"});if(!p)return null;i=i||p.type,a.push(p)}if(!i)throw new Error("No output type");return r&&a.some(o=>p_(r,o.type))?new g_(zo,a):new g_(i,a)}evaluate(e){let t=null,i=0,r;for(const a of this.args)if(i++,t=a.evaluate(e),t&&t instanceof z0&&!t.available&&(r||(r=t.name),t=null,i===this.args.length&&(t=r)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function rI(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Tq(n,e,t){return e===t}function kq(n,e,t){return e!==t}function Dq(n,e,t){return e<t}function Rq(n,e,t){return e>t}function Pq(n,e,t){return e<=t}function Kq(n,e,t){return e>=t}function SL(n,e,t,i){return i.compare(e,t)===0}function Uq(n,e,t,i){return!SL(n,e,t,i)}function Lq(n,e,t,i){return i.compare(e,t)<0}function Fq(n,e,t,i){return i.compare(e,t)>0}function zq(n,e,t,i){return i.compare(e,t)<=0}function jq(n,e,t,i){return i.compare(e,t)>=0}function Nv(n,e,t){const i=n!=="=="&&n!=="!=";return class EL{constructor(a,l,o){this.type=Ho,this.lhs=a,this.rhs=l,this.collator=o,this.hasUntypedArgument=a.type.kind==="value"||l.type.kind==="value"}static parse(a,l){if(a.length!==3&&a.length!==4)return l.error("Expected two or three arguments.");const o=a[0];let p=l.parse(a[1],1,zo);if(!p)return null;if(!rI(o,p.type))return l.concat(1).error(`"${o}" comparisons are not supported for type '${Cu(p.type)}'.`);let C=l.parse(a[2],2,zo);if(!C)return null;if(!rI(o,C.type))return l.concat(2).error(`"${o}" comparisons are not supported for type '${Cu(C.type)}'.`);if(p.type.kind!==C.type.kind&&p.type.kind!=="value"&&C.type.kind!=="value")return l.error(`Cannot compare types '${Cu(p.type)}' and '${Cu(C.type)}'.`);i&&(p.type.kind==="value"&&C.type.kind!=="value"?p=new Zp(C.type,[p]):p.type.kind!=="value"&&C.type.kind==="value"&&(C=new Zp(p.type,[C])));let w=null;if(a.length===4){if(p.type.kind!=="string"&&C.type.kind!=="string"&&p.type.kind!=="value"&&C.type.kind!=="value")return l.error("Cannot use collator to compare non-string types.");if(w=l.parse(a[3],3,R3),!w)return null}return new EL(p,C,w)}evaluate(a){const l=this.lhs.evaluate(a),o=this.rhs.evaluate(a);if(i&&this.hasUntypedArgument){const p=nc(l),C=nc(o);if(p.kind!==C.kind||!(p.kind==="string"||p.kind==="number"))throw new ju(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${p.kind}, ${C.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const p=nc(l),C=nc(o);if(p.kind!=="string"||C.kind!=="string")return e(a,l,o)}return this.collator?t(a,l,o,this.collator.evaluate(a)):e(a,l,o)}eachChild(a){a(this.lhs),a(this.rhs),this.collator&&a(this.collator)}outputDefined(){return!0}}}const Nq=Nv("==",Tq,SL),Gq=Nv("!=",kq,Uq),Wq=Nv("<",Dq,Lq),Qq=Nv(">",Rq,Fq),Yq=Nv("<=",Pq,zq),qq=Nv(">=",Kq,jq);class W3{constructor(e,t,i){this.type=R3,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=t.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,Ho);if(!r)return null;const a=t.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,Ho);if(!a)return null;let l=null;return i.locale&&(l=t.parse(i.locale,1,fa),!l)?null:new W3(r,a,l)}evaluate(e){return new KB(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class jB{constructor(e,t,i,r,a){this.type=fa,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=a}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Bi);if(!i)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let a=null;if(r.locale&&(a=t.parse(r.locale,1,fa),!a))return null;let l=null;if(r.currency&&(l=t.parse(r.currency,1,fa),!l))return null;let o=null;if(r["min-fraction-digits"]&&(o=t.parse(r["min-fraction-digits"],1,Bi),!o))return null;let p=null;return r["max-fraction-digits"]&&(p=t.parse(r["max-fraction-digits"],1,Bi),!p)?null:new jB(i,a,l,o,p)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class NB{constructor(e){this.type=P3,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");const r=[];let a=!1;for(let l=1;l<=e.length-1;++l){const o=e[l];if(a&&typeof o=="object"&&!Array.isArray(o)){a=!1;let p=null;if(o["font-scale"]&&(p=t.parse(o["font-scale"],1,Bi),!p))return null;let C=null;if(o["text-font"]&&(C=t.parse(o["text-font"],1,bf(fa)),!C))return null;let w=null;if(o["text-color"]&&(w=t.parse(o["text-color"],1,qm),!w))return null;let O=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!xq.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(O=t.parse(o["vertical-align"],1,fa),!O)return null}const U=r[r.length-1];U.scale=p,U.font=C,U.textColor=w,U.verticalAlign=O}else{const p=t.parse(e[l],1,zo);if(!p)return null;const C=p.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,r.push({content:p,scale:null,font:null,textColor:null,verticalAlign:null})}}return new NB(r)}evaluate(e){const t=i=>{const r=i.content.evaluate(e);return nc(r)===nb?new h6("",r,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(e):null):new h6(ZC(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null,i.verticalAlign?i.verticalAlign.evaluate(e):null)};return new Hm(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class GB{constructor(e){this.type=nb,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const i=t.parse(e[1],1,fa);return i?new GB(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=z0.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}}class WB{constructor(e){this.type=Bi,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Cu(i.type)} instead.`):new WB(i):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new ju(`Expected value to be of type string or array, but found ${Cu(nc(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Vm=8192;function Hq(n,e){const t=Vq(n[0]),i=Zq(n[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Vm),Math.round(i*r*Vm)]}function QB(n,e){const t=Math.pow(2,e.z),i=(n[0]/Vm+e.x)/t,r=(n[1]/Vm+e.y)/t;return[$q(i),Xq(r)]}function Vq(n){return(180+n)/360}function $q(n){return n*360-180}function Zq(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Xq(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function ib(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function y_(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Jq(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function eH(n,e,t){const i=n[0]-e[0],r=n[1]-e[1],a=n[0]-t[0],l=n[1]-t[1];return i*l-a*r===0&&i*a<=0&&r*l<=0}function Q3(n,e,t,i){const r=[e[0]-n[0],e[1]-n[1]],a=[i[0]-t[0],i[1]-t[1]];return rH(a,r)===0?!1:!!(oI(n,e,t,i)&&oI(t,i,n,e))}function tH(n,e,t){for(const i of t)for(let r=0;r<i.length-1;++r)if(Q3(n,e,i[r],i[r+1]))return!0;return!1}function Gv(n,e,t=!1){let i=!1;for(const r of e)for(let a=0;a<r.length-1;a++){if(eH(n,r[a],r[a+1]))return t;Jq(n,r[a],r[a+1])&&(i=!i)}return i}function nH(n,e){for(const t of e)if(Gv(n,t))return!0;return!1}function BL(n,e){for(const t of n)if(!Gv(t,e))return!1;for(let t=0;t<n.length-1;++t)if(tH(n[t],n[t+1],e))return!1;return!0}function iH(n,e){for(const t of e)if(BL(n,t))return!0;return!1}function rH(n,e){return n[0]*e[1]-n[1]*e[0]}function oI(n,e,t,i){const r=n[0]-t[0],a=n[1]-t[1],l=e[0]-t[0],o=e[1]-t[1],p=i[0]-t[0],C=i[1]-t[1],w=r*C-p*a,O=l*C-p*o;return w>0&&O<0||w<0&&O>0}function YB(n,e,t){const i=[];for(let r=0;r<n.length;r++){const a=[];for(let l=0;l<n[r].length;l++){const o=Hq(n[r][l],t);ib(e,o),a.push(o)}i.push(a)}return i}function OL(n,e,t){const i=[];for(let r=0;r<n.length;r++){const a=YB(n[r],e,t);i.push(a)}return i}function IL(n,e,t,i){if(n[0]<t[0]||n[0]>t[2]){const r=i*.5;let a=n[0]-t[0]>r?-i:t[0]-n[0]>r?i:0;a===0&&(a=n[0]-t[2]>r?-i:t[2]-n[0]>r?i:0),n[0]+=a}ib(e,n)}function oH(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function aI(n,e,t,i){const r=Math.pow(2,i.z)*Vm,a=[i.x*Vm,i.y*Vm],l=[];for(const o of n)for(const p of o){const C=[p.x+a[0],p.y+a[1]];IL(C,e,t,r),l.push(C)}return l}function sI(n,e,t,i){const r=Math.pow(2,i.z)*Vm,a=[i.x*Vm,i.y*Vm],l=[];for(const o of n){const p=[];for(const C of o){const w=[C.x+a[0],C.y+a[1]];ib(e,w),p.push(w)}l.push(p)}if(e[2]-e[0]<=r/2){oH(e);for(const o of l)for(const p of o)IL(p,e,t,r)}return l}function aH(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const a=YB(e.coordinates,i,r),l=aI(n.geometry(),t,i,r);if(!y_(t,i))return!1;for(const o of l)if(!Gv(o,a))return!1}if(e.type==="MultiPolygon"){const a=OL(e.coordinates,i,r),l=aI(n.geometry(),t,i,r);if(!y_(t,i))return!1;for(const o of l)if(!nH(o,a))return!1}return!0}function sH(n,e){const t=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(e.type==="Polygon"){const a=YB(e.coordinates,i,r),l=sI(n.geometry(),t,i,r);if(!y_(t,i))return!1;for(const o of l)if(!BL(o,a))return!1}if(e.type==="MultiPolygon"){const a=OL(e.coordinates,i,r),l=sI(n.geometry(),t,i,r);if(!y_(t,i))return!1;for(const o of l)if(!iH(o,a))return!1}return!0}class P1{constructor(e,t){this.type=Ho,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(m_(e[1])){const i=e[1];if(i.type==="FeatureCollection"){const r=[];for(const a of i.features){const{type:l,coordinates:o}=a.geometry;l==="Polygon"&&r.push(o),l==="MultiPolygon"&&r.push(...o)}if(r.length){const a={type:"MultiPolygon",coordinates:r};return new P1(i,a)}}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new P1(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new P1(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return aH(e,this.geometries);if(e.geometryType()==="LineString")return sH(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class TL{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const a=e-1>>1,l=t[a];if(i(r,l)>=0)break;t[e]=l,e=a}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,a=t[e];for(;e<r;){let l=(e<<1)+1;const o=l+1;if(o<this.length&&i(t[o],t[l])<0&&(l=o),i(t[l],a)>=0)break;t[e]=t[l],e=l}t[e]=a}}function lH(n,e){if(n.length<=1)return[n];const i=[];let r,a;for(const l of n){const o=uH(l);o!==0&&(l.area=Math.abs(o),a===void 0&&(a=o<0),a===o<0?(r&&i.push(r),r=[l]):r.push(l))}return r&&i.push(r),i}function uH(n){let e=0;for(let t=0,i=n.length,r=i-1,a,l;t<i;r=t++)a=n[t],l=n[r],e+=(l.x-a.x)*(a.y+l.y);return e}const AH=6378.137,lI=1/298.257223563,uI=lI*(2-lI),AI=Math.PI/180;class qB{constructor(e){const t=AI*AH*1e3,i=Math.cos(e*AI),r=1/(1-uI*(1-i*i)),a=Math.sqrt(r);this.kx=t*a*i,this.ky=t*a*r*(1-uI)}distance(e,t){const i=this.wrap(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}pointOnLine(e,t){let i=1/0,r,a,l,o;for(let p=0;p<e.length-1;p++){let C=e[p][0],w=e[p][1],O=this.wrap(e[p+1][0]-C)*this.kx,U=(e[p+1][1]-w)*this.ky,K=0;(O!==0||U!==0)&&(K=(this.wrap(t[0]-C)*this.kx*O+(t[1]-w)*this.ky*U)/(O*O+U*U),K>1?(C=e[p+1][0],w=e[p+1][1]):K>0&&(C+=O/this.kx*K,w+=U/this.ky*K)),O=this.wrap(t[0]-C)*this.kx,U=(t[1]-w)*this.ky;const j=O*O+U*U;j<i&&(i=j,r=C,a=w,l=p,o=K)}return{point:[r,a],index:l,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const d6=100,f6=50;function kL(n,e){return e[0]-n[0]}function Gx(n){return n[1]-n[0]+1}function P0(n,e){return n[1]>=n[0]&&n[1]<e}function p6(n,e){if(n[0]>n[1])return[null,null];const t=Gx(n);if(e){if(t===2)return[n,null];const r=Math.floor(t/2);return[[n[0],n[0]+r],[n[0]+r,n[1]]]}if(t===1)return[n,null];const i=Math.floor(t/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}function m6(n,e){if(!P0(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)ib(t,n[i]);return t}function g6(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const i of t)ib(e,i);return e}function cI(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function HB(n,e,t){if(!cI(n)||!cI(e))return NaN;let i=0,r=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(r=n[1]-e[3]),n[3]<e[1]&&(r=e[1]-n[3]),t.distance([0,0],[i,r])}function E1(n,e,t){const i=t.pointOnLine(e,n);return t.distance(n,i.point)}function VB(n,e,t,i,r){const a=Math.min(E1(n,[t,i],r),E1(e,[t,i],r)),l=Math.min(E1(t,[n,e],r),E1(i,[n,e],r));return Math.min(a,l)}function cH(n,e,t,i,r){if(!(P0(e,n.length)&&P0(i,t.length)))return 1/0;let l=1/0;for(let o=e[0];o<e[1];++o){const p=n[o],C=n[o+1];for(let w=i[0];w<i[1];++w){const O=t[w],U=t[w+1];if(Q3(p,C,O,U))return 0;l=Math.min(l,VB(p,C,O,U,r))}}return l}function hH(n,e,t,i,r){if(!(P0(e,n.length)&&P0(i,t.length)))return NaN;let l=1/0;for(let o=e[0];o<=e[1];++o)for(let p=i[0];p<=i[1];++p)if(l=Math.min(l,r.distance(n[o],t[p])),l===0)return l;return l}function dH(n,e,t){if(Gv(n,e,!0))return 0;let i=1/0;for(const r of e){const a=r[0],l=r[r.length-1];if(a!==l&&(i=Math.min(i,E1(n,[l,a],t)),i===0))return i;const o=t.pointOnLine(r,n);if(i=Math.min(i,t.distance(n,o.point)),i===0)return i}return i}function fH(n,e,t,i){if(!P0(e,n.length))return NaN;for(let a=e[0];a<=e[1];++a)if(Gv(n[a],t,!0))return 0;let r=1/0;for(let a=e[0];a<e[1];++a){const l=n[a],o=n[a+1];for(const p of t)for(let C=0,w=p.length,O=w-1;C<w;O=C++){const U=p[O],K=p[C];if(Q3(l,o,U,K))return 0;r=Math.min(r,VB(l,o,U,K,i))}}return r}function hI(n,e){for(const t of n)for(const i of t)if(Gv(i,e,!0))return!0;return!1}function pH(n,e,t,i=1/0){const r=g6(n),a=g6(e);if(i!==1/0&&HB(r,a,t)>=i)return i;if(y_(r,a)){if(hI(n,e))return 0}else if(hI(e,n))return 0;let l=1/0;for(const o of n)for(let p=0,C=o.length,w=C-1;p<C;w=p++){const O=o[w],U=o[p];for(const K of e)for(let j=0,W=K.length,Y=W-1;j<W;Y=j++){const te=K[Y],J=K[j];if(Q3(O,U,te,J))return 0;l=Math.min(l,VB(O,U,te,J,t))}}return l}function dI(n,e,t,i,r,a){if(!a)return;const l=HB(m6(i,a),r,t);l<e&&n.push([l,a,[0,0]])}function Kb(n,e,t,i,r,a,l){if(!a||!l)return;const o=HB(m6(i,a),m6(r,l),t);o<e&&n.push([o,a,l])}function Wx(n,e,t,i,r=1/0){let a=Math.min(i.distance(n[0],t[0][0]),r);if(a===0)return a;const l=new TL([[0,[0,n.length-1],[0,0]]],kL),o=g6(t);for(;l.length>0;){const p=l.pop();if(p[0]>=a)continue;const C=p[1],w=e?f6:d6;if(Gx(C)<=w){if(!P0(C,n.length))return NaN;if(e){const O=fH(n,C,t,i);if(isNaN(O)||O===0)return O;a=Math.min(a,O)}else for(let O=C[0];O<=C[1];++O){const U=dH(n[O],t,i);if(a=Math.min(a,U),a===0)return 0}}else{const O=p6(C,e);dI(l,a,i,n,o,O[0]),dI(l,a,i,n,o,O[1])}}return a}function Qx(n,e,t,i,r,a=1/0){let l=Math.min(a,r.distance(n[0],t[0]));if(l===0)return l;const o=new TL([[0,[0,n.length-1],[0,t.length-1]]],kL);for(;o.length>0;){const p=o.pop();if(p[0]>=l)continue;const C=p[1],w=p[2],O=e?f6:d6,U=i?f6:d6;if(Gx(C)<=O&&Gx(w)<=U){if(!P0(C,n.length)&&P0(w,t.length))return NaN;let K;if(e&&i)K=cH(n,C,t,w,r),l=Math.min(l,K);else if(e&&!i){const j=n.slice(C[0],C[1]+1);for(let W=w[0];W<=w[1];++W)if(K=E1(t[W],j,r),l=Math.min(l,K),l===0)return l}else if(!e&&i){const j=t.slice(w[0],w[1]+1);for(let W=C[0];W<=C[1];++W)if(K=E1(n[W],j,r),l=Math.min(l,K),l===0)return l}else K=hH(n,C,t,w,r),l=Math.min(l,K)}else{const K=p6(C,e),j=p6(w,i);Kb(o,l,r,n,t,K[0],j[0]),Kb(o,l,r,n,t,K[0],j[1]),Kb(o,l,r,n,t,K[1],j[0]),Kb(o,l,r,n,t,K[1],j[1])}}return l}function mH(n,e){const t=n.geometry(),i=t.flat().map(l=>QB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const r=new qB(i[0][1]);let a=1/0;for(const l of e){switch(l.type){case"Point":a=Math.min(a,Qx(i,!1,[l.coordinates],!1,r,a));break;case"LineString":a=Math.min(a,Qx(i,!1,l.coordinates,!0,r,a));break;case"Polygon":a=Math.min(a,Wx(i,!1,l.coordinates,r,a));break}if(a===0)return a}return a}function gH(n,e){const t=n.geometry(),i=t.flat().map(l=>QB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const r=new qB(i[0][1]);let a=1/0;for(const l of e){switch(l.type){case"Point":a=Math.min(a,Qx(i,!0,[l.coordinates],!1,r,a));break;case"LineString":a=Math.min(a,Qx(i,!0,l.coordinates,!0,r,a));break;case"Polygon":a=Math.min(a,Wx(i,!0,l.coordinates,r,a));break}if(a===0)return a}return a}function yH(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const i=lH(t).map(l=>l.map(o=>o.map(p=>QB([p.x,p.y],n.canonical)))),r=new qB(i[0][0][0][1]);let a=1/0;for(const l of e)for(const o of i){switch(l.type){case"Point":a=Math.min(a,Wx([l.coordinates],!1,o,r,a));break;case"LineString":a=Math.min(a,Wx(l.coordinates,!0,o,r,a));break;case"Polygon":a=Math.min(a,pH(o,l.coordinates,r,a));break}if(a===0)return a}return a}function b4(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class K1{constructor(e,t){this.type=Bi,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(m_(e[1])){const i=e[1];if(i.type==="FeatureCollection")return new K1(i,i.features.map(r=>b4(r.geometry)).flat());if(i.type==="Feature")return new K1(i,b4(i.geometry));if("type"in i&&"coordinates"in i)return new K1(i,b4(i))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return mH(e,this.geometries);if(e.geometryType()==="LineString")return gH(e,this.geometries);if(e.geometryType()==="Polygon")return yH(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class rb{constructor(e){this.type=zo,this.key=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=e[1];return i==null?t.error("Global state property must be defined."):typeof i!="string"?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new rb(i)}evaluate(e){var t;const i=(t=e.globals)===null||t===void 0?void 0:t.globalState;return!i||Object.keys(i).length===0?null:$C(i,this.key)}eachChild(){}outputDefined(){return!1}}const Y3={"==":Nq,"!=":Gq,">":Qq,"<":Wq,">=":qq,"<=":Yq,array:Zp,at:UB,boolean:Zp,case:zB,coalesce:g_,collator:W3,format:NB,image:GB,in:LB,"index-of":jx,interpolate:Cp,"interpolate-hcl":Cp,"interpolate-lab":Cp,length:WB,let:z3,literal:Ov,match:FB,number:Zp,"number-format":jB,object:Zp,slice:Nx,step:G3,string:Zp,"to-boolean":xg,"to-color":xg,"to-number":xg,"to-string":xg,var:j3,within:P1,distance:K1,"global-state":rb};class wf{constructor(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const i=e[0],r=wf.definitions[i];if(!r)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const a=Array.isArray(r)?r[0]:r.type,l=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,o=l.filter(([C])=>!Array.isArray(C)||C.length===e.length-1);let p=null;for(const[C,w]of o){p=new F3(t.registry,Yx,t.path,null,t.scope);const O=[];let U=!1;for(let K=1;K<e.length;K++){const j=e[K],W=Array.isArray(C)?C[K-1]:C.type,Y=p.parse(j,1+O.length,W);if(!Y){U=!0;break}O.push(Y)}if(!U){if(Array.isArray(C)&&C.length!==O.length){p.error(`Expected ${C.length} arguments, but found ${O.length} instead.`);continue}for(let K=0;K<O.length;K++){const j=Array.isArray(C)?C[K]:C.type,W=O[K];p.concat(K+1).checkSubtype(j,W.type)}if(p.errors.length===0)return new wf(i,a,w,O)}}if(o.length===1)t.errors.push(...p.errors);else{const w=(o.length?o:l).map(([U])=>CH(U)).join(" | "),O=[];for(let U=1;U<e.length;U++){const K=t.parse(e[U],1+O.length);if(!K)return null;O.push(Cu(K.type))}t.error(`Expected arguments of type ${w}, but found (${O.join(", ")}) instead.`)}return null}static register(e,t){wf.definitions=t;for(const i in t)e[i]=wf}}function fI(n,[e,t,i,r]){e=e.evaluate(n),t=t.evaluate(n),i=i.evaluate(n);const a=r?r.evaluate(n):1,l=ML(e,t,i,a);if(l)throw new ju(l);return new il(e/255,t/255,i/255,a,!1)}function pI(n,e){return n in e}function x4(n,e){const t=e[n];return typeof t>"u"?null:t}function vH(n,e,t,i){for(;t<=i;){const r=t+i>>1;if(e[r]===n)return!0;e[r]>n?i=r-1:t=r+1}return!1}function f1(n){return{type:n}}wf.register(Y3,{error:[cq,[fa],(n,[e])=>{throw new ju(e.evaluate(n))}],typeof:[fa,[zo],(n,[e])=>Cu(nc(e.evaluate(n)))],"to-rgba":[bf(Bi,4),[qm],(n,[e])=>{const[t,i,r,a]=e.evaluate(n).rgb;return[t*255,i*255,r*255,a]}],rgb:[qm,[Bi,Bi,Bi],fI],rgba:[qm,[Bi,Bi,Bi,Bi],fI],has:{type:Ho,overloads:[[[fa],(n,[e])=>pI(e.evaluate(n),n.properties())],[[fa,D1],(n,[e,t])=>pI(e.evaluate(n),t.evaluate(n))]]},get:{type:zo,overloads:[[[fa],(n,[e])=>x4(e.evaluate(n),n.properties())],[[fa,D1],(n,[e,t])=>x4(e.evaluate(n),t.evaluate(n))]]},"feature-state":[zo,[fa],(n,[e])=>x4(e.evaluate(n),n.featureState||{})],properties:[D1,[],n=>n.properties()],"geometry-type":[fa,[],n=>n.geometryType()],id:[zo,[],n=>n.id()],zoom:[Bi,[],n=>n.globals.zoom],"heatmap-density":[Bi,[],n=>n.globals.heatmapDensity||0],elevation:[Bi,[],n=>n.globals.elevation||0],"line-progress":[Bi,[],n=>n.globals.lineProgress||0],accumulated:[zo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Bi,f1(Bi),(n,e)=>{let t=0;for(const i of e)t+=i.evaluate(n);return t}],"*":[Bi,f1(Bi),(n,e)=>{let t=1;for(const i of e)t*=i.evaluate(n);return t}],"-":{type:Bi,overloads:[[[Bi,Bi],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Bi],(n,[e])=>-e.evaluate(n)]]},"/":[Bi,[Bi,Bi],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Bi,[Bi,Bi],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Bi,[],()=>Math.LN2],pi:[Bi,[],()=>Math.PI],e:[Bi,[],()=>Math.E],"^":[Bi,[Bi,Bi],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Bi,[Bi],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Bi,[Bi],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Bi,[Bi],(n,[e])=>Math.log(e.evaluate(n))],log2:[Bi,[Bi],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Bi,[Bi],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Bi,[Bi],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Bi,[Bi],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Bi,[Bi],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Bi,[Bi],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Bi,[Bi],(n,[e])=>Math.atan(e.evaluate(n))],min:[Bi,f1(Bi),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Bi,f1(Bi),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Bi,[Bi],(n,[e])=>Math.abs(e.evaluate(n))],round:[Bi,[Bi],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Bi,[Bi],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Bi,[Bi],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Ho,[fa,zo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Ho,[zo],(n,[e])=>n.id()===e.value],"filter-type-==":[Ho,[fa],(n,[e])=>n.geometryType()===e.value],"filter-<":[Ho,[fa,zo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<r}],"filter-id-<":[Ho,[zo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<i}],"filter->":[Ho,[fa,zo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>r}],"filter-id->":[Ho,[zo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>i}],"filter-<=":[Ho,[fa,zo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[Ho,[zo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t<=i}],"filter->=":[Ho,[fa,zo],(n,[e,t])=>{const i=n.properties()[e.value],r=t.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[Ho,[zo],(n,[e])=>{const t=n.id(),i=e.value;return typeof t==typeof i&&t>=i}],"filter-has":[Ho,[zo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Ho,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Ho,[bf(fa)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Ho,[bf(zo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Ho,[fa,bf(zo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Ho,[fa,bf(zo)],(n,[e,t])=>vH(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Ho,overloads:[[[Ho,Ho],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[f1(Ho),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Ho,overloads:[[[Ho,Ho],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[f1(Ho),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Ho,[Ho],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Ho,[fa],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[fa,[fa],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[fa,[fa],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[fa,f1(zo),(n,e)=>e.map(t=>ZC(t.evaluate(n))).join("")],"resolved-locale":[fa,[R3],(n,[e])=>e.evaluate(n).resolvedLocale()]});function CH(n){return Array.isArray(n)?`(${n.map(Cu).join(", ")})`:`(${Cu(n.type)}...)`}function Yx(n){if(n instanceof j3)return Yx(n.boundExpression);if(n instanceof wf&&n.name==="error")return!1;if(n instanceof W3)return!1;if(n instanceof P1)return!1;if(n instanceof K1)return!1;if(n instanceof rb)return!1;const e=n instanceof xg||n instanceof Zp;let t=!0;return n.eachChild(i=>{e?t=t&&Yx(i):t=t&&i instanceof Ov}),t?q3(n)&&H3(n,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function q3(n){if(n instanceof wf){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof P1||n instanceof K1)return!1;let e=!0;return n.eachChild(t=>{e&&!q3(t)&&(e=!1)}),e}function v_(n){if(n instanceof wf&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!v_(t)&&(e=!1)}),e}function H3(n,e){if(n instanceof wf&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(i=>{t&&!H3(i,e)&&(t=!1)}),t}function y6(n){return{result:"success",value:n}}function rv(n){return{result:"error",value:n}}function qx(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function DL(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function $B(n){return!!n.expression&&n.expression.interpolated}function pa(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Wv(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&nc(n)===D1}function _H(n){return n}function bH(n){switch(n.type){case"color":return il.parse;case"padding":return pd.parse;case"numberArray":return md.parse;case"colorArray":return fh.parse;default:return null}}function xH(n){switch(n){case"exponential":return RL;case"interval":return wH;case"categorical":return MH;case"identity":return SH;default:throw new Error(`Unknown function type "${n}"`)}}function ZB(n,e){const t=n.stops&&typeof n.stops[0][0]=="object",i=t||n.property!==void 0,r=t||!i,a=n.type||($B(e)?"exponential":"interval"),l=bH(e);if(l&&(n=Ev({},n),n.stops&&(n.stops=n.stops.map(w=>[w[0],l(w[1])])),n.default?n.default=l(n.default):n.default=l(e.default)),n.colorSpace&&!bq(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);const o=xH(a);let p,C;if(a==="categorical"){p=Object.create(null);for(const w of n.stops)p[w[0]]=w[1];C=typeof n.stops[0][0]}if(t){const w={},O=[];for(let j=0;j<n.stops.length;j++){const W=n.stops[j],Y=W[0].zoom;w[Y]===void 0&&(w[Y]={zoom:Y,type:n.type,property:n.property,default:n.default,stops:[]},O.push(Y)),w[Y].stops.push([W[0].value,W[1]])}const U=[];for(const j of O)U.push([w[j].zoom,ZB(w[j],e)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Cp.interpolationFactor.bind(void 0,K),zoomStops:U.map(j=>j[0]),evaluate({zoom:j},W){return RL({stops:U,base:n.base},e,j).evaluate(j,W)}}}else if(r){const w=a==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:Cp.interpolationFactor.bind(void 0,w),zoomStops:n.stops.map(O=>O[0]),evaluate:({zoom:O})=>o(n,e,O,p,C)}}else return{kind:"source",evaluate(w,O){const U=O&&O.properties?O.properties[n.property]:void 0;return U===void 0?ob(n.default,e.default):o(n,e,U,p,C)}}}function ob(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function MH(n,e,t,i,r){const a=typeof t===r?i[t]:void 0;return ob(a,n.default,e.default)}function wH(n,e,t){if(pa(t)!=="number")return ob(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const r=N3(n.stops.map(a=>a[0]),t);return n.stops[r][1]}function RL(n,e,t){const i=n.base!==void 0?n.base:1;if(pa(t)!=="number")return ob(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const a=N3(n.stops.map(w=>w[0]),t),l=EH(t,i,n.stops[a][0],n.stops[a+1][0]),o=n.stops[a][1],p=n.stops[a+1][1],C=Iq[e.type]||_H;return typeof o.evaluate=="function"?{evaluate(...w){const O=o.evaluate.apply(void 0,w),U=p.evaluate.apply(void 0,w);if(!(O===void 0||U===void 0))return C(O,U,l,n.colorSpace)}}:C(o,p,l,n.colorSpace)}function SH(n,e,t){switch(e.type){case"color":t=il.parse(t);break;case"formatted":t=Hm.fromString(t.toString());break;case"resolvedImage":t=z0.fromString(t.toString());break;case"padding":t=pd.parse(t);break;case"colorArray":t=fh.parse(t);break;case"numberArray":t=md.parse(t);break;default:pa(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return ob(t,n.default,e.default)}function EH(n,e,t,i){const r=i-t,a=n-t;return r===0?0:e===1?a/r:(Math.pow(e,a)-1)/(Math.pow(e,r)-1)}class PL{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new wL,this._defaultValue=t?TH(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,i,r,a,l){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=l,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,a,l){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=l||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new ju(`Expected value to be one of ${Object.keys(this._enumValues).map(p=>JSON.stringify(p)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}}function Qv(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Y3}function V3(n,e){const t=new F3(Y3,Yx,[],e?IH(e):void 0),i=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?y6(new PL(i,e)):rv(t.errors)}class v6{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!v_(t.expression),this.globalStateRefs=X3(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,a,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,a,l)}evaluate(e,t,i,r,a,l){return this._styleExpression.evaluate(e,t,i,r,a,l)}}class C6{constructor(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!v_(t.expression),this.globalStateRefs=X3(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,a,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,a,l)}evaluate(e,t,i,r,a,l){return this._styleExpression.evaluate(e,t,i,r,a,l)}interpolationFactor(e,t,i){return this.interpolationType?Cp.interpolationFactor(this.interpolationType,e,t,i):0}}function BH(n){return n._styleExpression!==void 0}function $3(n,e){const t=V3(n,e);if(t.result==="error")return t;const i=t.value.expression,r=q3(i);if(!r&&!qx(e))return rv([new jm("","data expressions not supported")]);const a=H3(i,["zoom"]);if(!a&&!DL(e))return rv([new jm("","zoom expressions not supported")]);const l=bx(i);if(!l&&!a)return rv([new jm("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(l instanceof jm)return rv([l]);if(l instanceof Cp&&!$B(e))return rv([new jm("",'"interpolate" expressions cannot be used with this property')]);if(!l)return y6(r?new v6("constant",t.value):new v6("source",t.value));const o=l instanceof Cp?l.interpolation:void 0;return y6(r?new C6("camera",t.value,l.labels,o):new C6("composite",t.value,l.labels,o))}class Z3{constructor(e,t){this._parameters=e,this._specification=t,Ev(this,ZB(this._parameters,this._specification))}static deserialize(e){return new Z3(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function OH(n,e){if(Wv(n))return new Z3(n,e);if(Qv(n)){const t=$3(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=il.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=pd.parse(n):e.type==="numberArray"&&(typeof n=="number"||Array.isArray(n))?t=md.parse(n):e.type==="colorArray"&&(typeof n=="string"||Array.isArray(n))?t=fh.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=vp.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=pp.parse(n)),{globalStateRefs:new Set,kind:"constant",evaluate:()=>t}}}function bx(n){let e=null;if(n instanceof z3)e=bx(n.result);else if(n instanceof g_){for(const t of n.args)if(e=bx(t),e)break}else(n instanceof G3||n instanceof Cp)&&n.input instanceof wf&&n.input.name==="zoom"&&(e=n);return e instanceof jm||n.eachChild(t=>{const i=bx(t);i instanceof jm?e=i:!e&&i?e=new jm("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new jm("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function X3(n,e=new Set){return n instanceof rb&&e.add(n.key),n.eachChild(t=>{X3(t,e)}),e}function IH(n){const e={color:qm,string:fa,number:Bi,enum:fa,boolean:Ho,formatted:P3,padding:K3,numberArray:U3,colorArray:f_,projectionDefinition:D3,resolvedImage:nb,variableAnchorOffsetCollection:L3};return n.type==="array"?bf(e[n.value]||zo,n.length):e[n.type]}function TH(n){if(n.type==="color"&&Wv(n.default))return new il(0,0,0,0);switch(n.type){case"color":return il.parse(n.default)||null;case"padding":return pd.parse(n.default)||null;case"numberArray":return md.parse(n.default)||null;case"colorArray":return fh.parse(n.default)||null;case"variableAnchorOffsetCollection":return vp.parse(n.default)||null;case"projectionDefinition":return pp.parse(n.default)||null;default:return n.default===void 0?null:n.default}}function ab(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!ab(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const kH={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function DH(n){if(n==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};ab(n)||(n=Hx(n));const e=V3(n,kH);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=KL(n);return{filter:(i,r,a)=>e.value.evaluate(i,r,{},a),needGeometry:t,getGlobalStateRefs:()=>X3(e.value.expression)}}}function RH(n,e){return n<e?-1:n>e?1:0}function KL(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(KL(n[e]))return!0;return!1}function Hx(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?M4(n[1],n[2],"=="):e==="!="?Ub(M4(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?M4(n[1],n[2],e):e==="any"?PH(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(Hx)):e==="none"?["all"].concat(n.slice(1).map(Hx).map(Ub)):e==="in"?mI(n[1],n.slice(2)):e==="!in"?Ub(mI(n[1],n.slice(2))):e==="has"?gI(n[1]):e==="!has"?Ub(gI(n[1])):!0}function M4(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function PH(n){return["any"].concat(n.map(Hx))}function mI(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(RH)]]:["filter-in-small",n,["literal",e]]}}function gI(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Ub(n){return["!",n]}function XC(n,e={}){if(ab(n))return n;if(!n)return!0;const t=n,i=t[0];if(n.length<=1)return i!=="any";switch(i){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,r,a]=n;return UH(r,a,i,e)}case"any":{const[,...r]=t;return["any",...r.map(l=>{const o={},p=XC(l,o),C=KH(o);return C===!0?p:["case",C,p,!1]})]}case"all":{const[,...r]=t,a=r.map(l=>XC(l,e));return a.length>1?["all",...a]:a[0]}case"none":{const[,...r]=t;return["!",XC(["any",...r],{})]}case"in":{const[,r,...a]=t;return yI(r,a)}case"!in":{const[,r,...a]=t;return yI(r,a,!0)}case"has":return vI(t[1]);case"!has":return["!",vI(t[1])];default:return!0}}function KH(n){const e=[];for(const t in n){const i=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",i],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function UH(n,e,t,i){let r;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?r=["id"]:r=["get",n],i&&e!==null){const a=typeof e;i[n]=a}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",r,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",r,null]]:[t,r,e]}function yI(n,e,t=!1){if(e.length===0)return t;let i;n==="$type"?i=["geometry-type"]:n==="$id"?i=["id"]:i=["get",n];let r=!0;const a=typeof e[0];for(const l of e)if(typeof l!==a){r=!1;break}if(r&&(a==="string"||a==="number")){const l=e.sort().filter((o,p)=>p===0||e[p-1]!==o);return["match",i,l,!t,t]}return t?["all",...e.map(l=>["!=",i,l])]:["any",...e.map(l=>["==",i,l])]}function vI(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function C_(n){return typeof n=="object"?["literal",n]:n}function XB(n,e){let t=n.stops;if(!t)return LH(n,e);const i=t&&typeof t[0][0]=="object",r=i||n.property!==void 0,a=i||!r;return t=t.map(l=>!r&&e.tokens&&typeof l[1]=="string"?[l[0],UL(l[1])]:[l[0],C_(l[1])]),i?FH(n,e,t):a?jH(n,e,t):_6(n,e,t)}function LH(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const i=[e.type==="color"?"to-color":e.type,t,C_(n.default)];return e.type==="array"&&i.splice(1,0,e.value,e.length||null),i}}function JB(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function FH(n,e,t){const i={},r={},a=[];for(let o=0;o<t.length;o++){const p=t[o],C=p[0].zoom;i[C]===void 0&&(i[C]={zoom:C,type:n.type,property:n.property,default:n.default},r[C]=[],a.push(C)),r[C].push([p[0].value,p[1]])}if(tO({},e)==="exponential"){const o=[JB(n),["linear"],["zoom"]];for(const p of a){const C=_6(i[p],e,r[p]);gv(o,p,C,!1)}return o}else{const o=["step",["zoom"]];for(const p of a){const C=_6(i[p],e,r[p]);gv(o,p,C,!0)}return eO(o),o}}function zH(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function CI(n,e){const t=C_(zH(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function _6(n,e,t){const i=tO(n,e),r=["get",n.property];if(i==="categorical"&&typeof t[0][0]=="boolean"){const a=["case"];for(const l of t)a.push(["==",r,l[0]],l[1]);return a.push(CI(n,e)),a}else if(i==="categorical"){const a=["match",r];for(const l of t)gv(a,l[0],l[1],!1);return a.push(CI(n,e)),a}else if(i==="interval"){const a=["step",["number",r]];for(const l of t)gv(a,l[0],l[1],!0);return eO(a),n.default===void 0?a:["case",["==",["typeof",r],"number"],a,C_(n.default)]}else if(i==="exponential"){const a=n.base!==void 0?n.base:1,l=[JB(n),a===1?["linear"]:["exponential",a],["number",r]];for(const o of t)gv(l,o[0],o[1],!1);return n.default===void 0?l:["case",["==",["typeof",r],"number"],l,C_(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function jH(n,e,t,i=["zoom"]){const r=tO(n,e);let a,l=!1;if(r==="interval")a=["step",i],l=!0;else if(r==="exponential"){const o=n.base!==void 0?n.base:1;a=[JB(n),o===1?["linear"]:["exponential",o],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const o of t)gv(a,o[0],o[1],l);return eO(a),a}function eO(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function gv(n,e,t,i){n.length>3&&e===n[n.length-2]||(i&&n.length===2||n.push(e),n.push(t))}function tO(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function UL(n){const e=["concat"],t=/{([^{}]+)}/g;let i=0;for(let r=t.exec(n);r!==null;r=t.exec(n)){const a=n.slice(i,t.lastIndex-r[0].length);i=t.lastIndex,a.length>0&&e.push(a),e.push(["get",r[1]])}if(e.length===1)return n;if(i<n.length)e.push(n.slice(i));else if(e.length===2)return["to-string",e[1]];return e}function NH(n){for(let e=0;e<$a.layout.length;e++)for(const t in $a[$a.layout[e]])if(t===n)return $a[$a.layout[e]][t];for(let e=0;e<$a.paint.length;e++)for(const t in $a[$a.paint[e]])if(t===n)return $a[$a.paint[e]][t];return null}function GH(n,e){for(const t in n.sources)e(n.sources[t])}function JC(n,e){for(const t of n.layers)e(t)}function nO(n,e,t){function i(r,a){const l=r[a];l&&Object.keys(l).forEach(o=>{t({path:[r.id,a,o],key:o,value:l[o],reference:NH(o),set(p){l[o]=p}})})}JC(n,r=>{e.paint&&i(r,"paint"),e.layout&&i(r,"layout")})}function LL(n){const e=n.key,t=n.value;return t?[new _i(e,t,"constants have been deprecated as of v8")]:[]}function lA(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function N1(n){if(Array.isArray(n))return n.map(N1);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=N1(n[t]);return e}return lA(n)}function mp(n){const e=n.key,t=n.value,i=n.valueSpec||{},r=n.objectElementValidators||{},a=n.style,l=n.styleSpec,o=n.validateSpec;let p=[];const C=pa(t);if(C!=="object")return[new _i(e,t,`object expected, ${C} found`)];for(const w in t){const O=w.split(".")[0],U=$C(i,O)||i["*"];let K;if($C(r,O))K=r[O];else if($C(i,O))K=o;else if(r["*"])K=r["*"];else if(i["*"])K=o;else{p.push(new _i(e,t[w],`unknown property "${w}"`));continue}p=p.concat(K({key:(e&&`${e}.`)+w,value:t[w],valueSpec:U,style:a,styleSpec:l,object:t,objectKey:w,validateSpec:o},t))}for(const w in i)r[w]||i[w].required&&i[w].default===void 0&&t[w]===void 0&&p.push(new _i(e,t,`missing required property "${w}"`));return p}function iO(n){const e=n.value,t=n.valueSpec,i=n.validateSpec,r=n.style,a=n.styleSpec,l=n.key,o=n.arrayElementValidator||i;if(pa(e)!=="array")return[new _i(l,e,`array expected, ${pa(e)} found`)];if(t.length&&e.length!==t.length)return[new _i(l,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new _i(l,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let p={type:t.value,values:t.values};a.$version<7&&(p.function=t.function),pa(t.value)==="object"&&(p=t.value);let C=[];for(let w=0;w<e.length;w++)C=C.concat(o({array:e,arrayIndex:w,value:e[w],valueSpec:p,validateSpec:n.validateSpec,style:r,styleSpec:a,key:`${l}[${w}]`}));return C}function J3(n){const e=n.key,t=n.value,i=n.valueSpec;let r=pa(t);return r==="number"&&t!==t&&(r="NaN"),r!=="number"?[new _i(e,t,`number expected, ${r} found`)]:"minimum"in i&&t<i.minimum?[new _i(e,t,`${t} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&t>i.maximum?[new _i(e,t,`${t} is greater than the maximum value ${i.maximum}`)]:[]}function FL(n){const e=n.valueSpec,t=lA(n.value.type);let i,r={},a,l;const o=t!=="categorical"&&n.value.property===void 0,p=!o,C=pa(n.value.stops)==="array"&&pa(n.value.stops[0])==="array"&&pa(n.value.stops[0][0])==="object",w=mp({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:O,default:j}});return t==="identity"&&o&&w.push(new _i(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&w.push(new _i(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!$B(n.valueSpec)&&w.push(new _i(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(p&&!qx(n.valueSpec)?w.push(new _i(n.key,n.value,"property functions not supported")):o&&!DL(n.valueSpec)&&w.push(new _i(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||C)&&n.value.property===void 0&&w.push(new _i(n.key,n.value,'"property" property is required')),w;function O(W){if(t==="identity")return[new _i(W.key,W.value,'identity function may not have a "stops" property')];let Y=[];const te=W.value;return Y=Y.concat(iO({key:W.key,value:te,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:U})),pa(te)==="array"&&te.length===0&&Y.push(new _i(W.key,te,"array must have at least one stop")),Y}function U(W){let Y=[];const te=W.value,J=W.key;if(pa(te)!=="array")return[new _i(J,te,`array expected, ${pa(te)} found`)];if(te.length!==2)return[new _i(J,te,`array length 2 expected, length ${te.length} found`)];if(C){if(pa(te[0])!=="object")return[new _i(J,te,`object expected, ${pa(te[0])} found`)];if(te[0].zoom===void 0)return[new _i(J,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new _i(J,te,"object stop key must have value")];if(l&&l>lA(te[0].zoom))return[new _i(J,te[0].zoom,"stop zoom values must appear in ascending order")];lA(te[0].zoom)!==l&&(l=lA(te[0].zoom),a=void 0,r={}),Y=Y.concat(mp({key:`${J}[0]`,value:te[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:J3,value:K}}))}else Y=Y.concat(K({key:`${J}[0]`,value:te[0],validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},te));return Qv(N1(te[1]))?Y.concat([new _i(`${J}[1]`,te[1],"expressions are not allowed in function stops.")]):Y.concat(W.validateSpec({key:`${J}[1]`,value:te[1],valueSpec:e,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function K(W,Y){const te=pa(W.value),J=lA(W.value),oe=W.value!==null?W.value:Y;if(!i)i=te;else if(te!==i)return[new _i(W.key,oe,`${te} stop domain type must match previous stop domain type ${i}`)];if(te!=="number"&&te!=="string"&&te!=="boolean")return[new _i(W.key,oe,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&t!=="categorical"){let ne=`number expected, ${te} found`;return qx(e)&&t===void 0&&(ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _i(W.key,oe,ne)]}return t==="categorical"&&te==="number"&&(!isFinite(J)||Math.floor(J)!==J)?[new _i(W.key,oe,`integer expected, found ${J}`)]:t!=="categorical"&&te==="number"&&a!==void 0&&J<a?[new _i(W.key,oe,"stop domain values must appear in ascending order")]:(a=J,t==="categorical"&&J in r?[new _i(W.key,oe,"stop domain values must be unique")]:(r[J]=!0,[]))}function j(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:e,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}function Iv(n){const e=(n.expressionContext==="property"?$3:V3)(N1(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new _i(`${n.key}${i.key}`,n.value,i.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new _i(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!v_(t))return[new _i(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!v_(t))return[new _i(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!H3(t,["zoom","feature-state"]))return[new _i(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!q3(t))return[new _i(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function WH(n){const e=n.value,t=n.key,i=pa(e);return i!=="boolean"?[new _i(t,e,`boolean expected, ${i} found`)]:[]}function b6(n){const e=n.key,t=n.value,i=pa(t);return i!=="string"?[new _i(e,t,`color expected, ${i} found`)]:il.parse(String(t))?[]:[new _i(e,t,`color expected, "${t}" found`)]}function __(n){const e=n.key,t=n.value,i=n.valueSpec,r=[];return Array.isArray(i.values)?i.values.indexOf(lA(t))===-1&&r.push(new _i(e,t,`expected one of [${i.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(i.values).indexOf(lA(t))===-1&&r.push(new _i(e,t,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(t)} found`)),r}function rO(n){return ab(N1(n.value))?Iv(Ev({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zL(n)}function zL(n){const e=n.value,t=n.key;if(pa(e)!=="array")return[new _i(t,e,`array expected, ${pa(e)} found`)];const i=n.styleSpec;let r,a=[];if(e.length<1)return[new _i(t,e,"filter array must have at least 1 element")];switch(a=a.concat(__({key:`${t}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),lA(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&lA(e[1])==="$type"&&a.push(new _i(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&a.push(new _i(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=pa(e[1]),r!=="string"&&a.push(new _i(`${t}[1]`,e[1],`string expected, ${r} found`)));for(let l=2;l<e.length;l++)r=pa(e[l]),lA(e[1])==="$type"?a=a.concat(__({key:`${t}[${l}]`,value:e[l],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):r!=="string"&&r!=="number"&&r!=="boolean"&&a.push(new _i(`${t}[${l}]`,e[l],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let l=1;l<e.length;l++)a=a.concat(zL({key:`${t}[${l}]`,value:e[l],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":r=pa(e[1]),e.length!==2?a.push(new _i(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):r!=="string"&&a.push(new _i(`${t}[1]`,e[1],`string expected, ${r} found`));break}return a}function jL(n,e){const t=n.key,i=n.validateSpec,r=n.style,a=n.styleSpec,l=n.value,o=n.objectKey,p=a[`${e}_${n.layerType}`];if(!p)return[];const C=o.match(/^(.*)-transition$/);if(e==="paint"&&C&&p[C[1]]&&p[C[1]].transition)return i({key:t,value:l,valueSpec:a.transition,style:r,styleSpec:a});const w=n.valueSpec||p[o];if(!w)return[new _i(t,l,`unknown property "${o}"`)];let O;if(pa(l)==="string"&&qx(w)&&!w.tokens&&(O=/^{([^}]+)}$/.exec(l)))return[new _i(t,l,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];const U=[];return n.layerType==="symbol"&&(o==="text-field"&&r&&!r.glyphs&&U.push(new _i(t,l,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&Wv(N1(l))&&lA(l.type)==="identity"&&U.push(new _i(t,l,'"text-font" does not support identity functions'))),U.concat(i({key:n.key,value:l,valueSpec:w,style:r,styleSpec:a,expressionContext:"property",propertyType:e,propertyKey:o}))}function NL(n){return jL(n,"paint")}function GL(n){return jL(n,"layout")}function WL(n){let e=[];const t=n.value,i=n.key,r=n.style,a=n.styleSpec;if(pa(t)!=="object")return[new _i(i,t,`object expected, ${pa(t)} found`)];!t.type&&!t.ref&&e.push(new _i(i,t,'either "type" or "ref" is required'));let l=lA(t.type);const o=lA(t.ref);if(t.id){const p=lA(t.id);for(let C=0;C<n.arrayIndex;C++){const w=r.layers[C];lA(w.id)===p&&e.push(new _i(i,t.id,`duplicate layer id "${t.id}", previously used at line ${w.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(C=>{C in t&&e.push(new _i(i,t[C],`"${C}" is prohibited for ref layers`))});let p;r.layers.forEach(C=>{lA(C.id)===o&&(p=C)}),p?p.ref?e.push(new _i(i,t.ref,"ref cannot reference another ref layer")):l=lA(p.type):e.push(new _i(i,t.ref,`ref layer "${o}" not found`))}else if(l!=="background")if(!t.source)e.push(new _i(i,t,'missing required property "source"'));else{const p=r.sources&&r.sources[t.source],C=p&&lA(p.type);p?C==="vector"&&l==="raster"?e.push(new _i(i,t.source,`layer "${t.id}" requires a raster source`)):C!=="raster-dem"&&l==="hillshade"?e.push(new _i(i,t.source,`layer "${t.id}" requires a raster-dem source`)):C!=="raster-dem"&&l==="color-relief"?e.push(new _i(i,t.source,`layer "${t.id}" requires a raster-dem source`)):C==="raster"&&l!=="raster"?e.push(new _i(i,t.source,`layer "${t.id}" requires a vector source`)):C==="vector"&&!t["source-layer"]?e.push(new _i(i,t,`layer "${t.id}" must specify a "source-layer"`)):C==="raster-dem"&&l!=="hillshade"&&l!=="color-relief"?e.push(new _i(i,t.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):l==="line"&&t.paint&&t.paint["line-gradient"]&&(C!=="geojson"||!p.lineMetrics)&&e.push(new _i(i,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new _i(i,t.source,`source "${t.source}" not found`))}return e=e.concat(mp({key:i,value:t,valueSpec:a.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${i}.type`,value:t.type,valueSpec:a.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:rO,layout(p){return mp({layer:t,key:p.key,value:p.value,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*"(C){return GL(Ev({layerType:l},C))}}})},paint(p){return mp({layer:t,key:p.key,value:p.value,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*"(C){return NL(Ev({layerType:l},C))}}})}}})),e}function G1(n){const e=n.value,t=n.key,i=pa(e);return i!=="string"?[new _i(t,e,`string expected, ${i} found`)]:[]}function QH(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",i=n.value,r=n.styleSpec,a=r.source_raster_dem,l=n.style;let o=[];const p=pa(i);if(i===void 0)return o;if(p!=="object")return o.push(new _i("source_raster_dem",i,`object expected, ${p} found`)),o;const w=lA(i.encoding)==="custom",O=["redFactor","greenFactor","blueFactor","baseShift"],U=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const K in i)!w&&O.includes(K)?o.push(new _i(K,i[K],`In "${t}": "${K}" is only valid when "encoding" is set to "custom". ${U} encoding found`)):a[K]?o=o.concat(n.validateSpec({key:K,value:i[K],valueSpec:a[K],validateSpec:n.validateSpec,style:l,styleSpec:r})):o.push(new _i(K,i[K],`unknown property "${K}"`));return o}const _I={promoteId:YH};function QL(n){const e=n.value,t=n.key,i=n.styleSpec,r=n.style,a=n.validateSpec;if(!e.type)return[new _i(t,e,'"type" is required')];const l=lA(e.type);let o;switch(l){case"vector":case"raster":return o=mp({key:t,value:e,valueSpec:i[`source_${l.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:_I,validateSpec:a}),o;case"raster-dem":return o=QH({sourceName:t,value:e,style:n.style,styleSpec:i,validateSpec:a}),o;case"geojson":if(o=mp({key:t,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:a,objectElementValidators:_I}),e.cluster)for(const p in e.clusterProperties){const[C,w]=e.clusterProperties[p],O=typeof C=="string"?[C,["accumulated"],["get",p]]:C;o.push(...Iv({key:`${t}.${p}.map`,value:w,expressionContext:"cluster-map"})),o.push(...Iv({key:`${t}.${p}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return o;case"video":return mp({key:t,value:e,valueSpec:i.source_video,style:r,validateSpec:a,styleSpec:i});case"image":return mp({key:t,value:e,valueSpec:i.source_image,style:r,validateSpec:a,styleSpec:i});case"canvas":return[new _i(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return __({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function YH({key:n,value:e}){if(pa(e)==="string")return G1({key:n,value:e});{const t=[];for(const i in e)t.push(...G1({key:`${n}.${i}`,value:e[i]}));return t}}function YL(n){const e=n.value,t=n.styleSpec,i=t.light,r=n.style;let a=[];const l=pa(e);if(e===void 0)return a;if(l!=="object")return a=a.concat([new _i("light",e,`object expected, ${l} found`)]),a;for(const o in e){const p=o.match(/^(.*)-transition$/);p&&i[p[1]]&&i[p[1]].transition?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:r,styleSpec:t})):i[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:i[o],validateSpec:n.validateSpec,style:r,styleSpec:t})):a=a.concat([new _i(o,e[o],`unknown property "${o}"`)])}return a}function qL(n){const e=n.value,t=n.styleSpec,i=t.sky,r=n.style,a=pa(e);if(e===void 0)return[];if(a!=="object")return[new _i("sky",e,`object expected, ${a} found`)];let l=[];for(const o in e)i[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:i[o],style:r,styleSpec:t})):l=l.concat([new _i(o,e[o],`unknown property "${o}"`)]);return l}function HL(n){const e=n.value,t=n.styleSpec,i=t.terrain,r=n.style;let a=[];const l=pa(e);if(e===void 0)return a;if(l!=="object")return a=a.concat([new _i("terrain",e,`object expected, ${l} found`)]),a;for(const o in e)i[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:i[o],validateSpec:n.validateSpec,style:r,styleSpec:t})):a=a.concat([new _i(o,e[o],`unknown property "${o}"`)]);return a}function qH(n){return G1(n).length===0?[]:Iv(n)}function HH(n){return G1(n).length===0?[]:Iv(n)}function VH(n){const e=n.key,t=n.value;if(pa(t)==="array"){if(t.length<1||t.length>4)return[new _i(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const r={type:"number"};let a=[];for(let l=0;l<t.length;l++)a=a.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:r}));return a}else return J3({key:e,value:t,valueSpec:{}})}function $H(n){const e=n.key,t=n.value;if(pa(t)==="array"){const r={type:"number"};if(t.length<1)return[new _i(e,t,"array length at least 1 expected, length 0 found")];let a=[];for(let l=0;l<t.length;l++)a=a.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:r}));return a}else return J3({key:e,value:t,valueSpec:{}})}function ZH(n){const e=n.key,t=n.value;if(pa(t)==="array"){if(t.length<1)return[new _i(e,t,"array length at least 1 expected, length 0 found")];let r=[];for(let a=0;a<t.length;a++)r=r.concat(b6({key:`${e}[${a}]`,value:t[a]}));return r}else return b6({key:e,value:t})}function XH(n){const e=n.key,t=n.value,i=pa(t),r=n.styleSpec;if(i!=="array"||t.length<1||t.length%2!==0)return[new _i(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let a=[];for(let l=0;l<t.length;l+=2)a=a.concat(__({key:`${e}[${l}]`,value:t[l],valueSpec:r.layout_symbol["text-anchor"]})),a=a.concat(iO({key:`${e}[${l+1}]`,value:t[l+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:r}));return a}function VL(n){let e=[];const t=n.value,i=n.key;if(Array.isArray(t)){const r=[],a=[];for(const l in t){t[l].id&&r.includes(t[l].id)&&e.push(new _i(i,t,`all the sprites' ids must be unique, but ${t[l].id} is duplicated`)),r.push(t[l].id),t[l].url&&a.includes(t[l].url)&&e.push(new _i(i,t,`all the sprites' URLs must be unique, but ${t[l].url} is duplicated`)),a.push(t[l].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(mp({key:`${i}[${l}]`,value:t[l],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return G1({key:i,value:t})}function JH(n){const e=n.value,t=n.styleSpec,i=t.projection,r=n.style,a=pa(e);if(e===void 0)return[];if(a!=="object")return[new _i("projection",e,`object expected, ${a} found`)];let l=[];for(const o in e)i[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:i[o],style:r,styleSpec:t})):l=l.concat([new _i(o,e[o],`unknown property "${o}"`)]);return l}function eV(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const i=pa(t);return i==="array"&&!nV(t)&&!tV(t)?[new _i(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(i)?[]:[new _i(e,t,`projection expected, invalid type "${i}" found`)]}function tV(n){return!!["interpolate","step","literal"].includes(n[0])}function nV(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}function iV(n){return!!n&&n.constructor===Object}function $L(n){return iV(n.value)?[]:[new _i(n.key,n.value,`object expected, ${pa(n.value)} found`)]}const bI={"*"(){return[]},array:iO,boolean:WH,number:J3,color:b6,constants:LL,enum:__,filter:rO,function:FL,layer:WL,object:mp,source:QL,light:YL,sky:qL,terrain:HL,projection:JH,projectionDefinition:eV,string:G1,formatted:qH,resolvedImage:HH,padding:VH,numberArray:$H,colorArray:ZH,variableAnchorOffsetCollection:XH,sprite:VL,state:$L};function Vx(n){const e=n.value,t=n.valueSpec,i=n.styleSpec;return n.validateSpec=Vx,t.expression&&Wv(lA(e))?FL(n):t.expression&&Qv(N1(e))?Iv(n):t.type&&bI[t.type]?bI[t.type](n):mp(Ev({},n,{valueSpec:t.type?i[t.type]:t}))}function ZL(n){const e=n.value,t=n.key,i=G1(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new _i(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new _i(t,e,'"glyphs" url must include a "{range}" token'))),i}function Of(n,e=$a){let t=[];return t=t.concat(Vx({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:Vx,objectElementValidators:{glyphs:ZL,"*"(){return[]}}})),n.constants&&(t=t.concat(LL({key:"constants",value:n.constants}))),XL(t)}Of.source=lm(sm(QL));Of.sprite=lm(sm(VL));Of.glyphs=lm(sm(ZL));Of.light=lm(sm(YL));Of.sky=lm(sm(qL));Of.terrain=lm(sm(HL));Of.state=lm(sm($L));Of.layer=lm(sm(WL));Of.filter=lm(sm(rO));Of.paintProperty=lm(sm(NL));Of.layoutProperty=lm(sm(GL));function sm(n){return function(e){return n({...e,validateSpec:Vx})}}function XL(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function lm(n){return function(...e){return XL(n.apply(this,e))}}const rV=/("(?:[^\\"]|\\.)*")|[:,]/g;function oV(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return function a(l,o,p){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const C=JSON.stringify(l,r);if(C===void 0)return C;const w=i-o.length-p;if(C.length<=w){const O=C.replace(rV,(U,K)=>K||`${U} `);if(O.length<=w)return O}if(r!=null&&(l=JSON.parse(C),r=void 0),typeof l=="object"&&l!==null){const O=o+t,U=[];let K=0,j,W;if(Array.isArray(l)){j="[",W="]";const{length:Y}=l;for(;K<Y;K++)U.push(a(l[K],O,K===Y-1?0:1)||"null")}else{j="{",W="}";const Y=Object.keys(l),{length:te}=Y;for(;K<te;K++){const J=Y[K],oe=`${JSON.stringify(J)}: `,ne=a(l[J],O,oe.length+(K===te-1?0:1));ne!==void 0&&U.push(oe+ne)}}if(U.length>0)return[j,t+U.join(`,
${O}`),W].join(`
${o}`)}return C}(n,"",0)}function xI(n,e){const t={};for(const i in e)n[i]!==void 0&&(t[i]=n[i]);for(const i in n)t[i]===void 0&&(t[i]=n[i]);return t}function aV(n,e=2){return n=xI(n,$a.$root),n.layers&&(n.layers=n.layers.map(t=>xI(t,$a.layer))),oV(n,{indent:e})}function w4(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function MI(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function x6(n,e){return typeof e=="string"&&e[0]==="@"?x6(n,n.constants[e]):e}function sV(n){return Array.isArray(n.stops)}function mC(n,e,t){n[t]=n[e],delete n[e]}function lV(n){n.version=8,GH(n,r=>{r.type==="video"&&r.url!==void 0&&mC(r,"url","urls"),r.type==="video"&&r.coordinates.forEach(a=>a.reverse())}),JC(n,r=>{w4(r,a=>{a["symbol-min-distance"]!==void 0&&mC(a,"symbol-min-distance","symbol-spacing")}),MI(r,a=>{a["background-image"]!==void 0&&mC(a,"background-image","background-pattern"),a["line-image"]!==void 0&&mC(a,"line-image","line-pattern"),a["fill-image"]!==void 0&&mC(a,"fill-image","fill-pattern")})}),nO(n,{paint:!0,layout:!0},r=>{const a=x6(n,r.value);sV(a)&&a.stops.forEach(l=>{l[1]=x6(n,l[1])}),r.set(a)}),delete n.constants,JC(n,r=>{w4(r,a=>{delete a["text-max-size"],delete a["icon-max-size"]}),MI(r,a=>{a["text-size"]&&(r.layout||(r.layout={}),r.layout["text-size"]=a["text-size"],delete a["text-size"]),a["icon-size"]&&(r.layout||(r.layout={}),r.layout["icon-size"]=a["icon-size"],delete a["icon-size"])})});function e(r){function a(l){return l.split(",").map(o=>o.trim())}if(Array.isArray(r))return r;if(typeof r=="string")return a(r);if(typeof r=="object")return r.stops.forEach(l=>{l[1]=a(l[1])}),r;throw new Error("unexpected font value")}JC(n,r=>{w4(r,a=>{a["text-font"]&&(a["text-font"]=e(a["text-font"]))})});let t=0;for(let r=n.layers.length-1;r>=0;r--)if(n.layers[r].type!=="symbol"){t=r+1;break}const i=n.layers.splice(t);return i.reverse(),n.layers=n.layers.concat(i),n}function uV(n){const e=[];return JC(n,t=>{t.filter&&(t.filter=XC(t.filter))}),nO(n,{paint:!0,layout:!0},({path:t,value:i,reference:r,set:a})=>{Qv(i)||(typeof i=="object"&&!Array.isArray(i)?(a(XB(i,r)),e.push(t.join("."))):r.tokens&&typeof i=="string"&&a(UL(i)))}),n}function AV(n){return JSON.parse(cV(JSON.stringify(n)))}function cV(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const i=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(i){let[r,a,l,o]=i.slice(1);return[a,l]=[a,l].map(p=>p.endsWith("%")?p:`${parseFloat(p)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[r,a,l,o].filter(Boolean).join(",")})"`}return e})}function hV(n){let e=!1;if(n.version===7&&(n=lV(n),e=!0),n.version===8&&(e=!!uV(n),e=!0),nO(n,{paint:!0,layout:!0},({value:t,reference:i,set:r})=>{i.type==="color"&&r(AV(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const xf=$a,dV={StyleExpression:PL,StylePropertyFunction:Z3,ZoomConstantExpression:v6,ZoomDependentExpression:C6,createExpression:V3,createPropertyExpression:$3,isExpression:Qv,isExpressionFilter:ab,isZoomExpression:BH,normalizePropertyExpression:OH},fV={convertFunction:XB,createFunction:ZB,isFunction:Wv},pV=8,mV={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"styleeditor:slimmode":!0,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{String:"one",Number:2,Boolean:!1}}},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},centerAltitude:{type:"number",doc:"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:123.4,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2980",ios:"https://github.com/maplibre/maplibre-native/issues/2980"}}},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},roll:{type:"number",default:0,units:"degrees",doc:"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:45,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2941",ios:"https://github.com/maplibre/maplibre-native/issues/2941"}}},state:{type:"state",default:{},doc:"An object used to define default values when using the [`global-state`](https://maplibre.org/maplibre-style-spec/expressions/#global-state) expression.",example:{chargerType:{default:["CCS","CHAdeMO","Type2"]},minPreferredChargingSpeed:{default:50}},"sdk-support":{"basic functionality":{js:"https://github.com/maplibre/maplibre-gl-js/issues/4964",android:"https://github.com/maplibre/maplibre-native/issues/3302",ios:"https://github.com/maplibre/maplibre-native/issues/3302"}}},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sky:{type:"sky",doc:"The map's sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.",example:{"sky-color":"#199EF3","sky-horizon-blend":.5,"horizon-color":"#ffffff","horizon-fog-blend":.5,"fog-color":"#0000ff","fog-ground-blend":.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},projection:{type:"projection",doc:"The projection configuration",example:{type:["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},terrain:{type:"terrain",doc:"The terrain configuration.",example:{source:"raster-dem-source",exaggeration:.5}},sources:{required:!0,type:"sources",doc:"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn't enough to make data appear on the map because sources don't contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\n\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).",example:{"maplibre-demotiles":{type:"vector",url:"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{type:"vector",url:"http://api.example.com/tilejson.json"},"maplibre-streets":{type:"vector",tiles:["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],maxzoom:14},"wms-imagery":{type:"raster",tiles:["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],tileSize:256}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format.\n\nIf this property is set, any text in the `text-field` layout property is displayed in the font stack named by the `text-font` layout property based on glyphs located at the URL specified by this property. Otherwise, font faces will be determined by the `text-font` property based on the local environment.\n\nThe URL must include:\n\n - `{fontstack}` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the `text-font` property of a symbol layer. \n\n - `{range}` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.\n\nThe URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf","sdk-support":{"basic functionality":{js:"0.0.16",android:"0.1.1",ios:"0.1.0"},"omit to use local fonts":{js:"https://github.com/maplibre/maplibre-gl-js/issues/3302",android:"https://github.com/maplibre/maplibre-native/issues/165",ios:"https://github.com/maplibre/maplibre-native/issues/165"}}},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"A style's `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`, `color-relief`.\n\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.",example:[{id:"coastline",source:"maplibre","source-layer":"countries",type:"line",paint:{"line-color":"#198EC8"}}]}},gV={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},yV=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],vV={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},CV={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},_V={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},bV={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},xV={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},MV={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},wV={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"additional methods":{js:"https://github.com/maplibre/maplibre-gl-js/issues/5665",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}}},"color-relief":{doc:"Client-side elevation coloring based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"https://github.com/maplibre/maplibre-gl-js/issues/5666",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},SV=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],EV={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},BV={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},OV={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},IV={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},TV={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},kV=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Fonts to use for displaying text. If the `glyphs` root property is specified, this array is joined together and interpreted as a font stack name. Otherwise, it is interpreted as a cascading fallback list of local font names.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"},"local fonts":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/3302","android":"https://github.com/maplibre/maplibre-native/issues/165","ios":"https://github.com/maplibre/maplibre-native/issues/165"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),DV={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},RV={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},PV={type:"array",value:"*",doc:"A filter selects specific features from a layer."},KV={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},UV={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},LV={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},FV={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},zV=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_1_name","var_1_value","...","var_n_name","var_n_value","expression"],"output-type":"any"}],"parameters":[{"name":"var_i_name","type":"string literal","description":"The name of the i-th variable."},{"name":"var_i_value","type":"any","description":"The value of the i-th variable."},{"name":"expression","type":"any","description":"The expression within which the named variables can be referenced."}]},"example":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["var_name"],"output-type":"any"}],"parameters":[{"name":"var_name","type":"string literal","description":"The name of the variable bound using `let`."}]},"example":["var","density"],"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["json_object"],"output-type":"object"},{"parameters":["json_array"],"output-type":"array"}],"parameters":[{"name":"json_object","type":"JSON object"},{"name":"json_array","type":"JSON array"}]},"example":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type or length, then this assertion will cause the whole expression to be aborted.","syntax":{"overloads":[{"parameters":["value"],"output-type":"array"},{"parameters":["type","value"],"output-type":"array<type>"},{"parameters":["type","length","value"],"output-type":"array<type, length>"}],"parameters":[{"name":"value","type":"any"},{"name":"type","type":"\\"string\\" | \\"number\\" | \\"boolean\\"","description":"The asserted type of the input array."},{"name":"length","type":"number literal","description":"The asserted length of the input array."}]},"example":["array",["literal",["a","b","c"]],"string",3],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","syntax":{"overloads":[{"parameters":["index","array"],"output-type":"T"}],"parameters":[{"name":"index","type":"number","description":"The index into `array`."},{"name":"array","type":"array<T>","description":"The array of items to retrieve the specified item from."}]},"example":["at",1,["literal",["a","b","c"]]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure/)","syntax":{"overloads":[{"parameters":["item","array"],"output-type":"boolean"},{"parameters":["substring","string"],"output-type":"boolean"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."}]},"example":["in","$type","Point"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["item","array","from_index?"],"output-type":"number"},{"parameters":["substring","string","from_index?"],"output-type":"number"}],"parameters":[{"name":"item","type":"T","description":"The needle to search for within `array`."},{"name":"array","type":"array<T>","description":"The haystack through which to search for `item`."},{"name":"substring","type":"string","description":"The needle to search for within `string`."},{"name":"string","type":"string","description":"The haystack through which to search for `substring`."},{"name":"from_index","type":"number","description":"The index from where to begin the search."}]},"example":["index-of","foo",["baz","bar","hello","foo","world"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns a subarray from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array","start_index","end_index?"],"output-type":"array<T>"},{"parameters":["string","start_index","end_index?"],"output-type":"string"}],"parameters":[{"name":"array","type":"array<T>","description":"The original array from which to extract the subarray."},{"name":"string","type":"string","description":"The original string from which to extract the substring."},{"name":"start_index","type":"number","description":"The inclusive index from which `slice` extracts items or characters from the subarray or substring."},{"name":"end_index","type":"number","description":"The non-inclusive index up to which `slice` extracts items or characters from the subarray or substring."}]},"example":["slice",["get","name"],0,3],"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","syntax":{"overloads":[{"parameters":["condition_1","output_1","...","condition_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"condition_i","type":"boolean"},{"name":"output_i","type":"any"},{"name":"fallback","type":"any","description":"The result when no condition evaluates to true."}]},"example":["case",["boolean",["feature-state","hover"],false],1,0.5],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","syntax":{"overloads":[{"parameters":["input","label_1","output_1","...","label_n","output_n","fallback"],"output-type":"any"}],"parameters":[{"name":"input","type":"any","description":"Any expression."},{"name":"label_i","type":"string literal | array<string literal> | array<number literal>","description":"The i-th literal value or array of literal values to match the input against."},{"name":"output_i","type":"any","description":"The result when the i-th label is the first label to match the input."},{"name":"fallback","type":"any","description":"The result when no label matches the input."}]},"example":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","syntax":{"overloads":[{"parameters":["expression_1","...","expression_n"],"output-type":"any"}],"parameters":[{"name":"expression_i","type":"any"}]},"example":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order.\\n\\nReturns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","syntax":{"overloads":[{"parameters":["input","output_0","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"any"}],"parameters":[{"name":"input","type":"number","description":"Any numeric expression."},{"name":"output_0","type":"any","description":"The result when the `input` is less than the first stop."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"any","description":"The result when the i-th stop is the last stop less than the `input`."}]},"example":["step",["get","point_count"],20,100,30,750,40],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"any"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","description":"The interpolation type."},{"name":"input","type":"number","description":"Any numeric expression."},{"name":"stop_i_input","type":"number literal","description":"The value of the i-th stop against which the `input` is compared."},{"name":"stop_i_output","type":"number | array<number> | color","description":"The output value corresponding to the i-th stop."}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color"}]},"example":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.","syntax":{"overloads":[{"parameters":["interpolation_type","input","stop_1_input","stop_1_output","...","stop_n_input","stop_n_output"],"output-type":"color"}],"parameters":[{"name":"interpolation_type","type":"[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]"},{"name":"input","type":"number"},{"name":"stop_i_input","type":"number literal"},{"name":"stop_i_output","type":"color"}]},"example":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"],"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns the mathematical constant ln(2).","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["ln2"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["pi"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["e"],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["typeof",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"string"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["string",["get","name"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["number",["get","population"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"boolean"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["boolean",["feature-state","hover"],false],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"object"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["object",["get","some-property"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","syntax":{"overloads":[{"parameters":["options"],"output-type":"collator"}],"parameters":[{"name":"options","type":"{ \\"case-sensitive\\"?: boolean, \\"diacritic-sensitive\\"?: boolean, \\"locale\\"?: string }"}]},"example":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","syntax":{"overloads":[{"parameters":["input_1","style_overrides_1?","...","input_n","style_overrides_n?"],"output-type":"formatted"}],"parameters":[{"name":"input_i","type":"string | image"},{"name":"style_overrides_i","type":"{ \\"text-font\\"?: string, \\"text-color\\"?: color, \\"font-scale\\"?: number, \\"vertical-align\\"?: \\"bottom\\" | \\"center\\" | \\"top\\" }"}]},"example":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"5.1.0","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","syntax":{"overloads":[{"parameters":["image_name"],"output-type":"image"}],"parameters":[{"name":"image_name","type":"string"}]},"example":["image","marker_15"],"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"global-state":{"doc":"Retrieves a property value from global state that can be set with platform-specific APIs. Defaults can be provided using the [`state`](https://maplibre.org/maplibre-style-spec/root/#state) root property. Returns `null` if no value nor default value is set for the retrieved property.","group":"Lookup","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string literal","description":"The name of the global state property to retrieve."}]},"example":["global-state","someProperty"],"sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/4964","android":"https://github.com/maplibre/maplibre-native/issues/3302","ios":"https://github.com/maplibre/maplibre-native/issues/3302"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","syntax":{"overloads":[{"parameters":["input","format_options"],"output-type":"string"}],"parameters":[{"name":"input","type":"number"},{"name":"format_options","type":"{ \\"locale\\"?: string, \\"currency\\"?: string, \\"min-fraction-digits\\"?: number, \\"max-fraction-digits\\"?: number }"}]},"example":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)","syntax":{"overloads":[{"parameters":["value"],"output-type":"string"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-string",["get","mag"]],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"number"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-number","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when the input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","syntax":{"overloads":[{"parameters":["value"],"output-type":"boolean"}],"parameters":[{"name":"value","type":"any"}]},"example":["to-boolean","someProperty"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","syntax":{"overloads":[{"parameters":["color"],"output-type":"array"}],"parameters":[{"name":"color","type":"color"}]},"example":["to-rgba","#ff0000"],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["value_1","...","value_n"],"output-type":"color"}],"parameters":[{"name":"value_i","type":"any"}]},"example":["to-color","#edf8e9"],"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"}]},"example":["rgb",255,0,0],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","syntax":{"overloads":[{"parameters":["red","green","blue","alpha"],"output-type":"color"}],"parameters":[{"name":"red","type":"number"},{"name":"green","type":"number"},{"name":"blue","type":"number"},{"name":"alpha","type":"number"}]},"example":["rgba",255,0,0,1],"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/3d-extrusion-floorplan/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to retrieve the value of."},{"name":"object","type":"object","description":"The object to retrieve the value from."}]},"example":["get","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of a property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","syntax":{"overloads":[{"parameters":["property_name","object?"],"output-type":"boolean"}],"parameters":[{"name":"property_name","type":"string","description":"The name of the property to test for the presence of."},{"name":"object","type":"object","description":"The object in which to test for the presence of the `property_name` property."}]},"example":["has","someProperty"],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","syntax":{"overloads":[{"parameters":["array_or_string"],"output-type":"number"}],"parameters":[{"name":"array_or_string","type":"array | string"}]},"example":["length",["get","myArray"]],"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","syntax":{"overloads":[{"parameters":[],"output-type":"object"}]},"example":["properties"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","syntax":{"overloads":[{"parameters":["property_name"],"output-type":"any"}],"parameters":[{"name":"property_name","type":"string"}]},"example":["feature-state","hover"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","syntax":{"overloads":[{"parameters":[],"output-type":"string"}]},"example":["==",["geometry-type"],"Polygon"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["id"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["heatmap-density"],"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"elevation":{"doc":"Gets the elevation of a pixel (in meters above the vertical datum reference of the `raster-dem` tiles) from a `raster-dem` source. Can only be used in the `color-relief-color` property of a `color-relief` layer.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["elevation"],"group":"Color Relief","sdk-support":{"basic functionality":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/5666","android":"https://github.com/maplibre/maplibre-native/issues/3408","ios":"https://github.com/maplibre/maplibre-native/issues/3408"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","syntax":{"overloads":[{"parameters":[],"output-type":"number"}]},"example":["line-progress"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","syntax":{"overloads":[{"parameters":[],"output-type":"any"}]},"example":["accumulated"],"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["+",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["*",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"},{"parameters":["single_input"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The number from which to subtract `input_2`."},{"name":"input_2","type":"number","description":"The number to subtract from `input_1`."},{"name":"single_input","type":"number","description":"The number to subtract from 0."}]},"example":["-",10],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["/",["get","population"],["get","sq-km"]],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The dividend."},{"name":"input_2","type":"number","description":"The divisor."}]},"example":["%",10,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","syntax":{"overloads":[{"parameters":["input_1","input_2"],"output-type":"number"}],"parameters":[{"name":"input_1","type":"number","description":"The base."},{"name":"input_2","type":"number","description":"The exponent."}]},"example":["^",2,3],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number","description":"The radicand."}]},"example":["sqrt",9],"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log10",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ln",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["log2",8],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["sin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["cos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["tan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["asin",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["acos",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["atan",1],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["min",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"number"}],"parameters":[{"name":"input_i","type":"number"}]},"example":["max",1,2],"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["round",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["abs",-1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["ceil",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","syntax":{"overloads":[{"parameters":["input"],"output-type":"number"}],"parameters":[{"name":"input","type":"number"}]},"example":["floor",1.5],"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"number"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["distance",{"type":"Point","coordinates":[0,0]}],"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/3d-buildings/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-markers/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["==","$type","Polygon"],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","syntax":{"overloads":[{"parameters":["input_1","input_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"input_1","type":"any"},{"name":"input_2","type":"any"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["!=","cluster",true],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<",["get","mag"],2],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":[">=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","syntax":{"overloads":[{"parameters":["string_1","string_2","collator?"],"output-type":"boolean"},{"parameters":["number_1","number_2","collator?"],"output-type":"boolean"}],"parameters":[{"name":"string_i","type":"string"},{"name":"number_i","type":"number"},{"name":"collator","type":"collator","description":"Options for locale-dependent comparison."}]},"example":["<=",["get","mag"],6],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["all",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"boolean"}],"parameters":[{"name":"input_i","type":"boolean"}]},"example":["any",[">=",["get","mag"],4],["<",["get","mag"],5]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"boolean"}]},"example":["!",["has","point_count"]],"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","syntax":{"overloads":[{"parameters":["geojson"],"output-type":"boolean"}],"parameters":[{"name":"geojson","type":"GeoJSON object"}]},"example":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}],"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","syntax":{"overloads":[{"parameters":["input"],"output-type":"boolean"}],"parameters":[{"name":"input","type":"string"}]},"example":["is-supported-script",""],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["upcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","syntax":{"overloads":[{"parameters":["input"],"output-type":"string"}],"parameters":[{"name":"input","type":"string"}]},"example":["downcase",["get","name"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-image-missing-generated/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","syntax":{"overloads":[{"parameters":["input_1","...","input_n"],"output-type":"string"}],"parameters":[{"name":"input_i","type":"any"}]},"example":["concat","square-rgb-",["get","color"]],"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","syntax":{"overloads":[{"parameters":["collator"],"output-type":"string"}],"parameters":[{"name":"collator","type":"collator"}]},"example":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]],"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),jV={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},NV={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},GV={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},WV={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},QV=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],YV={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},qV={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"https://github.com/maplibre/maplibre-gl-js/issues/1235",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},HV={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},VV={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},$V={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},ZV={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},XV={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,doc:"The direction of the light source(s) used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"https://github.com/maplibre/maplibre-gl-js/issues/5665",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,doc:"The altitude of the light source(s) used to generate the hillshading with 0 as sunset and 90 as noon. Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!1,"sdk-support":{"basic functionality":{js:"https://github.com/maplibre/maplibre-gl-js/issues/5665",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"},multidirectional:{js:"https://github.com/maplibre/maplibre-gl-js/issues/5665",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",doc:"The shading color of areas that face away from the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"https://github.com/maplibre/maplibre-gl-js/issues/5665",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source(s). Only when `hillshade-method` is set to `multidirectional` can you specify multiple light sources.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},multidirectional:{js:"https://github.com/maplibre/maplibre-gl-js/issues/5665",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{doc:"The legacy hillshade method."},basic:{doc:"Basic hillshade. Uses a simple physics model where the reflected light intensity is proportional to the cosine of the angle between the incident light and the surface normal. Similar to GDAL's `gdaldem` default algorithm."},combined:{doc:"Hillshade algorithm whose intensity scales with slope. Similar to GDAL's `gdaldem` with `-combined` option."},igor:{doc:"Hillshade algorithm which tries to minimize effects on other map features beneath. Similar to GDAL's `gdaldem` with `-igor` option."},multidirectional:{doc:"Hillshade with multiple illumination directions. Uses the basic hillshade model with multiple independent light sources."}},default:"standard",doc:"The hillshade algorithm to use, one of `standard`, `basic`, `combined`, `igor`, or `multidirectional`. ![image](assets/hillshade_methods.png)","sdk-support":{"basic functionality":{js:"https://github.com/maplibre/maplibre-gl-js/issues/5665",android:"https://github.com/maplibre/maplibre-native/issues/3396",ios:"https://github.com/maplibre/maplibre-native/issues/3396"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},JV={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},e$={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},t$={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},oa={$version:pV,$root:mV,sources:gV,source:yV,source_vector:vV,source_raster:CV,source_raster_dem:_V,source_geojson:bV,source_video:xV,source_image:MV,layer:wV,layout:SV,layout_background:EV,layout_fill:BV,layout_circle:OV,layout_heatmap:IV,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:TV,layout_symbol:kV,layout_raster:DV,layout_hillshade:RV,"layout_color-relief":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},"property-type":"constant"}},filter:PV,filter_operator:KV,geometry_type:UV,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:LV,expression:FV,expression_name:zV,light:jV,sky:NV,terrain:GV,projection:WV,paint:QV,paint_fill:YV,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:qV,paint_circle:HV,paint_heatmap:VV,paint_symbol:$V,paint_raster:ZV,paint_hillshade:XV,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the color-relief will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"https://github.com/maplibre/maplibre-gl-js/issues/5666",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",doc:'Defines the color of each pixel based on its elevation. Should be an expression that uses `["elevation"]` as input.',example:["interpolate",["linear"],["elevation"],0,"black",8849,"white"],transition:!1,"sdk-support":{"basic functionality":{js:"https://github.com/maplibre/maplibre-gl-js/issues/5666",android:"https://github.com/maplibre/maplibre-native/issues/3408",ios:"https://github.com/maplibre/maplibre-native/issues/3408"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:JV,transition:e$,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:t$};var xx={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
 */var n$=xx.exports,wI;function i$(){return wI||(wI=1,function(n,e){(function(t,i){n.exports=i()})(n$,function(){var t={},i={};function r(l,o,p){if(i[l]=p,l==="index"){var C="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",w={};return i.shared(w),i.index(t,w),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),t}}r("shared",["exports"],function(l){function o(h,u,c,y){return new(c||(c=Promise))(function(M,R){function P(ie){try{H(y.next(ie))}catch(ue){R(ue)}}function N(ie){try{H(y.throw(ie))}catch(ue){R(ue)}}function H(ie){var ue;ie.done?M(ie.value):(ue=ie.value,ue instanceof c?ue:new c(function(ve){ve(ue)})).then(P,N)}H((y=y.apply(h,u||[])).next())})}function p(h,u){this.x=h,this.y=u}function C(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var w,O;typeof SuppressedError=="function"&&SuppressedError,p.prototype={clone(){return new p(this.x,this.y)},add(h){return this.clone()._add(h)},sub(h){return this.clone()._sub(h)},multByPoint(h){return this.clone()._multByPoint(h)},divByPoint(h){return this.clone()._divByPoint(h)},mult(h){return this.clone()._mult(h)},div(h){return this.clone()._div(h)},rotate(h){return this.clone()._rotate(h)},rotateAround(h,u){return this.clone()._rotateAround(h,u)},matMult(h){return this.clone()._matMult(h)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(h){return this.x===h.x&&this.y===h.y},dist(h){return Math.sqrt(this.distSqr(h))},distSqr(h){const u=h.x-this.x,c=h.y-this.y;return u*u+c*c},angle(){return Math.atan2(this.y,this.x)},angleTo(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith(h){return this.angleWithSep(h.x,h.y)},angleWithSep(h,u){return Math.atan2(this.x*u-this.y*h,this.x*h+this.y*u)},_matMult(h){const u=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=u,this},_add(h){return this.x+=h.x,this.y+=h.y,this},_sub(h){return this.x-=h.x,this.y-=h.y,this},_mult(h){return this.x*=h,this.y*=h,this},_div(h){return this.x/=h,this.y/=h,this},_multByPoint(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint(h){return this.x/=h.x,this.y/=h.y,this},_unit(){return this._div(this.mag()),this},_perp(){const h=this.y;return this.y=this.x,this.x=-h,this},_rotate(h){const u=Math.cos(h),c=Math.sin(h),y=c*this.x+u*this.y;return this.x=u*this.x-c*this.y,this.y=y,this},_rotateAround(h,u){const c=Math.cos(h),y=Math.sin(h),M=u.y+y*(this.x-u.x)+c*(this.y-u.y);return this.x=u.x+c*(this.x-u.x)-y*(this.y-u.y),this.y=M,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:p},p.convert=function(h){if(h instanceof p)return h;if(Array.isArray(h))return new p(+h[0],+h[1]);if(h.x!==void 0&&h.y!==void 0)return new p(+h.x,+h.y);throw new Error("Expected [x, y] or {x, y} point format")};var U=function(){if(O)return w;function h(u,c,y,M){this.cx=3*u,this.bx=3*(y-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(M-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=c,this.p2x=y,this.p2y=M}return O=1,w=h,h.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,c){if(c===void 0&&(c=1e-6),u<0)return 0;if(u>1)return 1;for(var y=u,M=0;M<8;M++){var R=this.sampleCurveX(y)-u;if(Math.abs(R)<c)return y;var P=this.sampleCurveDerivativeX(y);if(Math.abs(P)<1e-6)break;y-=R/P}var N=0,H=1;for(y=u,M=0;M<20&&(R=this.sampleCurveX(y),!(Math.abs(R-u)<c));M++)u>R?N=y:H=y,y=.5*(H-N)+N;return y},solve:function(u,c){return this.sampleCurveY(this.solveCurveX(u,c))}},w}(),K=C(U);let j,W;function Y(){return j==null&&(j=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),j}function te(){if(W==null&&(W=!1,Y())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let y=0;y<5*5;y++){const M=4*y;u.fillStyle=`rgb(${M},${M+1},${M+2})`,u.fillRect(y%5,Math.floor(y/5),1,1)}const c=u.getImageData(0,0,5,5).data;for(let y=0;y<5*5*4;y++)if(y%4!=3&&c[y]!==y){W=!0;break}}}return W||!1}var J=1e-6,oe=typeof Float32Array<"u"?Float32Array:Array;function ne(){var h=new oe(9);return oe!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function $(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ae(){var h=new oe(3);return oe!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function G(h){var u=h[0],c=h[1],y=h[2];return Math.sqrt(u*u+c*c+y*y)}function ce(h,u,c){var y=new oe(3);return y[0]=h,y[1]=u,y[2]=c,y}function ge(h,u,c){return h[0]=u[0]+c[0],h[1]=u[1]+c[1],h[2]=u[2]+c[2],h}function ye(h,u,c){return h[0]=u[0]*c,h[1]=u[1]*c,h[2]=u[2]*c,h}function we(h,u,c){var y=u[0],M=u[1],R=u[2],P=c[0],N=c[1],H=c[2];return h[0]=M*H-R*N,h[1]=R*P-y*H,h[2]=y*N-M*P,h}var Oe,Se=G;function Ve(h,u,c){var y=u[0],M=u[1],R=u[2],P=u[3];return h[0]=c[0]*y+c[4]*M+c[8]*R+c[12]*P,h[1]=c[1]*y+c[5]*M+c[9]*R+c[13]*P,h[2]=c[2]*y+c[6]*M+c[10]*R+c[14]*P,h[3]=c[3]*y+c[7]*M+c[11]*R+c[15]*P,h}function xe(){var h=new oe(4);return oe!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function ze(h,u,c,y){var M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",R=Math.PI/360;u*=R,y*=R,c*=R;var P=Math.sin(u),N=Math.cos(u),H=Math.sin(c),ie=Math.cos(c),ue=Math.sin(y),ve=Math.cos(y);switch(M){case"xyz":h[0]=P*ie*ve+N*H*ue,h[1]=N*H*ve-P*ie*ue,h[2]=N*ie*ue+P*H*ve,h[3]=N*ie*ve-P*H*ue;break;case"xzy":h[0]=P*ie*ve-N*H*ue,h[1]=N*H*ve-P*ie*ue,h[2]=N*ie*ue+P*H*ve,h[3]=N*ie*ve+P*H*ue;break;case"yxz":h[0]=P*ie*ve+N*H*ue,h[1]=N*H*ve-P*ie*ue,h[2]=N*ie*ue-P*H*ve,h[3]=N*ie*ve+P*H*ue;break;case"yzx":h[0]=P*ie*ve+N*H*ue,h[1]=N*H*ve+P*ie*ue,h[2]=N*ie*ue-P*H*ve,h[3]=N*ie*ve-P*H*ue;break;case"zxy":h[0]=P*ie*ve-N*H*ue,h[1]=N*H*ve+P*ie*ue,h[2]=N*ie*ue+P*H*ve,h[3]=N*ie*ve-P*H*ue;break;case"zyx":h[0]=P*ie*ve-N*H*ue,h[1]=N*H*ve+P*ie*ue,h[2]=N*ie*ue-P*H*ve,h[3]=N*ie*ve+P*H*ue;break;default:throw new Error("Unknown angle order "+M)}return h}function st(){var h=new oe(2);return oe!=Float32Array&&(h[0]=0,h[1]=0),h}function Ct(h,u){var c=new oe(2);return c[0]=h,c[1]=u,c}ae(),Oe=new oe(4),oe!=Float32Array&&(Oe[0]=0,Oe[1]=0,Oe[2]=0,Oe[3]=0),ae(),ce(1,0,0),ce(0,1,0),xe(),xe(),ne(),st();const nt=8192;function be(h,u,c){return u*(nt/(h.tileSize*Math.pow(2,c-h.tileID.overscaledZ)))}function Ne(h,u){return(h%u+u)%u}function tt(h,u,c){return h*(1-c)+u*c}function lt(h){if(h<=0)return 0;if(h>=1)return 1;const u=h*h,c=u*h;return 4*(h<.5?c:3*(h-u)+c-.75)}function kt(h,u,c,y){const M=new K(h,u,c,y);return R=>M.solve(R)}const gt=kt(.25,.1,.25,1);function St(h,u,c){return Math.min(c,Math.max(u,h))}function Ut(h,u,c){const y=c-u,M=((h-u)%y+y)%y+u;return M===u?c:M}function Fe(h,...u){for(const c of u)for(const y in c)h[y]=c[y];return h}let Ke=1;function Re(h,u,c){const y={};for(const M in h)y[M]=u.call(this,h[M],M,h);return y}function He(h,u,c){const y={};for(const M in h)u.call(this,h[M],M,h)&&(y[M]=h[M]);return y}function bt(h){return Array.isArray(h)?h.map(bt):typeof h=="object"&&h?Re(h,bt):h}const _t={};function Ot(h){_t[h]||(typeof console<"u"&&console.warn(h),_t[h]=!0)}function qt(h,u,c){return(c.y-h.y)*(u.x-h.x)>(u.y-h.y)*(c.x-h.x)}function Kt(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let on=null;function Jn(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const Wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function $n(h,u,c,y,M){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const R=new VideoFrame(h,{timestamp:0});try{const P=R?.format;if(!P||!P.startsWith("BGR")&&!P.startsWith("RGB"))throw new Error(`Unrecognized format ${P}`);const N=P.startsWith("BGR"),H=new Uint8ClampedArray(y*M*4);if(yield R.copyTo(H,function(ie,ue,ve,Pe,Qe){const qe=4*Math.max(-ue,0),et=(Math.max(0,ve)-ve)*Pe*4+qe,At=4*Pe,Mt=Math.max(0,ue),Qt=Math.max(0,ve);return{rect:{x:Mt,y:Qt,width:Math.min(ie.width,ue+Pe)-Mt,height:Math.min(ie.height,ve+Qe)-Qt},layout:[{offset:et,stride:At}]}}(h,u,c,y,M)),N)for(let ie=0;ie<H.length;ie+=4){const ue=H[ie];H[ie]=H[ie+2],H[ie+2]=ue}return H}finally{R.close()}})}let On,Bn;function In(h,u,c,y){return h.addEventListener(u,c,y),{unsubscribe:()=>{h.removeEventListener(u,c,y)}}}function Oi(h){return h*Math.PI/180}function ei(h){return h/Math.PI*180}const Kn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},je={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},de="AbortError";function re(){return new Error(de)}const le={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function pe(h){return le.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const Te="global-dispatcher";class We extends Error{constructor(u,c,y,M){super(`AJAXError: ${c} (${u}): ${y}`),this.status=u,this.statusText=c,this.url=y,this.body=M}}const dt=()=>Kt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ye=function(h,u){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const y=pe(h.url);if(y)return y(h,u);if(Kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:Te},u)}if(!(/^file:/.test(c=h.url)||/^file:/.test(dt())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(y,M){return o(this,void 0,void 0,function*(){const R=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:dt(),signal:M.signal});let P,N;y.type!=="json"||R.headers.has("Accept")||R.headers.set("Accept","application/json");try{P=yield fetch(R)}catch(ie){throw new We(0,ie.message,y.url,new Blob)}if(!P.ok){const ie=yield P.blob();throw new We(P.status,P.statusText,y.url,ie)}N=y.type==="arrayBuffer"||y.type==="image"?P.arrayBuffer():y.type==="json"?P.json():P.text();const H=yield N;if(M.signal.aborted)throw re();return{data:H,cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}})}(h,u);if(Kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:Te},u)}var c;return function(y,M){return new Promise((R,P)=>{var N;const H=new XMLHttpRequest;H.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(H.responseType="arraybuffer");for(const ie in y.headers)H.setRequestHeader(ie,y.headers[ie]);y.type==="json"&&(H.responseType="text",!((N=y.headers)===null||N===void 0)&&N.Accept||H.setRequestHeader("Accept","application/json")),H.withCredentials=y.credentials==="include",H.onerror=()=>{P(new Error(H.statusText))},H.onload=()=>{if(!M.signal.aborted)if((H.status>=200&&H.status<300||H.status===0)&&H.response!==null){let ie=H.response;if(y.type==="json")try{ie=JSON.parse(H.response)}catch(ue){return void P(ue)}R({data:ie,cacheControl:H.getResponseHeader("Cache-Control"),expires:H.getResponseHeader("Expires")})}else{const ie=new Blob([H.response],{type:H.getResponseHeader("Content-Type")});P(new We(H.status,H.statusText,y.url,ie))}},M.signal.addEventListener("abort",()=>{H.abort(),P(re())}),H.send(y.body)})}(h,u)};function De(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const u=new URL(h),c=window.location;return u.protocol===c.protocol&&u.host===c.host}function Ze(h,u,c){c[h]&&c[h].indexOf(u)!==-1||(c[h]=c[h]||[],c[h].push(u))}function g(h,u,c){if(c&&c[h]){const y=c[h].indexOf(u);y!==-1&&c[h].splice(y,1)}}class mt{constructor(u,c={}){Fe(this,c),this.type=u}}class ht extends mt{constructor(u,c={}){super("error",Fe({error:u},c))}}class Tt{on(u,c){return this._listeners=this._listeners||{},Ze(u,c,this._listeners),{unsubscribe:()=>{this.off(u,c)}}}off(u,c){return g(u,c,this._listeners),g(u,c,this._oneTimeListeners),this}once(u,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},Ze(u,c,this._oneTimeListeners),this):new Promise(y=>this.once(u,y))}fire(u,c){typeof u=="string"&&(u=new mt(u,c||{}));const y=u.type;if(this.listens(y)){u.target=this;const M=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const N of M)N.call(this,u);const R=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const N of R)g(y,N,this._oneTimeListeners),N.call(this,u);const P=this._eventedParent;P&&(Fe(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),P.fire(u))}else u instanceof ht&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,c){return this._eventedParent=u,this._eventedParentData=c,this}}var it={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const en=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Dn(h,u){const c={};for(const y in h)y!=="ref"&&(c[y]=h[y]);return en.forEach(y=>{y in u&&(c[y]=u[y])}),c}function Mn(h,u){if(Array.isArray(h)){if(!Array.isArray(u)||h.length!==u.length)return!1;for(let c=0;c<h.length;c++)if(!Mn(h[c],u[c]))return!1;return!0}if(typeof h=="object"&&h!==null&&u!==null){if(typeof u!="object"||Object.keys(h).length!==Object.keys(u).length)return!1;for(const c in h)if(!Mn(h[c],u[c]))return!1;return!0}return h===u}function ii(h,u){h.push(u)}function Wn(h,u,c){ii(c,{command:"addSource",args:[h,u[h]]})}function qi(h,u,c){ii(u,{command:"removeSource",args:[h]}),c[h]=!0}function er(h,u,c,y){qi(h,c,y),Wn(h,u,c)}function Ei(h,u,c){let y;for(y in h[c])if(Object.prototype.hasOwnProperty.call(h[c],y)&&y!=="data"&&!Mn(h[c][y],u[c][y]))return!1;for(y in u[c])if(Object.prototype.hasOwnProperty.call(u[c],y)&&y!=="data"&&!Mn(h[c][y],u[c][y]))return!1;return!0}function hi(h,u,c,y,M,R){h=h||{},u=u||{};for(const P in h)Object.prototype.hasOwnProperty.call(h,P)&&(Mn(h[P],u[P])||c.push({command:R,args:[y,P,u[P],M]}));for(const P in u)Object.prototype.hasOwnProperty.call(u,P)&&!Object.prototype.hasOwnProperty.call(h,P)&&(Mn(h[P],u[P])||c.push({command:R,args:[y,P,u[P],M]}))}function ti(h){return h.id}function Wi(h,u){return h[u.id]=u,h}class wn{constructor(u,c,y,M){this.message=(u?`${u}: `:"")+y,M&&(this.identifier=M),c!=null&&c.__line__&&(this.line=c.__line__)}}function uo(h,...u){for(const c of u)for(const y in c)h[y]=c[y];return h}class Hi extends Error{constructor(u,c){super(c),this.message=c,this.key=u}}class ma{constructor(u,c=[]){this.parent=u,this.bindings={};for(const[y,M]of c)this.bindings[y]=M}concat(u){return new ma(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const To={kind:"null"},Zn={kind:"number"},lr={kind:"string"},zi={kind:"boolean"},vr={kind:"color"},Fa={kind:"projectionDefinition"},Tr={kind:"object"},ji={kind:"value"},gl={kind:"collator"},ka={kind:"formatted"},wo={kind:"padding"},Xa={kind:"colorArray"},Il={kind:"numberArray"},Ao={kind:"resolvedImage"},Wu={kind:"variableAnchorOffsetCollection"};function Da(h,u){return{kind:"array",itemType:h,N:u}}function Vi(h){if(h.kind==="array"){const u=Vi(h.itemType);return typeof h.N=="number"?`array<${u}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${u}>`}return h.kind}const Mi=[To,Zn,lr,zi,vr,Fa,ka,Tr,Da(ji),wo,Il,Xa,Ao,Wu];function us(h,u){if(u.kind==="error")return null;if(h.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!us(h.itemType,u.itemType))&&(typeof h.N!="number"||h.N===u.N))return null}else{if(h.kind===u.kind)return null;if(h.kind==="value"){for(const c of Mi)if(!us(c,u))return null}}return`Expected ${Vi(h)} but found ${Vi(u)} instead.`}function Ma(h,u){return u.some(c=>c.kind===h.kind)}function Vo(h,u){return u.some(c=>c==="null"?h===null:c==="array"?Array.isArray(h):c==="object"?h&&!Array.isArray(h)&&typeof h=="object":c===typeof h)}function $e(h,u){return h.kind==="array"&&u.kind==="array"?h.itemType.kind===u.itemType.kind&&typeof h.N=="number":h.kind===u.kind}const Et=.96422,xn=.82521,Gn=4/29,rn=6/29,si=3*rn*rn,eo=rn*rn*rn,So=Math.PI/180,As=180/Math.PI;function Ls(h){return(h%=360)<0&&(h+=360),h}function Qu([h,u,c,y]){let M,R;const P=RA((.2225045*(h=Qi(h))+.7168786*(u=Qi(u))+.0606169*(c=Qi(c)))/1);h===u&&u===c?M=R=P:(M=RA((.4360747*h+.3850649*u+.1430804*c)/Et),R=RA((.0139322*h+.0971045*u+.7141733*c)/xn));const N=116*P-16;return[N<0?0:N,500*(M-P),200*(P-R),y]}function Qi(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function RA(h){return h>eo?Math.pow(h,1/3):h/si+Gn}function _u([h,u,c,y]){let M=(h+16)/116,R=isNaN(u)?M:M+u/500,P=isNaN(c)?M:M-c/200;return M=1*Ss(M),R=Et*Ss(R),P=xn*Ss(P),[yl(3.1338561*R-1.6168667*M-.4906146*P),yl(-.9787684*R+1.9161415*M+.033454*P),yl(.0719453*R-.2289914*M+1.4052427*P),y]}function yl(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function Ss(h){return h>rn?h*h*h:si*(h-Gn)}const xc=Object.hasOwn||function(h,u){return Object.prototype.hasOwnProperty.call(h,u)};function Ys(h,u){return xc(h,u)?h[u]:void 0}function $o(h){return parseInt(h.padEnd(2,h),16)/255}function ko(h,u){return dr(u?h/100:h,0,1)}function dr(h,u,c){return Math.min(Math.max(u,h),c)}function Kl(h){return!h.some(Number.isNaN)}const ga={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ul(h,u,c){return h+c*(u-h)}function bu(h,u,c){return h.map((y,M)=>Ul(y,u[M],c))}class xr{constructor(u,c,y,M=1,R=!0){this.r=u,this.g=c,this.b=y,this.a=M,R||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[u,c,y,M]))}static parse(u){if(u instanceof xr)return u;if(typeof u!="string")return;const c=function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=Ys(ga,y);if(M){const[P,N,H]=M;return[P/255,N/255,H/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const P=y.length<6?1:2;let N=1;return[$o(y.slice(N,N+=P)),$o(y.slice(N,N+=P)),$o(y.slice(N,N+=P)),$o(y.slice(N,N+P)||"ff")]}if(y.startsWith("rgb")){const P=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[N,H,ie,ue,ve,Pe,Qe,qe,et,At,Mt,Qt]=P,Dt=[ue||" ",Qe||" ",At].join("");if(Dt==="  "||Dt==="  /"||Dt===",,"||Dt===",,,"){const jt=[ie,Pe,et].join(""),ln=jt==="%%%"?100:jt===""?255:0;if(ln){const Cn=[dr(+H/ln,0,1),dr(+ve/ln,0,1),dr(+qe/ln,0,1),Mt?ko(+Mt,Qt):1];if(Kl(Cn))return Cn}}return}}const R=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(R){const[P,N,H,ie,ue,ve,Pe,Qe,qe]=R,et=[H||" ",ue||" ",Pe].join("");if(et==="  "||et==="  /"||et===",,"||et===",,,"){const At=[+N,dr(+ie,0,100),dr(+ve,0,100),Qe?ko(+Qe,qe):1];if(Kl(At))return function([Mt,Qt,Dt,jt]){function ln(Cn){const Un=(Cn+Mt/30)%12,pi=Qt*Math.min(Dt,1-Dt);return Dt-pi*Math.max(-1,Math.min(Un-3,9-Un,1))}return Mt=Ls(Mt),Qt/=100,Dt/=100,[ln(0),ln(8),ln(4),jt]}(At)}}}(u);return c?new xr(...c,!1):void 0}get rgb(){const{r:u,g:c,b:y,a:M}=this,R=M||1/0;return this.overwriteGetter("rgb",[u/R,c/R,y/R,M])}get hcl(){return this.overwriteGetter("hcl",function(u){const[c,y,M,R]=Qu(u),P=Math.sqrt(y*y+M*M);return[Math.round(1e4*P)?Ls(Math.atan2(M,y)*As):NaN,P,c,R]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Qu(this.rgb))}overwriteGetter(u,c){return Object.defineProperty(this,u,{value:c}),c}toString(){const[u,c,y,M]=this.rgb;return`rgba(${[u,c,y].map(R=>Math.round(255*R)).join(",")},${M})`}static interpolate(u,c,y,M="rgb"){switch(M){case"rgb":{const[R,P,N,H]=bu(u.rgb,c.rgb,y);return new xr(R,P,N,H,!1)}case"hcl":{const[R,P,N,H]=u.hcl,[ie,ue,ve,Pe]=c.hcl;let Qe,qe;if(isNaN(R)||isNaN(ie))isNaN(R)?isNaN(ie)?Qe=NaN:(Qe=ie,N!==1&&N!==0||(qe=ue)):(Qe=R,ve!==1&&ve!==0||(qe=P));else{let Dt=ie-R;ie>R&&Dt>180?Dt-=360:ie<R&&R-ie>180&&(Dt+=360),Qe=R+y*Dt}const[et,At,Mt,Qt]=function([Dt,jt,ln,Cn]){return Dt=isNaN(Dt)?0:Dt*So,_u([ln,Math.cos(Dt)*jt,Math.sin(Dt)*jt,Cn])}([Qe,qe??Ul(P,ue,y),Ul(N,ve,y),Ul(H,Pe,y)]);return new xr(et,At,Mt,Qt,!1)}case"lab":{const[R,P,N,H]=_u(bu(u.lab,c.lab,y));return new xr(R,P,N,H,!1)}}}}xr.black=new xr(0,0,0,1),xr.white=new xr(1,1,1,1),xr.transparent=new xr(0,0,0,0),xr.red=new xr(1,0,0,1);class iu{constructor(u,c,y){this.sensitivity=u?c?"variant":"case":c?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,c){return this.collator.compare(u,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const cA=["bottom","center","top"];class jo{constructor(u,c,y,M,R,P){this.text=u,this.image=c,this.scale=y,this.fontStack=M,this.textColor=R,this.verticalAlign=P}}class Eo{constructor(u){this.sections=u}static fromString(u){return new Eo([new jo(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof Eo?u:Eo.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class za{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof za)return u;if(typeof u=="number")return new za([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const c of u)if(typeof c!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new za(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,c,y){return new za(bu(u.values,c.values,y))}}class wa{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof wa)return u;if(typeof u=="number")return new wa([u]);if(Array.isArray(u)){for(const c of u)if(typeof c!="number")return;return new wa(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,c,y){return new wa(bu(u.values,c.values,y))}}class aa{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof aa)return u;if(typeof u=="string"){const y=xr.parse(u);return y?new aa([y]):void 0}if(!Array.isArray(u))return;const c=[];for(const y of u){if(typeof y!="string")return;const M=xr.parse(y);if(!M)return;c.push(M)}return new aa(c)}toString(){return JSON.stringify(this.values)}static interpolate(u,c,y,M="rgb"){const R=[];if(u.values.length!=c.values.length)throw new Error(`colorArray: Arrays have mismatched length (${u.values.length} vs. ${c.values.length}), cannot interpolate.`);for(let P=0;P<u.values.length;P++)R.push(xr.interpolate(u.values[P],c.values[P],y,M));return new aa(R)}}class Dr extends Error{constructor(u){super(u),this.name="RuntimeError"}toJSON(){return this.message}}const ru=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ja{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof ja)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let c=0;c<u.length;c+=2){const y=u[c],M=u[c+1];if(typeof y!="string"||!ru.has(y)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new ja(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,c,y){const M=u.values,R=c.values;if(M.length!==R.length)throw new Dr(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${c.toString()}`);const P=[];for(let N=0;N<M.length;N+=2){if(M[N]!==R[N])throw new Dr(`Cannot interpolate values containing mismatched anchors. from[${N}]: ${M[N]}, to[${N}]: ${R[N]}`);P.push(M[N]);const[H,ie]=M[N+1],[ue,ve]=R[N+1];P.push([Ul(H,ue,y),Ul(ie,ve,y)])}return new ja(P)}}class Ja{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Ja({name:u,available:!1}):null}}class ya{constructor(u,c,y){this.from=u,this.to=c,this.transition=y}static interpolate(u,c,y){return new ya(u,c,y)}static parse(u){return u instanceof ya?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new ya(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new ya(u.from,u.to,u.transition):typeof u=="string"?new ya(u,u,1):void 0}}function Rr(h,u,c,y){return typeof h=="number"&&h>=0&&h<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof c=="number"&&c>=0&&c<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[h,u,c,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[h,u,c,y]:[h,u,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function vl(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof ya||h instanceof xr||h instanceof iu||h instanceof Eo||h instanceof za||h instanceof wa||h instanceof aa||h instanceof ja||h instanceof Ja)return!0;if(Array.isArray(h)){for(const u of h)if(!vl(u))return!1;return!0}if(typeof h=="object"){for(const u in h)if(!vl(h[u]))return!1;return!0}return!1}function Zi(h){if(h===null)return To;if(typeof h=="string")return lr;if(typeof h=="boolean")return zi;if(typeof h=="number")return Zn;if(h instanceof xr)return vr;if(h instanceof ya)return Fa;if(h instanceof iu)return gl;if(h instanceof Eo)return ka;if(h instanceof za)return wo;if(h instanceof wa)return Il;if(h instanceof aa)return Xa;if(h instanceof ja)return Wu;if(h instanceof Ja)return Ao;if(Array.isArray(h)){const u=h.length;let c;for(const y of h){const M=Zi(y);if(c){if(c===M)continue;c=ji;break}c=M}return Da(c||ji,u)}return Tr}function wi(h){const u=typeof h;return h===null?"":u==="string"||u==="number"||u==="boolean"?String(h):h instanceof xr||h instanceof ya||h instanceof Eo||h instanceof za||h instanceof wa||h instanceof aa||h instanceof ja||h instanceof Ja?h.toString():JSON.stringify(h)}class Yr{constructor(u,c){this.type=u,this.value=c}static parse(u,c){if(u.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!vl(u[1]))return c.error("invalid value");const y=u[1];let M=Zi(y);const R=c.expectedType;return M.kind!=="array"||M.N!==0||!R||R.kind!=="array"||typeof R.N=="number"&&R.N!==0||(M=R),new Yr(M,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ee={string:lr,number:Zn,boolean:zi,object:Tr};class Be{constructor(u,c){this.type=u,this.args=c}static parse(u,c){if(u.length<2)return c.error("Expected at least one argument.");let y,M=1;const R=u[0];if(R==="array"){let N,H;if(u.length>2){const ie=u[1];if(typeof ie!="string"||!(ie in ee)||ie==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);N=ee[ie],M++}else N=ji;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return c.error('The length argument to "array" must be a positive integer literal',2);H=u[2],M++}y=Da(N,H)}else{if(!ee[R])throw new Error(`Types doesn't contain name = ${R}`);y=ee[R]}const P=[];for(;M<u.length;M++){const N=c.parse(u[M],M,ji);if(!N)return null;P.push(N)}return new Be(y,P)}evaluate(u){for(let c=0;c<this.args.length;c++){const y=this.args[c].evaluate(u);if(!us(this.type,Zi(y)))return y;if(c===this.args.length-1)throw new Dr(`Expected value to be of type ${Vi(this.type)}, but found ${Vi(Zi(y))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const at={"to-boolean":zi,"to-color":vr,"to-number":Zn,"to-string":lr};class Gt{constructor(u,c){this.type=u,this.args=c}static parse(u,c){if(u.length<2)return c.error("Expected at least one argument.");const y=u[0];if(!at[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&u.length!==2)return c.error("Expected one argument.");const M=at[y],R=[];for(let P=1;P<u.length;P++){const N=c.parse(u[P],P,ji);if(!N)return null;R.push(N)}return new Gt(M,R)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let c,y;for(const M of this.args){if(c=M.evaluate(u),y=null,c instanceof xr)return c;if(typeof c=="string"){const R=u.parseColor(c);if(R)return R}else if(Array.isArray(c)&&(y=c.length<3||c.length>4?`Invalid rgba value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:Rr(c[0],c[1],c[2],c[3]),!y))return new xr(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Dr(y||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const y of this.args){c=y.evaluate(u);const M=za.parse(c);if(M)return M}throw new Dr(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"numberArray":{let c;for(const y of this.args){c=y.evaluate(u);const M=wa.parse(c);if(M)return M}throw new Dr(`Could not parse numberArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"colorArray":{let c;for(const y of this.args){c=y.evaluate(u);const M=aa.parse(c);if(M)return M}throw new Dr(`Could not parse colorArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const y of this.args){c=y.evaluate(u);const M=ja.parse(c);if(M)return M}throw new Dr(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const y of this.args){if(c=y.evaluate(u),c===null)return 0;const M=Number(c);if(!isNaN(M))return M}throw new Dr(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return Eo.fromString(wi(this.args[0].evaluate(u)));case"resolvedImage":return Ja.fromString(wi(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return wi(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const Si=["Unknown","Point","LineString","Polygon"];class Xn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Si[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let c=this._parseColorCache.get(u);return c||(c=xr.parse(u),this._parseColorCache.set(u,c)),c}}class $i{constructor(u,c,y=[],M,R=new ma,P=[]){this.registry=u,this.path=y,this.key=y.map(N=>`[${N}]`).join(""),this.scope=R,this.errors=P,this.expectedType=M,this._isConstant=c}parse(u,c,y,M,R={}){return c?this.concat(c,y,M)._parse(u,R):this._parse(u,R)}_parse(u,c){function y(M,R,P){return P==="assert"?new Be(R,[M]):P==="coerce"?new Gt(R,[M]):M}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=u[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const R=this.registry[M];if(R){let P=R.parse(u,this);if(!P)return null;if(this.expectedType){const N=this.expectedType,H=P.type;if(N.kind!=="string"&&N.kind!=="number"&&N.kind!=="boolean"&&N.kind!=="object"&&N.kind!=="array"||H.kind!=="value"){if(N.kind==="projectionDefinition"&&["string","array"].includes(H.kind)||["color","formatted","resolvedImage"].includes(N.kind)&&["value","string"].includes(H.kind)||["padding","numberArray"].includes(N.kind)&&["value","number","array"].includes(H.kind)||N.kind==="colorArray"&&["value","string","array"].includes(H.kind)||N.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(H.kind))P=y(P,N,c.typeAnnotation||"coerce");else if(this.checkSubtype(N,H))return null}else P=y(P,N,c.typeAnnotation||"assert")}if(!(P instanceof Yr)&&P.type.kind!=="resolvedImage"&&this._isConstant(P)){const N=new Xn;try{P=new Yr(P.type,P.evaluate(N))}catch(H){return this.error(H.message),null}}return P}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,c,y){const M=typeof u=="number"?this.path.concat(u):this.path,R=y?this.scope.concat(y):this.scope;return new $i(this.registry,this._isConstant,M,c||null,R,this.errors)}error(u,...c){const y=`${this.key}${c.map(M=>`[${M}]`).join("")}`;this.errors.push(new Hi(y,u))}checkSubtype(u,c){const y=us(u,c);return y&&this.error(y),y}}class or{constructor(u,c){this.type=c.type,this.bindings=[].concat(u),this.result=c}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const c of this.bindings)u(c[1]);u(this.result)}static parse(u,c){if(u.length<4)return c.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const y=[];for(let R=1;R<u.length-1;R+=2){const P=u[R];if(typeof P!="string")return c.error(`Expected string, but found ${typeof P} instead.`,R);if(/[^a-zA-Z0-9_]/.test(P))return c.error("Variable names must contain only alphanumeric characters or '_'.",R);const N=c.parse(u[R+1],R+1);if(!N)return null;y.push([P,N])}const M=c.parse(u[u.length-1],u.length-1,c.expectedType,y);return M?new or(y,M):null}outputDefined(){return this.result.outputDefined()}}class Ri{constructor(u,c){this.type=c.type,this.name=u,this.boundExpression=c}static parse(u,c){if(u.length!==2||typeof u[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const y=u[1];return c.scope.has(y)?new Ri(y,c.scope.get(y)):c.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Xi{constructor(u,c,y){this.type=u,this.index=c,this.input=y}static parse(u,c){if(u.length!==3)return c.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const y=c.parse(u[1],1,Zn),M=c.parse(u[2],2,Da(c.expectedType||ji));return y&&M?new Xi(M.type.itemType,y,M):null}evaluate(u){const c=this.index.evaluate(u),y=this.input.evaluate(u);if(c<0)throw new Dr(`Array index out of bounds: ${c} < 0.`);if(c>=y.length)throw new Dr(`Array index out of bounds: ${c} > ${y.length-1}.`);if(c!==Math.floor(c))throw new Dr(`Array index must be an integer, but found ${c} instead.`);return y[c]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class to{constructor(u,c){this.type=zi,this.needle=u,this.haystack=c}static parse(u,c){if(u.length!==3)return c.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const y=c.parse(u[1],1,ji),M=c.parse(u[2],2,ji);return y&&M?Ma(y.type,[zi,lr,Zn,To,ji])?new to(y,M):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(y.type)} instead`):null}evaluate(u){const c=this.needle.evaluate(u),y=this.haystack.evaluate(u);if(!y)return!1;if(!Vo(c,["boolean","string","number","null"]))throw new Dr(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(Zi(c))} instead.`);if(!Vo(y,["string","array"]))throw new Dr(`Expected second argument to be of type array or string, but found ${Vi(Zi(y))} instead.`);return y.indexOf(c)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class co{constructor(u,c,y){this.type=Zn,this.needle=u,this.haystack=c,this.fromIndex=y}static parse(u,c){if(u.length<=2||u.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const y=c.parse(u[1],1,ji),M=c.parse(u[2],2,ji);if(!y||!M)return null;if(!Ma(y.type,[zi,lr,Zn,To,ji]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(y.type)} instead`);if(u.length===4){const R=c.parse(u[3],3,Zn);return R?new co(y,M,R):null}return new co(y,M)}evaluate(u){const c=this.needle.evaluate(u),y=this.haystack.evaluate(u);if(!Vo(c,["boolean","string","number","null"]))throw new Dr(`Expected first argument to be of type boolean, string, number or null, but found ${Vi(Zi(c))} instead.`);let M;if(this.fromIndex&&(M=this.fromIndex.evaluate(u)),Vo(y,["string"])){const R=y.indexOf(c,M);return R===-1?-1:[...y.slice(0,R)].length}if(Vo(y,["array"]))return y.indexOf(c,M);throw new Dr(`Expected second argument to be of type array or string, but found ${Vi(Zi(y))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class Ar{constructor(u,c,y,M,R,P){this.inputType=u,this.type=c,this.input=y,this.cases=M,this.outputs=R,this.otherwise=P}static parse(u,c){if(u.length<5)return c.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return c.error("Expected an even number of arguments.");let y,M;c.expectedType&&c.expectedType.kind!=="value"&&(M=c.expectedType);const R={},P=[];for(let ie=2;ie<u.length-1;ie+=2){let ue=u[ie];const ve=u[ie+1];Array.isArray(ue)||(ue=[ue]);const Pe=c.concat(ie);if(ue.length===0)return Pe.error("Expected at least one branch label.");for(const qe of ue){if(typeof qe!="number"&&typeof qe!="string")return Pe.error("Branch labels must be numbers or strings.");if(typeof qe=="number"&&Math.abs(qe)>Number.MAX_SAFE_INTEGER)return Pe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof qe=="number"&&Math.floor(qe)!==qe)return Pe.error("Numeric branch labels must be integer values.");if(y){if(Pe.checkSubtype(y,Zi(qe)))return null}else y=Zi(qe);if(R[String(qe)]!==void 0)return Pe.error("Branch labels must be unique.");R[String(qe)]=P.length}const Qe=c.parse(ve,ie,M);if(!Qe)return null;M=M||Qe.type,P.push(Qe)}const N=c.parse(u[1],1,ji);if(!N)return null;const H=c.parse(u[u.length-1],u.length-1,M);return H?N.type.kind!=="value"&&c.concat(1).checkSubtype(y,N.type)?null:new Ar(y,M,N,R,P,H):null}evaluate(u){const c=this.input.evaluate(u);return(Zi(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class mr{constructor(u,c,y){this.type=u,this.branches=c,this.otherwise=y}static parse(u,c){if(u.length<4)return c.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return c.error("Expected an odd number of arguments.");let y;c.expectedType&&c.expectedType.kind!=="value"&&(y=c.expectedType);const M=[];for(let P=1;P<u.length-1;P+=2){const N=c.parse(u[P],P,zi);if(!N)return null;const H=c.parse(u[P+1],P+1,y);if(!H)return null;M.push([N,H]),y=y||H.type}const R=c.parse(u[u.length-1],u.length-1,y);if(!R)return null;if(!y)throw new Error("Can't infer output type");return new mr(y,M,R)}evaluate(u){for(const[c,y]of this.branches)if(c.evaluate(u))return y.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[c,y]of this.branches)u(c),u(y);u(this.otherwise)}outputDefined(){return this.branches.every(([u,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class ho{constructor(u,c,y,M){this.type=u,this.input=c,this.beginIndex=y,this.endIndex=M}static parse(u,c){if(u.length<=2||u.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const y=c.parse(u[1],1,ji),M=c.parse(u[2],2,Zn);if(!y||!M)return null;if(!Ma(y.type,[Da(ji),lr,ji]))return c.error(`Expected first argument to be of type array or string, but found ${Vi(y.type)} instead`);if(u.length===4){const R=c.parse(u[3],3,Zn);return R?new ho(y.type,y,M,R):null}return new ho(y.type,y,M)}evaluate(u){const c=this.input.evaluate(u),y=this.beginIndex.evaluate(u);let M;if(this.endIndex&&(M=this.endIndex.evaluate(u)),Vo(c,["string"]))return[...c].slice(y,M).join("");if(Vo(c,["array"]))return c.slice(y,M);throw new Dr(`Expected first argument to be of type array or string, but found ${Vi(Zi(c))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function No(h,u){const c=h.length-1;let y,M,R=0,P=c,N=0;for(;R<=P;)if(N=Math.floor((R+P)/2),y=h[N],M=h[N+1],y<=u){if(N===c||u<M)return N;R=N+1}else{if(!(y>u))throw new Dr("Input is not a number.");P=N-1}return 0}class jr{constructor(u,c,y){this.type=u,this.input=c,this.labels=[],this.outputs=[];for(const[M,R]of y)this.labels.push(M),this.outputs.push(R)}static parse(u,c){if(u.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return c.error("Expected an even number of arguments.");const y=c.parse(u[1],1,Zn);if(!y)return null;const M=[];let R=null;c.expectedType&&c.expectedType.kind!=="value"&&(R=c.expectedType);for(let P=1;P<u.length;P+=2){const N=P===1?-1/0:u[P],H=u[P+1],ie=P,ue=P+1;if(typeof N!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(M.length&&M[M.length-1][0]>=N)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ie);const ve=c.parse(H,ue,R);if(!ve)return null;R=R||ve.type,M.push([N,ve])}return new jr(R,y,M)}evaluate(u){const c=this.labels,y=this.outputs;if(c.length===1)return y[0].evaluate(u);const M=this.input.evaluate(u);if(M<=c[0])return y[0].evaluate(u);const R=c.length;return M>=c[R-1]?y[R-1].evaluate(u):y[No(c,M)].evaluate(u)}eachChild(u){u(this.input);for(const c of this.outputs)u(c)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function qs(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Ll,Yu,ps=function(){if(Yu)return Ll;function h(u,c,y,M){this.cx=3*u,this.bx=3*(y-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(M-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=c,this.p2x=y,this.p2y=M}return Yu=1,Ll=h,h.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,c){if(c===void 0&&(c=1e-6),u<0)return 0;if(u>1)return 1;for(var y=u,M=0;M<8;M++){var R=this.sampleCurveX(y)-u;if(Math.abs(R)<c)return y;var P=this.sampleCurveDerivativeX(y);if(Math.abs(P)<1e-6)break;y-=R/P}var N=0,H=1;for(y=u,M=0;M<20&&(R=this.sampleCurveX(y),!(Math.abs(R-u)<c));M++)u>R?N=y:H=y,y=.5*(H-N)+N;return y},solve:function(u,c){return this.sampleCurveY(this.solveCurveX(u,c))}},Ll}(),gd=qs(ps);class Ra{constructor(u,c,y,M,R){this.type=u,this.operator=c,this.interpolation=y,this.input=M,this.labels=[],this.outputs=[];for(const[P,N]of R)this.labels.push(P),this.outputs.push(N)}static interpolationFactor(u,c,y,M){let R=0;if(u.name==="exponential")R=yd(c,u.base,y,M);else if(u.name==="linear")R=yd(c,1,y,M);else if(u.name==="cubic-bezier"){const P=u.controlPoints;R=new gd(P[0],P[1],P[2],P[3]).solve(yd(c,1,y,M))}return R}static parse(u,c){let[y,M,R,...P]=u;if(!Array.isArray(M)||M.length===0)return c.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const ie=M[1];if(typeof ie!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:ie}}else{if(M[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const ie=M.slice(1);if(ie.length!==4||ie.some(ue=>typeof ue!="number"||ue<0||ue>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:ie}}}if(u.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(R=c.parse(R,2,Zn),!R)return null;const N=[];let H=null;y!=="interpolate-hcl"&&y!=="interpolate-lab"||c.expectedType==Xa?c.expectedType&&c.expectedType.kind!=="value"&&(H=c.expectedType):H=vr;for(let ie=0;ie<P.length;ie+=2){const ue=P[ie],ve=P[ie+1],Pe=ie+3,Qe=ie+4;if(typeof ue!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Pe);if(N.length&&N[N.length-1][0]>=ue)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Pe);const qe=c.parse(ve,Qe,H);if(!qe)return null;H=H||qe.type,N.push([ue,qe])}return $e(H,Zn)||$e(H,Fa)||$e(H,vr)||$e(H,wo)||$e(H,Il)||$e(H,Xa)||$e(H,Wu)||$e(H,Da(Zn))?new Ra(H,y,M,R,N):c.error(`Type ${Vi(H)} is not interpolatable.`)}evaluate(u){const c=this.labels,y=this.outputs;if(c.length===1)return y[0].evaluate(u);const M=this.input.evaluate(u);if(M<=c[0])return y[0].evaluate(u);const R=c.length;if(M>=c[R-1])return y[R-1].evaluate(u);const P=No(c,M),N=Ra.interpolationFactor(this.interpolation,M,c[P],c[P+1]),H=y[P].evaluate(u),ie=y[P+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ul(H,ie,N);case"color":return xr.interpolate(H,ie,N);case"padding":return za.interpolate(H,ie,N);case"colorArray":return aa.interpolate(H,ie,N);case"numberArray":return wa.interpolate(H,ie,N);case"variableAnchorOffsetCollection":return ja.interpolate(H,ie,N);case"array":return bu(H,ie,N);case"projectionDefinition":return ya.interpolate(H,ie,N)}case"interpolate-hcl":switch(this.type.kind){case"color":return xr.interpolate(H,ie,N,"hcl");case"colorArray":return aa.interpolate(H,ie,N,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return xr.interpolate(H,ie,N,"lab");case"colorArray":return aa.interpolate(H,ie,N,"lab")}}}eachChild(u){u(this.input);for(const c of this.outputs)u(c)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function yd(h,u,c,y){const M=y-c,R=h-c;return M===0?0:u===1?R/M:(Math.pow(u,R)-1)/(Math.pow(u,M)-1)}const PA={color:xr.interpolate,number:Ul,padding:za.interpolate,numberArray:wa.interpolate,colorArray:aa.interpolate,variableAnchorOffsetCollection:ja.interpolate,array:bu};class qu{constructor(u,c){this.type=u,this.args=c}static parse(u,c){if(u.length<2)return c.error("Expected at least one argument.");let y=null;const M=c.expectedType;M&&M.kind!=="value"&&(y=M);const R=[];for(const N of u.slice(1)){const H=c.parse(N,1+R.length,y,void 0,{typeAnnotation:"omit"});if(!H)return null;y=y||H.type,R.push(H)}if(!y)throw new Error("No output type");const P=M&&R.some(N=>us(M,N.type));return new qu(P?ji:y,R)}evaluate(u){let c,y=null,M=0;for(const R of this.args)if(M++,y=R.evaluate(u),y&&y instanceof Ja&&!y.available&&(c||(c=y.name),y=null,M===this.args.length&&(y=c)),y!==null)break;return y}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function gh(h,u){return h==="=="||h==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function jh(h,u,c,y){return y.compare(u,c)===0}function po(h,u,c){const y=h!=="=="&&h!=="!=";return class JL{constructor(R,P,N){this.type=zi,this.lhs=R,this.rhs=P,this.collator=N,this.hasUntypedArgument=R.type.kind==="value"||P.type.kind==="value"}static parse(R,P){if(R.length!==3&&R.length!==4)return P.error("Expected two or three arguments.");const N=R[0];let H=P.parse(R[1],1,ji);if(!H)return null;if(!gh(N,H.type))return P.concat(1).error(`"${N}" comparisons are not supported for type '${Vi(H.type)}'.`);let ie=P.parse(R[2],2,ji);if(!ie)return null;if(!gh(N,ie.type))return P.concat(2).error(`"${N}" comparisons are not supported for type '${Vi(ie.type)}'.`);if(H.type.kind!==ie.type.kind&&H.type.kind!=="value"&&ie.type.kind!=="value")return P.error(`Cannot compare types '${Vi(H.type)}' and '${Vi(ie.type)}'.`);y&&(H.type.kind==="value"&&ie.type.kind!=="value"?H=new Be(ie.type,[H]):H.type.kind!=="value"&&ie.type.kind==="value"&&(ie=new Be(H.type,[ie])));let ue=null;if(R.length===4){if(H.type.kind!=="string"&&ie.type.kind!=="string"&&H.type.kind!=="value"&&ie.type.kind!=="value")return P.error("Cannot use collator to compare non-string types.");if(ue=P.parse(R[3],3,gl),!ue)return null}return new JL(H,ie,ue)}evaluate(R){const P=this.lhs.evaluate(R),N=this.rhs.evaluate(R);if(y&&this.hasUntypedArgument){const H=Zi(P),ie=Zi(N);if(H.kind!==ie.kind||H.kind!=="string"&&H.kind!=="number")throw new Dr(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${H.kind}, ${ie.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const H=Zi(P),ie=Zi(N);if(H.kind!=="string"||ie.kind!=="string")return u(R,P,N)}return this.collator?c(R,P,N,this.collator.evaluate(R)):u(R,P,N)}eachChild(R){R(this.lhs),R(this.rhs),this.collator&&R(this.collator)}outputDefined(){return!0}}}const rc=po("==",function(h,u,c){return u===c},jh),vd=po("!=",function(h,u,c){return u!==c},function(h,u,c,y){return!jh(0,u,c,y)}),dm=po("<",function(h,u,c){return u<c},function(h,u,c,y){return y.compare(u,c)<0}),yh=po(">",function(h,u,c){return u>c},function(h,u,c,y){return y.compare(u,c)>0}),Cd=po("<=",function(h,u,c){return u<=c},function(h,u,c,y){return y.compare(u,c)<=0}),r0=po(">=",function(h,u,c){return u>=c},function(h,u,c,y){return y.compare(u,c)>=0});class Tf{constructor(u,c,y){this.type=gl,this.locale=y,this.caseSensitive=u,this.diacriticSensitive=c}static parse(u,c){if(u.length!==2)return c.error("Expected one argument.");const y=u[1];if(typeof y!="object"||Array.isArray(y))return c.error("Collator options argument must be an object.");const M=c.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,zi);if(!M)return null;const R=c.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,zi);if(!R)return null;let P=null;return y.locale&&(P=c.parse(y.locale,1,lr),!P)?null:new Tf(M,R,P)}evaluate(u){return new iu(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class kf{constructor(u,c,y,M,R){this.type=lr,this.number=u,this.locale=c,this.currency=y,this.minFractionDigits=M,this.maxFractionDigits=R}static parse(u,c){if(u.length!==3)return c.error("Expected two arguments.");const y=c.parse(u[1],1,Zn);if(!y)return null;const M=u[2];if(typeof M!="object"||Array.isArray(M))return c.error("NumberFormat options argument must be an object.");let R=null;if(M.locale&&(R=c.parse(M.locale,1,lr),!R))return null;let P=null;if(M.currency&&(P=c.parse(M.currency,1,lr),!P))return null;let N=null;if(M["min-fraction-digits"]&&(N=c.parse(M["min-fraction-digits"],1,Zn),!N))return null;let H=null;return M["max-fraction-digits"]&&(H=c.parse(M["max-fraction-digits"],1,Zn),!H)?null:new kf(y,R,P,N,H)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class Hu{constructor(u){this.type=ka,this.sections=u}static parse(u,c){if(u.length<2)return c.error("Expected at least one argument.");const y=u[1];if(!Array.isArray(y)&&typeof y=="object")return c.error("First argument must be an image or text section.");const M=[];let R=!1;for(let P=1;P<=u.length-1;++P){const N=u[P];if(R&&typeof N=="object"&&!Array.isArray(N)){R=!1;let H=null;if(N["font-scale"]&&(H=c.parse(N["font-scale"],1,Zn),!H))return null;let ie=null;if(N["text-font"]&&(ie=c.parse(N["text-font"],1,Da(lr)),!ie))return null;let ue=null;if(N["text-color"]&&(ue=c.parse(N["text-color"],1,vr),!ue))return null;let ve=null;if(N["vertical-align"]){if(typeof N["vertical-align"]=="string"&&!cA.includes(N["vertical-align"]))return c.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${N["vertical-align"]}' instead.`);if(ve=c.parse(N["vertical-align"],1,lr),!ve)return null}const Pe=M[M.length-1];Pe.scale=H,Pe.font=ie,Pe.textColor=ue,Pe.verticalAlign=ve}else{const H=c.parse(u[P],1,ji);if(!H)return null;const ie=H.type.kind;if(ie!=="string"&&ie!=="value"&&ie!=="null"&&ie!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");R=!0,M.push({content:H,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Hu(M)}evaluate(u){return new Eo(this.sections.map(c=>{const y=c.content.evaluate(u);return Zi(y)===Ao?new jo("",y,null,null,null,c.verticalAlign?c.verticalAlign.evaluate(u):null):new jo(wi(y),null,c.scale?c.scale.evaluate(u):null,c.font?c.font.evaluate(u).join(","):null,c.textColor?c.textColor.evaluate(u):null,c.verticalAlign?c.verticalAlign.evaluate(u):null)}))}eachChild(u){for(const c of this.sections)u(c.content),c.scale&&u(c.scale),c.font&&u(c.font),c.textColor&&u(c.textColor),c.verticalAlign&&u(c.verticalAlign)}outputDefined(){return!1}}class es{constructor(u){this.type=Ao,this.input=u}static parse(u,c){if(u.length!==2)return c.error("Expected two arguments.");const y=c.parse(u[1],1,lr);return y?new es(y):c.error("No image name provided.")}evaluate(u){const c=this.input.evaluate(u),y=Ja.fromString(c);return y&&u.availableImages&&(y.available=u.availableImages.indexOf(c)>-1),y}eachChild(u){u(this.input)}outputDefined(){return!1}}class _d{constructor(u){this.type=Zn,this.input=u}static parse(u,c){if(u.length!==2)return c.error(`Expected 1 argument, but found ${u.length-1} instead.`);const y=c.parse(u[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${Vi(y.type)} instead.`):new _d(y):null}evaluate(u){const c=this.input.evaluate(u);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new Dr(`Expected value to be of type string or array, but found ${Vi(Zi(c))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Fl=8192;function bd(h,u){const c=(180+h[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,M=Math.pow(2,u.z);return[Math.round(c*M*Fl),Math.round(y*M*Fl)]}function Nh(h,u){const c=Math.pow(2,u.z);return[(M=(h[0]/Fl+u.x)/c,360*M-180),(y=(h[1]/Fl+u.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90)];var y,M}function qc(h,u){h[0]=Math.min(h[0],u[0]),h[1]=Math.min(h[1],u[1]),h[2]=Math.max(h[2],u[0]),h[3]=Math.max(h[3],u[1])}function Gh(h,u){return!(h[0]<=u[0]||h[2]>=u[2]||h[1]<=u[1]||h[3]>=u[3])}function Df(h,u,c){const y=h[0]-u[0],M=h[1]-u[1],R=h[0]-c[0],P=h[1]-c[1];return y*P-R*M==0&&y*R<=0&&M*P<=0}function vh(h,u,c,y){return(M=[y[0]-c[0],y[1]-c[1]])[0]*(R=[u[0]-h[0],u[1]-h[1]])[1]-M[1]*R[0]!=0&&!(!oc(h,u,c,y)||!oc(c,y,h,u));var M,R}function Ch(h,u,c){for(const y of c)for(let M=0;M<y.length-1;++M)if(vh(h,u,y[M],y[M+1]))return!0;return!1}function Wh(h,u,c=!1){let y=!1;for(const N of u)for(let H=0;H<N.length-1;H++){if(Df(h,N[H],N[H+1]))return c;(R=N[H])[1]>(M=h)[1]!=(P=N[H+1])[1]>M[1]&&M[0]<(P[0]-R[0])*(M[1]-R[1])/(P[1]-R[1])+R[0]&&(y=!y)}var M,R,P;return y}function Rf(h,u){for(const c of u)if(Wh(h,c))return!0;return!1}function ou(h,u){for(const c of h)if(!Wh(c,u))return!1;for(let c=0;c<h.length-1;++c)if(Ch(h[c],h[c+1],u))return!1;return!0}function Pf(h,u){for(const c of u)if(ou(h,c))return!0;return!1}function oc(h,u,c,y){const M=y[0]-c[0],R=y[1]-c[1],P=(h[0]-c[0])*R-M*(h[1]-c[1]),N=(u[0]-c[0])*R-M*(u[1]-c[1]);return P>0&&N<0||P<0&&N>0}function au(h,u,c){const y=[];for(let M=0;M<h.length;M++){const R=[];for(let P=0;P<h[M].length;P++){const N=bd(h[M][P],c);qc(u,N),R.push(N)}y.push(R)}return y}function Mc(h,u,c){const y=[];for(let M=0;M<h.length;M++){const R=au(h[M],u,c);y.push(R)}return y}function xd(h,u,c,y){if(h[0]<c[0]||h[0]>c[2]){const M=.5*y;let R=h[0]-c[0]>M?-y:c[0]-h[0]>M?y:0;R===0&&(R=h[0]-c[2]>M?-y:c[2]-h[0]>M?y:0),h[0]+=R}qc(u,h)}function Md(h,u,c,y){const M=Math.pow(2,y.z)*Fl,R=[y.x*Fl,y.y*Fl],P=[];for(const N of h)for(const H of N){const ie=[H.x+R[0],H.y+R[1]];xd(ie,u,c,M),P.push(ie)}return P}function KA(h,u,c,y){const M=Math.pow(2,y.z)*Fl,R=[y.x*Fl,y.y*Fl],P=[];for(const H of h){const ie=[];for(const ue of H){const ve=[ue.x+R[0],ue.y+R[1]];qc(u,ve),ie.push(ve)}P.push(ie)}if(u[2]-u[0]<=M/2){(N=u)[0]=N[1]=1/0,N[2]=N[3]=-1/0;for(const H of P)for(const ie of H)xd(ie,u,c,M)}var N;return P}class Vu{constructor(u,c){this.type=zi,this.geojson=u,this.geometries=c}static parse(u,c){if(u.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(vl(u[1])){const y=u[1];if(y.type==="FeatureCollection"){const M=[];for(const R of y.features){const{type:P,coordinates:N}=R.geometry;P==="Polygon"&&M.push(N),P==="MultiPolygon"&&M.push(...N)}if(M.length)return new Vu(y,{type:"MultiPolygon",coordinates:M})}else if(y.type==="Feature"){const M=y.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new Vu(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new Vu(y,y)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(c,y){const M=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],P=c.canonicalID();if(y.type==="Polygon"){const N=au(y.coordinates,R,P),H=Md(c.geometry(),M,R,P);if(!Gh(M,R))return!1;for(const ie of H)if(!Wh(ie,N))return!1}if(y.type==="MultiPolygon"){const N=Mc(y.coordinates,R,P),H=Md(c.geometry(),M,R,P);if(!Gh(M,R))return!1;for(const ie of H)if(!Rf(ie,N))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(c,y){const M=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],P=c.canonicalID();if(y.type==="Polygon"){const N=au(y.coordinates,R,P),H=KA(c.geometry(),M,R,P);if(!Gh(M,R))return!1;for(const ie of H)if(!ou(ie,N))return!1}if(y.type==="MultiPolygon"){const N=Mc(y.coordinates,R,P),H=KA(c.geometry(),M,R,P);if(!Gh(M,R))return!1;for(const ie of H)if(!Pf(ie,N))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Qh=class{constructor(h=[],u=(c,y)=>c<y?-1:c>y?1:0){if(this.data=h,this.length=this.data.length,this.compare=u,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:u,compare:c}=this,y=u[h];for(;h>0;){const M=h-1>>1,R=u[M];if(c(y,R)>=0)break;u[h]=R,h=M}u[h]=y}_down(h){const{data:u,compare:c}=this,y=this.length>>1,M=u[h];for(;h<y;){let R=1+(h<<1);const P=R+1;if(P<this.length&&c(u[P],u[R])<0&&(R=P),c(u[R],M)>=0)break;u[h]=u[R],h=R}u[h]=M}};function wc(h,u,c=0,y=h.length-1,M=fm){for(;y>c;){if(y-c>600){const H=y-c+1,ie=u-c+1,ue=Math.log(H),ve=.5*Math.exp(2*ue/3),Pe=.5*Math.sqrt(ue*ve*(H-ve)/H)*(ie-H/2<0?-1:1);wc(h,u,Math.max(c,Math.floor(u-ie*ve/H+Pe)),Math.min(y,Math.floor(u+(H-ie)*ve/H+Pe)),M)}const R=h[u];let P=c,N=y;for(Yh(h,c,u),M(h[y],R)>0&&Yh(h,c,y);P<N;){for(Yh(h,P,N),P++,N--;M(h[P],R)<0;)P++;for(;M(h[N],R)>0;)N--}M(h[c],R)===0?Yh(h,c,N):(N++,Yh(h,N,y)),N<=u&&(c=N+1),u<=N&&(y=N-1)}}function Yh(h,u,c){const y=h[u];h[u]=h[c],h[c]=y}function fm(h,u){return h<u?-1:h>u?1:0}function Hc(h,u){if(h.length<=1)return[h];const c=[];let y,M;for(const R of h){const P=hA(R);P!==0&&(R.area=Math.abs(P),M===void 0&&(M=P<0),M===P<0?(y&&c.push(y),y=[R]):y.push(R))}if(y&&c.push(y),u>1)for(let R=0;R<c.length;R++)c[R].length<=u||(wc(c[R],u,1,c[R].length-1,Vd),c[R]=c[R].slice(0,u));return c}function Vd(h,u){return u.area-h.area}function hA(h){let u=0;for(let c,y,M=0,R=h.length,P=R-1;M<R;P=M++)c=h[M],y=h[P],u+=(y.x-c.x)*(c.y+y.y);return u}const $u=1/298.257223563,Mp=$u*(2-$u),Kf=Math.PI/180;class xu{constructor(u){const c=6378.137*Kf*1e3,y=Math.cos(u*Kf),M=1/(1-Mp*(1-y*y)),R=Math.sqrt(M);this.kx=c*R*y,this.ky=c*R*M*(1-Mp)}distance(u,c){const y=this.wrap(u[0]-c[0])*this.kx,M=(u[1]-c[1])*this.ky;return Math.sqrt(y*y+M*M)}pointOnLine(u,c){let y,M,R,P,N=1/0;for(let H=0;H<u.length-1;H++){let ie=u[H][0],ue=u[H][1],ve=this.wrap(u[H+1][0]-ie)*this.kx,Pe=(u[H+1][1]-ue)*this.ky,Qe=0;ve===0&&Pe===0||(Qe=(this.wrap(c[0]-ie)*this.kx*ve+(c[1]-ue)*this.ky*Pe)/(ve*ve+Pe*Pe),Qe>1?(ie=u[H+1][0],ue=u[H+1][1]):Qe>0&&(ie+=ve/this.kx*Qe,ue+=Pe/this.ky*Qe)),ve=this.wrap(c[0]-ie)*this.kx,Pe=(c[1]-ue)*this.ky;const qe=ve*ve+Pe*Pe;qe<N&&(N=qe,y=ie,M=ue,R=H,P=Qe)}return{point:[y,M],index:R,t:Math.max(0,Math.min(1,P))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function ac(h,u){return u[0]-h[0]}function Mu(h){return h[1]-h[0]+1}function UA(h,u){return h[1]>=h[0]&&h[1]<u}function Bo(h,u){if(h[0]>h[1])return[null,null];const c=Mu(h);if(u){if(c===2)return[h,null];const M=Math.floor(c/2);return[[h[0],h[0]+M],[h[0]+M,h[1]]]}if(c===1)return[h,null];const y=Math.floor(c/2)-1;return[[h[0],h[0]+y],[h[0]+y+1,h[1]]]}function _h(h,u){if(!UA(u,h.length))return[1/0,1/0,-1/0,-1/0];const c=[1/0,1/0,-1/0,-1/0];for(let y=u[0];y<=u[1];++y)qc(c,h[y]);return c}function wd(h){const u=[1/0,1/0,-1/0,-1/0];for(const c of h)for(const y of c)qc(u,y);return u}function wp(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function Sc(h,u,c){if(!wp(h)||!wp(u))return NaN;let y=0,M=0;return h[2]<u[0]&&(y=u[0]-h[2]),h[0]>u[2]&&(y=h[0]-u[2]),h[1]>u[3]&&(M=h[1]-u[3]),h[3]<u[1]&&(M=u[1]-h[3]),c.distance([0,0],[y,M])}function zl(h,u,c){const y=c.pointOnLine(u,h);return c.distance(h,y.point)}function Zt(h,u,c,y,M){const R=Math.min(zl(h,[c,y],M),zl(u,[c,y],M)),P=Math.min(zl(c,[h,u],M),zl(y,[h,u],M));return Math.min(R,P)}function Sn(h,u,c,y,M){if(!UA(u,h.length)||!UA(y,c.length))return 1/0;let R=1/0;for(let P=u[0];P<u[1];++P){const N=h[P],H=h[P+1];for(let ie=y[0];ie<y[1];++ie){const ue=c[ie],ve=c[ie+1];if(vh(N,H,ue,ve))return 0;R=Math.min(R,Zt(N,H,ue,ve,M))}}return R}function vn(h,u,c,y,M){if(!UA(u,h.length)||!UA(y,c.length))return NaN;let R=1/0;for(let P=u[0];P<=u[1];++P)for(let N=y[0];N<=y[1];++N)if(R=Math.min(R,M.distance(h[P],c[N])),R===0)return R;return R}function Ti(h,u,c){if(Wh(h,u,!0))return 0;let y=1/0;for(const M of u){const R=M[0],P=M[M.length-1];if(R!==P&&(y=Math.min(y,zl(h,[P,R],c)),y===0))return y;const N=c.pointOnLine(M,h);if(y=Math.min(y,c.distance(h,N.point)),y===0)return y}return y}function Sr(h,u,c,y){if(!UA(u,h.length))return NaN;for(let R=u[0];R<=u[1];++R)if(Wh(h[R],c,!0))return 0;let M=1/0;for(let R=u[0];R<u[1];++R){const P=h[R],N=h[R+1];for(const H of c)for(let ie=0,ue=H.length,ve=ue-1;ie<ue;ve=ie++){const Pe=H[ve],Qe=H[ie];if(vh(P,N,Pe,Qe))return 0;M=Math.min(M,Zt(P,N,Pe,Qe,y))}}return M}function Oo(h,u){for(const c of h)for(const y of c)if(Wh(y,u,!0))return!0;return!1}function Hs(h,u,c,y=1/0){const M=wd(h),R=wd(u);if(y!==1/0&&Sc(M,R,c)>=y)return y;if(Gh(M,R)){if(Oo(h,u))return 0}else if(Oo(u,h))return 0;let P=1/0;for(const N of h)for(let H=0,ie=N.length,ue=ie-1;H<ie;ue=H++){const ve=N[ue],Pe=N[H];for(const Qe of u)for(let qe=0,et=Qe.length,At=et-1;qe<et;At=qe++){const Mt=Qe[At],Qt=Qe[qe];if(vh(ve,Pe,Mt,Qt))return 0;P=Math.min(P,Zt(ve,Pe,Mt,Qt,c))}}return P}function Do(h,u,c,y,M,R){if(!R)return;const P=Sc(_h(y,R),M,c);P<u&&h.push([P,R,[0,0]])}function Vc(h,u,c,y,M,R,P){if(!R||!P)return;const N=Sc(_h(y,R),_h(M,P),c);N<u&&h.push([N,R,P])}function $d(h,u,c,y,M=1/0){let R=Math.min(y.distance(h[0],c[0][0]),M);if(R===0)return R;const P=new Qh([[0,[0,h.length-1],[0,0]]],ac),N=wd(c);for(;P.length>0;){const H=P.pop();if(H[0]>=R)continue;const ie=H[1],ue=u?50:100;if(Mu(ie)<=ue){if(!UA(ie,h.length))return NaN;if(u){const ve=Sr(h,ie,c,y);if(isNaN(ve)||ve===0)return ve;R=Math.min(R,ve)}else for(let ve=ie[0];ve<=ie[1];++ve){const Pe=Ti(h[ve],c,y);if(R=Math.min(R,Pe),R===0)return 0}}else{const ve=Bo(ie,u);Do(P,R,y,h,N,ve[0]),Do(P,R,y,h,N,ve[1])}}return R}function su(h,u,c,y,M,R=1/0){let P=Math.min(R,M.distance(h[0],c[0]));if(P===0)return P;const N=new Qh([[0,[0,h.length-1],[0,c.length-1]]],ac);for(;N.length>0;){const H=N.pop();if(H[0]>=P)continue;const ie=H[1],ue=H[2],ve=u?50:100,Pe=y?50:100;if(Mu(ie)<=ve&&Mu(ue)<=Pe){if(!UA(ie,h.length)&&UA(ue,c.length))return NaN;let Qe;if(u&&y)Qe=Sn(h,ie,c,ue,M),P=Math.min(P,Qe);else if(u&&!y){const qe=h.slice(ie[0],ie[1]+1);for(let et=ue[0];et<=ue[1];++et)if(Qe=zl(c[et],qe,M),P=Math.min(P,Qe),P===0)return P}else if(!u&&y){const qe=c.slice(ue[0],ue[1]+1);for(let et=ie[0];et<=ie[1];++et)if(Qe=zl(h[et],qe,M),P=Math.min(P,Qe),P===0)return P}else Qe=vn(h,ie,c,ue,M),P=Math.min(P,Qe)}else{const Qe=Bo(ie,u),qe=Bo(ue,y);Vc(N,P,M,h,c,Qe[0],qe[0]),Vc(N,P,M,h,c,Qe[0],qe[1]),Vc(N,P,M,h,c,Qe[1],qe[0]),Vc(N,P,M,h,c,Qe[1],qe[1])}}return P}function Sd(h){return h.type==="MultiPolygon"?h.coordinates.map(u=>({type:"Polygon",coordinates:u})):h.type==="MultiLineString"?h.coordinates.map(u=>({type:"LineString",coordinates:u})):h.type==="MultiPoint"?h.coordinates.map(u=>({type:"Point",coordinates:u})):[h]}class dA{constructor(u,c){this.type=Zn,this.geojson=u,this.geometries=c}static parse(u,c){if(u.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(vl(u[1])){const y=u[1];if(y.type==="FeatureCollection")return new dA(y,y.features.map(M=>Sd(M.geometry)).flat());if(y.type==="Feature")return new dA(y,Sd(y.geometry));if("type"in y&&"coordinates"in y)return new dA(y,Sd(y))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(c,y){const M=c.geometry(),R=M.flat().map(H=>Nh([H.x,H.y],c.canonical));if(M.length===0)return NaN;const P=new xu(R[0][1]);let N=1/0;for(const H of y){switch(H.type){case"Point":N=Math.min(N,su(R,!1,[H.coordinates],!1,P,N));break;case"LineString":N=Math.min(N,su(R,!1,H.coordinates,!0,P,N));break;case"Polygon":N=Math.min(N,$d(R,!1,H.coordinates,P,N))}if(N===0)return N}return N}(u,this.geometries);if(u.geometryType()==="LineString")return function(c,y){const M=c.geometry(),R=M.flat().map(H=>Nh([H.x,H.y],c.canonical));if(M.length===0)return NaN;const P=new xu(R[0][1]);let N=1/0;for(const H of y){switch(H.type){case"Point":N=Math.min(N,su(R,!0,[H.coordinates],!1,P,N));break;case"LineString":N=Math.min(N,su(R,!0,H.coordinates,!0,P,N));break;case"Polygon":N=Math.min(N,$d(R,!0,H.coordinates,P,N))}if(N===0)return N}return N}(u,this.geometries);if(u.geometryType()==="Polygon")return function(c,y){const M=c.geometry();if(M.length===0||M[0].length===0)return NaN;const R=Hc(M,0).map(H=>H.map(ie=>ie.map(ue=>Nh([ue.x,ue.y],c.canonical)))),P=new xu(R[0][0][0][1]);let N=1/0;for(const H of y)for(const ie of R){switch(H.type){case"Point":N=Math.min(N,$d([H.coordinates],!1,ie,P,N));break;case"LineString":N=Math.min(N,$d(H.coordinates,!0,ie,P,N));break;case"Polygon":N=Math.min(N,Hs(ie,H.coordinates,P,N))}if(N===0)return N}return N}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class wu{constructor(u){this.type=ji,this.key=u}static parse(u,c){if(u.length!==2)return c.error(`Expected 1 argument, but found ${u.length-1} instead.`);const y=u[1];return y==null?c.error("Global state property must be defined."):typeof y!="string"?c.error(`Global state property must be string, but found ${typeof u[1]} instead.`):new wu(y)}evaluate(u){var c;const y=(c=u.globals)===null||c===void 0?void 0:c.globalState;return y&&Object.keys(y).length!==0?Ys(y,this.key):null}eachChild(){}outputDefined(){return!1}}const Su={"==":rc,"!=":vd,">":yh,"<":dm,">=":r0,"<=":Cd,array:Be,at:Xi,boolean:Be,case:mr,coalesce:qu,collator:Tf,format:Hu,image:es,in:to,"index-of":co,interpolate:Ra,"interpolate-hcl":Ra,"interpolate-lab":Ra,length:_d,let:or,literal:Yr,match:Ar,number:Be,"number-format":kf,object:Be,slice:ho,step:jr,string:Be,"to-boolean":Gt,"to-color":Gt,"to-number":Gt,"to-string":Gt,var:Ri,within:Vu,distance:dA,"global-state":wu};class Tl{constructor(u,c,y,M){this.name=u,this.type=c,this._evaluate=y,this.args=M}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,c){const y=u[0],M=Tl.definitions[y];if(!M)return c.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const R=Array.isArray(M)?M[0]:M.type,P=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,N=P.filter(([ie])=>!Array.isArray(ie)||ie.length===u.length-1);let H=null;for(const[ie,ue]of N){H=new $i(c.registry,Vs,c.path,null,c.scope);const ve=[];let Pe=!1;for(let Qe=1;Qe<u.length;Qe++){const qe=u[Qe],et=Array.isArray(ie)?ie[Qe-1]:ie.type,At=H.parse(qe,1+ve.length,et);if(!At){Pe=!0;break}ve.push(At)}if(!Pe)if(Array.isArray(ie)&&ie.length!==ve.length)H.error(`Expected ${ie.length} arguments, but found ${ve.length} instead.`);else{for(let Qe=0;Qe<ve.length;Qe++){const qe=Array.isArray(ie)?ie[Qe]:ie.type,et=ve[Qe];H.concat(Qe+1).checkSubtype(qe,et.type)}if(H.errors.length===0)return new Tl(y,R,ue,ve)}}if(N.length===1)c.errors.push(...H.errors);else{const ie=(N.length?N:P).map(([ve])=>{return Pe=ve,Array.isArray(Pe)?`(${Pe.map(Vi).join(", ")})`:`(${Vi(Pe.type)}...)`;var Pe}).join(" | "),ue=[];for(let ve=1;ve<u.length;ve++){const Pe=c.parse(u[ve],1+ue.length);if(!Pe)return null;ue.push(Vi(Pe.type))}c.error(`Expected arguments of type ${ie}, but found (${ue.join(", ")}) instead.`)}return null}static register(u,c){Tl.definitions=c;for(const y in c)u[y]=Tl}}function Go(h,[u,c,y,M]){u=u.evaluate(h),c=c.evaluate(h),y=y.evaluate(h);const R=M?M.evaluate(h):1,P=Rr(u,c,y,R);if(P)throw new Dr(P);return new xr(u/255,c/255,y/255,R,!1)}function fA(h,u){return h in u}function qh(h,u){const c=u[h];return c===void 0?null:c}function Na(h){return{type:h}}function Vs(h){if(h instanceof Ri)return Vs(h.boundExpression);if(h instanceof Tl&&h.name==="error"||h instanceof Tf||h instanceof Vu||h instanceof dA||h instanceof wu)return!1;const u=h instanceof Gt||h instanceof Be;let c=!0;return h.eachChild(y=>{c=u?c&&Vs(y):c&&y instanceof Yr}),!!c&&Es(h)&&jl(h,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Es(h){if(h instanceof Tl&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Vu||h instanceof dA)return!1;let u=!0;return h.eachChild(c=>{u&&!Es(c)&&(u=!1)}),u}function Zu(h){if(h instanceof Tl&&h.name==="feature-state")return!1;let u=!0;return h.eachChild(c=>{u&&!Zu(c)&&(u=!1)}),u}function jl(h,u){if(h instanceof Tl&&u.indexOf(h.name)>=0)return!1;let c=!0;return h.eachChild(y=>{c&&!jl(y,u)&&(c=!1)}),c}function Eu(h){return{result:"success",value:h}}function sc(h){return{result:"error",value:h}}function Bu(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function Ec(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function bh(h){return!!h.expression&&h.expression.interpolated}function kr(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function lc(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)&&Zi(h)===Tr}function Xu(h){return h}function Bc(h,u){const c=h.stops&&typeof h.stops[0][0]=="object",y=c||!(c||h.property!==void 0),M=h.type||(bh(u)?"exponential":"interval"),R=function(ue){switch(ue.type){case"color":return xr.parse;case"padding":return za.parse;case"numberArray":return wa.parse;case"colorArray":return aa.parse;default:return null}}(u);if(R&&((h=uo({},h)).stops&&(h.stops=h.stops.map(ue=>[ue[0],R(ue[1])])),h.default=R(h.default?h.default:u.default)),h.colorSpace&&(P=h.colorSpace)!=="rgb"&&P!=="hcl"&&P!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var P;const N=function(ue){switch(ue){case"exponential":return pA;case"interval":return Ed;case"categorical":return xh;case"identity":return Bd;default:throw new Error(`Unknown function type "${ue}"`)}}(M);let H,ie;if(M==="categorical"){H=Object.create(null);for(const ue of h.stops)H[ue[0]]=ue[1];ie=typeof h.stops[0][0]}if(c){const ue={},ve=[];for(let qe=0;qe<h.stops.length;qe++){const et=h.stops[qe],At=et[0].zoom;ue[At]===void 0&&(ue[At]={zoom:At,type:h.type,property:h.property,default:h.default,stops:[]},ve.push(At)),ue[At].stops.push([et[0].value,et[1]])}const Pe=[];for(const qe of ve)Pe.push([ue[qe].zoom,Bc(ue[qe],u)]);const Qe={name:"linear"};return{kind:"composite",interpolationType:Qe,interpolationFactor:Ra.interpolationFactor.bind(void 0,Qe),zoomStops:Pe.map(qe=>qe[0]),evaluate:({zoom:qe},et)=>pA({stops:Pe,base:h.base},u,qe).evaluate(qe,et)}}if(y){const ue=M==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:ue,interpolationFactor:Ra.interpolationFactor.bind(void 0,ue),zoomStops:h.stops.map(ve=>ve[0]),evaluate:({zoom:ve})=>N(h,u,ve,H,ie)}}return{kind:"source",evaluate(ue,ve){const Pe=ve&&ve.properties?ve.properties[h.property]:void 0;return Pe===void 0?Bs(h.default,u.default):N(h,u,Pe,H,ie)}}}function Bs(h,u,c){return h!==void 0?h:u!==void 0?u:c!==void 0?c:void 0}function xh(h,u,c,y,M){return Bs(typeof c===M?y[c]:void 0,h.default,u.default)}function Ed(h,u,c){if(kr(c)!=="number")return Bs(h.default,u.default);const y=h.stops.length;if(y===1||c<=h.stops[0][0])return h.stops[0][1];if(c>=h.stops[y-1][0])return h.stops[y-1][1];const M=No(h.stops.map(R=>R[0]),c);return h.stops[M][1]}function pA(h,u,c){const y=h.base!==void 0?h.base:1;if(kr(c)!=="number")return Bs(h.default,u.default);const M=h.stops.length;if(M===1||c<=h.stops[0][0])return h.stops[0][1];if(c>=h.stops[M-1][0])return h.stops[M-1][1];const R=No(h.stops.map(ue=>ue[0]),c),P=function(ue,ve,Pe,Qe){const qe=Qe-Pe,et=ue-Pe;return qe===0?0:ve===1?et/qe:(Math.pow(ve,et)-1)/(Math.pow(ve,qe)-1)}(c,y,h.stops[R][0],h.stops[R+1][0]),N=h.stops[R][1],H=h.stops[R+1][1],ie=PA[u.type]||Xu;return typeof N.evaluate=="function"?{evaluate(...ue){const ve=N.evaluate.apply(void 0,ue),Pe=H.evaluate.apply(void 0,ue);if(ve!==void 0&&Pe!==void 0)return ie(ve,Pe,P,h.colorSpace)}}:ie(N,H,P,h.colorSpace)}function Bd(h,u,c){switch(u.type){case"color":c=xr.parse(c);break;case"formatted":c=Eo.fromString(c.toString());break;case"resolvedImage":c=Ja.fromString(c.toString());break;case"padding":c=za.parse(c);break;case"colorArray":c=aa.parse(c);break;case"numberArray":c=wa.parse(c);break;default:kr(c)===u.type||u.type==="enum"&&u.values[c]||(c=void 0)}return Bs(c,h.default,u.default)}Tl.register(Su,{error:[{kind:"error"},[lr],(h,[u])=>{throw new Dr(u.evaluate(h))}],typeof:[lr,[ji],(h,[u])=>Vi(Zi(u.evaluate(h)))],"to-rgba":[Da(Zn,4),[vr],(h,[u])=>{const[c,y,M,R]=u.evaluate(h).rgb;return[255*c,255*y,255*M,R]}],rgb:[vr,[Zn,Zn,Zn],Go],rgba:[vr,[Zn,Zn,Zn,Zn],Go],has:{type:zi,overloads:[[[lr],(h,[u])=>fA(u.evaluate(h),h.properties())],[[lr,Tr],(h,[u,c])=>fA(u.evaluate(h),c.evaluate(h))]]},get:{type:ji,overloads:[[[lr],(h,[u])=>qh(u.evaluate(h),h.properties())],[[lr,Tr],(h,[u,c])=>qh(u.evaluate(h),c.evaluate(h))]]},"feature-state":[ji,[lr],(h,[u])=>qh(u.evaluate(h),h.featureState||{})],properties:[Tr,[],h=>h.properties()],"geometry-type":[lr,[],h=>h.geometryType()],id:[ji,[],h=>h.id()],zoom:[Zn,[],h=>h.globals.zoom],"heatmap-density":[Zn,[],h=>h.globals.heatmapDensity||0],elevation:[Zn,[],h=>h.globals.elevation||0],"line-progress":[Zn,[],h=>h.globals.lineProgress||0],accumulated:[ji,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[Zn,Na(Zn),(h,u)=>{let c=0;for(const y of u)c+=y.evaluate(h);return c}],"*":[Zn,Na(Zn),(h,u)=>{let c=1;for(const y of u)c*=y.evaluate(h);return c}],"-":{type:Zn,overloads:[[[Zn,Zn],(h,[u,c])=>u.evaluate(h)-c.evaluate(h)],[[Zn],(h,[u])=>-u.evaluate(h)]]},"/":[Zn,[Zn,Zn],(h,[u,c])=>u.evaluate(h)/c.evaluate(h)],"%":[Zn,[Zn,Zn],(h,[u,c])=>u.evaluate(h)%c.evaluate(h)],ln2:[Zn,[],()=>Math.LN2],pi:[Zn,[],()=>Math.PI],e:[Zn,[],()=>Math.E],"^":[Zn,[Zn,Zn],(h,[u,c])=>Math.pow(u.evaluate(h),c.evaluate(h))],sqrt:[Zn,[Zn],(h,[u])=>Math.sqrt(u.evaluate(h))],log10:[Zn,[Zn],(h,[u])=>Math.log(u.evaluate(h))/Math.LN10],ln:[Zn,[Zn],(h,[u])=>Math.log(u.evaluate(h))],log2:[Zn,[Zn],(h,[u])=>Math.log(u.evaluate(h))/Math.LN2],sin:[Zn,[Zn],(h,[u])=>Math.sin(u.evaluate(h))],cos:[Zn,[Zn],(h,[u])=>Math.cos(u.evaluate(h))],tan:[Zn,[Zn],(h,[u])=>Math.tan(u.evaluate(h))],asin:[Zn,[Zn],(h,[u])=>Math.asin(u.evaluate(h))],acos:[Zn,[Zn],(h,[u])=>Math.acos(u.evaluate(h))],atan:[Zn,[Zn],(h,[u])=>Math.atan(u.evaluate(h))],min:[Zn,Na(Zn),(h,u)=>Math.min(...u.map(c=>c.evaluate(h)))],max:[Zn,Na(Zn),(h,u)=>Math.max(...u.map(c=>c.evaluate(h)))],abs:[Zn,[Zn],(h,[u])=>Math.abs(u.evaluate(h))],round:[Zn,[Zn],(h,[u])=>{const c=u.evaluate(h);return c<0?-Math.round(-c):Math.round(c)}],floor:[Zn,[Zn],(h,[u])=>Math.floor(u.evaluate(h))],ceil:[Zn,[Zn],(h,[u])=>Math.ceil(u.evaluate(h))],"filter-==":[zi,[lr,ji],(h,[u,c])=>h.properties()[u.value]===c.value],"filter-id-==":[zi,[ji],(h,[u])=>h.id()===u.value],"filter-type-==":[zi,[lr],(h,[u])=>h.geometryType()===u.value],"filter-<":[zi,[lr,ji],(h,[u,c])=>{const y=h.properties()[u.value],M=c.value;return typeof y==typeof M&&y<M}],"filter-id-<":[zi,[ji],(h,[u])=>{const c=h.id(),y=u.value;return typeof c==typeof y&&c<y}],"filter->":[zi,[lr,ji],(h,[u,c])=>{const y=h.properties()[u.value],M=c.value;return typeof y==typeof M&&y>M}],"filter-id->":[zi,[ji],(h,[u])=>{const c=h.id(),y=u.value;return typeof c==typeof y&&c>y}],"filter-<=":[zi,[lr,ji],(h,[u,c])=>{const y=h.properties()[u.value],M=c.value;return typeof y==typeof M&&y<=M}],"filter-id-<=":[zi,[ji],(h,[u])=>{const c=h.id(),y=u.value;return typeof c==typeof y&&c<=y}],"filter->=":[zi,[lr,ji],(h,[u,c])=>{const y=h.properties()[u.value],M=c.value;return typeof y==typeof M&&y>=M}],"filter-id->=":[zi,[ji],(h,[u])=>{const c=h.id(),y=u.value;return typeof c==typeof y&&c>=y}],"filter-has":[zi,[ji],(h,[u])=>u.value in h.properties()],"filter-has-id":[zi,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[zi,[Da(lr)],(h,[u])=>u.value.indexOf(h.geometryType())>=0],"filter-id-in":[zi,[Da(ji)],(h,[u])=>u.value.indexOf(h.id())>=0],"filter-in-small":[zi,[lr,Da(ji)],(h,[u,c])=>c.value.indexOf(h.properties()[u.value])>=0],"filter-in-large":[zi,[lr,Da(ji)],(h,[u,c])=>function(y,M,R,P){for(;R<=P;){const N=R+P>>1;if(M[N]===y)return!0;M[N]>y?P=N-1:R=N+1}return!1}(h.properties()[u.value],c.value,0,c.value.length-1)],all:{type:zi,overloads:[[[zi,zi],(h,[u,c])=>u.evaluate(h)&&c.evaluate(h)],[Na(zi),(h,u)=>{for(const c of u)if(!c.evaluate(h))return!1;return!0}]]},any:{type:zi,overloads:[[[zi,zi],(h,[u,c])=>u.evaluate(h)||c.evaluate(h)],[Na(zi),(h,u)=>{for(const c of u)if(c.evaluate(h))return!0;return!1}]]},"!":[zi,[zi],(h,[u])=>!u.evaluate(h)],"is-supported-script":[zi,[lr],(h,[u])=>{const c=h.globals&&h.globals.isSupportedScript;return!c||c(u.evaluate(h))}],upcase:[lr,[lr],(h,[u])=>u.evaluate(h).toUpperCase()],downcase:[lr,[lr],(h,[u])=>u.evaluate(h).toLowerCase()],concat:[lr,Na(ji),(h,u)=>u.map(c=>wi(c.evaluate(h))).join("")],"resolved-locale":[lr,[gl],(h,[u])=>u.evaluate(h).resolvedLocale()]});class $c{constructor(u,c){this.expression=u,this._warningHistory={},this._evaluator=new Xn,this._defaultValue=c?function(y){if(y.type==="color"&&lc(y.default))return new xr(0,0,0,0);switch(y.type){case"color":return xr.parse(y.default)||null;case"padding":return za.parse(y.default)||null;case"numberArray":return wa.parse(y.default)||null;case"colorArray":return aa.parse(y.default)||null;case"variableAnchorOffsetCollection":return ja.parse(y.default)||null;case"projectionDefinition":return ya.parse(y.default)||null;default:return y.default===void 0?null:y.default}}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(u,c,y,M,R,P){return this._evaluator.globals=u,this._evaluator.feature=c,this._evaluator.featureState=y,this._evaluator.canonical=M,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=P,this.expression.evaluate(this._evaluator)}evaluate(u,c,y,M,R,P){this._evaluator.globals=u,this._evaluator.feature=c||null,this._evaluator.featureState=y||null,this._evaluator.canonical=M,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=P||null;try{const N=this.expression.evaluate(this._evaluator);if(N==null||typeof N=="number"&&N!=N)return this._defaultValue;if(this._enumValues&&!(N in this._enumValues))throw new Dr(`Expected value to be one of ${Object.keys(this._enumValues).map(H=>JSON.stringify(H)).join(", ")}, but found ${JSON.stringify(N)} instead.`);return N}catch(N){return this._warningHistory[N.message]||(this._warningHistory[N.message]=!0,typeof console<"u"&&console.warn(N.message)),this._defaultValue}}}function Ou(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Su}function LA(h,u){const c=new $i(Su,Vs,[],u?function(M){const R={color:vr,string:lr,number:Zn,enum:lr,boolean:zi,formatted:ka,padding:wo,numberArray:Il,colorArray:Xa,projectionDefinition:Fa,resolvedImage:Ao,variableAnchorOffsetCollection:Wu};return M.type==="array"?Da(R[M.value]||ji,M.length):R[M.type]}(u):void 0),y=c.parse(h,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?Eu(new $c(y,u)):sc(c.errors)}class Mh{constructor(u,c){this.kind=u,this._styleExpression=c,this.isStateDependent=u!=="constant"&&!Zu(c.expression),this.globalStateRefs=sa(c.expression)}evaluateWithoutErrorHandling(u,c,y,M,R,P){return this._styleExpression.evaluateWithoutErrorHandling(u,c,y,M,R,P)}evaluate(u,c,y,M,R,P){return this._styleExpression.evaluate(u,c,y,M,R,P)}}class Hh{constructor(u,c,y,M){this.kind=u,this.zoomStops=y,this._styleExpression=c,this.isStateDependent=u!=="camera"&&!Zu(c.expression),this.globalStateRefs=sa(c.expression),this.interpolationType=M}evaluateWithoutErrorHandling(u,c,y,M,R,P){return this._styleExpression.evaluateWithoutErrorHandling(u,c,y,M,R,P)}evaluate(u,c,y,M,R,P){return this._styleExpression.evaluate(u,c,y,M,R,P)}interpolationFactor(u,c,y){return this.interpolationType?Ra.interpolationFactor(this.interpolationType,u,c,y):0}}function Iu(h,u){const c=LA(h,u);if(c.result==="error")return c;const y=c.value.expression,M=Es(y);if(!M&&!Bu(u))return sc([new Hi("","data expressions not supported")]);const R=jl(y,["zoom"]);if(!R&&!Ec(u))return sc([new Hi("","zoom expressions not supported")]);const P=Wo(y);return P||R?P instanceof Hi?sc([P]):P instanceof Ra&&!bh(u)?sc([new Hi("",'"interpolate" expressions cannot be used with this property')]):Eu(P?new Hh(M?"camera":"composite",c.value,P.labels,P instanceof Ra?P.interpolation:void 0):new Mh(M?"constant":"source",c.value)):sc([new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class kl{constructor(u,c){this._parameters=u,this._specification=c,uo(this,Bc(this._parameters,this._specification))}static deserialize(u){return new kl(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function Wo(h){let u=null;if(h instanceof or)u=Wo(h.result);else if(h instanceof qu){for(const c of h.args)if(u=Wo(c),u)break}else(h instanceof jr||h instanceof Ra)&&h.input instanceof Tl&&h.input.name==="zoom"&&(u=h);return u instanceof Hi||h.eachChild(c=>{const y=Wo(c);y instanceof Hi?u=y:!u&&y?u=new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&y&&u!==y&&(u=new Hi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function sa(h,u=new Set){return h instanceof wu&&u.add(h.key),h.eachChild(c=>{sa(c,u)}),u}function FA(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const u of h.slice(1))if(!FA(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const zA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Oc(h){if(h==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};FA(h)||(h=va(h));const u=LA(h,zA);if(u.result==="error")throw new Error(u.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,y,M)=>u.value.evaluate(c,y,{},M),needGeometry:Xc(h),getGlobalStateRefs:()=>sa(u.value.expression)}}function Zc(h,u){return h<u?-1:h>u?1:0}function Xc(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let u=1;u<h.length;u++)if(Xc(h[u]))return!0;return!1}function va(h){if(!h)return!0;const u=h[0];return h.length<=1?u!=="any":u==="=="?_a(h[1],h[2],"=="):u==="!="?Fs(_a(h[1],h[2],"==")):u==="<"||u===">"||u==="<="||u===">="?_a(h[1],h[2],u):u==="any"?(c=h.slice(1),["any"].concat(c.map(va))):u==="all"?["all"].concat(h.slice(1).map(va)):u==="none"?["all"].concat(h.slice(1).map(va).map(Fs)):u==="in"?Zr(h[1],h.slice(2)):u==="!in"?Fs(Zr(h[1],h.slice(2))):u==="has"?lu(h[1]):u!=="!has"||Fs(lu(h[1]));var c}function _a(h,u,c){switch(h){case"$type":return[`filter-type-${c}`,u];case"$id":return[`filter-id-${c}`,u];default:return[`filter-${c}`,h,u]}}function Zr(h,u){if(u.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(c=>typeof c!=typeof u[0])?["filter-in-large",h,["literal",u.sort(Zc)]]:["filter-in-small",h,["literal",u]]}}function lu(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Fs(h){return["!",h]}function Jc(h){const u=typeof h;if(u==="number"||u==="boolean"||u==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let M="[";for(const R of h)M+=`${Jc(R)},`;return`${M}]`}const c=Object.keys(h).sort();let y="{";for(let M=0;M<c.length;M++)y+=`${JSON.stringify(c[M])}:${Jc(h[c[M]])},`;return`${y}}`}function mA(h){let u="";for(const c of en)u+=`/${Jc(h[c])}`;return u}function Zd(h){const u=h.value;return u?[new wn(h.key,u,"constants have been deprecated as of v8")]:[]}function ms(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function rl(h){if(Array.isArray(h))return h.map(rl);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const u={};for(const c in h)u[c]=rl(h[c]);return u}return ms(h)}function zs(h){const u=h.key,c=h.value,y=h.valueSpec||{},M=h.objectElementValidators||{},R=h.style,P=h.styleSpec,N=h.validateSpec;let H=[];const ie=kr(c);if(ie!=="object")return[new wn(u,c,`object expected, ${ie} found`)];for(const ue in c){const ve=ue.split(".")[0],Pe=Ys(y,ve)||y["*"];let Qe;if(Ys(M,ve))Qe=M[ve];else if(Ys(y,ve))Qe=N;else if(M["*"])Qe=M["*"];else{if(!y["*"]){H.push(new wn(u,c[ue],`unknown property "${ue}"`));continue}Qe=N}H=H.concat(Qe({key:(u&&`${u}.`)+ue,value:c[ue],valueSpec:Pe,style:R,styleSpec:P,object:c,objectKey:ue,validateSpec:N},c))}for(const ue in y)M[ue]||y[ue].required&&y[ue].default===void 0&&c[ue]===void 0&&H.push(new wn(u,c,`missing required property "${ue}"`));return H}function Xd(h){const u=h.value,c=h.valueSpec,y=h.style,M=h.styleSpec,R=h.key,P=h.arrayElementValidator||h.validateSpec;if(kr(u)!=="array")return[new wn(R,u,`array expected, ${kr(u)} found`)];if(c.length&&u.length!==c.length)return[new wn(R,u,`array length ${c.length} expected, length ${u.length} found`)];if(c["min-length"]&&u.length<c["min-length"])return[new wn(R,u,`array length at least ${c["min-length"]} expected, length ${u.length} found`)];let N={type:c.value,values:c.values};M.$version<7&&(N.function=c.function),kr(c.value)==="object"&&(N=c.value);let H=[];for(let ie=0;ie<u.length;ie++)H=H.concat(P({array:u,arrayIndex:ie,value:u[ie],valueSpec:N,validateSpec:h.validateSpec,style:y,styleSpec:M,key:`${R}[${ie}]`}));return H}function jA(h){const u=h.key,c=h.value,y=h.valueSpec;let M=kr(c);return M==="number"&&c!=c&&(M="NaN"),M!=="number"?[new wn(u,c,`number expected, ${M} found`)]:"minimum"in y&&c<y.minimum?[new wn(u,c,`${c} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&c>y.maximum?[new wn(u,c,`${c} is greater than the maximum value ${y.maximum}`)]:[]}function wh(h){const u=h.valueSpec,c=ms(h.value.type);let y,M,R,P={};const N=c!=="categorical"&&h.value.property===void 0,H=!N,ie=kr(h.value.stops)==="array"&&kr(h.value.stops[0])==="array"&&kr(h.value.stops[0][0])==="object",ue=zs({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(Qe){if(c==="identity")return[new wn(Qe.key,Qe.value,'identity function may not have a "stops" property')];let qe=[];const et=Qe.value;return qe=qe.concat(Xd({key:Qe.key,value:et,valueSpec:Qe.valueSpec,validateSpec:Qe.validateSpec,style:Qe.style,styleSpec:Qe.styleSpec,arrayElementValidator:ve})),kr(et)==="array"&&et.length===0&&qe.push(new wn(Qe.key,et,"array must have at least one stop")),qe},default:function(Qe){return Qe.validateSpec({key:Qe.key,value:Qe.value,valueSpec:u,validateSpec:Qe.validateSpec,style:Qe.style,styleSpec:Qe.styleSpec})}}});return c==="identity"&&N&&ue.push(new wn(h.key,h.value,'missing required property "property"')),c==="identity"||h.value.stops||ue.push(new wn(h.key,h.value,'missing required property "stops"')),c==="exponential"&&h.valueSpec.expression&&!bh(h.valueSpec)&&ue.push(new wn(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(H&&!Bu(h.valueSpec)?ue.push(new wn(h.key,h.value,"property functions not supported")):N&&!Ec(h.valueSpec)&&ue.push(new wn(h.key,h.value,"zoom functions not supported"))),c!=="categorical"&&!ie||h.value.property!==void 0||ue.push(new wn(h.key,h.value,'"property" property is required')),ue;function ve(Qe){let qe=[];const et=Qe.value,At=Qe.key;if(kr(et)!=="array")return[new wn(At,et,`array expected, ${kr(et)} found`)];if(et.length!==2)return[new wn(At,et,`array length 2 expected, length ${et.length} found`)];if(ie){if(kr(et[0])!=="object")return[new wn(At,et,`object expected, ${kr(et[0])} found`)];if(et[0].zoom===void 0)return[new wn(At,et,"object stop key must have zoom")];if(et[0].value===void 0)return[new wn(At,et,"object stop key must have value")];if(R&&R>ms(et[0].zoom))return[new wn(At,et[0].zoom,"stop zoom values must appear in ascending order")];ms(et[0].zoom)!==R&&(R=ms(et[0].zoom),M=void 0,P={}),qe=qe.concat(zs({key:`${At}[0]`,value:et[0],valueSpec:{zoom:{}},validateSpec:Qe.validateSpec,style:Qe.style,styleSpec:Qe.styleSpec,objectElementValidators:{zoom:jA,value:Pe}}))}else qe=qe.concat(Pe({key:`${At}[0]`,value:et[0],validateSpec:Qe.validateSpec,style:Qe.style,styleSpec:Qe.styleSpec},et));return Ou(rl(et[1]))?qe.concat([new wn(`${At}[1]`,et[1],"expressions are not allowed in function stops.")]):qe.concat(Qe.validateSpec({key:`${At}[1]`,value:et[1],valueSpec:u,validateSpec:Qe.validateSpec,style:Qe.style,styleSpec:Qe.styleSpec}))}function Pe(Qe,qe){const et=kr(Qe.value),At=ms(Qe.value),Mt=Qe.value!==null?Qe.value:qe;if(y){if(et!==y)return[new wn(Qe.key,Mt,`${et} stop domain type must match previous stop domain type ${y}`)]}else y=et;if(et!=="number"&&et!=="string"&&et!=="boolean")return[new wn(Qe.key,Mt,"stop domain value must be a number, string, or boolean")];if(et!=="number"&&c!=="categorical"){let Qt=`number expected, ${et} found`;return Bu(u)&&c===void 0&&(Qt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wn(Qe.key,Mt,Qt)]}return c!=="categorical"||et!=="number"||isFinite(At)&&Math.floor(At)===At?c!=="categorical"&&et==="number"&&M!==void 0&&At<M?[new wn(Qe.key,Mt,"stop domain values must appear in ascending order")]:(M=At,c==="categorical"&&At in P?[new wn(Qe.key,Mt,"stop domain values must be unique")]:(P[At]=!0,[])):[new wn(Qe.key,Mt,`integer expected, found ${At}`)]}}function Ju(h){const u=(h.expressionContext==="property"?Iu:LA)(rl(h.value),h.valueSpec);if(u.result==="error")return u.value.map(y=>new wn(`${h.key}${y.key}`,h.value,y.message));const c=u.value.expression||u.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!c.outputDefined())return[new wn(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!Zu(c))return[new wn(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!Zu(c))return[new wn(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!jl(c,["zoom","feature-state"]))return[new wn(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!Es(c))return[new wn(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rt(h){const u=h.key,c=h.value,y=kr(c);return y!=="string"?[new wn(u,c,`color expected, ${y} found`)]:xr.parse(String(c))?[]:[new wn(u,c,`color expected, "${c}" found`)]}function $s(h){const u=h.key,c=h.value,y=h.valueSpec,M=[];return Array.isArray(y.values)?y.values.indexOf(ms(c))===-1&&M.push(new wn(u,c,`expected one of [${y.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(y.values).indexOf(ms(c))===-1&&M.push(new wn(u,c,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(c)} found`)),M}function Ga(h){return FA(rl(h.value))?Ju(uo({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Zo(h)}function Zo(h){const u=h.value,c=h.key;if(kr(u)!=="array")return[new wn(c,u,`array expected, ${kr(u)} found`)];const y=h.styleSpec;let M,R=[];if(u.length<1)return[new wn(c,u,"filter array must have at least 1 element")];switch(R=R.concat($s({key:`${c}[0]`,value:u[0],valueSpec:y.filter_operator,style:h.style,styleSpec:h.styleSpec})),ms(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&ms(u[1])==="$type"&&R.push(new wn(c,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&R.push(new wn(c,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(M=kr(u[1]),M!=="string"&&R.push(new wn(`${c}[1]`,u[1],`string expected, ${M} found`)));for(let P=2;P<u.length;P++)M=kr(u[P]),ms(u[1])==="$type"?R=R.concat($s({key:`${c}[${P}]`,value:u[P],valueSpec:y.geometry_type,style:h.style,styleSpec:h.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&R.push(new wn(`${c}[${P}]`,u[P],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let P=1;P<u.length;P++)R=R.concat(Zo({key:`${c}[${P}]`,value:u[P],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":M=kr(u[1]),u.length!==2?R.push(new wn(c,u,`filter array for "${u[0]}" operator must have 2 elements`)):M!=="string"&&R.push(new wn(`${c}[1]`,u[1],`string expected, ${M} found`))}return R}function gr(h,u){const c=h.key,y=h.validateSpec,M=h.style,R=h.styleSpec,P=h.value,N=h.objectKey,H=R[`${u}_${h.layerType}`];if(!H)return[];const ie=N.match(/^(.*)-transition$/);if(u==="paint"&&ie&&H[ie[1]]&&H[ie[1]].transition)return y({key:c,value:P,valueSpec:R.transition,style:M,styleSpec:R});const ue=h.valueSpec||H[N];if(!ue)return[new wn(c,P,`unknown property "${N}"`)];let ve;if(kr(P)==="string"&&Bu(ue)&&!ue.tokens&&(ve=/^{([^}]+)}$/.exec(P)))return[new wn(c,P,`"${N}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ve[1])} }\`.`)];const Pe=[];return h.layerType==="symbol"&&(N==="text-field"&&M&&!M.glyphs&&Pe.push(new wn(c,P,'use of "text-field" requires a style "glyphs" property')),N==="text-font"&&lc(rl(P))&&ms(P.type)==="identity"&&Pe.push(new wn(c,P,'"text-font" does not support identity functions'))),Pe.concat(y({key:h.key,value:P,valueSpec:ue,style:M,styleSpec:R,expressionContext:"property",propertyType:u,propertyKey:N}))}function gs(h){return gr(h,"paint")}function eh(h){return gr(h,"layout")}function Sh(h){let u=[];const c=h.value,y=h.key,M=h.style,R=h.styleSpec;if(kr(c)!=="object")return[new wn(y,c,`object expected, ${kr(c)} found`)];c.type||c.ref||u.push(new wn(y,c,'either "type" or "ref" is required'));let P=ms(c.type);const N=ms(c.ref);if(c.id){const H=ms(c.id);for(let ie=0;ie<h.arrayIndex;ie++){const ue=M.layers[ie];ms(ue.id)===H&&u.push(new wn(y,c.id,`duplicate layer id "${c.id}", previously used at line ${ue.id.__line__}`))}}if("ref"in c){let H;["type","source","source-layer","filter","layout"].forEach(ie=>{ie in c&&u.push(new wn(y,c[ie],`"${ie}" is prohibited for ref layers`))}),M.layers.forEach(ie=>{ms(ie.id)===N&&(H=ie)}),H?H.ref?u.push(new wn(y,c.ref,"ref cannot reference another ref layer")):P=ms(H.type):u.push(new wn(y,c.ref,`ref layer "${N}" not found`))}else if(P!=="background")if(c.source){const H=M.sources&&M.sources[c.source],ie=H&&ms(H.type);H?ie==="vector"&&P==="raster"?u.push(new wn(y,c.source,`layer "${c.id}" requires a raster source`)):ie!=="raster-dem"&&P==="hillshade"||ie!=="raster-dem"&&P==="color-relief"?u.push(new wn(y,c.source,`layer "${c.id}" requires a raster-dem source`)):ie==="raster"&&P!=="raster"?u.push(new wn(y,c.source,`layer "${c.id}" requires a vector source`)):ie!=="vector"||c["source-layer"]?ie==="raster-dem"&&P!=="hillshade"&&P!=="color-relief"?u.push(new wn(y,c.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):P!=="line"||!c.paint||!c.paint["line-gradient"]||ie==="geojson"&&H.lineMetrics||u.push(new wn(y,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new wn(y,c,`layer "${c.id}" must specify a "source-layer"`)):u.push(new wn(y,c.source,`source "${c.source}" not found`))}else u.push(new wn(y,c,'missing required property "source"'));return u=u.concat(zs({key:y,value:c,valueSpec:R.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${y}.type`,value:c.type,valueSpec:R.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:c,objectKey:"type"}),filter:Ga,layout:H=>zs({layer:c,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":ie=>eh(uo({layerType:P},ie))}}),paint:H=>zs({layer:c,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":ie=>gs(uo({layerType:P},ie))}})}})),u}function Ro(h){const u=h.value,c=h.key,y=kr(u);return y!=="string"?[new wn(c,u,`string expected, ${y} found`)]:[]}const th={promoteId:function({key:h,value:u}){if(kr(u)==="string")return Ro({key:h,value:u});{const c=[];for(const y in u)c.push(...Ro({key:`${h}.${y}`,value:u[y]}));return c}}};function Tu(h){const u=h.value,c=h.key,y=h.styleSpec,M=h.style,R=h.validateSpec;if(!u.type)return[new wn(c,u,'"type" is required')];const P=ms(u.type);let N;switch(P){case"vector":case"raster":return N=zs({key:c,value:u,valueSpec:y[`source_${P.replace("-","_")}`],style:h.style,styleSpec:y,objectElementValidators:th,validateSpec:R}),N;case"raster-dem":return N=function(H){var ie;const ue=(ie=H.sourceName)!==null&&ie!==void 0?ie:"",ve=H.value,Pe=H.styleSpec,Qe=Pe.source_raster_dem,qe=H.style;let et=[];const At=kr(ve);if(ve===void 0)return et;if(At!=="object")return et.push(new wn("source_raster_dem",ve,`object expected, ${At} found`)),et;const Mt=ms(ve.encoding)==="custom",Qt=["redFactor","greenFactor","blueFactor","baseShift"],Dt=H.value.encoding?`"${H.value.encoding}"`:"Default";for(const jt in ve)!Mt&&Qt.includes(jt)?et.push(new wn(jt,ve[jt],`In "${ue}": "${jt}" is only valid when "encoding" is set to "custom". ${Dt} encoding found`)):Qe[jt]?et=et.concat(H.validateSpec({key:jt,value:ve[jt],valueSpec:Qe[jt],validateSpec:H.validateSpec,style:qe,styleSpec:Pe})):et.push(new wn(jt,ve[jt],`unknown property "${jt}"`));return et}({sourceName:c,value:u,style:h.style,styleSpec:y,validateSpec:R}),N;case"geojson":if(N=zs({key:c,value:u,valueSpec:y.source_geojson,style:M,styleSpec:y,validateSpec:R,objectElementValidators:th}),u.cluster)for(const H in u.clusterProperties){const[ie,ue]=u.clusterProperties[H],ve=typeof ie=="string"?[ie,["accumulated"],["get",H]]:ie;N.push(...Ju({key:`${c}.${H}.map`,value:ue,expressionContext:"cluster-map"})),N.push(...Ju({key:`${c}.${H}.reduce`,value:ve,expressionContext:"cluster-reduce"}))}return N;case"video":return zs({key:c,value:u,valueSpec:y.source_video,style:M,validateSpec:R,styleSpec:y});case"image":return zs({key:c,value:u,valueSpec:y.source_image,style:M,validateSpec:R,styleSpec:y});case"canvas":return[new wn(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $s({key:`${c}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Od(h){const u=h.value,c=h.styleSpec,y=c.light,M=h.style;let R=[];const P=kr(u);if(u===void 0)return R;if(P!=="object")return R=R.concat([new wn("light",u,`object expected, ${P} found`)]),R;for(const N in u){const H=N.match(/^(.*)-transition$/);R=R.concat(H&&y[H[1]]&&y[H[1]].transition?h.validateSpec({key:N,value:u[N],valueSpec:c.transition,validateSpec:h.validateSpec,style:M,styleSpec:c}):y[N]?h.validateSpec({key:N,value:u[N],valueSpec:y[N],validateSpec:h.validateSpec,style:M,styleSpec:c}):[new wn(N,u[N],`unknown property "${N}"`)])}return R}function Jd(h){const u=h.value,c=h.styleSpec,y=c.sky,M=h.style,R=kr(u);if(u===void 0)return[];if(R!=="object")return[new wn("sky",u,`object expected, ${R} found`)];let P=[];for(const N in u)P=P.concat(y[N]?h.validateSpec({key:N,value:u[N],valueSpec:y[N],style:M,styleSpec:c}):[new wn(N,u[N],`unknown property "${N}"`)]);return P}function Sp(h){const u=h.value,c=h.styleSpec,y=c.terrain,M=h.style;let R=[];const P=kr(u);if(u===void 0)return R;if(P!=="object")return R=R.concat([new wn("terrain",u,`object expected, ${P} found`)]),R;for(const N in u)R=R.concat(y[N]?h.validateSpec({key:N,value:u[N],valueSpec:y[N],validateSpec:h.validateSpec,style:M,styleSpec:c}):[new wn(N,u[N],`unknown property "${N}"`)]);return R}function ba(h){let u=[];const c=h.value,y=h.key;if(Array.isArray(c)){const M=[],R=[];for(const P in c)c[P].id&&M.includes(c[P].id)&&u.push(new wn(y,c,`all the sprites' ids must be unique, but ${c[P].id} is duplicated`)),M.push(c[P].id),c[P].url&&R.includes(c[P].url)&&u.push(new wn(y,c,`all the sprites' URLs must be unique, but ${c[P].url} is duplicated`)),R.push(c[P].url),u=u.concat(zs({key:`${y}[${P}]`,value:c[P],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return u}return Ro({key:y,value:c})}function Eh(h){return u=h.value,u&&u.constructor===Object?[]:[new wn(h.key,h.value,`object expected, ${kr(h.value)} found`)];var u}const nh={"*":()=>[],array:Xd,boolean:function(h){const u=h.value,c=h.key,y=kr(u);return y!=="boolean"?[new wn(c,u,`boolean expected, ${y} found`)]:[]},number:jA,color:rt,constants:Zd,enum:$s,filter:Ga,function:wh,layer:Sh,object:zs,source:Tu,light:Od,sky:Jd,terrain:Sp,projection:function(h){const u=h.value,c=h.styleSpec,y=c.projection,M=h.style,R=kr(u);if(u===void 0)return[];if(R!=="object")return[new wn("projection",u,`object expected, ${R} found`)];let P=[];for(const N in u)P=P.concat(y[N]?h.validateSpec({key:N,value:u[N],valueSpec:y[N],style:M,styleSpec:c}):[new wn(N,u[N],`unknown property "${N}"`)]);return P},projectionDefinition:function(h){const u=h.key;let c=h.value;c=c instanceof String?c.valueOf():c;const y=kr(c);return y!=="array"||function(M){return Array.isArray(M)&&M.length===3&&typeof M[0]=="string"&&typeof M[1]=="string"&&typeof M[2]=="number"}(c)||function(M){return!!["interpolate","step","literal"].includes(M[0])}(c)?["array","string"].includes(y)?[]:[new wn(u,c,`projection expected, invalid type "${y}" found`)]:[new wn(u,c,`projection expected, invalid array ${JSON.stringify(c)} found`)]},string:Ro,formatted:function(h){return Ro(h).length===0?[]:Ju(h)},resolvedImage:function(h){return Ro(h).length===0?[]:Ju(h)},padding:function(h){const u=h.key,c=h.value;if(kr(c)==="array"){if(c.length<1||c.length>4)return[new wn(u,c,`padding requires 1 to 4 values; ${c.length} values found`)];const y={type:"number"};let M=[];for(let R=0;R<c.length;R++)M=M.concat(h.validateSpec({key:`${u}[${R}]`,value:c[R],validateSpec:h.validateSpec,valueSpec:y}));return M}return jA({key:u,value:c,valueSpec:{}})},numberArray:function(h){const u=h.key,c=h.value;if(kr(c)==="array"){const y={type:"number"};if(c.length<1)return[new wn(u,c,"array length at least 1 expected, length 0 found")];let M=[];for(let R=0;R<c.length;R++)M=M.concat(h.validateSpec({key:`${u}[${R}]`,value:c[R],validateSpec:h.validateSpec,valueSpec:y}));return M}return jA({key:u,value:c,valueSpec:{}})},colorArray:function(h){const u=h.key,c=h.value;if(kr(c)==="array"){if(c.length<1)return[new wn(u,c,"array length at least 1 expected, length 0 found")];let y=[];for(let M=0;M<c.length;M++)y=y.concat(rt({key:`${u}[${M}]`,value:c[M]}));return y}return rt({key:u,value:c})},variableAnchorOffsetCollection:function(h){const u=h.key,c=h.value,y=kr(c),M=h.styleSpec;if(y!=="array"||c.length<1||c.length%2!=0)return[new wn(u,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let R=[];for(let P=0;P<c.length;P+=2)R=R.concat($s({key:`${u}[${P}]`,value:c[P],valueSpec:M.layout_symbol["text-anchor"]})),R=R.concat(Xd({key:`${u}[${P+1}]`,value:c[P+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:M}));return R},sprite:ba,state:Eh};function NA(h){const u=h.value,c=h.valueSpec,y=h.styleSpec;return h.validateSpec=NA,c.expression&&lc(ms(u))?wh(h):c.expression&&Ou(rl(u))?Ju(h):c.type&&nh[c.type]?nh[c.type](h):zs(uo({},h,{valueSpec:c.type?y[c.type]:c}))}function ef(h){const u=h.value,c=h.key,y=Ro(h);return y.length||(u.indexOf("{fontstack}")===-1&&y.push(new wn(c,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&y.push(new wn(c,u,'"glyphs" url must include a "{range}" token'))),y}function ol(h,u=it){let c=[];return c=c.concat(NA({key:"",value:h,valueSpec:u.$root,styleSpec:u,style:h,validateSpec:NA,objectElementValidators:{glyphs:ef,"*":()=>[]}})),h.constants&&(c=c.concat(Zd({key:"constants",value:h.constants}))),Vh(c)}function ts(h){return function(u){return h({...u,validateSpec:NA})}}function Vh(h){return[].concat(h).sort((u,c)=>u.line-c.line)}function uu(h){return function(...u){return Vh(h.apply(this,u))}}ol.source=uu(ts(Tu)),ol.sprite=uu(ts(ba)),ol.glyphs=uu(ts(ef)),ol.light=uu(ts(Od)),ol.sky=uu(ts(Jd)),ol.terrain=uu(ts(Sp)),ol.state=uu(ts(Eh)),ol.layer=uu(ts(Sh)),ol.filter=uu(ts(Ga)),ol.paintProperty=uu(ts(gs)),ol.layoutProperty=uu(ts(eh));const Id=ol,tf=Id.light,Cl=Id.sky,Ic=Id.paintProperty,Uf=Id.layoutProperty;function $h(h,u){let c=!1;if(u&&u.length)for(const y of u)h.fire(new ht(new Error(y.message))),c=!0;return c}class Ca{constructor(u,c,y){const M=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const P=new Int32Array(this.arrayBuffer);u=P[0],this.d=(c=P[1])+2*(y=P[2]);for(let H=0;H<this.d*this.d;H++){const ie=P[3+H],ue=P[3+H+1];M.push(ie===ue?null:P.subarray(ie,ue))}const N=P[3+M.length+1];this.keys=P.subarray(P[3+M.length],N),this.bboxes=P.subarray(N),this.insert=this._insertReadonly}else{this.d=c+2*y;for(let P=0;P<this.d*this.d;P++)M.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=u,this.padding=y,this.scale=c/u,this.uid=0;const R=y/c*u;this.min=-R,this.max=u+R}insert(u,c,y,M,R){this._forEachCell(c,y,M,R,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(c),this.bboxes.push(y),this.bboxes.push(M),this.bboxes.push(R)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,c,y,M,R,P){this.cells[R].push(P)}query(u,c,y,M,R){const P=this.min,N=this.max;if(u<=P&&c<=P&&N<=y&&N<=M&&!R)return Array.prototype.slice.call(this.keys);{const H=[];return this._forEachCell(u,c,y,M,this._queryCell,H,{},R),H}}_queryCell(u,c,y,M,R,P,N,H){const ie=this.cells[R];if(ie!==null){const ue=this.keys,ve=this.bboxes;for(let Pe=0;Pe<ie.length;Pe++){const Qe=ie[Pe];if(N[Qe]===void 0){const qe=4*Qe;(H?H(ve[qe+0],ve[qe+1],ve[qe+2],ve[qe+3]):u<=ve[qe+2]&&c<=ve[qe+3]&&y>=ve[qe+0]&&M>=ve[qe+1])?(N[Qe]=!0,P.push(ue[Qe])):N[Qe]=!1}}}}_forEachCell(u,c,y,M,R,P,N,H){const ie=this._convertToCellCoord(u),ue=this._convertToCellCoord(c),ve=this._convertToCellCoord(y),Pe=this._convertToCellCoord(M);for(let Qe=ie;Qe<=ve;Qe++)for(let qe=ue;qe<=Pe;qe++){const et=this.d*qe+Qe;if((!H||H(this._convertFromCellCoord(Qe),this._convertFromCellCoord(qe),this._convertFromCellCoord(Qe+1),this._convertFromCellCoord(qe+1)))&&R.call(this,u,c,y,M,et,P,N,H))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,c=3+this.cells.length+1+1;let y=0;for(let P=0;P<this.cells.length;P++)y+=this.cells[P].length;const M=new Int32Array(c+y+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let R=c;for(let P=0;P<u.length;P++){const N=u[P];M[3+P]=R,M.set(N,R),R+=N.length}return M[3+u.length]=R,M.set(this.keys,R),R+=this.keys.length,M[3+u.length+1]=R,M.set(this.bboxes,R),R+=this.bboxes.length,M.buffer}static serialize(u,c){const y=u.toArrayBuffer();return c&&c.push(y),{buffer:y}}static deserialize(u){return new Ca(u.buffer)}}const Xr={};function ci(h,u,c={}){if(Xr[h])throw new Error(`${h} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:h,writeable:!1}),Xr[h]={klass:u,omit:c.omit||[],shallow:c.shallow||[]}}ci("Object",Object),ci("Set",Set),ci("TransferableGridIndex",Ca),ci("Color",xr),ci("Error",Error),ci("AJAXError",We),ci("ResolvedImage",Ja),ci("StylePropertyFunction",kl),ci("StyleExpression",$c,{omit:["_evaluator"]}),ci("ZoomDependentExpression",Hh),ci("ZoomConstantExpression",Mh),ci("CompoundExpression",Tl,{omit:["_evaluate"]});for(const h in Su)Su[h]._classRegistryKey||ci(`Expression_${h}`,Su[h]);function GA(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function WA(h){return h.$name||h.constructor._classRegistryKey}function Zh(h){return!function(u){if(u===null||typeof u!="object")return!1;const c=WA(u);return!(!c||c==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||GA(h)||Jn(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function Tc(h,u){if(Zh(h))return(GA(h)||Jn(h))&&u&&u.push(h),ArrayBuffer.isView(h)&&u&&u.push(h.buffer),h instanceof ImageData&&u&&u.push(h.data.buffer),h;if(Array.isArray(h)){const R=[];for(const P of h)R.push(Tc(P,u));return R}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const c=WA(h);if(!c)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!Xr[c])throw new Error(`${c} is not registered.`);const{klass:y}=Xr[c],M=y.serialize?y.serialize(h,u):{};if(y.serialize){if(u&&M===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const R in h){if(!h.hasOwnProperty(R)||Xr[c].omit.indexOf(R)>=0)continue;const P=h[R];M[R]=Xr[c].shallow.indexOf(R)>=0?P:Tc(P,u)}h instanceof Error&&(M.message=h.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(M.$name=c),M}function gA(h){if(Zh(h))return h;if(Array.isArray(h))return h.map(gA);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const u=WA(h)||"Object";if(!Xr[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:c}=Xr[u];if(!c)throw new Error(`can't deserialize unregistered class ${u}`);if(c.deserialize)return c.deserialize(h);const y=Object.create(c.prototype);for(const M of Object.keys(h)){if(M==="$name")continue;const R=h[M];y[M]=Xr[u].shallow.indexOf(M)>=0?R:gA(R)}return y}class nf{constructor(){this.first=!0}update(u,c){const y=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=c),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=y,!0))}}const no={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Hangul Syllables":h=>h>=44032&&h<=55215,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function Nl(h){for(const u of h)if(yA(u.charCodeAt(0)))return!0;return!1}function Bh(h){for(const u of h)if(!Ac(u.charCodeAt(0)))return!1;return!0}function uc(h){const u=h.map(c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}}).filter(c=>c);return new RegExp(u.join("|"),"u")}const ku=uc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ac(h){return!ku.test(String.fromCodePoint(h))}const Oh=uc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function yA(h){return!(h!==746&&h!==747&&(h<4352||!(no["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||no["CJK Compatibility"](h)||no["CJK Strokes"](h)||!(!no["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||no["Enclosed CJK Letters and Months"](h)||no["Ideographic Description Characters"](h)||no.Kanbun(h)||no.Katakana(h)&&h!==12540||!(!no["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!no["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||no["Vertical Forms"](h)||no["Yijing Hexagram Symbols"](h)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(h))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(h))||Oh.test(String.fromCodePoint(h)))))}function ih(h){return!(yA(h)||function(u){return!!(no["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||no["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||no["Letterlike Symbols"](u)||no["Number Forms"](u)||no["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||no["Control Pictures"](u)&&u!==9251||no["Optical Character Recognition"](u)||no["Enclosed Alphanumerics"](u)||no["Geometric Shapes"](u)||no["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||no["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||no["CJK Symbols and Punctuation"](u)||no.Katakana(u)||no["Private Use Area"](u)||no["CJK Compatibility Forms"](u)||no["Small Form Variants"](u)||no["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(h))}const eA=uc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function _l(h){return eA.test(String.fromCodePoint(h))}function Ep(h,u){return!(!u&&_l(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||no.Khmer(h))}function rf(h){for(const u of h)if(_l(u.charCodeAt(0)))return!0;return!1}const Gl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(Gl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,u){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const c=h.pluginURL,y=new Promise(R=>{this.loadScriptResolve=R});u(c);const M=new Promise(R=>setTimeout(()=>R(),this.TIMEOUT));if(yield Promise.race([y,M]),this.isParsed()){const R={pluginStatus:"loaded",pluginURL:c};return this.setState(R),R}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${c}`)})}};class Po{constructor(u,c){this.zoom=u,c?(this.now=c.now||0,this.fadeDuration=c.fadeDuration||0,this.zoomHistory=c.zoomHistory||new nf,this.transition=c.transition||{},this.globalState=c.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nf,this.transition={},this.globalState={})}isSupportedScript(u){return function(c,y){for(const M of c)if(!Ep(M.charCodeAt(0),y))return!1;return!0}(u,Gl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,c=u-Math.floor(u),y=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*c}}}class Wl{constructor(u,c){this.property=u,this.value=c,this.expression=function(y,M){if(lc(y))return new kl(y,M);if(Ou(y)){const R=Iu(y,M);if(R.result==="error")throw new Error(R.value.map(P=>`${P.key}: ${P.message}`).join(", "));return R.value}{let R=y;return M.type==="color"&&typeof y=="string"?R=xr.parse(y):M.type!=="padding"||typeof y!="number"&&!Array.isArray(y)?M.type!=="numberArray"||typeof y!="number"&&!Array.isArray(y)?M.type!=="colorArray"||typeof y!="string"&&!Array.isArray(y)?M.type==="variableAnchorOffsetCollection"&&Array.isArray(y)?R=ja.parse(y):M.type==="projectionDefinition"&&typeof y=="string"&&(R=ya.parse(y)):R=aa.parse(y):R=wa.parse(y):R=za.parse(y),{globalStateRefs:new Set,kind:"constant",evaluate:()=>R}}}(c===void 0?u.specification.default:c,u.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(u,c,y){return this.property.possiblyEvaluate(this,u,c,y)}setGlobalState(u){this.expression.evaluate=(c,y,M,R,P,N)=>(c.globalState=u,this._evaluate.call(this.expression,c,y,M,R,P,N))}}class Xh{constructor(u){this.property=u,this.value=new Wl(u,void 0)}transitioned(u,c){return new vA(this.property,this.value,c,Fe({},u.transition,this.transition),u.now)}untransitioned(){return new vA(this.property,this.value,null,{},0)}}class Lf{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return bt(this._values[u].value.value)}setValue(u,c){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Xh(this._values[u].property)),this._values[u].value=new Wl(this._values[u].property,c===null?void 0:bt(c))}getTransition(u){return bt(this._values[u].transition)}setTransition(u,c){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Xh(this._values[u].property)),this._values[u].transition=bt(c)||void 0}serialize(){const u={};for(const c of Object.keys(this._values)){const y=this.getValue(c);y!==void 0&&(u[c]=y);const M=this.getTransition(c);M!==void 0&&(u[`${c}-transition`]=M)}return u}transitioned(u,c){const y=new io(this._properties);for(const M of Object.keys(this._values))y._values[M]=this._values[M].transitioned(u,c._values[M]);return y}untransitioned(){const u=new io(this._properties);for(const c of Object.keys(this._values))u._values[c]=this._values[c].untransitioned();return u}}class vA{constructor(u,c,y,M,R){this.property=u,this.value=c,this.begin=R+M.delay||0,this.end=this.begin+M.duration||0,u.specification.transition&&(M.delay||M.duration)&&(this.prior=y)}possiblyEvaluate(u,c,y){const M=u.now||0,R=this.value.possiblyEvaluate(u,c,y),P=this.prior;if(P){if(M>this.end)return this.prior=null,R;if(this.value.isDataDriven())return this.prior=null,R;if(M<this.begin)return P.possiblyEvaluate(u,c,y);{const N=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(P.possiblyEvaluate(u,c,y),R,lt(N))}}return R}}class io{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,c,y){const M=new QA(this._properties);for(const R of Object.keys(this._values))M._values[R]=this._values[R].possiblyEvaluate(u,c,y);return M}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class Ko{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues),this._globalState={}}hasValue(u){return this._values[u].value!==void 0}getValue(u){return bt(this._values[u].value)}setValue(u,c){this._values[u]=new Wl(this._values[u].property,c===null?void 0:bt(c)),this._values[u].setGlobalState(this._globalState)}serialize(){const u={};for(const c of Object.keys(this._values)){const y=this.getValue(c);y!==void 0&&(u[c]=y)}return u}possiblyEvaluate(u,c,y){const M=new QA(this._properties);for(const R of Object.keys(this._values))M._values[R]=this._values[R].possiblyEvaluate(u,c,y);return M}setGlobalState(u){this._globalState=u;for(const c of Object.values(this._values))c.setGlobalState(u)}}class Pr{constructor(u,c,y){this.property=u,this.value=c,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,c,y,M){return this.property.evaluate(this.value,this.parameters,u,c,y,M)}}class QA{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class Ii{constructor(u){this.specification=u}possiblyEvaluate(u,c){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(c)}interpolate(u,c,y){const M=PA[this.specification.type];return M?M(u,c,y):u}}class ki{constructor(u,c){this.specification=u,this.overrides=c}possiblyEvaluate(u,c,y,M){return new Pr(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(c,null,{},y,M)}:u.expression,c)}interpolate(u,c,y){if(u.value.kind!=="constant"||c.value.kind!=="constant")return u;if(u.value.value===void 0||c.value.value===void 0)return new Pr(this,{kind:"constant",value:void 0},u.parameters);const M=PA[this.specification.type];if(M){const R=M(u.value.value,c.value.value,y);return new Pr(this,{kind:"constant",value:R},u.parameters)}return u}evaluate(u,c,y,M,R,P){return u.kind==="constant"?u.value:u.evaluate(c,y,M,R,P)}}class kc extends ki{possiblyEvaluate(u,c,y,M){if(u.value===void 0)return new Pr(this,{kind:"constant",value:void 0},c);if(u.expression.kind==="constant"){const R=u.expression.evaluate(c,null,{},y,M),P=u.property.specification.type==="resolvedImage"&&typeof R!="string"?R.name:R,N=this._calculate(P,P,P,c);return new Pr(this,{kind:"constant",value:N},c)}if(u.expression.kind==="camera"){const R=this._calculate(u.expression.evaluate({zoom:c.zoom-1}),u.expression.evaluate({zoom:c.zoom}),u.expression.evaluate({zoom:c.zoom+1}),c);return new Pr(this,{kind:"constant",value:R},c)}return new Pr(this,u.expression,c)}evaluate(u,c,y,M,R,P){if(u.kind==="source"){const N=u.evaluate(c,y,M,R,P);return this._calculate(N,N,N,c)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(c.zoom)-1},y,M),u.evaluate({zoom:Math.floor(c.zoom)},y,M),u.evaluate({zoom:Math.floor(c.zoom)+1},y,M),c):u.value}_calculate(u,c,y,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:c}:{from:y,to:c}}interpolate(u){return u}}class Du{constructor(u){this.specification=u}possiblyEvaluate(u,c,y,M){if(u.value!==void 0){if(u.expression.kind==="constant"){const R=u.expression.evaluate(c,null,{},y,M);return this._calculate(R,R,R,c)}return this._calculate(u.expression.evaluate(new Po(Math.floor(c.zoom-1),c)),u.expression.evaluate(new Po(Math.floor(c.zoom),c)),u.expression.evaluate(new Po(Math.floor(c.zoom+1),c)),c)}}_calculate(u,c,y,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:c}:{from:y,to:c}}interpolate(u){return u}}class Au{constructor(u){this.specification=u}possiblyEvaluate(u,c,y,M){return!!u.expression.evaluate(c,null,{},y,M)}interpolate(){return!1}}class la{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in u){const y=u[c];y.specification.overridable&&this.overridableProperties.push(c);const M=this.defaultPropertyValues[c]=new Wl(y,void 0),R=this.defaultTransitionablePropertyValues[c]=new Xh(y);this.defaultTransitioningPropertyValues[c]=R.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=M.possiblyEvaluate({})}}}ci("DataDrivenProperty",ki),ci("DataConstantProperty",Ii),ci("CrossFadedDataDrivenProperty",kc),ci("CrossFadedProperty",Du),ci("ColorRampProperty",Au);const mo="-transition";class Ql extends Tt{constructor(u,c){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,this._globalState={},u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter,this._featureFilter=Oc(u.filter)),c.layout&&(this._unevaluatedLayout=new Ko(c.layout)),c.paint)){this._transitionablePaint=new Lf(c.paint);for(const y in u.paint)this.setPaintProperty(y,u.paint[y],{validate:!1});for(const y in u.layout)this.setLayoutProperty(y,u.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new QA(c.paint)}}setFilter(u){this.filter=u,this._featureFilter=Oc(u)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}getLayoutAffectingGlobalStateRefs(){const u=new Set;if(this._unevaluatedLayout)for(const c in this._unevaluatedLayout._values){const y=this._unevaluatedLayout._values[c];for(const M of y.getGlobalStateRefs())u.add(M)}for(const c of this._featureFilter.getGlobalStateRefs())u.add(c);return u}getPaintAffectingGlobalStateRefs(){var u;const c=new globalThis.Map;if(this._transitionablePaint)for(const y in this._transitionablePaint._values){const M=this._transitionablePaint._values[y].value;for(const R of M.getGlobalStateRefs()){const P=(u=c.get(R))!==null&&u!==void 0?u:[];P.push({name:y,value:M.value}),c.set(R,P)}}return c}setLayoutProperty(u,c,y={}){c!=null&&this._validate(Uf,`layers.${this.id}.layout.${u}`,u,c,y)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,c):this.visibility=c)}getPaintProperty(u){return u.endsWith(mo)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,c,y={}){if(c!=null&&this._validate(Ic,`layers.${this.id}.paint.${u}`,u,c,y))return!1;if(u.endsWith(mo))return this._transitionablePaint.setTransition(u.slice(0,-11),c||void 0),!1;{const M=this._transitionablePaint._values[u],R=M.property.specification["property-type"]==="cross-faded-data-driven",P=M.value.isDataDriven(),N=M.value;this._transitionablePaint.setValue(u,c),this._handleSpecialPaintPropertyUpdate(u);const H=this._transitionablePaint._values[u].value;return H.isDataDriven()||P||R||this._handleOverridablePaintPropertyUpdate(u,N,H)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,c,y){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,c){u.globalState=this._globalState,u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,c)}setGlobalState(u){this._globalState=u,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(u)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),He(u,(c,y)=>!(c===void 0||y==="layout"&&!Object.keys(c).length||y==="paint"&&!Object.keys(c).length))}_validate(u,c,y,M,R={}){return(!R||R.validate!==!1)&&$h(this,u.call(Id,{key:c,layerType:this.type,objectKey:y,value:M,styleSpec:it,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const c=this.paint.get(u);if(c instanceof Pr&&Bu(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const Ff={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Jh{constructor(u,c){this._structArray=u,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Uo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,c){return u._trim(),c&&(u.isTransferred=!0,c.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const c=Object.create(this.prototype);return c.arrayBuffer=u.arrayBuffer,c.length=u.length,c.capacity=u.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Wa(h,u=1){let c=0,y=0;return{members:h.map(M=>{const R=Ff[M.type].BYTES_PER_ELEMENT,P=c=ed(c,Math.max(u,R)),N=M.components||1;return y=Math.max(y,R),c+=R*N,{name:M.name,type:M.type,components:N,offset:P}}),size:ed(c,Math.max(y,u)),alignment:u}}function ed(h,u){return Math.ceil(h/u)*u}class CA extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,c){const y=this.length;return this.resize(y+1),this.emplace(y,u,c)}emplace(u,c,y){const M=2*u;return this.int16[M+0]=c,this.int16[M+1]=y,u}}CA.prototype.bytesPerElement=4,ci("StructArrayLayout2i4",CA);class Dc extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,c,y){const M=this.length;return this.resize(M+1),this.emplace(M,u,c,y)}emplace(u,c,y,M){const R=3*u;return this.int16[R+0]=c,this.int16[R+1]=y,this.int16[R+2]=M,u}}Dc.prototype.bytesPerElement=6,ci("StructArrayLayout3i6",Dc);class Zs extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,c,y,M){const R=this.length;return this.resize(R+1),this.emplace(R,u,c,y,M)}emplace(u,c,y,M,R){const P=4*u;return this.int16[P+0]=c,this.int16[P+1]=y,this.int16[P+2]=M,this.int16[P+3]=R,u}}Zs.prototype.bytesPerElement=8,ci("StructArrayLayout4i8",Zs);class ns extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,c,y,M,R,P){const N=this.length;return this.resize(N+1),this.emplace(N,u,c,y,M,R,P)}emplace(u,c,y,M,R,P,N){const H=6*u;return this.int16[H+0]=c,this.int16[H+1]=y,this.int16[H+2]=M,this.int16[H+3]=R,this.int16[H+4]=P,this.int16[H+5]=N,u}}ns.prototype.bytesPerElement=12,ci("StructArrayLayout2i4i12",ns);class cu extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,c,y,M,R,P){const N=this.length;return this.resize(N+1),this.emplace(N,u,c,y,M,R,P)}emplace(u,c,y,M,R,P,N){const H=4*u,ie=8*u;return this.int16[H+0]=c,this.int16[H+1]=y,this.uint8[ie+4]=M,this.uint8[ie+5]=R,this.uint8[ie+6]=P,this.uint8[ie+7]=N,u}}cu.prototype.bytesPerElement=8,ci("StructArrayLayout2i4ub8",cu);class Rc extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,c){const y=this.length;return this.resize(y+1),this.emplace(y,u,c)}emplace(u,c,y){const M=2*u;return this.float32[M+0]=c,this.float32[M+1]=y,u}}Rc.prototype.bytesPerElement=8,ci("StructArrayLayout2f8",Rc);class cc extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,c,y,M,R,P,N,H,ie,ue){const ve=this.length;return this.resize(ve+1),this.emplace(ve,u,c,y,M,R,P,N,H,ie,ue)}emplace(u,c,y,M,R,P,N,H,ie,ue,ve){const Pe=10*u;return this.uint16[Pe+0]=c,this.uint16[Pe+1]=y,this.uint16[Pe+2]=M,this.uint16[Pe+3]=R,this.uint16[Pe+4]=P,this.uint16[Pe+5]=N,this.uint16[Pe+6]=H,this.uint16[Pe+7]=ie,this.uint16[Pe+8]=ue,this.uint16[Pe+9]=ve,u}}cc.prototype.bytesPerElement=20,ci("StructArrayLayout10ui20",cc);class hc extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,c,y,M,R,P,N,H,ie,ue,ve,Pe){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,u,c,y,M,R,P,N,H,ie,ue,ve,Pe)}emplace(u,c,y,M,R,P,N,H,ie,ue,ve,Pe,Qe){const qe=12*u;return this.int16[qe+0]=c,this.int16[qe+1]=y,this.int16[qe+2]=M,this.int16[qe+3]=R,this.uint16[qe+4]=P,this.uint16[qe+5]=N,this.uint16[qe+6]=H,this.uint16[qe+7]=ie,this.int16[qe+8]=ue,this.int16[qe+9]=ve,this.int16[qe+10]=Pe,this.int16[qe+11]=Qe,u}}hc.prototype.bytesPerElement=24,ci("StructArrayLayout4i4ui4i24",hc);class Yl extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,c,y){const M=this.length;return this.resize(M+1),this.emplace(M,u,c,y)}emplace(u,c,y,M){const R=3*u;return this.float32[R+0]=c,this.float32[R+1]=y,this.float32[R+2]=M,u}}Yl.prototype.bytesPerElement=12,ci("StructArrayLayout3f12",Yl);class td extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const c=this.length;return this.resize(c+1),this.emplace(c,u)}emplace(u,c){return this.uint32[1*u+0]=c,u}}td.prototype.bytesPerElement=4,ci("StructArrayLayout1ul4",td);class nd extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,c,y,M,R,P,N,H,ie){const ue=this.length;return this.resize(ue+1),this.emplace(ue,u,c,y,M,R,P,N,H,ie)}emplace(u,c,y,M,R,P,N,H,ie,ue){const ve=10*u,Pe=5*u;return this.int16[ve+0]=c,this.int16[ve+1]=y,this.int16[ve+2]=M,this.int16[ve+3]=R,this.int16[ve+4]=P,this.int16[ve+5]=N,this.uint32[Pe+3]=H,this.uint16[ve+8]=ie,this.uint16[ve+9]=ue,u}}nd.prototype.bytesPerElement=20,ci("StructArrayLayout6i1ul2ui20",nd);class Td extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,c,y,M,R,P){const N=this.length;return this.resize(N+1),this.emplace(N,u,c,y,M,R,P)}emplace(u,c,y,M,R,P,N){const H=6*u;return this.int16[H+0]=c,this.int16[H+1]=y,this.int16[H+2]=M,this.int16[H+3]=R,this.int16[H+4]=P,this.int16[H+5]=N,u}}Td.prototype.bytesPerElement=12,ci("StructArrayLayout2i2i2i12",Td);class I extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,c,y,M,R){const P=this.length;return this.resize(P+1),this.emplace(P,u,c,y,M,R)}emplace(u,c,y,M,R,P){const N=4*u,H=8*u;return this.float32[N+0]=c,this.float32[N+1]=y,this.float32[N+2]=M,this.int16[H+6]=R,this.int16[H+7]=P,u}}I.prototype.bytesPerElement=16,ci("StructArrayLayout2f1f2i16",I);class s extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,c,y,M,R,P){const N=this.length;return this.resize(N+1),this.emplace(N,u,c,y,M,R,P)}emplace(u,c,y,M,R,P,N){const H=16*u,ie=4*u,ue=8*u;return this.uint8[H+0]=c,this.uint8[H+1]=y,this.float32[ie+1]=M,this.float32[ie+2]=R,this.int16[ue+6]=P,this.int16[ue+7]=N,u}}s.prototype.bytesPerElement=16,ci("StructArrayLayout2ub2f2i16",s);class f extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,c,y){const M=this.length;return this.resize(M+1),this.emplace(M,u,c,y)}emplace(u,c,y,M){const R=3*u;return this.uint16[R+0]=c,this.uint16[R+1]=y,this.uint16[R+2]=M,u}}f.prototype.bytesPerElement=6,ci("StructArrayLayout3ui6",f);class _ extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,c,y,M,R,P,N,H,ie,ue,ve,Pe,Qe,qe,et,At,Mt){const Qt=this.length;return this.resize(Qt+1),this.emplace(Qt,u,c,y,M,R,P,N,H,ie,ue,ve,Pe,Qe,qe,et,At,Mt)}emplace(u,c,y,M,R,P,N,H,ie,ue,ve,Pe,Qe,qe,et,At,Mt,Qt){const Dt=24*u,jt=12*u,ln=48*u;return this.int16[Dt+0]=c,this.int16[Dt+1]=y,this.uint16[Dt+2]=M,this.uint16[Dt+3]=R,this.uint32[jt+2]=P,this.uint32[jt+3]=N,this.uint32[jt+4]=H,this.uint16[Dt+10]=ie,this.uint16[Dt+11]=ue,this.uint16[Dt+12]=ve,this.float32[jt+7]=Pe,this.float32[jt+8]=Qe,this.uint8[ln+36]=qe,this.uint8[ln+37]=et,this.uint8[ln+38]=At,this.uint32[jt+10]=Mt,this.int16[Dt+22]=Qt,u}}_.prototype.bytesPerElement=48,ci("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",_);class S extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,c,y,M,R,P,N,H,ie,ue,ve,Pe,Qe,qe,et,At,Mt,Qt,Dt,jt,ln,Cn,Un,pi,ai,di,tr,ui){const fi=this.length;return this.resize(fi+1),this.emplace(fi,u,c,y,M,R,P,N,H,ie,ue,ve,Pe,Qe,qe,et,At,Mt,Qt,Dt,jt,ln,Cn,Un,pi,ai,di,tr,ui)}emplace(u,c,y,M,R,P,N,H,ie,ue,ve,Pe,Qe,qe,et,At,Mt,Qt,Dt,jt,ln,Cn,Un,pi,ai,di,tr,ui,fi){const En=32*u,fr=16*u;return this.int16[En+0]=c,this.int16[En+1]=y,this.int16[En+2]=M,this.int16[En+3]=R,this.int16[En+4]=P,this.int16[En+5]=N,this.int16[En+6]=H,this.int16[En+7]=ie,this.uint16[En+8]=ue,this.uint16[En+9]=ve,this.uint16[En+10]=Pe,this.uint16[En+11]=Qe,this.uint16[En+12]=qe,this.uint16[En+13]=et,this.uint16[En+14]=At,this.uint16[En+15]=Mt,this.uint16[En+16]=Qt,this.uint16[En+17]=Dt,this.uint16[En+18]=jt,this.uint16[En+19]=ln,this.uint16[En+20]=Cn,this.uint16[En+21]=Un,this.uint16[En+22]=pi,this.uint32[fr+12]=ai,this.float32[fr+13]=di,this.float32[fr+14]=tr,this.uint16[En+30]=ui,this.uint16[En+31]=fi,u}}S.prototype.bytesPerElement=64,ci("StructArrayLayout8i15ui1ul2f2ui64",S);class k extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const c=this.length;return this.resize(c+1),this.emplace(c,u)}emplace(u,c){return this.float32[1*u+0]=c,u}}k.prototype.bytesPerElement=4,ci("StructArrayLayout1f4",k);class z extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,c,y){const M=this.length;return this.resize(M+1),this.emplace(M,u,c,y)}emplace(u,c,y,M){const R=3*u;return this.uint16[6*u+0]=c,this.float32[R+1]=y,this.float32[R+2]=M,u}}z.prototype.bytesPerElement=12,ci("StructArrayLayout1ui2f12",z);class q extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,c,y){const M=this.length;return this.resize(M+1),this.emplace(M,u,c,y)}emplace(u,c,y,M){const R=4*u;return this.uint32[2*u+0]=c,this.uint16[R+2]=y,this.uint16[R+3]=M,u}}q.prototype.bytesPerElement=8,ci("StructArrayLayout1ul2ui8",q);class X extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,c){const y=this.length;return this.resize(y+1),this.emplace(y,u,c)}emplace(u,c,y){const M=2*u;return this.uint16[M+0]=c,this.uint16[M+1]=y,u}}X.prototype.bytesPerElement=4,ci("StructArrayLayout2ui4",X);class he extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const c=this.length;return this.resize(c+1),this.emplace(c,u)}emplace(u,c){return this.uint16[1*u+0]=c,u}}he.prototype.bytesPerElement=2,ci("StructArrayLayout1ui2",he);class me extends Uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,c,y,M){const R=this.length;return this.resize(R+1),this.emplace(R,u,c,y,M)}emplace(u,c,y,M,R){const P=4*u;return this.float32[P+0]=c,this.float32[P+1]=y,this.float32[P+2]=M,this.float32[P+3]=R,u}}me.prototype.bytesPerElement=16,ci("StructArrayLayout4f16",me);class Ee extends Jh{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new p(this.anchorPointX,this.anchorPointY)}}Ee.prototype.size=20;class Me extends nd{get(u){return new Ee(this,u)}}ci("CollisionBoxArray",Me);class Ue extends Jh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ue.prototype.size=48;class Xe extends _{get(u){return new Ue(this,u)}}ci("PlacedSymbolArray",Xe);class ut extends Jh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ut.prototype.size=64;class ct extends S{get(u){return new ut(this,u)}}ci("SymbolInstanceArray",ct);class ft extends k{getoffsetX(u){return this.float32[1*u+0]}}ci("GlyphOffsetArray",ft);class xt extends Dc{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}ci("SymbolLineVertexArray",xt);class yt extends Jh{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}yt.prototype.size=12;class wt extends z{get(u){return new yt(this,u)}}ci("TextAnchorOffsetArray",wt);class Pt extends Jh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Pt.prototype.size=8;class Ft extends q{get(u){return new Pt(this,u)}}ci("FeatureIndexArray",Ft);class Bt extends CA{}class Yt extends CA{}class dn extends CA{}class Xt extends ns{}class nn extends cu{}class un extends Rc{}class qn extends cc{}class Qn extends hc{}class Tn extends Yl{}class xi extends td{}class cr extends Td{}class Co extends s{}class ua extends f{}class Lo extends X{}const Pa=Wa([{name:"a_pos",components:2,type:"Int16"}],4),{members:Aa}=Pa;class Br{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,c,y,M){const R=this.segments[this.segments.length-1];return u>Br.MAX_VERTEX_ARRAY_LENGTH&&Ot(`Max vertices per segment is ${Br.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Br.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!R||R.vertexLength+u>Br.MAX_VERTEX_ARRAY_LENGTH||R.sortKey!==M?this.createNewSegment(c,y,M):R}createNewSegment(u,c,y){const M={vertexOffset:u.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0,vaos:{}};return y!==void 0&&(M.sortKey=y),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(M),M}getOrCreateLatestSegment(u,c,y){return this.prepareSegment(0,u,c,y)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const c in u.vaos)u.vaos[c].destroy()}static simpleSegment(u,c,y,M){return new Br([{vertexOffset:u,primitiveOffset:c,vertexLength:y,primitiveLength:M,vaos:{},sortKey:0}])}}function Qo(h,u){return 256*(h=St(Math.floor(h),0,255))+St(Math.floor(u),0,255)}Br.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ci("SegmentVector",Br);const is=Wa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Qa,Os,Is,YA={exports:{}},dc={exports:{}},ql={exports:{}},Ih=function(){if(Is)return YA.exports;Is=1;var h=(Qa||(Qa=1,dc.exports=function(c,y){var M,R,P,N,H,ie,ue,ve;for(R=c.length-(M=3&c.length),P=y,H=3432918353,ie=461845907,ve=0;ve<R;)ue=255&c.charCodeAt(ve)|(255&c.charCodeAt(++ve))<<8|(255&c.charCodeAt(++ve))<<16|(255&c.charCodeAt(++ve))<<24,++ve,P=27492+(65535&(N=5*(65535&(P=(P^=ue=(65535&(ue=(ue=(65535&ue)*H+(((ue>>>16)*H&65535)<<16)&4294967295)<<15|ue>>>17))*ie+(((ue>>>16)*ie&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(N>>>16)&65535)<<16);switch(ue=0,M){case 3:ue^=(255&c.charCodeAt(ve+2))<<16;case 2:ue^=(255&c.charCodeAt(ve+1))<<8;case 1:P^=ue=(65535&(ue=(ue=(65535&(ue^=255&c.charCodeAt(ve)))*H+(((ue>>>16)*H&65535)<<16)&4294967295)<<15|ue>>>17))*ie+(((ue>>>16)*ie&65535)<<16)&4294967295}return P^=c.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0}),dc.exports),u=(Os||(Os=1,ql.exports=function(c,y){for(var M,R=c.length,P=y^R,N=0;R>=4;)M=1540483477*(65535&(M=255&c.charCodeAt(N)|(255&c.charCodeAt(++N))<<8|(255&c.charCodeAt(++N))<<16|(255&c.charCodeAt(++N))<<24))+((1540483477*(M>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(M=1540483477*(65535&(M^=M>>>24))+((1540483477*(M>>>16)&65535)<<16)),R-=4,++N;switch(R){case 3:P^=(255&c.charCodeAt(N+2))<<16;case 2:P^=(255&c.charCodeAt(N+1))<<8;case 1:P=1540483477*(65535&(P^=255&c.charCodeAt(N)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0}),ql.exports);return YA.exports=h,YA.exports.murmur3=h,YA.exports.murmur2=u,YA.exports}(),rh=C(Ih);class qA{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,c,y,M){this.ids.push(Pc(u)),this.positions.push(c,y,M)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=Pc(u);let y=0,M=this.ids.length-1;for(;y<M;){const P=y+M>>1;this.ids[P]>=c?M=P:y=P+1}const R=[];for(;this.ids[y]===c;)R.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return R}static serialize(u,c){const y=new Float64Array(u.ids),M=new Uint32Array(u.positions);return bl(y,M,0,y.length-1),c&&c.push(y.buffer,M.buffer),{ids:y,positions:M}}static deserialize(u){const c=new qA;return c.ids=u.ids,c.positions=u.positions,c.indexed=!0,c}}function Pc(h){const u=+h;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:rh(String(h))}function bl(h,u,c,y){for(;c<y;){const M=h[c+y>>1];let R=c-1,P=y+1;for(;;){do R++;while(h[R]<M);do P--;while(h[P]>M);if(R>=P)break;HA(h,R,P),HA(u,3*R,3*P),HA(u,3*R+1,3*P+1),HA(u,3*R+2,3*P+2)}P-c<y-P?(bl(h,u,c,P),c=P+1):(bl(h,u,P+1,y),y=P)}}function HA(h,u,c){const y=h[u];h[u]=h[c],h[c]=y}ci("FeaturePositionMap",qA);class xl{constructor(u,c){this.gl=u.gl,this.location=c}}class Kc extends xl{constructor(u,c){super(u,c),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class _o extends xl{constructor(u,c){super(u,c),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class Xo extends xl{constructor(u,c){super(u,c),this.current=xr.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const hu=new Float32Array(16);function ys(h){return[Qo(255*h.r,255*h.g),Qo(255*h.b,255*h.a)]}class _A{constructor(u,c,y){this.value=u,this.uniformNames=c.map(M=>`u_${M}`),this.type=y}setUniform(u,c,y){u.set(y.constantOr(this.value))}getBinding(u,c,y){return this.type==="color"?new Xo(u,c):new Kc(u,c)}}class du{constructor(u,c){this.uniformNames=c.map(y=>`u_${y}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=u.tlbr}setUniform(u,c,y,M){const R=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;R&&u.set(R)}getBinding(u,c,y){return y.substr(0,9)==="u_pattern"?new _o(u,c):new Kc(u,c)}}class Ru{constructor(u,c,y,M){this.expression=u,this.type=y,this.maxValue=0,this.paintVertexAttributes=c.map(R=>({name:`a_${R}`,type:"Float32",components:y==="color"?2:1,offset:0})),this.paintVertexArray=new M}populatePaintArray(u,c,y){const M=this.paintVertexArray.length,R=this.expression.evaluate(new Po(0,y),c,{},y.canonical,[],y.formattedSection);this.paintVertexArray.resize(u),this._setPaintValue(M,u,R)}updatePaintArray(u,c,y,M,R){const P=this.expression.evaluate(new Po(0,R),y,M);this._setPaintValue(u,c,P)}_setPaintValue(u,c,y){if(this.type==="color"){const M=ys(y);for(let R=u;R<c;R++)this.paintVertexArray.emplace(R,M[0],M[1])}else{for(let M=u;M<c;M++)this.paintVertexArray.emplace(M,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Hl{constructor(u,c,y,M,R,P){this.expression=u,this.uniformNames=c.map(N=>`u_${N}_t`),this.type=y,this.useIntegerZoom=M,this.zoom=R,this.maxValue=0,this.paintVertexAttributes=c.map(N=>({name:`a_${N}`,type:"Float32",components:y==="color"?4:2,offset:0})),this.paintVertexArray=new P}populatePaintArray(u,c,y){const M=this.expression.evaluate(new Po(this.zoom,y),c,{},y.canonical,[],y.formattedSection),R=this.expression.evaluate(new Po(this.zoom+1,y),c,{},y.canonical,[],y.formattedSection),P=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(P,u,M,R)}updatePaintArray(u,c,y,M,R){const P=this.expression.evaluate(new Po(this.zoom,R),y,M),N=this.expression.evaluate(new Po(this.zoom+1,R),y,M);this._setPaintValue(u,c,P,N)}_setPaintValue(u,c,y,M){if(this.type==="color"){const R=ys(y),P=ys(M);for(let N=u;N<c;N++)this.paintVertexArray.emplace(N,R[0],R[1],P[0],P[1])}else{for(let R=u;R<c;R++)this.paintVertexArray.emplace(R,y,M);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(M))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,c){const y=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,M=St(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);u.set(M)}getBinding(u,c,y){return new Kc(u,c)}}class Uc{constructor(u,c,y,M,R,P){this.expression=u,this.type=c,this.useIntegerZoom=y,this.zoom=M,this.layerId=P,this.zoomInPaintVertexArray=new R,this.zoomOutPaintVertexArray=new R}populatePaintArray(u,c,y){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(M,u,c.patterns&&c.patterns[this.layerId],y.imagePositions)}updatePaintArray(u,c,y,M,R){this._setPaintValues(u,c,y.patterns&&y.patterns[this.layerId],R.imagePositions)}_setPaintValues(u,c,y,M){if(!M||!y)return;const{min:R,mid:P,max:N}=y,H=M[R],ie=M[P],ue=M[N];if(H&&ie&&ue)for(let ve=u;ve<c;ve++)this.zoomInPaintVertexArray.emplace(ve,ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],ie.pixelRatio,H.pixelRatio),this.zoomOutPaintVertexArray.emplace(ve,ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],ue.tl[0],ue.tl[1],ue.br[0],ue.br[1],ie.pixelRatio,ue.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,is.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,is.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class tA{constructor(u,c,y){this.binders={},this._buffers=[];const M=[];for(const R in u.paint._values){if(!y(R))continue;const P=u.paint.get(R);if(!(P instanceof Pr&&Bu(P.property.specification)))continue;const N=bA(R,u.type),H=P.value,ie=P.property.specification.type,ue=P.property.useIntegerZoom,ve=P.property.specification["property-type"],Pe=ve==="cross-faded"||ve==="cross-faded-data-driven";if(H.kind==="constant")this.binders[R]=Pe?new du(H.value,N):new _A(H.value,N,ie),M.push(`/u_${R}`);else if(H.kind==="source"||Pe){const Qe=zf(R,ie,"source");this.binders[R]=Pe?new Uc(H,ie,ue,c,Qe,u.id):new Ru(H,N,ie,Qe),M.push(`/a_${R}`)}else{const Qe=zf(R,ie,"composite");this.binders[R]=new Hl(H,N,ie,ue,c,Qe),M.push(`/z_${R}`)}}this.cacheKey=M.sort().join("")}getMaxValue(u){const c=this.binders[u];return c instanceof Ru||c instanceof Hl?c.maxValue:0}populatePaintArrays(u,c,y){for(const M in this.binders){const R=this.binders[M];(R instanceof Ru||R instanceof Hl||R instanceof Uc)&&R.populatePaintArray(u,c,y)}}setConstantPatternPositions(u,c){for(const y in this.binders){const M=this.binders[y];M instanceof du&&M.setConstantPatternPositions(u,c)}}updatePaintArrays(u,c,y,M,R){let P=!1;for(const N in u){const H=c.getPositions(N);for(const ie of H){const ue=y.feature(ie.index);for(const ve in this.binders){const Pe=this.binders[ve];if((Pe instanceof Ru||Pe instanceof Hl||Pe instanceof Uc)&&Pe.expression.isStateDependent===!0){const Qe=M.paint.get(ve);Pe.expression=Qe.value,Pe.updatePaintArray(ie.start,ie.end,ue,u[N],R),P=!0}}}}return P}defines(){const u=[];for(const c in this.binders){const y=this.binders[c];(y instanceof _A||y instanceof du)&&u.push(...y.uniformNames.map(M=>`#define HAS_UNIFORM_${M}`))}return u}getBinderAttributes(){const u=[];for(const c in this.binders){const y=this.binders[c];if(y instanceof Ru||y instanceof Hl)for(let M=0;M<y.paintVertexAttributes.length;M++)u.push(y.paintVertexAttributes[M].name);else if(y instanceof Uc)for(let M=0;M<is.members.length;M++)u.push(is.members[M].name)}return u}getBinderUniforms(){const u=[];for(const c in this.binders){const y=this.binders[c];if(y instanceof _A||y instanceof du||y instanceof Hl)for(const M of y.uniformNames)u.push(M)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,c){const y=[];for(const M in this.binders){const R=this.binders[M];if(R instanceof _A||R instanceof du||R instanceof Hl){for(const P of R.uniformNames)if(c[P]){const N=R.getBinding(u,c[P],P);y.push({name:P,property:M,binding:N})}}}return y}setUniforms(u,c,y,M){for(const{name:R,property:P,binding:N}of c)this.binders[P].setUniform(N,M,y.get(P),R)}updatePaintBuffers(u){this._buffers=[];for(const c in this.binders){const y=this.binders[c];if(u&&y instanceof Uc){const M=u.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(y instanceof Ru||y instanceof Hl)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(u){for(const c in this.binders){const y=this.binders[c];(y instanceof Ru||y instanceof Hl||y instanceof Uc)&&y.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const c=this.binders[u];(c instanceof Ru||c instanceof Hl||c instanceof Uc)&&c.destroy()}}}class Ya{constructor(u,c,y=()=>!0){this.programConfigurations={};for(const M of u)this.programConfigurations[M.id]=new tA(M,c,y);this.needsUpload=!1,this._featureMap=new qA,this._bufferOffset=0}populatePaintArrays(u,c,y,M){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(u,c,M);c.id!==void 0&&this._featureMap.add(c.id,y,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,c,y,M){for(const R of y)this.needsUpload=this.programConfigurations[R.id].updatePaintArrays(u,this._featureMap,c,R,M)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function bA(h,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${u}-`,"").replace(/-/g,"_")]}function zf(h,u,c){const y={color:{source:Rc,composite:me},number:{source:k,composite:Rc}},M=function(R){return{"line-pattern":{source:qn,composite:qn},"fill-pattern":{source:qn,composite:qn},"fill-extrusion-pattern":{source:qn,composite:qn}}[R]}(h);return M&&M[c]||y[u][c]}ci("ConstantBinder",_A),ci("CrossFadedConstantBinder",du),ci("SourceExpressionBinder",Ru),ci("CrossFadedCompositeBinder",Uc),ci("CompositeExpressionBinder",Hl),ci("ProgramConfiguration",tA,{omit:["_buffers"]}),ci("ProgramConfigurationSet",Ya);const xA=Math.pow(2,14)-1,MA=-xA-1;function Sa(h){const u=nt/h.extent,c=h.loadGeometry();for(let y=0;y<c.length;y++){const M=c[y];for(let R=0;R<M.length;R++){const P=M[R],N=Math.round(P.x*u),H=Math.round(P.y*u);P.x=St(N,MA,xA),P.y=St(H,MA,xA),(N<P.x||N>P.x+1||H<P.y||H>P.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function nA(h,u){return{type:h.type,id:h.id,properties:h.properties,geometry:u?Sa(h):[]}}const id=-32768;function jf(h,u,c,y,M){h.emplaceBack(id+8*u+y,id+8*c+M)}class of{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(c=>c.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Yt,this.indexArray=new ua,this.segments=new Br,this.programConfigurations=new Ya(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(u,c,y){const M=this.layers[0],R=[];let P=null,N=!1,H=M.type==="heatmap";if(M.type==="circle"){const ue=M;P=ue.layout.get("circle-sort-key"),N=!P.isConstant(),H=H||ue.paint.get("circle-pitch-alignment")==="map"}const ie=H?c.subdivisionGranularity.circle:1;for(const{feature:ue,id:ve,index:Pe,sourceLayerIndex:Qe}of u){const qe=this.layers[0]._featureFilter.needGeometry,et=nA(ue,qe);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom,{globalState:this.globalState}),et,y))continue;const At=N?P.evaluate(et,{},y):void 0,Mt={id:ve,properties:ue.properties,type:ue.type,sourceLayerIndex:Qe,index:Pe,geometry:qe?et.geometry:Sa(ue),patterns:{},sortKey:At};R.push(Mt)}N&&R.sort((ue,ve)=>ue.sortKey-ve.sortKey);for(const ue of R){const{geometry:ve,index:Pe,sourceLayerIndex:Qe}=ue,qe=u[Pe].feature;this.addFeature(ue,ve,Pe,y,ie),c.featureIndex.insert(qe,ve,Pe,Qe,this.index)}}update(u,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,c,this.stateDependentLayers,{imagePositions:y,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Aa),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,c,y,M,R=1){let P;switch(R){case 1:P=[0,7];break;case 3:P=[0,2,5,7];break;case 5:P=[0,1,3,4,6,7];break;case 7:P=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${R}; valid values are 1, 3, 5, 7.`)}const N=P.length;for(const H of c)for(const ie of H){const ue=ie.x,ve=ie.y;if(ue<0||ue>=nt||ve<0||ve>=nt)continue;const Pe=this.segments.prepareSegment(N*N,this.layoutVertexArray,this.indexArray,u.sortKey),Qe=Pe.vertexLength;for(let qe=0;qe<N;qe++)for(let et=0;et<N;et++)jf(this.layoutVertexArray,ue,ve,P[et],P[qe]);for(let qe=0;qe<N-1;qe++)for(let et=0;et<N-1;et++){const At=Qe+qe*N+et,Mt=Qe+(qe+1)*N+et;this.indexArray.emplaceBack(At,Mt+1,At+1),this.indexArray.emplaceBack(At,Mt,Mt+1)}Pe.vertexLength+=N*N,Pe.primitiveLength+=(N-1)*(N-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,y,{imagePositions:{},canonical:M,globalState:this.globalState})}}function pm(h,u){for(let c=0;c<h.length;c++)if(Th(u,h[c]))return!0;for(let c=0;c<u.length;c++)if(Th(h,u[c]))return!0;return!!Gf(h,u)}function fc(h,u,c){return!!Th(h,u)||!!af(u,h,c)}function rd(h,u){if(h.length===1)return Bp(u,h[0]);for(let c=0;c<u.length;c++){const y=u[c];for(let M=0;M<y.length;M++)if(Th(h,y[M]))return!0}for(let c=0;c<h.length;c++)if(Bp(u,h[c]))return!0;for(let c=0;c<u.length;c++)if(Gf(h,u[c]))return!0;return!1}function Nf(h,u,c){if(h.length>1){if(Gf(h,u))return!0;for(let y=0;y<u.length;y++)if(af(u[y],h,c))return!0}for(let y=0;y<h.length;y++)if(af(h[y],u,c))return!0;return!1}function Gf(h,u){if(h.length===0||u.length===0)return!1;for(let c=0;c<h.length-1;c++){const y=h[c],M=h[c+1];for(let R=0;R<u.length-1;R++)if(W0(y,M,u[R],u[R+1]))return!0}return!1}function W0(h,u,c,y){return qt(h,c,y)!==qt(u,c,y)&&qt(h,u,c)!==qt(h,u,y)}function af(h,u,c){const y=c*c;if(u.length===1)return h.distSqr(u[0])<y;for(let M=1;M<u.length;M++)if(Jo(h,u[M-1],u[M])<y)return!0;return!1}function Jo(h,u,c){const y=u.distSqr(c);if(y===0)return h.distSqr(u);const M=((h.x-u.x)*(c.x-u.x)+(h.y-u.y)*(c.y-u.y))/y;return h.distSqr(M<0?u:M>1?c:c.sub(u)._mult(M)._add(u))}function Bp(h,u){let c,y,M,R=!1;for(let P=0;P<h.length;P++){c=h[P];for(let N=0,H=c.length-1;N<c.length;H=N++)y=c[N],M=c[H],y.y>u.y!=M.y>u.y&&u.x<(M.x-y.x)*(u.y-y.y)/(M.y-y.y)+y.x&&(R=!R)}return R}function Th(h,u){let c=!1;for(let y=0,M=h.length-1;y<h.length;M=y++){const R=h[y],P=h[M];R.y>u.y!=P.y>u.y&&u.x<(P.x-R.x)*(u.y-R.y)/(P.y-R.y)+R.x&&(c=!c)}return c}function Wf(h,u,c){const y=c[0],M=c[2];if(h.x<y.x&&u.x<y.x||h.x>M.x&&u.x>M.x||h.y<y.y&&u.y<y.y||h.y>M.y&&u.y>M.y)return!1;const R=qt(h,u,c[0]);return R!==qt(h,u,c[1])||R!==qt(h,u,c[2])||R!==qt(h,u,c[3])}function iA(h,u,c){const y=u.paint.get(h).value;return y.kind==="constant"?y.value:c.programConfigurations.get(u.id).getMaxValue(h)}function kd(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Xs(h,u,c,y,M){if(!u[0]&&!u[1])return h;const R=p.convert(u)._mult(M);c==="viewport"&&R._rotate(-y);const P=[];for(let N=0;N<h.length;N++)P.push(h[N].sub(R));return P}let cs,Qf;ci("CircleBucket",of,{omit:["layers"]});var Op={get paint(){return Qf=Qf||new la({"circle-radius":new ki(it.paint_circle["circle-radius"]),"circle-color":new ki(it.paint_circle["circle-color"]),"circle-blur":new ki(it.paint_circle["circle-blur"]),"circle-opacity":new ki(it.paint_circle["circle-opacity"]),"circle-translate":new Ii(it.paint_circle["circle-translate"]),"circle-translate-anchor":new Ii(it.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ii(it.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ii(it.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ki(it.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ki(it.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ki(it.paint_circle["circle-stroke-opacity"])})},get layout(){return cs=cs||new la({"circle-sort-key":new ki(it.layout_circle["circle-sort-key"])})}};class Yf extends Ql{constructor(u){super(u,Op)}createBucket(u){return new of(u)}queryRadius(u){const c=u;return iA("circle-radius",this,c)+iA("circle-stroke-width",this,c)+kd(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:c,featureState:y,geometry:M,transform:R,pixelsToTileUnits:P,unwrappedTileID:N,getElevation:H}){const ie=Xs(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-R.bearingInRadians,P),ue=this.paint.get("circle-radius").evaluate(c,y)+this.paint.get("circle-stroke-width").evaluate(c,y),ve=this.paint.get("circle-pitch-alignment")==="map",Pe=ve?ie:function(qe,et,At,Mt){return qe.map(Qt=>sf(Qt,et,At,Mt))}(ie,R,N,H),Qe=ve?ue*P:ue;for(const qe of M)for(const et of qe){const At=ve?et:sf(et,R,N,H);let Mt=Qe;const Qt=R.projectTileCoordinates(et.x,et.y,N,H).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Mt*=Qt/R.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Mt*=R.cameraToCenterDistance/Qt),fc(Pe,At,Mt))return!0}return!1}}function sf(h,u,c,y){const M=u.projectTileCoordinates(h.x,h.y,c,y).point;return new p((.5*M.x+.5)*u.width,(.5*-M.y+.5)*u.height)}class Dd extends of{}let pr;ci("HeatmapBucket",Dd,{omit:["layers"]});var lf={get paint(){return pr=pr||new la({"heatmap-radius":new ki(it.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ki(it.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ii(it.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Au(it.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ii(it.paint_heatmap["heatmap-opacity"])})}};function ea(h,{width:u,height:c},y,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==u*c*y)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${u*c*y}`)}else M=new Uint8Array(u*c*y);return h.width=u,h.height=c,h.data=M,h}function kh(h,{width:u,height:c},y){if(u===h.width&&c===h.height)return;const M=ea({},{width:u,height:c},y);mm(h,M,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,u),height:Math.min(h.height,c)},y),h.width=u,h.height=c,h.data=M.data}function mm(h,u,c,y,M,R){if(M.width===0||M.height===0)return u;if(M.width>h.width||M.height>h.height||c.x>h.width-M.width||c.y>h.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>u.width||M.height>u.height||y.x>u.width-M.width||y.y>u.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const P=h.data,N=u.data;if(P===N)throw new Error("srcData equals dstData, so image is already copied");for(let H=0;H<M.height;H++){const ie=((c.y+H)*h.width+c.x)*R,ue=((y.y+H)*u.width+y.x)*R;for(let ve=0;ve<M.width*R;ve++)N[ue+ve]=P[ie+ve]}return u}class VA{constructor(u,c){ea(this,u,1,c)}resize(u){kh(this,u,1)}clone(){return new VA({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,c,y,M,R){mm(u,c,y,M,R,1)}}class fu{constructor(u,c){ea(this,u,4,c)}resize(u){kh(this,u,4)}replace(u,c){c?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new fu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,c,y,M,R){mm(u,c,y,M,R,4)}setPixel(u,c,y){const M=4*(u*this.width+c);this.data[M+0]=Math.round(255*y.r/y.a),this.data[M+1]=Math.round(255*y.g/y.a),this.data[M+2]=Math.round(255*y.b/y.a),this.data[M+3]=Math.round(255*y.a)}}function al(h){const u={},c=h.resolution||256,y=h.clips?h.clips.length:1,M=h.image||new fu({width:c,height:y});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const R=(P,N,H)=>{u[h.evaluationKey]=H;const ie=h.expression.evaluate(u);M.setPixel(P/4/c,N/4,ie)};if(h.clips)for(let P=0,N=0;P<y;++P,N+=4*c)for(let H=0,ie=0;H<c;H++,ie+=4){const ue=H/(c-1),{start:ve,end:Pe}=h.clips[P];R(N,ie,ve*(1-ue)+Pe*ue)}else for(let P=0,N=0;P<c;P++,N+=4)R(0,N,P/(c-1));return M}ci("AlphaImage",VA),ci("RGBAImage",fu);const gm="big-fb";class js extends Ql{createBucket(u){return new Dd(u)}constructor(u){super(u,lf),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=al({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(gm)&&this.heatmapFbos.delete(gm)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let qf;var o0={get paint(){return qf=qf||new la({"hillshade-illumination-direction":new Ii(it.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Ii(it.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Ii(it.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ii(it.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ii(it.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ii(it.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ii(it.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Ii(it.paint_hillshade["hillshade-method"])})}};class a0 extends Ql{constructor(u){super(u,o0),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let u=this.paint.get("hillshade-illumination-direction").values,c=this.paint.get("hillshade-illumination-altitude").values,y=this.paint.get("hillshade-highlight-color").values,M=this.paint.get("hillshade-shadow-color").values;const R=Math.max(u.length,c.length,y.length,M.length);u=u.concat(Array(R-u.length).fill(u.at(-1))),c=c.concat(Array(R-c.length).fill(c.at(-1))),y=y.concat(Array(R-y.length).fill(y.at(-1))),M=M.concat(Array(R-M.length).fill(M.at(-1)));const P=c.map(Oi);return{directionRadians:u.map(Oi),altitudeRadians:P,shadowColor:M,highlightColor:y}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let uf;var d={get paint(){return uf=uf||new la({"color-relief-opacity":new Ii(it["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Au(it["paint_color-relief"]["color-relief-color"])})}};class v{constructor(u,c,y,M){this.context=u,this.format=y,this.texture=u.gl.createTexture(),this.update(c,M)}update(u,c,y){const{width:M,height:R}=u,P=!(this.size&&this.size[0]===M&&this.size[1]===R||y),{context:N}=this,{gl:H}=N;if(this.useMipmap=!!(c&&c.useMipmap),H.bindTexture(H.TEXTURE_2D,this.texture),N.pixelStoreUnpackFlipY.set(!1),N.pixelStoreUnpack.set(1),N.pixelStoreUnpackPremultiplyAlpha.set(this.format===H.RGBA&&(!c||c.premultiply!==!1)),P)this.size=[M,R],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||Jn(u)?H.texImage2D(H.TEXTURE_2D,0,this.format,this.format,H.UNSIGNED_BYTE,u):H.texImage2D(H.TEXTURE_2D,0,this.format,M,R,0,this.format,H.UNSIGNED_BYTE,u.data);else{const{x:ie,y:ue}=y||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||Jn(u)?H.texSubImage2D(H.TEXTURE_2D,0,ie,ue,H.RGBA,H.UNSIGNED_BYTE,u):H.texSubImage2D(H.TEXTURE_2D,0,ie,ue,M,R,H.RGBA,H.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&H.generateMipmap(H.TEXTURE_2D),N.pixelStoreUnpackFlipY.setDefault(),N.pixelStoreUnpack.setDefault(),N.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(u,c,y){const{context:M}=this,{gl:R}=M;R.bindTexture(R.TEXTURE_2D,this.texture),y!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(y=R.LINEAR),u!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,u),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,y||u),this.filter=u),c!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,c),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}class B{constructor(u,c,y,M=1,R=1,P=1,N=0){if(this.uid=u,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void Ot(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const H=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=M,this.greenFactor=R,this.blueFactor=P,this.baseShift=N;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ie=0;ie<H;ie++)this.data[this._idx(-1,ie)]=this.data[this._idx(0,ie)],this.data[this._idx(H,ie)]=this.data[this._idx(H-1,ie)],this.data[this._idx(ie,-1)]=this.data[this._idx(ie,0)],this.data[this._idx(ie,H)]=this.data[this._idx(ie,H-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(H,-1)]=this.data[this._idx(H-1,0)],this.data[this._idx(-1,H)]=this.data[this._idx(0,H-1)],this.data[this._idx(H,H)]=this.data[this._idx(H-1,H-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ie=0;ie<H;ie++)for(let ue=0;ue<H;ue++){const ve=this.get(ie,ue);ve>this.max&&(this.max=ve),ve<this.min&&(this.min=ve)}}get(u,c){const y=new Uint8Array(this.data.buffer),M=4*this._idx(u,c);return this.unpack(y[M],y[M+1],y[M+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,c){if(u<-1||u>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(u+1)}unpack(u,c,y){return u*this.redFactor+c*this.greenFactor+y*this.blueFactor-this.baseShift}pack(u){return E(u,this.getUnpackVector())}getPixels(){return new fu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,c,y){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let M=c*this.dim,R=c*this.dim+this.dim,P=y*this.dim,N=y*this.dim+this.dim;switch(c){case-1:M=R-1;break;case 1:R=M+1}switch(y){case-1:P=N-1;break;case 1:N=P+1}const H=-c*this.dim,ie=-y*this.dim;for(let ue=P;ue<N;ue++)for(let ve=M;ve<R;ve++)this.data[this._idx(ve,ue)]=u.data[this._idx(ve+H,ue+ie)]}}function E(h,u){const c=u[0],y=u[1],M=u[2],R=u[3],P=Math.min(c,y,M),N=Math.round((h+R)/P);return{r:Math.floor(N*P/c)%256,g:Math.floor(N*P/y)%256,b:Math.floor(N*P/M)%256}}ci("DEMData",B);class F extends Ql{constructor(u){super(u,d)}_createColorRamp(u){const c={elevationStops:[],colorStops:[]},y=this._transitionablePaint._values["color-relief-color"].value.expression;if(y instanceof Mh&&y._styleExpression.expression instanceof Ra){this.colorRampExpression=y;const P=y._styleExpression.expression;c.elevationStops=P.labels,c.colorStops=[];for(const N of c.elevationStops)c.colorStops.push(P.evaluate({globals:{elevation:N}}))}if(c.elevationStops.length<1&&(c.elevationStops=[0],c.colorStops=[xr.transparent]),c.elevationStops.length<2&&(c.elevationStops.push(c.elevationStops[0]+1),c.colorStops.push(c.colorStops[0])),c.elevationStops.length<=u)return c;const M={elevationStops:[],colorStops:[]},R=(c.elevationStops.length-1)/(u-1);for(let P=0;P<c.elevationStops.length-.5;P+=R)M.elevationStops.push(c.elevationStops[Math.round(P)]),M.colorStops.push(c.colorStops[Math.round(P)]);return Ot(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),M}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(u,c,y){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const M=this._createColorRamp(c),R=new fu({width:M.colorStops.length,height:1}),P=new fu({width:M.colorStops.length,height:1});for(let N=0;N<M.elevationStops.length;N++){const H=E(M.elevationStops[N],y);P.setPixel(0,N,new xr(H.r/255,H.g/255,H.b/255,1)),R.setPixel(0,N,M.colorStops[N])}return this.colorRampTextures={elevationTexture:new v(u,P,u.gl.RGBA),colorTexture:new v(u,R,u.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const Z=Wa([{name:"a_pos",components:2,type:"Int16"}],4),{members:fe}=Z;function _e(h,u,c){const y=c.patternDependencies;let M=!1;for(const R of u){const P=R.paint.get(`${h}-pattern`);P.isConstant()||(M=!0);const N=P.constantOr(null);N&&(M=!0,y[N.to]=!0,y[N.from]=!0)}return M}function ke(h,u,c,y,M){const{zoom:R,globalState:P}=y,N=M.patternDependencies;for(const H of u){const ie=H.paint.get(`${h}-pattern`).value;if(ie.kind!=="constant"){let ue=ie.evaluate({zoom:R-1,globalState:P},c,{},M.availableImages),ve=ie.evaluate({zoom:R,globalState:P},c,{},M.availableImages),Pe=ie.evaluate({zoom:R+1,globalState:P},c,{},M.availableImages);ue=ue&&ue.name?ue.name:ue,ve=ve&&ve.name?ve.name:ve,Pe=Pe&&Pe.name?Pe.name:Pe,N[ue]=!0,N[ve]=!0,N[Pe]=!0,c.patterns[H.id]={min:ue,mid:ve,max:Pe}}}return c}function Le(h,u,c,y,M){let R;if(M===function(P,N,H,ie){let ue=0;for(let ve=N,Pe=H-ie;ve<H;ve+=ie)ue+=(P[Pe]-P[ve])*(P[ve+1]+P[Pe+1]),Pe=ve;return ue}(h,u,c,y)>0)for(let P=u;P<c;P+=y)R=Vl(P/y|0,h[P],h[P+1],R);else for(let P=c-y;P>=u;P-=y)R=Vl(P/y|0,h[P],h[P+1],R);return R&&rs(R,R.next)&&(Ts(R),R=R.next),R}function vt(h,u){if(!h)return h;u||(u=h);let c,y=h;do if(c=!1,y.steiner||!rs(y,y.next)&&Mr(y.prev,y,y.next)!==0)y=y.next;else{if(Ts(y),y=u=y.prev,y===y.next)break;c=!0}while(c||y!==u);return u}function It(h,u,c,y,M,R,P){if(!h)return;!P&&R&&function(H,ie,ue,ve){let Pe=H;do Pe.z===0&&(Pe.z=gi(Pe.x,Pe.y,ie,ue,ve)),Pe.prevZ=Pe.prev,Pe.nextZ=Pe.next,Pe=Pe.next;while(Pe!==H);Pe.prevZ.nextZ=null,Pe.prevZ=null,function(Qe){let qe,et=1;do{let At,Mt=Qe;Qe=null;let Qt=null;for(qe=0;Mt;){qe++;let Dt=Mt,jt=0;for(let Cn=0;Cn<et&&(jt++,Dt=Dt.nextZ,Dt);Cn++);let ln=et;for(;jt>0||ln>0&&Dt;)jt!==0&&(ln===0||!Dt||Mt.z<=Dt.z)?(At=Mt,Mt=Mt.nextZ,jt--):(At=Dt,Dt=Dt.nextZ,ln--),Qt?Qt.nextZ=At:Qe=At,At.prevZ=Qt,Qt=At;Mt=Dt}Qt.nextZ=null,et*=2}while(qe>1)}(Pe)}(h,y,M,R);let N=h;for(;h.prev!==h.next;){const H=h.prev,ie=h.next;if(R?Ht(h,y,M,R):Jt(h))u.push(H.i,h.i,ie.i),Ts(h),h=ie.next,N=ie.next;else if((h=ie)===N){P?P===1?It(h=_n(vt(h),u),u,c,y,M,R,2):P===2&&Rn(h,u,c,y,M,R):It(vt(h),u,c,y,M,R,1);break}}}function Jt(h){const u=h.prev,c=h,y=h.next;if(Mr(u,c,y)>=0)return!1;const M=u.x,R=c.x,P=y.x,N=u.y,H=c.y,ie=y.y,ue=Math.min(M,R,P),ve=Math.min(N,H,ie),Pe=Math.max(M,R,P),Qe=Math.max(N,H,ie);let qe=y.next;for(;qe!==u;){if(qe.x>=ue&&qe.x<=Pe&&qe.y>=ve&&qe.y<=Qe&&Yi(M,N,R,H,P,ie,qe.x,qe.y)&&Mr(qe.prev,qe,qe.next)>=0)return!1;qe=qe.next}return!0}function Ht(h,u,c,y){const M=h.prev,R=h,P=h.next;if(Mr(M,R,P)>=0)return!1;const N=M.x,H=R.x,ie=P.x,ue=M.y,ve=R.y,Pe=P.y,Qe=Math.min(N,H,ie),qe=Math.min(ue,ve,Pe),et=Math.max(N,H,ie),At=Math.max(ue,ve,Pe),Mt=gi(Qe,qe,u,c,y),Qt=gi(et,At,u,c,y);let Dt=h.prevZ,jt=h.nextZ;for(;Dt&&Dt.z>=Mt&&jt&&jt.z<=Qt;){if(Dt.x>=Qe&&Dt.x<=et&&Dt.y>=qe&&Dt.y<=At&&Dt!==M&&Dt!==P&&Yi(N,ue,H,ve,ie,Pe,Dt.x,Dt.y)&&Mr(Dt.prev,Dt,Dt.next)>=0||(Dt=Dt.prevZ,jt.x>=Qe&&jt.x<=et&&jt.y>=qe&&jt.y<=At&&jt!==M&&jt!==P&&Yi(N,ue,H,ve,ie,Pe,jt.x,jt.y)&&Mr(jt.prev,jt,jt.next)>=0))return!1;jt=jt.nextZ}for(;Dt&&Dt.z>=Mt;){if(Dt.x>=Qe&&Dt.x<=et&&Dt.y>=qe&&Dt.y<=At&&Dt!==M&&Dt!==P&&Yi(N,ue,H,ve,ie,Pe,Dt.x,Dt.y)&&Mr(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.prevZ}for(;jt&&jt.z<=Qt;){if(jt.x>=Qe&&jt.x<=et&&jt.y>=qe&&jt.y<=At&&jt!==M&&jt!==P&&Yi(N,ue,H,ve,ie,Pe,jt.x,jt.y)&&Mr(jt.prev,jt,jt.next)>=0)return!1;jt=jt.nextZ}return!0}function _n(h,u){let c=h;do{const y=c.prev,M=c.next.next;!rs(y,M)&&ca(y,c,c.next,M)&&Cs(y,M)&&Cs(M,y)&&(u.push(y.i,c.i,M.i),Ts(c),Ts(c.next),c=h=M),c=c.next}while(c!==h);return vt(c)}function Rn(h,u,c,y,M,R){let P=h;do{let N=P.next.next;for(;N!==P.prev;){if(P.i!==N.i&&Jr(P,N)){let H=ha(P,N);return P=vt(P,P.next),H=vt(H,H.next),It(P,u,c,y,M,R,0),void It(H,u,c,y,M,R,0)}N=N.next}P=P.next}while(P!==h)}function oi(h,u){let c=h.x-u.x;return c===0&&(c=h.y-u.y,c===0)&&(c=(h.next.y-h.y)/(h.next.x-h.x)-(u.next.y-u.y)/(u.next.x-u.x)),c}function mi(h,u){const c=function(M,R){let P=R;const N=M.x,H=M.y;let ie,ue=-1/0;if(rs(M,P))return P;do{if(rs(M,P.next))return P.next;if(H<=P.y&&H>=P.next.y&&P.next.y!==P.y){const et=P.x+(H-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(et<=N&&et>ue&&(ue=et,ie=P.x<P.next.x?P:P.next,et===N))return ie}P=P.next}while(P!==R);if(!ie)return null;const ve=ie,Pe=ie.x,Qe=ie.y;let qe=1/0;P=ie;do{if(N>=P.x&&P.x>=Pe&&N!==P.x&&ar(H<Qe?N:ue,H,Pe,Qe,H<Qe?ue:N,H,P.x,P.y)){const et=Math.abs(H-P.y)/(N-P.x);Cs(P,M)&&(et<qe||et===qe&&(P.x>ie.x||P.x===ie.x&&Ci(ie,P)))&&(ie=P,qe=et)}P=P.next}while(P!==ve);return ie}(h,u);if(!c)return u;const y=ha(c,h);return vt(y,y.next),vt(c,c.next)}function Ci(h,u){return Mr(h.prev,h,u.prev)<0&&Mr(u.next,h,h.next)<0}function gi(h,u,c,y,M){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-c)*M|0)|h<<8))|h<<4))|h<<2))|h<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-y)*M|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Di(h){let u=h,c=h;do(u.x<c.x||u.x===c.x&&u.y<c.y)&&(c=u),u=u.next;while(u!==h);return c}function ar(h,u,c,y,M,R,P,N){return(M-P)*(u-N)>=(h-P)*(R-N)&&(h-P)*(y-N)>=(c-P)*(u-N)&&(c-P)*(R-N)>=(M-P)*(y-N)}function Yi(h,u,c,y,M,R,P,N){return!(h===P&&u===N)&&ar(h,u,c,y,M,R,P,N)}function Jr(h,u){return h.next.i!==u.i&&h.prev.i!==u.i&&!function(c,y){let M=c;do{if(M.i!==c.i&&M.next.i!==c.i&&M.i!==y.i&&M.next.i!==y.i&&ca(M,M.next,c,y))return!0;M=M.next}while(M!==c);return!1}(h,u)&&(Cs(h,u)&&Cs(u,h)&&function(c,y){let M=c,R=!1;const P=(c.x+y.x)/2,N=(c.y+y.y)/2;do M.y>N!=M.next.y>N&&M.next.y!==M.y&&P<(M.next.x-M.x)*(N-M.y)/(M.next.y-M.y)+M.x&&(R=!R),M=M.next;while(M!==c);return R}(h,u)&&(Mr(h.prev,h,u.prev)||Mr(h,u.prev,u))||rs(h,u)&&Mr(h.prev,h,h.next)>0&&Mr(u.prev,u,u.next)>0)}function Mr(h,u,c){return(u.y-h.y)*(c.x-u.x)-(u.x-h.x)*(c.y-u.y)}function rs(h,u){return h.x===u.x&&h.y===u.y}function ca(h,u,c,y){const M=vs(Mr(h,u,c)),R=vs(Mr(h,u,y)),P=vs(Mr(c,y,h)),N=vs(Mr(c,y,u));return M!==R&&P!==N||!(M!==0||!qr(h,c,u))||!(R!==0||!qr(h,y,u))||!(P!==0||!qr(c,h,y))||!(N!==0||!qr(c,u,y))}function qr(h,u,c){return u.x<=Math.max(h.x,c.x)&&u.x>=Math.min(h.x,c.x)&&u.y<=Math.max(h.y,c.y)&&u.y>=Math.min(h.y,c.y)}function vs(h){return h>0?1:h<0?-1:0}function Cs(h,u){return Mr(h.prev,h,h.next)<0?Mr(h,u,h.next)>=0&&Mr(h,h.prev,u)>=0:Mr(h,u,h.prev)<0||Mr(h,h.next,u)<0}function ha(h,u){const c=Ns(h.i,h.x,h.y),y=Ns(u.i,u.x,u.y),M=h.next,R=u.prev;return h.next=u,u.prev=h,c.next=M,M.prev=c,y.next=c,c.prev=y,R.next=y,y.prev=R,y}function Vl(h,u,c,y){const M=Ns(h,u,c);return y?(M.next=y.next,M.prev=y,y.next.prev=M,y.next=M):(M.prev=M,M.next=M),M}function Ts(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Ns(h,u,c){return{i:h,x:u,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Or{constructor(u,c){if(c>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=c}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class Ea{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}Ea.noSubdivision=new Ea({fill:new Or(0,0),line:new Or(0,0),tile:new Or(0,0),stencil:new Or(0,0),circle:1}),ci("SubdivisionGranularityExpression",Or),ci("SubdivisionGranularitySetting",Ea);const $l=-32768,pc=32767;class pu{constructor(u,c){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=nt/u,this._canonical=c}_getKey(u,c){return(u+=32768)<<16|c+32768}_vertexToIndex(u,c){if(u<-32768||c<-32768||u>32767||c>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const y=0|Math.round(u),M=0|Math.round(c),R=this._getKey(y,M);if(this._vertexDictionary.has(R))return this._vertexDictionary.get(R);const P=this._vertexBuffer.length/2;return this._vertexDictionary.set(R,P),this._vertexBuffer.push(y,M),P}_subdivideTrianglesScanline(u){if(this._granularity<2)return function(M,R){const P=[];for(let N=0;N<R.length;N+=3){const H=R[N],ie=R[N+1],ue=R[N+2],ve=M[2*H],Pe=M[2*H+1];(M[2*ie]-ve)*(M[2*ue+1]-Pe)-(M[2*ie+1]-Pe)*(M[2*ue]-ve)>0?(P.push(H),P.push(ue),P.push(ie)):(P.push(H),P.push(ie),P.push(ue))}return P}(this._vertexBuffer,u);const c=[],y=u.length;for(let M=0;M<y;M+=3){const R=[u[M+0],u[M+1],u[M+2]],P=[this._vertexBuffer[2*u[M+0]+0],this._vertexBuffer[2*u[M+0]+1],this._vertexBuffer[2*u[M+1]+0],this._vertexBuffer[2*u[M+1]+1],this._vertexBuffer[2*u[M+2]+0],this._vertexBuffer[2*u[M+2]+1]];let N=1/0,H=1/0,ie=-1/0,ue=-1/0;for(let et=0;et<3;et++){const At=P[2*et],Mt=P[2*et+1];N=Math.min(N,At),ie=Math.max(ie,At),H=Math.min(H,Mt),ue=Math.max(ue,Mt)}if(N===ie||H===ue)continue;const ve=Math.floor(N/this._granularityCellSize),Pe=Math.ceil(ie/this._granularityCellSize),Qe=Math.floor(H/this._granularityCellSize),qe=Math.ceil(ue/this._granularityCellSize);if(ve!==Pe||Qe!==qe)for(let et=Qe;et<qe;et++){const At=this._scanlineGenerateVertexRingForCellRow(et,P,R);wA(this._vertexBuffer,At,c)}else c.push(...R)}return c}_scanlineGenerateVertexRingForCellRow(u,c,y){const M=u*this._granularityCellSize,R=M+this._granularityCellSize,P=[];for(let N=0;N<3;N++){const H=c[2*N],ie=c[2*N+1],ue=c[2*(N+1)%6],ve=c[(2*(N+1)+1)%6],Pe=c[2*(N+2)%6],Qe=c[(2*(N+2)+1)%6],qe=ue-H,et=ve-ie,At=qe===0,Mt=et===0,Qt=(M-ie)/et,Dt=(R-ie)/et,jt=Math.min(Qt,Dt),ln=Math.max(Qt,Dt);if(!Mt&&(jt>=1||ln<=0)||Mt&&(ie<M||ie>R)){ve>=M&&ve<=R&&P.push(y[(N+1)%3]);continue}!Mt&&jt>0&&P.push(this._vertexToIndex(H+qe*jt,ie+et*jt));const Cn=H+qe*Math.max(jt,0),Un=H+qe*Math.min(ln,1);At||this._generateIntraEdgeVertices(P,H,ie,ue,ve,Cn,Un),!Mt&&ln<1&&P.push(this._vertexToIndex(H+qe*ln,ie+et*ln)),(Mt||ve>=M&&ve<=R)&&P.push(y[(N+1)%3]),!Mt&&(ve<=M||ve>=R)&&this._generateInterEdgeVertices(P,H,ie,ue,ve,Pe,Qe,Un,M,R)}return P}_generateIntraEdgeVertices(u,c,y,M,R,P,N){const H=M-c,ie=R-y,ue=ie===0,ve=ue?Math.min(c,M):Math.min(P,N),Pe=ue?Math.max(c,M):Math.max(P,N),Qe=Math.floor(ve/this._granularityCellSize)+1,qe=Math.ceil(Pe/this._granularityCellSize)-1;if(ue?c<M:P<N)for(let et=Qe;et<=qe;et++){const At=et*this._granularityCellSize;u.push(this._vertexToIndex(At,y+ie*(At-c)/H))}else for(let et=qe;et>=Qe;et--){const At=et*this._granularityCellSize;u.push(this._vertexToIndex(At,y+ie*(At-c)/H))}}_generateInterEdgeVertices(u,c,y,M,R,P,N,H,ie,ue){const ve=R-y,Pe=P-M,Qe=N-R,qe=(ie-R)/Qe,et=(ue-R)/Qe,At=Math.min(qe,et),Mt=Math.max(qe,et),Qt=M+Pe*At;let Dt=Math.floor(Math.min(Qt,H)/this._granularityCellSize)+1,jt=Math.ceil(Math.max(Qt,H)/this._granularityCellSize)-1,ln=H<Qt;const Cn=Qe===0;if(Cn&&(N===ie||N===ue))return;if(Cn||At>=1||Mt<=0){const pi=y-N,ai=P+(c-P)*Math.min((ie-N)/pi,(ue-N)/pi);Dt=Math.floor(Math.min(ai,H)/this._granularityCellSize)+1,jt=Math.ceil(Math.max(ai,H)/this._granularityCellSize)-1,ln=H<ai}const Un=ve>0?ue:ie;if(ln)for(let pi=Dt;pi<=jt;pi++)u.push(this._vertexToIndex(pi*this._granularityCellSize,Un));else for(let pi=jt;pi>=Dt;pi--)u.push(this._vertexToIndex(pi*this._granularityCellSize,Un))}_generateOutline(u){const c=[];for(const y of u){const M=hs(y,this._granularity,!0),R=this._pointArrayToIndices(M),P=[];for(let N=1;N<R.length;N++)P.push(R[N-1]),P.push(R[N]);c.push(P)}return c}_handlePoles(u){let c=!1,y=!1;this._canonical&&(this._canonical.y===0&&(c=!0),this._canonical.y===(1<<this._canonical.z)-1&&(y=!0)),(c||y)&&this._fillPoles(u,c,y)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let c=0;c<u.length;c+=2){const y=u[c+1];y===$l&&(u[c+1]=-32767),y===pc&&(u[c+1]=32766)}}_generatePoleQuad(u,c,y,M,R,P){M>R!=(P===$l)?(u.push(c),u.push(y),u.push(this._vertexToIndex(M,P)),u.push(y),u.push(this._vertexToIndex(R,P)),u.push(this._vertexToIndex(M,P))):(u.push(y),u.push(c),u.push(this._vertexToIndex(M,P)),u.push(this._vertexToIndex(R,P)),u.push(y),u.push(this._vertexToIndex(M,P)))}_fillPoles(u,c,y){const M=this._vertexBuffer,R=nt,P=u.length;for(let N=2;N<P;N+=3){const H=u[N-2],ie=u[N-1],ue=u[N],ve=M[2*H],Pe=M[2*H+1],Qe=M[2*ie],qe=M[2*ie+1],et=M[2*ue],At=M[2*ue+1];c&&(Pe===0&&qe===0&&this._generatePoleQuad(u,H,ie,ve,Qe,$l),qe===0&&At===0&&this._generatePoleQuad(u,ie,ue,Qe,et,$l),At===0&&Pe===0&&this._generatePoleQuad(u,ue,H,et,ve,$l)),y&&(Pe===R&&qe===R&&this._generatePoleQuad(u,H,ie,ve,Qe,pc),qe===R&&At===R&&this._generatePoleQuad(u,ie,ue,Qe,et,pc),At===R&&Pe===R&&this._generatePoleQuad(u,ue,H,et,ve,pc))}}_initializeVertices(u){for(let c=0;c<u.length;c+=2)this._vertexToIndex(u[c],u[c+1])}subdividePolygonInternal(u,c){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:y,holeIndices:M}=function(N){const H=[],ie=[];for(const ue of N)if(ue.length!==0){ue!==N[0]&&H.push(ie.length/2);for(let ve=0;ve<ue.length;ve++)ie.push(ue[ve].x),ie.push(ue[ve].y)}return{flattened:ie,holeIndices:H}}(u);let R;this._initializeVertices(y);try{const N=function(ie,ue,ve=2){const Pe=ue&&ue.length,Qe=Pe?ue[0]*ve:ie.length;let qe=Le(ie,0,Qe,ve,!0);const et=[];if(!qe||qe.next===qe.prev)return et;let At,Mt,Qt;if(Pe&&(qe=function(Dt,jt,ln,Cn){const Un=[];for(let pi=0,ai=jt.length;pi<ai;pi++){const di=Le(Dt,jt[pi]*Cn,pi<ai-1?jt[pi+1]*Cn:Dt.length,Cn,!1);di===di.next&&(di.steiner=!0),Un.push(Di(di))}Un.sort(oi);for(let pi=0;pi<Un.length;pi++)ln=mi(Un[pi],ln);return ln}(ie,ue,qe,ve)),ie.length>80*ve){At=ie[0],Mt=ie[1];let Dt=At,jt=Mt;for(let ln=ve;ln<Qe;ln+=ve){const Cn=ie[ln],Un=ie[ln+1];Cn<At&&(At=Cn),Un<Mt&&(Mt=Un),Cn>Dt&&(Dt=Cn),Un>jt&&(jt=Un)}Qt=Math.max(Dt-At,jt-Mt),Qt=Qt!==0?32767/Qt:0}return It(qe,et,ve,At,Mt,Qt,0),et}(y,M),H=this._convertIndices(y,N);R=this._subdivideTrianglesScanline(H)}catch(N){console.error(N)}let P=[];return c&&(P=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(R),{verticesFlattened:this._vertexBuffer,indicesTriangles:R,indicesLineList:P}}_convertIndices(u,c){const y=[];for(let M=0;M<c.length;M++)y.push(this._vertexToIndex(u[2*c[M]],u[2*c[M]+1]));return y}_pointArrayToIndices(u){const c=[];for(let y=0;y<u.length;y++){const M=u[y];c.push(this._vertexToIndex(M.x,M.y))}return c}}function oh(h,u,c,y=!0){return new pu(c,u).subdividePolygonInternal(h,y)}function hs(h,u,c=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const y=h[0],M=h[h.length-1],R=c&&(y.x!==M.x||y.y!==M.y);if(u<2)return R?[...h,h[0]]:[...h];const P=Math.floor(nt/u),N=[];N.push(new p(h[0].x,h[0].y));const H=h.length,ie=R?H:H-1;for(let ue=0;ue<ie;ue++){const ve=h[ue],Pe=ue<H-1?h[ue+1]:h[0],Qe=ve.x,qe=ve.y,et=Pe.x,At=Pe.y,Mt=Qe!==et,Qt=qe!==At;if(!Mt&&!Qt)continue;const Dt=et-Qe,jt=At-qe,ln=Math.abs(Dt),Cn=Math.abs(jt);let Un=Qe,pi=qe;for(;;){const di=Dt>0?(Math.floor(Un/P)+1)*P:(Math.ceil(Un/P)-1)*P,tr=jt>0?(Math.floor(pi/P)+1)*P:(Math.ceil(pi/P)-1)*P,ui=Math.abs(Un-di),fi=Math.abs(pi-tr),En=Math.abs(Un-et),fr=Math.abs(pi-At),Er=Mt?ui/ln:Number.POSITIVE_INFINITY,sr=Qt?fi/Cn:Number.POSITIVE_INFINITY;if((En<=ui||!Mt)&&(fr<=fi||!Qt))break;if(Er<sr&&Mt||!Qt){Un=di,pi+=jt*Er;const Ui=new p(Un,Math.round(pi));N[N.length-1].x===Ui.x&&N[N.length-1].y===Ui.y||N.push(Ui)}else{Un+=Dt*sr,pi=tr;const Ui=new p(Math.round(Un),pi);N[N.length-1].x===Ui.x&&N[N.length-1].y===Ui.y||N.push(Ui)}}const ai=new p(et,At);N[N.length-1].x===ai.x&&N[N.length-1].y===ai.y||N.push(ai)}return N}function wA(h,u,c){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let y=0,M=h[2*u[0]];for(let H=1;H<u.length;H++){const ie=h[2*u[H]];ie<M&&(M=ie,y=H)}const R=u.length;let P=y,N=(P+1)%R;for(;;){const H=P-1>=0?P-1:R-1,ie=(N+1)%R,ue=h[2*u[H]],ve=h[2*u[ie]],Pe=h[2*u[P]],Qe=h[2*u[P]+1],qe=h[2*u[N]+1];let et=!1;if(ue<ve)et=!0;else if(ue>ve)et=!1;else{const At=qe-Qe,Mt=-(h[2*u[N]]-Pe),Qt=Qe<qe?1:-1;((ue-Pe)*At+(h[2*u[H]+1]-Qe)*Mt)*Qt>((ve-Pe)*At+(h[2*u[ie]+1]-Qe)*Mt)*Qt&&(et=!0)}if(et){const At=u[H],Mt=u[P],Qt=u[N];At!==Mt&&At!==Qt&&Mt!==Qt&&c.push(Qt,Mt,At),P--,P<0&&(P=R-1)}else{const At=u[ie],Mt=u[P],Qt=u[N];At!==Mt&&At!==Qt&&Mt!==Qt&&c.push(Qt,Mt,At),N++,N>=R&&(N=0)}if(H===ie)break}}function Ml(h,u,c,y,M,R,P,N,H){const ie=M.length/2,ue=P&&N&&H;if(ie<Br.MAX_VERTEX_ARRAY_LENGTH){const ve=u.prepareSegment(ie,c,y),Pe=ve.vertexLength;for(let et=0;et<R.length;et+=3)y.emplaceBack(Pe+R[et],Pe+R[et+1],Pe+R[et+2]);let Qe,qe;ve.vertexLength+=ie,ve.primitiveLength+=R.length/3,ue&&(qe=P.prepareSegment(ie,c,N),Qe=qe.vertexLength,qe.vertexLength+=ie);for(let et=0;et<M.length;et+=2)h(M[et],M[et+1]);if(ue)for(let et=0;et<H.length;et++){const At=H[et];for(let Mt=1;Mt<At.length;Mt+=2)N.emplaceBack(Qe+At[Mt-1],Qe+At[Mt]);qe.primitiveLength+=At.length/2}}else(function(ve,Pe,Qe,qe,et,At){const Mt=[];for(let Cn=0;Cn<qe.length/2;Cn++)Mt.push(-1);const Qt={count:0};let Dt=0,jt=ve.getOrCreateLatestSegment(Pe,Qe),ln=jt.vertexLength;for(let Cn=2;Cn<et.length;Cn+=3){const Un=et[Cn-2],pi=et[Cn-1],ai=et[Cn];let di=Mt[Un]<Dt,tr=Mt[pi]<Dt,ui=Mt[ai]<Dt;jt.vertexLength+((di?1:0)+(tr?1:0)+(ui?1:0))>Br.MAX_VERTEX_ARRAY_LENGTH&&(jt=ve.createNewSegment(Pe,Qe),Dt=Qt.count,di=!0,tr=!0,ui=!0,ln=0);const fi=mc(Mt,qe,At,Qt,Un,di,jt),En=mc(Mt,qe,At,Qt,pi,tr,jt),fr=mc(Mt,qe,At,Qt,ai,ui,jt);Qe.emplaceBack(ln+fi-Dt,ln+En-Dt,ln+fr-Dt),jt.primitiveLength++}})(u,c,y,M,R,h),ue&&function(ve,Pe,Qe,qe,et,At){const Mt=[];for(let Cn=0;Cn<qe.length/2;Cn++)Mt.push(-1);const Qt={count:0};let Dt=0,jt=ve.getOrCreateLatestSegment(Pe,Qe),ln=jt.vertexLength;for(let Cn=0;Cn<et.length;Cn++){const Un=et[Cn];for(let pi=1;pi<et[Cn].length;pi+=2){const ai=Un[pi-1],di=Un[pi];let tr=Mt[ai]<Dt,ui=Mt[di]<Dt;jt.vertexLength+((tr?1:0)+(ui?1:0))>Br.MAX_VERTEX_ARRAY_LENGTH&&(jt=ve.createNewSegment(Pe,Qe),Dt=Qt.count,tr=!0,ui=!0,ln=0);const fi=mc(Mt,qe,At,Qt,ai,tr,jt),En=mc(Mt,qe,At,Qt,di,ui,jt);Qe.emplaceBack(ln+fi-Dt,ln+En-Dt),jt.primitiveLength++}}}(P,c,N,M,H,h),u.forceNewSegmentOnNextPrepare(),P?.forceNewSegmentOnNextPrepare()}function mc(h,u,c,y,M,R,P){if(R){const N=y.count;return c(u[2*M],u[2*M+1]),h[M]=y.count,y.count++,P.vertexLength++,N}return h[M]}class sl{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(c=>c.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new dn,this.indexArray=new ua,this.indexArray2=new Lo,this.programConfigurations=new Ya(u.layers,u.zoom),this.segments=new Br,this.segments2=new Br,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(u,c,y){this.hasPattern=_e("fill",this.layers,c);const M=this.layers[0].layout.get("fill-sort-key"),R=!M.isConstant(),P=[];for(const{feature:N,id:H,index:ie,sourceLayerIndex:ue}of u){const ve=this.layers[0]._featureFilter.needGeometry,Pe=nA(N,ve);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom,{globalState:this.globalState}),Pe,y))continue;const Qe=R?M.evaluate(Pe,{},y,c.availableImages):void 0,qe={id:H,properties:N.properties,type:N.type,sourceLayerIndex:ue,index:ie,geometry:ve?Pe.geometry:Sa(N),patterns:{},sortKey:Qe};P.push(qe)}R&&P.sort((N,H)=>N.sortKey-H.sortKey);for(const N of P){const{geometry:H,index:ie,sourceLayerIndex:ue}=N;if(this.hasPattern){const ve=ke("fill",this.layers,N,{zoom:this.zoom,globalState:this.globalState},c);this.patternFeatures.push(ve)}else this.addFeature(N,H,ie,y,{},c.subdivisionGranularity);c.featureIndex.insert(u[ie].feature,H,ie,ue,this.index)}}update(u,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,c,this.stateDependentLayers,{imagePositions:y,globalState:this.globalState})}addFeatures(u,c,y){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,c,y,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,fe),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,c,y,M,R,P){for(const N of Hc(c,500)){const H=oh(N,M,P.fill.getGranularityForZoomLevel(M.z)),ie=this.layoutVertexArray;Ml((ue,ve)=>{ie.emplaceBack(ue,ve)},this.segments,this.layoutVertexArray,this.indexArray,H.verticesFlattened,H.indicesTriangles,this.segments2,this.indexArray2,H.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,y,{imagePositions:R,canonical:M,globalState:this.globalState})}}let mu,$A;ci("FillBucket",sl,{omit:["layers","patternFeatures"]});var od={get paint(){return $A=$A||new la({"fill-antialias":new Ii(it.paint_fill["fill-antialias"]),"fill-opacity":new ki(it.paint_fill["fill-opacity"]),"fill-color":new ki(it.paint_fill["fill-color"]),"fill-outline-color":new ki(it.paint_fill["fill-outline-color"]),"fill-translate":new Ii(it.paint_fill["fill-translate"]),"fill-translate-anchor":new Ii(it.paint_fill["fill-translate-anchor"]),"fill-pattern":new kc(it.paint_fill["fill-pattern"])})},get layout(){return mu=mu||new la({"fill-sort-key":new ki(it.layout_fill["fill-sort-key"])})}};class Af extends Ql{constructor(u){super(u,od)}recalculate(u,c){super.recalculate(u,c);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new sl(u)}queryRadius(){return kd(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:c,transform:y,pixelsToTileUnits:M}){return rd(Xs(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-y.bearingInRadians,M),c)}isTileClipped(){return!0}}const Ng=Wa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Gg=Wa([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Rd}=Ng;class Ip{constructor(u,c,y,M,R){this.properties={},this.extent=y,this.type=0,this.id=void 0,this._pbf=u,this._geometry=-1,this._keys=M,this._values=R,u.readFields(ym,this,c)}loadGeometry(){const u=this._pbf;u.pos=this._geometry;const c=u.readVarint()+u.pos,y=[];let M,R=1,P=0,N=0,H=0;for(;u.pos<c;){if(P<=0){const ie=u.readVarint();R=7&ie,P=ie>>3}if(P--,R===1||R===2)N+=u.readSVarint(),H+=u.readSVarint(),R===1&&(M&&y.push(M),M=[]),M&&M.push(new p(N,H));else{if(R!==7)throw new Error(`unknown command ${R}`);M&&M.push(M[0].clone())}}return M&&y.push(M),y}bbox(){const u=this._pbf;u.pos=this._geometry;const c=u.readVarint()+u.pos;let y=1,M=0,R=0,P=0,N=1/0,H=-1/0,ie=1/0,ue=-1/0;for(;u.pos<c;){if(M<=0){const ve=u.readVarint();y=7&ve,M=ve>>3}if(M--,y===1||y===2)R+=u.readSVarint(),P+=u.readSVarint(),R<N&&(N=R),R>H&&(H=R),P<ie&&(ie=P),P>ue&&(ue=P);else if(y!==7)throw new Error(`unknown command ${y}`)}return[N,ie,H,ue]}toGeoJSON(u,c,y){const M=this.extent*Math.pow(2,y),R=this.extent*u,P=this.extent*c,N=this.loadGeometry();function H(Pe){return[360*(Pe.x+R)/M-180,360/Math.PI*Math.atan(Math.exp((1-2*(Pe.y+P)/M)*Math.PI))-90]}function ie(Pe){return Pe.map(H)}let ue;if(this.type===1){const Pe=[];for(const qe of N)Pe.push(qe[0]);const Qe=ie(Pe);ue=Pe.length===1?{type:"Point",coordinates:Qe[0]}:{type:"MultiPoint",coordinates:Qe}}else if(this.type===2){const Pe=N.map(ie);ue=Pe.length===1?{type:"LineString",coordinates:Pe[0]}:{type:"MultiLineString",coordinates:Pe}}else{if(this.type!==3)throw new Error("unknown feature type");{const Pe=function(qe){const et=qe.length;if(et<=1)return[qe];const At=[];let Mt,Qt;for(let Dt=0;Dt<et;Dt++){const jt=s0(qe[Dt]);jt!==0&&(Qt===void 0&&(Qt=jt<0),Qt===jt<0?(Mt&&At.push(Mt),Mt=[qe[Dt]]):Mt&&Mt.push(qe[Dt]))}return Mt&&At.push(Mt),At}(N),Qe=[];for(const qe of Pe)Qe.push(qe.map(ie));ue=Qe.length===1?{type:"Polygon",coordinates:Qe[0]}:{type:"MultiPolygon",coordinates:Qe}}}const ve={type:"Feature",geometry:ue,properties:this.properties};return this.id!=null&&(ve.id=this.id),ve}}function ym(h,u,c){h===1?u.id=c.readVarint():h===2?function(y,M){const R=y.readVarint()+y.pos;for(;y.pos<R;){const P=M._keys[y.readVarint()],N=M._values[y.readVarint()];M.properties[P]=N}}(c,u):h===3?u.type=c.readVarint():h===4&&(u._geometry=c.pos)}function s0(h){let u=0;for(let c,y,M=0,R=h.length,P=R-1;M<R;P=M++)c=h[M],y=h[P],u+=(y.x-c.x)*(c.y+y.y);return u}Ip.types=["Unknown","Point","LineString","Polygon"];class SA{constructor(u,c){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(vm,this,c),this.length=this._features.length}feature(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];const c=this._pbf.readVarint()+this._pbf.pos;return new Ip(this._pbf,c,this.extent,this._keys,this._values)}}function vm(h,u,c){h===15?u.version=c.readVarint():h===1?u.name=c.readString():h===5?u.extent=c.readVarint():h===2?u._features.push(c.pos):h===3?u._keys.push(c.readString()):h===4&&u._values.push(function(y){let M=null;const R=y.readVarint()+y.pos;for(;y.pos<R;){const P=y.readVarint()>>3;M=P===1?y.readString():P===2?y.readFloat():P===3?y.readDouble():P===4?y.readVarint64():P===5?y.readVarint():P===6?y.readSVarint():P===7?y.readBoolean():null}if(M==null)throw new Error("unknown feature value");return M}(c))}class Wg{constructor(u,c){this.layers=u.readFields(ry,{},c)}}function ry(h,u,c){if(h===3){const y=new SA(c,c.readVarint()+c.pos);y.length&&(u[y.name]=y)}}const Hf=Math.pow(2,13);function Cm(h,u,c,y,M,R,P,N){h.emplaceBack(u,c,2*Math.floor(y*Hf)+P,M*Hf*2,R*Hf*2,Math.round(N))}class _m{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(c=>c.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Xt,this.centroidVertexArray=new Bt,this.indexArray=new ua,this.programConfigurations=new Ya(u.layers,u.zoom),this.segments=new Br,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(u,c,y){this.features=[],this.hasPattern=_e("fill-extrusion",this.layers,c);for(const{feature:M,id:R,index:P,sourceLayerIndex:N}of u){const H=this.layers[0]._featureFilter.needGeometry,ie=nA(M,H);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom,{globalState:this.globalState}),ie,y))continue;const ue={id:R,sourceLayerIndex:N,index:P,geometry:H?ie.geometry:Sa(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(ke("fill-extrusion",this.layers,ue,{zoom:this.zoom,globalState:this.globalState},c)):this.addFeature(ue,ue.geometry,P,y,{},c.subdivisionGranularity),c.featureIndex.insert(M,ue.geometry,P,N,this.index,!0)}}addFeatures(u,c,y){for(const M of this.features){const{geometry:R}=M;this.addFeature(M,R,M.index,c,y,u.subdivisionGranularity)}}update(u,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,c,this.stateDependentLayers,{imagePositions:y,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Rd),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,Gg.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,c,y,M,R,P){for(const N of Hc(c,500)){const H={x:0,y:0,sampleCount:0},ie=this.layoutVertexArray.length;this.processPolygon(H,M,u,N,P);const ue=this.layoutVertexArray.length-ie,ve=Math.floor(H.x/H.sampleCount),Pe=Math.floor(H.y/H.sampleCount);for(let Qe=0;Qe<ue;Qe++)this.centroidVertexArray.emplaceBack(ve,Pe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,y,{imagePositions:R,canonical:M,globalState:this.globalState})}processPolygon(u,c,y,M,R){if(M.length<1||Q0(M[0]))return;for(const ve of M)ve.length!==0&&oy(u,ve);const P={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},N=R.fill.getGranularityForZoomLevel(c.z),H=Ip.types[y.type]==="Polygon";for(const ve of M){if(ve.length===0||Q0(ve))continue;const Pe=hs(ve,N,H);this._generateSideFaces(Pe,P)}if(!H)return;const ie=oh(M,c,N,!1),ue=this.layoutVertexArray;Ml((ve,Pe)=>{Cm(ue,ve,Pe,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,ie.verticesFlattened,ie.indicesTriangles)}_generateSideFaces(u,c){let y=0;for(let M=1;M<u.length;M++){const R=u[M],P=u[M-1];if(iC(R,P))continue;c.segment.vertexLength+4>Br.MAX_VERTEX_ARRAY_LENGTH&&(c.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const N=R.sub(P)._perp()._unit(),H=P.dist(R);y+H>32768&&(y=0),Cm(this.layoutVertexArray,R.x,R.y,N.x,N.y,0,0,y),Cm(this.layoutVertexArray,R.x,R.y,N.x,N.y,0,1,y),y+=H,Cm(this.layoutVertexArray,P.x,P.y,N.x,N.y,0,0,y),Cm(this.layoutVertexArray,P.x,P.y,N.x,N.y,0,1,y);const ie=c.segment.vertexLength;this.indexArray.emplaceBack(ie,ie+2,ie+1),this.indexArray.emplaceBack(ie+1,ie+2,ie+3),c.segment.vertexLength+=4,c.segment.primitiveLength+=2}}}function oy(h,u){for(let c=0;c<u.length;c++){const y=u[c];c===u.length-1&&u[0].x===y.x&&u[0].y===y.y||(h.x+=y.x,h.y+=y.y,h.sampleCount++)}}function iC(h,u){return h.x===u.x&&(h.x<0||h.x>nt)||h.y===u.y&&(h.y<0||h.y>nt)}function Q0(h){return h.every(u=>u.x<0)||h.every(u=>u.x>nt)||h.every(u=>u.y<0)||h.every(u=>u.y>nt)}let os;ci("FillExtrusionBucket",_m,{omit:["layers","features"]});var Gs={get paint(){return os=os||new la({"fill-extrusion-opacity":new Ii(it["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ki(it["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ii(it["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ii(it["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new kc(it["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ki(it["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ki(it["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ii(it["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ta extends Ql{constructor(u){super(u,Gs)}createBucket(u){return new _m(u)}queryRadius(){return kd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:c,featureState:y,geometry:M,transform:R,pixelsToTileUnits:P,pixelPosMatrix:N}){const H=Xs(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-R.bearingInRadians,P),ie=this.paint.get("fill-extrusion-height").evaluate(c,y),ue=this.paint.get("fill-extrusion-base").evaluate(c,y),ve=function(Qe,qe){const et=[];for(const At of Qe){const Mt=[At.x,At.y,0,1];Ve(Mt,Mt,qe),et.push(new p(Mt[0]/Mt[3],Mt[1]/Mt[3]))}return et}(H,N),Pe=function(Qe,qe,et,At){const Mt=[],Qt=[],Dt=At[8]*qe,jt=At[9]*qe,ln=At[10]*qe,Cn=At[11]*qe,Un=At[8]*et,pi=At[9]*et,ai=At[10]*et,di=At[11]*et;for(const tr of Qe){const ui=[],fi=[];for(const En of tr){const fr=En.x,Er=En.y,sr=At[0]*fr+At[4]*Er+At[12],Ui=At[1]*fr+At[5]*Er+At[13],Gr=At[2]*fr+At[6]*Er+At[14],Ua=At[3]*fr+At[7]*Er+At[15],bs=Gr+ln,Dl=Ua+Cn,OA=sr+Un,Rl=Ui+pi,Ku=Gr+ai,ks=Ua+di,Al=new p((sr+Dt)/Dl,(Ui+jt)/Dl);Al.z=bs/Dl,ui.push(Al);const Uu=new p(OA/ks,Rl/ks);Uu.z=Ku/ks,fi.push(Uu)}Mt.push(ui),Qt.push(fi)}return[Mt,Qt]}(M,ue,ie,N);return function(Qe,qe,et){let At=1/0;rd(et,qe)&&(At=as(et,qe[0]));for(let Mt=0;Mt<qe.length;Mt++){const Qt=qe[Mt],Dt=Qe[Mt];for(let jt=0;jt<Qt.length-1;jt++){const ln=Qt[jt],Cn=[ln,Qt[jt+1],Dt[jt+1],Dt[jt],ln];pm(et,Cn)&&(At=Math.min(At,as(et,Cn)))}}return At!==1/0&&At}(Pe[0],Pe[1],ve)}}function Yo(h,u){return h.x*u.x+h.y*u.y}function as(h,u){if(h.length===1){let c=0;const y=u[c++];let M;for(;!M||y.equals(M);)if(M=u[c++],!M)return 1/0;for(;c<u.length;c++){const R=u[c],P=h[0],N=M.sub(y),H=R.sub(y),ie=P.sub(y),ue=Yo(N,N),ve=Yo(N,H),Pe=Yo(H,H),Qe=Yo(ie,N),qe=Yo(ie,H),et=ue*Pe-ve*ve,At=(Pe*Qe-ve*qe)/et,Mt=(ue*qe-ve*Qe)/et,Qt=y.z*(1-At-Mt)+M.z*At+R.z*Mt;if(isFinite(Qt))return Qt}return 1/0}{let c=1/0;for(const y of u)c=Math.min(c,y.z);return c}}const ah=Wa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Vf}=ah,bm=Wa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Qg}=bm,cf=Math.cos(Math.PI/180*37.5),wl=Math.pow(2,14)/.5;class Pd{constructor(u){this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(c=>c.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new nn,this.layoutVertexArray2=new un,this.indexArray=new ua,this.programConfigurations=new Ya(u.layers,u.zoom),this.segments=new Br,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(u,c,y){this.hasPattern=_e("line",this.layers,c);const M=this.layers[0].layout.get("line-sort-key"),R=!M.isConstant(),P=[];for(const{feature:N,id:H,index:ie,sourceLayerIndex:ue}of u){const ve=this.layers[0]._featureFilter.needGeometry,Pe=nA(N,ve);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom,{globalState:this.globalState}),Pe,y))continue;const Qe=R?M.evaluate(Pe,{},y):void 0,qe={id:H,properties:N.properties,type:N.type,sourceLayerIndex:ue,index:ie,geometry:ve?Pe.geometry:Sa(N),patterns:{},sortKey:Qe};P.push(qe)}R&&P.sort((N,H)=>N.sortKey-H.sortKey);for(const N of P){const{geometry:H,index:ie,sourceLayerIndex:ue}=N;if(this.hasPattern){const ve=ke("line",this.layers,N,{zoom:this.zoom,globalState:this.globalState},c);this.patternFeatures.push(ve)}else this.addFeature(N,H,ie,y,{},c.subdivisionGranularity);c.featureIndex.insert(u[ie].feature,H,ie,ue,this.index)}}update(u,c,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,c,this.stateDependentLayers,{imagePositions:y,globalState:this.globalState})}addFeatures(u,c,y){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,c,y,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,Qg)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Vf),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,c,y,M,R,P){const N=this.layers[0].layout,H=N.get("line-join").evaluate(u,{}),ie=N.get("line-cap"),ue=N.get("line-miter-limit"),ve=N.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Pe of c)this.addLine(Pe,u,H,ie,ue,ve,M,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,y,{imagePositions:R,canonical:M,globalState:this.globalState})}addLine(u,c,y,M,R,P,N,H){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=hs(u,N?H.line.getGranularityForZoomLevel(N.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Dt=0;Dt<u.length-1;Dt++)this.totalDistance+=u[Dt].dist(u[Dt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ie=Ip.types[c.type]==="Polygon";let ue=u.length;for(;ue>=2&&u[ue-1].equals(u[ue-2]);)ue--;let ve=0;for(;ve<ue-1&&u[ve].equals(u[ve+1]);)ve++;if(ue<(ie?3:2))return;y==="bevel"&&(R=1.05);const Pe=this.overscaling<=16?122880/(512*this.overscaling):0,Qe=this.segments.prepareSegment(10*ue,this.layoutVertexArray,this.indexArray);let qe,et,At,Mt,Qt;this.e1=this.e2=-1,ie&&(qe=u[ue-2],Qt=u[ve].sub(qe)._unit()._perp());for(let Dt=ve;Dt<ue;Dt++){if(At=Dt===ue-1?ie?u[ve+1]:void 0:u[Dt+1],At&&u[Dt].equals(At))continue;Qt&&(Mt=Qt),qe&&(et=qe),qe=u[Dt],Qt=At?At.sub(qe)._unit()._perp():Mt,Mt=Mt||Qt;let jt=Mt.add(Qt);jt.x===0&&jt.y===0||jt._unit();const ln=Mt.x*Qt.x+Mt.y*Qt.y,Cn=jt.x*Qt.x+jt.y*Qt.y,Un=Cn!==0?1/Cn:1/0,pi=2*Math.sqrt(2-2*Cn),ai=Cn<cf&&et&&At,di=Mt.x*Qt.y-Mt.y*Qt.x>0;if(ai&&Dt>ve){const fi=qe.dist(et);if(fi>2*Pe){const En=qe.sub(qe.sub(et)._mult(Pe/fi)._round());this.updateDistance(et,En),this.addCurrentVertex(En,Mt,0,0,Qe),et=En}}const tr=et&&At;let ui=tr?y:ie?"butt":M;if(tr&&ui==="round"&&(Un<P?ui="miter":Un<=2&&(ui="fakeround")),ui==="miter"&&Un>R&&(ui="bevel"),ui==="bevel"&&(Un>2&&(ui="flipbevel"),Un<R&&(ui="miter")),et&&this.updateDistance(et,qe),ui==="miter")jt._mult(Un),this.addCurrentVertex(qe,jt,0,0,Qe);else if(ui==="flipbevel"){if(Un>100)jt=Qt.mult(-1);else{const fi=Un*Mt.add(Qt).mag()/Mt.sub(Qt).mag();jt._perp()._mult(fi*(di?-1:1))}this.addCurrentVertex(qe,jt,0,0,Qe),this.addCurrentVertex(qe,jt.mult(-1),0,0,Qe)}else if(ui==="bevel"||ui==="fakeround"){const fi=-Math.sqrt(Un*Un-1),En=di?fi:0,fr=di?0:fi;if(et&&this.addCurrentVertex(qe,Mt,En,fr,Qe),ui==="fakeround"){const Er=Math.round(180*pi/Math.PI/20);for(let sr=1;sr<Er;sr++){let Ui=sr/Er;if(Ui!==.5){const Ua=Ui-.5;Ui+=Ui*Ua*(Ui-1)*((1.0904+ln*(ln*(3.55645-1.43519*ln)-3.2452))*Ua*Ua+(.848013+ln*(.215638*ln-1.06021)))}const Gr=Qt.sub(Mt)._mult(Ui)._add(Mt)._unit()._mult(di?-1:1);this.addHalfVertex(qe,Gr.x,Gr.y,!1,di,0,Qe)}}At&&this.addCurrentVertex(qe,Qt,-En,-fr,Qe)}else if(ui==="butt")this.addCurrentVertex(qe,jt,0,0,Qe);else if(ui==="square"){const fi=et?1:-1;this.addCurrentVertex(qe,jt,fi,fi,Qe)}else ui==="round"&&(et&&(this.addCurrentVertex(qe,Mt,0,0,Qe),this.addCurrentVertex(qe,Mt,1,1,Qe,!0)),At&&(this.addCurrentVertex(qe,Qt,-1,-1,Qe,!0),this.addCurrentVertex(qe,Qt,0,0,Qe)));if(ai&&Dt<ue-1){const fi=qe.dist(At);if(fi>2*Pe){const En=qe.add(At.sub(qe)._mult(Pe/fi)._round());this.updateDistance(qe,En),this.addCurrentVertex(En,Qt,0,0,Qe),qe=En}}}}addCurrentVertex(u,c,y,M,R,P=!1){const N=c.y*M-c.x,H=-c.y-c.x*M;this.addHalfVertex(u,c.x+c.y*y,c.y-c.x*y,P,!1,y,R),this.addHalfVertex(u,N,H,P,!0,-M,R),this.distance>wl/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,c,y,M,R,P))}addHalfVertex({x:u,y:c},y,M,R,P,N,H){const ie=.5*(this.lineClips?this.scaledDistance*(wl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(R?1:0),(c<<1)+(P?1:0),Math.round(63*y)+128,Math.round(63*M)+128,1+(N===0?0:N<0?-1:1)|(63&ie)<<2,ie>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ue=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ue,this.e2),H.primitiveLength++),P?this.e2=ue:this.e1=ue}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,c){this.distance+=u.dist(c),this.updateScaledDistance()}}let $f,Y0;ci("LineBucket",Pd,{omit:["layers","patternFeatures"]});var sh={get paint(){return Y0=Y0||new la({"line-opacity":new ki(it.paint_line["line-opacity"]),"line-color":new ki(it.paint_line["line-color"]),"line-translate":new Ii(it.paint_line["line-translate"]),"line-translate-anchor":new Ii(it.paint_line["line-translate-anchor"]),"line-width":new ki(it.paint_line["line-width"]),"line-gap-width":new ki(it.paint_line["line-gap-width"]),"line-offset":new ki(it.paint_line["line-offset"]),"line-blur":new ki(it.paint_line["line-blur"]),"line-dasharray":new Du(it.paint_line["line-dasharray"]),"line-pattern":new kc(it.paint_line["line-pattern"]),"line-gradient":new Au(it.paint_line["line-gradient"])})},get layout(){return $f=$f||new la({"line-cap":new Ii(it.layout_line["line-cap"]),"line-join":new ki(it.layout_line["line-join"]),"line-miter-limit":new Ii(it.layout_line["line-miter-limit"]),"line-round-limit":new Ii(it.layout_line["line-round-limit"]),"line-sort-key":new ki(it.layout_line["line-sort-key"])})}};class xm extends ki{possiblyEvaluate(u,c){return c=new Po(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(u,c)}evaluate(u,c,y,M){return c=Fe({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(u,c,y,M)}}let Zf;class Lc extends Ql{constructor(u){super(u,sh),this.gradientVersion=0,Zf||(Zf=new xm(sh.paint.properties["line-width"].specification),Zf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!function(y){return y._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof jr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,c){super.recalculate(u,c),this.paint._values["line-floorwidth"]=Zf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Pd(u)}queryRadius(u){const c=u,y=q0(iA("line-width",this,c),iA("line-gap-width",this,c)),M=iA("line-offset",this,c);return y/2+Math.abs(M)+kd(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:c,featureState:y,geometry:M,transform:R,pixelsToTileUnits:P}){const N=Xs(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-R.bearingInRadians,P),H=P/2*q0(this.paint.get("line-width").evaluate(c,y),this.paint.get("line-gap-width").evaluate(c,y)),ie=this.paint.get("line-offset").evaluate(c,y);return ie&&(M=function(ue,ve){const Pe=[];for(let Qe=0;Qe<ue.length;Qe++){const qe=ue[Qe],et=[];for(let At=0;At<qe.length;At++){const Mt=qe[At-1],Qt=qe[At],Dt=qe[At+1],jt=At===0?new p(0,0):Qt.sub(Mt)._unit()._perp(),ln=At===qe.length-1?new p(0,0):Dt.sub(Qt)._unit()._perp(),Cn=jt._add(ln)._unit(),Un=Cn.x*ln.x+Cn.y*ln.y;Un!==0&&Cn._mult(1/Un),et.push(Cn._mult(ve)._add(Qt))}Pe.push(et)}return Pe}(M,ie*P)),function(ue,ve,Pe){for(let Qe=0;Qe<ve.length;Qe++){const qe=ve[Qe];if(ue.length>=3){for(let et=0;et<qe.length;et++)if(Th(ue,qe[et]))return!0}if(Nf(ue,qe,Pe))return!0}return!1}(N,M,H)}isTileClipped(){return!0}}function q0(h,u){return u>0?u+2*h:h}const Yg=Wa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mm=Wa([{name:"a_projected_pos",components:3,type:"Float32"}],4);Wa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const l0=Wa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Wa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const hf=Wa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),EA=Wa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Xf(h,u,c){return h.sections.forEach(y=>{y.text=function(M,R,P){const N=R.layout.get("text-transform").evaluate(P,{});return N==="uppercase"?M=M.toLocaleUpperCase():N==="lowercase"&&(M=M.toLocaleLowerCase()),Gl.applyArabicShaping&&(M=Gl.applyArabicShaping(M)),M}(y.text,u,c)}),h}Wa([{name:"triangle",components:3,type:"Uint16"}]),Wa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Wa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Wa([{type:"Float32",name:"offsetX"}]),Wa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Wa([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Kd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Js=24;const u0=4294967296,H0=1/u0,qg=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Jf{constructor(u=new Uint8Array(16)){this.buf=ArrayBuffer.isView(u)?u:new Uint8Array(u),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(u,c,y=this.length){for(;this.pos<y;){const M=this.readVarint(),R=M>>3,P=this.pos;this.type=7&M,u(R,c,this),this.pos===P&&this.skip(M)}return c}readMessage(u,c){return this.readFields(u,c,this.readVarint()+this.pos)}readFixed32(){const u=this.dataView.getUint32(this.pos,!0);return this.pos+=4,u}readSFixed32(){const u=this.dataView.getInt32(this.pos,!0);return this.pos+=4,u}readFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*u0;return this.pos+=8,u}readSFixed64(){const u=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*u0;return this.pos+=8,u}readFloat(){const u=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,u}readDouble(){const u=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,u}readVarint(u){const c=this.buf;let y,M;return M=c[this.pos++],y=127&M,M<128?y:(M=c[this.pos++],y|=(127&M)<<7,M<128?y:(M=c[this.pos++],y|=(127&M)<<14,M<128?y:(M=c[this.pos++],y|=(127&M)<<21,M<128?y:(M=c[this.pos],y|=(15&M)<<28,function(R,P,N){const H=N.buf;let ie,ue;if(ue=H[N.pos++],ie=(112&ue)>>4,ue<128||(ue=H[N.pos++],ie|=(127&ue)<<3,ue<128)||(ue=H[N.pos++],ie|=(127&ue)<<10,ue<128)||(ue=H[N.pos++],ie|=(127&ue)<<17,ue<128)||(ue=H[N.pos++],ie|=(127&ue)<<24,ue<128)||(ue=H[N.pos++],ie|=(1&ue)<<31,ue<128))return ep(R,ie,P);throw new Error("Expected varint not more than 10 bytes")}(y,u,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const u=this.readVarint();return u%2==1?(u+1)/-2:u/2}readBoolean(){return!!this.readVarint()}readString(){const u=this.readVarint()+this.pos,c=this.pos;return this.pos=u,u-c>=12&&qg?qg.decode(this.buf.subarray(c,u)):function(y,M,R){let P="",N=M;for(;N<R;){const H=y[N];let ie,ue,ve,Pe=null,Qe=H>239?4:H>223?3:H>191?2:1;if(N+Qe>R)break;Qe===1?H<128&&(Pe=H):Qe===2?(ie=y[N+1],(192&ie)==128&&(Pe=(31&H)<<6|63&ie,Pe<=127&&(Pe=null))):Qe===3?(ie=y[N+1],ue=y[N+2],(192&ie)==128&&(192&ue)==128&&(Pe=(15&H)<<12|(63&ie)<<6|63&ue,(Pe<=2047||Pe>=55296&&Pe<=57343)&&(Pe=null))):Qe===4&&(ie=y[N+1],ue=y[N+2],ve=y[N+3],(192&ie)==128&&(192&ue)==128&&(192&ve)==128&&(Pe=(15&H)<<18|(63&ie)<<12|(63&ue)<<6|63&ve,(Pe<=65535||Pe>=1114112)&&(Pe=null))),Pe===null?(Pe=65533,Qe=1):Pe>65535&&(Pe-=65536,P+=String.fromCharCode(Pe>>>10&1023|55296),Pe=56320|1023&Pe),P+=String.fromCharCode(Pe),N+=Qe}return P}(this.buf,c,u)}readBytes(){const u=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,u);return this.pos=u,c}readPackedVarint(u=[],c){const y=this.readPackedEnd();for(;this.pos<y;)u.push(this.readVarint(c));return u}readPackedSVarint(u=[]){const c=this.readPackedEnd();for(;this.pos<c;)u.push(this.readSVarint());return u}readPackedBoolean(u=[]){const c=this.readPackedEnd();for(;this.pos<c;)u.push(this.readBoolean());return u}readPackedFloat(u=[]){const c=this.readPackedEnd();for(;this.pos<c;)u.push(this.readFloat());return u}readPackedDouble(u=[]){const c=this.readPackedEnd();for(;this.pos<c;)u.push(this.readDouble());return u}readPackedFixed32(u=[]){const c=this.readPackedEnd();for(;this.pos<c;)u.push(this.readFixed32());return u}readPackedSFixed32(u=[]){const c=this.readPackedEnd();for(;this.pos<c;)u.push(this.readSFixed32());return u}readPackedFixed64(u=[]){const c=this.readPackedEnd();for(;this.pos<c;)u.push(this.readFixed64());return u}readPackedSFixed64(u=[]){const c=this.readPackedEnd();for(;this.pos<c;)u.push(this.readSFixed64());return u}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(u){const c=7&u;if(c===0)for(;this.buf[this.pos++]>127;);else if(c===2)this.pos=this.readVarint()+this.pos;else if(c===5)this.pos+=4;else{if(c!==1)throw new Error(`Unimplemented type: ${c}`);this.pos+=8}}writeTag(u,c){this.writeVarint(u<<3|c)}realloc(u){let c=this.length||16;for(;c<this.pos+u;)c*=2;if(c!==this.length){const y=new Uint8Array(c);y.set(this.buf),this.buf=y,this.dataView=new DataView(y.buffer),this.length=c}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeSFixed32(u){this.realloc(4),this.dataView.setInt32(this.pos,u,!0),this.pos+=4}writeFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*H0),!0),this.pos+=8}writeSFixed64(u){this.realloc(8),this.dataView.setInt32(this.pos,-1&u,!0),this.dataView.setInt32(this.pos+4,Math.floor(u*H0),!0),this.pos+=8}writeVarint(u){(u=+u||0)>268435455||u<0?function(c,y){let M,R;if(c>=0?(M=c%4294967296|0,R=c/4294967296|0):(M=~(-c%4294967296),R=~(-c/4294967296),4294967295^M?M=M+1|0:(M=0,R=R+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");y.realloc(10),function(P,N,H){H.buf[H.pos++]=127&P|128,P>>>=7,H.buf[H.pos++]=127&P|128,P>>>=7,H.buf[H.pos++]=127&P|128,P>>>=7,H.buf[H.pos++]=127&P|128,H.buf[H.pos]=127&(P>>>=7)}(M,0,y),function(P,N){const H=(7&P)<<4;N.buf[N.pos++]|=H|((P>>>=3)?128:0),P&&(N.buf[N.pos++]=127&P|((P>>>=7)?128:0),P&&(N.buf[N.pos++]=127&P|((P>>>=7)?128:0),P&&(N.buf[N.pos++]=127&P|((P>>>=7)?128:0),P&&(N.buf[N.pos++]=127&P|((P>>>=7)?128:0),P&&(N.buf[N.pos++]=127&P)))))}(R,y)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))}writeSVarint(u){this.writeVarint(u<0?2*-u-1:2*u)}writeBoolean(u){this.writeVarint(+u)}writeString(u){u=String(u),this.realloc(4*u.length),this.pos++;const c=this.pos;this.pos=function(M,R,P){for(let N,H,ie=0;ie<R.length;ie++){if(N=R.charCodeAt(ie),N>55295&&N<57344){if(!H){N>56319||ie+1===R.length?(M[P++]=239,M[P++]=191,M[P++]=189):H=N;continue}if(N<56320){M[P++]=239,M[P++]=191,M[P++]=189,H=N;continue}N=H-55296<<10|N-56320|65536,H=null}else H&&(M[P++]=239,M[P++]=191,M[P++]=189,H=null);N<128?M[P++]=N:(N<2048?M[P++]=N>>6|192:(N<65536?M[P++]=N>>12|224:(M[P++]=N>>18|240,M[P++]=N>>12&63|128),M[P++]=N>>6&63|128),M[P++]=63&N|128)}return P}(this.buf,u,this.pos);const y=this.pos-c;y>=128&&BA(c,y,this),this.pos=c-1,this.writeVarint(y),this.pos+=y}writeFloat(u){this.realloc(4),this.dataView.setFloat32(this.pos,u,!0),this.pos+=4}writeDouble(u){this.realloc(8),this.dataView.setFloat64(this.pos,u,!0),this.pos+=8}writeBytes(u){const c=u.length;this.writeVarint(c),this.realloc(c);for(let y=0;y<c;y++)this.buf[this.pos++]=u[y]}writeRawMessage(u,c){this.pos++;const y=this.pos;u(c,this);const M=this.pos-y;M>=128&&BA(y,M,this),this.pos=y-1,this.writeVarint(M),this.pos+=M}writeMessage(u,c,y){this.writeTag(u,2),this.writeRawMessage(c,y)}writePackedVarint(u,c){c.length&&this.writeMessage(u,ay,c)}writePackedSVarint(u,c){c.length&&this.writeMessage(u,lh,c)}writePackedBoolean(u,c){c.length&&this.writeMessage(u,rC,c)}writePackedFloat(u,c){c.length&&this.writeMessage(u,sy,c)}writePackedDouble(u,c){c.length&&this.writeMessage(u,ly,c)}writePackedFixed32(u,c){c.length&&this.writeMessage(u,tp,c)}writePackedSFixed32(u,c){c.length&&this.writeMessage(u,V0,c)}writePackedFixed64(u,c){c.length&&this.writeMessage(u,Hg,c)}writePackedSFixed64(u,c){c.length&&this.writeMessage(u,wm,c)}writeBytesField(u,c){this.writeTag(u,2),this.writeBytes(c)}writeFixed32Field(u,c){this.writeTag(u,5),this.writeFixed32(c)}writeSFixed32Field(u,c){this.writeTag(u,5),this.writeSFixed32(c)}writeFixed64Field(u,c){this.writeTag(u,1),this.writeFixed64(c)}writeSFixed64Field(u,c){this.writeTag(u,1),this.writeSFixed64(c)}writeVarintField(u,c){this.writeTag(u,0),this.writeVarint(c)}writeSVarintField(u,c){this.writeTag(u,0),this.writeSVarint(c)}writeStringField(u,c){this.writeTag(u,2),this.writeString(c)}writeFloatField(u,c){this.writeTag(u,5),this.writeFloat(c)}writeDoubleField(u,c){this.writeTag(u,1),this.writeDouble(c)}writeBooleanField(u,c){this.writeVarintField(u,+c)}}function ep(h,u,c){return c?4294967296*u+(h>>>0):4294967296*(u>>>0)+(h>>>0)}function BA(h,u,c){const y=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));c.realloc(y);for(let M=c.pos-1;M>=h;M--)c.buf[M+y]=c.buf[M]}function ay(h,u){for(let c=0;c<h.length;c++)u.writeVarint(h[c])}function lh(h,u){for(let c=0;c<h.length;c++)u.writeSVarint(h[c])}function sy(h,u){for(let c=0;c<h.length;c++)u.writeFloat(h[c])}function ly(h,u){for(let c=0;c<h.length;c++)u.writeDouble(h[c])}function rC(h,u){for(let c=0;c<h.length;c++)u.writeBoolean(h[c])}function tp(h,u){for(let c=0;c<h.length;c++)u.writeFixed32(h[c])}function V0(h,u){for(let c=0;c<h.length;c++)u.writeSFixed32(h[c])}function Hg(h,u){for(let c=0;c<h.length;c++)u.writeFixed64(h[c])}function wm(h,u){for(let c=0;c<h.length;c++)u.writeSFixed64(h[c])}function uy(h,u,c){h===1&&c.readMessage(Ay,u)}function Ay(h,u,c){if(h===3){const{id:y,bitmap:M,width:R,height:P,left:N,top:H,advance:ie}=c.readMessage(cy,{});u.push({id:y,bitmap:new VA({width:R+6,height:P+6},M),metrics:{width:R,height:P,left:N,top:H,advance:ie}})}}function cy(h,u,c){h===1?u.id=c.readVarint():h===2?u.bitmap=c.readBytes():h===3?u.width=c.readVarint():h===4?u.height=c.readVarint():h===5?u.left=c.readSVarint():h===6?u.top=c.readSVarint():h===7&&(u.advance=c.readVarint())}function $0(h){let u=0,c=0;for(const P of h)u+=P.w*P.h,c=Math.max(c,P.w);h.sort((P,N)=>N.h-P.h);const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),c),h:1/0}];let M=0,R=0;for(const P of h)for(let N=y.length-1;N>=0;N--){const H=y[N];if(!(P.w>H.w||P.h>H.h)){if(P.x=H.x,P.y=H.y,R=Math.max(R,P.y+P.h),M=Math.max(M,P.x+P.w),P.w===H.w&&P.h===H.h){const ie=y.pop();ie&&N<y.length&&(y[N]=ie)}else P.h===H.h?(H.x+=P.w,H.w-=P.w):P.w===H.w?(H.y+=P.h,H.h-=P.h):(y.push({x:H.x+P.w,y:H.y,w:H.w-P.w,h:P.h}),H.y+=P.h,H.h-=P.h);break}}return{w:M,h:R,fill:u/(M*R)||0}}class A0{constructor(u,{pixelRatio:c,version:y,stretchX:M,stretchY:R,content:P,textFitWidth:N,textFitHeight:H}){this.paddedRect=u,this.pixelRatio=c,this.stretchX=M,this.stretchY=R,this.content=P,this.version=y,this.textFitWidth=N,this.textFitHeight=H}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class hy{constructor(u,c){const y={},M={};this.haveRenderCallbacks=[];const R=[];this.addImages(u,y,R),this.addImages(c,M,R);const{w:P,h:N}=$0(R),H=new fu({width:P||1,height:N||1});for(const ie in u){const ue=u[ie],ve=y[ie].paddedRect;fu.copy(ue.data,H,{x:0,y:0},{x:ve.x+1,y:ve.y+1},ue.data)}for(const ie in c){const ue=c[ie],ve=M[ie].paddedRect,Pe=ve.x+1,Qe=ve.y+1,qe=ue.data.width,et=ue.data.height;fu.copy(ue.data,H,{x:0,y:0},{x:Pe,y:Qe},ue.data),fu.copy(ue.data,H,{x:0,y:et-1},{x:Pe,y:Qe-1},{width:qe,height:1}),fu.copy(ue.data,H,{x:0,y:0},{x:Pe,y:Qe+et},{width:qe,height:1}),fu.copy(ue.data,H,{x:qe-1,y:0},{x:Pe-1,y:Qe},{width:1,height:et}),fu.copy(ue.data,H,{x:0,y:0},{x:Pe+qe,y:Qe},{width:1,height:et})}this.image=H,this.iconPositions=y,this.patternPositions=M}addImages(u,c,y){for(const M in u){const R=u[M],P={x:0,y:0,w:R.data.width+2,h:R.data.height+2};y.push(P),c[M]=new A0(P,R),R.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(u,c){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in u.updatedImages)this.patchUpdatedImage(this.iconPositions[y],u.getImage(y),c),this.patchUpdatedImage(this.patternPositions[y],u.getImage(y),c)}patchUpdatedImage(u,c,y){if(!u||!c||u.version===c.version)return;u.version=c.version;const[M,R]=u.tl;y.update(c.data,void 0,{x:M,y:R})}}var np;ci("ImagePosition",A0),ci("ImageAtlas",hy),l.ao=void 0,(np=l.ao||(l.ao={}))[np.none=0]="none",np[np.horizontal=1]="horizontal",np[np.vertical=2]="vertical",np[np.horizontalOnly=3]="horizontalOnly";class Sm{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,c,y){const M=new Sm;return M.scale=u||1,M.fontStack=c,M.verticalAlign=y||"bottom",M}static forImage(u,c){const y=new Sm;return y.imageName=u,y.verticalAlign=c||"bottom",y}}class ip{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,c){const y=new ip;for(let M=0;M<u.sections.length;M++){const R=u.sections[M];R.image?y.addImageSection(R):y.addTextSection(R,c)}return y}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let c="";for(let y=0;y<u.length;y++){const M=u.charCodeAt(y+1)||null,R=u.charCodeAt(y-1)||null;c+=M&&ih(M)&&!Kd[u[y+1]]||R&&ih(R)&&!Kd[u[y-1]]||!Kd[u[y]]?u[y]:Kd[u[y]]}return c}(this.text)}trim(){let u=0;for(let y=0;y<this.text.length&&df[this.text.charCodeAt(y)];y++)u++;let c=this.text.length;for(let y=this.text.length-1;y>=0&&y>=u&&df[this.text.charCodeAt(y)];y--)c--;this.text=this.text.substring(u,c),this.sectionIndex=this.sectionIndex.slice(u,c)}substring(u,c){const y=new ip;return y.text=this.text.substring(u,c),y.sectionIndex=this.sectionIndex.slice(u,c),y.sections=this.sections,y}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,c)=>Math.max(u,this.sections[c].scale),0)}getMaxImageSize(u){let c=0,y=0;for(let M=0;M<this.length();M++){const R=this.getSection(M);if(R.imageName){const P=u[R.imageName];if(!P)continue;const N=P.displaySize;c=Math.max(c,N[0]),y=Math.max(y,N[1])}}return{maxImageWidth:c,maxImageHeight:y}}addTextSection(u,c){this.text+=u.text,this.sections.push(Sm.forText(u.scale,u.fontStack||c,u.verticalAlign));const y=this.sections.length-1;for(let M=0;M<u.text.length;++M)this.sectionIndex.push(y)}addImageSection(u){const c=u.image?u.image.name:"";if(c.length===0)return void Ot("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push(Sm.forImage(c,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function c0(h,u,c,y,M,R,P,N,H,ie,ue,ve,Pe,Qe,qe){const et=ip.fromFeature(h,M);let At;ve===l.ao.vertical&&et.verticalizePunctuation();const{processBidirectionalText:Mt,processStyledBidirectionalText:Qt}=Gl;if(Mt&&et.sections.length===1){At=[];const ln=Mt(et.toString(),Bm(et,ie,R,u,y,Qe));for(const Cn of ln){const Un=new ip;Un.text=Cn,Un.sections=et.sections;for(let pi=0;pi<Cn.length;pi++)Un.sectionIndex.push(0);At.push(Un)}}else if(Qt){At=[];const ln=Qt(et.text,et.sectionIndex,Bm(et,ie,R,u,y,Qe));for(const Cn of ln){const Un=new ip;Un.text=Cn[0],Un.sectionIndex=Cn[1],Un.sections=et.sections,At.push(Un)}}else At=function(ln,Cn){const Un=[],pi=ln.text;let ai=0;for(const di of Cn)Un.push(ln.substring(ai,di)),ai=di;return ai<pi.length&&Un.push(ln.substring(ai,pi.length)),Un}(et,Bm(et,ie,R,u,y,Qe));const Dt=[],jt={positionedLines:Dt,text:et.toString(),top:ue[1],bottom:ue[1],left:ue[0],right:ue[0],writingMode:ve,iconsInText:!1,verticalizable:!1};return function(ln,Cn,Un,pi,ai,di,tr,ui,fi,En,fr,Er){let sr=0,Ui=0,Gr=0,Ua=0;const bs=ui==="right"?1:ui==="left"?0:.5,Dl=Js/Er;let OA=0;for(const ks of ai){ks.trim();const Al=ks.getMaxScale(),Uu={positionedGlyphs:[],lineOffset:0};ln.positionedLines[OA]=Uu;const gu=Uu.positionedGlyphs;let Lu=0;if(!ks.length()){Ui+=di,++OA;continue}const zc=py(pi,ks,Dl);for(let oA=0;oA<ks.length();oA++){const cl=ks.getSection(oA),Jl=ks.getSectionIndex(oA),hl=ks.getCharCode(oA),dl=Xg(fi,fr,hl);let qa;if(cl.imageName){if(ln.iconsInText=!0,cl.scale=cl.scale*Dl,qa=my(cl,dl,Al,zc,pi),!qa)continue;Lu=Math.max(Lu,qa.imageOffset)}else if(qa=oC(cl,hl,dl,zc,Cn,Un),!qa)continue;const{rect:Rh,metrics:Km,baselineOffset:jc}=qa;gu.push({glyph:hl,imageName:cl.imageName,x:sr,y:Ui+jc+-17,vertical:dl,scale:cl.scale,fontStack:cl.fontStack,sectionIndex:Jl,metrics:Km,rect:Rh}),dl?(ln.verticalizable=!0,sr+=(cl.imageName?Km.advance:Js)*cl.scale+En):sr+=Km.advance*cl.scale+En}gu.length!==0&&(Gr=Math.max(sr-En,Gr),J0(gu,0,gu.length-1,bs)),sr=0,Uu.lineOffset=Math.max(Lu,(Al-1)*Js);const yu=di*Al+Lu;Ui+=yu,Ua=Math.max(yu,Ua),++OA}const{horizontalAlign:Rl,verticalAlign:Ku}=X0(tr);(function(ks,Al,Uu,gu,Lu,zc,yu,oA,cl){const Jl=(Al-Uu)*Lu;let hl=0;hl=zc!==yu?-oA*gu- -17:-gu*cl*yu+.5*yu;for(const dl of ks)for(const qa of dl.positionedGlyphs)qa.x+=Jl,qa.y+=hl})(ln.positionedLines,bs,Rl,Ku,Gr,Ua,di,Ui,ai.length),ln.top+=-Ku*Ui,ln.bottom=ln.top+Ui,ln.left+=-Rl*Gr,ln.right=ln.left+Gr}(jt,u,c,y,At,P,N,H,ve,ie,Pe,qe),!function(ln){for(const Cn of ln)if(Cn.positionedGlyphs.length!==0)return!1;return!0}(Dt)&&jt}const df={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Z0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},dy={40:!0};function Em(h,u,c,y,M,R){if(u.imageName){const P=y[u.imageName];return P?P.displaySize[0]*u.scale*Js/R+M:0}{const P=c[u.fontStack],N=P&&P[h];return N?N.metrics.advance*u.scale+M:0}}function Vg(h,u,c,y){const M=Math.pow(h-u,2);return y?h<u?M/2:2*M:M+Math.abs(c)*c}function fy(h,u,c){let y=0;return h===10&&(y-=1e4),c&&(y+=150),h!==40&&h!==65288||(y+=50),u!==41&&u!==65289||(y+=50),y}function $g(h,u,c,y,M,R){let P=null,N=Vg(u,c,M,R);for(const H of y){const ie=Vg(u-H.x,c,M,R)+H.badness;ie<=N&&(P=H,N=ie)}return{index:h,x:u,priorBreak:P,badness:N}}function Zg(h){return h?Zg(h.priorBreak).concat(h.index):[]}function Bm(h,u,c,y,M,R){if(!h)return[];const P=[],N=function(ve,Pe,Qe,qe,et,At){let Mt=0;for(let Qt=0;Qt<ve.length();Qt++){const Dt=ve.getSection(Qt);Mt+=Em(ve.getCharCode(Qt),Dt,qe,et,Pe,At)}return Mt/Math.max(1,Math.ceil(Mt/Qe))}(h,u,c,y,M,R),H=h.text.indexOf("")>=0;let ie=0;for(let ve=0;ve<h.length();ve++){const Pe=h.getSection(ve),Qe=h.getCharCode(ve);if(df[Qe]||(ie+=Em(Qe,Pe,y,M,u,R)),ve<h.length()-1){const qe=!((ue=Qe)<11904)&&(!!no["CJK Compatibility Forms"](ue)||!!no["CJK Compatibility"](ue)||!!no["CJK Strokes"](ue)||!!no["CJK Symbols and Punctuation"](ue)||!!no["Enclosed CJK Letters and Months"](ue)||!!no["Halfwidth and Fullwidth Forms"](ue)||!!no["Ideographic Description Characters"](ue)||!!no["Vertical Forms"](ue)||Oh.test(String.fromCodePoint(ue)));(Z0[Qe]||qe||Pe.imageName||ve!==h.length()-2&&dy[h.getCharCode(ve+1)])&&P.push($g(ve+1,ie,N,P,fy(Qe,h.getCharCode(ve+1),qe&&H),!1))}}var ue;return Zg($g(h.length(),ie,N,P,0,!0))}function X0(h){let u=.5,c=.5;switch(h){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:u,verticalAlign:c}}function py(h,u,c){const y=u.getMaxScale()*Js,{maxImageWidth:M,maxImageHeight:R}=u.getMaxImageSize(h),P=Math.max(y,R*c);return{verticalLineContentWidth:Math.max(y,M*c),horizontalLineContentHeight:P}}function _s(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function Xg(h,u,c){return!(h===l.ao.horizontal||!u&&!yA(c)||u&&(df[c]||(y=c,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(y)))));var y}function oC(h,u,c,y,M,R){const P=R[h.fontStack],N=function(ie,ue,ve,Pe){if(ie&&ie.rect)return ie;const Qe=ue[ve.fontStack],qe=Qe&&Qe[Pe];return qe?{rect:null,metrics:qe.metrics}:null}(P&&P[u],M,h,u);if(N===null)return null;let H;if(c)H=y.verticalLineContentWidth-h.scale*Js;else{const ie=_s(h.verticalAlign);H=(y.horizontalLineContentHeight-h.scale*Js)*ie}return{rect:N.rect,metrics:N.metrics,baselineOffset:H}}function my(h,u,c,y,M){const R=M[h.imageName];if(!R)return null;const P=R.paddedRect,N=R.displaySize,H={width:N[0],height:N[1],left:1,top:-3,advance:u?N[1]:N[0]};let ie;if(u)ie=y.verticalLineContentWidth-N[1]*h.scale;else{const ue=_s(h.verticalAlign);ie=(y.horizontalLineContentHeight-N[1]*h.scale)*ue}return{rect:P,metrics:H,baselineOffset:ie,imageOffset:(u?N[0]:N[1])*h.scale-Js*c}}function J0(h,u,c,y){if(y===0)return;const M=h[c],R=(h[c].x+M.metrics.advance*M.scale)*y;for(let P=u;P<=c;P++)h[P].x-=R}function aC(h,u,c){const{horizontalAlign:y,verticalAlign:M}=X0(c),R=u[0]-h.displaySize[0]*y,P=u[1]-h.displaySize[1]*M;return{image:h,top:P,bottom:P+h.displaySize[1],left:R,right:R+h.displaySize[0]}}function Jg(h){var u,c;let y=h.left,M=h.top,R=h.right-y,P=h.bottom-M;const N=(u=h.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",H=(c=h.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",ie=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(H==="proportional"){if(N==="stretchOnly"&&R/P<ie||N==="proportional"){const ue=Math.ceil(P*ie);y*=ue/R,R=ue}}else if(N==="proportional"&&H==="stretchOnly"&&ie!==0&&R/P>ie){const ue=Math.ceil(R/ie);M*=ue/P,P=ue}return{x1:y,y1:M,x2:y+R,y2:M+P}}function Om(h,u,c,y,M,R){const P=h.image;let N;if(P.content){const At=P.content,Mt=P.pixelRatio||1;N=[At[0]/Mt,At[1]/Mt,P.displaySize[0]-At[2]/Mt,P.displaySize[1]-At[3]/Mt]}const H=u.left*R,ie=u.right*R;let ue,ve,Pe,Qe;c==="width"||c==="both"?(Qe=M[0]+H-y[3],ve=M[0]+ie+y[1]):(Qe=M[0]+(H+ie-P.displaySize[0])/2,ve=Qe+P.displaySize[0]);const qe=u.top*R,et=u.bottom*R;return c==="height"||c==="both"?(ue=M[1]+qe-y[0],Pe=M[1]+et+y[2]):(ue=M[1]+(qe+et-P.displaySize[1])/2,Pe=ue+P.displaySize[1]),{image:P,top:ue,right:ve,bottom:Pe,left:Qe,collisionPadding:N}}const ZA=128,ad=32640;function Im(h,u){const{expression:c}=u;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Po(h+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:M}=c;let R=0;for(;R<y.length&&y[R]<=h;)R++;R=Math.max(0,R-1);let P=R;for(;P<y.length&&y[P]<h+1;)P++;P=Math.min(y.length-1,P);const N=y[R],H=y[P];return c.kind==="composite"?{kind:"composite",minZoom:N,maxZoom:H,interpolationType:M}:{kind:"camera",minZoom:N,maxZoom:H,minSize:c.evaluate(new Po(N)),maxSize:c.evaluate(new Po(H)),interpolationType:M}}}function Tm(h,u,c){let y="never";const M=h.get(u);return M?y=M:h.get(c)&&(y="always"),y}const rp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function uh(h,u,c,y,M,R,P,N,H,ie,ue,ve,Pe){const Qe=N?Math.min(ad,Math.round(N[0])):0,qe=N?Math.min(ad,Math.round(N[1])):0;h.emplaceBack(u,c,Math.round(32*y),Math.round(32*M),R,P,(Qe<<1)+(H?1:0),qe,16*ie,16*ue,256*ve,256*Pe)}function Tp(h,u,c){h.emplaceBack(u.x,u.y,c),h.emplaceBack(u.x,u.y,c),h.emplaceBack(u.x,u.y,c),h.emplaceBack(u.x,u.y,c)}function sC(h){for(const u of h.sections)if(rf(u.text))return!0;return!1}class kp{constructor(u){this.layoutVertexArray=new Qn,this.indexArray=new ua,this.programConfigurations=u,this.segments=new Br,this.dynamicLayoutVertexArray=new Tn,this.opacityVertexArray=new xi,this.hasVisibleVertices=!1,this.placedSymbolArray=new Xe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,c,y,M){this.isEmpty()||(y&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Yg.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,Mm.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,rp,!0),this.opacityVertexBuffer.itemSize=1),(y||M)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ci("SymbolBuffers",kp);class Dp{constructor(u,c,y){this.layoutVertexArray=new u,this.layoutAttributes=c,this.indexArray=new y,this.segments=new Br,this.collisionVertexArray=new Co}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,l0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ci("CollisionBuffers",Dp);class Rp{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.globalState=u.globalState,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(P=>P.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Im(this.zoom,c["text-size"]),this.iconSizeData=Im(this.zoom,c["icon-size"]);const y=this.layers[0].layout,M=y.get("symbol-sort-key"),R=y.get("symbol-z-order");this.canOverlap=Tm(y,"text-overlap","text-allow-overlap")!=="never"||Tm(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=R!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(R==="viewport-y"||R==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map(P=>l.ao[P])),this.stateDependentLayerIds=this.layers.filter(P=>P.isStateDependent()).map(P=>P.id),this.sourceID=u.sourceID}createArrays(){this.text=new kp(new Ya(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new kp(new Ya(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new ft,this.lineVertexArray=new xt,this.symbolInstances=new ct,this.textAnchorOffsets=new wt}calculateGlyphDependencies(u,c,y,M,R){for(let P=0;P<u.length;P++)if(c[u.charCodeAt(P)]=!0,(y||M)&&R){const N=Kd[u.charAt(P)];N&&(c[N.charCodeAt(0)]=!0)}}populate(u,c,y){const M=this.layers[0],R=M.layout,P=R.get("text-font"),N=R.get("text-field"),H=R.get("icon-image"),ie=(N.value.kind!=="constant"||N.value.value instanceof Eo&&!N.value.value.isEmpty()||N.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),ue=H.value.kind!=="constant"||!!H.value.value||Object.keys(H.parameters).length>0,ve=R.get("symbol-sort-key");if(this.features=[],!ie&&!ue)return;const Pe=c.iconDependencies,Qe=c.glyphDependencies,qe=c.availableImages,et=new Po(this.zoom,{globalState:this.globalState});for(const{feature:At,id:Mt,index:Qt,sourceLayerIndex:Dt}of u){const jt=M._featureFilter.needGeometry,ln=nA(At,jt);if(!M._featureFilter.filter(et,ln,y))continue;let Cn,Un;if(jt||(ln.geometry=Sa(At)),ie){const ai=M.getValueAndResolveTokens("text-field",ln,y,qe),di=Eo.factory(ai),tr=this.hasRTLText=this.hasRTLText||sC(di);(!tr||Gl.getRTLTextPluginStatus()==="unavailable"||tr&&Gl.isParsed())&&(Cn=Xf(di,M,ln))}if(ue){const ai=M.getValueAndResolveTokens("icon-image",ln,y,qe);Un=ai instanceof Ja?ai:Ja.fromString(ai)}if(!Cn&&!Un)continue;const pi=this.sortFeaturesByKey?ve.evaluate(ln,{},y):void 0;if(this.features.push({id:Mt,text:Cn,icon:Un,index:Qt,sourceLayerIndex:Dt,geometry:ln.geometry,properties:At.properties,type:Ip.types[At.type],sortKey:pi}),Un&&(Pe[Un.name]=!0),Cn){const ai=P.evaluate(ln,{},y).join(","),di=R.get("text-rotation-alignment")!=="viewport"&&R.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ao.vertical)>=0;for(const tr of Cn.sections)if(tr.image)Pe[tr.image.name]=!0;else{const ui=Nl(Cn.toString()),fi=tr.fontStack||ai,En=Qe[fi]=Qe[fi]||{};this.calculateGlyphDependencies(tr.text,En,di,this.allowVerticalPlacement,ui)}}}R.get("symbol-placement")==="line"&&(this.features=function(At){const Mt={},Qt={},Dt=[];let jt=0;function ln(ai){Dt.push(At[ai]),jt++}function Cn(ai,di,tr){const ui=Qt[ai];return delete Qt[ai],Qt[di]=ui,Dt[ui].geometry[0].pop(),Dt[ui].geometry[0]=Dt[ui].geometry[0].concat(tr[0]),ui}function Un(ai,di,tr){const ui=Mt[di];return delete Mt[di],Mt[ai]=ui,Dt[ui].geometry[0].shift(),Dt[ui].geometry[0]=tr[0].concat(Dt[ui].geometry[0]),ui}function pi(ai,di,tr){const ui=tr?di[0][di[0].length-1]:di[0][0];return`${ai}:${ui.x}:${ui.y}`}for(let ai=0;ai<At.length;ai++){const di=At[ai],tr=di.geometry,ui=di.text?di.text.toString():null;if(!ui){ln(ai);continue}const fi=pi(ui,tr),En=pi(ui,tr,!0);if(fi in Qt&&En in Mt&&Qt[fi]!==Mt[En]){const fr=Un(fi,En,tr),Er=Cn(fi,En,Dt[fr].geometry);delete Mt[fi],delete Qt[En],Qt[pi(ui,Dt[Er].geometry,!0)]=Er,Dt[fr].geometry=null}else fi in Qt?Cn(fi,En,tr):En in Mt?Un(fi,En,tr):(ln(ai),Mt[fi]=jt-1,Qt[En]=jt-1)}return Dt.filter(ai=>ai.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((At,Mt)=>At.sortKey-Mt.sortKey)}update(u,c,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,c,this.layers,{imagePositions:y,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(u,c,this.layers,{imagePositions:y,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,c){const y=this.lineVertexArray.length;if(u.segment!==void 0){let M=u.dist(c[u.segment+1]),R=u.dist(c[u.segment]);const P={};for(let N=u.segment+1;N<c.length;N++)P[N]={x:c[N].x,y:c[N].y,tileUnitDistanceFromAnchor:M},N<c.length-1&&(M+=c[N+1].dist(c[N]));for(let N=u.segment||0;N>=0;N--)P[N]={x:c[N].x,y:c[N].y,tileUnitDistanceFromAnchor:R},N>0&&(R+=c[N-1].dist(c[N]));for(let N=0;N<c.length;N++){const H=P[N];this.lineVertexArray.emplaceBack(H.x,H.y,H.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(u,c,y,M,R,P,N,H,ie,ue,ve,Pe){const Qe=u.indexArray,qe=u.layoutVertexArray,et=u.segments.prepareSegment(4*c.length,qe,Qe,this.canOverlap?P.sortKey:void 0),At=this.glyphOffsetArray.length,Mt=et.vertexLength,Qt=this.allowVerticalPlacement&&N===l.ao.vertical?Math.PI/2:0,Dt=P.text&&P.text.sections;for(let jt=0;jt<c.length;jt++){const{tl:ln,tr:Cn,bl:Un,br:pi,tex:ai,pixelOffsetTL:di,pixelOffsetBR:tr,minFontScaleX:ui,minFontScaleY:fi,glyphOffset:En,isSDF:fr,sectionIndex:Er}=c[jt],sr=et.vertexLength,Ui=En[1];uh(qe,H.x,H.y,ln.x,Ui+ln.y,ai.x,ai.y,y,fr,di.x,di.y,ui,fi),uh(qe,H.x,H.y,Cn.x,Ui+Cn.y,ai.x+ai.w,ai.y,y,fr,tr.x,di.y,ui,fi),uh(qe,H.x,H.y,Un.x,Ui+Un.y,ai.x,ai.y+ai.h,y,fr,di.x,tr.y,ui,fi),uh(qe,H.x,H.y,pi.x,Ui+pi.y,ai.x+ai.w,ai.y+ai.h,y,fr,tr.x,tr.y,ui,fi),Tp(u.dynamicLayoutVertexArray,H,Qt),Qe.emplaceBack(sr,sr+2,sr+1),Qe.emplaceBack(sr+1,sr+2,sr+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(En[0]),jt!==c.length-1&&Er===c[jt+1].sectionIndex||u.programConfigurations.populatePaintArrays(qe.length,P,P.index,{imagePositions:{},canonical:Pe,formattedSection:Dt&&Dt[Er],globalState:this.globalState})}u.placedSymbolArray.emplaceBack(H.x,H.y,At,this.glyphOffsetArray.length-At,Mt,ie,ue,H.segment,y?y[0]:0,y?y[1]:0,M[0],M[1],N,0,!1,0,ve)}_addCollisionDebugVertex(u,c,y,M,R,P){return c.emplaceBack(0,0),u.emplaceBack(y.x,y.y,M,R,Math.round(P.x),Math.round(P.y))}addCollisionDebugVertices(u,c,y,M,R,P,N){const H=R.segments.prepareSegment(4,R.layoutVertexArray,R.indexArray),ie=H.vertexLength,ue=R.layoutVertexArray,ve=R.collisionVertexArray,Pe=N.anchorX,Qe=N.anchorY;this._addCollisionDebugVertex(ue,ve,P,Pe,Qe,new p(u,c)),this._addCollisionDebugVertex(ue,ve,P,Pe,Qe,new p(y,c)),this._addCollisionDebugVertex(ue,ve,P,Pe,Qe,new p(y,M)),this._addCollisionDebugVertex(ue,ve,P,Pe,Qe,new p(u,M)),H.vertexLength+=4;const qe=R.indexArray;qe.emplaceBack(ie,ie+1),qe.emplaceBack(ie+1,ie+2),qe.emplaceBack(ie+2,ie+3),qe.emplaceBack(ie+3,ie),H.primitiveLength+=4}addDebugCollisionBoxes(u,c,y,M){for(let R=u;R<c;R++){const P=this.collisionBoxArray.get(R);this.addCollisionDebugVertices(P.x1,P.y1,P.x2,P.y2,M?this.textCollisionBox:this.iconCollisionBox,P.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Dp(cr,hf.members,Lo),this.iconCollisionBox=new Dp(cr,hf.members,Lo);for(let u=0;u<this.symbolInstances.length;u++){const c=this.symbolInstances.get(u);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(u,c,y,M,R,P,N,H,ie){const ue={};for(let ve=c;ve<y;ve++){const Pe=u.get(ve);ue.textBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},ue.textFeatureIndex=Pe.featureIndex;break}for(let ve=M;ve<R;ve++){const Pe=u.get(ve);ue.verticalTextBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},ue.verticalTextFeatureIndex=Pe.featureIndex;break}for(let ve=P;ve<N;ve++){const Pe=u.get(ve);ue.iconBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},ue.iconFeatureIndex=Pe.featureIndex;break}for(let ve=H;ve<ie;ve++){const Pe=u.get(ve);ue.verticalIconBox={x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,anchorPointX:Pe.anchorPointX,anchorPointY:Pe.anchorPointY},ue.verticalIconFeatureIndex=Pe.featureIndex;break}return ue}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const y=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,c){const y=u.placedSymbolArray.get(c),M=y.vertexStartIndex+4*y.numGlyphs;for(let R=y.vertexStartIndex;R<M;R+=4)u.indexArray.emplaceBack(R,R+2,R+1),u.indexArray.emplaceBack(R+1,R+2,R+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(u),y=Math.cos(u),M=[],R=[],P=[];for(let N=0;N<this.symbolInstances.length;++N){P.push(N);const H=this.symbolInstances.get(N);M.push(0|Math.round(c*H.anchorX+y*H.anchorY)),R.push(H.featureIndex)}return P.sort((N,H)=>M[N]-M[H]||R[H]-R[N]),P}addToSortKeyRanges(u,c){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===c?y.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const y=this.symbolInstances.get(c);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach((M,R,P)=>{M>=0&&P.indexOf(M)===R&&this.addIndicesForPlacedSymbol(this.text,M)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let e1,eg;ci("SymbolBucket",Rp,{omit:["layers","collisionBoxArray","features","compareText"]}),Rp.MAX_GLYPHS=65535,Rp.addDynamicAttributes=Tp;var km={get paint(){return eg=eg||new la({"icon-opacity":new ki(it.paint_symbol["icon-opacity"]),"icon-color":new ki(it.paint_symbol["icon-color"]),"icon-halo-color":new ki(it.paint_symbol["icon-halo-color"]),"icon-halo-width":new ki(it.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ki(it.paint_symbol["icon-halo-blur"]),"icon-translate":new Ii(it.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ii(it.paint_symbol["icon-translate-anchor"]),"text-opacity":new ki(it.paint_symbol["text-opacity"]),"text-color":new ki(it.paint_symbol["text-color"],{runtimeType:vr,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new ki(it.paint_symbol["text-halo-color"]),"text-halo-width":new ki(it.paint_symbol["text-halo-width"]),"text-halo-blur":new ki(it.paint_symbol["text-halo-blur"]),"text-translate":new Ii(it.paint_symbol["text-translate"]),"text-translate-anchor":new Ii(it.paint_symbol["text-translate-anchor"])})},get layout(){return e1=e1||new la({"symbol-placement":new Ii(it.layout_symbol["symbol-placement"]),"symbol-spacing":new Ii(it.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ii(it.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ki(it.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ii(it.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ii(it.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ii(it.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ii(it.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ii(it.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ii(it.layout_symbol["icon-rotation-alignment"]),"icon-size":new ki(it.layout_symbol["icon-size"]),"icon-text-fit":new Ii(it.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ii(it.layout_symbol["icon-text-fit-padding"]),"icon-image":new ki(it.layout_symbol["icon-image"]),"icon-rotate":new ki(it.layout_symbol["icon-rotate"]),"icon-padding":new ki(it.layout_symbol["icon-padding"]),"icon-keep-upright":new Ii(it.layout_symbol["icon-keep-upright"]),"icon-offset":new ki(it.layout_symbol["icon-offset"]),"icon-anchor":new ki(it.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ii(it.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ii(it.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ii(it.layout_symbol["text-rotation-alignment"]),"text-field":new ki(it.layout_symbol["text-field"]),"text-font":new ki(it.layout_symbol["text-font"]),"text-size":new ki(it.layout_symbol["text-size"]),"text-max-width":new ki(it.layout_symbol["text-max-width"]),"text-line-height":new Ii(it.layout_symbol["text-line-height"]),"text-letter-spacing":new ki(it.layout_symbol["text-letter-spacing"]),"text-justify":new ki(it.layout_symbol["text-justify"]),"text-radial-offset":new ki(it.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ii(it.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ki(it.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ki(it.layout_symbol["text-anchor"]),"text-max-angle":new Ii(it.layout_symbol["text-max-angle"]),"text-writing-mode":new Ii(it.layout_symbol["text-writing-mode"]),"text-rotate":new ki(it.layout_symbol["text-rotate"]),"text-padding":new Ii(it.layout_symbol["text-padding"]),"text-keep-upright":new Ii(it.layout_symbol["text-keep-upright"]),"text-transform":new ki(it.layout_symbol["text-transform"]),"text-offset":new ki(it.layout_symbol["text-offset"]),"text-allow-overlap":new Ii(it.layout_symbol["text-allow-overlap"]),"text-overlap":new Ii(it.layout_symbol["text-overlap"]),"text-ignore-placement":new Ii(it.layout_symbol["text-ignore-placement"]),"text-optional":new Ii(it.layout_symbol["text-optional"])})}};class t1{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:To,this.defaultValue=u}evaluate(u){if(u.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(u.formattedSection))return c.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ci("FormatSectionOverride",t1,{omit:["defaultValue"]});class h0 extends Ql{constructor(u){super(u,km)}recalculate(u,c){if(super.recalculate(u,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const M=[];for(const R of y)M.indexOf(R)<0&&M.push(R);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,c,y,M){const R=this.layout.get(u).evaluate(c,{},y,M),P=this._unevaluatedLayout._values[u];return P.isDataDriven()||Ou(P.value)||!R?R:function(N,H){return H.replace(/{([^{}]+)}/g,(ie,ue)=>N&&ue in N?String(N[ue]):"")}(c.properties,R)}createBucket(u){return new Rp(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of km.paint.overridableProperties){if(!h0.hasPaintOverride(this.layout,u))continue;const c=this.paint.get(u),y=new t1(c),M=new $c(y,c.property.specification);let R=null;R=c.value.kind==="constant"||c.value.kind==="source"?new Mh("source",M):new Hh("composite",M,c.value.zoomStops),this.paint._values[u]=new Pr(c.property,R,c.parameters)}}_handleOverridablePaintPropertyUpdate(u,c,y){return!(!this.layout||c.isDataDriven()||y.isDataDriven())&&h0.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,c){const y=u.get("text-field"),M=km.paint.properties[c];let R=!1;const P=N=>{for(const H of N)if(M.overrides&&M.overrides.hasOverride(H))return void(R=!0)};if(y.value.kind==="constant"&&y.value.value instanceof Eo)P(y.value.value.sections);else if(y.value.kind==="source"||y.value.kind==="composite"){const N=ie=>{R||(ie instanceof Yr&&Zi(ie.value)===ka?P(ie.value.sections):ie instanceof Hu?P(ie.sections):ie.eachChild(N))},H=y.value;H._styleExpression&&N(H._styleExpression.expression)}return R}}let gy;var n1={get paint(){return gy=gy||new la({"background-color":new Ii(it.paint_background["background-color"]),"background-pattern":new Du(it.paint_background["background-pattern"]),"background-opacity":new Ii(it.paint_background["background-opacity"])})}};class i1 extends Ql{constructor(u){super(u,n1)}}let yy;var lC={get paint(){return yy=yy||new la({"raster-opacity":new Ii(it.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ii(it.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ii(it.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ii(it.paint_raster["raster-brightness-max"]),"raster-saturation":new Ii(it.paint_raster["raster-saturation"]),"raster-contrast":new Ii(it.paint_raster["raster-contrast"]),"raster-resampling":new Ii(it.paint_raster["raster-resampling"]),"raster-fade-duration":new Ii(it.paint_raster["raster-fade-duration"])})}};class d0 extends Ql{constructor(u){super(u,lC)}}class uC extends Ql{constructor(u){super(u,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class vy{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const na={once:!0},f0=63710088e-1;class Zl{constructor(u,c){if(isNaN(u)||isNaN(c))throw new Error(`Invalid LngLat object: (${u}, ${c})`);if(this.lng=+u,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Zl(Ut(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const c=Math.PI/180,y=this.lat*c,M=u.lat*c,R=Math.sin(y)*Math.sin(M)+Math.cos(y)*Math.cos(M)*Math.cos((u.lng-this.lng)*c);return f0*Math.acos(Math.min(R,1))}static convert(u){if(u instanceof Zl)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Zl(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Zl(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const tg=2*Math.PI*f0;function r1(h){return tg*Math.cos(h*Math.PI/180)}function Ud(h){return(180+h)/360}function Hr(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function p0(h,u){return h/r1(u)}function Xl(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function Sl(h,u){return h*r1(Xl(u))}class m0{constructor(u,c,y=0){this.x=+u,this.y=+c,this.z=+y}static fromLngLat(u,c=0){const y=Zl.convert(u);return new m0(Ud(y.lng),Hr(y.lat),p0(c,y.lat))}toLngLat(){return new Zl(360*this.x-180,Xl(this.y))}toAltitude(){return Sl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/tg*(u=Xl(this.y),1/Math.cos(u*Math.PI/180));var u}}function ff(h,u,c){var y=2*Math.PI*6378137/256/Math.pow(2,c);return[h*y-2*Math.PI*6378137/2,u*y-2*Math.PI*6378137/2]}class ng{constructor(u,c,y){if(!function(M,R,P){return!(M<0||M>25||P<0||P>=Math.pow(2,M)||R<0||R>=Math.pow(2,M))}(u,c,y))throw new Error(`x=${c}, y=${y}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=c,this.y=y,this.key=Ba(0,u,u,c,y)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,c,y){const M=(P=this.y,N=this.z,H=ff(256*(R=this.x),256*(P=Math.pow(2,N)-P-1),N),ie=ff(256*(R+1),256*(P+1),N),H[0]+","+H[1]+","+ie[0]+","+ie[1]);var R,P,N,H,ie;const ue=function(ve,Pe,Qe){let qe,et="";for(let At=ve;At>0;At--)qe=1<<At-1,et+=(Pe&qe?1:0)+(Qe&qe?2:0);return et}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,ue).replace(/{bbox-epsg-3857}/g,M)}isChildOf(u){const c=this.z-u.z;return c>0&&u.x===this.x>>c&&u.y===this.y>>c}getTilePoint(u){const c=Math.pow(2,this.z);return new p((u.x*c-this.x)*nt,(u.y*c-this.y)*nt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class o1{constructor(u,c){this.wrap=u,this.canonical=c,this.key=Ba(u,c.z,c.z,c.x,c.y)}}class XA{constructor(u,c,y,M,R){if(this.terrainRttPosMatrix32f=null,u<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${y}`);this.overscaledZ=u,this.wrap=c,this.canonical=new ng(y,+M,+R),this.key=Ba(c,u,y,M,R)}clone(){return new XA(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-u;return u>this.canonical.z?new XA(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new XA(u,this.wrap,u,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(u,c){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-u;return u>this.canonical.z?Ba(this.wrap*+c,u,this.canonical.z,this.canonical.x,this.canonical.y):Ba(this.wrap*+c,u,u,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const c=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>c&&u.canonical.y===this.canonical.y>>c}children(u){if(this.overscaledZ>=u)return[new XA(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,y=2*this.canonical.x,M=2*this.canonical.y;return[new XA(c,this.wrap,c,y,M),new XA(c,this.wrap,c,y+1,M),new XA(c,this.wrap,c,y,M+1),new XA(c,this.wrap,c,y+1,M+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new XA(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new XA(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new o1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new m0(u.x-this.wrap,u.y))}}function Ba(h,u,c,y,M){(h*=2)<0&&(h=-1*h-1);const R=1<<c;return(R*R*h+R*M+y).toString(36)+c.toString(36)+u.toString(36)}function Pp(h,u){return u?h.properties[u]:h.id}ci("CanonicalTileID",ng),ci("OverscaledTileID",XA,{omit:["terrainRttPosMatrix32f"]});class el{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(u){return this.minX=Math.min(this.minX,u.x),this.minY=Math.min(this.minY,u.y),this.maxX=Math.max(this.maxX,u.x),this.maxY=Math.max(this.maxY,u.y),this}expandBy(u){return this.minX-=u,this.minY-=u,this.maxX+=u,this.maxY+=u,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(u){return this.expandBy(-u)}map(u){const c=new el;return c.extend(u(new p(this.minX,this.minY))),c.extend(u(new p(this.maxX,this.minY))),c.extend(u(new p(this.minX,this.maxY))),c.extend(u(new p(this.maxX,this.maxY))),c}static fromPoints(u){const c=new el;for(const y of u)c.extend(y);return c}contains(u){return u.x>=this.minX&&u.x<=this.maxX&&u.y>=this.minY&&u.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(u){return!this.empty()&&!u.empty()&&u.minX>=this.minX&&u.maxX<=this.maxX&&u.minY>=this.minY&&u.maxY<=this.maxY}intersects(u){return!this.empty()&&!u.empty()&&u.minX<=this.maxX&&u.maxX>=this.minX&&u.minY<=this.maxY&&u.maxY>=this.minY}}class Cy{constructor(u){this._stringToNumber={},this._numberToString=[];for(let c=0;c<u.length;c++){const y=u[c];this._stringToNumber[y]=c,this._numberToString[c]=y}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class Dh{constructor(u,c,y,M,R){this.type="Feature",this._vectorTileFeature=u,u._z=c,u._x=y,u._y=M,this.properties=u.properties,this.id=R}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(u[c]=this[c]);return u}}class g0{constructor(u,c){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Ca(nt,16,0),this.grid3D=new Ca(nt,16,0),this.featureIndexArray=new Ft,this.promoteId=c}insert(u,c,y,M,R,P){const N=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,M,R);const H=P?this.grid3D:this.grid;for(let ie=0;ie<c.length;ie++){const ue=c[ie],ve=[1/0,1/0,-1/0,-1/0];for(let Pe=0;Pe<ue.length;Pe++){const Qe=ue[Pe];ve[0]=Math.min(ve[0],Qe.x),ve[1]=Math.min(ve[1],Qe.y),ve[2]=Math.max(ve[2],Qe.x),ve[3]=Math.max(ve[3],Qe.y)}ve[0]<nt&&ve[1]<nt&&ve[2]>=0&&ve[3]>=0&&H.insert(N,ve[0],ve[1],ve[2],ve[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Wg(new Jf(this.rawTileData)).layers,this.sourceLayerCoder=new Cy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,c,y,M){this.loadVTLayers();const R=u.params,P=nt/u.tileSize/u.scale,N=Oc(R.filter),H=u.queryGeometry,ie=u.queryPadding*P,ue=el.fromPoints(H),ve=this.grid.query(ue.minX-ie,ue.minY-ie,ue.maxX+ie,ue.maxY+ie),Pe=el.fromPoints(u.cameraQueryGeometry).expandBy(ie),Qe=this.grid3D.query(Pe.minX,Pe.minY,Pe.maxX,Pe.maxY,(At,Mt,Qt,Dt)=>function(jt,ln,Cn,Un,pi){for(const di of jt)if(ln<=di.x&&Cn<=di.y&&Un>=di.x&&pi>=di.y)return!0;const ai=[new p(ln,Cn),new p(ln,pi),new p(Un,pi),new p(Un,Cn)];if(jt.length>2){for(const di of ai)if(Th(jt,di))return!0}for(let di=0;di<jt.length-1;di++)if(Wf(jt[di],jt[di+1],ai))return!0;return!1}(u.cameraQueryGeometry,At-ie,Mt-ie,Qt+ie,Dt+ie));for(const At of Qe)ve.push(At);ve.sort(ll);const qe={};let et;for(let At=0;At<ve.length;At++){const Mt=ve[At];if(Mt===et)continue;et=Mt;const Qt=this.featureIndexArray.get(Mt);let Dt=null;this.loadMatchingFeature(qe,Qt.bucketIndex,Qt.sourceLayerIndex,Qt.featureIndex,N,R.layers,R.availableImages,c,y,M,(jt,ln,Cn)=>(Dt||(Dt=Sa(jt)),ln.queryIntersectsFeature({queryGeometry:H,feature:jt,featureState:Cn,geometry:Dt,zoom:this.z,transform:u.transform,pixelsToTileUnits:P,pixelPosMatrix:u.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:u.getElevation})))}return qe}loadMatchingFeature(u,c,y,M,R,P,N,H,ie,ue,ve){const Pe=this.bucketLayerIDs[c];if(P&&!Pe.some(At=>P.has(At)))return;const Qe=this.sourceLayerCoder.decode(y),qe=this.vtLayers[Qe].feature(M);if(R.needGeometry){const At=nA(qe,!0);if(!R.filter(new Po(this.tileID.overscaledZ),At,this.tileID.canonical))return}else if(!R.filter(new Po(this.tileID.overscaledZ),qe))return;const et=this.getId(qe,Qe);for(let At=0;At<Pe.length;At++){const Mt=Pe[At];if(P&&!P.has(Mt))continue;const Qt=H[Mt];if(!Qt)continue;let Dt={};et&&ue&&(Dt=ue.getState(Qt.sourceLayer||"_geojsonTileLayer",et));const jt=Fe({},ie[Mt]);jt.paint=op(jt.paint,Qt.paint,qe,Dt,N),jt.layout=op(jt.layout,Qt.layout,qe,Dt,N);const ln=!ve||ve(qe,Qt,Dt);if(!ln)continue;const Cn=new Dh(qe,this.z,this.x,this.y,et);Cn.layer=jt;let Un=u[Mt];Un===void 0&&(Un=u[Mt]=[]),Un.push({featureIndex:M,feature:Cn,intersectionZ:ln})}}lookupSymbolFeatures(u,c,y,M,R,P,N,H){const ie={};this.loadVTLayers();const ue=Oc(R);for(const ve of u)this.loadMatchingFeature(ie,y,M,ve,ue,P,N,H,c);return ie}hasLayer(u){for(const c of this.bucketLayerIDs)for(const y of c)if(u===y)return!0;return!1}getId(u,c){var y;let M=u.id;return this.promoteId&&(M=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof M=="boolean"&&(M=Number(M)),M===void 0&&(!((y=u.properties)===null||y===void 0)&&y.cluster)&&this.promoteId&&(M=Number(u.properties.cluster_id))),M}}function op(h,u,c,y,M){return Re(h,(R,P)=>{const N=u instanceof QA?u.get(P):null;return N&&N.evaluate?N.evaluate(c,y,M):N})}function ll(h,u){return u-h}function ul(h,u,c,y,M){const R=[];for(let P=0;P<h.length;P++){const N=h[P];let H;for(let ie=0;ie<N.length-1;ie++){let ue=N[ie],ve=N[ie+1];ue.x<u&&ve.x<u||(ue.x<u?ue=new p(u,ue.y+(u-ue.x)/(ve.x-ue.x)*(ve.y-ue.y))._round():ve.x<u&&(ve=new p(u,ue.y+(u-ue.x)/(ve.x-ue.x)*(ve.y-ue.y))._round()),ue.y<c&&ve.y<c||(ue.y<c?ue=new p(ue.x+(c-ue.y)/(ve.y-ue.y)*(ve.x-ue.x),c)._round():ve.y<c&&(ve=new p(ue.x+(c-ue.y)/(ve.y-ue.y)*(ve.x-ue.x),c)._round()),ue.x>=y&&ve.x>=y||(ue.x>=y?ue=new p(y,ue.y+(y-ue.x)/(ve.x-ue.x)*(ve.y-ue.y))._round():ve.x>=y&&(ve=new p(y,ue.y+(y-ue.x)/(ve.x-ue.x)*(ve.y-ue.y))._round()),ue.y>=M&&ve.y>=M||(ue.y>=M?ue=new p(ue.x+(M-ue.y)/(ve.y-ue.y)*(ve.x-ue.x),M)._round():ve.y>=M&&(ve=new p(ue.x+(M-ue.y)/(ve.y-ue.y)*(ve.x-ue.x),M)._round()),H&&ue.equals(H[H.length-1])||(H=[ue],R.push(H)),H.push(ve)))))}}return R}ci("FeatureIndex",g0,{omit:["rawTileData","sourceLayerCoder"]});class sd extends p{constructor(u,c,y,M){super(u,c),this.angle=y,M!==void 0&&(this.segment=M)}clone(){return new sd(this.x,this.y,this.angle,this.segment)}}function ig(h,u,c,y,M){if(u.segment===void 0||c===0)return!0;let R=u,P=u.segment+1,N=0;for(;N>-c/2;){if(P--,P<0)return!1;N-=h[P].dist(R),R=h[P]}N+=h[P].dist(h[P+1]),P++;const H=[];let ie=0;for(;N<c/2;){const ue=h[P],ve=h[P+1];if(!ve)return!1;let Pe=h[P-1].angleTo(ue)-ue.angleTo(ve);for(Pe=Math.abs((Pe+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:N,angleDelta:Pe}),ie+=Pe;N-H[0].distance>y;)ie-=H.shift().angleDelta;if(ie>M)return!1;P++,N+=ue.dist(ve)}return!0}function _y(h){let u=0;for(let c=0;c<h.length-1;c++)u+=h[c].dist(h[c+1]);return u}function a1(h,u,c){return h?.6*u*c:0}function by(h,u){return Math.max(h?h.right-h.left:0,u?u.right-u.left:0)}function xy(h,u,c,y,M,R){const P=a1(c,M,R),N=by(c,y)*R;let H=0;const ie=_y(h)/2;for(let ue=0;ue<h.length-1;ue++){const ve=h[ue],Pe=h[ue+1],Qe=ve.dist(Pe);if(H+Qe>ie){const qe=(ie-H)/Qe,et=PA.number(ve.x,Pe.x,qe),At=PA.number(ve.y,Pe.y,qe),Mt=new sd(et,At,Pe.angleTo(ve),ue);return Mt._round(),!P||ig(h,Mt,N,P,u)?Mt:void 0}H+=Qe}}function AC(h,u,c,y,M,R,P,N,H){const ie=a1(y,R,P),ue=by(y,M),ve=ue*P,Pe=h[0].x===0||h[0].x===H||h[0].y===0||h[0].y===H;return u-ve<u/4&&(u=ve+u/4),s1(h,Pe?u/2*N%u:(ue/2+2*R)*P*N%u,u,ie,c,ve,Pe,!1,H)}function s1(h,u,c,y,M,R,P,N,H){const ie=R/2,ue=_y(h);let ve=0,Pe=u-c,Qe=[];for(let qe=0;qe<h.length-1;qe++){const et=h[qe],At=h[qe+1],Mt=et.dist(At),Qt=At.angleTo(et);for(;Pe+c<ve+Mt;){Pe+=c;const Dt=(Pe-ve)/Mt,jt=PA.number(et.x,At.x,Dt),ln=PA.number(et.y,At.y,Dt);if(jt>=0&&jt<H&&ln>=0&&ln<H&&Pe-ie>=0&&Pe+ie<=ue){const Cn=new sd(jt,ln,Qt,qe);Cn._round(),y&&!ig(h,Cn,R,y,M)||Qe.push(Cn)}}ve+=Mt}return N||Qe.length||P||(Qe=s1(h,ve/2,c,y,M,R,P,!0,H)),Qe}function Ah(h,u,c,y){const M=[],R=h.image,P=R.pixelRatio,N=R.paddedRect.w-2,H=R.paddedRect.h-2;let ie={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const ue=R.stretchX||[[0,N]],ve=R.stretchY||[[0,H]],Pe=(En,fr)=>En+fr[1]-fr[0],Qe=ue.reduce(Pe,0),qe=ve.reduce(Pe,0),et=N-Qe,At=H-qe;let Mt=0,Qt=Qe,Dt=0,jt=qe,ln=0,Cn=et,Un=0,pi=At;if(R.content&&y){const En=R.content,fr=En[2]-En[0],Er=En[3]-En[1];(R.textFitWidth||R.textFitHeight)&&(ie=Jg(h)),Mt=Kp(ue,0,En[0]),Dt=Kp(ve,0,En[1]),Qt=Kp(ue,En[0],En[2]),jt=Kp(ve,En[1],En[3]),ln=En[0]-Mt,Un=En[1]-Dt,Cn=fr-Qt,pi=Er-jt}const ai=ie.x1,di=ie.y1,tr=ie.x2-ai,ui=ie.y2-di,fi=(En,fr,Er,sr)=>{const Ui=y0(En.stretch-Mt,Qt,tr,ai),Gr=Up(En.fixed-ln,Cn,En.stretch,Qe),Ua=y0(fr.stretch-Dt,jt,ui,di),bs=Up(fr.fixed-Un,pi,fr.stretch,qe),Dl=y0(Er.stretch-Mt,Qt,tr,ai),OA=Up(Er.fixed-ln,Cn,Er.stretch,Qe),Rl=y0(sr.stretch-Dt,jt,ui,di),Ku=Up(sr.fixed-Un,pi,sr.stretch,qe),ks=new p(Ui,Ua),Al=new p(Dl,Ua),Uu=new p(Dl,Rl),gu=new p(Ui,Rl),Lu=new p(Gr/P,bs/P),zc=new p(OA/P,Ku/P),yu=u*Math.PI/180;if(yu){const Jl=Math.sin(yu),hl=Math.cos(yu),dl=[hl,-Jl,Jl,hl];ks._matMult(dl),Al._matMult(dl),gu._matMult(dl),Uu._matMult(dl)}const oA=En.stretch+En.fixed,cl=fr.stretch+fr.fixed;return{tl:ks,tr:Al,bl:gu,br:Uu,tex:{x:R.paddedRect.x+1+oA,y:R.paddedRect.y+1+cl,w:Er.stretch+Er.fixed-oA,h:sr.stretch+sr.fixed-cl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Lu,pixelOffsetBR:zc,minFontScaleX:Cn/P/tr,minFontScaleY:pi/P/ui,isSDF:c}};if(y&&(R.stretchX||R.stretchY)){const En=rg(ue,et,Qe),fr=rg(ve,At,qe);for(let Er=0;Er<En.length-1;Er++){const sr=En[Er],Ui=En[Er+1];for(let Gr=0;Gr<fr.length-1;Gr++)M.push(fi(sr,fr[Gr],Ui,fr[Gr+1]))}}else M.push(fi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:N+1},{fixed:0,stretch:H+1}));return M}function Kp(h,u,c){let y=0;for(const M of h)y+=Math.max(u,Math.min(c,M[1]))-Math.max(u,Math.min(c,M[0]));return y}function rg(h,u,c){const y=[{fixed:-1,stretch:0}];for(const[M,R]of h){const P=y[y.length-1];y.push({fixed:M-P.stretch,stretch:P.stretch}),y.push({fixed:M-P.stretch,stretch:P.stretch+(R-M)})}return y.push({fixed:u+1,stretch:c}),y}function y0(h,u,c,y){return h/u*c+y}function Up(h,u,c,y){return h-u*c/y}ci("Anchor",sd);class rA{constructor(u,c,y,M,R,P,N,H,ie,ue){var ve;if(this.boxStartIndex=u.length,ie){let Pe=P.top,Qe=P.bottom;const qe=P.collisionPadding;qe&&(Pe-=qe[1],Qe+=qe[3]);let et=Qe-Pe;et>0&&(et=Math.max(10,et),this.circleDiameter=et)}else{const Pe=!((ve=P.image)===null||ve===void 0)&&ve.content&&(P.image.textFitWidth||P.image.textFitHeight)?Jg(P):{x1:P.left,y1:P.top,x2:P.right,y2:P.bottom};Pe.y1=Pe.y1*N-H[0],Pe.y2=Pe.y2*N+H[2],Pe.x1=Pe.x1*N-H[3],Pe.x2=Pe.x2*N+H[1];const Qe=P.collisionPadding;if(Qe&&(Pe.x1-=Qe[0]*N,Pe.y1-=Qe[1]*N,Pe.x2+=Qe[2]*N,Pe.y2+=Qe[3]*N),ue){const qe=new p(Pe.x1,Pe.y1),et=new p(Pe.x2,Pe.y1),At=new p(Pe.x1,Pe.y2),Mt=new p(Pe.x2,Pe.y2),Qt=ue*Math.PI/180;qe._rotate(Qt),et._rotate(Qt),At._rotate(Qt),Mt._rotate(Qt),Pe.x1=Math.min(qe.x,et.x,At.x,Mt.x),Pe.x2=Math.max(qe.x,et.x,At.x,Mt.x),Pe.y1=Math.min(qe.y,et.y,At.y,Mt.y),Pe.y2=Math.max(qe.y,et.y,At.y,Mt.y)}u.emplaceBack(c.x,c.y,Pe.x1,Pe.y1,Pe.x2,Pe.y2,y,M,R)}this.boxEndIndex=u.length}}class Dm{constructor(u=[],c=(y,M)=>y<M?-1:y>M?1:0){if(this.data=u,this.length=this.data.length,this.compare=c,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:c,compare:y}=this,M=c[u];for(;u>0;){const R=u-1>>1,P=c[R];if(y(M,P)>=0)break;c[u]=P,u=R}c[u]=M}_down(u){const{data:c,compare:y}=this,M=this.length>>1,R=c[u];for(;u<M;){let P=1+(u<<1);const N=P+1;if(N<this.length&&y(c[N],c[P])<0&&(P=N),y(c[P],R)>=0)break;c[u]=c[P],u=P}c[u]=R}}function ld(h,u=1,c=!1){const y=el.fromPoints(h[0]),M=Math.min(y.width(),y.height());let R=M/2;const P=new Dm([],l1),{minX:N,minY:H,maxX:ie,maxY:ue}=y;if(M===0)return new p(N,H);for(let Qe=N;Qe<ie;Qe+=M)for(let qe=H;qe<ue;qe+=M)P.push(new Lp(Qe+R,qe+R,R,h));let ve=function(Qe){let qe=0,et=0,At=0;const Mt=Qe[0];for(let Qt=0,Dt=Mt.length,jt=Dt-1;Qt<Dt;jt=Qt++){const ln=Mt[Qt],Cn=Mt[jt],Un=ln.x*Cn.y-Cn.x*ln.y;et+=(ln.x+Cn.x)*Un,At+=(ln.y+Cn.y)*Un,qe+=3*Un}return new Lp(et/qe,At/qe,0,Qe)}(h),Pe=P.length;for(;P.length;){const Qe=P.pop();(Qe.d>ve.d||!ve.d)&&(ve=Qe,c&&console.log("found best %d after %d probes",Math.round(1e4*Qe.d)/1e4,Pe)),Qe.max-ve.d<=u||(R=Qe.h/2,P.push(new Lp(Qe.p.x-R,Qe.p.y-R,R,h)),P.push(new Lp(Qe.p.x+R,Qe.p.y-R,R,h)),P.push(new Lp(Qe.p.x-R,Qe.p.y+R,R,h)),P.push(new Lp(Qe.p.x+R,Qe.p.y+R,R,h)),Pe+=4)}return c&&(console.log(`num probes: ${Pe}`),console.log(`best distance: ${ve.d}`)),ve.p}function l1(h,u){return u.max-h.max}function Lp(h,u,c,y){this.p=new p(h,u),this.h=c,this.d=function(M,R){let P=!1,N=1/0;for(let H=0;H<R.length;H++){const ie=R[H];for(let ue=0,ve=ie.length,Pe=ve-1;ue<ve;Pe=ue++){const Qe=ie[ue],qe=ie[Pe];Qe.y>M.y!=qe.y>M.y&&M.x<(qe.x-Qe.x)*(M.y-Qe.y)/(qe.y-Qe.y)+Qe.x&&(P=!P),N=Math.min(N,Jo(M,Qe,qe))}}return(P?1:-1)*Math.sqrt(N)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}var Pu;l.aE=void 0,(Pu=l.aE||(l.aE={}))[Pu.center=1]="center",Pu[Pu.left=2]="left",Pu[Pu.right=3]="right",Pu[Pu.top=4]="top",Pu[Pu.bottom=5]="bottom",Pu[Pu["top-left"]=6]="top-left",Pu[Pu["top-right"]=7]="top-right",Pu[Pu["bottom-left"]=8]="bottom-left",Pu[Pu["bottom-right"]=9]="bottom-right";const Fp=Number.POSITIVE_INFINITY;function Fc(h,u){return u[1]!==Fp?function(c,y,M){let R=0,P=0;switch(y=Math.abs(y),M=Math.abs(M),c){case"top-right":case"top-left":case"top":P=M-7;break;case"bottom-right":case"bottom-left":case"bottom":P=7-M}switch(c){case"top-right":case"bottom-right":case"right":R=-y;break;case"top-left":case"bottom-left":case"left":R=y}return[R,P]}(h,u[0],u[1]):function(c,y){let M=0,R=0;y<0&&(y=0);const P=y/Math.SQRT2;switch(c){case"top-right":case"top-left":R=P-7;break;case"bottom-right":case"bottom-left":R=7-P;break;case"bottom":R=7-y;break;case"top":R=y-7}switch(c){case"top-right":case"bottom-right":M=-P;break;case"top-left":case"bottom-left":M=P;break;case"left":M=y;break;case"right":M=-y}return[M,R]}(h,u[0])}function ud(h,u,c){var y;const M=h.layout,R=(y=M.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(u,{},c);if(R){const N=R.values,H=[];for(let ie=0;ie<N.length;ie+=2){const ue=H[ie]=N[ie],ve=N[ie+1].map(Pe=>Pe*Js);ue.startsWith("top")?ve[1]-=7:ue.startsWith("bottom")&&(ve[1]+=7),H[ie+1]=ve}return new ja(H)}const P=M.get("text-variable-anchor");if(P){let N;N=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(u,{},c)*Js,Fp]:M.get("text-offset").evaluate(u,{},c).map(ie=>ie*Js);const H=[];for(const ie of P)H.push(ie,Fc(ie,N));return new ja(H)}return null}function ro(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ld(h,u,c,y,M,R,P,N,H,ie,ue,ve){let Pe=R.textMaxSize.evaluate(u,{});Pe===void 0&&(Pe=P);const Qe=h.layers[0].layout,qe=Qe.get("icon-offset").evaluate(u,{},ue),et=u1(c.horizontal),At=P/24,Mt=h.tilePixelRatio*At,Qt=h.tilePixelRatio*Pe/24,Dt=h.tilePixelRatio*N,jt=h.tilePixelRatio*Qe.get("symbol-spacing"),ln=Qe.get("text-padding")*h.tilePixelRatio,Cn=function(Er,sr,Ui,Gr=1){const Ua=Er.get("icon-padding").evaluate(sr,{},Ui),bs=Ua&&Ua.values;return[bs[0]*Gr,bs[1]*Gr,bs[2]*Gr,bs[3]*Gr]}(Qe,u,ue,h.tilePixelRatio),Un=Qe.get("text-max-angle")/180*Math.PI,pi=Qe.get("text-rotation-alignment")!=="viewport"&&Qe.get("symbol-placement")!=="point",ai=Qe.get("icon-rotation-alignment")==="map"&&Qe.get("symbol-placement")!=="point",di=Qe.get("symbol-placement"),tr=jt/2,ui=Qe.get("icon-text-fit");let fi;y&&ui!=="none"&&(h.allowVerticalPlacement&&c.vertical&&(fi=Om(y,c.vertical,ui,Qe.get("icon-text-fit-padding"),qe,At)),et&&(y=Om(y,et,ui,Qe.get("icon-text-fit-padding"),qe,At)));const En=ue?ve.line.getGranularityForZoomLevel(ue.z):1,fr=(Er,sr)=>{sr.x<0||sr.x>=nt||sr.y<0||sr.y>=nt||function(Ui,Gr,Ua,bs,Dl,OA,Rl,Ku,ks,Al,Uu,gu,Lu,zc,yu,oA,cl,Jl,hl,dl,qa,Rh,Km,jc,A){const m=Ui.addToLineVertexArray(Gr,Ua);let b,T,Q,se,Ge=0,ot=0,zt=0,hn=0,kn=-1,Nn=-1;const pn={};let fn=rh("");if(Ui.allowVerticalPlacement&&bs.vertical){const gc=Ku.layout.get("text-rotate").evaluate(qa,{},jc)+90;Q=new rA(ks,Gr,Al,Uu,gu,bs.vertical,Lu,zc,yu,gc),Rl&&(se=new rA(ks,Gr,Al,Uu,gu,Rl,cl,Jl,yu,gc))}if(Dl){const gc=Ku.layout.get("icon-rotate").evaluate(qa,{}),hh=Ku.layout.get("icon-text-fit")!=="none",jp=Ah(Dl,gc,Km,hh),pf=Rl?Ah(Rl,gc,Km,hh):void 0;T=new rA(ks,Gr,Al,Uu,gu,Dl,cl,Jl,!1,gc),Ge=4*jp.length;const b0=Ui.iconSizeData;let sp=null;b0.kind==="source"?(sp=[ZA*Ku.layout.get("icon-size").evaluate(qa,{})],sp[0]>ad&&Ot(`${Ui.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):b0.kind==="composite"&&(sp=[ZA*Rh.compositeIconSizes[0].evaluate(qa,{},jc),ZA*Rh.compositeIconSizes[1].evaluate(qa,{},jc)],(sp[0]>ad||sp[1]>ad)&&Ot(`${Ui.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ui.addSymbols(Ui.icon,jp,sp,dl,hl,qa,l.ao.none,Gr,m.lineStartIndex,m.lineLength,-1,jc),kn=Ui.icon.placedSymbolArray.length-1,pf&&(ot=4*pf.length,Ui.addSymbols(Ui.icon,pf,sp,dl,hl,qa,l.ao.vertical,Gr,m.lineStartIndex,m.lineLength,-1,jc),Nn=Ui.icon.placedSymbolArray.length-1)}const Kr=Object.keys(bs.horizontal);for(const gc of Kr){const hh=bs.horizontal[gc];if(!b){fn=rh(hh.text);const pf=Ku.layout.get("text-rotate").evaluate(qa,{},jc);b=new rA(ks,Gr,Al,Uu,gu,hh,Lu,zc,yu,pf)}const jp=hh.positionedLines.length===1;if(zt+=ch(Ui,Gr,hh,OA,Ku,yu,qa,oA,m,bs.vertical?l.ao.horizontal:l.ao.horizontalOnly,jp?Kr:[gc],pn,kn,Rh,jc),jp)break}bs.vertical&&(hn+=ch(Ui,Gr,bs.vertical,OA,Ku,yu,qa,oA,m,l.ao.vertical,["vertical"],pn,Nn,Rh,jc));const Ur=b?b.boxStartIndex:Ui.collisionBoxArray.length,xs=b?b.boxEndIndex:Ui.collisionBoxArray.length,tn=Q?Q.boxStartIndex:Ui.collisionBoxArray.length,$t=Q?Q.boxEndIndex:Ui.collisionBoxArray.length,An=T?T.boxStartIndex:Ui.collisionBoxArray.length,Ln=T?T.boxEndIndex:Ui.collisionBoxArray.length,ir=se?se.boxStartIndex:Ui.collisionBoxArray.length,qo=se?se.boxEndIndex:Ui.collisionBoxArray.length;let nr=-1;const Ir=(gc,hh)=>gc&&gc.circleDiameter?Math.max(gc.circleDiameter,hh):hh;nr=Ir(b,nr),nr=Ir(Q,nr),nr=Ir(T,nr),nr=Ir(se,nr);const Fu=nr>-1?1:0;Fu&&(nr*=A/Js),Ui.glyphOffsetArray.length>=Rp.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qa.sortKey!==void 0&&Ui.addToSortKeyRanges(Ui.symbolInstances.length,qa.sortKey);const Oa=ud(Ku,qa,jc),[ap,cC]=function(gc,hh){const jp=gc.length,pf=hh?.values;if(pf?.length>0)for(let b0=0;b0<pf.length;b0+=2){const sp=pf[b0+1];gc.emplaceBack(l.aE[pf[b0]],sp[0],sp[1])}return[jp,gc.length]}(Ui.textAnchorOffsets,Oa);Ui.symbolInstances.emplaceBack(Gr.x,Gr.y,pn.right>=0?pn.right:-1,pn.center>=0?pn.center:-1,pn.left>=0?pn.left:-1,pn.vertical||-1,kn,Nn,fn,Ur,xs,tn,$t,An,Ln,ir,qo,Al,zt,hn,Ge,ot,Fu,0,Lu,nr,ap,cC)}(h,sr,Er,c,y,M,fi,h.layers[0],h.collisionBoxArray,u.index,u.sourceLayerIndex,h.index,Mt,[ln,ln,ln,ln],pi,H,Dt,Cn,ai,qe,u,R,ie,ue,P)};if(di==="line")for(const Er of ul(u.geometry,0,0,nt,nt)){const sr=hs(Er,En),Ui=AC(sr,jt,Un,c.vertical||et,y,24,Qt,h.overscaling,nt);for(const Gr of Ui)et&&Rm(h,et.text,tr,Gr)||fr(sr,Gr)}else if(di==="line-center"){for(const Er of u.geometry)if(Er.length>1){const sr=hs(Er,En),Ui=xy(sr,Un,c.vertical||et,y,24,Qt);Ui&&fr(sr,Ui)}}else if(u.type==="Polygon")for(const Er of Hc(u.geometry,0)){const sr=ld(Er,16);fr(hs(Er[0],En,!0),new sd(sr.x,sr.y,0))}else if(u.type==="LineString")for(const Er of u.geometry){const sr=hs(Er,En);fr(sr,new sd(sr[0].x,sr[0].y,0))}else if(u.type==="Point")for(const Er of u.geometry)for(const sr of Er)fr([sr],new sd(sr.x,sr.y,0))}function ch(h,u,c,y,M,R,P,N,H,ie,ue,ve,Pe,Qe,qe){const et=function(Qt,Dt,jt,ln,Cn,Un,pi,ai){const di=ln.layout.get("text-rotate").evaluate(Un,{})*Math.PI/180,tr=[];for(const ui of Dt.positionedLines)for(const fi of ui.positionedGlyphs){if(!fi.rect)continue;const En=fi.rect||{};let fr=4,Er=!0,sr=1,Ui=0;const Gr=(Cn||ai)&&fi.vertical,Ua=fi.metrics.advance*fi.scale/2;if(ai&&Dt.verticalizable&&(Ui=ui.lineOffset/2-(fi.imageName?-(Js-fi.metrics.width*fi.scale)/2:(fi.scale-1)*Js)),fi.imageName){const Jl=pi[fi.imageName];Er=Jl.sdf,sr=Jl.pixelRatio,fr=1/sr}const bs=Cn?[fi.x+Ua,fi.y]:[0,0];let Dl=Cn?[0,0]:[fi.x+Ua+jt[0],fi.y+jt[1]-Ui],OA=[0,0];Gr&&(OA=Dl,Dl=[0,0]);const Rl=fi.metrics.isDoubleResolution?2:1,Ku=(fi.metrics.left-fr)*fi.scale-Ua+Dl[0],ks=(-fi.metrics.top-fr)*fi.scale+Dl[1],Al=Ku+En.w/Rl*fi.scale/sr,Uu=ks+En.h/Rl*fi.scale/sr,gu=new p(Ku,ks),Lu=new p(Al,ks),zc=new p(Ku,Uu),yu=new p(Al,Uu);if(Gr){const Jl=new p(-Ua,Ua- -17),hl=-Math.PI/2,dl=12-Ua,qa=new p(22-dl,-(fi.imageName?dl:0)),Rh=new p(...OA);gu._rotateAround(hl,Jl)._add(qa)._add(Rh),Lu._rotateAround(hl,Jl)._add(qa)._add(Rh),zc._rotateAround(hl,Jl)._add(qa)._add(Rh),yu._rotateAround(hl,Jl)._add(qa)._add(Rh)}if(di){const Jl=Math.sin(di),hl=Math.cos(di),dl=[hl,-Jl,Jl,hl];gu._matMult(dl),Lu._matMult(dl),zc._matMult(dl),yu._matMult(dl)}const oA=new p(0,0),cl=new p(0,0);tr.push({tl:gu,tr:Lu,bl:zc,br:yu,tex:En,writingMode:Dt.writingMode,glyphOffset:bs,sectionIndex:fi.sectionIndex,isSDF:Er,pixelOffsetTL:oA,pixelOffsetBR:cl,minFontScaleX:0,minFontScaleY:0})}return tr}(0,c,N,M,R,P,y,h.allowVerticalPlacement),At=h.textSizeData;let Mt=null;At.kind==="source"?(Mt=[ZA*M.layout.get("text-size").evaluate(P,{})],Mt[0]>ad&&Ot(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):At.kind==="composite"&&(Mt=[ZA*Qe.compositeTextSizes[0].evaluate(P,{},qe),ZA*Qe.compositeTextSizes[1].evaluate(P,{},qe)],(Mt[0]>ad||Mt[1]>ad)&&Ot(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),h.addSymbols(h.text,et,Mt,N,R,P,ie,u,H.lineStartIndex,H.lineLength,Pe,qe);for(const Qt of ue)ve[Qt]=h.text.placedSymbolArray.length-1;return 4*et.length}function u1(h){for(const u in h)return h[u];return null}function Rm(h,u,c,y){const M=h.compareText;if(u in M){const R=M[u];for(let P=R.length-1;P>=0;P--)if(y.dist(R[P])<c)return!0}else M[u]=[];return M[u].push(y),!1}const Ka=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class A1{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,y]=new Uint8Array(u,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=y>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const R=Ka[15&y];if(!R)throw new Error("Unrecognized array type.");const[P]=new Uint16Array(u,2,1),[N]=new Uint32Array(u,4,1);return new A1(N,P,R,u)}constructor(u,c=64,y=Float64Array,M){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=y,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const R=Ka.indexOf(this.ArrayType),P=2*u*this.ArrayType.BYTES_PER_ELEMENT,N=u*this.IndexArrayType.BYTES_PER_ELEMENT,H=(8-N%8)%8;if(R<0)throw new Error(`Unexpected typed array class: ${y}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+N+H,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+P+N+H),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+N+H,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+R]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=u)}add(u,c){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=u,this.coords[this._pos++]=c,y}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return og(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,c,y,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:R,coords:P,nodeSize:N}=this,H=[0,R.length-1,0],ie=[];for(;H.length;){const ue=H.pop()||0,ve=H.pop()||0,Pe=H.pop()||0;if(ve-Pe<=N){for(let At=Pe;At<=ve;At++){const Mt=P[2*At],Qt=P[2*At+1];Mt>=u&&Mt<=y&&Qt>=c&&Qt<=M&&ie.push(R[At])}continue}const Qe=Pe+ve>>1,qe=P[2*Qe],et=P[2*Qe+1];qe>=u&&qe<=y&&et>=c&&et<=M&&ie.push(R[Qe]),(ue===0?u<=qe:c<=et)&&(H.push(Pe),H.push(Qe-1),H.push(1-ue)),(ue===0?y>=qe:M>=et)&&(H.push(Qe+1),H.push(ve),H.push(1-ue))}return ie}within(u,c,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:R,nodeSize:P}=this,N=[0,M.length-1,0],H=[],ie=y*y;for(;N.length;){const ue=N.pop()||0,ve=N.pop()||0,Pe=N.pop()||0;if(ve-Pe<=P){for(let At=Pe;At<=ve;At++)My(R[2*At],R[2*At+1],u,c)<=ie&&H.push(M[At]);continue}const Qe=Pe+ve>>1,qe=R[2*Qe],et=R[2*Qe+1];My(qe,et,u,c)<=ie&&H.push(M[Qe]),(ue===0?u-y<=qe:c-y<=et)&&(N.push(Pe),N.push(Qe-1),N.push(1-ue)),(ue===0?u+y>=qe:c+y>=et)&&(N.push(Qe+1),N.push(ve),N.push(1-ue))}return H}}function og(h,u,c,y,M,R){if(M-y<=c)return;const P=y+M>>1;v0(h,u,P,y,M,R),og(h,u,c,y,P-1,1-R),og(h,u,c,P+1,M,1-R)}function v0(h,u,c,y,M,R){for(;M>y;){if(M-y>600){const ie=M-y+1,ue=c-y+1,ve=Math.log(ie),Pe=.5*Math.exp(2*ve/3),Qe=.5*Math.sqrt(ve*Pe*(ie-Pe)/ie)*(ue-ie/2<0?-1:1);v0(h,u,c,Math.max(y,Math.floor(c-ue*Pe/ie+Qe)),Math.min(M,Math.floor(c+(ie-ue)*Pe/ie+Qe)),R)}const P=u[2*c+R];let N=y,H=M;for(C0(h,u,y,c),u[2*M+R]>P&&C0(h,u,y,M);N<H;){for(C0(h,u,N,H),N++,H--;u[2*N+R]<P;)N++;for(;u[2*H+R]>P;)H--}u[2*y+R]===P?C0(h,u,y,H):(H++,C0(h,u,H,M)),H<=c&&(y=H+1),c<=H&&(M=H-1)}}function C0(h,u,c,y){c1(h,c,y),c1(u,2*c,2*y),c1(u,2*c+1,2*y+1)}function c1(h,u,c){const y=h[u];h[u]=h[c],h[c]=y}function My(h,u,c,y){const M=h-c,R=u-y;return M*M+R*R}var h1;l.cx=void 0,(h1=l.cx||(l.cx={})).create="create",h1.load="load",h1.fullLoad="fullLoad";let _0=null,Fd=[];const zp=1e3/60,ag="loadTime",d1="fullLoadTime",Pm={mark(h){performance.mark(h)},frame(h){const u=h;_0!=null&&Fd.push(u-_0),_0=u},clearMetrics(){_0=null,Fd=[],performance.clearMeasures(ag),performance.clearMeasures(d1);for(const h in l.cx)performance.clearMarks(l.cx[h])},getPerformanceMetrics(){performance.measure(ag,l.cx.create,l.cx.load),performance.measure(d1,l.cx.create,l.cx.fullLoad);const h=performance.getEntriesByName(ag)[0].duration,u=performance.getEntriesByName(d1)[0].duration,c=Fd.length,y=1/(Fd.reduce((R,P)=>R+P,0)/c/1e3),M=Fd.filter(R=>R>zp).reduce((R,P)=>R+(P-zp)/zp,0);return{loadTime:h,fullLoadTime:u,fps:y,percentDroppedFrames:M/(c+M)*100,totalFrames:c}}};l.$=nt,l.A=oe,l.B=function([h,u,c]){return u+=90,u*=Math.PI/180,c*=Math.PI/180,{x:h*Math.cos(u)*Math.sin(c),y:h*Math.sin(u)*Math.sin(c),z:h*Math.cos(c)}},l.C=PA,l.D=Ii,l.E=Tt,l.F=Po,l.G=Cl,l.H=function(h){if(on==null){const u=h.navigator?h.navigator.userAgent:null;on=!!h.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return on},l.I=A0,l.J=class{constructor(h,u){this.target=h,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new vy(()=>this.process()),this.subscription=In(this.target,"message",c=>this.receive(c),!1),this.globalScope=Kt(self)?h:window}registerMessageHandler(h,u){this.messageHandlers[h]=u}sendAsync(h,u){return new Promise((c,y)=>{const M=Math.round(1e18*Math.random()).toString(36).substring(0,10),R=u?In(u.signal,"abort",()=>{R?.unsubscribe(),delete this.resolveRejects[M];const H={id:M,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(H)},na):null;this.resolveRejects[M]={resolve:H=>{R?.unsubscribe(),c(H)},reject:H=>{R?.unsubscribe(),y(H)}};const P=[],N=Object.assign(Object.assign({},h),{id:M,sourceMapId:this.mapId,origin:location.origin,data:Tc(h.data,P)});this.target.postMessage(N,{transfer:P})})}receive(h){const u=h.data,c=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[c];const y=this.abortControllers[c];return delete this.abortControllers[c],void(y&&y.abort())}if(Kt(self)||u.mustQueue)return this.tasks[c]=u,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,u)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),u=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(h,u)}processTask(h,u){return o(this,void 0,void 0,function*(){if(u.type==="<response>"){const M=this.resolveRejects[h];return delete this.resolveRejects[h],M?void(u.error?M.reject(gA(u.error)):M.resolve(gA(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const c=gA(u.data),y=new AbortController;this.abortControllers[h]=y;try{const M=yield this.messageHandlers[u.type](u.sourceMapId,c,y);this.completeTask(h,null,M)}catch(M){this.completeTask(h,M)}})}completeTask(h,u,c){const y=[];delete this.abortControllers[h];const M={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Tc(u):null,data:Tc(c,y)};this.target.postMessage(M,{transfer:y})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.K=Te,l.L=function(){var h=new oe(16);return oe!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},l.M=function(h,u,c){var y,M,R,P,N,H,ie,ue,ve,Pe,Qe,qe,et=c[0],At=c[1],Mt=c[2];return u===h?(h[12]=u[0]*et+u[4]*At+u[8]*Mt+u[12],h[13]=u[1]*et+u[5]*At+u[9]*Mt+u[13],h[14]=u[2]*et+u[6]*At+u[10]*Mt+u[14],h[15]=u[3]*et+u[7]*At+u[11]*Mt+u[15]):(M=u[1],R=u[2],P=u[3],N=u[4],H=u[5],ie=u[6],ue=u[7],ve=u[8],Pe=u[9],Qe=u[10],qe=u[11],h[0]=y=u[0],h[1]=M,h[2]=R,h[3]=P,h[4]=N,h[5]=H,h[6]=ie,h[7]=ue,h[8]=ve,h[9]=Pe,h[10]=Qe,h[11]=qe,h[12]=y*et+N*At+ve*Mt+u[12],h[13]=M*et+H*At+Pe*Mt+u[13],h[14]=R*et+ie*At+Qe*Mt+u[14],h[15]=P*et+ue*At+qe*Mt+u[15]),h},l.N=function(h,u,c){var y=c[0],M=c[1],R=c[2];return h[0]=u[0]*y,h[1]=u[1]*y,h[2]=u[2]*y,h[3]=u[3]*y,h[4]=u[4]*M,h[5]=u[5]*M,h[6]=u[6]*M,h[7]=u[7]*M,h[8]=u[8]*R,h[9]=u[9]*R,h[10]=u[10]*R,h[11]=u[11]*R,h[12]=u[12],h[13]=u[13],h[14]=u[14],h[15]=u[15],h},l.O=function(h,u,c){var y=u[0],M=u[1],R=u[2],P=u[3],N=u[4],H=u[5],ie=u[6],ue=u[7],ve=u[8],Pe=u[9],Qe=u[10],qe=u[11],et=u[12],At=u[13],Mt=u[14],Qt=u[15],Dt=c[0],jt=c[1],ln=c[2],Cn=c[3];return h[0]=Dt*y+jt*N+ln*ve+Cn*et,h[1]=Dt*M+jt*H+ln*Pe+Cn*At,h[2]=Dt*R+jt*ie+ln*Qe+Cn*Mt,h[3]=Dt*P+jt*ue+ln*qe+Cn*Qt,h[4]=(Dt=c[4])*y+(jt=c[5])*N+(ln=c[6])*ve+(Cn=c[7])*et,h[5]=Dt*M+jt*H+ln*Pe+Cn*At,h[6]=Dt*R+jt*ie+ln*Qe+Cn*Mt,h[7]=Dt*P+jt*ue+ln*qe+Cn*Qt,h[8]=(Dt=c[8])*y+(jt=c[9])*N+(ln=c[10])*ve+(Cn=c[11])*et,h[9]=Dt*M+jt*H+ln*Pe+Cn*At,h[10]=Dt*R+jt*ie+ln*Qe+Cn*Mt,h[11]=Dt*P+jt*ue+ln*qe+Cn*Qt,h[12]=(Dt=c[12])*y+(jt=c[13])*N+(ln=c[14])*ve+(Cn=c[15])*et,h[13]=Dt*M+jt*H+ln*Pe+Cn*At,h[14]=Dt*R+jt*ie+ln*Qe+Cn*Mt,h[15]=Dt*P+jt*ue+ln*qe+Cn*Qt,h},l.P=p,l.Q=function(h,u){const c={};for(let y=0;y<u.length;y++){const M=u[y];M in h&&(c[M]=h[M])}return c},l.R=fu,l.S=Zl,l.T=v,l.U=Hr,l.V=Ud,l.W=Y,l.X=te,l.Y=$n,l.Z=XA,l._=o,l.a=le,l.a$=Se,l.a0=function(h,u){var c,y,M,R,P;if(!h)return u??{};if(!u)return h;let N=Object.assign({},h);if(u.removeAll&&(N={removeAll:!0}),u.remove){const H=new Set(u.remove);N.add&&(N.add=N.add.filter(ue=>!H.has(ue.id))),N.update&&(N.update=N.update.filter(ue=>!H.has(ue.id)));const ie=new Set(((c=h.add)!==null&&c!==void 0?c:[]).map(ue=>ue.id));u.remove=u.remove.filter(ue=>!ie.has(ue))}if(u.remove){const H=new Set(N.remove?N.remove.concat(u.remove):u.remove);N.remove=Array.from(H.values())}if(u.add){const H=N.add?N.add.concat(u.add):u.add,ie=new Map(H.map(ue=>[ue.id,ue]));N.add=Array.from(ie.values())}if(u.update){const H=new Map((y=N.update)===null||y===void 0?void 0:y.map(ie=>[ie.id,ie]));for(const ie of u.update){const ue=(M=H.get(ie.id))!==null&&M!==void 0?M:{id:ie.id};ie.newGeometry&&(ue.newGeometry=ie.newGeometry),ie.addOrUpdateProperties&&(ue.addOrUpdateProperties=((R=ue.addOrUpdateProperties)!==null&&R!==void 0?R:[]).concat(ie.addOrUpdateProperties)),ie.removeProperties&&(ue.removeProperties=((P=ue.removeProperties)!==null&&P!==void 0?P:[]).concat(ie.removeProperties)),ie.removeAllProperties&&(ue.removeAllProperties=!0),H.set(ie.id,ue)}N.update=Array.from(H.values())}return N.remove&&N.add&&(N.remove=N.remove.filter(H=>N.add.findIndex(ie=>ie.id===H)===-1)),N},l.a1=m0,l.a2=el,l.a3=25,l.a4=ng,l.a5=h=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(c=>{u.onloadstart=()=>{c(u)};for(const y of h){const M=window.document.createElement("source");De(y)||(u.crossOrigin="Anonymous"),M.src=y,u.appendChild(M)}})},l.a6=wn,l.a7=function(){return Ke++},l.a8=Me,l.a9=Rp,l.aA=function(h){let u=1/0,c=1/0,y=-1/0,M=-1/0;for(const R of h)u=Math.min(u,R.x),c=Math.min(c,R.y),y=Math.max(y,R.x),M=Math.max(M,R.y);return[u,c,y,M]},l.aB=Js,l.aC=be,l.aD=function(h,u,c,y,M=!1){if(!c[0]&&!c[1])return[0,0];const R=M?y==="map"?-h.bearingInRadians:0:y==="viewport"?h.bearingInRadians:0;if(R){const P=Math.sin(R),N=Math.cos(R);c=[c[0]*N-c[1]*P,c[0]*P+c[1]*N]}return[M?c[0]:be(u,c[0],h.zoom),M?c[1]:be(u,c[1],h.zoom)]},l.aF=Tm,l.aG=ro,l.aH=X0,l.aI=A1,l.aJ=Wa,l.aK=Ea,l.aL=Bt,l.aM=Br,l.aN=ua,l.aO=Ut,l.aP=ei,l.aQ=Sl,l.aR=ye,l.aS=ge,l.aT=function(h){var u=new oe(3);return u[0]=h[0],u[1]=h[1],u[2]=h[2],u},l.aU=function(h,u,c){return h[0]=u[0]-c[0],h[1]=u[1]-c[1],h[2]=u[2]-c[2],h},l.aV=function(h,u){var c=u[0],y=u[1],M=u[2],R=c*c+y*y+M*M;return R>0&&(R=1/Math.sqrt(R)),h[0]=u[0]*R,h[1]=u[1]*R,h[2]=u[2]*R,h},l.aW=we,l.aX=function(h,u){return h[0]*u[0]+h[1]*u[1]+h[2]*u[2]},l.aY=function(h,u,c){return h[0]=u[0]*c[0],h[1]=u[1]*c[1],h[2]=u[2]*c[2],h[3]=u[3]*c[3],h},l.aZ=G,l.a_=function(h,u,c){const y=u[0]*c[0]+u[1]*c[1]+u[2]*c[2];return y===0?null:(-(h[0]*c[0]+h[1]*c[1]+h[2]*c[2])-c[3])/y},l.aa=Oc,l.ab=nA,l.ac=Dh,l.ad=function(h){const u={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,y,M,R)=>{const P=M||R;return u[y]=!P||P.toLowerCase(),""}),u["max-age"]){const c=parseInt(u["max-age"],10);isNaN(c)?delete u["max-age"]:u["max-age"]=c}return u},l.ae=Oi,l.af=function(h){return Math.pow(2,h)},l.ag=$,l.ah=St,l.ai=85.051129,l.aj=p0,l.ak=function(h){return Math.log(h)/Math.LN2},l.al=function(h){var u=h[0],c=h[1];return u*u+c*c},l.am=function(h,u){const c=[];for(const y in h)y in u||c.push(y);return c},l.an=function(h,u){let c=0,y=0;if(h.kind==="constant")y=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:M,minZoom:R,maxZoom:P}=h,N=M?St(Ra.interpolationFactor(M,u,R,P),0,1):0;h.kind==="camera"?y=PA.number(h.minSize,h.maxSize,N):c=N}return{uSizeT:c,uSize:y}},l.ap=function(h,{uSize:u,uSizeT:c},{lowerSize:y,upperSize:M}){return h.kind==="source"?y/ZA:h.kind==="composite"?PA.number(y/ZA,M/ZA,c):u},l.aq=function(h,u){var c=u[0],y=u[1],M=u[2],R=u[3],P=u[4],N=u[5],H=u[6],ie=u[7],ue=u[8],ve=u[9],Pe=u[10],Qe=u[11],qe=u[12],et=u[13],At=u[14],Mt=u[15],Qt=c*N-y*P,Dt=c*H-M*P,jt=c*ie-R*P,ln=y*H-M*N,Cn=y*ie-R*N,Un=M*ie-R*H,pi=ue*et-ve*qe,ai=ue*At-Pe*qe,di=ue*Mt-Qe*qe,tr=ve*At-Pe*et,ui=ve*Mt-Qe*et,fi=Pe*Mt-Qe*At,En=Qt*fi-Dt*ui+jt*tr+ln*di-Cn*ai+Un*pi;return En?(h[0]=(N*fi-H*ui+ie*tr)*(En=1/En),h[1]=(M*ui-y*fi-R*tr)*En,h[2]=(et*Un-At*Cn+Mt*ln)*En,h[3]=(Pe*Cn-ve*Un-Qe*ln)*En,h[4]=(H*di-P*fi-ie*ai)*En,h[5]=(c*fi-M*di+R*ai)*En,h[6]=(At*jt-qe*Un-Mt*Dt)*En,h[7]=(ue*Un-Pe*jt+Qe*Dt)*En,h[8]=(P*ui-N*di+ie*pi)*En,h[9]=(y*di-c*ui-R*pi)*En,h[10]=(qe*Cn-et*jt+Mt*Qt)*En,h[11]=(ve*jt-ue*Cn-Qe*Qt)*En,h[12]=(N*ai-P*tr-H*pi)*En,h[13]=(c*tr-y*ai+M*pi)*En,h[14]=(et*Dt-qe*ln-At*Qt)*En,h[15]=(ue*ln-ve*Dt+Pe*Qt)*En,h):null},l.ar=st,l.as=function(h){var u=h[0],c=h[1];return Math.sqrt(u*u+c*c)},l.at=function(h){return h[0]=0,h[1]=0,h},l.au=function(h,u,c){return h[0]=u[0]*c,h[1]=u[1]*c,h},l.av=Tp,l.aw=Ve,l.ax=function(h,u,c,y){const M=u.y-h.y,R=u.x-h.x,P=y.y-c.y,N=y.x-c.x,H=P*R-N*M;if(H===0)return null;const ie=(N*(h.y-c.y)-P*(h.x-c.x))/H;return new p(h.x+ie*R,h.y+ie*M)},l.ay=ul,l.az=pm,l.b=Jn,l.b$=class extends I{},l.b0=function(h,u,c){return h[0]=u[0]*c,h[1]=u[1]*c,h[2]=u[2]*c,h[3]=u[3]*c,h},l.b1=function(h,u){return h[0]*u[0]+h[1]*u[1]+h[2]*u[2]+h[3]},l.b2=o1,l.b3=Ba,l.b4=function(h,u,c,y,M){var R=1/Math.tan(u/2);if(h[0]=R/c,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=R,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,M!=null&&M!==1/0){var P=1/(y-M);h[10]=(M+y)*P,h[14]=2*M*y*P}else h[10]=-1,h[14]=-2*y;return h},l.b5=function(h){var u=new oe(16);return u[0]=h[0],u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=h[6],u[7]=h[7],u[8]=h[8],u[9]=h[9],u[10]=h[10],u[11]=h[11],u[12]=h[12],u[13]=h[13],u[14]=h[14],u[15]=h[15],u},l.b6=function(h,u,c){var y=Math.sin(c),M=Math.cos(c),R=u[0],P=u[1],N=u[2],H=u[3],ie=u[4],ue=u[5],ve=u[6],Pe=u[7];return u!==h&&(h[8]=u[8],h[9]=u[9],h[10]=u[10],h[11]=u[11],h[12]=u[12],h[13]=u[13],h[14]=u[14],h[15]=u[15]),h[0]=R*M+ie*y,h[1]=P*M+ue*y,h[2]=N*M+ve*y,h[3]=H*M+Pe*y,h[4]=ie*M-R*y,h[5]=ue*M-P*y,h[6]=ve*M-N*y,h[7]=Pe*M-H*y,h},l.b7=function(h,u,c){var y=Math.sin(c),M=Math.cos(c),R=u[4],P=u[5],N=u[6],H=u[7],ie=u[8],ue=u[9],ve=u[10],Pe=u[11];return u!==h&&(h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],h[12]=u[12],h[13]=u[13],h[14]=u[14],h[15]=u[15]),h[4]=R*M+ie*y,h[5]=P*M+ue*y,h[6]=N*M+ve*y,h[7]=H*M+Pe*y,h[8]=ie*M-R*y,h[9]=ue*M-P*y,h[10]=ve*M-N*y,h[11]=Pe*M-H*y,h},l.b8=function(){const h=new Float32Array(16);return $(h),h},l.b9=function(){const h=new Float64Array(16);return $(h),h},l.bA=function(h,u){const c=Ne(h,360),y=Ne(u,360),M=y-c,R=y>c?M-360:M+360;return Math.abs(M)<Math.abs(R)?M:R},l.bB=function(h){return h[0]=0,h[1]=0,h[2]=0,h},l.bC=function(h,u,c,y){const M=Math.sqrt(h*h+u*u),R=Math.sqrt(c*c+y*y);h/=M,u/=M,c/=R,y/=R;const P=Math.acos(h*c+u*y);return-u*c+h*y>0?P:-P},l.bD=function(h,u){const c=Ne(h,2*Math.PI),y=Ne(u,2*Math.PI);return Math.min(Math.abs(c-y),Math.abs(c-y+2*Math.PI),Math.abs(c-y-2*Math.PI))},l.bE=function(){const h={},u=it.$version;for(const c in it.$root){const y=it.$root[c];if(y.required){let M=null;M=c==="version"?u:y.type==="array"?[]:{},M!=null&&(h[c]=M)}}return h},l.bF=nf,l.bG=dt,l.bH=function h(u,c){if(Array.isArray(u)){if(!Array.isArray(c)||u.length!==c.length)return!1;for(let y=0;y<u.length;y++)if(!h(u[y],c[y]))return!1;return!0}if(typeof u=="object"&&u!==null&&c!==null){if(typeof c!="object"||Object.keys(u).length!==Object.keys(c).length)return!1;for(const y in u)if(!h(u[y],c[y]))return!1;return!0}return u===c},l.bI=function(h){h=h.slice();const u=Object.create(null);for(let c=0;c<h.length;c++)u[h[c].id]=h[c];for(let c=0;c<h.length;c++)"ref"in h[c]&&(h[c]=Dn(h[c],u[h[c].ref]));return h},l.bJ=function(h){if(h.type==="custom")return new uC(h);switch(h.type){case"background":return new i1(h);case"circle":return new Yf(h);case"color-relief":return new F(h);case"fill":return new Af(h);case"fill-extrusion":return new ta(h);case"heatmap":return new js(h);case"hillshade":return new a0(h);case"line":return new Lc(h);case"raster":return new d0(h);case"symbol":return new h0(h)}},l.bK=bt,l.bL=function(h,u){if(!h)return[{command:"setStyle",args:[u]}];let c=[];try{if(!Mn(h.version,u.version))return[{command:"setStyle",args:[u]}];Mn(h.center,u.center)||c.push({command:"setCenter",args:[u.center]}),Mn(h.state,u.state)||c.push({command:"setGlobalState",args:[u.state]}),Mn(h.centerAltitude,u.centerAltitude)||c.push({command:"setCenterAltitude",args:[u.centerAltitude]}),Mn(h.zoom,u.zoom)||c.push({command:"setZoom",args:[u.zoom]}),Mn(h.bearing,u.bearing)||c.push({command:"setBearing",args:[u.bearing]}),Mn(h.pitch,u.pitch)||c.push({command:"setPitch",args:[u.pitch]}),Mn(h.roll,u.roll)||c.push({command:"setRoll",args:[u.roll]}),Mn(h.sprite,u.sprite)||c.push({command:"setSprite",args:[u.sprite]}),Mn(h.glyphs,u.glyphs)||c.push({command:"setGlyphs",args:[u.glyphs]}),Mn(h.transition,u.transition)||c.push({command:"setTransition",args:[u.transition]}),Mn(h.light,u.light)||c.push({command:"setLight",args:[u.light]}),Mn(h.terrain,u.terrain)||c.push({command:"setTerrain",args:[u.terrain]}),Mn(h.sky,u.sky)||c.push({command:"setSky",args:[u.sky]}),Mn(h.projection,u.projection)||c.push({command:"setProjection",args:[u.projection]});const y={},M=[];(function(P,N,H,ie){let ue;for(ue in N=N||{},P=P||{})Object.prototype.hasOwnProperty.call(P,ue)&&(Object.prototype.hasOwnProperty.call(N,ue)||qi(ue,H,ie));for(ue in N)Object.prototype.hasOwnProperty.call(N,ue)&&(Object.prototype.hasOwnProperty.call(P,ue)?Mn(P[ue],N[ue])||(P[ue].type==="geojson"&&N[ue].type==="geojson"&&Ei(P,N,ue)?ii(H,{command:"setGeoJSONSourceData",args:[ue,N[ue].data]}):er(ue,N,H,ie)):Wn(ue,N,H))})(h.sources,u.sources,M,y);const R=[];h.layers&&h.layers.forEach(P=>{"source"in P&&y[P.source]?c.push({command:"removeLayer",args:[P.id]}):R.push(P)}),c=c.concat(M),function(P,N,H){N=N||[];const ie=(P=P||[]).map(ti),ue=N.map(ti),ve=P.reduce(Wi,{}),Pe=N.reduce(Wi,{}),Qe=ie.slice(),qe=Object.create(null);let et,At,Mt,Qt,Dt;for(let jt=0,ln=0;jt<ie.length;jt++)et=ie[jt],Object.prototype.hasOwnProperty.call(Pe,et)?ln++:(ii(H,{command:"removeLayer",args:[et]}),Qe.splice(Qe.indexOf(et,ln),1));for(let jt=0,ln=0;jt<ue.length;jt++)et=ue[ue.length-1-jt],Qe[Qe.length-1-jt]!==et&&(Object.prototype.hasOwnProperty.call(ve,et)?(ii(H,{command:"removeLayer",args:[et]}),Qe.splice(Qe.lastIndexOf(et,Qe.length-ln),1)):ln++,Qt=Qe[Qe.length-jt],ii(H,{command:"addLayer",args:[Pe[et],Qt]}),Qe.splice(Qe.length-jt,0,et),qe[et]=!0);for(let jt=0;jt<ue.length;jt++)if(et=ue[jt],At=ve[et],Mt=Pe[et],!qe[et]&&!Mn(At,Mt))if(Mn(At.source,Mt.source)&&Mn(At["source-layer"],Mt["source-layer"])&&Mn(At.type,Mt.type)){for(Dt in hi(At.layout,Mt.layout,H,et,null,"setLayoutProperty"),hi(At.paint,Mt.paint,H,et,null,"setPaintProperty"),Mn(At.filter,Mt.filter)||ii(H,{command:"setFilter",args:[et,Mt.filter]}),Mn(At.minzoom,Mt.minzoom)&&Mn(At.maxzoom,Mt.maxzoom)||ii(H,{command:"setLayerZoomRange",args:[et,Mt.minzoom,Mt.maxzoom]}),At)Object.prototype.hasOwnProperty.call(At,Dt)&&Dt!=="layout"&&Dt!=="paint"&&Dt!=="filter"&&Dt!=="metadata"&&Dt!=="minzoom"&&Dt!=="maxzoom"&&(Dt.indexOf("paint.")===0?hi(At[Dt],Mt[Dt],H,et,Dt.slice(6),"setPaintProperty"):Mn(At[Dt],Mt[Dt])||ii(H,{command:"setLayerProperty",args:[et,Dt,Mt[Dt]]}));for(Dt in Mt)Object.prototype.hasOwnProperty.call(Mt,Dt)&&!Object.prototype.hasOwnProperty.call(At,Dt)&&Dt!=="layout"&&Dt!=="paint"&&Dt!=="filter"&&Dt!=="metadata"&&Dt!=="minzoom"&&Dt!=="maxzoom"&&(Dt.indexOf("paint.")===0?hi(At[Dt],Mt[Dt],H,et,Dt.slice(6),"setPaintProperty"):Mn(At[Dt],Mt[Dt])||ii(H,{command:"setLayerProperty",args:[et,Dt,Mt[Dt]]}))}else ii(H,{command:"removeLayer",args:[et]}),Qt=Qe[Qe.lastIndexOf(et)+1],ii(H,{command:"addLayer",args:[Mt,Qt]})}(R,u.layers,c)}catch(y){console.warn("Unable to compute style diff:",y),c=[{command:"setStyle",args:[u]}]}return c},l.bM=function(h){const u=[],c=h.id;return c===void 0&&u.push({message:`layers.${c}: missing required property "id"`}),h.render===void 0&&u.push({message:`layers.${c}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&u.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),u},l.bN=Re,l.bO=He,l.bP=class extends xl{constructor(h,u){super(h,u),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},l.bQ=Xo,l.bR=class extends xl{constructor(h,u){super(h,u),this.current=hu}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let u=1;u<16;u++)if(h[u]!==this.current[u]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},l.bS=_o,l.bT=class extends xl{constructor(h,u){super(h,u),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},l.bU=class extends xl{constructor(h,u){super(h,u),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},l.bV=ne,l.bW=function(h,u){var c=Math.sin(u),y=Math.cos(u);return h[0]=y,h[1]=c,h[2]=0,h[3]=-c,h[4]=y,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},l.bX=function(h,u,c){var y=u[0],M=u[1],R=u[2];return h[0]=y*c[0]+M*c[3]+R*c[6],h[1]=y*c[1]+M*c[4]+R*c[7],h[2]=y*c[2]+M*c[5]+R*c[8],h},l.bY=function(h,u,c,y,M,R,P){var N=1/(u-c),H=1/(y-M),ie=1/(R-P);return h[0]=-2*N,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*H,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*ie,h[11]=0,h[12]=(u+c)*N,h[13]=(M+y)*H,h[14]=(P+R)*ie,h[15]=1,h},l.bZ=class extends xl{constructor(h,u){super(h,u),this.current=new Array}set(h){if(h!=this.current){this.current=h;const u=new Float32Array(4*h.length);for(let c=0;c<h.length;c++)u[4*c]=h[c].r,u[4*c+1]=h[c].g,u[4*c+2]=h[c].b,u[4*c+3]=h[c].a;this.gl.uniform4fv(this.location,u)}}},l.b_=class extends xl{constructor(h,u){super(h,u),this.current=new Array}set(h){if(h!=this.current){this.current=h;const u=new Float32Array(h);this.gl.uniform1fv(this.location,u)}}},l.ba=function(){return new Float64Array(16)},l.bb=function(h,u,c){const y=new Float64Array(4);return ze(y,h,u-90,c),y},l.bc=function(h,u,c,y){var M,R,P,N,H,ie=u[0],ue=u[1],ve=u[2],Pe=u[3],Qe=c[0],qe=c[1],et=c[2],At=c[3];return(R=ie*Qe+ue*qe+ve*et+Pe*At)<0&&(R=-R,Qe=-Qe,qe=-qe,et=-et,At=-At),1-R>J?(M=Math.acos(R),P=Math.sin(M),N=Math.sin((1-y)*M)/P,H=Math.sin(y*M)/P):(N=1-y,H=y),h[0]=N*ie+H*Qe,h[1]=N*ue+H*qe,h[2]=N*ve+H*et,h[3]=N*Pe+H*At,h},l.bd=function(h){const u=new Float64Array(9);var c,y,M,R,P,N,H,ie,ue,ve,Pe,Qe,qe,et,At,Mt,Qt,Dt;ve=(M=(y=h)[0])*(H=M+M),Pe=(R=y[1])*H,qe=(P=y[2])*H,et=P*(ie=R+R),Mt=(N=y[3])*H,Qt=N*ie,Dt=N*(ue=P+P),(c=u)[0]=1-(Qe=R*ie)-(At=P*ue),c[3]=Pe-Dt,c[6]=qe+Qt,c[1]=Pe+Dt,c[4]=1-ve-At,c[7]=et-Mt,c[2]=qe-Qt,c[5]=et+Mt,c[8]=1-ve-Qe;const jt=ei(-Math.asin(St(u[2],-1,1)));let ln,Cn;return Math.hypot(u[5],u[8])<.001?(ln=0,Cn=-ei(Math.atan2(u[3],u[4]))):(ln=ei(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Cn=ei(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:ln,pitch:jt+90,bearing:Cn}},l.be=function(h,u){return h.roll==u.roll&&h.pitch==u.pitch&&h.bearing==u.bearing},l.bf=xr,l.bg=Kc,l.bh=$l,l.bi=pc,l.bj=Or,l.bk=tt,l.bl=lt,l.bm=ya,l.bn=function(h,u,c,y,M){return tt(y,M,St((h-u)/(c-u),0,1))},l.bo=Ne,l.bp=function(){return new Float64Array(3)},l.bq=function(h,u,c,y){return h[0]=u[0]+c[0]*y,h[1]=u[1]+c[1]*y,h[2]=u[2]+c[2]*y,h},l.br=ze,l.bs=function(h,u,c){var y=c[0],M=c[1],R=c[2],P=c[3],N=u[0],H=u[1],ie=u[2],ue=M*ie-R*H,ve=R*N-y*ie,Pe=y*H-M*N;return h[0]=N+P*(ue+=ue)+M*(Pe+=Pe)-R*(ve+=ve),h[1]=H+P*ve+R*ue-y*Pe,h[2]=ie+P*Pe+y*ve-M*ue,h},l.bt=function(h,u,c){const y=(M=[h[0],h[1],h[2],u[0],u[1],u[2],c[0],c[1],c[2]])[0]*((ue=M[8])*(P=M[4])-(N=M[5])*(ie=M[7]))+M[1]*(-ue*(R=M[3])+N*(H=M[6]))+M[2]*(ie*R-P*H);var M,R,P,N,H,ie,ue;if(y===0)return null;const ve=we([],[u[0],u[1],u[2]],[c[0],c[1],c[2]]),Pe=we([],[c[0],c[1],c[2]],[h[0],h[1],h[2]]),Qe=we([],[h[0],h[1],h[2]],[u[0],u[1],u[2]]),qe=ye([],ve,-h[3]);return ge(qe,qe,ye([],Pe,-u[3])),ge(qe,qe,ye([],Qe,-c[3])),ye(qe,qe,1/y),qe},l.bu=f0,l.bv=function(){return new Float64Array(4)},l.bw=function(h,u,c,y){var M=[],R=[];return M[0]=u[0]-c[0],M[1]=u[1]-c[1],M[2]=u[2]-c[2],R[0]=M[0]*Math.cos(y)-M[1]*Math.sin(y),R[1]=M[0]*Math.sin(y)+M[1]*Math.cos(y),R[2]=M[2],h[0]=R[0]+c[0],h[1]=R[1]+c[1],h[2]=R[2]+c[2],h},l.bx=function(h,u,c,y){var M=[],R=[];return M[0]=u[0]-c[0],M[1]=u[1]-c[1],M[2]=u[2]-c[2],R[0]=M[0],R[1]=M[1]*Math.cos(y)-M[2]*Math.sin(y),R[2]=M[1]*Math.sin(y)+M[2]*Math.cos(y),h[0]=R[0]+c[0],h[1]=R[1]+c[1],h[2]=R[2]+c[2],h},l.by=function(h,u,c,y){var M=[],R=[];return M[0]=u[0]-c[0],M[1]=u[1]-c[1],M[2]=u[2]-c[2],R[0]=M[2]*Math.sin(y)+M[0]*Math.cos(y),R[1]=M[1],R[2]=M[2]*Math.cos(y)-M[0]*Math.sin(y),h[0]=R[0]+c[0],h[1]=R[1]+c[1],h[2]=R[2]+c[2],h},l.bz=function(h,u,c){var y=Math.sin(c),M=Math.cos(c),R=u[0],P=u[1],N=u[2],H=u[3],ie=u[8],ue=u[9],ve=u[10],Pe=u[11];return u!==h&&(h[4]=u[4],h[5]=u[5],h[6]=u[6],h[7]=u[7],h[12]=u[12],h[13]=u[13],h[14]=u[14],h[15]=u[15]),h[0]=R*M-ie*y,h[1]=P*M-ue*y,h[2]=N*M-ve*y,h[3]=H*M-Pe*y,h[8]=R*y+ie*M,h[9]=P*y+ue*M,h[10]=N*y+ve*M,h[11]=H*y+Pe*M,h},l.c=re,l.c0=EA,l.c1=class extends f{},l.c2=gm,l.c3=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},l.c4=al,l.c5=function(h,u,c){var y=u[0],M=u[1],R=u[2],P=c[3]*y+c[7]*M+c[11]*R+c[15];return h[0]=(c[0]*y+c[4]*M+c[8]*R+c[12])/(P=P||1),h[1]=(c[1]*y+c[5]*M+c[9]*R+c[13])/P,h[2]=(c[2]*y+c[6]*M+c[10]*R+c[14])/P,h},l.c6=class extends Zs{},l.c7=class extends he{},l.c8=function(h,u){return h[0]===u[0]&&h[1]===u[1]&&h[2]===u[2]&&h[3]===u[3]&&h[4]===u[4]&&h[5]===u[5]&&h[6]===u[6]&&h[7]===u[7]&&h[8]===u[8]&&h[9]===u[9]&&h[10]===u[10]&&h[11]===u[11]&&h[12]===u[12]&&h[13]===u[13]&&h[14]===u[14]&&h[15]===u[15]},l.c9=function(h,u){var c=h[0],y=h[1],M=h[2],R=h[3],P=h[4],N=h[5],H=h[6],ie=h[7],ue=h[8],ve=h[9],Pe=h[10],Qe=h[11],qe=h[12],et=h[13],At=h[14],Mt=h[15],Qt=u[0],Dt=u[1],jt=u[2],ln=u[3],Cn=u[4],Un=u[5],pi=u[6],ai=u[7],di=u[8],tr=u[9],ui=u[10],fi=u[11],En=u[12],fr=u[13],Er=u[14],sr=u[15];return Math.abs(c-Qt)<=J*Math.max(1,Math.abs(c),Math.abs(Qt))&&Math.abs(y-Dt)<=J*Math.max(1,Math.abs(y),Math.abs(Dt))&&Math.abs(M-jt)<=J*Math.max(1,Math.abs(M),Math.abs(jt))&&Math.abs(R-ln)<=J*Math.max(1,Math.abs(R),Math.abs(ln))&&Math.abs(P-Cn)<=J*Math.max(1,Math.abs(P),Math.abs(Cn))&&Math.abs(N-Un)<=J*Math.max(1,Math.abs(N),Math.abs(Un))&&Math.abs(H-pi)<=J*Math.max(1,Math.abs(H),Math.abs(pi))&&Math.abs(ie-ai)<=J*Math.max(1,Math.abs(ie),Math.abs(ai))&&Math.abs(ue-di)<=J*Math.max(1,Math.abs(ue),Math.abs(di))&&Math.abs(ve-tr)<=J*Math.max(1,Math.abs(ve),Math.abs(tr))&&Math.abs(Pe-ui)<=J*Math.max(1,Math.abs(Pe),Math.abs(ui))&&Math.abs(Qe-fi)<=J*Math.max(1,Math.abs(Qe),Math.abs(fi))&&Math.abs(qe-En)<=J*Math.max(1,Math.abs(qe),Math.abs(En))&&Math.abs(et-fr)<=J*Math.max(1,Math.abs(et),Math.abs(fr))&&Math.abs(At-Er)<=J*Math.max(1,Math.abs(At),Math.abs(Er))&&Math.abs(Mt-sr)<=J*Math.max(1,Math.abs(Mt),Math.abs(sr))},l.cA=function(h,u){le.REGISTERED_PROTOCOLS[h]=u},l.cB=function(h){delete le.REGISTERED_PROTOCOLS[h]},l.cC=function(h,u){const c={};for(let M=0;M<h.length;M++){const R=u&&u[h[M].id]||mA(h[M]);u&&(u[h[M].id]=R);let P=c[R];P||(P=c[R]=[]),P.push(h[M])}const y=[];for(const M in c)y.push(c[M]);return y},l.cD=ci,l.cE=Cy,l.cF=g0,l.cG=hy,l.cH=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=nt/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const u=h.bucket.layers[0],c=u.layout,y=u._unevaluatedLayout._values,M={layoutIconSize:y["icon-size"].possiblyEvaluate(new Po(h.bucket.zoom+1),h.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new Po(h.bucket.zoom+1),h.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new Po(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:ue}=h.bucket.textSizeData;M.compositeTextSizes=[y["text-size"].possiblyEvaluate(new Po(ie),h.canonical),y["text-size"].possiblyEvaluate(new Po(ue),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:ue}=h.bucket.iconSizeData;M.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new Po(ie),h.canonical),y["icon-size"].possiblyEvaluate(new Po(ue),h.canonical)]}const R=c.get("text-line-height")*Js,P=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",N=c.get("text-keep-upright"),H=c.get("text-size");for(const ie of h.bucket.features){const ue=c.get("text-font").evaluate(ie,{},h.canonical).join(","),ve=H.evaluate(ie,{},h.canonical),Pe=M.layoutTextSize.evaluate(ie,{},h.canonical),Qe=M.layoutIconSize.evaluate(ie,{},h.canonical),qe={horizontal:{},vertical:void 0},et=ie.text;let At,Mt=[0,0];if(et){const jt=et.toString(),ln=c.get("text-letter-spacing").evaluate(ie,{},h.canonical)*Js,Cn=Bh(jt)?ln:0,Un=c.get("text-anchor").evaluate(ie,{},h.canonical),pi=ud(u,ie,h.canonical);if(!pi){const ui=c.get("text-radial-offset").evaluate(ie,{},h.canonical);Mt=ui?Fc(Un,[ui*Js,Fp]):c.get("text-offset").evaluate(ie,{},h.canonical).map(fi=>fi*Js)}let ai=P?"center":c.get("text-justify").evaluate(ie,{},h.canonical);const di=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(ie,{},h.canonical)*Js:1/0,tr=()=>{h.bucket.allowVerticalPlacement&&Nl(jt)&&(qe.vertical=c0(et,h.glyphMap,h.glyphPositions,h.imagePositions,ue,di,R,Un,"left",Cn,Mt,l.ao.vertical,!0,Pe,ve))};if(!P&&pi){const ui=new Set;if(ai==="auto")for(let En=0;En<pi.values.length;En+=2)ui.add(ro(pi.values[En]));else ui.add(ai);let fi=!1;for(const En of ui)if(!qe.horizontal[En])if(fi)qe.horizontal[En]=qe.horizontal[0];else{const fr=c0(et,h.glyphMap,h.glyphPositions,h.imagePositions,ue,di,R,"center",En,Cn,Mt,l.ao.horizontal,!1,Pe,ve);fr&&(qe.horizontal[En]=fr,fi=fr.positionedLines.length===1)}tr()}else{ai==="auto"&&(ai=ro(Un));const ui=c0(et,h.glyphMap,h.glyphPositions,h.imagePositions,ue,di,R,Un,ai,Cn,Mt,l.ao.horizontal,!1,Pe,ve);ui&&(qe.horizontal[ai]=ui),tr(),Nl(jt)&&P&&N&&(qe.vertical=c0(et,h.glyphMap,h.glyphPositions,h.imagePositions,ue,di,R,Un,ai,Cn,Mt,l.ao.vertical,!1,Pe,ve))}}let Qt=!1;if(ie.icon&&ie.icon.name){const jt=h.imageMap[ie.icon.name];jt&&(At=aC(h.imagePositions[ie.icon.name],c.get("icon-offset").evaluate(ie,{},h.canonical),c.get("icon-anchor").evaluate(ie,{},h.canonical)),Qt=!!jt.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Qt:h.bucket.sdfIcons!==Qt&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(jt.pixelRatio!==h.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Dt=u1(qe.horizontal)||qe.vertical;h.bucket.iconsInText=!!Dt&&Dt.iconsInText,(Dt||At)&&Ld(h.bucket,ie,qe,At,h.imageMap,M,Pe,Qe,Mt,Qt,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},l.cI=Pd,l.cJ=sl,l.cK=_m,l.cL=Wg,l.cM=Jf,l.cN=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},l.cO=function(h,u,c,y,M){return o(this,void 0,void 0,function*(){if(te())try{return yield $n(h,u,c,y,M)}catch{}return function(R,P,N,H,ie){const ue=R.width,ve=R.height;On&&Bn||(On=new OffscreenCanvas(ue,ve),Bn=On.getContext("2d",{willReadFrequently:!0})),On.width=ue,On.height=ve,Bn.drawImage(R,0,0,ue,ve);const Pe=Bn.getImageData(P,N,H,ie);return Bn.clearRect(0,0,ue,ve),Pe.data}(h,u,c,y,M)})},l.cP=B,l.cQ=C,l.cR=SA,l.cS=Ip,l.cT=LA,l.cU=function(h,u){const c=new Map;if(h!=null)if(h.type==="Feature")c.set(Pp(h,u),h);else for(const y of h.features)c.set(Pp(y,u),y);return c},l.cV=function(h,u){if(h==null)return!0;if(h.type==="Feature")return Pp(h,u)!=null;if(h.type==="FeatureCollection"){const c=new Set;for(const y of h.features){const M=Pp(y,u);if(M==null||c.has(M))return!1;c.add(M)}return!0}return!1},l.cW=function(h,u,c){var y,M,R,P;if(u.removeAll&&h.clear(),u.remove)for(const N of u.remove)h.delete(N);if(u.add)for(const N of u.add){const H=Pp(N,c);H!=null&&h.set(H,N)}if(u.update)for(const N of u.update){let H=h.get(N.id);if(H==null)continue;const ie=!N.removeAllProperties&&(((y=N.removeProperties)===null||y===void 0?void 0:y.length)>0||((M=N.addOrUpdateProperties)===null||M===void 0?void 0:M.length)>0);if((N.newGeometry||N.removeAllProperties||ie)&&(H=Object.assign({},H),h.set(N.id,H),ie&&(H.properties=Object.assign({},H.properties))),N.newGeometry&&(H.geometry=N.newGeometry),N.removeAllProperties)H.properties={};else if(((R=N.removeProperties)===null||R===void 0?void 0:R.length)>0)for(const ue of N.removeProperties)Object.prototype.hasOwnProperty.call(H.properties,ue)&&delete H.properties[ue];if(((P=N.addOrUpdateProperties)===null||P===void 0?void 0:P.length)>0)for(const{key:ue,value:ve}of N.addOrUpdateProperties)H.properties[ue]=ve}},l.cX=Gl,l.ca=function(h,u){return h[0]=u[0],h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=u[6],h[7]=u[7],h[8]=u[8],h[9]=u[9],h[10]=u[10],h[11]=u[11],h[12]=u[12],h[13]=u[13],h[14]=u[14],h[15]=u[15],h},l.cb=h=>h.type==="symbol",l.cc=h=>h.type==="circle",l.cd=h=>h.type==="heatmap",l.ce=h=>h.type==="line",l.cf=h=>h.type==="fill",l.cg=h=>h.type==="fill-extrusion",l.ch=h=>h.type==="hillshade",l.ci=h=>h.type==="color-relief",l.cj=h=>h.type==="raster",l.ck=h=>h.type==="background",l.cl=h=>h.type==="custom",l.cm=kt,l.cn=function(h,u,c){const y=Ct(u.x-c.x,u.y-c.y),M=Ct(h.x-c.x,h.y-c.y);var R,P;return ei(Math.atan2(y[0]*M[1]-y[1]*M[0],(R=y)[0]*(P=M)[0]+R[1]*P[1]))},l.co=gt,l.cp=function(h,u){return je[u]&&(h instanceof MouseEvent||h instanceof WheelEvent)},l.cq=function(h,u){return Kn[u]&&"touches"in h},l.cr=function(h){return Kn[h]||je[h]},l.cs=function(h,u,c){var y=u[0],M=u[1];return h[0]=c[0]*y+c[4]*M+c[12],h[1]=c[1]*y+c[5]*M+c[13],h},l.ct=function(h,u){const{x:c,y}=m0.fromLngLat(u);return!(h<0||h>25||y<0||y>=1||c<0||c>=1)},l.cu=function(h,u){return h[0]=u[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=u[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=u[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},l.cv=class extends Dc{},l.cw=Pm,l.cy=function(h){return h.message===de},l.cz=We,l.d=De,l.e=Fe,l.f=h=>o(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(u)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=pe,l.h=h=>new Promise((u,c)=>{const y=new Image;y.onload=()=>{u(y),URL.revokeObjectURL(y.src),y.onload=null,window.requestAnimationFrame(()=>{y.src=Wt})},y.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const M=new Blob([new Uint8Array(h)],{type:"image/png"});y.src=h.byteLength?URL.createObjectURL(M):Wt}),l.i=Kt,l.j=(h,u)=>Ye(Fe(h,{type:"json"}),u),l.k=ht,l.l=mt,l.m=Ye,l.n=(h,u)=>Ye(Fe(h,{type:"arrayBuffer"}),u),l.o=function(h){return new Jf(h).readFields(uy,[])},l.p=$0,l.q=VA,l.r=la,l.s=In,l.t=Lf,l.u=no,l.v=it,l.w=Ot,l.x=tf,l.y=$h,l.z=Id}),r("worker",["./shared"],function(l){class o{constructor(le){this.keyCache={},le&&this.replace(le)}replace(le){this._layerConfigs={},this._layers={},this.update(le,[])}update(le,pe){for(const We of le){this._layerConfigs[We.id]=We;const dt=this._layers[We.id]=l.bJ(We);dt._featureFilter=l.aa(dt.filter),this.keyCache[We.id]&&delete this.keyCache[We.id]}for(const We of pe)delete this.keyCache[We],delete this._layerConfigs[We],delete this._layers[We];this.familiesBySource={};const Te=l.cC(Object.values(this._layerConfigs),this.keyCache);for(const We of Te){const dt=We.map(ht=>this._layers[ht.id]),Ye=dt[0];if(Ye.visibility==="none")continue;const De=Ye.source||"";let Ze=this.familiesBySource[De];Ze||(Ze=this.familiesBySource[De]={});const g=Ye.sourceLayer||"_geojsonTileLayer";let mt=Ze[g];mt||(mt=Ze[g]=[]),mt.push(dt)}}}class p{constructor(le){const pe={},Te=[];for(const De in le){const Ze=le[De],g=pe[De]={};for(const mt in Ze){const ht=Ze[+mt];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const Tt={x:0,y:0,w:ht.bitmap.width+2,h:ht.bitmap.height+2};Te.push(Tt),g[mt]={rect:Tt,metrics:ht.metrics}}}const{w:We,h:dt}=l.p(Te),Ye=new l.q({width:We||1,height:dt||1});for(const De in le){const Ze=le[De];for(const g in Ze){const mt=Ze[+g];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const ht=pe[De][g].rect;l.q.copy(mt.bitmap,Ye,{x:0,y:0},{x:ht.x+1,y:ht.y+1},mt.bitmap)}}this.image=Ye,this.positions=pe}}l.cD("GlyphAtlas",p);class C{constructor(le){this.tileID=new l.Z(le.tileID.overscaledZ,le.tileID.wrap,le.tileID.canonical.z,le.tileID.canonical.x,le.tileID.canonical.y),this.uid=le.uid,this.zoom=le.zoom,this.pixelRatio=le.pixelRatio,this.tileSize=le.tileSize,this.source=le.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=le.showCollisionBoxes,this.collectResourceTiming=!!le.collectResourceTiming,this.returnDependencies=!!le.returnDependencies,this.promoteId=le.promoteId,this.inFlightDependencies=[],this.globalState=le.globalState}parse(le,pe,Te,We,dt){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=le,this.collisionBoxArray=new l.a8;const Ye=new l.cE(Object.keys(le.layers).sort()),De=new l.cF(this.tileID,this.promoteId);De.bucketLayerIDs=[];const Ze={},g={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Te,subdivisionGranularity:dt},mt=pe.familiesBySource[this.source];for(const hi in mt){const ti=le.layers[hi];if(!ti)continue;ti.version===1&&l.w(`Vector tile source "${this.source}" layer "${hi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Wi=Ye.encode(hi),wn=[];for(let uo=0;uo<ti.length;uo++){const Hi=ti.feature(uo),ma=De.getId(Hi,hi);wn.push({feature:Hi,id:ma,index:uo,sourceLayerIndex:Wi})}for(const uo of mt[hi]){const Hi=uo[0];Hi.source!==this.source&&l.w(`layer.source = ${Hi.source} does not equal this.source = ${this.source}`),Hi.minzoom&&this.zoom<Math.floor(Hi.minzoom)||Hi.maxzoom&&this.zoom>=Hi.maxzoom||Hi.visibility!=="none"&&(w(uo,this.zoom,Te,this.globalState),(Ze[Hi.id]=Hi.createBucket({index:De.bucketLayerIDs.length,layers:uo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Wi,sourceID:this.source,globalState:this.globalState})).populate(wn,g,this.tileID.canonical),De.bucketLayerIDs.push(uo.map(ma=>ma.id)))}}const ht=l.bN(g.glyphDependencies,hi=>Object.keys(hi).map(Number));this.inFlightDependencies.forEach(hi=>hi?.abort()),this.inFlightDependencies=[];let Tt=Promise.resolve({});if(Object.keys(ht).length){const hi=new AbortController;this.inFlightDependencies.push(hi),Tt=We.sendAsync({type:"GG",data:{stacks:ht,source:this.source,tileID:this.tileID,type:"glyphs"}},hi)}const it=Object.keys(g.iconDependencies);let en=Promise.resolve({});if(it.length){const hi=new AbortController;this.inFlightDependencies.push(hi),en=We.sendAsync({type:"GI",data:{icons:it,source:this.source,tileID:this.tileID,type:"icons"}},hi)}const Dn=Object.keys(g.patternDependencies);let Mn=Promise.resolve({});if(Dn.length){const hi=new AbortController;this.inFlightDependencies.push(hi),Mn=We.sendAsync({type:"GI",data:{icons:Dn,source:this.source,tileID:this.tileID,type:"patterns"}},hi)}const[ii,Wn,qi]=yield Promise.all([Tt,en,Mn]),er=new p(ii),Ei=new l.cG(Wn,qi);for(const hi in Ze){const ti=Ze[hi];ti instanceof l.a9?(w(ti.layers,this.zoom,Te,this.globalState),l.cH({bucket:ti,glyphMap:ii,glyphPositions:er.positions,imageMap:Wn,imagePositions:Ei.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:g.subdivisionGranularity})):ti.hasPattern&&(ti instanceof l.cI||ti instanceof l.cJ||ti instanceof l.cK)&&(w(ti.layers,this.zoom,Te,this.globalState),ti.addFeatures(g,this.tileID.canonical,Ei.patternPositions))}return this.status="done",{buckets:Object.values(Ze).filter(hi=>!hi.isEmpty()),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:er.image,imageAtlas:Ei,glyphMap:this.returnDependencies?ii:null,iconMap:this.returnDependencies?Wn:null,glyphPositions:this.returnDependencies?er.positions:null}})}}function w(re,le,pe,Te){const We=new l.F(le);for(const dt of re)dt.setGlobalState(Te),dt.recalculate(We,pe)}class O{constructor(le,pe,Te){this.actor=le,this.layerIndex=pe,this.availableImages=Te,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(le,pe){return l._(this,void 0,void 0,function*(){const Te=yield l.n(le.request,pe);try{return{vectorTile:new l.cL(new l.cM(Te.data)),rawData:Te.data,cacheControl:Te.cacheControl,expires:Te.expires}}catch(We){const dt=new Uint8Array(Te.data);let Ye=`Unable to parse the tile at ${le.request.url}, `;throw Ye+=dt[0]===31&&dt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${We.message}`,new Error(Ye)}})}loadTile(le){return l._(this,void 0,void 0,function*(){const pe=le.uid,Te=!!(le&&le.request&&le.request.collectResourceTiming)&&new l.cN(le.request),We=new C(le);this.loading[pe]=We;const dt=new AbortController;We.abort=dt;try{const Ye=yield this.loadVectorTile(le,dt);if(delete this.loading[pe],!Ye)return null;const De=Ye.rawData,Ze={};Ye.expires&&(Ze.expires=Ye.expires),Ye.cacheControl&&(Ze.cacheControl=Ye.cacheControl);const g={};if(Te){const ht=Te.finish();ht&&(g.resourceTiming=JSON.parse(JSON.stringify(ht)))}We.vectorTile=Ye.vectorTile;const mt=We.parse(Ye.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity);this.loaded[pe]=We,this.fetching[pe]={rawTileData:De,cacheControl:Ze,resourceTiming:g};try{const ht=yield mt;return l.e({rawTileData:De.slice(0)},ht,Ze,g)}finally{delete this.fetching[pe]}}catch(Ye){throw delete this.loading[pe],We.status="done",this.loaded[pe]=We,Ye}})}reloadTile(le){return l._(this,void 0,void 0,function*(){const pe=le.uid;if(!this.loaded||!this.loaded[pe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Te=this.loaded[pe];if(Te.showCollisionBoxes=le.showCollisionBoxes,Te.globalState=le.globalState,Te.status==="parsing"){const We=yield Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity);let dt;if(this.fetching[pe]){const{rawTileData:Ye,cacheControl:De,resourceTiming:Ze}=this.fetching[pe];delete this.fetching[pe],dt=l.e({rawTileData:Ye.slice(0)},We,De,Ze)}else dt=We;return dt}if(Te.status==="done"&&Te.vectorTile)return Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity)})}abortTile(le){return l._(this,void 0,void 0,function*(){const pe=this.loading,Te=le.uid;pe&&pe[Te]&&pe[Te].abort&&(pe[Te].abort.abort(),delete pe[Te])})}removeTile(le){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[le.uid]&&delete this.loaded[le.uid]})}}class U{constructor(){this.loaded={}}loadTile(le){return l._(this,void 0,void 0,function*(){const{uid:pe,encoding:Te,rawImageData:We,redFactor:dt,greenFactor:Ye,blueFactor:De,baseShift:Ze}=le,g=We.width+2,mt=We.height+2,ht=l.b(We)?new l.R({width:g,height:mt},yield l.cO(We,-1,-1,g,mt)):We,Tt=new l.cP(pe,ht,Te,dt,Ye,De,Ze);return this.loaded=this.loaded||{},this.loaded[pe]=Tt,Tt})}removeTile(le){const pe=this.loaded,Te=le.uid;pe&&pe[Te]&&delete pe[Te]}}var K,j,W=function(){if(j)return K;function re(pe,Te){if(pe.length!==0){le(pe[0],Te);for(var We=1;We<pe.length;We++)le(pe[We],!Te)}}function le(pe,Te){for(var We=0,dt=0,Ye=0,De=pe.length,Ze=De-1;Ye<De;Ze=Ye++){var g=(pe[Ye][0]-pe[Ze][0])*(pe[Ze][1]+pe[Ye][1]),mt=We+g;dt+=Math.abs(We)>=Math.abs(g)?We-mt+g:g-mt+We,We=mt}We+dt>=0!=!!Te&&pe.reverse()}return j=1,K=function pe(Te,We){var dt,Ye=Te&&Te.type;if(Ye==="FeatureCollection")for(dt=0;dt<Te.features.length;dt++)pe(Te.features[dt],We);else if(Ye==="GeometryCollection")for(dt=0;dt<Te.geometries.length;dt++)pe(Te.geometries[dt],We);else if(Ye==="Feature")pe(Te.geometry,We);else if(Ye==="Polygon")re(Te.coordinates,We);else if(Ye==="MultiPolygon")for(dt=0;dt<Te.coordinates.length;dt++)re(Te.coordinates[dt],We);return Te}}(),Y=l.cQ(W);class te extends l.cS{constructor(le,pe){super(new l.cM,0,pe,[],[]),this.feature=le,this.type=le.type,this.properties=le.tags?le.tags:{},"id"in le&&(typeof le.id=="string"?this.id=parseInt(le.id,10):typeof le.id!="number"||isNaN(le.id)||(this.id=le.id))}loadGeometry(){const le=[],pe=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const Te of pe){const We=[];for(const dt of Te)We.push(new l.P(dt[0],dt[1]));le.push(We)}return le}}class J extends l.cR{constructor(le,pe){super(new l.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=pe?pe.version:1,this.extent=pe?pe.extent:4096,this.length=le.length,this.features=le}feature(le){return new te(this.features[le],this.extent)}}function oe(re,le){le.writeVarintField(15,re.version||1),le.writeStringField(1,re.name||""),le.writeVarintField(5,re.extent||4096);const pe={keys:[],values:[],keycache:{},valuecache:{}};for(let dt=0;dt<re.length;dt++)pe.feature=re.feature(dt),le.writeMessage(2,ne,pe);const Te=pe.keys;for(const dt of Te)le.writeStringField(3,dt);const We=pe.values;for(const dt of We)le.writeMessage(4,ge,dt)}function ne(re,le){if(!re.feature)return;const pe=re.feature;pe.id!==void 0&&le.writeVarintField(1,pe.id),le.writeMessage(2,$,re),le.writeVarintField(3,pe.type),le.writeMessage(4,ce,pe)}function $(re,le){for(const pe in re.feature?.properties){let Te=re.feature.properties[pe],We=re.keycache[pe];if(Te===null)continue;We===void 0&&(re.keys.push(pe),We=re.keys.length-1,re.keycache[pe]=We),le.writeVarint(We),typeof Te!="string"&&typeof Te!="boolean"&&typeof Te!="number"&&(Te=JSON.stringify(Te));const dt=typeof Te+":"+Te;let Ye=re.valuecache[dt];Ye===void 0&&(re.values.push(Te),Ye=re.values.length-1,re.valuecache[dt]=Ye),le.writeVarint(Ye)}}function ae(re,le){return(le<<3)+(7&re)}function G(re){return re<<1^re>>31}function ce(re,le){const pe=re.loadGeometry(),Te=re.type;let We=0,dt=0;for(const Ye of pe){let De=1;Te===1&&(De=Ye.length),le.writeVarint(ae(1,De));const Ze=Te===3?Ye.length-1:Ye.length;for(let g=0;g<Ze;g++){g===1&&Te!==1&&le.writeVarint(ae(2,Ze-1));const mt=Ye[g].x-We,ht=Ye[g].y-dt;le.writeVarint(G(mt)),le.writeVarint(G(ht)),We+=mt,dt+=ht}re.type===3&&le.writeVarint(ae(7,1))}}function ge(re,le){const pe=typeof re;pe==="string"?le.writeStringField(1,re):pe==="boolean"?le.writeBooleanField(7,re):pe==="number"&&(re%1!=0?le.writeDoubleField(3,re):re<0?le.writeSVarintField(6,re):le.writeVarintField(5,re))}const ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:re=>re},we=Math.fround||(Oe=new Float32Array(1),re=>(Oe[0]=+re,Oe[0]));var Oe;class Se{constructor(le){this.options=Object.assign(Object.create(ye),le),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(le){const{log:pe,minZoom:Te,maxZoom:We}=this.options;pe&&console.time("total time");const dt=`prepare ${le.length} points`;pe&&console.time(dt),this.points=le;const Ye=[];for(let Ze=0;Ze<le.length;Ze++){const g=le[Ze];if(!g.geometry)continue;const[mt,ht]=g.geometry.coordinates,Tt=we(ze(mt)),it=we(st(ht));Ye.push(Tt,it,1/0,Ze,-1,1),this.options.reduce&&Ye.push(0)}let De=this.trees[We+1]=this._createTree(Ye);pe&&console.timeEnd(dt);for(let Ze=We;Ze>=Te;Ze--){const g=+Date.now();De=this.trees[Ze]=this._createTree(this._cluster(De,Ze)),pe&&console.log("z%d: %d clusters in %dms",Ze,De.numItems,+Date.now()-g)}return pe&&console.timeEnd("total time"),this}getClusters(le,pe){let Te=((le[0]+180)%360+360)%360-180;const We=Math.max(-90,Math.min(90,le[1]));let dt=le[2]===180?180:((le[2]+180)%360+360)%360-180;const Ye=Math.max(-90,Math.min(90,le[3]));if(le[2]-le[0]>=360)Te=-180,dt=180;else if(Te>dt){const ht=this.getClusters([Te,We,180,Ye],pe),Tt=this.getClusters([-180,We,dt,Ye],pe);return ht.concat(Tt)}const De=this.trees[this._limitZoom(pe)],Ze=De.range(ze(Te),st(Ye),ze(dt),st(We)),g=De.data,mt=[];for(const ht of Ze){const Tt=this.stride*ht;mt.push(g[Tt+5]>1?Ve(g,Tt,this.clusterProps):this.points[g[Tt+3]])}return mt}getChildren(le){const pe=this._getOriginId(le),Te=this._getOriginZoom(le),We="No cluster with the specified id.",dt=this.trees[Te];if(!dt)throw new Error(We);const Ye=dt.data;if(pe*this.stride>=Ye.length)throw new Error(We);const De=this.options.radius/(this.options.extent*Math.pow(2,Te-1)),Ze=dt.within(Ye[pe*this.stride],Ye[pe*this.stride+1],De),g=[];for(const mt of Ze){const ht=mt*this.stride;Ye[ht+4]===le&&g.push(Ye[ht+5]>1?Ve(Ye,ht,this.clusterProps):this.points[Ye[ht+3]])}if(g.length===0)throw new Error(We);return g}getLeaves(le,pe,Te){const We=[];return this._appendLeaves(We,le,pe=pe||10,Te=Te||0,0),We}getTile(le,pe,Te){const We=this.trees[this._limitZoom(le)],dt=Math.pow(2,le),{extent:Ye,radius:De}=this.options,Ze=De/Ye,g=(Te-Ze)/dt,mt=(Te+1+Ze)/dt,ht={features:[]};return this._addTileFeatures(We.range((pe-Ze)/dt,g,(pe+1+Ze)/dt,mt),We.data,pe,Te,dt,ht),pe===0&&this._addTileFeatures(We.range(1-Ze/dt,g,1,mt),We.data,dt,Te,dt,ht),pe===dt-1&&this._addTileFeatures(We.range(0,g,Ze/dt,mt),We.data,-1,Te,dt,ht),ht.features.length?ht:null}getClusterExpansionZoom(le){let pe=this._getOriginZoom(le)-1;for(;pe<=this.options.maxZoom;){const Te=this.getChildren(le);if(pe++,Te.length!==1)break;le=Te[0].properties.cluster_id}return pe}_appendLeaves(le,pe,Te,We,dt){const Ye=this.getChildren(pe);for(const De of Ye){const Ze=De.properties;if(Ze&&Ze.cluster?dt+Ze.point_count<=We?dt+=Ze.point_count:dt=this._appendLeaves(le,Ze.cluster_id,Te,We,dt):dt<We?dt++:le.push(De),le.length===Te)break}return dt}_createTree(le){const pe=new l.aI(le.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Te=0;Te<le.length;Te+=this.stride)pe.add(le[Te],le[Te+1]);return pe.finish(),pe.data=le,pe}_addTileFeatures(le,pe,Te,We,dt,Ye){for(const De of le){const Ze=De*this.stride,g=pe[Ze+5]>1;let mt,ht,Tt;if(g)mt=xe(pe,Ze,this.clusterProps),ht=pe[Ze],Tt=pe[Ze+1];else{const Dn=this.points[pe[Ze+3]];mt=Dn.properties;const[Mn,ii]=Dn.geometry.coordinates;ht=ze(Mn),Tt=st(ii)}const it={type:1,geometry:[[Math.round(this.options.extent*(ht*dt-Te)),Math.round(this.options.extent*(Tt*dt-We))]],tags:mt};let en;en=g||this.options.generateId?pe[Ze+3]:this.points[pe[Ze+3]].id,en!==void 0&&(it.id=en),Ye.features.push(it)}}_limitZoom(le){return Math.max(this.options.minZoom,Math.min(Math.floor(+le),this.options.maxZoom+1))}_cluster(le,pe){const{radius:Te,extent:We,reduce:dt,minPoints:Ye}=this.options,De=Te/(We*Math.pow(2,pe)),Ze=le.data,g=[],mt=this.stride;for(let ht=0;ht<Ze.length;ht+=mt){if(Ze[ht+2]<=pe)continue;Ze[ht+2]=pe;const Tt=Ze[ht],it=Ze[ht+1],en=le.within(Ze[ht],Ze[ht+1],De),Dn=Ze[ht+5];let Mn=Dn;for(const ii of en){const Wn=ii*mt;Ze[Wn+2]>pe&&(Mn+=Ze[Wn+5])}if(Mn>Dn&&Mn>=Ye){let ii,Wn=Tt*Dn,qi=it*Dn,er=-1;const Ei=(ht/mt<<5)+(pe+1)+this.points.length;for(const hi of en){const ti=hi*mt;if(Ze[ti+2]<=pe)continue;Ze[ti+2]=pe;const Wi=Ze[ti+5];Wn+=Ze[ti]*Wi,qi+=Ze[ti+1]*Wi,Ze[ti+4]=Ei,dt&&(ii||(ii=this._map(Ze,ht,!0),er=this.clusterProps.length,this.clusterProps.push(ii)),dt(ii,this._map(Ze,ti)))}Ze[ht+4]=Ei,g.push(Wn/Mn,qi/Mn,1/0,Ei,-1,Mn),dt&&g.push(er)}else{for(let ii=0;ii<mt;ii++)g.push(Ze[ht+ii]);if(Mn>1)for(const ii of en){const Wn=ii*mt;if(!(Ze[Wn+2]<=pe)){Ze[Wn+2]=pe;for(let qi=0;qi<mt;qi++)g.push(Ze[Wn+qi])}}}}return g}_getOriginId(le){return le-this.points.length>>5}_getOriginZoom(le){return(le-this.points.length)%32}_map(le,pe,Te){if(le[pe+5]>1){const Ye=this.clusterProps[le[pe+6]];return Te?Object.assign({},Ye):Ye}const We=this.points[le[pe+3]].properties,dt=this.options.map(We);return Te&&dt===We?Object.assign({},dt):dt}}function Ve(re,le,pe){return{type:"Feature",id:re[le+3],properties:xe(re,le,pe),geometry:{type:"Point",coordinates:[(Te=re[le],360*(Te-.5)),Ct(re[le+1])]}};var Te}function xe(re,le,pe){const Te=re[le+5],We=Te>=1e4?`${Math.round(Te/1e3)}k`:Te>=1e3?Math.round(Te/100)/10+"k":Te,dt=re[le+6],Ye=dt===-1?{}:Object.assign({},pe[dt]);return Object.assign(Ye,{cluster:!0,cluster_id:re[le+3],point_count:Te,point_count_abbreviated:We})}function ze(re){return re/360+.5}function st(re){const le=Math.sin(re*Math.PI/180),pe=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return pe<0?0:pe>1?1:pe}function Ct(re){const le=(180-360*re)*Math.PI/180;return 360*Math.atan(Math.exp(le))/Math.PI-90}function nt(re,le,pe,Te){let We=Te;const dt=le+(pe-le>>1);let Ye,De=pe-le;const Ze=re[le],g=re[le+1],mt=re[pe],ht=re[pe+1];for(let Tt=le+3;Tt<pe;Tt+=3){const it=be(re[Tt],re[Tt+1],Ze,g,mt,ht);if(it>We)Ye=Tt,We=it;else if(it===We){const en=Math.abs(Tt-dt);en<De&&(Ye=Tt,De=en)}}We>Te&&(Ye-le>3&&nt(re,le,Ye,Te),re[Ye+2]=We,pe-Ye>3&&nt(re,Ye,pe,Te))}function be(re,le,pe,Te,We,dt){let Ye=We-pe,De=dt-Te;if(Ye!==0||De!==0){const Ze=((re-pe)*Ye+(le-Te)*De)/(Ye*Ye+De*De);Ze>1?(pe=We,Te=dt):Ze>0&&(pe+=Ye*Ze,Te+=De*Ze)}return Ye=re-pe,De=le-Te,Ye*Ye+De*De}function Ne(re,le,pe,Te){const We={id:re??null,type:le,geometry:pe,tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(le==="Point"||le==="MultiPoint"||le==="LineString")tt(We,pe);else if(le==="Polygon")tt(We,pe[0]);else if(le==="MultiLineString")for(const dt of pe)tt(We,dt);else if(le==="MultiPolygon")for(const dt of pe)tt(We,dt[0]);return We}function tt(re,le){for(let pe=0;pe<le.length;pe+=3)re.minX=Math.min(re.minX,le[pe]),re.minY=Math.min(re.minY,le[pe+1]),re.maxX=Math.max(re.maxX,le[pe]),re.maxY=Math.max(re.maxY,le[pe+1])}function lt(re,le,pe,Te){if(!le.geometry)return;const We=le.geometry.coordinates;if(We&&We.length===0)return;const dt=le.geometry.type,Ye=Math.pow(pe.tolerance/((1<<pe.maxZoom)*pe.extent),2);let De=[],Ze=le.id;if(pe.promoteId?Ze=le.properties[pe.promoteId]:pe.generateId&&(Ze=Te||0),dt==="Point")kt(We,De);else if(dt==="MultiPoint")for(const g of We)kt(g,De);else if(dt==="LineString")gt(We,De,Ye,!1);else if(dt==="MultiLineString"){if(pe.lineMetrics){for(const g of We)De=[],gt(g,De,Ye,!1),re.push(Ne(Ze,"LineString",De,le.properties));return}St(We,De,Ye,!1)}else if(dt==="Polygon")St(We,De,Ye,!0);else{if(dt!=="MultiPolygon"){if(dt==="GeometryCollection"){for(const g of le.geometry.geometries)lt(re,{id:Ze,geometry:g,properties:le.properties},pe,Te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const g of We){const mt=[];St(g,mt,Ye,!0),De.push(mt)}}re.push(Ne(Ze,dt,De,le.properties))}function kt(re,le){le.push(Ut(re[0]),Fe(re[1]),0)}function gt(re,le,pe,Te){let We,dt,Ye=0;for(let Ze=0;Ze<re.length;Ze++){const g=Ut(re[Ze][0]),mt=Fe(re[Ze][1]);le.push(g,mt,0),Ze>0&&(Ye+=Te?(We*mt-g*dt)/2:Math.sqrt(Math.pow(g-We,2)+Math.pow(mt-dt,2))),We=g,dt=mt}const De=le.length-3;le[2]=1,nt(le,0,De,pe),le[De+2]=1,le.size=Math.abs(Ye),le.start=0,le.end=le.size}function St(re,le,pe,Te){for(let We=0;We<re.length;We++){const dt=[];gt(re[We],dt,pe,Te),le.push(dt)}}function Ut(re){return re/360+.5}function Fe(re){const le=Math.sin(re*Math.PI/180),pe=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return pe<0?0:pe>1?1:pe}function Ke(re,le,pe,Te,We,dt,Ye,De){if(Te/=le,dt>=(pe/=le)&&Ye<Te)return re;if(Ye<pe||dt>=Te)return null;const Ze=[];for(const g of re){const mt=g.geometry;let ht=g.type;const Tt=We===0?g.minX:g.minY,it=We===0?g.maxX:g.maxY;if(Tt>=pe&&it<Te){Ze.push(g);continue}if(it<pe||Tt>=Te)continue;let en=[];if(ht==="Point"||ht==="MultiPoint")Re(mt,en,pe,Te,We);else if(ht==="LineString")He(mt,en,pe,Te,We,!1,De.lineMetrics);else if(ht==="MultiLineString")_t(mt,en,pe,Te,We,!1);else if(ht==="Polygon")_t(mt,en,pe,Te,We,!0);else if(ht==="MultiPolygon")for(const Dn of mt){const Mn=[];_t(Dn,Mn,pe,Te,We,!0),Mn.length&&en.push(Mn)}if(en.length){if(De.lineMetrics&&ht==="LineString"){for(const Dn of en)Ze.push(Ne(g.id,ht,Dn,g.tags));continue}ht!=="LineString"&&ht!=="MultiLineString"||(en.length===1?(ht="LineString",en=en[0]):ht="MultiLineString"),ht!=="Point"&&ht!=="MultiPoint"||(ht=en.length===3?"Point":"MultiPoint"),Ze.push(Ne(g.id,ht,en,g.tags))}}return Ze.length?Ze:null}function Re(re,le,pe,Te,We){for(let dt=0;dt<re.length;dt+=3){const Ye=re[dt+We];Ye>=pe&&Ye<=Te&&Ot(le,re[dt],re[dt+1],re[dt+2])}}function He(re,le,pe,Te,We,dt,Ye){let De=bt(re);const Ze=We===0?qt:Kt;let g,mt,ht=re.start;for(let Mn=0;Mn<re.length-3;Mn+=3){const ii=re[Mn],Wn=re[Mn+1],qi=re[Mn+2],er=re[Mn+3],Ei=re[Mn+4],hi=We===0?ii:Wn,ti=We===0?er:Ei;let Wi=!1;Ye&&(g=Math.sqrt(Math.pow(ii-er,2)+Math.pow(Wn-Ei,2))),hi<pe?ti>pe&&(mt=Ze(De,ii,Wn,er,Ei,pe),Ye&&(De.start=ht+g*mt)):hi>Te?ti<Te&&(mt=Ze(De,ii,Wn,er,Ei,Te),Ye&&(De.start=ht+g*mt)):Ot(De,ii,Wn,qi),ti<pe&&hi>=pe&&(mt=Ze(De,ii,Wn,er,Ei,pe),Wi=!0),ti>Te&&hi<=Te&&(mt=Ze(De,ii,Wn,er,Ei,Te),Wi=!0),!dt&&Wi&&(Ye&&(De.end=ht+g*mt),le.push(De),De=bt(re)),Ye&&(ht+=g)}let Tt=re.length-3;const it=re[Tt],en=re[Tt+1],Dn=We===0?it:en;Dn>=pe&&Dn<=Te&&Ot(De,it,en,re[Tt+2]),Tt=De.length-3,dt&&Tt>=3&&(De[Tt]!==De[0]||De[Tt+1]!==De[1])&&Ot(De,De[0],De[1],De[2]),De.length&&le.push(De)}function bt(re){const le=[];return le.size=re.size,le.start=re.start,le.end=re.end,le}function _t(re,le,pe,Te,We,dt){for(const Ye of re)He(Ye,le,pe,Te,We,dt,!1)}function Ot(re,le,pe,Te){re.push(le,pe,Te)}function qt(re,le,pe,Te,We,dt){const Ye=(dt-le)/(Te-le);return Ot(re,dt,pe+(We-pe)*Ye,1),Ye}function Kt(re,le,pe,Te,We,dt){const Ye=(dt-pe)/(We-pe);return Ot(re,le+(Te-le)*Ye,dt,1),Ye}function on(re,le){const pe=[];for(let Te=0;Te<re.length;Te++){const We=re[Te],dt=We.type;let Ye;if(dt==="Point"||dt==="MultiPoint"||dt==="LineString")Ye=Jn(We.geometry,le);else if(dt==="MultiLineString"||dt==="Polygon"){Ye=[];for(const De of We.geometry)Ye.push(Jn(De,le))}else if(dt==="MultiPolygon"){Ye=[];for(const De of We.geometry){const Ze=[];for(const g of De)Ze.push(Jn(g,le));Ye.push(Ze)}}pe.push(Ne(We.id,dt,Ye,We.tags))}return pe}function Jn(re,le){const pe=[];pe.size=re.size,re.start!==void 0&&(pe.start=re.start,pe.end=re.end);for(let Te=0;Te<re.length;Te+=3)pe.push(re[Te]+le,re[Te+1],re[Te+2]);return pe}function Wt(re,le){if(re.transformed)return re;const pe=1<<re.z,Te=re.x,We=re.y;for(const dt of re.features){const Ye=dt.geometry,De=dt.type;if(dt.geometry=[],De===1)for(let Ze=0;Ze<Ye.length;Ze+=2)dt.geometry.push($n(Ye[Ze],Ye[Ze+1],le,pe,Te,We));else for(let Ze=0;Ze<Ye.length;Ze++){const g=[];for(let mt=0;mt<Ye[Ze].length;mt+=2)g.push($n(Ye[Ze][mt],Ye[Ze][mt+1],le,pe,Te,We));dt.geometry.push(g)}}return re.transformed=!0,re}function $n(re,le,pe,Te,We,dt){return[Math.round(pe*(re*Te-We)),Math.round(pe*(le*Te-dt))]}function On(re,le,pe,Te,We){const dt=le===We.maxZoom?0:We.tolerance/((1<<le)*We.extent),Ye={features:[],numPoints:0,numSimplified:0,numFeatures:re.length,source:null,x:pe,y:Te,z:le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const De of re)Bn(Ye,De,dt,We);return Ye}function Bn(re,le,pe,Te){const We=le.geometry,dt=le.type,Ye=[];if(re.minX=Math.min(re.minX,le.minX),re.minY=Math.min(re.minY,le.minY),re.maxX=Math.max(re.maxX,le.maxX),re.maxY=Math.max(re.maxY,le.maxY),dt==="Point"||dt==="MultiPoint")for(let De=0;De<We.length;De+=3)Ye.push(We[De],We[De+1]),re.numPoints++,re.numSimplified++;else if(dt==="LineString")In(Ye,We,re,pe,!1,!1);else if(dt==="MultiLineString"||dt==="Polygon")for(let De=0;De<We.length;De++)In(Ye,We[De],re,pe,dt==="Polygon",De===0);else if(dt==="MultiPolygon")for(let De=0;De<We.length;De++){const Ze=We[De];for(let g=0;g<Ze.length;g++)In(Ye,Ze[g],re,pe,!0,g===0)}if(Ye.length){let De=le.tags||null;if(dt==="LineString"&&Te.lineMetrics){De={};for(const g in le.tags)De[g]=le.tags[g];De.mapbox_clip_start=We.start/We.size,De.mapbox_clip_end=We.end/We.size}const Ze={geometry:Ye,type:dt==="Polygon"||dt==="MultiPolygon"?3:dt==="LineString"||dt==="MultiLineString"?2:1,tags:De};le.id!==null&&(Ze.id=le.id),re.features.push(Ze)}}function In(re,le,pe,Te,We,dt){const Ye=Te*Te;if(Te>0&&le.size<(We?Ye:Te))return void(pe.numPoints+=le.length/3);const De=[];for(let Ze=0;Ze<le.length;Ze+=3)(Te===0||le[Ze+2]>Ye)&&(pe.numSimplified++,De.push(le[Ze],le[Ze+1])),pe.numPoints++;We&&function(Ze,g){let mt=0;for(let ht=0,Tt=Ze.length,it=Tt-2;ht<Tt;it=ht,ht+=2)mt+=(Ze[ht]-Ze[it])*(Ze[ht+1]+Ze[it+1]);if(mt>0===g)for(let ht=0,Tt=Ze.length;ht<Tt/2;ht+=2){const it=Ze[ht],en=Ze[ht+1];Ze[ht]=Ze[Tt-2-ht],Ze[ht+1]=Ze[Tt-1-ht],Ze[Tt-2-ht]=it,Ze[Tt-1-ht]=en}}(De,dt),re.push(De)}const Oi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ei{constructor(le,pe){const Te=(pe=this.options=function(dt,Ye){for(const De in Ye)dt[De]=Ye[De];return dt}(Object.create(Oi),pe)).debug;if(Te&&console.time("preprocess data"),pe.maxZoom<0||pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(pe.promoteId&&pe.generateId)throw new Error("promoteId and generateId cannot be used together.");let We=function(dt,Ye){const De=[];if(dt.type==="FeatureCollection")for(let Ze=0;Ze<dt.features.length;Ze++)lt(De,dt.features[Ze],Ye,Ze);else lt(De,dt.type==="Feature"?dt:{geometry:dt},Ye);return De}(le,pe);this.tiles={},this.tileCoords=[],Te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",pe.indexMaxZoom,pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),We=function(dt,Ye){const De=Ye.buffer/Ye.extent;let Ze=dt;const g=Ke(dt,1,-1-De,De,0,-1,2,Ye),mt=Ke(dt,1,1-De,2+De,0,-1,2,Ye);return(g||mt)&&(Ze=Ke(dt,1,-De,1+De,0,-1,2,Ye)||[],g&&(Ze=on(g,1).concat(Ze)),mt&&(Ze=Ze.concat(on(mt,-1)))),Ze}(We,pe),We.length&&this.splitTile(We,0,0,0),Te&&(We.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(le,pe,Te,We,dt,Ye,De){const Ze=[le,pe,Te,We],g=this.options,mt=g.debug;for(;Ze.length;){We=Ze.pop(),Te=Ze.pop(),pe=Ze.pop(),le=Ze.pop();const ht=1<<pe,Tt=Kn(pe,Te,We);let it=this.tiles[Tt];if(!it&&(mt>1&&console.time("creation"),it=this.tiles[Tt]=On(le,pe,Te,We,g),this.tileCoords.push({z:pe,x:Te,y:We}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",pe,Te,We,it.numFeatures,it.numPoints,it.numSimplified),console.timeEnd("creation"));const Wi=`z${pe}`;this.stats[Wi]=(this.stats[Wi]||0)+1,this.total++}if(it.source=le,dt==null){if(pe===g.indexMaxZoom||it.numPoints<=g.indexMaxPoints)continue}else{if(pe===g.maxZoom||pe===dt)continue;if(dt!=null){const Wi=dt-pe;if(Te!==Ye>>Wi||We!==De>>Wi)continue}}if(it.source=null,le.length===0)continue;mt>1&&console.time("clipping");const en=.5*g.buffer/g.extent,Dn=.5-en,Mn=.5+en,ii=1+en;let Wn=null,qi=null,er=null,Ei=null,hi=Ke(le,ht,Te-en,Te+Mn,0,it.minX,it.maxX,g),ti=Ke(le,ht,Te+Dn,Te+ii,0,it.minX,it.maxX,g);le=null,hi&&(Wn=Ke(hi,ht,We-en,We+Mn,1,it.minY,it.maxY,g),qi=Ke(hi,ht,We+Dn,We+ii,1,it.minY,it.maxY,g),hi=null),ti&&(er=Ke(ti,ht,We-en,We+Mn,1,it.minY,it.maxY,g),Ei=Ke(ti,ht,We+Dn,We+ii,1,it.minY,it.maxY,g),ti=null),mt>1&&console.timeEnd("clipping"),Ze.push(Wn||[],pe+1,2*Te,2*We),Ze.push(qi||[],pe+1,2*Te,2*We+1),Ze.push(er||[],pe+1,2*Te+1,2*We),Ze.push(Ei||[],pe+1,2*Te+1,2*We+1)}}getTile(le,pe,Te){le=+le,pe=+pe,Te=+Te;const We=this.options,{extent:dt,debug:Ye}=We;if(le<0||le>24)return null;const De=1<<le,Ze=Kn(le,pe=pe+De&De-1,Te);if(this.tiles[Ze])return Wt(this.tiles[Ze],dt);Ye>1&&console.log("drilling down to z%d-%d-%d",le,pe,Te);let g,mt=le,ht=pe,Tt=Te;for(;!g&&mt>0;)mt--,ht>>=1,Tt>>=1,g=this.tiles[Kn(mt,ht,Tt)];return g&&g.source?(Ye>1&&(console.log("found parent tile z%d-%d-%d",mt,ht,Tt),console.time("drilling down")),this.splitTile(g.source,mt,ht,Tt,le,pe,Te),Ye>1&&console.timeEnd("drilling down"),this.tiles[Ze]?Wt(this.tiles[Ze],dt):null):null}}function Kn(re,le,pe){return 32*((1<<re)*pe+le)+re}class je extends O{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(le,pe){return l._(this,void 0,void 0,function*(){const Te=le.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const We=this._geoJSONIndex.getTile(Te.z,Te.x,Te.y);if(!We)return null;const dt=new J(We.features,{version:2,extent:l.$});let Ye=function(De){const Ze=new l.cM;return function(g,mt){for(const ht in g.layers)mt.writeMessage(3,oe,g.layers[ht])}(De,Ze),Ze.finish()}(dt);return Ye.byteOffset===0&&Ye.byteLength===Ye.buffer.byteLength||(Ye=new Uint8Array(Ye)),{vectorTile:dt,rawData:Ye.buffer}})}loadData(le){return l._(this,void 0,void 0,function*(){var pe;(pe=this._pendingRequest)===null||pe===void 0||pe.abort();const Te=!!(le&&le.request&&le.request.collectResourceTiming)&&new l.cN(le.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(le,this._pendingRequest);const We=yield this._pendingData;this._geoJSONIndex=le.cluster?new Se(function({superclusterOptions:Ye,clusterProperties:De}){if(!De||!Ye)return Ye;const Ze={},g={},mt={accumulated:null,zoom:0},ht={properties:null},Tt=Object.keys(De);for(const it of Tt){const[en,Dn]=De[it],Mn=l.cT(Dn),ii=l.cT(typeof en=="string"?[en,["accumulated"],["get",it]]:en);Ze[it]=Mn.value,g[it]=ii.value}return Ye.map=it=>{ht.properties=it;const en={};for(const Dn of Tt)en[Dn]=Ze[Dn].evaluate(mt,ht);return en},Ye.reduce=(it,en)=>{ht.properties=en;for(const Dn of Tt)mt.accumulated=it[Dn],it[Dn]=g[Dn].evaluate(mt,ht)},Ye}(le)).load(We.features):function(Ye,De){return new ei(Ye,De)}(We,le.geojsonVtOptions),this.loaded={};const dt={data:We};if(Te){const Ye=Te.finish();Ye&&(dt.resourceTiming={},dt.resourceTiming[le.source]=JSON.parse(JSON.stringify(Ye)))}return dt}catch(We){if(delete this._pendingRequest,l.cy(We))return{abandoned:!0};throw We}})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(le){const pe=this.loaded;return pe&&pe[le.uid]?super.reloadTile(le):this.loadTile(le)}loadAndProcessGeoJSON(le,pe){return l._(this,void 0,void 0,function*(){let Te=yield this.loadGeoJSON(le,pe);if(delete this._pendingRequest,typeof Te!="object")throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`);if(Y(Te,!0),le.filter){const We=l.cT(le.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(We.result==="error")throw new Error(We.value.map(Ye=>`${Ye.key}: ${Ye.message}`).join(", "));Te={type:"FeatureCollection",features:Te.features.filter(Ye=>We.value.evaluate({zoom:0},Ye))}}return Te})}loadGeoJSON(le,pe){return l._(this,void 0,void 0,function*(){const{promoteId:Te}=le;if(le.request){const We=yield l.j(le.request,pe);return this._dataUpdateable=l.cV(We.data,Te)?l.cU(We.data,Te):void 0,We.data}if(typeof le.data=="string")try{const We=JSON.parse(le.data);return this._dataUpdateable=l.cV(We,Te)?l.cU(We,Te):void 0,We}catch{throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`)}if(!le.dataDiff)throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${le.source}`);return l.cW(this._dataUpdateable,le.dataDiff,Te),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(le){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(le){return this._geoJSONIndex.getClusterExpansionZoom(le.clusterId)}getClusterChildren(le){return this._geoJSONIndex.getChildren(le.clusterId)}getClusterLeaves(le){return this._geoJSONIndex.getLeaves(le.clusterId,le.limit,le.offset)}}class de{constructor(le){this.self=le,this.actor=new l.J(le),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(pe,Te)=>{if(this.externalWorkerSourceTypes[pe])throw new Error(`Worker source with name "${pe}" already registered.`);this.externalWorkerSourceTypes[pe]=Te},this.self.addProtocol=l.cA,this.self.removeProtocol=l.cB,this.self.registerRTLTextPlugin=pe=>{l.cX.setMethods(pe)},this.actor.registerMessageHandler("LDT",(pe,Te)=>this._getDEMWorkerSource(pe,Te.source).loadTile(Te)),this.actor.registerMessageHandler("RDT",(pe,Te)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(pe,Te.source).removeTile(Te)})),this.actor.registerMessageHandler("GCEZ",(pe,Te)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(pe,Te.type,Te.source).getClusterExpansionZoom(Te)})),this.actor.registerMessageHandler("GCC",(pe,Te)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(pe,Te.type,Te.source).getClusterChildren(Te)})),this.actor.registerMessageHandler("GCL",(pe,Te)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(pe,Te.type,Te.source).getClusterLeaves(Te)})),this.actor.registerMessageHandler("LD",(pe,Te)=>this._getWorkerSource(pe,Te.type,Te.source).loadData(Te)),this.actor.registerMessageHandler("GD",(pe,Te)=>this._getWorkerSource(pe,Te.type,Te.source).getData()),this.actor.registerMessageHandler("LT",(pe,Te)=>this._getWorkerSource(pe,Te.type,Te.source).loadTile(Te)),this.actor.registerMessageHandler("RT",(pe,Te)=>this._getWorkerSource(pe,Te.type,Te.source).reloadTile(Te)),this.actor.registerMessageHandler("AT",(pe,Te)=>this._getWorkerSource(pe,Te.type,Te.source).abortTile(Te)),this.actor.registerMessageHandler("RMT",(pe,Te)=>this._getWorkerSource(pe,Te.type,Te.source).removeTile(Te)),this.actor.registerMessageHandler("RS",(pe,Te)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[pe]||!this.workerSources[pe][Te.type]||!this.workerSources[pe][Te.type][Te.source])return;const We=this.workerSources[pe][Te.type][Te.source];delete this.workerSources[pe][Te.type][Te.source],We.removeSource!==void 0&&We.removeSource(Te)})),this.actor.registerMessageHandler("RM",pe=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[pe],delete this.availableImages[pe],delete this.workerSources[pe],delete this.demWorkerSources[pe]})),this.actor.registerMessageHandler("SR",(pe,Te)=>l._(this,void 0,void 0,function*(){this.referrer=Te})),this.actor.registerMessageHandler("SRPS",(pe,Te)=>this._syncRTLPluginState(pe,Te)),this.actor.registerMessageHandler("IS",(pe,Te)=>l._(this,void 0,void 0,function*(){this.self.importScripts(Te)})),this.actor.registerMessageHandler("SI",(pe,Te)=>this._setImages(pe,Te)),this.actor.registerMessageHandler("UL",(pe,Te)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(pe).update(Te.layers,Te.removedIds)})),this.actor.registerMessageHandler("SL",(pe,Te)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(pe).replace(Te)}))}_setImages(le,pe){return l._(this,void 0,void 0,function*(){this.availableImages[le]=pe;for(const Te in this.workerSources[le]){const We=this.workerSources[le][Te];for(const dt in We)We[dt].availableImages=pe}})}_syncRTLPluginState(le,pe){return l._(this,void 0,void 0,function*(){return yield l.cX.syncState(pe,this.self.importScripts)})}_getAvailableImages(le){let pe=this.availableImages[le];return pe||(pe=[]),pe}_getLayerIndex(le){let pe=this.layerIndexes[le];return pe||(pe=this.layerIndexes[le]=new o),pe}_getWorkerSource(le,pe,Te){if(this.workerSources[le]||(this.workerSources[le]={}),this.workerSources[le][pe]||(this.workerSources[le][pe]={}),!this.workerSources[le][pe][Te]){const We={sendAsync:(dt,Ye)=>(dt.targetMapId=le,this.actor.sendAsync(dt,Ye))};switch(pe){case"vector":this.workerSources[le][pe][Te]=new O(We,this._getLayerIndex(le),this._getAvailableImages(le));break;case"geojson":this.workerSources[le][pe][Te]=new je(We,this._getLayerIndex(le),this._getAvailableImages(le));break;default:this.workerSources[le][pe][Te]=new this.externalWorkerSourceTypes[pe](We,this._getLayerIndex(le),this._getAvailableImages(le))}}return this.workerSources[le][pe][Te]}_getDEMWorkerSource(le,pe){return this.demWorkerSources[le]||(this.demWorkerSources[le]={}),this.demWorkerSources[le][pe]||(this.demWorkerSources[le][pe]=new U),this.demWorkerSources[le][pe]}}return l.i(self)&&(self.worker=new de(self)),de}),r("index",["exports","./shared"],function(l,o){var p="5.7.1";function C(){var I=new o.A(4);return o.A!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I}let w,O;const U={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(I,s,f){const _=requestAnimationFrame(k=>{S(),s(k)}),{unsubscribe:S}=o.s(I.signal,"abort",()=>{S(),cancelAnimationFrame(_),f(o.c())},!1)},frameAsync(I){return new Promise((s,f)=>{this.frame(I,s,f)})},getImageData(I,s=0){return this.getImageCanvasContext(I).getImageData(-s,-s,I.width+2*s,I.height+2*s)},getImageCanvasContext(I){const s=window.document.createElement("canvas"),f=s.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return s.width=I.width,s.height=I.height,f.drawImage(I,0,0,I.width,I.height),f},resolveURL:I=>(w||(w=document.createElement("a")),w.href=I,w.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(O==null&&(O=matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};class K{static testProp(s){if(!K.docStyle)return s[0];for(let f=0;f<s.length;f++)if(s[f]in K.docStyle)return s[f];return s[0]}static create(s,f,_){const S=window.document.createElement(s);return f!==void 0&&(S.className=f),_&&_.appendChild(S),S}static createNS(s,f){return window.document.createElementNS(s,f)}static disableDrag(){K.docStyle&&K.selectProp&&(K.userSelect=K.docStyle[K.selectProp],K.docStyle[K.selectProp]="none")}static enableDrag(){K.docStyle&&K.selectProp&&(K.docStyle[K.selectProp]=K.userSelect)}static setTransform(s,f){s.style[K.transformProp]=f}static addEventListener(s,f,_,S={}){s.addEventListener(f,_,"passive"in S?S:S.capture)}static removeEventListener(s,f,_,S={}){s.removeEventListener(f,_,"passive"in S?S:S.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",K.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",K.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",K.suppressClickInternal,!0)},0)}static getScale(s){const f=s.getBoundingClientRect();return{x:f.width/s.offsetWidth||1,y:f.height/s.offsetHeight||1,boundingClientRect:f}}static getPoint(s,f,_){const S=f.boundingClientRect;return new o.P((_.clientX-S.left)/f.x-s.clientLeft,(_.clientY-S.top)/f.y-s.clientTop)}static mousePos(s,f){const _=K.getScale(s);return K.getPoint(s,_,f)}static touchPos(s,f){const _=[],S=K.getScale(s);for(let k=0;k<f.length;k++)_.push(K.getPoint(s,S,f[k]));return _}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){const f=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),_=f.querySelectorAll("script");for(const S of _)S.remove();return K.clean(f),f.innerHTML}static isPossiblyDangerous(s,f){const _=f.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!_.includes("javascript:")&&!_.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){const f=s.children;for(const _ of f)K.removeAttributes(_),K.clean(_)}static removeAttributes(s){for(const{name:f,value:_}of s.attributes)K.isPossiblyDangerous(f,_)&&s.removeAttribute(f)}}K.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,K.selectProp=K.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),K.transformProp=K.testProp(["transform","WebkitTransform"]);const j={supported:!1,testSupport:function(I){!te&&Y&&(J?oe(I):W=I)}};let W,Y,te=!1,J=!1;function oe(I){const s=I.createTexture();I.bindTexture(I.TEXTURE_2D,s);try{if(I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,Y),I.isContextLost())return;j.supported=!0}catch{}I.deleteTexture(s),te=!0}var ne;typeof document<"u"&&(Y=document.createElement("img"),Y.onload=()=>{W&&oe(W),W=null,J=!0},Y.onerror=()=>{te=!0,W=null},Y.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(I){let s,f,_,S;I.resetRequestQueue=()=>{s=[],f=0,_=0,S={}},I.addThrottleControl=X=>{const he=_++;return S[he]=X,he},I.removeThrottleControl=X=>{delete S[X],z()},I.getImage=(X,he,me=!0)=>new Promise((Ee,Me)=>{j.supported&&(X.headers||(X.headers={}),X.headers.accept="image/webp,*/*"),o.e(X,{type:"image"}),s.push({abortController:he,requestParameters:X,supportImageRefresh:me,state:"queued",onError:Ue=>{Me(Ue)},onSuccess:Ue=>{Ee(Ue)}}),z()});const k=X=>o._(this,void 0,void 0,function*(){X.state="running";const{requestParameters:he,supportImageRefresh:me,onError:Ee,onSuccess:Me,abortController:Ue}=X,Xe=me===!1&&!o.i(self)&&!o.g(he.url)&&(!he.headers||Object.keys(he.headers).reduce((ft,xt)=>ft&&xt==="accept",!0));f++;const ut=Xe?q(he,Ue):o.m(he,Ue);try{const ft=yield ut;delete X.abortController,X.state="completed",ft.data instanceof HTMLImageElement||o.b(ft.data)?Me(ft):ft.data&&Me({data:yield(ct=ft.data,typeof createImageBitmap=="function"?o.f(ct):o.h(ct)),cacheControl:ft.cacheControl,expires:ft.expires})}catch(ft){delete X.abortController,Ee(ft)}finally{f--,z()}var ct}),z=()=>{const X=(()=>{for(const he of Object.keys(S))if(S[he]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let he=f;he<X&&s.length>0;he++){const me=s.shift();me.abortController.signal.aborted?he--:k(me)}},q=(X,he)=>new Promise((me,Ee)=>{const Me=new Image,Ue=X.url,Xe=X.credentials;Xe&&Xe==="include"?Me.crossOrigin="use-credentials":(Xe&&Xe==="same-origin"||!o.d(Ue))&&(Me.crossOrigin="anonymous"),he.signal.addEventListener("abort",()=>{Me.src="",Ee(o.c())}),Me.fetchPriority="high",Me.onload=()=>{Me.onerror=Me.onload=null,me({data:Me})},Me.onerror=()=>{Me.onerror=Me.onload=null,he.signal.aborted||Ee(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Me.src=Ue})}(ne||(ne={})),ne.resetRequestQueue();class ${constructor(s){this._transformRequestFn=s??null}transformRequest(s,f){return this._transformRequestFn&&this._transformRequestFn(s,f)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function ae(I){const s=[];if(typeof I=="string")s.push({id:"default",url:I});else if(I&&I.length>0){const f=[];for(const{id:_,url:S}of I){const k=`${_}${S}`;f.indexOf(k)===-1&&(f.push(k),s.push({id:_,url:S}))}}return s}function G(I,s,f){try{const _=new URL(I);return _.pathname+=`${s}${f}`,_.toString()}catch{throw new Error(`Invalid sprite URL "${I}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ce(I){const{userImage:s}=I;return!!(s&&s.render&&s.render())&&(I.data.replace(new Uint8Array(s.data.buffer)),!0)}class ge extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:f,promiseResolve:_}of this.requestors)_(this._getImagesForIds(f));this.requestors=[]}}getImage(s){const f=this.images[s];if(f&&!f.data&&f.spriteData){const _=f.spriteData;f.data=new o.R({width:_.width,height:_.height},_.context.getImageData(_.x,_.y,_.width,_.height).data),f.spriteData=null}return f}addImage(s,f){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,f)&&(this.images[s]=f)}_validate(s,f){let _=!0;const S=f.data||f.spriteData;return this._validateStretch(f.stretchX,S&&S.width)||(this.fire(new o.k(new Error(`Image "${s}" has invalid "stretchX" value`))),_=!1),this._validateStretch(f.stretchY,S&&S.height)||(this.fire(new o.k(new Error(`Image "${s}" has invalid "stretchY" value`))),_=!1),this._validateContent(f.content,f)||(this.fire(new o.k(new Error(`Image "${s}" has invalid "content" value`))),_=!1),_}_validateStretch(s,f){if(!s)return!0;let _=0;for(const S of s){if(S[0]<_||S[1]<S[0]||f<S[1])return!1;_=S[1]}return!0}_validateContent(s,f){if(!s)return!0;if(s.length!==4)return!1;const _=f.spriteData,S=_&&_.width||f.data.width,k=_&&_.height||f.data.height;return!(s[0]<0||S<s[0]||s[1]<0||k<s[1]||s[2]<0||S<s[2]||s[3]<0||k<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,f,_=!0){const S=this.getImage(s);if(_&&(S.data.width!==f.data.width||S.data.height!==f.data.height))throw new Error(`size mismatch between old image (${S.data.width}x${S.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=S.version+1,this.images[s]=f,this.updatedImages[s]=!0}removeImage(s){const f=this.images[s];delete this.images[s],delete this.patterns[s],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((f,_)=>{let S=!0;if(!this.isLoaded())for(const k of s)this.images[k]||(S=!1);this.isLoaded()||S?f(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:f})})}_getImagesForIds(s){const f={};for(const _ of s){let S=this.getImage(_);S||(this.fire(new o.l("styleimagemissing",{id:_})),S=this.getImage(_)),S?f[_]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,textFitWidth:S.textFitWidth,textFitHeight:S.textFitHeight,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:o.w(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return f}getPixelSize(){const{width:s,height:f}=this.atlasImage;return{width:s,height:f}}getPattern(s){const f=this.patterns[s],_=this.getImage(s);if(!_)return null;if(f&&f.position.version===_.version)return f.position;if(f)f.position.version=_.version;else{const S={w:_.data.width+2,h:_.data.height+2,x:0,y:0},k=new o.I(S,_);this.patterns[s]={bin:S,position:k}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const f=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(s,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const k in this.patterns)s.push(this.patterns[k].bin);const{w:f,h:_}=o.p(s),S=this.atlasImage;S.resize({width:f||1,height:_||1});for(const k in this.patterns){const{bin:z}=this.patterns[k],q=z.x+1,X=z.y+1,he=this.getImage(k).data,me=he.width,Ee=he.height;o.R.copy(he,S,{x:0,y:0},{x:q,y:X},{width:me,height:Ee}),o.R.copy(he,S,{x:0,y:Ee-1},{x:q,y:X-1},{width:me,height:1}),o.R.copy(he,S,{x:0,y:0},{x:q,y:X+Ee},{width:me,height:1}),o.R.copy(he,S,{x:me-1,y:0},{x:q-1,y:X},{width:1,height:Ee}),o.R.copy(he,S,{x:0,y:0},{x:q+me,y:X},{width:1,height:Ee})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const f of s){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const _=this.getImage(f);_||o.w(`Image with ID: "${f}" was not found`),ce(_)&&this.updateImage(f,_)}}}const ye=1e20;function we(I,s,f,_,S,k,z,q,X){for(let he=s;he<s+_;he++)Oe(I,f*k+he,k,S,z,q,X);for(let he=f;he<f+S;he++)Oe(I,he*k+s,1,_,z,q,X)}function Oe(I,s,f,_,S,k,z){k[0]=0,z[0]=-ye,z[1]=ye,S[0]=I[s];for(let q=1,X=0,he=0;q<_;q++){S[q]=I[s+q*f];const me=q*q;do{const Ee=k[X];he=(S[q]-S[Ee]+me-Ee*Ee)/(q-Ee)/2}while(he<=z[X]&&--X>-1);X++,k[X]=q,z[X]=he,z[X+1]=ye}for(let q=0,X=0;q<_;q++){for(;z[X+1]<q;)X++;const he=k[X],me=q-he;I[s+q*f]=S[he]+me*me}}class Se{constructor(s,f,_){this.requestManager=s,this.localIdeographFontFamily=f,this.entries={},this.lang=_}setURL(s){this.url=s}getGlyphs(s){return o._(this,void 0,void 0,function*(){const f=[];for(const k in s)for(const z of s[k])f.push(this._getAndCacheGlyphsPromise(k,z));const _=yield Promise.all(f),S={};for(const{stack:k,id:z,glyph:q}of _)S[k]||(S[k]={}),S[k][z]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics};return S})}_getAndCacheGlyphsPromise(s,f){return o._(this,void 0,void 0,function*(){let _=this.entries[s];_||(_=this.entries[s]={glyphs:{},requests:{},ranges:{}});let S=_.glyphs[f];if(S!==void 0)return{stack:s,id:f,glyph:S};if(S=this._tinySDF(_,s,f),S)return _.glyphs[f]=S,{stack:s,id:f,glyph:S};const k=Math.floor(f/256);if(256*k>65535)throw new Error("glyphs > 65535 not supported");if(_.ranges[k])return{stack:s,id:f,glyph:S};if(!this.url)throw new Error("glyphsUrl is not set");if(!_.requests[k]){const q=Se.loadGlyphRange(s,k,this.url,this.requestManager);_.requests[k]=q}const z=yield _.requests[k];for(const q in z)this._doesCharSupportLocalGlyph(+q)||(_.glyphs[+q]=z[+q]);return _.ranges[k]=!0,{stack:s,id:f,glyph:z[f]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||o.u["CJK Unified Ideographs"](s)||o.u["Hangul Syllables"](s)||o.u.Hiragana(s)||o.u.Katakana(s)||o.u["CJK Symbols and Punctuation"](s)||o.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,f,_){const S=this.localIdeographFontFamily;if(!S||!this._doesCharSupportLocalGlyph(_))return;let k=s.tinySDF;if(!k){let q="400";/bold/i.test(f)?q="900":/medium/i.test(f)?q="500":/light/i.test(f)&&(q="200"),k=s.tinySDF=new Se.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:S,fontWeight:q})}const z=k.draw(String.fromCharCode(_));return{id:_,bitmap:new o.q({width:z.width||60,height:z.height||60},z.data),metrics:{width:z.glyphWidth/2||24,height:z.glyphHeight/2||24,left:z.glyphLeft/2+.5||0,top:z.glyphTop/2-27.5||-8,advance:z.glyphAdvance/2||24,isDoubleResolution:!0}}}}Se.loadGlyphRange=function(I,s,f,_){return o._(this,void 0,void 0,function*(){const S=256*s,k=S+255,z=_.transformRequest(f.replace("{fontstack}",I).replace("{range}",`${S}-${k}`),"Glyphs"),q=yield o.n(z,new AbortController);if(!q||!q.data)throw new Error(`Could not load glyph range. range: ${s}, ${S}-${k}`);const X={};for(const he of o.o(q.data))X[he.id]=he;return X})},Se.TinySDF=class{constructor({fontSize:I=24,buffer:s=3,radius:f=8,cutoff:_=.25,fontFamily:S="sans-serif",fontWeight:k="normal",fontStyle:z="normal",lang:q=null}={}){this.buffer=s,this.cutoff=_,this.radius=f,this.lang=q;const X=this.size=I+4*s,he=this._createCanvas(X),me=this.ctx=he.getContext("2d",{willReadFrequently:!0});me.font=`${z} ${k} ${I}px ${S}`,me.textBaseline="alphabetic",me.textAlign="left",me.fillStyle="black",this.gridOuter=new Float64Array(X*X),this.gridInner=new Float64Array(X*X),this.f=new Float64Array(X),this.z=new Float64Array(X+1),this.v=new Uint16Array(X)}_createCanvas(I){const s=document.createElement("canvas");return s.width=s.height=I,s}draw(I){const{width:s,actualBoundingBoxAscent:f,actualBoundingBoxDescent:_,actualBoundingBoxLeft:S,actualBoundingBoxRight:k}=this.ctx.measureText(I),z=Math.ceil(f),q=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(k-S))),X=Math.min(this.size-this.buffer,z+Math.ceil(_)),he=q+2*this.buffer,me=X+2*this.buffer,Ee=Math.max(he*me,0),Me=new Uint8ClampedArray(Ee),Ue={data:Me,width:he,height:me,glyphWidth:q,glyphHeight:X,glyphTop:z,glyphLeft:0,glyphAdvance:s};if(q===0||X===0)return Ue;const{ctx:Xe,buffer:ut,gridInner:ct,gridOuter:ft}=this;this.lang&&(Xe.lang=this.lang),Xe.clearRect(ut,ut,q,X),Xe.fillText(I,ut,ut+z);const xt=Xe.getImageData(ut,ut,q,X);ft.fill(ye,0,Ee),ct.fill(0,0,Ee);for(let yt=0;yt<X;yt++)for(let wt=0;wt<q;wt++){const Pt=xt.data[4*(yt*q+wt)+3]/255;if(Pt===0)continue;const Ft=(yt+ut)*he+wt+ut;if(Pt===1)ft[Ft]=0,ct[Ft]=ye;else{const Bt=.5-Pt;ft[Ft]=Bt>0?Bt*Bt:0,ct[Ft]=Bt<0?Bt*Bt:0}}we(ft,0,0,he,me,he,this.f,this.v,this.z),we(ct,ut,ut,q,X,he,this.f,this.v,this.z);for(let yt=0;yt<Ee;yt++){const wt=Math.sqrt(ft[yt])-Math.sqrt(ct[yt]);Me[yt]=Math.round(255-255*(wt/this.radius+this.cutoff))}return Ue}};class Ve{constructor(){this.specification=o.v.light.position}possiblyEvaluate(s,f){return o.B(s.expression.evaluate(f))}interpolate(s,f,_){return{x:o.C.number(s.x,f.x,_),y:o.C.number(s.y,f.y,_),z:o.C.number(s.z,f.z,_)}}}let xe;class ze extends o.E{constructor(s){super(),xe=xe||new o.r({anchor:new o.D(o.v.light.anchor),position:new Ve,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.t(xe),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,f={}){if(!this._validate(o.x,s,f))for(const _ in s){const S=s[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),S):this._transitionable.setValue(_,S)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,f,_){return(!_||_.validate!==!1)&&o.y(this,s.call(o.z,{value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const st=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Ct extends o.E{constructor(s){super(),this._transitionable=new o.t(st),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0))}setSky(s,f={}){if(!this._validate(o.G,s,f)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const _ in s){const S=s[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),S):this._transitionable.setValue(_,S)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,f,_={}){return _?.validate!==!1&&o.y(this,s.call(o.z,o.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class nt{constructor(s,f){this.width=s,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,f){const _=s.join(",")+String(f);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(s,f)),this.dashEntry[_]}getDashRanges(s,f,_){const S=[];let k=s.length%2==1?-s[s.length-1]*_:0,z=s[0]*_,q=!0;S.push({left:k,right:z,isDash:q,zeroLength:s[0]===0});let X=s[0];for(let he=1;he<s.length;he++){q=!q;const me=s[he];k=X*_,X+=me,z=X*_,S.push({left:k,right:z,isDash:q,zeroLength:me===0})}return S}addRoundDash(s,f,_){const S=f/2;for(let k=-_;k<=_;k++){const z=this.width*(this.nextRow+_+k);let q=0,X=s[q];for(let he=0;he<this.width;he++){he/X.right>1&&(X=s[++q]);const me=Math.abs(he-X.left),Ee=Math.abs(he-X.right),Me=Math.min(me,Ee);let Ue;const Xe=k/_*(S+1);if(X.isDash){const ut=S-Math.abs(Xe);Ue=Math.sqrt(Me*Me+ut*ut)}else Ue=S-Math.sqrt(Me*Me+Xe*Xe);this.data[z+he]=Math.max(0,Math.min(255,Ue+128))}}}addRegularDash(s){for(let q=s.length-1;q>=0;--q){const X=s[q],he=s[q+1];X.zeroLength?s.splice(q,1):he&&he.isDash===X.isDash&&(he.left=X.left,s.splice(q,1))}const f=s[0],_=s[s.length-1];f.isDash===_.isDash&&(f.left=_.left-this.width,_.right=f.right+this.width);const S=this.width*this.nextRow;let k=0,z=s[k];for(let q=0;q<this.width;q++){q/z.right>1&&(z=s[++k]);const X=Math.abs(q-z.left),he=Math.abs(q-z.right),me=Math.min(X,he);this.data[S+q]=Math.max(0,Math.min(255,(z.isDash?me:-me)+128))}}addDash(s,f){const _=f?7:0,S=2*_+1;if(this.nextRow+S>this.height)return o.w("LineAtlas out of space"),null;let k=0;for(let q=0;q<s.length;q++)k+=s[q];if(k!==0){const q=this.width/k,X=this.getDashRanges(s,this.width,q);f?this.addRoundDash(X,q,_):this.addRegularDash(X)}const z={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:k};return this.nextRow+=S,this.dirty=!0,z}bind(s){const f=s.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}const be="maplibre_preloaded_worker_pool";class Ne{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Ne.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[be]}numActive(){return Object.keys(this.active).length}}const tt=Math.floor(U.hardwareConcurrency/2);let lt,kt;function gt(){return lt||(lt=new Ne),lt}Ne.workerCount=o.H(globalThis)?Math.max(Math.min(tt,3),1):1;class St{constructor(s,f){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=f;const _=this.workerPool.acquire(f);for(let S=0;S<_.length;S++){const k=new o.J(_[S],f);k.name=`Worker ${S}`,this.actors.push(k)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,f){const _=[];for(const S of this.actors)_.push(S.sendAsync({type:s,data:f}));return Promise.all(_)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(f=>{f.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,f){for(const _ of this.actors)_.registerMessageHandler(s,f)}}function Ut(){return kt||(kt=new St(gt(),o.K),kt.registerMessageHandler("GR",(I,s,f)=>o.m(s,f))),kt}function Fe(I,s){const f=o.L();return o.M(f,f,[1,1,0]),o.N(f,f,[.5*I.width,.5*I.height,1]),I.calculatePosMatrix?o.O(f,f,I.calculatePosMatrix(s.toUnwrapped())):f}function Ke(I,s,f,_,S,k,z){var q;const X=function(Me,Ue,Xe){if(Me)for(const ut of Me){const ct=Ue[ut];if(ct&&ct.source===Xe&&ct.type==="fill-extrusion")return!0}else for(const ut in Ue){const ct=Ue[ut];if(ct.source===Xe&&ct.type==="fill-extrusion")return!0}return!1}((q=S?.layers)!==null&&q!==void 0?q:null,s,I.id),he=k.maxPitchScaleFactor(),me=I.tilesIn(_,he,X);me.sort(Re);const Ee=[];for(const Me of me)Ee.push({wrappedTileID:Me.tileID.wrapped().key,queryResults:Me.tile.queryRenderedFeatures(s,f,I._state,Me.queryGeometry,Me.cameraQueryGeometry,Me.scale,S,k,he,Fe(I.transform,Me.tileID),z?(Ue,Xe)=>z(Me.tileID,Ue,Xe):void 0)});return function(Me,Ue){for(const Xe in Me)for(const ut of Me[Xe])He(ut,Ue);return Me}(function(Me){const Ue={},Xe={};for(const ut of Me){const ct=ut.queryResults,ft=ut.wrappedTileID,xt=Xe[ft]=Xe[ft]||{};for(const yt in ct){const wt=ct[yt],Pt=xt[yt]=xt[yt]||{},Ft=Ue[yt]=Ue[yt]||[];for(const Bt of wt)Pt[Bt.featureIndex]||(Pt[Bt.featureIndex]=!0,Ft.push(Bt))}}return Ue}(Ee),I)}function Re(I,s){const f=I.tileID,_=s.tileID;return f.overscaledZ-_.overscaledZ||f.canonical.y-_.canonical.y||f.wrap-_.wrap||f.canonical.x-_.canonical.x}function He(I,s){const f=I.feature,_=s.getFeatureState(f.layer["source-layer"],f.id);f.source=f.layer.source,f.layer["source-layer"]&&(f.sourceLayer=f.layer["source-layer"]),f.state=_}function bt(I,s,f){return o._(this,void 0,void 0,function*(){let _=I;if(I.url?_=(yield o.j(s.transformRequest(I.url,"Source"),f)).data:yield U.frameAsync(f),!_)return null;const S=o.Q(o.e(_,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(S.vectorLayerIds=_.vector_layers.map(k=>k.id)),S})}class _t{constructor(s,f){s&&(f?this.setSouthWest(s).setNorthEast(f):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof o.S?new o.S(s.lng,s.lat):o.S.convert(s),this}setSouthWest(s){return this._sw=s instanceof o.S?new o.S(s.lng,s.lat):o.S.convert(s),this}extend(s){const f=this._sw,_=this._ne;let S,k;if(s instanceof o.S)S=s,k=s;else{if(!(s instanceof _t))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(_t.convert(s)):this.extend(o.S.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(o.S.convert(s)):this;if(S=s._sw,k=s._ne,!S||!k)return this}return f||_?(f.lng=Math.min(S.lng,f.lng),f.lat=Math.min(S.lat,f.lat),_.lng=Math.max(k.lng,_.lng),_.lat=Math.max(k.lat,_.lat)):(this._sw=new o.S(S.lng,S.lat),this._ne=new o.S(k.lng,k.lat)),this}getCenter(){return new o.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.S(this.getWest(),this.getNorth())}getSouthEast(){return new o.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:f,lat:_}=o.S.convert(s);let S=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&S}static convert(s){return s instanceof _t?s:s&&new _t(s)}static fromLngLat(s,f=0){const _=360*f/40075017,S=_/Math.cos(Math.PI/180*s.lat);return new _t(new o.S(s.lng-S,s.lat-_),new o.S(s.lng+S,s.lat+_))}adjustAntiMeridian(){const s=new o.S(this._sw.lng,this._sw.lat),f=new o.S(this._ne.lng,this._ne.lat);return new _t(s,s.lng>f.lng?new o.S(f.lng+360,f.lat):f)}}class Ot{constructor(s,f,_){this.bounds=_t.convert(this.validateBounds(s)),this.minzoom=f||0,this.maxzoom=_||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const f=Math.pow(2,s.z),_=Math.floor(o.V(this.bounds.getWest())*f),S=Math.floor(o.U(this.bounds.getNorth())*f),k=Math.ceil(o.V(this.bounds.getEast())*f),z=Math.ceil(o.U(this.bounds.getSouth())*f);return s.x>=_&&s.x<k&&s.y>=S&&s.y<z}}class qt extends o.E{constructor(s,f,_,S){if(super(),this.id=s,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.Q(f,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield bt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(o.e(this,s),s.bounds&&(this.tileBounds=new Ot(s.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new o.k(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(s){return o._(this,void 0,void 0,function*(){const f=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(f,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};_.request.collectResourceTiming=this._collectResourceTiming;let S="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((k,z)=>{s.reloadPromise={resolve:k,reject:z}})}else s.actor=this.dispatcher.getActor(),S="LT";s.abortController=new AbortController;try{const k=yield s.actor.sendAsync({type:S,data:_},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,k)}catch(k){if(delete s.abortController,s.aborted)return;if(k&&k.status!==404)throw k;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,f){if(f&&f.resourceTiming&&(s.resourceTiming=f.resourceTiming),f&&this.map._refreshExpiredTiles&&s.setExpiryData(f),s.loadVectorData(f,this.map.painter),s.reloadPromise){const _=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(_.resolve).catch(_.reject)}}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Kt extends o.E{constructor(s,f,_,S){super(),this.id=s,this.dispatcher=_,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},f),o.e(this,o.Q(f,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(s=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const f=yield bt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,f&&(o.e(this,f),f.bounds&&(this.tileBounds=new Ot(f.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(f){this._tileJSONRequest=null,this.fire(new o.k(f))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return o.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return o._(this,void 0,void 0,function*(){const f=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const _=yield ne.getImage(this.map._requestManager.transformRequest(f,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(_&&_.data){this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&s.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const S=this.map.painter.context,k=S.gl,z=_.data;s.texture=this.map.painter.getTileTexture(z.width),s.texture?s.texture.update(z,{useMipmap:!0}):(s.texture=new o.T(S,z,k.RGBA,{useMipmap:!0}),s.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(_){if(delete s.abortController,s.aborted)s.state="unloaded";else if(_)throw s.state="errored",_}})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class on extends Kt{constructor(s,f,_,S){super(s,f,_,S),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(s){return o._(this,void 0,void 0,function*(){const f=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_=this.map._requestManager.transformRequest(f,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const S=yield ne.getImage(_,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(S&&S.data){const k=S.data;this.map._refreshExpiredTiles&&(S.cacheControl||S.expires)&&s.setExpiryData({cacheControl:S.cacheControl,expires:S.expires});const z=o.b(k)&&o.W()?k:yield this.readImageNow(k),q={type:this.type,uid:s.uid,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const X=yield s.actor.sendAsync({type:"LDT",data:q});s.dem=X,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(S){if(delete s.abortController,s.aborted)s.state="unloaded";else if(S)throw s.state="errored",S}})}readImageNow(s){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.X()){const f=s.width+2,_=s.height+2;try{return new o.R({width:f,height:_},yield o.Y(s,-1,-1,f,_))}catch{}}return U.getImageData(s,1)})}_getNeighboringTiles(s){const f=s.canonical,_=Math.pow(2,f.z),S=(f.x-1+_)%_,k=f.x===0?s.wrap-1:s.wrap,z=(f.x+1+_)%_,q=f.x+1===_?s.wrap+1:s.wrap,X={};return X[new o.Z(s.overscaledZ,k,f.z,S,f.y).key]={backfilled:!1},X[new o.Z(s.overscaledZ,q,f.z,z,f.y).key]={backfilled:!1},f.y>0&&(X[new o.Z(s.overscaledZ,k,f.z,S,f.y-1).key]={backfilled:!1},X[new o.Z(s.overscaledZ,s.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},X[new o.Z(s.overscaledZ,q,f.z,z,f.y-1).key]={backfilled:!1}),f.y+1<_&&(X[new o.Z(s.overscaledZ,k,f.z,S,f.y+1).key]={backfilled:!1},X[new o.Z(s.overscaledZ,s.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},X[new o.Z(s.overscaledZ,q,f.z,z,f.y+1).key]={backfilled:!1}),X}unloadTile(s){return o._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class Jn extends o.E{constructor(s,f,_,S){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:f.data},this.actor=_.getActor(),this.setEventedParent(S),this._data=f.data,this._options=o.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId,f.clusterMaxZoom!==void 0&&this.maxzoom<=f.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${f.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(f.buffer!==void 0?f.buffer:128),tolerance:this._pixelsToTileUnits(f.tolerance!==void 0?f.tolerance:.375),extent:o.$,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(f.clusterMaxZoom),minPoints:Math.max(2,f.clusterMinPoints||2),extent:o.$,radius:this._pixelsToTileUnits(f.clusterRadius||50),log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(o.$/this.tileSize)}_getClusterMaxZoom(s){const f=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${f}"`),f}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._pendingWorkerUpdate={data:s},this._updateWorkerData(),this}updateData(s){return this._pendingWorkerUpdate.diff=o.a0(this._pendingWorkerUpdate.diff,s),this._updateWorkerData(),this}getData(){return o._(this,void 0,void 0,function*(){const s=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map(f=>f.coordinates).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const s=new _t,f=yield this.getData();let _;switch(f.type){case"FeatureCollection":_=f.features.map(S=>this.getCoordinatesFromGeometry(S.geometry)).flat(1/0);break;case"Feature":_=this.getCoordinatesFromGeometry(f.geometry);break;default:_=this.getCoordinatesFromGeometry(f)}if(_.length==0)return s;for(let S=0;S<_.length-1;S+=2)s.extend([_[S],_[S+1]]);return s})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,f,_){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:f,offset:_}})}_updateWorkerData(){return o._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:s,diff:f}=this._pendingWorkerUpdate;if(!s&&!f)return void o.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const _=o.e({type:this.type},this.workerOptions);s?(typeof s=="string"?(_.request=this.map._requestManager.transformRequest(U.resolveURL(s),"Source"),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(s),this._pendingWorkerUpdate.data=void 0):f&&(_.dataDiff=f,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const S=yield this.actor.sendAsync({type:"LD",data:_});if(this._isUpdatingWorker=!1,this._removed||S.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));this._data=S.data;let k=null;S.resourceTiming&&S.resourceTiming[this.id]&&(k=S.resourceTiming[this.id].slice(0));const z={dataType:"source"};this._collectResourceTiming&&k&&k.length>0&&o.e(z,{resourceTiming:k}),this.fire(new o.l("data",Object.assign(Object.assign({},z),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},z),{sourceDataType:"content"})))}catch(S){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(S))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(s){return o._(this,void 0,void 0,function*(){const f=s.actor?"RT":"LT";s.actor=this.actor;const _={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};s.abortController=new AbortController;const S=yield this.actor.sendAsync({type:f,data:_},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(S,this.map.painter,f==="RT")})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Wt extends o.E{constructor(s,f,_,S){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=_,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=f}load(s){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const f=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,f&&f.data&&(this.image=f.data,s&&(this.coordinates=s),this._finishLoading())}catch(f){this._request=null,this._loaded=!0,this.fire(new o.k(f))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const f=s.map(o.a1.fromLngLat);var _;return this.tileID=function(S){const k=o.a2.fromPoints(S),z=k.width(),q=k.height(),X=Math.max(z,q),he=Math.max(0,Math.floor(-Math.log(X)/Math.LN2)),me=Math.pow(2,he);return new o.a4(he,Math.floor((k.minX+k.maxX)/2*me),Math.floor((k.minY+k.maxY)/2*me))}(f),this.terrainTileRanges=this._getOverlappingTileRanges(f),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=f.map(S=>this.tileID.getTilePoint(S)._round()),this.flippedWindingOrder=((_=this.tileCoords)[1].x-_[0].x)*(_[2].y-_[0].y)-(_[1].y-_[0].y)*(_[2].x-_[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,f=s.gl;this.texture||(this.texture=new o.T(s,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let _=!1;for(const S in this.tiles){const k=this.tiles[S];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,_=!0)}_&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){const{minX:f,minY:_,maxX:S,maxY:k}=o.a2.fromPoints(s),z={};for(let q=0;q<=o.a3;q++){const X=Math.pow(2,q),he=Math.floor(f*X),me=Math.floor(_*X),Ee=Math.floor(S*X),Me=Math.floor(k*X);z[q]={minTileX:he,minTileY:me,maxTileX:Ee,maxTileY:Me}}return z}}class $n extends Wt{constructor(s,f,_,S){super(s,f,_,S),this.roundZoom=!0,this.type="video",this.options=f}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const f of s.urls)this.urls.push(this.map._requestManager.transformRequest(f,"Source").url);try{const f=yield o.a5(this.urls);if(this._loaded=!0,!f)return;this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(f){this.fire(new o.k(f))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const f=this.video.seekable;s<f.start(0)||s>f.end(0)?this.fire(new o.k(new o.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,f=s.gl;this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(s,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let _=!1;for(const S in this.tiles){const k=this.tiles[S];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,_=!0)}_&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class On extends Wt{constructor(s,f,_,S){super(s,f,_,S),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(k=>!Array.isArray(k)||k.length!==2||k.some(z=>typeof z!="number"))||this.fire(new o.k(new o.a6(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a6(`sources.${s}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new o.k(new o.a6(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a6(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a6(`sources.${s}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,_=f.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(f,this.canvas,_.RGBA,{premultiply:!0});let S=!1;for(const k in this.tiles){const z=this.tiles[k];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,S=!0)}S&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const Bn={},In=I=>{switch(I){case"geojson":return Jn;case"image":return Wt;case"raster":return Kt;case"raster-dem":return on;case"vector":return qt;case"video":return $n;case"canvas":return On}return Bn[I]},Oi="RTLPluginLoaded";class ei extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ut()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(f=>{throw this.status="error",f})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return o._(this,arguments,void 0,function*(f,_=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=U.resolveURL(f),!this.url)throw new Error(`requested url ${f} is invalid`);if(this.status==="unavailable"){if(!_)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(Oi))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Kn=null;function je(){return Kn||(Kn=new ei),Kn}class de{constructor(s,f){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=o.a7(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const f=s+this.timeAdded;f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,f,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(S,k){const z={};if(!k)return z;for(const q of S){const X=q.layerIds.map(he=>k.getLayer(he)).filter(Boolean);if(X.length!==0){q.layers=X,q.stateDependentLayerIds&&(q.stateDependentLayers=q.stateDependentLayerIds.map(he=>X.filter(me=>me.id===he)[0]));for(const he of X)z[he.id]=q}}return z}(s.buckets,f?.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const k=this.buckets[S];if(k instanceof o.a9){if(this.hasSymbolBuckets=!0,!_)break;k.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const k=this.buckets[S];if(k instanceof o.a9&&k.hasRTLText){this.hasRTLText=!0,je().lazyLoad();break}}this.queryPadding=0;for(const S in this.buckets){const k=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(S).queryRadius(k))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new o.a8}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const _ in this.buckets){const S=this.buckets[_];S.uploadPending()&&S.upload(s)}const f=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(s,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(s,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,f,_,S,k,z,q,X,he,me,Ee){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:k,scale:z,tileSize:this.tileSize,pixelPosMatrix:me,transform:X,params:q,queryPadding:this.queryPadding*he,getElevation:Ee},s,f,_):{}}querySourceFeatures(s,f){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const S=_.loadVTLayers(),k=f&&f.sourceLayer?f.sourceLayer:"",z=S._geojsonTileLayer||S[k];if(!z)return;const q=o.aa(f&&f.filter),{z:X,x:he,y:me}=this.tileID.canonical,Ee={z:X,x:he,y:me};for(let Me=0;Me<z.length;Me++){const Ue=z.feature(Me);if(q.needGeometry){const ct=o.ab(Ue,!0);if(!q.filter(new o.F(this.tileID.overscaledZ),ct,this.tileID.canonical))continue}else if(!q.filter(new o.F(this.tileID.overscaledZ),Ue))continue;const Xe=_.getId(Ue,k),ut=new o.ac(Ue,X,he,me,Xe);ut.tile=Ee,s.push(ut)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const f=this.expirationTime;if(s.cacheControl){const _=o.ad(s.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const _=Date.now();let S=!1;if(this.expirationTime>_)S=!1;else if(f)if(this.expirationTime<f)S=!0;else{const k=this.expirationTime-f;k?this.expirationTime=_+Math.max(k,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!f.style.hasLayer(S))continue;const k=this.buckets[S],z=k.layers[0].sourceLayer||"_geojsonTileLayer",q=_[z],X=s[z];if(!q||!X||Object.keys(X).length===0)continue;k.update(X,q,this.imageAtlas&&this.imageAtlas.patternPositions||{});const he=f&&f.style&&f.style.getLayer(S);he&&(this.queryPadding=Math.max(this.queryPadding,he.queryRadius(k)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=U.now()+s}setDependencies(s,f){const _={};for(const S of f)_[S]=!0;this.dependencies[s]=_}hasDependency(s,f){for(const _ of s){const S=this.dependencies[_];if(S){for(const k of f)if(S[k])return!0}}return!1}}class re{constructor(s,f){this.max=s,this.onRemove=f,this.reset()}reset(){for(const s in this.data)for(const f of this.data[s])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(s,f,_){const S=s.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const k={value:f,timeout:void 0};if(_!==void 0&&(k.timeout=setTimeout(()=>{this.remove(s,k)},_)),this.data[S].push(k),this.order.push(S),this.order.length>this.max){const z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const f=this.data[s].shift();return f.timeout&&clearTimeout(f.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),f.value}getByKey(s){const f=this.data[s];return f?f[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,f){if(!this.has(s))return this;const _=s.wrapped().key,S=f===void 0?0:this.data[_].indexOf(f),k=this.data[_][S];return this.data[_].splice(S,1),k.timeout&&clearTimeout(k.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(k.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(s){const f=[];for(const _ in this.data)for(const S of this.data[_])s(S.value)||f.push(S);for(const _ of f)this.remove(_.value.tileID,_)}}class le{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,f,_){const S=String(f);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][S]=this.stateChanges[s][S]||{},o.e(this.stateChanges[s][S],_),this.deletedStates[s]===null){this.deletedStates[s]={};for(const k in this.state[s])k!==S&&(this.deletedStates[s][k]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][S]===null){this.deletedStates[s][S]={};for(const k in this.state[s][S])_[k]||(this.deletedStates[s][S][k]=null)}else for(const k in _)this.deletedStates[s]&&this.deletedStates[s][S]&&this.deletedStates[s][S][k]===null&&delete this.deletedStates[s][S][k]}removeFeatureState(s,f,_){if(this.deletedStates[s]===null)return;const S=String(f);if(this.deletedStates[s]=this.deletedStates[s]||{},_&&f!==void 0)this.deletedStates[s][S]!==null&&(this.deletedStates[s][S]=this.deletedStates[s][S]||{},this.deletedStates[s][S][_]=null);else if(f!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][S])for(_ in this.deletedStates[s][S]={},this.stateChanges[s][S])this.deletedStates[s][S][_]=null;else this.deletedStates[s][S]=null;else this.deletedStates[s]=null}getState(s,f){const _=String(f),S=o.e({},(this.state[s]||{})[_],(this.stateChanges[s]||{})[_]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const k=this.deletedStates[s][f];if(k===null)return{};for(const z in k)delete S[z]}return S}initializeTileState(s,f){s.setFeatureState(this.state,f)}coalesceChanges(s,f){const _={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const k={};for(const z in this.stateChanges[S])this.state[S][z]||(this.state[S][z]={}),o.e(this.state[S][z],this.stateChanges[S][z]),k[z]=this.state[S][z];_[S]=k}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const k={};if(this.deletedStates[S]===null)for(const z in this.state[S])k[z]={},this.state[S][z]={};else for(const z in this.deletedStates[S]){if(this.deletedStates[S][z]===null)this.state[S][z]={};else for(const q of Object.keys(this.deletedStates[S][z]))delete this.state[S][z][q];k[z]=this.state[S][z]}_[S]=_[S]||{},o.e(_[S],k)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const S in s)s[S].setFeatureState(_,f)}}const pe=89.25;function Te(I,s){const f=o.ah(s.lat,-o.ai,o.ai);return new o.P(o.V(s.lng)*I,o.U(f)*I)}function We(I,s){return new o.a1(s.x/I,s.y/I).toLngLat()}function dt(I){return I.cameraToCenterDistance*Math.min(.85*Math.tan(o.ae(90-I.pitch)),Math.tan(o.ae(pe-I.pitch)))}function Ye(I,s){const f=I.canonical,_=s/o.af(f.z),S=f.x+Math.pow(2,f.z)*I.wrap,k=o.ag(new Float64Array(16));return o.M(k,k,[S*_,f.y*_,0]),o.N(k,k,[_/o.$,_/o.$,1]),k}function De(I,s,f,_,S){const k=o.a1.fromLngLat(I,s),z=S*o.aj(1,I.lat),q=z*Math.cos(o.ae(f)),X=Math.sqrt(z*z-q*q),he=X*Math.sin(o.ae(-_)),me=X*Math.cos(o.ae(-_));return new o.a1(k.x+he,k.y+me,k.z+q)}function Ze(I,s,f){const _=s.intersectsFrustum(I);if(!f||_===0)return _;const S=s.intersectsPlane(f);return S===0?0:_===2&&S===2?2:1}function g(I,s,f){let _=0;const S=(f-s)/10;for(let k=0;k<10;k++)_+=S*Math.pow(Math.cos(s+(k+.5)/10*(f-s)),I);return _}function mt(I,s){return function(f,_,S,k,z){const q=2*((I-1)/o.ak(Math.cos(o.ae(pe-z))/Math.cos(o.ae(pe)))-1),X=Math.acos(S/k),he=2*g(q-1,0,o.ae(z/2)),me=Math.min(o.ae(pe),X+o.ae(z/2)),Ee=g(q-1,Math.min(me,X-o.ae(z/2)),me),Me=Math.atan(_/S),Ue=Math.hypot(_,S);let Xe=f;return Xe+=o.ak(k/Ue/Math.max(.5,Math.cos(o.ae(z/2)))),Xe+=q*o.ak(Math.cos(Me))/2,Xe-=o.ak(Math.max(1,Ee/he/s))/2,Xe}}const ht=mt(9.314,3);function Tt(I,s){const f=(s.roundZoom?Math.round:Math.floor)(I.zoom+o.ak(I.tileSize/s.tileSize));return Math.max(0,f)}function it(I,s){const f=I.getCameraFrustum(),_=I.getClippingPlane(),S=I.screenPointToMercatorCoordinate(I.getCameraPoint()),k=o.a1.fromLngLat(I.center,I.elevation);S.z=k.z+Math.cos(I.pitchInRadians)*I.cameraToCenterDistance/I.worldSize;const z=I.getCoveringTilesDetailsProvider(),q=z.allowVariableZoom(I,s),X=Tt(I,s),he=s.minzoom||0,me=s.maxzoom!==void 0?s.maxzoom:I.maxZoom,Ee=Math.min(Math.max(0,X),me),Me=Math.pow(2,Ee),Ue=[Me*S.x,Me*S.y,0],Xe=[Me*k.x,Me*k.y,0],ut=Math.hypot(k.x-S.x,k.y-S.y),ct=Math.abs(k.z-S.z),ft=Math.hypot(ut,ct),xt=Pt=>({zoom:0,x:0,y:0,wrap:Pt,fullyVisible:!1}),yt=[],wt=[];if(I.renderWorldCopies&&z.allowWorldCopies())for(let Pt=1;Pt<=3;Pt++)yt.push(xt(-Pt)),yt.push(xt(Pt));for(yt.push(xt(0));yt.length>0;){const Pt=yt.pop(),Ft=Pt.x,Bt=Pt.y;let Yt=Pt.fullyVisible;const dn={x:Ft,y:Bt,z:Pt.zoom},Xt=z.getTileBoundingVolume(dn,Pt.wrap,I.elevation,s);if(!Yt){const Qn=Ze(f,Xt,_);if(Qn===0)continue;Yt=Qn===2}const nn=z.distanceToTile2d(S.x,S.y,dn,Xt);let un=X;q&&(un=(s.calculateTileZoom||ht)(I.zoom+o.ak(I.tileSize/s.tileSize),nn,ct,ft,I.fov)),un=(s.roundZoom?Math.round:Math.floor)(un),un=Math.max(0,un);const qn=Math.min(un,me);if(Pt.wrap=z.getWrap(k,dn,Pt.wrap),Pt.zoom>=qn){if(Pt.zoom<he)continue;const Qn=Ee-Pt.zoom,Tn=Ue[0]-.5-(Ft<<Qn),xi=Ue[1]-.5-(Bt<<Qn),cr=s.reparseOverscaled?Math.max(Pt.zoom,un):Pt.zoom;wt.push({tileID:new o.Z(Pt.zoom===me?cr:Pt.zoom,Pt.wrap,Pt.zoom,Ft,Bt),distanceSq:o.al([Xe[0]-.5-Ft,Xe[1]-.5-Bt]),tileDistanceToCamera:Math.sqrt(Tn*Tn+xi*xi)})}else for(let Qn=0;Qn<4;Qn++)yt.push({zoom:Pt.zoom+1,x:(Ft<<1)+Qn%2,y:(Bt<<1)+(Qn>>1),wrap:Pt.wrap,fullyVisible:Yt})}return wt.sort((Pt,Ft)=>Pt.distanceSq-Ft.distanceSq).map(Pt=>Pt.tileID)}const en=o.a2.fromPoints([new o.P(0,0),new o.P(o.$,o.$)]);class Dn extends o.E{constructor(s,f,_){super(),this.id=s,this.dispatcher=_,this.on("data",S=>this._dataHandler(S)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((S,k,z,q)=>{const X=new(In(k.type))(S,k,z,q);if(X.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${X.id}`);return X})(s,f,_,this),this._tiles={},this._cache=new re(0,S=>this._unloadTile(S)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new le,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const f=this._tiles[s];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,f,_){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,f,_)}catch(S){s.state="errored",S.status!==404?this._source.fire(new o.k(S,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new o.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const _=this._tiles[f];_.upload(s),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(Mn).map(s=>s.key)}getRenderableIds(s){const f=[];for(const _ in this._tiles)this._isIdRenderable(_,s)&&f.push(this._tiles[_]);return s?f.sort((_,S)=>{const k=_.tileID,z=S.tileID,q=new o.P(k.canonical.x,k.canonical.y)._rotate(-this.transform.bearingInRadians),X=new o.P(z.canonical.x,z.canonical.y)._rotate(-this.transform.bearingInRadians);return k.overscaledZ-z.overscaledZ||X.y-q.y||X.x-q.x}).map(_=>_.tileID.key):f.map(_=>_.tileID).sort(Mn).map(_=>_.key)}hasRenderableParent(s){const f=this.findLoadedParent(s,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(s,f){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(f||!this._tiles[s].holdingForFade())}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const f in this._tiles)s?this._reloadTile(f,"expired"):this._tiles[f].state!=="errored"&&this._reloadTile(f,"reloading")}}_reloadTile(s,f){return o._(this,void 0,void 0,function*(){const _=this._tiles[s];_&&(_.state!=="loading"&&(_.state=f),yield this._loadTile(_,s,f))})}_tileLoaded(s,f,_){s.timeAdded=U.now(),_==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(f,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const f=this.getRenderableIds();for(let S=0;S<f.length;S++){const k=f[S];if(s.neighboringTiles&&s.neighboringTiles[k]){const z=this.getTileByID(k);_(s,z),_(z,s)}}function _(S,k){S.needsHillshadePrepare=!0,S.needsTerrainPrepare=!0;let z=k.tileID.canonical.x-S.tileID.canonical.x;const q=k.tileID.canonical.y-S.tileID.canonical.y,X=Math.pow(2,S.tileID.canonical.z),he=k.tileID.key;z===0&&q===0||Math.abs(q)>1||(Math.abs(z)>1&&(Math.abs(z+X)===1?z+=X:Math.abs(z-X)===1&&(z-=X)),k.dem&&S.dem&&(S.dem.backfillBorder(k.dem,z,q),S.neighboringTiles&&S.neighboringTiles[he]&&(S.neighboringTiles[he].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,f,_,S){for(const k in this._tiles){let z=this._tiles[k];if(S[k]||!z.hasData()||z.tileID.overscaledZ<=f||z.tileID.overscaledZ>_)continue;let q=z.tileID;for(;z&&z.tileID.overscaledZ>f+1;){const he=z.tileID.scaledTo(z.tileID.overscaledZ-1);z=this._tiles[he.key],z&&z.hasData()&&(q=he)}let X=q;for(;X.overscaledZ>f;)if(X=X.scaledTo(X.overscaledZ-1),s[X.key]||s[X.canonical.key]){S[q.key]=q;break}}}findLoadedParent(s,f){if(s.key in this._loadedParentTiles){const _=this._loadedParentTiles[s.key];return _&&_.tileID.overscaledZ>=f?_:null}for(let _=s.overscaledZ-1;_>=f;_--){const S=s.scaledTo(_),k=this._getLoadedTile(S);if(k)return k}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){const f=this._tiles[s.key];return f&&f.hasData()?f:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const f=Math.ceil(s.width/this._source.tileSize)+1,_=Math.ceil(s.height/this._source.tileSize)+1,S=Math.floor(f*_*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(k)}handleWrapJump(s){const f=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,f){const _={};for(const S in this._tiles){const k=this._tiles[S];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+f),_[k.tileID.key]=k}this._tiles=_;for(const S in this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(const S in this._tiles)this._setTileReloadTimer(S,this._tiles[S])}}_updateCoveredAndRetainedTiles(s,f,_,S,k,z){const q={},X={},he=Object.keys(s),me=U.now();for(const Ee of he){const Me=s[Ee],Ue=this._tiles[Ee];if(!Ue||Ue.fadeEndTime!==0&&Ue.fadeEndTime<=me)continue;const Xe=this.findLoadedParent(Me,f),ut=this.findLoadedSibling(Me),ct=Xe||ut||null;ct&&(this._addTile(ct.tileID),q[ct.tileID.key]=ct.tileID),X[Ee]=Me}this._retainLoadedChildren(X,S,_,s);for(const Ee in q)s[Ee]||(this._coveredTiles[Ee]=!0,s[Ee]=q[Ee]);if(z){const Ee={},Me={};for(const Ue of k)this._tiles[Ue.key].hasData()?Ee[Ue.key]=Ue:Me[Ue.key]=Ue;for(const Ue in Me){const Xe=Me[Ue].children(this._source.maxzoom);this._tiles[Xe[0].key]&&this._tiles[Xe[1].key]&&this._tiles[Xe[2].key]&&this._tiles[Xe[3].key]&&(Ee[Xe[0].key]=s[Xe[0].key]=Xe[0],Ee[Xe[1].key]=s[Xe[1].key]=Xe[1],Ee[Xe[2].key]=s[Xe[2].key]=Xe[2],Ee[Xe[3].key]=s[Xe[3].key]=Xe[3],delete Me[Ue])}for(const Ue in Me){const Xe=Me[Ue],ut=this.findLoadedParent(Xe,this._source.minzoom),ct=this.findLoadedSibling(Xe),ft=ut||ct||null;if(ft){Ee[ft.tileID.key]=s[ft.tileID.key]=ft.tileID;for(const xt in Ee)Ee[xt].isChildOf(ft.tileID)&&delete Ee[xt]}}for(const Ue in this._tiles)Ee[Ue]||(this._coveredTiles[Ue]=!0)}}update(s,f){if(!this._sourceLoaded||this._paused)return;let _;this.transform=s,this.terrain=f,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(me=>new o.Z(me.canonical.z,me.wrap,me.canonical.z,me.canonical.x,me.canonical.y)):(_=it(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(_=_.filter(me=>this._source.hasTile(me)))):_=[];const S=Tt(s,this._source),k=Math.max(S-Dn.maxOverzooming,this._source.minzoom),z=Math.max(S+Dn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const me={};for(const Ee of _)if(Ee.canonical.z>this._source.minzoom){const Me=Ee.scaledTo(Ee.canonical.z-1);me[Me.key]=Me;const Ue=Ee.scaledTo(Math.max(this._source.minzoom,Math.min(Ee.canonical.z,5)));me[Ue.key]=Ue}_=_.concat(Object.values(me))}const q=_.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,q&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const X=this._updateRetainedTiles(_,S);ii(this._source.type)&&this._updateCoveredAndRetainedTiles(X,k,z,S,_,f);for(const me in X)this._tiles[me].clearFadeHold();const he=o.am(this._tiles,X);for(const me of he){const Ee=this._tiles[me];Ee.hasSymbolBuckets&&!Ee.holdingForFade()?Ee.setHoldDuration(this.map._fadeDuration):Ee.hasSymbolBuckets&&!Ee.symbolFadeFinished()||this._removeTile(me)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,f){var _;const S={},k={},z=Math.max(f-Dn.maxOverzooming,this._source.minzoom),q=Math.max(f+Dn.maxUnderzooming,this._source.minzoom),X={};for(const he of s){const me=this._addTile(he);S[he.key]=he,me.hasData()||f<this._source.maxzoom&&(X[he.key]=he)}this._retainLoadedChildren(X,f,q,S);for(const he of s){let me=this._tiles[he.key];if(me.hasData())continue;if(f+1>this._source.maxzoom){const Me=he.children(this._source.maxzoom)[0],Ue=this.getTile(Me);if(Ue&&Ue.hasData()){S[Me.key]=Me;continue}}else{const Me=he.children(this._source.maxzoom);if(S[Me[0].key]&&S[Me[1].key]&&S[Me[2].key]&&S[Me[3].key])continue}let Ee=me.wasRequested();for(let Me=he.overscaledZ-1;Me>=z;--Me){const Ue=he.scaledTo(Me);if(k[Ue.key])break;if(k[Ue.key]=!0,me=this.getTile(Ue),!me&&Ee&&(me=this._addTile(Ue)),me){const Xe=me.hasData();if((Xe||!(!((_=this.map)===null||_===void 0)&&_.cancelPendingTileRequestsWhileZooming)||Ee)&&(S[Ue.key]=Ue),Ee=me.wasRequested(),Xe)break}}}return S}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const f=[];let _,S=this._tiles[s].tileID;for(;S.overscaledZ>0;){if(S.key in this._loadedParentTiles){_=this._loadedParentTiles[S.key];break}f.push(S.key);const k=S.scaledTo(S.overscaledZ-1);if(_=this._getLoadedTile(k),_)break;S=k}for(const k of f)this._loadedParentTiles[k]=_}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const s in this._tiles){const f=this._tiles[s].tileID,_=this._getLoadedTile(f);this._loadedSiblingTiles[f.key]=_}}_addTile(s){let f=this._tiles[s.key];if(f)return f;f=this._cache.getAndRemove(s),f&&(this._setTileReloadTimer(s.key,f),f.tileID=s,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,f)));const _=f;return f||(f=new de(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(f,s.key,f.state)),f.uses++,this._tiles[s.key]=f,_||this._source.fire(new o.l("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(s,f){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const _=f.getExpiryTimeout();_&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},_))}refreshTiles(s){for(const f in this._tiles)(this._isIdRenderable(f)||this._tiles[f].state=="errored")&&s.some(_=>_.equals(this._tiles[f].tileID.canonical))&&this._reloadTile(f,"expired")}_removeTile(s){const f=this._tiles[s];f&&(f.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}_dataHandler(s){const f=s.sourceDataType;s.dataType==="source"&&f==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&f==="content"&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,f,_){const S=[],k=this.transform;if(!k)return S;const z=k.getCoveringTilesDetailsProvider().allowWorldCopies(),q=_?k.getCameraQueryGeometry(s):s,X=Ue=>k.screenPointToMercatorCoordinate(Ue,this.terrain),he=this.transformBbox(s,X,!z),me=this.transformBbox(q,X,!z),Ee=this.getIds(),Me=o.a2.fromPoints(me);for(let Ue=0;Ue<Ee.length;Ue++){const Xe=this._tiles[Ee[Ue]];if(Xe.holdingForFade())continue;const ut=z?[Xe.tileID]:[Xe.tileID.unwrapTo(-1),Xe.tileID.unwrapTo(0)],ct=Math.pow(2,k.zoom-Xe.tileID.overscaledZ),ft=f*Xe.queryPadding*o.$/Xe.tileSize/ct;for(const xt of ut){const yt=Me.map(wt=>xt.getTilePoint(new o.a1(wt.x,wt.y)));if(yt.expandBy(ft),yt.intersects(en)){const wt=he.map(Ft=>xt.getTilePoint(Ft)),Pt=me.map(Ft=>xt.getTilePoint(Ft));S.push({tile:Xe,tileID:z?xt:xt.unwrapTo(0),queryGeometry:wt,cameraQueryGeometry:Pt,scale:ct})}}}return S}transformBbox(s,f,_){let S=s.map(f);if(_){const k=o.a2.fromPoints(s);k.shrinkBy(.001*Math.min(k.width(),k.height()));const z=k.map(f);o.a2.fromPoints(S).covers(z)||(S=S.map(q=>q.x>.5?new o.a1(q.x-1,q.y,q.z):q))}return S}getVisibleCoordinates(s){const f=this.getRenderableIds(s).map(_=>this._tiles[_].tileID);return this.transform&&this.transform.populateCache(f),f}hasTransition(){if(this._source.hasTransition())return!0;if(ii(this._source.type)){const s=U.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=s)return!0}return!1}setFeatureState(s,f,_){this._state.updateState(s=s||"_geojsonTileLayer",f,_)}removeFeatureState(s,f,_){this._state.removeFeatureState(s=s||"_geojsonTileLayer",f,_)}getFeatureState(s,f){return this._state.getState(s=s||"_geojsonTileLayer",f)}setDependencies(s,f,_){const S=this._tiles[s];S&&S.setDependencies(f,_)}reloadTilesForDependencies(s,f){for(const _ in this._tiles)this._tiles[_].hasDependency(s,f)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(s,f))}}function Mn(I,s){const f=Math.abs(2*I.wrap)-+(I.wrap<0),_=Math.abs(2*s.wrap)-+(s.wrap<0);return I.overscaledZ-s.overscaledZ||_-f||s.canonical.y-I.canonical.y||s.canonical.x-I.canonical.x}function ii(I){return I==="raster"||I==="image"||I==="video"}Dn.maxOverzooming=10,Dn.maxUnderzooming=3;class Wn{constructor(s,f){this.reset(s,f)}reset(s,f){this.points=s||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=o.ah(s,0,1);let f=1,_=this._distances[f];const S=s*this.paddedLength+this.padding;for(;_<S&&f<this._distances.length;)_=this._distances[++f];const k=f-1,z=this._distances[k],q=_-z,X=q>0?(S-z)/q:0;return this.points[k].mult(1-X).add(this.points[f].mult(X))}}function qi(I,s){let f=!0;return I==="always"||I!=="never"&&s!=="never"||(f=!1),f}class er{constructor(s,f,_){const S=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(s/_),this.yCellCount=Math.ceil(f/_);for(let z=0;z<this.xCellCount*this.yCellCount;z++)S.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=f,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,f,_,S,k){this._forEachCell(f,_,S,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(f),this.bboxes.push(_),this.bboxes.push(S),this.bboxes.push(k)}insertCircle(s,f,_,S){this._forEachCell(f-S,_-S,f+S,_+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(f),this.circles.push(_),this.circles.push(S)}_insertBoxCell(s,f,_,S,k,z){this.boxCells[k].push(z)}_insertCircleCell(s,f,_,S,k,z){this.circleCells[k].push(z)}_query(s,f,_,S,k,z,q){if(_<0||s>this.width||S<0||f>this.height)return[];const X=[];if(s<=0&&f<=0&&this.width<=_&&this.height<=S){if(k)return[{key:null,x1:s,y1:f,x2:_,y2:S}];for(let he=0;he<this.boxKeys.length;he++)X.push({key:this.boxKeys[he],x1:this.bboxes[4*he],y1:this.bboxes[4*he+1],x2:this.bboxes[4*he+2],y2:this.bboxes[4*he+3]});for(let he=0;he<this.circleKeys.length;he++){const me=this.circles[3*he],Ee=this.circles[3*he+1],Me=this.circles[3*he+2];X.push({key:this.circleKeys[he],x1:me-Me,y1:Ee-Me,x2:me+Me,y2:Ee+Me})}}else this._forEachCell(s,f,_,S,this._queryCell,X,{hitTest:k,overlapMode:z,seenUids:{box:{},circle:{}}},q);return X}query(s,f,_,S){return this._query(s,f,_,S,!1,null)}hitTest(s,f,_,S,k,z){return this._query(s,f,_,S,!0,k,z).length>0}hitTestCircle(s,f,_,S,k){const z=s-_,q=s+_,X=f-_,he=f+_;if(q<0||z>this.width||he<0||X>this.height)return!1;const me=[];return this._forEachCell(z,X,q,he,this._queryCellCircle,me,{hitTest:!0,overlapMode:S,circle:{x:s,y:f,radius:_},seenUids:{box:{},circle:{}}},k),me.length>0}_queryCell(s,f,_,S,k,z,q,X){const{seenUids:he,hitTest:me,overlapMode:Ee}=q,Me=this.boxCells[k];if(Me!==null){const Xe=this.bboxes;for(const ut of Me)if(!he.box[ut]){he.box[ut]=!0;const ct=4*ut,ft=this.boxKeys[ut];if(s<=Xe[ct+2]&&f<=Xe[ct+3]&&_>=Xe[ct+0]&&S>=Xe[ct+1]&&(!X||X(ft))&&(!me||!qi(Ee,ft.overlapMode))&&(z.push({key:ft,x1:Xe[ct],y1:Xe[ct+1],x2:Xe[ct+2],y2:Xe[ct+3]}),me))return!0}}const Ue=this.circleCells[k];if(Ue!==null){const Xe=this.circles;for(const ut of Ue)if(!he.circle[ut]){he.circle[ut]=!0;const ct=3*ut,ft=this.circleKeys[ut];if(this._circleAndRectCollide(Xe[ct],Xe[ct+1],Xe[ct+2],s,f,_,S)&&(!X||X(ft))&&(!me||!qi(Ee,ft.overlapMode))){const xt=Xe[ct],yt=Xe[ct+1],wt=Xe[ct+2];if(z.push({key:ft,x1:xt-wt,y1:yt-wt,x2:xt+wt,y2:yt+wt}),me)return!0}}}return!1}_queryCellCircle(s,f,_,S,k,z,q,X){const{circle:he,seenUids:me,overlapMode:Ee}=q,Me=this.boxCells[k];if(Me!==null){const Xe=this.bboxes;for(const ut of Me)if(!me.box[ut]){me.box[ut]=!0;const ct=4*ut,ft=this.boxKeys[ut];if(this._circleAndRectCollide(he.x,he.y,he.radius,Xe[ct+0],Xe[ct+1],Xe[ct+2],Xe[ct+3])&&(!X||X(ft))&&!qi(Ee,ft.overlapMode))return z.push(!0),!0}}const Ue=this.circleCells[k];if(Ue!==null){const Xe=this.circles;for(const ut of Ue)if(!me.circle[ut]){me.circle[ut]=!0;const ct=3*ut,ft=this.circleKeys[ut];if(this._circlesCollide(Xe[ct],Xe[ct+1],Xe[ct+2],he.x,he.y,he.radius)&&(!X||X(ft))&&!qi(Ee,ft.overlapMode))return z.push(!0),!0}}}_forEachCell(s,f,_,S,k,z,q,X){const he=this._convertToXCellCoord(s),me=this._convertToYCellCoord(f),Ee=this._convertToXCellCoord(_),Me=this._convertToYCellCoord(S);for(let Ue=he;Ue<=Ee;Ue++)for(let Xe=me;Xe<=Me;Xe++)if(k.call(this,s,f,_,S,this.xCellCount*Xe+Ue,z,q,X))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,f,_,S,k,z){const q=S-s,X=k-f,he=_+z;return he*he>q*q+X*X}_circleAndRectCollide(s,f,_,S,k,z,q){const X=(z-S)/2,he=Math.abs(s-(S+X));if(he>X+_)return!1;const me=(q-k)/2,Ee=Math.abs(f-(k+me));if(Ee>me+_)return!1;if(he<=X||Ee<=me)return!0;const Me=he-X,Ue=Ee-me;return Me*Me+Ue*Ue<=_*_}}function Ei(I,s,f){const _=o.L();if(!I){const{vecSouth:Ee,vecEast:Me}=ti(s),Ue=C();Ue[0]=Me[0],Ue[1]=Me[1],Ue[2]=Ee[0],Ue[3]=Ee[1],S=Ue,(me=(z=(k=Ue)[0])*(he=k[3])-(X=k[2])*(q=k[1]))&&(S[0]=he*(me=1/me),S[1]=-q*me,S[2]=-X*me,S[3]=z*me),_[0]=Ue[0],_[1]=Ue[1],_[4]=Ue[2],_[5]=Ue[3]}var S,k,z,q,X,he,me;return o.N(_,_,[1/f,1/f,1]),_}function hi(I,s,f,_){if(I){const S=o.L();if(!s){const{vecSouth:k,vecEast:z}=ti(f);S[0]=z[0],S[1]=z[1],S[4]=k[0],S[5]=k[1]}return o.N(S,S,[_,_,1]),S}return f.pixelsToClipSpaceMatrix}function ti(I){const s=Math.cos(I.rollInRadians),f=Math.sin(I.rollInRadians),_=Math.cos(I.pitchInRadians),S=Math.cos(I.bearingInRadians),k=Math.sin(I.bearingInRadians),z=o.ar();z[0]=-S*_*f-k*s,z[1]=-k*_*f+S*s;const q=o.as(z);q<1e-9?o.at(z):o.au(z,z,1/q);const X=o.ar();X[0]=S*_*s-k*f,X[1]=k*_*s+S*f;const he=o.as(X);return he<1e-9?o.at(X):o.au(X,X,1/he),{vecEast:X,vecSouth:z}}function Wi(I,s,f,_){let S;_?(S=[I,s,_(I,s),1],o.aw(S,S,f)):(S=[I,s,0,1],Il(S,S,f));const k=S[3];return{point:new o.P(S[0]/k,S[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}function wn(I,s){return .5+I/s*.5}function uo(I,s){return I.x>=-s[0]&&I.x<=s[0]&&I.y>=-s[1]&&I.y<=s[1]}function Hi(I,s,f,_,S,k,z,q,X,he,me,Ee,Me){const Ue=f?I.textSizeData:I.iconSizeData,Xe=o.an(Ue,s.transform.zoom),ut=[256/s.width*2+1,256/s.height*2+1],ct=f?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;ct.clear();const ft=I.lineVertexArray,xt=f?I.text.placedSymbolArray:I.icon.placedSymbolArray,yt=s.transform.width/s.transform.height;let wt=!1;for(let Pt=0;Pt<xt.length;Pt++){const Ft=xt.get(Pt);if(Ft.hidden||Ft.writingMode===o.ao.vertical&&!wt){Xa(Ft.numGlyphs,ct);continue}wt=!1;const Bt=new o.P(Ft.anchorX,Ft.anchorY),Yt={getElevation:Me,pitchedLabelPlaneMatrix:_,lineVertexArray:ft,pitchWithMap:k,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:Bt,unwrappedTileID:X,width:he,height:me,translation:Ee},dn=Tr(Ft.anchorX,Ft.anchorY,Yt);if(!uo(dn.point,ut)){Xa(Ft.numGlyphs,ct);continue}const Xt=wn(s.transform.cameraToCenterDistance,dn.signedDistanceFromCamera),nn=o.ap(Ue,Xe,Ft),un=k?nn*s.transform.getPitchedTextCorrection(Ft.anchorX,Ft.anchorY,X)/Xt:nn*Xt,qn=Zn({projectionContext:Yt,pitchedLabelPlaneMatrixInverse:S,symbol:Ft,fontSize:un,flip:!1,keepUpright:z,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:ct,aspectRatio:yt,rotateToLine:q});wt=qn.useVertical,(qn.notEnoughRoom||wt||qn.needsFlipping&&Zn({projectionContext:Yt,pitchedLabelPlaneMatrixInverse:S,symbol:Ft,fontSize:un,flip:!0,keepUpright:z,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:ct,aspectRatio:yt,rotateToLine:q}).notEnoughRoom)&&Xa(Ft.numGlyphs,ct)}f?I.text.dynamicLayoutVertexBuffer.updateData(ct):I.icon.dynamicLayoutVertexBuffer.updateData(ct)}function ma(I,s,f,_,S,k,z,q){const X=k.glyphStartIndex+k.numGlyphs,he=k.lineStartIndex,me=k.lineStartIndex+k.lineLength,Ee=s.getoffsetX(k.glyphStartIndex),Me=s.getoffsetX(X-1),Ue=ka(I*Ee,f,_,S,k.segment,he,me,q,z);if(!Ue)return null;const Xe=ka(I*Me,f,_,S,k.segment,he,me,q,z);return Xe?q.projectionCache.anyProjectionOccluded?null:{first:Ue,last:Xe}:null}function To(I,s,f,_){return I===o.ao.horizontal&&Math.abs(f.y-s.y)>Math.abs(f.x-s.x)*_?{useVertical:!0}:(I===o.ao.vertical?s.y<f.y:s.x>f.x)?{needsFlipping:!0}:null}function Zn(I){const{projectionContext:s,pitchedLabelPlaneMatrixInverse:f,symbol:_,fontSize:S,flip:k,keepUpright:z,glyphOffsetArray:q,dynamicLayoutVertexArray:X,aspectRatio:he,rotateToLine:me}=I,Ee=S/24,Me=_.lineOffsetX*Ee,Ue=_.lineOffsetY*Ee;let Xe;if(_.numGlyphs>1){const ut=_.glyphStartIndex+_.numGlyphs,ct=_.lineStartIndex,ft=_.lineStartIndex+_.lineLength,xt=ma(Ee,q,Me,Ue,k,_,me,s);if(!xt)return{notEnoughRoom:!0};const yt=Fa(xt.first.point.x,xt.first.point.y,s,f),wt=Fa(xt.last.point.x,xt.last.point.y,s,f);if(z&&!k){const Pt=To(_.writingMode,yt,wt,he);if(Pt)return Pt}Xe=[xt.first];for(let Pt=_.glyphStartIndex+1;Pt<ut-1;Pt++){const Ft=ka(Ee*q.getoffsetX(Pt),Me,Ue,k,_.segment,ct,ft,s,me);if(!Ft)return{notEnoughRoom:!0};Xe.push(Ft)}Xe.push(xt.last)}else{if(z&&!k){const ct=vr(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,ft=_.lineStartIndex+_.segment+1,xt=new o.P(s.lineVertexArray.getx(ft),s.lineVertexArray.gety(ft)),yt=vr(xt.x,xt.y,s),wt=yt.signedDistanceFromCamera>0?yt.point:lr(s.tileAnchorPoint,xt,ct,1,s),Pt=Fa(ct.x,ct.y,s,f),Ft=Fa(wt.x,wt.y,s,f),Bt=To(_.writingMode,Pt,Ft,he);if(Bt)return Bt}const ut=ka(Ee*q.getoffsetX(_.glyphStartIndex),Me,Ue,k,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,s,me);if(!ut||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Xe=[ut]}for(const ut of Xe)o.av(X,ut.point,ut.angle);return{}}function lr(I,s,f,_,S){const k=I.add(I.sub(s)._unit()),z=vr(k.x,k.y,S).point,q=f.sub(z);return f.add(q._mult(_/q.mag()))}function zi(I,s,f){const _=s.projectionCache;if(_.projections[I])return _.projections[I];const S=new o.P(s.lineVertexArray.getx(I),s.lineVertexArray.gety(I)),k=vr(S.x,S.y,s);if(k.signedDistanceFromCamera>0)return _.projections[I]=k.point,_.anyProjectionOccluded=_.anyProjectionOccluded||k.isOccluded,k.point;const z=I-f.direction;return lr(f.distanceFromAnchor===0?s.tileAnchorPoint:new o.P(s.lineVertexArray.getx(z),s.lineVertexArray.gety(z)),S,f.previousVertex,f.absOffsetX-f.distanceFromAnchor+1,s)}function vr(I,s,f){const _=I+f.translation[0],S=s+f.translation[1];let k;return f.pitchWithMap?(k=Wi(_,S,f.pitchedLabelPlaneMatrix,f.getElevation),k.isOccluded=!1):(k=f.transform.projectTileCoordinates(_,S,f.unwrappedTileID,f.getElevation),k.point.x=(.5*k.point.x+.5)*f.width,k.point.y=(.5*-k.point.y+.5)*f.height),k}function Fa(I,s,f,_){if(f.pitchWithMap){const S=[I,s,0,1];return o.aw(S,S,_),f.transform.projectTileCoordinates(S[0]/S[3],S[1]/S[3],f.unwrappedTileID,f.getElevation).point}return{x:I/f.width*2-1,y:1-s/f.height*2}}function Tr(I,s,f){return f.transform.projectTileCoordinates(I,s,f.unwrappedTileID,f.getElevation)}function ji(I,s,f){return I._unit()._perp()._mult(s*f)}function gl(I,s,f,_,S,k,z,q,X){if(q.projectionCache.offsets[I])return q.projectionCache.offsets[I];const he=f.add(s);if(I+X.direction<_||I+X.direction>=S)return q.projectionCache.offsets[I]=he,he;const me=zi(I+X.direction,q,X),Ee=ji(me.sub(f),z,X.direction),Me=f.add(Ee),Ue=me.add(Ee);return q.projectionCache.offsets[I]=o.ax(k,he,Me,Ue)||he,q.projectionCache.offsets[I]}function ka(I,s,f,_,S,k,z,q,X){const he=_?I-s:I+s;let me=he>0?1:-1,Ee=0;_&&(me*=-1,Ee=Math.PI),me<0&&(Ee+=Math.PI);let Me,Ue=me>0?k+S:k+S+1;q.projectionCache.cachedAnchorPoint?Me=q.projectionCache.cachedAnchorPoint:(Me=vr(q.tileAnchorPoint.x,q.tileAnchorPoint.y,q).point,q.projectionCache.cachedAnchorPoint=Me);let Xe,ut,ct=Me,ft=Me,xt=0,yt=0;const wt=Math.abs(he),Pt=[];let Ft;for(;xt+yt<=wt;){if(Ue+=me,Ue<k||Ue>=z)return null;xt+=yt,ft=ct,ut=Xe;const dn={absOffsetX:wt,direction:me,distanceFromAnchor:xt,previousVertex:ft};if(ct=zi(Ue,q,dn),f===0)Pt.push(ft),Ft=ct.sub(ft);else{let Xt;const nn=ct.sub(ft);Xt=nn.mag()===0?ji(zi(Ue+me,q,dn).sub(ct),f,me):ji(nn,f,me),ut||(ut=ft.add(Xt)),Xe=gl(Ue,Xt,ct,k,z,ut,f,q,dn),Pt.push(ut),Ft=Xe.sub(ut)}yt=Ft.mag()}const Bt=Ft._mult((wt-xt)/yt)._add(ut||ft),Yt=Ee+Math.atan2(ct.y-ft.y,ct.x-ft.x);return Pt.push(Bt),{point:Bt,angle:X?Yt:0,path:Pt}}const wo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xa(I,s){for(let f=0;f<I;f++){const _=s.length;s.resize(_+4),s.float32.set(wo,3*_)}}function Il(I,s,f){const _=s[0],S=s[1];return I[0]=f[0]*_+f[4]*S+f[12],I[1]=f[1]*_+f[5]*S+f[13],I[3]=f[3]*_+f[7]*S+f[15],I}const Ao=100;class Wu{constructor(s,f=new er(s.width+200,s.height+200,25),_=new er(s.width+200,s.height+200,25)){this.transform=s,this.grid=f,this.ignoredGrid=_,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Ao,this.screenBottomBoundary=s.height+Ao,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,f,_,S,k,z,q,X,he,me,Ee,Me){const Ue=this.projectAndGetPerspectiveRatio(s.anchorPointX+X[0],s.anchorPointY+X[1],k,me,Me),Xe=_*Ue.perspectiveRatio;let ut;if(z||q)ut=this._projectCollisionBox(s,Xe,S,k,z,q,X,Ue,me,Ee,Me);else{const Ft=Ue.x+(Ee?Ee.x*Xe:0),Bt=Ue.y+(Ee?Ee.y*Xe:0);ut={allPointsOccluded:!1,box:[Ft+s.x1*Xe,Bt+s.y1*Xe,Ft+s.x2*Xe,Bt+s.y2*Xe]}}const[ct,ft,xt,yt]=ut.box,wt=z?ut.allPointsOccluded:Ue.isOccluded;let Pt=wt;return Pt||(Pt=Ue.perspectiveRatio<this.perspectiveRatioCutoff),Pt||(Pt=!this.isInsideGrid(ct,ft,xt,yt)),Pt||f!=="always"&&this.grid.hitTest(ct,ft,xt,yt,f,he)?{box:[ct,ft,xt,yt],placeable:!1,offscreen:!1,occluded:wt}:{box:[ct,ft,xt,yt],placeable:!0,offscreen:this.isOffscreen(ct,ft,xt,yt),occluded:wt}}placeCollisionCircles(s,f,_,S,k,z,q,X,he,me,Ee,Me,Ue,Xe){const ut=[],ct=new o.P(f.anchorX,f.anchorY),ft=this.getPerspectiveRatio(ct.x,ct.y,z,Xe),xt=(he?k*this.transform.getPitchedTextCorrection(f.anchorX,f.anchorY,z)/ft:k*ft)/o.aB,yt={getElevation:Xe,pitchedLabelPlaneMatrix:q,lineVertexArray:_,pitchWithMap:he,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ct,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:Ue},wt=ma(xt,S,f.lineOffsetX*xt,f.lineOffsetY*xt,!1,f,!1,yt);let Pt=!1,Ft=!1,Bt=!0;if(wt){const Yt=.5*Ee*ft+Me,dn=new o.P(-100,-100),Xt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),nn=new Wn,un=wt.first,qn=wt.last;let Qn=[];for(let cr=un.path.length-1;cr>=1;cr--)Qn.push(un.path[cr]);for(let cr=1;cr<qn.path.length;cr++)Qn.push(qn.path[cr]);const Tn=2.5*Yt;if(he){const cr=this.projectPathToScreenSpace(Qn,yt);Qn=cr.some(Co=>Co.signedDistanceFromCamera<=0)?[]:cr.map(Co=>Co.point)}let xi=[];if(Qn.length>0){const cr=Qn[0].clone(),Co=Qn[0].clone();for(let ua=1;ua<Qn.length;ua++)cr.x=Math.min(cr.x,Qn[ua].x),cr.y=Math.min(cr.y,Qn[ua].y),Co.x=Math.max(Co.x,Qn[ua].x),Co.y=Math.max(Co.y,Qn[ua].y);xi=cr.x>=dn.x&&Co.x<=Xt.x&&cr.y>=dn.y&&Co.y<=Xt.y?[Qn]:Co.x<dn.x||cr.x>Xt.x||Co.y<dn.y||cr.y>Xt.y?[]:o.ay([Qn],dn.x,dn.y,Xt.x,Xt.y)}for(const cr of xi){nn.reset(cr,.25*Yt);let Co=0;Co=nn.length<=.5*Yt?1:Math.ceil(nn.paddedLength/Tn)+1;for(let ua=0;ua<Co;ua++){const Lo=ua/Math.max(Co-1,1),Pa=nn.lerp(Lo),Aa=Pa.x+Ao,Br=Pa.y+Ao;ut.push(Aa,Br,Yt,0);const Qo=Aa-Yt,is=Br-Yt,Qa=Aa+Yt,Os=Br+Yt;if(Bt=Bt&&this.isOffscreen(Qo,is,Qa,Os),Ft=Ft||this.isInsideGrid(Qo,is,Qa,Os),s!=="always"&&this.grid.hitTestCircle(Aa,Br,Yt,s,me)&&(Pt=!0,!X))return{circles:[],offscreen:!1,collisionDetected:Pt}}}}return{circles:!X&&Pt||!Ft||ft<this.perspectiveRatioCutoff?[]:ut,offscreen:Bt,collisionDetected:Pt}}projectPathToScreenSpace(s,f){const _=function(S,k){const z=o.L();return o.aq(z,k.pitchedLabelPlaneMatrix),S.map(q=>{const X=Wi(q.x,q.y,z,k.getElevation),he=k.transform.projectTileCoordinates(X.point.x,X.point.y,k.unwrappedTileID,k.getElevation);return he.point.x=(.5*he.point.x+.5)*k.width,he.point.y=(.5*-he.point.y+.5)*k.height,he})}(s,f);return function(S){let k=0,z=0,q=0,X=0;for(let he=0;he<S.length;he++)S[he].isOccluded?(q=he+1,X=0):(X++,X>z&&(z=X,k=q));return S.slice(k,k+z)}(_)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[],_=new o.a2;for(const Ee of s){const Me=new o.P(Ee.x+Ao,Ee.y+Ao);_.extend(Me),f.push(Me)}const{minX:S,minY:k,maxX:z,maxY:q}=_,X=this.grid.query(S,k,z,q).concat(this.ignoredGrid.query(S,k,z,q)),he={},me={};for(const Ee of X){const Me=Ee.key;if(he[Me.bucketInstanceId]===void 0&&(he[Me.bucketInstanceId]={}),he[Me.bucketInstanceId][Me.featureIndex])continue;const Ue=[new o.P(Ee.x1,Ee.y1),new o.P(Ee.x2,Ee.y1),new o.P(Ee.x2,Ee.y2),new o.P(Ee.x1,Ee.y2)];o.az(f,Ue)&&(he[Me.bucketInstanceId][Me.featureIndex]=!0,me[Me.bucketInstanceId]===void 0&&(me[Me.bucketInstanceId]=[]),me[Me.bucketInstanceId].push(Me.featureIndex))}return me}insertCollisionBox(s,f,_,S,k,z){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:k,collisionGroupID:z,overlapMode:f},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,f,_,S,k,z){const q=_?this.ignoredGrid:this.grid,X={bucketInstanceId:S,featureIndex:k,collisionGroupID:z,overlapMode:f};for(let he=0;he<s.length;he+=4)q.insertCircle(X,s[he],s[he+1],s[he+2])}projectAndGetPerspectiveRatio(s,f,_,S,k){if(k){let z;S?(z=[s,f,S(s,f),1],o.aw(z,z,k)):(z=[s,f,0,1],Il(z,z,k));const q=z[3];return{x:(z[0]/q+1)/2*this.transform.width+Ao,y:(-z[1]/q+1)/2*this.transform.height+Ao,perspectiveRatio:.5+this.transform.cameraToCenterDistance/q*.5,isOccluded:!1,signedDistanceFromCamera:q}}{const z=this.transform.projectTileCoordinates(s,f,_,S);return{x:(z.point.x+1)/2*this.transform.width+Ao,y:(1-z.point.y)/2*this.transform.height+Ao,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z.signedDistanceFromCamera*.5,isOccluded:z.isOccluded,signedDistanceFromCamera:z.signedDistanceFromCamera}}}getPerspectiveRatio(s,f,_,S){const k=this.transform.projectTileCoordinates(s,f,_,S);return .5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5}isOffscreen(s,f,_,S){return _<Ao||s>=this.screenRightBoundary||S<Ao||f>this.screenBottomBoundary}isInsideGrid(s,f,_,S){return _>=0&&s<this.gridRightBoundary&&S>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const s=o.ag([]);return o.M(s,s,[-100,-100,0]),s}_projectCollisionBox(s,f,_,S,k,z,q,X,he,me,Ee){let Me=1,Ue=0,Xe=0,ut=1;const ct=s.anchorPointX+q[0],ft=s.anchorPointY+q[1];if(z&&!k){const Qn=this.projectAndGetPerspectiveRatio(ct+1,ft,S,he,Ee),Tn=Qn.x-X.x,xi=Math.atan((Qn.y-X.y)/Tn)+(Tn<0?Math.PI:0),cr=Math.sin(xi),Co=Math.cos(xi);Me=Co,Ue=cr,Xe=-cr,ut=Co}else if(!z&&k){const Qn=ti(this.transform);Me=Qn.vecEast[0],Ue=Qn.vecEast[1],Xe=Qn.vecSouth[0],ut=Qn.vecSouth[1]}let xt=X.x,yt=X.y,wt=f;k&&(xt=ct,yt=ft,wt=Math.pow(2,-(this.transform.zoom-_.overscaledZ)),wt*=this.transform.getPitchedTextCorrection(ct,ft,S),me||(wt*=o.ah(.5+X.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),me&&(xt+=Me*me.x*wt+Xe*me.y*wt,yt+=Ue*me.x*wt+ut*me.y*wt);const Pt=s.x1*wt,Ft=s.x2*wt,Bt=(Pt+Ft)/2,Yt=s.y1*wt,dn=s.y2*wt,Xt=(Yt+dn)/2,nn=[{offsetX:Pt,offsetY:Yt},{offsetX:Bt,offsetY:Yt},{offsetX:Ft,offsetY:Yt},{offsetX:Ft,offsetY:Xt},{offsetX:Ft,offsetY:dn},{offsetX:Bt,offsetY:dn},{offsetX:Pt,offsetY:dn},{offsetX:Pt,offsetY:Xt}];let un=[];for(const{offsetX:Qn,offsetY:Tn}of nn)un.push(new o.P(xt+Me*Qn+Xe*Tn,yt+Ue*Qn+ut*Tn));let qn=!1;if(k){const Qn=un.map(Tn=>this.projectAndGetPerspectiveRatio(Tn.x,Tn.y,S,he,Ee));qn=Qn.some(Tn=>!Tn.isOccluded),un=Qn.map(Tn=>new o.P(Tn.x,Tn.y))}else qn=!0;return{box:o.aA(un),allPointsOccluded:!qn}}}class Da{constructor(s,f,_,S){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?f:-f))):S&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Vi{constructor(s,f,_,S,k){this.text=new Da(s?s.text:null,f,_,k),this.icon=new Da(s?s.icon:null,f,S,k)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Mi{constructor(s,f,_){this.text=s,this.icon=f,this.skipFade=_}}class us{constructor(s,f,_,S,k){this.bucketInstanceId=s,this.featureIndex=f,this.sourceLayerIndex=_,this.bucketIndex=S,this.tileID=k}}class Ma{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const f=++this.maxGroupID;this.collisionGroups[s]={ID:f,predicate:_=>_.collisionGroupID===f}}return this.collisionGroups[s]}}function Vo(I,s,f,_,S){const{horizontalAlign:k,verticalAlign:z}=o.aH(I);return new o.P(-(k-.5)*s+_[0]*S,-(z-.5)*f+_[1]*S)}class $e{constructor(s,f,_,S,k){this.transform=s.clone(),this.terrain=f,this.collisionIndex=new Wu(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new Ma(S),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const f=this.terrain;return f?(_,S)=>f.getElevation(s,_,S):null}getBucketParts(s,f,_,S){const k=_.getBucket(f),z=_.latestFeatureIndex;if(!k||!z||f.id!==k.layerIds[0])return;const q=_.collisionBoxArray,X=k.layers[0].layout,he=k.layers[0].paint,me=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),Ee=_.tileSize/o.$,Me=_.tileID.toUnwrapped(),Ue=X.get("text-rotation-alignment")==="map",Xe=o.aC(_,1,this.transform.zoom),ut=o.aD(this.collisionIndex.transform,_,he.get("text-translate"),he.get("text-translate-anchor")),ct=o.aD(this.collisionIndex.transform,_,he.get("icon-translate"),he.get("icon-translate-anchor")),ft=Ei(Ue,this.transform,Xe);this.retainedQueryData[k.bucketInstanceId]=new us(k.bucketInstanceId,z,k.sourceLayerIndex,k.index,_.tileID);const xt={bucket:k,layout:X,translationText:ut,translationIcon:ct,unwrappedTileID:Me,pitchedLabelPlaneMatrix:ft,scale:me,textPixelRatio:Ee,holdingForFade:_.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:o.an(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(S)for(const yt of k.sortKeyRanges){const{sortKey:wt,symbolInstanceStart:Pt,symbolInstanceEnd:Ft}=yt;s.push({sortKey:wt,symbolInstanceStart:Pt,symbolInstanceEnd:Ft,parameters:xt})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:xt})}attemptAnchorPlacement(s,f,_,S,k,z,q,X,he,me,Ee,Me,Ue,Xe,ut,ct,ft,xt,yt,wt){const Pt=o.aE[s.textAnchor],Ft=[s.textOffset0,s.textOffset1],Bt=Vo(Pt,_,S,Ft,k),Yt=this.collisionIndex.placeCollisionBox(f,Me,X,he,me,q,z,ct,Ee.predicate,yt,Bt,wt);if((!xt||this.collisionIndex.placeCollisionBox(xt,Me,X,he,me,q,z,ft,Ee.predicate,yt,Bt,wt).placeable)&&Yt.placeable){let dn;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID].text&&(dn=this.prevPlacement.variableOffsets[Ue.crossTileID].anchor),Ue.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ue.crossTileID]={textOffset:Ft,width:_,height:S,anchor:Pt,textBoxScale:k,prevAnchor:dn},this.markUsedJustification(Xe,Pt,Ue,ut),Xe.allowVerticalPlacement&&(this.markUsedOrientation(Xe,ut,Ue),this.placedOrientations[Ue.crossTileID]=ut),{shift:Bt,placedGlyphBoxes:Yt}}}placeLayerBucketPart(s,f,_){const{bucket:S,layout:k,translationText:z,translationIcon:q,unwrappedTileID:X,pitchedLabelPlaneMatrix:he,textPixelRatio:me,holdingForFade:Ee,collisionBoxArray:Me,partiallyEvaluatedTextSize:Ue,collisionGroup:Xe}=s.parameters,ut=k.get("text-optional"),ct=k.get("icon-optional"),ft=o.aF(k,"text-overlap","text-allow-overlap"),xt=ft==="always",yt=o.aF(k,"icon-overlap","icon-allow-overlap"),wt=yt==="always",Pt=k.get("text-rotation-alignment")==="map",Ft=k.get("text-pitch-alignment")==="map",Bt=k.get("icon-text-fit")!=="none",Yt=k.get("symbol-z-order")==="viewport-y",dn=xt&&(wt||!S.hasIconData()||ct),Xt=wt&&(xt||!S.hasTextData()||ut);!S.collisionArrays&&Me&&S.deserializeCollisionBoxes(Me);const nn=this.retainedQueryData[S.bucketInstanceId].tileID,un=this._getTerrainElevationFunc(nn),qn=this.transform.getFastPathSimpleProjectionMatrix(nn),Qn=(Tn,xi,cr)=>{var Co,ua;if(f[Tn.crossTileID])return;if(Ee)return void(this.placements[Tn.crossTileID]=new Mi(!1,!1,!1));let Lo=!1,Pa=!1,Aa=!0,Br=null,Qo={box:null,placeable:!1,offscreen:null,occluded:!1},is={placeable:!1},Qa=null,Os=null,Is=null,YA=0,dc=0,ql=0;xi.textFeatureIndex?YA=xi.textFeatureIndex:Tn.useRuntimeCollisionCircles&&(YA=Tn.featureIndex),xi.verticalTextFeatureIndex&&(dc=xi.verticalTextFeatureIndex);const Ih=xi.textBox;if(Ih){const bl=_o=>{let Xo=o.ao.horizontal;if(S.allowVerticalPlacement&&!_o&&this.prevPlacement){const hu=this.prevPlacement.placedOrientations[Tn.crossTileID];hu&&(this.placedOrientations[Tn.crossTileID]=hu,Xo=hu,this.markUsedOrientation(S,Xo,Tn))}return Xo},HA=(_o,Xo)=>{if(S.allowVerticalPlacement&&Tn.numVerticalGlyphVertices>0&&xi.verticalTextBox){for(const hu of S.writingModes)if(hu===o.ao.vertical?(Qo=Xo(),is=Qo):Qo=_o(),Qo&&Qo.placeable)break}else Qo=_o()},xl=Tn.textAnchorOffsetStartIndex,Kc=Tn.textAnchorOffsetEndIndex;if(Kc===xl){const _o=(Xo,hu)=>{const ys=this.collisionIndex.placeCollisionBox(Xo,ft,me,nn,X,Ft,Pt,z,Xe.predicate,un,void 0,qn);return ys&&ys.placeable&&(this.markUsedOrientation(S,hu,Tn),this.placedOrientations[Tn.crossTileID]=hu),ys};HA(()=>_o(Ih,o.ao.horizontal),()=>{const Xo=xi.verticalTextBox;return S.allowVerticalPlacement&&Tn.numVerticalGlyphVertices>0&&Xo?_o(Xo,o.ao.vertical):{box:null,offscreen:null}}),bl(Qo&&Qo.placeable)}else{let _o=o.aE[(ua=(Co=this.prevPlacement)===null||Co===void 0?void 0:Co.variableOffsets[Tn.crossTileID])===null||ua===void 0?void 0:ua.anchor];const Xo=(ys,_A,du)=>{const Ru=ys.x2-ys.x1,Hl=ys.y2-ys.y1,Uc=Tn.textBoxScale,tA=Bt&&yt==="never"?_A:null;let Ya=null,bA=ft==="never"?1:2,zf="never";_o&&bA++;for(let xA=0;xA<bA;xA++){for(let MA=xl;MA<Kc;MA++){const Sa=S.textAnchorOffsets.get(MA);if(_o&&Sa.textAnchor!==_o)continue;const nA=this.attemptAnchorPlacement(Sa,ys,Ru,Hl,Uc,Pt,Ft,me,nn,X,Xe,zf,Tn,S,du,z,q,tA,un);if(nA&&(Ya=nA.placedGlyphBoxes,Ya&&Ya.placeable))return Lo=!0,Br=nA.shift,Ya}_o?_o=null:zf=ft}return _&&!Ya&&(Ya={box:this.collisionIndex.placeCollisionBox(Ih,"always",me,nn,X,Ft,Pt,z,Xe.predicate,un,void 0,qn).box,offscreen:!1,placeable:!1,occluded:!1}),Ya};HA(()=>Xo(Ih,xi.iconBox,o.ao.horizontal),()=>{const ys=xi.verticalTextBox;return S.allowVerticalPlacement&&(!Qo||!Qo.placeable)&&Tn.numVerticalGlyphVertices>0&&ys?Xo(ys,xi.verticalIconBox,o.ao.vertical):{box:null,occluded:!0,offscreen:null}}),Qo&&(Lo=Qo.placeable,Aa=Qo.offscreen);const hu=bl(Qo&&Qo.placeable);if(!Lo&&this.prevPlacement){const ys=this.prevPlacement.variableOffsets[Tn.crossTileID];ys&&(this.variableOffsets[Tn.crossTileID]=ys,this.markUsedJustification(S,ys.anchor,Tn,hu))}}}if(Qa=Qo,Lo=Qa&&Qa.placeable,Aa=Qa&&Qa.offscreen,Tn.useRuntimeCollisionCircles){const bl=S.text.placedSymbolArray.get(Tn.centerJustifiedTextSymbolIndex),HA=o.ap(S.textSizeData,Ue,bl),xl=k.get("text-padding");Os=this.collisionIndex.placeCollisionCircles(ft,bl,S.lineVertexArray,S.glyphOffsetArray,HA,X,he,_,Ft,Xe.predicate,Tn.collisionCircleDiameter,xl,z,un),Os.circles.length&&Os.collisionDetected&&!_&&o.w("Collisions detected, but collision boxes are not shown"),Lo=xt||Os.circles.length>0&&!Os.collisionDetected,Aa=Aa&&Os.offscreen}if(xi.iconFeatureIndex&&(ql=xi.iconFeatureIndex),xi.iconBox){const bl=HA=>this.collisionIndex.placeCollisionBox(HA,yt,me,nn,X,Ft,Pt,q,Xe.predicate,un,Bt&&Br?Br:void 0,qn);is&&is.placeable&&xi.verticalIconBox?(Is=bl(xi.verticalIconBox),Pa=Is.placeable):(Is=bl(xi.iconBox),Pa=Is.placeable),Aa=Aa&&Is.offscreen}const rh=ut||Tn.numHorizontalGlyphVertices===0&&Tn.numVerticalGlyphVertices===0,qA=ct||Tn.numIconVertices===0;rh||qA?qA?rh||(Pa=Pa&&Lo):Lo=Pa&&Lo:Pa=Lo=Pa&&Lo;const Pc=Pa&&Is.placeable;if(Lo&&Qa.placeable&&this.collisionIndex.insertCollisionBox(Qa.box,ft,k.get("text-ignore-placement"),S.bucketInstanceId,is&&is.placeable&&dc?dc:YA,Xe.ID),Pc&&this.collisionIndex.insertCollisionBox(Is.box,yt,k.get("icon-ignore-placement"),S.bucketInstanceId,ql,Xe.ID),Os&&Lo&&this.collisionIndex.insertCollisionCircles(Os.circles,ft,k.get("text-ignore-placement"),S.bucketInstanceId,YA,Xe.ID),_&&this.storeCollisionData(S.bucketInstanceId,cr,xi,Qa,Is,Os),Tn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Tn.crossTileID]=new Mi((Lo||dn)&&!Qa?.occluded,(Pa||Xt)&&!Is?.occluded,Aa||S.justReloaded),f[Tn.crossTileID]=!0};if(Yt){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Tn=S.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let xi=Tn.length-1;xi>=0;--xi){const cr=Tn[xi];Qn(S.symbolInstances.get(cr),S.collisionArrays[cr],cr)}}else for(let Tn=s.symbolInstanceStart;Tn<s.symbolInstanceEnd;Tn++)Qn(S.symbolInstances.get(Tn),S.collisionArrays[Tn],Tn);S.justReloaded=!1}storeCollisionData(s,f,_,S,k,z){if(_.textBox||_.iconBox){let q,X;this.collisionBoxArrays.has(s)?q=this.collisionBoxArrays.get(s):(q=new Map,this.collisionBoxArrays.set(s,q)),q.has(f)?X=q.get(f):(X={text:null,icon:null},q.set(f,X)),_.textBox&&(X.text=S.box),_.iconBox&&(X.icon=k.box)}if(z){let q=this.collisionCircleArrays[s];q===void 0&&(q=this.collisionCircleArrays[s]=[]);for(let X=0;X<z.circles.length;X+=4)q.push(z.circles[X+0]-Ao),q.push(z.circles[X+1]-Ao),q.push(z.circles[X+2]),q.push(z.collisionDetected?1:0)}}markUsedJustification(s,f,_,S){let k;k=S===o.ao.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[o.aG(f)];const z=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const q of z)q>=0&&(s.text.placedSymbolArray.get(q).crossTileID=k>=0&&q!==k?0:_.crossTileID)}markUsedOrientation(s,f,_){const S=f===o.ao.horizontal||f===o.ao.horizontalOnly?f:0,k=f===o.ao.vertical?f:0,z=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const q of z)s.text.placedSymbolArray.get(q).placedOrientation=S;_.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=k)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let _=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const S=f?f.symbolFadeChange(s):1,k=f?f.opacities:{},z=f?f.variableOffsets:{},q=f?f.placedOrientations:{};for(const X in this.placements){const he=this.placements[X],me=k[X];me?(this.opacities[X]=new Vi(me,S,he.text,he.icon),_=_||he.text!==me.text.placed||he.icon!==me.icon.placed):(this.opacities[X]=new Vi(null,S,he.text,he.icon,he.skipFade),_=_||he.text||he.icon)}for(const X in k){const he=k[X];if(!this.opacities[X]){const me=new Vi(he,S,!1,!1);me.isHidden()||(this.opacities[X]=me,_=_||he.text.placed||he.icon.placed)}}for(const X in z)this.variableOffsets[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.variableOffsets[X]=z[X]);for(const X in q)this.placedOrientations[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.placedOrientations[X]=q[X]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:s)}updateLayerOpacities(s,f){const _={};for(const S of f){const k=S.getBucket(s);k&&S.latestFeatureIndex&&s.id===k.layerIds[0]&&this.updateBucketOpacities(k,S.tileID,_,S.collisionBoxArray)}}updateBucketOpacities(s,f,_,S){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const k=s.layers[0],z=k.layout,q=new Vi(null,0,!1,!1,!0),X=z.get("text-allow-overlap"),he=z.get("icon-allow-overlap"),me=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ee=z.get("text-rotation-alignment")==="map",Me=z.get("text-pitch-alignment")==="map",Ue=z.get("icon-text-fit")!=="none",Xe=new Vi(null,0,X&&(he||!s.hasIconData()||z.get("icon-optional")),he&&(X||!s.hasTextData()||z.get("text-optional")),!0);!s.collisionArrays&&S&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(S);const ut=(ft,xt,yt)=>{for(let wt=0;wt<xt/4;wt++)ft.opacityVertexArray.emplaceBack(yt);ft.hasVisibleVertices=ft.hasVisibleVertices||yt!==Qu},ct=this.collisionBoxArrays.get(s.bucketInstanceId);for(let ft=0;ft<s.symbolInstances.length;ft++){const xt=s.symbolInstances.get(ft),{numHorizontalGlyphVertices:yt,numVerticalGlyphVertices:wt,crossTileID:Pt}=xt;let Ft=this.opacities[Pt];_[Pt]?Ft=q:Ft||(Ft=Xe,this.opacities[Pt]=Ft),_[Pt]=!0;const Bt=xt.numIconVertices>0,Yt=this.placedOrientations[xt.crossTileID],dn=Yt===o.ao.vertical,Xt=Yt===o.ao.horizontal||Yt===o.ao.horizontalOnly;if(yt>0||wt>0){const un=Ls(Ft.text);ut(s.text,yt,dn?Qu:un),ut(s.text,wt,Xt?Qu:un);const qn=Ft.text.isHidden();[xt.rightJustifiedTextSymbolIndex,xt.centerJustifiedTextSymbolIndex,xt.leftJustifiedTextSymbolIndex].forEach(xi=>{xi>=0&&(s.text.placedSymbolArray.get(xi).hidden=qn||dn?1:0)}),xt.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(xt.verticalPlacedTextSymbolIndex).hidden=qn||Xt?1:0);const Qn=this.variableOffsets[xt.crossTileID];Qn&&this.markUsedJustification(s,Qn.anchor,xt,Yt);const Tn=this.placedOrientations[xt.crossTileID];Tn&&(this.markUsedJustification(s,"left",xt,Tn),this.markUsedOrientation(s,Tn,xt))}if(Bt){const un=Ls(Ft.icon),qn=!(Ue&&xt.verticalPlacedIconSymbolIndex&&dn);xt.placedIconSymbolIndex>=0&&(ut(s.icon,xt.numIconVertices,qn?un:Qu),s.icon.placedSymbolArray.get(xt.placedIconSymbolIndex).hidden=Ft.icon.isHidden()),xt.verticalPlacedIconSymbolIndex>=0&&(ut(s.icon,xt.numVerticalIconVertices,qn?Qu:un),s.icon.placedSymbolArray.get(xt.verticalPlacedIconSymbolIndex).hidden=Ft.icon.isHidden())}const nn=ct&&ct.has(ft)?ct.get(ft):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const un=s.collisionArrays[ft];if(un){let qn=new o.P(0,0);if(un.textBox||un.verticalTextBox){let Qn=!0;if(me){const Tn=this.variableOffsets[Pt];Tn?(qn=Vo(Tn.anchor,Tn.width,Tn.height,Tn.textOffset,Tn.textBoxScale),Ee&&qn._rotate(Me?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Qn=!1}if(un.textBox||un.verticalTextBox){let Tn;un.textBox&&(Tn=dn),un.verticalTextBox&&(Tn=Xt),Et(s.textCollisionBox.collisionVertexArray,Ft.text.placed,!Qn||Tn,nn.text,qn.x,qn.y)}}if(un.iconBox||un.verticalIconBox){const Qn=!!(!Xt&&un.verticalIconBox);let Tn;un.iconBox&&(Tn=Qn),un.verticalIconBox&&(Tn=!Qn),Et(s.iconCollisionBox.collisionVertexArray,Ft.icon.placed,Tn,nn.icon,Ue?qn.x:0,Ue?qn.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,f){const _=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*_>s}setStale(){this.stale=!0}}function Et(I,s,f,_,S,k){_&&_.length!==0||(_=[0,0,0,0]);const z=_[0]-Ao,q=_[1]-Ao,X=_[2]-Ao,he=_[3]-Ao;I.emplaceBack(s?1:0,f?1:0,S||0,k||0,z,q),I.emplaceBack(s?1:0,f?1:0,S||0,k||0,X,q),I.emplaceBack(s?1:0,f?1:0,S||0,k||0,X,he),I.emplaceBack(s?1:0,f?1:0,S||0,k||0,z,he)}const xn=Math.pow(2,25),Gn=Math.pow(2,24),rn=Math.pow(2,17),si=Math.pow(2,16),eo=Math.pow(2,9),So=Math.pow(2,8),As=Math.pow(2,1);function Ls(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const s=I.placed?1:0,f=Math.floor(127*I.opacity);return f*xn+s*Gn+f*rn+s*si+f*eo+s*So+f*As+s}const Qu=0;class Qi{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,f,_,S,k){const z=this._bucketParts;for(;this._currentTileIndex<s.length;)if(f.getBucketParts(z,S,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort((q,X)=>q.sortKey-X.sortKey));this._currentPartIndex<z.length;)if(f.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,k())return!0;return!1}}class RA{constructor(s,f,_,S,k,z,q,X){this.placement=new $e(s,f,z,q,X),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(s,f,_){const S=U.now(),k=()=>!this._forceFullPlacement&&U.now()-S>2;for(;this._currentPlacementIndex>=0;){const z=f[s[this._currentPlacementIndex]],q=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=q)&&(!z.maxzoom||z.maxzoom>q)){if(this._inProgressLayer||(this._inProgressLayer=new Qi(z)),this._inProgressLayer.continuePlacement(_[z.source],this.placement,this._showCollisionBoxes,z,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const _u=512/o.$/2;class yl{constructor(s,f,_){this.tileID=s,this.bucketInstanceId=_,this._symbolsByKey={};const S=new Map;for(let k=0;k<f.length;k++){const z=f.get(k),q=z.key,X=S.get(q);X?X.push(z):S.set(q,[z])}for(const[k,z]of S){const q={positions:z.map(X=>({x:Math.floor(X.anchorX*_u),y:Math.floor(X.anchorY*_u)})),crossTileIDs:z.map(X=>X.crossTileID)};if(q.positions.length>128){const X=new o.aI(q.positions.length,16,Uint16Array);for(const{x:he,y:me}of q.positions)X.add(he,me);X.finish(),delete q.positions,q.index=X}this._symbolsByKey[k]=q}}getScaledCoordinates(s,f){const{x:_,y:S,z:k}=this.tileID.canonical,{x:z,y:q,z:X}=f.canonical,he=_u/Math.pow(2,X-k),me=(q*o.$+s.anchorY)*he,Ee=S*o.$*_u;return{x:Math.floor((z*o.$+s.anchorX)*he-_*o.$*_u),y:Math.floor(me-Ee)}}findMatches(s,f,_){const S=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let k=0;k<s.length;k++){const z=s.get(k);if(z.crossTileID)continue;const q=this._symbolsByKey[z.key];if(!q)continue;const X=this.getScaledCoordinates(z,f);if(q.index){const he=q.index.range(X.x-S,X.y-S,X.x+S,X.y+S).sort();for(const me of he){const Ee=q.crossTileIDs[me];if(!_[Ee]){_[Ee]=!0,z.crossTileID=Ee;break}}}else if(q.positions)for(let he=0;he<q.positions.length;he++){const me=q.positions[he],Ee=q.crossTileIDs[he];if(Math.abs(me.x-X.x)<=S&&Math.abs(me.y-X.y)<=S&&!_[Ee]){_[Ee]=!0,z.crossTileID=Ee;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Ss{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const f=Math.round((s-this.lng)/360);if(f!==0)for(const _ in this.indexes){const S=this.indexes[_],k={};for(const z in S){const q=S[z];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+f),k[q.tileID.key]=q}this.indexes[_]=k}this.lng=s}addBucket(s,f,_){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let k=0;k<f.symbolInstances.length;k++)f.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const S=this.usedCrossTileIDs[s.overscaledZ];for(const k in this.indexes){const z=this.indexes[k];if(Number(k)>s.overscaledZ)for(const q in z){const X=z[q];X.tileID.isChildOf(s)&&X.findMatches(f.symbolInstances,s,S)}else{const q=z[s.scaledTo(Number(k)).key];q&&q.findMatches(f.symbolInstances,s,S)}}for(let k=0;k<f.symbolInstances.length;k++){const z=f.symbolInstances.get(k);z.crossTileID||(z.crossTileID=_.generate(),S[z.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new yl(s,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(s,f){for(const _ of f.getCrossTileIDsLists())for(const S of _)delete this.usedCrossTileIDs[s][S]}removeStaleBuckets(s){let f=!1;for(const _ in this.indexes){const S=this.indexes[_];for(const k in S)s[S[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,S[k]),delete S[k],f=!0)}return f}}class Ys{constructor(){this.layerIndexes={},this.crossTileIDs=new Ss,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,f,_){let S=this.layerIndexes[s.id];S===void 0&&(S=this.layerIndexes[s.id]=new xc);let k=!1;const z={};S.handleWrapJump(_);for(const q of f){const X=q.getBucket(s);X&&s.id===X.layerIds[0]&&(X.bucketInstanceId||(X.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(q.tileID,X,this.crossTileIDs)&&(k=!0),z[X.bucketInstanceId]=!0)}return S.removeStaleBuckets(z)&&(k=!0),k}pruneUnusedLayers(s){const f={};s.forEach(_=>{f[_]=!0});for(const _ in this.layerIndexes)f[_]||delete this.layerIndexes[_]}}var $o="void main() {fragColor=vec4(1.0);}";const ko={prelude:dr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:dr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:dr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:dr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:dr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:dr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:dr($o,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:dr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:dr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:dr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:dr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:dr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:dr($o,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:dr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:dr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:dr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:dr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:dr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:dr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:dr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:dr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:dr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:dr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:dr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:dr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:dr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:dr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:dr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:dr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:dr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:dr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:dr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:dr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function dr(I,s){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=s.match(/in ([\w]+) ([\w]+)/g),S=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=k?k.concat(S):S,q={};return{fragmentSource:I=I.replace(f,(X,he,me,Ee,Me)=>(q[Me]=!0,he==="define"?`
#ifndef HAS_UNIFORM_u_${Me}
in ${me} ${Ee} ${Me};
#else
uniform ${me} ${Ee} u_${Me};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Me}
    ${me} ${Ee} ${Me} = u_${Me};
#endif
`)),vertexSource:s=s.replace(f,(X,he,me,Ee,Me)=>{const Ue=Ee==="float"?"vec2":"vec4",Xe=Me.match(/color/)?"color":Ue;return q[Me]?he==="define"?`
#ifndef HAS_UNIFORM_u_${Me}
uniform lowp float u_${Me}_t;
in ${me} ${Ue} a_${Me};
out ${me} ${Ee} ${Me};
#else
uniform ${me} ${Ee} u_${Me};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Me}
    ${Me} = a_${Me};
#else
    ${me} ${Ee} ${Me} = u_${Me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Me}
    ${Me} = unpack_mix_${Xe}(a_${Me}, u_${Me}_t);
#else
    ${me} ${Ee} ${Me} = u_${Me};
#endif
`:he==="define"?`
#ifndef HAS_UNIFORM_u_${Me}
uniform lowp float u_${Me}_t;
in ${me} ${Ue} a_${Me};
#else
uniform ${me} ${Ee} u_${Me};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Me}
    ${me} ${Ee} ${Me} = a_${Me};
#else
    ${me} ${Ee} ${Me} = u_${Me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Me}
    ${me} ${Ee} ${Me} = unpack_mix_${Xe}(a_${Me}, u_${Me}_t);
#else
    ${me} ${Ee} ${Me} = u_${Me};
#endif
`}),staticAttributes:_,staticUniforms:z}}class Kl{constructor(s,f,_){this.vertexBuffer=s,this.indexBuffer=f,this.segments=_}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ga=o.aJ([{name:"a_pos",type:"Int16",components:2}]);const Ul="#define PROJECTION_MERCATOR",bu="mercator";class xr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return bu}get shaderDefine(){return Ul}get shaderPreludeCode(){return ko.projectionMercator}get vertexShaderPreludeCode(){return ko.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,f,_,S,k){if(this._cachedMesh)return this._cachedMesh;const z=new o.aL;z.emplaceBack(0,0),z.emplaceBack(o.$,0),z.emplaceBack(0,o.$),z.emplaceBack(o.$,o.$);const q=s.createVertexBuffer(z,ga.members),X=o.aM.simpleSegment(0,0,4,2),he=new o.aN;he.emplaceBack(1,0,2),he.emplaceBack(1,2,3);const me=s.createIndexBuffer(he);return this._cachedMesh=new Kl(q,me,X),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class iu{constructor(s=0,f=0,_=0,S=0){if(isNaN(s)||s<0||isNaN(f)||f<0||isNaN(_)||_<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=f,this.left=_,this.right=S}interpolate(s,f,_){return f.top!=null&&s.top!=null&&(this.top=o.C.number(s.top,f.top,_)),f.bottom!=null&&s.bottom!=null&&(this.bottom=o.C.number(s.bottom,f.bottom,_)),f.left!=null&&s.left!=null&&(this.left=o.C.number(s.left,f.left,_)),f.right!=null&&s.right!=null&&(this.right=o.C.number(s.right,f.right,_)),this}getCenter(s,f){const _=o.ah((this.left+s-this.right)/2,0,s),S=o.ah((this.top+f-this.bottom)/2,0,f);return new o.P(_,S)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new iu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function cA(I,s){if(!I.renderWorldCopies||I.lngRange)return;const f=s.lng-I.center.lng;s.lng+=f>180?-360:f<-180?360:0}function jo(I){return Math.max(0,Math.floor(I))}class Eo{constructor(s,f,_,S,k,z){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=z===void 0||!!z,this._minZoom=f||0,this._maxZoom=_||22,this._minPitch=S??0,this._maxPitch=k??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=jo(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new iu,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,f,_){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=jo(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new iu(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!_&&s.autoCalculateNearFarZ,f&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){const f=o.aO(s,-180,180)*Math.PI/180;var _,S,k,z,q,X,he,me,Ee;this._bearingInRadians!==f&&(this._unmodified=!1,this._bearingInRadians=f,this._calcMatrices(),this._rotationMatrix=C(),_=this._rotationMatrix,k=-this._bearingInRadians,z=(S=this._rotationMatrix)[0],q=S[1],X=S[2],he=S[3],me=Math.sin(k),Ee=Math.cos(k),_[0]=z*Ee+X*me,_[1]=q*Ee+he*me,_[2]=z*-me+X*Ee,_[3]=q*-me+he*Ee)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){const f=o.ah(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==f&&(this._unmodified=!1,this._pitchInRadians=f,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){const f=s/180*Math.PI;this._rollInRadians!==f&&(this._unmodified=!1,this._rollInRadians=f,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aP(this._fovInRadians)}setFov(s){s=o.ah(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=o.ae(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){const f=this.getConstrained(this._center,s).zoom;this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this._tileZoom=Math.max(0,Math.floor(f)),this._scale=o.af(f),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,f){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=f,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,f,_){this._unmodified=!1,this._edgeInsets.interpolate(s,f,_),this._constrain(),this._calcMatrices()}resize(s,f,_=!0){this._width=s,this._height=f,_&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new _t([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-o.ai,o.ai])}getConstrained(s,f){return this._callbacks.getConstrained(s,f)}getCameraQueryGeometry(s,f){if(f.length===1)return[f[0],s];{const{minX:_,minY:S,maxX:k,maxY:z}=o.a2.fromPoints(f).extend(s);return[new o.P(_,S),new o.P(k,S),new o.P(k,z),new o.P(_,z),new o.P(_,S)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:f,zoom:_}=this.getConstrained(this.center,this.zoom);this.setCenter(f),this.setZoom(_),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=o.ag(new Float64Array(16));o.N(s,s,[this._width/2,-this._height/2,1]),o.M(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=o.ag(new Float64Array(16)),o.N(s,s,[1,-1,1]),o.M(s,s,[-1,-1,0]),o.N(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,f,_,S){const k=_!==void 0?_:this.bearing,z=S=S!==void 0?S:this.pitch,q=o.a1.fromLngLat(s,f),X=-Math.cos(o.ae(z)),he=Math.sin(o.ae(z)),me=he*Math.sin(o.ae(k)),Ee=-he*Math.cos(o.ae(k));let Me=this.elevation;const Ue=f-Me;let Xe;X*Ue>=0||Math.abs(X)<.1?(Xe=1e4,Me=f+Xe*X):Xe=-Ue/X;let ut,ct,ft=o.aQ(1,q.y),xt=0;do{if(xt+=1,xt>10)break;ct=Xe/ft,ut=new o.a1(q.x+me*ct,q.y+Ee*ct),ft=1/ut.meterInMercatorCoordinateUnits()}while(Math.abs(Xe-ct*ft)>1e-12);return{center:ut.toLngLat(),elevation:Me,zoom:o.ak(this.height/2/Math.tan(this.fovInRadians/2)/ct/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;const f=o.aj(1,this.center.lat)*this.worldSize,_=this.cameraToCenterDistance/f,S=o.a1.fromLngLat(this.center,this.elevation),k=De(this.center,this.elevation,this.pitch,this.bearing,_);this._elevation=s;const z=this.calculateCenterFromCameraLngLatAlt(k.toLngLat(),o.aQ(k.z,S.y),this.bearing,this.pitch);this._elevation=z.elevation,this._center=z.center,this.setZoom(z.zoom)}getCameraPoint(){const s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const s=o.aj(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];const f=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/f,s.canonical.y/f,1/f/o.$,1/f/o.$]}}class za{constructor(s,f){this.min=s,this.max=f,this.center=o.aR([],o.aS([],this.min,this.max),.5)}quadrant(s){const f=[s%2==0,s<2],_=o.aT(this.min),S=o.aT(this.max);for(let k=0;k<f.length;k++)_[k]=f[k]?this.min[k]:this.center[k],S[k]=f[k]?this.center[k]:this.max[k];return S[2]=this.max[2],new za(_,S)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let f=!0;for(let _=0;_<s.planes.length;_++){const S=this.intersectsPlane(s.planes[_]);if(S===0)return 0;S===1&&(f=!1)}return f?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let f=s[3],_=s[3];for(let S=0;S<3;S++)s[S]>0?(f+=s[S]*this.min[S],_+=s[S]*this.max[S]):(_+=s[S]*this.min[S],f+=s[S]*this.max[S]);return f>=0?2:_<0?0:1}}class wa{distanceToTile2d(s,f,_,S){const k=S.distanceX([s,f]),z=S.distanceY([s,f]);return Math.hypot(k,z)}getWrap(s,f,_){return _}getTileBoundingVolume(s,f,_,S){var k,z;let q=0,X=0;if(S?.terrain){const me=new o.Z(s.z,f,s.z,s.x,s.y),Ee=S.terrain.getMinMaxElevation(me);q=(k=Ee.minElevation)!==null&&k!==void 0?k:Math.min(0,_),X=(z=Ee.maxElevation)!==null&&z!==void 0?z:Math.max(0,_)}const he=1<<s.z;return new za([f+s.x/he,s.y/he,q],[f+(s.x+1)/he,(s.y+1)/he,X])}allowVariableZoom(s,f){const _=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,S=o.ah(78.5-_/2,0,60);return!!f.terrain||s.pitch>S}allowWorldCopies(){return!0}prepareNextFrame(){}}class aa{constructor(s,f,_){this.points=s,this.planes=f,this.aabb=_}static fromInvProjectionMatrix(s,f=1,_=0,S,k){const z=k?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],q=Math.pow(2,_),X=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Me=>function(Ue,Xe,ut,ct){const ft=o.aw([],Ue,Xe),xt=1/ft[3]/ut*ct;return o.aY(ft,ft,[xt,xt,1/ft[3],xt])}(Me,s,f,q));S&&function(Me,Ue,Xe,ut){const ct=ut?4:0,ft=ut?0:4;let xt=0;const yt=[],wt=[];for(let Bt=0;Bt<4;Bt++){const Yt=o.aU([],Me[Bt+ft],Me[Bt+ct]),dn=o.aZ(Yt);o.aR(Yt,Yt,1/dn),yt.push(dn),wt.push(Yt)}for(let Bt=0;Bt<4;Bt++){const Yt=o.a_(Me[Bt+ct],wt[Bt],Xe);xt=Yt!==null&&Yt>=0?Math.max(xt,Yt):Math.max(xt,yt[Bt])}const Pt=function(Bt,Yt){const dn=o.aU([],Bt[Yt[0]],Bt[Yt[1]]),Xt=o.aU([],Bt[Yt[2]],Bt[Yt[1]]),nn=[0,0,0,0];return o.aV(nn,o.aW([],dn,Xt)),nn[3]=-o.aX(nn,Bt[Yt[0]]),nn}(Me,Ue),Ft=function(Bt,Yt){const dn=o.a$(Bt),Xt=o.b0([],Bt,1/dn),nn=o.aU([],Yt,o.aR([],Xt,o.aX(Yt,Xt))),un=o.a$(nn);if(un>0){const qn=Math.sqrt(1-Xt[3]*Xt[3]),Qn=o.aR([],Xt,-Xt[3]),Tn=o.aS([],Qn,o.aR([],nn,qn/un));return o.b1(Yt,Tn)}return null}(Xe,Pt);if(Ft!==null){const Bt=Ft/o.aX(wt[0],Pt);xt=Math.min(xt,Bt)}for(let Bt=0;Bt<4;Bt++){const Yt=Math.min(xt,yt[Bt]);Me[Bt+ft]=[Me[Bt+ct][0]+wt[Bt][0]*Yt,Me[Bt+ct][1]+wt[Bt][1]*Yt,Me[Bt+ct][2]+wt[Bt][2]*Yt,1]}}(X,z[0],S,k);const he=z.map(Me=>{const Ue=o.aU([],X[Me[0]],X[Me[1]]),Xe=o.aU([],X[Me[2]],X[Me[1]]),ut=o.aV([],o.aW([],Ue,Xe)),ct=-o.aX(ut,X[Me[1]]);return ut.concat(ct)}),me=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Ee=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Me of X)for(let Ue=0;Ue<3;Ue++)me[Ue]=Math.min(me[Ue],Me[Ue]),Ee[Ue]=Math.max(Ee[Ue],Me[Ue]);return new aa(X,he,new za(me,Ee))}}class Dr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,f,_){return this._helper.interpolatePadding(s,f,_)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,f,_=!0){this._helper.resize(s,f,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,f){this._helper.overrideNearFarZ(s,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,f){}constructor(s,f,_,S,k){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Eo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(z,q)=>this.getConstrained(z,q)},s,f,_,S,k),this._coveringTilesDetailsProvider=new wa}clone(){const s=new Dr;return s.apply(this),s}apply(s,f,_){this._helper.apply(s,f,_)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){const f=[new o.b2(0,s)];if(this._helper._renderWorldCopies){const _=this.screenPointToMercatorCoordinate(new o.P(0,0)),S=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),k=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),z=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),q=Math.floor(Math.min(_.x,S.x,k.x,z.x)),X=Math.floor(Math.max(_.x,S.x,k.x,z.x)),he=1;for(let me=q-he;me<=X+he;me++)me!==0&&f.push(new o.b2(me,s))}return f}getCameraFrustum(){return aa.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){const f=this.screenPointToLocation(this.centerPoint,s),_=s?s.getElevationForLngLatZoom(f,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(_)}setLocationAtPoint(s,f){const _=o.aj(this.elevation,this.center.lat),S=this.screenPointToMercatorCoordinateAtZ(f,_),k=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,_),z=o.a1.fromLngLat(s),q=new o.a1(z.x-(S.x-k.x),z.y-(S.y-k.y));this.setCenter(q?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,f){return f?this.coordinatePoint(o.a1.fromLngLat(s),f.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.a1.fromLngLat(s))}screenPointToLocation(s,f){var _;return(_=this.screenPointToMercatorCoordinate(s,f))===null||_===void 0?void 0:_.toLngLat()}screenPointToMercatorCoordinate(s,f){if(f){const _=f.pointCoordinate(s);if(_!=null)return _}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,f){const _=f||0,S=[s.x,s.y,0,1],k=[s.x,s.y,1,1];o.aw(S,S,this._pixelMatrixInverse),o.aw(k,k,this._pixelMatrixInverse);const z=S[3],q=k[3],X=S[1]/z,he=k[1]/q,me=S[2]/z,Ee=k[2]/q,Me=me===Ee?0:(_-me)/(Ee-me);return new o.a1(o.C.number(S[0]/z,k[0]/q,Me)/this.worldSize,o.C.number(X,he,Me)/this.worldSize,_)}coordinatePoint(s,f=0,_=this._pixelMatrix){const S=[s.x*this.worldSize,s.y*this.worldSize,f,1];return o.aw(S,S,_),new o.P(S[0]/S[3],S[1]/S[3])}getBounds(){const s=Math.max(0,this._helper._height/2-dt(this));return new _t().extend(this.screenPointToLocation(new o.P(0,s))).extend(this.screenPointToLocation(new o.P(this._helper._width,s))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(s,f){return f?f.pointCoordinate(s)!=null:s.y>this.height/2-dt(this)}calculatePosMatrix(s,f=!1,_){var S;const k=(S=s.key)!==null&&S!==void 0?S:o.b3(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),z=f?this._alignedPosMatrixCache:this._posMatrixCache;if(z.has(k)){const he=z.get(k);return _?he.f32:he.f64}const q=Ye(s,this.worldSize);o.O(q,f?this._alignedProjMatrix:this._viewProjMatrix,q);const X={f64:q,f32:new Float32Array(q)};return z.set(k,X),_?X.f32:X.f64}calculateFogMatrix(s){const f=s.key,_=this._fogMatrixCacheF32;if(_.has(f))return _.get(f);const S=Ye(s,this.worldSize);return o.O(S,this._fogMatrix,S),_.set(f,new Float32Array(S)),_.get(f)}getConstrained(s,f){f=o.ah(+f,this.minZoom,this.maxZoom);const _={center:new o.S(s.lng,s.lat),zoom:f};let S=this._helper._lngRange;if(!this._helper._renderWorldCopies&&S===null){const yt=179.9999999999;S=[-yt,yt]}const k=this.tileSize*o.af(_.zoom);let z=0,q=k,X=0,he=k,me=0,Ee=0;const{x:Me,y:Ue}=this.size;if(this._helper._latRange){const yt=this._helper._latRange;z=o.U(yt[1])*k,q=o.U(yt[0])*k,q-z<Ue&&(me=Ue/(q-z))}S&&(X=o.aO(o.V(S[0])*k,0,k),he=o.aO(o.V(S[1])*k,0,k),he<X&&(he+=k),he-X<Me&&(Ee=Me/(he-X)));const{x:Xe,y:ut}=Te(k,s);let ct,ft;const xt=Math.max(Ee||0,me||0);if(xt){const yt=new o.P(Ee?(he+X)/2:Xe,me?(q+z)/2:ut);return _.center=We(k,yt).wrap(),_.zoom+=o.ak(xt),_}if(this._helper._latRange){const yt=Ue/2;ut-yt<z&&(ft=z+yt),ut+yt>q&&(ft=q-yt)}if(S){const yt=(X+he)/2;let wt=Xe;this._helper._renderWorldCopies&&(wt=o.aO(Xe,yt-k/2,yt+k/2));const Pt=Me/2;wt-Pt<X&&(ct=X+Pt),wt+Pt>he&&(ct=he-Pt)}if(ct!==void 0||ft!==void 0){const yt=new o.P(ct??Xe,ft??ut);_.center=We(k,yt).wrap()}return _}calculateCenterFromCameraLngLatAlt(s,f,_,S){return this._helper.calculateCenterFromCameraLngLatAlt(s,f,_,S)}_calculateNearFarZIfNeeded(s,f,_){if(!this._helper.autoCalculateNearFarZ)return;const S=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),k=s-S*this._helper._pixelPerMeter/Math.cos(f),z=S<0?k:s,q=Math.PI/2+this.pitchInRadians,X=o.ae(this.fov)*(Math.abs(Math.cos(o.ae(this.roll)))*this.height+Math.abs(Math.sin(o.ae(this.roll)))*this.width)/this.height*(.5+_.y/this.height),he=Math.sin(X)*z/Math.sin(o.ah(Math.PI-q-X,.01,Math.PI-.01)),me=dt(this),Ee=Math.atan(me/this._helper.cameraToCenterDistance),Me=o.ae(.75),Ue=Ee>Me?2*Ee*(.5+_.y/(2*me)):Me,Xe=Math.sin(Ue)*z/Math.sin(o.ah(Math.PI-q-Ue,.01,Math.PI-.01)),ut=Math.min(he,Xe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-f)*ut+z),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const s=this.centerOffset,f=Te(this.worldSize,this.center),_=f.x,S=f.y;this._helper._pixelPerMeter=o.aj(1,this.center.lat)*this.worldSize;const k=o.ae(Math.min(this.pitch,pe)),z=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(k));let q;this._calculateNearFarZIfNeeded(z,k,s),q=new Float64Array(16),o.b4(q,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aq(this._invProjMatrix,q),q[8]=2*-s.x/this._helper._width,q[9]=2*s.y/this._helper._height,this._projectionMatrix=o.b5(q),o.N(q,q,[1,-1,1]),o.M(q,q,[0,0,-this._helper.cameraToCenterDistance]),o.b6(q,q,-this.rollInRadians),o.b7(q,q,this.pitchInRadians),o.b6(q,q,-this.bearingInRadians),o.M(q,q,[-_,-S,0]),this._mercatorMatrix=o.N([],q,[this.worldSize,this.worldSize,this.worldSize]),o.N(q,q,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,q),o.M(q,q,[0,0,-this.elevation]),this._viewProjMatrix=q,this._invViewProjMatrix=o.aq([],q);const X=[0,0,-1,1];o.aw(X,X,this._invViewProjMatrix),this._cameraPosition=[X[0]/X[3],X[1]/X[3],X[2]/X[3]],this._fogMatrix=new Float64Array(16),o.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,z,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,o.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.M(this._fogMatrix,this._fogMatrix,[-_,-S,0]),o.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,q);const he=this._helper._width%2/2,me=this._helper._height%2/2,Ee=Math.cos(this.bearingInRadians),Me=Math.sin(-this.bearingInRadians),Ue=_-Math.round(_)+Ee*he+Me*me,Xe=S-Math.round(S)+Ee*me+Me*he,ut=new Float64Array(q);if(o.M(ut,ut,[Ue>.5?Ue-1:Ue,Xe>.5?Xe-1:Xe,0]),this._alignedProjMatrix=ut,q=o.aq(new Float64Array(16),this._pixelMatrix),!q)throw new Error("failed to invert matrix");this._pixelMatrixInverse=q,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const s=this.screenPointToMercatorCoordinate(new o.P(0,0)),f=[s.x*this.worldSize,s.y*this.worldSize,0,1];return o.aw(f,f,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const s=o.aj(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,f){const _=o.a1.fromLngLat(s),S=[_.x*this.worldSize,_.y*this.worldSize,f,1];return o.aw(S,S,this._viewProjMatrix),S[2]/S[3]}getProjectionData(s){const{overscaledTileID:f,aligned:_,applyTerrainMatrix:S}=s,k=this._helper.getMercatorTileCoordinates(f),z=f?this.calculatePosMatrix(f,_,!0):null;let q;return q=f&&f.terrainRttPosMatrix32f&&S?f.terrainRttPosMatrix32f:z||o.b8(),{mainMatrix:q,tileMercatorCoords:k,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:q}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,f,_){return 1}transformLightDirection(s){return o.aT(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,f,_,S){const k=this.calculatePosMatrix(_);let z;S?(z=[s,f,S(s,f),1],o.aw(z,z,k)):(z=[s,f,0,1],Il(z,z,k));const q=z[3];return{point:new o.P(z[0]/q,z[1]/q),signedDistanceFromCamera:q,isOccluded:!1}}populateCache(s){for(const f of s)this.calculatePosMatrix(f)}getMatrixForModel(s,f){const _=o.a1.fromLngLat(s,f),S=_.meterInMercatorCoordinateUnits(),k=o.b9();return o.M(k,k,[_.x,_.y,_.z]),o.b6(k,k,Math.PI),o.b7(k,k,Math.PI/2),o.N(k,k,[-S,S,S]),k}getProjectionDataForCustomLayer(s=!0){const f=new o.Z(0,0,0,0,0),_=this.getProjectionData({overscaledTileID:f,applyGlobeMatrix:s}),S=Ye(f,this.worldSize);o.O(S,this._viewProjMatrix,S),_.tileMercatorCoords=[0,0,1,1];const k=[o.$,o.$,this.worldSize/this._helper.pixelsPerMeter],z=o.ba();return o.N(z,S,k),_.fallbackMatrix=z,_.mainMatrix=z,_}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function ru(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ja(I){if(I.useSlerp)if(I.k<1){const s=o.bb(I.startEulerAngles.roll,I.startEulerAngles.pitch,I.startEulerAngles.bearing),f=o.bb(I.endEulerAngles.roll,I.endEulerAngles.pitch,I.endEulerAngles.bearing),_=new Float64Array(4);o.bc(_,s,f,I.k);const S=o.bd(_);I.tr.setRoll(S.roll),I.tr.setPitch(S.pitch),I.tr.setBearing(S.bearing)}else I.tr.setRoll(I.endEulerAngles.roll),I.tr.setPitch(I.endEulerAngles.pitch),I.tr.setBearing(I.endEulerAngles.bearing);else I.tr.setRoll(o.C.number(I.startEulerAngles.roll,I.endEulerAngles.roll,I.k)),I.tr.setPitch(o.C.number(I.startEulerAngles.pitch,I.endEulerAngles.pitch,I.k)),I.tr.setBearing(o.C.number(I.startEulerAngles.bearing,I.endEulerAngles.bearing,I.k))}function Ja(I,s,f,_,S){const k=S.padding,z=Te(S.worldSize,f.getNorthWest()),q=Te(S.worldSize,f.getNorthEast()),X=Te(S.worldSize,f.getSouthEast()),he=Te(S.worldSize,f.getSouthWest()),me=o.ae(-_),Ee=z.rotate(me),Me=q.rotate(me),Ue=X.rotate(me),Xe=he.rotate(me),ut=new o.P(Math.max(Ee.x,Me.x,Xe.x,Ue.x),Math.max(Ee.y,Me.y,Xe.y,Ue.y)),ct=new o.P(Math.min(Ee.x,Me.x,Xe.x,Ue.x),Math.min(Ee.y,Me.y,Xe.y,Ue.y)),ft=ut.sub(ct),xt=(S.width-(k.left+k.right+s.left+s.right))/ft.x,yt=(S.height-(k.top+k.bottom+s.top+s.bottom))/ft.y;if(yt<0||xt<0)return void ru();const wt=Math.min(o.ak(S.scale*Math.min(xt,yt)),I.maxZoom),Pt=o.P.convert(I.offset),Ft=new o.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(o.ae(_)),Bt=Pt.add(Ft).mult(S.scale/o.af(wt));return{center:We(S.worldSize,z.add(X).div(2).sub(Bt)),zoom:wt,bearing:_}}class ya{get useGlobeControls(){return!1}handlePanInertia(s,f){const _=s.mag(),S=Math.abs(dt(f));return{easingOffset:s.mult(Math.min(.75*S/_,1)),easingCenter:f.center}}handleMapControlsRollPitchBearingZoom(s,f){s.bearingDelta&&f.setBearing(f.bearing+s.bearingDelta),s.pitchDelta&&f.setPitch(f.pitch+s.pitchDelta),s.rollDelta&&f.setRoll(f.roll+s.rollDelta),s.zoomDelta&&f.setZoom(f.zoom+s.zoomDelta)}handleMapControlsPan(s,f,_){s.around.distSqr(f.centerPoint)<.01||f.setLocationAtPoint(_,s.around)}cameraForBoxAndBearing(s,f,_,S,k){return Ja(s,f,_,S,k)}handleJumpToCenterZoom(s,f){s.zoom!==(f.zoom!==void 0?+f.zoom:s.zoom)&&s.setZoom(+f.zoom),f.center!==void 0&&s.setCenter(o.S.convert(f.center))}handleEaseTo(s,f){const _=s.zoom,S=s.padding,k={roll:s.roll,pitch:s.pitch,bearing:s.bearing},z={roll:f.roll===void 0?s.roll:f.roll,pitch:f.pitch===void 0?s.pitch:f.pitch,bearing:f.bearing===void 0?s.bearing:f.bearing},q=f.zoom!==void 0,X=!s.isPaddingEqual(f.padding);let he=!1;const me=q?+f.zoom:s.zoom;let Ee=s.centerPoint.add(f.offsetAsPoint);const Me=s.screenPointToLocation(Ee),{center:Ue,zoom:Xe}=s.getConstrained(o.S.convert(f.center||Me),me??_);cA(s,Ue);const ut=Te(s.worldSize,Me),ct=Te(s.worldSize,Ue).sub(ut),ft=o.af(Xe-_);return he=Xe!==_,{easeFunc:xt=>{if(he&&s.setZoom(o.C.number(_,Xe,xt)),o.be(k,z)||ja({startEulerAngles:k,endEulerAngles:z,tr:s,k:xt,useSlerp:k.roll!=z.roll}),X&&(s.interpolatePadding(S,f.padding,xt),Ee=s.centerPoint.add(f.offsetAsPoint)),f.around)s.setLocationAtPoint(f.around,f.aroundPoint);else{const yt=o.af(s.zoom-_),wt=Xe>_?Math.min(2,ft):Math.max(.5,ft),Pt=Math.pow(wt,1-xt),Ft=We(s.worldSize,ut.add(ct.mult(xt*Pt)).mult(yt));s.setLocationAtPoint(s.renderWorldCopies?Ft.wrap():Ft,Ee)}},isZooming:he,elevationCenter:Ue}}handleFlyTo(s,f){const _=f.zoom!==void 0,S=s.zoom,k=s.getConstrained(o.S.convert(f.center||f.locationAtOffset),_?+f.zoom:S),z=k.center,q=k.zoom;cA(s,z);const X=Te(s.worldSize,f.locationAtOffset),he=Te(s.worldSize,z).sub(X),me=he.mag(),Ee=o.af(q-S);let Me;if(f.minZoom!==void 0){const Ue=Math.min(+f.minZoom,S,q),Xe=s.getConstrained(z,Ue).zoom;Me=o.af(Xe-S)}return{easeFunc:(Ue,Xe,ut,ct)=>{s.setZoom(Ue===1?q:S+o.ak(Xe));const ft=Ue===1?z:We(s.worldSize,X.add(he.mult(ut)).mult(Xe));s.setLocationAtPoint(s.renderWorldCopies?ft.wrap():ft,ct)},scaleOfZoom:Ee,targetCenter:z,scaleOfMinZoom:Me,pixelPathLength:me}}}class Rr{constructor(s,f,_){this.blendFunction=s,this.blendColor=f,this.mask=_}}Rr.Replace=[1,0],Rr.disabled=new Rr(Rr.Replace,o.bf.transparent,[!1,!1,!1,!1]),Rr.unblended=new Rr(Rr.Replace,o.bf.transparent,[!0,!0,!0,!0]),Rr.alphaBlended=new Rr([1,771],o.bf.transparent,[!0,!0,!0,!0]);const vl=2305;class Zi{constructor(s,f,_){this.enable=s,this.mode=f,this.frontFace=_}}Zi.disabled=new Zi(!1,1029,vl),Zi.backCCW=new Zi(!0,1029,vl),Zi.frontCCW=new Zi(!0,1028,vl);class wi{constructor(s,f,_){this.func=s,this.mask=f,this.range=_}}wi.ReadOnly=!1,wi.ReadWrite=!0,wi.disabled=new wi(519,wi.ReadOnly,[0,1]);const Yr=7680;class ee{constructor(s,f,_,S,k,z){this.test=s,this.ref=f,this.mask=_,this.fail=S,this.depthFail=k,this.pass=z}}ee.disabled=new ee({func:519,mask:0},0,0,Yr,Yr,Yr);const Be=new WeakMap;function at(I){var s;if(Be.has(I))return Be.get(I);{const f=(s=I.getParameter(I.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Be.set(I,f),f}}class Gt{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;const f=s.context,_=f.gl;this._texFormat=_.RGBA,this._texType=_.UNSIGNED_BYTE;const S=new o.aL;S.emplaceBack(-1,-1),S.emplaceBack(2,-1),S.emplaceBack(-1,2);const k=new o.aN;k.emplaceBack(0,1,2),this._fullscreenTriangle=new Kl(f.createVertexBuffer(S,ga.members),f.createIndexBuffer(k),o.aM.simpleSegment(0,0,S.length,k.length)),this._resultBuffer=new Uint8Array(4),f.activeTexture.set(_.TEXTURE1);const z=_.createTexture();_.bindTexture(_.TEXTURE_2D,z),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texImage2D(_.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=f.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(z),at(_)&&(this._pbo=_.createBuffer(),_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.bufferData(_.PIXEL_PACK_BUFFER,4,_.STREAM_READ),_.bindBuffer(_.PIXEL_PACK_BUFFER,null))}destroy(){const s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,f){const _=this._updateCount;return this._readbackQueue?_>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():_>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,f),this._updateCount++,this._measuredError}_bindFramebuffer(){const s=this._cachedRenderContext.context,f=s.gl;s.activeTexture.set(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,f){const _=this._cachedRenderContext.context,S=_.gl;if(this._bindFramebuffer(),_.viewport.set([0,0,this._texWidth,this._texHeight]),_.clear({color:o.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(_,S.TRIANGLES,wi.disabled,ee.disabled,Rr.unblended,Zi.disabled,((k,z)=>({u_input:k,u_output_expected:z}))(s,f),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&at(S)){S.bindBuffer(S.PIXEL_PACK_BUFFER,this._pbo),S.readBuffer(S.COLOR_ATTACHMENT0),S.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),S.bindBuffer(S.PIXEL_PACK_BUFFER,null);const k=S.fenceSync(S.SYNC_GPU_COMMANDS_COMPLETE,0);S.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:k}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&at(s)){const f=s.clientWaitSync(this._readbackQueue.sync,0,0);if(f===s.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(f===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Gt._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let f=0;return f+=s[0]/256,f+=s[1]/65536,f+=s[2]/16777216,s[3]<127&&(f=-f),f/128}}const Si=o.$/128;function Xn(I,s){const f=I.granularity!==void 0?Math.max(I.granularity,1):1,_=f+(I.generateBorders?2:0),S=f+(I.extendToNorthPole||I.generateBorders?1:0)+(I.extendToSouthPole||I.generateBorders?1:0),k=_+1,z=S+1,q=I.generateBorders?-1:0,X=I.generateBorders||I.extendToNorthPole?-1:0,he=f+(I.generateBorders?1:0),me=f+(I.generateBorders||I.extendToSouthPole?1:0),Ee=k*z,Me=_*S*6,Ue=k*z>65536;if(Ue&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Xe=Ue||s==="32bit",ut=new Int16Array(2*Ee);let ct=0;for(let yt=X;yt<=me;yt++)for(let wt=q;wt<=he;wt++){let Pt=wt/f*o.$;wt===-1&&(Pt=-Si),wt===f+1&&(Pt=o.$+Si);let Ft=yt/f*o.$;yt===-1&&(Ft=I.extendToNorthPole?o.bh:-Si),yt===f+1&&(Ft=I.extendToSouthPole?o.bi:o.$+Si),ut[ct++]=Pt,ut[ct++]=Ft}const ft=Xe?new Uint32Array(Me):new Uint16Array(Me);let xt=0;for(let yt=0;yt<S;yt++)for(let wt=0;wt<_;wt++){const Pt=wt+1+yt*k,Ft=wt+(yt+1)*k,Bt=wt+1+(yt+1)*k;ft[xt++]=wt+yt*k,ft[xt++]=Ft,ft[xt++]=Pt,ft[xt++]=Pt,ft[xt++]=Ft,ft[xt++]=Bt}return{vertices:ut.buffer.slice(0),indices:ft.buffer.slice(0),uses32bitIndices:Xe}}const $i=new o.aK({fill:new o.bj(128,2),line:new o.bj(512,0),tile:new o.bj(128,32),stencil:new o.bj(128,1),circle:3});class or{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ko.projectionGlobe}get vertexShaderPreludeCode(){return ko.projectionMercator.vertexSource}get subdivisionGranularity(){return $i}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new Gt(s));const f=o.U(this._errorQueryLatitudeDegrees),_=2*Math.atan(Math.exp(Math.PI-f*Math.PI*2))-.5*Math.PI,S=this._errorMeasurement.updateErrorLoop(f,_),k=U.now();S!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=S,this._errorMeasurementLastChangeTime=k);const z=Math.min(Math.max((k-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bl(z))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,f,_,S,k){const z=(k==="stencil"?$i.stencil:$i.tile).getGranularityForZoomLevel(f.z);return this._getMesh(s,{granularity:z,generateBorders:_,extendToNorthPole:f.y===0&&S,extendToSouthPole:f.y===(1<<f.z)-1&&S})}_getMesh(s,f){const _=this._getMeshKey(f);if(_ in this._tileMeshCache)return this._tileMeshCache[_];const S=function(k,z){const q=Xn(z,"16bit"),X=o.aL.deserialize({arrayBuffer:q.vertices,length:q.vertices.byteLength/2/2}),he=o.aN.deserialize({arrayBuffer:q.indices,length:q.indices.byteLength/2/3});return new Kl(k.createVertexBuffer(X,ga.members),k.createIndexBuffer(he),o.aM.simpleSegment(0,0,X.length,he.length))}(s,f);return this._tileMeshCache[_]=S,S}recalculate(s){}hasTransition(){const s=U.now();let f=!1;return f=f||(s-this._errorMeasurementLastChangeTime)/1e3<.7,f=f||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,f}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}const Ri=new o.r({type:new o.D(o.v.projection.type)});class Xi extends o.E{constructor(s){super(),this._transitionable=new o.t(Ri),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0)),this._mercatorProjection=new xr,this._verticalPerspectiveProjection=new or}get transitionState(){const s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof o.bm){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,f,_,S,k){return this.currentProjection.getMeshFromTileID(s,f,_,S,k)}setProjection(s){this._transitionable.setValue("type",s?.type||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function to(I){const s=mr(I.worldSize,I.center.lat);return 2*Math.PI*s}function co(I,s,f,_,S){const k=1/(1<<S),z=s/o.$*k+_*k,q=o.bo((I/o.$*k+f*k)*Math.PI*2+Math.PI,2*Math.PI),X=2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI,he=Math.cos(X),me=new Float64Array(3);return me[0]=Math.sin(q)*he,me[1]=Math.sin(X),me[2]=Math.cos(q)*he,me}function Ar(I){return function(s,f){const _=Math.cos(f),S=new Float64Array(3);return S[0]=Math.sin(s)*_,S[1]=Math.sin(f),S[2]=Math.cos(s)*_,S}(I.lng*Math.PI/180,I.lat*Math.PI/180)}function mr(I,s){return I/(2*Math.PI)/Math.cos(s*Math.PI/180)}function ho(I){const s=Math.asin(I[1])/Math.PI*180,f=Math.sqrt(I[0]*I[0]+I[2]*I[2]);if(f>1e-6){const _=I[0]/f,S=Math.acos(I[2]/f),k=(_>0?S:-S)/Math.PI*180;return new o.S(o.aO(k,-180,180),s)}return new o.S(0,s)}function No(I){return Math.cos(I*Math.PI/180)}function jr(I,s){const f=No(I),_=No(s);return o.ak(_/f)}function qs(I,s){const f=I.rotate(s.bearingInRadians),_=s.zoom+jr(s.center.lat,0),S=o.bk(1/No(s.center.lat),1/No(Math.min(Math.abs(s.center.lat),60)),o.bn(_,7,3,0,1)),k=360/to({worldSize:s.worldSize,center:{lat:s.center.lat}});return new o.S(s.center.lng-f.x*k*S,o.ah(s.center.lat+f.y*k,-o.ai,o.ai))}function Ll(I){const s=.5*I,f=Math.sin(s),_=Math.cos(s);return Math.log(f+_)-Math.log(_-f)}function Yu(I,s,f,_){const S=I.lat+f*_;if(Math.abs(f)>1){const k=(Math.sign(I.lat+f)!==Math.sign(I.lat)?-Math.abs(I.lat):Math.abs(I.lat))*Math.PI/180,z=Math.abs(I.lat+f)*Math.PI/180,q=Ll(k+_*(z-k)),X=Ll(k),he=Ll(z);return new o.S(I.lng+s*((q-X)/(he-X)),S)}return new o.S(I.lng+s*_,S)}class ps{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;const s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,f,_,S){const k=`${s.z}_${s.x}_${s.y}_${S?.terrain?"t":""}`,z=this._cache.get(k);if(z)return z;const q=this._cachePrevious.get(k);if(q)return this._cache.set(k,q),q;const X=this._boundingVolumeFactory(s,f,_,S);return this._cache.set(k,X),this._hadAnyChanges=!0,X}}class gd{constructor(s,f,_,S){this.min=_,this.max=S,this.points=s,this.planes=f}static fromAabb(s,f){const _=[];for(let S=0;S<8;S++)_.push([1&~S?s[0]:f[0],(S>>1&1)==1?f[1]:s[1],(S>>2&1)==1?f[2]:s[2]]);return new gd(_,[[-1,0,0,f[0]],[1,0,0,-s[0]],[0,-1,0,f[1]],[0,1,0,-s[1]],[0,0,-1,f[2]],[0,0,1,-s[2]]],s,f)}static fromCenterSizeAngles(s,f,_){const S=o.br([],_[0],_[1],_[2]),k=o.bs([],[f[0],0,0],S),z=o.bs([],[0,f[1],0],S),q=o.bs([],[0,0,f[2]],S),X=[...s],he=[...s];for(let Ee=0;Ee<8;Ee++)for(let Me=0;Me<3;Me++){const Ue=s[Me]+k[Me]*(1&~Ee?-1:1)+z[Me]*((Ee>>1&1)==1?1:-1)+q[Me]*((Ee>>2&1)==1?1:-1);X[Me]=Math.min(X[Me],Ue),he[Me]=Math.max(he[Me],Ue)}const me=[];for(let Ee=0;Ee<8;Ee++){const Me=[...s];o.aS(Me,Me,o.aR([],k,1&~Ee?-1:1)),o.aS(Me,Me,o.aR([],z,(Ee>>1&1)==1?1:-1)),o.aS(Me,Me,o.aR([],q,(Ee>>2&1)==1?1:-1)),me.push(Me)}return new gd(me,[[...k,-o.aX(k,me[0])],[...z,-o.aX(z,me[0])],[...q,-o.aX(q,me[0])],[-k[0],-k[1],-k[2],-o.aX(k,me[7])],[-z[0],-z[1],-z[2],-o.aX(z,me[7])],[-q[0],-q[1],-q[2],-o.aX(q,me[7])]],X,he)}intersectsFrustum(s){let f=!0;const _=this.points.length,S=this.planes.length,k=s.planes.length,z=s.points.length;for(let q=0;q<k;q++){const X=s.planes[q];let he=0;for(let me=0;me<_;me++){const Ee=this.points[me];X[0]*Ee[0]+X[1]*Ee[1]+X[2]*Ee[2]+X[3]>=0&&he++}if(he===0)return 0;he<_&&(f=!1)}if(f)return 2;for(let q=0;q<S;q++){const X=this.planes[q];let he=0;for(let me=0;me<z;me++){const Ee=s.points[me];X[0]*Ee[0]+X[1]*Ee[1]+X[2]*Ee[2]+X[3]>=0&&he++}if(he===0)return 0}return 1}intersectsPlane(s){const f=this.points.length;let _=0;for(let S=0;S<f;S++){const k=this.points[S];s[0]*k[0]+s[1]*k[1]+s[2]*k[2]+s[3]>=0&&_++}return _===f?2:_===0?0:1}}function Ra(I,s,f){const _=I-s;return _<0?-_:Math.max(0,_-f)}function yd(I,s,f,_,S){const k=I-f;let z;return z=k<0?Math.min(-k,1+k-S):k>1?Math.min(Math.max(k-S,0),1-k):0,Math.max(z,Ra(s,_,S))}class PA{constructor(){this._boundingVolumeCache=new ps(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,f,_,S){const k=1<<_.z,z=1/k,q=_.x/k,X=_.y/k;let he=2;return he=Math.min(he,yd(s,f,q,X,z)),he=Math.min(he,yd(s,f,q+.5,-X-z,z)),he=Math.min(he,yd(s,f,q+.5,2-X-z,z)),he}getWrap(s,f,_){const S=1<<f.z,k=1/S,z=f.x/S,q=Ra(s.x,z,k),X=Ra(s.x,z-1,k),he=Ra(s.x,z+1,k),me=Math.min(q,X,he);return me===he?1:me===X?-1:0}allowVariableZoom(s,f){return Tt(s,f)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,f,_,S){return this._boundingVolumeCache.getTileBoundingVolume(s,f,_,S)}_computeTileBoundingVolume(s,f,_,S){var k,z;let q=0,X=0;if(S?.terrain){const he=new o.Z(s.z,f,s.z,s.x,s.y),me=S.terrain.getMinMaxElevation(he);q=(k=me.minElevation)!==null&&k!==void 0?k:Math.min(0,_),X=(z=me.maxElevation)!==null&&z!==void 0?z:Math.max(0,_)}if(q/=o.bu,X/=o.bu,q+=1,X+=1,s.z<=0)return gd.fromAabb([-X,-X,-X],[X,X,X]);if(s.z===1)return gd.fromAabb([s.x===0?-X:0,s.y===0?0:-X,-X],[s.x===0?0:X,s.y===0?X:0,X]);{const he=[co(0,0,s.x,s.y,s.z),co(o.$,0,s.x,s.y,s.z),co(o.$,o.$,s.x,s.y,s.z),co(0,o.$,s.x,s.y,s.z)],me=[];for(const nn of he)me.push(o.aR([],nn,X));if(X!==q)for(const nn of he)me.push(o.aR([],nn,q));s.y===0&&me.push([0,1,0]),s.y===(1<<s.z)-1&&me.push([0,-1,0]);const Ee=[1,1,1],Me=[-1,-1,-1];for(const nn of me)for(let un=0;un<3;un++)Ee[un]=Math.min(Ee[un],nn[un]),Me[un]=Math.max(Me[un],nn[un]);const Ue=co(o.$/2,o.$/2,s.x,s.y,s.z),Xe=o.aW([],[0,1,0],Ue);o.aV(Xe,Xe);const ut=o.aW([],Ue,Xe);o.aV(ut,ut);const ct=o.aW([],he[2],he[1]);o.aV(ct,ct);const ft=o.aW([],he[0],he[3]);o.aV(ft,ft),me.push(o.aR([],Ue,X)),s.y>=(1<<s.z)/2&&me.push(o.aR([],co(o.$/2,0,s.x,s.y,s.z),X)),s.y<(1<<s.z)/2&&me.push(o.aR([],co(o.$/2,o.$,s.x,s.y,s.z),X));const xt=qu(Ue,me),yt=qu(ut,me),wt=[-Ue[0],-Ue[1],-Ue[2],xt.max],Pt=[Ue[0],Ue[1],Ue[2],-xt.min],Ft=[-ut[0],-ut[1],-ut[2],yt.max],Bt=[ut[0],ut[1],ut[2],-yt.min],Yt=[...ct,0],dn=[...ft,0],Xt=[];return s.y===0?Xt.push(o.bt(dn,Yt,wt),o.bt(dn,Yt,Pt)):Xt.push(o.bt(Ft,Yt,wt),o.bt(Ft,Yt,Pt),o.bt(Ft,dn,wt),o.bt(Ft,dn,Pt)),s.y===(1<<s.z)-1?Xt.push(o.bt(dn,Yt,wt),o.bt(dn,Yt,Pt)):Xt.push(o.bt(Bt,Yt,wt),o.bt(Bt,Yt,Pt),o.bt(Bt,dn,wt),o.bt(Bt,dn,Pt)),new gd(Xt,[wt,Pt,Ft,Bt,Yt,dn],Ee,Me)}}}function qu(I,s){let f=1/0,_=-1/0;for(const S of s){const k=o.aX(I,S);f=Math.min(f,k),_=Math.max(_,k)}return{min:f,max:_}}class gh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,f,_){return this._helper.interpolatePadding(s,f,_)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,f){this._helper.resize(s,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,f){this._helper.overrideNearFarZ(s,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=o.bv(),this._projectionMatrix=o.b9(),this._globeViewProjMatrix32f=o.b8(),this._globeViewProjMatrixNoCorrection=o.b9(),this._globeViewProjMatrixNoCorrectionInverted=o.b9(),this._globeProjMatrixInverted=o.b9(),this._cameraPosition=o.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Eo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,f)=>this.getConstrained(s,f)}),this._coveringTilesDetailsProvider=new PA}clone(){const s=new gh;return s.apply(this),s}apply(s,f){this._globeLatitudeErrorCorrectionRadians=f||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const s=o.bp();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){const{overscaledTileID:f,applyGlobeMatrix:_}=s,S=this._helper.getMercatorTileCoordinates(f);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:S,clippingPlane:this._cachedClippingPlane,projectionTransition:_?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){const f=this.pitchInRadians,_=this.cameraToCenterDistance/s,S=Math.sin(f)*_,k=Math.cos(f)*_+1,z=1/Math.sqrt(S*S+k*k)*1;let q=-S,X=k;const he=Math.sqrt(q*q+X*X);q/=he,X/=he;const me=[0,q,X];o.bw(me,me,[0,0,0],-this.bearingInRadians),o.bx(me,me,[0,0,0],-1*this.center.lat*Math.PI/180),o.by(me,me,[0,0,0],this.center.lng*Math.PI/180);const Ee=1/o.aZ(me);return o.aR(me,me,Ee),[...me,-z*Ee]}isLocationOccluded(s){return!this.isSurfacePointVisible(Ar(s))}transformLightDirection(s){const f=this._helper._center.lng*Math.PI/180,_=this._helper._center.lat*Math.PI/180,S=Math.cos(_),k=[Math.sin(f)*S,Math.sin(_),Math.cos(f)*S],z=[k[2],0,-k[0]],q=[0,0,0];o.aW(q,z,k),o.aV(z,z),o.aV(q,q);const X=[0,0,0];return o.aV(X,[z[0]*s[0]+q[0]*s[1]+k[0]*s[2],z[1]*s[0]+q[1]*s[1]+k[1]*s[2],z[2]*s[0]+q[2]*s[1]+k[2]*s[2]]),X}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,f,_){const S=function(q,X,he){const me=1/(1<<he.z);return new o.a1(q/o.$*me+he.x*me,X/o.$*me+he.y*me)}(s,f,_.canonical),k=(z=S.y,[o.bo(S.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI]);var z;return this.getCircleRadiusCorrection()/Math.cos(k[1])}projectTileCoordinates(s,f,_,S){const k=_.canonical,z=co(s,f,k.x,k.y,k.z),q=1+(S?S(s,f):0)/o.bu,X=[z[0]*q,z[1]*q,z[2]*q,1];o.aw(X,X,this._globeViewProjMatrixNoCorrection);const he=this._cachedClippingPlane,me=he[0]*z[0]+he[1]*z[1]+he[2]*z[2]+he[3]<0;return{point:new o.P(X[0]/X[3],X[1]/X[3]),signedDistanceFromCamera:X[3],isOccluded:me}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const s=mr(this.worldSize,this.center.lat),f=o.ba(),_=o.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),o.b4(f,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const S=this.centerOffset;f[8]=2*-S.x/this._helper._width,f[9]=2*S.y/this._helper._height,this._projectionMatrix=o.b5(f),this._globeProjMatrixInverted=o.ba(),o.aq(this._globeProjMatrixInverted,f),o.M(f,f,[0,0,-this.cameraToCenterDistance]),o.b6(f,f,this.rollInRadians),o.b7(f,f,-this.pitchInRadians),o.b6(f,f,this.bearingInRadians),o.M(f,f,[0,0,-s]);const k=o.bp();k[0]=s,k[1]=s,k[2]=s,o.b7(_,f,this.center.lat*Math.PI/180),o.bz(_,_,-this.center.lng*Math.PI/180),o.N(_,_,k),this._globeViewProjMatrixNoCorrection=_,o.b7(f,f,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bz(f,f,-this.center.lng*Math.PI/180),o.N(f,f,k),this._globeViewProjMatrix32f=new Float32Array(f),this._globeViewProjMatrixNoCorrectionInverted=o.ba(),o.aq(this._globeViewProjMatrixNoCorrectionInverted,_);const z=o.bp();this._cameraPosition=o.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/s,o.bw(this._cameraPosition,this._cameraPosition,z,-this.rollInRadians),o.bx(this._cameraPosition,this._cameraPosition,z,this.pitchInRadians),o.bw(this._cameraPosition,this._cameraPosition,z,-this.bearingInRadians),o.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bx(this._cameraPosition,this._cameraPosition,z,-this.center.lat*Math.PI/180),o.by(this._cameraPosition,this._cameraPosition,z,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);const q=o.b5(this._globeViewProjMatrixNoCorrectionInverted);o.N(q,q,[1,1,-1]),this._cachedFrustum=aa.fromInvProjectionMatrix(q,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){o.w("calculateFogMatrix is not supported on globe projection.");const f=o.ba();return o.ag(f),f}getVisibleUnwrappedCoordinates(s){return[new o.b2(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,f){if(!this._globeViewProjMatrixNoCorrection)return 1;const _=Ar(s);o.aR(_,_,1+f/o.bu);const S=o.bv();return o.aw(S,[_[0],_[1],_[2],1],this._globeViewProjMatrixNoCorrection),S[2]/S[3]}populateCache(s){}getBounds(){const s=.5*this.width,f=.5*this.height,_=[new o.P(0,0),new o.P(s,0),new o.P(this.width,0),new o.P(this.width,f),new o.P(this.width,this.height),new o.P(s,this.height),new o.P(0,this.height),new o.P(0,f)],S=[];for(const Ee of _)S.push(this.unprojectScreenPoint(Ee));let k=0,z=0,q=0,X=0;const he=this.center;for(const Ee of S){const Me=o.bA(he.lng,Ee.lng),Ue=o.bA(he.lat,Ee.lat);Me<z&&(z=Me),Me>k&&(k=Me),Ue<X&&(X=Ue),Ue>q&&(q=Ue)}const me=[he.lng+z,he.lat+X,he.lng+k,he.lat+q];return this.isSurfacePointOnScreen([0,1,0])&&(me[3]=90,me[0]=-180,me[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(me[1]=-90,me[0]=-180,me[2]=180),new _t(me)}getConstrained(s,f){const _=o.ah(s.lat,-o.ai,o.ai),S=o.ah(+f,this.minZoom+jr(0,_),this.maxZoom);return{center:new o.S(s.lng,_),zoom:S}}calculateCenterFromCameraLngLatAlt(s,f,_,S){return this._helper.calculateCenterFromCameraLngLatAlt(s,f,_,S)}setLocationAtPoint(s,f){const _=Ar(this.unprojectScreenPoint(f)),S=Ar(s),k=o.bp();o.bB(k);const z=o.bp();o.by(z,_,k,-this.center.lng*Math.PI/180),o.bx(z,z,k,this.center.lat*Math.PI/180);const q=S[0]*S[0]+S[2]*S[2],X=z[0]*z[0];if(q<X)return;const he=Math.sqrt(q-X),me=-he,Ee=o.bC(S[0],S[2],z[0],he),Me=o.bC(S[0],S[2],z[0],me),Ue=o.bp();o.by(Ue,S,k,-Ee);const Xe=o.bC(Ue[1],Ue[2],z[1],z[2]),ut=o.bp();o.by(ut,S,k,-Me);const ct=o.bC(ut[1],ut[2],z[1],z[2]),ft=.5*Math.PI,xt=Xe>=-ft&&Xe<=ft,yt=ct>=-ft&&ct<=ft;let wt,Pt;if(xt&&yt){const dn=this.center.lng*Math.PI/180,Xt=this.center.lat*Math.PI/180;o.bD(Ee,dn)+o.bD(Xe,Xt)<o.bD(Me,dn)+o.bD(ct,Xt)?(wt=Ee,Pt=Xe):(wt=Me,Pt=ct)}else if(xt)wt=Ee,Pt=Xe;else{if(!yt)return;wt=Me,Pt=ct}const Ft=wt/Math.PI*180,Bt=Pt/Math.PI*180,Yt=this.center.lat;this.setCenter(new o.S(Ft,o.ah(Bt,-90,90))),this.setZoom(this.zoom+jr(Yt,this.center.lat))}locationToScreenPoint(s,f){const _=Ar(s);if(f){const S=f.getElevationForLngLatZoom(s,this._helper._tileZoom);o.aR(_,_,1+S/o.bu)}return this._projectSurfacePointToScreen(_)}_projectSurfacePointToScreen(s){const f=o.bv();return o.aw(f,[...s,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],new o.P((.5*f[0]+.5)*this.width,(.5*-f[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,f){if(f){const _=f.pointCoordinate(s);if(_)return _}return o.a1.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,f){var _;return(_=this.screenPointToMercatorCoordinate(s,f))===null||_===void 0?void 0:_.toLngLat()}isPointOnMapSurface(s,f){const _=this._cameraPosition,S=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(_,S)}getRayDirectionFromPixel(s){const f=o.bv();f[0]=s.x/this.width*2-1,f[1]=-1*(s.y/this.height*2-1),f[2]=1,f[3]=1,o.aw(f,f,this._globeViewProjMatrixNoCorrectionInverted),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3];const _=o.bp();_[0]=f[0]-this._cameraPosition[0],_[1]=f[1]-this._cameraPosition[1],_[2]=f[2]-this._cameraPosition[2];const S=o.bp();return o.aV(S,_),S}isSurfacePointVisible(s){const f=this._cachedClippingPlane;return f[0]*s[0]+f[1]*s[1]+f[2]*s[2]+f[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;const f=o.bv();return o.aw(f,[...s,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[0]>-1&&f[0]<1&&f[1]>-1&&f[1]<1&&f[2]>-1&&f[2]<1}rayPlanetIntersection(s,f){const _=o.aX(s,f),S=o.bp(),k=o.bp();o.aR(k,f,_),o.aU(S,s,k);const z=1-o.aX(S,S);if(z<0)return null;const q=o.aX(s,s)-1,X=-_+(_<0?1:-1)*Math.sqrt(z),he=q/X,me=X;return{tMin:Math.min(he,me),tMax:Math.max(he,me)}}unprojectScreenPoint(s){const f=this._cameraPosition,_=this.getRayDirectionFromPixel(s),S=this.rayPlanetIntersection(f,_);if(S){const me=o.bp();o.aS(me,f,[_[0]*S.tMin,_[1]*S.tMin,_[2]*S.tMin]);const Ee=o.bp();return o.aV(Ee,me),ho(Ee)}const k=this._cachedClippingPlane,z=k[0]*_[0]+k[1]*_[1]+k[2]*_[2],q=-o.b1(k,f)/z,X=o.bp();if(q>0)o.aS(X,f,[_[0]*q,_[1]*q,_[2]*q]);else{const me=o.bp();o.aS(me,f,[2*_[0],2*_[1],2*_[2]]);const Ee=o.b1(this._cachedClippingPlane,me);o.aU(X,me,[this._cachedClippingPlane[0]*Ee,this._cachedClippingPlane[1]*Ee,this._cachedClippingPlane[2]*Ee])}const he=function(me){const Ee=o.bp();return Ee[0]=me[0]*-me[3],Ee[1]=me[1]*-me[3],Ee[2]=me[2]*-me[3],{center:Ee,radius:Math.sqrt(1-me[3]*me[3])}}(k);return ho(function(me,Ee,Me){const Ue=o.bp();o.aU(Ue,Me,me);const Xe=o.bp();return o.bq(Xe,me,Ue,Ee/o.a$(Ue)),Xe}(he.center,he.radius,X))}getMatrixForModel(s,f){const _=o.S.convert(s),S=1/o.bu,k=o.b9();return o.bz(k,k,_.lng/180*Math.PI),o.b7(k,k,-_.lat/180*Math.PI),o.M(k,k,[0,0,1+f/o.bu]),o.b7(k,k,.5*Math.PI),o.N(k,k,[S,S,S]),k}getProjectionDataForCustomLayer(s=!0){const f=this.getProjectionData({overscaledTileID:new o.Z(0,0,0,0,0),applyGlobeMatrix:s});return f.tileMercatorCoords=[0,0,1,1],f}getFastPathSimpleProjectionMatrix(s){}}class jh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,f,_){return this._helper.interpolatePadding(s,f,_)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,f,_=!0){this._helper.resize(s,f,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,f){this._helper.overrideNearFarZ(s,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,f){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=f,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Eo({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,f)=>this.getConstrained(s,f)}),this._globeness=1,this._mercatorTransform=new Dr,this._verticalPerspectiveTransform=new gh}clone(){const s=new jh;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){const f=this._mercatorTransform.getProjectionData(s),_=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?_.mainMatrix:f.mainMatrix,clippingPlane:_.clippingPlane,tileMercatorCoords:_.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:f.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return o.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,f,_){const S=this._mercatorTransform.getPitchedTextCorrection(s,f,_),k=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,f,_);return o.bk(S,k,this._globeness)}projectTileCoordinates(s,f,_,S){return this.currentTransform.projectTileCoordinates(s,f,_,S)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,f){return this.currentTransform.lngLatToCameraDepth(s,f)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,f){return this.currentTransform.getConstrained(s,f)}calculateCenterFromCameraLngLatAlt(s,f,_,S){return this._helper.calculateCenterFromCameraLngLatAlt(s,f,_,S)}setLocationAtPoint(s,f){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,f),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,f),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,f){return this.currentTransform.locationToScreenPoint(s,f)}screenPointToMercatorCoordinate(s,f){return this.currentTransform.screenPointToMercatorCoordinate(s,f)}screenPointToLocation(s,f){return this.currentTransform.screenPointToLocation(s,f)}isPointOnMapSurface(s,f){return this.currentTransform.isPointOnMapSurface(s,f)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,f){return this.currentTransform.getMatrixForModel(s,f)}getProjectionDataForCustomLayer(s=!0){const f=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return f;const _=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return _.fallbackMatrix=f.mainMatrix,_}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class po{get useGlobeControls(){return!0}handlePanInertia(s,f){const _=qs(s,f);return Math.abs(_.lng-f.center.lng)>180&&(_.lng=f.center.lng+179.5*Math.sign(_.lng-f.center.lng)),{easingCenter:_,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,f){const _=s.around,S=f.screenPointToLocation(_);s.bearingDelta&&f.setBearing(f.bearing+s.bearingDelta),s.pitchDelta&&f.setPitch(f.pitch+s.pitchDelta),s.rollDelta&&f.setRoll(f.roll+s.rollDelta);const k=f.zoom;s.zoomDelta&&f.setZoom(f.zoom+s.zoomDelta);const z=f.zoom-k;if(z===0)return;const q=o.bA(f.center.lng,S.lng),X=q/(Math.abs(q/180)+1),he=o.bA(f.center.lat,S.lat),me=f.getRayDirectionFromPixel(_),Ee=f.cameraPosition,Me=-1*o.aX(Ee,me),Ue=o.bp();o.aS(Ue,Ee,[me[0]*Me,me[1]*Me,me[2]*Me]);const Xe=o.aZ(Ue)-1,ut=Math.exp(.5*-Math.max(Xe-.3,0)),ct=mr(f.worldSize,f.center.lat)/Math.min(f.width,f.height),ft=o.bn(ct,.9,.5,1,.25),xt=(1-o.af(-z))*Math.min(ut,ft),yt=f.center.lat,wt=f.zoom,Pt=new o.S(f.center.lng+X*xt,o.ah(f.center.lat+he*xt,-o.ai,o.ai));f.setLocationAtPoint(S,_);const Ft=f.center,Bt=o.bn(Math.abs(q),45,85,0,1),Yt=o.bn(ct,.75,.35,0,1),dn=Math.pow(Math.max(Bt,Yt),.25),Xt=o.bA(Ft.lng,Pt.lng),nn=o.bA(Ft.lat,Pt.lat);f.setCenter(new o.S(Ft.lng+Xt*dn,Ft.lat+nn*dn).wrap()),f.setZoom(wt+jr(yt,f.center.lat))}handleMapControlsPan(s,f,_){if(!s.panDelta)return;const S=f.center.lat,k=f.zoom;f.setCenter(qs(s.panDelta,f).wrap()),f.setZoom(k+jr(S,f.center.lat))}cameraForBoxAndBearing(s,f,_,S,k){const z=Ja(s,f,_,S,k),q=f.left/k.width*2-1,X=(k.width-f.right)/k.width*2-1,he=f.top/k.height*-2+1,me=(k.height-f.bottom)/k.height*-2+1,Ee=o.bA(_.getWest(),_.getEast())<0,Me=Ee?_.getEast():_.getWest(),Ue=Ee?_.getWest():_.getEast(),Xe=Math.max(_.getNorth(),_.getSouth()),ut=Math.min(_.getNorth(),_.getSouth()),ct=Me+.5*o.bA(Me,Ue),ft=Xe+.5*o.bA(Xe,ut),xt=k.clone();xt.setCenter(z.center),xt.setBearing(z.bearing),xt.setPitch(0),xt.setRoll(0),xt.setZoom(z.zoom);const yt=xt.modelViewProjectionMatrix,wt=[Ar(_.getNorthWest()),Ar(_.getNorthEast()),Ar(_.getSouthWest()),Ar(_.getSouthEast()),Ar(new o.S(Ue,ft)),Ar(new o.S(Me,ft)),Ar(new o.S(ct,Xe)),Ar(new o.S(ct,ut))],Pt=Ar(z.center);let Ft=Number.POSITIVE_INFINITY;for(const Bt of wt)q<0&&(Ft=po.getLesserNonNegativeNonNull(Ft,po.solveVectorScale(Bt,Pt,yt,"x",q))),X>0&&(Ft=po.getLesserNonNegativeNonNull(Ft,po.solveVectorScale(Bt,Pt,yt,"x",X))),he>0&&(Ft=po.getLesserNonNegativeNonNull(Ft,po.solveVectorScale(Bt,Pt,yt,"y",he))),me<0&&(Ft=po.getLesserNonNegativeNonNull(Ft,po.solveVectorScale(Bt,Pt,yt,"y",me)));if(Number.isFinite(Ft)&&Ft!==0)return z.zoom=xt.zoom+o.ak(Ft),z;ru()}handleJumpToCenterZoom(s,f){const _=s.center.lat,S=s.getConstrained(f.center?o.S.convert(f.center):s.center,s.zoom).center;s.setCenter(S.wrap());const k=f.zoom!==void 0?+f.zoom:s.zoom+jr(_,S.lat);s.zoom!==k&&s.setZoom(k)}handleEaseTo(s,f){const _=s.zoom,S=s.center,k=s.padding,z={roll:s.roll,pitch:s.pitch,bearing:s.bearing},q={roll:f.roll===void 0?s.roll:f.roll,pitch:f.pitch===void 0?s.pitch:f.pitch,bearing:f.bearing===void 0?s.bearing:f.bearing},X=f.zoom!==void 0,he=!s.isPaddingEqual(f.padding);let me=!1;const Ee=f.center?o.S.convert(f.center):S,Me=s.getConstrained(Ee,_).center;cA(s,Me);const Ue=s.clone();Ue.setCenter(Me),Ue.setZoom(X?+f.zoom:_+jr(S.lat,Ee.lat)),Ue.setBearing(f.bearing);const Xe=new o.P(o.ah(s.centerPoint.x+f.offsetAsPoint.x,0,s.width),o.ah(s.centerPoint.y+f.offsetAsPoint.y,0,s.height));Ue.setLocationAtPoint(Me,Xe);const ut=(f.offset&&f.offsetAsPoint.mag())>0?Ue.center:Me,ct=X?+f.zoom:_+jr(S.lat,ut.lat),ft=_+jr(S.lat,0),xt=ct+jr(ut.lat,0),yt=o.bA(S.lng,ut.lng),wt=o.bA(S.lat,ut.lat),Pt=o.af(xt-ft);return me=ct!==_,{easeFunc:Ft=>{if(o.be(z,q)||ja({startEulerAngles:z,endEulerAngles:q,tr:s,k:Ft,useSlerp:z.roll!=q.roll}),he&&s.interpolatePadding(k,f.padding,Ft),f.around)o.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(f.around,f.aroundPoint);else{const Bt=xt>ft?Math.min(2,Pt):Math.max(.5,Pt),Yt=Math.pow(Bt,1-Ft),dn=Yu(S,yt,wt,Ft*Yt);s.setCenter(dn.wrap())}if(me){const Bt=o.C.number(ft,xt,Ft)+jr(0,s.center.lat);s.setZoom(Bt)}},isZooming:me,elevationCenter:ut}}handleFlyTo(s,f){const _=f.zoom!==void 0,S=s.center,k=s.zoom,z=s.padding,q=!s.isPaddingEqual(f.padding),X=s.getConstrained(o.S.convert(f.center||f.locationAtOffset),k).center,he=_?+f.zoom:s.zoom+jr(s.center.lat,X.lat),me=s.clone();me.setCenter(X),me.setZoom(he),me.setBearing(f.bearing);const Ee=new o.P(o.ah(s.centerPoint.x+f.offsetAsPoint.x,0,s.width),o.ah(s.centerPoint.y+f.offsetAsPoint.y,0,s.height));me.setLocationAtPoint(X,Ee);const Me=me.center;cA(s,Me);const Ue=function(wt,Pt,Ft){const Bt=Ar(Pt),Yt=Ar(Ft),dn=o.aX(Bt,Yt),Xt=Math.acos(dn),nn=to(wt);return Xt/(2*Math.PI)*nn}(s,S,Me),Xe=k+jr(S.lat,0),ut=he+jr(Me.lat,0),ct=o.af(ut-Xe);let ft;if(typeof f.minZoom=="number"){const wt=+f.minZoom+jr(Me.lat,0),Pt=Math.min(wt,Xe,ut)+jr(0,Me.lat),Ft=s.getConstrained(Me,Pt).zoom+jr(Me.lat,0);ft=o.af(Ft-Xe)}const xt=o.bA(S.lng,Me.lng),yt=o.bA(S.lat,Me.lat);return{easeFunc:(wt,Pt,Ft,Bt)=>{const Yt=Yu(S,xt,yt,Ft);q&&s.interpolatePadding(z,f.padding,wt);const dn=wt===1?Me:Yt;s.setCenter(dn.wrap());const Xt=Xe+o.ak(Pt);s.setZoom(wt===1?he:Xt+jr(0,dn.lat))},scaleOfZoom:ct,targetCenter:Me,scaleOfMinZoom:ft,pixelPathLength:Ue}}static solveVectorScale(s,f,_,S,k){const z=S==="x"?[_[0],_[4],_[8],_[12]]:[_[1],_[5],_[9],_[13]],q=[_[3],_[7],_[11],_[15]],X=s[0]*z[0]+s[1]*z[1]+s[2]*z[2],he=s[0]*q[0]+s[1]*q[1]+s[2]*q[2],me=f[0]*z[0]+f[1]*z[1]+f[2]*z[2],Ee=f[0]*q[0]+f[1]*q[1]+f[2]*q[2];return me+k*he===X+k*Ee||q[3]*(X-me)+z[3]*(Ee-he)+X*Ee==me*he?null:(me+z[3]-k*Ee-k*q[3])/(me-X-k*Ee+k*he)}static getLesserNonNegativeNonNull(s,f){return f!==null&&f>=0&&f<s?f:s}}class rc{constructor(s){this._globe=s,this._mercatorCameraHelper=new ya,this._verticalPerspectiveCameraHelper=new po}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,f){return this.currentHelper.handlePanInertia(s,f)}handleMapControlsRollPitchBearingZoom(s,f){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,f)}handleMapControlsPan(s,f,_){this.currentHelper.handleMapControlsPan(s,f,_)}cameraForBoxAndBearing(s,f,_,S,k){return this.currentHelper.cameraForBoxAndBearing(s,f,_,S,k)}handleJumpToCenterZoom(s,f){this.currentHelper.handleJumpToCenterZoom(s,f)}handleEaseTo(s,f){return this.currentHelper.handleEaseTo(s,f)}handleFlyTo(s,f){return this.currentHelper.handleFlyTo(s,f)}}const vd=(I,s)=>o.y(I,s&&s.filter(f=>f.identifier!=="source.canvas")),dm=o.bE();class yh extends o.E{constructor(s,f={}){var _,S;super(),this._rtlPluginLoaded=()=>{for(const z in this.sourceCaches){const q=this.sourceCaches[z].getSource().type;q!=="vector"&&q!=="geojson"||this.sourceCaches[z].reload()}},this.map=s,this.dispatcher=new St(gt(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(z,q)=>this.getGlyphs(z,q)),this.dispatcher.registerMessageHandler("GI",(z,q)=>this.getImages(z,q)),this.imageManager=new ge,this.imageManager.setEventedParent(this);const k=((_=s._container)===null||_===void 0?void 0:_.lang)||typeof document<"u"&&((S=document.documentElement)===null||S===void 0?void 0:S.lang)||void 0;this.glyphManager=new Se(s._requestManager,f.localIdeographFontFamily,k),this.lineAtlas=new nt(256,512),this.crossTileSymbolIndex=new Ys,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",o.bG()),je().on(Oi,this._rtlPluginLoaded),this.on("data",z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const q=this.sourceCaches[z.sourceId];if(!q)return;const X=q.getSource();if(X&&X.vectorLayerIds)for(const he in this._layers){const me=this._layers[he];me.source===X.id&&this._validateLayer(me)}})}setGlobalStateProperty(s,f){var _,S,k;this._checkLoaded();const z=f===null?(k=(S=(_=this.stylesheet.state)===null||_===void 0?void 0:_[s])===null||S===void 0?void 0:S.default)!==null&&k!==void 0?k:null:f;if(o.bH(z,this._globalState[s]))return this;this._globalState[s]=z,this._applyGlobalStateChanges([s])}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();const f=[];for(const _ in s)!o.bH(this._globalState[_],s[_].default)&&(f.push(_),this._globalState[_]=s[_].default);this._applyGlobalStateChanges(f)}_applyGlobalStateChanges(s){if(s.length===0)return;const f=new Set;for(const _ in this._layers){const S=this._layers[_],k=S.getLayoutAffectingGlobalStateRefs(),z=S.getPaintAffectingGlobalStateRefs();for(const q of s)if(k.has(q)&&f.add(S.source),z.has(q))for(const{name:X,value:he}of z.get(q))this._updatePaintProperty(S,X,he)}for(const _ in this.sourceCaches)f.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(s,f={},_){this.fire(new o.l("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const S=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const k=this._loadStyleRequest;o.j(S,this._loadStyleRequest).then(z=>{this._loadStyleRequest=null,this._load(z.data,f,_)}).catch(z=>{this._loadStyleRequest=null,z&&!k.signal.aborted&&this.fire(new o.k(z))})}loadJSON(s,f={},_){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,U.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,f.validate=f.validate!==!1,this._load(s,f,_)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(dm,{validate:!1})}_load(s,f,_){var S,k;let z=f.transformStyle?f.transformStyle(_,s):s;if(!f.validate||!vd(this,o.z(z))){z=Object.assign({},z),this._loaded=!0,this.stylesheet=z;for(const q in z.sources)this.addSource(q,z.sources[q],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs),this._createLayers(),this.light=new ze(this.stylesheet.light),this._setProjectionInternal(((S=this.stylesheet.projection)===null||S===void 0?void 0:S.type)||"mercator"),this.sky=new Ct(this.stylesheet.sky),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var s;const f=o.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",f),this._order=f.map(_=>_.id),this._layers={},this.setGlobalState((s=this.stylesheet.state)!==null&&s!==void 0?s:null),this._serializedLayers=null;for(const _ of f){const S=o.bJ(_);S.setEventedParent(this,{layer:{id:_.id}}),S.setGlobalState(this._globalState),this._layers[_.id]=S}}_loadSprite(s,f=!1,_=void 0){let S;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(k,z,q,X){return o._(this,void 0,void 0,function*(){const he=ae(k),me=q>1?"@2x":"",Ee={},Me={};for(const{id:Ue,url:Xe}of he){const ut=z.transformRequest(G(Xe,me,".json"),"SpriteJSON");Ee[Ue]=o.j(ut,X);const ct=z.transformRequest(G(Xe,me,".png"),"SpriteImage");Me[Ue]=ne.getImage(ct,X)}return yield Promise.all([...Object.values(Ee),...Object.values(Me)]),function(Ue,Xe){return o._(this,void 0,void 0,function*(){const ut={};for(const ct in Ue){ut[ct]={};const ft=U.getImageCanvasContext((yield Xe[ct]).data),xt=(yield Ue[ct]).data;for(const yt in xt){const{width:wt,height:Pt,x:Ft,y:Bt,sdf:Yt,pixelRatio:dn,stretchX:Xt,stretchY:nn,content:un,textFitWidth:qn,textFitHeight:Qn}=xt[yt];ut[ct][yt]={data:null,pixelRatio:dn,sdf:Yt,stretchX:Xt,stretchY:nn,content:un,textFitWidth:qn,textFitHeight:Qn,spriteData:{width:wt,height:Pt,x:Ft,y:Bt,context:ft}}}}return ut})}(Ee,Me)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(k=>{if(this._spriteRequest=null,k)for(const z in k){this._spritesImagesIds[z]=[];const q=this._spritesImagesIds[z]?this._spritesImagesIds[z].filter(X=>!(X in k)):[];for(const X of q)this.imageManager.removeImage(X),this._changedImages[X]=!0;for(const X in k[z]){const he=z==="default"?X:`${z}:${X}`;this._spritesImagesIds[z].push(he),he in this.imageManager.images?this.imageManager.updateImage(he,k[z][X],!1):this.imageManager.addImage(he,k[z][X]),f&&(this._changedImages[he]=!0)}}}).catch(k=>{this._spriteRequest=null,S=k,this.fire(new o.k(S))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),_&&_(S)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(s){const f=this.sourceCaches[s.source];if(!f)return;const _=s.sourceLayer;if(!_)return;const S=f.getSource();(S.type==="geojson"||S.vectorLayerIds&&S.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.k(new Error(`Source layer "${_}" does not exist on source "${S.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,f=!1){const _=this._serializedAllLayers();if(!s||s.length===0)return Object.values(f?o.bK(_):_);const S=[];for(const k of s)if(_[k]){const z=f?o.bK(_[k]):_[k];S.push(z)}return S}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const f=Object.keys(this._layers);for(const _ of f){const S=this._layers[_];S.type!=="custom"&&(s[_]=S.serialize())}return s}hasTransitions(){var s,f,_;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((f=this.sky)===null||f===void 0)&&f.hasTransition()||!((_=this.projection)===null||_===void 0)&&_.hasTransition())return!0;for(const S in this.sourceCaches)if(this.sourceCaches[S].hasTransition())return!0;for(const S in this._layers)if(this._layers[S].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const f=this._changed;if(f){const S=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(S.length||k.length)&&this._updateWorkerLayers(S,k);for(const z in this._updatedSources){const q=this._updatedSources[z];if(q==="reload")this._reloadSource(z);else{if(q!=="clear")throw new Error(`Invalid action ${q}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const _={};for(const S in this.sourceCaches){const k=this.sourceCaches[S];_[S]=k.used,k.used=!1}for(const S of this._order){const k=this._layers[S];k.recalculate(s,this._availableImages),!k.isHidden(s.zoom)&&k.source&&(this.sourceCaches[k.source].used=!0)}for(const S in _){const k=this.sourceCaches[S];!!_[S]!=!!k.used&&k.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,f&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,f){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,f={}){var _;this._checkLoaded();const S=this.serialize();if(s=f.transformStyle?f.transformStyle(S,s):s,((_=f.validate)===null||_===void 0||_)&&vd(this,o.z(s)))return!1;(s=o.bK(s)).layers=o.bI(s.layers);const k=o.bL(S,s),z=this._getOperationsToPerform(k);if(z.unimplemented.length>0)throw new Error(`Unimplemented: ${z.unimplemented.join(", ")}.`);if(z.operations.length===0)return!1;for(const q of z.operations)q();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const f=[],_=[];for(const S of s)switch(S.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":f.push(()=>this.addLayer.apply(this,S.args));break;case"removeLayer":f.push(()=>this.removeLayer.apply(this,S.args));break;case"setPaintProperty":f.push(()=>this.setPaintProperty.apply(this,S.args));break;case"setLayoutProperty":f.push(()=>this.setLayoutProperty.apply(this,S.args));break;case"setFilter":f.push(()=>this.setFilter.apply(this,S.args));break;case"addSource":f.push(()=>this.addSource.apply(this,S.args));break;case"removeSource":f.push(()=>this.removeSource.apply(this,S.args));break;case"setLayerZoomRange":f.push(()=>this.setLayerZoomRange.apply(this,S.args));break;case"setLight":f.push(()=>this.setLight.apply(this,S.args));break;case"setGeoJSONSourceData":f.push(()=>this.setGeoJSONSourceData.apply(this,S.args));break;case"setGlyphs":f.push(()=>this.setGlyphs.apply(this,S.args));break;case"setSprite":f.push(()=>this.setSprite.apply(this,S.args));break;case"setTerrain":f.push(()=>this.map.setTerrain.apply(this,S.args));break;case"setSky":f.push(()=>this.setSky.apply(this,S.args));break;case"setProjection":this.setProjection.apply(this,S.args);break;case"setGlobalState":f.push(()=>this.setGlobalState.apply(this,S.args));break;case"setTransition":f.push(()=>{});break;default:_.push(S.command)}return{operations:f,unimplemented:_}}addImage(s,f){if(this.getImage(s))return this.fire(new o.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,f),this._afterImageUpdated(s)}updateImage(s,f){this.imageManager.updateImage(s,f)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new o.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,f,_={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(o.z.source,`sources.${s}`,f,null,_))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const S=this.sourceCaches[s]=new Dn(s,f,this.dispatcher);S.style=this,S.setEventedParent(this,()=>({isSourceLoaded:S.loaded(),source:S.serialize(),sourceId:s})),S.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===s)return this.fire(new o.k(new Error(`Source "${s}" cannot be removed while layer "${_}" is using it.`)));const f=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],f.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,f){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const _=this.sourceCaches[s].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(f),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,f,_={}){this._checkLoaded();const S=s.id;if(this.getLayer(S))return void this.fire(new o.k(new Error(`Layer "${S}" already exists on this map.`)));let k;if(s.type==="custom"){if(vd(this,o.bM(s)))return;k=o.bJ(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(S,s.source),s=o.bK(s),s=o.e(s,{source:S})),this._validate(o.z.layer,`layers.${S}`,s,{arrayIndex:-1},_))return;k=o.bJ(s),this._validateLayer(k),k.setEventedParent(this,{layer:{id:S}})}const z=f?this._order.indexOf(f):this._order.length;if(f&&z===-1)this.fire(new o.k(new Error(`Cannot add layer "${S}" before non-existing layer "${f}".`)));else{if(this._order.splice(z,0,S),this._layerOrderChanged=!0,this._layers[S]=k,this._removedLayers[S]&&k.source&&k.type!=="custom"){const q=this._removedLayers[S];delete this._removedLayers[S],q.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}moveLayer(s,f){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new o.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===f)return;const _=this._order.indexOf(s);this._order.splice(_,1);const S=f?this._order.indexOf(f):this._order.length;f&&S===-1?this.fire(new o.k(new Error(`Cannot move layer "${s}" before non-existing layer "${f}".`))):(this._order.splice(S,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const f=this._layers[s];if(!f)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${s}".`)));f.setEventedParent(null);const _=this._order.indexOf(s);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=f,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],f.onRemove&&f.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,f,_){this._checkLoaded();const S=this.getLayer(s);S?S.minzoom===f&&S.maxzoom===_||(f!=null&&(S.minzoom=f),_!=null&&(S.maxzoom=_),this._updateLayer(S)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,f,_={}){this._checkLoaded();const S=this.getLayer(s);if(S){if(!o.bH(S.filter,f))return f==null?(S.setFilter(void 0),void this._updateLayer(S)):void(this._validate(o.z.filter,`layers.${S.id}.filter`,f,null,_)||(S.setFilter(o.bK(f)),this._updateLayer(S)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return o.bK(this.getLayer(s).filter)}setLayoutProperty(s,f,_,S={}){this._checkLoaded();const k=this.getLayer(s);k?o.bH(k.getLayoutProperty(f),_)||(k.setLayoutProperty(f,_,S),this._updateLayer(k)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,f){const _=this.getLayer(s);if(_)return _.getLayoutProperty(f);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,f,_,S={}){this._checkLoaded();const k=this.getLayer(s);k?o.bH(k.getPaintProperty(f),_)||this._updatePaintProperty(k,f,_,S):this.fire(new o.k(new Error(`Cannot style non-existing layer "${s}".`)))}_updatePaintProperty(s,f,_,S={}){s.setPaintProperty(f,_,S)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[s.id]=!0,this._serializedLayers=null}getPaintProperty(s,f){return this.getLayer(s).getPaintProperty(f)}setFeatureState(s,f){this._checkLoaded();const _=s.source,S=s.sourceLayer,k=this.sourceCaches[_];if(k===void 0)return void this.fire(new o.k(new Error(`The source '${_}' does not exist in the map's style.`)));const z=k.getSource().type;z==="geojson"&&S?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||S?(s.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),k.setFeatureState(S,s.id,f)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,f){this._checkLoaded();const _=s.source,S=this.sourceCaches[_];if(S===void 0)return void this.fire(new o.k(new Error(`The source '${_}' does not exist in the map's style.`)));const k=S.getSource().type,z=k==="vector"?s.sourceLayer:void 0;k!=="vector"||z?f&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(z,s.id,f):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const f=s.source,_=s.sourceLayer,S=this.sourceCaches[f];if(S!==void 0)return S.getSource().type!=="vector"||_?(s.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),S.getFeatureState(_,s.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=o.bN(this.sourceCaches,k=>k.serialize()),f=this._serializeByIds(this._order,!0),_=this.map.getTerrain()||void 0,S=this.stylesheet;return o.bO({version:S.version,name:S.name,metadata:S.metadata,light:S.light,sky:S.sky,center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,sprite:S.sprite,glyphs:S.glyphs,transition:S.transition,projection:S.projection,sources:s,layers:f,terrain:_},k=>k!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const f=z=>this._layers[z].type==="fill-extrusion",_={},S=[];for(let z=this._order.length-1;z>=0;z--){const q=this._order[z];if(f(q)){_[q]=z;for(const X of s){const he=X[q];if(he)for(const me of he)S.push(me)}}}S.sort((z,q)=>q.intersectionZ-z.intersectionZ);const k=[];for(let z=this._order.length-1;z>=0;z--){const q=this._order[z];if(f(q))for(let X=S.length-1;X>=0;X--){const he=S[X].feature;if(_[he.layer.id]<z)break;k.push(he),S.pop()}else for(const X of s){const he=X[q];if(he)for(const me of he)k.push(me.feature)}}return k}queryRenderedFeatures(s,f,_){f&&f.filter&&this._validate(o.z.filter,"queryRenderedFeatures.filter",f.filter,null,f);const S={};if(f&&f.layers){if(!(Array.isArray(f.layers)||f.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const he of f.layers){const me=this._layers[he];if(!me)return this.fire(new o.k(new Error(`The layer '${he}' does not exist in the map's style and cannot be queried for features.`))),[];S[me.source]=!0}}const k=[];f.availableImages=this._availableImages;const z=this._serializedAllLayers(),q=f.layers instanceof Set?f.layers:Array.isArray(f.layers)?new Set(f.layers):null,X=Object.assign(Object.assign({},f),{layers:q});for(const he in this.sourceCaches)f.layers&&!S[he]||k.push(Ke(this.sourceCaches[he],this._layers,z,s,X,_,this.map.terrain?(me,Ee,Me)=>this.map.terrain.getElevation(me,Ee,Me):void 0));return this.placement&&k.push(function(he,me,Ee,Me,Ue,Xe,ut){const ct={},ft=Xe.queryRenderedSymbols(Me),xt=[];for(const yt of Object.keys(ft).map(Number))xt.push(ut[yt]);xt.sort(Re);for(const yt of xt){const wt=yt.featureIndex.lookupSymbolFeatures(ft[yt.bucketInstanceId],me,yt.bucketIndex,yt.sourceLayerIndex,Ue.filter,Ue.layers,Ue.availableImages,he);for(const Pt in wt){const Ft=ct[Pt]=ct[Pt]||[],Bt=wt[Pt];Bt.sort((Yt,dn)=>{const Xt=yt.featureSortOrder;if(Xt){const nn=Xt.indexOf(Yt.featureIndex);return Xt.indexOf(dn.featureIndex)-nn}return dn.featureIndex-Yt.featureIndex});for(const Yt of Bt)Ft.push(Yt)}}return function(yt,wt,Pt){for(const Ft in yt)for(const Bt of yt[Ft])He(Bt,Pt[wt[Ft].source]);return yt}(ct,he,Ee)}(this._layers,z,this.sourceCaches,s,X,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(s,f){f&&f.filter&&this._validate(o.z.filter,"querySourceFeatures.filter",f.filter,null,f);const _=this.sourceCaches[s];return _?function(S,k){const z=S.getRenderableIds().map(he=>S.getTileByID(he)),q=[],X={};for(let he=0;he<z.length;he++){const me=z[he],Ee=me.tileID.canonical.key;X[Ee]||(X[Ee]=!0,me.querySourceFeatures(q,k))}return q}(_,f):[]}getLight(){return this.light.getLight()}setLight(s,f={}){this._checkLoaded();const _=this.light.getLight();let S=!1;for(const z in s)if(!o.bH(s[z],_[z])){S=!0;break}if(!S)return;const k={now:U.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,f),this.light.updateTransitions(k)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,f={}){this._checkLoaded();const _=this.getSky();let S=!1;if(!s&&!_)return;if(s&&!_)S=!0;else if(!s&&_)S=!0;else for(const z in s)if(!o.bH(s[z],_[z])){S=!0;break}if(!S)return;const k={now:U.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,f),this.sky.updateTransitions(k)}_setProjectionInternal(s){const f=function(_){if(Array.isArray(_)){const S=new Xi({type:_});return{projection:S,transform:new jh,cameraHelper:new rc(S)}}switch(_){case"mercator":return{projection:new xr,transform:new Dr,cameraHelper:new ya};case"globe":{const S=new Xi({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:S,transform:new jh,cameraHelper:new rc(S)}}case"vertical-perspective":return{projection:new or,transform:new gh,cameraHelper:new po};default:return o.w(`Unknown projection name: ${_}. Falling back to mercator projection.`),{projection:new xr,transform:new Dr,cameraHelper:new ya}}}(s);this.projection=f.projection,this.map.migrateProjection(f.transform,f.cameraHelper);for(const _ in this.sourceCaches)this.sourceCaches[_].reload()}_validate(s,f,_,S,k={}){return(!k||k.validate!==!1)&&vd(this,s.call(o.z,o.e({key:f,style:this.serialize(),value:_,styleSpec:o.v},S)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),je().off(Oi,this._rtlPluginLoaded);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const _=this.sourceCaches[f];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const f in this.sourceCaches)this.sourceCaches[f].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,f,_,S,k=!1){let z=!1,q=!1;const X={};for(const he of this._order){const me=this._layers[he];if(me.type!=="symbol")continue;if(!X[me.source]){const Me=this.sourceCaches[me.source];X[me.source]=Me.getRenderableIds(!0).map(Ue=>Me.getTileByID(Ue)).sort((Ue,Xe)=>Xe.tileID.overscaledZ-Ue.tileID.overscaledZ||(Ue.tileID.isLessThan(Xe.tileID)?-1:1))}const Ee=this.crossTileSymbolIndex.addLayer(me,X[me.source],s.center.lng);z=z||Ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(U.now(),s.zoom))&&(this.pauseablePlacement=new RA(s,this.map.terrain,this._order,k,f,_,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,X),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(U.now()),q=!0),z&&this.pauseablePlacement.placement.setStale()),q||z)for(const he of this._order){const me=this._layers[he];me.type==="symbol"&&this.placement.updateLayerOpacities(me,X[me.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(U.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,f){return o._(this,void 0,void 0,function*(){const _=yield this.imageManager.getImages(f.icons);this._updateTilesForChangedImages();const S=this.sourceCaches[f.source];return S&&S.setDependencies(f.tileID.key,f.type,f.icons),_})}getGlyphs(s,f){return o._(this,void 0,void 0,function*(){const _=yield this.glyphManager.getGlyphs(f.stacks),S=this.sourceCaches[f.source];return S&&S.setDependencies(f.tileID.key,f.type,[""]),_})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,f={}){this._checkLoaded(),s&&this._validate(o.z.glyphs,"glyphs",s,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,f,_={},S){this._checkLoaded();const k=[{id:s,url:f}],z=[...ae(this.stylesheet.sprite),...k];this._validate(o.z.sprite,"sprite",z,null,_)||(this.stylesheet.sprite=z,this._loadSprite(k,!0,S))}removeSprite(s){this._checkLoaded();const f=ae(this.stylesheet.sprite);if(f.find(_=>_.id===s)){if(this._spritesImagesIds[s])for(const _ of this._spritesImagesIds[s])this.imageManager.removeImage(_),this._changedImages[_]=!0;f.splice(f.findIndex(_=>_.id===s),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return ae(this.stylesheet.sprite)}setSprite(s,f={},_){this._checkLoaded(),s&&this._validate(o.z.sprite,"sprite",s,null,f)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,_):(this._unloadSprite(),_&&_(null)))}}var Cd=o.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class r0{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,f,_,S,k,z,q,X,he){this.context=s;let me=this.boundPaintVertexBuffers.length!==S.length;for(let Ee=0;!me&&Ee<S.length;Ee++)this.boundPaintVertexBuffers[Ee]!==S[Ee]&&(me=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==_||me||this.boundIndexBuffer!==k||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==q||this.boundDynamicVertexBuffer2!==X||this.boundDynamicVertexBuffer3!==he?this.freshBind(f,_,S,k,z,q,X,he):(s.bindVertexArray.set(this.vao),q&&q.bind(),k&&k.dynamicDraw&&k.bind(),X&&X.bind(),he&&he.bind())}freshBind(s,f,_,S,k,z,q,X){const he=s.numAttributes,me=this.context,Ee=me.gl;this.vao&&this.destroy(),this.vao=me.createVertexArray(),me.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=S,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=q,this.boundDynamicVertexBuffer3=X,f.enableAttributes(Ee,s);for(const Me of _)Me.enableAttributes(Ee,s);z&&z.enableAttributes(Ee,s),q&&q.enableAttributes(Ee,s),X&&X.enableAttributes(Ee,s),f.bind(),f.setVertexAttribPointers(Ee,s,k);for(const Me of _)Me.bind(),Me.setVertexAttribPointers(Ee,s,k);z&&(z.bind(),z.setVertexAttribPointers(Ee,s,k)),S&&S.bind(),q&&(q.bind(),q.setVertexAttribPointers(Ee,s,k)),X&&(X.bind(),X.setVertexAttribPointers(Ee,s,k)),me.currentNumAttributes=he}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Tf=(I,s,f,_,S)=>({u_texture:0,u_ele_delta:I,u_fog_matrix:s,u_fog_color:f?f.properties.get("fog-color"):o.bf.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:S?0:f?f.calculateFogBlendOpacity(_):0,u_horizon_color:f?f.properties.get("horizon-color"):o.bf.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1,u_is_globe_mode:S?1:0}),kf={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Hu(I){const s=[];for(let f=0;f<I.length;f++){if(I[f]===null)continue;const _=I[f].split(" ");s.push(_.pop())}return s}class es{constructor(s,f,_,S,k,z,q,X,he=[]){const me=s.gl;this.program=me.createProgram();const Ee=Hu(f.staticAttributes),Me=_?_.getBinderAttributes():[],Ue=Ee.concat(Me),Xe=ko.prelude.staticUniforms?Hu(ko.prelude.staticUniforms):[],ut=q.staticUniforms?Hu(q.staticUniforms):[],ct=f.staticUniforms?Hu(f.staticUniforms):[],ft=_?_.getBinderUniforms():[],xt=Xe.concat(ut).concat(ct).concat(ft),yt=[];for(const Xt of xt)yt.indexOf(Xt)<0&&yt.push(Xt);const wt=_?_.defines():[];at(me)&&wt.unshift("#version 300 es"),k&&wt.push("#define OVERDRAW_INSPECTOR;"),z&&wt.push("#define TERRAIN3D;"),X&&wt.push(X),he&&wt.push(...he);let Pt=wt.concat(ko.prelude.fragmentSource,q.fragmentSource,f.fragmentSource).join(`
`),Ft=wt.concat(ko.prelude.vertexSource,q.vertexSource,f.vertexSource).join(`
`);at(me)||(Pt=function(Xt){return Xt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Pt),Ft=function(Xt){return Xt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Ft));const Bt=me.createShader(me.FRAGMENT_SHADER);if(me.isContextLost())return void(this.failedToCreate=!0);if(me.shaderSource(Bt,Pt),me.compileShader(Bt),!me.getShaderParameter(Bt,me.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${me.getShaderInfoLog(Bt)}`);me.attachShader(this.program,Bt);const Yt=me.createShader(me.VERTEX_SHADER);if(me.isContextLost())return void(this.failedToCreate=!0);if(me.shaderSource(Yt,Ft),me.compileShader(Yt),!me.getShaderParameter(Yt,me.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${me.getShaderInfoLog(Yt)}`);me.attachShader(this.program,Yt),this.attributes={};const dn={};this.numAttributes=Ue.length;for(let Xt=0;Xt<this.numAttributes;Xt++)Ue[Xt]&&(me.bindAttribLocation(this.program,Xt,Ue[Xt]),this.attributes[Ue[Xt]]=Xt);if(me.linkProgram(this.program),!me.getProgramParameter(this.program,me.LINK_STATUS))throw new Error(`Program failed to link: ${me.getProgramInfoLog(this.program)}`);me.deleteShader(Yt),me.deleteShader(Bt);for(let Xt=0;Xt<yt.length;Xt++){const nn=yt[Xt];if(nn&&!dn[nn]){const un=me.getUniformLocation(this.program,nn);un&&(dn[nn]=un)}}this.fixedUniforms=S(s,dn),this.terrainUniforms=((Xt,nn)=>({u_depth:new o.bP(Xt,nn.u_depth),u_terrain:new o.bP(Xt,nn.u_terrain),u_terrain_dim:new o.bg(Xt,nn.u_terrain_dim),u_terrain_matrix:new o.bR(Xt,nn.u_terrain_matrix),u_terrain_unpack:new o.bS(Xt,nn.u_terrain_unpack),u_terrain_exaggeration:new o.bg(Xt,nn.u_terrain_exaggeration)}))(s,dn),this.projectionUniforms=((Xt,nn)=>({u_projection_matrix:new o.bR(Xt,nn.u_projection_matrix),u_projection_tile_mercator_coords:new o.bS(Xt,nn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bS(Xt,nn.u_projection_clipping_plane),u_projection_transition:new o.bg(Xt,nn.u_projection_transition),u_projection_fallback_matrix:new o.bR(Xt,nn.u_projection_fallback_matrix)}))(s,dn),this.binderUniforms=_?_.getUniforms(s,dn):[]}draw(s,f,_,S,k,z,q,X,he,me,Ee,Me,Ue,Xe,ut,ct,ft,xt,yt){const wt=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(_),s.setStencilMode(S),s.setColorMode(k),s.setCullFace(z),X){s.activeTexture.set(wt.TEXTURE2),wt.bindTexture(wt.TEXTURE_2D,X.depthTexture),s.activeTexture.set(wt.TEXTURE3),wt.bindTexture(wt.TEXTURE_2D,X.texture);for(const Ft in this.terrainUniforms)this.terrainUniforms[Ft].set(X[Ft])}if(he)for(const Ft in he)this.projectionUniforms[kf[Ft]].set(he[Ft]);if(q)for(const Ft in this.fixedUniforms)this.fixedUniforms[Ft].set(q[Ft]);ct&&ct.setUniforms(s,this.binderUniforms,Xe,{zoom:ut});let Pt=0;switch(f){case wt.LINES:Pt=2;break;case wt.TRIANGLES:Pt=3;break;case wt.LINE_STRIP:Pt=1}for(const Ft of Ue.get()){const Bt=Ft.vaos||(Ft.vaos={});(Bt[me]||(Bt[me]=new r0)).bind(s,this,Ee,ct?ct.getPaintVertexBuffers():[],Me,Ft.vertexOffset,ft,xt,yt),wt.drawElements(f,Ft.primitiveLength*Pt,wt.UNSIGNED_SHORT,Ft.primitiveOffset*Pt*2)}}}function _d(I,s,f){const _=1/o.aC(f,1,s.transform.tileZoom),S=Math.pow(2,f.tileID.overscaledZ),k=f.tileSize*Math.pow(2,s.transform.tileZoom)/S,z=k*(f.tileID.canonical.x+f.tileID.wrap*S),q=k*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[_,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[z>>16,q>>16],u_pixel_coord_lower:[65535&z,65535&q]}}const Fl=(I,s,f,_)=>{const S=I.style.light,k=S.properties.get("position"),z=[k.x,k.y,k.z],q=o.bV();S.properties.get("anchor")==="viewport"&&o.bW(q,I.transform.bearingInRadians),o.bX(z,z,q);const X=I.transform.transformLightDirection(z),he=S.properties.get("color");return{u_lightpos:z,u_lightpos_globe:X,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[he.r,he.g,he.b],u_vertical_gradient:+s,u_opacity:f,u_fill_translate:_}},bd=(I,s,f,_,S,k,z)=>o.e(Fl(I,s,f,_),_d(k,I,z),{u_height_factor:-Math.pow(2,S.overscaledZ)/z.tileSize/8}),Nh=(I,s,f,_)=>o.e(_d(s,I,f),{u_fill_translate:_}),qc=(I,s)=>({u_world:I,u_fill_translate:s}),Gh=(I,s,f,_,S)=>o.e(Nh(I,s,f,S),{u_world:_}),Df=(I,s,f,_,S)=>{const k=I.transform;let z,q,X=0;if(f.paint.get("circle-pitch-alignment")==="map"){const he=o.aC(s,1,k.zoom);z=!0,q=[he,he],X=he/(o.$*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*S}else z=!1,q=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+z,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:q,u_globe_extrude_scale:X,u_translate:_}},vh=I=>({u_pixel_extrude_scale:[1/I.width,1/I.height]}),Ch=I=>({u_viewport_size:[I.width,I.height]}),Wh=(I,s=1)=>({u_color:I,u_overlay:0,u_overlay_scale:s}),Rf=(I,s,f,_)=>{const S=o.aC(I,1,s)/(o.$*Math.pow(2,I.tileID.overscaledZ))*2*Math.PI*_;return{u_extrude_scale:o.aC(I,1,s),u_intensity:f,u_globe_extrude_scale:S}},ou=(I,s,f,_)=>{const S=o.L();o.bY(S,0,I.width,I.height,0,0,1);const k=I.context.gl;return{u_matrix:S,u_world:[k.drawingBufferWidth,k.drawingBufferHeight],u_image:f,u_color_ramp:_,u_opacity:s.paint.get("heatmap-opacity")}},Pf=(I,s,f)=>{const _=f.paint.get("hillshade-accent-color");let S;switch(f.paint.get("hillshade-method")){case"basic":S=4;break;case"combined":S=1;break;case"igor":S=2;break;case"multidirectional":S=3;break;default:S=0}const k=f.getIlluminationProperties();for(let z=0;z<k.directionRadians.length;z++)f.paint.get("hillshade-illumination-anchor")==="viewport"&&(k.directionRadians[z]+=I.transform.bearingInRadians);return{u_image:0,u_latrange:au(0,s.tileID),u_exaggeration:f.paint.get("hillshade-exaggeration"),u_altitudes:k.altitudeRadians,u_azimuths:k.directionRadians,u_accent:_,u_method:S,u_highlights:k.highlightColor,u_shadows:k.shadowColor}},oc=(I,s)=>{const f=s.stride,_=o.L();return o.bY(_,0,o.$,-o.$,0,0,1),o.M(_,_,[0,-o.$,0]),{u_matrix:_,u_image:1,u_dimension:[f,f],u_zoom:I.overscaledZ,u_unpack:s.getUnpackVector()}};function au(I,s){const f=Math.pow(2,s.canonical.z),_=s.canonical.y;return[new o.a1(0,_/f).toLngLat().lat,new o.a1(0,(_+1)/f).toLngLat().lat]}const Mc=(I,s,f=0)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:f,u_opacity:I.paint.get("color-relief-opacity")}),xd=(I,s,f,_)=>{const S=I.transform;return{u_translation:wc(I,s,f),u_ratio:_/o.aC(s,1,S.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Md=(I,s,f,_,S)=>o.e(xd(I,s,f,_),{u_image:0,u_image_height:S}),KA=(I,s,f,_,S)=>{const k=I.transform,z=Qh(s,k);return{u_translation:wc(I,s,f),u_texsize:s.imageAtlasTexture.size,u_ratio:_/o.aC(s,1,k.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[z,S.fromScale,S.toScale],u_fade:S.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},Vu=(I,s,f,_,S,k)=>{const z=I.lineAtlas,q=Qh(s,I.transform),X=f.layout.get("line-cap")==="round",he=z.getDash(S.from,X),me=z.getDash(S.to,X),Ee=he.width*k.fromScale,Me=me.width*k.toScale;return o.e(xd(I,s,f,_),{u_patternscale_a:[q/Ee,-he.height/2],u_patternscale_b:[q/Me,-me.height/2],u_sdfgamma:z.width/(256*Math.min(Ee,Me)*I.pixelRatio)/2,u_image:0,u_tex_y_a:he.y,u_tex_y_b:me.y,u_mix:k.t})};function Qh(I,s){return 1/o.aC(I,1,s.tileZoom)}function wc(I,s,f){return o.aD(I.transform,s,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const Yh=(I,s,f,_,S)=>{return{u_tl_parent:I,u_scale_parent:s,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(z=_.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(k=_.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:fm(_.paint.get("raster-hue-rotate")),u_coords_top:[S[0].x,S[0].y,S[1].x,S[1].y],u_coords_bottom:[S[3].x,S[3].y,S[2].x,S[2].y]};var k,z};function fm(I){I*=Math.PI/180;const s=Math.sin(I),f=Math.cos(I);return[(2*f+1)/3,(-Math.sqrt(3)*s-f+1)/3,(Math.sqrt(3)*s-f+1)/3]}const Hc=(I,s,f,_,S,k,z,q,X,he,me,Ee,Me)=>{const Ue=z.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Ue.cameraToCenterDistance,u_pitch:Ue.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:Ue.width/Ue.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_label_plane_matrix:q,u_coord_matrix:X,u_is_text:+me,u_pitch_with_map:+_,u_is_along_line:S,u_is_variable_anchor:k,u_texsize:Ee,u_texture:0,u_translation:he,u_pitched_scale:Me}},Vd=(I,s,f,_,S,k,z,q,X,he,me,Ee,Me,Ue)=>{const Xe=z.transform;return o.e(Hc(I,s,f,_,S,k,z,q,X,he,me,Ee,Ue),{u_gamma_scale:_?Math.cos(Xe.pitch*Math.PI/180)*Xe.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:1})},hA=(I,s,f,_,S,k,z,q,X,he,me,Ee,Me)=>o.e(Vd(I,s,f,_,S,k,z,q,X,he,!0,me,0,Me),{u_texsize_icon:Ee,u_texture_icon:1}),$u=(I,s)=>({u_opacity:I,u_color:s}),Mp=(I,s,f,_,S)=>o.e(function(k,z,q,X){const he=q.imageManager.getPattern(k.from.toString()),me=q.imageManager.getPattern(k.to.toString()),{width:Ee,height:Me}=q.imageManager.getPixelSize(),Ue=Math.pow(2,X.tileID.overscaledZ),Xe=X.tileSize*Math.pow(2,q.transform.tileZoom)/Ue,ut=Xe*(X.tileID.canonical.x+X.tileID.wrap*Ue),ct=Xe*X.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:he.tl,u_pattern_br_a:he.br,u_pattern_tl_b:me.tl,u_pattern_br_b:me.br,u_texsize:[Ee,Me],u_mix:z.t,u_pattern_size_a:he.displaySize,u_pattern_size_b:me.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/o.aC(X,1,q.transform.tileZoom),u_pixel_coord_upper:[ut>>16,ct>>16],u_pixel_coord_lower:[65535&ut,65535&ct]}}(f,S,s,_),{u_opacity:I}),Kf=(I,s)=>{},xu={fillExtrusion:(I,s)=>({u_lightpos:new o.bT(I,s.u_lightpos),u_lightpos_globe:new o.bT(I,s.u_lightpos_globe),u_lightintensity:new o.bg(I,s.u_lightintensity),u_lightcolor:new o.bT(I,s.u_lightcolor),u_vertical_gradient:new o.bg(I,s.u_vertical_gradient),u_opacity:new o.bg(I,s.u_opacity),u_fill_translate:new o.bU(I,s.u_fill_translate)}),fillExtrusionPattern:(I,s)=>({u_lightpos:new o.bT(I,s.u_lightpos),u_lightpos_globe:new o.bT(I,s.u_lightpos_globe),u_lightintensity:new o.bg(I,s.u_lightintensity),u_lightcolor:new o.bT(I,s.u_lightcolor),u_vertical_gradient:new o.bg(I,s.u_vertical_gradient),u_height_factor:new o.bg(I,s.u_height_factor),u_opacity:new o.bg(I,s.u_opacity),u_fill_translate:new o.bU(I,s.u_fill_translate),u_image:new o.bP(I,s.u_image),u_texsize:new o.bU(I,s.u_texsize),u_pixel_coord_upper:new o.bU(I,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(I,s.u_pixel_coord_lower),u_scale:new o.bT(I,s.u_scale),u_fade:new o.bg(I,s.u_fade)}),fill:(I,s)=>({u_fill_translate:new o.bU(I,s.u_fill_translate)}),fillPattern:(I,s)=>({u_image:new o.bP(I,s.u_image),u_texsize:new o.bU(I,s.u_texsize),u_pixel_coord_upper:new o.bU(I,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(I,s.u_pixel_coord_lower),u_scale:new o.bT(I,s.u_scale),u_fade:new o.bg(I,s.u_fade),u_fill_translate:new o.bU(I,s.u_fill_translate)}),fillOutline:(I,s)=>({u_world:new o.bU(I,s.u_world),u_fill_translate:new o.bU(I,s.u_fill_translate)}),fillOutlinePattern:(I,s)=>({u_world:new o.bU(I,s.u_world),u_image:new o.bP(I,s.u_image),u_texsize:new o.bU(I,s.u_texsize),u_pixel_coord_upper:new o.bU(I,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(I,s.u_pixel_coord_lower),u_scale:new o.bT(I,s.u_scale),u_fade:new o.bg(I,s.u_fade),u_fill_translate:new o.bU(I,s.u_fill_translate)}),circle:(I,s)=>({u_camera_to_center_distance:new o.bg(I,s.u_camera_to_center_distance),u_scale_with_map:new o.bP(I,s.u_scale_with_map),u_pitch_with_map:new o.bP(I,s.u_pitch_with_map),u_extrude_scale:new o.bU(I,s.u_extrude_scale),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_globe_extrude_scale:new o.bg(I,s.u_globe_extrude_scale),u_translate:new o.bU(I,s.u_translate)}),collisionBox:(I,s)=>({u_pixel_extrude_scale:new o.bU(I,s.u_pixel_extrude_scale)}),collisionCircle:(I,s)=>({u_viewport_size:new o.bU(I,s.u_viewport_size)}),debug:(I,s)=>({u_color:new o.bQ(I,s.u_color),u_overlay:new o.bP(I,s.u_overlay),u_overlay_scale:new o.bg(I,s.u_overlay_scale)}),depth:Kf,clippingMask:Kf,heatmap:(I,s)=>({u_extrude_scale:new o.bg(I,s.u_extrude_scale),u_intensity:new o.bg(I,s.u_intensity),u_globe_extrude_scale:new o.bg(I,s.u_globe_extrude_scale)}),heatmapTexture:(I,s)=>({u_matrix:new o.bR(I,s.u_matrix),u_world:new o.bU(I,s.u_world),u_image:new o.bP(I,s.u_image),u_color_ramp:new o.bP(I,s.u_color_ramp),u_opacity:new o.bg(I,s.u_opacity)}),hillshade:(I,s)=>({u_image:new o.bP(I,s.u_image),u_latrange:new o.bU(I,s.u_latrange),u_exaggeration:new o.bg(I,s.u_exaggeration),u_altitudes:new o.b_(I,s.u_altitudes),u_azimuths:new o.b_(I,s.u_azimuths),u_accent:new o.bQ(I,s.u_accent),u_method:new o.bP(I,s.u_method),u_shadows:new o.bZ(I,s.u_shadows),u_highlights:new o.bZ(I,s.u_highlights)}),hillshadePrepare:(I,s)=>({u_matrix:new o.bR(I,s.u_matrix),u_image:new o.bP(I,s.u_image),u_dimension:new o.bU(I,s.u_dimension),u_zoom:new o.bg(I,s.u_zoom),u_unpack:new o.bS(I,s.u_unpack)}),colorRelief:(I,s)=>({u_image:new o.bP(I,s.u_image),u_unpack:new o.bS(I,s.u_unpack),u_dimension:new o.bU(I,s.u_dimension),u_elevation_stops:new o.bP(I,s.u_elevation_stops),u_color_stops:new o.bP(I,s.u_color_stops),u_color_ramp_size:new o.bP(I,s.u_color_ramp_size),u_opacity:new o.bg(I,s.u_opacity)}),line:(I,s)=>({u_translation:new o.bU(I,s.u_translation),u_ratio:new o.bg(I,s.u_ratio),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_units_to_pixels:new o.bU(I,s.u_units_to_pixels)}),lineGradient:(I,s)=>({u_translation:new o.bU(I,s.u_translation),u_ratio:new o.bg(I,s.u_ratio),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_units_to_pixels:new o.bU(I,s.u_units_to_pixels),u_image:new o.bP(I,s.u_image),u_image_height:new o.bg(I,s.u_image_height)}),linePattern:(I,s)=>({u_translation:new o.bU(I,s.u_translation),u_texsize:new o.bU(I,s.u_texsize),u_ratio:new o.bg(I,s.u_ratio),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_image:new o.bP(I,s.u_image),u_units_to_pixels:new o.bU(I,s.u_units_to_pixels),u_scale:new o.bT(I,s.u_scale),u_fade:new o.bg(I,s.u_fade)}),lineSDF:(I,s)=>({u_translation:new o.bU(I,s.u_translation),u_ratio:new o.bg(I,s.u_ratio),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_units_to_pixels:new o.bU(I,s.u_units_to_pixels),u_patternscale_a:new o.bU(I,s.u_patternscale_a),u_patternscale_b:new o.bU(I,s.u_patternscale_b),u_sdfgamma:new o.bg(I,s.u_sdfgamma),u_image:new o.bP(I,s.u_image),u_tex_y_a:new o.bg(I,s.u_tex_y_a),u_tex_y_b:new o.bg(I,s.u_tex_y_b),u_mix:new o.bg(I,s.u_mix)}),raster:(I,s)=>({u_tl_parent:new o.bU(I,s.u_tl_parent),u_scale_parent:new o.bg(I,s.u_scale_parent),u_buffer_scale:new o.bg(I,s.u_buffer_scale),u_fade_t:new o.bg(I,s.u_fade_t),u_opacity:new o.bg(I,s.u_opacity),u_image0:new o.bP(I,s.u_image0),u_image1:new o.bP(I,s.u_image1),u_brightness_low:new o.bg(I,s.u_brightness_low),u_brightness_high:new o.bg(I,s.u_brightness_high),u_saturation_factor:new o.bg(I,s.u_saturation_factor),u_contrast_factor:new o.bg(I,s.u_contrast_factor),u_spin_weights:new o.bT(I,s.u_spin_weights),u_coords_top:new o.bS(I,s.u_coords_top),u_coords_bottom:new o.bS(I,s.u_coords_bottom)}),symbolIcon:(I,s)=>({u_is_size_zoom_constant:new o.bP(I,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(I,s.u_is_size_feature_constant),u_size_t:new o.bg(I,s.u_size_t),u_size:new o.bg(I,s.u_size),u_camera_to_center_distance:new o.bg(I,s.u_camera_to_center_distance),u_pitch:new o.bg(I,s.u_pitch),u_rotate_symbol:new o.bP(I,s.u_rotate_symbol),u_aspect_ratio:new o.bg(I,s.u_aspect_ratio),u_fade_change:new o.bg(I,s.u_fade_change),u_label_plane_matrix:new o.bR(I,s.u_label_plane_matrix),u_coord_matrix:new o.bR(I,s.u_coord_matrix),u_is_text:new o.bP(I,s.u_is_text),u_pitch_with_map:new o.bP(I,s.u_pitch_with_map),u_is_along_line:new o.bP(I,s.u_is_along_line),u_is_variable_anchor:new o.bP(I,s.u_is_variable_anchor),u_texsize:new o.bU(I,s.u_texsize),u_texture:new o.bP(I,s.u_texture),u_translation:new o.bU(I,s.u_translation),u_pitched_scale:new o.bg(I,s.u_pitched_scale)}),symbolSDF:(I,s)=>({u_is_size_zoom_constant:new o.bP(I,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(I,s.u_is_size_feature_constant),u_size_t:new o.bg(I,s.u_size_t),u_size:new o.bg(I,s.u_size),u_camera_to_center_distance:new o.bg(I,s.u_camera_to_center_distance),u_pitch:new o.bg(I,s.u_pitch),u_rotate_symbol:new o.bP(I,s.u_rotate_symbol),u_aspect_ratio:new o.bg(I,s.u_aspect_ratio),u_fade_change:new o.bg(I,s.u_fade_change),u_label_plane_matrix:new o.bR(I,s.u_label_plane_matrix),u_coord_matrix:new o.bR(I,s.u_coord_matrix),u_is_text:new o.bP(I,s.u_is_text),u_pitch_with_map:new o.bP(I,s.u_pitch_with_map),u_is_along_line:new o.bP(I,s.u_is_along_line),u_is_variable_anchor:new o.bP(I,s.u_is_variable_anchor),u_texsize:new o.bU(I,s.u_texsize),u_texture:new o.bP(I,s.u_texture),u_gamma_scale:new o.bg(I,s.u_gamma_scale),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_is_halo:new o.bP(I,s.u_is_halo),u_translation:new o.bU(I,s.u_translation),u_pitched_scale:new o.bg(I,s.u_pitched_scale)}),symbolTextAndIcon:(I,s)=>({u_is_size_zoom_constant:new o.bP(I,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(I,s.u_is_size_feature_constant),u_size_t:new o.bg(I,s.u_size_t),u_size:new o.bg(I,s.u_size),u_camera_to_center_distance:new o.bg(I,s.u_camera_to_center_distance),u_pitch:new o.bg(I,s.u_pitch),u_rotate_symbol:new o.bP(I,s.u_rotate_symbol),u_aspect_ratio:new o.bg(I,s.u_aspect_ratio),u_fade_change:new o.bg(I,s.u_fade_change),u_label_plane_matrix:new o.bR(I,s.u_label_plane_matrix),u_coord_matrix:new o.bR(I,s.u_coord_matrix),u_is_text:new o.bP(I,s.u_is_text),u_pitch_with_map:new o.bP(I,s.u_pitch_with_map),u_is_along_line:new o.bP(I,s.u_is_along_line),u_is_variable_anchor:new o.bP(I,s.u_is_variable_anchor),u_texsize:new o.bU(I,s.u_texsize),u_texsize_icon:new o.bU(I,s.u_texsize_icon),u_texture:new o.bP(I,s.u_texture),u_texture_icon:new o.bP(I,s.u_texture_icon),u_gamma_scale:new o.bg(I,s.u_gamma_scale),u_device_pixel_ratio:new o.bg(I,s.u_device_pixel_ratio),u_is_halo:new o.bP(I,s.u_is_halo),u_translation:new o.bU(I,s.u_translation),u_pitched_scale:new o.bg(I,s.u_pitched_scale)}),background:(I,s)=>({u_opacity:new o.bg(I,s.u_opacity),u_color:new o.bQ(I,s.u_color)}),backgroundPattern:(I,s)=>({u_opacity:new o.bg(I,s.u_opacity),u_image:new o.bP(I,s.u_image),u_pattern_tl_a:new o.bU(I,s.u_pattern_tl_a),u_pattern_br_a:new o.bU(I,s.u_pattern_br_a),u_pattern_tl_b:new o.bU(I,s.u_pattern_tl_b),u_pattern_br_b:new o.bU(I,s.u_pattern_br_b),u_texsize:new o.bU(I,s.u_texsize),u_mix:new o.bg(I,s.u_mix),u_pattern_size_a:new o.bU(I,s.u_pattern_size_a),u_pattern_size_b:new o.bU(I,s.u_pattern_size_b),u_scale_a:new o.bg(I,s.u_scale_a),u_scale_b:new o.bg(I,s.u_scale_b),u_pixel_coord_upper:new o.bU(I,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(I,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bg(I,s.u_tile_units_to_pixels)}),terrain:(I,s)=>({u_texture:new o.bP(I,s.u_texture),u_ele_delta:new o.bg(I,s.u_ele_delta),u_fog_matrix:new o.bR(I,s.u_fog_matrix),u_fog_color:new o.bQ(I,s.u_fog_color),u_fog_ground_blend:new o.bg(I,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bg(I,s.u_fog_ground_blend_opacity),u_horizon_color:new o.bQ(I,s.u_horizon_color),u_horizon_fog_blend:new o.bg(I,s.u_horizon_fog_blend),u_is_globe_mode:new o.bg(I,s.u_is_globe_mode)}),terrainDepth:(I,s)=>({u_ele_delta:new o.bg(I,s.u_ele_delta)}),terrainCoords:(I,s)=>({u_texture:new o.bP(I,s.u_texture),u_terrain_coords_id:new o.bg(I,s.u_terrain_coords_id),u_ele_delta:new o.bg(I,s.u_ele_delta)}),projectionErrorMeasurement:(I,s)=>({u_input:new o.bg(I,s.u_input),u_output_expected:new o.bg(I,s.u_output_expected)}),atmosphere:(I,s)=>({u_sun_pos:new o.bT(I,s.u_sun_pos),u_atmosphere_blend:new o.bg(I,s.u_atmosphere_blend),u_globe_position:new o.bT(I,s.u_globe_position),u_globe_radius:new o.bg(I,s.u_globe_radius),u_inv_proj_matrix:new o.bR(I,s.u_inv_proj_matrix)}),sky:(I,s)=>({u_sky_color:new o.bQ(I,s.u_sky_color),u_horizon_color:new o.bQ(I,s.u_horizon_color),u_horizon:new o.bU(I,s.u_horizon),u_horizon_normal:new o.bU(I,s.u_horizon_normal),u_sky_horizon_blend:new o.bg(I,s.u_sky_horizon_blend),u_sky_blend:new o.bg(I,s.u_sky_blend)})};class ac{constructor(s,f,_){this.context=s;const S=s.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Mu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class UA{constructor(s,f,_,S){this.length=f.length,this.attributes=_,this.itemSize=f.bytesPerElement,this.dynamicDraw=S,this.context=s;const k=s.gl;this.buffer=k.createBuffer(),s.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,f){for(let _=0;_<this.attributes.length;_++){const S=f.attributes[this.attributes[_].name];S!==void 0&&s.enableVertexAttribArray(S)}}setVertexAttribPointers(s,f,_){for(let S=0;S<this.attributes.length;S++){const k=this.attributes[S],z=f.attributes[k.name];z!==void 0&&s.vertexAttribPointer(z,k.components,s[Mu[k.type]],!1,this.itemSize,k.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Bo{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class _h extends Bo{getDefault(){return o.bf.transparent}set(s){const f=this.current;(s.r!==f.r||s.g!==f.g||s.b!==f.b||s.a!==f.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class wd extends Bo{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class wp extends Bo{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Sc extends Bo{getDefault(){return[!0,!0,!0,!0]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||s[3]!==f[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class zl extends Bo{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Zt extends Bo{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Sn extends Bo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const f=this.current;(s.func!==f.func||s.ref!==f.ref||s.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class vn extends Bo{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class Ti extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=s,this.dirty=!1}}class Sr extends Bo{getDefault(){return[0,1]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Oo extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=s,this.dirty=!1}}class Hs extends Bo{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Do extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.BLEND):f.disable(f.BLEND),this.current=s,this.dirty=!1}}class Vc extends Bo{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class $d extends Bo{getDefault(){return o.bf.transparent}set(s){const f=this.current;(s.r!==f.r||s.g!==f.g||s.b!==f.b||s.a!==f.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class su extends Bo{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Sd extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;s?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=s,this.dirty=!1}}class dA extends Bo{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class wu extends Bo{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Su extends Bo{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class Tl extends Bo{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class Go extends Bo{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const f=this.current;(s[0]!==f[0]||s[1]!==f[1]||s[2]!==f[2]||s[3]!==f[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class fA extends Bo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class qh extends Bo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Na extends Bo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Vs extends Bo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Es extends Bo{getDefault(){return null}set(s){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Zu extends Bo{getDefault(){return null}set(s){var f;if(s===this.current&&!this.dirty)return;const _=this.gl;at(_)?_.bindVertexArray(s):(f=_.getExtension("OES_vertex_array_object"))===null||f===void 0||f.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class jl extends Bo{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Eu extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class sc extends Bo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Bu extends Bo{constructor(s,f){super(s),this.context=s,this.parent=f}getDefault(){return null}}class Ec extends Bu{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class bh extends Bu{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class kr extends Bu{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,s),this.current=s,this.dirty=!1}}const lc="Framebuffer is not complete";class Xu{constructor(s,f,_,S,k){this.context=s,this.width=f,this.height=_;const z=s.gl,q=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new Ec(s,q),S)this.depthAttachment=k?new kr(s,q):new bh(s,q);else if(k)throw new Error("Stencil cannot be set without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error(lc)}destroy(){const s=this.context.gl,f=this.colorAttachment.get();if(f&&s.deleteTexture(f),this.depthAttachment){const _=this.depthAttachment.get();_&&s.deleteRenderbuffer(_)}s.deleteFramebuffer(this.framebuffer)}}class Bc{constructor(s){var f,_;if(this.gl=s,this.clearColor=new _h(this),this.clearDepth=new wd(this),this.clearStencil=new wp(this),this.colorMask=new Sc(this),this.depthMask=new zl(this),this.stencilMask=new Zt(this),this.stencilFunc=new Sn(this),this.stencilOp=new vn(this),this.stencilTest=new Ti(this),this.depthRange=new Sr(this),this.depthTest=new Oo(this),this.depthFunc=new Hs(this),this.blend=new Do(this),this.blendFunc=new Vc(this),this.blendColor=new $d(this),this.blendEquation=new su(this),this.cullFace=new Sd(this),this.cullFaceSide=new dA(this),this.frontFace=new wu(this),this.program=new Su(this),this.activeTexture=new Tl(this),this.viewport=new Go(this),this.bindFramebuffer=new fA(this),this.bindRenderbuffer=new qh(this),this.bindTexture=new Na(this),this.bindVertexBuffer=new Vs(this),this.bindElementBuffer=new Es(this),this.bindVertexArray=new Zu(this),this.pixelStoreUnpack=new jl(this),this.pixelStoreUnpackPremultiplyAlpha=new Eu(this),this.pixelStoreUnpackFlipY=new sc(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),at(s)){this.HALF_FLOAT=s.HALF_FLOAT;const S=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(f=s.RGBA16F)!==null&&f!==void 0?f:S?.RGBA16F_EXT,this.RGB16F=(_=s.RGB16F)!==null&&_!==void 0?_:S?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const S=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=S?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,f){return new ac(this,s,f)}createVertexBuffer(s,f,_){return new UA(this,s,f,_)}createRenderbuffer(s,f,_){const S=this.gl,k=S.createRenderbuffer();return this.bindRenderbuffer.set(k),S.renderbufferStorage(S.RENDERBUFFER,s,f,_),this.bindRenderbuffer.set(null),k}createFramebuffer(s,f,_,S){return new Xu(this,s,f,_,S)}clear({color:s,depth:f,stencil:_}){const S=this.gl;let k=0;s&&(k|=S.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(k|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),_!==void 0&&(k|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),S.clear(k)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){o.bH(s.blendFunction,Rr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return at(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var f;return at(this.gl)?this.gl.deleteVertexArray(s):(f=this.gl.getExtension("OES_vertex_array_object"))===null||f===void 0?void 0:f.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let Bs;function xh(I,s,f,_,S){const k=I.context,z=I.transform,q=k.gl,X=I.useProgram("collisionBox"),he=[];let me=0,Ee=0;for(let ft=0;ft<_.length;ft++){const xt=_[ft],yt=s.getTile(xt).getBucket(f);if(!yt)continue;const wt=S?yt.textCollisionBox:yt.iconCollisionBox,Pt=yt.collisionCircleArray;Pt.length>0&&(he.push({circleArray:Pt,circleOffset:Ee,coord:xt}),me+=Pt.length/4,Ee=me),wt&&X.draw(k,q.LINES,wi.disabled,ee.disabled,I.colorModeForRenderPass(),Zi.disabled,vh(I.transform),I.style.map.terrain&&I.style.map.terrain.getTerrainData(xt),z.getProjectionData({overscaledTileID:xt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),f.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,I.transform.zoom,null,null,wt.collisionVertexBuffer)}if(!S||!he.length)return;const Me=I.useProgram("collisionCircle"),Ue=new o.b$;Ue.resize(4*me),Ue._trim();let Xe=0;for(const ft of he)for(let xt=0;xt<ft.circleArray.length/4;xt++){const yt=4*xt,wt=ft.circleArray[yt+0],Pt=ft.circleArray[yt+1],Ft=ft.circleArray[yt+2],Bt=ft.circleArray[yt+3];Ue.emplace(Xe++,wt,Pt,Ft,Bt,0),Ue.emplace(Xe++,wt,Pt,Ft,Bt,1),Ue.emplace(Xe++,wt,Pt,Ft,Bt,2),Ue.emplace(Xe++,wt,Pt,Ft,Bt,3)}(!Bs||Bs.length<2*me)&&(Bs=function(ft){const xt=2*ft,yt=new o.c1;yt.resize(xt),yt._trim();for(let wt=0;wt<xt;wt++){const Pt=6*wt;yt.uint16[Pt+0]=4*wt+0,yt.uint16[Pt+1]=4*wt+1,yt.uint16[Pt+2]=4*wt+2,yt.uint16[Pt+3]=4*wt+2,yt.uint16[Pt+4]=4*wt+3,yt.uint16[Pt+5]=4*wt+0}return yt}(me));const ut=k.createIndexBuffer(Bs,!0),ct=k.createVertexBuffer(Ue,o.c0.members,!0);for(const ft of he){const xt=Ch(I.transform);Me.draw(k,q.TRIANGLES,wi.disabled,ee.disabled,I.colorModeForRenderPass(),Zi.disabled,xt,I.style.map.terrain&&I.style.map.terrain.getTerrainData(ft.coord),null,f.id,ct,ut,o.aM.simpleSegment(0,2*ft.circleOffset,ft.circleArray.length,ft.circleArray.length/2),null,I.transform.zoom,null,null,null)}ct.destroy(),ut.destroy()}const Ed=o.ag(new Float32Array(16));function pA(I,s,f,_,S,k){const{horizontalAlign:z,verticalAlign:q}=o.aH(I);return new o.P((-(z-.5)*s/S+_[0])*k,(-(q-.5)*f/S+_[1])*k)}function Bd(I,s,f,_,S,k){const z=s.tileAnchorPoint.add(new o.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let q=_.mult(k);f||(q=q.rotate(-S));const X=z.add(q);return Wi(X.x,X.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(f){const q=vr(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(I),X=Math.atan(q.y/q.x)+(q.x<0?Math.PI:0);return I.add(_.rotate(X))}return I.add(_)}function $c(I,s,f,_,S,k,z,q,X,he,me,Ee){const Me=I.text.placedSymbolArray,Ue=I.text.dynamicLayoutVertexArray,Xe=I.icon.dynamicLayoutVertexArray,ut={};Ue.clear();for(let ct=0;ct<Me.length;ct++){const ft=Me.get(ct),xt=ft.hidden||!ft.crossTileID||I.allowVerticalPlacement&&!ft.placedOrientation?null:_[ft.crossTileID];if(xt){const yt=new o.P(ft.anchorX,ft.anchorY),wt={getElevation:Ee,width:S.width,height:S.height,pitchedLabelPlaneMatrix:k,pitchWithMap:f,transform:S,tileAnchorPoint:yt,translation:he,unwrappedTileID:me},Pt=f?Tr(yt.x,yt.y,wt):vr(yt.x,yt.y,wt),Ft=wn(S.cameraToCenterDistance,Pt.signedDistanceFromCamera);let Bt=o.ap(I.textSizeData,q,ft)*Ft/o.aB;f&&(Bt*=I.tilePixelRatio/z);const{width:Yt,height:dn,anchor:Xt,textOffset:nn,textBoxScale:un}=xt,qn=pA(Xt,Yt,dn,nn,un,Bt),Qn=S.getPitchedTextCorrection(yt.x+he[0],yt.y+he[1],me),Tn=Bd(Pt.point,wt,s,qn,-S.bearingInRadians,Qn),xi=I.allowVerticalPlacement&&ft.placedOrientation===o.ao.vertical?Math.PI/2:0;for(let cr=0;cr<ft.numGlyphs;cr++)o.av(Ue,Tn,xi);X&&ft.associatedIconIndex>=0&&(ut[ft.associatedIconIndex]={shiftedAnchor:Tn,angle:xi})}else Xa(ft.numGlyphs,Ue)}if(X){Xe.clear();const ct=I.icon.placedSymbolArray;for(let ft=0;ft<ct.length;ft++){const xt=ct.get(ft);if(xt.hidden)Xa(xt.numGlyphs,Xe);else{const yt=ut[ft];if(yt)for(let wt=0;wt<xt.numGlyphs;wt++)o.av(Xe,yt.shiftedAnchor,yt.angle);else Xa(xt.numGlyphs,Xe)}}I.icon.dynamicLayoutVertexBuffer.updateData(Xe)}I.text.dynamicLayoutVertexBuffer.updateData(Ue)}function Ou(I,s,f){return f.iconsInText&&s?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function LA(I,s,f,_,S,k,z,q,X,he,me,Ee,Me){const Ue=I.context,Xe=Ue.gl,ut=I.transform,ct=q==="map",ft=X==="map",xt=q!=="viewport"&&f.layout.get("symbol-placement")!=="point",yt=ct&&!ft&&!xt,wt=!f.layout.get("symbol-sort-key").isConstant();let Pt=!1;const Ft=I.getDepthModeForSublayer(0,wi.ReadOnly),Bt=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Yt=[],dn=ut.getCircleRadiusCorrection();for(const Xt of _){const nn=s.getTile(Xt),un=nn.getBucket(f);if(!un)continue;const qn=S?un.text:un.icon;if(!qn||!qn.segments.get().length||!qn.hasVisibleVertices)continue;const Qn=qn.programConfigurations.get(f.id),Tn=S||un.sdfIcons,xi=S?un.textSizeData:un.iconSizeData,cr=ft||ut.pitch!==0,Co=I.useProgram(Ou(Tn,S,un),Qn),ua=o.an(xi,ut.zoom),Lo=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Xt);let Pa,Aa,Br,Qo,is=[0,0],Qa=null;if(S)Aa=nn.glyphAtlasTexture,Br=Xe.LINEAR,Pa=nn.glyphAtlasTexture.size,un.iconsInText&&(is=nn.imageAtlasTexture.size,Qa=nn.imageAtlasTexture,Qo=cr||I.options.rotating||I.options.zooming||xi.kind==="composite"||xi.kind==="camera"?Xe.LINEAR:Xe.NEAREST);else{const _o=f.layout.get("icon-size").constantOr(0)!==1||un.iconsNeedLinear;Aa=nn.imageAtlasTexture,Br=Tn||I.options.rotating||I.options.zooming||_o||cr?Xe.LINEAR:Xe.NEAREST,Pa=nn.imageAtlasTexture.size}const Os=o.aC(nn,1,I.transform.zoom),Is=Ei(ct,I.transform,Os),YA=o.L();o.aq(YA,Is);const dc=hi(ft,ct,I.transform,Os),ql=o.aD(ut,nn,k,z),Ih=ut.getProjectionData({overscaledTileID:Xt,applyGlobeMatrix:!Me,applyTerrainMatrix:!0}),rh=Bt&&un.hasTextData(),qA=f.layout.get("icon-text-fit")!=="none"&&rh&&un.hasIconData();if(xt){const _o=I.style.map.terrain?(hu,ys)=>I.style.map.terrain.getElevation(Xt,hu,ys):null,Xo=f.layout.get("text-rotation-alignment")==="map";Hi(un,I,S,Is,YA,ft,he,Xo,Xt.toUnwrapped(),ut.width,ut.height,ql,_o)}const Pc=S&&Bt||qA,bl=xt||Pc?Ed:ft?Is:I.transform.clipSpaceToPixelsMatrix,HA=Tn&&f.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let xl;xl=Tn?un.iconsInText?hA(xi.kind,ua,yt,ft,xt,Pc,I,bl,dc,ql,Pa,is,dn):Vd(xi.kind,ua,yt,ft,xt,Pc,I,bl,dc,ql,S,Pa,0,dn):Hc(xi.kind,ua,yt,ft,xt,Pc,I,bl,dc,ql,S,Pa,dn);const Kc={program:Co,buffers:qn,uniformValues:xl,projectionData:Ih,atlasTexture:Aa,atlasTextureIcon:Qa,atlasInterpolation:Br,atlasInterpolationIcon:Qo,isSDF:Tn,hasHalo:HA};if(wt&&un.canOverlap){Pt=!0;const _o=qn.segments.get();for(const Xo of _o)Yt.push({segments:new o.aM([Xo]),sortKey:Xo.sortKey,state:Kc,terrainData:Lo})}else Yt.push({segments:qn.segments,sortKey:0,state:Kc,terrainData:Lo})}Pt&&Yt.sort((Xt,nn)=>Xt.sortKey-nn.sortKey);for(const Xt of Yt){const nn=Xt.state;if(Ue.activeTexture.set(Xe.TEXTURE0),nn.atlasTexture.bind(nn.atlasInterpolation,Xe.CLAMP_TO_EDGE),nn.atlasTextureIcon&&(Ue.activeTexture.set(Xe.TEXTURE1),nn.atlasTextureIcon&&nn.atlasTextureIcon.bind(nn.atlasInterpolationIcon,Xe.CLAMP_TO_EDGE)),nn.isSDF){const un=nn.uniformValues;nn.hasHalo&&(un.u_is_halo=1,Mh(nn.buffers,Xt.segments,f,I,nn.program,Ft,me,Ee,un,nn.projectionData,Xt.terrainData)),un.u_is_halo=0}Mh(nn.buffers,Xt.segments,f,I,nn.program,Ft,me,Ee,nn.uniformValues,nn.projectionData,Xt.terrainData)}}function Mh(I,s,f,_,S,k,z,q,X,he,me){const Ee=_.context;S.draw(Ee,Ee.gl.TRIANGLES,k,z,q,Zi.backCCW,X,me,he,f.id,I.layoutVertexBuffer,I.indexBuffer,s,f.paint,_.transform.zoom,I.programConfigurations.get(f.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function Hh(I,s,f,_,S){const k=I.context,z=k.gl,q=ee.disabled,X=new Rr([z.ONE,z.ONE],o.bf.transparent,[!0,!0,!0,!0]),he=s.getBucket(f);if(!he)return;const me=_.key;let Ee=f.heatmapFbos.get(me);Ee||(Ee=kl(k,s.tileSize,s.tileSize),f.heatmapFbos.set(me,Ee)),k.bindFramebuffer.set(Ee.framebuffer),k.viewport.set([0,0,s.tileSize,s.tileSize]),k.clear({color:o.bf.transparent});const Me=he.programConfigurations.get(f.id),Ue=I.useProgram("heatmap",Me,!S),Xe=I.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ut=I.style.map.terrain.getTerrainData(_);Ue.draw(k,z.TRIANGLES,wi.disabled,q,X,Zi.disabled,Rf(s,I.transform.zoom,f.paint.get("heatmap-intensity"),1),ut,Xe,f.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,f.paint,I.transform.zoom,Me)}function Iu(I,s,f,_,S){const k=I.context,z=k.gl,q=I.transform;k.setColorMode(I.colorModeForRenderPass());const X=Wo(k,s),he=f.key,me=s.heatmapFbos.get(he);if(!me)return;k.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,me.colorAttachment.get()),k.activeTexture.set(z.TEXTURE1),X.bind(z.LINEAR,z.CLAMP_TO_EDGE);const Ee=q.getProjectionData({overscaledTileID:f,applyTerrainMatrix:S,applyGlobeMatrix:!_});I.useProgram("heatmapTexture").draw(k,z.TRIANGLES,wi.disabled,ee.disabled,I.colorModeForRenderPass(),Zi.disabled,ou(I,s,0,1),null,Ee,s.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments,s.paint,q.zoom),me.destroy(),s.heatmapFbos.delete(he)}function kl(I,s,f){var _,S;const k=I.gl,z=k.createTexture();k.bindTexture(k.TEXTURE_2D,z),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR);const q=(_=I.HALF_FLOAT)!==null&&_!==void 0?_:k.UNSIGNED_BYTE,X=(S=I.RGBA16F)!==null&&S!==void 0?S:k.RGBA;k.texImage2D(k.TEXTURE_2D,0,X,s,f,0,k.RGBA,q,null);const he=I.createFramebuffer(s,f,!1,!1);return he.colorAttachment.set(z),he}function Wo(I,s){return s.colorRampTexture||(s.colorRampTexture=new o.T(I,s.colorRamp,I.gl.RGBA)),s.colorRampTexture}function sa(I,s,f,_,S){if(!f||!_||!_.imageAtlas)return;const k=_.imageAtlas.patternPositions;let z=k[f.to.toString()],q=k[f.from.toString()];if(!z&&q&&(z=q),!q&&z&&(q=z),!z||!q){const X=S.getPaintProperty(s);z=k[X],q=k[X]}z&&q&&I.setConstantPatternPositions(z,q)}function FA(I,s,f,_,S,k,z,q){const X=I.context.gl,he="fill-pattern",me=f.paint.get(he),Ee=me&&me.constantOr(1),Me=f.getCrossfadeParameters();let Ue,Xe,ut,ct,ft;const xt=I.transform,yt=f.paint.get("fill-translate"),wt=f.paint.get("fill-translate-anchor");z?(Xe=Ee&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ue=X.LINES):(Xe=Ee?"fillPattern":"fill",Ue=X.TRIANGLES);const Pt=me.constantOr(null);for(const Ft of _){const Bt=s.getTile(Ft);if(Ee&&!Bt.patternsLoaded())continue;const Yt=Bt.getBucket(f);if(!Yt)continue;const dn=Yt.programConfigurations.get(f.id),Xt=I.useProgram(Xe,dn),nn=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Ft);Ee&&(I.context.activeTexture.set(X.TEXTURE0),Bt.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),dn.updatePaintBuffers(Me)),sa(dn,he,Pt,Bt,f);const un=xt.getProjectionData({overscaledTileID:Ft,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),qn=o.aD(xt,Bt,yt,wt);if(z){ct=Yt.indexBuffer2,ft=Yt.segments2;const Tn=[X.drawingBufferWidth,X.drawingBufferHeight];ut=Xe==="fillOutlinePattern"&&Ee?Gh(I,Me,Bt,Tn,qn):qc(Tn,qn)}else ct=Yt.indexBuffer,ft=Yt.segments,ut=Ee?Nh(I,Me,Bt,qn):{u_fill_translate:qn};const Qn=I.stencilModeForClipping(Ft);Xt.draw(I.context,Ue,S,Qn,k,Zi.backCCW,ut,nn,un,f.id,Yt.layoutVertexBuffer,ct,ft,f.paint,I.transform.zoom,dn)}}function zA(I,s,f,_,S,k,z,q){const X=I.context,he=X.gl,me="fill-extrusion-pattern",Ee=f.paint.get(me),Me=Ee.constantOr(1),Ue=f.getCrossfadeParameters(),Xe=f.paint.get("fill-extrusion-opacity"),ut=Ee.constantOr(null),ct=I.transform;for(const ft of _){const xt=s.getTile(ft),yt=xt.getBucket(f);if(!yt)continue;const wt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(ft),Pt=yt.programConfigurations.get(f.id),Ft=I.useProgram(Me?"fillExtrusionPattern":"fillExtrusion",Pt);Me&&(I.context.activeTexture.set(he.TEXTURE0),xt.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Pt.updatePaintBuffers(Ue));const Bt=ct.getProjectionData({overscaledTileID:ft,applyGlobeMatrix:!q,applyTerrainMatrix:!0});sa(Pt,me,ut,xt,f);const Yt=o.aD(ct,xt,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),dn=f.paint.get("fill-extrusion-vertical-gradient"),Xt=Me?bd(I,dn,Xe,Yt,ft,Ue,xt):Fl(I,dn,Xe,Yt);Ft.draw(X,X.gl.TRIANGLES,S,k,z,Zi.backCCW,Xt,wt,Bt,f.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,f.paint,I.transform.zoom,Pt,I.style.map.terrain&&yt.centroidVertexBuffer)}}function Oc(I,s,f,_,S,k,z,q,X){var he;const me=I.style.projection,Ee=I.context,Me=I.transform,Ue=Ee.gl,Xe=[`#define NUM_ILLUMINATION_SOURCES ${f.paint.get("hillshade-highlight-color").values.length}`],ut=I.useProgram("hillshade",null,!1,Xe),ct=!I.options.moving;for(const ft of _){const xt=s.getTile(ft),yt=xt.fbo;if(!yt)continue;const wt=me.getMeshFromTileID(Ee,ft.canonical,q,!0,"raster"),Pt=(he=I.style.map.terrain)===null||he===void 0?void 0:he.getTerrainData(ft);Ee.activeTexture.set(Ue.TEXTURE0),Ue.bindTexture(Ue.TEXTURE_2D,yt.colorAttachment.get());const Ft=Me.getProjectionData({overscaledTileID:ft,aligned:ct,applyGlobeMatrix:!X,applyTerrainMatrix:!0});ut.draw(Ee,Ue.TRIANGLES,k,S[ft.overscaledZ],z,Zi.backCCW,Pf(I,xt,f),Pt,Ft,f.id,wt.vertexBuffer,wt.indexBuffer,wt.segments)}}function Zc(I,s,f,_,S,k,z,q,X){var he;const me=I.style.projection,Ee=I.context,Me=I.transform,Ue=Ee.gl,Xe=I.useProgram("colorRelief"),ut=!I.options.moving;let ct=!0,ft=0;for(const xt of _){const yt=s.getTile(xt),wt=yt.dem;if(ct){const Xt=Ue.getParameter(Ue.MAX_TEXTURE_SIZE),{elevationTexture:nn,colorTexture:un}=f.getColorRampTextures(Ee,Xt,wt.getUnpackVector());Ee.activeTexture.set(Ue.TEXTURE1),nn.bind(Ue.NEAREST,Ue.CLAMP_TO_EDGE),Ee.activeTexture.set(Ue.TEXTURE4),un.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),ct=!1,ft=nn.size[0]}if(!wt||!wt.data)continue;const Pt=wt.stride,Ft=wt.getPixels();if(Ee.activeTexture.set(Ue.TEXTURE0),Ee.pixelStoreUnpackPremultiplyAlpha.set(!1),yt.demTexture=yt.demTexture||I.getTileTexture(Pt),yt.demTexture){const Xt=yt.demTexture;Xt.update(Ft,{premultiply:!1}),Xt.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE)}else yt.demTexture=new o.T(Ee,Ft,Ue.RGBA,{premultiply:!1}),yt.demTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE);const Bt=me.getMeshFromTileID(Ee,xt.canonical,q,!0,"raster"),Yt=(he=I.style.map.terrain)===null||he===void 0?void 0:he.getTerrainData(xt),dn=Me.getProjectionData({overscaledTileID:xt,aligned:ut,applyGlobeMatrix:!X,applyTerrainMatrix:!0});Xe.draw(Ee,Ue.TRIANGLES,k,S[xt.overscaledZ],z,Zi.backCCW,Mc(f,yt.dem,ft),Yt,dn,f.id,Bt.vertexBuffer,Bt.indexBuffer,Bt.segments)}}const Xc=[new o.P(0,0),new o.P(o.$,0),new o.P(o.$,o.$),new o.P(0,o.$)];function va(I,s,f,_,S,k,z,q,X=!1,he=!1){const me=_[_.length-1].overscaledZ,Ee=I.context,Me=Ee.gl,Ue=I.useProgram("raster"),Xe=I.transform,ut=I.style.projection,ct=I.colorModeForRenderPass(),ft=!I.options.moving;for(const xt of _){const yt=I.getDepthModeForSublayer(xt.overscaledZ-me,f.paint.get("raster-opacity")===1?wi.ReadWrite:wi.ReadOnly,Me.LESS),wt=s.getTile(xt);wt.registerFadeDuration(f.paint.get("raster-fade-duration"));const Pt=s.findLoadedParent(xt,0),Ft=s.findLoadedSibling(xt),Bt=_a(wt,Pt||Ft||null,s,f,I.transform,I.style.map.terrain);let Yt,dn;const Xt=f.paint.get("raster-resampling")==="nearest"?Me.NEAREST:Me.LINEAR;Ee.activeTexture.set(Me.TEXTURE0),wt.texture.bind(Xt,Me.CLAMP_TO_EDGE,Me.LINEAR_MIPMAP_NEAREST),Ee.activeTexture.set(Me.TEXTURE1),Pt?(Pt.texture.bind(Xt,Me.CLAMP_TO_EDGE,Me.LINEAR_MIPMAP_NEAREST),Yt=Math.pow(2,Pt.tileID.overscaledZ-wt.tileID.overscaledZ),dn=[wt.tileID.canonical.x*Yt%1,wt.tileID.canonical.y*Yt%1]):wt.texture.bind(Xt,Me.CLAMP_TO_EDGE,Me.LINEAR_MIPMAP_NEAREST),wt.texture.useMipmap&&Ee.extTextureFilterAnisotropic&&I.transform.pitch>20&&Me.texParameterf(Me.TEXTURE_2D,Ee.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ee.extTextureFilterAnisotropicMax);const nn=I.style.map.terrain&&I.style.map.terrain.getTerrainData(xt),un=Xe.getProjectionData({overscaledTileID:xt,aligned:ft,applyGlobeMatrix:!he,applyTerrainMatrix:!0}),qn=Yh(dn||[0,0],Yt||1,Bt,f,q),Qn=ut.getMeshFromTileID(Ee,xt.canonical,k,z,"raster");Ue.draw(Ee,Me.TRIANGLES,yt,S?S[xt.overscaledZ]:ee.disabled,ct,X?Zi.frontCCW:Zi.backCCW,qn,nn,un,f.id,Qn.vertexBuffer,Qn.indexBuffer,Qn.segments)}}function _a(I,s,f,_,S,k){const z=_.paint.get("raster-fade-duration");if(!k&&z>0){const q=U.now(),X=(q-I.timeAdded)/z,he=s?(q-s.timeAdded)/z:-1,me=f.getSource(),Ee=Tt(S,{tileSize:me.tileSize,roundZoom:me.roundZoom}),Me=!s||Math.abs(s.tileID.overscaledZ-Ee)>Math.abs(I.tileID.overscaledZ-Ee),Ue=Me&&I.refreshedUponExpiration?1:o.ah(Me?X:1-he,0,1);return I.refreshedUponExpiration&&X>=1&&(I.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Ue}:{opacity:Ue,mix:0}}return{opacity:1,mix:0}}const Zr=new o.bf(1,0,0,1),lu=new o.bf(0,1,0,1),Fs=new o.bf(0,0,1,1),Jc=new o.bf(1,0,1,1),mA=new o.bf(0,1,1,1);function Zd(I,s,f,_){rl(I,0,s+f/2,I.transform.width,f,_)}function ms(I,s,f,_){rl(I,s-f/2,0,f,I.transform.height,_)}function rl(I,s,f,_,S,k){const z=I.context,q=z.gl;q.enable(q.SCISSOR_TEST),q.scissor(s*I.pixelRatio,f*I.pixelRatio,_*I.pixelRatio,S*I.pixelRatio),z.clear({color:k}),q.disable(q.SCISSOR_TEST)}function zs(I,s,f){const _=I.context,S=_.gl,k=I.useProgram("debug"),z=wi.disabled,q=ee.disabled,X=I.colorModeForRenderPass(),he="$debug",me=I.style.map.terrain&&I.style.map.terrain.getTerrainData(f);_.activeTexture.set(S.TEXTURE0);const Ee=s.getTileByID(f.key).latestRawTileData,Me=Math.floor((Ee&&Ee.byteLength||0)/1024),Ue=s.getTile(f).tileSize,Xe=512/Math.min(Ue,512)*(f.overscaledZ/I.transform.zoom)*.5;let ut=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(ut+=` => ${f.overscaledZ}`),function(ft,xt){ft.initDebugOverlayCanvas();const yt=ft.debugOverlayCanvas,wt=ft.context.gl,Pt=ft.debugOverlayCanvas.getContext("2d");Pt.clearRect(0,0,yt.width,yt.height),Pt.shadowColor="white",Pt.shadowBlur=2,Pt.lineWidth=1.5,Pt.strokeStyle="white",Pt.textBaseline="top",Pt.font="bold 36px Open Sans, sans-serif",Pt.fillText(xt,5,5),Pt.strokeText(xt,5,5),ft.debugOverlayTexture.update(yt),ft.debugOverlayTexture.bind(wt.LINEAR,wt.CLAMP_TO_EDGE)}(I,`${ut} ${Me}kB`);const ct=I.transform.getProjectionData({overscaledTileID:f,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(_,S.TRIANGLES,z,q,Rr.alphaBlended,Zi.disabled,Wh(o.bf.transparent,Xe),null,ct,he,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),k.draw(_,S.LINE_STRIP,z,q,X,Zi.disabled,Wh(o.bf.red),me,ct,he,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function Xd(I,s,f,_){const{isRenderingGlobe:S}=_,k=I.context,z=k.gl,q=I.transform,X=I.colorModeForRenderPass(),he=I.getDepthModeFor3D(),me=I.useProgram("terrain");k.bindFramebuffer.set(null),k.viewport.set([0,0,I.width,I.height]);for(const Ee of f){const Me=s.getTerrainMesh(Ee.tileID),Ue=I.renderToTexture.getTexture(Ee),Xe=s.getTerrainData(Ee.tileID);k.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,Ue.texture);const ut=s.getMeshFrameDelta(q.zoom),ct=q.calculateFogMatrix(Ee.tileID.toUnwrapped()),ft=Tf(ut,ct,I.style.sky,q.pitch,S),xt=q.getProjectionData({overscaledTileID:Ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});me.draw(k,z.TRIANGLES,he,ee.disabled,X,Zi.backCCW,ft,Xe,xt,"terrain",Me.vertexBuffer,Me.indexBuffer,Me.segments)}}function jA(I,s){if(!s.mesh){const f=new o.aL;f.emplaceBack(-1,-1),f.emplaceBack(1,-1),f.emplaceBack(1,1),f.emplaceBack(-1,1);const _=new o.aN;_.emplaceBack(0,1,2),_.emplaceBack(0,2,3),s.mesh=new Kl(I.createVertexBuffer(f,ga.members),I.createIndexBuffer(_),o.aM.simpleSegment(0,0,f.length,_.length))}return s.mesh}class wh{constructor(s,f){this.context=new Bc(s),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Dn.maxUnderzooming+Dn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ys}resize(s,f,_){if(this.width=Math.floor(s*_),this.height=Math.floor(f*_),this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const s=this.context,f=new o.aL;f.emplaceBack(0,0),f.emplaceBack(o.$,0),f.emplaceBack(0,o.$),f.emplaceBack(o.$,o.$),this.tileExtentBuffer=s.createVertexBuffer(f,ga.members),this.tileExtentSegments=o.aM.simpleSegment(0,0,4,2);const _=new o.aL;_.emplaceBack(0,0),_.emplaceBack(o.$,0),_.emplaceBack(0,o.$),_.emplaceBack(o.$,o.$),this.debugBuffer=s.createVertexBuffer(_,ga.members),this.debugSegments=o.aM.simpleSegment(0,0,4,5);const S=new o.c6;S.emplaceBack(0,0,0,0),S.emplaceBack(o.$,0,o.$,0),S.emplaceBack(0,o.$,0,o.$),S.emplaceBack(o.$,o.$,o.$,o.$),this.rasterBoundsBuffer=s.createVertexBuffer(S,Cd.members),this.rasterBoundsSegments=o.aM.simpleSegment(0,0,4,2);const k=new o.aL;k.emplaceBack(0,0),k.emplaceBack(o.$,0),k.emplaceBack(0,o.$),k.emplaceBack(o.$,o.$),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(k,ga.members),this.rasterBoundsSegmentsPosOnly=o.aM.simpleSegment(0,0,4,5);const z=new o.aL;z.emplaceBack(0,0),z.emplaceBack(1,0),z.emplaceBack(0,1),z.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(z,ga.members),this.viewportSegments=o.aM.simpleSegment(0,0,4,2);const q=new o.c7;q.emplaceBack(0),q.emplaceBack(1),q.emplaceBack(3),q.emplaceBack(2),q.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(q);const X=new o.aN;X.emplaceBack(1,0,2),X.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(X);const he=this.context.gl;this.stencilClearMode=new ee({func:he.ALWAYS,mask:0},0,255,he.ZERO,he.ZERO,he.ZERO),this.tileExtentMesh=new Kl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const s=this.context,f=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=o.L();o.bY(_,0,this.width,this.height,0,0,1),o.N(_,_,[f.drawingBufferWidth,f.drawingBufferHeight,0]);const S={mainMatrix:_,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:_};this.useProgram("clippingMask",null,!0).draw(s,f.TRIANGLES,wi.disabled,this.stencilClearMode,Rr.disabled,Zi.disabled,null,null,S,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,f,_){if(this.currentStencilSource===s.source||!s.isTileClipped()||!f||!f.length)return;this.currentStencilSource=s.source,this.nextStencilID+f.length>256&&this.clearStencil();const S=this.context;S.setColorMode(Rr.disabled),S.setDepthMode(wi.disabled);const k={};for(const z of f)k[z.key]=this.nextStencilID++;this._renderTileMasks(k,f,_,!0),this._renderTileMasks(k,f,_,!1),this._tileClippingMaskIDs=k}_renderTileMasks(s,f,_,S){const k=this.context,z=k.gl,q=this.style.projection,X=this.transform,he=this.useProgram("clippingMask");for(const me of f){const Ee=s[me.key],Me=this.style.map.terrain&&this.style.map.terrain.getTerrainData(me),Ue=q.getMeshFromTileID(this.context,me.canonical,S,!0,"stencil"),Xe=X.getProjectionData({overscaledTileID:me,applyGlobeMatrix:!_,applyTerrainMatrix:!0});he.draw(k,z.TRIANGLES,wi.disabled,new ee({func:z.ALWAYS,mask:0},Ee,255,z.KEEP,z.KEEP,z.REPLACE),Rr.disabled,_?Zi.disabled:Zi.backCCW,null,Me,Xe,"$clipping",Ue.vertexBuffer,Ue.indexBuffer,Ue.segments)}}_renderTilesDepthBuffer(){const s=this.context,f=s.gl,_=this.style.projection,S=this.transform,k=this.useProgram("depth"),z=this.getDepthModeFor3D(),q=it(S,{tileSize:S.tileSize});for(const X of q){const he=this.style.map.terrain&&this.style.map.terrain.getTerrainData(X),me=_.getMeshFromTileID(this.context,X.canonical,!0,!0,"raster"),Ee=S.getProjectionData({overscaledTileID:X,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(s,f.TRIANGLES,z,ee.disabled,Rr.disabled,Zi.backCCW,null,he,Ee,"$clipping",me.vertexBuffer,me.indexBuffer,me.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,f=this.context.gl;return new ee({func:f.NOTEQUAL,mask:255},s,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(s){const f=this.context.gl;return new ee({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,f.KEEP,f.KEEP,f.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){const f=this.context.gl,_=s.sort((z,q)=>q.overscaledZ-z.overscaledZ),S=_[_.length-1].overscaledZ,k=_[0].overscaledZ-S+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const z={};for(let q=0;q<k;q++)z[q+S]=new ee({func:f.GEQUAL,mask:255},q+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=k,[z,_]}return[{[S]:ee.disabled},_]}stencilConfigForOverlapTwoPass(s){const f=this.context.gl,_=s.sort((z,q)=>q.overscaledZ-z.overscaledZ),S=_[_.length-1].overscaledZ,k=_[0].overscaledZ-S+1;if(this.clearStencil(),k>1){const z={},q={};for(let X=0;X<k;X++)z[X+S]=new ee({func:f.GREATER,mask:255},k+1+X,255,f.KEEP,f.KEEP,f.REPLACE),q[X+S]=new ee({func:f.GREATER,mask:255},1+X,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID=2*k+1,[z,q,_]}return this.nextStencilID=3,[{[S]:new ee({func:f.GREATER,mask:255},2,255,f.KEEP,f.KEEP,f.REPLACE)},{[S]:new ee({func:f.GREATER,mask:255},1,255,f.KEEP,f.KEEP,f.REPLACE)},_]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new Rr([s.CONSTANT_COLOR,s.ONE],new o.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Rr.unblended:Rr.alphaBlended}getDepthModeForSublayer(s,f,_){if(!this.opaquePassEnabledForLayer())return wi.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new wi(_||this.context.gl.LEQUAL,f,[S,S])}getDepthModeFor3D(){return new wi(this.context.gl.LEQUAL,wi.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,f){var _,S;this.style=s,this.options=f,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(U.now()),this.imageManager.beginFrame();const k=this.style._order,z=this.style.sourceCaches,q={},X={},he={},me={isRenderingToTexture:!1,isRenderingGlobe:((_=s.projection)===null||_===void 0?void 0:_.transitionState)>0};for(const Me in z){const Ue=z[Me];Ue.used&&Ue.prepare(this.context),q[Me]=Ue.getVisibleCoordinates(!1),X[Me]=q[Me].slice().reverse(),he[Me]=Ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Me=0;Me<k.length;Me++)if(this.style._layers[k[Me]].is3D()){this.opaquePassCutoff=Me;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Me of k){const Ue=this.style._layers[Me];if(!Ue.hasOffscreenPass()||Ue.isHidden(this.transform.zoom))continue;const Xe=X[Ue.source];(Ue.type==="custom"||Xe.length)&&this.renderLayer(this,z[Ue.source],Ue,Xe,me)}if((S=this.style.projection)===null||S===void 0||S.updateGPUdependent({context:this.context,useProgram:Me=>this.useProgram(Me)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?o.bf.black:o.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Me,Ue){const Xe=Me.context,ut=Xe.gl,ct=((Ft,Bt,Yt)=>{const dn=Math.cos(Bt.rollInRadians),Xt=Math.sin(Bt.rollInRadians),nn=dt(Bt),un=Bt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ft.properties.get("sky-color"),u_horizon_color:Ft.properties.get("horizon-color"),u_horizon:[(Bt.width/2-nn*Xt)*Yt,(Bt.height/2+nn*dn)*Yt],u_horizon_normal:[-Xt,dn],u_sky_horizon_blend:Ft.properties.get("sky-horizon-blend")*Bt.height/2*Yt,u_sky_blend:un}})(Ue,Me.style.map.transform,Me.pixelRatio),ft=new wi(ut.LEQUAL,wi.ReadWrite,[0,1]),xt=ee.disabled,yt=Me.colorModeForRenderPass(),wt=Me.useProgram("sky"),Pt=jA(Xe,Ue);wt.draw(Xe,ut.TRIANGLES,ft,xt,yt,Zi.disabled,ct,null,void 0,"sky",Pt.vertexBuffer,Pt.indexBuffer,Pt.segments)}(this,this.style.sky),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const Me=this.style._layers[k[this.currentLayer]],Ue=z[Me.source],Xe=q[Me.source];this._renderTileClippingMasks(Me,Xe,!1),this.renderLayer(this,Ue,Me,Xe,me)}this.renderPass="translucent";let Ee=!1;for(this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const Me=this.style._layers[k[this.currentLayer]],Ue=z[Me.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Me,me))continue;this.opaquePassEnabledForLayer()||Ee||(Ee=!0,me.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Xe=(Me.type==="symbol"?he:X)[Me.source];this._renderTileClippingMasks(Me,q[Me.source],!!this.renderToTexture),this.renderLayer(this,Ue,Me,Xe,me)}if(me.isRenderingGlobe&&function(Me,Ue,Xe){const ut=Me.context,ct=ut.gl,ft=Me.useProgram("atmosphere"),xt=new wi(ct.LEQUAL,wi.ReadOnly,[0,1]),yt=Me.transform,wt=function(un,qn){const Qn=un.properties.get("position"),Tn=[-Qn.x,-Qn.y,-Qn.z],xi=o.ag(new Float64Array(16));return un.properties.get("anchor")==="map"&&(o.b6(xi,xi,qn.rollInRadians),o.b7(xi,xi,-qn.pitchInRadians),o.b6(xi,xi,qn.bearingInRadians),o.b7(xi,xi,qn.center.lat*Math.PI/180),o.bz(xi,xi,-qn.center.lng*Math.PI/180)),o.c5(Tn,Tn,xi),Tn}(Xe,Me.transform),Pt=yt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ft=Ue.properties.get("atmosphere-blend")*Pt.projectionTransition;if(Ft===0)return;const Bt=mr(yt.worldSize,yt.center.lat),Yt=yt.inverseProjectionMatrix,dn=new Float64Array(4);dn[3]=1,o.aw(dn,dn,yt.modelViewProjectionMatrix),dn[0]/=dn[3],dn[1]/=dn[3],dn[2]/=dn[3],dn[3]=1,o.aw(dn,dn,Yt),dn[0]/=dn[3],dn[1]/=dn[3],dn[2]/=dn[3],dn[3]=1;const Xt=((un,qn,Qn,Tn,xi)=>({u_sun_pos:un,u_atmosphere_blend:qn,u_globe_position:Qn,u_globe_radius:Tn,u_inv_proj_matrix:xi}))(wt,Ft,[dn[0],dn[1],dn[2]],Bt,Yt),nn=jA(ut,Ue);ft.draw(ut,ct.TRIANGLES,xt,ee.disabled,Rr.alphaBlended,Zi.disabled,Xt,null,null,"atmosphere",nn.vertexBuffer,nn.indexBuffer,nn.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Me=function(Ue,Xe){let ut=null;const ct=Object.values(Ue._layers).flatMap(wt=>wt.source&&!wt.isHidden(Xe)?[Ue.sourceCaches[wt.source]]:[]),ft=ct.filter(wt=>wt.getSource().type==="vector"),xt=ct.filter(wt=>wt.getSource().type!=="vector"),yt=wt=>{(!ut||ut.getSource().maxzoom<wt.getSource().maxzoom)&&(ut=wt)};return ft.forEach(wt=>yt(wt)),ut||xt.forEach(wt=>yt(wt)),ut}(this.style,this.transform.zoom);Me&&function(Ue,Xe,ut){for(let ct=0;ct<ut.length;ct++)zs(Ue,Xe,ut[ct])}(this,Me,Me.getVisibleCoordinates())}this.options.showPadding&&function(Me){const Ue=Me.transform.padding;Zd(Me,Me.transform.height-(Ue.top||0),3,Zr),Zd(Me,Ue.bottom||0,3,lu),ms(Me,Ue.left||0,3,Fs),ms(Me,Me.transform.width-(Ue.right||0),3,Jc);const Xe=Me.transform.centerPoint;(function(ut,ct,ft,xt){rl(ut,ct-1,ft-10,2,20,xt),rl(ut,ct-10,ft-1,20,2,xt)})(Me,Xe.x,Me.transform.height-Xe.y,mA)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const f=this.terrainFacilitator.matrix,_=this.transform.modelViewProjectionMatrix;let S=this.terrainFacilitator.dirty;S||(S=s?!o.c8(f,_):!o.c9(f,_)),S||(S=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),S&&(o.ca(f,_),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(k,z){const q=k.context,X=q.gl,he=k.transform,me=Rr.unblended,Ee=new wi(X.LEQUAL,wi.ReadWrite,[0,1]),Me=z.sourceCache.getRenderableTiles(),Ue=k.useProgram("terrainDepth");q.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),q.clear({color:o.bf.transparent,depth:1});for(const Xe of Me){const ut=z.getTerrainMesh(Xe.tileID),ct=z.getTerrainData(Xe.tileID),ft=he.getProjectionData({overscaledTileID:Xe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),xt={u_ele_delta:z.getMeshFrameDelta(he.zoom)};Ue.draw(q,X.TRIANGLES,Ee,ee.disabled,me,Zi.backCCW,xt,ct,ft,"terrain",ut.vertexBuffer,ut.indexBuffer,ut.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain),function(k,z){const q=k.context,X=q.gl,he=k.transform,me=Rr.unblended,Ee=new wi(X.LEQUAL,wi.ReadWrite,[0,1]),Me=z.getCoordsTexture(),Ue=z.sourceCache.getRenderableTiles(),Xe=k.useProgram("terrainCoords");q.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),q.clear({color:o.bf.transparent,depth:1}),z.coordsIndex=[];for(const ut of Ue){const ct=z.getTerrainMesh(ut.tileID),ft=z.getTerrainData(ut.tileID);q.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,Me.texture);const xt={u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(he.zoom)},yt=he.getProjectionData({overscaledTileID:ut.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Xe.draw(q,X.TRIANGLES,Ee,ee.disabled,me,Zi.backCCW,xt,ft,yt,"terrain",ct.vertexBuffer,ct.indexBuffer,ct.segments),z.coordsIndex.push(ut.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain))}renderLayer(s,f,_,S,k){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="custom"||(S||[]).length)&&(this.id=_.id,o.cb(_)?function(z,q,X,he,me,Ee){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Me}=Ee,Ue=ee.disabled,Xe=z.colorModeForRenderPass();(X._unevaluatedLayout.hasValue("text-variable-anchor")||X._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ut,ct,ft,xt,yt,wt,Pt,Ft,Bt){const Yt=ct.transform,dn=ct.style.map.terrain,Xt=yt==="map",nn=wt==="map";for(const un of ut){const qn=xt.getTile(un),Qn=qn.getBucket(ft);if(!Qn||!Qn.text||!Qn.text.segments.get().length)continue;const Tn=o.an(Qn.textSizeData,Yt.zoom),xi=o.aC(qn,1,ct.transform.zoom),cr=Ei(Xt,ct.transform,xi),Co=ft.layout.get("icon-text-fit")!=="none"&&Qn.hasIconData();if(Tn){const ua=Math.pow(2,Yt.zoom-qn.tileID.overscaledZ),Lo=dn?(Pa,Aa)=>dn.getElevation(un,Pa,Aa):null;$c(Qn,Xt,nn,Bt,Yt,cr,ua,Tn,Co,o.aD(Yt,qn,Pt,Ft),un.toUnwrapped(),Lo)}}}(he,z,X,q,X.layout.get("text-rotation-alignment"),X.layout.get("text-pitch-alignment"),X.paint.get("text-translate"),X.paint.get("text-translate-anchor"),me),X.paint.get("icon-opacity").constantOr(1)!==0&&LA(z,q,X,he,!1,X.paint.get("icon-translate"),X.paint.get("icon-translate-anchor"),X.layout.get("icon-rotation-alignment"),X.layout.get("icon-pitch-alignment"),X.layout.get("icon-keep-upright"),Ue,Xe,Me),X.paint.get("text-opacity").constantOr(1)!==0&&LA(z,q,X,he,!0,X.paint.get("text-translate"),X.paint.get("text-translate-anchor"),X.layout.get("text-rotation-alignment"),X.layout.get("text-pitch-alignment"),X.layout.get("text-keep-upright"),Ue,Xe,Me),q.map.showCollisionBoxes&&(xh(z,q,X,he,!0),xh(z,q,X,he,!1))}(s,f,_,S,this.style.placement.variableOffsets,k):o.cc(_)?function(z,q,X,he,me){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Ee}=me,Me=X.paint.get("circle-opacity"),Ue=X.paint.get("circle-stroke-width"),Xe=X.paint.get("circle-stroke-opacity"),ut=!X.layout.get("circle-sort-key").isConstant();if(Me.constantOr(1)===0&&(Ue.constantOr(1)===0||Xe.constantOr(1)===0))return;const ct=z.context,ft=ct.gl,xt=z.transform,yt=z.getDepthModeForSublayer(0,wi.ReadOnly),wt=ee.disabled,Pt=z.colorModeForRenderPass(),Ft=[],Bt=xt.getCircleRadiusCorrection();for(let Yt=0;Yt<he.length;Yt++){const dn=he[Yt],Xt=q.getTile(dn),nn=Xt.getBucket(X);if(!nn)continue;const un=X.paint.get("circle-translate"),qn=X.paint.get("circle-translate-anchor"),Qn=o.aD(xt,Xt,un,qn),Tn=nn.programConfigurations.get(X.id),xi=z.useProgram("circle",Tn),cr=nn.layoutVertexBuffer,Co=nn.indexBuffer,ua=z.style.map.terrain&&z.style.map.terrain.getTerrainData(dn),Lo={programConfiguration:Tn,program:xi,layoutVertexBuffer:cr,indexBuffer:Co,uniformValues:Df(z,Xt,X,Qn,Bt),terrainData:ua,projectionData:xt.getProjectionData({overscaledTileID:dn,applyGlobeMatrix:!Ee,applyTerrainMatrix:!0})};if(ut){const Pa=nn.segments.get();for(const Aa of Pa)Ft.push({segments:new o.aM([Aa]),sortKey:Aa.sortKey,state:Lo})}else Ft.push({segments:nn.segments,sortKey:0,state:Lo})}ut&&Ft.sort((Yt,dn)=>Yt.sortKey-dn.sortKey);for(const Yt of Ft){const{programConfiguration:dn,program:Xt,layoutVertexBuffer:nn,indexBuffer:un,uniformValues:qn,terrainData:Qn,projectionData:Tn}=Yt.state;Xt.draw(ct,ft.TRIANGLES,yt,wt,Pt,Zi.backCCW,qn,Qn,Tn,X.id,nn,un,Yt.segments,X.paint,z.transform.zoom,dn)}}(s,f,_,S,k):o.cd(_)?function(z,q,X,he,me){if(X.paint.get("heatmap-opacity")===0)return;const Ee=z.context,{isRenderingToTexture:Me,isRenderingGlobe:Ue}=me;if(z.style.map.terrain){for(const Xe of he){const ut=q.getTile(Xe);q.hasRenderableParent(Xe)||(z.renderPass==="offscreen"?Hh(z,ut,X,Xe,Ue):z.renderPass==="translucent"&&Iu(z,X,Xe,Me,Ue))}Ee.viewport.set([0,0,z.width,z.height])}else z.renderPass==="offscreen"?function(Xe,ut,ct,ft){const xt=Xe.context,yt=xt.gl,wt=Xe.transform,Pt=ee.disabled,Ft=new Rr([yt.ONE,yt.ONE],o.bf.transparent,[!0,!0,!0,!0]);(function(Bt,Yt,dn){const Xt=Bt.gl;Bt.activeTexture.set(Xt.TEXTURE1),Bt.viewport.set([0,0,Yt.width/4,Yt.height/4]);let nn=dn.heatmapFbos.get(o.c2);nn?(Xt.bindTexture(Xt.TEXTURE_2D,nn.colorAttachment.get()),Bt.bindFramebuffer.set(nn.framebuffer)):(nn=kl(Bt,Yt.width/4,Yt.height/4),dn.heatmapFbos.set(o.c2,nn))})(xt,Xe,ct),xt.clear({color:o.bf.transparent});for(let Bt=0;Bt<ft.length;Bt++){const Yt=ft[Bt];if(ut.hasRenderableParent(Yt))continue;const dn=ut.getTile(Yt),Xt=dn.getBucket(ct);if(!Xt)continue;const nn=Xt.programConfigurations.get(ct.id),un=Xe.useProgram("heatmap",nn),qn=wt.getProjectionData({overscaledTileID:Yt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Qn=wt.getCircleRadiusCorrection();un.draw(xt,yt.TRIANGLES,wi.disabled,Pt,Ft,Zi.backCCW,Rf(dn,wt.zoom,ct.paint.get("heatmap-intensity"),Qn),null,qn,ct.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,ct.paint,wt.zoom,nn)}xt.viewport.set([0,0,Xe.width,Xe.height])}(z,q,X,he):z.renderPass==="translucent"&&function(Xe,ut){const ct=Xe.context,ft=ct.gl;ct.setColorMode(Xe.colorModeForRenderPass());const xt=ut.heatmapFbos.get(o.c2);xt&&(ct.activeTexture.set(ft.TEXTURE0),ft.bindTexture(ft.TEXTURE_2D,xt.colorAttachment.get()),ct.activeTexture.set(ft.TEXTURE1),Wo(ct,ut).bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Xe.useProgram("heatmapTexture").draw(ct,ft.TRIANGLES,wi.disabled,ee.disabled,Xe.colorModeForRenderPass(),Zi.disabled,ou(Xe,ut,0,1),null,null,ut.id,Xe.viewportBuffer,Xe.quadTriangleIndexBuffer,Xe.viewportSegments,ut.paint,Xe.transform.zoom))}(z,X)}(s,f,_,S,k):o.ce(_)?function(z,q,X,he,me){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Ee}=me,Me=X.paint.get("line-opacity"),Ue=X.paint.get("line-width");if(Me.constantOr(1)===0||Ue.constantOr(1)===0)return;const Xe=z.getDepthModeForSublayer(0,wi.ReadOnly),ut=z.colorModeForRenderPass(),ct=X.paint.get("line-dasharray"),ft=X.paint.get("line-pattern"),xt=ft.constantOr(1),yt=X.paint.get("line-gradient"),wt=X.getCrossfadeParameters(),Pt=xt?"linePattern":ct?"lineSDF":yt?"lineGradient":"line",Ft=z.context,Bt=Ft.gl,Yt=z.transform;let dn=!0;for(const Xt of he){const nn=q.getTile(Xt);if(xt&&!nn.patternsLoaded())continue;const un=nn.getBucket(X);if(!un)continue;const qn=un.programConfigurations.get(X.id),Qn=z.context.program.get(),Tn=z.useProgram(Pt,qn),xi=dn||Tn.program!==Qn,cr=z.style.map.terrain&&z.style.map.terrain.getTerrainData(Xt),Co=ft.constantOr(null);if(Co&&nn.imageAtlas){const Br=nn.imageAtlas,Qo=Br.patternPositions[Co.to.toString()],is=Br.patternPositions[Co.from.toString()];Qo&&is&&qn.setConstantPatternPositions(Qo,is)}const ua=Yt.getProjectionData({overscaledTileID:Xt,applyGlobeMatrix:!Ee,applyTerrainMatrix:!0}),Lo=Yt.getPixelScale(),Pa=xt?KA(z,nn,X,Lo,wt):ct?Vu(z,nn,X,Lo,ct,wt):yt?Md(z,nn,X,Lo,un.lineClipsArray.length):xd(z,nn,X,Lo);if(xt)Ft.activeTexture.set(Bt.TEXTURE0),nn.imageAtlasTexture.bind(Bt.LINEAR,Bt.CLAMP_TO_EDGE),qn.updatePaintBuffers(wt);else if(ct&&(xi||z.lineAtlas.dirty))Ft.activeTexture.set(Bt.TEXTURE0),z.lineAtlas.bind(Ft);else if(yt){const Br=un.gradients[X.id];let Qo=Br.texture;if(X.gradientVersion!==Br.version){let is=256;if(X.stepInterpolant){const Qa=q.getSource().maxzoom,Os=Xt.canonical.z===Qa?Math.ceil(1<<z.transform.maxZoom-Xt.canonical.z):1;is=o.ah(o.c3(un.maxLineLength/o.$*1024*Os),256,Ft.maxTextureSize)}Br.gradient=o.c4({expression:X.gradientExpression(),evaluationKey:"lineProgress",resolution:is,image:Br.gradient||void 0,clips:un.lineClipsArray}),Br.texture?Br.texture.update(Br.gradient):Br.texture=new o.T(Ft,Br.gradient,Bt.RGBA),Br.version=X.gradientVersion,Qo=Br.texture}Ft.activeTexture.set(Bt.TEXTURE0),Qo.bind(X.stepInterpolant?Bt.NEAREST:Bt.LINEAR,Bt.CLAMP_TO_EDGE)}const Aa=z.stencilModeForClipping(Xt);Tn.draw(Ft,Bt.TRIANGLES,Xe,Aa,ut,Zi.disabled,Pa,cr,ua,X.id,un.layoutVertexBuffer,un.indexBuffer,un.segments,X.paint,z.transform.zoom,qn,un.layoutVertexBuffer2),dn=!1}}(s,f,_,S,k):o.cf(_)?function(z,q,X,he,me){const Ee=X.paint.get("fill-color"),Me=X.paint.get("fill-opacity");if(Me.constantOr(1)===0)return;const{isRenderingToTexture:Ue}=me,Xe=z.colorModeForRenderPass(),ut=X.paint.get("fill-pattern"),ct=z.opaquePassEnabledForLayer()&&!ut.constantOr(1)&&Ee.constantOr(o.bf.transparent).a===1&&Me.constantOr(0)===1?"opaque":"translucent";if(z.renderPass===ct){const ft=z.getDepthModeForSublayer(1,z.renderPass==="opaque"?wi.ReadWrite:wi.ReadOnly);FA(z,q,X,he,ft,Xe,!1,Ue)}if(z.renderPass==="translucent"&&X.paint.get("fill-antialias")){const ft=z.getDepthModeForSublayer(X.getPaintProperty("fill-outline-color")?2:0,wi.ReadOnly);FA(z,q,X,he,ft,Xe,!0,Ue)}}(s,f,_,S,k):o.cg(_)?function(z,q,X,he,me){const Ee=X.paint.get("fill-extrusion-opacity");if(Ee===0)return;const{isRenderingToTexture:Me}=me;if(z.renderPass==="translucent"){const Ue=new wi(z.context.gl.LEQUAL,wi.ReadWrite,z.depthRangeFor3D);if(Ee!==1||X.paint.get("fill-extrusion-pattern").constantOr(1))zA(z,q,X,he,Ue,ee.disabled,Rr.disabled,Me),zA(z,q,X,he,Ue,z.stencilModeFor3D(),z.colorModeForRenderPass(),Me);else{const Xe=z.colorModeForRenderPass();zA(z,q,X,he,Ue,ee.disabled,Xe,Me)}}}(s,f,_,S,k):o.ch(_)?function(z,q,X,he,me){if(z.renderPass!=="offscreen"&&z.renderPass!=="translucent")return;const{isRenderingToTexture:Ee}=me,Me=z.context,Ue=z.style.projection.useSubdivision,Xe=z.getDepthModeForSublayer(0,wi.ReadOnly),ut=z.colorModeForRenderPass();if(z.renderPass==="offscreen")(function(ct,ft,xt,yt,wt,Pt,Ft){const Bt=ct.context,Yt=Bt.gl;for(const dn of xt){const Xt=ft.getTile(dn),nn=Xt.dem;if(!nn||!nn.data||!Xt.needsHillshadePrepare)continue;const un=nn.dim,qn=nn.stride,Qn=nn.getPixels();if(Bt.activeTexture.set(Yt.TEXTURE1),Bt.pixelStoreUnpackPremultiplyAlpha.set(!1),Xt.demTexture=Xt.demTexture||ct.getTileTexture(qn),Xt.demTexture){const xi=Xt.demTexture;xi.update(Qn,{premultiply:!1}),xi.bind(Yt.NEAREST,Yt.CLAMP_TO_EDGE)}else Xt.demTexture=new o.T(Bt,Qn,Yt.RGBA,{premultiply:!1}),Xt.demTexture.bind(Yt.NEAREST,Yt.CLAMP_TO_EDGE);Bt.activeTexture.set(Yt.TEXTURE0);let Tn=Xt.fbo;if(!Tn){const xi=new o.T(Bt,{width:un,height:un,data:null},Yt.RGBA);xi.bind(Yt.LINEAR,Yt.CLAMP_TO_EDGE),Tn=Xt.fbo=Bt.createFramebuffer(un,un,!0,!1),Tn.colorAttachment.set(xi.texture)}Bt.bindFramebuffer.set(Tn.framebuffer),Bt.viewport.set([0,0,un,un]),ct.useProgram("hillshadePrepare").draw(Bt,Yt.TRIANGLES,wt,Pt,Ft,Zi.disabled,oc(Xt.tileID,nn),null,null,yt.id,ct.rasterBoundsBuffer,ct.quadTriangleIndexBuffer,ct.rasterBoundsSegments),Xt.needsHillshadePrepare=!1}})(z,q,he,X,Xe,ee.disabled,ut),Me.viewport.set([0,0,z.width,z.height]);else if(z.renderPass==="translucent")if(Ue){const[ct,ft,xt]=z.stencilConfigForOverlapTwoPass(he);Oc(z,q,X,xt,ct,Xe,ut,!1,Ee),Oc(z,q,X,xt,ft,Xe,ut,!0,Ee)}else{const[ct,ft]=z.getStencilConfigForOverlapAndUpdateStencilID(he);Oc(z,q,X,ft,ct,Xe,ut,!1,Ee)}}(s,f,_,S,k):o.ci(_)?function(z,q,X,he,me){if(z.renderPass!=="translucent"||!he.length)return;const{isRenderingToTexture:Ee}=me,Me=z.style.projection.useSubdivision,Ue=z.getDepthModeForSublayer(0,wi.ReadOnly),Xe=z.colorModeForRenderPass();if(Me){const[ut,ct,ft]=z.stencilConfigForOverlapTwoPass(he);Zc(z,q,X,ft,ut,Ue,Xe,!1,Ee),Zc(z,q,X,ft,ct,Ue,Xe,!0,Ee)}else{const[ut,ct]=z.getStencilConfigForOverlapAndUpdateStencilID(he);Zc(z,q,X,ct,ut,Ue,Xe,!1,Ee)}}(s,f,_,S,k):o.cj(_)?function(z,q,X,he,me){if(z.renderPass!=="translucent"||X.paint.get("raster-opacity")===0||!he.length)return;const{isRenderingToTexture:Ee}=me,Me=q.getSource(),Ue=z.style.projection.useSubdivision;if(Me instanceof Wt)va(z,q,X,he,null,!1,!1,Me.tileCoords,Me.flippedWindingOrder,Ee);else if(Ue){const[Xe,ut,ct]=z.stencilConfigForOverlapTwoPass(he);va(z,q,X,ct,Xe,!1,!0,Xc,!1,Ee),va(z,q,X,ct,ut,!0,!0,Xc,!1,Ee)}else{const[Xe,ut]=z.getStencilConfigForOverlapAndUpdateStencilID(he);va(z,q,X,ut,Xe,!1,!0,Xc,!1,Ee)}}(s,f,_,S,k):o.ck(_)?function(z,q,X,he,me){const Ee=X.paint.get("background-color"),Me=X.paint.get("background-opacity");if(Me===0)return;const{isRenderingToTexture:Ue}=me,Xe=z.context,ut=Xe.gl,ct=z.style.projection,ft=z.transform,xt=ft.tileSize,yt=X.paint.get("background-pattern");if(z.isPatternMissing(yt))return;const wt=!yt&&Ee.a===1&&Me===1&&z.opaquePassEnabledForLayer()?"opaque":"translucent";if(z.renderPass!==wt)return;const Pt=ee.disabled,Ft=z.getDepthModeForSublayer(0,wt==="opaque"?wi.ReadWrite:wi.ReadOnly),Bt=z.colorModeForRenderPass(),Yt=z.useProgram(yt?"backgroundPattern":"background"),dn=he||it(ft,{tileSize:xt,terrain:z.style.map.terrain});yt&&(Xe.activeTexture.set(ut.TEXTURE0),z.imageManager.bind(z.context));const Xt=X.getCrossfadeParameters();for(const nn of dn){const un=ft.getProjectionData({overscaledTileID:nn,applyGlobeMatrix:!Ue,applyTerrainMatrix:!0}),qn=yt?Mp(Me,z,yt,{tileID:nn,tileSize:xt},Xt):$u(Me,Ee),Qn=z.style.map.terrain&&z.style.map.terrain.getTerrainData(nn),Tn=ct.getMeshFromTileID(Xe,nn.canonical,!1,!0,"raster");Yt.draw(Xe,ut.TRIANGLES,Ft,Pt,Bt,Zi.backCCW,qn,Qn,un,X.id,Tn.vertexBuffer,Tn.indexBuffer,Tn.segments)}}(s,0,_,S,k):o.cl(_)&&function(z,q,X,he){const{isRenderingGlobe:me}=he,Ee=z.context,Me=X.implementation,Ue=z.style.projection,Xe=z.transform,ut=Xe.getProjectionDataForCustomLayer(me),ct={farZ:Xe.farZ,nearZ:Xe.nearZ,fov:Xe.fov*Math.PI/180,modelViewProjectionMatrix:Xe.modelViewProjectionMatrix,projectionMatrix:Xe.projectionMatrix,shaderData:{variantName:Ue.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ue.shaderPreludeCode.vertexSource}`,define:Ue.shaderDefine},defaultProjectionData:ut},ft=Me.renderingMode?Me.renderingMode:"2d";if(z.renderPass==="offscreen"){const xt=Me.prerender;xt&&(z.setCustomLayerDefaults(),Ee.setColorMode(z.colorModeForRenderPass()),xt.call(Me,Ee.gl,ct),Ee.setDirty(),z.setBaseState())}else if(z.renderPass==="translucent"){z.setCustomLayerDefaults(),Ee.setColorMode(z.colorModeForRenderPass()),Ee.setStencilMode(ee.disabled);const xt=ft==="3d"?z.getDepthModeFor3D():z.getDepthModeForSublayer(0,wi.ReadOnly);Ee.setDepthMode(xt),Me.render(Ee.gl,ct),Ee.setDirty(),z.setBaseState(),Ee.bindFramebuffer.set(null)}}(s,0,_,k))}saveTileTexture(s){const f=this._tileTextures[s.size[0]];f?f.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const f=this._tileTextures[s];return f&&f.length>0?f.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const f=this.imageManager.getPattern(s.from.toString()),_=this.imageManager.getPattern(s.to.toString());return!f||!_}useProgram(s,f,_=!1,S=[]){this.cache=this.cache||{};const k=!!this.style.map.terrain,z=this.style.projection,q=_?ko.projectionMercator:z.shaderPreludeCode,X=_?Ul:z.shaderDefine,he=s+(f?f.cacheKey:"")+`/${_?bu:z.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(k?"/terrain":"")+(S?`/${S.join("/")}`:"");return this.cache[he]||(this.cache[he]=new es(this.context,ko[s],f,xu[s],this._showOverdrawInspector,k,q,X,S)),this.cache[he]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:f}=this.context.gl;return this.width!==s||this.height!==f}}function Ju(I,s){let f,_=!1,S=null,k=null;const z=()=>{S=null,_&&(I.apply(k,f),S=setTimeout(z,s),_=!1)};return(...q)=>(_=!0,k=this,f=q,S||z(),S)}class rt{constructor(s){this._getCurrentHash=()=>{const f=window.location.hash.replace("#","");if(this._hashName){let _;return f.split("&").map(S=>S.split("=")).forEach(S=>{S[0]===this._hashName&&(_=S)}),(_&&_[1]||"").split("/")}return f.split("/")},this._onHashChange=()=>{const f=this._getCurrentHash();if(!this._isValidHash(f))return!1;const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:_,pitch:+(f[4]||0)}),!0},this._updateHashUnthrottled=()=>{const f=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,f)},this._removeHash=()=>{const f=this._getCurrentHash();if(f.length===0)return;const _=f.join("/");let S=_;S.split("&").length>0&&(S=S.split("&")[0]),this._hashName&&(S=`${this._hashName}=${_}`);let k=window.location.hash.replace(S,"");k.startsWith("#&")?k=k.slice(0,1)+k.slice(2):k==="#"&&(k="");let z=window.location.href.replace(/(#.+)?$/,k);z=z.replace("&&","&"),window.history.replaceState(window.history.state,null,z)},this._updateHash=Ju(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const f=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,S=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,S),z=Math.round(f.lng*k)/k,q=Math.round(f.lat*k)/k,X=this._map.getBearing(),he=this._map.getPitch();let me="";if(me+=s?`/${z}/${q}/${_}`:`${_}/${q}/${z}`,(X||he)&&(me+="/"+Math.round(10*X)/10),he&&(me+=`/${Math.round(he)}`),this._hashName){const Ee=this._hashName;let Me=!1;const Ue=window.location.hash.slice(1).split("&").map(Xe=>{const ut=Xe.split("=")[0];return ut===Ee?(Me=!0,`${ut}=${me}`):Xe}).filter(Xe=>Xe);return Me||Ue.push(`${Ee}=${me}`),`#${Ue.join("&")}`}return`#${me}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new o.S(+s[2],+s[1])}catch{return!1}const f=+s[0],_=+(s[3]||0),S=+(s[4]||0);return f>=this._map.getMinZoom()&&f<=this._map.getMaxZoom()&&_>=-180&&_<=180&&S>=this._map.getMinPitch()&&S<=this._map.getMaxPitch()}}const $s={linearity:.3,easing:o.cm(0,0,.3,1)},Ga=o.e({deceleration:2500,maxSpeed:1400},$s),Zo=o.e({deceleration:20,maxSpeed:1400},$s),gr=o.e({deceleration:1e3,maxSpeed:360},$s),gs=o.e({deceleration:1e3,maxSpeed:90},$s),eh=o.e({deceleration:1e3,maxSpeed:360},$s);class Sh{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:U.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,f=U.now();for(;s.length>0&&f-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)f.zoom+=k.zoomDelta||0,f.bearing+=k.bearingDelta||0,f.pitch+=k.pitchDelta||0,f.roll+=k.rollDelta||0,k.panDelta&&f.pan._add(k.panDelta),k.around&&(f.around=k.around),k.pinchAround&&(f.pinchAround=k.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(f.pan.mag()){const k=th(f.pan.mag(),_,o.e({},Ga,s||{})),z=f.pan.mult(k.amount/f.pan.mag()),q=this._map.cameraHelper.handlePanInertia(z,this._map.transform);S.center=q.easingCenter,S.offset=q.easingOffset,Ro(S,k)}if(f.zoom){const k=th(f.zoom,_,Zo);S.zoom=this._map.transform.zoom+k.amount,Ro(S,k)}if(f.bearing){const k=th(f.bearing,_,gr);S.bearing=this._map.transform.bearing+o.ah(k.amount,-179,179),Ro(S,k)}if(f.pitch){const k=th(f.pitch,_,gs);S.pitch=this._map.transform.pitch+k.amount,Ro(S,k)}if(f.roll){const k=th(f.roll,_,eh);S.roll=this._map.transform.roll+o.ah(k.amount,-179,179),Ro(S,k)}if(S.zoom||S.bearing){const k=f.pinchAround===void 0?f.around:f.pinchAround;S.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),o.e(S,{noMoveStart:!0})}}function Ro(I,s){(!I.duration||I.duration<s.duration)&&(I.duration=s.duration,I.easing=s.easing)}function th(I,s,f){const{maxSpeed:_,linearity:S,deceleration:k}=f,z=o.ah(I*S/(s/1e3),-_,_),q=Math.abs(z)/(k*S);return{easing:f.easing,duration:1e3*q,amount:z*(q/2)}}class Tu extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,_,S={}){_=_ instanceof MouseEvent?_:new MouseEvent(s,_);const k=K.mousePos(f.getCanvas(),_),z=f.unproject(k);super(s,o.e({point:k,lngLat:z,originalEvent:_},S)),this._defaultPrevented=!1,this.target=f}}class Od extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,_){const S=s==="touchend"?_.changedTouches:_.touches,k=K.touchPos(f.getCanvasContainer(),S),z=k.map(X=>f.unproject(X)),q=k.reduce((X,he,me,Ee)=>X.add(he.div(Ee.length)),new o.P(0,0));super(s,{points:k,point:q,lngLats:z,lngLat:f.unproject(q),originalEvent:_}),this._defaultPrevented=!1}}class Jd extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,f,_){super(s,{originalEvent:_}),this._defaultPrevented=!1}}class Sp{constructor(s,f){this._map=s,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Jd(s.type,this._map,s))}mousedown(s,f){return this._mousedownPos=f,this._firePreventable(new Tu(s.type,this._map,s))}mouseup(s){this._map.fire(new Tu(s.type,this._map,s))}click(s,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new Tu(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Tu(s.type,this._map,s))}mouseover(s){this._map.fire(new Tu(s.type,this._map,s))}mouseout(s){this._map.fire(new Tu(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Od(s.type,this._map,s))}touchmove(s){this._map.fire(new Od(s.type,this._map,s))}touchend(s){this._map.fire(new Od(s.type,this._map,s))}touchcancel(s){this._map.fire(new Od(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ba{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Tu(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Tu("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Tu(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Eh{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(o.P.convert(s),this._map.terrain)}}class nh{constructor(s,f){this._map=s,this._tr=new Eh(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,f){this.isEnabled()&&s.shiftKey&&s.button===0&&(K.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(s,f){if(!this._active)return;const _=f;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=_,this._box||(this._box=K.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const k=Math.min(S.x,_.x),z=Math.max(S.x,_.x),q=Math.min(S.y,_.y),X=Math.max(S.y,_.y);K.setTransform(this._box,`translate(${k}px,${q}px)`),this._box.style.width=z-k+"px",this._box.style.height=X-q+"px"}mouseupWindow(s,f){if(!this._active||s.button!==0)return;const _=this._startPos,S=f;if(this.reset(),K.suppressClick(),_.x!==S.x||_.y!==S.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:s})),{cameraAnimation:k=>k.fitScreenCoordinates(_,S,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(K.remove(this._box),this._box=null),K.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,f){return this._map.fire(new o.l(s,{originalEvent:f}))}}function NA(I,s){if(I.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${s.length}`);const f={};for(let _=0;_<I.length;_++)f[I[_].identifier]=s[_];return f}class ef{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,f,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),_.length===this.numTouches&&(this.centroid=function(S){const k=new o.P(0,0);for(const z of S)k._add(z);return k.div(S.length)}(f),this.touches=NA(_,f)))}touchmove(s,f,_){if(this.aborted||!this.centroid)return;const S=NA(_,f);for(const k in this.touches){const z=S[k];(!z||z.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(s,f,_){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class ol{constructor(s){this.singleTap=new ef(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,f,_){this.singleTap.touchstart(s,f,_)}touchmove(s,f,_){this.singleTap.touchmove(s,f,_)}touchend(s,f,_){const S=this.singleTap.touchend(s,f,_);if(S){const k=s.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(S)<30;if(k&&z||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class ts{constructor(s){this._tr=new Eh(s),this._zoomIn=new ol({numTouches:1,numTaps:2}),this._zoomOut=new ol({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,f,_){this._zoomIn.touchstart(s,f,_),this._zoomOut.touchstart(s,f,_)}touchmove(s,f,_){this._zoomIn.touchmove(s,f,_),this._zoomOut.touchmove(s,f,_)}touchend(s,f,_){const S=this._zoomIn.touchend(s,f,_),k=this._zoomOut.touchend(s,f,_),z=this._tr;return S?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(S)},{originalEvent:s})}):k?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(k)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vh{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const f=this._moveFunction(...s);if(f.bearingDelta||f.pitchDelta||f.rollDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(s,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(f)?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,f){if(!this.isEnabled())return;const _=this._lastPoint;if(!_)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const S=Array.isArray(f)?f[0]:f;return!this._moved&&S.dist(_)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=S,this._move(_,S))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&K.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const uu=0,Id=2,tf={[uu]:1,[Id]:2};class Cl{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const f=K.mouseButton(s);this._eventButton=f}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(f,_){const S=tf[_];return f.buttons===void 0||(f.buttons&S)!==S}(s,this._eventButton)}isValidEndEvent(s){return K.mouseButton(s)===this._eventButton}}class Ic{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class Uf{constructor(s=new Cl({checkCorrectEvent:()=>!0}),f=new Ic){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=f}_executeRelevantHandler(s,f,_){return s instanceof MouseEvent?f(s):typeof TouchEvent<"u"&&s instanceof TouchEvent?_(s):void 0}startMove(s){this._executeRelevantHandler(s,f=>this.mouseMoveStateManager.startMove(f),f=>this.oneFingerTouchMoveStateManager.startMove(f))}endMove(s){this._executeRelevantHandler(s,f=>this.mouseMoveStateManager.endMove(f),f=>this.oneFingerTouchMoveStateManager.endMove(f))}isValidStartEvent(s){return this._executeRelevantHandler(s,f=>this.mouseMoveStateManager.isValidStartEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidStartEvent(f))}isValidMoveEvent(s){return this._executeRelevantHandler(s,f=>this.mouseMoveStateManager.isValidMoveEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(f))}isValidEndEvent(s){return this._executeRelevantHandler(s,f=>this.mouseMoveStateManager.isValidEndEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidEndEvent(f))}}const $h=I=>{I.mousedown=I.dragStart,I.mousemoveWindow=I.dragMove,I.mouseup=I.dragEnd,I.contextmenu=s=>{s.preventDefault()}};class Ca{constructor(s,f){this._clickTolerance=s.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,f,_){return this._calculateTransform(s,f,_)}touchmove(s,f,_){if(this._active){if(!this._shouldBePrevented(_.length))return s.preventDefault(),this._calculateTransform(s,f,_);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,f,_){this._calculateTransform(s,f,_),this._active&&this._shouldBePrevented(_.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,f,_){_.length>0&&(this._active=!0);const S=NA(_,f),k=new o.P(0,0),z=new o.P(0,0);let q=0;for(const he in S){const me=S[he],Ee=this._touches[he];Ee&&(k._add(me),z._add(me.sub(Ee)),q++,S[he]=me)}if(this._touches=S,this._shouldBePrevented(q)||!z.mag())return;const X=z.div(q);return this._sum._add(X),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(q),panDelta:X}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,f,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([f[0],f[1]]))}touchmove(s,f,_){if(!this._firstTwoTouches)return;s.preventDefault();const[S,k]=this._firstTwoTouches,z=ci(_,f,S),q=ci(_,f,k);if(!z||!q)return;const X=this._aroundCenter?null:z.add(q).div(2);return this._move([z,q],X,s)}touchend(s,f,_){if(!this._firstTwoTouches)return;const[S,k]=this._firstTwoTouches,z=ci(_,f,S),q=ci(_,f,k);z&&q||(this._active&&K.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ci(I,s,f){for(let _=0;_<I.length;_++)if(I[_].identifier===f)return s[_]}function GA(I,s){return Math.log(I/s)/Math.LN2}class WA extends Xr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,f){const _=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(GA(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:GA(this._distance,_),pinchAround:f}}}function Zh(I,s){return 180*I.angleWith(s)/Math.PI}class Tc extends Xr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,f,_){const S=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Zh(this._vector,S),pinchAround:f}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const f=25/(Math.PI*this._minDiameter)*360,_=Zh(s,this._startVector);return Math.abs(_)<f}}function gA(I){return Math.abs(I.y)>Math.abs(I.x)}class nf extends Xr{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,f,_){super.touchstart(s,f,_),this._currentTouchCount=_.length}_start(s){this._lastPoints=s,gA(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,f,_){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const S=s[0].sub(this._lastPoints[0]),k=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,k,_.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(S.y+k.y)/2*-.5}):void 0}gestureBeginsVertically(s,f,_){if(this._valid!==void 0)return this._valid;const S=s.mag()>=2,k=f.mag()>=2;if(!S&&!k)return;if(!S||!k)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const z=s.y>0==f.y>0;return gA(s)&&gA(f)&&z}}const no={panStep:100,bearingStep:15,pitchStep:10};class Nl{constructor(s){this._tr=new Eh(s);const f=no;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let f=0,_=0,S=0,k=0,z=0;switch(s.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:s.shiftKey?_=-1:(s.preventDefault(),k=-1);break;case 39:s.shiftKey?_=1:(s.preventDefault(),k=1);break;case 38:s.shiftKey?S=1:(s.preventDefault(),z=-1);break;case 40:s.shiftKey?S=-1:(s.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(_=0,S=0),{cameraAnimation:q=>{const X=this._tr;q.easeTo({duration:300,easeId:"keyboardHandler",easing:Bh,zoom:f?Math.round(X.zoom)+f*(s.shiftKey?2:1):X.zoom,bearing:X.bearing+_*this._bearingStep,pitch:X.pitch+S*this._pitchStep,offset:[-k*this._panStep,-z*this._panStep],center:X.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bh(I){return I*(2-I)}const uc=4.000244140625,ku=1/450;class Ac{constructor(s,f){this._onTimeout=_=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},this._map=s,this._tr=new Eh(s),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=ku}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let f=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const _=U.now(),S=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,f!==0&&f%uc==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(S*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),s.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=s,this._delta-=f,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=K.mousePos(this._map.getCanvas(),s),_=this._tr;this._aroundPoint=this._aroundCenter?_.transform.locationToScreenPoint(o.S.convert(_.center)):f,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const q=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=q),typeof this._targetZoom=="number"&&(this._targetZoom+=q)}if(this._delta!==0){const q=this._type==="wheel"&&Math.abs(this._delta)>uc?this._wheelZoomRate:this._defaultZoomRate;let X=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&X!==0&&(X=1/X);const he=typeof this._targetZoom!="number"?s.scale:o.af(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),o.ak(he*X)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,_=this._startZoom,S=this._easing;let k,z=!1;if(this._type==="wheel"&&_&&S){const q=U.now()-this._lastWheelEventTime,X=Math.min((q+5)/200,1),he=S(X);k=o.C.number(_,f,he),X<1?this._frameId||(this._frameId=!0):z=!0}else k=f,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=k,{noInertia:!0,needsRenderFrame:!z,zoomDelta:k-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let f=o.co;if(this._prevEase){const _=this._prevEase,S=(U.now()-_.start)/_.duration,k=_.easing(S+.01)-_.easing(S),z=.27/Math.sqrt(k*k+1e-4)*.01,q=Math.sqrt(.0729-z*z);f=o.cm(z,q,.25,1)}return this._prevEase={start:U.now(),duration:s,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Oh{constructor(s,f){this._clickZoom=s,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class yA{constructor(s){this._tr=new Eh(s),this.reset()}reset(){this._active=!1}dblclick(s,f){return s.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ih{constructor(){this._tap=new ol({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,f,_){if(!this._swipePoint)if(this._tapTime){const S=f[0],k=s.timeStamp-this._tapTime<500,z=this._tapPoint.dist(S)<30;k&&z?_.length>0&&(this._swipePoint=S,this._swipeTouch=_[0].identifier):this.reset()}else this._tap.touchstart(s,f,_)}touchmove(s,f,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const S=f[0],k=S.y-this._swipePoint.y;return this._swipePoint=S,s.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(s,f,_)}touchend(s,f,_){if(this._tapTime)this._swipePoint&&_.length===0&&this.reset();else{const S=this._tap.touchend(s,f,_);S&&(this._tapTime=s.timeStamp,this._tapPoint=S)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class eA{constructor(s,f,_){this._el=s,this._mousePan=f,this._touchPan=_}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class _l{constructor(s,f,_,S){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=f,this._mousePitch=_,this._mouseRoll=S}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ep{constructor(s,f,_,S){this._el=s,this._touchZoom=f,this._touchRotate=_,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class rf{constructor(s,f){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=f,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=K.create("div","maplibregl-cooperative-gesture-screen",s);let f=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(f=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const _=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),S=document.createElement("div");S.className="maplibregl-desktop-message",S.textContent=f,this._container.appendChild(S);const k=document.createElement("div");k.className="maplibregl-mobile-message",k.textContent=_,this._container.appendChild(k),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(K.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,f){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:s,originalEvent:f})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Gl=I=>I.zoom||I.drag||I.roll||I.pitch||I.rotate;class Po extends o.l{}function Wl(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta||I.rollDelta}class Xh{constructor(s,f){this.handleWindowEvent=S=>{this.handleEvent(S,`${S.type}Window`)},this.handleEvent=(S,k)=>{if(S.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=S.type==="renderFrame"?void 0:S,q={needsRenderFrame:!1},X={},he={};for(const{handlerName:Me,handler:Ue,allowed:Xe}of this._handlers){if(!Ue.isEnabled())continue;let ut;if(this._blockedByActive(he,Xe,Me))Ue.reset();else if(Ue[k||S.type]){if(o.cp(S,k||S.type)){const ct=K.mousePos(this._map.getCanvas(),S);ut=Ue[k||S.type](S,ct)}else if(o.cq(S,k||S.type)){const ct=this._getMapTouches(S.touches),ft=K.touchPos(this._map.getCanvas(),ct);ut=Ue[k||S.type](S,ft,ct)}else o.cr(k||S.type)||(ut=Ue[k||S.type](S));this.mergeHandlerResult(q,X,ut,Me,z),ut&&ut.needsRenderFrame&&this._triggerRenderFrame()}(ut||Ue.isActive())&&(he[Me]=Ue)}const me={};for(const Me in this._previousActiveHandlers)he[Me]||(me[Me]=z);this._previousActiveHandlers=he,(Object.keys(me).length||Wl(q))&&(this._changes.push([q,X,me]),this._triggerRenderFrame()),(Object.keys(he).length||Wl(q))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ee}=q;Ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ee(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Sh(s),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,k,z]of this._listeners)K.addEventListener(S,k,S===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[s,f,_]of this._listeners)K.removeEventListener(s,f,s===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(s){const f=this._map,_=f.getCanvasContainer();this._add("mapEvent",new Sp(f,s));const S=f.boxZoom=new nh(f,s);this._add("boxZoom",S),s.interactive&&s.boxZoom&&S.enable();const k=f.cooperativeGestures=new rf(f,s.cooperativeGestures);this._add("cooperativeGestures",k),s.cooperativeGestures&&k.enable();const z=new ts(f),q=new yA(f);f.doubleClickZoom=new Oh(q,z),this._add("tapZoom",z),this._add("clickZoom",q),s.interactive&&s.doubleClickZoom&&f.doubleClickZoom.enable();const X=new ih;this._add("tapDragZoom",X);const he=f.touchPitch=new nf(f);this._add("touchPitch",he),s.interactive&&s.touchPitch&&f.touchPitch.enable(s.touchPitch);const me=()=>f.project(f.getCenter()),Ee=function({enable:wt,clickTolerance:Pt,aroundCenter:Ft=!0,minPixelCenterThreshold:Bt=100,rotateDegreesPerPixelMoved:Yt=.8},dn){const Xt=new Cl({checkCorrectEvent:nn=>K.mouseButton(nn)===0&&nn.ctrlKey||K.mouseButton(nn)===2&&!nn.ctrlKey});return new Vh({clickTolerance:Pt,move:(nn,un)=>{const qn=dn();if(Ft&&Math.abs(qn.y-nn.y)>Bt)return{bearingDelta:o.cn(new o.P(nn.x,un.y),un,qn)};let Qn=(un.x-nn.x)*Yt;return Ft&&un.y<qn.y&&(Qn=-Qn),{bearingDelta:Qn}},moveStateManager:Xt,enable:wt,assignEvents:$h})}(s,me),Me=function({enable:wt,clickTolerance:Pt,pitchDegreesPerPixelMoved:Ft=-.5}){const Bt=new Cl({checkCorrectEvent:Yt=>K.mouseButton(Yt)===0&&Yt.ctrlKey||K.mouseButton(Yt)===2});return new Vh({clickTolerance:Pt,move:(Yt,dn)=>({pitchDelta:(dn.y-Yt.y)*Ft}),moveStateManager:Bt,enable:wt,assignEvents:$h})}(s),Ue=function({enable:wt,clickTolerance:Pt,rollDegreesPerPixelMoved:Ft=.3},Bt){const Yt=new Cl({checkCorrectEvent:dn=>K.mouseButton(dn)===2&&dn.ctrlKey});return new Vh({clickTolerance:Pt,move:(dn,Xt)=>{const nn=Bt();let un=(Xt.x-dn.x)*Ft;return Xt.y<nn.y&&(un=-un),{rollDelta:un}},moveStateManager:Yt,enable:wt,assignEvents:$h})}(s,me);f.dragRotate=new _l(s,Ee,Me,Ue),this._add("mouseRotate",Ee,["mousePitch"]),this._add("mousePitch",Me,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ue,["mousePitch"]),s.interactive&&s.dragRotate&&f.dragRotate.enable();const Xe=function({enable:wt,clickTolerance:Pt}){const Ft=new Cl({checkCorrectEvent:Bt=>K.mouseButton(Bt)===0&&!Bt.ctrlKey});return new Vh({clickTolerance:Pt,move:(Bt,Yt)=>({around:Yt,panDelta:Yt.sub(Bt)}),activateOnStart:!0,moveStateManager:Ft,enable:wt,assignEvents:$h})}(s),ut=new Ca(s,f);f.dragPan=new eA(_,Xe,ut),this._add("mousePan",Xe),this._add("touchPan",ut,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&f.dragPan.enable(s.dragPan);const ct=new Tc,ft=new WA;f.touchZoomRotate=new Ep(_,ft,ct,X),this._add("touchRotate",ct,["touchPan","touchZoom"]),this._add("touchZoom",ft,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&f.touchZoomRotate.enable(s.touchZoomRotate);const xt=f.scrollZoom=new Ac(f,()=>this._triggerRenderFrame());this._add("scrollZoom",xt,["mousePan"]),s.interactive&&s.scrollZoom&&f.scrollZoom.enable(s.scrollZoom);const yt=f.keyboard=new Nl(f);this._add("keyboard",yt),s.interactive&&s.keyboard&&f.keyboard.enable(),this._add("blockableMapEvent",new ba(f))}_add(s,f,_){this._handlers.push({handlerName:s,handler:f,allowed:_}),this._handlersById[s]=f}stop(s){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gl(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,f,_){for(const S in s)if(S!==_&&(!f||f.indexOf(S)<0))return!0;return!1}_getMapTouches(s){const f=[];for(const _ of s)this._el.contains(_.target)&&f.push(_);return f}mergeHandlerResult(s,f,_,S,k){if(!_)return;o.e(s,_);const z={handlerName:S,originalEvent:_.originalEvent||k};_.zoomDelta!==void 0&&(f.zoom=z),_.panDelta!==void 0&&(f.drag=z),_.rollDelta!==void 0&&(f.roll=z),_.pitchDelta!==void 0&&(f.pitch=z),_.bearingDelta!==void 0&&(f.rotate=z)}_applyChanges(){const s={},f={},_={};for(const[S,k,z]of this._changes)S.panDelta&&(s.panDelta=(s.panDelta||new o.P(0,0))._add(S.panDelta)),S.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+S.pitchDelta),S.rollDelta&&(s.rollDelta=(s.rollDelta||0)+S.rollDelta),S.around!==void 0&&(s.around=S.around),S.pinchAround!==void 0&&(s.pinchAround=S.pinchAround),S.noInertia&&(s.noInertia=S.noInertia),o.e(f,k),o.e(_,z);this._updateMapTransform(s,f,_),this._changes=[]}_updateMapTransform(s,f,_){const S=this._map,k=S._getTransformForUpdate(),z=S.terrain;if(!(Wl(s)||z&&this._terrainMovement))return this._fireEvents(f,_,!0);S._stop(!0);let{panDelta:q,zoomDelta:X,bearingDelta:he,pitchDelta:me,rollDelta:Ee,around:Me,pinchAround:Ue}=s;Ue!==void 0&&(Me=Ue),Me=Me||S.transform.centerPoint,z&&!k.isPointOnMapSurface(Me)&&(Me=k.centerPoint);const Xe={panDelta:q,zoomDelta:X,rollDelta:Ee,pitchDelta:me,bearingDelta:he,around:Me};this._map.cameraHelper.useGlobeControls&&!k.isPointOnMapSurface(Me)&&(Me=k.centerPoint);const ut=Me.distSqr(k.centerPoint)<.01?k.center:k.screenPointToLocation(q?Me.sub(q):Me);z?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,k),this._terrainMovement||!f.drag&&!f.zoom?f.drag&&this._terrainMovement?k.setCenter(k.screenPointToLocation(k.centerPoint.sub(q))):this._map.cameraHelper.handleMapControlsPan(Xe,k,ut):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Xe,k,ut))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,k),this._map.cameraHelper.handleMapControlsPan(Xe,k,ut)),S._applyUpdatedTransform(k),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(f,_,!0)}_fireEvents(s,f,_){const S=Gl(this._eventsInProgress),k=Gl(s),z={};for(const Ee in s){const{originalEvent:Me}=s[Ee];this._eventsInProgress[Ee]||(z[`${Ee}start`]=Me),this._eventsInProgress[Ee]=s[Ee]}!S&&k&&this._fireEvent("movestart",k.originalEvent);for(const Ee in z)this._fireEvent(Ee,z[Ee]);k&&this._fireEvent("move",k.originalEvent);for(const Ee in s){const{originalEvent:Me}=s[Ee];this._fireEvent(Ee,Me)}const q={};let X;for(const Ee in this._eventsInProgress){const{handlerName:Me,originalEvent:Ue}=this._eventsInProgress[Ee];this._handlersById[Me].isActive()||(delete this._eventsInProgress[Ee],X=f[Me]||Ue,q[`${Ee}end`]=X)}for(const Ee in q)this._fireEvent(Ee,q[Ee]);const he=Gl(this._eventsInProgress),me=(S||k)&&!he;if(me&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Ee=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Ee.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Ee)}if(_&&me){this._updatingCamera=!0;const Ee=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Me=Ue=>Ue!==0&&-this._bearingSnap<Ue&&Ue<this._bearingSnap;!Ee||!Ee.essential&&U.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:X})),Me(this._map.getBearing())&&this._map.resetNorth()):(Me(Ee.bearing||this._map.getBearing())&&(Ee.bearing=0),Ee.freezeElevation=!0,this._map.easeTo(Ee,{originalEvent:X})),this._updatingCamera=!1}}_fireEvent(s,f){this._map.fire(new o.l(s,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new Po("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Lf extends o.E{constructor(s,f,_){super(),this._renderFrameCallback=()=>{const S=Math.min((U.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(S)),S<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=_.bearingSnap,this.cameraHelper=f,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(s,f){s.apply(this.transform),this.transform=s,this.cameraHelper=f}getCenter(){return new o.S(this.transform.center.lng,this.transform.center.lat)}setCenter(s,f){return this.jumpTo({center:s},f)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,f){return this.jumpTo({elevation:s},f),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,f,_){return s=o.P.convert(s).mult(-1),this.panTo(this.transform.center,o.e({offset:s},f),_)}panTo(s,f,_){return this.easeTo(o.e({center:s},f),_)}getZoom(){return this.transform.zoom}setZoom(s,f){return this.jumpTo({zoom:s},f),this}zoomTo(s,f,_){return this.easeTo(o.e({zoom:s},f),_)}zoomIn(s,f){return this.zoomTo(this.getZoom()+1,s,f),this}zoomOut(s,f){return this.zoomTo(this.getZoom()-1,s,f),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,f){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new o.l("movestart",f)).fire(new o.l("move",f)).fire(new o.l("moveend",f))),this}getBearing(){return this.transform.bearing}setBearing(s,f){return this.jumpTo({bearing:s},f),this}getPadding(){return this.transform.padding}setPadding(s,f){return this.jumpTo({padding:s},f),this}rotateTo(s,f,_){return this.easeTo(o.e({bearing:s},f),_)}resetNorth(s,f){return this.rotateTo(0,o.e({duration:1e3},s),f),this}resetNorthPitch(s,f){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},s),f),this}snapToNorth(s,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,f):this}getPitch(){return this.transform.pitch}setPitch(s,f){return this.jumpTo({pitch:s},f),this}getRoll(){return this.transform.roll}setRoll(s,f){return this.jumpTo({roll:s},f),this}cameraForBounds(s,f){s=_t.convert(s).adjustAntiMeridian();const _=f&&f.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),_,f)}_cameraForBoxAndBearing(s,f,_,S){const k={top:0,bottom:0,right:0,left:0};if(typeof(S=o.e({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"){const he=S.padding;S.padding={top:he,bottom:he,right:he,left:he}}const z=o.e(k,S.padding);S.padding=z;const q=this.transform,X=new _t(s,f);return this.cameraHelper.cameraForBoxAndBearing(S,z,X,_,q)}fitBounds(s,f,_){return this._fitInternal(this.cameraForBounds(s,f),f,_)}fitScreenCoordinates(s,f,_,S,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(s)),this.transform.screenPointToLocation(o.P.convert(f)),_,S),S,k)}_fitInternal(s,f,_){return s?(delete(f=o.e(s,f)).padding,f.linear?this.easeTo(f,_):this.flyTo(f,_)):this}jumpTo(s,f){this.stop();const _=this._getTransformForUpdate();let S=!1,k=!1,z=!1;const q=_.zoom;this.cameraHelper.handleJumpToCenterZoom(_,s);const X=_.zoom!==q;return"elevation"in s&&_.elevation!==+s.elevation&&_.setElevation(+s.elevation),"bearing"in s&&_.bearing!==+s.bearing&&(S=!0,_.setBearing(+s.bearing)),"pitch"in s&&_.pitch!==+s.pitch&&(k=!0,_.setPitch(+s.pitch)),"roll"in s&&_.roll!==+s.roll&&(z=!0,_.setRoll(+s.roll)),s.padding==null||_.isPaddingEqual(s.padding)||_.setPadding(s.padding),this._applyUpdatedTransform(_),this.fire(new o.l("movestart",f)).fire(new o.l("move",f)),X&&this.fire(new o.l("zoomstart",f)).fire(new o.l("zoom",f)).fire(new o.l("zoomend",f)),S&&this.fire(new o.l("rotatestart",f)).fire(new o.l("rotate",f)).fire(new o.l("rotateend",f)),k&&this.fire(new o.l("pitchstart",f)).fire(new o.l("pitch",f)).fire(new o.l("pitchend",f)),z&&this.fire(new o.l("rollstart",f)).fire(new o.l("roll",f)).fire(new o.l("rollend",f)),this.fire(new o.l("moveend",f))}calculateCameraOptionsFromTo(s,f,_,S=0){const k=o.a1.fromLngLat(s,f),z=o.a1.fromLngLat(_,S),q=z.x-k.x,X=z.y-k.y,he=z.z-k.z,me=Math.hypot(q,X,he);if(me===0)throw new Error("Can't calculate camera options with same From and To");const Ee=Math.hypot(q,X),Me=o.ak(this.transform.cameraToCenterDistance/me/this.transform.tileSize),Ue=180*Math.atan2(q,-X)/Math.PI;let Xe=180*Math.acos(Ee/me)/Math.PI;return Xe=he<0?90-Xe:90+Xe,{center:z.toLngLat(),elevation:S,zoom:Me,pitch:Xe,bearing:Ue}}calculateCameraOptionsFromCameraLngLatAltRotation(s,f,_,S,k){const z=this.transform.calculateCenterFromCameraLngLatAlt(s,f,_,S);return{center:z.center,elevation:z.elevation,zoom:z.zoom,bearing:_,pitch:S,roll:k}}easeTo(s,f){this._stop(!1,s.easeId),((s=o.e({offset:[0,0],duration:500,easing:o.co},s)).animate===!1||!s.essential&&U.prefersReducedMotion)&&(s.duration=0);const _=this._getTransformForUpdate(),S=this.getBearing(),k=_.pitch,z=_.roll,q="bearing"in s?this._normalizeBearing(s.bearing,S):S,X="pitch"in s?+s.pitch:k,he="roll"in s?this._normalizeBearing(s.roll,z):z,me="padding"in s?s.padding:_.padding,Ee=o.P.convert(s.offset);let Me,Ue;s.around&&(Me=o.S.convert(s.around),Ue=_.locationToScreenPoint(Me));const Xe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ut=this.cameraHelper.handleEaseTo(_,{bearing:q,pitch:X,roll:he,padding:me,around:Me,aroundPoint:Ue,offsetAsPoint:Ee,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||S!==q,this._pitching=this._pitching||X!==k,this._rolling=this._rolling||he!==z,this._padding=!_.isPaddingEqual(me),this._zooming=this._zooming||ut.isZooming,this._easeId=s.easeId,this._prepareEase(f,s.noMoveStart,Xe),this.terrain&&this._prepareElevation(ut.elevationCenter),this._ease(ct=>{ut.easeFunc(ct),this.terrain&&!s.freezeElevation&&this._updateElevation(ct),this._applyUpdatedTransform(_),this._fireMoveEvents(f)},ct=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(f,ct)},s),this}_prepareEase(s,f,_={}){this._moving=!0,f||_.moving||this.fire(new o.l("movestart",s)),this._zooming&&!_.zooming&&this.fire(new o.l("zoomstart",s)),this._rotating&&!_.rotating&&this.fire(new o.l("rotatestart",s)),this._pitching&&!_.pitching&&this.fire(new o.l("pitchstart",s)),this._rolling&&!_.rolling&&this.fire(new o.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&f!==this._elevationTarget){const _=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(_-(f-(_*s+this._elevationStart))/(1-s)),this._elevationTarget=f}this.transform.setElevation(o.C.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};const f=s.getCameraLngLat(),_=s.getCameraAltitude(),S=this.terrain?this.terrain.getElevationForLngLatZoom(f,s.zoom):0;if(_<S){const k=this.calculateCameraOptionsFromTo(f,S,s.center,s.elevation);return{pitch:k.pitch,zoom:k.zoom}}return{}}_applyUpdatedTransform(s){const f=[];if(f.push(S=>this._elevateCameraIfInsideTerrain(S)),this.transformCameraUpdate&&f.push(S=>this.transformCameraUpdate(S)),!f.length)return;const _=s.clone();for(const S of f){const k=_.clone(),{center:z,zoom:q,roll:X,pitch:he,bearing:me,elevation:Ee}=S(k);z&&k.setCenter(z),Ee!==void 0&&k.setElevation(Ee),q!==void 0&&k.setZoom(q),X!==void 0&&k.setRoll(X),he!==void 0&&k.setPitch(he),me!==void 0&&k.setBearing(me),_.apply(k)}this.transform.apply(_)}_fireMoveEvents(s){this.fire(new o.l("move",s)),this._zooming&&this.fire(new o.l("zoom",s)),this._rotating&&this.fire(new o.l("rotate",s)),this._pitching&&this.fire(new o.l("pitch",s)),this._rolling&&this.fire(new o.l("roll",s))}_afterEase(s,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const _=this._zooming,S=this._rotating,k=this._pitching,z=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,_&&this.fire(new o.l("zoomend",s)),S&&this.fire(new o.l("rotateend",s)),k&&this.fire(new o.l("pitchend",s)),z&&this.fire(new o.l("rollend",s)),this.fire(new o.l("moveend",s))}flyTo(s,f){if(!s.essential&&U.prefersReducedMotion){const un=o.Q(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(un,f)}this.stop(),s=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.co},s);const _=this._getTransformForUpdate(),S=_.bearing,k=_.pitch,z=_.roll,q=_.padding,X="bearing"in s?this._normalizeBearing(s.bearing,S):S,he="pitch"in s?+s.pitch:k,me="roll"in s?this._normalizeBearing(s.roll,z):z,Ee="padding"in s?s.padding:_.padding,Me=o.P.convert(s.offset);let Ue=_.centerPoint.add(Me);const Xe=_.screenPointToLocation(Ue),ut=this.cameraHelper.handleFlyTo(_,{bearing:X,pitch:he,roll:me,padding:Ee,locationAtOffset:Xe,offsetAsPoint:Me,center:s.center,minZoom:s.minZoom,zoom:s.zoom});let ct=s.curve;const ft=Math.max(_.width,_.height),xt=ft/ut.scaleOfZoom,yt=ut.pixelPathLength;typeof ut.scaleOfMinZoom=="number"&&(ct=Math.sqrt(ft/ut.scaleOfMinZoom/yt*2));const wt=ct*ct;function Pt(un){const qn=(xt*xt-ft*ft+(un?-1:1)*wt*wt*yt*yt)/(2*(un?xt:ft)*wt*yt);return Math.log(Math.sqrt(qn*qn+1)-qn)}function Ft(un){return(Math.exp(un)-Math.exp(-un))/2}function Bt(un){return(Math.exp(un)+Math.exp(-un))/2}const Yt=Pt(!1);let dn=function(un){return Bt(Yt)/Bt(Yt+ct*un)},Xt=function(un){return ft*((Bt(Yt)*(Ft(qn=Yt+ct*un)/Bt(qn))-Ft(Yt))/wt)/yt;var qn},nn=(Pt(!0)-Yt)/ct;if(Math.abs(yt)<2e-6||!isFinite(nn)){if(Math.abs(ft-xt)<1e-6)return this.easeTo(s,f);const un=xt<ft?-1:1;nn=Math.abs(Math.log(xt/ft))/ct,Xt=()=>0,dn=qn=>Math.exp(un*ct*qn)}return s.duration="duration"in s?+s.duration:1e3*nn/("screenSpeed"in s?+s.screenSpeed/ct:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=S!==X,this._pitching=he!==k,this._rolling=me!==z,this._padding=!_.isPaddingEqual(Ee),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(ut.targetCenter),this._ease(un=>{const qn=un*nn,Qn=1/dn(qn),Tn=Xt(qn);this._rotating&&_.setBearing(o.C.number(S,X,un)),this._pitching&&_.setPitch(o.C.number(k,he,un)),this._rolling&&_.setRoll(o.C.number(z,me,un)),this._padding&&(_.interpolatePadding(q,Ee,un),Ue=_.centerPoint.add(Me)),ut.easeFunc(un,Qn,Tn,Ue),this.terrain&&!s.freezeElevation&&this._updateElevation(un),this._applyUpdatedTransform(_),this._fireMoveEvents(f)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(f)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,f){var _;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const S=this._onEaseEnd;delete this._onEaseEnd,S.call(this,f)}return s||(_=this.handlers)===null||_===void 0||_.stop(!1),this}_ease(s,f,_){_.animate===!1||_.duration===0?(s(1),f()):(this._easeStart=U.now(),this._easeOptions=_,this._onEaseFrame=s,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,f){s=o.aO(s,-180,180);const _=Math.abs(s-f);return Math.abs(s-360-f)<_&&(s-=360),Math.abs(s+360-f)<_&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(o.S.convert(s),this.transform.tileZoom):null}}const vA={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class io{constructor(s=vA){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=f=>{!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"&&f.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=K.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=K.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=K.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){K.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,f){const _=this._map._getUIString(`AttributionControl.${f}`);s.title=_,s.setAttribute("aria-label",_)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(S=>typeof S!="string"?"":S)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const f=this._map.style.sourceCaches;for(const S in f){const k=f[S];if(k.used||k.usedForTerrain){const z=k.getSource();z.attribution&&s.indexOf(z.attribution)<0&&s.push(z.attribution)}}s=s.filter(S=>String(S).trim()),s.sort((S,k)=>S.length-k.length),s=s.filter((S,k)=>{for(let z=k+1;z<s.length;z++)if(s[z].indexOf(S)>=0)return!1;return!0});const _=s.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,s.length?(this._innerContainer.innerHTML=K.sanitize(_),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ko{constructor(s={}){this._updateCompact=()=>{const f=this._container.children;if(f.length){const _=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact"):_.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=K.create("div","maplibregl-ctrl");const f=K.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){K.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Pr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const f=++this._id;return this._queue.push({callback:s,id:f,cancelled:!1}),f}remove(s){const f=this._currentlyRunning,_=f?this._queue.concat(f):this._queue;for(const S of _)if(S.id===s)return void(S.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const _ of f)if(!_.cancelled&&(_.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var QA=o.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Ii extends o.E{constructor(s){super(),this._lastTilesetChange=U.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*2**this.deltaZoom,s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,f){this.sourceCache.update(s,f),this._renderableTilesKeys=[];const _={};for(const S of it(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))_[S.key]=!0,this._renderableTilesKeys.push(S.key),this._tiles[S.key]||(S.terrainRttPosMatrix32f=new Float64Array(16),o.bY(S.terrainRttPosMatrix32f,0,o.$,o.$,0,0,1),this._tiles[S.key]=new de(S,this.tileSize),this._lastTilesetChange=U.now());for(const S in this._tiles)_[S]||delete this._tiles[S]}freeRtt(s){for(const f in this._tiles){const _=this._tiles[f];(!s||_.tileID.equals(s)||_.tileID.isChildOf(s)||s.isChildOf(_.tileID))&&(_.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,f){return f?this._getTerrainCoordsForTileRanges(s,f):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){const f={};for(const _ of this._renderableTilesKeys){const S=this._tiles[_].tileID,k=s.clone(),z=o.ba();if(S.canonical.equals(s.canonical))o.bY(z,0,o.$,o.$,0,0,1);else if(S.canonical.isChildOf(s.canonical)){const q=S.canonical.z-s.canonical.z,X=S.canonical.x-(S.canonical.x>>q<<q),he=S.canonical.y-(S.canonical.y>>q<<q),me=o.$>>q;o.bY(z,0,me,me,0,0,1),o.M(z,z,[-X*me,-he*me,0])}else{if(!s.canonical.isChildOf(S.canonical))continue;{const q=s.canonical.z-S.canonical.z,X=s.canonical.x-(s.canonical.x>>q<<q),he=s.canonical.y-(s.canonical.y>>q<<q),me=o.$>>q;o.bY(z,0,o.$,o.$,0,0,1),o.M(z,z,[X*me,he*me,0]),o.N(z,z,[1/2**q,1/2**q,0])}}k.terrainRttPosMatrix32f=new Float32Array(z),f[_]=k}return f}_getTerrainCoordsForTileRanges(s,f){const _={};for(const S of this._renderableTilesKeys){const k=this._tiles[S].tileID;if(!this._isWithinTileRanges(k,f))continue;const z=s.clone(),q=o.ba();if(k.canonical.z===s.canonical.z){const X=s.canonical.x-k.canonical.x,he=s.canonical.y-k.canonical.y;o.bY(q,0,o.$,o.$,0,0,1),o.M(q,q,[X*o.$,he*o.$,0])}else if(k.canonical.z>s.canonical.z){const X=k.canonical.z-s.canonical.z,he=k.canonical.x-(k.canonical.x>>X<<X),me=k.canonical.y-(k.canonical.y>>X<<X),Ee=s.canonical.x-(k.canonical.x>>X),Me=s.canonical.y-(k.canonical.y>>X),Ue=o.$>>X;o.bY(q,0,Ue,Ue,0,0,1),o.M(q,q,[-he*Ue+Ee*o.$,-me*Ue+Me*o.$,0])}else{const X=s.canonical.z-k.canonical.z,he=s.canonical.x-(s.canonical.x>>X<<X),me=s.canonical.y-(s.canonical.y>>X<<X),Ee=(s.canonical.x>>X)-k.canonical.x,Me=(s.canonical.y>>X)-k.canonical.y,Ue=o.$<<X;o.bY(q,0,Ue,Ue,0,0,1),o.M(q,q,[he*o.$+Ee*Ue,me*o.$+Me*Ue,0])}z.terrainRttPosMatrix32f=new Float32Array(q),_[S]=z}return _}getSourceTile(s,f){const _=this.sourceCache._source;let S=s.overscaledZ-this.deltaZoom;if(S>_.maxzoom&&(S=_.maxzoom),S<_.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(S).key);let k=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!k||!k.dem)&&f)for(;S>=_.minzoom&&(!k||!k.dem);)k=this.sourceCache.getTileByID(s.scaledTo(S--).key);return k}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,f){return f[s.canonical.z]&&s.canonical.x>=f[s.canonical.z].minTileX&&s.canonical.x<=f[s.canonical.z].maxTileX&&s.canonical.y>=f[s.canonical.z].minTileY&&s.canonical.y<=f[s.canonical.z].maxTileY}}class ki{constructor(s,f,_){this._meshCache={},this.painter=s,this.sourceCache=new Ii(f),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,f,_,S=o.$){var k;if(!(f>=0&&f<S&&_>=0&&_<S))return 0;const z=this.getTerrainData(s),q=(k=z.tile)===null||k===void 0?void 0:k.dem;if(!q)return 0;const X=o.cs([],[f/S*o.$,_/S*o.$],z.u_terrain_matrix),he=[X[0]*q.dim,X[1]*q.dim],me=Math.floor(he[0]),Ee=Math.floor(he[1]),Me=he[0]-me,Ue=he[1]-Ee;return q.get(me,Ee)*(1-Me)*(1-Ue)+q.get(me+1,Ee)*Me*(1-Ue)+q.get(me,Ee+1)*(1-Me)*Ue+q.get(me+1,Ee+1)*Me*Ue}getElevationForLngLatZoom(s,f){if(!o.ct(f,s.wrap()))return 0;const{tileID:_,mercatorX:S,mercatorY:k}=this._getOverscaledTileIDFromLngLatZoom(s,f);return this.getElevation(_,S%o.$,k%o.$,o.$)}getElevation(s,f,_,S=o.$){return this.getDEMElevation(s,f,_,S)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const S=this.painter.context,k=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(S,k,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(S,new o.R({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ag([])}const f=this.sourceCache.getSourceTile(s,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const S=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new o.T(S,f.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),f.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const _=f&&f+f.tileID.key+s.key;if(_&&!this._demMatrixCache[_]){const S=this.sourceCache.sourceCache._source.maxzoom;let k=s.canonical.z-f.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=S?k=s.canonical.z-S:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=s.canonical.x-(s.canonical.x>>k<<k),q=s.canonical.y-(s.canonical.y>>k<<k),X=o.cu(new Float64Array(16),[1/(o.$<<k),1/(o.$<<k),0]);o.M(X,X,[z*o.$,q*o.$,0]),this._demMatrixCache[s.key]={matrix:X,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(s){const f=this.painter,_=f.width/devicePixelRatio,S=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(f.context,{width:_,height:S,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(f.context,{width:_,height:S,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(_,S,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,_,S))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let k=0,z=0;k<this._coordsTextureSize;k++)for(let q=0;q<this._coordsTextureSize;q++,z+=4)f[z+0]=255&q,f[z+1]=255&k,f[z+2]=q>>8<<4|k>>8,f[z+3]=0;const _=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),S=new o.T(s,_,s.gl.RGBA,{premultiply:!1});return S.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const f=new Uint8Array(4),_=this.painter.context,S=_.gl,k=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),z=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),q=Math.round(this.painter.height/devicePixelRatio);_.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(k,q-z-1,1,1,S.RGBA,S.UNSIGNED_BYTE,f),_.bindFramebuffer.set(null);const X=f[0]+(f[2]>>4<<8),he=f[1]+((15&f[2])<<8),me=this.coordsIndex[255-f[3]],Ee=me&&this.sourceCache.getTileByID(me);if(!Ee)return null;const Me=this._coordsTextureSize,Ue=(1<<Ee.tileID.canonical.z)*Me;return new o.a1((Ee.tileID.canonical.x*Me+X)/Ue+Ee.tileID.wrap,(Ee.tileID.canonical.y*Me+he)/Ue,this.getElevation(Ee.tileID,X,he,Me))}depthAtPoint(s){const f=new Uint8Array(4),_=this.painter.context,S=_.gl;return _.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),S.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,f),_.bindFramebuffer.set(null),(f[0]/16777216+f[1]/65536+f[2]/256+f[3])/256}getTerrainMesh(s){var f;const _=((f=this.painter.style.projection)===null||f===void 0?void 0:f.transitionState)>0,S=_&&s.canonical.y===0,k=_&&s.canonical.y===(1<<s.canonical.z)-1,z=`m_${S?"n":""}_${k?"s":""}`;if(this._meshCache[z])return this._meshCache[z];const q=this.painter.context,X=new o.cv,he=new o.aN,me=this.meshSize,Ee=o.$/me,Me=me*me;for(let Bt=0;Bt<=me;Bt++)for(let Yt=0;Yt<=me;Yt++)X.emplaceBack(Yt*Ee,Bt*Ee,0);for(let Bt=0;Bt<Me;Bt+=me+1)for(let Yt=0;Yt<me;Yt++)he.emplaceBack(Yt+Bt,me+Yt+Bt+1,me+Yt+Bt+2),he.emplaceBack(Yt+Bt,me+Yt+Bt+2,Yt+Bt+1);const Ue=X.length,Xe=Ue+(me+1),ut=(me+1)*me,ct=S?o.bh:0,ft=S?0:1,xt=k?o.bi:o.$,yt=k?0:1;for(let Bt=0;Bt<=me;Bt++)X.emplaceBack(Bt*Ee,ct,ft);for(let Bt=0;Bt<=me;Bt++)X.emplaceBack(Bt*Ee,xt,yt);for(let Bt=0;Bt<me;Bt++)he.emplaceBack(ut+Bt,Xe+Bt,Xe+Bt+1),he.emplaceBack(ut+Bt,Xe+Bt+1,ut+Bt+1),he.emplaceBack(0+Bt,Ue+Bt+1,Ue+Bt),he.emplaceBack(0+Bt,0+Bt+1,Ue+Bt+1);const wt=X.length,Pt=wt+2*(me+1);for(const Bt of[0,1])for(let Yt=0;Yt<=me;Yt++)for(const dn of[0,1])X.emplaceBack(Bt*o.$,Yt*Ee,dn);for(let Bt=0;Bt<2*me;Bt+=2)he.emplaceBack(wt+Bt,wt+Bt+1,wt+Bt+3),he.emplaceBack(wt+Bt,wt+Bt+3,wt+Bt+2),he.emplaceBack(Pt+Bt,Pt+Bt+3,Pt+Bt+1),he.emplaceBack(Pt+Bt,Pt+Bt+2,Pt+Bt+3);const Ft=new Kl(q.createVertexBuffer(X,QA.members),q.createIndexBuffer(he),o.aM.simpleSegment(0,0,X.length,he.length));return this._meshCache[z]=Ft,Ft}getMeshFrameDelta(s){return 2*Math.PI*o.bu/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,f){var _;const{tileID:S}=this._getOverscaledTileIDFromLngLatZoom(s,f);return(_=this.getMinMaxElevation(S).minElevation)!==null&&_!==void 0?_:0}getMinMaxElevation(s){const f=this.getTerrainData(s).tile,_={minElevation:null,maxElevation:null};return f&&f.dem&&(_.minElevation=f.dem.min*this.exaggeration,_.maxElevation=f.dem.max*this.exaggeration),_}_getOverscaledTileIDFromLngLatZoom(s,f){const _=o.a1.fromLngLat(s.wrap()),S=(1<<f)*o.$,k=_.x*S,z=_.y*S,q=Math.floor(k/o.$),X=Math.floor(z/o.$);return{tileID:new o.Z(f,0,f,q,X),mercatorX:k,mercatorY:z}}}class kc{constructor(s,f,_){this._context=s,this._size=f,this._tileSize=_,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),_=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return _.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(_.texture),{id:s,fbo:f,texture:_,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(f=>s.id!==f),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}const Du={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Au{constructor(s,f){this.painter=s,this.terrain=f,this.pool=new kc(s.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(_=>!s._layers[_].isHidden(f)),this._coordsAscending={};for(const _ in s.sourceCaches){this._coordsAscending[_]={};const S=s.sourceCaches[_].getVisibleCoordinates(),k=s.sourceCaches[_].getSource(),z=k instanceof Wt?k.terrainTileRanges:null;for(const q of S){const X=this.terrain.sourceCache.getTerrainCoords(q,z);for(const he in X)this._coordsAscending[_][he]||(this._coordsAscending[_][he]=[]),this._coordsAscending[_][he].push(X[he])}}this._coordsAscendingStr={};for(const _ of s._order){const S=s._layers[_],k=S.source;if(Du[S.type]&&!this._coordsAscendingStr[k]){this._coordsAscendingStr[k]={};for(const z in this._coordsAscending[k])this._coordsAscendingStr[k][z]=this._coordsAscending[k][z].map(q=>q.key).sort().join()}}for(const _ of this._renderableTiles)for(const S in this._coordsAscendingStr){const k=this._coordsAscendingStr[S][_.tileID.key];k&&k!==_.rttCoords[S]&&(_.rtt=[])}}renderLayer(s,f){if(s.isHidden(this.painter.transform.zoom))return!1;const _=Object.assign(Object.assign({},f),{isRenderingToTexture:!0}),S=s.type,k=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Du[S]&&(this._prevType&&Du[this._prevType]||this._stacks.push([]),this._prevType=S,this._stacks[this._stacks.length-1].push(s.id),!z))return!0;if(Du[this._prevType]||Du[S]&&z){this._prevType=S;const q=this._stacks.length-1,X=this._stacks[q]||[];for(const he of this._renderableTiles){if(this.pool.isFull()&&(Xd(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(he),he.rtt[q]){const Ee=this.pool.getObjectForId(he.rtt[q].id);if(Ee.stamp===he.rtt[q].stamp){this.pool.useObject(Ee);continue}}const me=this.pool.getOrCreateFreeObject();this.pool.useObject(me),this.pool.stampObject(me),he.rtt[q]={id:me.id,stamp:me.stamp},k.context.bindFramebuffer.set(me.fbo.framebuffer),k.context.clear({color:o.bf.transparent,stencil:0}),k.currentStencilSource=void 0;for(let Ee=0;Ee<X.length;Ee++){const Me=k.style._layers[X[Ee]],Ue=Me.source?this._coordsAscending[Me.source][he.tileID.key]:[he.tileID];k.context.viewport.set([0,0,me.fbo.width,me.fbo.height]),k._renderTileClippingMasks(Me,Ue,!0),k.renderLayer(k,k.style.sourceCaches[Me.source],Me,Ue,_),Me.source&&(he.rttCoords[Me.source]=this._coordsAscendingStr[Me.source][he.tileID.key])}}return Xd(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects(),Du[S]}return!1}}const la={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},mo=p,Ql={hash:!1,interactive:!0,bearingSnap:7,attributionControl:vA,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ff={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Jh{constructor(s,f,_=!1){this.mousedown=k=>{this.startMove(k,K.mousePos(this.element,k)),K.addEventListener(window,"mousemove",this.mousemove),K.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=k=>{this.move(k,K.mousePos(this.element,k))},this.mouseup=k=>{this._rotatePitchHandler.dragEnd(k),this.offTemp()},this.touchstart=k=>{k.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=K.touchPos(this.element,k.targetTouches)[0],this.startMove(k,this._startPos),K.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),K.addEventListener(window,"touchend",this.touchend))},this.touchmove=k=>{k.targetTouches.length!==1?this.reset():(this._lastPos=K.touchPos(this.element,k.targetTouches)[0],this.move(k,this._lastPos))},this.touchend=k=>{k.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=f;const S=new Uf;this._rotatePitchHandler=new Vh({clickTolerance:3,move:(k,z)=>{const q=f.getBoundingClientRect(),X=new o.P((q.bottom-q.top)/2,(q.right-q.left)/2);return{bearingDelta:o.cn(new o.P(k.x,z.y),z,X),pitchDelta:_?-.5*(z.y-k.y):void 0}},moveStateManager:S,enable:!0,assignEvents:()=>{}}),this.map=s,K.addEventListener(f,"mousedown",this.mousedown),K.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),K.addEventListener(f,"touchcancel",this.reset)}startMove(s,f){this._rotatePitchHandler.dragStart(s,f),K.disableDrag()}move(s,f){const _=this.map,{bearingDelta:S,pitchDelta:k}=this._rotatePitchHandler.dragMove(s,f)||{};S&&_.setBearing(_.getBearing()+S),k&&_.setPitch(_.getPitch()+k)}off(){const s=this.element;K.removeEventListener(s,"mousedown",this.mousedown),K.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),K.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),K.removeEventListener(window,"touchend",this.touchend),K.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){K.enableDrag(),K.removeEventListener(window,"mousemove",this.mousemove),K.removeEventListener(window,"mouseup",this.mouseup),K.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),K.removeEventListener(window,"touchend",this.touchend)}}let Uo;function Wa(I,s,f,_=!1){if(_||!f.getCoveringTilesDetailsProvider().allowWorldCopies())return I?.wrap();const S=new o.S(I.lng,I.lat);if(I=new o.S(I.lng,I.lat),s){const k=new o.S(I.lng-360,I.lat),z=new o.S(I.lng+360,I.lat),q=f.locationToScreenPoint(I).distSqr(s);f.locationToScreenPoint(k).distSqr(s)<q?I=k:f.locationToScreenPoint(z).distSqr(s)<q&&(I=z)}for(;Math.abs(I.lng-f.center.lng)>180;){const k=f.locationToScreenPoint(I);if(k.x>=0&&k.y>=0&&k.x<=f.width&&k.y<=f.height)break;I.lng>f.center.lng?I.lng-=360:I.lng+=360}return I.lng!==S.lng&&f.isPointOnMapSurface(f.locationToScreenPoint(I))?I:S}const ed={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function CA(I,s,f){const _=I.classList;for(const S in ed)_.remove(`maplibregl-${f}-anchor-${S}`);_.add(`maplibregl-${f}-anchor-${s}`)}class Dc extends o.E{constructor(s){if(super(),this._onKeyPress=f=>{const _=f.code,S=f.charCode||f.keyCode;_!=="Space"&&_!=="Enter"&&S!==32&&S!==13||this.togglePopup()},this._onMapClick=f=>{const _=f.originalEvent.target,S=this._element;this._popup&&(_===S||S.contains(_))&&this.togglePopup()},this._update=f=>{if(!this._map)return;const _=this._map.loaded()&&!this._map.isMoving();(f?.type==="terrain"||f?.type==="render"&&!_)&&this._map.once("render",this._update),this._lngLat=Wa(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(S=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||f&&f.type!=="moveend"||(this._pos=this._pos.round()),K.setTransform(this._element,`${ed[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${k} ${S}`),U.frameAsync(new AbortController).then(()=>{this._updateOpacity(f&&f.type==="moveend")}).catch(()=>{})},this._onMove=f=>{if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s?.opacity,s?.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=o.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=K.create("div");const f=K.createNS("http://www.w3.org/2000/svg","svg"),_=41,S=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${_}px`),f.setAttributeNS(null,"width",`${S}px`),f.setAttributeNS(null,"viewBox",`0 0 ${S} ${_}`);const k=K.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const z=K.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const q=K.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),q.setAttributeNS(null,"fill","#000000");const X=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ft of X){const xt=K.createNS("http://www.w3.org/2000/svg","ellipse");xt.setAttributeNS(null,"opacity","0.04"),xt.setAttributeNS(null,"cx","10.5"),xt.setAttributeNS(null,"cy","5.80029008"),xt.setAttributeNS(null,"rx",ft.rx),xt.setAttributeNS(null,"ry",ft.ry),q.appendChild(xt)}const he=K.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"fill",this._color);const me=K.createNS("http://www.w3.org/2000/svg","path");me.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),he.appendChild(me);const Ee=K.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"opacity","0.25"),Ee.setAttributeNS(null,"fill","#000000");const Me=K.createNS("http://www.w3.org/2000/svg","path");Me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ee.appendChild(Me);const Ue=K.createNS("http://www.w3.org/2000/svg","g");Ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ue.setAttributeNS(null,"fill","#FFFFFF");const Xe=K.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ut=K.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#000000"),ut.setAttributeNS(null,"opacity","0.25"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962");const ct=K.createNS("http://www.w3.org/2000/svg","circle");ct.setAttributeNS(null,"fill","#FFFFFF"),ct.setAttributeNS(null,"cx","5.5"),ct.setAttributeNS(null,"cy","5.5"),ct.setAttributeNS(null,"r","5.4999962"),Xe.appendChild(ut),Xe.appendChild(ct),z.appendChild(q),z.appendChild(he),z.appendChild(Ee),z.appendChild(Ue),z.appendChild(Xe),f.appendChild(z),f.setAttributeNS(null,"height",_*this._scale+"px"),f.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(f),this._offset=o.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),CA(this._element,this._anchor,"marker"),s&&s.className)for(const f of s.className.split(" "))this._element.classList.add(f);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),K.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=o.S.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const S=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var f,_;const S=(f=this._map)===null||f===void 0?void 0:f.terrain,k=this._map.transform.isLocationOccluded(this._lngLat);if(!S||k){const Ue=k?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Ue&&(this._element.style.opacity=Ue))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const z=this._map,q=z.terrain.depthAtPoint(this._pos),X=z.terrain.getElevationForLngLatZoom(this._lngLat,z.transform.tileZoom);if(z.transform.lngLatToCameraDepth(this._lngLat,X)-q<.006)return void(this._element.style.opacity=this._opacity);const he=-this._offset.y/z.transform.pixelsPerMeter,me=Math.sin(z.getPitch()*Math.PI/180)*he,Ee=z.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),Me=z.transform.lngLatToCameraDepth(this._lngLat,X+me)-Ee>.006;!((_=this._popup)===null||_===void 0)&&_.isOpen()&&Me&&this._popup.remove(),this._element.style.opacity=Me?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=o.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,f){return(this._opacity===void 0||s===void 0&&f===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),f!==void 0&&(this._opacityWhenCovered=f),this._map&&this._updateOpacity(!0),this}}const Zs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ns=0,cu=!1;const Rc={maxWidth:100,unit:"metric"};function cc(I,s,f){const _=f&&f.maxWidth||100,S=I._container.clientHeight/2,k=I._container.clientWidth/2,z=I.unproject([k-_/2,S]),q=I.unproject([k+_/2,S]),X=Math.round(I.project(q).x-I.project(z).x),he=Math.min(_,X,I._container.clientWidth),me=z.distanceTo(q);if(f&&f.unit==="imperial"){const Ee=3.2808*me;Ee>5280?hc(s,he,Ee/5280,I._getUIString("ScaleControl.Miles")):hc(s,he,Ee,I._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?hc(s,he,me/1852,I._getUIString("ScaleControl.NauticalMiles")):me>=1e3?hc(s,he,me/1e3,I._getUIString("ScaleControl.Kilometers")):hc(s,he,me,I._getUIString("ScaleControl.Meters"))}function hc(I,s,f,_){const S=function(k){const z=Math.pow(10,`${Math.floor(k)}`.length-1);let q=k/z;return q=q>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:function(X){const he=Math.pow(10,Math.ceil(-Math.log(X)/Math.LN10));return Math.round(X*he)/he}(q),z*q}(f);I.style.width=s*(S/f)+"px",I.innerHTML=`${S}&nbsp;${_}`}const Yl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},td=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function nd(I){if(I){if(typeof I=="number"){const s=Math.round(Math.abs(I)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,I),"top-left":new o.P(s,s),"top-right":new o.P(-s,s),bottom:new o.P(0,-I),"bottom-left":new o.P(s,-s),"bottom-right":new o.P(-s,-s),left:new o.P(I,0),right:new o.P(-I,0)}}if(I instanceof o.P||Array.isArray(I)){const s=o.P.convert(I);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:o.P.convert(I.center||[0,0]),top:o.P.convert(I.top||[0,0]),"top-left":o.P.convert(I["top-left"]||[0,0]),"top-right":o.P.convert(I["top-right"]||[0,0]),bottom:o.P.convert(I.bottom||[0,0]),"bottom-left":o.P.convert(I["bottom-left"]||[0,0]),"bottom-right":o.P.convert(I["bottom-right"]||[0,0]),left:o.P.convert(I.left||[0,0]),right:o.P.convert(I.right||[0,0])}}return nd(new o.P(0,0))}const Td=p;l.AJAXError=o.cz,l.Event=o.l,l.Evented=o.E,l.LngLat=o.S,l.MercatorCoordinate=o.a1,l.Point=o.P,l.addProtocol=o.cA,l.config=o.a,l.removeProtocol=o.cB,l.AttributionControl=io,l.BoxZoomHandler=nh,l.CanvasSource=On,l.CooperativeGesturesHandler=rf,l.DoubleClickZoomHandler=Oh,l.DragPanHandler=eA,l.DragRotateHandler=_l,l.EdgeInsets=iu,l.FullscreenControl=class extends o.E{constructor(I={}){super(),this._onFullscreenChange=()=>{var s;let f=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=f?.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)f=f.shadowRoot.fullscreenElement;f===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=K.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){K.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const I=this._fullscreenButton=K.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);K.create("span","maplibregl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Jn,l.GeolocateControl=class extends o.E{constructor(I){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{const f=new o.S(s.coords.longitude,s.coords.latitude),_=s.coords.accuracy,S=this._map.getBearing(),k=o.e({bearing:S},this.options.fitBoundsOptions),z=_t.fromLngLat(f,_);this._map.fitBounds(z,k,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const f=new o.S(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=s.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&cu)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=K.create("button","maplibregl-ctrl-geolocate",this._container),K.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=K.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Dc({element:this._dotElement}),this._circleElement=K.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Dc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{const _=f?.[0]instanceof ResizeObserverEntry;f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||_||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},Zs,I)}onAdd(I){return this._map=I,this._container=K.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(s=!1){if(Uo!==void 0&&!s)return Uo;if(window.navigator.permissions===void 0)return Uo=!!window.navigator.geolocation,Uo;try{Uo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Uo=!!window.navigator.geolocation}return Uo})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),K.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,ns=0,cu=!1}_isOutOfMapMaxBounds(I){const s=this._map.getMaxBounds(),f=I.coords;return s&&(f.longitude<s.getWest()||f.longitude>s.getEast()||f.latitude<s.getSouth()||f.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const I=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&I))return;const s=this._map.project(I),f=this._map.unproject([s.x+100,s.y]),_=I.distanceTo(f)/100,S=2*this._accuracy/_;this._circleElement.style.width=`${S.toFixed(2)}px`,this._circleElement.style.height=`${S.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ns--,cu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ns++,ns>1?(I={maximumAge:6e5,timeout:0},cu=!0):(I=this.options.positionOptions,cu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var I;const s=(I=this._map.getProjection())===null||I===void 0?void 0:I.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var I;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((I=this._map.getProjection())===null||I===void 0?void 0:I.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(I){return this._map=I,this._container=K.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=K.create("button","maplibregl-ctrl-globe",this._container),K.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){K.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=rt,l.ImageSource=Wt,l.KeyboardHandler=Nl,l.LngLatBounds=_t,l.LogoControl=Ko,l.Map=class extends Lf{constructor(I){var s,f;o.cw.mark(o.cx.create);const _=Object.assign(Object.assign(Object.assign({},Ql),I),{canvasContextAttributes:Object.assign(Object.assign({},Ql.canvasContextAttributes),I.canvasContextAttributes)});if(_.minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const S=new Dr,k=new ya;if(_.minZoom!==void 0&&S.setMinZoom(_.minZoom),_.maxZoom!==void 0&&S.setMaxZoom(_.maxZoom),_.minPitch!==void 0&&S.setMinPitch(_.minPitch),_.maxPitch!==void 0&&S.setMaxPitch(_.maxPitch),_.renderWorldCopies!==void 0&&S.setRenderWorldCopies(_.renderWorldCopies),super(S,k,{bearingSnap:_.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Pr,this._controls=[],this._mapId=o.a7(),this._contextLost=q=>{q.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:q}))},this._contextRestored=q=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:q}))},this._onMapScroll=q=>{if(q.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=_.interactive,this._maxTileCacheSize=_.maxTileCacheSize,this._maxTileCacheZoomLevels=_.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},_.canvasContextAttributes),this._trackResize=_.trackResize===!0,this._bearingSnap=_.bearingSnap,this._centerClampedToGround=_.centerClampedToGround,this._refreshExpiredTiles=_.refreshExpiredTiles===!0,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions===!0,this._collectResourceTiming=_.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},la),_.locale),this._clickTolerance=_.clickTolerance,this._overridePixelRatio=_.pixelRatio,this._maxCanvasSize=_.maxCanvasSize,this.transformCameraUpdate=_.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=_.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ne.addThrottleControl(()=>this.isMoving()),this._requestManager=new $(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let q=!1;const X=Ju(he=>{this._trackResize&&!this._removed&&(this.resize(he),this.redraw())},50);this._resizeObserver=new ResizeObserver(he=>{q?X(he):q=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Xh(this,_),this._hash=_.hash&&new rt(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,elevation:_.elevation,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,roll:_.roll}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,o.e({},_.fitBoundsOptions,{duration:0}))));const z=typeof _.style=="string"||((f=(s=_.style)===null||s===void 0?void 0:s.projection)===null||f===void 0?void 0:f.type)!=="globe";this.resize(null,z),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new io(typeof _.attributionControl=="boolean"?void 0:_.attributionControl)),_.maplibreLogo&&this.addControl(new Ko,_.logoPosition),this.on("style.load",()=>{if(z||this._resizeTransform(),this.transform.unmodified){const q=o.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(q)}}),this.on("data",q=>{this._update(q.dataType==="style"),this.fire(new o.l(`${q.dataType}data`,q))}),this.on("dataloading",q=>{this.fire(new o.l(`${q.dataType}dataloading`,q))}),this.on("dataabort",q=>{this.fire(new o.l("sourcedataabort",q))})}_getMapId(){return this._mapId}setGlobalStateProperty(I,s){return this.style.setGlobalStateProperty(I,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(I,s){if(s===void 0&&(s=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=I.onAdd(this);this._controls.push(I);const _=this._controlPositions[s];return s.indexOf("bottom")!==-1?_.insertBefore(f,_.firstChild):_.appendChild(f),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(I);return s>-1&&this._controls.splice(s,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}coveringTiles(I){return it(this.transform,I)}calculateCameraOptionsFromTo(I,s,f,_){return _==null&&this.terrain&&(_=this.terrain.getElevationForLngLatZoom(f,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(I,s,f,_)}resize(I,s=!0){const[f,_]=this._containerDimensions(),S=this._getClampedPixelRatio(f,_);if(this._resizeCanvas(f,_,S),this.painter.resize(f,_,S),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const q=this._getClampedPixelRatio(f,_);this._resizeCanvas(f,_,q),this.painter.resize(f,_,q)}this._resizeTransform(s);const k=!this._moving;return k&&(this.stop(),this.fire(new o.l("movestart",I)).fire(new o.l("move",I))),this.fire(new o.l("resize",I)),k&&this.fire(new o.l("moveend",I)),this}_resizeTransform(I=!0){var s;const[f,_]=this._containerDimensions();this.transform.resize(f,_,I),(s=this._requestedCameraState)===null||s===void 0||s.resize(f,_,I)}_getClampedPixelRatio(I,s){const{0:f,1:_}=this._maxCanvasSize,S=this.getPixelRatio(),k=I*S,z=s*S;return Math.min(k>f?f/k:1,z>_?_/z:1)*S}getPixelRatio(){var I;return(I=this._overridePixelRatio)!==null&&I!==void 0?I:devicePixelRatio}setPixelRatio(I){this._overridePixelRatio=I,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(_t.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.setMinZoom(I),this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom)return this.transform.setMaxZoom(I),this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.setMinPitch(I),this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(I>=this.transform.minPitch)return this.transform.setMaxPitch(I),this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.setRenderWorldCopies(I),this._update()}project(I){return this.transform.locationToScreenPoint(o.S.convert(I),this.style&&this.terrain)}unproject(I){return this.transform.screenPointToLocation(o.P.convert(I),this.terrain)}isMoving(){var I;return this._moving||((I=this.handlers)===null||I===void 0?void 0:I.isMoving())}isZooming(){var I;return this._zooming||((I=this.handlers)===null||I===void 0?void 0:I.isZooming())}isRotating(){var I;return this._rotating||((I=this.handlers)===null||I===void 0?void 0:I.isRotating())}_createDelegatedListener(I,s,f){if(I==="mouseenter"||I==="mouseover"){let _=!1;return{layers:s,listener:f,delegates:{mousemove:k=>{const z=s.filter(X=>this.getLayer(X)),q=z.length!==0?this.queryRenderedFeatures(k.point,{layers:z}):[];q.length?_||(_=!0,f.call(this,new Tu(I,this,k.originalEvent,{features:q}))):_=!1},mouseout:()=>{_=!1}}}}if(I==="mouseleave"||I==="mouseout"){let _=!1;return{layers:s,listener:f,delegates:{mousemove:z=>{const q=s.filter(X=>this.getLayer(X));(q.length!==0?this.queryRenderedFeatures(z.point,{layers:q}):[]).length?_=!0:_&&(_=!1,f.call(this,new Tu(I,this,z.originalEvent)))},mouseout:z=>{_&&(_=!1,f.call(this,new Tu(I,this,z.originalEvent)))}}}}{const _=S=>{const k=s.filter(q=>this.getLayer(q)),z=k.length!==0?this.queryRenderedFeatures(S.point,{layers:k}):[];z.length&&(S.features=z,f.call(this,S),delete S.features)};return{layers:s,listener:f,delegates:{[I]:_}}}}_saveDelegatedListener(I,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(s)}_removeDelegatedListener(I,s,f){if(!this._delegatedListeners||!this._delegatedListeners[I])return;const _=this._delegatedListeners[I];for(let S=0;S<_.length;S++){const k=_[S];if(k.listener===f&&k.layers.length===s.length&&k.layers.every(z=>s.includes(z))){for(const z in k.delegates)this.off(z,k.delegates[z]);return void _.splice(S,1)}}}on(I,s,f){if(f===void 0)return super.on(I,s);const _=typeof s=="string"?[s]:s,S=this._createDelegatedListener(I,_,f);this._saveDelegatedListener(I,S);for(const k in S.delegates)this.on(k,S.delegates[k]);return{unsubscribe:()=>{this._removeDelegatedListener(I,_,f)}}}once(I,s,f){if(f===void 0)return super.once(I,s);const _=typeof s=="string"?[s]:s,S=this._createDelegatedListener(I,_,f);for(const k in S.delegates){const z=S.delegates[k];S.delegates[k]=(...q)=>{this._removeDelegatedListener(I,_,f),z(...q)}}this._saveDelegatedListener(I,S);for(const k in S.delegates)this.once(k,S.delegates[k]);return this}off(I,s,f){return f===void 0?super.off(I,s):(this._removeDelegatedListener(I,typeof s=="string"?[s]:s,f),this)}queryRenderedFeatures(I,s){if(!this.style)return[];let f;const _=I instanceof o.P||Array.isArray(I),S=_?I:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(_?{}:I)||{},S instanceof o.P||typeof S[0]=="number")f=[o.P.convert(S)];else{const k=o.P.convert(S[0]),z=o.P.convert(S[1]);f=[k,new o.P(z.x,k.y),z,new o.P(k.x,z.y),k]}return this.style.queryRenderedFeatures(f,s,this.transform)}querySourceFeatures(I,s){return this.style.querySourceFeatures(I,s)}setStyle(I,s){return(s=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(I,s))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const s=this._locale[I];if(s==null)throw new Error(`Missing UI string '${I}'`);return s}_updateStyle(I,s){var f,_;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(I,s));const S=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!I)),I?(this.style=new yh(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I,s,S):this.style.loadJSON(I,s,S),this):((_=(f=this.style)===null||f===void 0?void 0:f.projection)===null||_===void 0||_.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new yh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,s){if(typeof I=="string"){const f=this._requestManager.transformRequest(I,"Style");o.j(f,new AbortController).then(_=>{this._updateDiff(_.data,s)}).catch(_=>{_&&this.fire(new o.k(_))})}else typeof I=="object"&&this._updateDiff(I,s)}_updateDiff(I,s){try{this.style.setState(I,s)&&this._update(!0)}catch(f){o.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(I,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(I,s){return this._lazyInitEmptyStyle(),this.style.addSource(I,s),this._update(!0)}isSourceLoaded(I){const s=this.style&&this.style.sourceCaches[I];if(s!==void 0)return s.loaded();this.fire(new o.k(new Error(`There is no source with ID '${I}'`)))}setTerrain(I){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),I){const s=this.style.sourceCaches[I.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${I.source}`);this.terrain===null&&s.reload();for(const f in this.style._layers){const _=this.style._layers[f];_.type==="hillshade"&&_.source===I.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),_.type==="color-relief"&&_.source===I.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ki(this.painter,s,I),this.painter.renderToTexture=new Au(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=f=>{var _;f.dataType==="style"?this.terrain.sourceCache.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId!==I.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((_=f.source)===null||_===void 0?void 0:_.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:I})),this}getTerrain(){var I,s;return(s=(I=this.terrain)===null||I===void 0?void 0:I.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const I=this.style&&this.style.sourceCaches;for(const s in I){const f=I[s]._tiles;for(const _ in f){const S=f[_];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}setSourceTileLodParams(I,s,f){if(f){const _=this.getSource(f);if(!_)throw new Error(`There is no source with ID "${f}", cannot set LOD parameters`);_.calculateTileZoom=mt(Math.max(1,I),Math.max(1,s))}else for(const _ in this.style.sourceCaches)this.style.sourceCaches[_].getSource().calculateTileZoom=mt(Math.max(1,I),Math.max(1,s));return this._update(!0),this}refreshTiles(I,s){const f=this.style.sourceCaches[I];if(!f)throw new Error(`There is no source cache with ID "${I}", cannot refresh tile`);s===void 0?f.reload(!0):f.refreshTiles(s.map(_=>new o.a4(_.z,_.x,_.y)))}addImage(I,s,f={}){const{pixelRatio:_=1,sdf:S=!1,stretchX:k,stretchY:z,content:q,textFitWidth:X,textFitHeight:he}=f;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||o.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:me,height:Ee,data:Me}=s,Ue=s;return this.style.addImage(I,{data:new o.R({width:me,height:Ee},new Uint8Array(Me)),pixelRatio:_,stretchX:k,stretchY:z,content:q,textFitWidth:X,textFitHeight:he,sdf:S,version:0,userImage:Ue}),Ue.onAdd&&Ue.onAdd(this,I),this}}{const{width:me,height:Ee,data:Me}=U.getImageData(s);this.style.addImage(I,{data:new o.R({width:me,height:Ee},Me),pixelRatio:_,stretchX:k,stretchY:z,content:q,textFitWidth:X,textFitHeight:he,sdf:S,version:0})}}updateImage(I,s){const f=this.style.getImage(I);if(!f)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=s instanceof HTMLImageElement||o.b(s)?U.getImageData(s):s,{width:S,height:k,data:z}=_;if(S===void 0||k===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==f.data.width||k!==f.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const q=!(s instanceof HTMLImageElement||o.b(s));return f.data.replace(z,q),this.style.updateImage(I,f),this}getImage(I){return this.style.getImage(I)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I){return ne.getImage(this._requestManager.transformRequest(I,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(I,s){return this._lazyInitEmptyStyle(),this.style.addLayer(I,s),this._update(!0)}moveLayer(I,s){return this.style.moveLayer(I,s),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(I,s,f){return this.style.setLayerZoomRange(I,s,f),this._update(!0)}setFilter(I,s,f={}){return this.style.setFilter(I,s,f),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,s,f,_={}){return this.style.setPaintProperty(I,s,f,_),this._update(!0)}getPaintProperty(I,s){return this.style.getPaintProperty(I,s)}setLayoutProperty(I,s,f,_={}){return this.style.setLayoutProperty(I,s,f,_),this._update(!0)}getLayoutProperty(I,s){return this.style.getLayoutProperty(I,s)}setGlyphs(I,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(I,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(I,s,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(I,s,f,_=>{_||this._update(!0)}),this}removeSprite(I){return this._lazyInitEmptyStyle(),this.style.removeSprite(I),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(I,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(I,s,f=>{f||this._update(!0)}),this}setLight(I,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(I,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(I,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(I,s){return this.style.setFeatureState(I,s),this._update()}removeFeatureState(I,s){return this.style.removeFeatureState(I,s),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,s=0;return this._container&&(I=this._container.clientWidth||400,s=this._container.clientHeight||300),[I,s]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map");const s=this._canvasContainer=K.create("div","maplibregl-canvas-container",I);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=K.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const f=this._containerDimensions(),_=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],_);const S=this._controlContainer=K.create("div","maplibregl-control-container",I),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(z=>{k[z]=K.create("div",`maplibregl-ctrl-${z} `,S)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(I,s,f){this._canvas.width=Math.floor(f*I),this._canvas.height=Math.floor(f*s),this._canvas.style.width=`${I}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const I=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let s=null;this._canvas.addEventListener("webglcontextcreationerror",_=>{s={requestedAttributes:I},_&&(s.statusMessage=_.statusMessage,s.type=_.type)},{once:!0});let f=null;if(f=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,I):this._canvas.getContext("webgl2",I)||this._canvas.getContext("webgl",I),!f){const _="Failed to initialize WebGL";throw s?(s.message=_,new Error(JSON.stringify(s))):new Error(_)}this.painter=new wh(f,this.transform),j.testSupport(f)}migrateProjection(I,s){super.migrateProjection(I,s),this.painter.transform=I,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){var s,f,_,S,k;const z=this._idleTriggered?this._fadeDuration:0,q=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let X=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Ee=this.transform.zoom,Me=U.now();this.style.zoomHistory.update(Ee,Me);const Ue=new o.F(Ee,{now:Me,fadeDuration:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),Xe=Ue.crossFadingFactor();Xe===1&&Xe===this._crossFadingFactor||(X=!0,this._crossFadingFactor=Xe),this.style.update(Ue)}const he=((f=this.style.projection)===null||f===void 0?void 0:f.transitionState)>0!==q;(_=this.style.projection)===null||_===void 0||_.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((S=this.style.projection)===null||S===void 0?void 0:S.transitionState,(k=this.style.projection)===null||k===void 0?void 0:k.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||he)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,z,this._crossSourceCollisions,he),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cw.mark(o.cx.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||X)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const me=this._sourcesDirty||this._styleDirty||this._placementDirty;return me||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||me||(this._fullyLoaded=!0,o.cw.mark(o.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var I;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(I=this._resizeObserver)===null||I===void 0||I.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s?.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),K.remove(this._canvasContainer),K.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cw.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,U.frame(this._frameRequest,I=>{o.cw.frame(I),this._frameRequest=null;try{this._render(I)}catch(s){if(!o.cy(s)&&!function(f){return f.message===lc}(s))throw s}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}get version(){return mo}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(I){return this._lazyInitEmptyStyle(),this.style.setProjection(I),this._update(!0)}},l.MapMouseEvent=Tu,l.MapTouchEvent=Od,l.MapWheelEvent=Jd,l.Marker=Dc,l.NavigationControl=class{constructor(I){this._updateZoomButtons=()=>{const s=this._map.getZoom(),f=s===this._map.getMaxZoom(),_=s===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,f)=>{const _=this._map._getUIString(`NavigationControl.${f}`);s.title=_,s.setAttribute("aria-label",_)},this.options=o.e({},Ff,I),this._container=K.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),K.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),K.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=K.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){K.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,s){const f=K.create("button",I,this._container);return f.type="button",f.addEventListener("click",s),f}},l.Popup=class extends o.E{constructor(I){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&K.remove(this._content),this._container&&(K.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=K.create("div","maplibregl-popup",this._map.getContainer()),this._tip=K.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Wa(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;const f=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let _=this.options.anchor;const S=nd(this.options.offset);if(!_){const z=this._container.offsetWidth,q=this._container.offsetHeight;let X;X=f.y+S.bottom.y<q?["top"]:f.y>this._map.transform.height-q?["bottom"]:[],f.x<z/2?X.push("left"):f.x>this._map.transform.width-z/2&&X.push("right"),_=X.length===0?"bottom":X.join("-")}let k=f.add(S[_]);this.options.subpixelPositioning||(k=k.round()),K.setTransform(this._container,`${ed[_]} translate(${k.x}px,${k.y}px)`),CA(this._container,_,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Yl),I)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=o.S.convert(I),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const s=document.createDocumentFragment(),f=document.createElement("body");let _;for(f.innerHTML=I;_=f.firstChild,_;)s.appendChild(_);return this.setDOMContent(s)}getMaxWidth(){var I;return(I=this._container)===null||I===void 0?void 0:I.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=K.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){return this._container&&this._container.classList.add(I),this}removeClassName(I){return this._container&&this._container.classList.remove(I),this}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}setSubpixelPositioning(I){this.options.subpixelPositioning=I}_createCloseButton(){this.options.closeButton&&(this._closeButton=K.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(td);I&&I.focus()}},l.RasterDEMTileSource=on,l.RasterTileSource=Kt,l.ScaleControl=class{constructor(I){this._onMove=()=>{cc(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,cc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Rc),I)}getDefaultPosition(){return"bottom-left"}onAdd(I){return this._map=I,this._container=K.create("div","maplibregl-ctrl maplibregl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){K.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Ac,l.Style=yh,l.TerrainControl=class{constructor(I){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=I}onAdd(I){return this._map=I,this._container=K.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=K.create("button","maplibregl-ctrl-terrain",this._container),K.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){K.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=nf,l.TwoFingersTouchRotateHandler=Tc,l.TwoFingersTouchZoomHandler=WA,l.TwoFingersTouchZoomRotateHandler=Ep,l.VectorTileSource=qt,l.VideoSource=$n,l.addSourceType=(I,s)=>o._(void 0,void 0,void 0,function*(){if(In(I))throw new Error(`A source type called "${I}" already exists.`);((f,_)=>{Bn[f]=_})(I,s)}),l.clearPrewarmedResources=function(){const I=lt;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(be),lt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=Xn,l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return je().getRTLTextPluginStatus()},l.getVersion=function(){return Td},l.getWorkerCount=function(){return Ne.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(I){return Ut().broadcast("IS",I)},l.prewarm=function(){gt().acquire(be)},l.setMaxParallelImageRequests=function(I){o.a.MAX_PARALLEL_IMAGE_REQUESTS=I},l.setRTLTextPlugin=function(I,s){return je().setRTLTextPlugin(I,s)},l.setWorkerCount=function(I){Ne.workerCount=I},l.setWorkerUrl=function(I){o.a.WORKER_URL=I}});var a=t;return a})}(xx)),xx.exports}var r$=i$();const ov=AA(r$);var Lb=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function eF(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var IC={exports:{}};IC.exports;var SI;function o$(){return SI||(SI=1,function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,a=2,l=9007199254740991,o="[object Arguments]",p="[object Array]",C="[object AsyncFunction]",w="[object Boolean]",O="[object Date]",U="[object Error]",K="[object Function]",j="[object GeneratorFunction]",W="[object Map]",Y="[object Number]",te="[object Null]",J="[object Object]",oe="[object Promise]",ne="[object Proxy]",$="[object RegExp]",ae="[object Set]",G="[object String]",ce="[object Symbol]",ge="[object Undefined]",ye="[object WeakMap]",we="[object ArrayBuffer]",Oe="[object DataView]",Se="[object Float32Array]",Ve="[object Float64Array]",xe="[object Int8Array]",ze="[object Int16Array]",st="[object Int32Array]",Ct="[object Uint8Array]",nt="[object Uint8ClampedArray]",be="[object Uint16Array]",Ne="[object Uint32Array]",tt=/[\\^$.*+?()[\]{}|]/g,lt=/^\[object .+?Constructor\]$/,kt=/^(?:0|[1-9]\d*)$/,gt={};gt[Se]=gt[Ve]=gt[xe]=gt[ze]=gt[st]=gt[Ct]=gt[nt]=gt[be]=gt[Ne]=!0,gt[o]=gt[p]=gt[we]=gt[w]=gt[Oe]=gt[O]=gt[U]=gt[K]=gt[W]=gt[Y]=gt[J]=gt[$]=gt[ae]=gt[G]=gt[ye]=!1;var St=typeof Lb=="object"&&Lb&&Lb.Object===Object&&Lb,Ut=typeof self=="object"&&self&&self.Object===Object&&self,Fe=St||Ut||Function("return this")(),Ke=e&&!e.nodeType&&e,Re=Ke&&!0&&n&&!n.nodeType&&n,He=Re&&Re.exports===Ke,bt=He&&St.process,_t=function(){try{return bt&&bt.binding&&bt.binding("util")}catch{}}(),Ot=_t&&_t.isTypedArray;function qt(ee,Be){for(var at=-1,Gt=ee==null?0:ee.length,Si=0,Xn=[];++at<Gt;){var $i=ee[at];Be($i,at,ee)&&(Xn[Si++]=$i)}return Xn}function Kt(ee,Be){for(var at=-1,Gt=Be.length,Si=ee.length;++at<Gt;)ee[Si+at]=Be[at];return ee}function on(ee,Be){for(var at=-1,Gt=ee==null?0:ee.length;++at<Gt;)if(Be(ee[at],at,ee))return!0;return!1}function Jn(ee,Be){for(var at=-1,Gt=Array(ee);++at<ee;)Gt[at]=Be(at);return Gt}function Wt(ee){return function(Be){return ee(Be)}}function $n(ee,Be){return ee.has(Be)}function On(ee,Be){return ee?.[Be]}function Bn(ee){var Be=-1,at=Array(ee.size);return ee.forEach(function(Gt,Si){at[++Be]=[Si,Gt]}),at}function In(ee,Be){return function(at){return ee(Be(at))}}function Oi(ee){var Be=-1,at=Array(ee.size);return ee.forEach(function(Gt){at[++Be]=Gt}),at}var ei=Array.prototype,Kn=Function.prototype,je=Object.prototype,de=Fe["__core-js_shared__"],re=Kn.toString,le=je.hasOwnProperty,pe=function(){var ee=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Te=je.toString,We=RegExp("^"+re.call(le).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=He?Fe.Buffer:void 0,Ye=Fe.Symbol,De=Fe.Uint8Array,Ze=je.propertyIsEnumerable,g=ei.splice,mt=Ye?Ye.toStringTag:void 0,ht=Object.getOwnPropertySymbols,Tt=dt?dt.isBuffer:void 0,it=In(Object.keys,Object),en=ko(Fe,"DataView"),Dn=ko(Fe,"Map"),Mn=ko(Fe,"Promise"),ii=ko(Fe,"Set"),Wn=ko(Fe,"WeakMap"),qi=ko(Object,"create"),er=jo(en),Ei=jo(Dn),hi=jo(Mn),ti=jo(ii),Wi=jo(Wn),wn=Ye?Ye.prototype:void 0,uo=wn?wn.valueOf:void 0;function Hi(ee){var Be=-1,at=ee==null?0:ee.length;for(this.clear();++Be<at;){var Gt=ee[Be];this.set(Gt[0],Gt[1])}}function ma(){this.__data__=qi?qi(null):{},this.size=0}function To(ee){var Be=this.has(ee)&&delete this.__data__[ee];return this.size-=Be?1:0,Be}function Zn(ee){var Be=this.__data__;if(qi){var at=Be[ee];return at===i?void 0:at}return le.call(Be,ee)?Be[ee]:void 0}function lr(ee){var Be=this.__data__;return qi?Be[ee]!==void 0:le.call(Be,ee)}function zi(ee,Be){var at=this.__data__;return this.size+=this.has(ee)?0:1,at[ee]=qi&&Be===void 0?i:Be,this}Hi.prototype.clear=ma,Hi.prototype.delete=To,Hi.prototype.get=Zn,Hi.prototype.has=lr,Hi.prototype.set=zi;function vr(ee){var Be=-1,at=ee==null?0:ee.length;for(this.clear();++Be<at;){var Gt=ee[Be];this.set(Gt[0],Gt[1])}}function Fa(){this.__data__=[],this.size=0}function Tr(ee){var Be=this.__data__,at=si(Be,ee);if(at<0)return!1;var Gt=Be.length-1;return at==Gt?Be.pop():g.call(Be,at,1),--this.size,!0}function ji(ee){var Be=this.__data__,at=si(Be,ee);return at<0?void 0:Be[at][1]}function gl(ee){return si(this.__data__,ee)>-1}function ka(ee,Be){var at=this.__data__,Gt=si(at,ee);return Gt<0?(++this.size,at.push([ee,Be])):at[Gt][1]=Be,this}vr.prototype.clear=Fa,vr.prototype.delete=Tr,vr.prototype.get=ji,vr.prototype.has=gl,vr.prototype.set=ka;function wo(ee){var Be=-1,at=ee==null?0:ee.length;for(this.clear();++Be<at;){var Gt=ee[Be];this.set(Gt[0],Gt[1])}}function Xa(){this.size=0,this.__data__={hash:new Hi,map:new(Dn||vr),string:new Hi}}function Il(ee){var Be=$o(this,ee).delete(ee);return this.size-=Be?1:0,Be}function Ao(ee){return $o(this,ee).get(ee)}function Wu(ee){return $o(this,ee).has(ee)}function Da(ee,Be){var at=$o(this,ee),Gt=at.size;return at.set(ee,Be),this.size+=at.size==Gt?0:1,this}wo.prototype.clear=Xa,wo.prototype.delete=Il,wo.prototype.get=Ao,wo.prototype.has=Wu,wo.prototype.set=Da;function Vi(ee){var Be=-1,at=ee==null?0:ee.length;for(this.__data__=new wo;++Be<at;)this.add(ee[Be])}function Mi(ee){return this.__data__.set(ee,i),this}function us(ee){return this.__data__.has(ee)}Vi.prototype.add=Vi.prototype.push=Mi,Vi.prototype.has=us;function Ma(ee){var Be=this.__data__=new vr(ee);this.size=Be.size}function Vo(){this.__data__=new vr,this.size=0}function $e(ee){var Be=this.__data__,at=Be.delete(ee);return this.size=Be.size,at}function Et(ee){return this.__data__.get(ee)}function xn(ee){return this.__data__.has(ee)}function Gn(ee,Be){var at=this.__data__;if(at instanceof vr){var Gt=at.__data__;if(!Dn||Gt.length<t-1)return Gt.push([ee,Be]),this.size=++at.size,this;at=this.__data__=new wo(Gt)}return at.set(ee,Be),this.size=at.size,this}Ma.prototype.clear=Vo,Ma.prototype.delete=$e,Ma.prototype.get=Et,Ma.prototype.has=xn,Ma.prototype.set=Gn;function rn(ee,Be){var at=wa(ee),Gt=!at&&za(ee),Si=!at&&!Gt&&Dr(ee),Xn=!at&&!Gt&&!Si&&vl(ee),$i=at||Gt||Si||Xn,or=$i?Jn(ee.length,String):[],Ri=or.length;for(var Xi in ee)le.call(ee,Xi)&&!($i&&(Xi=="length"||Si&&(Xi=="offset"||Xi=="parent")||Xn&&(Xi=="buffer"||Xi=="byteLength"||Xi=="byteOffset")||Ul(Xi,Ri)))&&or.push(Xi);return or}function si(ee,Be){for(var at=ee.length;at--;)if(Eo(ee[at][0],Be))return at;return-1}function eo(ee,Be,at){var Gt=Be(ee);return wa(ee)?Gt:Kt(Gt,at(ee))}function So(ee){return ee==null?ee===void 0?ge:te:mt&&mt in Object(ee)?dr(ee):cA(ee)}function As(ee){return Rr(ee)&&So(ee)==o}function Ls(ee,Be,at,Gt,Si){return ee===Be?!0:ee==null||Be==null||!Rr(ee)&&!Rr(Be)?ee!==ee&&Be!==Be:Qu(ee,Be,at,Gt,Ls,Si)}function Qu(ee,Be,at,Gt,Si,Xn){var $i=wa(ee),or=wa(Be),Ri=$i?p:ga(ee),Xi=or?p:ga(Be);Ri=Ri==o?J:Ri,Xi=Xi==o?J:Xi;var to=Ri==J,co=Xi==J,Ar=Ri==Xi;if(Ar&&Dr(ee)){if(!Dr(Be))return!1;$i=!0,to=!1}if(Ar&&!to)return Xn||(Xn=new Ma),$i||vl(ee)?yl(ee,Be,at,Gt,Si,Xn):Ss(ee,Be,Ri,at,Gt,Si,Xn);if(!(at&r)){var mr=to&&le.call(ee,"__wrapped__"),ho=co&&le.call(Be,"__wrapped__");if(mr||ho){var No=mr?ee.value():ee,jr=ho?Be.value():Be;return Xn||(Xn=new Ma),Si(No,jr,at,Gt,Xn)}}return Ar?(Xn||(Xn=new Ma),xc(ee,Be,at,Gt,Si,Xn)):!1}function Qi(ee){if(!ya(ee)||xr(ee))return!1;var Be=ja(ee)?We:lt;return Be.test(jo(ee))}function RA(ee){return Rr(ee)&&Ja(ee.length)&&!!gt[So(ee)]}function _u(ee){if(!iu(ee))return it(ee);var Be=[];for(var at in Object(ee))le.call(ee,at)&&at!="constructor"&&Be.push(at);return Be}function yl(ee,Be,at,Gt,Si,Xn){var $i=at&r,or=ee.length,Ri=Be.length;if(or!=Ri&&!($i&&Ri>or))return!1;var Xi=Xn.get(ee);if(Xi&&Xn.get(Be))return Xi==Be;var to=-1,co=!0,Ar=at&a?new Vi:void 0;for(Xn.set(ee,Be),Xn.set(Be,ee);++to<or;){var mr=ee[to],ho=Be[to];if(Gt)var No=$i?Gt(ho,mr,to,Be,ee,Xn):Gt(mr,ho,to,ee,Be,Xn);if(No!==void 0){if(No)continue;co=!1;break}if(Ar){if(!on(Be,function(jr,qs){if(!$n(Ar,qs)&&(mr===jr||Si(mr,jr,at,Gt,Xn)))return Ar.push(qs)})){co=!1;break}}else if(!(mr===ho||Si(mr,ho,at,Gt,Xn))){co=!1;break}}return Xn.delete(ee),Xn.delete(Be),co}function Ss(ee,Be,at,Gt,Si,Xn,$i){switch(at){case Oe:if(ee.byteLength!=Be.byteLength||ee.byteOffset!=Be.byteOffset)return!1;ee=ee.buffer,Be=Be.buffer;case we:return!(ee.byteLength!=Be.byteLength||!Xn(new De(ee),new De(Be)));case w:case O:case Y:return Eo(+ee,+Be);case U:return ee.name==Be.name&&ee.message==Be.message;case $:case G:return ee==Be+"";case W:var or=Bn;case ae:var Ri=Gt&r;if(or||(or=Oi),ee.size!=Be.size&&!Ri)return!1;var Xi=$i.get(ee);if(Xi)return Xi==Be;Gt|=a,$i.set(ee,Be);var to=yl(or(ee),or(Be),Gt,Si,Xn,$i);return $i.delete(ee),to;case ce:if(uo)return uo.call(ee)==uo.call(Be)}return!1}function xc(ee,Be,at,Gt,Si,Xn){var $i=at&r,or=Ys(ee),Ri=or.length,Xi=Ys(Be),to=Xi.length;if(Ri!=to&&!$i)return!1;for(var co=Ri;co--;){var Ar=or[co];if(!($i?Ar in Be:le.call(Be,Ar)))return!1}var mr=Xn.get(ee);if(mr&&Xn.get(Be))return mr==Be;var ho=!0;Xn.set(ee,Be),Xn.set(Be,ee);for(var No=$i;++co<Ri;){Ar=or[co];var jr=ee[Ar],qs=Be[Ar];if(Gt)var Ll=$i?Gt(qs,jr,Ar,Be,ee,Xn):Gt(jr,qs,Ar,ee,Be,Xn);if(!(Ll===void 0?jr===qs||Si(jr,qs,at,Gt,Xn):Ll)){ho=!1;break}No||(No=Ar=="constructor")}if(ho&&!No){var Yu=ee.constructor,ps=Be.constructor;Yu!=ps&&"constructor"in ee&&"constructor"in Be&&!(typeof Yu=="function"&&Yu instanceof Yu&&typeof ps=="function"&&ps instanceof ps)&&(ho=!1)}return Xn.delete(ee),Xn.delete(Be),ho}function Ys(ee){return eo(ee,Zi,Kl)}function $o(ee,Be){var at=ee.__data__;return bu(Be)?at[typeof Be=="string"?"string":"hash"]:at.map}function ko(ee,Be){var at=On(ee,Be);return Qi(at)?at:void 0}function dr(ee){var Be=le.call(ee,mt),at=ee[mt];try{ee[mt]=void 0;var Gt=!0}catch{}var Si=Te.call(ee);return Gt&&(Be?ee[mt]=at:delete ee[mt]),Si}var Kl=ht?function(ee){return ee==null?[]:(ee=Object(ee),qt(ht(ee),function(Be){return Ze.call(ee,Be)}))}:wi,ga=So;(en&&ga(new en(new ArrayBuffer(1)))!=Oe||Dn&&ga(new Dn)!=W||Mn&&ga(Mn.resolve())!=oe||ii&&ga(new ii)!=ae||Wn&&ga(new Wn)!=ye)&&(ga=function(ee){var Be=So(ee),at=Be==J?ee.constructor:void 0,Gt=at?jo(at):"";if(Gt)switch(Gt){case er:return Oe;case Ei:return W;case hi:return oe;case ti:return ae;case Wi:return ye}return Be});function Ul(ee,Be){return Be=Be??l,!!Be&&(typeof ee=="number"||kt.test(ee))&&ee>-1&&ee%1==0&&ee<Be}function bu(ee){var Be=typeof ee;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?ee!=="__proto__":ee===null}function xr(ee){return!!pe&&pe in ee}function iu(ee){var Be=ee&&ee.constructor,at=typeof Be=="function"&&Be.prototype||je;return ee===at}function cA(ee){return Te.call(ee)}function jo(ee){if(ee!=null){try{return re.call(ee)}catch{}try{return ee+""}catch{}}return""}function Eo(ee,Be){return ee===Be||ee!==ee&&Be!==Be}var za=As(function(){return arguments}())?As:function(ee){return Rr(ee)&&le.call(ee,"callee")&&!Ze.call(ee,"callee")},wa=Array.isArray;function aa(ee){return ee!=null&&Ja(ee.length)&&!ja(ee)}var Dr=Tt||Yr;function ru(ee,Be){return Ls(ee,Be)}function ja(ee){if(!ya(ee))return!1;var Be=So(ee);return Be==K||Be==j||Be==C||Be==ne}function Ja(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=l}function ya(ee){var Be=typeof ee;return ee!=null&&(Be=="object"||Be=="function")}function Rr(ee){return ee!=null&&typeof ee=="object"}var vl=Ot?Wt(Ot):RA;function Zi(ee){return aa(ee)?rn(ee):_u(ee)}function wi(){return[]}function Yr(){return!1}n.exports=ru}(IC,IC.exports)),IC.exports}var a$=o$(),s$=eF(a$);function M6(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function w6(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function S6(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function l$(n,e){const t=[],i=[],r=[];function a(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const p=a(l);i.push(M6(p.circle,l)),r.push(S6(p.line,l)),t.push(w6(p.polygon,p.polygonOutline,l))}else o.forEach(p=>{const C=a(p);i.push(M6(C.circle,l,p)),r.push(S6(C.line,l,p)),t.push(w6(C.polygon,C.polygonOutline,l,p))})}),t.concat(r).concat(i)}function u$(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};return Object.keys(n.sources).forEach(a=>{const l=n.sources[a];(l.type==="vector"||l.type==="geojson")&&(r[a]=l)}),Object.assign(n,{layers:[i].concat(e),sources:r})}var EI={polygonLayer:w6,lineLayer:S6,circleLayer:M6,generateInspectStyle:u$,generateColoredLayers:l$};class A${constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(e),t||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function c$(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function S4(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${c$(e)}</div></div>`}function h$(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function d$(n){const e=h$(n.layer["source-layer"]||n.layer.source),t=S4("$id",n.id),i=S4("$type",n.geometry.type),r=Object.keys(n.properties).map(a=>S4(a,n.properties[a]));return[e,t,i].concat(r).join("")}function f$(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${d$(e)}</div>`).join("")}function p$(n){return`<div class="maplibregl-inspect_popup">${f$(n)}</div>`}var TC={exports:{}},m$=TC.exports,BI;function g$(){return BI||(BI=1,function(n,e){(function(t,i){{var r=i();n.exports&&(e=n.exports=r),e.randomColor=r}})(m$,function(){var t=null,i={};te();var r=[],a=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=$(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ce,ge,ye;if(G.count!==null&&G.count!==void 0){for(var we=G.count,Oe=[],Se=0;Se<G.count;Se++)r.push(!1);for(G.count=null;we>Oe.length;){var Ve=a(G);t!==null&&(G.seed=t),Oe.push(Ve)}return G.count=we,Oe}return ce=l(G),ge=o(ce,G),ye=p(ce,ge,G),C([ce,ge,ye],G)};function l(G){if(r.length>0){var ce=ae(G.hue),ge=j(ce),ye=(ce[1]-ce[0])/r.length,we=parseInt((ge-ce[0])/ye);r[we]===!0?we=(we+2)%r.length:r[we]=!0;var Oe=(ce[0]+we*ye)%359,Se=(ce[0]+(we+1)*ye)%359;return ce=[Oe,Se],ge=j(ce),ge<0&&(ge=360+ge),ge}else{var ce=O(G.hue);return ge=j(ce),ge<0&&(ge=360+ge),ge}}function o(G,ce){if(ce.hue==="monochrome")return 0;if(ce.luminosity==="random")return j([0,100]);var ge=U(G),ye=ge[0],we=ge[1];switch(ce.luminosity){case"bright":ye=55;break;case"dark":ye=we-10;break;case"light":we=55;break}return j([ye,we])}function p(G,ce,ge){var ye=w(G,ce),we=100;switch(ge.luminosity){case"dark":we=ye+20;break;case"light":ye=(we+ye)/2;break;case"random":ye=0,we=100;break}return j([ye,we])}function C(G,ce){switch(ce.format){case"hsvArray":return G;case"hslArray":return ne(G);case"hsl":var ge=ne(G);return"hsl("+ge[0]+", "+ge[1]+"%, "+ge[2]+"%)";case"hsla":var ye=ne(G),Se=ce.alpha||Math.random();return"hsla("+ye[0]+", "+ye[1]+"%, "+ye[2]+"%, "+Se+")";case"rgbArray":return J(G);case"rgb":var we=J(G);return"rgb("+we.join(", ")+")";case"rgba":var Oe=J(G),Se=ce.alpha||Math.random();return"rgba("+Oe.join(", ")+", "+Se+")";default:return W(G)}}function w(G,ce){for(var ge=K(G).lowerBounds,ye=0;ye<ge.length-1;ye++){var we=ge[ye][0],Oe=ge[ye][1],Se=ge[ye+1][0],Ve=ge[ye+1][1];if(ce>=we&&ce<=Se){var xe=(Ve-Oe)/(Se-we),ze=Oe-xe*we;return xe*ce+ze}}return 0}function O(G){if(typeof parseInt(G)=="number"){var ce=parseInt(G);if(ce<360&&ce>0)return[ce,ce]}if(typeof G=="string"){if(i[G]){var ge=i[G];if(ge.hueRange)return ge.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ye=oe(G)[0];return[ye,ye]}}return[0,360]}function U(G){return K(G).saturationRange}function K(G){G>=334&&G<=360&&(G-=360);for(var ce in i){var ge=i[ce];if(ge.hueRange&&G>=ge.hueRange[0]&&G<=ge.hueRange[1])return i[ce]}return"Color not found"}function j(G){if(t===null){var ce=.618033988749895,ge=Math.random();return ge+=ce,ge%=1,Math.floor(G[0]+ge*(G[1]+1-G[0]))}else{var ye=G[1]||1,we=G[0]||0;t=(t*9301+49297)%233280;var Oe=t/233280;return Math.floor(we+Oe*(ye-we))}}function W(G){var ce=J(G);function ge(we){var Oe=we.toString(16);return Oe.length==1?"0"+Oe:Oe}var ye="#"+ge(ce[0])+ge(ce[1])+ge(ce[2]);return ye}function Y(G,ce,ge){var ye=ge[0][0],we=ge[ge.length-1][0],Oe=ge[ge.length-1][1],Se=ge[0][1];i[G]={hueRange:ce,lowerBounds:ge,saturationRange:[ye,we],brightnessRange:[Oe,Se]}}function te(){Y("monochrome",null,[[0,0],[100,0]]),Y("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),Y("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),Y("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),Y("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),Y("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),Y("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),Y("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function J(G){var ce=G[0];ce===0&&(ce=1),ce===360&&(ce=359),ce=ce/360;var ge=G[1]/100,ye=G[2]/100,we=Math.floor(ce*6),Oe=ce*6-we,Se=ye*(1-ge),Ve=ye*(1-Oe*ge),xe=ye*(1-(1-Oe)*ge),ze=256,st=256,Ct=256;switch(we){case 0:ze=ye,st=xe,Ct=Se;break;case 1:ze=Ve,st=ye,Ct=Se;break;case 2:ze=Se,st=ye,Ct=xe;break;case 3:ze=Se,st=Ve,Ct=ye;break;case 4:ze=xe,st=Se,Ct=ye;break;case 5:ze=ye,st=Se,Ct=Ve;break}var nt=[Math.floor(ze*255),Math.floor(st*255),Math.floor(Ct*255)];return nt}function oe(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var ce=parseInt(G.substr(0,2),16)/255,ge=parseInt(G.substr(2,2),16)/255,ye=parseInt(G.substr(4,2),16)/255,we=Math.max(ce,ge,ye),Oe=we-Math.min(ce,ge,ye),Se=we?Oe/we:0;switch(we){case ce:return[60*((ge-ye)/Oe%6)||0,Se,we];case ge:return[60*((ye-ce)/Oe+2)||0,Se,we];case ye:return[60*((ce-ge)/Oe+4)||0,Se,we]}}function ne(G){var ce=G[0],ge=G[1]/100,ye=G[2]/100,we=(2-ge)*ye;return[ce,Math.round(ge*ye/(we<1?we:2-we)*1e4)/100,we/2*100]}function $(G){for(var ce=0,ge=0;ge!==G.length&&!(ce>=Number.MAX_SAFE_INTEGER);ge++)ce+=G.charCodeAt(ge);return ce}function ae(G){if(isNaN(G)){if(typeof G=="string"){if(i[G]){var ge=i[G];if(ge.hueRange)return ge.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ye=oe(G)[0];return K(ye).hueRange}}}else{var ce=parseInt(G);if(ce<360&&ce>0)return K(G).hueRange}return[0,360]}return a})}(TC,TC.exports)),TC.exports}var y$=g$(),v$=eF(y$);function C$(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${v$({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var _$={brightColor:C$};function b$(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function x$(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class oO{constructor(e){if(this._onSourceChange=i=>{if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const r=Object.assign({},this.sources);this._setSourcesFromMap(),!s$(r,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const i=this._map.getStyle();b$(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let r;this.options.selectThreshold===0?r=i.point:r=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const a=this._map.queryRenderedFeatures(r,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=a.length?"pointer":"",!a.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const l=this.options.renderPopup(a);typeof l=="string"?this._popup.setHTML(l):this._popup.setDOMContent(l),this._popup.addTo(this._map)}}},!(this instanceof oO))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:_$.brightColor,buildInspectStyle:EI.generateInspectStyle,renderPopup:p$,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new A$({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=EI.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(x$(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const i=this._map.style.sourceCaches[t]||{_source:{}},r=i._source.vectorLayerIds;r?this.sources[t]=r:i._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var kC={exports:{}},M$=kC.exports,OI;function w$(){return OI||(OI=1,function(n,e){(function(t,i){{var r=i();n&&n.exports&&(e=n.exports=r),e.randomColor=r}})(M$,function(){var t=null,i={};te();var r=[],a=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=$(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ce,ge,ye;if(G.count!==null&&G.count!==void 0){for(var we=G.count,Oe=[],Se=0;Se<G.count;Se++)r.push(!1);for(G.count=null;we>Oe.length;){var Ve=a(G);t!==null&&(G.seed=t),Oe.push(Ve)}return G.count=we,Oe}return ce=l(G),ge=o(ce,G),ye=p(ce,ge,G),C([ce,ge,ye],G)};function l(G){if(r.length>0){var ce=ae(G.hue),ge=j(ce),ye=(ce[1]-ce[0])/r.length,we=parseInt((ge-ce[0])/ye);r[we]===!0?we=(we+2)%r.length:r[we]=!0;var Oe=(ce[0]+we*ye)%359,Se=(ce[0]+(we+1)*ye)%359;return ce=[Oe,Se],ge=j(ce),ge<0&&(ge=360+ge),ge}else{var ce=O(G.hue);return ge=j(ce),ge<0&&(ge=360+ge),ge}}function o(G,ce){if(ce.hue==="monochrome")return 0;if(ce.luminosity==="random")return j([0,100]);var ge=U(G),ye=ge[0],we=ge[1];switch(ce.luminosity){case"bright":ye=55;break;case"dark":ye=we-10;break;case"light":we=55;break}return j([ye,we])}function p(G,ce,ge){var ye=w(G,ce),we=100;switch(ge.luminosity){case"dark":we=ye+20;break;case"light":ye=(we+ye)/2;break;case"random":ye=0,we=100;break}return j([ye,we])}function C(G,ce){switch(ce.format){case"hsvArray":return G;case"hslArray":return ne(G);case"hsl":var ge=ne(G);return"hsl("+ge[0]+", "+ge[1]+"%, "+ge[2]+"%)";case"hsla":var ye=ne(G),Se=ce.alpha||Math.random();return"hsla("+ye[0]+", "+ye[1]+"%, "+ye[2]+"%, "+Se+")";case"rgbArray":return J(G);case"rgb":var we=J(G);return"rgb("+we.join(", ")+")";case"rgba":var Oe=J(G),Se=ce.alpha||Math.random();return"rgba("+Oe.join(", ")+", "+Se+")";default:return W(G)}}function w(G,ce){for(var ge=K(G).lowerBounds,ye=0;ye<ge.length-1;ye++){var we=ge[ye][0],Oe=ge[ye][1],Se=ge[ye+1][0],Ve=ge[ye+1][1];if(ce>=we&&ce<=Se){var xe=(Ve-Oe)/(Se-we),ze=Oe-xe*we;return xe*ce+ze}}return 0}function O(G){if(typeof parseInt(G)=="number"){var ce=parseInt(G);if(ce<360&&ce>0)return[ce,ce]}if(typeof G=="string"){if(i[G]){var ge=i[G];if(ge.hueRange)return ge.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ye=oe(G)[0];return[ye,ye]}}return[0,360]}function U(G){return K(G).saturationRange}function K(G){G>=334&&G<=360&&(G-=360);for(var ce in i){var ge=i[ce];if(ge.hueRange&&G>=ge.hueRange[0]&&G<=ge.hueRange[1])return i[ce]}return"Color not found"}function j(G){if(t===null){var ce=.618033988749895,ge=Math.random();return ge+=ce,ge%=1,Math.floor(G[0]+ge*(G[1]+1-G[0]))}else{var ye=G[1]||1,we=G[0]||0;t=(t*9301+49297)%233280;var Oe=t/233280;return Math.floor(we+Oe*(ye-we))}}function W(G){var ce=J(G);function ge(we){var Oe=we.toString(16);return Oe.length==1?"0"+Oe:Oe}var ye="#"+ge(ce[0])+ge(ce[1])+ge(ce[2]);return ye}function Y(G,ce,ge){var ye=ge[0][0],we=ge[ge.length-1][0],Oe=ge[ge.length-1][1],Se=ge[0][1];i[G]={hueRange:ce,lowerBounds:ge,saturationRange:[ye,we],brightnessRange:[Oe,Se]}}function te(){Y("monochrome",null,[[0,0],[100,0]]),Y("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),Y("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),Y("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),Y("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),Y("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),Y("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),Y("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function J(G){var ce=G[0];ce===0&&(ce=1),ce===360&&(ce=359),ce=ce/360;var ge=G[1]/100,ye=G[2]/100,we=Math.floor(ce*6),Oe=ce*6-we,Se=ye*(1-ge),Ve=ye*(1-Oe*ge),xe=ye*(1-(1-Oe)*ge),ze=256,st=256,Ct=256;switch(we){case 0:ze=ye,st=xe,Ct=Se;break;case 1:ze=Ve,st=ye,Ct=Se;break;case 2:ze=Se,st=ye,Ct=xe;break;case 3:ze=Se,st=Ve,Ct=ye;break;case 4:ze=xe,st=Se,Ct=ye;break;case 5:ze=ye,st=Se,Ct=Ve;break}var nt=[Math.floor(ze*255),Math.floor(st*255),Math.floor(Ct*255)];return nt}function oe(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var ce=parseInt(G.substr(0,2),16)/255,ge=parseInt(G.substr(2,2),16)/255,ye=parseInt(G.substr(4,2),16)/255,we=Math.max(ce,ge,ye),Oe=we-Math.min(ce,ge,ye),Se=we?Oe/we:0;switch(we){case ce:return[60*((ge-ye)/Oe%6)||0,Se,we];case ge:return[60*((ye-ce)/Oe+2)||0,Se,we];case ye:return[60*((ce-ge)/Oe+4)||0,Se,we]}}function ne(G){var ce=G[0],ge=G[1]/100,ye=G[2]/100,we=(2-ge)*ye;return[ce,Math.round(ge*ye/(we<1?we:2-we)*1e4)/100,we/2*100]}function $(G){for(var ce=0,ge=0;ge!==G.length&&!(ce>=Number.MAX_SAFE_INTEGER);ge++)ce+=G.charCodeAt(ge);return ce}function ae(G){if(isNaN(G)){if(typeof G=="string"){if(i[G]){var ge=i[G];if(ge.hueRange)return ge.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ye=oe(G)[0];return K(ye).hueRange}}}else{var ce=parseInt(G);if(ce<360&&ce>0)return K(G).hueRange}return[0,360]}return a})}(kC,kC.exports)),kC.exports}var S$=w$();const E$=AA(S$);function B$(n,e){let t="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${E$({luminosity:t,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const tF={brightColor:B$};function O$(n){return La({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"},child:[]}]})(n)}function I$(n){return La({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098z"},child:[]}]})(n)}function T$(n){return La({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"},child:[]}]})(n)}function Yv(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function k$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function D$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function R$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function P$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function K$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function U$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function L$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function F$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function z$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function nF(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function j$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function E6(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function N$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function G$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"7.2",cy:"14.4",r:"3.2"},child:[]},{tag:"circle",attr:{cx:"14.8",cy:"18",r:"2"},child:[]},{tag:"circle",attr:{cx:"15.2",cy:"8.8",r:"4.8"},child:[]}]})(n)}function II(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function W$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function TI(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function Q$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"},child:[]}]})(n)}function Y$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(n)}function q$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function H$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.16 4.4.47.75.81 1.45 1.17 2.26.26.55.47 1.5 1.26 1.5s1-.95 1.25-1.5c.37-.81.7-1.51 1.17-2.26.96-1.53 2.21-2.85 3.16-4.4C18.5 12.37 19 10.74 19 9c0-3.87-3.13-7-7-7zm0 9.75a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(n)}function V$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function iF(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function rF(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function $$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function Z$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function X$(n){return La({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function J$(n){return La({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m344 280 88-88m-200 24 64 64M80 320l104-104"},child:[]},{tag:"circle",attr:{cx:"456",cy:"168",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"320",cy:"304",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"208",cy:"192",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"circle",attr:{cx:"56",cy:"344",r:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"},child:[]}]})(n)}function eZ(n){return La({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.3 168.1c-1.8 0-3.5.3-5.1 1l-177.6 92.1h-.1c-7.6 4.7-12.5 12.5-12.5 21.4v185.9c0 6.4 5.6 11.5 12.7 11.5 2.2 0 4.3-.5 6.1-1.4.2-.1.4-.2.5-.3L466 385.6l.3-.1c8.2-4.5 13.7-12.7 13.7-22.1V179.6c0-6.4-5.7-11.5-12.7-11.5zM454.3 118.5L272.6 36.8S261.9 32 256 32c-5.9 0-16.5 4.8-16.5 4.8L57.6 118.5s-8 3.3-8 9.5c0 6.6 8.3 11.5 8.3 11.5l185.5 97.8c3.8 1.7 8.1 2.6 12.6 2.6 4.6 0 8.9-1 12.7-2.7l185.4-97.9s7.5-4 7.5-11.5c.1-6.3-7.3-9.3-7.3-9.3zM227.5 261.2L49.8 169c-1.5-.6-3.3-1-5.1-1-7 0-12.7 5.1-12.7 11.5v183.8c0 9.4 5.5 17.6 13.7 22.1l.2.1 174.7 92.7c1.9 1.1 4.2 1.7 6.6 1.7 7 0 12.7-5.2 12.7-11.5V282.6c.1-8.9-4.9-16.8-12.4-21.4z"},child:[]}]})(n)}function tZ(n){return La({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"},child:[]}]})(n)}function fl(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="0b6460c942a48f834d2809c818afa5c72625023a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:7,column:18},end:{line:33,column:1}},1:{start:{line:8,column:20},end:{line:8,column:42}},2:{start:{line:9,column:2},end:{line:32,column:3}},3:{start:{line:11,column:6},end:{line:11,column:61}},4:{start:{line:13,column:6},end:{line:13,column:60}},5:{start:{line:15,column:6},end:{line:15,column:62}},6:{start:{line:17,column:6},end:{line:17,column:63}},7:{start:{line:19,column:6},end:{line:19,column:66}},8:{start:{line:21,column:6},end:{line:21,column:66}},9:{start:{line:23,column:6},end:{line:23,column:59}},10:{start:{line:25,column:6},end:{line:25,column:71}},11:{start:{line:27,column:6},end:{line:27,column:66}},12:{start:{line:29,column:6},end:{line:29,column:61}},13:{start:{line:31,column:6},end:{line:31,column:67}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:29},end:{line:33,column:1}},line:7}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:32,column:3}},type:"switch",locations:[{start:{line:10,column:4},end:{line:11,column:61}},{start:{line:12,column:4},end:{line:13,column:60}},{start:{line:14,column:4},end:{line:15,column:62}},{start:{line:16,column:4},end:{line:17,column:63}},{start:{line:18,column:4},end:{line:19,column:66}},{start:{line:20,column:4},end:{line:21,column:66}},{start:{line:22,column:4},end:{line:23,column:59}},{start:{line:24,column:4},end:{line:25,column:71}},{start:{line:26,column:4},end:{line:27,column:66}},{start:{line:28,column:4},end:{line:29,column:61}},{start:{line:30,column:4},end:{line:31,column:67}}],line:9}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAkBkC;AAflC,SAAS,QAAQ,eAAe,iBAAiB;AACjD,SAAS,eAAe,UAAU,eAAe,SAAS,sBAAsB;AAChF,SAAS,0BAA0B;AACnC,SAAS,gBAAgB;AACzB,SAAS,kBAAkB;AAQ3B,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,EAAE,OAAO,MAAM,MAAM;AACvC,UAAO,MAAM,MAAM;AAAA,IACjB,KAAK;AAAkB,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,WAAS,GAAG,WAAW;AAAA,IAC9C,KAAK;AAAa,aAAO,oBAAC,aAAW,GAAG,WAAW;AAAA,IACnD,KAAK;AAAgB,aAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,IACvD,KAAK;AAAW,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACrD,KAAK;AAAQ,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IAClD,KAAK;AAAc,aAAO,oBAAC,UAAQ,GAAG,WAAW;AAAA,IACjD,KAAK;AAAQ,aAAO,oBAAC,sBAAoB,GAAG,WAAW;AAAA,IACvD,KAAK;AAAU,aAAO,oBAAC,iBAAe,GAAG,WAAW;AAAA,IACpD,KAAK;AAAU,aAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,IAC/C;AAAS,aAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,EACjD;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b6460c942a48f834d2809c818afa5c72625023a"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return fl=function(){return l},l}fl();fl().s[0]++;const oF=n=>{fl().f[0]++;const e=(fl().s[1]++,{style:n.style});switch(fl().s[2]++,n.type){case"fill-extrusion":return fl().b[0][0]++,fl().s[3]++,Ae.jsx(eZ,{...e});case"raster":return fl().b[0][1]++,fl().s[4]++,Ae.jsx(Y$,{...e});case"hillshade":return fl().b[0][2]++,fl().s[5]++,Ae.jsx(T$,{...e});case"color-relief":return fl().b[0][3]++,fl().s[6]++,Ae.jsx(tZ,{...e});case"heatmap":return fl().b[0][4]++,fl().s[7]++,Ae.jsx(G$,{...e});case"fill":return fl().b[0][5]++,fl().s[8]++,Ae.jsx(I$,{...e});case"background":return fl().b[0][6]++,fl().s[9]++,Ae.jsx(O$,{...e});case"line":return fl().b[0][7]++,fl().s[10]++,Ae.jsx(J$,{...e});case"symbol":return fl().b[0][8]++,fl().s[11]++,Ae.jsx(H$,{...e});case"circle":return fl().b[0][9]++,fl().s[12]++,Ae.jsx(Q$,{...e});default:return fl().b[0][10]++,fl().s[13]++,Ae.jsx(X$,{...e})}};function Ji(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="6d83428b3c695d7740365dc3cc3e42bdf4d49028",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:152}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCAA+B,eAAY,uBAAsB,KAAI,OACxF,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6d83428b3c695d7740365dc3cc3e42bdf4d49028"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ji=function(){return l},l}Ji();function nZ(n){Ji().f[0]++;const e=(Ji().s[0]++,{}),t=(Ji().s[1]++,{});return Ji().s[2]++,n.forEach(i=>{Ji().f[1]++;const r=(Ji().s[3]++,i.layer["source-layer"]);if(Ji().s[4]++,Object.prototype.hasOwnProperty.call(t,i.layer.id)){Ji().b[0][0]++,Ji().s[5]++,t[i.layer.id]++;const a=(Ji().s[6]++,e[r].find(l=>(Ji().f[2]++,Ji().s[7]++,l.layer.id===i.layer.id)));Ji().s[8]++,a.counter=t[i.layer.id]}else Ji().b[0][1]++,Ji().s[9]++,e[r]=(Ji().b[1][0]++,e[r]||(Ji().b[1][1]++,[])),Ji().s[10]++,e[r].push(i),Ji().s[11]++,t[i.layer.id]=1}),Ji().s[12]++,e}class aF extends ni.Component{_getFeatureColor(e,t){if(Ji().f[3]++,Ji().s[13]++,e.layer.paint)Ji().b[2][1]++;else{Ji().b[2][0]++,Ji().s[14]++;return}Ji().s[15]++;try{const i=(Ji().s[16]++,e.layer.paint);return Ji().s[17]++,Ji().b[4][0]++,"text-color"in i&&(Ji().b[4][1]++,i["text-color"])?(Ji().b[3][0]++,Ji().s[18]++,String(i["text-color"])):(Ji().b[3][1]++,Ji().s[19]++,Ji().b[6][0]++,"fill-color"in i&&(Ji().b[6][1]++,i["fill-color"])?(Ji().b[5][0]++,Ji().s[20]++,String(i["fill-color"])):(Ji().b[5][1]++,Ji().s[21]++,Ji().b[8][0]++,"line-color"in i&&(Ji().b[8][1]++,i["line-color"])?(Ji().b[7][0]++,Ji().s[22]++,String(i["line-color"])):(Ji().b[7][1]++,Ji().s[23]++,Ji().b[10][0]++,"fill-extrusion-color"in i&&(Ji().b[10][1]++,i["fill-extrusion-color"])?(Ji().b[9][0]++,Ji().s[24]++,String(i["fill-extrusion-color"])):(Ji().b[9][1]++,Ji().s[25]++,"black"))))}catch(i){return Ji().s[26]++,console.warn("Unable to get feature color, error:",i),Ji().s[27]++,"black"}}render(){Ji().f[4]++;const e=(Ji().s[28]++,nZ(this.props.features)),t=(Ji().s[29]++,Object.keys(e).map(i=>{Ji().f[5]++;const r=(Ji().s[30]++,e[i].map((a,l)=>{Ji().f[6]++;const o=(Ji().s[31]++,this._getFeatureColor(a,this.props.zoom));return Ji().s[32]++,Ae.jsxs("div",{className:"maputnik-popup-layer",children:[Ae.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),Ae.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Ji().f[7]++,Ji().s[33]++,this.props.onLayerSelect(a.layer.id)},children:[(Ji().b[11][0]++,a.layer.type&&(Ji().b[11][1]++,Ae.jsx(oF,{type:a.layer.type,style:{width:14,height:14,paddingRight:3}}))),a.layer.id,(Ji().b[12][0]++,a.counter&&(Ji().b[12][1]++,Ae.jsxs("span",{children:["  ",a.counter]})))]})]},l)}));return Ji().s[34]++,Ae.jsxs("div",{children:[Ae.jsx("div",{className:"maputnik-popup-layer-id",children:i}),r]},i)}));return Ji().s[35]++,Ae.jsx("div",{className:"maputnik-feature-layer-popup","data-wd-key":"feature-layer-popup",dir:"ltr",children:t})}}function $r(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="1e4c480681bcaba84c2c41960b73ded2066b54bc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:303}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCAAkC,KAAI,OAAM,eAAY,0BAC5E,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1e4c480681bcaba84c2c41960b73ded2066b54bc"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return $r=function(){return l},l}$r();function kI(n){return $r().f[0]++,$r().s[0]++,$r().b[1][0]++,typeof n>"u"||($r().b[1][1]++,n===null)?($r().b[0][0]++,$r().s[1]++,n):($r().b[0][1]++,$r().s[2]++,n instanceof Date?($r().b[2][0]++,$r().s[3]++,n.toLocaleString()):($r().b[2][1]++,$r().s[4]++,$r().b[4][0]++,typeof n=="object"||($r().b[4][1]++,typeof n=="number")||($r().b[4][2]++,typeof n=="string")?($r().b[3][0]++,$r().s[5]++,n.toString()):($r().b[3][1]++,$r().s[6]++,n)))}function E4(n,e){return $r().f[1]++,$r().s[7]++,Ae.jsxs("tr",{children:[Ae.jsx("td",{className:"maputnik-popup-table-cell",children:n}),Ae.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function iZ(n,e){return $r().f[2]++,$r().s[8]++,Ae.jsxs(ni.Fragment,{children:[Ae.jsx("tr",{children:Ae.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],($r().b[5][0]++,n.inspectModeCounter&&($r().b[5][1]++,Ae.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),E4("$type",n.geometry.type),E4("$id",kI(n.id)),Object.keys(n.properties).map(t=>{$r().f[3]++;const i=($r().s[9]++,n.properties[t]);return $r().s[10]++,E4(t,kI(i))})]},e)}function rZ(n){$r().f[4]++;const e=($r().s[11]++,[]);return $r().s[12]++,n.forEach(t=>{$r().f[5]++;const i=($r().s[13]++,e.findIndex(r=>($r().f[6]++,$r().s[14]++,$r().b[6][0]++,t.layer["source-layer"]===r.layer["source-layer"]&&($r().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(r.properties)))));$r().s[15]++,i===-1?($r().b[7][0]++,$r().s[16]++,e.push(t)):($r().b[7][1]++,$r().s[17]++,"inspectModeCounter"in e[i]?($r().b[8][0]++,$r().s[18]++,e[i].inspectModeCounter++):($r().b[8][1]++,$r().s[19]++,e[i].inspectModeCounter=2))}),$r().s[20]++,e}class oZ extends ni.Component{render(){$r().f[7]++;const e=($r().s[21]++,rZ(this.props.features));return $r().s[22]++,Ae.jsx("div",{className:"maputnik-feature-property-popup",dir:"ltr","data-wd-key":"feature-property-popup",children:Ae.jsx("table",{className:"maputnik-popup-table",children:Ae.jsx("tbody",{children:e.map(iZ)})})})}}const e_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},sF=Object.create(null);for(const n in e_)Object.hasOwn(e_,n)&&(sF[e_[n]]=n);const bc={to:{},get:{}};bc.get=function(n){const e=n.slice(0,3).toLowerCase();let t,i;switch(e){case"hsl":{t=bc.get.hsl(n),i="hsl";break}case"hwb":{t=bc.get.hwb(n),i="hwb";break}default:{t=bc.get.rgb(n),i="rgb";break}}return t?{model:i,value:t}:null};bc.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,a=/^(\w+)$/;let l=[0,0,0,1],o,p,C;if(o=n.match(t)){for(C=o[2],o=o[1],p=0;p<3;p++){const w=p*2;l[p]=Number.parseInt(o.slice(w,w+2),16)}C&&(l[3]=Number.parseInt(C,16)/255)}else if(o=n.match(e)){for(o=o[1],C=o[3],p=0;p<3;p++)l[p]=Number.parseInt(o[p]+o[p],16);C&&(l[3]=Number.parseInt(C+C,16)/255)}else if(o=n.match(i)){for(p=0;p<3;p++)l[p]=Number.parseInt(o[p+1],10);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else if(o=n.match(r)){for(p=0;p<3;p++)l[p]=Math.round(Number.parseFloat(o[p+1])*2.55);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else return(o=n.match(a))?o[1]==="transparent"?[0,0,0,0]:Object.hasOwn(e_,o[1])?(l=e_[o[1]],l[3]=1,l):null:null;for(p=0;p<3;p++)l[p]=kg(l[p],0,255);return l[3]=kg(l[3],0,1),l};bc.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,a=kg(Number.parseFloat(t[2]),0,100),l=kg(Number.parseFloat(t[3]),0,100),o=kg(Number.isNaN(i)?1:i,0,1);return[r,a,l,o]}return null};bc.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const i=Number.parseFloat(t[4]),r=(Number.parseFloat(t[1])%360+360)%360,a=kg(Number.parseFloat(t[2]),0,100),l=kg(Number.parseFloat(t[3]),0,100),o=kg(Number.isNaN(i)?1:i,0,1);return[r,a,l,o]}return null};bc.to.hex=function(...n){return"#"+Fb(n[0])+Fb(n[1])+Fb(n[2])+(n[3]<1?Fb(Math.round(n[3]*255)):"")};bc.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};bc.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+i+"%)":"rgba("+e+"%, "+t+"%, "+i+"%, "+n[3]+")"};bc.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};bc.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};bc.to.keyword=function(...n){return sF[n.slice(0,3)]};function kg(n,e,t){return Math.min(Math.max(e,n),t)}function Fb(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const b_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},lF={};for(const n of Object.keys(b_))lF[b_[n]]=n;const ur={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},k0=(6/29)**3;for(const n of Object.keys(ur)){if(!("channels"in ur[n]))throw new Error("missing channels property: "+n);if(!("labels"in ur[n]))throw new Error("missing channel labels property: "+n);if(ur[n].labels.length!==ur[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=ur[n];delete ur[n].channels,delete ur[n].labels,Object.defineProperty(ur[n],"channels",{value:e}),Object.defineProperty(ur[n],"labels",{value:t})}ur.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),a=Math.max(e,t,i),l=a-r;let o,p;switch(a){case r:{o=0;break}case e:{o=(t-i)/l;break}case t:{o=2+(i-e)/l;break}case i:{o=4+(e-t)/l;break}}o=Math.min(o*60,360),o<0&&(o+=360);const C=(r+a)/2;return a===r?p=0:C<=.5?p=l/(a+r):p=l/(2-a-r),[o,p*100,C*100]};ur.rgb.hsv=function(n){let e,t,i,r,a;const l=n[0]/255,o=n[1]/255,p=n[2]/255,C=Math.max(l,o,p),w=C-Math.min(l,o,p),O=function(U){return(C-U)/6/w+1/2};if(w===0)r=0,a=0;else{switch(a=w/C,e=O(l),t=O(o),i=O(p),C){case l:{r=i-t;break}case o:{r=1/3+e-i;break}case p:{r=2/3+t-e;break}}r<0?r+=1:r>1&&(r-=1)}return[r*360,a*100,C*100]};ur.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=ur.rgb.hsl(n)[0],a=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,a*100,i*100]};ur.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),a=(1-e-r)/(1-r)||0,l=(1-t-r)/(1-r)||0,o=(1-i-r)/(1-r)||0;return[a*100,l*100,o*100,r*100]};function aZ(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}ur.rgb.keyword=function(n){const e=lF[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const r of Object.keys(b_)){const a=b_[r],l=aZ(n,a);l<t&&(t=l,i=r)}return i};ur.keyword.rgb=function(n){return b_[n]};ur.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;const r=e*.4124564+t*.3575761+i*.1804375,a=e*.2126729+t*.7151522+i*.072175,l=e*.0193339+t*.119192+i*.9503041;return[r*100,a*100,l*100]};ur.rgb.lab=function(n){const e=ur.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>k0?t**(1/3):7.787*t+16/116,i=i>k0?i**(1/3):7.787*i+16/116,r=r>k0?r**(1/3):7.787*r+16/116;const a=116*i-16,l=500*(t-i),o=200*(i-r);return[a,l,o]};ur.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,a;if(t===0)return a=i*255,[a,a,a];const l=i<.5?i*(1+t):i+t-i*t,o=2*i-l,p=[0,0,0];for(let C=0;C<3;C++)r=e+1/3*-(C-1),r<0&&r++,r>1&&r--,6*r<1?a=o+(l-o)*6*r:2*r<1?a=l:3*r<2?a=o+(l-o)*(2/3-r)*6:a=o,p[C]=a*255;return p};ur.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const a=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=a<=1?a:2-a;const l=(i+t)/2,o=i===0?2*r/(a+r):2*t/(i+t);return[e,o*100,l*100]};ur.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,a=e-Math.floor(e),l=255*i*(1-t),o=255*i*(1-t*a),p=255*i*(1-t*(1-a));switch(i*=255,r){case 0:return[i,p,l];case 1:return[o,i,l];case 2:return[l,i,p];case 3:return[l,o,i];case 4:return[p,l,i];case 5:return[i,l,o]}};ur.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let a,l;l=(2-t)*i;const o=(2-t)*r;return a=t*r,a/=o<=1?o:2-o,a=a||0,l/=2,[e,a*100,l*100]};ur.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let a;r>1&&(t/=r,i/=r);const l=Math.floor(6*e),o=1-i;a=6*e-l,(l&1)!==0&&(a=1-a);const p=t+a*(o-t);let C,w,O;switch(l){default:case 6:case 0:{C=o,w=p,O=t;break}case 1:{C=p,w=o,O=t;break}case 2:{C=t,w=o,O=p;break}case 3:{C=t,w=p,O=o;break}case 4:{C=p,w=t,O=o;break}case 5:{C=o,w=t,O=p;break}}return[C*255,w*255,O*255]};ur.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,a=1-Math.min(1,e*(1-r)+r),l=1-Math.min(1,t*(1-r)+r),o=1-Math.min(1,i*(1-r)+r);return[a*255,l*255,o*255]};ur.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,a,l;return r=e*3.2404542+t*-1.5371385+i*-.4985314,a=e*-.969266+t*1.8760108+i*.041556,l=e*.0556434+t*-.2040259+i*1.0572252,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,r=Math.min(Math.max(0,r),1),a=Math.min(Math.max(0,a),1),l=Math.min(Math.max(0,l),1),[r*255,a*255,l*255]};ur.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>k0?e**(1/3):7.787*e+16/116,t=t>k0?t**(1/3):7.787*t+16/116,i=i>k0?i**(1/3):7.787*i+16/116;const r=116*t-16,a=500*(e-t),l=200*(t-i);return[r,a,l]};ur.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let r,a,l;a=(e+16)/116,r=t/500+a,l=a-i/200;const o=a**3,p=r**3,C=l**3;return a=o>k0?o:(a-16/116)/7.787,r=p>k0?p:(r-16/116)/7.787,l=C>k0?C:(l-16/116)/7.787,r*=95.047,a*=100,l*=108.883,[r,a,l]};ur.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);const l=Math.sqrt(t*t+i*i);return[e,l,r]};ur.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI,a=t*Math.cos(r),l=t*Math.sin(r);return[e,a,l]};ur.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let a=e===null?ur.rgb.hsv(n)[2]:e;if(a=Math.round(a/50),a===0)return 30;let l=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return a===2&&(l+=60),l};ur.hsv.ansi16=function(n){return ur.rgb.ansi16(ur.hsv.rgb(n),n[2])};ur.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};ur.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,a=(e>>2&1)*t*255;return[i,r,a]};ur.ansi256.rgb=function(n){if(n=n[0],n>=232){const a=(n-232)*10+8;return[a,a,a]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};ur.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};ur.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(o=>o+o).join(""));const i=Number.parseInt(t,16),r=i>>16&255,a=i>>8&255,l=i&255;return[r,a,l]};ur.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),a=Math.min(Math.min(e,t),i),l=r-a;let o;const p=l<1?a/(1-l):0;return l<=0?o=0:r===e?o=(t-i)/l%6:r===t?o=2+(i-e)/l:o=4+(e-t)/l,o/=6,o%=1,[o*360,l*100,p*100]};ur.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};ur.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};ur.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const r=[0,0,0],a=e%1*6,l=a%1,o=1-l;let p=0;switch(Math.floor(a)){case 0:{r[0]=1,r[1]=l,r[2]=0;break}case 1:{r[0]=o,r[1]=1,r[2]=0;break}case 2:{r[0]=0,r[1]=1,r[2]=l;break}case 3:{r[0]=0,r[1]=o,r[2]=1;break}case 4:{r[0]=l,r[1]=0,r[2]=1;break}default:r[0]=1,r[1]=0,r[2]=o}return p=(1-t)*i,[(t*r[0]+p)*255,(t*r[1]+p)*255,(t*r[2]+p)*255]};ur.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};ur.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};ur.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};ur.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,r=i-e;let a=0;return r<1&&(a=(i-r)/(1-r)),[n[0],r*100,a*100]};ur.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};ur.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};ur.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};ur.gray.hsl=function(n){return[0,0,n[0]]};ur.gray.hsv=ur.gray.hsl;ur.gray.hwb=function(n){return[0,100,n[0]]};ur.gray.cmyk=function(n){return[0,0,0,n[0]]};ur.gray.lab=function(n){return[n[0],0,0]};ur.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};ur.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function sZ(){const n={},e=Object.keys(ur);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function lZ(n){const e=sZ(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),r=Object.keys(ur[i]);for(let{length:a}=r,l=0;l<a;l++){const o=r[l],p=e[o];p.distance===-1&&(p.distance=e[i].distance+1,p.parent=i,t.unshift(o))}}return e}function uZ(n,e){return function(t){return e(n(t))}}function AZ(n,e){const t=[e[n].parent,n];let i=ur[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=uZ(ur[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}function cZ(n){const e=lZ(n),t={},i=Object.keys(e);for(let{length:r}=i,a=0;a<r;a++){const l=i[a];e[l].parent!==null&&(t[l]=AZ(l,e))}return t}const Yc={},hZ=Object.keys(ur);function dZ(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function fZ(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const r=n(t);if(typeof r=="object")for(let{length:a}=r,l=0;l<a;l++)r[l]=Math.round(r[l]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of hZ){Yc[n]={},Object.defineProperty(Yc[n],"channels",{value:ur[n].channels}),Object.defineProperty(Yc[n],"labels",{value:ur[n].labels});const e=cZ(n),t=Object.keys(e);for(const i of t){const r=e[i];Yc[n][i]=fZ(r),Yc[n][i].raw=dZ(r)}}const uF=["keyword","gray","hex"],B6={};for(const n of Object.keys(Yc))B6[[...Yc[n].labels].sort().join("")]=n;const O6={};function ec(n,e){if(!(this instanceof ec))return new ec(n,e);if(e&&e in uF&&(e=null),e&&!(e in Yc))throw new Error("Unknown model: "+e);let t,i;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof ec)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const r=bc.get(n);if(r===null)throw new Error("Unable to parse color from string: "+n);this.model=r.model,i=Yc[this.model].channels,this.color=r.value.slice(0,i),this.valpha=typeof r.value[i]=="number"?r.value[i]:1}else if(n.length>0){this.model=e||"rgb",i=Yc[this.model].channels;const r=Array.prototype.slice.call(n,0,i);this.color=I6(r,i),this.valpha=typeof n[i]=="number"?n[i]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(n);"alpha"in n&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const a=r.sort().join("");if(!(a in B6))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=B6[a];const{labels:l}=Yc[this.model],o=[];for(t=0;t<l.length;t++)o.push(n[l[t]]);this.color=I6(o)}if(O6[this.model])for(i=Yc[this.model].channels,t=0;t<i;t++){const r=O6[this.model][t];r&&(this.color[t]=r(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}ec.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in bc.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return bc.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return bc.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Yc[this.model],{labels:t}=Yc[this.model];for(let i=0;i<e;i++)n[t[i]]=this.color[i];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new ec([...this.color.map(mZ(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new ec([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:aA("rgb",0,yc(255)),green:aA("rgb",1,yc(255)),blue:aA("rgb",2,yc(255)),hue:aA(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:aA("hsl",1,yc(100)),lightness:aA("hsl",2,yc(100)),saturationv:aA("hsv",1,yc(100)),value:aA("hsv",2,yc(100)),chroma:aA("hcg",1,yc(100)),gray:aA("hcg",2,yc(100)),white:aA("hwb",1,yc(100)),wblack:aA("hwb",2,yc(100)),cyan:aA("cmyk",0,yc(100)),magenta:aA("cmyk",1,yc(100)),yellow:aA("cmyk",2,yc(100)),black:aA("cmyk",3,yc(100)),x:aA("xyz",0,yc(95.047)),y:aA("xyz",1,yc(100)),z:aA("xyz",2,yc(108.833)),l:aA("lab",0,yc(100)),a:aA("lab",1),b:aA("lab",2),keyword(n){return n!==void 0?new ec(n):Yc[this.model].keyword(this.color)},hex(n){return n!==void 0?new ec(n):bc.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new ec(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),bc.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,i]of n.entries()){const r=i/255;e[t]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return ec.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),i=this.rgb(),r=e===void 0?.5:e,a=2*r-1,l=t.alpha()-i.alpha(),o=((a*l===-1?a:(a+l)/(1+a*l))+1)/2,p=1-o;return ec.rgb(o*t.red()+p*i.red(),o*t.green()+p*i.green(),o*t.blue()+p*i.blue(),t.alpha()*r+i.alpha()*(1-r))}};for(const n of Object.keys(Yc)){if(uF.includes(n))continue;const{channels:e}=Yc[n];ec.prototype[n]=function(...t){return this.model===n?new ec(this):t.length>0?new ec(t,n):new ec([...gZ(Yc[this.model][n].raw(this.color)),this.valpha],n)},ec[n]=function(...t){let i=t[0];return typeof i=="number"&&(i=I6(t,e)),new ec(i,n)}}function pZ(n,e){return Number(n.toFixed(e))}function mZ(n){return function(e){return pZ(e,n)}}function aA(n,e,t){n=Array.isArray(n)?n:[n];for(const i of n)(O6[i]||=[])[e]=t;return n=n[0],function(i){let r;return i!==void 0?(t&&(i=t(i)),r=this[n](),r.color[e]=i,r):(r=this[n]().color[e],t&&(r=t(r)),r)}}function yc(n){return function(e){return Math.max(0,Math.min(n,e))}}function gZ(n){return Array.isArray(n)?n:[n]}function I6(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function ds(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return ds=function(){return l},l}ds();class yZ{_map=(ds().s[0]++,void 0);_container=(ds().s[1]++,void 0);_textEl=(ds().s[2]++,null);constructor(){ds().f[0]++}onAdd(e){return ds().f[1]++,ds().s[3]++,this._map=e,ds().s[4]++,this._container=document.createElement("div"),ds().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",ds().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),ds().s[7]++,this.setLabel("Zoom:"),ds().s[8]++,this.addEventListeners(),ds().s[9]++,this._container}updateZoomLevel(){ds().f[2]++,ds().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){ds().f[3]++,ds().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,ds().s[12]++,this._textEl=this._container.querySelector("span"),ds().s[13]++,this.updateZoomLevel()}addEventListeners(){ds().f[4]++,ds().s[14]++,this._map.on("render",()=>(ds().f[5]++,ds().s[15]++,this.updateZoomLevel())),ds().s[16]++,this._map.on("zoomIn",()=>(ds().f[6]++,ds().s[17]++,this.updateZoomLevel())),ds().s[18]++,this._map.on("zoomOut",()=>(ds().f[7]++,ds().s[19]++,this.updateZoomLevel()))}onRemove(){ds().f[8]++,ds().s[20]++,this._container.parentNode.removeChild(this._container),ds().s[21]++,this._map=void 0}}function T6(n,e,t){const i={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(i["source-layer"]=t),i}function k6(n,e,t,i){const r={id:[t,i,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(r["source-layer"]=i),r}function D6(n,e,t){const i={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(i["source-layer"]=t),i}function vZ(n,e){const t=[],i=[],r=[];function a(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const p=a(l);i.push(T6(p.circle,l)),r.push(D6(p.line,l)),t.push(k6(p.polygon,p.polygonOutline,l))}else o.forEach(p=>{const C=a(p);i.push(T6(C.circle,l,p)),r.push(D6(C.line,l,p)),t.push(k6(C.polygon,C.polygonOutline,l,p))})}),t.concat(r).concat(i)}function CZ(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const i={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},r={};return Object.keys(n.sources).forEach(a=>{const l=n.sources[a];(l.type==="vector"||l.type==="geojson")&&(r[a]=l)}),Object.assign(n,{layers:[i].concat(e),sources:r})}const B4={polygonLayer:k6,lineLayer:D6,circleLayer:T6,generateInspectStyle:CZ,generateColoredLayers:vZ};function yo(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return yo=function(){return l},l}yo();function O4(n,e){return yo().f[0]++,yo().s[0]++,n.type==="circle"?(yo().b[0][0]++,yo().s[1]++,n.paint["circle-radius"]=3):(yo().b[0][1]++,yo().s[2]++,n.type==="line"?(yo().b[1][0]++,yo().s[3]++,n.paint["line-width"]=2):yo().b[1][1]++),yo().s[4]++,"filter"in e?(yo().b[2][0]++,yo().s[5]++,n.filter=e.filter):(yo().b[2][1]++,yo().s[6]++,delete n.filter),yo().s[7]++,n.id=n.id+"_highlight",yo().s[8]++,n}function _Z(n){if(yo().f[1]++,yo().s[9]++,yo().b[4][0]++,!n||(yo().b[4][1]++,n.type==="background")||(yo().b[4][2]++,n.type==="raster"))return yo().b[3][0]++,yo().s[10]++,null;yo().b[3][1]++;const e=(yo().s[11]++,yo().b[5][0]++,n["source-layer"]||(yo().b[5][1]++,"")),t=(yo().s[12]++,tF.brightColor(e,1));return yo().s[13]++,yo().b[7][0]++,n.type==="fill"||(yo().b[7][1]++,n.type==="fill-extrusion")?(yo().b[6][0]++,yo().s[14]++,O4(B4.polygonLayer(t,t,n.source,n["source-layer"]),n)):(yo().b[6][1]++,yo().s[15]++,yo().b[9][0]++,n.type==="symbol"||(yo().b[9][1]++,n.type==="circle")?(yo().b[8][0]++,yo().s[16]++,O4(B4.circleLayer(t,n.source,n["source-layer"]),n)):(yo().b[8][1]++,yo().s[17]++,n.type==="line"?(yo().b[10][0]++,yo().s[18]++,O4(B4.lineLayer(t,n.source,n["source-layer"]),n)):(yo().b[10][1]++,yo().s[19]++,null)))}function aO(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return aO=function(){return l},l}aO();aO().s[0]++;ov.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function I4(n,e,t,i){function r(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function o(w){try{C(i.next(w))}catch(O){l(O)}}function p(w){try{C(i.throw(w))}catch(O){l(O)}}function C(w){w.done?a(w.value):r(w.value).then(o,p)}C((i=i.apply(n,e||[])).next())})}var zb=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function e2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var T4,DI;function AF(){if(DI)return T4;DI=1,T4=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var a in r)n.call(r,a)&&(t[a]=r[a])}return t}return T4}var k4={exports:{}},RI;function bZ(){return RI||(RI=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(i,r){return r.filter(function(a){return t.test(i,a)})},t.test=function(i,r){return t.match(i,r)!==null},t.match=function(i,r,a){a=a||{};var l=0,o=[],p=r.length,C=0,w=0,O=a.pre||"",U=a.post||"",K=a.caseSensitive&&r||r.toLowerCase(),j;i=a.caseSensitive&&i||i.toLowerCase();for(var W=0;W<p;W++)j=r[W],K[W]===i[l]?(j=O+j+U,l+=1,w+=1+w):w=0,C+=w,o[o.length]=j;return l===i.length?(C=K===i?1/0:C,{rendered:o.join(""),score:C}):null},t.filter=function(i,r,a){return!r||r.length===0?[]:typeof i!="string"?r:(a=a||{},r.reduce(function(l,o,p,C){var w=o;a.extract&&(w=a.extract(o));var O=t.match(i,w,a);return O!=null&&(l[l.length]={string:O.rendered,score:O.score,index:p,original:o}),l},[]).sort(function(l,o){var p=o.score-l.score;return p||l.index-o.index}))}})()}(k4)),k4.exports}var D4,PI;function xZ(){if(PI)return D4;PI=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var i=document.createElement("li"),r=document.createElement("a");t&&(i.className+=" active"),r.innerHTML=e.string,i.appendChild(r),this.element.appendChild(i),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},D4=n,D4}var R4,KI;function MZ(){if(KI)return R4;KI=1;var n=AF(),e=bZ(),t=xZ(),i=function(r,a,l){return l=l||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},l),this.el=r,this.data=a||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return i.prototype.handleKeyUp=function(r,a){if(!(r===40||r===38||r===27||r===9)){if(r===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),a.stopPropagation());return}this.handleInputChange(this.el.value)}},i.prototype.handleKeyDown=function(r){switch(r.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&r.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},i.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},i.prototype.handlePaste=function(r){if(r.clipboardData)this.handleInputChange(r.clipboardData.getData("Text"));else{var a=this;setTimeout(function(){a.handleInputChange(r.target.value)},100)}},i.prototype.handleInputChange=function(r){if(this.query=this.normalize(r),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(a){for(var l=0;l<a.length&&(this.list.add(a[l]),l!==this.options.limit-1);l++);this.list.draw()}).bind(this))},i.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},i.prototype.update=function(r){this.data=r,this.handleKeyUp()},i.prototype.clear=function(){this.data=[],this.list.clear()},i.prototype.normalize=function(r){return r=r.toLowerCase(),r},i.prototype.match=function(r,a){return r.indexOf(a)>-1},i.prototype.value=function(r){if(this.selected=r,this.el.value=this.getItemValue(r||{place_name:this.query}),document.createEvent){var a=document.createEvent("HTMLEvents");a.initEvent("change",!0,!1),this.el.dispatchEvent(a)}else this.el.fireEvent("onchange")},i.prototype.getCandidates=function(r){var a={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},l;this.options.filter?(l=e.filter(this.query,this.data,a),l=l.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):l=this.data.map((function(o){var p=this.render(o);return{original:o,string:p}}).bind(this)),r(l)},i.prototype.getItemValue=function(r){return r},i.prototype.render=function(r,a){if(a)return a;for(var l=r.original?this.getItemValue(r.original):this.getItemValue(r),o=this.normalize(l),p=o.lastIndexOf(this.query);p>-1;){var C=p+this.query.length;l=l.slice(0,p)+"<strong>"+l.slice(p,C)+"</strong>"+l.slice(C),p=o.slice(0,p).lastIndexOf(this.query)}return l},i.prototype.renderError=function(r){this.list.drawError(r)},R4=i,R4}var P4,UI;function wZ(){if(UI)return P4;UI=1;var n=MZ();return P4=n,typeof window<"u"&&(window.Suggestions=n),P4}var SZ=wZ(),EZ=e2(SZ),Mx={exports:{}},BZ=Mx.exports,LI;function OZ(){return LI||(LI=1,function(n){(function(e,t,i){n.exports?n.exports=i():e[t]=i()})(BZ,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(p){return p.match(t)||[]}function r(p){return i(p).filter(function(C,w){return C&&w})}function a(p){return p=i(p),{language:p[1]||e,extlang:p[2]||e,script:p[3]||e,region:p[4]||e}}function l(p,C,w){Object.defineProperty(p,C,{value:w,enumerable:!0})}function o(p,C,w){function O(U){return i(U)[p]||e}l(O,"pattern",C),l(a,w,O)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),l(a,"split",r),a})}(Mx)),Mx.exports}var IZ=OZ(),TZ=e2(IZ),K4,FI;function kZ(){if(FI)return K4;FI=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,p=typeof zb=="object"&&zb&&zb.Object===Object&&zb,C=typeof self=="object"&&self&&self.Object===Object&&self,w=p||C||Function("return this")(),O=Object.prototype,U=O.toString,K=Math.max,j=Math.min,W=function(){return w.Date.now()};function Y($,ae,G){var ce,ge,ye,we,Oe,Se,Ve=0,xe=!1,ze=!1,st=!0;if(typeof $!="function")throw new TypeError(n);ae=ne(ae)||0,te(G)&&(xe=!!G.leading,ze="maxWait"in G,ye=ze?K(ne(G.maxWait)||0,ae):ye,st="trailing"in G?!!G.trailing:st);function Ct(Ut){var Fe=ce,Ke=ge;return ce=ge=void 0,Ve=Ut,we=$.apply(Ke,Fe),we}function nt(Ut){return Ve=Ut,Oe=setTimeout(tt,ae),xe?Ct(Ut):we}function be(Ut){var Fe=Ut-Se,Ke=Ut-Ve,Re=ae-Fe;return ze?j(Re,ye-Ke):Re}function Ne(Ut){var Fe=Ut-Se,Ke=Ut-Ve;return Se===void 0||Fe>=ae||Fe<0||ze&&Ke>=ye}function tt(){var Ut=W();if(Ne(Ut))return lt(Ut);Oe=setTimeout(tt,be(Ut))}function lt(Ut){return Oe=void 0,st&&ce?Ct(Ut):(ce=ge=void 0,we)}function kt(){Oe!==void 0&&clearTimeout(Oe),Ve=0,ce=Se=ge=Oe=void 0}function gt(){return Oe===void 0?we:lt(W())}function St(){var Ut=W(),Fe=Ne(Ut);if(ce=arguments,ge=this,Se=Ut,Fe){if(Oe===void 0)return nt(Se);if(ze)return Oe=setTimeout(tt,ae),Ct(Se)}return Oe===void 0&&(Oe=setTimeout(tt,ae)),we}return St.cancel=kt,St.flush=gt,St}function te($){var ae=typeof $;return!!$&&(ae=="object"||ae=="function")}function J($){return!!$&&typeof $=="object"}function oe($){return typeof $=="symbol"||J($)&&U.call($)==t}function ne($){if(typeof $=="number")return $;if(oe($))return e;if(te($)){var ae=typeof $.valueOf=="function"?$.valueOf():$;$=te(ae)?ae+"":ae}if(typeof $!="string")return $===0?$:+$;$=$.replace(i,"");var G=a.test($);return G||l.test($)?o($.slice(2),G?2:8):r.test($)?e:+$}return K4=Y,K4}var DZ=kZ(),RZ=e2(DZ),PZ=AF(),Wp=e2(PZ),jb={exports:{}},zI;function KZ(){if(zI)return jb.exports;zI=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function($,ae,G){return Function.prototype.apply.call($,ae,G)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:t=function($){return Object.getOwnPropertyNames($)};function i(ne){console&&console.warn&&console.warn(ne)}var r=Number.isNaN||function($){return $!==$};function a(){a.init.call(this)}jb.exports=a,jb.exports.once=te,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function o(ne){if(typeof ne!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ne)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(ne){if(typeof ne!="number"||ne<0||r(ne))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ne+".");l=ne}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function($){if(typeof $!="number"||$<0||r($))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$+".");return this._maxListeners=$,this};function p(ne){return ne._maxListeners===void 0?a.defaultMaxListeners:ne._maxListeners}a.prototype.getMaxListeners=function(){return p(this)},a.prototype.emit=function($){for(var ae=[],G=1;G<arguments.length;G++)ae.push(arguments[G]);var ce=$==="error",ge=this._events;if(ge!==void 0)ce=ce&&ge.error===void 0;else if(!ce)return!1;if(ce){var ye;if(ae.length>0&&(ye=ae[0]),ye instanceof Error)throw ye;var we=new Error("Unhandled error."+(ye?" ("+ye.message+")":""));throw we.context=ye,we}var Oe=ge[$];if(Oe===void 0)return!1;if(typeof Oe=="function")e(Oe,this,ae);else for(var Se=Oe.length,Ve=j(Oe,Se),G=0;G<Se;++G)e(Ve[G],this,ae);return!0};function C(ne,$,ae,G){var ce,ge,ye;if(o(ae),ge=ne._events,ge===void 0?(ge=ne._events=Object.create(null),ne._eventsCount=0):(ge.newListener!==void 0&&(ne.emit("newListener",$,ae.listener?ae.listener:ae),ge=ne._events),ye=ge[$]),ye===void 0)ye=ge[$]=ae,++ne._eventsCount;else if(typeof ye=="function"?ye=ge[$]=G?[ae,ye]:[ye,ae]:G?ye.unshift(ae):ye.push(ae),ce=p(ne),ce>0&&ye.length>ce&&!ye.warned){ye.warned=!0;var we=new Error("Possible EventEmitter memory leak detected. "+ye.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");we.name="MaxListenersExceededWarning",we.emitter=ne,we.type=$,we.count=ye.length,i(we)}return ne}a.prototype.addListener=function($,ae){return C(this,$,ae,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function($,ae){return C(this,$,ae,!0)};function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function O(ne,$,ae){var G={fired:!1,wrapFn:void 0,target:ne,type:$,listener:ae},ce=w.bind(G);return ce.listener=ae,G.wrapFn=ce,ce}a.prototype.once=function($,ae){return o(ae),this.on($,O(this,$,ae)),this},a.prototype.prependOnceListener=function($,ae){return o(ae),this.prependListener($,O(this,$,ae)),this},a.prototype.removeListener=function($,ae){var G,ce,ge,ye,we;if(o(ae),ce=this._events,ce===void 0)return this;if(G=ce[$],G===void 0)return this;if(G===ae||G.listener===ae)--this._eventsCount===0?this._events=Object.create(null):(delete ce[$],ce.removeListener&&this.emit("removeListener",$,G.listener||ae));else if(typeof G!="function"){for(ge=-1,ye=G.length-1;ye>=0;ye--)if(G[ye]===ae||G[ye].listener===ae){we=G[ye].listener,ge=ye;break}if(ge<0)return this;ge===0?G.shift():W(G,ge),G.length===1&&(ce[$]=G[0]),ce.removeListener!==void 0&&this.emit("removeListener",$,we||ae)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function($){var ae,G,ce;if(G=this._events,G===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[$]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete G[$]),this;if(arguments.length===0){var ge=Object.keys(G),ye;for(ce=0;ce<ge.length;++ce)ye=ge[ce],ye!=="removeListener"&&this.removeAllListeners(ye);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ae=G[$],typeof ae=="function")this.removeListener($,ae);else if(ae!==void 0)for(ce=ae.length-1;ce>=0;ce--)this.removeListener($,ae[ce]);return this};function U(ne,$,ae){var G=ne._events;if(G===void 0)return[];var ce=G[$];return ce===void 0?[]:typeof ce=="function"?ae?[ce.listener||ce]:[ce]:ae?Y(ce):j(ce,ce.length)}a.prototype.listeners=function($){return U(this,$,!0)},a.prototype.rawListeners=function($){return U(this,$,!1)},a.listenerCount=function(ne,$){return typeof ne.listenerCount=="function"?ne.listenerCount($):K.call(ne,$)},a.prototype.listenerCount=K;function K(ne){var $=this._events;if($!==void 0){var ae=$[ne];if(typeof ae=="function")return 1;if(ae!==void 0)return ae.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function j(ne,$){for(var ae=new Array($),G=0;G<$;++G)ae[G]=ne[G];return ae}function W(ne,$){for(;$+1<ne.length;$++)ne[$]=ne[$+1];ne.pop()}function Y(ne){for(var $=new Array(ne.length),ae=0;ae<$.length;++ae)$[ae]=ne[ae].listener||ne[ae];return $}function te(ne,$){return new Promise(function(ae,G){function ce(ye){ne.removeListener($,ge),G(ye)}function ge(){typeof ne.removeListener=="function"&&ne.removeListener("error",ce),ae([].slice.call(arguments))}oe(ne,$,ge,{once:!0}),$!=="error"&&J(ne,ce,{once:!0})})}function J(ne,$,ae){typeof ne.on=="function"&&oe(ne,"error",$,ae)}function oe(ne,$,ae,G){if(typeof ne.on=="function")G.once?ne.once($,ae):ne.on($,ae);else if(typeof ne.addEventListener=="function")ne.addEventListener($,function ce(ge){G.once&&ne.removeEventListener($,ce),ae(ge)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ne)}return jb.exports}var UZ=KZ();const jI={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},LZ={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:"",es:"Buscar"},FZ={en:"No results found",de:"Keine Ergebnisse gefunden",es:"No hay resultados"},zZ={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen",es:"Error al conectarse al servidor"};var gC={placeholder:LZ,errorNoResults:FZ,errorConnectionFailed:zZ};const jZ=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class NZ{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:i=>i.text!==void 0?i.text:i.place_name,render:function(i){if(!i.geometry){const a=i.text,l=a.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,p=a.substring(0,l),C=a.substring(l,l+o),w=a.substring(l+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+p+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+C+"</span>"+w+"</div></div></div>"}const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+r.splice(1,r.length).join(",")+"</div></div></div>"},popupRender:i=>{const r=i.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+r[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+r.splice(1,r.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new UZ.EventEmitter,this.options=Wp({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(i,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const a=i.onAdd();r.appendChild(a)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const i=document.querySelectorAll(e);if(i.length===0)throw new Error("Element "+e+"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,i[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",RZ(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const r=document.createElement("div");r.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const a=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(a),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(i),t.appendChild(this._inputEl),t.appendChild(r),this._typeahead=new EZ(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.container.addEventListener("click",()=>{this._typeahead.update(this._typeahead.data)}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width","18"),i.setAttribute("height","18"),"innerHTML"in i)i.innerHTML=t;else{const r=document.createElement("div");r.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const a=r.firstChild,l=a.firstChild;i.appendChild(l)}return i}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const a=this._inputEl.value;if(!a)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(a);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(a,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}a.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(a)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&jI[e.properties.short_code])t=Wp({},this.options.flyTo),this._map&&this._map.fitBounds(jI[e.properties.short_code].bbox,t);else if(e.bbox){const i=e.bbox;t=Wp({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],t)}else{const i={zoom:this.options.zoom};t=Wp({},i,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((i,r)=>(this.options[r]&&(["countries","types","language"].indexOf(r)>-1?i[r]=this.options[r].split(/[\s,]+/):i[r]=this.options[r],r==="proximity"&&this.options[r]&&typeof this.options[r].longitude=="number"&&typeof this.options[r].latitude=="number"&&(i[r]=[this.options[r].longitude,this.options[r].latitude])),i),{})}_geocode(e){return I4(this,arguments,void 0,function*(t,i=!1,r=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const a=this._getConfigForRequest(),l=this._createGeocodeRequest(a,t,i,r),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const p=yield l;yield this._handleGeocodeResponse(p,a,t,i,o)}catch(p){this._handleGeocodeErrorResponse(p,o)}return l})}_createGeocodeRequest(e,t,i,r){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&jZ.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?i?this.geocoderApi.searchByPlaceId&&r?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const i=e.split(/[\s(,)?]+/).map(r=>parseFloat(r)).reverse();return t.query=i,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,i,r,a){return I4(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let l={};e?l=e:l={type:"FeatureCollection",features:[]},l.config=t,this.fresh&&(this.fresh=!1),l.features=l.features?a.concat(l.features):a;const o=this.options.externalGeocoder?this.options.externalGeocoder(i,l.features,t)||Promise.resolve([]):Promise.resolve([]);try{const C=yield o;l.features=l.features?C.concat(l.features):C}catch{}this.options.filter&&l.features.length&&(l.features=l.features.filter(this.options.filter));let p=[];"suggestions"in l?p=l.suggestions:"place"in l?p=[l.place]:p=l.features,p.length?(this._clearEl.style.display="block",this._typeahead.update(p),(!this.options.showResultsWhileTyping||r)&&this.options.showResultMarkers&&(l.features.length>0||"place"in l)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",l)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",l))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return I4(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=TZ.language(this.options.language.split(",")[0]);return this.options.language&&gC?.[e][t]?gC[e][t]:gC[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const i=Wp({},{padding:100},this.options.flyTo),r=new this._maplibregl.LngLatBounds;for(const a of e)r.extend(a.geometry.coordinates);this._map.fitBounds(r,i)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const i=Wp({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(i);let r;if(this.options.popup){const l=Wp({},{},this.options.popup);r=new this._maplibregl.Popup(l).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(r)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let i=Wp({},{color:"#4668F2"},this.options.showResultMarkers);for(const r of e){let a;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(a=this.options.showResultMarkers.element.cloneNode(!0),i=Wp(i,{element:a}));const l=new this._maplibregl.Marker(Wp({},i,{element:a}));let o;if(this.options.popup){const C=Wp({},{},this.options.popup);o=new this._maplibregl.Popup(C).setHTML(this.options.popupRender(r))}r.center?(l.setLngLat(r.center).addTo(this._map),this.options.popup&&l.setPopup(o)):r.geometry&&r.geometry.type&&r.geometry.type==="Point"&&r.geometry.coordinates&&(l.setLngLat(r.geometry.coordinates).addTo(this._map),this.options.popup&&l.setPopup(o)),this.resultMarkers.push(l)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function bn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="1655c5d10102378b1e2627d777374c6f3c3f21a7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:26},end:{line:27,column:3}},1:{start:{line:28,column:16},end:{line:28,column:55}},2:{start:{line:29,column:2},end:{line:31,column:3}},3:{start:{line:30,column:4},end:{line:30,column:30}},4:{start:{line:32,column:18},end:{line:32,column:20}},5:{start:{line:33,column:2},end:{line:38,column:5}},6:{start:{line:34,column:19},end:{line:34,column:53}},7:{start:{line:35,column:4},end:{line:37,column:5}},8:{start:{line:36,column:6},end:{line:36,column:33}},9:{start:{line:39,column:23},end:{line:43,column:3}},10:{start:{line:44,column:2},end:{line:44,column:22}},11:{start:{line:47,column:24},end:{line:57,column:3}},12:{start:{line:58,column:14},end:{line:58,column:18}},13:{start:{line:60,column:4},end:{line:60,column:17}},14:{start:{line:61,column:4},end:{line:66,column:6}},15:{start:{line:67,column:4},end:{line:69,column:7}},16:{start:{line:68,column:6},end:{line:68,column:25}},17:{start:{line:72,column:17},end:{line:72,column:22}},18:{start:{line:73,column:4},end:{line:76,column:5}},19:{start:{line:74,column:6},end:{line:74,column:132}},20:{start:{line:77,column:4},end:{line:77,column:18}},21:{start:{line:80,column:16},end:{line:80,column:30}},22:{start:{line:81,column:28},end:{line:81,column:79}},23:{start:{line:82,column:4},end:{line:87,column:5}},24:{start:{line:83,column:6},end:{line:83,column:52}},25:{start:{line:84,column:6},end:{line:84,column:70}},26:{start:{line:85,column:6},end:{line:85,column:70}},27:{start:{line:86,column:6},end:{line:86,column:76}},28:{start:{line:88,column:4},end:{line:90,column:5}},29:{start:{line:89,column:6},end:{line:89,column:43}},30:{start:{line:91,column:4},end:{line:96,column:5}},31:{start:{line:92,column:6},end:{line:92,column:59}},32:{start:{line:93,column:6},end:{line:95,column:14}},33:{start:{line:94,column:8},end:{line:94,column:36}},34:{start:{line:99,column:20},end:{line:108,column:5}},35:{start:{line:109,column:21},end:{line:109,column:53}},36:{start:{line:110,column:4},end:{line:110,column:53}},37:{start:{line:111,column:16},end:{line:111,column:43}},38:{start:{line:112,column:26},end:{line:116,column:5}},39:{start:{line:113,column:21},end:{line:113,column:36}},40:{start:{line:114,column:19},end:{line:114,column:32}},41:{start:{line:115,column:6},end:{line:115,column:44}},42:{start:{line:117,column:4},end:{line:117,column:20}},43:{start:{line:118,column:4},end:{line:118,column:56}},44:{start:{line:119,column:4},end:{line:119,column:56}},45:{start:{line:120,column:4},end:{line:120,column:62}},46:{start:{line:121,column:21},end:{line:121,column:43}},47:{start:{line:122,column:24},end:{line:122,column:41}},48:{start:{line:123,column:4},end:{line:123,column:45}},49:{start:{line:124,column:16},end:{line:124,column:74}},50:{start:{line:125,column:4},end:{line:125,column:37}},51:{start:{line:126,column:20},end:{line:126,column:49}},52:{start:{line:127,column:17},end:{line:127,column:36}},53:{start:{line:128,column:25},end:{line:130,column:6}},54:{start:{line:131,column:20},end:{line:162,column:6}},55:{start:{line:139,column:8},end:{line:139,column:82}},56:{start:{line:141,column:62},end:{line:141,column:141}},57:{start:{line:143,column:8},end:{line:160,column:9}},58:{start:{line:144,column:10},end:{line:146,column:13}},59:{start:{line:145,column:12},end:{line:145,column:94}},60:{start:{line:147,column:10},end:{line:147,column:25}},61:{start:{line:149,column:10},end:{line:158,column:13}},62:{start:{line:150,column:12},end:{line:157,column:15}},63:{start:{line:159,column:10},end:{line:159,column:25}},64:{start:{line:163,column:4},end:{line:163,column:28}},65:{start:{line:164,column:4},end:{line:172,column:7}},66:{start:{line:165,column:6},end:{line:171,column:9}},67:{start:{line:173,column:4},end:{line:178,column:7}},68:{start:{line:174,column:6},end:{line:174,column:40}},69:{start:{line:174,column:33},end:{line:174,column:40}},70:{start:{line:175,column:6},end:{line:177,column:9}},71:{start:{line:179,column:4},end:{line:181,column:7}},72:{start:{line:180,column:6},end:{line:180,column:30}},73:{start:{line:182,column:4},end:{line:186,column:7}},74:{start:{line:183,column:6},end:{line:185,column:9}},75:{start:{line:187,column:4},end:{line:187,column:37}},76:{start:{line:188,column:4},end:{line:188,column:37}},77:{start:{line:190,column:22},end:{line:193,column:3}},78:{start:{line:191,column:18},end:{line:191,column:82}},79:{start:{line:191,column:66},end:{line:191,column:81}},80:{start:{line:192,column:4},end:{line:192,column:36}},81:{start:{line:195,column:27},end:{line:228,column:5}},82:{start:{line:197,column:25},end:{line:197,column:27}},83:{start:{line:198,column:8},end:{line:223,column:9}},84:{start:{line:199,column:26},end:{line:199,column:138}},85:{start:{line:200,column:27},end:{line:200,column:47}},86:{start:{line:201,column:26},end:{line:201,column:47}},87:{start:{line:202,column:10},end:{line:220,column:11}},88:{start:{line:203,column:27},end:{line:206,column:13}},89:{start:{line:207,column:26},end:{line:218,column:13}},90:{start:{line:219,column:12},end:{line:219,column:33}},91:{start:{line:222,column:10},end:{line:222,column:69}},92:{start:{line:224,column:8},end:{line:226,column:10}},93:{start:{line:229,column:21},end:{line:232,column:6}},94:{start:{line:233,column:4},end:{line:233,column:41}},95:{start:{line:234,column:4},end:{line:234,column:20}},96:{start:{line:237,column:14},end:{line:237,column:26}},97:{start:{line:238,column:4},end:{line:238,column:53}},98:{start:{line:239,column:4},end:{line:239,column:49}},99:{start:{line:240,column:4},end:{line:251,column:6}},100:{start:{line:247,column:10},end:{line:247,column:29}},101:{start:{line:254,column:22},end:{line:254,column:62}}},fnMap:{0:{name:"buildInspectStyle",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:78},end:{line:45,column:1}},line:20},1:{name:"(anonymous_1)",decl:{start:{line:33,column:48},end:{line:33,column:49}},loc:{start:{line:33,column:62},end:{line:38,column:3}},line:33},2:{name:"(anonymous_2)",decl:{start:{line:48,column:17},end:{line:48,column:18}},loc:{start:{line:48,column:23},end:{line:49,column:5}},line:48},3:{name:"(anonymous_3)",decl:{start:{line:50,column:18},end:{line:50,column:19}},loc:{start:{line:50,column:24},end:{line:51,column:5}},line:50},4:{name:"(anonymous_4)",decl:{start:{line:52,column:19},end:{line:52,column:20}},loc:{start:{line:52,column:25},end:{line:53,column:5}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:54,column:14},end:{line:54,column:15}},loc:{start:{line:54,column:20},end:{line:55,column:5}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:21},end:{line:70,column:3}},line:59},7:{name:"(anonymous_7)",decl:{start:{line:67,column:34},end:{line:67,column:35}},loc:{start:{line:67,column:40},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:46},end:{line:78,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:79,column:2},end:{line:79,column:3}},loc:{start:{line:79,column:23},end:{line:97,column:3}},line:79},10:{name:"(anonymous_10)",decl:{start:{line:93,column:17},end:{line:93,column:18}},loc:{start:{line:93,column:23},end:{line:95,column:7}},line:93},11:{name:"(anonymous_11)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:22},end:{line:189,column:3}},line:98},12:{name:"(anonymous_12)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:32},end:{line:116,column:5}},line:112},13:{name:"(anonymous_13)",decl:{start:{line:138,column:24},end:{line:138,column:25}},loc:{start:{line:138,column:44},end:{line:140,column:7}},line:138},14:{name:"(anonymous_14)",decl:{start:{line:141,column:25},end:{line:141,column:26}},loc:{start:{line:141,column:62},end:{line:141,column:141}},line:141},15:{name:"(anonymous_15)",decl:{start:{line:142,column:19},end:{line:142,column:20}},loc:{start:{line:142,column:33},end:{line:161,column:7}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:144,column:36},end:{line:144,column:37}},loc:{start:{line:144,column:42},end:{line:146,column:11}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:149,column:36},end:{line:149,column:37}},loc:{start:{line:149,column:42},end:{line:158,column:11}},line:149},18:{name:"(anonymous_18)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:172,column:5}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:173,column:19},end:{line:173,column:20}},loc:{start:{line:173,column:26},end:{line:178,column:5}},line:173},20:{name:"(anonymous_20)",decl:{start:{line:179,column:20},end:{line:179,column:21}},loc:{start:{line:179,column:27},end:{line:181,column:5}},line:179},21:{name:"(anonymous_21)",decl:{start:{line:182,column:19},end:{line:182,column:20}},loc:{start:{line:182,column:27},end:{line:186,column:5}},line:182},22:{name:"(anonymous_22)",decl:{start:{line:190,column:22},end:{line:190,column:23}},loc:{start:{line:190,column:30},end:{line:193,column:3}},line:190},23:{name:"(anonymous_23)",decl:{start:{line:191,column:55},end:{line:191,column:56}},loc:{start:{line:191,column:66},end:{line:191,column:81}},line:191},24:{name:"(anonymous_24)",decl:{start:{line:194,column:2},end:{line:194,column:3}},loc:{start:{line:194,column:20},end:{line:235,column:3}},line:194},25:{name:"(anonymous_25)",decl:{start:{line:196,column:22},end:{line:196,column:23}},loc:{start:{line:196,column:40},end:{line:227,column:7}},line:196},26:{name:"(anonymous_26)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:252,column:3}},line:236},27:{name:"(anonymous_27)",decl:{start:{line:246,column:13},end:{line:246,column:14}},loc:{start:{line:246,column:20},end:{line:248,column:9}},line:246}},branchMap:{0:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},2:{loc:{start:{line:35,column:8},end:{line:35,column:64}},type:"binary-expr",locations:[{start:{line:35,column:8},end:{line:35,column:32}},{start:{line:35,column:36},end:{line:35,column:64}}],line:35},3:{loc:{start:{line:74,column:15},end:{line:74,column:131}},type:"binary-expr",locations:[{start:{line:74,column:15},end:{line:74,column:71}},{start:{line:74,column:75},end:{line:74,column:131}}],line:74},4:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},5:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},6:{loc:{start:{line:88,column:8},end:{line:88,column:98}},type:"binary-expr",locations:[{start:{line:88,column:8},end:{line:88,column:26}},{start:{line:88,column:30},end:{line:88,column:98}}],line:88},7:{loc:{start:{line:91,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},8:{loc:{start:{line:91,column:8},end:{line:91,column:59}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:59}}],line:91},9:{loc:{start:{line:143,column:8},end:{line:160,column:9}},type:"if",locations:[{start:{line:143,column:8},end:{line:160,column:9}},{start:{line:148,column:15},end:{line:160,column:9}}],line:143},10:{loc:{start:{line:174,column:6},end:{line:174,column:40}},type:"if",locations:[{start:{line:174,column:6},end:{line:174,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:174}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA8LwB;AA9LxB,OAAO,WAAW;AAClB,SAAQ,kBAAiB;AACzB,OAAO,gBAAsI;AAC7I,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAAgE;AACvE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAAgC,6BAA6B;AAC7D,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAAoF;AAC3F,OAAO;AACP,SAAS,uBAA6C;AACtD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAM,OAAO,WAAW,OAAO;AAE/B,UAAM,eAAe,IAAI,WAAW,MAAM;AAAA,MACxC,cAAc;AAAA,IAChB,CAAC;AAED,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO;AAAA,MACP,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO,oBAAC,qCAAkC,UAAoB,CAAE;AAAA,UACvE,CAAC;AACD,iBAAO;AAAA,QACT,OAAO;AACL,uBAAa,KAAK,QAAQ,MAAM;AAC9B,iBAAK,OAAO;AAAA,cAAC;AAAA;AAAA,gBACX;AAAA,gBACA,eAAe,KAAK;AAAA,gBACpB,MAAM,KAAK,MAAM;AAAA;AAAA,YACnB,CAAG;AAAA,UACL,CAAC;AACD,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK;AAAC,eAAK,YAAY;AAAA,QAAE;AAAA,QAC9B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1655c5d10102378b1e2627d777374c6f3c3f21a7"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return bn=function(){return l},l}bn();function GZ(n,e,t){bn().f[0]++;const i=(bn().s[0]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),r=(bn().s[1]++,_Z(t));bn().s[2]++,r?(bn().b[0][0]++,bn().s[3]++,e.push(r)):bn().b[0][1]++;const a=(bn().s[4]++,{});bn().s[5]++,Object.keys(n.sources).forEach(o=>{bn().f[1]++;const p=(bn().s[6]++,n.sources[o]);bn().s[7]++,bn().b[2][0]++,p.type!=="raster"&&(bn().b[2][1]++,p.type!=="raster-dem")?(bn().b[1][0]++,bn().s[8]++,a[o]=p):bn().b[1][1]++});const l=(bn().s[9]++,{...n,sources:a,layers:[i].concat(e)});return bn().s[10]++,l}class WZ extends ni.Component{static defaultProps=(bn().s[11]++,{onMapLoaded:()=>{bn().f[2]++},onDataChange:()=>{bn().f[3]++},onLayerSelect:()=>{bn().f[4]++},onChange:()=>{bn().f[5]++},options:{}});container=(bn().s[12]++,null);constructor(e){bn().f[6]++,bn().s[13]++,super(e),bn().s[14]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},bn().s[15]++,mh.on("languageChanged",()=>{bn().f[7]++,bn().s[16]++,this.forceUpdate()})}shouldComponentUpdate(e,t){bn().f[8]++;let i=(bn().s[17]++,!1);bn().s[18]++;try{bn().s[19]++,i=(bn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(e)||(bn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(t)))}catch{}return bn().s[20]++,i}componentDidUpdate(){bn().f[9]++;const e=(bn().s[21]++,this.state.map),t=(bn().s[22]++,this.props.replaceAccessTokens(this.props.mapStyle));bn().s[23]++,e?(bn().b[4][0]++,bn().s[24]++,e.setStyle(t,{diff:!0}),bn().s[25]++,e.showTileBoundaries=this.props.options?.showTileBoundaries,bn().s[26]++,e.showCollisionBoxes=this.props.options?.showCollisionBoxes,bn().s[27]++,e.showOverdrawInspector=this.props.options?.showOverdrawInspector):bn().b[4][1]++,bn().s[28]++,bn().b[6][0]++,this.state.inspect&&(bn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(bn().b[5][0]++,bn().s[29]++,this.state.inspect.toggleInspector()):bn().b[5][1]++,bn().s[30]++,bn().b[8][0]++,this.state.inspect&&(bn().b[8][1]++,this.props.inspectModeEnabled)?(bn().b[7][0]++,bn().s[31]++,this.state.inspect.setOriginalStyle(t),bn().s[32]++,setTimeout(()=>{bn().f[10]++,bn().s[33]++,this.state.inspect.render()},500)):bn().b[7][1]++}componentDidMount(){bn().f[11]++;const e=(bn().s[34]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),t=(bn().s[35]++,new lY({metadata:!0}));bn().s[36]++,ov.addProtocol("pmtiles",t.tile);const i=(bn().s[37]++,new ov.Map(e));bn().s[38]++;const r=()=>{bn().f[12]++;const U=(bn().s[39]++,i.getCenter()),K=(bn().s[40]++,i.getZoom());bn().s[41]++,this.props.onChange({center:U,zoom:K})};bn().s[42]++,r(),bn().s[43]++,i.showTileBoundaries=e.showTileBoundaries,bn().s[44]++,i.showCollisionBoxes=e.showCollisionBoxes,bn().s[45]++,i.showOverdrawInspector=e.showOverdrawInspector;const a=(bn().s[46]++,this.initGeocoder(i)),l=(bn().s[47]++,new yZ);bn().s[48]++,i.addControl(l,"top-right");const o=(bn().s[49]++,new ov.NavigationControl({visualizePitch:!0}));bn().s[50]++,i.addControl(o,"top-right");const p=(bn().s[51]++,document.createElement("div")),C=(bn().s[52]++,RU.createRoot(p)),w=(bn().s[53]++,new ov.Popup({closeOnClick:!1})),O=(bn().s[54]++,new oO({popup:w,showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(U,K)=>(bn().f[13]++,bn().s[55]++,ec(tF.brightColor(U,K)).desaturate(.5).string()),buildInspectStyle:(U,K)=>(bn().f[14]++,bn().s[56]++,GZ(U,K,this.props.highlightedLayer)),renderPopup:U=>(bn().f[15]++,bn().s[57]++,this.props.inspectModeEnabled?(bn().b[9][0]++,bn().s[58]++,w.once("open",()=>{bn().f[16]++,bn().s[59]++,C.render(Ae.jsx(oZ,{features:U}))}),bn().s[60]++,p):(bn().b[9][1]++,bn().s[61]++,w.once("open",()=>{bn().f[17]++,bn().s[62]++,C.render(Ae.jsx(aF,{features:U,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}))}),bn().s[63]++,p))}));bn().s[64]++,i.addControl(O),bn().s[65]++,i.on("style.load",()=>{bn().f[18]++,bn().s[66]++,this.setState({map:i,inspect:O,geocoder:a,zoomControl:l,zoom:i.getZoom()})}),bn().s[67]++,i.on("data",U=>{if(bn().f[19]++,bn().s[68]++,U.dataType!=="tile"){bn().b[10][0]++,bn().s[69]++;return}else bn().b[10][1]++;bn().s[70]++,this.props.onDataChange({map:this.state.map})}),bn().s[71]++,i.on("error",U=>{bn().f[20]++,bn().s[72]++,console.log("ERROR",U)}),bn().s[73]++,i.on("zoom",U=>{bn().f[21]++,bn().s[74]++,this.setState({zoom:i.getZoom()})}),bn().s[75]++,i.on("dragend",r),bn().s[76]++,i.on("zoomend",r)}onLayerSelectById=(bn().s[77]++,e=>{bn().f[22]++;const t=(bn().s[78]++,this.props.mapStyle.layers.findIndex(i=>(bn().f[23]++,bn().s[79]++,i.id===e)));bn().s[80]++,this.props.onLayerSelect(t)});initGeocoder(e){bn().f[24]++;const t=(bn().s[81]++,{forwardGeocode:async r=>{bn().f[25]++;const a=(bn().s[82]++,[]);bn().s[83]++;try{const l=(bn().s[84]++,`https://nominatim.openstreetmap.org/search?q=${r.query}&format=geojson&polygon_geojson=1&addressdetails=1`),o=(bn().s[85]++,await fetch(l)),p=(bn().s[86]++,await o.json());bn().s[87]++;for(const C of p.features){const w=(bn().s[88]++,[C.bbox[0]+(C.bbox[2]-C.bbox[0])/2,C.bbox[1]+(C.bbox[3]-C.bbox[1])/2]),O=(bn().s[89]++,{type:"Feature",geometry:{type:"Point",coordinates:w},place_name:C.properties.display_name,properties:C.properties,text:C.properties.display_name,place_type:["place"],center:w});bn().s[90]++,a.push(O)}}catch(l){bn().s[91]++,console.error(`Failed to forwardGeocode with error: ${l}`)}return bn().s[92]++,{features:a}}}),i=(bn().s[93]++,new NZ(t,{placeholder:this.props.t("Search"),maplibregl:ov}));return bn().s[94]++,e.addControl(i,"top-left"),bn().s[95]++,i}render(){bn().f[26]++;const e=(bn().s[96]++,this.props.t);return bn().s[97]++,this.state.geocoder?.setPlaceholder(e("Search")),bn().s[98]++,this.state.zoomControl?.setLabel(e("Zoom:")),bn().s[99]++,Ae.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":e("Map view"),ref:t=>{bn().f[27]++,bn().s[100]++,this.container=t},"data-wd-key":"maplibre:map"})}}const QZ=(bn().s[101]++,ls()(WZ));var NI={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},yC=" ",GI=/(italic|oblique)$/i,WI={};function R6(n,e,t){var i=WI[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,a="normal",l=[],o,p,C=0,w=n.length;C<w;++C){var O=n[C],U=O.split(" "),K=U[U.length-1].toLowerCase();K=="normal"||K=="italic"||K=="oblique"?(a=p?a:K,p=!0,U.pop(),K=U[U.length-1].toLowerCase()):GI.test(K)&&(K=K.replace(GI,""),a=p?a:U[U.length-1].replace(K,""),p=!0);for(var j in NI){var W=U.length>1?U[U.length-2].toLowerCase():"";if(K==j||K==j.replace("-","")||W+"-"+K==j){r=o?r:NI[j],U.pop(),W&&j.startsWith(W)&&U.pop();break}}!o&&typeof K=="number"&&(r=K,o=!0);var Y=U.join(yC).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");Y.indexOf(yC)!==-1&&(Y='"'+Y+'"'),l.push(Y)}i=WI[n]=[a,r,l]}return i[0]+yC+i[1]+yC+e+"px"+(t?"/"+t:"")+yC+i[2]}const Nd={ADD:"add",REMOVE:"remove"},Tv={PROPERTYCHANGE:"propertychange"},fo={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class sb{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function YZ(n,e,t){let i,r;t=t||$m;let a=0,l=n.length,o=!1;for(;a<l;)i=a+(l-a>>1),r=+t(n[i],e),r<0?a=i+1:(l=i,o=!r);return o?a:~a}function $m(n,e){return n>e?1:n<e?-1:0}function qZ(n,e){return n<e?1:n>e?-1:0}function t2(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const a=n[r];if(a===e)return r;if(a<e)return t(e,n[r-1],a)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function HZ(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Zm(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function zg(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function VZ(n,e,t){const i=e||$m;return n.every(function(r,a){if(a===0)return!0;const l=i(n[a-1],r);return!(l>0||l===0)})}function x_(){return!0}function n2(){return!1}function M_(){}function cF(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!zg(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function kv(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function lb(n){for(const e in n)delete n[e]}function Lg(n){let e;for(e in n)return!1;return!e}class um{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class ub extends sb{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const a=t?new um(e):e;a.target||(a.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});i in l||(l[i]=0,o[i]=0),++l[i];let p;for(let C=0,w=r.length;C<w;++C)if("handleEvent"in r[C]?p=r[C].handleEvent(a):p=r[C].call(this,a),p===!1||a.propagationStopped){p=!1;break}if(--l[i]===0){let C=o[i];for(delete o[i];C--;)this.removeEventListener(i,M_);delete l[i]}return p}disposeInternal(){this.listeners_&&lb(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=M_,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}function Za(n,e,t,i,r){if(r){const l=t;t=function(o){return n.removeEventListener(e,t),l.call(i??this,o)}}else i&&i!==n&&(t=t.bind(i));const a={target:n,type:e,listener:t};return n.addEventListener(e,t),a}function $x(n,e,t,i){return Za(n,e,t,i,!0)}function Bl(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),lb(n))}class Ab extends ub{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(fo.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=Za(this,e[a],t);return r}return Za(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let a=0;a<r;++a)i[a]=$x(this,e[a],t)}else i=$x(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)$Z(i);else if(Array.isArray(e))for(let r=0,a=e.length;r<a;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}Ab.prototype.on;Ab.prototype.once;Ab.prototype.un;function $Z(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Bl(n[e]);else Bl(n)}function vo(){throw new Error("Unimplemented abstract method.")}let ZZ=0;function Io(n){return n.ol_uid||(n.ol_uid=String(++ZZ))}class QI extends um{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Am extends Ab{constructor(e){super(),this.on,this.once,this.un,Io(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new QI(i,e,t)),i=Tv.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new QI(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const a=r[e];r[e]=t,a!==t&&this.notify(e,a)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Lg(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const YI={LENGTH:"length"};class Nb extends um{constructor(e,t,i){super(e),this.element=t,this.index=i}}class Gm extends Am{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(YI.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Nb(Nd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Nb(Nd.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Nb(Nd.REMOVE,r,e)),this.dispatchEvent(new Nb(Nd.ADD,t,e))}updateLength_(){this.set(YI.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}class av extends um{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class pg extends av{constructor(e,t,i,r,a,l){super(e,t,a),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const sA={SINGLECLICK:"singleclick",CLICK:fo.CLICK,DBLCLICK:fo.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},W1=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",XZ=W1.includes("safari")&&!W1.includes("chrom");XZ&&(W1.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(W1));const JZ=W1.includes("webkit")&&!W1.includes("edge"),hF=W1.includes("macintosh"),eX=typeof devicePixelRatio<"u"?devicePixelRatio:1,sO=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,dF=typeof Image<"u"&&Image.prototype.decode,tX=typeof createImageBitmap=="function",fF=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}(),P6={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class nX extends ub{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Za(i,P6.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Za(i,P6.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(fo.TOUCHMOVE,this.boundHandleTouchMove_,fF?{passive:!1}:!1)}emulateClick_(e){let t=new pg(sA.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new pg(sA.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new pg(sA.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==sA.POINTERUP||t.type==sA.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==sA.POINTERDOWN||t.type==sA.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new pg(sA.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Bl),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new pg(sA.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Za(i,sA.POINTERMOVE,this.handlePointerMove_,this),Za(i,sA.POINTERUP,this.handlePointerUp_,this),Za(this.element_,sA.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Za(this.element_.getRootNode(),sA.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new pg(sA.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new pg(sA.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Bl(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(fo.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Bl(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Bl),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const O0={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Uh={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Pi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ws(n,e){if(!n)throw new Error(e)}const Zx=1/0;class iX{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,lb(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){ws(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Zx?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,a=t[e],l=i[e],o=e;for(;e<r>>1;){const p=this.getLeftChildIndex_(e),C=this.getRightChildIndex_(e),w=C<r&&i[C]<i[p]?C:p;t[e]=t[w],i[e]=i[w],e=w}t[e]=a,i[e]=l,this.siftDown_(o,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,a=i[t],l=r[t];for(;t>e;){const o=this.getParentIndex_(t);if(r[o]>l)i[t]=i[o],r[t]=r[o],t=o;else break}i[t]=a,r[t]=l}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const a=t.length;let l,o,p;for(o=0;o<a;++o)l=t[o],p=e(l),p==Zx?delete this.queuedElements_[this.keyFunction_(l)]:(i[r]=p,t[r++]=l);t.length=r,i.length=r,this.heapify_()}}class pF extends iX{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(fo.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===Pi.LOADED||i===Pi.ERROR||i===Pi.EMPTY){i!==Pi.ERROR&&t.removeEventListener(fo.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],a=r.getKey();r.getState()===Pi.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++i,r.load())}}}function rX(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Zx;const a=n.viewState.center,l=i[0]-a[0],o=i[1]-a[1];return 65536*Math.log(r)+Math.sqrt(l*l+o*o)/r}const vu={ANIMATING:0,INTERACTING:1},Qp={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Nu(n,e,t){return Math.min(Math.max(n,e),t)}function oX(n,e,t,i,r,a){const l=r-t,o=a-i;if(l!==0||o!==0){const p=((n-t)*l+(e-i)*o)/(l*l+o*o);p>1?(t=r,i=a):p>0&&(t+=l*p,i+=o*p)}return U1(n,e,t,i)}function U1(n,e,t,i){const r=t-n,a=i-e;return r*r+a*a}function aX(n){const e=n.length;for(let i=0;i<e;i++){let r=i,a=Math.abs(n[i][i]);for(let o=i+1;o<e;o++){const p=Math.abs(n[o][i]);p>a&&(a=p,r=o)}if(a===0)return null;const l=n[r];n[r]=n[i],n[i]=l;for(let o=i+1;o<e;o++){const p=-n[o][i]/n[i][i];for(let C=i;C<e+1;C++)i==C?n[o][C]=0:n[o][C]+=p*n[i][C]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function qI(n){return n*180/Math.PI}function Dg(n){return n*Math.PI/180}function L1(n,e){const t=n%e;return t*e<0?t+e:t}function vf(n,e,t){return n+t*(e-n)}function i2(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Gb(n,e){return Math.floor(i2(n,e))}function Mg(n,e){return Math.ceil(i2(n,e))}function K6(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function HI(n,e,t){return function(i,r,a,l,o){if(!i)return;if(!r&&!e)return i;const p=e?0:a[0]*r,C=e?0:a[1]*r,w=o?o[0]:0,O=o?o[1]:0;let U=n[0]+p/2+w,K=n[2]-p/2+w,j=n[1]+C/2+O,W=n[3]-C/2+O;U>K&&(U=(K+U)/2,K=U),j>W&&(j=(W+j)/2,W=j);let Y=Nu(i[0],U,K),te=Nu(i[1],j,W);if(l&&t&&r){const J=30*r;Y+=-J*Math.log(1+Math.max(0,U-i[0])/J)+J*Math.log(1+Math.max(0,i[0]-K)/J),te+=-J*Math.log(1+Math.max(0,j-i[1])/J)+J*Math.log(1+Math.max(0,i[1]-W)/J)}return[Y,te]}}function sX(n){return n}const Gc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function U6(n){const e=bp();for(let t=0,i=n.length;t<i;++t)t_(e,n[t]);return e}function lX(n,e,t){const i=Math.min.apply(null,n),r=Math.min.apply(null,e),a=Math.max.apply(null,n),l=Math.max.apply(null,e);return K0(i,r,a,l,t)}function Rg(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function mF(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function $1(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Q1(n,e){return lO(n,e[0],e[1])}function Wm(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function lO(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function L6(n,e){const t=n[0],i=n[1],r=n[2],a=n[3],l=e[0],o=e[1];let p=Gc.UNKNOWN;return l<t?p=p|Gc.LEFT:l>r&&(p=p|Gc.RIGHT),o<i?p=p|Gc.BELOW:o>a&&(p=p|Gc.ABOVE),p===Gc.UNKNOWN&&(p=Gc.INTERSECTING),p}function bp(){return[1/0,1/0,-1/0,-1/0]}function K0(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function qv(n){return K0(1/0,1/0,-1/0,-1/0,n)}function gF(n,e){const t=n[0],i=n[1];return K0(t,i,t,i,e)}function uO(n,e,t,i,r){const a=qv(r);return vF(a,n,e,t,i)}function U0(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function yF(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function t_(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function vF(n,e,t,i,r){for(;t<i;t+=r)uX(n,e[t],e[t+1]);return n}function uX(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function CF(n,e){let t;return t=e(r2(n)),t||(t=e(o2(n)),t)||(t=e(a2(n)),t)||(t=e(j0(n)),t)?t:!1}function F6(n){let e=0;return Z1(n)||(e=ss(n)*ic(n)),e}function r2(n){return[n[0],n[1]]}function o2(n){return[n[2],n[1]]}function Bf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function AX(n,e){let t;if(e==="bottom-left")t=r2(n);else if(e==="bottom-right")t=o2(n);else if(e==="top-left")t=j0(n);else if(e==="top-right")t=a2(n);else throw new Error("Invalid corner");return t}function Xx(n,e,t,i,r){const[a,l,o,p,C,w,O,U]=_F(n,e,t,i);return K0(Math.min(a,o,C,O),Math.min(l,p,w,U),Math.max(a,o,C,O),Math.max(l,p,w,U),r)}function _F(n,e,t,i){const r=e*i[0]/2,a=e*i[1]/2,l=Math.cos(t),o=Math.sin(t),p=r*l,C=r*o,w=a*l,O=a*o,U=n[0],K=n[1];return[U-p+O,K-C-w,U-p-O,K-C+w,U+p-O,K+C+w,U+p+O,K+C-w,U-p+O,K-C-w]}function ic(n){return n[3]-n[1]}function im(n,e,t){const i=t||bp();return uA(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):qv(i),i}function j0(n){return[n[0],n[3]]}function a2(n){return[n[2],n[3]]}function ss(n){return n[2]-n[0]}function uA(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Z1(n){return n[2]<n[0]||n[3]<n[1]}function cX(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function hX(n,e,t){let i=!1;const r=L6(n,e),a=L6(n,t);if(r===Gc.INTERSECTING||a===Gc.INTERSECTING)i=!0;else{const l=n[0],o=n[1],p=n[2],C=n[3],w=e[0],O=e[1],U=t[0],K=t[1],j=(K-O)/(U-w);let W,Y;a&Gc.ABOVE&&!(r&Gc.ABOVE)&&(W=U-(K-C)/j,i=W>=l&&W<=p),!i&&a&Gc.RIGHT&&!(r&Gc.RIGHT)&&(Y=K-(U-p)*j,i=Y>=o&&Y<=C),!i&&a&Gc.BELOW&&!(r&Gc.BELOW)&&(W=U-(K-o)/j,i=W>=l&&W<=p),!i&&a&Gc.LEFT&&!(r&Gc.LEFT)&&(Y=K-(U-l)*j,i=Y>=o&&Y<=C)}return i}function dX(n,e,t,i){if(Z1(n))return qv(t);let r=[];r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(r,r,2);const a=[],l=[];for(let o=0,p=r.length;o<p;o+=2)a.push(r[o]),l.push(r[o+1]);return lX(a,l,t)}function bF(n,e){const t=e.getExtent(),i=Bf(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=ss(t),l=Math.floor((i[0]-t[0])/r)*r;n[0]-=l,n[2]-=l}return n}function xF(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];bF(n,e);const r=ss(i);if(ss(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function fX(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Jx(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function AO(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,a=n[1]*t+n[0]*i;return n[0]=r,n[1]=a,n}function pX(n,e){return n[0]*=e,n[1]*=e,n}function mX(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function gX(n,e){return Math.sqrt(mX(n,e))}function cO(n,e){if(e.canWrapX()){const t=ss(e.getExtent()),i=yX(n,e,t);i&&(n[0]-=i*t)}return n}function yX(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||ss(i),r=Math.floor((n[0]-i[0])/t)),r}function MF(n){return Math.pow(n,3)}function Hv(n){return 1-MF(1-n)}function vX(n){return 3*n*n-2*n*n*n}function CX(n){return n}const _X=63710088e-1;function VI(n,e,t){t=t||_X;const i=Dg(n[1]),r=Dg(e[1]),a=(r-i)/2,l=Dg(e[0]-n[0])/2,o=Math.sin(a)*Math.sin(a)+Math.sin(l)*Math.sin(l)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function wF(...n){console.warn(...n)}const Fg={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class s2{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Fg[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const cb=6378137,cv=Math.PI*cb,bX=[-cv,-cv,cv,cv],xX=[-180,-85,180,85],Wb=cb*Math.log(Math.tan(Math.PI/2));class Oy extends s2{constructor(e){super({code:e,units:"m",extent:bX,global:!0,worldExtent:xX,getPointResolution:function(t,i){return t/Math.cosh(i[1]/cb)}})}}const $I=[new Oy("EPSG:3857"),new Oy("EPSG:102100"),new Oy("EPSG:102113"),new Oy("EPSG:900913"),new Oy("http://www.opengis.net/def/crs/EPSG/0/3857"),new Oy("http://www.opengis.net/gml/srs/epsg.xml#3857")];function MX(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let a=0;a<r;a+=i){e[a]=cv*n[a]/180;let l=cb*Math.log(Math.tan(Math.PI*(+n[a+1]+90)/360));l>Wb?l=Wb:l<-Wb&&(l=-Wb),e[a+1]=l}return e}function wX(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let a=0;a<r;a+=i)e[a]=180*n[a]/cv,e[a+1]=360*Math.atan(Math.exp(n[a+1]/cb))/Math.PI-90;return e}const SX=6378137,ZI=[-180,-90,180,90],EX=Math.PI*SX/180;class p1 extends s2{constructor(e,t){super({code:e,units:"degrees",extent:ZI,axisOrientation:t,global:!0,metersPerUnit:EX,worldExtent:ZI})}}const XI=[new p1("CRS:84"),new p1("EPSG:4326","neu"),new p1("urn:ogc:def:crs:OGC:1.3:CRS84"),new p1("urn:ogc:def:crs:OGC:2:84"),new p1("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new p1("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new p1("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let z6={};function BX(n){return z6[n]||z6[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function OX(n,e){z6[n]=e}let yv={};function w_(n,e,t){const i=n.getCode(),r=e.getCode();i in yv||(yv[i]={}),yv[i][r]=t}function U4(n,e){return n in yv&&e in yv[n]?yv[n][e]:null}const e3=.9996,_p=.00669438,l2=_p*_p,u2=l2*_p,B1=_p/(1-_p),JI=Math.sqrt(1-_p),Dv=(1-JI)/(1+JI),SF=Dv*Dv,hO=SF*Dv,dO=hO*Dv,EF=dO*Dv,BF=1-_p/4-3*l2/64-5*u2/256,IX=3*_p/8+3*l2/32+45*u2/1024,TX=15*l2/256+45*u2/1024,kX=35*u2/3072,DX=3/2*Dv-27/32*hO+269/512*EF,RX=21/16*SF-55/32*dO,PX=151/96*hO-417/128*EF,KX=1097/512*dO,t3=6378137;function UX(n,e,t){const i=n-5e5,l=(t.north?e:e-1e7)/e3/(t3*BF),o=l+DX*Math.sin(2*l)+RX*Math.sin(4*l)+PX*Math.sin(6*l)+KX*Math.sin(8*l),p=Math.sin(o),C=p*p,w=Math.cos(o),O=p/w,U=O*O,K=U*U,j=1-_p*C,W=Math.sqrt(1-_p*C),Y=t3/W,te=(1-_p)/j,J=B1*w**2,oe=J*J,ne=i/(Y*e3),$=ne*ne,ae=$*ne,G=ae*ne,ce=G*ne,ge=ce*ne,ye=o-O/te*($/2-G/24*(5+3*U+10*J-4*oe-9*B1))+ge/720*(61+90*U+298*J+45*K-252*B1-3*oe);let we=(ne-ae/6*(1+2*U+J)+ce/120*(5-2*J+28*U-3*oe+8*B1+24*K))/w;return we=K6(we+Dg(OF(t.number)),-Math.PI,Math.PI),[qI(we),qI(ye)]}const e9=-80,t9=84,LX=-180,FX=180;function zX(n,e,t){n=K6(n,LX,FX),e<e9?e=e9:e>t9&&(e=t9);const i=Dg(e),r=Math.sin(i),a=Math.cos(i),l=r/a,o=l*l,p=o*o,C=Dg(n),w=OF(t.number),O=Dg(w),U=t3/Math.sqrt(1-_p*r**2),K=B1*a**2,j=a*K6(C-O,-Math.PI,Math.PI),W=j*j,Y=W*j,te=Y*j,J=te*j,oe=J*j,ne=t3*(BF*i-IX*Math.sin(2*i)+TX*Math.sin(4*i)-kX*Math.sin(6*i)),$=e3*U*(j+Y/6*(1-o+K)+J/120*(5-18*o+p+72*K-58*B1))+5e5;let ae=e3*(ne+U*l*(W/2+te/24*(5-o+9*K+4*K**2)+oe/720*(61-58*o+p+600*K-330*B1)));return t.north||(ae+=1e7),[$,ae]}function OF(n){return(n-1)*6-180+3}const jX=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function IF(n){let e=0;for(const r of jX){const a=n.match(r);if(a){e=parseInt(a[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function n9(n,e){return function(t,i,r,a){const l=t.length;r=r>1?r:2,a=a??r,i||(r>2?i=t.slice():i=new Array(l));for(let o=0;o<l;o+=a){const p=t[o],C=t[o+1],w=n(p,C,e);i[o]=w[0],i[o+1]=w[1]}return i}}function NX(n){return IF(n)?new s2({code:n,units:"m"}):null}function GX(n){const e=IF(n.getCode());return e?{forward:n9(zX,e),inverse:n9(UX,e)}:null}const WX=[GX],QX=[NX];let j6=!0;function TF(n){j6=!1}function fO(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function N6(n){OX(n.getCode(),n),w_(n,n,fO)}function YX(n){n.forEach(N6)}function Qs(n){if(typeof n!="string")return n;const e=BX(n);if(e)return e;for(const t of QX){const i=t(n);if(i)return i}return null}function G6(n,e,t,i){n=Qs(n);let r;const a=n.getPointResolutionFunc();if(a){if(r=a(e,t),i&&i!==n.getUnits()){const l=n.getMetersPerUnit();l&&(r=r*l/Fg[i])}}else{const l=n.getUnits();if(l=="degrees"&&!i||i=="degrees")r=e;else{const o=hb(n,Qs("EPSG:4326"));if(!o&&l!=="degrees")r=e*n.getMetersPerUnit();else{let C=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];C=o(C,C,2);const w=VI(C.slice(0,2),C.slice(2,4)),O=VI(C.slice(4,6),C.slice(6,8));r=(w+O)/2}const p=i?Fg[i]:n.getMetersPerUnit();p!==void 0&&(r/=p)}}return r}function i9(n){YX(n),n.forEach(function(e){n.forEach(function(t){e!==t&&w_(e,t,fO)})})}function qX(n,e,t,i){n.forEach(function(r){e.forEach(function(a){w_(r,a,t),w_(a,r,i)})})}function pO(n,e){return n?typeof n=="string"?Qs(n):n:Qs(e)}function HX(n){return function(e,t,i,r){const a=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(a);for(let l=0;l<a;l+=r){const o=n(e.slice(l,l+i)),p=o.length;for(let C=0,w=r;C<w;++C)t[l+C]=C>=p?e[l+C]:o[C]}return t}}function W6(n,e){return TF(),A2(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function L4(n,e){const t=A2(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=L1(i+180,360)-180),t}function Pg(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||hb(n,e)===fO)&&t}function hb(n,e){const t=n.getCode(),i=e.getCode();let r=U4(t,i);if(r)return r;let a=null,l=null;for(const p of WX)a||(a=p(n)),l||(l=p(e));if(!a&&!l)return null;const o="EPSG:4326";if(l)if(a)r=F4(a.inverse,l.forward);else{const p=U4(t,o);p&&(r=F4(p,l.forward))}else{const p=U4(o,i);p&&(r=F4(a.inverse,p))}return r&&(N6(n),N6(e),w_(n,e,r)),r}function F4(n,e){return function(t,i,r,a){return i=n(t,i,r,a),e(i,i,r,a)}}function S_(n,e){const t=Qs(n),i=Qs(e);return hb(t,i)}function A2(n,e,t){const i=S_(e,t);if(!i){const r=Qs(e).getCode(),a=Qs(t).getCode();throw new Error(`No transform available between ${r} and ${a}`)}return i(n,void 0,n.length)}let VX=null;function $X(){return VX}function Q6(n,e){return n}function B0(n,e){return j6&&!Jx(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(j6=!1,wF("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function mO(n,e){return n}function Qm(n,e){return n}function ZX(){i9($I),i9(XI),qX(XI,$I,MX,wX)}ZX();const kF=new Array(6);function Yd(){return[1,0,0,1,0,0]}function r9(n){return yO(n,1,0,0,1,0,0)}function gO(n,e){const t=n[0],i=n[1],r=n[2],a=n[3],l=n[4],o=n[5],p=e[0],C=e[1],w=e[2],O=e[3],U=e[4],K=e[5];return n[0]=t*p+r*C,n[1]=i*p+a*C,n[2]=t*w+r*O,n[3]=i*w+a*O,n[4]=t*U+r*K+l,n[5]=i*U+a*K+o,n}function yO(n,e,t,i,r,a,l){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=a,n[5]=l,n}function XX(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function tc(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function z4(n,e,t){return gO(n,yO(kF,e,0,0,t,0,0))}function JX(n,e,t){return gO(n,yO(kF,1,0,0,1,e,t))}function Jm(n,e,t,i,r,a,l,o){const p=Math.sin(a),C=Math.cos(a);return n[0]=i*C,n[1]=r*p,n[2]=-i*p,n[3]=r*C,n[4]=l*i*C-o*i*p+e,n[5]=l*r*p+o*r*C+t,n}function DF(n,e){const t=eJ(e);ws(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],a=e[2],l=e[3],o=e[4],p=e[5];return n[0]=l/t,n[1]=-r/t,n[2]=-a/t,n[3]=i/t,n[4]=(a*p-l*o)/t,n[5]=-(i*p-r*o)/t,n}function eJ(n){return n[0]*n[3]-n[1]*n[2]}const tJ=[1e5,1e5,1e5,1e5,2,2];function nJ(n){return"matrix("+n.join(", ")+")"}function o9(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function iJ(n,e){const t=o9(n),i=o9(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*tJ[r])!==0)return!1;return!0}function Kg(n,e,t,i,r,a,l){a=a||[],l=l||2;let o=0;for(let p=e;p<t;p+=i){const C=n[p],w=n[p+1];a[o++]=r[0]*C+r[2]*w+r[4],a[o++]=r[1]*C+r[3]*w+r[5];for(let O=2;O<l;O++)a[o++]=n[p+O]}return a&&a.length!=o&&(a.length=o),a}function RF(n,e,t,i,r,a,l){l=l||[];const o=Math.cos(r),p=Math.sin(r),C=a[0],w=a[1];let O=0;for(let U=e;U<t;U+=i){const K=n[U]-C,j=n[U+1]-w;l[O++]=C+K*o-j*p,l[O++]=w+K*p+j*o;for(let W=U+2;W<U+i;++W)l[O++]=n[W]}return l&&l.length!=O&&(l.length=O),l}function rJ(n,e,t,i,r,a,l,o){o=o||[];const p=l[0],C=l[1];let w=0;for(let O=e;O<t;O+=i){const U=n[O]-p,K=n[O+1]-C;o[w++]=p+r*U,o[w++]=C+a*K;for(let j=O+2;j<O+i;++j)o[w++]=n[j]}return o&&o.length!=w&&(o.length=w),o}function oJ(n,e,t,i,r,a,l){l=l||[];let o=0;for(let p=e;p<t;p+=i){l[o++]=n[p]+r,l[o++]=n[p+1]+a;for(let C=p+2;C<p+i;++C)l[o++]=n[C]}return l&&l.length!=o&&(l.length=o),l}const a9=Yd(),aJ=[NaN,NaN];class PF extends Am{constructor(){super(),this.extent_=bp(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=cF((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return vo()}closestPointXY(e,t,i,r){return vo()}containsXY(e,t){return this.closestPointXY(e,t,aJ,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return vo()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&qv(t),this.extentRevision_=this.getRevision()}return cX(this.extent_,e)}rotate(e,t){vo()}scale(e,t,i){vo()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return vo()}getType(){return vo()}applyTransform(e){vo()}intersectsExtent(e){return vo()}translate(e,t){vo()}transform(e,t){const i=Qs(e),r=i.getUnits()=="tile-pixels"?function(a,l,o){const p=i.getExtent(),C=i.getWorldExtent(),w=ic(C)/ic(p);Jm(a9,C[0],C[3],w,-w,0,0,0);const O=Kg(a,0,a.length,o,a9,l),U=S_(i,t);return U?U(O,O,o):O}:S_(i,t);return this.applyTransform(r),this}}class X1 extends PF{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return uO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return vo()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=s9(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){vo()}setLayout(e,t,i){let r;if(e)r=s9(e);else{for(let a=0;a<i;++a){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=J1(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();RF(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Bf(this.getExtent()));const r=this.getFlatCoordinates();if(r){const a=this.getStride();rJ(r,0,r.length,a,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();oJ(i,0,i.length,r,e,t,i),this.changed()}}}function J1(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function s9(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function sJ(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return Kg(i,0,i.length,r,e,t)}function KF(n,e,t,i){let r=0;const a=n[t-i],l=n[t-i+1];let o=0,p=0;for(;e<t;e+=i){const C=n[e]-a,w=n[e+1]-l;r+=p*C-o*w,o=C,p=w}return r/2}function UF(n,e,t,i){let r=0;for(let a=0,l=t.length;a<l;++a){const o=t[a];r+=KF(n,e,o,i),e=o}return r}function lJ(n,e,t,i){let r=0;for(let a=0,l=t.length;a<l;++a){const o=t[a];r+=UF(n,e,o,i),e=o[o.length-1]}return r}function l9(n,e,t,i,r,a,l){const o=n[e],p=n[e+1],C=n[t]-o,w=n[t+1]-p;let O;if(C===0&&w===0)O=e;else{const U=((r-o)*C+(a-p)*w)/(C*C+w*w);if(U>1)O=t;else if(U>0){for(let K=0;K<i;++K)l[K]=vf(n[e+K],n[t+K],U);l.length=i;return}else O=e}for(let U=0;U<i;++U)l[U]=n[O+U];l.length=i}function vO(n,e,t,i,r){let a=n[e],l=n[e+1];for(e+=i;e<t;e+=i){const o=n[e],p=n[e+1],C=U1(a,l,o,p);C>r&&(r=C),a=o,l=p}return r}function CO(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a){const o=t[a];r=vO(n,e,o,i,r),e=o}return r}function uJ(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a){const o=t[a];r=CO(n,e,o,i,r),e=o[o.length-1]}return r}function _O(n,e,t,i,r,a,l,o,p,C,w){if(e==t)return C;let O,U;if(r===0){if(U=U1(l,o,n[e],n[e+1]),U<C){for(O=0;O<i;++O)p[O]=n[e+O];return p.length=i,U}return C}w=w||[NaN,NaN];let K=e+i;for(;K<t;)if(l9(n,K-i,K,i,l,o,w),U=U1(l,o,w[0],w[1]),U<C){for(C=U,O=0;O<i;++O)p[O]=w[O];p.length=i,K+=i}else K+=i*Math.max((Math.sqrt(U)-Math.sqrt(C))/r|0,1);if(a&&(l9(n,t-i,e,i,l,o,w),U=U1(l,o,w[0],w[1]),U<C)){for(C=U,O=0;O<i;++O)p[O]=w[O];p.length=i}return C}function bO(n,e,t,i,r,a,l,o,p,C,w){w=w||[NaN,NaN];for(let O=0,U=t.length;O<U;++O){const K=t[O];C=_O(n,e,K,i,r,a,l,o,p,C,w),e=K}return C}function AJ(n,e,t,i,r,a,l,o,p,C,w){w=w||[NaN,NaN];for(let O=0,U=t.length;O<U;++O){const K=t[O];C=bO(n,e,K,i,r,a,l,o,p,C,w),e=K[K.length-1]}return C}function cJ(n,e,t,i){for(let r=0,a=t.length;r<a;++r)n[e++]=t[r];return e}function c2(n,e,t,i){for(let r=0,a=t.length;r<a;++r){const l=t[r];for(let o=0;o<i;++o)n[e++]=l[o]}return e}function db(n,e,t,i,r){r=r||[];let a=0;for(let l=0,o=t.length;l<o;++l){const p=c2(n,e,t[l],i);r[a++]=p,e=p}return r.length=a,r}function LF(n,e,t,i,r){r=r||[];let a=0;for(let l=0,o=t.length;l<o;++l){const p=db(n,e,t[l],i,r[a]);p.length===0&&(p[0]=e),r[a++]=p,e=p[p.length-1]}return r.length=a,r}function wg(n,e,t,i,r){r=r!==void 0?r:[];let a=0;for(let l=e;l<t;l+=i)r[a++]=n.slice(l,l+i);return r.length=a,r}function E_(n,e,t,i,r){r=r!==void 0?r:[];let a=0;for(let l=0,o=t.length;l<o;++l){const p=t[l];r[a++]=wg(n,e,p,i,r[a]),e=p}return r.length=a,r}function Y6(n,e,t,i,r){r=r!==void 0?r:[];let a=0;for(let l=0,o=t.length;l<o;++l){const p=t[l];r[a++]=p.length===1&&p[0]===e?[]:E_(n,e,p,i,r[a]),e=p[p.length-1]}return r.length=a,r}function h2(n,e,t,i,r,a,l){const o=(t-e)/i;if(o<3){for(;e<t;e+=i)a[l++]=n[e],a[l++]=n[e+1];return l}const p=new Array(o);p[0]=1,p[o-1]=1;const C=[e,t-i];let w=0;for(;C.length>0;){const O=C.pop(),U=C.pop();let K=0;const j=n[U],W=n[U+1],Y=n[O],te=n[O+1];for(let J=U+i;J<O;J+=i){const oe=n[J],ne=n[J+1],$=oX(oe,ne,j,W,Y,te);$>K&&(w=J,K=$)}K>r&&(p[(w-e)/i]=1,U+i<w&&C.push(U,w),w+i<O&&C.push(w,O))}for(let O=0;O<o;++O)p[O]&&(a[l++]=n[e+O*i],a[l++]=n[e+O*i+1]);return l}function FF(n,e,t,i,r,a,l,o){for(let p=0,C=t.length;p<C;++p){const w=t[p];l=h2(n,e,w,i,r,a,l),o.push(l),e=w}return l}function b1(n,e){return e*Math.round(n/e)}function hJ(n,e,t,i,r,a,l){if(e==t)return l;let o=b1(n[e],r),p=b1(n[e+1],r);e+=i,a[l++]=o,a[l++]=p;let C,w;do if(C=b1(n[e],r),w=b1(n[e+1],r),e+=i,e==t)return a[l++]=C,a[l++]=w,l;while(C==o&&w==p);for(;e<t;){const O=b1(n[e],r),U=b1(n[e+1],r);if(e+=i,O==C&&U==w)continue;const K=C-o,j=w-p,W=O-o,Y=U-p;if(K*Y==j*W&&(K<0&&W<K||K==W||K>0&&W>K)&&(j<0&&Y<j||j==Y||j>0&&Y>j)){C=O,w=U;continue}a[l++]=C,a[l++]=w,o=C,p=w,C=O,w=U}return a[l++]=C,a[l++]=w,l}function xO(n,e,t,i,r,a,l,o){for(let p=0,C=t.length;p<C;++p){const w=t[p];l=hJ(n,e,w,i,r,a,l),o.push(l),e=w}return l}function dJ(n,e,t,i,r,a,l,o){for(let p=0,C=t.length;p<C;++p){const w=t[p],O=[];l=xO(n,e,w,i,r,a,l,O),o.push(O),e=w[w.length-1]}return l}class B_ extends X1{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new B_(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<$1(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_O(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return KF(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return wg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=h2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new B_(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c2(this.flatCoordinates,0,e,this.stride),this.changed()}}class Y1 extends X1{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Y1(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const a=this.flatCoordinates,l=U1(e,t,a[0],a[1]);if(l<r){const o=this.stride;for(let p=0;p<o;++p)i[p]=a[p];return i.length=o,l}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return gF(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return lO(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cJ(this.flatCoordinates,0,e,this.stride),this.changed()}}function fJ(n,e,t,i,r){return!CF(r,function(l){return!O1(n,e,t,i,l[0],l[1])})}function O1(n,e,t,i,r,a){let l=0,o=n[t-i],p=n[t-i+1];for(;e<t;e+=i){const C=n[e],w=n[e+1];p<=a?w>a&&(C-o)*(a-p)-(r-o)*(w-p)>0&&l++:w<=a&&(C-o)*(a-p)-(r-o)*(w-p)<0&&l--,o=C,p=w}return l!==0}function MO(n,e,t,i,r,a){if(t.length===0||!O1(n,e,t[0],i,r,a))return!1;for(let l=1,o=t.length;l<o;++l)if(O1(n,t[l-1],t[l],i,r,a))return!1;return!0}function pJ(n,e,t,i,r,a){if(t.length===0)return!1;for(let l=0,o=t.length;l<o;++l){const p=t[l];if(MO(n,e,p,i,r,a))return!0;e=p[p.length-1]}return!1}function wO(n,e,t,i,r,a,l){let o,p,C,w,O,U,K;const j=r[a+1],W=[];for(let J=0,oe=t.length;J<oe;++J){const ne=t[J];for(w=n[ne-i],U=n[ne-i+1],o=e;o<ne;o+=i)O=n[o],K=n[o+1],(j<=U&&K<=j||U<=j&&j<=K)&&(C=(j-U)/(K-U)*(O-w)+w,W.push(C)),w=O,U=K}let Y=NaN,te=-1/0;for(W.sort($m),w=W[0],o=1,p=W.length;o<p;++o){O=W[o];const J=Math.abs(O-w);J>te&&(C=(w+O)/2,MO(n,e,t,i,C,j)&&(Y=C,te=J)),w=O}return isNaN(Y)&&(Y=r[a]),l?(l.push(Y,j,te),l):[Y,j,te]}function zF(n,e,t,i,r){let a=[];for(let l=0,o=t.length;l<o;++l){const p=t[l];a=wO(n,e,p,i,r,2*l,a),e=p[p.length-1]}return a}function jF(n,e,t,i,r){let a;for(e+=i;e<t;e+=i)if(a=r(n.slice(e-i,e),n.slice(e,e+i)),a)return a;return!1}function d2(n,e,t,i,r,a){return a=a??vF(bp(),n,e,t,i),uA(r,a)?a[0]>=r[0]&&a[2]<=r[2]||a[1]>=r[1]&&a[3]<=r[3]?!0:jF(n,e,t,i,function(l,o){return hX(r,l,o)}):!1}function mJ(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a){if(d2(n,e,t[a],i,r))return!0;e=t[a]}return!1}function NF(n,e,t,i,r){return!!(d2(n,e,t,i,r)||O1(n,e,t,i,r[0],r[1])||O1(n,e,t,i,r[0],r[3])||O1(n,e,t,i,r[2],r[1])||O1(n,e,t,i,r[2],r[3]))}function GF(n,e,t,i,r){if(!NF(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let a=1,l=t.length;a<l;++a)if(fJ(n,t[a-1],t[a],i,r)&&!d2(n,t[a-1],t[a],i,r))return!1;return!0}function gJ(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a){const o=t[a];if(GF(n,e,o,i,r))return!0;e=o[o.length-1]}return!1}function yJ(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const a=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=a}e+=i,t-=i}}function SO(n,e,t,i){let r=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const o=n[e],p=n[e+1];r+=(o-a)*(p+l),a=o,l=p}return r===0?void 0:r>0}function EO(n,e,t,i,r){r=r!==void 0?r:!1;for(let a=0,l=t.length;a<l;++a){const o=t[a],p=SO(n,e,o,i);if(a===0){if(r&&p||!r&&!p)return!1}else if(r&&!p||!r&&p)return!1;e=o}return!0}function WF(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a){const o=t[a];if(!EO(n,e,o,i,r))return!1;o.length&&(e=o[o.length-1])}return!0}function n3(n,e,t,i,r){r=r!==void 0?r:!1;for(let a=0,l=t.length;a<l;++a){const o=t[a],p=SO(n,e,o,i);(a===0?r&&p||!r&&!p:r&&!p||!r&&p)&&yJ(n,e,o,i),e=o}return e}function q6(n,e,t,i,r){for(let a=0,l=t.length;a<l;++a)e=n3(n,e,t[a],i,r);return e}function QF(n,e){const t=[];let i=0,r=0,a;for(let l=0,o=e.length;l<o;++l){const p=e[l],C=SO(n,i,p,2);if(a===void 0&&(a=C),C===a)t.push(e.slice(r,l+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=l+1,i=p}return t}class L0 extends X1{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Zm(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new L0(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<$1(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(CO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return MO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return UF(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),n3(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,E_(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Bf(this.getExtent());this.flatInteriorPoint_=wO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Y1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new B_(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let a=0;for(let l=0,o=i.length;l<o;++l){const p=i[l],C=new B_(t.slice(a,p),e);r.push(C),a=p}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;EO(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=n3(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=xO(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new L0(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return GF(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=db(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function u9(n){if(Z1(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],a=[e,t,e,r,i,r,i,t,e,t];return new L0(a,"XY",[a.length])}function BO(n,e,t,i){const r=ss(e)/t[0],a=ic(e)/t[1];return i?Math.min(n,Math.max(r,a)):Math.min(n,Math.min(r,a))}function OO(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Nu(i,t/2,e*2)}function vJ(n,e,t,i){return e=e!==void 0?e:!0,function(r,a,l,o){if(r!==void 0){const p=n[0],C=n[n.length-1],w=t?BO(p,t,l,i):p;if(o)return e?OO(r,w,C):Nu(r,C,w);const O=Math.min(w,r),U=Math.floor(t2(n,O,a));return n[U]>w&&U<n.length-1?n[U+1]:n[U]}}}function CJ(n,e,t,i,r,a){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(l,o,p,C){if(l!==void 0){const w=r?BO(e,r,p,a):e;if(C)return i?OO(l,w,t):Nu(l,t,w);const O=1e-9,U=Math.ceil(Math.log(e/w)/Math.log(n)-O),K=-o*(.5-O)+.5,j=Math.min(w,l),W=Math.floor(Math.log(e/j)/Math.log(n)+K),Y=Math.max(U,W),te=e/Math.pow(n,Y);return Nu(te,t,w)}}}function A9(n,e,t,i,r){return t=t!==void 0?t:!0,function(a,l,o,p){if(a!==void 0){const C=i?BO(n,i,o,r):n;return!t||!p?Nu(a,e,C):OO(a,C,e)}}}function IO(n){if(n!==void 0)return 0}function c9(n){if(n!==void 0)return n}function _J(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function bJ(n){const e=Dg(5);return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}const YF=42,TO=256,j4=0;class Xp extends Am{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=pO(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&TF(),e.center&&(e.center=B0(e.center,this.projection_)),e.extent&&(e.extent=Qm(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in Qp)delete t[o];this.setProperties(t,!0);const i=MJ(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=xJ(e),a=i.constraint,l=wJ(e);this.constraints_={center:r,resolution:a,rotation:l},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const a=this.getResolution(),l=a/2*(r[3]-t[3]+t[1]-r[1]),o=a/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+l,i[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=B0(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=B0(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const w=arguments[r];w.center&&this.setCenterInternal(w.center),w.zoom!==void 0?this.setZoom(w.zoom):w.resolution&&this.setResolution(w.resolution),w.rotation!==void 0&&this.setRotation(w.rotation)}if(r===t){i&&Qb(i,!0);return}let a=Date.now(),l=this.targetCenter_.slice(),o=this.targetResolution_,p=this.targetRotation_;const C=[];for(;r<t;++r){const w=arguments[r],O={start:a,complete:!1,anchor:w.anchor,duration:w.duration!==void 0?w.duration:1e3,easing:w.easing||vX,callback:i};if(w.center&&(O.sourceCenter=l,O.targetCenter=w.center.slice(),l=O.targetCenter),w.zoom!==void 0?(O.sourceResolution=o,O.targetResolution=this.getResolutionForZoom(w.zoom),o=O.targetResolution):w.resolution&&(O.sourceResolution=o,O.targetResolution=w.resolution,o=O.targetResolution),w.rotation!==void 0){O.sourceRotation=p;const U=L1(w.rotation-p+Math.PI,2*Math.PI)-Math.PI;O.targetRotation=p+U,p=O.targetRotation}SJ(O)?O.complete=!0:a+=O.duration,C.push(O)}this.animations_.push(C),this.setHint(vu.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[vu.ANIMATING]>0}getInteracting(){return this.hints_[vu.INTERACTING]>0}cancelAnimations(){this.setHint(vu.ANIMATING,-this.hints_[vu.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&Qb(r[0].callback,!1),!e)for(let a=0,l=r.length;a<l;++a){const o=r[a];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let a=!0;for(let l=0,o=r.length;l<o;++l){const p=r[l];if(p.complete)continue;const C=e-p.start;let w=p.duration>0?C/p.duration:1;w>=1?(p.complete=!0,w=1):a=!1;const O=p.easing(w);if(p.sourceCenter){const U=p.sourceCenter[0],K=p.sourceCenter[1],j=p.targetCenter[0],W=p.targetCenter[1];this.nextCenter_=p.targetCenter;const Y=U+O*(j-U),te=K+O*(W-K);this.targetCenter_=[Y,te]}if(p.sourceResolution&&p.targetResolution){const U=O===1?p.targetResolution:p.sourceResolution+O*(p.targetResolution-p.sourceResolution);if(p.anchor){const K=this.getViewportSize_(this.getRotation()),j=this.constraints_.resolution(U,0,K,!0);this.targetCenter_=this.calculateCenterZoom(j,p.anchor)}this.nextResolution_=p.targetResolution,this.targetResolution_=U,this.applyTargetState_(!0)}if(p.sourceRotation!==void 0&&p.targetRotation!==void 0){const U=O===1?L1(p.targetRotation+Math.PI,2*Math.PI)-Math.PI:p.sourceRotation+O*(p.targetRotation-p.sourceRotation);if(p.anchor){const K=this.constraints_.rotation(U,!0);this.targetCenter_=this.calculateCenterRotate(K,p.anchor)}this.nextRotation_=p.targetRotation,this.targetRotation_=U}if(this.applyTargetState_(!0),t=!0,!p.complete)break}if(a){this.animations_[i]=null,this.setHint(vu.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const l=r[0].callback;l&&Qb(l,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],AO(i,e-this.getRotation()),fX(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),a=this.getResolution();if(r!==void 0&&a!==void 0){const l=t[0]-e*(t[0]-r[0])/a,o=t[1]-e*(t[1]-r[1])/a;i=[l,o]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Q6(e,this.getProjection())}getCenterInternal(){return this.get(Qp.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return mO(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ws(t,"The view center is not defined");const i=this.getResolution();ws(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return ws(r!==void 0,"The view rotation is not defined"),Xx(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Qp.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Qm(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=ss(e)/t[0],r=ic(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return function(a){return t/Math.pow(e,a*r)}}getRotation(){return this.get(Qp.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,a=Math.log(i/r)/t;return function(l){return Math.log(i/l)/t/a}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const a=this.padding_;if(a){const l=this.getViewportSizeMinusPadding_();r=N4(r,this.getViewportSize_(),[l[0]/2+a[3],l[1]/2+a[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const a=t2(this.resolutions_,e,1);t=a,i=this.resolutions_[a],a==this.resolutions_.length-1?r=2:r=i/this.resolutions_[a+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Nu(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Nu(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(ws(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ws(!Z1(e),"Cannot fit empty extent provided as `geometry`");const r=Qm(e,this.getProjection());i=u9(r)}else if(e.getType()==="Circle"){const r=Qm(e.getExtent(),this.getProjection());i=u9(r),i.rotate(this.getRotation(),Bf(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),a=e.getFlatCoordinates(),l=e.getStride();let o=1/0,p=1/0,C=-1/0,w=-1/0;for(let O=0,U=a.length;O<U;O+=l){const K=a[O]*i-a[O+1]*r,j=a[O]*r+a[O+1]*i;o=Math.min(o,K),p=Math.min(p,j),C=Math.max(C,K),w=Math.max(w,j)}return[o,p,C,w]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],a=t.nearest!==void 0?t.nearest:!1;let l;t.minResolution!==void 0?l=t.minResolution:t.maxZoom!==void 0?l=this.getResolutionForZoom(t.maxZoom):l=0;const o=this.rotatedExtentForGeometry(e);let p=this.getResolutionForExtentInternal(o,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);p=isNaN(p)?l:Math.max(p,l),p=this.getConstrainedResolution(p,a?0:1);const C=this.getRotation(),w=Math.sin(C),O=Math.cos(C),U=Bf(o);U[0]+=(r[1]-r[3])/2*p,U[1]+=(r[0]-r[2])/2*p;const K=U[0]*O-U[1]*w,j=U[1]*O+U[0]*w,W=this.getConstrainedCenter([K,j],p),Y=t.callback?t.callback:M_;t.duration!==void 0?this.animateInternal({resolution:p,center:W,duration:t.duration,easing:t.easing},Y):(this.targetResolution_=p,this.targetCenter_=W,this.applyTargetState_(!1,!0),Qb(Y,!0))}centerOn(e,t,i){this.centerOnInternal(B0(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(N4(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let a;const l=this.padding_;if(l&&e){const o=this.getViewportSizeMinusPadding_(-i),p=N4(e,r,[o[0]/2+l[3],o[1]/2+l[0]],t,i);a=[e[0]-p[0],e[1]-p[1]]}return a}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Q6(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&B0(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(a,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=B0(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&B0(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),a=this.getViewportSize_(r),l=this.constraints_.resolution(this.targetResolution_,0,a,i),o=this.constraints_.center(this.targetCenter_,l,a,i,this.calculateCenterShift(this.targetCenter_,l,r,a));this.get(Qp.ROTATION)!==r&&this.set(Qp.ROTATION,r),this.get(Qp.RESOLUTION)!==l&&(this.set(Qp.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Qp.CENTER)||!Jx(this.get(Qp.CENTER),o))&&this.set(Qp.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,a=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(a),o=this.constraints_.resolution(this.targetResolution_,r,l),p=this.constraints_.center(this.targetCenter_,o,l,!1,this.calculateCenterShift(this.targetCenter_,o,a,l));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=a,this.targetCenter_=p,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==a||!this.getCenterInternal()||!Jx(this.getCenterInternal(),p))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:p,resolution:o,duration:e,easing:Hv,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(vu.INTERACTING,1)}endInteraction(e,t,i){i=i&&B0(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(vu.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function Qb(n,e){setTimeout(function(){n(e)},0)}function xJ(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return HI(n.extent,n.constrainOnlyCenter,t)}const e=pO(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,HI(t,!1,!1)}return sX}function MJ(n){let e,t,i,l=n.minZoom!==void 0?n.minZoom:j4,o=n.maxZoom!==void 0?n.maxZoom:28;const p=n.zoomFactor!==void 0?n.zoomFactor:2,C=n.multiWorld!==void 0?n.multiWorld:!1,w=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,O=n.showFullExtent!==void 0?n.showFullExtent:!1,U=pO(n.projection,"EPSG:3857"),K=U.getExtent();let j=n.constrainOnlyCenter,W=n.extent;if(!C&&!W&&U.isGlobal()&&(j=!1,W=K),n.resolutions!==void 0){const Y=n.resolutions;t=Y[l],i=Y[o]!==void 0?Y[o]:Y[Y.length-1],n.constrainResolution?e=vJ(Y,w,!j&&W,O):e=A9(t,i,w,!j&&W,O)}else{const te=(K?Math.max(ss(K),ic(K)):360*Fg.degrees/U.getMetersPerUnit())/TO/Math.pow(2,j4),J=te/Math.pow(2,28-j4);t=n.maxResolution,t!==void 0?l=0:t=te/Math.pow(p,l),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(p,o):i=te/Math.pow(p,o):i=J),o=l+Math.floor(Math.log(t/i)/Math.log(p)),i=t/Math.pow(p,o-l),n.constrainResolution?e=CJ(p,t,i,w,!j&&W,O):e=A9(t,i,w,!j&&W,O)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:l,zoomFactor:p}}function wJ(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?bJ():t===!1?c9:typeof t=="number"?_J(t):c9}return IO}function SJ(n){return!(n.sourceCenter&&n.targetCenter&&!Jx(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function N4(n,e,t,i,r){const a=Math.cos(-r);let l=Math.sin(-r),o=n[0]*a-n[1]*l,p=n[1]*a+n[0]*l;o+=(e[0]/2-t[0])*i,p+=(t[1]-e[1]/2)*i,l=-l;const C=o*a-p*l,w=p*a+o*l;return[C,w]}const Yb="ol-hidden",EJ="ol-selectable",f2="ol-unselectable",kO="ol-control",h9="ol-collapsed",BJ=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),d9=["style","variant","weight","size","lineHeight","family"],H6={normal:400,bold:700},V6=function(n){const e=n.match(BJ);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=d9.length;i<r;++i){const a=e[i+1];a!==void 0&&(t[d9[i]]=typeof a=="string"?a.trim():a)}return isNaN(Number(t.weight))&&t.weight in H6&&(t.weight=H6[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function Gu(n,e,t,i){let r;return t&&t.length?r=t.shift():sO?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let G4;function i3(){return G4||(G4=Gu(1,1)),G4}function fb(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function OJ(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function IJ(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function f9(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function qF(n){for(;n.lastChild;)n.lastChild.remove()}function TJ(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],a=e[i];if(!r&&!a)break;if(r!==a){if(!r){n.appendChild(a);continue}if(!a){n.removeChild(r),--i;continue}n.insertBefore(a,r)}}}class DO extends Am{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)Bl(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==M_&&this.listenerKeys.push(Za(e,O0.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class kJ extends DO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",a=e.collapseLabel!==void 0?e.collapseLabel:"",l=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof a=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a,this.collapseLabel_.className=l):this.collapseLabel_=a;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=r):this.label_=o;const p=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(p),this.toggleButton_.addEventListener(fo.CLICK,this.handleClick_.bind(this),!1);const C=t+" "+f2+" "+kO+(this.collapsed_&&this.collapsible_?" "+h9:"")+(this.collapsible_?"":" ol-uncollapsible"),w=this.element;w.className=C,w.appendChild(this.toggleButton_),w.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(a=>a.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>kv(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!zg(t,this.renderedAttributions_)){qF(this.ulElement_);for(let r=0,a=t.length;r<a;++r){const l=document.createElement("li");l.innerHTML=t[r],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(h9),this.collapsed_?f9(this.collapseLabel_,this.label_):f9(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class DJ extends DO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const a=e.tipLabel?e.tipLabel:"Reset rotation",l=document.createElement("button");l.className=t+"-reset",l.setAttribute("type","button"),l.title=a,l.appendChild(this.label_),l.addEventListener(fo.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+f2+" "+kO,p=this.element;p.className=o,p.appendChild(l),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Yb)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Hv}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const a=this.element.classList.contains(Yb);!a&&i===0?this.element.classList.add(Yb):a&&i!==0&&this.element.classList.remove(Yb)}this.label_.style.transform=r}this.rotation_=i}}class RJ extends DO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",a=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",l=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",p=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",C=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",w=document.createElement("button");w.className=r,w.setAttribute("type","button"),w.title=p,w.appendChild(typeof l=="string"?document.createTextNode(l):l),w.addEventListener(fo.CLICK,this.handleClick_.bind(this,i),!1);const O=document.createElement("button");O.className=a,O.setAttribute("type","button"),O.title=C,O.appendChild(typeof o=="string"?document.createTextNode(o):o),O.addEventListener(fo.CLICK,this.handleClick_.bind(this,-i),!1);const U=t+" "+f2+" "+kO,K=this.element;K.className=U,K.appendChild(w),K.appendChild(O),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const a=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:a,duration:this.duration_,easing:Hv})):i.setZoom(a)}}}function PJ(n){n=n||{};const e=new Gm;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new RJ(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new DJ(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new kJ(n.attributionOptions)),e}class KJ{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const a=this.points_[t]-this.points_[i],l=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(l,a),this.initialVelocity_=Math.sqrt(a*a+l*l)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const p9={ACTIVE:"active"};class pb extends Am{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(p9.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(p9.ACTIVE,e)}setMap(e){this.map_=e}}function UJ(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:CX,center:n.getConstrainedCenter(r)})}}function RO(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const a=n.getConstrainedZoom(r+e),l=n.getResolutionForZoom(a);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:l,anchor:t,duration:i!==void 0?i:250,easing:Hv})}class LJ extends pb{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==sA.DBLCLICK){const i=e.originalEvent,r=e.map,a=e.coordinate,l=i.shiftKey?-this.delta_:this.delta_,o=r.getView();RO(o,l,a,this.duration_),i.preventDefault(),t=!0}return!t}}function $6(n){const e=arguments;return function(t){let i=!0;for(let r=0,a=e.length;r<a&&(i=i&&e[r](t),!!i);++r);return i}}const FJ=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},zJ=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},HF=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?zJ(n):!0},jJ=x_,VF=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(JZ&&hF&&e.ctrlKey)},$F=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},NJ=function(n){const e=n.originalEvent;return hF?e.metaKey:e.ctrlKey},GJ=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ZF=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},W4=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},WJ=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class mb extends pb{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==sA.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==sA.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==sA.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==sA.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function PO(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class QJ extends mb{constructor(e){super({stopDown:n2}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:$6($F,WJ);this.condition_=e.onFocusOnly?$6(HF,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(PO(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const a=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],o=e.map.getView();pX(a,o.getResolution()),AO(a,o.getRotation()),o.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),l=i.getCenterInternal(),o=t.getPixelFromCoordinateInternal(l),p=t.getCoordinateFromPixelInternal([o[0]-r*Math.cos(a),o[1]-r*Math.sin(a)]);i.animateInternal({center:i.getConstrainedCenter(p),duration:500,easing:Hv})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class YJ extends mb{constructor(e){e=e||{},super({stopDown:n2}),this.condition_=e.condition?e.condition:FJ,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!W4(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===IO)return;const r=t.getSize(),a=e.pixel,l=Math.atan2(r[1]/2-a[1],a[0]-r[0]/2);if(this.lastAngle_!==void 0){const o=l-this.lastAngle_;i.adjustRotationInternal(-o)}this.lastAngle_=l}handleUpEvent(e){return W4(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return W4(e)&&VF(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class qJ extends sb{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new L0([r])}getGeometry(){return this.geometry_}}const Iy={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class vC extends um{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class HJ extends mb{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new qJ(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??VF,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],a=i[1]-t[1];return r*r+a*a>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new vC(Iy.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new vC(t?Iy.BOXEND:Iy.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new vC(Iy.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new vC(Iy.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new vC(Iy.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class VJ extends HJ{constructor(e){e=e||{};const t=e.condition?e.condition:GJ;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const a=i.rotatedExtentForGeometry(r),l=i.getResolutionForExtentInternal(a),o=i.getResolution()/l;r=r.clone(),r.scale(o*o)}i.fitInternal(r,{duration:this.duration_,easing:Hv})}}const m1={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class $J extends pb{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return $F(t)&&ZF(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==fo.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==m1.DOWN||r==m1.LEFT||r==m1.RIGHT||r==m1.UP)){const l=e.map.getView(),o=l.getResolution()*this.pixelDelta_;let p=0,C=0;r==m1.DOWN?C=-o:r==m1.LEFT?p=-o:r==m1.RIGHT?p=o:C=o;const w=[p,C];AO(w,l.getRotation()),UJ(l,w,this.duration_),i.preventDefault(),t=!0}}return!t}}class ZJ extends pb{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!NJ(t)&&ZF(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==fo.KEYDOWN||e.type==fo.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const a=e.map,l=r==="+"?this.delta_:-this.delta_,o=a.getView();RO(o,l,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const XJ=40,JJ=300;class eee extends pb{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:jJ;this.condition_=e.onFocusOnly?$6(HF,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==fo.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let a=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:a*=XJ;break;case WheelEvent.DOM_DELTA_PAGE:a*=JJ;break}if(a===0)return!1;this.lastDelta_=a;const l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?"trackpad":"wheel");const o=i.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=l,!1;this.totalDelta_+=a;const p=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),p),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Nu(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),RO(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class tee extends mb{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=n2),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],a=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const p=a-this.lastAngle_;this.rotationDelta_+=p,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=p}this.lastAngle_=a;const l=e.map,o=l.getView();o.getConstraints().rotation!==IO&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(PO(this.targetPointers))),this.rotating_&&(l.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class nee extends mb{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=n2),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],a=i.clientX-r.clientX,l=i.clientY-r.clientY,o=Math.sqrt(a*a+l*l);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const p=e.map,C=p.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=p.getCoordinateFromPixelInternal(p.getEventPixel(PO(this.targetPointers))),p.render(),C.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function iee(n){n=n||{};const e=new Gm,t=new KJ(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new YJ),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new LJ({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new QJ({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new tee),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new nee({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new $J),e.push(new ZJ({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new eee({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new VJ({duration:n.zoomDuration})),e}const tl={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class XF extends Am{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[tl.OPACITY]=e.opacity!==void 0?e.opacity:1,ws(typeof t[tl.OPACITY]=="number","Layer opacity must be a number"),t[tl.VISIBLE]=e.visible!==void 0?e.visible:!0,t[tl.Z_INDEX]=e.zIndex,t[tl.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[tl.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[tl.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[tl.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Nu(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return vo()}getLayerStatesArray(e){return vo()}getExtent(){return this.get(tl.EXTENT)}getMaxResolution(){return this.get(tl.MAX_RESOLUTION)}getMinResolution(){return this.get(tl.MIN_RESOLUTION)}getMinZoom(){return this.get(tl.MIN_ZOOM)}getMaxZoom(){return this.get(tl.MAX_ZOOM)}getOpacity(){return this.get(tl.OPACITY)}getSourceState(){return vo()}getVisible(){return this.get(tl.VISIBLE)}getZIndex(){return this.get(tl.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(tl.EXTENT,e)}setMaxResolution(e){this.set(tl.MAX_RESOLUTION,e)}setMinResolution(e){this.set(tl.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(tl.MAX_ZOOM,e)}setMinZoom(e){this.set(tl.MIN_ZOOM,e)}setOpacity(e){ws(typeof e=="number","Layer opacity must be a number"),this.set(tl.OPACITY,e)}setVisible(e){this.set(tl.VISIBLE,e)}setZIndex(e){this.set(tl.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class gg extends um{constructor(e,t){super(e),this.layer=t}}const Q4={LAYERS:"layers"};class Vv extends XF{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Q4.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Gm(i.slice(),{unique:!0}):ws(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Gm(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Bl),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Za(e,Nd.ADD,this.handleLayersAdd_,this),Za(e,Nd.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Bl);lb(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const a=t[i];this.registerLayerListeners_(a),this.dispatchEvent(new gg("addlayer",a))}this.changed()}registerLayerListeners_(e){const t=[Za(e,Tv.PROPERTYCHANGE,this.handleLayerChange_,this),Za(e,fo.CHANGE,this.handleLayerChange_,this)];e instanceof Vv&&t.push(Za(e,"addlayer",this.handleLayerGroupAdd_,this),Za(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Io(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new gg("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new gg("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new gg("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Io(t);this.listenerKeys_[i].forEach(Bl),delete this.listenerKeys_[i],this.dispatchEvent(new gg("removelayer",t)),this.changed()}getLayers(){return this.get(Q4.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,a=i.length;r<a;++r)this.dispatchEvent(new gg("removelayer",i[r]))}this.set(Q4.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(t)});const r=this.getLayerState();let a=r.zIndex;!e&&r.zIndex===void 0&&(a=0);for(let l=i,o=t.length;l<o;l++){const p=t[l];p.opacity*=r.opacity,p.visible=p.visible&&r.visible,p.maxResolution=Math.min(p.maxResolution,r.maxResolution),p.minResolution=Math.max(p.minResolution,r.minResolution),p.minZoom=Math.max(p.minZoom,r.minZoom),p.maxZoom=Math.min(p.maxZoom,r.maxZoom),r.extent!==void 0&&(p.extent!==void 0?p.extent=im(p.extent,r.extent):p.extent=r.extent),p.zIndex===void 0&&(p.zIndex=a)}return t}getSourceState(){return"ready"}}const gp={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class $v extends XF{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(tl.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(tl.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Bl(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Za(e,fo.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Xp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(l=>l.layer===this),!r)return!1}else r=this.getLayerState();const a=this.getExtent();return KO(r,t.viewState)&&(!a||uA(a,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof Xp?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(tl.MAP,e)}getMapInternal(){return this.get(tl.MAP)}setMap(e){this.mapPrecomposeKey_&&(Bl(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Bl(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Za(e,gp.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Za(this,fo.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);ws(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(tl.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function KO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function JF(n,e,t=0,i=n.length-1,r=ree){for(;i>t;){if(i-t>600){const p=i-t+1,C=e-t+1,w=Math.log(p),O=.5*Math.exp(2*w/3),U=.5*Math.sqrt(w*O*(p-O)/p)*(C-p/2<0?-1:1),K=Math.max(t,Math.floor(e-C*O/p+U)),j=Math.min(i,Math.floor(e+(p-C)*O/p+U));JF(n,e,K,j,r)}const a=n[e];let l=t,o=i;for(CC(n,t,e),r(n[i],a)>0&&CC(n,t,i);l<o;){for(CC(n,l,o),l++,o--;r(n[l],a)<0;)l++;for(;r(n[o],a)>0;)o--}r(n[t],a)===0?CC(n,t,o):(o++,CC(n,o,i)),o<=e&&(t=o+1),e<=o&&(i=o-1)}}function CC(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function ree(n,e){return n<e?-1:n>e?1:0}let ez=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Hb(e,t))return i;const r=this.toBBox,a=[];for(;t;){for(let l=0;l<t.children.length;l++){const o=t.children[l],p=t.leaf?r(o):o;Hb(e,p)&&(t.leaf?i.push(o):q4(e,p)?this._all(o,i):a.push(o))}t=a.pop()}return i}collides(e){let t=this.data;if(!Hb(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const a=t.children[r],l=t.leaf?this.toBBox(a):a;if(Hb(e,l)){if(t.leaf||q4(e,l))return!0;i.push(a)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=sv([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),a=[],l=[];let o,p,C;for(;i||a.length;){if(i||(i=a.pop(),p=a[a.length-1],o=l.pop(),C=!0),i.leaf){const w=oee(e,i.children,t);if(w!==-1)return i.children.splice(w,1),a.push(i),this._condense(a),this}!C&&!i.leaf&&q4(i,r)?(a.push(i),l.push(o),o=0,p=i,i=i.children[0]):p?(o++,i=p.children[o],C=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const a=i-t+1;let l=this._maxEntries,o;if(a<=l)return o=sv(e.slice(t,i+1)),Ty(o,this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,r-1))),o=sv([]),o.leaf=!1,o.height=r;const p=Math.ceil(a/l),C=p*Math.ceil(Math.sqrt(l));m9(e,t,i,C,this.compareMinX);for(let w=t;w<=i;w+=C){const O=Math.min(w+C-1,i);m9(e,w,O,p,this.compareMinY);for(let U=w;U<=O;U+=p){const K=Math.min(U+p-1,O);o.children.push(this._build(e,U,K,r-1))}}return Ty(o,this.toBBox),o}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let a=1/0,l=1/0,o;for(let p=0;p<t.children.length;p++){const C=t.children[p],w=Y4(C),O=lee(e,C)-w;O<l?(l=O,a=w<a?w:a,o=C):O===l&&w<a&&(a=w,o=C)}t=o||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),a=[],l=this._chooseSubtree(r,this.data,t,a);for(l.children.push(e),RC(l,r);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(r,a,t)}_split(e,t){const i=e[t],r=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,r);const l=this._chooseSplitIndex(i,a,r),o=sv(i.children.splice(l,i.children.length-l));o.height=i.height,o.leaf=i.leaf,Ty(i,this.toBBox),Ty(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)}_splitRoot(e,t){this.data=sv([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Ty(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,a=1/0,l=1/0;for(let o=t;o<=i-t;o++){const p=DC(e,0,o,this.toBBox),C=DC(e,o,i,this.toBBox),w=uee(p,C),O=Y4(p)+Y4(C);w<a?(a=w,r=o,l=O<l?O:l):w===a&&O<l&&(l=O,r=o)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:aee,a=e.leaf?this.compareMinY:see,l=this._allDistMargin(e,t,i,r),o=this._allDistMargin(e,t,i,a);l<o&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const a=this.toBBox,l=DC(e,0,t,a),o=DC(e,i-t,i,a);let p=qb(l)+qb(o);for(let C=t;C<i-t;C++){const w=e.children[C];RC(l,e.leaf?a(w):w),p+=qb(l)}for(let C=i-t-1;C>=t;C--){const w=e.children[C];RC(o,e.leaf?a(w):w),p+=qb(o)}return p}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)RC(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Ty(e[t],this.toBBox)}};function oee(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Ty(n,e){DC(n,0,n.children.length,e,n)}function DC(n,e,t,i,r){r||(r=sv(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let a=e;a<t;a++){const l=n.children[a];RC(r,n.leaf?i(l):l)}return r}function RC(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function aee(n,e){return n.minX-e.minX}function see(n,e){return n.minY-e.minY}function Y4(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function qb(n){return n.maxX-n.minX+(n.maxY-n.minY)}function lee(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function uee(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),a=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,a-i)}function q4(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Hb(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function sv(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m9(n,e,t,i,r){const a=[e,t];for(;a.length;){if(t=a.pop(),e=a.pop(),t-e<=i)continue;const l=e+Math.ceil((t-e)/i/2)*i;JF(n,l,e,t,r),a.push(e,l,l,t)}}const UO=[NaN,NaN,NaN,0];let H4;function Aee(){return H4||(H4=Gu(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),H4}const cee=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,hee=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,dee=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,fee=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Vb(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function n_(n){throw new Error('failed to parse "'+n+'" as color')}function tz(n){if(n.toLowerCase().startsWith("rgb")){const a=n.match(hee)||n.match(cee)||n.match(dee);if(a){const l=a[4],o=100/255;return[Nu(Vb(a[1],o)+.5|0,0,255),Nu(Vb(a[2],o)+.5|0,0,255),Nu(Vb(a[3],o)+.5|0,0,255),l!==void 0?Nu(Vb(l,100),0,1):1]}n_(n)}if(n.startsWith("#")){if(fee.test(n)){const a=n.substring(1),l=a.length<=4?1:2,o=[0,0,0,255];for(let p=0,C=a.length;p<C;p+=l){let w=parseInt(a.substring(p,p+l),16);l===1&&(w+=w<<4),o[p/l]=w}return o[3]=o[3]/255,o}n_(n)}const e=Aee();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&n_(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return tz(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=i2(r[3]/255,3),r}function pee(n){return typeof n=="string"?n:FO(n)}const mee=1024,_C={};let V4=0;function gee(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function $4(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function Z4(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function X4(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function J4(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function g9(n){const e=X4(n[0]),t=X4(n[1]),i=X4(n[2]),r=J4(e*.222488403+t*.716873169+i*.06060791),a=500*(J4(e*.452247074+t*.399439023+i*.148375274)-r),l=200*(r-J4(e*.016863605+t*.117638439+i*.865350722)),o=Math.atan2(l,a)*(180/Math.PI);return[116*r-16,Math.sqrt(a*a+l*l),o<0?o+360:o,n[3]]}function yee(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=Z4(e),a=Z4(e+t/500*Math.cos(i)),l=Z4(e-t/200*Math.sin(i)),o=$4(a*3.021973625-r*1.617392459-l*.404875592),p=$4(a*-.943766287+r*1.916279586+l*.027607165),C=$4(a*.069407491-r*.22898585+l*1.159737864);return[Nu(o+.5|0,0,255),Nu(p+.5|0,0,255),Nu(C+.5|0,0,255),n[3]]}function LO(n){if(n==="none")return UO;if(_C.hasOwnProperty(n))return _C[n];if(V4>=mee){let t=0;for(const i in _C)(t++&3)===0&&(delete _C[i],--V4)}const e=tz(n);e.length!==4&&n_(n);for(const t of e)isNaN(t)&&n_(n);return _C[n]=e,++V4,e}function Rv(n){return Array.isArray(n)?n:LO(n)}function FO(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function y9(n){return n[0]>0&&n[1]>0}function vee(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function zh(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let ey=0;const dd=1<<ey++,Va=1<<ey++,Gd=1<<ey++,Jp=1<<ey++,q1=1<<ey++,PC=1<<ey++,$b=Math.pow(2,ey)-1,zO={[dd]:"boolean",[Va]:"number",[Gd]:"string",[Jp]:"color",[q1]:"number[]",[PC]:"size"},Cee=Object.keys(zO).map(Number).sort($m);function _ee(n){return n in zO}function KC(n){const e=[];for(const t of Cee)UC(n,t)&&e.push(zO[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function UC(n,e){return(n&e)===e}function ug(n,e){return n===e}class vc{constructor(e,t){if(!_ee(e))throw new Error(`literal expressions must have a specific type, got ${KC(e)}`);this.type=e,this.value=t}}class bee{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function nz(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function ph(n,e,t){switch(typeof n){case"boolean":{if(ug(e,Gd))return new vc(Gd,n?"true":"false");if(!UC(e,dd))throw new Error(`got a boolean, but expected ${KC(e)}`);return new vc(dd,n)}case"number":{if(ug(e,PC))return new vc(PC,zh(n));if(ug(e,dd))return new vc(dd,!!n);if(ug(e,Gd))return new vc(Gd,n.toString());if(!UC(e,Va))throw new Error(`got a number, but expected ${KC(e)}`);return new vc(Va,n)}case"string":{if(ug(e,Jp))return new vc(Jp,LO(n));if(ug(e,dd))return new vc(dd,!!n);if(!UC(e,Gd))throw new Error(`got a string, but expected ${KC(e)}`);return new vc(Gd,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Dee(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(ug(e,PC)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new vc(PC,n)}if(ug(e,Jp)){if(n.length===3)return new vc(Jp,[...n,1]);if(n.length===4)return new vc(Jp,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!UC(e,q1))throw new Error(`got an array of numbers, but expected ${KC(e)}`);return new vc(q1,n)}const Fn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},xee={[Fn.Get]:go(ra(1,1/0),v9),[Fn.Var]:go(ra(1,1),Mee),[Fn.Has]:go(ra(1,1/0),v9),[Fn.Id]:go(wee,ky),[Fn.Concat]:go(ra(2,1/0),Ds(Gd)),[Fn.GeometryType]:go(See,ky),[Fn.LineMetric]:go(ky),[Fn.Resolution]:go(e5,ky),[Fn.Zoom]:go(e5,ky),[Fn.Time]:go(e5,ky),[Fn.Any]:go(ra(2,1/0),Ds(dd)),[Fn.All]:go(ra(2,1/0),Ds(dd)),[Fn.Not]:go(ra(1,1),Ds(dd)),[Fn.Equal]:go(ra(2,2),Ds($b)),[Fn.NotEqual]:go(ra(2,2),Ds($b)),[Fn.GreaterThan]:go(ra(2,2),Ds(Va)),[Fn.GreaterThanOrEqualTo]:go(ra(2,2),Ds(Va)),[Fn.LessThan]:go(ra(2,2),Ds(Va)),[Fn.LessThanOrEqualTo]:go(ra(2,2),Ds(Va)),[Fn.Multiply]:go(ra(2,1/0),C9),[Fn.Coalesce]:go(ra(2,1/0),C9),[Fn.Divide]:go(ra(2,2),Ds(Va)),[Fn.Add]:go(ra(2,1/0),Ds(Va)),[Fn.Subtract]:go(ra(2,2),Ds(Va)),[Fn.Clamp]:go(ra(3,3),Ds(Va)),[Fn.Mod]:go(ra(2,2),Ds(Va)),[Fn.Pow]:go(ra(2,2),Ds(Va)),[Fn.Abs]:go(ra(1,1),Ds(Va)),[Fn.Floor]:go(ra(1,1),Ds(Va)),[Fn.Ceil]:go(ra(1,1),Ds(Va)),[Fn.Round]:go(ra(1,1),Ds(Va)),[Fn.Sin]:go(ra(1,1),Ds(Va)),[Fn.Cos]:go(ra(1,1),Ds(Va)),[Fn.Atan]:go(ra(1,2),Ds(Va)),[Fn.Sqrt]:go(ra(1,1),Ds(Va)),[Fn.Match]:go(ra(4,1/0),_9,Bee),[Fn.Between]:go(ra(3,3),Ds(Va)),[Fn.Interpolate]:go(ra(6,1/0),_9,Oee),[Fn.Case]:go(ra(3,1/0),Eee,Iee),[Fn.In]:go(ra(2,2),Tee),[Fn.Number]:go(ra(1,1/0),Ds($b)),[Fn.String]:go(ra(1,1/0),Ds($b)),[Fn.Array]:go(ra(1,1/0),Ds(Va)),[Fn.Color]:go(ra(1,4),Ds(Va)),[Fn.Band]:go(ra(1,3),Ds(Va)),[Fn.Palette]:go(ra(2,2),kee),[Fn.ToString]:go(ra(1,1),Ds(dd|Va|Gd|Jp))};function v9(n,e,t){const i=n.length-1,r=new Array(i);for(let a=0;a<i;++a){const l=n[a+1];switch(typeof l){case"number":{r[a]=new vc(Va,l);break}case"string":{r[a]=new vc(Gd,l);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${l}`)}a===0&&t.properties.add(String(l))}return r}function Mee(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new vc(Gd,i)]}function wee(n,e,t){t.featureId=!0}function See(n,e,t){t.geometryType=!0}function e5(n,e,t){t.mapState=!0}function ky(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function ra(n,e){return function(t,i,r){const a=t[0],l=t.length-1;if(n===e){if(l!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${a}, got ${l}`)}}else if(l<n||l>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${a}, got ${l}`)}}}function C9(n,e,t){const i=n.length-1,r=new Array(i);for(let a=0;a<i;++a){const l=ph(n[a+1],e,t);r[a]=l}return r}function Ds(n){return function(e,t,i){const r=e.length-1,a=new Array(r);for(let l=0;l<r;++l){const o=ph(e[l+1],n,i);a[l]=o}return a}}function Eee(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function _9(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function Bee(n,e,t){const i=n.length-1,r=Gd|Va|dd,a=ph(n[1],r,t),l=ph(n[n.length-1],e,t),o=new Array(i-2);for(let p=0;p<i-2;p+=2){try{const C=ph(n[p+2],a.type,t);o[p]=C}catch(C){throw new Error(`failed to parse argument ${p+1} of match expression: ${C.message}`)}try{const C=ph(n[p+3],l.type,t);o[p+1]=C}catch(C){throw new Error(`failed to parse argument ${p+2} of match expression: ${C.message}`)}}return[a,...o,l]}function Oee(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const p=i[1];if(typeof p!="number"||p<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(p)} instead`);r=p;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const a=new vc(Va,r);let l;try{l=ph(n[2],Va,t)}catch(p){throw new Error(`failed to parse argument 1 in interpolate expression: ${p.message}`)}const o=new Array(n.length-3);for(let p=0;p<o.length;p+=2){try{const C=ph(n[p+3],Va,t);o[p]=C}catch(C){throw new Error(`failed to parse argument ${p+2} for interpolate expression: ${C.message}`)}try{const C=ph(n[p+4],e,t);o[p+1]=C}catch(C){throw new Error(`failed to parse argument ${p+3} for interpolate expression: ${C.message}`)}}return[a,l,...o]}function Iee(n,e,t){const i=ph(n[n.length-1],e,t),r=new Array(n.length-1);for(let a=0;a<r.length-1;a+=2){try{const l=ph(n[a+1],dd,t);r[a]=l}catch(l){throw new Error(`failed to parse argument ${a} of case expression: ${l.message}`)}try{const l=ph(n[a+2],i.type,t);r[a+1]=l}catch(l){throw new Error(`failed to parse argument ${a+1} of case expression: ${l.message}`)}}return r[r.length-1]=i,r}function Tee(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=Gd}else r=Va;const a=new Array(i.length);for(let o=0;o<a.length;o++)try{const p=ph(i[o],r,t);a[o]=p}catch(p){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${p.message}`)}return[ph(n[1],r,t),...a]}function kee(n,e,t){let i;try{i=ph(n[1],Va,t)}catch(l){throw new Error(`failed to parse first argument in palette expression: ${l.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const a=new Array(r.length);for(let l=0;l<a.length;l++){let o;try{o=ph(r[l],Jp,t)}catch(p){throw new Error(`failed to parse color at index ${l} in palette expression: ${p.message}`)}if(!(o instanceof vc))throw new Error(`the palette color at index ${l} must be a literal value`);a[l]=o}return[i,...a]}function go(...n){return function(e,t,i){const r=e[0];let a;for(let l=0;l<n.length;l++){const o=n[l](e,t,i);if(l==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");a=o}}return new bee(t,r,...a)}}function Dee(n,e,t){const i=n[0],r=xee[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function iz(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return iz(n.getGeometries()[0]);default:return""}}function rz(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function N0(n,e,t){const i=ph(n,e,t);return rm(i)}function rm(n,e){if(n instanceof vc){if(n.type===Jp&&typeof n.value=="string"){const i=LO(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case Fn.Number:case Fn.String:case Fn.Coalesce:return Ree(n);case Fn.Get:case Fn.Var:case Fn.Has:return Pee(n);case Fn.Id:return i=>i.featureId;case Fn.GeometryType:return i=>i.geometryType;case Fn.Concat:{const i=n.args.map(r=>rm(r));return r=>"".concat(...i.map(a=>a(r).toString()))}case Fn.Resolution:return i=>i.resolution;case Fn.Any:case Fn.All:case Fn.Between:case Fn.In:case Fn.Not:return Uee(n);case Fn.Equal:case Fn.NotEqual:case Fn.LessThan:case Fn.LessThanOrEqualTo:case Fn.GreaterThan:case Fn.GreaterThanOrEqualTo:return Kee(n);case Fn.Multiply:case Fn.Divide:case Fn.Add:case Fn.Subtract:case Fn.Clamp:case Fn.Mod:case Fn.Pow:case Fn.Abs:case Fn.Floor:case Fn.Ceil:case Fn.Round:case Fn.Sin:case Fn.Cos:case Fn.Atan:case Fn.Sqrt:return Lee(n);case Fn.Case:return Fee(n);case Fn.Match:return zee(n);case Fn.Interpolate:return jee(n);case Fn.ToString:return Nee(n);default:throw new Error(`Unsupported operator ${t}`)}}function Ree(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=rm(n.args[a]);switch(t){case Fn.Coalesce:return a=>{for(let l=0;l<i;++l){const o=r[l](a);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Fn.Number:case Fn.String:return a=>{for(let l=0;l<i;++l){const o=r[l](a);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Pee(n,e){const i=n.args[0].value;switch(n.operator){case Fn.Get:return r=>{const a=n.args;let l=r.properties[i];for(let o=1,p=a.length;o<p;++o){const w=a[o].value;l=l[w]}return l};case Fn.Var:return r=>r.variables[i];case Fn.Has:return r=>{const a=n.args;if(!(i in r.properties))return!1;let l=r.properties[i];for(let o=1,p=a.length;o<p;++o){const w=a[o].value;if(!l||!Object.hasOwn(l,w))return!1;l=l[w]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Kee(n,e){const t=n.operator,i=rm(n.args[0]),r=rm(n.args[1]);switch(t){case Fn.Equal:return a=>i(a)===r(a);case Fn.NotEqual:return a=>i(a)!==r(a);case Fn.LessThan:return a=>i(a)<r(a);case Fn.LessThanOrEqualTo:return a=>i(a)<=r(a);case Fn.GreaterThan:return a=>i(a)>r(a);case Fn.GreaterThanOrEqualTo:return a=>i(a)>=r(a);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Uee(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=rm(n.args[a]);switch(t){case Fn.Any:return a=>{for(let l=0;l<i;++l)if(r[l](a))return!0;return!1};case Fn.All:return a=>{for(let l=0;l<i;++l)if(!r[l](a))return!1;return!0};case Fn.Between:return a=>{const l=r[0](a),o=r[1](a),p=r[2](a);return l>=o&&l<=p};case Fn.In:return a=>{const l=r[0](a);for(let o=1;o<i;++o)if(l===r[o](a))return!0;return!1};case Fn.Not:return a=>!r[0](a);default:throw new Error(`Unsupported logical operator ${t}`)}}function Lee(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=rm(n.args[a]);switch(t){case Fn.Multiply:return a=>{let l=1;for(let o=0;o<i;++o)l*=r[o](a);return l};case Fn.Divide:return a=>r[0](a)/r[1](a);case Fn.Add:return a=>{let l=0;for(let o=0;o<i;++o)l+=r[o](a);return l};case Fn.Subtract:return a=>r[0](a)-r[1](a);case Fn.Clamp:return a=>{const l=r[0](a),o=r[1](a);if(l<o)return o;const p=r[2](a);return l>p?p:l};case Fn.Mod:return a=>r[0](a)%r[1](a);case Fn.Pow:return a=>Math.pow(r[0](a),r[1](a));case Fn.Abs:return a=>Math.abs(r[0](a));case Fn.Floor:return a=>Math.floor(r[0](a));case Fn.Ceil:return a=>Math.ceil(r[0](a));case Fn.Round:return a=>Math.round(r[0](a));case Fn.Sin:return a=>Math.sin(r[0](a));case Fn.Cos:return a=>Math.cos(r[0](a));case Fn.Atan:return i===2?a=>Math.atan2(r[0](a),r[1](a)):a=>Math.atan(r[0](a));case Fn.Sqrt:return a=>Math.sqrt(r[0](a));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Fee(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=rm(n.args[r]);return r=>{for(let a=0;a<t-1;a+=2)if(i[a](r))return i[a+1](r);return i[t-1](r)}}function zee(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=rm(n.args[r]);return r=>{const a=i[0](r);for(let l=1;l<t-1;l+=2)if(a===i[l](r))return i[l+1](r);return i[t-1](r)}}function jee(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=rm(n.args[r]);return r=>{const a=i[0](r),l=i[1](r);let o,p;for(let C=2;C<t;C+=2){const w=i[C](r);let O=i[C+1](r);const U=Array.isArray(O);if(U&&(O=gee(O)),w>=l)return C===2?O:U?Gee(a,l,o,p,w,O):LC(a,l,o,p,w,O);o=w,p=O}return p}}function Nee(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let a=0;a<i;++a)r[a]=rm(n.args[a]);switch(t){case Fn.ToString:return a=>{const l=r[0](a);return n.args[0].type===Jp?FO(l):l.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function LC(n,e,t,i,r,a){const l=r-t;if(l===0)return i;const o=e-t,p=n===1?o/l:(Math.pow(n,o)-1)/(Math.pow(n,l)-1);return i+p*(a-i)}function Gee(n,e,t,i,r,a){if(r-t===0)return i;const o=g9(i),p=g9(a);let C=p[2]-o[2];C>180?C-=360:C<-180&&(C+=360);const w=[LC(n,e,t,o[0],r,p[0]),LC(n,e,t,o[1],r,p[1]),o[2]+LC(n,e,t,0,r,C),LC(n,e,t,i[3],r,a[3])];return yee(w)}const hr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class jO extends ub{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof r=="function"?hr.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(fo.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==hr.IDLE&&this.loader){this.state=hr.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;kv(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||tX&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=hr.LOADED}).catch(i=>{this.state=hr.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function Wee(n,e,t){const i=n;let r=!0,a=!1,l=!1;const o=[$x(i,fo.LOAD,function(){l=!0,a||e()})];return i.src&&dF?(a=!0,i.decode().then(function(){r&&e()}).catch(function(p){r&&(l?e():t())})):o.push($x(i,fo.ERROR,t)),function(){r=!1,o.forEach(Bl)}}function Qee(n,e){return new Promise((t,i)=>{function r(){l(),t(n)}function a(){l(),i(new Error("Image load error"))}function l(){n.removeEventListener("load",r),n.removeEventListener("error",a)}n.addEventListener("load",r),n.addEventListener("error",a)})}function Yee(n,e){return e&&(n.src=e),n.src&&dF?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):Qee(n)}class qee{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=t5(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=t5(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,a){const l=t5(e,t,i),o=l in this.cache_;this.cache_[l]=r,a&&(r.getImageState()===hr.IDLE&&r.load(),r.getImageState()===hr.LOADING?r.ready().then(()=>{this.patternCache_[l]=i3().createPattern(r.getImage(1),"repeat")}):this.patternCache_[l]=i3().createPattern(r.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function t5(n,e,t){const i=t?Rv(t):"null";return e+":"+n+":"+i}const yp=new qee;let bC=null;class oz extends ub{constructor(e,t,i,r,a){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=a,this.imageState_=r===void 0?hr.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===hr.LOADED){bC||(bC=Gu(1,1,void 0,{willReadFrequently:!0})),bC.drawImage(this.image_,0,0);try{bC.getImageData(0,0,1,1),this.tainted_=!1}catch{bC=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(fo.CHANGE)}handleImageError_(){this.imageState_=hr.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=hr.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Gu(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===hr.IDLE){this.image_||this.initializeImage_(),this.imageState_=hr.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Yee(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==hr.LOADED)return;const t=this.image_,i=Gu(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=pee(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===hr.LOADED||this.imageState_===hr.ERROR)e();else{const t=()=>{(this.imageState_===hr.LOADED||this.imageState_===hr.ERROR)&&(this.removeEventListener(fo.CHANGE,t),e())};this.addEventListener(fo.CHANGE,t)}})),this.ready_}}function NO(n,e,t,i,r,a){let l=e===void 0?void 0:yp.get(e,t,r);return l||(l=new oz(n,n&&"src"in n?n.src||void 0:e,t,i,r),yp.set(e,t,r,l,a)),a&&l&&!yp.getPattern(e,t,r)&&yp.set(e,t,r,l,a),l}function Ym(n){return n?Array.isArray(n)?FO(n):typeof n=="object"&&"src"in n?Hee(n):n:null}function Hee(n){if(!n.offset||!n.size)return yp.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=yp.getPattern(e,void 0,n.color);if(t)return t;const i=yp.get(n.src,"anonymous",null);if(i.getImageState()!==hr.LOADED)return null;const r=Gu(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),NO(r.canvas,e,void 0,hr.LOADED,n.color,!0),yp.getPattern(e,void 0,n.color)}const az="10px sans-serif",Wd="#000",Pv="round",D0=[],R0=0,Kv="round",O_=10,I_="#000",T_="center",r3="middle",I1=[0,0,0,0],k_=1,M1=new Am;let xC=null,b9;const Z6={},Vee=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function $ee(n,e,t){return`${n} ${e} 16px "${t}"`}const Zee=function(){let e,t;async function i(a){await t.ready;const l=await t.load(a);if(l.length===0)return!1;const o=V6(a),p=o.families[0].toLowerCase(),C=o.weight;return l.some(w=>{const O=w.family.replace(/^['"]|['"]$/g,"").toLowerCase(),U=H6[w.weight]||w.weight;return O===p&&w.style===o.style&&U==C})}async function r(){await t.ready;let a=!0;const l=M1.getProperties(),o=Object.keys(l).filter(p=>l[p]<100);for(let p=o.length-1;p>=0;--p){const C=o[p];let w=l[C];w<100&&(await i(C)?(lb(Z6),M1.set(C,100)):(w+=10,M1.set(C,w,!0),w<100&&(a=!1)))}e=void 0,a||(e=setTimeout(r,100))}return async function(a){t||(t=sO?self.fonts:document.fonts);const l=V6(a);if(!l)return;const o=l.families;let p=!1;for(const C of o){if(Vee.has(C))continue;const w=$ee(l.style,l.weight,C);M1.get(w)===void 0&&(M1.set(w,0,!0),p=!0)}p&&(clearTimeout(e),e=setTimeout(r,100))}}(),Xee=function(){let n;return function(e){let t=Z6[e];if(t==null){if(sO){const i=V6(e),r=sz(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Z6[e]=t}return t}}();function sz(n,e){return xC||(xC=Gu(1,1)),n!=b9&&(xC.font=n,b9=xC.font),xC.measureText(e)}function lz(n,e){return sz(n,e).width}function x9(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,a)=>Math.max(r,lz(n,a)),0);return t[e]=i,i}function Jee(n,e){const t=[],i=[],r=[];let a=0,l=0,o=0,p=0;for(let C=0,w=e.length;C<=w;C+=2){const O=e[C];if(O===`
`||C===w){a=Math.max(a,l),r.push(l),l=0,o+=p,p=0;continue}const U=e[C+1]||n.font,K=lz(U,O);t.push(K),l+=K;const j=Xee(U);i.push(j),p=Math.max(p,j)}return{width:a,height:o,widths:t,heights:i,lineWidths:r}}function ete(n,e,t,i,r,a,l,o,p,C,w){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=O=>O.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(p,C),n.scale(w[0],w[1]),tte(i,n)):w[0]<0||w[1]<0?(n.translate(p,C),n.scale(w[0],w[1]),n.drawImage(i,r,a,l,o,0,0,l,o)):n.drawImage(i,r,a,l,o,p,C,l*w[0],o*w[1]),n.restore()}function tte(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class p2{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=zh(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new p2({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return vo()}getImage(e){return vo()}getHitDetectionImage(){return vo()}getPixelRatio(e){return 1}getImageState(){return vo()}getImageSize(){return vo()}getOrigin(){return vo()}getSize(){return vo()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=zh(e)}listenImageChange(e){vo()}load(){vo()}unlistenImageChange(e){vo()}ready(){return Promise.resolve()}}class m2 extends p2{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?hr.LOADING:hr.LOADED,this.imageState_===hr.LOADING&&this.ready().then(()=>this.imageState_=hr.LOADED),this.render()}clone(){const e=this.getScale(),t=new m2({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=yp.get(i,null,null)?.getImage(1);if(!r){const a=this.renderOptions_,l=Math.ceil(a.size*e),o=Gu(l,l);this.draw_(a,o,e),r=o.canvas,yp.set(i,null,null,new oz(r,void 0,null,hr.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,a=this.radius2_===void 0?r:this.radius2_;if(r<a){const ae=r;r=a,a=ae}const l=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/l,p=a*Math.sin(o),C=Math.sqrt(a*a-p*p),w=r-C,O=Math.sqrt(p*p+w*w),U=O/p;if(e==="miter"&&U<=i)return U*t;const K=t/2/U,j=t/2*(w/O),Y=Math.sqrt((r+K)*(r+K)+j*j)-r;if(this.radius2_===void 0||e==="bevel")return Y*2;const te=r*Math.sin(o),J=Math.sqrt(r*r-te*te),oe=a-J,$=Math.sqrt(te*te+oe*oe)/te;if($<=i){const ae=$*t/2-a-r;return 2*Math.max(Y,ae)}return Y*2}createRenderOptions(){let e=Pv,t=Kv,i=0,r=null,a=0,l,o=0;this.stroke_&&(l=Ym(this.stroke_.getColor()??I_),o=this.stroke_.getWidth()??k_,r=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Kv,e=this.stroke_.getLineCap()??Pv,i=this.stroke_.getMiterLimit()??O_);const p=this.calculateLineJoinSize_(t,o,i),C=Math.max(this.radius,this.radius2_||0),w=Math.ceil(2*C+p);return{strokeStyle:l,strokeWidth:o,size:w,lineCap:e,lineDash:r,lineDashOffset:a,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=Wd),t.fillStyle=Ym(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=Rv(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=Gu(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const a=this.angle_-Math.PI/2,l=2*Math.PI/t;for(let o=0;o<t;o++){const p=a+o*l,C=o%2===0?i:r;e.lineTo(C*Math.cos(p),C*Math.sin(p))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Wd,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class gb extends m2{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new gb({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class T0{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new T0({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=NO(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===hr.IDLE&&t.load(),t.getImageState()===hr.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Io(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Rv(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function M9(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class Uv extends p2{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,a=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:a,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const l=e.img!==void 0?e.img:null;let o=e.src;ws(!(o!==void 0&&l),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&l&&(o=l.src||Io(l)),ws(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),ws(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let p;if(e.src!==void 0?p=hr.IDLE:l!==void 0&&("complete"in l?l.complete?p=l.src?hr.LOADED:hr.IDLE:p=hr.LOADING:p=hr.LOADED),this.color_=e.color!==void 0?Rv(e.color):null,this.iconImage_=NO(l,o,this.crossOrigin_,p,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let C,w;if(e.size)[C,w]=e.size;else{const O=this.getImage(1);if(O.width&&O.height)C=O.width,w=O.height;else if(O instanceof HTMLImageElement){this.initialOptions_=e;const U=()=>{if(this.unlistenImageChange(U),!this.initialOptions_)return;const K=this.iconImage_.getSize();this.setScale(M9(K[0],K[1],e.width,e.height))};this.listenImageChange(U);return}}C!==void 0&&this.setScale(M9(C,w,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Uv({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==hr.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==hr.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(fo.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(fo.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Sg{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Sg({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Cf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=w9,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Cf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=w9,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function nte(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(ws(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let n5=null;function uz(n,e){if(!n5){const t=new T0({color:"rgba(255,255,255,0.4)"}),i=new Sg({color:"#3399CC",width:1.25});n5=[new Cf({image:new gb({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return n5}function w9(n){return n.getGeometry()}const ite="#333";class g2{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=zh(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new T0({color:ite}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new g2({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=zh(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function rte(n){return!0}function ote(n){const e=nz(),t=ate(n,e),i=rz();return function(r,a){if(i.properties=r.getPropertiesInternal(),i.resolution=a,e.featureId){const l=r.getId();l!==void 0?i.featureId=l:i.featureId=null}return e.geometryType&&(i.geometryType=iz(r.getGeometry())),t(i)}}function S9(n){const e=nz(),t=n.length,i=new Array(t);for(let l=0;l<t;++l)i[l]=X6(n[l],e);const r=rz(),a=new Array(t);return function(l,o){if(r.properties=l.getPropertiesInternal(),r.resolution=o,e.featureId){const C=l.getId();C!==void 0?r.featureId=C:r.featureId=null}let p=0;for(let C=0;C<t;++C){const w=i[C](r);w&&(a[p]=w,p+=1)}return a.length=p,a}}function ate(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const a=n[r],l="filter"in a?N0(a.filter,dd,e):rte;let o;if(Array.isArray(a.style)){const p=a.style.length;o=new Array(p);for(let C=0;C<p;++C)o[C]=X6(a.style[C],e)}else o=[X6(a.style,e)];i[r]={filter:l,styles:o}}return function(r){const a=[];let l=!1;for(let o=0;o<t;++o){const p=i[o].filter;if(p(r)&&!(n[o].else&&l)){l=!0;for(const C of i[o].styles){const w=C(r);w&&a.push(w)}}}return a}}function X6(n,e){const t=D_(n,"",e),i=R_(n,"",e),r=ste(n,e),a=lte(n,e),l=Qd(n,"z-index",e);if(!t&&!i&&!r&&!a&&!Lg(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Cf;return function(p){let C=!0;if(t){const w=t(p);w&&(C=!1),o.setFill(w)}if(i){const w=i(p);w&&(C=!1),o.setStroke(w)}if(r){const w=r(p);w&&(C=!1),o.setText(w)}if(a){const w=a(p);w&&(C=!1),o.setImage(w)}return l&&o.setZIndex(l(p)),C?null:o}}function D_(n,e,t){let i;if(e+"fill-pattern-src"in n)i=hte(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return a=>null;i=GO(n,e+"fill-color",t)}if(!i)return null;const r=new T0;return function(a){const l=i(a);return l===UO?null:(r.setColor(l),r)}}function R_(n,e,t){const i=Qd(n,e+"stroke-width",t),r=GO(n,e+"stroke-color",t);if(!i&&!r)return null;const a=I0(n,e+"stroke-line-cap",t),l=I0(n,e+"stroke-line-join",t),o=Az(n,e+"stroke-line-dash",t),p=Qd(n,e+"stroke-line-dash-offset",t),C=Qd(n,e+"stroke-miter-limit",t),w=new Sg;return function(O){if(r){const U=r(O);if(U===UO)return null;w.setColor(U)}if(i&&w.setWidth(i(O)),a){const U=a(O);if(U!=="butt"&&U!=="round"&&U!=="square")throw new Error("Expected butt, round, or square line cap");w.setLineCap(U)}if(l){const U=l(O);if(U!=="bevel"&&U!=="round"&&U!=="miter")throw new Error("Expected bevel, round, or miter line join");w.setLineJoin(U)}return o&&w.setLineDash(o(O)),p&&w.setLineDashOffset(p(O)),C&&w.setMiterLimit(C(O)),w}}function ste(n,e){const t="text-",i=I0(n,t+"value",e);if(!i)return null;const r=D_(n,t,e),a=D_(n,t+"background-",e),l=R_(n,t,e),o=R_(n,t+"background-",e),p=I0(n,t+"font",e),C=Qd(n,t+"max-angle",e),w=Qd(n,t+"offset-x",e),O=Qd(n,t+"offset-y",e),U=vv(n,t+"overflow",e),K=I0(n,t+"placement",e),j=Qd(n,t+"repeat",e),W=y2(n,t+"scale",e),Y=vv(n,t+"rotate-with-view",e),te=Qd(n,t+"rotation",e),J=I0(n,t+"align",e),oe=I0(n,t+"justify",e),ne=I0(n,t+"baseline",e),$=vv(n,t+"keep-upright",e),ae=Az(n,t+"padding",e),G=v2(n,t+"declutter-mode"),ce=new g2({declutterMode:G});return function(ge){if(ce.setText(i(ge)),r&&ce.setFill(r(ge)),a&&ce.setBackgroundFill(a(ge)),l&&ce.setStroke(l(ge)),o&&ce.setBackgroundStroke(o(ge)),p&&ce.setFont(p(ge)),C&&ce.setMaxAngle(C(ge)),w&&ce.setOffsetX(w(ge)),O&&ce.setOffsetY(O(ge)),U&&ce.setOverflow(U(ge)),K){const ye=K(ge);if(ye!=="point"&&ye!=="line")throw new Error("Expected point or line for text-placement");ce.setPlacement(ye)}if(j&&ce.setRepeat(j(ge)),W&&ce.setScale(W(ge)),Y&&ce.setRotateWithView(Y(ge)),te&&ce.setRotation(te(ge)),J){const ye=J(ge);if(ye!=="left"&&ye!=="center"&&ye!=="right"&&ye!=="end"&&ye!=="start")throw new Error("Expected left, right, center, start, or end for text-align");ce.setTextAlign(ye)}if(oe){const ye=oe(ge);if(ye!=="left"&&ye!=="right"&&ye!=="center")throw new Error("Expected left, right, or center for text-justify");ce.setJustify(ye)}if(ne){const ye=ne(ge);if(ye!=="bottom"&&ye!=="top"&&ye!=="middle"&&ye!=="alphabetic"&&ye!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");ce.setTextBaseline(ye)}return ae&&ce.setPadding(ae(ge)),$&&ce.setKeepUpright($(ge)),ce}}function lte(n,e){return"icon-src"in n?ute(n,e):"shape-points"in n?Ate(n,e):"circle-radius"in n?cte(n,e):null}function ute(n,e){const t="icon-",i=t+"src",r=cz(n[i],i),a=o3(n,t+"anchor",e),l=y2(n,t+"scale",e),o=Qd(n,t+"opacity",e),p=o3(n,t+"displacement",e),C=Qd(n,t+"rotation",e),w=vv(n,t+"rotate-with-view",e),O=B9(n,t+"anchor-origin"),U=O9(n,t+"anchor-x-units"),K=O9(n,t+"anchor-y-units"),j=mte(n,t+"color"),W=fte(n,t+"cross-origin"),Y=pte(n,t+"offset"),te=B9(n,t+"offset-origin"),J=a3(n,t+"width"),oe=a3(n,t+"height"),ne=dte(n,t+"size"),$=v2(n,t+"declutter-mode"),ae=new Uv({src:r,anchorOrigin:O,anchorXUnits:U,anchorYUnits:K,color:j,crossOrigin:W,offset:Y,offsetOrigin:te,height:oe,width:J,size:ne,declutterMode:$});return function(G){return o&&ae.setOpacity(o(G)),p&&ae.setDisplacement(p(G)),C&&ae.setRotation(C(G)),w&&ae.setRotateWithView(w(G)),l&&ae.setScale(l(G)),a&&ae.setAnchor(a(G)),ae}}function Ate(n,e){const t="shape-",i=t+"points",r=t+"radius",a=J6(n[i],i),l=J6(n[r],r),o=D_(n,t,e),p=R_(n,t,e),C=y2(n,t+"scale",e),w=o3(n,t+"displacement",e),O=Qd(n,t+"rotation",e),U=vv(n,t+"rotate-with-view",e),K=a3(n,t+"radius2"),j=a3(n,t+"angle"),W=v2(n,t+"declutter-mode"),Y=new m2({points:a,radius:l,radius2:K,angle:j,declutterMode:W});return function(te){return o&&Y.setFill(o(te)),p&&Y.setStroke(p(te)),w&&Y.setDisplacement(w(te)),O&&Y.setRotation(O(te)),U&&Y.setRotateWithView(U(te)),C&&Y.setScale(C(te)),Y}}function cte(n,e){const t="circle-",i=D_(n,t,e),r=R_(n,t,e),a=Qd(n,t+"radius",e),l=y2(n,t+"scale",e),o=o3(n,t+"displacement",e),p=Qd(n,t+"rotation",e),C=vv(n,t+"rotate-with-view",e),w=v2(n,t+"declutter-mode"),O=new gb({radius:5,declutterMode:w});return function(U){return a&&O.setRadius(a(U)),i&&O.setFill(i(U)),r&&O.setStroke(r(U)),o&&O.setDisplacement(o(U)),p&&O.setRotation(p(U)),C&&O.setRotateWithView(C(U)),l&&O.setScale(l(U)),O}}function Qd(n,e,t){if(!(e in n))return;const i=N0(n[e],Va,t);return function(r){return J6(i(r),e)}}function I0(n,e,t){if(!(e in n))return null;const i=N0(n[e],Gd,t);return function(r){return cz(i(r),e)}}function hte(n,e,t){const i=I0(n,e+"pattern-src",t),r=E9(n,e+"pattern-offset",t),a=E9(n,e+"pattern-size",t),l=GO(n,e+"color",t);return function(o){return{src:i(o),offset:r&&r(o),size:a&&a(o),color:l&&l(o)}}}function vv(n,e,t){if(!(e in n))return null;const i=N0(n[e],dd,t);return function(r){const a=i(r);if(typeof a!="boolean")throw new Error(`Expected a boolean for ${e}`);return a}}function GO(n,e,t){if(!(e in n))return null;const i=N0(n[e],Jp,t);return function(r){return hz(i(r),e)}}function Az(n,e,t){if(!(e in n))return null;const i=N0(n[e],q1,t);return function(r){return yb(i(r),e)}}function o3(n,e,t){if(!(e in n))return null;const i=N0(n[e],q1,t);return function(r){const a=yb(i(r),e);if(a.length!==2)throw new Error(`Expected two numbers for ${e}`);return a}}function E9(n,e,t){if(!(e in n))return null;const i=N0(n[e],q1,t);return function(r){return dz(i(r),e)}}function y2(n,e,t){if(!(e in n))return null;const i=N0(n[e],q1|Va,t);return function(r){return gte(i(r),e)}}function a3(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function dte(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return zh(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function fte(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function B9(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function O9(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function pte(n,e){const t=n[e];if(t!==void 0)return yb(t,e)}function v2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function mte(n,e){const t=n[e];if(t!==void 0)return hz(t,e)}function yb(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function cz(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function J6(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function hz(n,e){if(typeof n=="string")return n;const t=yb(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function dz(n,e){const t=yb(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function gte(n,e){return typeof n=="number"?n:dz(n,e)}const I9={RENDER_ORDER:"renderOrder"};class WO extends $v{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(I9.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new ez(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(I9.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?uz:e;const t=yte(e);this.styleFunction_=e===null?void 0:nte(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function yte(n){if(n===void 0)return uz;if(!n)return null;if(typeof n=="function"||n instanceof Cf)return n;if(!Array.isArray(n))return S9([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Cf){const r=new Array(e);for(let a=0;a<e;++a){const l=n[a];if(!(l instanceof Cf))throw new Error("Expected a list of style instances");r[a]=l}return r}if("style"in t){const r=new Array(e);for(let a=0;a<e;++a){const l=n[a];if(!("style"in l))throw new Error("Expected a list of rules with a style property");r[a]=l}return ote(r)}return S9(n)}class fz extends um{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}class vte extends sb{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){vo()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Jm(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),DF(r,i)}forEachFeatureAtCoordinate(e,t,i,r,a,l,o,p){let C;const w=t.viewState;function O(ne,$,ae,G){return a.call(l,$,ne?ae:null,G)}const U=w.projection,K=cO(e.slice(),U),j=[[0,0]];if(U.canWrapX()&&r){const ne=U.getExtent(),$=ss(ne);j.push([-$,0],[$,0])}const W=t.layerStatesArray,Y=W.length,te=[],J=[];for(let ne=0;ne<j.length;ne++)for(let $=Y-1;$>=0;--$){const ae=W[$],G=ae.layer;if(G.hasRenderer()&&KO(ae,w)&&o.call(p,G)){const ce=G.getRenderer(),ge=G.getSource();if(ce&&ge){const ye=ge.getWrapX()?K:e,we=O.bind(null,ae.managed);J[0]=ye[0]+j[ne][0],J[1]=ye[1]+j[ne][1],C=ce.forEachFeatureAtCoordinate(J,t,i,we,te)}if(C)return C}}if(te.length===0)return;const oe=1/te.length;return te.forEach((ne,$)=>ne.distanceSq+=$*oe),te.sort((ne,$)=>ne.distanceSq-$.distanceSq),te.some(ne=>C=ne.callback(ne.feature,ne.layer,ne.geometry)),C}hasFeatureAtCoordinate(e,t,i,r,a,l){return this.forEachFeatureAtCoordinate(e,t,i,r,x_,this,a,l)!==void 0}getMap(){return this.map_}renderFrame(e){vo()}scheduleExpireIconCache(e){yp.canExpireCache()&&e.postRenderFunctions.push(Cte)}}function Cte(n,e){yp.expire()}class _te extends vte{constructor(e){super(e),this.fontChangeListenerKey_=Za(M1,Tv.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=f2+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new fz(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Bl(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(gp.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,p)=>o.zIndex-p.zIndex);t.some(o=>o.layer instanceof WO&&o.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const a=[];let l=null;for(let o=0,p=t.length;o<p;++o){const C=t[o];e.layerIndex=o;const w=C.layer,O=w.getSourceState();if(!KO(C,r)||O!="ready"&&O!="undefined"){w.unrender();continue}const U=w.render(e,l);U&&(U!==l&&(this.children_.push(U),l=U),a.push(C))}this.declutter(e,a),TJ(this.element_,this.children_),this.dispatchRenderEvent(gp.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],a=r.layer;a.getDeclutter()&&a.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function pz(n){if(n instanceof $v){n.setMapInternal(null);return}n instanceof Vv&&n.getLayers().forEach(pz)}function mz(n,e){if(n instanceof $v){n.setMapInternal(e);return}if(n instanceof Vv){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)mz(t[i],e)}}let C2=class extends Am{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=bte(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:eX,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Yd(),this.pixelToCoordinateTransform_=Yd(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||PJ(),this.interactions=t.interactions||iee({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new pF(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Uh.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Uh.VIEW,this.handleViewChanged_),this.addChangeListener(Uh.SIZE,this.handleSizeChanged_),this.addChangeListener(Uh.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Xp)&&e.view.then(function(r){i.setView(new Xp(r))}),this.controls.addEventListener(Nd.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Nd.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Nd.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Nd.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Nd.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Nd.REMOVE,r=>{const a=r.element.getId();a!==void 0&&delete this.overlayIdIndex_[a.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){mz(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const a=i.hitTolerance!==void 0?i.hitTolerance:0,l=i.layerFilter!==void 0?i.layerFilter:x_,o=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,a,o,t,null,l,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof Vv?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:x_,a=t.hitTolerance!==void 0?t.hitTolerance:0,l=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,a,l,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),a=i.width/r[0],l=i.height/r[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-i.left)/a,(o.clientY-i.top)/l]}getTarget(){return this.get(Uh.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Q6(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?tc(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Uh.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Gm){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const a=r.layer.getRenderer();if(a&&!a.ready)return!0;const l=r.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(e){const t=B0(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?tc(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Uh.SIZE)}getView(){return this.get(Uh.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return rX(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new pg(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===P6.POINTERDOWN||i===fo.WHEEL||i===fo.KEYDOWN){const r=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():r,l=t.target,o=a instanceof ShadowRoot?a.host===l?a.host.ownerDocument:a:a===r?r.documentElement:a;if(this.overlayContainerStopEvent_.contains(l)||!o.contains(l))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let a=r.length-1;a>=0;a--){const l=r[a];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,a=r;if(e){const l=e.viewHints;if(l[vu.ANIMATING]||l[vu.INTERACTING]){const o=Date.now()-e.time>8;r=o?0:8,a=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,a))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(gp.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(gp.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new av(O0.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new av(O0.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,a=i.length;r<a;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Bl(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(fo.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(fo.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new _te(this)),this.mapBrowserEventHandler_=new nX(this,this.moveTolerance_);for(const a in sA)this.mapBrowserEventHandler_.addEventListener(sA[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(fo.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(fo.WHEEL,this.boundHandleBrowserEvent_,fF?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const a=t.getRootNode();i=a instanceof ShadowRoot?a.host:t}this.targetChangeHandlerKeys_=[Za(i,fo.KEYDOWN,this.handleBrowserEvent,this),Za(i,fo.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Bl(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Bl(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Za(e,Tv.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Za(e,fo.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Bl),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new gg("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Za(e,Tv.PROPERTYCHANGE,this.render,this),Za(e,fo.CHANGE,this.render,this),Za(e,"addlayer",this.handleLayerAdd_,this),Za(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){pz(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let a=null;if(t!==void 0&&y9(t)&&i&&i.isDef()){const l=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Xx(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:l,wantedTiles:{},mapId:Io(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const p=isNaN(o.nextRotation)?o.rotation:o.nextRotation;a.nextExtent=Xx(o.nextCenter,o.nextResolution,p,t)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),r&&(!this.previousExtent_||!Z1(this.previousExtent_)&&!U0(a.extent,this.previousExtent_))&&(this.dispatchEvent(new av(O0.MOVESTART,this,r)),this.previousExtent_=qv(this.previousExtent_)),this.previousExtent_&&!a.viewHints[vu.ANIMATING]&&!a.viewHints[vu.INTERACTING]&&!U0(a.extent,this.previousExtent_)&&(this.dispatchEvent(new av(O0.MOVEEND,this,a)),mF(a.extent,this.previousExtent_))),this.dispatchEvent(new av(O0.POSTRENDER,this,a)),this.renderComplete_=(this.hasListener(O0.LOADSTART)||this.hasListener(O0.LOADEND)||this.hasListener(gp.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new gg("removelayer",t)),this.set(Uh.LAYERGROUP,e)}setSize(e){this.set(Uh.SIZE,e)}setTarget(e){this.set(Uh.TARGET,e)}setView(e){if(!e||e instanceof Xp){this.set(Uh.VIEW,e);return}this.set(Uh.VIEW,new Xp);const t=this;e.then(function(i){t.setView(new Xp(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),a=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),l=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(a)&&!isNaN(l)&&(t=[Math.max(0,a),Math.max(0,l)],!y9(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&wF("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!zg(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function bte(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Vv({layers:n.layers});t[Uh.LAYERGROUP]=i,t[Uh.TARGET]=n.target,t[Uh.VIEW]=n.view instanceof Xp?n.view:new Xp;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Gm(n.controls.slice()):(ws(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let a;n.interactions!==void 0&&(Array.isArray(n.interactions)?a=new Gm(n.interactions.slice()):(ws(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),a=n.interactions));let l;return n.overlays!==void 0?Array.isArray(n.overlays)?l=new Gm(n.overlays.slice()):(ws(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),l=n.overlays):l=new Gm,{controls:r,interactions:a,keyboardEventTarget:e,overlays:l,values:t}}class _2 extends Am{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new _2(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Bl(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Za(e,fo.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?xte(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function xte(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(ws(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function gz(n,e,t,i){const r=[];let a=bp();for(let l=0,o=t.length;l<o;++l){const p=t[l];a=uO(n,e,p[0],i),r.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=p[p.length-1]}return r}function s3(n,e,t,i,r,a,l){let o,p;const C=(t-e)/i;if(C===1)o=e;else if(C===2)o=e,p=r;else if(C!==0){let w=n[e],O=n[e+1],U=0;const K=[0];for(let Y=e+i;Y<t;Y+=i){const te=n[Y],J=n[Y+1];U+=Math.sqrt((te-w)*(te-w)+(J-O)*(J-O)),K.push(U),w=te,O=J}const j=r*U,W=YZ(K,j);W<0?(p=(j-K[-W-2])/(K[-W-1]-K[-W-2]),o=e+(-W-2)*i):o=e+W*i}l=l>1?l:2,a=a||new Array(l);for(let w=0;w<l;++w)a[w]=o===void 0?NaN:p===void 0?n[o+w]:vf(n[o+w],n[o+i+w],p);return a}function eB(n,e,t,i,r,a){if(t==e)return null;let l;if(r<n[e+i-1])return a?(l=n.slice(e,e+i),l[i-1]=r,l):null;if(n[t-1]<r)return a?(l=n.slice(t-i,t),l[i-1]=r,l):null;if(r==n[e+i-1])return n.slice(e,e+i);let o=e/i,p=t/i;for(;o<p;){const U=o+p>>1;r<n[(U+1)*i-1]?p=U:o=U+1}const C=n[o*i-1];if(r==C)return n.slice((o-1)*i,(o-1)*i+i);const w=n[(o+1)*i-1],O=(r-C)/(w-C);l=[];for(let U=0;U<i-1;++U)l.push(vf(n[(o-1)*i+U],n[o*i+U],O));return l.push(r),l}function Mte(n,e,t,i,r,a,l){if(l)return eB(n,e,t[t.length-1],i,r,a);let o;if(r<n[i-1])return a?(o=n.slice(0,i),o[i-1]=r,o):null;if(n[n.length-1]<r)return a?(o=n.slice(n.length-i),o[i-1]=r,o):null;for(let p=0,C=t.length;p<C;++p){const w=t[p];if(e!=w){if(r<n[e+i-1])return null;if(r<=n[w-1])return eB(n,e,w,i,r,!1);e=w}}return null}class l3 extends PF{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Bl),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(Za(e[t],fo.CHANGE,this.changed,this))}clone(){const e=new l3(i5(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<$1(this.getExtent(),e,t))return r;const a=this.geometries_;for(let l=0,o=a.length;l<o;++l)r=a[l].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,a=i.length;r<a;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){qv(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)yF(e,t[i].getExtent());return e}getGeometries(){return i5(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let a=0,l=i.length;a<l;++a){const o=i[a],p=o.getSimplifiedGeometry(e);t.push(p),p!==o&&(r=!0)}return r?new l3(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,a=i.length;r<a;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Bf(this.getExtent()));const r=this.geometries_;for(let a=0,l=r.length;a<l;++a)r[a].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(i5(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,a=i.length;r<a;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function i5(n){return n.map(e=>e.clone())}function QO(n,e,t,i){let r=n[e],a=n[e+1],l=0;for(let o=e+i;o<t;o+=i){const p=n[o],C=n[o+1];l+=Math.sqrt((p-r)*(p-r)+(C-a)*(C-a)),r=p,a=C}return l}class H1 extends X1{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Zm(this.flatCoordinates,e),this.changed()}clone(){const e=new H1(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<$1(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_O(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return jF(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,eB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return wg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return s3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return QO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=h2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new H1(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return d2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c2(this.flatCoordinates,0,e,this.stride),this.changed()}}class P_ extends X1{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,a=[],l=[];for(let p=0,C=r.length;p<C;++p){const w=r[p];Zm(a,w.getFlatCoordinates()),l.push(a.length)}const o=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(o,a),this.ends_=l}}appendLineString(e){Zm(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new P_(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<$1(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(CO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,Mte(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return E_(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new H1(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let a=0;for(let l=0,o=t.length;l<o;++l){const p=t[l],C=new H1(e.slice(a,p),i);r.push(C),a=p}return r}getLength(){const e=this.ends_;let t=0,i=0;for(let r=0,a=e.length;r<a;++r)i+=QO(this.flatCoordinates,t,e[r],this.stride),t=e[r];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,a=this.stride;for(let l=0,o=r.length;l<o;++l){const p=r[l],C=s3(t,i,p,a,.5);Zm(e,C),i=p}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=FF(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new P_(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return mJ(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=db(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class vb extends X1{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Zm(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new vb(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<$1(this.getExtent(),e,t))return r;const a=this.flatCoordinates,l=this.stride;for(let o=0,p=a.length;o<p;o+=l){const C=U1(e,t,a[o],a[o+1]);if(C<r){r=C;for(let w=0;w<l;++w)i[w]=a[o+w];i.length=l}}return r}getCoordinates(){return wg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Y1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let a=0,l=e.length;a<l;a+=i){const o=new Y1(e.slice(a,a+i),t);r.push(o)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,a=t.length;r<a;r+=i){const l=t[r],o=t[r+1];if(lO(e,l,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c2(this.flatCoordinates,0,e,this.stride),this.changed()}}class K_ extends X1{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,a=[],l=[];for(let o=0,p=r.length;o<p;++o){const C=r[o],w=a.length,O=C.getEnds();for(let U=0,K=O.length;U<K;++U)O[U]+=w;Zm(a,C.getFlatCoordinates()),l.push(O)}t=r.length===0?this.getLayout():r[0].getLayout(),e=a,i=l}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Zm(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,a=t.length;r<a;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new K_(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<$1(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uJ(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return pJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return lJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),q6(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Y6(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=gz(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=zF(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new vb(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;WF(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=q6(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=dJ(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new K_(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const a=this.endss_[e-1];t=a[a.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let a=0,l=i.length;a<l;++a)i[a]-=t;return new L0(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let a=0;for(let l=0,o=i.length;l<o;++l){const p=i[l].slice(),C=p[p.length-1];if(a!==0)for(let O=0,U=p.length;O<U;++O)p[O]-=a;const w=new L0(t.slice(a,C),e,p);r.push(w),a=C}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return gJ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=LF(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const T9=Yd();class Fh{constructor(e,t,i,r,a,l){this.styleFunction,this.extent_,this.id_=l,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=a,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?gF(this.flatCoordinates_):uO(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Bf(this.getExtent());this.flatInteriorPoints_=wO(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=QF(this.flatCoordinates_,this.ends_),t=gz(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=zF(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=s3(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,a=i.length;r<a;++r){const l=i[r],o=s3(e,t,l,2,.5);Zm(this.flatMidpoints_,o),t=l}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Qs(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=ic(i)/ic(t);Jm(T9,i[0],i[3],r,-r,0,0,0),Kg(this.flatCoordinates_,0,this.flatCoordinates_.length,2,T9,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Fh(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=cF((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=h2(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=FF(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=xO(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new Fh(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Fh.prototype.getFlatCoordinates=Fh.prototype.getOrientedFlatCoordinates;class yz{drawCustom(e,t,i,r,a){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class wte extends yz{constructor(e,t,i,r,a,l,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?i2(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=a,this.squaredTolerance_=l,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Yd()}drawImages_(e,t,i,r){if(!this.image_)return;const a=Kg(e,t,i,r,this.transform_,this.pixelCoordinates_),l=this.context_,o=this.tmpLocalTransform_,p=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=p*this.imageOpacity_);let C=this.imageRotation_;this.transformRotation_===0&&(C-=this.viewRotation_),this.imageRotateWithView_&&(C+=this.viewRotation_);for(let w=0,O=a.length;w<O;w+=2){const U=a[w]-this.imageAnchorX_,K=a[w+1]-this.imageAnchorY_;if(C!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const j=U+this.imageAnchorX_,W=K+this.imageAnchorY_;Jm(o,j,W,1,1,C,-j,-W),l.save(),l.transform.apply(l,o),l.translate(j,W),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.restore()}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,U,K,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=p)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=Kg(e,t,i,r,this.transform_,this.pixelCoordinates_),l=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<i;t+=r){const p=a[t]+this.textOffsetX_,C=a[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.save(),l.translate(p-this.textOffsetX_,C-this.textOffsetY_),l.rotate(o),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.restore()):(this.textStrokeState_&&l.strokeText(this.text_,p,C),this.textFillState_&&l.fillText(this.text_,p,C))}}moveToLineTo_(e,t,i,r,a){const l=this.context_,o=Kg(e,t,i,r,this.transform_,this.pixelCoordinates_);l.moveTo(o[0],o[1]);let p=o.length;a&&(p-=2);for(let C=2;C<p;C+=2)l.lineTo(o[C],o[C+1]);return a&&l.closePath(),i}drawRings_(e,t,i,r){for(let a=0,l=i.length;a<l;++a)t=this.moveToLineTo_(e,t,i[a],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!uA(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=sJ(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],a=Math.sqrt(i*i+r*r),l=this.context_;l.beginPath(),l.arc(t[0],t[1],a,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!uA(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(uA(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let a=0;const l=e.getEnds(),o=e.getStride();i.beginPath();for(let p=0,C=l.length;p<C;++p)a=this.moveToLineTo_(r,a,l[p],o,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!uA(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!uA(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const a=e.getEndss(),l=e.getStride();t.beginPath();for(let o=0,p=a.length;o<p;++o){const C=a[o];r=this.drawRings_(i,r,C,l)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),zg(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:T_;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Ym(i||Wd)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),a=t.getLineDash(),l=t.getLineDashOffset(),o=t.getLineJoin(),p=t.getWidth(),C=t.getMiterLimit(),w=a||D0;this.strokeState_={lineCap:r!==void 0?r:Pv,lineDash:this.pixelRatio_===1?w:w.map(O=>O*this.pixelRatio_),lineDashOffset:(l||R0)*this.pixelRatio_,lineJoin:o!==void 0?o:Kv,lineWidth:(p!==void 0?p:k_)*this.pixelRatio_,miterLimit:C!==void 0?C:O_,strokeStyle:Ym(i||I_)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),a=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const l=e.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/i,l[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const K=t.getColor();this.textFillState_={fillStyle:Ym(K||Wd)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const K=i.getColor(),j=i.getLineCap(),W=i.getLineDash(),Y=i.getLineDashOffset(),te=i.getLineJoin(),J=i.getWidth(),oe=i.getMiterLimit();this.textStrokeState_={lineCap:j!==void 0?j:Pv,lineDash:W||D0,lineDashOffset:Y||R0,lineJoin:te!==void 0?te:Kv,lineWidth:J!==void 0?J:k_,miterLimit:oe!==void 0?oe:O_,strokeStyle:Ym(K||I_)}}const r=e.getFont(),a=e.getOffsetX(),l=e.getOffsetY(),o=e.getRotateWithView(),p=e.getRotation(),C=e.getScaleArray(),w=e.getText(),O=e.getTextAlign(),U=e.getTextBaseline();this.textState_={font:r!==void 0?r:az,textAlign:O!==void 0?O:T_,textBaseline:U!==void 0?U:r3},this.text_=w!==void 0?Array.isArray(w)?w.reduce((K,j,W)=>K+=W%2?" ":j,""):w:"",this.textOffsetX_=a!==void 0?this.pixelRatio_*a:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=p!==void 0?p:0,this.textScale_=[this.pixelRatio_*C[0],this.pixelRatio_*C[1]]}}}const Ste=.5,vz={Point:Rte,LineString:Tte,Polygon:Kte,MultiPoint:Pte,MultiLineString:kte,MultiPolygon:Dte,GeometryCollection:Ite,Circle:Bte};function Ete(n,e){return parseInt(Io(n),10)-parseInt(Io(e),10)}function tB(n,e){const t=Cz(n,e);return t*t}function Cz(n,e){return Ste*n/e}function Bte(n,e,t,i,r){const a=t.getFill(),l=t.getStroke();if(a||l){const p=n.getBuilder(t.getZIndex(),"Circle");p.setFillStrokeStyle(a,l),p.drawCircle(e,i,r)}const o=t.getText();if(o&&o.getText()){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(o),p.drawText(e,i)}}function u3(n,e,t,i,r,a,l,o){const p=[],C=t.getImage();if(C){let U=!0;const K=C.getImageState();K==hr.LOADED||K==hr.ERROR?U=!1:K==hr.IDLE&&C.load(),U&&p.push(C.ready())}const w=t.getFill();w&&w.loading()&&p.push(w.ready());const O=p.length>0;return O&&Promise.all(p).then(()=>r(null)),Ote(n,e,t,i,a,l,o),O}function Ote(n,e,t,i,r,a,l){const o=t.getGeometryFunction()(e);if(!o)return;const p=o.simplifyTransformed(i,r);if(t.getRenderer())_z(n,p,t,e,l);else{const w=vz[p.getType()];w(n,p,t,e,l,a)}}function _z(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const l=e.getGeometries();for(let o=0,p=l.length;o<p;++o)_z(n,l[o],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function Ite(n,e,t,i,r,a){const l=e.getGeometriesArray();let o,p;for(o=0,p=l.length;o<p;++o){const C=vz[l[o].getType()];C(n,l[o],t,i,r,a)}}function Tte(n,e,t,i,r){const a=t.getStroke();if(a){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,a),o.drawLineString(e,i,r)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,i,r)}}function kte(n,e,t,i,r){const a=t.getStroke();if(a){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,a),o.drawMultiLineString(e,i,r)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,i,r)}}function Dte(n,e,t,i,r){const a=t.getFill(),l=t.getStroke();if(l||a){const p=n.getBuilder(t.getZIndex(),"Polygon");p.setFillStrokeStyle(a,l),p.drawMultiPolygon(e,i,r)}const o=t.getText();if(o&&o.getText()){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(o),p.drawText(e,i,r)}}function Rte(n,e,t,i,r,a){const l=t.getImage(),o=t.getText(),p=o&&o.getText(),C=a&&l&&p?{}:void 0;if(l){if(l.getImageState()!=hr.LOADED)return;const w=n.getBuilder(t.getZIndex(),"Image");w.setImageStyle(l,C),w.drawPoint(e,i,r)}if(p){const w=n.getBuilder(t.getZIndex(),"Text");w.setTextStyle(o,C),w.drawText(e,i,r)}}function Pte(n,e,t,i,r,a){const l=t.getImage(),o=l&&l.getOpacity()!==0,p=t.getText(),C=p&&p.getText(),w=a&&o&&C?{}:void 0;if(o){if(l.getImageState()!=hr.LOADED)return;const O=n.getBuilder(t.getZIndex(),"Image");O.setImageStyle(l,w),O.drawMultiPoint(e,i,r)}if(C){const O=n.getBuilder(t.getZIndex(),"Text");O.setTextStyle(p,w),O.drawText(e,i,r)}}function Kte(n,e,t,i,r){const a=t.getFill(),l=t.getStroke();if(a||l){const p=n.getBuilder(t.getZIndex(),"Polygon");p.setFillStrokeStyle(a,l),p.drawPolygon(e,i,r)}const o=t.getText();if(o&&o.getText()){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(o),p.drawText(e,i,r)}}let Ute=!1;function bz(n,e,t,i,r,a,l){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=Ute,o.onload=function(p){if(!o.status||o.status>=200&&o.status<300){const C=e.getType();try{let w;C=="text"||C=="json"?w=o.responseText:C=="xml"?w=o.responseXML||o.responseText:C=="arraybuffer"&&(w=o.response),w?a(e.readFeatures(w,{extent:t,featureProjection:r}),e.readProjection(w)):l()}catch{l()}}else l()},o.onerror=l,o.send()}function k9(n,e){return function(t,i,r,a,l){bz(n,e,t,i,r,(o,p)=>{this.addFeatures(o),a!==void 0&&a(o)},()=>{this.changed(),l!==void 0&&l()})}}function Lte(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Fte(n,e){return[n]}class D9{constructor(e){this.rbush_=new ez(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Io(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,a=t.length;r<a;r++){const l=e[r],o=t[r],p={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:o};i[r]=p,this.items_[Io(o)]=p}this.rbush_.load(i)}remove(e){const t=Io(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Io(t)],r=[i.minX,i.minY,i.maxX,i.maxY];U0(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,a=e.length;r<a;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Lg(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return K0(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Zv extends Am{constructor(e){super(),this.projection=Qs(e.projection),this.attributions_=R9(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=R9(e),this.changed()}setState(e){this.state_=e,this.changed()}}function R9(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const lp={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Ag extends um{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class wx extends Zv{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=M_,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ws(this.format_,"`format` must be set when `url` is set"),this.loader_=k9(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Lte;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new D9:null,this.loadedExtentsRtree_=new D9,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Gm(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Io(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Ag(lp.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Fh||(this.featureChangeKeys_[e]=[Za(t,fo.CHANGE,this.handleFeatureChange_,this),Za(t,Tv.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof Fh){const a=this.idIndex_[r];a instanceof Fh?Array.isArray(a)?a.push(t):this.idIndex_[r]=[a,t]:i=!1}else i=!1}return i&&(ws(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let a=0,l=e.length;a<l;a++){const o=e[a],p=Io(o);this.addToIndex_(p,o)&&i.push(o)}for(let a=0,l=i.length;a<l;a++){const o=i[a],p=Io(o);this.setupChangeEvents_(p,o);const C=o.getGeometry();if(C){const w=C.getExtent();t.push(w),r.push(o)}else this.nullGeometryFeatures_[p]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(lp.ADDFEATURE))for(let a=0,l=i.length;a<l;a++)this.dispatchEvent(new Ag(lp.ADDFEATURE,i[a]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(lp.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(lp.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Nd.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Nd.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Bl);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Ag(lp.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const a=r.getGeometry();if(a instanceof Fh||a.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof Fh||r.intersectsExtent(e)){const a=t(i);if(a)return a}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Lg(this.nullGeometryFeatures_)||Zm(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=xF(e,t);return[].concat(...r.map(a=>this.featuresRtree_.getInExtent(a)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let a=null;const l=[NaN,NaN];let o=1/0;const p=[-1/0,-1/0,1/0,1/0];return t=t||x_,this.featuresRtree_.forEachInExtent(p,function(C){if(t(C)){const w=C.getGeometry(),O=o;if(o=w instanceof Fh?0:w.closestPointXY(i,r,l,o),o<O){a=C;const U=Math.sqrt(o);p[0]=i-U,p[1]=r-U,p[2]=i+U,p[3]=r+U}}}),a}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Io(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const l=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(l,t)):this.featuresRtree_&&this.featuresRtree_.update(l,t)}const a=t.getId();if(a!==void 0){const l=a.toString();this.idIndex_[l]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[l]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Ag(lp.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Io(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Lg(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,a=this.strategy_(e,t,i);for(let l=0,o=a.length;l<o;++l){const p=a[l];r.forEachInExtent(p,function(w){return Wm(w.extent,p)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ag(lp.FEATURESLOADSTART)),this.loader_.call(this,p,t,i,w=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ag(lp.FEATURESLOADEND,void 0,w))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ag(lp.FEATURESLOADERROR))}),r.insert(p,{extent:p.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(U0(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Io(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Bl),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const a=r.toString(),l=this.idIndex_[a];l===e?delete this.idIndex_[a]:Array.isArray(l)&&(l.splice(l.indexOf(e),1),l.length===1&&(this.idIndex_[a]=l[0]))}return delete this.uidIndex_[t],this.hasListener(lp.REMOVEFEATURE)&&this.dispatchEvent(new Ag(lp.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ws(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(k9(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Qr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Zb=[Qr.FILL],Eg=[Qr.STROKE],T1=[Qr.BEGIN_PATH],P9=[Qr.CLOSE_PATH];class Cb extends yz{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,a=this.coordinates;let l=a.length;for(let o=0,p=e.length;o<p;o+=t)r[0]=e[o],r[1]=e[o+1],Q1(i,r)&&(a[l++]=r[0],a[l++]=r[1]);return l}appendFlatLineCoordinates(e,t,i,r,a,l){const o=this.coordinates;let p=o.length;const C=this.getBufferedMaxExtent();l&&(t+=r);let w=e[t],O=e[t+1];const U=this.tmpCoordinate_;let K=!0,j,W,Y;for(j=t+r;j<i;j+=r)U[0]=e[j],U[1]=e[j+1],Y=L6(C,U),Y!==W?(K&&(o[p++]=w,o[p++]=O,K=!1),o[p++]=U[0],o[p++]=U[1]):Y===Gc.INTERSECTING?(o[p++]=U[0],o[p++]=U[1],K=!1):K=!0,w=U[0],O=U[1],W=Y;return(a&&K||j===t+r)&&(o[p++]=w,o[p++]=O),p}drawCustomCoordinates_(e,t,i,r,a){for(let l=0,o=i.length;l<o;++l){const p=i[l],C=this.appendFlatLineCoordinates(e,t,p,r,!1,!1);a.push(C),t=p}return t}drawCustom(e,t,i,r,a){this.beginGeometry(e,t,a);const l=e.getType(),o=e.getStride(),p=this.coordinates.length;let C,w,O,U,K;switch(l){case"MultiPolygon":C=e.getOrientedFlatCoordinates(),U=[];const j=e.getEndss();K=0;for(let W=0,Y=j.length;W<Y;++W){const te=[];K=this.drawCustomCoordinates_(C,K,j[W],o,te),U.push(te)}this.instructions.push([Qr.CUSTOM,p,U,e,i,Y6,a]),this.hitDetectionInstructions.push([Qr.CUSTOM,p,U,e,r||i,Y6,a]);break;case"Polygon":case"MultiLineString":O=[],C=l=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),K=this.drawCustomCoordinates_(C,0,e.getEnds(),o,O),this.instructions.push([Qr.CUSTOM,p,O,e,i,E_,a]),this.hitDetectionInstructions.push([Qr.CUSTOM,p,O,e,r||i,E_,a]);break;case"LineString":case"Circle":C=e.getFlatCoordinates(),w=this.appendFlatLineCoordinates(C,0,C.length,o,!1,!1),this.instructions.push([Qr.CUSTOM,p,w,e,i,wg,a]),this.hitDetectionInstructions.push([Qr.CUSTOM,p,w,e,r||i,wg,a]);break;case"MultiPoint":C=e.getFlatCoordinates(),w=this.appendFlatPointCoordinates(C,o),w>p&&(this.instructions.push([Qr.CUSTOM,p,w,e,i,wg,a]),this.hitDetectionInstructions.push([Qr.CUSTOM,p,w,e,r||i,wg,a]));break;case"Point":C=e.getFlatCoordinates(),this.coordinates.push(C[0],C[1]),w=this.coordinates.length,this.instructions.push([Qr.CUSTOM,p,w,e,i,void 0,a]),this.hitDetectionInstructions.push([Qr.CUSTOM,p,w,e,r||i,void 0,a]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[Qr.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Qr.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,a,l=-1;for(t=0;t<i;++t)r=e[t],a=r[0],a==Qr.END_GEOMETRY?l=t:a==Qr.BEGIN_GEOMETRY&&(r[2]=t,HZ(this.hitDetectionInstructions,l,t),l=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=Ym(i||Wd)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=Ym(i||I_);const r=e.getLineCap();t.lineCap=r!==void 0?r:Pv;const a=e.getLineDash();t.lineDash=a?a.slice():D0;const l=e.getLineDashOffset();t.lineDashOffset=l||R0;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:Kv;const p=e.getWidth();t.lineWidth=p!==void 0?p:k_;const C=e.getMiterLimit();t.miterLimit=C!==void 0?C:O_,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[Qr.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Qr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,a=e.lineDash,l=e.lineDashOffset,o=e.lineJoin,p=e.lineWidth,C=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||a!=e.currentLineDash&&!zg(e.currentLineDash,a)||e.currentLineDashOffset!=l||e.currentLineJoin!=o||e.currentLineWidth!=p||e.currentMiterLimit!=C)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=a,e.currentLineDashOffset=l,e.currentLineJoin=o,e.currentLineWidth=p,e.currentMiterLimit=C)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Qr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=mF(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Rg(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class zte extends Cb{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Q1(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length,o=this.appendFlatPointCoordinates(r,a);this.instructions.push([Qr.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qr.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),a=[];for(let p=0,C=r.length;p<C;p+=e.getStride())(!this.maxExtent||Q1(this.maxExtent,r.slice(p,p+2)))&&a.push(r[p],r[p+1]);const l=this.coordinates.length,o=this.appendFlatPointCoordinates(a,2);this.instructions.push([Qr.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qr.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),a=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class jte extends Cb{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const a=this.coordinates.length,l=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),o=[Qr.MOVE_TO_LINE_TO,a,l];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(e,t,i){const r=this.state,a=r.strokeStyle,l=r.lineWidth;if(a===void 0||l===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Qr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,D0,R0],T1);const o=e.getFlatCoordinates(),p=e.getStride();this.drawFlatCoordinates_(o,0,o.length,p),this.hitDetectionInstructions.push(Eg),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,a=r.strokeStyle,l=r.lineWidth;if(a===void 0||l===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Qr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,D0,R0],T1);const o=e.getEnds(),p=e.getFlatCoordinates(),C=e.getStride();let w=0;for(let O=0,U=o.length;O<U;++O)w=this.drawFlatCoordinates_(p,w,o[O],C);this.hitDetectionInstructions.push(Eg),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Eg),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Eg),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(T1)}}class K9 extends Cb{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const a=this.state,l=a.fillStyle!==void 0,o=a.strokeStyle!==void 0,p=i.length;this.instructions.push(T1),this.hitDetectionInstructions.push(T1);for(let C=0;C<p;++C){const w=i[C],O=this.coordinates.length,U=this.appendFlatLineCoordinates(e,t,w,r,!0,!o),K=[Qr.MOVE_TO_LINE_TO,O,U];this.instructions.push(K),this.hitDetectionInstructions.push(K),o&&(this.instructions.push(P9),this.hitDetectionInstructions.push(P9)),t=w}return l&&(this.instructions.push(Zb),this.hitDetectionInstructions.push(Zb)),o&&(this.instructions.push(Eg),this.hitDetectionInstructions.push(Eg)),t}drawCircle(e,t,i){const r=this.state,a=r.fillStyle,l=r.strokeStyle;if(a===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qr.SET_FILL_STYLE,Wd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,D0,R0]);const o=e.getFlatCoordinates(),p=e.getStride(),C=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,p,!1,!1);const w=[Qr.CIRCLE,C];this.instructions.push(T1,w),this.hitDetectionInstructions.push(T1,w),r.fillStyle!==void 0&&(this.instructions.push(Zb),this.hitDetectionInstructions.push(Zb)),r.strokeStyle!==void 0&&(this.instructions.push(Eg),this.hitDetectionInstructions.push(Eg)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,a=r.fillStyle,l=r.strokeStyle;if(a===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qr.SET_FILL_STYLE,Wd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,D0,R0]);const o=e.getEnds(),p=e.getOrientedFlatCoordinates(),C=e.getStride();this.drawFlatCoordinatess_(p,0,o,C),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,a=r.fillStyle,l=r.strokeStyle;if(a===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qr.SET_FILL_STYLE,Wd]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,D0,R0]);const o=e.getEndss(),p=e.getOrientedFlatCoordinates(),C=e.getStride();let w=0;for(let O=0,U=o.length;O<U;++O)w=this.drawFlatCoordinatess_(p,w,o[O],C);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=b1(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function Nte(n,e,t,i,r){const a=[];let l=t,o=0,p=e.slice(t,2);for(;o<n&&l+r<i;){const[C,w]=p.slice(-2),O=e[l+r],U=e[l+r+1],K=Math.sqrt((O-C)*(O-C)+(U-w)*(U-w));if(o+=K,o>=n){const j=(n-o+K)/K,W=vf(C,O,j),Y=vf(w,U,j);p.push(W,Y),a.push(p),p=[W,Y],o==n&&(l+=r),o=0}else if(o<n)p.push(e[l+r],e[l+r+1]),l+=r;else{const j=K-o,W=vf(C,O,j/K),Y=vf(w,U,j/K);p.push(W,Y),a.push(p),p=[W,Y],o=0,l+=r}}return o>0&&a.push(p),a}function Gte(n,e,t,i,r){let a=t,l=t,o=0,p=0,C=t,w,O,U,K,j,W,Y,te,J,oe;for(O=t;O<i;O+=r){const ne=e[O],$=e[O+1];j!==void 0&&(J=ne-j,oe=$-W,K=Math.sqrt(J*J+oe*oe),Y!==void 0&&(p+=U,w=Math.acos((Y*J+te*oe)/(U*K)),w>n&&(p>o&&(o=p,a=C,l=O),p=0,C=O-r)),U=K,Y=J,te=oe),j=ne,W=$}return p+=K,p>o?[C,O]:[a,l]}const A3={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Wte extends Cb{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Wd]={fillStyle:Wd},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,a=this.textStrokeState_,l=this.textState_;if(this.text_===""||!l||!r&&!a)return;const o=this.coordinates;let p=o.length;const C=e.getType();let w=null,O=e.getStride();if(l.placement==="line"&&(C=="LineString"||C=="MultiLineString"||C=="Polygon"||C=="MultiPolygon")){if(!uA(this.maxExtent,e.getExtent()))return;let U;if(w=e.getFlatCoordinates(),C=="LineString")U=[w.length];else if(C=="MultiLineString")U=e.getEnds();else if(C=="Polygon")U=e.getEnds().slice(0,1);else if(C=="MultiPolygon"){const Y=e.getEndss();U=[];for(let te=0,J=Y.length;te<J;++te)U.push(Y[te][0])}this.beginGeometry(e,t,i);const K=l.repeat,j=K?void 0:l.textAlign;let W=0;for(let Y=0,te=U.length;Y<te;++Y){let J;K?J=Nte(K*this.resolution,w,W,U[Y],O):J=[w.slice(W,U[Y])];for(let oe=0,ne=J.length;oe<ne;++oe){const $=J[oe];let ae=0,G=$.length;if(j==null){const ge=Gte(l.maxAngle,$,0,$.length,2);ae=ge[0],G=ge[1]}for(let ge=ae;ge<G;ge+=O)o.push($[ge],$[ge+1]);const ce=o.length;W=U[Y],this.drawChars_(p,ce),p=ce}}this.endGeometry(t)}else{let U=l.overflow?null:[];switch(C){case"Point":case"MultiPoint":w=e.getFlatCoordinates();break;case"LineString":w=e.getFlatMidpoint();break;case"Circle":w=e.getCenter();break;case"MultiLineString":w=e.getFlatMidpoints(),O=2;break;case"Polygon":w=e.getFlatInteriorPoint(),l.overflow||U.push(w[2]/this.resolution),O=3;break;case"MultiPolygon":const ne=e.getFlatInteriorPoints();w=[];for(let $=0,ae=ne.length;$<ae;$+=3)l.overflow||U.push(ne[$+2]/this.resolution),w.push(ne[$],ne[$+1]);if(w.length===0)return;O=2;break}const K=this.appendFlatPointCoordinates(w,O);if(K===p)return;if(U&&(K-p)/2!==w.length/O){let ne=p/2;U=U.filter(($,ae)=>{const G=o[(ne+ae)*2]===w[ae*O]&&o[(ne+ae)*2+1]===w[ae*O+1];return G||--ne,G})}this.saveTextStates_();const j=l.backgroundFill?this.createFill(this.fillStyleToState(l.backgroundFill)):null,W=l.backgroundStroke?this.createStroke(this.strokeStyleToState(l.backgroundStroke)):null;this.beginGeometry(e,t,i);let Y=l.padding;if(Y!=I1&&(l.scale[0]<0||l.scale[1]<0)){let ne=l.padding[0],$=l.padding[1],ae=l.padding[2],G=l.padding[3];l.scale[0]<0&&($=-$,G=-G),l.scale[1]<0&&(ne=-ne,ae=-ae),Y=[ne,$,ae,G]}const te=this.pixelRatio;this.instructions.push([Qr.DRAW_IMAGE,p,K,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,Y==I1?I1:Y.map(function(ne){return ne*te}),j,W,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,U]);const J=1/te,oe=j?j.slice(0):null;oe&&(oe[1]=Wd),this.hitDetectionInstructions.push([Qr.DRAW_IMAGE,p,K,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[J,J],NaN,this.declutterMode_,this.declutterImageWithText_,Y,oe,W,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Wd:this.fillKey_,this.textOffsetX_,this.textOffsetY_,U]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:t.font,textAlign:t.textAlign||T_,justify:t.justify,textBaseline:t.textBaseline||r3,scale:t.scale});const l=this.fillKey_;i&&(l in this.fillStates||(this.fillStates[l]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,a=this.strokeKey_,l=this.textKey_,o=this.fillKey_;this.saveTextStates_();const p=this.pixelRatio,C=A3[r.textBaseline],w=this.textOffsetY_*p,O=this.text_,U=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Qr.DRAW_CHARS,e,t,C,r.overflow,o,r.maxAngle,p,w,a,U*p,O,l,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Qr.DRAW_CHARS,e,t,C,r.overflow,o&&Wd,r.maxAngle,p,w,a,U*p,O,l,1/p,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,a;if(!e)this.text_="";else{const l=e.getFill();l?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Ym(l.getColor()||Wd)):(r=null,this.textFillState_=r);const o=e.getStroke();if(!o)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const W=o.getLineDash(),Y=o.getLineDashOffset(),te=o.getWidth(),J=o.getMiterLimit();a.lineCap=o.getLineCap()||Pv,a.lineDash=W?W.slice():D0,a.lineDashOffset=Y===void 0?R0:Y,a.lineJoin=o.getLineJoin()||Kv,a.lineWidth=te===void 0?k_:te,a.miterLimit=J===void 0?O_:J,a.strokeStyle=Ym(o.getColor()||I_)}i=this.textState_;const p=e.getFont()||az;Zee(p);const C=e.getScaleArray();i.overflow=e.getOverflow(),i.font=p,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||r3,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||I1,i.scale=C===void 0?[1,1]:C;const w=e.getOffsetX(),O=e.getOffsetY(),U=e.getRotateWithView(),K=e.getKeepUpright(),j=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=w===void 0?0:w,this.textOffsetY_=O===void 0?0:O,this.textRotateWithView_=U===void 0?!1:U,this.textKeepUpright_=K===void 0?!0:K,this.textRotation_=j===void 0?0:j,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:Io(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Io(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Qte={Circle:K9,Default:Cb,Image:zte,LineString:jte,Polygon:K9,Text:Wte};class xz{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const a=i[r].finish();e[t][r]=a}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let a=r[t];if(a===void 0){const l=Qte[t];a=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=a}return a}}function Yte(n,e,t,i,r,a,l,o,p,C,w,O,U=!0){let K=n[e],j=n[e+1],W=0,Y=0,te=0,J=0;function oe(){W=K,Y=j,e+=i,K=n[e],j=n[e+1],J+=te,te=Math.sqrt((K-W)*(K-W)+(j-Y)*(j-Y))}do oe();while(e<t-i&&J+te<a);let ne=te===0?0:(a-J)/te;const $=vf(W,K,ne),ae=vf(Y,j,ne),G=e-i,ce=J,ge=a+o*p(C,r,w);for(;e<t-i&&J+te<ge;)oe();ne=te===0?0:(ge-J)/te;const ye=vf(W,K,ne),we=vf(Y,j,ne);let Oe=!1;if(U)if(O){const st=[$,ae,ye,we];RF(st,0,4,2,O,st,st),Oe=st[0]>st[2]}else Oe=$>ye;const Se=Math.PI,Ve=[],xe=G+i===e;e=G,te=0,J=ce,K=n[e],j=n[e+1];let ze;if(xe){oe(),ze=Math.atan2(j-Y,K-W),Oe&&(ze+=ze>0?-Se:Se);const st=(ye+$)/2,Ct=(we+ae)/2;return Ve[0]=[st,Ct,(ge-a)/2,ze,r],Ve}r=r.replace(/\n/g," ");for(let st=0,Ct=r.length;st<Ct;){oe();let nt=Math.atan2(j-Y,K-W);if(Oe&&(nt+=nt>0?-Se:Se),ze!==void 0){let gt=nt-ze;if(gt+=gt>Se?-2*Se:gt<-Se?2*Se:0,Math.abs(gt)>l)return null}ze=nt;const be=st;let Ne=0;for(;st<Ct;++st){const gt=Oe?Ct-st-1:st,St=o*p(C,r[gt],w);if(e+i<t&&J+te<a+Ne+St/2)break;Ne+=St}if(st===be)continue;const tt=Oe?r.substring(Ct-be,Ct-st):r.substring(be,st);ne=te===0?0:(a+Ne/2-J)/te;const lt=vf(W,K,ne),kt=vf(Y,j,ne);Ve.push([lt,kt,Ne/2,nt,tt]),a+=Ne}return Ve}class YO{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(i3(),{get:(e,t)=>{if(typeof i3()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const a=t[i];if(typeof a=="function"){a(e);continue}const l=t[++i];if(typeof e[a]=="function")e[a](...l);else{if(typeof l=="function"){e[a]=l(e);continue}e[a]=l}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Dy=bp(),cg=[],M0=[],w0=[],hg=[];function U9(n){return n[3].declutterBox}const L9=new RegExp("[-----]");function r5(n,e){return e==="start"?e=L9.test(n)?"right":"left":e==="end"&&(e=L9.test(n)?"left":"right"),A3[e]}function qte(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function Hte(n,e,t){return t%2===0&&(n+=e),n}class Vte{constructor(e,t,i,r,a){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Yd(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=a?new YO:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const a=e+t+i+r;if(this.labels_[a])return this.labels_[a];const l=r?this.strokeStates[r]:null,o=i?this.fillStates[i]:null,p=this.textStates[t],C=this.pixelRatio,w=[p.scale[0]*C,p.scale[1]*C],O=p.justify?A3[p.justify]:r5(Array.isArray(e)?e[0]:e,p.textAlign||T_),U=r&&l.lineWidth?l.lineWidth:0,K=Array.isArray(e)?e:String(e).split(`
`).reduce(qte,[]),{width:j,height:W,widths:Y,heights:te,lineWidths:J}=Jee(p,K),oe=j+U,ne=[],$=(oe+2)*w[0],ae=(W+U)*w[1],G={width:$<0?Math.floor($):Math.ceil($),height:ae<0?Math.floor(ae):Math.ceil(ae),contextInstructions:ne};(w[0]!=1||w[1]!=1)&&ne.push("scale",w),r&&(ne.push("strokeStyle",l.strokeStyle),ne.push("lineWidth",U),ne.push("lineCap",l.lineCap),ne.push("lineJoin",l.lineJoin),ne.push("miterLimit",l.miterLimit),ne.push("setLineDash",[l.lineDash]),ne.push("lineDashOffset",l.lineDashOffset)),i&&ne.push("fillStyle",o.fillStyle),ne.push("textBaseline","middle"),ne.push("textAlign","center");const ce=.5-O;let ge=O*oe+ce*U;const ye=[],we=[];let Oe=0,Se=0,Ve=0,xe=0,ze;for(let st=0,Ct=K.length;st<Ct;st+=2){const nt=K[st];if(nt===`
`){Se+=Oe,Oe=0,ge=O*oe+ce*U,++xe;continue}const be=K[st+1]||p.font;be!==ze&&(r&&ye.push("font",be),i&&we.push("font",be),ze=be),Oe=Math.max(Oe,te[Ve]);const Ne=[nt,ge+ce*Y[Ve]+O*(Y[Ve]-J[xe]),.5*(U+Oe)+Se];ge+=Y[Ve],r&&ye.push("strokeText",Ne),i&&we.push("fillText",Ne),++Ve}return Array.prototype.push.apply(ne,ye),Array.prototype.push.apply(ne,we),this.labels_[a]=G,G}replayTextBackground_(e,t,i,r,a,l,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,a),e.lineTo.apply(e,t),l&&(this.alignAndScaleFill_=l[2],e.fillStyle=l[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,a,l,o,p,C,w,O,U,K,j,W,Y){o*=U[0],p*=U[1];let te=i-o,J=r-p;const oe=a+C>e?e-C:a,ne=l+w>t?t-w:l,$=j[3]+oe*U[0]+j[1],ae=j[0]+ne*U[1]+j[2],G=te-j[3],ce=J-j[0];(W||O!==0)&&(cg[0]=G,hg[0]=G,cg[1]=ce,M0[1]=ce,M0[0]=G+$,w0[0]=M0[0],w0[1]=ce+ae,hg[1]=w0[1]);let ge;return O!==0?(ge=Jm(Yd(),i,r,1,1,O,-i,-r),tc(ge,cg),tc(ge,M0),tc(ge,w0),tc(ge,hg),K0(Math.min(cg[0],M0[0],w0[0],hg[0]),Math.min(cg[1],M0[1],w0[1],hg[1]),Math.max(cg[0],M0[0],w0[0],hg[0]),Math.max(cg[1],M0[1],w0[1],hg[1]),Dy)):K0(Math.min(G,G+$),Math.min(ce,ce+ae),Math.max(G,G+$),Math.max(ce,ce+ae),Dy),K&&(te=Math.round(te),J=Math.round(J)),{drawImageX:te,drawImageY:J,drawImageW:oe,drawImageH:ne,originX:C,originY:w,declutterBox:{minX:Dy[0],minY:Dy[1],maxX:Dy[2],maxY:Dy[3],value:Y},canvasTransform:ge,scale:U}}replayImageOrLabel_(e,t,i,r,a,l,o){const p=!!(l||o),C=r.declutterBox,w=o?o[2]*r.scale[0]/2:0;return C.minX-w<=t[0]&&C.maxX+w>=0&&C.minY-w<=t[1]&&C.maxY+w>=0&&(p&&this.replayTextBackground_(e,cg,M0,w0,hg,l,o),ete(e,r.canvasTransform,a,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=tc(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const a=this.textStates[t],l=this.createLabel(e,t,r,i),o=this.strokeStates[i],p=this.pixelRatio,C=r5(Array.isArray(e)?e[0]:e,a.textAlign||T_),w=A3[a.textBaseline||r3],O=o&&o.lineWidth?o.lineWidth:0,U=l.width/p-2*a.scale[0],K=C*U+2*(.5-C)*O,j=w*l.height/p+2*(.5-w)*O;return{label:l,anchorX:K,anchorY:j}}execute_(e,t,i,r,a,l,o,p){const C=this.zIndexContext_;let w;this.pixelCoordinates_&&zg(i,this.renderedTransform_)?w=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),w=Kg(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),XX(this.renderedTransform_,i));let O=0;const U=r.length;let K=0,j,W,Y,te,J,oe,ne,$,ae,G,ce,ge,ye,we=0,Oe=0;const Se=this.coordinateCache_,Ve=this.viewRotation_,xe=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,ze={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ve},st=this.instructions!=r||this.overlaps?0:200;let Ct,nt,be,Ne;for(;O<U;){const tt=r[O];switch(tt[0]){case Qr.BEGIN_GEOMETRY:Ct=tt[1],Ne=tt[3],Ct.getGeometry()?o!==void 0&&!uA(o,Ne.getExtent())?O=tt[2]+1:++O:O=tt[2],C&&(C.zIndex=tt[4]);break;case Qr.BEGIN_PATH:we>st&&(this.fill_(e),we=0),Oe>st&&(e.stroke(),Oe=0),!we&&!Oe&&(e.beginPath(),J=NaN,oe=NaN),++O;break;case Qr.CIRCLE:K=tt[1];const kt=w[K],gt=w[K+1],St=w[K+2],Ut=w[K+3],Fe=St-kt,Ke=Ut-gt,Re=Math.sqrt(Fe*Fe+Ke*Ke);e.moveTo(kt+Re,gt),e.arc(kt,gt,Re,0,2*Math.PI,!0),++O;break;case Qr.CLOSE_PATH:e.closePath(),++O;break;case Qr.CUSTOM:K=tt[1],j=tt[2];const He=tt[3],bt=tt[4],_t=tt[5];ze.geometry=He,ze.feature=Ct,O in Se||(Se[O]=[]);const Ot=Se[O];_t?_t(w,K,j,2,Ot):(Ot[0]=w[K],Ot[1]=w[K+1],Ot.length=2),C&&(C.zIndex=tt[6]),bt(Ot,ze),++O;break;case Qr.DRAW_IMAGE:K=tt[1],j=tt[2],ae=tt[3],W=tt[4],Y=tt[5];let qt=tt[6];const Kt=tt[7],on=tt[8],Jn=tt[9],Wt=tt[10];let $n=tt[11];const On=tt[12];let Bn=tt[13];te=tt[14]||"declutter";const In=tt[15];if(!ae&&tt.length>=20){G=tt[19],ce=tt[20],ge=tt[21],ye=tt[22];const Mn=this.drawLabelWithPointPlacement_(G,ce,ge,ye);ae=Mn.label,tt[3]=ae;const ii=tt[23];W=(Mn.anchorX-ii)*this.pixelRatio,tt[4]=W;const Wn=tt[24];Y=(Mn.anchorY-Wn)*this.pixelRatio,tt[5]=Y,qt=ae.height,tt[6]=qt,Bn=ae.width,tt[13]=Bn}let Oi;tt.length>25&&(Oi=tt[25]);let ei,Kn,je;tt.length>17?(ei=tt[16],Kn=tt[17],je=tt[18]):(ei=I1,Kn=null,je=null),Wt&&xe?$n+=Ve:!Wt&&!xe&&($n-=Ve);let de=0;for(;K<j;K+=2){if(Oi&&Oi[de++]<Bn/this.pixelRatio)continue;const Mn=this.calculateImageOrLabelDimensions_(ae.width,ae.height,w[K],w[K+1],Bn,qt,W,Y,on,Jn,$n,On,a,ei,!!Kn||!!je,Ct),ii=[e,t,ae,Mn,Kt,Kn,je];if(p){let Wn,qi,er;if(In){const ti=j-K;if(!In[ti]){In[ti]={args:ii,declutterMode:te};continue}const Wi=In[ti];Wn=Wi.args,qi=Wi.declutterMode,delete In[ti],er=U9(Wn)}let Ei,hi;if(Wn&&(qi!=="declutter"||!p.collides(er))&&(Ei=!0),(te!=="declutter"||!p.collides(Mn.declutterBox))&&(hi=!0),qi==="declutter"&&te==="declutter"){const ti=Ei&&hi;Ei=ti,hi=ti}Ei&&(qi!=="none"&&p.insert(er),this.replayImageOrLabel_.apply(this,Wn)),hi&&(te!=="none"&&p.insert(Mn.declutterBox),this.replayImageOrLabel_.apply(this,ii))}else this.replayImageOrLabel_.apply(this,ii)}++O;break;case Qr.DRAW_CHARS:const re=tt[1],le=tt[2],pe=tt[3],Te=tt[4];ye=tt[5];const We=tt[6],dt=tt[7],Ye=tt[8];ge=tt[9];const De=tt[10];G=tt[11],Array.isArray(G)&&(G=G.reduce(Hte,"")),ce=tt[12];const Ze=[tt[13],tt[13]];te=tt[14]||"declutter";const g=tt[15],mt=this.textStates[ce],ht=mt.font,Tt=[mt.scale[0]*dt,mt.scale[1]*dt];let it;ht in this.widths_?it=this.widths_[ht]:(it={},this.widths_[ht]=it);const en=QO(w,re,le,2),Dn=Math.abs(Tt[0])*x9(ht,G,it);if(Te||Dn<=en){const Mn=this.textStates[ce].textAlign,ii=(en-Dn)*r5(G,Mn),Wn=Yte(w,re,le,2,G,ii,We,Math.abs(Tt[0]),x9,ht,it,xe?0:this.viewRotation_,g);e:if(Wn){const qi=[];let er,Ei,hi,ti,Wi;if(ge)for(er=0,Ei=Wn.length;er<Ei;++er){Wi=Wn[er],hi=Wi[4],ti=this.createLabel(hi,ce,"",ge),W=Wi[2]+(Tt[0]<0?-De:De),Y=pe*ti.height+(.5-pe)*2*De*Tt[1]/Tt[0]-Ye;const wn=this.calculateImageOrLabelDimensions_(ti.width,ti.height,Wi[0],Wi[1],ti.width,ti.height,W,Y,0,0,Wi[3],Ze,!1,I1,!1,Ct);if(p&&te==="declutter"&&p.collides(wn.declutterBox))break e;qi.push([e,t,ti,wn,1,null,null])}if(ye)for(er=0,Ei=Wn.length;er<Ei;++er){Wi=Wn[er],hi=Wi[4],ti=this.createLabel(hi,ce,ye,""),W=Wi[2],Y=pe*ti.height-Ye;const wn=this.calculateImageOrLabelDimensions_(ti.width,ti.height,Wi[0],Wi[1],ti.width,ti.height,W,Y,0,0,Wi[3],Ze,!1,I1,!1,Ct);if(p&&te==="declutter"&&p.collides(wn.declutterBox))break e;qi.push([e,t,ti,wn,1,null,null])}p&&te!=="none"&&p.load(qi.map(U9));for(let wn=0,uo=qi.length;wn<uo;++wn)this.replayImageOrLabel_.apply(this,qi[wn])}}++O;break;case Qr.END_GEOMETRY:if(l!==void 0){Ct=tt[1];const Mn=l(Ct,Ne,te);if(Mn)return Mn}++O;break;case Qr.FILL:st?we++:this.fill_(e),++O;break;case Qr.MOVE_TO_LINE_TO:for(K=tt[1],j=tt[2],nt=w[K],be=w[K+1],e.moveTo(nt,be),J=nt+.5|0,oe=be+.5|0,K+=2;K<j;K+=2)nt=w[K],be=w[K+1],ne=nt+.5|0,$=be+.5|0,(K==j-2||ne!==J||$!==oe)&&(e.lineTo(nt,be),J=ne,oe=$);++O;break;case Qr.SET_FILL_STYLE:this.alignAndScaleFill_=tt[2],we&&(this.fill_(e),we=0,Oe&&(e.stroke(),Oe=0)),e.fillStyle=tt[1],++O;break;case Qr.SET_STROKE_STYLE:Oe&&(e.stroke(),Oe=0),this.setStrokeStyle_(e,tt),++O;break;case Qr.STROKE:st?Oe++:e.stroke(),++O;break;default:++O;break}}we&&this.fill_(e),Oe&&e.stroke()}execute(e,t,i,r,a,l){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,a,void 0,void 0,l)}executeHitDetection(e,t,i,r,a){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,a)}}const w1=["Polygon","Circle","LineString","Image","Text","Default"],c3=["Image","Text"],$te=w1.filter(n=>!c3.includes(n));class Mz{constructor(e,t,i,r,a,l,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Yd(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(a,o)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const a=e[i];for(const l in a){const o=a[l];r[l]=new Vte(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,a=e.length;r<a;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,a,l){r=Math.round(r);const o=r*2+1,p=Jm(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),C=!this.hitDetectionContext_;C&&(this.hitDetectionContext_=Gu(o,o));const w=this.hitDetectionContext_;w.canvas.width!==o||w.canvas.height!==o?(w.canvas.width=o,w.canvas.height=o):C||w.clearRect(0,0,o,o);let O;this.renderBuffer_!==void 0&&(O=bp(),t_(O,e),Rg(O,t*(this.renderBuffer_+r),O));const U=Zte(r);let K;function j($,ae,G){const ce=w.getImageData(0,0,o,o).data;for(let ge=0,ye=U.length;ge<ye;ge++)if(ce[U[ge]]>0){if(!l||G==="none"||K!=="Image"&&K!=="Text"||l.includes($)){const we=(U[ge]-3)/4,Oe=r-we%o,Se=r-(we/o|0),Ve=a($,ae,Oe*Oe+Se*Se);if(Ve)return Ve}w.clearRect(0,0,o,o);break}}const W=Object.keys(this.executorsByZIndex_).map(Number);W.sort($m);let Y,te,J,oe,ne;for(Y=W.length-1;Y>=0;--Y){const $=W[Y].toString();for(J=this.executorsByZIndex_[$],te=w1.length-1;te>=0;--te)if(K=w1[te],oe=J[K],oe!==void 0&&(ne=oe.executeHitDetection(w,p,i,j,O),ne))return ne}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],a=t[2],l=t[3],o=[i,r,i,l,a,l,a,r];return Kg(o,0,8,2,e,o),o}isEmpty(){return Lg(this.executorsByZIndex_)}execute(e,t,i,r,a,l,o){const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(o?qZ:$m),l=l||w1;const C=w1.length;for(let w=0,O=p.length;w<O;++w){const U=p[w].toString(),K=this.executorsByZIndex_[U];for(let j=0,W=l.length;j<W;++j){const Y=l[j],te=K[Y];if(te!==void 0){const J=o===null?void 0:te.getZIndexContext(),oe=J?J.getContext():e,ne=this.maxExtent_&&Y!=="Image"&&Y!=="Text";if(ne&&(oe.save(),this.clip(oe,i)),!J||Y==="Text"||Y==="Image"?te.execute(oe,t,i,r,a,o):J.pushFunction($=>te.execute($,t,i,r,a,o)),ne&&oe.restore(),J){J.offset();const $=p[w]*C+w1.indexOf(Y);this.deferredZIndexContexts_[$]||(this.deferredZIndexContexts_[$]=[]),this.deferredZIndexContexts_[$].push(J)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort($m);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(a=>{a.draw(this.renderedContext_),a.clear()}),e[t[i]].length=0}}const o5={};function Zte(n){if(o5[n]!==void 0)return o5[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let a=0;a<=n;++a)for(let l=0;l<=n;++l){const o=a*a+l*l;if(o>t)break;let p=i[o];p||(p=[],i[o]=p),p.push(((n+a)*e+(n+l))*4+3),a>0&&p.push(((n-a)*e+(n+l))*4+3),l>0&&(p.push(((n+a)*e+(n-l))*4+3),a>0&&p.push(((n-a)*e+(n-l))*4+3))}const r=[];for(let a=0,l=i.length;a<l;++a)i[a]&&r.push(...i[a]);return o5[n]=r,r}const Mf=.5;function wz(n,e,t,i,r,a,l,o,p){const C=p?mO(r):r,w=n[0]*Mf,O=n[1]*Mf,U=Gu(w,O);U.imageSmoothingEnabled=!1;const K=U.canvas,j=new wte(U,Mf,r,null,l,o,p?hb($X(),p):null),W=t.length,Y=Math.floor((256*256*256-1)/W),te={};for(let oe=1;oe<=W;++oe){const ne=t[oe-1],$=ne.getStyleFunction()||i;if(!$)continue;let ae=$(ne,a);if(!ae)continue;Array.isArray(ae)||(ae=[ae]);const ce=(oe*Y).toString(16).padStart(7,"#00000");for(let ge=0,ye=ae.length;ge<ye;++ge){const we=ae[ge],Oe=we.getGeometryFunction()(ne);if(!Oe||!uA(C,Oe.getExtent()))continue;const Se=we.clone(),Ve=Se.getFill();Ve&&Ve.setColor(ce);const xe=Se.getStroke();xe&&(xe.setColor(ce),xe.setLineDash(null)),Se.setText(void 0);const ze=we.getImage();if(ze){const be=ze.getImageSize();if(!be)continue;const Ne=Gu(be[0],be[1],void 0,{alpha:!1}),tt=Ne.canvas;Ne.fillStyle=ce,Ne.fillRect(0,0,tt.width,tt.height),Se.setImage(new Uv({img:tt,anchor:ze.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ze.getOrigin(),opacity:1,size:ze.getSize(),scale:ze.getScale(),rotation:ze.getRotation(),rotateWithView:ze.getRotateWithView()}))}const st=Se.getZIndex()||0;let Ct=te[st];Ct||(Ct={},te[st]=Ct,Ct.Polygon=[],Ct.Circle=[],Ct.LineString=[],Ct.Point=[]);const nt=Oe.getType();if(nt==="GeometryCollection"){const be=Oe.getGeometriesArrayRecursive();for(let Ne=0,tt=be.length;Ne<tt;++Ne){const lt=be[Ne];Ct[lt.getType().replace("Multi","")].push(lt,Se)}}else Ct[nt.replace("Multi","")].push(Oe,Se)}}const J=Object.keys(te).map(Number).sort($m);for(let oe=0,ne=J.length;oe<ne;++oe){const $=te[J[oe]];for(const ae in $){const G=$[ae];for(let ce=0,ge=G.length;ce<ge;ce+=2){j.setStyle(G[ce+1]);for(let ye=0,we=e.length;ye<we;++ye)j.setTransform(e[ye]),j.drawGeometry(G[ce])}}}return U.getImageData(0,0,K.width,K.height)}function Sz(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*Mf),a=Math.floor(Math.round(n[1])*Mf),l=(Nu(r,0,t.width-1)+Nu(a,0,t.height-1)*t.width)*4,o=t.data[l],p=t.data[l+1],w=t.data[l+2]+256*(p+256*o),O=Math.floor((256*256*256-1)/e.length);w&&w%O===0&&i.push(e[w/O-1])}return i}const Xte=5;class Jte extends Ab{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Xte}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return vo()}getData(e){return null}prepareFrame(e){return vo()}renderFrame(e,t){return vo()}forEachFeatureAtCoordinate(e,t,i,r,a){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===hr.LOADED||t.getState()===hr.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=hr.LOADED&&t!=hr.ERROR&&e.addEventListener(fo.CHANGE,this.boundHandleImageChange_),t==hr.IDLE&&(e.load(),t=e.getState()),t==hr.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const F9=[];let lv=null;function ene(){lv=Gu(1,1,void 0,{willReadFrequently:!0})}class qO extends Jte{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Yd(),this.pixelTransform=Yd(),this.inversePixelTransform=Yd(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){lv||ene(),lv.clearRect(0,0,1,1);let r;try{lv.drawImage(e,t,i,1,1,0,0,1,1),r=lv.getImageData(0,0,1,1).data}catch{return lv=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let a,l;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&zg(Rv(e.style.backgroundColor),Rv(i)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(l=o.getContext("2d"))}if(l&&iJ(l.canvas.style.transform,t)?(this.container=e,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){a=document.createElement("div"),a.className=r;let o=a.style;o.position="absolute",o.width="100%",o.height="100%",l=Gu();const p=l.canvas;a.appendChild(p),o=p.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=a,this.context=l}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=j0(i),a=a2(i),l=o2(i),o=r2(i);tc(t.coordinateToPixelTransform,r),tc(t.coordinateToPixelTransform,a),tc(t.coordinateToPixelTransform,l),tc(t.coordinateToPixelTransform,o);const p=this.inversePixelTransform;tc(p,r),tc(p,a),tc(p,l),tc(p,o),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,a=e.viewState.rotation,l=e.pixelRatio,o=Math.round(ss(i)/r*l),p=Math.round(ic(i)/r*l);Jm(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,a,-o/2,-p/2),DF(this.inversePixelTransform,this.pixelTransform);const C=nJ(this.pixelTransform);if(this.useContainer(t,C,this.getBackground(e)),!this.containerReused){const w=this.context.canvas;w.width!=o||w.height!=p?(w.width=o,w.height=p):this.context.clearRect(0,0,o,p),C!==w.style.transform&&(w.style.transform=C)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const a=new fz(e,this.inversePixelTransform,i,t);r.dispatchEvent(a)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(gp.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(gp.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new YO),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(gp.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(gp.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,a,l,o){const p=a/2,C=l/2,w=r/t,O=-w,U=-e[0]+o,K=-e[1];return Jm(this.tempTransform,p,C,w,O,-i,U,K)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class tne extends qO{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=bp(),this.wrappedRenderedExtent_=bp(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,a=t.viewState,l=a.center,o=a.resolution,p=a.projection,C=a.rotation,w=p.getExtent(),O=this.getLayer().getSource(),U=this.getLayer().getDeclutter(),K=t.pixelRatio,j=t.viewHints,W=!(j[vu.ANIMATING]||j[vu.INTERACTING]),Y=this.context,te=Math.round(ss(r)/o*K),J=Math.round(ic(r)/o*K),oe=O.getWrapX()&&p.canWrapX(),ne=oe?ss(w):null,$=oe?Math.ceil((r[2]-w[2])/ne)+1:1;let ae=oe?Math.floor((r[0]-w[0])/ne):0;do{let G=this.getRenderTransform(l,o,0,K,te,J,ae*ne);t.declutter&&(G=G.slice(0)),e.execute(Y,[Y.canvas.width,Y.canvas.height],G,C,W,i===void 0?w1:i?c3:$te,i?U&&t.declutter[U]:void 0)}while(++ae<$)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Gu(this.context.canvas.width,this.context.canvas.height,F9))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,fb(this.context),F9.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const a=this.context,l=this.replayGroup_;let o=l&&!l.isEmpty();if(!o&&!(this.getLayer().hasListener(gp.PRERENDER)||this.getLayer().hasListener(gp.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(a,e),r.projection,this.clipped_=!1,o&&i.extent&&this.clipping){const p=Qm(i.extent);o=uA(p,e.extent),this.clipped_=o&&!Wm(p,e.extent),this.clipped_&&this.clipUnrotated(a,e,p)}return o&&this.renderWorlds(l,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&a.restore(),this.postRender(a,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,a=this.renderedResolution_,l=this.renderedRotation_,o=this.renderedProjection_,p=this.wrappedRenderedExtent_,C=this.getLayer(),w=[],O=i[0]*Mf,U=i[1]*Mf;w.push(this.getRenderTransform(r,a,l,Mf,O,U,0).slice());const K=C.getSource(),j=o.getExtent();if(K.getWrapX()&&o.canWrapX()&&!Wm(j,p)){let W=p[0];const Y=ss(j);let te=0,J;for(;W<j[0];)--te,J=Y*te,w.push(this.getRenderTransform(r,a,l,Mf,O,U,J).slice()),W+=Y;for(te=0,W=p[2];W>j[2];)++te,J=Y*te,w.push(this.getRenderTransform(r,a,l,Mf,O,U,J).slice()),W-=Y}this.hitDetectionImageData_=wz(i,w,this.renderedFeatures_,C.getStyleFunction(),p,a,l,tB(a,this.renderedPixelRatio_),null)}t(Sz(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,a){if(!this.replayGroup_)return;const l=t.viewState.resolution,o=t.viewState.rotation,p=this.getLayer(),C={},w=function(U,K,j){const W=Io(U),Y=C[W];if(Y){if(Y!==!0&&j<Y.distanceSq){if(j===0)return C[W]=!0,a.splice(a.lastIndexOf(Y),1),r(U,p,K);Y.geometry=K,Y.distanceSq=j}}else{if(j===0)return C[W]=!0,r(U,p,K);a.push(C[W]={feature:U,layer:p,geometry:K,distanceSq:j,callback:r})}},O=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,l,o,i,w,O?t.declutter?.[O]?.all().map(U=>U.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[vu.ANIMATING],a=e.viewHints[vu.INTERACTING],l=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!l&&r||!o&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const p=e.extent,C=e.viewState,w=C.projection,O=C.resolution,U=e.pixelRatio,K=t.getRevision(),j=t.getRenderBuffer();let W=t.getRenderOrder();W===void 0&&(W=Ete);const Y=C.center.slice(),te=Rg(p,j*O),J=te.slice(),oe=[te.slice()],ne=w.getExtent();if(i.getWrapX()&&w.canWrapX()&&!Wm(ne,e.extent)){const Ve=ss(ne),xe=Math.max(ss(te)/2,Ve);te[0]=ne[0]-xe,te[2]=ne[2]+xe,cO(Y,w);const ze=bF(oe[0],w);ze[0]<ne[0]&&ze[2]<ne[2]?oe.push([ze[0]+Ve,ze[1],ze[2]+Ve,ze[3]]):ze[0]>ne[0]&&ze[2]>ne[2]&&oe.push([ze[0]-Ve,ze[1],ze[2]-Ve,ze[3]])}if(this.ready&&this.renderedResolution_==O&&this.renderedRevision_==K&&this.renderedRenderOrder_==W&&this.renderedFrameDeclutter_===!!e.declutter&&Wm(this.wrappedRenderedExtent_,te))return zg(this.renderedExtent_,J)||(this.hitDetectionImageData_=null,this.renderedExtent_=J),this.renderedCenter_=Y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const $=new xz(Cz(O,U),te,O,U);let ae;for(let Ve=0,xe=oe.length;Ve<xe;++Ve)i.loadFeatures(oe[Ve],O,w);const G=tB(O,U);let ce=!0;const ge=(Ve,xe)=>{let ze;const st=Ve.getStyleFunction()||t.getStyleFunction();if(st&&(ze=st(Ve,O)),ze){const Ct=this.renderFeature(Ve,G,ze,$,ae,this.getLayer().getDeclutter(),xe);ce=ce&&!Ct}},ye=mO(te),we=i.getFeaturesInExtent(ye);W&&we.sort(W);for(let Ve=0,xe=we.length;Ve<xe;++Ve)ge(we[Ve],Ve);this.renderedFeatures_=we,this.ready=ce;const Oe=$.finish(),Se=new Mz(te,O,U,i.getOverlaps(),Oe,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=O,this.renderedRevision_=K,this.renderedRenderOrder_=W,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=J,this.wrappedRenderedExtent_=te,this.renderedCenter_=Y,this.renderedProjection_=w,this.renderedPixelRatio_=U,this.replayGroup_=Se,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,a,l,o){if(!i)return!1;let p=!1;if(Array.isArray(i))for(let C=0,w=i.length;C<w;++C)p=u3(r,e,i[C],t,this.boundHandleStyleImageChange_,a,l,o)||p;else p=u3(r,e,i,t,this.boundHandleStyleImageChange_,a,l,o);return p}}class HO extends WO{constructor(e){super(e)}createRenderer(){return new tne(this)}}class nne extends jO{constructor(e,t,i,r,a){const l=a!==void 0?hr.IDLE:hr.LOADED;super(e,t,i,l),this.loader_=a!==void 0?a:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=hr.ERROR):this.state=hr.LOADED,this.changed()}load(){this.state==hr.IDLE&&(this.state=hr.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class _b extends ub{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(fo.CHANGE)}release(){this.setState(Pi.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Pi.EMPTY){if(this.state!==Pi.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){vo()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:MF(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Ez extends _b{constructor(e,t,i,r,a,l){super(e,t,l),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=a}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Pi.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Pi.ERROR,this.unlistenImage_(),this.image_=ine(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Pi.LOADED:this.state=Pi.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Pi.ERROR&&(this.state=Pi.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Pi.IDLE&&(this.state=Pi.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Wee(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function ine(){const n=Gu(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const Kh={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class rne extends Am{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+EJ,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Kh.ELEMENT,this.handleElementChanged),this.addChangeListener(Kh.MAP,this.handleMapChanged),this.addChangeListener(Kh.OFFSET,this.handleOffsetChanged),this.addChangeListener(Kh.POSITION,this.handlePositionChanged),this.addChangeListener(Kh.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Kh.ELEMENT)}getId(){return this.id}getMap(){return this.get(Kh.MAP)||null}getOffset(){return this.get(Kh.OFFSET)}getPosition(){return this.get(Kh.POSITION)}getPositioning(){return this.get(Kh.POSITIONING)}handleElementChanged(){qF(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Bl(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Za(e,O0.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Kh.ELEMENT,e)}setMap(e){this.set(Kh.MAP,e)}setOffset(e){this.set(Kh.OFFSET,e)}setPosition(e){this.set(Kh.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Kh.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),a=this.getRect(r,[OJ(r),IJ(r)]);e=e||{};const l=e.margin===void 0?20:e.margin;if(!Wm(i,a)){const o=a[0]-i[0],p=i[2]-a[2],C=a[1]-i[1],w=i[3]-a[3],O=[0,0];if(o<0?O[0]=o-l:p<0&&(O[0]=Math.abs(p)+l),C<0?O[1]=C-l:w<0&&(O[1]=Math.abs(w)+l),O[0]!==0||O[1]!==0){const U=t.getView().getCenterInternal(),K=t.getPixelFromCoordinateInternal(U);if(!K)return;const j=[K[0]+O[0],K[1]+O[1]],W=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(j),duration:W.duration,easing:W.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,a=i.top+window.pageYOffset;return[r,a,r+t[0],a+t[1]]}setPositioning(e){this.set(Kh.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),a=this.getPositioning();this.setVisible(!0);const l=`${e[0]+r[0]}px`,o=`${e[1]+r[1]}px`;let p="0%",C="0%";a=="bottom-right"||a=="center-right"||a=="top-right"?p="-100%":(a=="bottom-center"||a=="center-center"||a=="top-center")&&(p="-50%"),a=="bottom-left"||a=="bottom-center"||a=="bottom-right"?C="-100%":(a=="center-left"||a=="center-center"||a=="center-right")&&(C="-50%");const w=`translate(${p}, ${C}) translate(${l}, ${o})`;this.rendered.transform_!=w&&(this.rendered.transform_=w,i.transform=w)}getOptions(){return this.options}}class VO{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Ry(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new VO(n,e,t,i)}const z9=[];class one extends _b{constructor(e,t,i,r,a){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=a,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=Gu(1,1,z9)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Io(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(fb(this.context_),z9.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Bz=class extends _b{constructor(e,t,i,r,a,l){super(e,t,l),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=a,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Pi.IDLE&&(this.setState(Pi.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Pi.ERROR)}setFeatures(e){this.features_=e,this.setState(Pi.LOADED)}setLoader(e){this.loader_=e}};const Oz="https://api.mapbox.com";function $O(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function ane(n,e,t){if(typeof n=="string")return[{id:"default",url:j9(n,e,t)}];for(const i of n)i.url=j9(i.url,e,t);return n}function j9(n,e,t){const i=$O(n);if(!i)return decodeURI(new URL(n,t).href);const r="sprites/";if(i.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${n}`);const a=i.slice(r.length);return`${Oz}/styles/v1/${a}/sprite?access_token=${e}`}function h3(n,e){const t=$O(n);if(!t)return decodeURI(new URL(n,location.href).href);const i="styles/";if(t.indexOf(i)!==0)throw new Error(`unexpected style url: ${n}`);const r=t.slice(i.length);return`${Oz}/styles/v1/${r}?&access_token=${e}`}const sne=["a","b","c","d"];function Sx(n,e,t,i){const r=new URL(n,i||location.href),a=$O(n);if(!a)return e?(r.searchParams.has(t)||r.searchParams.set(t,e),[decodeURI(r.href)]):[decodeURI(r.href)];if(a==="mapbox.satellite"){const l=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${a}/{z}/{x}/{y}${l}.webp?access_token=${e}`]}return sne.map(l=>`https://${l}.tiles.mapbox.com/v4/${a}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const em=Object.freeze({}),N9={},G9={};let lne=0;function ZO(n){return n.id||(n.id=lne++),n.id}function une(n,e){return ZO(n)+"."+Io(e)}function Iz(n){let e=N9[n.id];return e||(e={},N9[ZO(n)]=e),e}function Ane(n){let e=G9[n.id];return e||(e={},G9[ZO(n)]=e),e}function a5(n){return n*Math.PI/180}const Xm=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function b2(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function XO(n,e){let t=0;const i=e.length;for(;t<i;++t)if(e[t]<n&&t+1<i){const a=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(a)}return i-1}function FC(n,e){const t=Math.floor(n),i=Math.pow(2,n-t);return e[t]/i}const Py={};function Lv(n,e,t={},i){if(e in Py)return i&&(i.url=Py[e][0].url),Py[e][1];const r=t.transformRequest&&t.transformRequest(e,n)||e,a=function(p){return delete Py[e],Promise.reject(new Error("Error fetching source "+e))},l=function(p){return delete Py[e],p.ok?p.json():Promise.reject(new Error("Error fetching source "+e))},o=kv(()=>r).then(p=>p instanceof Response?(i&&(i.url=p.url),l(p)):(p instanceof Request||(p=new Request(p)),p.headers.get("Accept")||p.headers.set("Accept","application/json"),i&&(i.url=p.url),fetch(p).then(l).catch(a))).catch(a);return Py[e]=[r,o],o}function Tz(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=h3(n,e.accessToken),Lv("Style",n,e);else return Promise.resolve(n)}const W9={};function kz(n,e,t={}){const i=[e,JSON.stringify(n)].toString();let r=W9[i];if(!r||t.transformRequest){let a;t.transformRequest&&(a=(o,p)=>{const C=t.transformRequest&&t.transformRequest(p,"Tiles")||p;if(o instanceof Bz)o.setLoader((w,O,U)=>{const K=function(j){j.arrayBuffer().then(W=>{const te=o.getFormat().readFeatures(W,{extent:w,featureProjection:U});o.setFeatures(te)})};kv(()=>C).then(j=>{if(j instanceof Response)return K(j);fetch(j).then(K).catch(W=>o.setState(Pi.ERROR))}).catch(j=>o.setState(Pi.ERROR))});else{const w=o.getImage();kv(()=>C).then(O=>{if(typeof O=="string"){w.src=O;return}const U=K=>K.blob().then(j=>{const W=URL.createObjectURL(j);w.addEventListener("load",()=>URL.revokeObjectURL(W)),w.addEventListener("error",()=>URL.revokeObjectURL(W)),w.src=W});if(O instanceof Response)return U(O);fetch(O).then(U).catch(K=>o.setState(Pi.ERROR))}).catch(O=>o.setState(Pi.ERROR))}});const l=n.url;if(l&&!n.tiles){const o=Sx(l,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(l.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:a});else{const p={};r=Lv("Source",o[0],t,p).then(function(C){return C.tiles=C.tiles.map(function(w){return C.scheme==="tms"&&(w=w.replace("{y}","{-y}")),Sx(w,t.accessToken,t.accessTokenParam||"access_token",p.url)[0]}),Promise.resolve({tileJson:C,tileLoadFunction:a})})}}else n.tiles?(n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),Sx(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),r=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:a})):r=Promise.reject(new Error("source has no `tiles` nor `url`"));W9[i]=r}return r}function Q9(n,e,t,i){const r=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],a=b2(r[0],r[1]),l=a.getContext("2d");l.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=l.getImageData(0,0,r[0],r[1]);l.globalCompositeOperation="destination-over",l.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const p=o.data;for(let C=0,w=o.width;C<w;++C)for(let O=0,U=o.height;O<U;++O){const K=(O*w+C)*4;p[K+3]>0&&l.arc(C,O,t*e.pixelRatio,0,2*Math.PI)}return l.fill(),a}function cne(n,e,t){const i=Math.max(0,Math.min(1,(t-n)/(e-n)));return i*i*(3-2*i)}function Y9(n,e,t){const i=b2(e.width,e.height),r=i.getContext("2d");r.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const a=r.getImageData(0,0,e.width,e.height),l=a.data;for(let o=0,p=a.width;o<p;++o)for(let C=0,w=a.height;C<w;++C){const O=(C*p+o)*4,U=l[O+3]/255,K=.75,j=.1,W=cne(K-j,K+j,U);W>0?(l[O+0]=Math.round(255*t.r*W),l[O+1]=Math.round(255*t.g*W),l[O+2]=Math.round(255*t.b*W),l[O+3]=Math.round(255*W)):l[O+3]=0}return r.putImageData(a,0,0),i}const hne=Array(256).join("");function nB(n,e){if(e>=.05){let t="";const i=n.split(`
`),r=hne.slice(0,Math.round(e/.1));for(let a=0,l=i.length;a<l;++a)a>0&&(t+=`
`),t+=i[a].split("").join(r);return t}return n}let s5;function Dz(){return s5||(s5=b2(1,1).getContext("2d")),s5}function g1(n,e){return Dz().measureText(n).width+(n.length-1)*e}const d3={};M1.on("propertychange",()=>{for(const n in d3)delete d3[n]});function iB(n,e,t,i){if(n.indexOf(`
`)!==-1){const l=n.split(`
`),o=[];for(let p=0,C=l.length;p<C;++p)o.push(iB(l[p],e,t,i));return o.join(`
`)}const r=t+","+e+","+n+","+i;let a=d3[r];if(!a){const l=n.split(" ");if(l.length>1){const o=Dz();o.font=e;const C=o.measureText("M").width*t;let w="";const O=[];for(let U=0,K=l.length;U<K;++U){const j=l[U],W=w+(w?" ":"")+j;g1(W,i)<=C?w=W:(w&&O.push(w),w=j)}w&&O.push(w);for(let U=0,K=O.length;U<K&&K>1;++U){const j=O[U];if(g1(j,i)<C*.35){const W=U>0?g1(O[U-1],i):1/0,Y=U<K-1?g1(O[U+1],i):1/0;O.splice(U,1),K-=1,W<Y?(O[U-1]+=" "+j,U-=1):O[U]=j+" "+O[U]}}for(let U=0,K=O.length-1;U<K;++U){const j=O[U],W=O[U+1];if(g1(j,i)>C*.7&&g1(W,i)<C*.6){const Y=j.split(" "),te=Y.pop();g1(te,i)<C*.2&&(O[U]=Y.join(" "),O[U+1]=te+" "+W),K-=1}}a=O.join(`
`)}else a=n;a=nB(a,i),d3[r]=a}return a}const dne=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],q9={};function fne(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let t;for(let i=0,r=n.length;i<r;++i){const a=n[i];if(a in q9)continue;q9[a]=!0;const o=R6(a,16).split(" ");t||(t=[]),t.push([o.slice(3).join(" ").replace(/"/g,""),o[1],o[0]])}return t&&(async()=>{await document.fonts.ready;for(let i=0,r=t.length;i<r;++i){const a=t[i],l=a[0];if(dne.includes(l))continue;const o=a[1],p=a[2];if(!(await document.fonts.load(`${p} ${o} 16px "${l}"`)).some(w=>w.family.replace(/^['"]|['"]$/g,"").toLowerCase()===l.toLowerCase()&&w.weight==o&&w.style===p)){const w=e.replace("{font-family}",l.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",l.replace(/ /g,"+")).replace("{fontweight}",o).replace("{-fontstyle}",p.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",p);if(!document.querySelector('link[href="'+w+'"]')){const O=document.createElement("link");O.href=w,O.rel="stylesheet",document.head.appendChild(O)}}}})(),n}const pne={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},mne={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},gne=function(n,e){const t=$3(n,e);if(t.result==="error")throw new Error(t.value.map(i=>`${i.key}: ${i.message}`).join(", "));return t.value},Ef={zoom:0,distanceFromCenter:0};wf.register(Y3,{...wf.definitions,pitch:[{kind:"number"},[],n=>Ef.pitch||90],"distance-from-center":[{kind:"number"},[],n=>Ef.distanceFromCenter||0]});let Xb,l5;function _r(n,e,t,i,r,a){const l=n.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[l]||(r[l]={});const o=r[l];if(!o[t]){let p=(n[e]||em)[t];const C=xf[`${e}_${n.type}`][t];p===void 0&&(p=C.default);let w=Qv(p);if(!w&&Wv(p)&&(p=XB(p,C),w=!0),w){const O=gne(p,C);o[t]=O.evaluate.bind(O)}else C.type=="color"&&(p=il.parse(p)),o[t]=function(){return p}}return o[t](Ef,i,a)}function H9(n,e,t,i){return _r(n,"layout",`${t}-allow-overlap`,e,i)?_r(n,"layout",`${t}-ignore-placement`,e,i)?"none":"obstacle":"declutter"}function yne(n,e,t,i){if(i||console.warn("No filterCache provided to evaluateFilter()"),!(n in i))try{i[n]=DH(e).filter}catch(r){console.warn("Filter will evaluate to false: "+r.message),i[n]=function(){return!1}}return i[n](Ef,t)}function mg(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const vne=/\{[^{}}]*\}/g;function u5(n,e){return n.replace(vne,function(t){return e[t.slice(1,-1)]||""})}function V9(n,e){let t=n.split(":")[0];return t===n&&(t="default"),e[t]}const Cne={};function _ne(n,e,t,i=Xm,r=void 0,a=void 0,l=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");Cne[une(e,n)]=Array.from(arguments);const p={};(typeof a=="string"||a instanceof Request||a instanceof Response||a instanceof Promise)&&(a={default:a});for(const $ in a){const ae=a[$];kv(()=>ae).then(async G=>{let ce;if(typeof Image<"u"){const ge=new Image;if(typeof G=="string")ge.crossOrigin="anonymous",ge.src=G;else{let ye;G instanceof Request?ye=await fetch(G):G instanceof Response&&(ye=G);const we=await ye.blob();ce=URL.createObjectURL(we),ge.src=ce}ge.addEventListener("load",function ye(){ge.removeEventListener("load",ye),p[$]={image:ge,size:[ge.width,ge.height]},n.changed(),ce&&URL.revokeObjectURL(ce)}),ge.addEventListener("error",function ye(){URL.revokeObjectURL(ce),ge.removeEventListener("error",ye)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const ge=self;ge.postMessage({action:"loadImage",src:G}),ge.addEventListener("message",function(we){we.data.action==="imageLoaded"&&we.data.src===G&&(p[$]={image:we.data.image,size:[we.data.image.width,we.data.image.height]})})}})}const C=DB(e.layers),w={},O=[],U={},K={},j=Iz(e),W=Ane(e);let Y;for(let $=0,ae=C.length;$<ae;++$){const G=C[$],ce=G.id;if(typeof t=="string"&&G.source==t||Array.isArray(t)&&t.indexOf(ce)!==-1){const ge=G["source-layer"];if(Y){if(G.source!==Y)throw new Error(`Layer "${ce}" does not use source "${Y}`)}else{Y=G.source;const we=e.sources[Y];if(!we)throw new Error(`Source "${Y}" is not defined`);const Oe=we.type;if(Oe!=="vector"&&Oe!=="geojson")throw new Error(`Source "${Y}" is not of type "vector" or "geojson", but "${Oe}"`)}let ye=w[ge];ye||(ye=[],w[ge]=ye),ye.push({layer:G,index:$}),O.push(ce)}}const te=new Sg,J=new T0,oe=[],ne=function($,ae,G){const ce=n.getSource?.()?.format_?.layerName_??"mvt:layer",ge=$.getProperties(),ye=w[ge[ce]];if(!ye)return;let we=i.indexOf(ae);we==-1&&(we=XO(ae,i)),Ef.zoom=we,Ef.distanceFromCenter=0;const Oe=$.getGeometry(),Se=pne[Oe.getType()],Ve=n.get("map");if(Ve&&Ve instanceof C2&&Se===1){const Ct=Ve.getSize();if(Ct){const nt=Ve.getView().getCenter(),be=Bf(Oe.getExtent());Ef.distanceFromCenter=gX(nt,be)/ae/Ct[1]}}const xe={id:$.getId(),properties:ge,type:Se},ze=n.get("mapbox-featurestate")[$.getId()];let st=-1;for(let Ct=0,nt=ye.length;Ct<nt;++Ct){const be=ye[Ct],Ne=be.layer,tt=Ne.id;if(G!==void 0&&G!==tt)continue;const lt=Ne.layout||em,kt=Ne.paint||em;if(lt.visibility==="none"||"minzoom"in Ne&&we<Ne.minzoom||"maxzoom"in Ne&&we>=Ne.maxzoom)continue;const gt=Ne.filter;if(!gt||yne(tt,gt,xe,W)){let St,Ut,Fe,Ke,Re,He;const bt=be.index;if(Se==3&&(Ne.type=="fill"||Ne.type=="fill-extrusion"))if(Ut=_r(Ne,"paint",Ne.type+"-opacity",xe,j,ze),Ne.type+"-pattern"in kt){const ei=_r(Ne,"paint",Ne.type+"-pattern",xe,j,ze);if(ei){const Kn=typeof ei=="string"?u5(ei,ge):ei.toString(),je=V9(Kn,p);if(r&&r[Kn]&&je){++st,He=oe[st],(!He||!He.getFill()||He.getStroke()||He.getText())&&(He=new Cf({fill:new T0}),oe[st]=He),Fe=He.getFill(),He.setZIndex(bt);const de=Kn+"."+Ut;let re=K[de];if(!re){const le=r[Kn],pe=b2(le.width,le.height),Te=pe.getContext("2d");Te.globalAlpha=Ut,Te.drawImage(je.image,le.x,le.y,le.width,le.height,0,0,le.width,le.height),re=Te.createPattern(pe,"repeat"),K[de]=re}Fe.setColor(re)}}}else St=mg(_r(Ne,"paint",Ne.type+"-color",xe,j,ze),Ut),Ne.type+"-outline-color"in kt&&(Re=mg(_r(Ne,"paint",Ne.type+"-outline-color",xe,j,ze),Ut)),Re||(Re=St),(St||Re)&&(++st,He=oe[st],(!He||St&&!He.getFill()||!St&&He.getFill()||Re&&!He.getStroke()||!Re&&He.getStroke()||He.getText())&&(He=new Cf({fill:St?new T0:void 0,stroke:Re?new Sg:void 0}),oe[st]=He),St&&(Fe=He.getFill(),Fe.setColor(St)),Re&&(Ke=He.getStroke(),Ke.setColor(Re),Ke.setWidth(.5)),He.setZIndex(bt));if(Se!=1&&Ne.type=="line"){"line-pattern"in kt?St=void 0:St=mg(_r(Ne,"paint","line-color",xe,j,ze),_r(Ne,"paint","line-opacity",xe,j,ze));const ei=_r(Ne,"paint","line-width",xe,j,ze);St&&ei>0&&(++st,He=oe[st],(!He||!He.getStroke()||He.getFill()||He.getText())&&(He=new Cf({stroke:new Sg}),oe[st]=He),Ke=He.getStroke(),Ke.setLineCap(_r(Ne,"layout","line-cap",xe,j,ze)),Ke.setLineJoin(_r(Ne,"layout","line-join",xe,j,ze)),Ke.setMiterLimit(_r(Ne,"layout","line-miter-limit",xe,j,ze)),Ke.setColor(St),Ke.setWidth(ei),Ke.setLineDash(kt["line-dasharray"]?_r(Ne,"paint","line-dasharray",xe,j,ze).map(function(Kn){return Kn*ei}):null),He.setZIndex(bt))}let _t=!1,Ot=null,qt=0,Kt,on,Jn;if((Se==1||Se==2)&&"icon-image"in lt){const ei=_r(Ne,"layout","icon-image",xe,j,ze);if(ei){Kt=typeof ei=="string"?u5(ei,ge):ei.toString();let Kn;const je=o?o(n,Kt):void 0,de=V9(Kt,p);if(r&&r[Kt]&&de||je){const re=_r(Ne,"layout","icon-rotation-alignment",xe,j,ze);if(Se==2){const le=$.getGeometry();if(le.getFlatMidpoint||le.getFlatMidpoints){const pe=le.getExtent();if(Math.sqrt(Math.max(Math.pow((pe[2]-pe[0])/ae,2),Math.pow((pe[3]-pe[1])/ae,2)))>150){const We=le.getType()==="MultiLineString"?le.getFlatMidpoints():le.getFlatMidpoint();if(l5||(Xb=[NaN,NaN],l5=new Fh("Point",Xb,[],2,{},void 0)),Kn=l5,Xb[0]=We[0],Xb[1]=We[1],_r(Ne,"layout","symbol-placement",xe,j,ze)==="line"&&re==="map"){const Ye=le.getStride(),De=le.getFlatCoordinates();for(let Ze=0,g=De.length-Ye;Ze<g;Ze+=Ye){const mt=De[Ze],ht=De[Ze+1],Tt=De[Ze+Ye],it=De[Ze+Ye+1],en=Math.min(mt,Tt),Dn=Math.max(mt,Tt),Mn=We[0],ii=We[1],Wn=(it-ht)*(Mn-mt)-(Tt-mt)*(ii-ht);if(Math.abs(Wn)<.001&&Mn<=Dn&&Mn>=en){qt=Math.atan2(ht-it,Tt-mt);break}}}}}}if(Se!==2||Kn){const le=_r(Ne,"layout","icon-size",xe,j,ze),pe=kt["icon-color"]!==void 0?_r(Ne,"paint","icon-color",xe,j,ze):null;if(!pe||pe.a!==0){const Te=_r(Ne,"paint","icon-halo-color",xe,j,ze),We=_r(Ne,"paint","icon-halo-width",xe,j,ze);let dt=`${Kt}.${le}.${We}.${Te}`;if(pe!==null&&(dt+=`.${pe}`),on=U[dt],!on){const Ye=H9(Ne,xe,"icon",j);let De;"icon-offset"in lt&&(De=_r(Ne,"layout","icon-offset",xe,j,ze).slice(0),De[0]*=le,De[1]*=-le);let Ze=pe?[pe.r*255,pe.g*255,pe.b*255,pe.a]:void 0;if(je){const g={color:Ze,rotateWithView:re==="map",displacement:De,declutterMode:Ye,scale:le};typeof je=="string"?g.src=je:(g.img=je,g.imgSize=[je.width,je.height]),on=new Uv(g)}else{const g=r[Kt];let mt,ht,Tt;if(We)g.sdf?(mt=Q9(Y9(de.image,g,pe||[0,0,0,1]),{x:0,y:0,width:g.width,height:g.height,pixelRatio:g.pixelRatio},We,Te),Ze=void 0):mt=Q9(de.image,g,We,Te);else{if(g.sdf&&!de.unSDFed){const it=Y9(de.image,{x:0,y:0,width:de.size[0],height:de.size[1]},{r:1,g:1,b:1});de.image=it,de.unSDFed=!0}mt=de.image,ht=[g.width,g.height],Tt=[g.x,g.y]}on=new Uv({color:Ze,img:mt,imgSize:de.size,size:ht,offset:Tt,rotateWithView:re==="map",scale:le/g.pixelRatio,displacement:De,declutterMode:Ye})}U[dt]=on}}on&&(++st,He=oe[st],(!He||!He.getImage()||He.getFill()||He.getStroke())&&(He=new Cf,oe[st]=He),He.setGeometry(Kn),on.setRotation(qt+a5(_r(Ne,"layout","icon-rotate",xe,j,ze))),on.setOpacity(_r(Ne,"paint","icon-opacity",xe,j,ze)),on.setAnchor(mne[_r(Ne,"layout","icon-anchor",xe,j,ze)]),He.setImage(on),Ot=He.getText(),He.setText(void 0),He.setZIndex(bt),_t=!0,Jn=!1)}else Jn=!0}}}if(Se==1&&Ne.type==="circle"){++st,He=oe[st],(!He||!He.getImage()||He.getFill()||He.getStroke())&&(He=new Cf,oe[st]=He);const ei="circle-radius"in kt?_r(Ne,"paint","circle-radius",xe,j,ze):5,Kn=mg(_r(Ne,"paint","circle-stroke-color",xe,j,ze),_r(Ne,"paint","circle-stroke-opacity",xe,j,ze)),je=_r(Ne,"paint","circle-translate",xe,j,ze),de=mg(_r(Ne,"paint","circle-color",xe,j,ze),_r(Ne,"paint","circle-opacity",xe,j,ze)),re=_r(Ne,"paint","circle-stroke-width",xe,j,ze),le=ei+"."+Kn+"."+de+"."+re+"."+je[0]+"."+je[1];on=U[le],on||(on=new gb({radius:ei,displacement:[je[0],-je[1]],stroke:Kn&&re>0?new Sg({width:re,color:Kn}):void 0,fill:de?new T0({color:de}):void 0,declutterMode:"none"}),U[le]=on),He.setImage(on),Ot=He.getText(),He.setText(void 0),He.setGeometry(void 0),He.setZIndex(bt),_t=!0}let Wt,$n,On,Bn,In,Oi;if("text-field"in lt){Bn=Math.round(_r(Ne,"layout","text-size",xe,j,ze));const ei=_r(Ne,"layout","text-font",xe,j,ze);On=_r(Ne,"layout","text-line-height",xe,j,ze),$n=R6(l?l(ei,e.metadata?e.metadata["ol:webfonts"]:void 0):ei,Bn,On),$n.includes("sans-serif")||($n+=",sans-serif"),In=_r(Ne,"layout","text-letter-spacing",xe,j,ze),Oi=_r(Ne,"layout","text-max-width",xe,j,ze);const Kn=_r(Ne,"layout","text-field",xe,j,ze);typeof Kn=="object"&&Kn.sections?Kn.sections.length===1?Wt=Kn.toString():Wt=Kn.sections.reduce((je,de,re)=>{const le=de.fontStack?de.fontStack.split(","):ei,pe=R6(l?l(le):le,Bn*(de.scale||1),On);let Te=de.text;if(Te===`
`)return je.push(`
`,""),je;if(Se==2)return je.push(nB(Te,In),pe),je;Te=iB(Te,pe,Oi,In).split(`
`);for(let We=0,dt=Te.length;We<dt;++We)We>0&&je.push(`
`,""),je.push(Te[We],pe);return je},[]):Wt=u5(Kn,ge).trim(),Ut=_r(Ne,"paint","text-opacity",xe,j,ze)}if(Wt&&Ut&&!Jn){_t||(++st,He=oe[st],(!He||!He.getText()||He.getFill()||He.getStroke())&&(He=new Cf,oe[st]=He),He.setImage(void 0),He.setGeometry(void 0));const ei=H9(Ne,xe,"text",j);He.getText()||He.setText(Ot),Ot=He.getText(),(!Ot||"getDeclutterMode"in Ot&&Ot.getDeclutterMode()!==ei)&&(Ot=new g2({padding:[2,2,2,2],declutterMode:ei}),He.setText(Ot));const Kn=_r(Ne,"layout","text-transform",xe,j,ze);Kn=="uppercase"?Wt=Array.isArray(Wt)?Wt.map((Tt,it)=>it%2?Tt:Tt.toUpperCase()):Wt.toUpperCase():Kn=="lowercase"&&(Wt=Array.isArray(Wt)?Wt.map((Tt,it)=>it%2?Tt:Tt.toLowerCase()):Wt.toLowerCase());const je=Array.isArray(Wt)?Wt:Se==2?nB(Wt,In):iB(Wt,$n,Oi,In);if(Ot.setText(je),Ot.setFont($n),Ot.setRotation(a5(_r(Ne,"layout","text-rotate",xe,j,ze))),typeof Ot.setKeepUpright=="function"){const Tt=_r(Ne,"layout","text-keep-upright",xe,j,ze);Ot.setKeepUpright(Tt)}const de=_r(Ne,"layout","text-anchor",xe,j,ze),re=_t||Se==1?"point":_r(Ne,"layout","symbol-placement",xe,j,ze);let le;if(re==="line-center"?(Ot.setPlacement("line"),le="center"):Ot.setPlacement(re),re==="line"&&typeof Ot.setRepeat=="function"){const Tt=_r(Ne,"layout","symbol-spacing",xe,j,ze);Ot.setRepeat(Tt*2)}Ot.setOverflow(re==="point");let pe=_r(Ne,"paint","text-halo-width",xe,j,ze);const Te=_r(Ne,"layout","text-offset",xe,j,ze),We=_r(Ne,"paint","text-translate",xe,j,ze);let dt=0,Ye=0;if(re=="point"){le="center",de.indexOf("left")!==-1?(le="left",Ye=pe):de.indexOf("right")!==-1&&(le="right",Ye=-pe);const Tt=_r(Ne,"layout","text-rotation-alignment",xe,j,ze);Ot.setRotateWithView(Tt=="map")}else Ot.setMaxAngle(a5(_r(Ne,"layout","text-max-angle",xe,j,ze))*Wt.length/je.length),Ot.setRotateWithView(!1);Ot.setTextAlign(le);let De="middle";de.indexOf("bottom")==0?(De="bottom",dt=-pe-.5*(On-1)*Bn):de.indexOf("top")==0&&(De="top",dt=pe+.5*(On-1)*Bn),Ot.setTextBaseline(De);const Ze=_r(Ne,"layout","text-justify",xe,j,ze);Ot.setJustify(Ze==="auto"?void 0:Ze),Ot.setOffsetX(Te[0]*Bn+Ye+We[0]),Ot.setOffsetY(Te[1]*Bn+dt+We[1]),J.setColor(mg(_r(Ne,"paint","text-color",xe,j,ze),Ut)),Ot.setFill(J);const g=mg(_r(Ne,"paint","text-halo-color",xe,j,ze),Ut);if(g&&pe>0){te.setColor(g),pe*=2;const Tt=.5*Bn;te.setWidth(pe<=Tt?pe:Tt),Ot.setStroke(te)}else Ot.setStroke(void 0);const mt=_r(Ne,"layout","text-padding",xe,j,ze),ht=Ot.getPadding();mt!==ht[0]&&(ht[0]=mt,ht[1]=mt,ht[2]=mt,ht[3]=mt),He.setZIndex(bt)}}}if(st>-1)return oe.length=st+1,oe};return n.setStyle(ne),n.set("mapbox-layers",O),n.set("mapbox-source",Y),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),ne}class Rz{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=_2,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Qs(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Qs(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return vo()}readFeature(e,t){return vo()}readFeatures(e,t){return vo()}readGeometry(e,t){return vo()}readProjection(e){return vo()}writeFeature(e,t){return vo()}writeFeatures(e,t){return vo()}writeGeometry(e,t){return vo()}}function x2(n,e,t){const i=t?Qs(t.featureProjection):null,r=t?Qs(t.dataProjection):null;let a=n;if(i&&r&&!Pg(i,r)){e&&(a=n.clone());const l=e?i:r,o=e?r:i;l.getUnits()==="tile-pixels"?a.transform(l,o):a.applyTransform(S_(l,o))}if(e&&t&&t.decimals!==void 0){const l=Math.pow(10,t.decimals),o=function(p){for(let C=0,w=p.length;C<w;++C)p[C]=Math.round(p[C]*l)/l;return p};a===n&&(a=n.clone()),a.applyTransform(o)}return a}const bne={Point:Y1,LineString:H1,Polygon:L0,MultiPoint:vb,MultiLineString:P_,MultiPolygon:K_};function xne(n,e,t){return Array.isArray(e[0])?(WF(n,0,e,t)||(n=n.slice(),q6(n,0,e,t)),n):(EO(n,0,e,t)||(n=n.slice(),n3(n,0,e,t)),n)}function Pz(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(a=>Pz({...n,geometry:a})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return x2(new Fh(i,i==="Polygon"?xne(t.flatCoordinates,t.ends,r):t.flatCoordinates,t.ends?.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function JO(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>JO(r,e));return new l3(i)}const t=bne[n.type];return x2(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Mne extends Rz{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Jb(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Jb(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return vo()}readFeaturesFromObject(e,t){return vo()}readGeometry(e,t){return this.readGeometryFromObject(Jb(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return vo()}readProjection(e){return this.readProjectionFromObject(Jb(e))}readProjectionFromObject(e){return vo()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return vo()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return vo()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return vo()}}function Jb(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class $9 extends Mne{constructor(e){e=e||{},super(),this.dataProjection=Qs(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Qs(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=e8(i.geometry);if(this.featureClass===Fh)return Pz({geometry:r,id:i.id,properties:i.properties},t);const a=new _2;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&a.setGeometryName(i.geometry_name),a.setGeometry(JO(r,t)),"id"in i&&a.setId(i.id),i.properties&&a.setProperties(i.properties,!0),a}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const a=e;r=[];const l=a.features;for(let o=0,p=l.length;o<p;++o){const C=this.readFeatureFromObject(l[o],t);C&&r.push(C)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return wne(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Qs(t.properties.name);else if(t.type==="EPSG")i=Qs("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const a=e.getProperties(),l=e.getGeometry();return l&&(i.geometry=rB(l,t),delete a[e.getGeometryName()]),Lg(a)||(i.properties=a),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,a=e.length;r<a;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return rB(e,this.adaptOptions(t))}}function e8(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Ene(n);break}case"LineString":{t=Bne(n);break}case"Polygon":{t=kne(n);break}case"MultiPoint":{t=Ine(n);break}case"MultiLineString":{t=One(n);break}case"MultiPolygon":{t=Tne(n);break}case"GeometryCollection":{t=Sne(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function wne(n,e){const t=e8(n);return JO(t,e)}function Sne(n,e){return n.geometries.map(function(i){return e8(i)})}function Ene(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:J1(e.length)}}function Bne(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:J1(e[0]?.length||2)}}function One(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,i=[],r=db(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:J1(t)}}function Ine(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:J1(e[0]?.length||2)}}function Tne(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.[0].length||2,r=LF(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:J1(i)}}function kne(n){const e=n.coordinates,t=[],i=e[0]?.[0]?.length,r=db(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:J1(i)}}function rB(n,e){n=x2(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=Lne(n);break}case"LineString":{i=Rne(n);break}case"Polygon":{i=Fne(n,e);break}case"MultiPoint":{i=Kne(n);break}case"MultiLineString":{i=Pne(n);break}case"MultiPolygon":{i=Une(n,e);break}case"GeometryCollection":{i=Dne(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function Dne(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return rB(i,e)})}}function Rne(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Pne(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Kne(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Une(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Lne(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Fne(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const oB=65536*65536,Z9=1/oB,zne=12,X9=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),A5=0,ex=1,MC=2,tx=5;class jne{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){const r=this.readVarint(),a=r>>3,l=this.pos;this.type=r&7,e(a,t,this),this.pos===l&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*oB;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*oB;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,Nne(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=zne&&X9?X9.decode(this.buf.subarray(t,e)):tie(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===MC?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===A5)for(;this.buf[this.pos++]>127;);else if(t===MC)this.pos=this.readVarint()+this.pos;else if(t===tx)this.pos+=4;else if(t===ex)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Z9),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Z9),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Gne(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=nie(this.buf,e,this.pos);const i=this.pos-t;i>=128&&J9(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;const i=this.pos;e(t,this);const r=this.pos-i;r>=128&&J9(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,MC),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,Yne,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,qne,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,$ne,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,Hne,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,Vne,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Zne,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Xne,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Jne,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,eie,t)}writeBytesField(e,t){this.writeTag(e,MC),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,tx),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,tx),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,ex),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,ex),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,A5),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,A5),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,MC),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,tx),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,ex),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function Nne(n,e,t){const i=t.buf;let r,a;if(a=i[t.pos++],r=(a&112)>>4,a<128||(a=i[t.pos++],r|=(a&127)<<3,a<128)||(a=i[t.pos++],r|=(a&127)<<10,a<128)||(a=i[t.pos++],r|=(a&127)<<17,a<128)||(a=i[t.pos++],r|=(a&127)<<24,a<128)||(a=i[t.pos++],r|=(a&1)<<31,a<128))return Ky(n,r,e);throw new Error("Expected varint not more than 10 bytes")}function Ky(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function Gne(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Wne(t,i,e),Qne(i,e)}function Wne(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function Qne(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function J9(n,e,t){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}function Yne(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function qne(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function Hne(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function Vne(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function $ne(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function Zne(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function Xne(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function Jne(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function eie(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function tie(n,e,t){let i="",r=e;for(;r<t;){const a=n[r];let l=null,o=a>239?4:a>223?3:a>191?2:1;if(r+o>t)break;let p,C,w;o===1?a<128&&(l=a):o===2?(p=n[r+1],(p&192)===128&&(l=(a&31)<<6|p&63,l<=127&&(l=null))):o===3?(p=n[r+1],C=n[r+2],(p&192)===128&&(C&192)===128&&(l=(a&15)<<12|(p&63)<<6|C&63,(l<=2047||l>=55296&&l<=57343)&&(l=null))):o===4&&(p=n[r+1],C=n[r+2],w=n[r+3],(p&192)===128&&(C&192)===128&&(w&192)===128&&(l=(a&15)<<18|(p&63)<<12|(C&63)<<6|w&63,(l<=65535||l>=1114112)&&(l=null))),l===null?(l=65533,o=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),i+=String.fromCharCode(l),r+=o}return i}function nie(n,e,t){for(let i=0,r,a;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(a)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,a=r;continue}else r=a-55296<<10|r-56320|65536,a=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):a=r;continue}else a&&(n[t++]=239,n[t++]=191,n[t++]=189,a=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}class Kz extends Rz{constructor(e){super(),e=e||{},this.dataProjection=new s2({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:Fh,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,i,r){e.pos=t.geometry;const a=e.readVarint()+e.pos;let l=1,o=0,p=0,C=0,w=0,O=0;for(;e.pos<a;){if(!o){const U=e.readVarint();l=U&7,o=U>>3}if(o--,l===1||l===2)p+=e.readSVarint(),C+=e.readSVarint(),l===1&&w>O&&(r.push(w),O=w),i.push(p,C),w+=2;else if(l===7)w>O&&(i.push(i[O],i[O+1]),w+=2);else throw new Error("Invalid command found in the PBF")}w>O&&(r.push(w),O=w)}createFeature_(e,t,i){const r=t.type;if(r===0)return null;let a;const l=t.properties;let o;this.idProperty_?(o=l[this.idProperty_],delete l[this.idProperty_]):o=t.id,l[this.layerName_]=t.layer.name;const p=[],C=[];this.readRawGeometry_(e,t,p,C);const w=sie(r,C.length);if(this.featureClass===Fh)a=new this.featureClass(w,p,C,2,l,o),a.transform(i.dataProjection);else{let O;if(w=="Polygon"){const j=QF(p,C);O=j.length>1?new K_(p,"XY",j):new L0(p,"XY",C)}else O=w==="Point"?new Y1(p,"XY"):w==="LineString"?new H1(p,"XY"):w==="MultiPoint"?new vb(p,"XY"):w==="MultiLineString"?new P_(p,"XY",C):null;const U=this.featureClass;a=new U,this.geometryName_&&a.setGeometryName(this.geometryName_);const K=x2(O,!1,i);a.setGeometry(K),o!==void 0&&a.setId(o),a.setProperties(l,!0)}return a}getType(){return"arraybuffer"}readFeatures(e,t){const i=this.layers_;t=this.adaptOptions(t);const r=Qs(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const a=new jne(e),l=a.readFields(iie,{}),o=[];for(const p in l){if(i&&!i.includes(p))continue;const C=l[p],w=C?[0,0,C.extent,C.extent]:null;r.setExtent(w);for(let O=0,U=C.length;O<U;++O){const K=aie(a,C,O),j=this.createFeature_(a,K,t);j!==null&&o.push(j)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function iie(n,e,t){if(n===3){const i={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(rie,i,r),i.length=i.features.length,i.length&&(e[i.name]=i)}}function rie(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let i=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)n=t.readVarint()>>3,i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(i)}}function oie(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const i=t.readVarint()+t.pos;for(;t.pos<i;){const r=e.layer.keys[t.readVarint()],a=e.layer.values[t.readVarint()];e.properties[r]=a}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function aie(n,e,t){n.pos=e.features[t];const i=n.readVarint()+n.pos,r={layer:e,type:0,properties:{}};return n.readFields(oie,r,i),r}function sie(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class lie extends qO{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,a=r.resolution,l=this.getLayer().getSource(),o=e.viewHints;let p=e.extent;if(t.extent!==void 0&&(p=im(p,Qm(t.extent,r.projection))),!o[vu.ANIMATING]&&!o[vu.INTERACTING]&&!Z1(p))if(l){const C=r.projection,w=l.getImage(p,a,i,C);w&&(this.loadImage(w)?this.image=w:w.getState()===hr.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=tc(t.pixelToCoordinateTransform,e.slice()),a=i.getExtent();if(a&&!Q1(a,r))return null;const l=this.image.getExtent(),o=this.image.getImage(),p=ss(l),C=Math.floor(o.width*((r[0]-l[0])/p));if(C<0||C>=o.width)return null;const w=ic(l),O=Math.floor(o.height*((l[3]-r[1])/w));return O<0||O>=o.height?null:this.getImageData(o,C,O)}renderFrame(e,t){const i=this.image,r=i.getExtent(),a=i.getResolution(),[l,o]=Array.isArray(a)?a:[a,a],p=i.getPixelRatio(),C=e.layerStatesArray[e.layerIndex],w=e.pixelRatio,O=e.viewState,U=O.center,K=O.resolution,j=w*l/(K*p),W=w*o/(K*p);this.prepareContainer(e,t);const Y=this.context.canvas.width,te=this.context.canvas.height,J=this.getRenderContext(e);let oe=!1,ne=!0;if(C.extent){const ge=Qm(C.extent,O.projection);ne=uA(ge,e.extent),oe=ne&&!Wm(ge,e.extent),oe&&this.clipUnrotated(J,e,ge)}const $=i.getImage(),ae=Jm(this.tempTransform,Y/2,te/2,j,W,0,p*(r[0]-U[0])/l,p*(U[1]-r[3])/o);this.renderedResolution=o*w/p;const G=$.width*ae[0],ce=$.height*ae[3];if(this.getLayer().getSource().getInterpolate()||(J.imageSmoothingEnabled=!1),this.preRender(J,e),ne&&G>=.5&&ce>=.5){const ge=ae[4],ye=ae[5],we=C.opacity;we!==1&&(J.save(),J.globalAlpha=we),J.drawImage($,0,0,+$.width,+$.height,ge,ye,G,ce),we!==1&&J.restore()}return this.postRender(this.context,e),oe&&J.restore(),J.imageSmoothingEnabled=!0,this.container}}class uie extends $v{constructor(e){e=e||{},super(e)}}class Uz extends uie{constructor(e){super(e)}createRenderer(){return new lie(this)}getData(e){return super.getData(e)}}function aB(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const Aie=new Error("disposed"),cie=[256,256];class eT extends _b{constructor(e){const t=Pi.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=aB(this.data_);return e?[e.width,e.height]:cie}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Pi.IDLE&&this.state!==Pi.ERROR)return;this.state=Pi.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Pi.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Pi.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Aie),this.controller_=null),super.disposeInternal()}}let c5;const Cv=[];function tT(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function h5(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function hie(){if(c5===void 0){const n=Gu(6,6,Cv);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",tT(n,4,5,4,0),tT(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;c5=h5(e,0)||h5(e,4)||h5(e,8),fb(n),Cv.push(n.canvas)}return c5}function sB(n,e,t,i){const r=A2(t,e,n);let a=G6(e,i,t);const l=e.getMetersPerUnit();l!==void 0&&(a*=l);const o=n.getMetersPerUnit();o!==void 0&&(a/=o);const p=n.getExtent();if(!p||Q1(p,r)){const C=G6(n,a,r)/a;isFinite(C)&&C>0&&(a/=C)}return a}function die(n,e,t,i){const r=Bf(t);let a=sB(n,e,r,i);return(!isFinite(a)||a<=0)&&CF(t,function(l){return a=sB(n,e,l,i),isFinite(a)&&a>0}),a}function Lz(n,e,t,i,r,a,l,o,p,C,w,O,U,K){const j=Gu(Math.round(t*n),Math.round(t*e),Cv);if(O||(j.imageSmoothingEnabled=!1),p.length===0)return j.canvas;j.scale(t,t);function W($){return Math.round($*t)/t}j.globalCompositeOperation="lighter";const Y=bp();p.forEach(function($,ae,G){yF(Y,$.extent)});let te;const J=t/i,oe=(O?1:1+Math.pow(2,-24))/J;(!U||p.length!==1||C!==0)&&(te=Gu(Math.round(ss(Y)*J),Math.round(ic(Y)*J),Cv),O||(te.imageSmoothingEnabled=!1),p.forEach(function($,ae,G){if($.image.width>0&&$.image.height>0){if($.clipExtent){te.save();const Oe=($.clipExtent[0]-Y[0])*J,Se=-($.clipExtent[3]-Y[3])*J,Ve=ss($.clipExtent)*J,xe=ic($.clipExtent)*J;te.rect(O?Oe:Math.round(Oe),O?Se:Math.round(Se),O?Ve:Math.round(Oe+Ve)-Math.round(Oe),O?xe:Math.round(Se+xe)-Math.round(Se)),te.clip()}const ce=($.extent[0]-Y[0])*J,ge=-($.extent[3]-Y[3])*J,ye=ss($.extent)*J,we=ic($.extent)*J;te.drawImage($.image,C,C,$.image.width-2*C,$.image.height-2*C,O?ce:Math.round(ce),O?ge:Math.round(ge),O?ye:Math.round(ce+ye)-Math.round(ce),O?we:Math.round(ge+we)-Math.round(ge)),$.clipExtent&&te.restore()}}));const ne=j0(l);return o.getTriangles().forEach(function($,ae,G){const ce=$.source,ge=$.target;let ye=ce[0][0],we=ce[0][1],Oe=ce[1][0],Se=ce[1][1],Ve=ce[2][0],xe=ce[2][1];const ze=W((ge[0][0]-ne[0])/a),st=W(-(ge[0][1]-ne[1])/a),Ct=W((ge[1][0]-ne[0])/a),nt=W(-(ge[1][1]-ne[1])/a),be=W((ge[2][0]-ne[0])/a),Ne=W(-(ge[2][1]-ne[1])/a),tt=ye,lt=we;ye=0,we=0,Oe-=tt,Se-=lt,Ve-=tt,xe-=lt;const kt=[[Oe,Se,0,0,Ct-ze],[Ve,xe,0,0,be-ze],[0,0,Oe,Se,nt-st],[0,0,Ve,xe,Ne-st]],gt=aX(kt);if(!gt)return;if(j.save(),j.beginPath(),hie()||!O){j.moveTo(Ct,nt);const Ut=4,Fe=ze-Ct,Ke=st-nt;for(let Re=0;Re<Ut;Re++)j.lineTo(Ct+W((Re+1)*Fe/Ut),nt+W(Re*Ke/(Ut-1))),Re!=Ut-1&&j.lineTo(Ct+W((Re+1)*Fe/Ut),nt+W((Re+1)*Ke/(Ut-1)));j.lineTo(be,Ne)}else j.moveTo(Ct,nt),j.lineTo(ze,st),j.lineTo(be,Ne);j.clip(),j.transform(gt[0],gt[2],gt[1],gt[3],ze,st),j.translate(Y[0]-tt,Y[3]-lt);let St;if(te)St=te.canvas,j.scale(oe,-oe);else{const Ut=p[0],Fe=Ut.extent;St=Ut.image,j.scale(ss(Fe)/St.width,-ic(Fe)/St.height)}j.drawImage(St,0,0),j.restore()}),te&&(fb(te),Cv.push(te.canvas)),w&&(j.save(),j.globalCompositeOperation="source-over",j.strokeStyle="black",j.lineWidth=1,o.getTriangles().forEach(function($,ae,G){const ce=$.target,ge=(ce[0][0]-ne[0])/a,ye=-(ce[0][1]-ne[1])/a,we=(ce[1][0]-ne[0])/a,Oe=-(ce[1][1]-ne[1])/a,Se=(ce[2][0]-ne[0])/a,Ve=-(ce[2][1]-ne[1])/a;j.beginPath(),j.moveTo(we,Oe),j.lineTo(ge,ye),j.lineTo(Se,Ve),j.closePath(),j.stroke()}),j.restore()),j.canvas}const fie=10,nT=.25;class Fz{constructor(e,t,i,r,a,l,o){this.sourceProj_=e,this.targetProj_=t;let p={};const C=o?HX(oe=>tc(o,A2(oe,this.targetProj_,this.sourceProj_))):S_(this.targetProj_,this.sourceProj_);this.transformInv_=function(oe){const ne=oe[0]+"/"+oe[1];return p[ne]||(p[ne]=C(oe)),p[ne]},this.maxSourceExtent_=r,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ss(r)>=ss(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ss(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ss(this.targetProj_.getExtent()):null;const w=j0(i),O=a2(i),U=o2(i),K=r2(i),j=this.transformInv_(w),W=this.transformInv_(O),Y=this.transformInv_(U),te=this.transformInv_(K),J=fie+(l?Math.max(0,Math.ceil(Math.log2(F6(i)/(l*l*256*256)))):0);if(this.addQuad_(w,O,U,K,j,W,Y,te,J),this.wrapsXInSource_){let oe=1/0;this.triangles_.forEach(function(ne,$,ae){oe=Math.min(oe,ne.source[0][0],ne.source[1][0],ne.source[2][0])}),this.triangles_.forEach(ne=>{if(Math.max(ne.source[0][0],ne.source[1][0],ne.source[2][0])-oe>this.sourceWorldWidth_/2){const $=[[ne.source[0][0],ne.source[0][1]],[ne.source[1][0],ne.source[1][1]],[ne.source[2][0],ne.source[2][1]]];$[0][0]-oe>this.sourceWorldWidth_/2&&($[0][0]-=this.sourceWorldWidth_),$[1][0]-oe>this.sourceWorldWidth_/2&&($[1][0]-=this.sourceWorldWidth_),$[2][0]-oe>this.sourceWorldWidth_/2&&($[2][0]-=this.sourceWorldWidth_);const ae=Math.min($[0][0],$[1][0],$[2][0]);Math.max($[0][0],$[1][0],$[2][0])-ae<this.sourceWorldWidth_/2&&(ne.source=$)}})}p={}}addTriangle_(e,t,i,r,a,l){this.triangles_.push({source:[r,a,l],target:[e,t,i]})}addQuad_(e,t,i,r,a,l,o,p,C){const w=U6([a,l,o,p]),O=this.sourceWorldWidth_?ss(w)/this.sourceWorldWidth_:null,U=this.sourceWorldWidth_,K=this.sourceProj_.canWrapX()&&O>.5&&O<1;let j=!1;if(C>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const Y=U6([e,t,i,r]);j=ss(Y)/this.targetWorldWidth_>nT||j}!K&&this.sourceProj_.isGlobal()&&O&&(j=O>nT||j)}if(!j&&this.maxSourceExtent_&&isFinite(w[0])&&isFinite(w[1])&&isFinite(w[2])&&isFinite(w[3])&&!uA(w,this.maxSourceExtent_))return;let W=0;if(!j&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(p[0])||!isFinite(p[1]))){if(C>0)j=!0;else if(W=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(p[0])||!isFinite(p[1])?1:0),W!=1&&W!=2&&W!=4&&W!=8)return}if(C>0){if(!j){const Y=[(e[0]+i[0])/2,(e[1]+i[1])/2],te=this.transformInv_(Y);let J;K?J=(L1(a[0],U)+L1(o[0],U))/2-L1(te[0],U):J=(a[0]+o[0])/2-te[0];const oe=(a[1]+o[1])/2-te[1];j=J*J+oe*oe>this.errorThresholdSquared_}if(j){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const Y=[(t[0]+i[0])/2,(t[1]+i[1])/2],te=this.transformInv_(Y),J=[(r[0]+e[0])/2,(r[1]+e[1])/2],oe=this.transformInv_(J);this.addQuad_(e,t,Y,J,a,l,te,oe,C-1),this.addQuad_(J,Y,i,r,oe,te,o,p,C-1)}else{const Y=[(e[0]+t[0])/2,(e[1]+t[1])/2],te=this.transformInv_(Y),J=[(i[0]+r[0])/2,(i[1]+r[1])/2],oe=this.transformInv_(J);this.addQuad_(e,Y,J,r,a,te,oe,p,C-1),this.addQuad_(Y,t,i,J,te,l,o,oe,C-1)}return}}if(K){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(W&11)==0&&this.addTriangle_(e,i,r,a,o,p),(W&14)==0&&this.addTriangle_(e,i,t,a,o,l),W&&((W&13)==0&&this.addTriangle_(t,r,e,l,p,a),(W&7)==0&&this.addTriangle_(t,r,i,l,p,o))}calculateSourceExtent(){const e=bp();return this.triangles_.forEach(function(t,i,r){const a=t.source;t_(e,a[0]),t_(e,a[1]),t_(e,a[2])}),e}getTriangles(){return this.triangles_}}const zz=.5;class jz extends _b{constructor(e,t,i,r,a,l,o,p,C,w,O,U){super(a,Pi.IDLE,U),this.renderEdges_=O!==void 0?O:!1,this.pixelRatio_=o,this.gutter_=p,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=l||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const K=r.getTileCoordExtent(this.wrappedTileCoord_),j=this.targetTileGrid_.getExtent();let W=this.sourceTileGrid_.getExtent();const Y=j?im(K,j):K;if(F6(Y)===0){this.state=Pi.EMPTY;return}const te=e.getExtent();te&&(W?W=im(W,te):W=te);const J=r.getResolution(this.wrappedTileCoord_[0]),oe=die(e,i,Y,J);if(!isFinite(oe)||oe<=0){this.state=Pi.EMPTY;return}const ne=w!==void 0?w:zz;if(this.triangulation_=new Fz(e,i,Y,W,oe*ne,J),this.triangulation_.getTriangles().length===0){this.state=Pi.EMPTY;return}this.sourceZ_=t.getZForResolution(oe);let $=this.triangulation_.calculateSourceExtent();if(W&&(e.canWrapX()?($[1]=Nu($[1],W[1],W[3]),$[3]=Nu($[3],W[1],W[3])):$=im($,W)),!F6($))this.state=Pi.EMPTY;else{let ae=0,G=0;e.canWrapX()&&(ae=ss(te),G=Math.floor(($[0]-te[0])/ae)),xF($.slice(),e,!0).forEach(ge=>{const ye=t.getTileRangeForExtentAndZ(ge,this.sourceZ_);for(let we=ye.minX;we<=ye.maxX;we++)for(let Oe=ye.minY;Oe<=ye.maxY;Oe++){const Se=C(this.sourceZ_,we,Oe,o);if(Se){const Ve=G*ae;this.sourceTiles_.push({tile:Se,offset:Ve})}}++G}),this.sourceTiles_.length===0&&(this.state=Pi.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==Pi.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const a=this.clipExtent_?.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:r,clipExtent:a,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Pi.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],l=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),p=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Lz(r,a,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),l,p,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Pi.LOADED}this.changed()}load(){if(this.state==Pi.IDLE){this.state=Pi.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==Pi.IDLE||i==Pi.LOADING){e++;const r=Za(t,fo.CHANGE,a=>{const l=t.getState();(l==Pi.LOADED||l==Pi.ERROR||l==Pi.EMPTY)&&(Bl(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==Pi.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Bl),this.sourcesListenerKeys_=null}release(){this.canvas_&&(fb(this.canvas_.getContext("2d")),Cv.push(this.canvas_),this.canvas_=null),super.release()}}class pie{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof sb&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return ws(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return ws(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ws(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function f3(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function mie(n,e,t){return n+"/"+e+"/"+t}function gie(n){return yie(n[0],n[1],n[2])}function yie(n,e,t){return(e<<n)+t}function vie(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const a=e.getFullTileRange(t);return a?a.containsXY(i,r):!0}function d5(n,e,t,i,r){return`${Io(n)},${e},${mie(t,i,r)}`}function f5(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function Cie(n,e,t){const i=n[t];return i?i.delete(e):!1}function iT(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=im(e,Qm(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=im(e,r))}return e}class Nz extends qO{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=bp(),this.tempTileRange_=new VO(0,0,0,0),this.tempTileCoord_=f3(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new pie(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,r){const a=this.tileCache_,o=this.getLayer().getSource(),p=d5(o,o.getKey(),e,t,i);let C;if(a.containsKey(p))C=a.get(p);else{if(C=o.getTile(e,t,i,r.pixelRatio,r.viewState.projection),!C)return null;a.set(p,C)}return C}getTile(e,t,i,r){const a=this.getOrCreateTile(e,t,i,r);return a||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=tc(t.pixelToCoordinateTransform,e.slice()),a=i.getExtent();if(a&&!Q1(a,r))return null;const l=t.viewState,o=i.getRenderSource(),p=o.getTileGridForProjection(l.projection),C=o.getTilePixelRatio(t.pixelRatio);for(let w=p.getZForResolution(l.resolution);w>=p.getMinZoom();--w){const O=p.getTileCoordForCoordAndZ(r,w),U=this.getTile(w,O[1],O[2],t);if(!U||U.getState()!==Pi.LOADED)continue;const K=p.getOrigin(w),j=zh(p.getTileSize(w)),W=p.getResolution(w);let Y;if(U instanceof Ez||U instanceof jz)Y=U.getImage();else if(U instanceof eT){if(Y=aB(U.getData()),!Y)continue}else continue;const te=Math.floor(C*((r[0]-K[0])/W-O[1]*j[0])),J=Math.floor(C*((K[1]-r[1])/W-O[2]*j[1])),oe=Math.round(C*o.getGutterForProjection(l.projection));return this.getImageData(Y,te+oe,J+oe)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=i,!0}enqueueTiles(e,t,i,r,a){const l=e.viewState,o=this.getLayer(),p=o.getRenderSource(),C=p.getTileGridForProjection(l.projection),w=Io(p);w in e.wantedTiles||(e.wantedTiles[w]={});const O=e.wantedTiles[w],U=o.getMapInternal(),K=Math.max(i-a,C.getMinZoom(),C.getZForResolution(Math.min(o.getMaxResolution(),U?U.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):C.getResolution(0)),p.zDirection)),j=l.rotation,W=j?_F(l.center,l.resolution,j,e.size):void 0;for(let Y=i;Y>=K;--Y){const te=C.getTileRangeForExtentAndZ(t,Y,this.tempTileRange_),J=C.getResolution(Y);for(let oe=te.minX;oe<=te.maxX;++oe)for(let ne=te.minY;ne<=te.maxY;++ne){if(j&&!C.tileCoordIntersectsViewport([Y,oe,ne],W))continue;const $=this.getTile(Y,oe,ne,e);if(!$||!f5(r,$,Y))continue;const G=$.getKey();if(O[G]=!0,$.getState()===Pi.IDLE&&!e.tileQueue.isKeyQueued(G)){const ce=f3(Y,oe,ne,this.tempTileCoord_);e.tileQueue.enqueue([$,w,C.getTileCoordCenter(ce),J])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],a=e[1],l=e[2],o=this.getStaleKeys();for(let p=0;p<o.length;++p){const C=d5(this.getLayer().getSource(),o[p],r,a,l);if(i.containsKey(C)){const w=i.peek(C);if(w.getState()===Pi.LOADED)return w.endTransition(Io(this)),f5(t,w,r),!0}}return!1}findAltTiles_(e,t,i,r){const a=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!a)return!1;let l=!0;const o=this.tileCache_,p=this.getLayer().getRenderSource(),C=p.getKey();for(let w=a.minX;w<=a.maxX;++w)for(let O=a.minY;O<=a.maxY;++O){const U=d5(p,C,i,w,O);let K=!1;if(o.containsKey(U)){const j=o.peek(U);j.getState()===Pi.LOADED&&(f5(r,j,i),K=!0)}K||(l=!1)}return l}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,a=r.projection,l=r.resolution,o=r.center,p=e.pixelRatio,C=this.getLayer(),w=C.getSource(),O=w.getTileGridForProjection(a),U=O.getZForResolution(l,w.zDirection),K=O.getResolution(U),j=w.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==j&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=j):this.renderedSourceKey_=j;let W=e.extent;const Y=w.getTilePixelRatio(p);this.prepareContainer(e,t);const te=this.context.canvas.width,J=this.context.canvas.height,oe=i.extent&&Qm(i.extent);oe&&(W=im(W,Qm(i.extent)));const ne=K*te/2/Y,$=K*J/2/Y,ae=[o[0]-ne,o[1]-$,o[0]+ne,o[1]+$],G={};this.renderedTiles.length=0;const ce=C.getPreload();if(e.nextExtent){const Ct=O.getZForResolution(r.nextResolution,w.zDirection),nt=iT(e,e.nextExtent);this.enqueueTiles(e,nt,Ct,G,ce)}const ge=iT(e,W);if(this.enqueueTiles(e,ge,U,G,0),ce>0&&setTimeout(()=>{this.enqueueTiles(e,ge,U-1,G,ce-1)},0),!(U in G))return this.container;const ye=Io(this),we=e.time;for(const Ct of G[U]){const nt=Ct.getState();if(nt===Pi.EMPTY)continue;const be=Ct.tileCoord;if(nt===Pi.LOADED&&Ct.getAlpha(ye,we)===1){Ct.endTransition(ye);continue}if(nt!==Pi.ERROR&&(this.renderComplete=!1),this.findStaleTile_(be,G)){Cie(G,Ct,U),e.animate=!0;continue}if(this.findAltTiles_(O,be,U+1,G))continue;const lt=O.getMinZoom();for(let kt=U-1;kt>=lt&&!this.findAltTiles_(O,be,kt,G);--kt);}const Oe=K/l*p/Y,Se=this.getRenderContext(e);Jm(this.tempTransform,te/2,J/2,Oe,Oe,0,-te/2,-J/2),i.extent&&this.clipUnrotated(Se,e,oe),w.getInterpolate()||(Se.imageSmoothingEnabled=!1),this.preRender(Se,e);const Ve=Object.keys(G).map(Number);Ve.sort($m);let xe;const ze=[],st=[];for(let Ct=Ve.length-1;Ct>=0;--Ct){const nt=Ve[Ct],be=w.getTilePixelSize(nt,p,a),tt=O.getResolution(nt)/K,lt=be[0]*tt*Oe,kt=be[1]*tt*Oe,gt=O.getTileCoordForCoordAndZ(j0(ae),nt),St=O.getTileCoordExtent(gt),Ut=tc(this.tempTransform,[Y*(St[0]-ae[0])/K,Y*(ae[3]-St[3])/K]),Fe=Y*w.getGutterForProjection(a);for(const Ke of G[nt]){if(Ke.getState()!==Pi.LOADED)continue;const Re=Ke.tileCoord,He=gt[1]-Re[1],bt=Math.round(Ut[0]-(He-1)*lt),_t=gt[2]-Re[2],Ot=Math.round(Ut[1]-(_t-1)*kt),qt=Math.round(Ut[0]-He*lt),Kt=Math.round(Ut[1]-_t*kt),on=bt-qt,Jn=Ot-Kt,Wt=Ve.length===1;let $n=!1;xe=[qt,Kt,qt+on,Kt,qt+on,Kt+Jn,qt,Kt+Jn];for(let On=0,Bn=ze.length;On<Bn;++On)if(!Wt&&nt<st[On]){const In=ze[On];uA([qt,Kt,qt+on,Kt+Jn],[In[0],In[3],In[4],In[7]])&&($n||(Se.save(),$n=!0),Se.beginPath(),Se.moveTo(xe[0],xe[1]),Se.lineTo(xe[2],xe[3]),Se.lineTo(xe[4],xe[5]),Se.lineTo(xe[6],xe[7]),Se.moveTo(In[6],In[7]),Se.lineTo(In[4],In[5]),Se.lineTo(In[2],In[3]),Se.lineTo(In[0],In[1]),Se.clip())}ze.push(xe),st.push(nt),this.drawTile(Ke,e,qt,Kt,on,Jn,Fe,Wt),$n&&Se.restore(),this.renderedTiles.unshift(Ke),this.updateUsedTiles(e.usedTiles,w,Ke)}}if(this.renderedResolution=K,this.extentChanged=!this.renderedExtent_||!U0(this.renderedExtent_,ae),this.renderedExtent_=ae,this.renderedPixelRatio=p,this.postRender(this.context,e),i.extent&&Se.restore(),Se.imageSmoothingEnabled=!0,this.renderComplete){const Ct=(nt,be)=>{const Ne=Io(w),tt=be.wantedTiles[Ne],lt=tt?Object.keys(tt).length:0;this.updateCacheSize(lt),this.tileCache_.expireCache()};e.postRenderFunctions.push(Ct)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,a,l,o,p){let C;if(e instanceof eT){if(C=aB(e.getData()),!C)throw new Error("Rendering array data is not yet supported")}else C=this.getTileImage(e);if(!C)return;const w=this.getRenderContext(t),O=Io(this),U=t.layerStatesArray[t.layerIndex],K=U.opacity*(p?e.getAlpha(O,t.time):1),j=K!==w.globalAlpha;j&&(w.save(),w.globalAlpha=K),w.drawImage(C,o,o,C.width-2*o,C.height-2*o,i,r,a,l),j&&w.restore(),K!==U.opacity?t.animate=!0:p&&e.endTransition(O)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=Io(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const Bg={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class _ie extends $v{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Bg.PRELOAD)}setPreload(e){this.set(Bg.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Bg.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Bg.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Gz extends _ie{constructor(e){super(e)}createRenderer(){return new Nz(this,{cacheSize:this.getCacheSize()})}}const bie={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},rT={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class xie extends Nz{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Yd(),this.tileClipContexts_=null}drawTile(e,t,i,r,a,l,o,p){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,r,a,l,o,p)}getTile(e,t,i,r){const a=this.getOrCreateTile(e,t,i,r);if(!a)return null;const o=r.viewState.resolution,p=r.viewHints;return(!(p[vu.ANIMATING]||p[vu.INTERACTING])||!a.wantedResolution)&&(a.wantedResolution=o),a}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const r=this.getLayer(),a=r.getRevision(),l=r.getRenderOrder()||null,o=e.wantedResolution,p=e.getReplayState(r);if(!p.dirty&&p.renderedResolution===o&&p.renderedRevision==a&&p.renderedRenderOrder==l)return;const C=r.getSource(),w=!!r.getDeclutter(),O=C.getTileGrid(),K=C.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),j=C.getSourceTiles(t,i,e),W=Io(r);delete e.hitDetectionImageData[W],e.executorGroups[W]=[],p.dirty=!1;for(let Y=0,te=j.length;Y<te;++Y){const J=j[Y];if(J.getState()!=Pi.LOADED)continue;const oe=J.tileCoord,ne=O.getTileCoordExtent(oe),$=im(K,ne),ae=Rg($,r.getRenderBuffer()*o,this.tempExtent),G=U0(ne,$)?null:ae,ce=new xz(0,$,o,t),ge=tB(o,t),ye=function(xe,ze){let st;const Ct=xe.getStyleFunction()||r.getStyleFunction();if(Ct&&(st=Ct(xe,o)),st){const nt=this.renderFeature(xe,ge,st,ce,w,ze);p.dirty=p.dirty||nt}},we=J.getFeatures();l&&l!==p.renderedRenderOrder&&we.sort(l);for(let xe=0,ze=we.length;xe<ze;++xe){const st=we[xe];(!G||uA(G,st.getGeometry().getExtent()))&&ye.call(this,st,xe)}const Oe=ce.finish(),Se=r.getRenderMode()!=="vector"&&w&&j.length===1?null:$,Ve=new Mz(Se,o,t,C.getOverlaps(),Oe,r.getRenderBuffer(),!0);e.executorGroups[W].push(Ve)}p.renderedRevision=a,p.renderedRenderOrder=l,p.renderedResolution=o}forEachFeatureAtCoordinate(e,t,i,r,a){const l=t.viewState.resolution,o=t.viewState.rotation;i=i??0;const p=this.getLayer(),w=p.getSource().getTileGridForProjection(t.viewState.projection),O=U6([e]);Rg(O,l*i,O);const U={},K=function(oe,ne,$){let ae=oe.getId();ae===void 0&&(ae=Io(oe));const G=U[ae];if(G){if(G!==!0&&$<G.distanceSq){if($===0)return U[ae]=!0,a.splice(a.lastIndexOf(G),1),r(oe,p,ne);G.geometry=ne,G.distanceSq=$}}else{if($===0)return U[ae]=!0,r(oe,p,ne);a.push(U[ae]={feature:oe,layer:p,geometry:ne,distanceSq:$,callback:r})}},j=this.renderedTiles,W=Io(p),Y=p.getDeclutter(),te=Y?t.declutter?.[Y]?.all().map(oe=>oe.value):null;let J;e:for(let oe=0,ne=j.length;oe<ne;++oe){const $=j[oe],ae=w.getTileCoordExtent($.wrappedTileCoord);if(!uA(ae,O))continue;const G=$.executorGroups[W];for(let ce=0,ge=G.length;ce<ge;++ce)if(J=G[ce].forEachFeatureAtCoordinate(e,l,o,i,K,te),J)break e}return J}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const r=this.getLayer(),a=r.getSource(),l=this.renderedProjection,o=l.getExtent(),p=this.renderedResolution,C=a.getTileGridForProjection(l),w=tc(this.renderedPixelToCoordinateTransform_,e.slice()),O=C.getTileCoordForCoordAndResolution(w,p).toString(),U=this.renderedTiles.find(oe=>oe.tileCoord.toString()===O&&oe.getState()===Pi.LOADED);if(!U||U.loadingSourceTiles>0){t([]);return}a.getWrapX()&&l.canWrapX()&&!Wm(o,C.getTileCoordExtent(U.tileCoord))&&cO(w,l);const K=Io(r),j=C.getTileCoordExtent(U.wrappedTileCoord),W=j0(j),Y=[(w[0]-W[0])/p,(W[1]-w[1])/p],te=U.getSourceTiles().reduce((oe,ne)=>oe.concat(ne.getFeatures()),[]);let J=U.hitDetectionImageData[K];if(!J){const oe=zh(C.getTileSize(C.getZForResolution(p,a.zDirection))),ne=this.renderedRotation_,$=[this.getRenderTransform(C.getTileCoordCenter(U.wrappedTileCoord),p,0,Mf,oe[0]*Mf,oe[1]*Mf,0)];J=wz(oe,$,te,r.getStyleFunction(),C.getTileCoordExtent(U.wrappedTileCoord),U.getReplayState(r).renderedResolution,ne),U.hitDetectionImageData[K]=J}t(Sz(Y,te,J))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const a=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),l=a.getZForResolution(this.renderedResolution),o={};return i.forEach(p=>{if(p.tileCoord[0]!==l||p.getState()!==Pi.LOADED)return;const C=p.getSourceTiles();for(let w=0,O=C.length;w<O;++w){const U=C[w],K=U.getKey();if(K in o)continue;o[K]=!0;const j=U.tileCoord;if(uA(e,a.getTileCoordExtent(j))){const W=U.getFeatures();if(W)for(let Y=0,te=W.length;Y<te;++Y){const J=W[Y],oe=J.getGeometry();uA(e,oe.getExtent())&&t.push(J)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const i=this.context,r=i.globalAlpha;i.globalAlpha=t.opacity;const a=e.viewHints,l=!(a[vu.ANIMATING]||a[vu.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],p=this.getLayer().getDeclutter(),C=p?e.declutter?.[p]:void 0,w=Io(this.getLayer()),O=this.renderedTiles;for(let U=0,K=O.length;U<K;++U){const j=O[U],W=j.executorGroups[w];if(W)for(let Y=W.length-1;Y>=0;--Y)W[Y].execute(this.context,o,this.getTileRenderTransform(j,e),e.viewState.rotation,l,c3,C)}i.globalAlpha=r}renderDeferredInternal(e){const t=this.renderedTiles,i=Io(this.getLayer()),r=t.reduce((p,C,w)=>(C.executorGroups[i].forEach(O=>p.push({executorGroup:O,index:w})),p),[]),a=r.map(({executorGroup:p})=>p.getDeferredZIndexContexts()),l={};for(let p=0,C=r.length;p<C;++p){const w=r[p].executorGroup.getDeferredZIndexContexts();for(const O in w)l[O]=!0}Object.keys(l).map(Number).sort($m).forEach(p=>{a.forEach((C,w)=>{C[p]&&(C[p].forEach(O=>{const{executorGroup:U,index:K}=r[w],j=U.getRenderedContext(),W=j.globalAlpha;j.globalAlpha=this.renderedOpacity_;const Y=this.tileClipContexts_[K];Y&&Y.draw(j),O.draw(j),Y&&j.restore(),j.globalAlpha=W,O.clear()}),C[p].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,r=t.viewState,a=r.center,l=r.resolution,o=r.rotation,p=t.size,C=Math.round(p[0]*i),w=Math.round(p[1]*i),U=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),K=e.tileCoord,j=U.getTileCoordExtent(e.wrappedTileCoord),W=U.getTileCoordExtent(K,this.tempExtent)[0]-j[0];return gO(z4(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(a,l,o,i,C,w,W))}postRender(e,t){const i=t.viewHints,r=!(i[vu.ANIMATING]||i[vu.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const a=this.getLayer(),l=a.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const p=a.getDeclutter(),C=p?rT[l].filter($=>!c3.includes($)):rT[l],w=t.viewState,O=w.rotation,U=a.getSource(),j=U.getTileGridForProjection(w.projection).getZForResolution(w.resolution,U.zDirection),W=this.renderedTiles,Y=[],te=[],J=[],oe=Io(a);let ne=!0;for(let $=W.length-1;$>=0;--$){const ae=W[$];ne=ne&&!ae.getReplayState(a).dirty;const G=ae.executorGroups[oe].filter(Ve=>Ve.hasExecutors(C));if(G.length===0)continue;const ce=this.getTileRenderTransform(ae,t),ge=ae.tileCoord[0];let ye=!1;const we=G[0].getClipCoords(ce);let Oe=e,Se;if(we){Se=new YO,Oe=Se.getContext();for(let Ve=0,xe=Y.length;Ve<xe;++Ve)if(j!==ge&&ge<te[Ve]){const ze=Y[Ve];uA([we[0],we[3],we[4],we[7]],[ze[0],ze[3],ze[4],ze[7]])&&(ye||(Oe.save(),ye=!0),Oe.beginPath(),Oe.moveTo(we[0],we[1]),Oe.lineTo(we[2],we[3]),Oe.lineTo(we[4],we[5]),Oe.lineTo(we[6],we[7]),Oe.moveTo(ze[6],ze[7]),Oe.lineTo(ze[4],ze[5]),Oe.lineTo(ze[2],ze[3]),Oe.lineTo(ze[0],ze[1]),Oe.clip())}Y.push(we),te.push(ge)}for(let Ve=0,xe=G.length;Ve<xe;++Ve)G[Ve].execute(e,[e.canvas.width,e.canvas.height],ce,O,r,C,t.declutter?.[p]);ye&&(Oe===e?Oe.restore():J[$]=Se)}e.globalAlpha=o,this.ready=ne,this.tileClipContexts_=J,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,r,a,l){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let p=0,C=i.length;p<C;++p)o=u3(r,e,i[p],t,this.boundHandleStyleImageChange_,void 0,a,l)||o;else o=u3(r,e,i,t,this.boundHandleStyleImageChange_,void 0,a,l);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),r=t.getRevision(),a=e.wantedResolution;return i.renderedTileResolution!==a||i.renderedTileRevision!==r}renderTileImage_(e,t){const i=this.getLayer(),r=e.getReplayState(i),a=i.getRevision(),l=e.executorGroups[Io(i)];r.renderedTileRevision=a;const o=e.wrappedTileCoord,p=o[0],C=i.getSource();let w=t.pixelRatio;const U=t.viewState.projection,K=C.getTileGridForProjection(U),j=K.getResolution(e.tileCoord[0]),W=t.pixelRatio/e.wantedResolution*j,Y=K.getResolution(p),te=e.getContext();w=Math.round(Math.max(w,W/w));const J=C.getTilePixelSize(p,w,U);te.canvas.width=J[0],te.canvas.height=J[1];const oe=w/W;if(oe!==1){const G=r9(this.tmpTransform_);z4(G,oe,oe),te.setTransform.apply(te,G)}const ne=K.getTileCoordExtent(o,this.tempExtent),$=W/Y,ae=r9(this.tmpTransform_);z4(ae,$,-$),JX(ae,-ne[0],-ne[3]);for(let G=0,ce=l.length;G<ce;++G)l[G].execute(te,[te.canvas.width*oe,te.canvas.height*oe],ae,0,!0,bie[i.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class i_ extends WO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const r=e.renderMode||"hybrid";ws(r=="hybrid"||r=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new xie(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Bg.PRELOAD)}getUseInterimTilesOnError(){return this.get(Bg.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Bg.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Bg.USE_INTERIM_TILES_ON_ERROR,e)}}function lB(n){return Array.isArray(n)?Math.min(...n):n}class Mie extends jO{constructor(e,t,i,r,a,l,o){let p=e.getExtent();p&&e.canWrapX()&&(p=p.slice(),p[0]=-1/0,p[2]=1/0);let C=t.getExtent();C&&t.canWrapX()&&(C=C.slice(),C[0]=-1/0,C[2]=1/0);const w=C?im(i,C):i,O=Bf(w),U=sB(e,t,O,r),K=zz,j=new Fz(e,t,w,p,U*K,r),W=j.calculateSourceExtent(),Y=Z1(W)?null:l(W,U,a),te=Y?hr.IDLE:hr.EMPTY,J=Y?Y.getPixelRatio():1;super(i,r,J,te),this.targetProj_=t,this.maxSourceExtent_=p,this.triangulation_=j,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=Y,this.sourcePixelRatio_=J,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==hr.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==hr.LOADED){const t=ss(this.targetExtent_)/this.targetResolution_,i=ic(this.targetExtent_)/this.targetResolution_;this.canvas_=Lz(t,i,this.sourcePixelRatio_,lB(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==hr.IDLE){this.state=hr.LOADING,this.changed();const e=this.sourceImage_.getState();e==hr.LOADED||e==hr.ERROR?this.reproject_():(this.sourceListenerKey_=Za(this.sourceImage_,fo.CHANGE,t=>{const i=this.sourceImage_.getState();(i==hr.LOADED||i==hr.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Bl(this.sourceListenerKey_),this.sourceListenerKey_=null}}const nx=4,p5={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class wie extends um{constructor(e,t){super(e),this.image=t}}class Wz extends Zv{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=t2(t,e,0);e=t[i]}return e}getImage(e,t,i,r){const a=this.getProjection();if(!a||!r||Pg(a,r))return a&&(r=a),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Pg(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&U0(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Mie(a,r,e,t,i,(l,o,p)=>this.getImageInternal(l,o,p,a),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){if(this.loader){const a=Sie(e,t,i,1),l=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&Wm(this.wantedExtent_,a)||Wm(this.image.getExtent(),a))&&(this.wantedResolution_&&lB(this.wantedResolution_)===l||lB(this.image.getResolution())===l)))return this.image;this.wantedProjection_=r,this.wantedExtent_=a,this.wantedResolution_=l,this.image=new jO(a,l,i,this.loader),this.image.addEventListener(fo.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case hr.LOADING:this.loading=!0,i=p5.IMAGELOADSTART;break;case hr.LOADED:this.loading=!1,i=p5.IMAGELOADEND;break;case hr.ERROR:this.loading=!1,i=p5.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new wie(i,t))}}function Sie(n,e,t,i){const r=e/t,a=Bf(n),l=Mg(ss(n)/r,nx),o=Mg(ic(n)/r,nx),p=Mg((i-1)*l/2,nx),C=l+2*p,w=Mg((i-1)*o/2,nx),O=o+2*w;return Xx(a,r,0,[C,O])}const Uy=[0,0,0],dg=5;class M2{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ws(VZ(this.resolutions_,(r,a)=>a-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,a=this.resolutions_.length-1;r<a;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ws(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=j0(i)),ws(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ws(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:TO,ws(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,a)=>{const l=new VO(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const o=this.getTileRangeForExtentAndZ(i,a);l.minX=Math.max(o.minX,l.minX),l.maxX=Math.min(o.maxX,l.maxX),l.minY=Math.max(o.minY,l.minY),l.maxY=Math.min(o.maxY,l.maxY)}return l}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let a=r.minX,l=r.maxX;a<=l;++a)for(let o=r.minY,p=r.maxY;o<=p;++o)i([t,a,o])}forEachTileCoordParentTileRange(e,t,i,r){let a,l,o,p=null,C=e[0]-1;for(this.zoomFactor_===2?(l=e[1],o=e[2]):p=this.getTileCoordExtent(e,r);C>=this.minZoom;){if(l!==void 0&&o!==void 0?(l=Math.floor(l/2),o=Math.floor(o/2),a=Ry(l,l,o,o,i)):a=this.getTileRangeForExtentAndZ(p,C,i),t(C,a))return!0;--C}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const a=e[1]*2,l=e[2]*2;return Ry(a,a+1,l,l+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],a=e[1],l=e[2];if(t===r)return Ry(a,l,a,l,i);if(this.zoomFactor_){const p=Math.pow(this.zoomFactor_,t-r),C=Math.floor(a*p),w=Math.floor(l*p);if(t<r)return Ry(C,C,w,w,i);const O=Math.floor(p*(a+1))-1,U=Math.floor(p*(l+1))-1;return Ry(C,O,w,U,i)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Uy);const r=Uy[1],a=Uy[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Uy);const l=Uy[1],o=Uy[2];return Ry(r,l,a,o,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=zh(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),a=zh(this.getTileSize(e[0]),this.tmpSize_),l=i[0]+e[1]*a[0]*r,o=i[1]-(e[2]+1)*a[1]*r,p=l+a[0]*r,C=o+a[1]*r;return K0(l,o,p,C,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,a){const l=this.getZForResolution(i),o=i/this.getResolution(l),p=this.getOrigin(l),C=zh(this.getTileSize(l),this.tmpSize_);let w=o*(e-p[0])/i/C[0],O=o*(p[1]-t)/i/C[1];return r?(w=Mg(w,dg)-1,O=Mg(O,dg)-1):(w=Gb(w,dg),O=Gb(O,dg)),f3(l,w,O,a)}getTileCoordForXYAndZ_(e,t,i,r,a){const l=this.getOrigin(i),o=this.getResolution(i),p=zh(this.getTileSize(i),this.tmpSize_);let C=(e-l[0])/o/p[0],w=(l[1]-t)/o/p[1];return r?(C=Mg(C,dg)-1,w=Mg(w,dg)-1):(C=Gb(C,dg),w=Gb(w,dg)),f3(i,C,w,a)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=t2(this.resolutions_,e,t||0);return Nu(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return NF(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function Qz(n){let e=n.getDefaultTileGrid();return e||(e=Oie(n),n.setDefaultTileGrid(e)),e}function Eie(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),a=w2(t);if(!Q1(a,r)){const l=ss(a),o=Math.ceil((a[0]-r[0])/l);return r[0]+=l*o,n.getTileCoordForCoordAndZ(r,i)}return e}function Bie(n,e,t,i){i=i!==void 0?i:"top-left";const r=Yz(n,e,t);return new M2({extent:n,origin:AX(n,i),resolutions:r,tileSize:t})}function t8(n){const e=n||{},t=e.extent||Qs("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Yz(t,e.maxZoom,e.tileSize,e.maxResolution)};return new M2(i)}function Yz(n,e,t,i){e=e!==void 0?e:YF,t=zh(t!==void 0?t:TO);const r=ic(n),a=ss(n);i=i>0?i:Math.max(a/t[0],r/t[1]);const l=e+1,o=new Array(l);for(let p=0;p<l;++p)o[p]=i/Math.pow(2,p);return o}function Oie(n,e,t,i){const r=w2(n);return Bie(r,e,t,i)}function w2(n){n=Qs(n);let e=n.getExtent();if(!e){const t=180*Fg.degrees/n.getMetersPerUnit();e=K0(-t,-t,t,t)}return e}class qz extends Zv{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&zh(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Io(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,a){return vo()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Qz(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),a=this.getTilePixelRatio(t),l=zh(r.getTileSize(e),this.tmpSize);return a==1?l:vee(l,a,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=Eie(r,e,i)),vie(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Iie extends um{constructor(e,t){super(e),this.tile=t}}function Hz(n){return function(e){const t=e.buffers,i=e.meta,r=e.imageOps,a=e.width,l=e.height,o=t.length,p=t[0].byteLength;if(r){const U=new Array(o);for(let j=0;j<o;++j)U[j]=new ImageData(new Uint8ClampedArray(t[j]),a,l);return n(U,i).data.buffer}const C=new Uint8ClampedArray(p),w=new Array(o),O=new Array(o);for(let U=0;U<o;++U)w[U]=new Uint8ClampedArray(t[U]),O[U]=[0,0,0,0];for(let U=0;U<p;U+=4){for(let j=0;j<o;++j){const W=w[j];O[j][0]=W[U],O[j][1]=W[U+1],O[j][2]=W[U+2],O[j][3]=W[U+3]}const K=n(O,i);C[U]=K[0],C[U+1]=K[1],C[U+2]=K[2],C[U+3]=K[3]}return C.buffer}}function Tie(n,e){const i=Object.keys(n.lib||{}).map(function(a){return"const "+a+" = "+n.lib[a].toString()+";"}).concat(["const __minion__ = ("+Hz.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(i.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",e),r}function kie(n,e){const t=Hz(n.operation);let i=!1;return{postMessage:function(r){setTimeout(function(){i||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){i=!0}}}class Die extends sb{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const i=new Array(t);if(t)for(let r=0;r<t;++r)i[r]=Tie(e,this.onWorkerMessage_.bind(this,r));else i[0]=kie(e,this.onWorkerMessage_.bind(this,0));this.workers_=i,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,i){this.enqueue_({inputs:e,meta:t,callback:i}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,i=e.inputs[0].height,r=e.inputs.map(function(p){return p.data.buffer}),a=this.workers_.length;if(this.running_=a,a===1){this.workers_[0].postMessage({buffers:r,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},r);return}const l=e.inputs[0].data.length,o=4*Math.ceil(l/4/a);for(let p=0;p<a;++p){const C=p*o,w=[];for(let O=0,U=r.length;O<U;++O)w.push(r[O].slice(C,C+o));this.workers_[p].postMessage({buffers:w,meta:e.meta,imageOps:this.imageOps_,width:t,height:i},w)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let i,r;if(t===1)i=new Uint8ClampedArray(this.dataLookup_[0].buffer),r=this.dataLookup_[0].meta;else{const a=e.inputs[0].data.length;i=new Uint8ClampedArray(a),r=new Array(t);const l=4*Math.ceil(a/4/t);for(let o=0;o<t;++o){const p=this.dataLookup_[o].buffer,C=o*l;i.set(new Uint8ClampedArray(p),C),r[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(i,e.inputs[0].width,e.inputs[0].height),r),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const oT={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class aT extends um{constructor(e,t,i){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=i}}class Vz extends Wz{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=Kie(e.sources);const t=this.changed.bind(this);for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(fo.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new pF(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Yd(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:Pie(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Yd(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Io(this),renderTargets:{}},this.setAttributions(function(i){const r=[];for(let a=0,l=e.sources.length;a<l;++a){const o=e.sources[a],p=o instanceof Zv?o:o.getSource();if(!p)continue;const C=p.getAttributions()?.(i);typeof C=="string"?r.push(C):C!==void 0&&r.push(...C)}return r}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Die({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,i){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const a=Bf(e);r.size[0]=Math.ceil(ss(e)/t),r.size[1]=Math.ceil(ic(e)/t),r.extent=[a[0]-r.size[0]*t/2,a[1]-r.size[1]*t/2,a[0]+r.size[0]*t/2,a[1]+r.size[1]*t/2],r.time=Date.now();const l=r.viewState;return l.center=a,l.projection=i,l.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let i=0,r=this.layers_.length;i<r;++i)if(t=this.layers_[i].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,i,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const a=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=a,this.renderedImageCanvas_){const l=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==l||!U0(a.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),a.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,i=new Array(t);for(let a=0;a<t;++a){e.layerIndex=a,e.renderTargets={};const l=Rie(this.layers_[a],e);if(l)i[a]=l;else return}const r={};this.dispatchEvent(new aT(oT.BEFOREOPERATIONS,e,r)),this.processor_.process(i,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,i,r){if(t||!i)return;const a=e.extent,l=e.viewState.resolution;if(l!==this.requestedFrameState_.viewState.resolution||!U0(a,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const p=Math.round(ss(a)/l),C=Math.round(ic(a)/l);o=Gu(p,C),this.renderedImageCanvas_=new nne(a,l,1,o.canvas)}o.putImageData(i,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new aT(oT.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let i=0,r=this.layers_.length;i<r&&(t=this.layers_[i].getSource().getResolutions(e),!t);++i);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Vz.prototype.dispose;let y1=null;function Rie(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(i===0||r===0)return null;const a=t.renderFrame(e,null);let l;if(a instanceof HTMLCanvasElement)l=a;else{if(a&&(l=a.firstElementChild),!(l instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+l);if(l.width===i&&l.height===r)return l.getContext("2d").getImageData(0,0,i,r)}if(!y1)y1=Gu(i,r,void 0,{willReadFrequently:!0});else{const o=y1.canvas;o.width!==i||o.height!==r?y1=Gu(i,r,void 0,{willReadFrequently:!0}):y1.clearRect(0,0,i,r)}return y1.drawImage(l,0,0,i,r),y1.getImageData(0,0,i,r)}function Pie(n){return n.map(function(e){return e.getLayerState()})}function Kie(n){const e=n.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=Uie(n[i]);return t}function Uie(n){let e;return n instanceof Zv?n instanceof qz?e=new Gz({source:n}):n instanceof Wz&&(e=new Uz({source:n})):e=n,e}function Lie(n,e,t,i){const r=document.createElement("script"),a="olc_"+Io(e);function l(){delete window[a],r.parentNode.removeChild(r)}r.async=!0,r.src=n+(n.includes("?")?"&":"?")+"callback="+a;const o=setTimeout(function(){l(),t&&t()},1e4);window[a]=function(p){clearTimeout(o),l(),e(p)},document.head.appendChild(r)}const Fie=/\{z\}/g,zie=/\{x\}/g,jie=/\{y\}/g,Nie=/\{-y\}/g;function Gie(n,e,t,i,r){return n.replace(Fie,e.toString()).replace(zie,t.toString()).replace(jie,i.toString()).replace(Nie,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function Wie(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let a;for(a=i;a<=r;++a)e.push(n.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function Qie(n,e){return function(t,i,r){if(!t)return;let a;const l=t[0];if(e){const o=e.getFullTileRange(l);o&&(a=o.getHeight()-1)}return Gie(n,l,t[1],t[2],a)}}function $z(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Qie(n[r],e);return Yie(i)}function Yie(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const r=gie(e),a=L1(r,n.length);return n[a](e,t,i)}}const m5={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class S2 extends qz{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===S2.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Io(t),r=t.getState();let a;r==Pi.LOADING?(this.tileLoadingKeys_[i]=!0,a=m5.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=r==Pi.ERROR?m5.TILELOADERROR:r==Pi.LOADED?m5.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new Iie(a,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Wie(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction($z(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class qie extends S2{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Hie,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Ez,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Pg(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Pg(t,e)))return this.tileGrid;const i=Io(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Qz(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,a,l){const o=[e,t,i],p=this.getTileCoordForTileUrlFunction(o,a),C=p?this.tileUrlFunction(p,r,a):void 0,w=new this.tileClass(o,C!==void 0?Pi.IDLE:Pi.EMPTY,C!==void 0?C:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return w.key=l,w.addEventListener(fo.CHANGE,this.handleTileChange.bind(this)),w}getTile(e,t,i,r,a){const l=this.getProjection();if(!l||!a||Pg(l,a))return this.getTileInternal(e,t,i,r,l||a);const o=[e,t,i],p=this.getKey(),C=this.getTileGridForProjection(l),w=this.getTileGridForProjection(a),O=this.getTileCoordForTileUrlFunction(o,a),U=new jz(l,C,a,w,o,O,this.getTilePixelRatio(r),this.getGutter(),(K,j,W,Y)=>this.getTileInternal(K,j,W,Y,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return U.key=p,U}getTileInternal(e,t,i,r,a){const l=this.getKey();return this.createTile_(e,t,i,r,a,l)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Qs(e);if(i){const r=Io(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function Hie(n,e){n.getImage().src=e}class Zz extends qie{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Qs("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Lie(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let i;try{i=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Qs("EPSG:4326"),i=this.getProjection();let r;if(e.bounds!==void 0){const C=hb(t,i);r=dX(e.bounds,C)}const a=w2(i),l=e.minzoom||0,o=e.maxzoom||22,p=t8({extent:a,maxZoom:o,minZoom:l,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=$z(e.tiles,p),e.attribution&&!this.getAttributions()){const C=r!==void 0?r:a;this.setAttributions(function(w){return uA(C,w.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class n8 extends S2{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||w2(t),r=e.tileGrid||t8({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Xz,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Bz,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===Pi.IDLE){i.setState(Pi.LOADING);const r=i.wrappedTileCoord,a=this.getTileGridForProjection(t),l=a.getTileCoordExtent(r),o=r[0],p=a.getResolution(o);Rg(l,-p,l);const C=this.tileGrid,w=C.getExtent();w&&im(l,w,l);const O=C.getZForResolution(p,this.zDirection);C.forEachTileCoord(l,O,U=>{const K=this.tileUrlFunction(U,e,t);this.sourceTiles_[K]||(this.sourceTiles_[K]=new this.tileClass(U,K?Pi.IDLE:Pi.EMPTY,K,this.format_,this.tileLoadFunction));const j=this.sourceTiles_[K];i.sourceTiles.push(j),this.tileKeysBySourceTileUrl_[K]||(this.tileKeysBySourceTileUrl_[K]=[]),this.tileKeysBySourceTileUrl_[K].push(i.getKey());const W=j.getState();if(W<Pi.LOADED){const Y=te=>{this.handleTileChange(te);const J=j.getState();if(J===Pi.LOADED||J===Pi.ERROR){const oe=j.getKey();oe in i.errorTileKeys?j.getState()===Pi.LOADED&&delete i.errorTileKeys[oe]:i.loadingSourceTiles--,J===Pi.ERROR?i.errorTileKeys[oe]=!0:j.removeEventListener(fo.CHANGE,Y),i.loadingSourceTiles===0&&i.setState(Lg(i.errorTileKeys)?Pi.LOADED:Pi.ERROR)}};j.addEventListener(fo.CHANGE,Y),i.loadingSourceTiles++}W===Pi.IDLE&&(j.extent=C.getTileCoordExtent(U),j.projection=t,j.resolution=C.getResolution(U[0]),j.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(U=>U.getState()===Pi.ERROR)?Pi.ERROR:Pi.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let r=0,a=i.length;r<a;++r){const l=i[r].getTileUrl();if(!this.tileKeysBySourceTileUrl_[l])return;const o=this.tileKeysBySourceTileUrl_[l].indexOf(t);o!==-1&&(this.tileKeysBySourceTileUrl_[l].splice(o,1),this.tileKeysBySourceTileUrl_[l].length===0&&(delete this.tileKeysBySourceTileUrl_[l],delete this.sourceTiles_[l]))}}getTile(e,t,i,r,a){const l=[e,t,i];let o=this.getTileCoordForTileUrlFunction(l,a);const p=this.getTileGrid().getExtent(),C=this.getTileGridForProjection(a);if(o&&p){const U=C.getTileCoordExtent(o);Rg(U,-C.getResolution(e),U),uA(p,U)||(o=null)}let w=!0;if(o!==null){const U=this.tileGrid,K=C.getResolution(e),j=U.getZForResolution(K,1),W=C.getTileCoordExtent(o);Rg(W,-K,W),U.forEachTileCoord(W,j,Y=>{w=w&&!this.tileUrlFunction(Y,r,a)})}const O=new one(l,w?Pi.EMPTY:Pi.IDLE,o,this.getSourceTiles.bind(this,r,a),this.removeSourceTiles.bind(this));return O.key=this.getKey(),O}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const r=this.getProjection();ws(r===null||Pg(r,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const a=this.tileGrid,l=a.getResolutions().slice(),o=l.map(function(w,O){return a.getOrigin(O)}),p=l.map(function(w,O){return a.getTileSize(O)}),C=YF+1;for(let w=l.length;w<C;++w)l.push(l[w-1]/2),o.push(o[w-1]),p.push(p[w-1]);i=new M2({extent:a.getExtent(),origins:o,resolutions:l,tileSizes:p}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),a=zh(r.getTileSize(e),this.tmpSize);return[Math.round(a[0]*t),Math.round(a[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Xz(n,e){n.setLoader(function(t,i,r){bz(e,n.getFormat(),t,i,r,n.onLoad.bind(n),n.onError.bind(n))})}function Vie(n,e){const t=n[0],i=t.width,r=t.height,a=t.data,l=new Uint8ClampedArray(a.length),o=e.resolution*2,p=i-1,C=r-1,w=[0,0,0,0],O=2*Math.PI,U=Math.PI/2,K=Math.PI*e.sunEl/180,j=Math.PI*e.sunAz/180,W=Math.cos(K),Y=Math.sin(K),te=e.highlightColor,J=e.shadowColor,oe=e.accentColor,ne=e.encoding;let $,ae,G,ce,ge,ye,we,Oe,Se,Ve,xe,ze,st,Ct,nt,be,Ne,tt,lt,kt,gt,St;function Ut(Fe,Ke="mapbox"){if(Ke==="mapbox")return(Fe[0]*256*256+Fe[1]*256+Fe[2])*.1-1e4;if(Ke==="terrarium")return Fe[0]*256+Fe[1]+Fe[2]/256-32768}for(ae=0;ae<=C;++ae)for(ge=ae===0?0:ae-1,ye=ae===C?C:ae+1,$=0;$<=p;++$)G=$===0?0:$-1,ce=$===p?p:$+1,we=(ae*i+G)*4,w[0]=a[we],w[1]=a[we+1],w[2]=a[we+2],w[3]=a[we+3],Oe=e.vert*Ut(w,ne),we=(ae*i+ce)*4,w[0]=a[we],w[1]=a[we+1],w[2]=a[we+2],w[3]=a[we+3],Se=e.vert*Ut(w,ne),Ve=(Se-Oe)/o,we=(ge*i+$)*4,w[0]=a[we],w[1]=a[we+1],w[2]=a[we+2],w[3]=a[we+3],Oe=e.vert*Ut(w,ne),we=(ye*i+$)*4,w[0]=a[we],w[1]=a[we+1],w[2]=a[we+2],w[3]=a[we+3],Se=e.vert*Ut(w,ne),xe=(Se-Oe)/o,st=Math.atan2(xe,-Ve),st<0?st=U-st:st>U?st=O-st+U:st=U-st,ze=Math.atan(Math.sqrt(Ve*Ve+xe*xe)),St=Y*Math.cos(ze)+W*Math.sin(ze)*Math.cos(j-st),Ct=Math.cos(ze),nt=255*St,lt=Math.min(Math.max(2*e.sunEl,0),1),kt=1.875-e.opacity*1.75,gt=e.opacity!==.5?U*((Math.pow(kt,ze)-1)/(Math.pow(kt,U)-1)):ze,Ne={r:(1-Ct)*oe.r*lt*255,g:(1-Ct)*oe.g*lt*255,b:(1-Ct)*oe.b*lt*255,a:(1-Ct)*oe.a*lt*255},be=Math.abs(((st+j)/Math.PI+.5)%2-1),tt={r:(te.r*(1-be)+J.r*be)*nt,g:(te.g*(1-be)+J.g*be)*nt,b:(te.b*(1-be)+J.b*be)*nt,a:(te.a*(1-be)+J.a*be)*nt},we=(ae*i+$)*4,l[we]=Ne.r*(1-be)+tt.r,l[we+1]=Ne.g*(1-be)+tt.g,l[we+2]=Ne.b*(1-be)+tt.b,l[we+3]=a[we+3]*e.opacity*lt*Math.sin(gt);return new ImageData(l,i,r)}function $ie(n,e=512){return n.getExtent()?t8({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Xm}function Jz(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((i,r)=>{e.accessToken=i,e.accessTokenParam=r})),e}function Zie(n,e,t="",i={},r=void 0){let a,l,o,p,C=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,p=o.source||o.layers,i=o):p=t,typeof i=="string"?(a=i,o={}):(a=i.styleUrl,o=i),o.updateSource===!1&&(C=!1),r||(r=o.resolutions),!a&&typeof e=="string"&&!e.trim().startsWith("{")&&(a=e),a&&(a=a.startsWith("data:")?location.href:h3(a,o.accessToken),o=Jz(a,o)),new Promise(function(w,O){Tz(e,o).then(function(U){if(U.version!=8)return O(new Error("glStyle version 8 required."));if(!(n instanceof HO||n instanceof i_))return O(new Error("Can only apply to VectorLayer or VectorTileLayer"));const K=n instanceof i_?"vector":"geojson";if(p?Array.isArray(p)?l=U.layers.find(function(ne){return ne.id===p[0]}).source:l=p:(l=U.layers.find(function(ne){return ne.source&&U.sources[ne.source].type===K}).source,p=l),!l)return O(new Error(`No ${K} source found in the glStyle.`));function j(){if(!C)return Promise.resolve();if(n instanceof i_)return nj(U.sources[l],a,o).then(function(G){const ce=n.getSource();ce?G!==ce&&(ce.setTileUrlFunction(G.getTileUrlFunction()),typeof ce.setUrls=="function"&&typeof G.getUrls=="function"&&ce.setUrls(G.getUrls()),ce.format_||(ce.format_=G.format_),ce.getAttributions()||ce.setAttributions(G.getAttributions()),ce.getTileLoadFunction()===Xz&&ce.setTileLoadFunction(G.getTileLoadFunction()),Pg(ce.getProjection(),G.getProjection())&&(ce.tileGrid=G.getTileGrid())):n.setSource(G);const ge=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&ge.getMinZoom()>0&&n.setMaxResolution(FC(Math.max(0,ge.getMinZoom()-1e-12),ge.getResolutions()))});const ne=U.sources[l];let $=n.getSource();(!$||$.get("mapbox-source")!==ne)&&($=oj(ne,a,o));const ae=n.getSource();return ae?$!==ae&&(ae.getAttributions()||ae.setAttributions($.getAttributions()),ae.format_||(ae.format_=$.getFormat()),ae.url_=$.getUrl()):n.setSource($),Promise.resolve()}let W,Y;const te={},J={};function oe(){if(!Y&&(!U.sprite||te)){if(o.projection&&!r){const G=Qs(o.projection).getUnits();G!=="m"&&(r=Xm.map(ce=>ce/Fg[G]))}let ne;const $=n.getSource();$ instanceof n8&&$.format_ instanceof Kz&&(ne=$.format_.layerName_),Y=_ne(n,U,p,r,te,J,(ae,G=o.webfonts)=>fne(ae,G),o.getImage,ne),n.getStyle()?j().then(w).catch(O):O(new Error(`Nothing to show for source [${l}]`))}else Y?(n.setStyle(Y),j().then(w).catch(O)):O(new Error("Something went wrong trying to apply style."))}if(U.sprite){const ne=ane(U.sprite,o.accessToken,a||location.href);W=window.devicePixelRatio>=1.5?.5:1;const $=W==.5?"@2x":"";Promise.all(ne.map(function(ae){const G=new URL(ae.url);let ce=G.origin+G.pathname+$+".json"+G.search;return new Promise(function(ge,ye){Lv("Sprite",ce,o).then(ge).catch(function(we){ce=G.origin+G.pathname+".json"+G.search,Lv("Sprite",ce,o).then(ge).catch(ye)})}).then(function(ge){ge===void 0&&O(new Error("No sprites found."));let ye;if(ye=G.origin+G.pathname+$+".png"+G.search,o.transformRequest){const we=o.transformRequest(ye,"SpriteImage")||ye;(we instanceof Request||we instanceof Promise)&&(ye=we)}J[ae.id]=ye;for(const we in ge){const Oe=ae.id=="default"?we:`${ae.id}:${we}`;te[Oe]=ge[we]}}).catch(function(ge){O(new Error(`Sprites cannot be loaded: ${ce}: ${ge.message}`))})})).then(oe).catch(O)}else oe()}).catch(O)})}function ej(n,e){let t;return n.some(function(i){if(i.id==e)return t=i.source,!0}),t}function Xie(n,e){const t=n.bounds;if(t){const i=W6([t[0],t[1]],e),r=W6([t[2],t[3]],e);return[i[0],i[1],r[0],r[1]]}return Qs(e).getExtent()}function tj(n,e,t){const i=new Zz({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),r=i.getTileJSON(),a=i.getTileGrid(),l=Qs(t.projection||"EPSG:3857"),o=Xie(r,l),p=l.getExtent(),C=r.minzoom||0,w=r.maxzoom||22,O={attributions:i.getAttributions(),projection:l,tileGrid:new M2({origin:p?j0(p):a.getOrigin(0),extent:o||a.getExtent(),minZoom:C,resolutions:$ie(l,e.tileSize).slice(0,w+1),tileSize:a.getTileSize(0)})};return Array.isArray(r.tiles)?O.urls=r.tiles:O.url=r.tiles,O}function Jie(n,e,t,i){const r={id:n.id,type:n.type},a=n.layout||{},l=n.paint||{};r.paint=l,Ef.zoom=XO(e,t.resolutions||Xm),Ef.distanceFromCenter=0;let o;const p=_r(r,"paint","background-color",em,i);return l["background-opacity"]!==void 0&&(o=_r(r,"paint","background-opacity",em,i)),a.visibility=="none"?void 0:mg(p,o)}function ere(n,e,t){const i=document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new $v({source:new Zv({}),render(r){const a=Jie(n,r.viewState.resolution,e,t);return i.style.backgroundColor=a,i}})}function nj(n,e,t){return new Promise(function(i,r){kz(n,e,t).then(function({tileJson:a,tileLoadFunction:l}){const o=tj(n,a,t);o.tileLoadFunction=l,o.format=new Kz({layerName:"mvt:layer"});const p=new n8(o);p.set("mapbox-source",n),i(p)}).catch(r)})}function tre(n,e,t){const i=new i_({declutter:!0,visible:!1});return nj(n,e,t).then(function(r){i.setSource(r)}).catch(function(r){i.setSource(void 0)}),i}function ij(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function nre(n,e,t){return new Promise(function(i,r){kz(n,e,t).then(function({tileJson:a,tileLoadFunction:l}){const o=new Zz({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:a});o.tileGrid=tj(n,a,t).tileGrid,t.projection&&(o.projection=Qs(t.projection));const p=o.getTileUrlFunction();l&&o.setTileLoadFunction(l),o.setTileUrlFunction(function(C,w,O){const U=ij(O);let K=p(C,w,O);if(K.indexOf(U)!=-1){const j=o.getTileGrid().getTileCoordExtent(C);K=K.replace(U,j.toString())}return K}),o.set("mapbox-source",n),i(o)}).catch(function(a){r(a)})})}function rj(n,e,t){const i=new Gz;return nre(n,e,t).then(function(r){i.setSource(r)}).catch(function(){i.setSource(void 0)}),i}function ire(n,e,t){const i=rj(n,e,t);return new Uz({source:new Vz({operationType:"image",operation:Vie,sources:[i]})})}function oj(n,e,t){const i=t.projection?new $9({dataProjection:t.projection}):new $9,r=n.data,a={};if(typeof r=="string"){const[o]=Sx(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const C=(O,U,K)=>{const j=ij(K);return o.replace(j,`${O.join(",")}`)},w=new wx({attributions:n.attribution,format:i,loader:(O,U,K,j,W)=>{const Y=typeof C=="function"?C(O,U,K):C;Lv("GeoJSON",Y,t).then(te=>{const J=w.getFormat().readFeatures(te,{featureProjection:K});w.addFeatures(J),j(J)}).catch(te=>{w.removeLoadedExtent(O),W()})},strategy:Fte});return w.set("mapbox-source",n),w}const p=new wx({attributions:n.attribution,format:i,url:o,loader:(C,w,O,U,K)=>{Lv("GeoJSON",o,t).then(j=>{const W=p.getFormat().readFeatures(j,{featureProjection:O});p.addFeatures(W),U(W)}).catch(j=>{p.removeLoadedExtent(C),K()})}});return p}a.features=i.readFeatures(r,{featureProjection:"EPSG:3857"});const l=new wx(Object.assign({attributions:n.attribution,format:i},a));return l.set("mapbox-source",n),l}function rre(n,e,t){return new HO({declutter:!0,source:oj(n,e,t),visible:!1})}function ore(n,e,t){let i=null;return function(r){n.paint&&"raster-opacity"in n.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete t[n.id],are(n,e,i,t))}}function are(n,e,t,i){Ef.zoom=t,Ef.distanceFromCenter=0;const r=_r(n,"paint","raster-opacity",em,i);e.setOpacity(r)}function sre(n,e){function t(){const i=e.get("mapbox-style");if(!i)return;const r=DB(i.layers),a=n.get("mapbox-layers"),l=r.filter(function(o){return a.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==l&&n.setVisible(l)}n.on("change",t),t()}function lre(n,e,t,i){const r=Iz(n),a=n.layers,l=t.type,o=t.source||ej(a,t.ref),p=n.sources[o];let C;if(l=="background")C=ere(t,i,r);else if(p.type=="vector")C=tre(p,e,i);else if(p.type=="raster")C=rj(p,e,i),C.setVisible(t.layout?t.layout.visibility!=="none":!0),C.on("prerender",ore(t,C,r));else if(p.type=="geojson")C=rre(p,e,i);else if(p.type=="raster-dem"&&t.type=="hillshade"){const O=ire(p,e,i);C=O,O.getSource().on("beforeoperations",function(U){const K=U.data;K.resolution=G6(i.projection||"EPSG:3857",U.resolution,Bf(U.extent),"m"),Ef.zoom=XO(U.resolution,i.resolutions||Xm),Ef.distanceFromCenter=0,K.encoding=p.encoding,K.vert=5*_r(t,"paint","hillshade-exaggeration",em,r),K.sunAz=_r(t,"paint","hillshade-illumination-direction",em,r),K.sunEl=35,K.opacity=.3,K.highlightColor=_r(t,"paint","hillshade-highlight-color",em,r),K.shadowColor=_r(t,"paint","hillshade-shadow-color",em,r),K.accentColor=_r(t,"paint","hillshade-accent-color",em,r)}),C.setVisible(t.layout?t.layout.visibility!=="none":!0)}const w=o;return C&&C.set("mapbox-source",w),C}function sT(n,e,t,i){const r=[];let a=null;if(e instanceof C2){if(a=e.getView(),!a.isDef()&&!a.getRotation()&&!a.getResolutions()){const O=i.projection?Qs(i.projection):a.getProjection();a=new Xp(Object.assign(a.getProperties(),{maxResolution:Xm[0]/Fg[O.getUnits()],projection:i.projection||a.getProjection()})),e.setView(a)}"center"in n&&!a.getCenter()&&a.setCenter(W6(n.center,a.getProjection())),"zoom"in n&&a.getZoom()===void 0&&a.setResolution(Xm[0]/Fg[a.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!a.getCenter()||a.getZoom()===void 0)&&a.fit(a.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:i});const l=n.layers;let o=[],p,C,w;for(let O=0,U=l.length;O<U;++O){const K=l[O],j=K.type;if(j=="heatmap"){console.debug(`layers[${O}].type "${j}" not supported`);continue}else w=K.source||ej(l,K.ref),(!w||w!=C)&&(o.length&&(r.push(lT(p,o,n,t,e,i)),o=[]),p=lre(n,t,K,i),p instanceof HO||p instanceof i_||(o=[]),C=p.get("mapbox-source")),o.push(K.id)}return r.push(lT(p,o,n,t,e,i)),Promise.all(r)}function ure(n,e,t={}){let i,r;if(typeof n=="string"||n instanceof HTMLElement?r=new C2({target:n}):r=n,typeof e=="string"){const a=e.startsWith("data:")?location.href:h3(e,t.accessToken);t=Jz(a,t),i=new Promise(function(l,o){Tz(e,t).then(function(p){sT(p,r,a,t).then(function(){l(r)}).catch(o)}).catch(function(p){o(new Error(`Could not load ${e}: ${p.message}`))})})}else i=new Promise(function(a,l){sT(e,r,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:h3(t.styleUrl,t.accessToken),t).then(function(){a(r)}).catch(l)});return i}function lT(n,e,t,i,r,a={}){let l=24,o=0;const p=t.layers;for(let C=0,w=p.length;C<w;++C){const O=p[C];e.indexOf(O.id)!==-1&&(l=Math.min("minzoom"in O?O.minzoom:0,l),o=Math.max("maxzoom"in O?O.maxzoom:24,o))}return new Promise(function(C,w){const O=function(){const K=n.getSource();if(!K||K.getState()==="error"){w(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in K){const j=K.getTileGrid();if(j){const W=j.getMinZoom();(l>0||W>0)&&n.setMaxResolution(Math.min(FC(Math.max(0,l-1e-12),Xm),FC(Math.max(0,W-1e-12),j.getResolutions()))),o<24&&n.setMinResolution(FC(o,Xm))}}else l>0&&n.setMaxResolution(FC(Math.max(0,l-1e-12),Xm));K instanceof wx||K instanceof n8?Zie(n,t,e,Object.assign({styleUrl:i},a)).then(function(){sre(n,r),C()}).catch(w):C()};n.set("mapbox-layers",e);const U=r.getLayers();U.getArray().indexOf(n)===-1&&U.push(n),n.getSource()?O():n.once("change:source",O)})}function rr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="5f4719fc476214e7aff32d9043337b9c97544cf9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:185,column:9}},37:{start:{line:119,column:12},end:{line:119,column:36}},38:{start:{line:176,column:12},end:{line:176,column:31}},39:{start:{line:188,column:22},end:{line:188,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:186,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:120,column:11}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:175,column:15},end:{line:175,column:16}},loc:{start:{line:175,column:22},end:{line:177,column:11}},line:175}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:136,column:26},end:{line:136,column:59}},type:"binary-expr",locations:[{start:{line:136,column:26},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:59}}],line:136},5:{loc:{start:{line:148,column:6},end:{line:170,column:10}},type:"binary-expr",locations:[{start:{line:148,column:6},end:{line:148,column:29}},{start:{line:148,column:49},end:{line:170,column:10}}],line:148}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK;AAAC,iBAAK,iBAAiB;AAAA,UAAE;AAAA,UACnC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK;AAAC,iBAAK,YAAY;AAAA,UAAE;AAAA,UAC9B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5f4719fc476214e7aff32d9043337b9c97544cf9"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return rr=function(){return l},l}rr();function uT(n){return rr().f[0]++,rr().s[0]++,rr().b[1][0]++,!n||(rr().b[1][1]++,n.length<2)?(rr().b[0][0]++,rr().s[1]++,null):(rr().b[0][1]++,rr().s[2]++,Ae.jsx("span",{className:"maputnik-coords",children:n.map(e=>(rr().f[1]++,rr().s[3]++,String(e).padStart(7,""))).join(", ")}))}class Are extends ni.Component{static defaultProps=(rr().s[4]++,{onMapLoaded:()=>{rr().f[2]++},onDataChange:()=>{rr().f[3]++},onLayerSelect:()=>{rr().f[4]++}});updateStyle;map;container=(rr().s[5]++,null);overlay;popupContainer=(rr().s[6]++,null);constructor(e){rr().f[5]++,rr().s[7]++,super(e),rr().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},rr().s[9]++,this.updateStyle=eb.throttle(this._updateStyle.bind(this),200)}_updateStyle(e){if(rr().f[6]++,rr().s[10]++,this.map)rr().b[2][1]++;else{rr().b[2][0]++,rr().s[11]++;return}rr().s[12]++,this.map.getLayers().clear(),rr().s[13]++,ure(this.map,e)}componentDidUpdate(e){rr().f[7]++,rr().s[14]++,this.props.mapStyle!==e.mapStyle?(rr().b[3][0]++,rr().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):rr().b[3][1]++}componentDidMount(){rr().f[8]++,rr().s[16]++,this.overlay=new rne({element:this.popupContainer,autoPan:{animation:{duration:250}}});const e=(rr().s[17]++,new C2({target:this.container,overlays:[this.overlay],view:new Xp({zoom:1,center:[180,-90]})}));rr().s[18]++,e.on("pointermove",i=>{rr().f[9]++;const r=(rr().s[19]++,L4(i.coordinate));rr().s[20]++,this.setState({cursor:[r[0].toFixed(2),r[1].toFixed(2)]})}),rr().s[21]++;const t=()=>{rr().f[10]++;const i=(rr().s[22]++,e.getView().getZoom()),r=(rr().s[23]++,L4(e.getView().getCenter()));rr().s[24]++,this.props.onChange({zoom:i,center:{lng:r[0],lat:r[1]}})};rr().s[25]++,t(),rr().s[26]++,e.on("moveend",t),rr().s[27]++,e.on("postrender",i=>{rr().f[11]++;const r=(rr().s[28]++,L4(e.getView().getCenter()));rr().s[29]++,this.setState({center:[r[0].toFixed(2),r[1].toFixed(2)],rotation:e.getView().getRotation().toFixed(2),zoom:e.getView().getZoom().toFixed(2)})}),rr().s[30]++,this.map=e,rr().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}closeOverlay=(rr().s[32]++,e=>{rr().f[12]++,rr().s[33]++,e.target.blur(),rr().s[34]++,this.overlay.setPosition(void 0)});render(){rr().f[13]++;const e=(rr().s[35]++,this.props.t);return rr().s[36]++,Ae.jsxs("div",{className:"maputnik-ol-container",children:[Ae.jsxs("div",{ref:t=>{rr().f[14]++,rr().s[37]++,this.popupContainer=t},style:{background:"black"},className:"maputnik-popup",children:[Ae.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":e("Close popup"),children:""}),Ae.jsx(aF,{features:(rr().b[4][0]++,this.state.selectedFeatures||(rr().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),Ae.jsxs("div",{className:"maputnik-ol-zoom",children:[e("Zoom:")," ",this.state.zoom]}),(rr().b[5][0]++,this.props.debugToolbox&&(rr().b[5][1]++,Ae.jsxs("div",{className:"maputnik-ol-debug",children:[Ae.jsxs("div",{children:[Ae.jsxs("label",{children:[e("cursor:")," "]}),Ae.jsx("span",{children:uT(this.state.cursor)})]}),Ae.jsxs("div",{children:[Ae.jsxs("label",{children:[e("center:")," "]}),Ae.jsx("span",{children:uT(this.state.center)})]}),Ae.jsxs("div",{children:[Ae.jsxs("label",{children:[e("rotation:")," "]}),Ae.jsx("span",{children:this.state.rotation})]})]}))),Ae.jsx("div",{className:"maputnik-ol",ref:t=>{rr().f[15]++,rr().s[38]++,this.container=t},role:"region","aria-label":e("Map view"),style:{...this.props.style}})]})}}const cre=(rr().s[39]++,ls()(Are));var g5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var AT;function hre(){return AT||(AT=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(a=r(a,i(o)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var o in a)e.call(a,o)&&a[o]&&(l=r(l,o));return l}function r(a,l){return l?a?a+" "+l:a+l:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(g5)),g5.exports}var dre=hre();const e0=AA(dre);var zC=O3();function fre(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Nt.useMemo(()=>i=>{e.forEach(r=>r(i))},e)}const E2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xv(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function i8(n){return"nodeType"in n}function Hd(n){var e,t;return n?Xv(n)?n:i8(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function r8(n){const{Document:e}=Hd(n);return n instanceof e}function bb(n){return Xv(n)?!1:n instanceof Hd(n).HTMLElement}function aj(n){return n instanceof Hd(n).SVGElement}function Jv(n){return n?Xv(n)?n.document:i8(n)?r8(n)?n:bb(n)||aj(n)?n.ownerDocument:document:document:document}const t0=E2?Nt.useLayoutEffect:Nt.useEffect;function o8(n){const e=Nt.useRef(n);return t0(()=>{e.current=n}),Nt.useCallback(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.current==null?void 0:e.current(...i)},[])}function pre(){const n=Nt.useRef(null),e=Nt.useCallback((i,r)=>{n.current=setInterval(i,r)},[]),t=Nt.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function U_(n,e){e===void 0&&(e=[n]);const t=Nt.useRef(n);return t0(()=>{t.current!==n&&(t.current=n)},e),t}function xb(n,e){const t=Nt.useRef();return Nt.useMemo(()=>{const i=n(t.current);return t.current=i,i},[...e])}function p3(n){const e=o8(n),t=Nt.useRef(null),i=Nt.useCallback(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[]);return[t,i]}function uB(n){const e=Nt.useRef();return Nt.useEffect(()=>{e.current=n},[n]),e.current}let y5={};function Mb(n,e){return Nt.useMemo(()=>{if(e)return e;const t=y5[n]==null?0:y5[n]+1;return y5[n]=t,n+"-"+t},[n,e])}function sj(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((a,l)=>{const o=Object.entries(l);for(const[p,C]of o){const w=a[p];w!=null&&(a[p]=w+n*C)}return a},{...e})}}const _v=sj(1),m3=sj(-1);function mre(n){return"clientX"in n&&"clientY"in n}function a8(n){if(!n)return!1;const{KeyboardEvent:e}=Hd(n.target);return e&&n instanceof e}function gre(n){if(!n)return!1;const{TouchEvent:e}=Hd(n.target);return e&&n instanceof e}function AB(n){if(gre(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return mre(n)?{x:n.clientX,y:n.clientY}:null}const L_=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[L_.Translate.toString(n),L_.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:i}=n;return e+" "+t+"ms "+i}}}),cT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function yre(n){return n.matches(cT)?n:n.querySelector(cT)}const vre={display:"none"};function Cre(n){let{id:e,value:t}=n;return ni.createElement("div",{id:e,style:vre},t)}function _re(n){let{id:e,announcement:t,ariaLiveType:i="assertive"}=n;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ni.createElement("div",{id:e,style:r,role:"status","aria-live":i,"aria-atomic":!0},t)}function bre(){const[n,e]=Nt.useState("");return{announce:Nt.useCallback(i=>{i!=null&&e(i)},[]),announcement:n}}const lj=Nt.createContext(null);function xre(n){const e=Nt.useContext(lj);Nt.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function Mre(){const[n]=Nt.useState(()=>new Set),e=Nt.useCallback(i=>(n.add(i),()=>n.delete(i)),[n]);return[Nt.useCallback(i=>{let{type:r,event:a}=i;n.forEach(l=>{var o;return(o=l[r])==null?void 0:o.call(l,a)})},[n]),e]}const wre={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Sre={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Ere(n){let{announcements:e=Sre,container:t,hiddenTextDescribedById:i,screenReaderInstructions:r=wre}=n;const{announce:a,announcement:l}=bre(),o=Mb("DndLiveRegion"),[p,C]=Nt.useState(!1);if(Nt.useEffect(()=>{C(!0)},[]),xre(Nt.useMemo(()=>({onDragStart(O){let{active:U}=O;a(e.onDragStart({active:U}))},onDragMove(O){let{active:U,over:K}=O;e.onDragMove&&a(e.onDragMove({active:U,over:K}))},onDragOver(O){let{active:U,over:K}=O;a(e.onDragOver({active:U,over:K}))},onDragEnd(O){let{active:U,over:K}=O;a(e.onDragEnd({active:U,over:K}))},onDragCancel(O){let{active:U,over:K}=O;a(e.onDragCancel({active:U,over:K}))}}),[a,e])),!p)return null;const w=ni.createElement(ni.Fragment,null,ni.createElement(Cre,{id:i,value:r.draggable}),ni.createElement(_re,{id:o,announcement:l}));return t?zC.createPortal(w,t):w}var _c;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(_c||(_c={}));function g3(){}function Bre(n,e){return Nt.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function Ore(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Nt.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const om=Object.freeze({x:0,y:0});function Ire(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Tre(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return t-i}function kre(n,e){let{data:{value:t}}=n,{data:{value:i}}=e;return i-t}function Dre(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function hT(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const Rre=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=hT(e,e.left,e.top),a=[];for(const l of i){const{id:o}=l,p=t.get(o);if(p){const C=Ire(hT(p),r);a.push({id:o,data:{droppableContainer:l,value:C}})}}return a.sort(Tre)};function Pre(n,e){const t=Math.max(e.top,n.top),i=Math.max(e.left,n.left),r=Math.min(e.left+e.width,n.left+n.width),a=Math.min(e.top+e.height,n.top+n.height),l=r-i,o=a-t;if(i<r&&t<a){const p=e.width*e.height,C=n.width*n.height,w=l*o,O=w/(p+C-w);return Number(O.toFixed(4))}return 0}const Kre=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:i}=n;const r=[];for(const a of i){const{id:l}=a,o=t.get(l);if(o){const p=Pre(o,e);p>0&&r.push({id:l,data:{droppableContainer:a,value:p}})}}return r.sort(kre)};function Ure(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function uj(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:om}function Lre(n){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return r.reduce((l,o)=>({...l,top:l.top+n*o.y,bottom:l.bottom+n*o.y,left:l.left+n*o.x,right:l.right+n*o.x}),{...t})}}const Fre=Lre(1);function zre(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function jre(n,e,t){const i=zre(e);if(!i)return n;const{scaleX:r,scaleY:a,x:l,y:o}=i,p=n.left-l-(1-r)*parseFloat(t),C=n.top-o-(1-a)*parseFloat(t.slice(t.indexOf(" ")+1)),w=r?n.width/r:n.width,O=a?n.height/a:n.height;return{width:w,height:O,top:C,right:p+w,bottom:C+O,left:p}}const Nre={ignoreTransform:!1};function eC(n,e){e===void 0&&(e=Nre);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:C,transformOrigin:w}=Hd(n).getComputedStyle(n);C&&(t=jre(t,C,w))}const{top:i,left:r,width:a,height:l,bottom:o,right:p}=t;return{top:i,left:r,width:a,height:l,bottom:o,right:p}}function dT(n){return eC(n,{ignoreTransform:!0})}function Gre(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function Wre(n,e){return e===void 0&&(e=Hd(n).getComputedStyle(n)),e.position==="fixed"}function Qre(n,e){e===void 0&&(e=Hd(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const a=e[r];return typeof a=="string"?t.test(a):!1})}function s8(n,e){const t=[];function i(r){if(e!=null&&t.length>=e||!r)return t;if(r8(r)&&r.scrollingElement!=null&&!t.includes(r.scrollingElement))return t.push(r.scrollingElement),t;if(!bb(r)||aj(r)||t.includes(r))return t;const a=Hd(n).getComputedStyle(r);return r!==n&&Qre(r,a)&&t.push(r),Wre(r,a)?t:i(r.parentNode)}return n?i(n):t}function Aj(n){const[e]=s8(n,1);return e??null}function v5(n){return!E2||!n?null:Xv(n)?n:i8(n)?r8(n)||n===Jv(n).scrollingElement?window:bb(n)?n:null:null}function cj(n){return Xv(n)?n.scrollX:n.scrollLeft}function hj(n){return Xv(n)?n.scrollY:n.scrollTop}function cB(n){return{x:cj(n),y:hj(n)}}var Wc;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Wc||(Wc={}));function dj(n){return!E2||!n?!1:n===document.scrollingElement}function fj(n){const e={x:0,y:0},t=dj(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},i={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},r=n.scrollTop<=e.y,a=n.scrollLeft<=e.x,l=n.scrollTop>=i.y,o=n.scrollLeft>=i.x;return{isTop:r,isLeft:a,isBottom:l,isRight:o,maxScroll:i,minScroll:e}}const Yre={x:.2,y:.2};function qre(n,e,t,i,r){let{top:a,left:l,right:o,bottom:p}=t;i===void 0&&(i=10),r===void 0&&(r=Yre);const{isTop:C,isBottom:w,isLeft:O,isRight:U}=fj(n),K={x:0,y:0},j={x:0,y:0},W={height:e.height*r.y,width:e.width*r.x};return!C&&a<=e.top+W.height?(K.y=Wc.Backward,j.y=i*Math.abs((e.top+W.height-a)/W.height)):!w&&p>=e.bottom-W.height&&(K.y=Wc.Forward,j.y=i*Math.abs((e.bottom-W.height-p)/W.height)),!U&&o>=e.right-W.width?(K.x=Wc.Forward,j.x=i*Math.abs((e.right-W.width-o)/W.width)):!O&&l<=e.left+W.width&&(K.x=Wc.Backward,j.x=i*Math.abs((e.left+W.width-l)/W.width)),{direction:K,speed:j}}function Hre(n){if(n===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:e,left:t,right:i,bottom:r}=n.getBoundingClientRect();return{top:e,left:t,right:i,bottom:r,width:n.clientWidth,height:n.clientHeight}}function pj(n){return n.reduce((e,t)=>_v(e,cB(t)),om)}function Vre(n){return n.reduce((e,t)=>e+cj(t),0)}function $re(n){return n.reduce((e,t)=>e+hj(t),0)}function Zre(n,e){if(e===void 0&&(e=eC),!n)return;const{top:t,left:i,bottom:r,right:a}=e(n);Aj(n)&&(r<=0||a<=0||t>=window.innerHeight||i>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const Xre=[["x",["left","right"],Vre],["y",["top","bottom"],$re]];class l8{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=s8(t),r=pj(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,l,o]of Xre)for(const p of l)Object.defineProperty(this,p,{get:()=>{const C=o(i),w=r[a]-C;return this.rect[p]+w},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class r_{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...t)})},this.target=e}add(e,t,i){var r;(r=this.target)==null||r.addEventListener(e,t,i),this.listeners.push([e,t,i])}}function Jre(n){const{EventTarget:e}=Hd(n);return n instanceof e?n:Jv(n)}function C5(n,e){const t=Math.abs(n.x),i=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+i**2)>e:"x"in e&&"y"in e?t>e.x&&i>e.y:"x"in e?t>e.x:"y"in e?i>e.y:!1}var dp;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(dp||(dp={}));function fT(n){n.preventDefault()}function eoe(n){n.stopPropagation()}var Ks;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Ks||(Ks={}));const mj={start:[Ks.Space,Ks.Enter],cancel:[Ks.Esc],end:[Ks.Space,Ks.Enter,Ks.Tab]},toe=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Ks.Right:return{...t,x:t.x+25};case Ks.Left:return{...t,x:t.x-25};case Ks.Down:return{...t,y:t.y+25};case Ks.Up:return{...t,y:t.y-25}}};class gj{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new r_(Jv(t)),this.windowListeners=new r_(Hd(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(dp.Resize,this.handleCancel),this.windowListeners.add(dp.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(dp.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,i=e.node.current;i&&Zre(i),t(om)}handleKeyDown(e){if(a8(e)){const{active:t,context:i,options:r}=this.props,{keyboardCodes:a=mj,coordinateGetter:l=toe,scrollBehavior:o="smooth"}=r,{code:p}=e;if(a.end.includes(p)){this.handleEnd(e);return}if(a.cancel.includes(p)){this.handleCancel(e);return}const{collisionRect:C}=i.current,w=C?{x:C.left,y:C.top}:om;this.referenceCoordinates||(this.referenceCoordinates=w);const O=l(e,{active:t,context:i.current,currentCoordinates:w});if(O){const U=m3(O,w),K={x:0,y:0},{scrollableAncestors:j}=i.current;for(const W of j){const Y=e.code,{isTop:te,isRight:J,isLeft:oe,isBottom:ne,maxScroll:$,minScroll:ae}=fj(W),G=Hre(W),ce={x:Math.min(Y===Ks.Right?G.right-G.width/2:G.right,Math.max(Y===Ks.Right?G.left:G.left+G.width/2,O.x)),y:Math.min(Y===Ks.Down?G.bottom-G.height/2:G.bottom,Math.max(Y===Ks.Down?G.top:G.top+G.height/2,O.y))},ge=Y===Ks.Right&&!J||Y===Ks.Left&&!oe,ye=Y===Ks.Down&&!ne||Y===Ks.Up&&!te;if(ge&&ce.x!==O.x){const we=W.scrollLeft+U.x,Oe=Y===Ks.Right&&we<=$.x||Y===Ks.Left&&we>=ae.x;if(Oe&&!U.y){W.scrollTo({left:we,behavior:o});return}Oe?K.x=W.scrollLeft-we:K.x=Y===Ks.Right?W.scrollLeft-$.x:W.scrollLeft-ae.x,K.x&&W.scrollBy({left:-K.x,behavior:o});break}else if(ye&&ce.y!==O.y){const we=W.scrollTop+U.y,Oe=Y===Ks.Down&&we<=$.y||Y===Ks.Up&&we>=ae.y;if(Oe&&!U.x){W.scrollTo({top:we,behavior:o});return}Oe?K.y=W.scrollTop-we:K.y=Y===Ks.Down?W.scrollTop-$.y:W.scrollTop-ae.y,K.y&&W.scrollBy({top:-K.y,behavior:o});break}}this.handleMove(e,_v(m3(O,this.referenceCoordinates),K))}}}handleMove(e,t){const{onMove:i}=this.props;e.preventDefault(),i(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}gj.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:i=mj,onActivation:r}=e,{active:a}=t;const{code:l}=n.nativeEvent;if(i.start.includes(l)){const o=a.activatorNode.current;return o&&n.target!==o?!1:(n.preventDefault(),r?.({event:n.nativeEvent}),!0)}return!1}}];function pT(n){return!!(n&&"distance"in n)}function mT(n){return!!(n&&"delay"in n)}class u8{constructor(e,t,i){var r;i===void 0&&(i=Jre(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:l}=a;this.props=e,this.events=t,this.document=Jv(l),this.documentListeners=new r_(this.document),this.listeners=new r_(i),this.windowListeners=new r_(Hd(l)),this.initialCoordinates=(r=AB(a))!=null?r:om,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(dp.Resize,this.handleCancel),this.windowListeners.add(dp.DragStart,fT),this.windowListeners.add(dp.VisibilityChange,this.handleCancel),this.windowListeners.add(dp.ContextMenu,fT),this.documentListeners.add(dp.Keydown,this.handleKeydown),t){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(mT(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(pT(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:i,onPending:r}=this.props;r(i,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(dp.Click,eoe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(dp.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:i,initialCoordinates:r,props:a}=this,{onMove:l,options:{activationConstraint:o}}=a;if(!r)return;const p=(t=AB(e))!=null?t:om,C=m3(r,p);if(!i&&o){if(pT(o)){if(o.tolerance!=null&&C5(C,o.tolerance))return this.handleCancel();if(C5(C,o.distance))return this.handleStart()}if(mT(o)&&C5(C,o.tolerance))return this.handleCancel();this.handlePending(o,C);return}e.cancelable&&e.preventDefault(),l(p)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Ks.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const noe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class A8 extends u8{constructor(e){const{event:t}=e,i=Jv(t.target);super(e,noe,i)}}A8.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return!t.isPrimary||t.button!==0?!1:(i?.({event:t}),!0)}}];const ioe={move:{name:"mousemove"},end:{name:"mouseup"}};var hB;(function(n){n[n.RightClick=2]="RightClick"})(hB||(hB={}));class roe extends u8{constructor(e){super(e,ioe,Jv(e.event.target))}}roe.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;return t.button===hB.RightClick?!1:(i?.({event:t}),!0)}}];const _5={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ooe extends u8{constructor(e){super(e,_5)}static setup(){return window.addEventListener(_5.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(_5.move.name,e)};function e(){}}}ooe.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:i}=e;const{touches:r}=t;return r.length>1?!1:(i?.({event:t}),!0)}}];var o_;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(o_||(o_={}));var y3;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(y3||(y3={}));function aoe(n){let{acceleration:e,activator:t=o_.Pointer,canScroll:i,draggingRect:r,enabled:a,interval:l=5,order:o=y3.TreeOrder,pointerCoordinates:p,scrollableAncestors:C,scrollableAncestorRects:w,delta:O,threshold:U}=n;const K=loe({delta:O,disabled:!a}),[j,W]=pre(),Y=Nt.useRef({x:0,y:0}),te=Nt.useRef({x:0,y:0}),J=Nt.useMemo(()=>{switch(t){case o_.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case o_.DraggableRect:return r}},[t,r,p]),oe=Nt.useRef(null),ne=Nt.useCallback(()=>{const ae=oe.current;if(!ae)return;const G=Y.current.x*te.current.x,ce=Y.current.y*te.current.y;ae.scrollBy(G,ce)},[]),$=Nt.useMemo(()=>o===y3.TreeOrder?[...C].reverse():C,[o,C]);Nt.useEffect(()=>{if(!a||!C.length||!J){W();return}for(const ae of $){if(i?.(ae)===!1)continue;const G=C.indexOf(ae),ce=w[G];if(!ce)continue;const{direction:ge,speed:ye}=qre(ae,ce,J,e,U);for(const we of["x","y"])K[we][ge[we]]||(ye[we]=0,ge[we]=0);if(ye.x>0||ye.y>0){W(),oe.current=ae,j(ne,l),Y.current=ye,te.current=ge;return}}Y.current={x:0,y:0},te.current={x:0,y:0},W()},[e,ne,i,W,a,l,JSON.stringify(J),JSON.stringify(K),j,C,$,w,JSON.stringify(U)])}const soe={x:{[Wc.Backward]:!1,[Wc.Forward]:!1},y:{[Wc.Backward]:!1,[Wc.Forward]:!1}};function loe(n){let{delta:e,disabled:t}=n;const i=uB(e);return xb(r=>{if(t||!i||!r)return soe;const a={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Wc.Backward]:r.x[Wc.Backward]||a.x===-1,[Wc.Forward]:r.x[Wc.Forward]||a.x===1},y:{[Wc.Backward]:r.y[Wc.Backward]||a.y===-1,[Wc.Forward]:r.y[Wc.Forward]||a.y===1}}},[t,e,i])}function uoe(n,e){const t=e!=null?n.get(e):void 0,i=t?t.node.current:null;return xb(r=>{var a;return e==null?null:(a=i??r)!=null?a:null},[i,e])}function Aoe(n,e){return Nt.useMemo(()=>n.reduce((t,i)=>{const{sensor:r}=i,a=r.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,i)}));return[...t,...a]},[]),[n,e])}var F_;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(F_||(F_={}));var dB;(function(n){n.Optimized="optimized"})(dB||(dB={}));const gT=new Map;function coe(n,e){let{dragging:t,dependencies:i,config:r}=e;const[a,l]=Nt.useState(null),{frequency:o,measure:p,strategy:C}=r,w=Nt.useRef(n),O=Y(),U=U_(O),K=Nt.useCallback(function(te){te===void 0&&(te=[]),!U.current&&l(J=>J===null?te:J.concat(te.filter(oe=>!J.includes(oe))))},[U]),j=Nt.useRef(null),W=xb(te=>{if(O&&!t)return gT;if(!te||te===gT||w.current!==n||a!=null){const J=new Map;for(let oe of n){if(!oe)continue;if(a&&a.length>0&&!a.includes(oe.id)&&oe.rect.current){J.set(oe.id,oe.rect.current);continue}const ne=oe.node.current,$=ne?new l8(p(ne),ne):null;oe.rect.current=$,$&&J.set(oe.id,$)}return J}return te},[n,a,t,O,p]);return Nt.useEffect(()=>{w.current=n},[n]),Nt.useEffect(()=>{O||K()},[t,O]),Nt.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),Nt.useEffect(()=>{O||typeof o!="number"||j.current!==null||(j.current=setTimeout(()=>{K(),j.current=null},o))},[o,O,K,...i]),{droppableRects:W,measureDroppableContainers:K,measuringScheduled:a!=null};function Y(){switch(C){case F_.Always:return!1;case F_.BeforeDragging:return t;default:return!t}}}function yj(n,e){return xb(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function hoe(n,e){return yj(n,e)}function doe(n){let{callback:e,disabled:t}=n;const i=o8(e),r=Nt.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(i)},[i,t]);return Nt.useEffect(()=>()=>r?.disconnect(),[r]),r}function B2(n){let{callback:e,disabled:t}=n;const i=o8(e),r=Nt.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(i)},[t]);return Nt.useEffect(()=>()=>r?.disconnect(),[r]),r}function foe(n){return new l8(eC(n),n)}function yT(n,e,t){e===void 0&&(e=foe);const[i,r]=Nt.useState(null);function a(){r(p=>{if(!n)return null;if(n.isConnected===!1){var C;return(C=p??t)!=null?C:null}const w=e(n);return JSON.stringify(p)===JSON.stringify(w)?p:w})}const l=doe({callback(p){if(n)for(const C of p){const{type:w,target:O}=C;if(w==="childList"&&O instanceof HTMLElement&&O.contains(n)){a();break}}}}),o=B2({callback:a});return t0(()=>{a(),n?(o?.observe(n),l?.observe(document.body,{childList:!0,subtree:!0})):(o?.disconnect(),l?.disconnect())},[n]),i}function poe(n){const e=yj(n);return uj(n,e)}const vT=[];function moe(n){const e=Nt.useRef(n),t=xb(i=>n?i&&i!==vT&&n&&e.current&&n.parentNode===e.current.parentNode?i:s8(n):vT,[n]);return Nt.useEffect(()=>{e.current=n},[n]),t}function goe(n){const[e,t]=Nt.useState(null),i=Nt.useRef(n),r=Nt.useCallback(a=>{const l=v5(a.target);l&&t(o=>o?(o.set(l,cB(l)),new Map(o)):null)},[]);return Nt.useEffect(()=>{const a=i.current;if(n!==a){l(a);const o=n.map(p=>{const C=v5(p);return C?(C.addEventListener("scroll",r,{passive:!0}),[C,cB(C)]):null}).filter(p=>p!=null);t(o.length?new Map(o):null),i.current=n}return()=>{l(n),l(a)};function l(o){o.forEach(p=>{const C=v5(p);C?.removeEventListener("scroll",r)})}},[r,n]),Nt.useMemo(()=>n.length?e?Array.from(e.values()).reduce((a,l)=>_v(a,l),om):pj(n):om,[n,e])}function CT(n,e){e===void 0&&(e=[]);const t=Nt.useRef(null);return Nt.useEffect(()=>{t.current=null},e),Nt.useEffect(()=>{const i=n!==om;i&&!t.current&&(t.current=n),!i&&t.current&&(t.current=null)},[n]),t.current?m3(n,t.current):om}function yoe(n){Nt.useEffect(()=>{if(!E2)return;const e=n.map(t=>{let{sensor:i}=t;return i.setup==null?void 0:i.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function voe(n,e){return Nt.useMemo(()=>n.reduce((t,i)=>{let{eventName:r,handler:a}=i;return t[r]=l=>{a(l,e)},t},{}),[n,e])}function vj(n){return Nt.useMemo(()=>n?Gre(n):null,[n])}const _T=[];function Coe(n,e){e===void 0&&(e=eC);const[t]=n,i=vj(t?Hd(t):null),[r,a]=Nt.useState(_T);function l(){a(()=>n.length?n.map(p=>dj(p)?i:new l8(e(p),p)):_T)}const o=B2({callback:l});return t0(()=>{o?.disconnect(),l(),n.forEach(p=>o?.observe(p))},[n]),r}function _oe(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return bb(e)?e:n}function boe(n){let{measure:e}=n;const[t,i]=Nt.useState(null),r=Nt.useCallback(C=>{for(const{target:w}of C)if(bb(w)){i(O=>{const U=e(w);return O?{...O,width:U.width,height:U.height}:U});break}},[e]),a=B2({callback:r}),l=Nt.useCallback(C=>{const w=_oe(C);a?.disconnect(),w&&a?.observe(w),i(w?e(w):null)},[e,a]),[o,p]=p3(l);return Nt.useMemo(()=>({nodeRef:o,rect:t,setRef:p}),[t,o,p])}const xoe=[{sensor:A8,options:{}},{sensor:gj,options:{}}],Moe={current:{}},Ex={draggable:{measure:dT},droppable:{measure:dT,strategy:F_.WhileDragging,frequency:dB.Optimized},dragOverlay:{measure:eC}};class a_ extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,i;return(t=(i=this.get(e))==null?void 0:i.node.current)!=null?t:void 0}}const woe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new a_,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:g3},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ex,measureDroppableContainers:g3,windowRect:null,measuringScheduled:!1},Soe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:g3,draggableNodes:new Map,over:null,measureDroppableContainers:g3},O2=Nt.createContext(Soe),Cj=Nt.createContext(woe);function Eoe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new a_}}}function Boe(n,e){switch(e.type){case _c.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case _c.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case _c.DragEnd:case _c.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case _c.RegisterDroppable:{const{element:t}=e,{id:i}=t,r=new a_(n.droppable.containers);return r.set(i,t),{...n,droppable:{...n.droppable,containers:r}}}case _c.SetDroppableDisabled:{const{id:t,key:i,disabled:r}=e,a=n.droppable.containers.get(t);if(!a||i!==a.key)return n;const l=new a_(n.droppable.containers);return l.set(t,{...a,disabled:r}),{...n,droppable:{...n.droppable,containers:l}}}case _c.UnregisterDroppable:{const{id:t,key:i}=e,r=n.droppable.containers.get(t);if(!r||i!==r.key)return n;const a=new a_(n.droppable.containers);return a.delete(t),{...n,droppable:{...n.droppable,containers:a}}}default:return n}}function Ooe(n){let{disabled:e}=n;const{active:t,activatorEvent:i,draggableNodes:r}=Nt.useContext(O2),a=uB(i),l=uB(t?.id);return Nt.useEffect(()=>{if(!e&&!i&&a&&l!=null){if(!a8(a)||document.activeElement===a.target)return;const o=r.get(l);if(!o)return;const{activatorNode:p,node:C}=o;if(!p.current&&!C.current)return;requestAnimationFrame(()=>{for(const w of[p.current,C.current]){if(!w)continue;const O=yre(w);if(O){O.focus();break}}})}},[i,e,r,l,a]),null}function Ioe(n,e){let{transform:t,...i}=e;return n!=null&&n.length?n.reduce((r,a)=>a({transform:r,...i}),t):t}function Toe(n){return Nt.useMemo(()=>({draggable:{...Ex.draggable,...n?.draggable},droppable:{...Ex.droppable,...n?.droppable},dragOverlay:{...Ex.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function koe(n){let{activeNode:e,measure:t,initialRect:i,config:r=!0}=n;const a=Nt.useRef(!1),{x:l,y:o}=typeof r=="boolean"?{x:r,y:r}:r;t0(()=>{if(!l&&!o||!e){a.current=!1;return}if(a.current||!i)return;const C=e?.node.current;if(!C||C.isConnected===!1)return;const w=t(C),O=uj(w,i);if(l||(O.x=0),o||(O.y=0),a.current=!0,Math.abs(O.x)>0||Math.abs(O.y)>0){const U=Aj(C);U&&U.scrollBy({top:O.y,left:O.x})}},[e,l,o,i,t])}const _j=Nt.createContext({...om,scaleX:1,scaleY:1});var yg;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(yg||(yg={}));const Doe=Nt.memo(function(e){var t,i,r,a;let{id:l,accessibility:o,autoScroll:p=!0,children:C,sensors:w=xoe,collisionDetection:O=Kre,measuring:U,modifiers:K,...j}=e;const W=Nt.useReducer(Boe,void 0,Eoe),[Y,te]=W,[J,oe]=Mre(),[ne,$]=Nt.useState(yg.Uninitialized),ae=ne===yg.Initialized,{draggable:{active:G,nodes:ce,translate:ge},droppable:{containers:ye}}=Y,we=G!=null?ce.get(G):null,Oe=Nt.useRef({initial:null,translated:null}),Se=Nt.useMemo(()=>{var it;return G!=null?{id:G,data:(it=we?.data)!=null?it:Moe,rect:Oe}:null},[G,we]),Ve=Nt.useRef(null),[xe,ze]=Nt.useState(null),[st,Ct]=Nt.useState(null),nt=U_(j,Object.values(j)),be=Mb("DndDescribedBy",l),Ne=Nt.useMemo(()=>ye.getEnabled(),[ye]),tt=Toe(U),{droppableRects:lt,measureDroppableContainers:kt,measuringScheduled:gt}=coe(Ne,{dragging:ae,dependencies:[ge.x,ge.y],config:tt.droppable}),St=uoe(ce,G),Ut=Nt.useMemo(()=>st?AB(st):null,[st]),Fe=Tt(),Ke=hoe(St,tt.draggable.measure);koe({activeNode:G!=null?ce.get(G):null,config:Fe.layoutShiftCompensation,initialRect:Ke,measure:tt.draggable.measure});const Re=yT(St,tt.draggable.measure,Ke),He=yT(St?St.parentElement:null),bt=Nt.useRef({activatorEvent:null,active:null,activeNode:St,collisionRect:null,collisions:null,droppableRects:lt,draggableNodes:ce,draggingNode:null,draggingNodeRect:null,droppableContainers:ye,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_t=ye.getNodeFor((t=bt.current.over)==null?void 0:t.id),Ot=boe({measure:tt.dragOverlay.measure}),qt=(i=Ot.nodeRef.current)!=null?i:St,Kt=ae?(r=Ot.rect)!=null?r:Re:null,on=!!(Ot.nodeRef.current&&Ot.rect),Jn=poe(on?null:Re),Wt=vj(qt?Hd(qt):null),$n=moe(ae?_t??St:null),On=Coe($n),Bn=Ioe(K,{transform:{x:ge.x-Jn.x,y:ge.y-Jn.y,scaleX:1,scaleY:1},activatorEvent:st,active:Se,activeNodeRect:Re,containerNodeRect:He,draggingNodeRect:Kt,over:bt.current.over,overlayNodeRect:Ot.rect,scrollableAncestors:$n,scrollableAncestorRects:On,windowRect:Wt}),In=Ut?_v(Ut,ge):null,Oi=goe($n),ei=CT(Oi),Kn=CT(Oi,[Re]),je=_v(Bn,ei),de=Kt?Fre(Kt,Bn):null,re=Se&&de?O({active:Se,collisionRect:de,droppableRects:lt,droppableContainers:Ne,pointerCoordinates:In}):null,le=Dre(re,"id"),[pe,Te]=Nt.useState(null),We=on?Bn:_v(Bn,Kn),dt=Ure(We,(a=pe?.rect)!=null?a:null,Re),Ye=Nt.useRef(null),De=Nt.useCallback((it,en)=>{let{sensor:Dn,options:Mn}=en;if(Ve.current==null)return;const ii=ce.get(Ve.current);if(!ii)return;const Wn=it.nativeEvent,qi=new Dn({active:Ve.current,activeNode:ii,event:Wn,options:Mn,context:bt,onAbort(Ei){if(!ce.get(Ei))return;const{onDragAbort:ti}=nt.current,Wi={id:Ei};ti?.(Wi),J({type:"onDragAbort",event:Wi})},onPending(Ei,hi,ti,Wi){if(!ce.get(Ei))return;const{onDragPending:uo}=nt.current,Hi={id:Ei,constraint:hi,initialCoordinates:ti,offset:Wi};uo?.(Hi),J({type:"onDragPending",event:Hi})},onStart(Ei){const hi=Ve.current;if(hi==null)return;const ti=ce.get(hi);if(!ti)return;const{onDragStart:Wi}=nt.current,wn={activatorEvent:Wn,active:{id:hi,data:ti.data,rect:Oe}};zC.unstable_batchedUpdates(()=>{Wi?.(wn),$(yg.Initializing),te({type:_c.DragStart,initialCoordinates:Ei,active:hi}),J({type:"onDragStart",event:wn}),ze(Ye.current),Ct(Wn)})},onMove(Ei){te({type:_c.DragMove,coordinates:Ei})},onEnd:er(_c.DragEnd),onCancel:er(_c.DragCancel)});Ye.current=qi;function er(Ei){return async function(){const{active:ti,collisions:Wi,over:wn,scrollAdjustedTranslate:uo}=bt.current;let Hi=null;if(ti&&uo){const{cancelDrop:ma}=nt.current;Hi={activatorEvent:Wn,active:ti,collisions:Wi,delta:uo,over:wn},Ei===_c.DragEnd&&typeof ma=="function"&&await Promise.resolve(ma(Hi))&&(Ei=_c.DragCancel)}Ve.current=null,zC.unstable_batchedUpdates(()=>{te({type:Ei}),$(yg.Uninitialized),Te(null),ze(null),Ct(null),Ye.current=null;const ma=Ei===_c.DragEnd?"onDragEnd":"onDragCancel";if(Hi){const To=nt.current[ma];To?.(Hi),J({type:ma,event:Hi})}})}}},[ce]),Ze=Nt.useCallback((it,en)=>(Dn,Mn)=>{const ii=Dn.nativeEvent,Wn=ce.get(Mn);if(Ve.current!==null||!Wn||ii.dndKit||ii.defaultPrevented)return;const qi={active:Wn};it(Dn,en.options,qi)===!0&&(ii.dndKit={capturedBy:en.sensor},Ve.current=Mn,De(Dn,en))},[ce,De]),g=Aoe(w,Ze);yoe(w),t0(()=>{Re&&ne===yg.Initializing&&$(yg.Initialized)},[Re,ne]),Nt.useEffect(()=>{const{onDragMove:it}=nt.current,{active:en,activatorEvent:Dn,collisions:Mn,over:ii}=bt.current;if(!en||!Dn)return;const Wn={active:en,activatorEvent:Dn,collisions:Mn,delta:{x:je.x,y:je.y},over:ii};zC.unstable_batchedUpdates(()=>{it?.(Wn),J({type:"onDragMove",event:Wn})})},[je.x,je.y]),Nt.useEffect(()=>{const{active:it,activatorEvent:en,collisions:Dn,droppableContainers:Mn,scrollAdjustedTranslate:ii}=bt.current;if(!it||Ve.current==null||!en||!ii)return;const{onDragOver:Wn}=nt.current,qi=Mn.get(le),er=qi&&qi.rect.current?{id:qi.id,rect:qi.rect.current,data:qi.data,disabled:qi.disabled}:null,Ei={active:it,activatorEvent:en,collisions:Dn,delta:{x:ii.x,y:ii.y},over:er};zC.unstable_batchedUpdates(()=>{Te(er),Wn?.(Ei),J({type:"onDragOver",event:Ei})})},[le]),t0(()=>{bt.current={activatorEvent:st,active:Se,activeNode:St,collisionRect:de,collisions:re,droppableRects:lt,draggableNodes:ce,draggingNode:qt,draggingNodeRect:Kt,droppableContainers:ye,over:pe,scrollableAncestors:$n,scrollAdjustedTranslate:je},Oe.current={initial:Kt,translated:de}},[Se,St,re,de,ce,qt,Kt,lt,ye,pe,$n,je]),aoe({...Fe,delta:ge,draggingRect:de,pointerCoordinates:In,scrollableAncestors:$n,scrollableAncestorRects:On});const mt=Nt.useMemo(()=>({active:Se,activeNode:St,activeNodeRect:Re,activatorEvent:st,collisions:re,containerNodeRect:He,dragOverlay:Ot,draggableNodes:ce,droppableContainers:ye,droppableRects:lt,over:pe,measureDroppableContainers:kt,scrollableAncestors:$n,scrollableAncestorRects:On,measuringConfiguration:tt,measuringScheduled:gt,windowRect:Wt}),[Se,St,Re,st,re,He,Ot,ce,ye,lt,pe,kt,$n,On,tt,gt,Wt]),ht=Nt.useMemo(()=>({activatorEvent:st,activators:g,active:Se,activeNodeRect:Re,ariaDescribedById:{draggable:be},dispatch:te,draggableNodes:ce,over:pe,measureDroppableContainers:kt}),[st,g,Se,Re,te,be,ce,pe,kt]);return ni.createElement(lj.Provider,{value:oe},ni.createElement(O2.Provider,{value:ht},ni.createElement(Cj.Provider,{value:mt},ni.createElement(_j.Provider,{value:dt},C)),ni.createElement(Ooe,{disabled:o?.restoreFocus===!1})),ni.createElement(Ere,{...o,hiddenTextDescribedById:be}));function Tt(){const it=xe?.autoScrollEnabled===!1,en=typeof p=="object"?p.enabled===!1:p===!1,Dn=ae&&!it&&!en;return typeof p=="object"?{...p,enabled:Dn}:{enabled:Dn}}}),Roe=Nt.createContext(null),bT="button",Poe="Draggable";function Koe(n){let{id:e,data:t,disabled:i=!1,attributes:r}=n;const a=Mb(Poe),{activators:l,activatorEvent:o,active:p,activeNodeRect:C,ariaDescribedById:w,draggableNodes:O,over:U}=Nt.useContext(O2),{role:K=bT,roleDescription:j="draggable",tabIndex:W=0}=r??{},Y=p?.id===e,te=Nt.useContext(Y?_j:Roe),[J,oe]=p3(),[ne,$]=p3(),ae=voe(l,e),G=U_(t);t0(()=>(O.set(e,{id:e,key:a,node:J,activatorNode:ne,data:G}),()=>{const ge=O.get(e);ge&&ge.key===a&&O.delete(e)}),[O,e]);const ce=Nt.useMemo(()=>({role:K,tabIndex:W,"aria-disabled":i,"aria-pressed":Y&&K===bT?!0:void 0,"aria-roledescription":j,"aria-describedby":w.draggable}),[i,K,W,Y,j,w.draggable]);return{active:p,activatorEvent:o,activeNodeRect:C,attributes:ce,isDragging:Y,listeners:i?void 0:ae,node:J,over:U,setNodeRef:oe,setActivatorNodeRef:$,transform:te}}function Uoe(){return Nt.useContext(Cj)}const Loe="Droppable",Foe={timeout:25};function zoe(n){let{data:e,disabled:t=!1,id:i,resizeObserverConfig:r}=n;const a=Mb(Loe),{active:l,dispatch:o,over:p,measureDroppableContainers:C}=Nt.useContext(O2),w=Nt.useRef({disabled:t}),O=Nt.useRef(!1),U=Nt.useRef(null),K=Nt.useRef(null),{disabled:j,updateMeasurementsFor:W,timeout:Y}={...Foe,...r},te=U_(W??i),J=Nt.useCallback(()=>{if(!O.current){O.current=!0;return}K.current!=null&&clearTimeout(K.current),K.current=setTimeout(()=>{C(Array.isArray(te.current)?te.current:[te.current]),K.current=null},Y)},[Y]),oe=B2({callback:J,disabled:j||!l}),ne=Nt.useCallback((ce,ge)=>{oe&&(ge&&(oe.unobserve(ge),O.current=!1),ce&&oe.observe(ce))},[oe]),[$,ae]=p3(ne),G=U_(e);return Nt.useEffect(()=>{!oe||!$.current||(oe.disconnect(),O.current=!1,oe.observe($.current))},[$,oe]),Nt.useEffect(()=>(o({type:_c.RegisterDroppable,element:{id:i,key:a,disabled:t,node:$,rect:U,data:G}}),()=>o({type:_c.UnregisterDroppable,key:a,id:i})),[i]),Nt.useEffect(()=>{t!==w.current.disabled&&(o({type:_c.SetDroppableDisabled,id:i,key:a,disabled:t}),w.current.disabled=t)},[i,a,t,o]),{active:l,rect:U,isOver:p?.id===i,node:$,over:p,setNodeRef:ae}}function bj(n,e,t){const i=n.slice();return i.splice(t<0?i.length+t:t,0,i.splice(e,1)[0]),i}function joe(n,e){return n.reduce((t,i,r)=>{const a=e.get(i);return a&&(t[r]=a),t},Array(n.length))}function ix(n){return n!==null&&n>=0}function Noe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Goe(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const xj=n=>{let{rects:e,activeIndex:t,overIndex:i,index:r}=n;const a=bj(e,i,t),l=e[r],o=a[r];return!o||!l?null:{x:o.left-l.left,y:o.top-l.top,scaleX:o.width/l.width,scaleY:o.height/l.height}},rx={scaleX:1,scaleY:1},Woe=n=>{var e;let{activeIndex:t,activeNodeRect:i,index:r,rects:a,overIndex:l}=n;const o=(e=a[t])!=null?e:i;if(!o)return null;if(r===t){const C=a[l];return C?{x:0,y:t<l?C.top+C.height-(o.top+o.height):C.top-o.top,...rx}:null}const p=Qoe(a,r,t);return r>t&&r<=l?{x:0,y:-o.height-p,...rx}:r<t&&r>=l?{x:0,y:o.height+p,...rx}:{x:0,y:0,...rx}};function Qoe(n,e,t){const i=n[e],r=n[e-1],a=n[e+1];return i?t<e?r?i.top-(r.top+r.height):a?a.top-(i.top+i.height):0:a?a.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const Mj="Sortable",wj=ni.createContext({activeIndex:-1,containerId:Mj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:xj,disabled:{draggable:!1,droppable:!1}});function Yoe(n){let{children:e,id:t,items:i,strategy:r=xj,disabled:a=!1}=n;const{active:l,dragOverlay:o,droppableRects:p,over:C,measureDroppableContainers:w}=Uoe(),O=Mb(Mj,t),U=o.rect!==null,K=Nt.useMemo(()=>i.map(ae=>typeof ae=="object"&&"id"in ae?ae.id:ae),[i]),j=l!=null,W=l?K.indexOf(l.id):-1,Y=C?K.indexOf(C.id):-1,te=Nt.useRef(K),J=!Noe(K,te.current),oe=Y!==-1&&W===-1||J,ne=Goe(a);t0(()=>{J&&j&&w(K)},[J,K,j,w]),Nt.useEffect(()=>{te.current=K},[K]);const $=Nt.useMemo(()=>({activeIndex:W,containerId:O,disabled:ne,disableTransforms:oe,items:K,overIndex:Y,useDragOverlay:U,sortedRects:joe(K,p),strategy:r}),[W,O,ne.draggable,ne.droppable,oe,K,Y,p,U,r]);return ni.createElement(wj.Provider,{value:$},e)}const qoe=n=>{let{id:e,items:t,activeIndex:i,overIndex:r}=n;return bj(t,i,r).indexOf(e)},Hoe=n=>{let{containerId:e,isSorting:t,wasDragging:i,index:r,items:a,newIndex:l,previousItems:o,previousContainerId:p,transition:C}=n;return!C||!i||o!==a&&r===l?!1:t?!0:l!==r&&e===p},Voe={duration:200,easing:"ease"},Sj="transform",$oe=L_.Transition.toString({property:Sj,duration:0,easing:"linear"}),Zoe={roleDescription:"sortable"};function Xoe(n){let{disabled:e,index:t,node:i,rect:r}=n;const[a,l]=Nt.useState(null),o=Nt.useRef(t);return t0(()=>{if(!e&&t!==o.current&&i.current){const p=r.current;if(p){const C=eC(i.current,{ignoreTransform:!0}),w={x:p.left-C.left,y:p.top-C.top,scaleX:p.width/C.width,scaleY:p.height/C.height};(w.x||w.y)&&l(w)}}t!==o.current&&(o.current=t)},[e,t,i,r]),Nt.useEffect(()=>{a&&l(null)},[a]),a}function Joe(n){let{animateLayoutChanges:e=Hoe,attributes:t,disabled:i,data:r,getNewIndex:a=qoe,id:l,strategy:o,resizeObserverConfig:p,transition:C=Voe}=n;const{items:w,containerId:O,activeIndex:U,disabled:K,disableTransforms:j,sortedRects:W,overIndex:Y,useDragOverlay:te,strategy:J}=Nt.useContext(wj),oe=eae(i,K),ne=w.indexOf(l),$=Nt.useMemo(()=>({sortable:{containerId:O,index:ne,items:w},...r}),[O,r,ne,w]),ae=Nt.useMemo(()=>w.slice(w.indexOf(l)),[w,l]),{rect:G,node:ce,isOver:ge,setNodeRef:ye}=zoe({id:l,data:$,disabled:oe.droppable,resizeObserverConfig:{updateMeasurementsFor:ae,...p}}),{active:we,activatorEvent:Oe,activeNodeRect:Se,attributes:Ve,setNodeRef:xe,listeners:ze,isDragging:st,over:Ct,setActivatorNodeRef:nt,transform:be}=Koe({id:l,data:$,attributes:{...Zoe,...t},disabled:oe.draggable}),Ne=fre(ye,xe),tt=!!we,lt=tt&&!j&&ix(U)&&ix(Y),kt=!te&&st,gt=kt&&lt?be:null,Ut=lt?gt??(o??J)({rects:W,activeNodeRect:Se,activeIndex:U,overIndex:Y,index:ne}):null,Fe=ix(U)&&ix(Y)?a({id:l,items:w,activeIndex:U,overIndex:Y}):ne,Ke=we?.id,Re=Nt.useRef({activeId:Ke,items:w,newIndex:Fe,containerId:O}),He=w!==Re.current.items,bt=e({active:we,containerId:O,isDragging:st,isSorting:tt,id:l,index:ne,items:w,newIndex:Re.current.newIndex,previousItems:Re.current.items,previousContainerId:Re.current.containerId,transition:C,wasDragging:Re.current.activeId!=null}),_t=Xoe({disabled:!bt,index:ne,node:ce,rect:G});return Nt.useEffect(()=>{tt&&Re.current.newIndex!==Fe&&(Re.current.newIndex=Fe),O!==Re.current.containerId&&(Re.current.containerId=O),w!==Re.current.items&&(Re.current.items=w)},[tt,Fe,O,w]),Nt.useEffect(()=>{if(Ke===Re.current.activeId)return;if(Ke!=null&&Re.current.activeId==null){Re.current.activeId=Ke;return}const qt=setTimeout(()=>{Re.current.activeId=Ke},50);return()=>clearTimeout(qt)},[Ke]),{active:we,activeIndex:U,attributes:Ve,data:$,rect:G,index:ne,newIndex:Fe,items:w,isOver:ge,isSorting:tt,isDragging:st,listeners:ze,node:ce,overIndex:Y,over:Ct,setNodeRef:Ne,setActivatorNodeRef:nt,setDroppableNodeRef:ye,setDraggableNodeRef:xe,transform:_t??Ut,transition:Ot()};function Ot(){if(_t||He&&Re.current.newIndex===ne)return $oe;if(!(kt&&!a8(Oe)||!C)&&(tt||bt))return L_.Transition.toString({...C,property:Sj})}}function eae(n,e){var t,i;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(i=n?.droppable)!=null?i:e.droppable}}Ks.Down,Ks.Right,Ks.Up,Ks.Left;function S1(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return S1=function(){return l},l}S1();class tae extends ni.Component{render(){S1().f[0]++;const e=(S1().s[0]++,{width:20,height:20,...this.props.style});return S1().s[1]++,this.props.isCollapsed?(S1().b[0][0]++,Ae.jsx(rF,{style:e})):(S1().b[0][1]++,Ae.jsx(iF,{style:e}))}}function hv(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return hv=function(){return l},l}hv();class nae extends ni.Component{render(){return hv().f[0]++,hv().s[0]++,Ae.jsx("li",{className:"maputnik-layer-list-group",children:Ae.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(hv().f[1]++,hv().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[Ae.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx(tae,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function yr(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="65a9cb0d1a08cfab21a14c1632991e31e3063aa8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:9,column:23},end:{line:22,column:1}},1:{start:{line:10,column:44},end:{line:10,column:49}},2:{start:{line:11,column:2},end:{line:21,column:7}},3:{start:{line:25,column:4},end:{line:34,column:5}},4:{start:{line:27,column:8},end:{line:27,column:54}},5:{start:{line:29,column:8},end:{line:29,column:53}},6:{start:{line:31,column:8},end:{line:31,column:56}},7:{start:{line:33,column:8},end:{line:33,column:49}},8:{start:{line:37,column:51},end:{line:37,column:61}},9:{start:{line:38,column:25},end:{line:38,column:27}},10:{start:{line:39,column:4},end:{line:44,column:5}},11:{start:{line:40,column:6},end:{line:40,column:76}},12:{start:{line:41,column:6},end:{line:43,column:7}},13:{start:{line:42,column:8},end:{line:42,column:103}},14:{start:{line:45,column:4},end:{line:56,column:6}},15:{start:{line:59,column:22},end:{line:145,column:2}},16:{start:{line:69,column:6},end:{line:69,column:11}},17:{start:{line:77,column:6},end:{line:77,column:40}},18:{start:{line:78,column:16},end:{line:82,column:3}},19:{start:{line:83,column:27},end:{line:83,column:69}},20:{start:{line:84,column:20},end:{line:84,column:23}},21:{start:{line:85,column:2},end:{line:144,column:7}},22:{start:{line:89,column:8},end:{line:89,column:25}},23:{start:{line:90,column:8},end:{line:92,column:9}},24:{start:{line:91,column:10},end:{line:91,column:35}},25:{start:{line:96,column:23},end:{line:96,column:60}},26:{start:{line:120,column:29},end:{line:120,column:61}},27:{start:{line:129,column:29},end:{line:129,column:58}},28:{start:{line:139,column:29},end:{line:139,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:23},end:{line:9,column:24}},loc:{start:{line:9,column:34},end:{line:22,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:35,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:57,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:59,column:39},end:{line:59,column:40}},loc:{start:{line:59,column:55},end:{line:145,column:1}},line:59},4:{name:"(anonymous_4)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:24},end:{line:64,column:5}},line:63},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:27},end:{line:66,column:5}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:67,column:30},end:{line:67,column:31}},loc:{start:{line:67,column:36},end:{line:68,column:5}},line:67},7:{name:"(anonymous_7)",decl:{start:{line:88,column:11},end:{line:88,column:12}},loc:{start:{line:88,column:21},end:{line:93,column:7}},line:88},8:{name:"(anonymous_8)",decl:{start:{line:96,column:15},end:{line:96,column:16}},loc:{start:{line:96,column:23},end:{line:96,column:60}},line:96},9:{name:"(anonymous_9)",decl:{start:{line:120,column:21},end:{line:120,column:22}},loc:{start:{line:120,column:29},end:{line:120,column:61}},line:120},10:{name:"(anonymous_10)",decl:{start:{line:129,column:21},end:{line:129,column:22}},loc:{start:{line:129,column:29},end:{line:129,column:58}},line:129},11:{name:"(anonymous_11)",decl:{start:{line:139,column:21},end:{line:139,column:22}},loc:{start:{line:139,column:29},end:{line:139,column:70}},line:139}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:34,column:5}},type:"switch",locations:[{start:{line:26,column:6},end:{line:27,column:54}},{start:{line:28,column:6},end:{line:29,column:53}},{start:{line:30,column:6},end:{line:31,column:56}},{start:{line:32,column:6},end:{line:33,column:49}}],line:25},1:{loc:{start:{line:39,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:41,column:6},end:{line:43,column:7}},type:"if",locations:[{start:{line:41,column:6},end:{line:43,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:61,column:4},end:{line:61,column:22}},type:"default-arg",locations:[{start:{line:61,column:17},end:{line:61,column:22}}],line:61},4:{loc:{start:{line:62,column:4},end:{line:62,column:26}},type:"default-arg",locations:[{start:{line:62,column:17},end:{line:62,column:26}}],line:62},5:{loc:{start:{line:63,column:4},end:{line:64,column:5}},type:"default-arg",locations:[{start:{line:63,column:18},end:{line:64,column:5}}],line:63},6:{loc:{start:{line:65,column:4},end:{line:66,column:5}},type:"default-arg",locations:[{start:{line:65,column:21},end:{line:66,column:5}}],line:65},7:{loc:{start:{line:67,column:4},end:{line:68,column:5}},type:"default-arg",locations:[{start:{line:67,column:30},end:{line:68,column:5}}],line:67},8:{loc:{start:{line:81,column:13},end:{line:81,column:33}},type:"cond-expr",locations:[{start:{line:81,column:26},end:{line:81,column:29}},{start:{line:81,column:32},end:{line:81,column:33}}],line:81},9:{loc:{start:{line:83,column:27},end:{line:83,column:69}},type:"cond-expr",locations:[{start:{line:83,column:54},end:{line:83,column:60}},{start:{line:83,column:63},end:{line:83,column:69}}],line:83},10:{loc:{start:{line:90,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:90,column:8},end:{line:92,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0],4:[0],5:[0],6:[0],7:[0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAmBS,SACL,KADK;AAnBT,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AACrE,SAAS,mBAAmB;AAC5B,SAAQ,mBAAkB;AAC1B,SAAQ,WAAU;AAElB,OAAO,eAAe;AAUtB,MAAM,iBAAgD,CAAC,UAAU;AAC/D,QAAM,EAAC,gBAAgB,cAAa,IAAI;AACxC,SAAO,qBAAC,SAAI,WAAU,mCAAmC,GAAG,gBAAiB,GAAG,eAC9E;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA,QACZ,OAAO,EAAE,OAAO,OAAO,QAAQ,OAAO,eAAe,SAAS;AAAA;AAAA,IAChE;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF;AAUA,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MACxB,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,gBAAgB,MAAM,WAA8C,CAAC,OAAO,QAAQ;AACxF,QAAM;AAAA,IACJ,aAAa;AAAA,IACb,aAAa;AAAA,IACb,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,0BAA0B,MAAM;AAAA,IAAC;AAAA,EACnC,IAAI;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY,EAAC,IAAI,MAAM,QAAO,CAAC;AAEnC,QAAM,QAAQ;AAAA,IACZ,WAAW,IAAI,UAAU,SAAS,SAAS;AAAA,IAC3C;AAAA,IACA,SAAS,aAAa,MAAM;AAAA,EAC9B;AAEA,QAAM,mBAAmB,eAAe,YAAY,SAAS;AAG7D,QAAM,YAAY;AAElB,SAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,CAAC,SAAS;AACb,mBAAW,IAAI;AACf,YAAI,WAAW;AACb,oBAAU,UAAU;AAAA,QACtB;AAAA,MACF;AAAA,MACA;AAAA,MACA,IAAI,MAAM;AAAA,MACV,SAAS,QAAM,MAAM,cAAc,MAAM,UAAU;AAAA,MACnD,eAAa,qBAAqB,MAAM;AAAA,MACxC,WAAW,WAAW;AAAA,QACpB,4BAA4B;AAAA,QAC5B,qCAAqC;AAAA,QACrC,CAAC,MAAM,SAAU,GAAG;AAAA,MACtB,CAAC;AAAA,MACD;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,MAAM;AAAA,YACf,WAAW,MAAM;AAAA,YACjB,gBAAgB;AAAA,YAChB,eAAe;AAAA;AAAA,QACjB;AAAA,QACA,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,QAC5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,eAAgB,MAAM,UAAU;AAAA;AAAA,QACjD;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAqB,MAAM,UAAQ;AAAA,YAC1C,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,SAAS,QAAM,YAAa,MAAM,UAAU;AAAA;AAAA,QAC9C;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,qBAAmB,MAAM,UAAQ;AAAA,YACxC,QAAQ;AAAA,YACR,gBAAe;AAAA,YACf,oBAAoB;AAAA,YACpB,SAAS,QAAM,wBAAyB,MAAM,UAAU;AAAA;AAAA,QAC1D;AAAA;AAAA;AAAA,EACF,GACF;AACF,CAAC;AAED,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"65a9cb0d1a08cfab21a14c1632991e31e3063aa8"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return yr=function(){return l},l}yr();yr().s[0]++;const iae=n=>{yr().f[0]++;const{dragAttributes:e,dragListeners:t}=(yr().s[1]++,n);return yr().s[2]++,Ae.jsxs("div",{className:"maputnik-layer-list-item-handle",...e,...t,children:[Ae.jsx(oF,{className:"layer-handle__icon",type:n.layerType,style:{width:"1em",height:"1em",verticalAlign:"middle"}}),Ae.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]})};class b5 extends ni.Component{renderIcon(){switch(yr().f[1]++,yr().s[3]++,this.props.action){case"duplicate":return yr().b[0][0]++,yr().s[4]++,Ae.jsx(j$,{});case"show":return yr().b[0][1]++,yr().s[5]++,Ae.jsx(z$,{});case"hide":return yr().b[0][2]++,yr().s[6]++,Ae.jsx(F$,{});case"delete":return yr().b[0][3]++,yr().s[7]++,Ae.jsx(Yv,{})}}render(){yr().f[2]++;const{classBlockName:e,classBlockModifier:t}=(yr().s[8]++,this.props);let i=(yr().s[9]++,"");return yr().s[10]++,e?(yr().b[1][0]++,yr().s[11]++,i=`maputnik-layer-list-icon-action__${e}`,yr().s[12]++,t?(yr().b[2][0]++,yr().s[13]++,i+=` maputnik-layer-list-icon-action__${e}--${t}`):yr().b[2][1]++):yr().b[1][1]++,yr().s[14]++,Ae.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${i}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}const rae=(yr().s[15]++,ni.forwardRef((n,e)=>{yr().f[3]++;const{isSelected:t=(yr().b[3][0]++,!1),visibility:i=(yr().b[4][0]++,"visible"),onLayerCopy:r=(yr().b[5][0]++,()=>{yr().f[4]++}),onLayerDestroy:a=(yr().b[6][0]++,()=>{yr().f[5]++}),onLayerVisibilityToggle:l=(yr().b[7][0]++,()=>{yr().f[6]++})}=(yr().s[16]++,n),{attributes:o,listeners:p,setNodeRef:C,transform:w,transition:O,isDragging:U}=(yr().s[17]++,Joe({id:n.layerId})),K=(yr().s[18]++,{transform:L_.Transform.toString(w),transition:O,opacity:U?(yr().b[8][0]++,.5):(yr().b[8][1]++,1)}),j=(yr().s[19]++,i==="visible"?(yr().b[9][0]++,"show"):(yr().b[9][1]++,"hide")),W=(yr().s[20]++,e);return yr().s[21]++,Ae.jsx(Sv.Provider,{value:{size:"14px"},children:Ae.jsxs("li",{ref:Y=>{yr().f[7]++,yr().s[22]++,C(Y),yr().s[23]++,W?(yr().b[10][0]++,yr().s[24]++,W.current=Y):yr().b[10][1]++},style:K,id:n.id,onClick:Y=>(yr().f[8]++,yr().s[25]++,n.onLayerSelect(n.layerIndex)),"data-wd-key":"layer-list-item:"+n.layerId,className:e0({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":t,[n.className]:!0}),children:[Ae.jsx(iae,{layerId:n.layerId,layerType:n.layerType,dragAttributes:o,dragListeners:p}),Ae.jsx("span",{style:{flexGrow:1}}),Ae.jsx(b5,{wdKey:"layer-list-item:"+n.layerId+":delete",action:"delete",classBlockName:"delete",onClick:Y=>(yr().f[9]++,yr().s[26]++,a(n.layerIndex))}),Ae.jsx(b5,{wdKey:"layer-list-item:"+n.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:Y=>(yr().f[10]++,yr().s[27]++,r(n.layerIndex))}),Ae.jsx(b5,{wdKey:"layer-list-item:"+n.layerId+":toggle-visibility",action:j,classBlockName:"visibility",classBlockModifier:j,onClick:Y=>(yr().f[11]++,yr().s[28]++,l(n.layerIndex))})]})})}));function v3(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return v3=function(){return l},l}v3();class nl extends ni.Component{render(){return v3().f[0]++,v3().s[0]++,Ae.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:e0("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}var x5={exports:{}},M5,xT;function oae(){if(xT)return M5;xT=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return M5=n,M5}var w5,MT;function aae(){if(MT)return w5;MT=1;var n=oae();function e(){}function t(){}return t.resetWarningCache=e,w5=function(){function i(l,o,p,C,w,O){if(O!==n){var U=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw U.name="Invariant Violation",U}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},w5}var wT;function G0(){return wT||(wT=1,x5.exports=aae()()),x5.exports}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Ej=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],C3=Ej.join(","),Bj=typeof Element>"u",V1=Bj?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,_3=!Bj&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},b3=function n(e,t){var i;t===void 0&&(t=!0);var r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),a=r===""||r==="true",l=a||t&&e&&n(e.parentNode);return l},sae=function(e){var t,i=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return i===""||i==="true"},Oj=function(e,t,i){if(b3(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(C3));return t&&V1.call(e,C3)&&r.unshift(e),r=r.filter(i),r},Ij=function n(e,t,i){for(var r=[],a=Array.from(e);a.length;){var l=a.shift();if(!b3(l,!1))if(l.tagName==="SLOT"){var o=l.assignedElements(),p=o.length?o:l.children,C=n(p,!0,i);i.flatten?r.push.apply(r,C):r.push({scopeParent:l,candidates:C})}else{var w=V1.call(l,C3);w&&i.filter(l)&&(t||!e.includes(l))&&r.push(l);var O=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),U=!b3(O,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(l));if(O&&U){var K=n(O===!0?l.children:O.children,!0,i);i.flatten?r.push.apply(r,K):r.push({scopeParent:l,candidates:K})}else a.unshift.apply(a,l.children)}}return r},Tj=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},vg=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||sae(e))&&!Tj(e)?0:e.tabIndex},lae=function(e,t){var i=vg(e);return i<0&&t&&!Tj(e)?0:i},uae=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},kj=function(e){return e.tagName==="INPUT"},Aae=function(e){return kj(e)&&e.type==="hidden"},cae=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return t},hae=function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i]},dae=function(e){if(!e.name)return!0;var t=e.form||_3(e),i=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=hae(r,e.form);return!a||a===e},fae=function(e){return kj(e)&&e.type==="radio"},pae=function(e){return fae(e)&&!dae(e)},mae=function(e){var t,i=e&&_3(e),r=(t=i)===null||t===void 0?void 0:t.host,a=!1;if(i&&i!==e){var l,o,p;for(a=!!((l=r)!==null&&l!==void 0&&(o=l.ownerDocument)!==null&&o!==void 0&&o.contains(r)||e!=null&&(p=e.ownerDocument)!==null&&p!==void 0&&p.contains(e));!a&&r;){var C,w,O;i=_3(r),r=(C=i)===null||C===void 0?void 0:C.host,a=!!((w=r)!==null&&w!==void 0&&(O=w.ownerDocument)!==null&&O!==void 0&&O.contains(r))}}return a},ST=function(e){var t=e.getBoundingClientRect(),i=t.width,r=t.height;return i===0&&r===0},gae=function(e,t){var i=t.displayCheck,r=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=V1.call(e,"details>summary:first-of-type"),l=a?e.parentElement:e;if(V1.call(l,"details:not([open]) *"))return!0;if(!i||i==="full"||i==="legacy-full"){if(typeof r=="function"){for(var o=e;e;){var p=e.parentElement,C=_3(e);if(p&&!p.shadowRoot&&r(p)===!0)return ST(e);e.assignedSlot?e=e.assignedSlot:!p&&C!==e.ownerDocument?e=C.host:e=p}e=o}if(mae(e))return!e.getClientRects().length;if(i!=="legacy-full")return!0}else if(i==="non-zero-area")return ST(e);return!1},yae=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var i=0;i<t.children.length;i++){var r=t.children.item(i);if(r.tagName==="LEGEND")return V1.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},x3=function(e,t){return!(t.disabled||b3(t)||Aae(t)||gae(t,e)||cae(t)||yae(t))},fB=function(e,t){return!(pae(t)||vg(t)<0||!x3(e,t))},vae=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Cae=function n(e){var t=[],i=[];return e.forEach(function(r,a){var l=!!r.scopeParent,o=l?r.scopeParent:r,p=lae(o,l),C=l?n(r.candidates):o;p===0?l?t.push.apply(t,C):t.push(o):i.push({documentOrder:a,tabIndex:p,item:r,isScope:l,content:C})}),i.sort(uae).reduce(function(r,a){return a.isScope?r.push.apply(r,a.content):r.push(a.content),r},[]).concat(t)},Dj=function(e,t){t=t||{};var i;return t.getShadowRoot?i=Ij([e],t.includeContainer,{filter:fB.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:vae}):i=Oj(e,t.includeContainer,fB.bind(null,t)),Cae(i)},Rj=function(e,t){t=t||{};var i;return t.getShadowRoot?i=Ij([e],t.includeContainer,{filter:x3.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):i=Oj(e,t.includeContainer,x3.bind(null,t)),i},x1=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return V1.call(e,C3)===!1?!1:fB(t,e)},_ae=Ej.concat("iframe").join(","),Bx=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return V1.call(e,_ae)===!1?!1:x3(t,e)};const bae=Object.freeze(Object.defineProperty({__proto__:null,focusable:Rj,getTabIndex:vg,isFocusable:Bx,isTabbable:x1,tabbable:Dj},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ET(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function BT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ET(Object(t),!0).forEach(function(i){xae(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ET(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function xae(n,e,t){return e=wae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mae(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function wae(n){var e=Mae(n,"string");return typeof e=="symbol"?e:String(e)}var OT={activateTrap:function(e,t){if(e.length>0){var i=e[e.length-1];i!==t&&i.pause()}var r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&e[e.length-1].unpause()}},Sae=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Eae=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},s_=function(e){return e?.key==="Tab"||e?.keyCode===9},Bae=function(e){return s_(e)&&!e.shiftKey},Oae=function(e){return s_(e)&&e.shiftKey},IT=function(e){return setTimeout(e,0)},TT=function(e,t){var i=-1;return e.every(function(r,a){return t(r)?(i=a,!1):!0}),i},wC=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},ox=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Iae=[],Tae=function(e,t){var i=t?.document||document,r=t?.trapStack||Iae,a=BT({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Bae,isKeyBackward:Oae},t),l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,p=function(Oe,Se,Ve){return Oe&&Oe[Se]!==void 0?Oe[Se]:a[Ve||Se]},C=function(Oe,Se){var Ve=typeof Se?.composedPath=="function"?Se.composedPath():void 0;return l.containerGroups.findIndex(function(xe){var ze=xe.container,st=xe.tabbableNodes;return ze.contains(Oe)||Ve?.includes(ze)||st.find(function(Ct){return Ct===Oe})})},w=function(Oe){var Se=a[Oe];if(typeof Se=="function"){for(var Ve=arguments.length,xe=new Array(Ve>1?Ve-1:0),ze=1;ze<Ve;ze++)xe[ze-1]=arguments[ze];Se=Se.apply(void 0,xe)}if(Se===!0&&(Se=void 0),!Se){if(Se===void 0||Se===!1)return Se;throw new Error("`".concat(Oe,"` was specified but was not a node, or did not return a node"))}var st=Se;if(typeof Se=="string"&&(st=i.querySelector(Se),!st))throw new Error("`".concat(Oe,"` as selector refers to no known node"));return st},O=function(){var Oe=w("initialFocus");if(Oe===!1)return!1;if(Oe===void 0||!Bx(Oe,a.tabbableOptions))if(C(i.activeElement)>=0)Oe=i.activeElement;else{var Se=l.tabbableGroups[0],Ve=Se&&Se.firstTabbableNode;Oe=Ve||w("fallbackFocus")}if(!Oe)throw new Error("Your focus-trap needs to have at least one focusable element");return Oe},U=function(){if(l.containerGroups=l.containers.map(function(Oe){var Se=Dj(Oe,a.tabbableOptions),Ve=Rj(Oe,a.tabbableOptions),xe=Se.length>0?Se[0]:void 0,ze=Se.length>0?Se[Se.length-1]:void 0,st=Ve.find(function(be){return x1(be)}),Ct=Ve.slice().reverse().find(function(be){return x1(be)}),nt=!!Se.find(function(be){return vg(be)>0});return{container:Oe,tabbableNodes:Se,focusableNodes:Ve,posTabIndexesFound:nt,firstTabbableNode:xe,lastTabbableNode:ze,firstDomTabbableNode:st,lastDomTabbableNode:Ct,nextTabbableNode:function(Ne){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,lt=Se.indexOf(Ne);return lt<0?tt?Ve.slice(Ve.indexOf(Ne)+1).find(function(kt){return x1(kt)}):Ve.slice(0,Ve.indexOf(Ne)).reverse().find(function(kt){return x1(kt)}):Se[lt+(tt?1:-1)]}}}),l.tabbableGroups=l.containerGroups.filter(function(Oe){return Oe.tabbableNodes.length>0}),l.tabbableGroups.length<=0&&!w("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(l.containerGroups.find(function(Oe){return Oe.posTabIndexesFound})&&l.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},K=function we(Oe){var Se=Oe.activeElement;if(Se)return Se.shadowRoot&&Se.shadowRoot.activeElement!==null?we(Se.shadowRoot):Se},j=function we(Oe){if(Oe!==!1&&Oe!==K(document)){if(!Oe||!Oe.focus){we(O());return}Oe.focus({preventScroll:!!a.preventScroll}),l.mostRecentlyFocusedNode=Oe,Sae(Oe)&&Oe.select()}},W=function(Oe){var Se=w("setReturnFocus",Oe);return Se||(Se===!1?!1:Oe)},Y=function(Oe){var Se=Oe.target,Ve=Oe.event,xe=Oe.isBackward,ze=xe===void 0?!1:xe;Se=Se||ox(Ve),U();var st=null;if(l.tabbableGroups.length>0){var Ct=C(Se,Ve),nt=Ct>=0?l.containerGroups[Ct]:void 0;if(Ct<0)ze?st=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode:st=l.tabbableGroups[0].firstTabbableNode;else if(ze){var be=TT(l.tabbableGroups,function(St){var Ut=St.firstTabbableNode;return Se===Ut});if(be<0&&(nt.container===Se||Bx(Se,a.tabbableOptions)&&!x1(Se,a.tabbableOptions)&&!nt.nextTabbableNode(Se,!1))&&(be=Ct),be>=0){var Ne=be===0?l.tabbableGroups.length-1:be-1,tt=l.tabbableGroups[Ne];st=vg(Se)>=0?tt.lastTabbableNode:tt.lastDomTabbableNode}else s_(Ve)||(st=nt.nextTabbableNode(Se,!1))}else{var lt=TT(l.tabbableGroups,function(St){var Ut=St.lastTabbableNode;return Se===Ut});if(lt<0&&(nt.container===Se||Bx(Se,a.tabbableOptions)&&!x1(Se,a.tabbableOptions)&&!nt.nextTabbableNode(Se))&&(lt=Ct),lt>=0){var kt=lt===l.tabbableGroups.length-1?0:lt+1,gt=l.tabbableGroups[kt];st=vg(Se)>=0?gt.firstTabbableNode:gt.firstDomTabbableNode}else s_(Ve)||(st=nt.nextTabbableNode(Se))}}else st=w("fallbackFocus");return st},te=function(Oe){var Se=ox(Oe);if(!(C(Se,Oe)>=0)){if(wC(a.clickOutsideDeactivates,Oe)){o.deactivate({returnFocus:a.returnFocusOnDeactivate});return}wC(a.allowOutsideClick,Oe)||Oe.preventDefault()}},J=function(Oe){var Se=ox(Oe),Ve=C(Se,Oe)>=0;if(Ve||Se instanceof Document)Ve&&(l.mostRecentlyFocusedNode=Se);else{Oe.stopImmediatePropagation();var xe,ze=!0;if(l.mostRecentlyFocusedNode)if(vg(l.mostRecentlyFocusedNode)>0){var st=C(l.mostRecentlyFocusedNode),Ct=l.containerGroups[st].tabbableNodes;if(Ct.length>0){var nt=Ct.findIndex(function(be){return be===l.mostRecentlyFocusedNode});nt>=0&&(a.isKeyForward(l.recentNavEvent)?nt+1<Ct.length&&(xe=Ct[nt+1],ze=!1):nt-1>=0&&(xe=Ct[nt-1],ze=!1))}}else l.containerGroups.some(function(be){return be.tabbableNodes.some(function(Ne){return vg(Ne)>0})})||(ze=!1);else ze=!1;ze&&(xe=Y({target:l.mostRecentlyFocusedNode,isBackward:a.isKeyBackward(l.recentNavEvent)})),j(xe||l.mostRecentlyFocusedNode||O())}l.recentNavEvent=void 0},oe=function(Oe){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;l.recentNavEvent=Oe;var Ve=Y({event:Oe,isBackward:Se});Ve&&(s_(Oe)&&Oe.preventDefault(),j(Ve))},ne=function(Oe){if(Eae(Oe)&&wC(a.escapeDeactivates,Oe)!==!1){Oe.preventDefault(),o.deactivate();return}(a.isKeyForward(Oe)||a.isKeyBackward(Oe))&&oe(Oe,a.isKeyBackward(Oe))},$=function(Oe){var Se=ox(Oe);C(Se,Oe)>=0||wC(a.clickOutsideDeactivates,Oe)||wC(a.allowOutsideClick,Oe)||(Oe.preventDefault(),Oe.stopImmediatePropagation())},ae=function(){if(l.active)return OT.activateTrap(r,o),l.delayInitialFocusTimer=a.delayInitialFocus?IT(function(){j(O())}):j(O()),i.addEventListener("focusin",J,!0),i.addEventListener("mousedown",te,{capture:!0,passive:!1}),i.addEventListener("touchstart",te,{capture:!0,passive:!1}),i.addEventListener("click",$,{capture:!0,passive:!1}),i.addEventListener("keydown",ne,{capture:!0,passive:!1}),o},G=function(){if(l.active)return i.removeEventListener("focusin",J,!0),i.removeEventListener("mousedown",te,!0),i.removeEventListener("touchstart",te,!0),i.removeEventListener("click",$,!0),i.removeEventListener("keydown",ne,!0),o},ce=function(Oe){var Se=Oe.some(function(Ve){var xe=Array.from(Ve.removedNodes);return xe.some(function(ze){return ze===l.mostRecentlyFocusedNode})});Se&&j(O())},ge=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ce):void 0,ye=function(){ge&&(ge.disconnect(),l.active&&!l.paused&&l.containers.map(function(Oe){ge.observe(Oe,{subtree:!0,childList:!0})}))};return o={get active(){return l.active},get paused(){return l.paused},activate:function(Oe){if(l.active)return this;var Se=p(Oe,"onActivate"),Ve=p(Oe,"onPostActivate"),xe=p(Oe,"checkCanFocusTrap");xe||U(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=i.activeElement,Se?.();var ze=function(){xe&&U(),ae(),ye(),Ve?.()};return xe?(xe(l.containers.concat()).then(ze,ze),this):(ze(),this)},deactivate:function(Oe){if(!l.active)return this;var Se=BT({onDeactivate:a.onDeactivate,onPostDeactivate:a.onPostDeactivate,checkCanReturnFocus:a.checkCanReturnFocus},Oe);clearTimeout(l.delayInitialFocusTimer),l.delayInitialFocusTimer=void 0,G(),l.active=!1,l.paused=!1,ye(),OT.deactivateTrap(r,o);var Ve=p(Se,"onDeactivate"),xe=p(Se,"onPostDeactivate"),ze=p(Se,"checkCanReturnFocus"),st=p(Se,"returnFocus","returnFocusOnDeactivate");Ve?.();var Ct=function(){IT(function(){st&&j(W(l.nodeFocusedBeforeActivation)),xe?.()})};return st&&ze?(ze(W(l.nodeFocusedBeforeActivation)).then(Ct,Ct),this):(Ct(),this)},pause:function(Oe){if(l.paused||!l.active)return this;var Se=p(Oe,"onPause"),Ve=p(Oe,"onPostPause");return l.paused=!0,Se?.(),G(),ye(),Ve?.(),this},unpause:function(Oe){if(!l.paused||!l.active)return this;var Se=p(Oe,"onUnpause"),Ve=p(Oe,"onPostUnpause");return l.paused=!1,Se?.(),U(),ae(),ye(),Ve?.(),this},updateContainerElements:function(Oe){var Se=[].concat(Oe).filter(Boolean);return l.containers=Se.map(function(Ve){return typeof Ve=="string"?i.querySelector(Ve):Ve}),l.active&&U(),ye(),this}},o.updateContainerElements(e),o};const kae=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Tae},Symbol.toStringTag,{value:"Module"})),Dae=SB(kae),Rae=SB(bae);var S5,kT;function Pae(){if(kT)return S5;kT=1;function n(ae){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},n(ae)}function e(ae,G){if(!(ae instanceof G))throw new TypeError("Cannot call a class as a function")}function t(ae,G){for(var ce=0;ce<G.length;ce++){var ge=G[ce];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(ae,U(ge.key),ge)}}function i(ae,G,ce){return G&&t(ae.prototype,G),Object.defineProperty(ae,"prototype",{writable:!1}),ae}function r(ae,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");ae.prototype=Object.create(G&&G.prototype,{constructor:{value:ae,writable:!0,configurable:!0}}),Object.defineProperty(ae,"prototype",{writable:!1}),G&&a(ae,G)}function a(ae,G){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ge,ye){return ge.__proto__=ye,ge},a(ae,G)}function l(ae){var G=C();return function(){var ge=w(ae),ye;if(G){var we=w(this).constructor;ye=Reflect.construct(ge,arguments,we)}else ye=ge.apply(this,arguments);return o(this,ye)}}function o(ae,G){if(G&&(n(G)==="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(ae)}function p(ae){if(ae===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(ae){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ce){return ce.__proto__||Object.getPrototypeOf(ce)},w(ae)}function O(ae,G,ce){return G=U(G),G in ae?Object.defineProperty(ae,G,{value:ce,enumerable:!0,configurable:!0,writable:!0}):ae[G]=ce,ae}function U(ae){var G=K(ae,"string");return n(G)==="symbol"?G:String(G)}function K(ae,G){if(n(ae)!=="object"||ae===null)return ae;var ce=ae[Symbol.toPrimitive];if(ce!==void 0){var ge=ce.call(ae,G);if(n(ge)!=="object")return ge;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(ae)}var j=Ol(),W=G0(),Y=Dae,te=Y.createFocusTrap,J=Rae,oe=J.isFocusable,ne=function(ae){r(ce,ae);var G=l(ce);function ce(ge){var ye;e(this,ce),ye=G.call(this,ge),O(p(ye),"getNodeForOption",function(Se){var Ve,xe=(Ve=this.internalOptions[Se])!==null&&Ve!==void 0?Ve:this.originalOptions[Se];if(typeof xe=="function"){for(var ze=arguments.length,st=new Array(ze>1?ze-1:0),Ct=1;Ct<ze;Ct++)st[Ct-1]=arguments[Ct];xe=xe.apply(void 0,st)}if(xe===!0&&(xe=void 0),!xe){if(xe===void 0||xe===!1)return xe;throw new Error("`".concat(Se,"` was specified but was not a node, or did not return a node"))}var nt=xe;if(typeof xe=="string"){var be;if(nt=(be=this.getDocument())===null||be===void 0?void 0:be.querySelector(xe),!nt)throw new Error("`".concat(Se,"` as selector refers to no known node"))}return nt}),ye.handleDeactivate=ye.handleDeactivate.bind(p(ye)),ye.handlePostDeactivate=ye.handlePostDeactivate.bind(p(ye)),ye.handleClickOutsideDeactivates=ye.handleClickOutsideDeactivates.bind(p(ye)),ye.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ye.handleDeactivate,onPostDeactivate:ye.handlePostDeactivate,clickOutsideDeactivates:ye.handleClickOutsideDeactivates},ye.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var we=ge.focusTrapOptions;for(var Oe in we)if(Object.prototype.hasOwnProperty.call(we,Oe)){if(Oe==="returnFocusOnDeactivate"||Oe==="onDeactivate"||Oe==="onPostDeactivate"||Oe==="checkCanReturnFocus"||Oe==="clickOutsideDeactivates"){ye.originalOptions[Oe]=we[Oe];continue}ye.internalOptions[Oe]=we[Oe]}return ye.outsideClick=null,ye.focusTrapElements=ge.containerElements||[],ye.updatePreviousElement(),ye}return i(ce,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var ye=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return ye||(ye===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var ye=this.getDocument();ye&&(this.previouslyFocusedElement=ye.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(ye){var we=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,ye):this.originalOptions.clickOutsideDeactivates;return we&&(this.outsideClick={target:ye.target,allowDeactivation:we}),we}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var ye=this,we=function(){var Se=ye.getReturnFocusNode(),Ve=!!(ye.originalOptions.returnFocusOnDeactivate&&Se!==null&&Se!==void 0&&Se.focus&&(!ye.outsideClick||ye.outsideClick.allowDeactivation&&!oe(ye.outsideClick.target,ye.internalOptions.tabbableOptions))),xe=ye.internalOptions.preventScroll,ze=xe===void 0?!1:xe;Ve&&Se.focus({preventScroll:ze}),ye.originalOptions.onPostDeactivate&&ye.originalOptions.onPostDeactivate.call(null),ye.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(we,we):we()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var ye=this.focusTrapElements.some(Boolean);ye&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(ye){if(this.focusTrap){ye.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var we=!ye.active&&this.props.active,Oe=ye.active&&!this.props.active,Se=!ye.paused&&this.props.paused,Ve=ye.paused&&!this.props.paused;if(we&&(this.updatePreviousElement(),this.focusTrap.activate()),Oe){this.deactivateTrap();return}Se&&this.focusTrap.pause(),Ve&&this.focusTrap.unpause()}else ye.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var ye=this,we=this.props.children?j.Children.only(this.props.children):void 0;if(we){if(we.type&&we.type===j.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var Oe=function(xe){var ze=ye.props.containerElements;we&&(typeof we.ref=="function"?we.ref(xe):we.ref&&(we.ref.current=xe)),ye.focusTrapElements=ze||[xe]},Se=j.cloneElement(we,{ref:Oe});return Se}return null}}]),ce}(j.Component),$=typeof Element>"u"?Function:Element;return ne.propTypes={active:W.bool,paused:W.bool,focusTrapOptions:W.shape({document:W.object,onActivate:W.func,onPostActivate:W.func,checkCanFocusTrap:W.func,onPause:W.func,onPostPause:W.func,onUnpause:W.func,onPostUnpause:W.func,onDeactivate:W.func,onPostDeactivate:W.func,checkCanReturnFocus:W.func,initialFocus:W.oneOfType([W.instanceOf($),W.string,W.bool,W.func]),fallbackFocus:W.oneOfType([W.instanceOf($),W.string,W.func]),escapeDeactivates:W.oneOfType([W.bool,W.func]),clickOutsideDeactivates:W.oneOfType([W.bool,W.func]),returnFocusOnDeactivate:W.bool,setReturnFocus:W.oneOfType([W.instanceOf($),W.string,W.bool,W.func]),allowOutsideClick:W.oneOfType([W.bool,W.func]),preventScroll:W.bool,tabbableOptions:W.shape({displayCheck:W.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:W.oneOfType([W.bool,W.func])}),trapStack:W.array,isKeyForward:W.func,isKeyBackward:W.func}),containerElements:W.arrayOf(W.instanceOf($)),children:W.oneOfType([W.element,W.instanceOf($)])},ne.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:te},S5=ne,S5}var E5={exports:{}},DT;function Kae(){return DT||(DT=1,function(n){(function(e){var t=!1,i,r;function a(){if(typeof i<"u")return i;var O=document.documentElement,U=document.createElement("div");return U.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),O.appendChild(U),i=U.offsetWidth-U.clientWidth,O.removeChild(U),i}function l(){return document.documentElement.scrollHeight>window.innerHeight}function o(O){if(!(typeof document>"u"||t)){var U=document.documentElement;r=window.pageYOffset,l()?U.style.width="calc(100% - "+a()+"px)":U.style.width="100%",U.style.position="fixed",U.style.top=-r+"px",U.style.overflow="hidden",t=!0}}function p(){if(!(typeof document>"u"||!t)){var O=document.documentElement;O.style.width="",O.style.position="",O.style.top="",O.style.overflow="",window.scroll(0,r),t=!1}}function C(){if(t){p();return}o()}var w={on:o,off:p,toggle:C};n.exports=w})()}(E5)),E5.exports}var B5,RT;function Uae(){if(RT)return B5;RT=1;function n(oe){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},n(oe)}function e(oe,ne){if(!(oe instanceof ne))throw new TypeError("Cannot call a class as a function")}function t(oe,ne){for(var $=0;$<ne.length;$++){var ae=ne[$];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(oe,ae.key,ae)}}function i(oe,ne,$){return ne&&t(oe.prototype,ne),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function r(oe,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(ne&&ne.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),ne&&a(oe,ne)}function a(oe,ne){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ae,G){return ae.__proto__=G,ae},a(oe,ne)}function l(oe){var ne=C();return function(){var ae=w(oe),G;if(ne){var ce=w(this).constructor;G=Reflect.construct(ae,arguments,ce)}else G=ae.apply(this,arguments);return o(this,G)}}function o(oe,ne){if(ne&&(n(ne)==="object"||typeof ne=="function"))return ne;if(ne!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(oe)}function p(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(oe){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($){return $.__proto__||Object.getPrototypeOf($)},w(oe)}function O(oe,ne,$){return ne in oe?Object.defineProperty(oe,ne,{value:$,enumerable:!0,configurable:!0,writable:!0}):oe[ne]=$,oe}var U=Ol(),K=O3(),j=Pae(),W=Kae(),Y=function(oe){r($,oe);var ne=l($);function $(ae){var G;if(e(this,$),G=ne.call(this,ae),O(p(G),"getApplicationNode",function(){return G.props.getApplicationNode?G.props.getApplicationNode():G.props.applicationNode}),O(p(G),"checkUnderlayClick",function(ce){G.dialogNode&&G.dialogNode.contains(ce.target)||ce.pageX>ce.target.ownerDocument.documentElement.offsetWidth||ce.pageY>ce.target.ownerDocument.documentElement.offsetHeight||G.exit(ce)}),O(p(G),"checkDocumentKeyDown",function(ce){G.props.escapeExits&&(ce.key==="Escape"||ce.key==="Esc"||ce.keyCode===27)&&G.exit(ce)}),O(p(G),"exit",function(ce){G.props.onExit&&G.props.onExit(ce)}),!ae.titleText&&!ae.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return G}return i($,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var G=this.getApplicationNode();setTimeout(function(){G&&G.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&W.on()}},{key:"componentDidUpdate",value:function(G){G.scrollDisabled&&!this.props.scrollDisabled?W.off():!G.scrollDisabled&&this.props.scrollDisabled&&W.on(),this.props.escapeExits&&!G.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&G.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&W.off();var G=this.getApplicationNode();G&&G.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var G=this;setTimeout(function(){document.addEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var G=this;setTimeout(function(){document.removeEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"render",value:function(){var G=this.props,ce={};if(G.includeDefaultStyles&&(ce={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},G.underlayColor&&(ce.background=G.underlayColor),G.underlayClickExits&&(ce.cursor="pointer")),G.underlayStyle)for(var ge in G.underlayStyle)G.underlayStyle.hasOwnProperty(ge)&&(ce[ge]=G.underlayStyle[ge]);var ye={className:G.underlayClass,style:ce};G.underlayClickExits&&(ye.onMouseDown=this.checkUnderlayClick);for(var we in this.props.underlayProps)ye[we]=this.props.underlayProps[we];var Oe={};G.includeDefaultStyles&&(Oe={display:"inline-block",height:"100%",verticalAlign:"middle"});var Se={key:"a",style:Oe},Ve={};if(G.includeDefaultStyles&&(Ve={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:G.focusDialog?0:null},G.verticallyCenter&&(Ve.verticalAlign="middle",Ve.top=0)),G.dialogStyle)for(var xe in G.dialogStyle)G.dialogStyle.hasOwnProperty(xe)&&(Ve[xe]=G.dialogStyle[xe]);var ze={key:"b",ref:(function(be){this.dialogNode=be}).bind(this),role:G.alert?"alertdialog":"dialog",id:G.dialogId,className:G.dialogClass,style:Ve};G.titleId?ze["aria-labelledby"]=G.titleId:G.titleText&&(ze["aria-label"]=G.titleText),G.focusDialog&&(ze.tabIndex="-1");for(var st in G)/^(data-|aria-)/.test(st)&&(ze[st]=G[st]);var Ct=[U.createElement("div",ze,G.children)];G.verticallyCenter&&Ct.unshift(U.createElement("div",Se));var nt=G.focusTrapOptions||{};return(G.focusDialog||G.initialFocus)&&(nt.initialFocus=G.focusDialog?"#".concat(this.props.dialogId):G.initialFocus),nt.escapeDeactivates=G.escapeExits,U.createElement(j,{focusTrapOptions:nt,paused:G.focusTrapPaused},U.createElement("div",ye,Ct))}}]),$}(U.Component);O(Y,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function te(oe,ne){if(!window.document)return function(){return null};ne=ne||{};var $=function(ae){r(ce,ae);var G=l(ce);function ce(){var ge;e(this,ce);for(var ye=arguments.length,we=new Array(ye),Oe=0;Oe<ye;Oe++)we[Oe]=arguments[Oe];return ge=G.call.apply(G,[this].concat(we)),O(p(ge),"container",null),ge}return i(ce,[{key:"componentDidMount",value:function(){ne.renderTo?this.container=typeof ne.renderTo=="string"?document.querySelector(ne.renderTo):ne.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){ne.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:K.createPortal(U.createElement(oe,this.props,this.props.children),this.container)}}]),ce}(U.Component);return O($,"defaultProps",{mounted:!0}),$}var J=te(Y);return J.renderTo=function(oe){return te(Y,{renderTo:oe})},B5=J,B5}var Lae=Uae();const Fae=AA(Lae);function JA(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",e="43698060986a846745cd8ef2429a577d06cb7037",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/Modal.tsx"],names:[],mappings:"AA8CU,SACE,KADF;AA9CV,OAAO,WAAuC;AAC9C,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA+B,uBAAuB;AAYtD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAC/B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UACb,aAAY;AAAA,UAEZ;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,kBAAiB;AAAA,kBACjC;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"43698060986a846745cd8ef2429a577d06cb7037"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return JA=function(){return l},l}JA();class zae extends ni.Component{static defaultProps=(JA().s[0]++,{underlayClickExits:!0});onClose=(JA().s[1]++,()=>{JA().f[0]++,JA().s[2]++,document.activeElement?(JA().b[0][0]++,JA().s[3]++,document.activeElement.blur()):JA().b[0][1]++,JA().s[4]++,setTimeout(()=>{JA().f[1]++,JA().s[5]++,this.props.onOpenToggle(!1)},0)});render(){JA().f[2]++;const e=(JA().s[6]++,this.props.t);return JA().s[7]++,this.props.isOpen?(JA().b[1][0]++,JA().s[8]++,Ae.jsx(Fae,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,dialogClass:"maputnik-modal-container",children:Ae.jsxs("div",{className:e0("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[Ae.jsxs("header",{className:"maputnik-modal-header",children:[Ae.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx("button",{className:"maputnik-modal-header-toggle",title:e("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:Ae.jsx($$,{})})]}),Ae.jsx("div",{className:"maputnik-modal-scroller",children:Ae.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(JA().b[1][1]++,JA().s[9]++,!1)}}const jg=(JA().s[10]++,ls()(zae));function fs(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="227136badbf4464e3a73e0852e3bc3d4b9112a08",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:33,column:1}},1:{start:{line:5,column:26},end:{line:5,column:47}},2:{start:{line:6,column:22},end:{line:11,column:3}},3:{start:{line:7,column:4},end:{line:7,column:19}},4:{start:{line:8,column:4},end:{line:10,column:5}},5:{start:{line:9,column:6},end:{line:9,column:31}},6:{start:{line:12,column:31},end:{line:12,column:36}},7:{start:{line:13,column:18},end:{line:13,column:33}},8:{start:{line:14,column:2},end:{line:31,column:3}},9:{start:{line:15,column:4},end:{line:28,column:12}},10:{start:{line:23,column:25},end:{line:23,column:43}},11:{start:{line:29,column:9},end:{line:31,column:3}},12:{start:{line:30,column:4},end:{line:30,column:172}},13:{start:{line:32,column:2},end:{line:32,column:40}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:33,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:6,column:22},end:{line:6,column:23}},loc:{start:{line:6,column:33},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:23,column:43}},line:23}},branchMap:{0:{loc:{start:{line:8,column:4},end:{line:10,column:5}},type:"if",locations:[{start:{line:8,column:4},end:{line:10,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:13,column:18},end:{line:13,column:33}},type:"binary-expr",locations:[{start:{line:13,column:18},end:{line:13,column:27}},{start:{line:13,column:31},end:{line:13,column:33}}],line:13},2:{loc:{start:{line:14,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:31,column:3}},{start:{line:29,column:9},end:{line:31,column:3}}],line:14},3:{loc:{start:{line:21,column:24},end:{line:21,column:93}},type:"cond-expr",locations:[{start:{line:21,column:31},end:{line:21,column:61}},{start:{line:21,column:64},end:{line:21,column:93}}],line:21},4:{loc:{start:{line:22,column:65},end:{line:22,column:89}},type:"cond-expr",locations:[{start:{line:22,column:72},end:{line:22,column:78}},{start:{line:22,column:81},end:{line:22,column:89}}],line:22},5:{loc:{start:{line:25,column:20},end:{line:25,column:107}},type:"cond-expr",locations:[{start:{line:25,column:43},end:{line:25,column:66}},{start:{line:25,column:85},end:{line:25,column:107}}],line:25},6:{loc:{start:{line:29,column:9},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:9},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AA4BQ,SASY,KATZ;AA5BR,OAAO,WAAyB;AAChC,SAAQ,eAAe,sBAAqB;AAW5C,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,MAAM,OAAO,IAAI,MAAM,SAAS,KAAK;AAE5C,QAAM,cAAc,CAAC,UAAmB;AACtC,YAAQ,KAAK;AACb,QAAI,MAAM,aAAa;AACrB,YAAM,YAAY,KAAK;AAAA,IACzB;AAAA,EACF;AAEA,QAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAM,EAAE,IAAI,IAAI,aAAa,CAAC;AAE9B,MAAI,KAAK;AACP,WACE,oBAAC,WAAM,WAAU,wBACf,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,MACA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,OAAO,iCAAiC;AAAA,UACpD,WAAW,4CAA4C,OAAO,SAAS,QAAQ;AAAA,UAC/E,SAAS,MAAM,YAAY,CAAC,IAAI;AAAA,UAChC,eAAa,sBAAsB;AAAA,UAElC,iBAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,MAC9C;AAAA,OACF,GACF;AAAA,EAEJ,WAAW,OAAO;AAChB,WACE,oBAAC,WAAM,WAAU,wBACf,8BAAC,SAAI,WAAU,uBAAuB,iBAAM,GAC9C;AAAA,EAEJ;AACA,SAAO,oBAAC,SAAI;AACd;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"227136badbf4464e3a73e0852e3bc3d4b9112a08"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return fs=function(){return l},l}fs();fs().s[0]++;const c8=n=>{fs().f[0]++;const[e,t]=(fs().s[1]++,ni.useState(!1));fs().s[2]++;const i=o=>{fs().f[1]++,fs().s[3]++,t(o),fs().s[4]++,n.onToggleDoc?(fs().b[0][0]++,fs().s[5]++,n.onToggleDoc(o)):fs().b[0][1]++},{label:r,fieldSpec:a}=(fs().s[6]++,n),{doc:l}=(fs().s[7]++,fs().b[1][0]++,a||(fs().b[1][1]++,{}));return fs().s[8]++,l?(fs().b[2][0]++,fs().s[9]++,Ae.jsx("label",{className:"maputnik-doc-wrapper",children:Ae.jsxs("div",{className:"maputnik-doc-target",children:[r,"",Ae.jsx("button",{"aria-label":e?(fs().b[3][0]++,"close property documentation"):(fs().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${e?(fs().b[4][0]++,"open"):(fs().b[4][1]++,"closed")}`,onClick:()=>(fs().f[2]++,fs().s[10]++,i(!e)),"data-wd-key":"field-doc-button-"+r,children:e?(fs().b[5][0]++,Ae.jsx(R$,{})):(fs().b[5][1]++,Ae.jsx(P$,{}))})]})})):(fs().b[2][1]++,fs().s[11]++,r?(fs().b[6][0]++,fs().s[12]++,Ae.jsx("label",{className:"maputnik-doc-wrapper",children:Ae.jsx("div",{className:"maputnik-doc-target",children:r})})):(fs().b[6][1]++,fs().s[13]++,Ae.jsx("div",{})))};function Ms(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ms=function(){return l},l}Ms();const PT=(Ms().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class h8 extends ni.Component{render(){Ms().f[0]++;const{fieldSpec:e}=(Ms().s[1]++,this.props),{doc:t,values:i,docUrl:r,docUrlLinkText:a}=(Ms().s[2]++,e),l=(Ms().s[3]++,e["sdk-support"]),o=(Ms().s[4]++,Ms().b[0][0]++,!!i&&(Ms().b[0][1]++,!Array.isArray(i)));return Ms().s[5]++,Ae.jsxs(Ae.Fragment,{children:[(Ms().b[1][0]++,t&&(Ms().b[1][1]++,Ae.jsxs("div",{className:"SpecDoc",children:[Ae.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(Ms().b[2][0]++,o&&(Ms().b[2][1]++,Ae.jsx("ul",{className:"SpecDoc__values",children:Object.entries(i).map(([p,C])=>(Ms().f[1]++,Ms().s[6]++,Ae.jsxs("li",{children:[Ae.jsx("code",{children:JSON.stringify(p)}),Ae.jsx("div",{children:C.doc})]},p)))})))]}))),(Ms().b[3][0]++,l&&(Ms().b[3][1]++,Ae.jsx("div",{className:"SpecDoc__sdk-support",children:Ae.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[Ae.jsx("thead",{children:Ae.jsxs("tr",{children:[Ae.jsx("th",{}),Object.values(PT).map(p=>(Ms().f[2]++,Ms().s[7]++,Ae.jsx("th",{children:p},p)))]})}),Ae.jsx("tbody",{children:Object.entries(l).map(([p,C])=>(Ms().f[3]++,Ms().s[8]++,Ae.jsxs("tr",{children:[Ae.jsx("td",{children:p}),Object.keys(PT).map(w=>(Ms().f[4]++,Ms().s[9]++,Object.prototype.hasOwnProperty.call(C,w)?(Ms().b[4][0]++,Ms().s[10]++,Ae.jsx("td",{children:C[w]},w)):(Ms().b[4][1]++,Ms().s[11]++,Ae.jsx("td",{children:"no"},w))))]},p)))})]})}))),(Ms().b[5][0]++,r&&(Ms().b[5][1]++,a)&&(Ms().b[5][2]++,Ae.jsx("div",{className:"SpecDoc__learn-more",children:Ae.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:a})})))]})}}function Fo(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ddb687d19b77c1726746c1eecb8e7c7a69772621",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:77,column:6}},16:{start:{line:65,column:12},end:{line:65,column:31}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:78,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:66,column:11}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:67,column:10},end:{line:74,column:11}},type:"binary-expr",locations:[{start:{line:67,column:10},end:{line:67,column:30}},{start:{line:67,column:50},end:{line:74,column:11}}],line:67},8:{loc:{start:{line:71,column:32},end:{line:71,column:64}},type:"cond-expr",locations:[{start:{line:71,column:53},end:{line:71,column:55}},{start:{line:71,column:58},end:{line:71,column:64}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AA+DW,SAWD,KAXC;AA/DX,OAAO,WAA0D;AACjE,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAkBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM;AAAC,iBAAK,WAAW;AAAA,UAAG,GAC1E,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ddb687d19b77c1726746c1eecb8e7c7a69772621"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Fo=function(){return l},l}Fo();class Us extends ni.Component{_blockEl=(Fo().s[0]++,null);constructor(e){Fo().f[0]++,Fo().s[1]++,super(e),Fo().s[2]++,this.state={showDoc:!1}}onChange(e){Fo().f[1]++;const t=(Fo().s[3]++,e.target.value);if(Fo().s[4]++,this.props.onChange)return Fo().b[0][0]++,Fo().s[5]++,this.props.onChange(t===""?(Fo().b[1][0]++,void 0):(Fo().b[1][1]++,t));Fo().b[0][1]++}onToggleDoc=(Fo().s[6]++,e=>{Fo().f[2]++,Fo().s[7]++,this.setState({showDoc:e})});onLabelClick=(Fo().s[8]++,e=>{Fo().f[3]++;const t=(Fo().s[9]++,e.nativeEvent.target),i=(Fo().s[10]++,this._blockEl?.contains(t));Fo().s[11]++,Fo().b[3][0]++,e.nativeEvent.target.nodeName!=="INPUT"&&(Fo().b[3][1]++,!i)?(Fo().b[2][0]++,Fo().s[12]++,e.stopPropagation()):Fo().b[2][1]++,Fo().s[13]++,e.nativeEvent.target.nodeName!=="A"?(Fo().b[4][0]++,Fo().s[14]++,e.preventDefault()):Fo().b[4][1]++});render(){return Fo().f[4]++,Fo().s[15]++,Ae.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:e0({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Fo().b[5][0]++,this.props.fieldSpec&&(Fo().b[5][1]++,Ae.jsx("div",{className:"maputnik-input-block-label",children:Ae.jsx(c8,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Fo().b[6][0]++,!this.props.fieldSpec&&(Fo().b[6][1]++,Ae.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),Ae.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),Ae.jsx("div",{className:"maputnik-input-block-content",ref:e=>{Fo().f[5]++,Fo().s[16]++,this._blockEl=e},children:this.props.children}),(Fo().b[7][0]++,this.props.fieldSpec&&(Fo().b[7][1]++,Ae.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Fo().b[8][0]++,""):(Fo().b[8][1]++,"none")},children:Ae.jsx(h8,{fieldSpec:this.props.fieldSpec})})))]})}}function dh(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return dh=function(){return l},l}dh();class ty extends ni.Component{render(){dh().f[0]++;let e=(dh().s[0]++,this.props.options);return dh().s[1]++,dh().b[1][0]++,e.length>0&&(dh().b[1][1]++,!Array.isArray(e[0]))?(dh().b[0][0]++,dh().s[2]++,e=e.map(t=>(dh().f[1]++,dh().s[3]++,[t,t]))):dh().b[0][1]++,dh().s[4]++,Ae.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(dh().f[2]++,dh().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,i])=>(dh().f[3]++,dh().s[6]++,Ae.jsx("option",{value:t,children:i},t)))})}}function Lr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Lr=function(){return l},l}Lr();class am extends ni.Component{static defaultProps=(Lr().s[0]++,{onInput:()=>{Lr().f[0]++}});constructor(e){Lr().f[1]++,Lr().s[1]++,super(e),Lr().s[2]++,this.state={editing:!1,value:(Lr().b[0][0]++,e.value||(Lr().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Lr().f[2]++,Lr().s[3]++,t.editing)Lr().b[1][1]++;else return Lr().b[1][0]++,Lr().s[4]++,{value:e.value};return Lr().s[5]++,{}}render(){Lr().f[3]++;let e,t;return Lr().s[6]++,this.props.multi?(Lr().b[2][0]++,Lr().s[7]++,e="textarea",Lr().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Lr().b[2][1]++,Lr().s[9]++,e="input",Lr().s[10]++,t=["maputnik-string"]),Lr().s[11]++,this.props.disabled?(Lr().b[3][0]++,Lr().s[12]++,t.push("maputnik-string--disabled")):Lr().b[3][1]++,Lr().s[13]++,ni.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Lr().b[4][0]++,this.props.spellCheck):(Lr().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Lr().b[5][0]++,""):(Lr().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:i=>{Lr().f[4]++,Lr().s[14]++,this.setState({editing:!0,value:i.target.value},()=>{Lr().f[5]++,Lr().s[15]++,this.props.onInput?(Lr().b[6][0]++,Lr().s[16]++,this.props.onInput(this.state.value)):Lr().b[6][1]++})},onBlur:()=>{Lr().f[6]++,Lr().s[17]++,this.state.value!==this.props.value?(Lr().b[7][0]++,Lr().s[18]++,this.setState({editing:!1}),Lr().s[19]++,this.props.onChange?(Lr().b[8][0]++,Lr().s[20]++,this.props.onChange(this.state.value)):Lr().b[8][1]++):Lr().b[7][1]++},onKeyDown:i=>{Lr().f[7]++,Lr().s[21]++,Lr().b[10][0]++,i.keyCode===13&&(Lr().b[10][1]++,this.props.onChange)?(Lr().b[9][0]++,Lr().s[22]++,this.props.onChange(this.state.value)):Lr().b[9][1]++},required:this.props.required})}}function Lh(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="599a12b14a1057b6bb554b629d0d81238d4af16c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:8,column:26},end:{line:38,column:1}},1:{start:{line:16,column:22},end:{line:16,column:110}},2:{start:{line:16,column:73},end:{line:16,column:109}},3:{start:{line:17,column:2},end:{line:37,column:4}},4:{start:{line:39,column:18},end:{line:39,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:26},end:{line:8,column:27}},loc:{start:{line:15,column:6},end:{line:38,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:16,column:66},end:{line:16,column:67}},loc:{start:{line:16,column:73},end:{line:16,column:109}},line:16}},branchMap:{0:{loc:{start:{line:14,column:2},end:{line:14,column:18}},type:"default-arg",locations:[{start:{line:14,column:13},end:{line:14,column:18}}],line:14},1:{loc:{start:{line:16,column:34},end:{line:16,column:60}},type:"binary-expr",locations:[{start:{line:16,column:34},end:{line:16,column:54}},{start:{line:16,column:58},end:{line:16,column:60}}],line:16},2:{loc:{start:{line:25,column:8},end:{line:25,column:79}},type:"binary-expr",locations:[{start:{line:25,column:8},end:{line:25,column:16}},{start:{line:25,column:36},end:{line:25,column:79}}],line:25},3:{loc:{start:{line:26,column:8},end:{line:34,column:9}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:17}},{start:{line:26,column:37},end:{line:34,column:9}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AA0BI,SAKI,KALJ;AAzBJ,SAAQ,UAAS;AACjB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AACtD,SAAS,iBAAiB;AAU1B,MAAM,oBAAsD,CAAC;AAAA,EAC3D;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,WAAW;AACb,MAAM;AACJ,QAAM,cAAkC,OAAO,KAAK,GAAG,MAAM,KAAK,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,UAAU,EAAE,QAAQ,MAAM,GAAG,CAAC,CAAC,CAAC;AAC7H,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,MAAM;AAAA,MAAG,WAAW,GAAG,MAAM;AAAA,MAC3C,eAAa;AAAA,MACb;AAAA,MAEC;AAAA,oBACC,oBAAC,eAAY,OAAc,UAAU,MAAM;AAAA,QAE5C,CAAC,YACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS;AAAA,YACT;AAAA,YACA;AAAA,YACA,eAAa,QAAQ;AAAA;AAAA,QACvB;AAAA;AAAA;AAAA,EAEJ;AAEJ;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"599a12b14a1057b6bb554b629d0d81238d4af16c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Lh=function(){return l},l}Lh();Lh().s[0]++;const jae=({t:n,value:e,wdKey:t,onChange:i,error:r,disabled:a=(Lh().b[0][0]++,!1)})=>{Lh().f[0]++;const l=(Lh().s[1]++,Object.keys((Lh().b[1][0]++,xf.layer.type.values||(Lh().b[1][1]++,{}))).map(o=>(Lh().f[1]++,Lh().s[2]++,[o,eb.startCase(o.replace(/-/g," "))])));return Lh().s[3]++,Ae.jsxs(Us,{label:n("Type"),fieldSpec:xf.layer.type,"data-wd-key":t,error:r,children:[(Lh().b[2][0]++,a&&(Lh().b[2][1]++,Ae.jsx(am,{value:e,disabled:!0}))),(Lh().b[3][0]++,!a&&(Lh().b[3][1]++,Ae.jsx(ty,{options:l,onChange:i,value:e,"data-wd-key":t+".select"})))]})},Pj=(Lh().s[4]++,ls()(jae));function z_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="faa51332e301a2db02ecf3d9679788ae744c6d26",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:5,column:16},end:{line:23,column:1}},1:{start:{line:6,column:2},end:{line:22,column:4}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:16},end:{line:5,column:17}},loc:{start:{line:5,column:27},end:{line:23,column:1}},line:5}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAkBM;AAjBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,MAAM,UAAkC,CAAC,UAAU;AACjD,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAM;AAAA,MAAK,WAAW,OAAO,MAAM;AAAA,MACxC,eAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,MAAM;AAAA,UACb,SAAS,MAAM;AAAA,UACf,eAAa,MAAM,QAAQ;AAAA;AAAA,MAC7B;AAAA;AAAA,EACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"faa51332e301a2db02ecf3d9679788ae744c6d26"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return z_=function(){return l},l}z_();z_().s[0]++;const Kj=n=>(z_().f[0]++,z_().s[1]++,Ae.jsx(Us,{label:"ID",fieldSpec:oa.layer.id,"data-wd-key":n.wdKey,error:n.error,children:Ae.jsx(am,{value:n.value,onInput:n.onChange,"data-wd-key":n.wdKey+".input"})}));function ax(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function zu(){return zu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},zu.apply(null,arguments)}var Nae=G0();const Vr=AA(Nae);var O5={exports:{}},Ws={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function Gae(){if(KT)return Ws;KT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),j;j=Symbol.for("react.module.reference");function W(Y){if(typeof Y=="object"&&Y!==null){var te=Y.$$typeof;switch(te){case n:switch(Y=Y.type,Y){case t:case r:case i:case C:case w:return Y;default:switch(Y=Y&&Y.$$typeof,Y){case o:case l:case p:case U:case O:case a:return Y;default:return te}}case e:return te}}}return Ws.ContextConsumer=l,Ws.ContextProvider=a,Ws.Element=n,Ws.ForwardRef=p,Ws.Fragment=t,Ws.Lazy=U,Ws.Memo=O,Ws.Portal=e,Ws.Profiler=r,Ws.StrictMode=i,Ws.Suspense=C,Ws.SuspenseList=w,Ws.isAsyncMode=function(){return!1},Ws.isConcurrentMode=function(){return!1},Ws.isContextConsumer=function(Y){return W(Y)===l},Ws.isContextProvider=function(Y){return W(Y)===a},Ws.isElement=function(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n},Ws.isForwardRef=function(Y){return W(Y)===p},Ws.isFragment=function(Y){return W(Y)===t},Ws.isLazy=function(Y){return W(Y)===U},Ws.isMemo=function(Y){return W(Y)===O},Ws.isPortal=function(Y){return W(Y)===e},Ws.isProfiler=function(Y){return W(Y)===r},Ws.isStrictMode=function(Y){return W(Y)===i},Ws.isSuspense=function(Y){return W(Y)===C},Ws.isSuspenseList=function(Y){return W(Y)===w},Ws.isValidElementType=function(Y){return typeof Y=="string"||typeof Y=="function"||Y===t||Y===r||Y===i||Y===C||Y===w||Y===K||typeof Y=="object"&&Y!==null&&(Y.$$typeof===U||Y.$$typeof===O||Y.$$typeof===a||Y.$$typeof===l||Y.$$typeof===p||Y.$$typeof===j||Y.getModuleId!==void 0)},Ws.typeOf=W,Ws}var UT;function Wae(){return UT||(UT=1,O5.exports=Gae()),O5.exports}Wae();const LT=n=>typeof n=="object"&&n!=null&&n.nodeType===1,FT=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",sx=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const t=getComputedStyle(n,null);return FT(t.overflowY,e)||FT(t.overflowX,e)||(i=>{const r=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!r&&(r.clientHeight<i.scrollHeight||r.clientWidth<i.scrollWidth)})(n)}return!1},lx=(n,e,t,i,r,a,l,o)=>a<n&&l>e||a>n&&l<e?0:a<=n&&o<=t||l>=e&&o>=t?a-n-i:l>e&&o<t||a<n&&o>t?l-e+r:0,Qae=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},Yae=(n,e)=>{var t,i,r,a;if(typeof document>"u")return[];const{inline:l,boundary:o,skipOverflowHiddenElements:p}=e,C=typeof o=="function"?o:Se=>Se!==o;if(!LT(n))throw new TypeError("Invalid target");const w=document.scrollingElement||document.documentElement,O=[];let U=n;for(;LT(U)&&C(U);){if(U=Qae(U),U===w){O.push(U);break}U!=null&&U===document.body&&sx(U)&&!sx(document.documentElement)||U!=null&&sx(U,p)&&O.push(U)}const K=(i=(t=window.visualViewport)==null?void 0:t.width)!=null?i:innerWidth,j=(a=(r=window.visualViewport)==null?void 0:r.height)!=null?a:innerHeight,{scrollX:W,scrollY:Y}=window,{height:te,width:J,top:oe,right:ne,bottom:$,left:ae}=n.getBoundingClientRect(),{top:G,right:ce,left:ge}=(Se=>{const Ve=window.getComputedStyle(Se);return{top:parseFloat(Ve.scrollMarginTop)||0,right:parseFloat(Ve.scrollMarginRight)||0,bottom:parseFloat(Ve.scrollMarginBottom)||0,left:parseFloat(Ve.scrollMarginLeft)||0}})(n);let ye=oe-G,we=l==="center"?ae+J/2-ge+ce:l==="end"?ne+ce:ae-ge;const Oe=[];for(let Se=0;Se<O.length;Se++){const Ve=O[Se],{height:xe,width:ze,top:st,right:Ct,bottom:nt,left:be}=Ve.getBoundingClientRect();if(oe>=0&&ae>=0&&$<=j&&ne<=K&&(Ve===w&&!sx(Ve)||oe>=st&&$<=nt&&ae>=be&&ne<=Ct))return Oe;const Ne=getComputedStyle(Ve),tt=parseInt(Ne.borderLeftWidth,10),lt=parseInt(Ne.borderTopWidth,10),kt=parseInt(Ne.borderRightWidth,10),gt=parseInt(Ne.borderBottomWidth,10);let St=0,Ut=0;const Fe="offsetWidth"in Ve?Ve.offsetWidth-Ve.clientWidth-tt-kt:0,Ke="offsetHeight"in Ve?Ve.offsetHeight-Ve.clientHeight-lt-gt:0,Re="offsetWidth"in Ve?Ve.offsetWidth===0?0:ze/Ve.offsetWidth:0,He="offsetHeight"in Ve?Ve.offsetHeight===0?0:xe/Ve.offsetHeight:0;if(w===Ve)St=lx(Y,Y+j,j,lt,gt,Y+ye,Y+ye+te,te),Ut=l==="start"?we:l==="center"?we-K/2:l==="end"?we-K:lx(W,W+K,K,tt,kt,W+we,W+we+J,J),St=Math.max(0,St+Y),Ut=Math.max(0,Ut+W);else{St=lx(st,nt,xe,lt,gt+Ke,ye,ye+te,te),Ut=l==="start"?we-be-tt:l==="center"?we-(be+ze/2)+Fe/2:l==="end"?we-Ct+kt+Fe:lx(be,Ct,ze,tt,kt+Fe,we,we+J,J);const{scrollLeft:bt,scrollTop:_t}=Ve;St=He===0?0:Math.max(0,Math.min(_t+St/He,Ve.scrollHeight-xe/He+Ke)),Ut=Re===0?0:Math.max(0,Math.min(bt+Ut/Re,Ve.scrollWidth-ze/Re+Fe)),ye+=_t-St,we+=bt-Ut}Oe.push({el:Ve,top:St,left:Ut})}return Oe};var Fv=function(){return Fv=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Fv.apply(this,arguments)};var qae=0;function Uj(){}function Hae(n,e){if(n){var t=Yae(n,{boundary:e});t.forEach(function(i){var r=i.el,a=i.top,l=i.left;r.scrollTop=a,r.scrollLeft=l})}}function zT(n,e,t){var i=n===e||e instanceof t.Node&&n.contains&&n.contains(e);return i}function Lj(n,e){var t;function i(){t&&clearTimeout(t)}function r(){for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];i(),t=setTimeout(function(){t=null,n.apply(void 0,l)},e)}return r.cancel=i,r}function S0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return e.some(function(o){return o&&o.apply(void 0,[i].concat(a)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function ux(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){e.forEach(function(r){typeof r=="function"?r(i):r&&(r.current=i)})}}function Vae(){return String(qae++)}function pB(n,e){return!n||!e?n:Object.keys(n).reduce(function(t,i){return t[i]=Fj(e,i)?e[i]:n[i],t},{})}function Fj(n,e){return n[e]!==void 0}function $ae(n){var e=n.key,t=n.keyCode;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function Ax(n,e,t,i,r){var a=t.length;if(a===0)return-1;var l=a-1;(typeof n!="number"||n<0||n>l)&&(n=e>0?-1:l+1);var o=n+e;o<0?o=l:o>l&&(o=0);var p=M3(o,e<0,t,i,r);return p===-1?n>=a?-1:n:p}function M3(n,e,t,i,r){r===void 0&&(r=!1);var a=t.length;if(e){for(var l=n;l>=0;l--)if(!i(t[l],l))return l}else for(var o=n;o<a;o++)if(!i(t[o],o))return o;return r?M3(e?a-1:0,e,t,i):-1}function jT(n,e,t,i){return i===void 0&&(i=!0),t&&e.some(function(r){return r&&(zT(r,n,t)||i&&zT(r,t.document.activeElement,t))})}var Zae=Lj(function(n){zj(n).textContent=""},500);function zj(n){var e=n.getElementById("a11y-status-message");return e||(e=n.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),n.body.appendChild(e),e)}function Xae(n,e){if(!(!n||!e)){var t=zj(e);t.textContent=n,Zae(e)}}function Jae(n){var e=n?.getElementById("a11y-status-message");e&&e.remove()}var jj={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function ese(n,e,t){var i=n.props,r=n.type,a={};Object.keys(e).forEach(function(l){tse(l,n,e,t),t[l]!==e[l]&&(a[l]=t[l])}),i.onStateChange&&Object.keys(a).length&&i.onStateChange(zu({type:r},a))}function tse(n,e,t,i){var r=e.props,a=e.type,l="on"+d8(n)+"Change";r[l]&&i[n]!==void 0&&i[n]!==t[n]&&r[l](zu({type:a},i))}function nse(n,e){return e.changes}var NT=Lj(function(n,e){Xae(n,e)},200),ise=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Nt.useLayoutEffect:Nt.useEffect,rse="useId"in ni?function(e){var t=e.id,i=e.labelId,r=e.menuId,a=e.getItemId,l=e.toggleButtonId,o=e.inputId,p="downshift-"+ni.useId();t||(t=p);var C=Nt.useRef({labelId:i||t+"-label",menuId:r||t+"-menu",getItemId:a||function(w){return t+"-item-"+w},toggleButtonId:l||t+"-toggle-button",inputId:o||t+"-input"});return C.current}:function(e){var t=e.id,i=t===void 0?"downshift-"+Vae():t,r=e.labelId,a=e.menuId,l=e.getItemId,o=e.toggleButtonId,p=e.inputId,C=Nt.useRef({labelId:r||i+"-label",menuId:a||i+"-menu",getItemId:l||function(w){return i+"-item-"+w},toggleButtonId:o||i+"-toggle-button",inputId:p||i+"-input"});return C.current};function ose(n,e,t,i){var r,a;if(n===void 0){if(e===void 0)throw new Error(i);r=t[e],a=e}else a=e===void 0?t.indexOf(n):e,r=n;return[r,a]}function d8(n){return""+n.slice(0,1).toUpperCase()+n.slice(1)}function Nj(n){var e=Nt.useRef(n);return e.current=n,e}function ase(n,e,t,i){var r=Nt.useRef(),a=Nt.useRef(),l=Nt.useCallback(function(K,j){a.current=j,K=pB(K,j.props);var W=n(K,j),Y=j.props.stateReducer(K,zu({},j,{changes:W}));return Y},[n]),o=Nt.useReducer(l,e,t),p=o[0],C=o[1],w=Nj(e),O=Nt.useCallback(function(K){return C(zu({props:w.current},K))},[w]),U=a.current;return Nt.useEffect(function(){var K=pB(r.current,U?.props),j=U&&r.current&&!i(K,p);j&&ese(U,K,p),r.current=p},[p,U,i]),[p,O]}var l_={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:nse,scrollIntoView:Hae,environment:typeof window>"u"?void 0:window};function Ug(n,e,t){t===void 0&&(t=jj);var i=n["default"+d8(e)];return i!==void 0?i:t[e]}function u_(n,e,t){t===void 0&&(t=jj);var i=n[e];if(i!==void 0)return i;var r=n["initial"+d8(e)];return r!==void 0?r:Ug(n,e,t)}function sse(n){var e=u_(n,"selectedItem"),t=u_(n,"isOpen"),i=dse(n),r=u_(n,"inputValue");return{highlightedIndex:i<0&&e&&t?n.items.findIndex(function(a){return n.itemToKey(a)===n.itemToKey(e)}):i,isOpen:t,selectedItem:e,inputValue:r}}function A_(n,e,t){var i=n.items,r=n.initialHighlightedIndex,a=n.defaultHighlightedIndex,l=n.isItemDisabled,o=n.itemToKey,p=e.selectedItem,C=e.highlightedIndex;return i.length===0?-1:r!==void 0&&C===r&&!l(i[r],r)?r:a!==void 0&&!l(i[a],a)?a:p?i.findIndex(function(w){return o(p)===o(w)}):t<0&&!l(i[i.length-1],i.length-1)?i.length-1:t>0&&!l(i[0],0)?0:-1}function lse(n,e,t){var i=Nt.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return Nt.useEffect(function(){if(!n)return Uj;var r=t.map(function(w){return w.current});function a(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function l(w){i.current.isMouseDown=!1,jT(w.target,r,n)||e()}function o(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function p(){i.current.isTouchMove=!0}function C(w){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!jT(w.target,r,n,!1)&&e()}return n.addEventListener("mousedown",a),n.addEventListener("mouseup",l),n.addEventListener("touchstart",o),n.addEventListener("touchmove",p),n.addEventListener("touchend",C),function(){n.removeEventListener("mousedown",a),n.removeEventListener("mouseup",l),n.removeEventListener("touchstart",o),n.removeEventListener("touchmove",p),n.removeEventListener("touchend",C)}},[t,n,e]),i.current}var use=function(){return Uj};function Ase(n,e,t,i){i===void 0&&(i={});var r=i.document,a=f8();Nt.useEffect(function(){if(!(!n||a||!r)){var l=n(e);NT(l,r)}},t),Nt.useEffect(function(){return function(){NT.cancel(),Jae(r)}},[r])}function cse(n){var e=n.highlightedIndex,t=n.isOpen,i=n.itemRefs,r=n.getItemNodeFromIndex,a=n.menuElement,l=n.scrollIntoView,o=Nt.useRef(!0);return ise(function(){e<0||!t||!Object.keys(i.current).length||(o.current===!1?o.current=!0:l(r(e),a))},[e]),o}function GT(n,e,t){var i;t===void 0&&(t=!0);var r=((i=n.items)==null?void 0:i.length)&&e>=0;return zu({isOpen:!1,highlightedIndex:-1},r&&zu({selectedItem:n.items[e],isOpen:Ug(n,"isOpen"),highlightedIndex:Ug(n,"highlightedIndex")},t&&{inputValue:n.itemToString(n.items[e])}))}function hse(n,e){return n.isOpen===e.isOpen&&n.inputValue===e.inputValue&&n.highlightedIndex===e.highlightedIndex&&n.selectedItem===e.selectedItem}function f8(){var n=ni.useRef(!0);return ni.useEffect(function(){return n.current=!1,function(){n.current=!0}},[]),n.current}function mB(n){var e=Ug(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}function dse(n){var e=u_(n,"highlightedIndex");return e>-1&&n.isItemDisabled(n.items[e],e)?-1:e}var Ox={environment:Vr.shape({addEventListener:Vr.func.isRequired,removeEventListener:Vr.func.isRequired,document:Vr.shape({createElement:Vr.func.isRequired,getElementById:Vr.func.isRequired,activeElement:Vr.any.isRequired,body:Vr.any.isRequired}).isRequired,Node:Vr.func.isRequired}),itemToString:Vr.func,itemToKey:Vr.func,stateReducer:Vr.func},Gj=zu({},Ox,{getA11yStatusMessage:Vr.func,highlightedIndex:Vr.number,defaultHighlightedIndex:Vr.number,initialHighlightedIndex:Vr.number,isOpen:Vr.bool,defaultIsOpen:Vr.bool,initialIsOpen:Vr.bool,selectedItem:Vr.any,initialSelectedItem:Vr.any,defaultSelectedItem:Vr.any,id:Vr.string,labelId:Vr.string,menuId:Vr.string,getItemId:Vr.func,toggleButtonId:Vr.string,onSelectedItemChange:Vr.func,onHighlightedIndexChange:Vr.func,onStateChange:Vr.func,onIsOpenChange:Vr.func,scrollIntoView:Vr.func});function fse(n,e,t){var i=e.type,r=e.props,a;switch(i){case t.ItemMouseMove:a={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:a={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:a={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:A_(r,n,0)};break;case t.FunctionOpenMenu:a={isOpen:!0,highlightedIndex:A_(r,n,0)};break;case t.FunctionCloseMenu:a={isOpen:!1};break;case t.FunctionSetHighlightedIndex:a={highlightedIndex:r.isItemDisabled(r.items[e.highlightedIndex],e.highlightedIndex)?-1:e.highlightedIndex};break;case t.FunctionSetInputValue:a={inputValue:e.inputValue};break;case t.FunctionReset:a={highlightedIndex:mB(r),isOpen:Ug(r,"isOpen"),selectedItem:Ug(r,"selectedItem"),inputValue:Ug(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return zu({},n,a)}Fv(Fv({},Gj),{items:Vr.array.isRequired,isItemDisabled:Vr.func});Fv(Fv({},l_),{isItemDisabled:function(){return!1}});var p8=0,m8=1,g8=2,y8=3,v8=4,C8=5,_8=6,b8=7,x8=8,w3=9,M8=10,Wj=11,Qj=12,w8=13,Yj=14,qj=15,Hj=16,Vj=17,$j=18,S8=19,Zj=20,Xj=21,E8=22,Jj=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:E8,FunctionCloseMenu:Vj,FunctionOpenMenu:Hj,FunctionReset:Xj,FunctionSelectItem:S8,FunctionSetHighlightedIndex:$j,FunctionSetInputValue:Zj,FunctionToggleMenu:qj,InputBlur:w3,InputChange:x8,InputClick:M8,InputKeyDownArrowDown:p8,InputKeyDownArrowUp:m8,InputKeyDownEnd:v8,InputKeyDownEnter:b8,InputKeyDownEscape:g8,InputKeyDownHome:y8,InputKeyDownPageDown:_8,InputKeyDownPageUp:C8,ItemClick:w8,ItemMouseMove:Qj,MenuMouseLeave:Wj,ToggleButtonClick:Yj});function pse(n){var e=sse(n),t=e.selectedItem,i=e.inputValue;return i===""&&t&&n.defaultInputValue===void 0&&n.initialInputValue===void 0&&n.inputValue===void 0&&(i=n.itemToString(t)),zu({},e,{inputValue:i})}zu({},Gj,{items:Vr.array.isRequired,isItemDisabled:Vr.func,inputValue:Vr.string,defaultInputValue:Vr.string,initialInputValue:Vr.string,inputId:Vr.string,onInputValueChange:Vr.func});function mse(n,e,t,i){var r=Nt.useRef(),a=ase(n,e,t,i),l=a[0],o=a[1],p=f8();return Nt.useEffect(function(){if(Fj(e,"selectedItem")){if(!p){var C=e.itemToKey(e.selectedItem)!==e.itemToKey(r.current);C&&o({type:E8,inputValue:e.itemToString(e.selectedItem)})}r.current=l.selectedItem===r.current?e.selectedItem:l.selectedItem}},[l.selectedItem,e.selectedItem]),[pB(l,e),o]}var gse=zu({},l_,{isItemDisabled:function(){return!1}});function yse(n,e){var t,i=e.type,r=e.props,a=e.altKey,l;switch(i){case w8:l={isOpen:Ug(r,"isOpen"),highlightedIndex:mB(r),selectedItem:r.items[e.index],inputValue:r.itemToString(r.items[e.index])};break;case p8:n.isOpen?l={highlightedIndex:Ax(n.highlightedIndex,1,r.items,r.isItemDisabled,!0)}:l={highlightedIndex:a&&n.selectedItem==null?-1:A_(r,n,1),isOpen:r.items.length>=0};break;case m8:n.isOpen?a?l=GT(r,n.highlightedIndex):l={highlightedIndex:Ax(n.highlightedIndex,-1,r.items,r.isItemDisabled,!0)}:l={highlightedIndex:A_(r,n,-1),isOpen:r.items.length>=0};break;case b8:l=GT(r,n.highlightedIndex);break;case g8:l=zu({isOpen:!1,highlightedIndex:-1},!n.isOpen&&{selectedItem:null,inputValue:""});break;case C8:l={highlightedIndex:Ax(n.highlightedIndex,-10,r.items,r.isItemDisabled,!0)};break;case _8:l={highlightedIndex:Ax(n.highlightedIndex,10,r.items,r.isItemDisabled,!0)};break;case y8:l={highlightedIndex:M3(0,!1,r.items,r.isItemDisabled)};break;case v8:l={highlightedIndex:M3(r.items.length-1,!0,r.items,r.isItemDisabled)};break;case w3:l=zu({isOpen:!1,highlightedIndex:-1},n.highlightedIndex>=0&&((t=r.items)==null?void 0:t.length)&&e.selectItem&&{selectedItem:r.items[n.highlightedIndex],inputValue:r.itemToString(r.items[n.highlightedIndex])});break;case x8:l={isOpen:!0,highlightedIndex:mB(r),inputValue:e.inputValue};break;case M8:l={isOpen:!n.isOpen,highlightedIndex:n.isOpen?-1:A_(r,n,0)};break;case S8:l={selectedItem:e.selectedItem,inputValue:r.itemToString(e.selectedItem)};break;case E8:l={inputValue:e.inputValue};break;default:return fse(n,e,Jj)}return zu({},n,l)}var vse=["onMouseLeave","refKey","ref"],Cse=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],_se=["onClick","onPress","refKey","ref"],bse=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];gB.stateChangeTypes=Jj;function gB(n){n===void 0&&(n={});var e=zu({},gse,n),t=e.items,i=e.scrollIntoView,r=e.environment,a=e.getA11yStatusMessage,l=mse(yse,e,pse,hse),o=l[0],p=l[1],C=o.isOpen,w=o.highlightedIndex,O=o.selectedItem,U=o.inputValue,K=Nt.useRef(null),j=Nt.useRef({}),W=Nt.useRef(null),Y=Nt.useRef(null),te=f8(),J=rse(e),oe=Nt.useRef(),ne=Nj({state:o,props:e}),$=Nt.useCallback(function(tt){return j.current[J.getItemId(tt)]},[J]);Ase(a,o,[C,w,O,U],r);var ae=cse({menuElement:K.current,highlightedIndex:w,isOpen:C,itemRefs:j,scrollIntoView:i,getItemNodeFromIndex:$});Nt.useEffect(function(){var tt=u_(e,"isOpen");tt&&W.current&&W.current.focus()},[]),Nt.useEffect(function(){te||(oe.current=t.length)});var G=lse(r,Nt.useCallback(function(){ne.current.state.isOpen&&p({type:w3,selectItem:!1})},[p,ne]),Nt.useMemo(function(){return[K,Y,W]},[K.current,Y.current,W.current])),ce=use();Nt.useEffect(function(){C||(j.current={})},[C]),Nt.useEffect(function(){var tt;!C||!(r!=null&&r.document)||!(W!=null&&(tt=W.current)!=null&&tt.focus)||r.document.activeElement!==W.current&&W.current.focus()},[C,r]);var ge=Nt.useMemo(function(){return{ArrowDown:function(lt){lt.preventDefault(),p({type:p8,altKey:lt.altKey})},ArrowUp:function(lt){lt.preventDefault(),p({type:m8,altKey:lt.altKey})},Home:function(lt){ne.current.state.isOpen&&(lt.preventDefault(),p({type:y8}))},End:function(lt){ne.current.state.isOpen&&(lt.preventDefault(),p({type:v8}))},Escape:function(lt){var kt=ne.current.state;(kt.isOpen||kt.inputValue||kt.selectedItem||kt.highlightedIndex>-1)&&(lt.preventDefault(),p({type:g8}))},Enter:function(lt){var kt=ne.current.state;!kt.isOpen||lt.which===229||(lt.preventDefault(),p({type:b8}))},PageUp:function(lt){ne.current.state.isOpen&&(lt.preventDefault(),p({type:C8}))},PageDown:function(lt){ne.current.state.isOpen&&(lt.preventDefault(),p({type:_8}))}}},[p,ne]),ye=Nt.useCallback(function(tt){return zu({id:J.labelId,htmlFor:J.inputId},tt)},[J]),we=Nt.useCallback(function(tt,lt){var kt,gt=tt===void 0?{}:tt,St=gt.onMouseLeave,Ut=gt.refKey,Fe=Ut===void 0?"ref":Ut,Ke=gt.ref,Re=ax(gt,vse),He=lt===void 0?{}:lt;return He.suppressRefError,zu((kt={},kt[Fe]=ux(Ke,function(bt){K.current=bt}),kt.id=J.menuId,kt.role="listbox",kt["aria-labelledby"]=Re&&Re["aria-label"]?void 0:""+J.labelId,kt.onMouseLeave=S0(St,function(){p({type:Wj})}),kt),Re)},[p,ce,J]),Oe=Nt.useCallback(function(tt){var lt,kt,gt=tt===void 0?{}:tt,St=gt.item,Ut=gt.index,Fe=gt.refKey,Ke=Fe===void 0?"ref":Fe,Re=gt.ref,He=gt.onMouseMove,bt=gt.onMouseDown,_t=gt.onClick;gt.onPress;var Ot=gt.disabled,qt=ax(gt,Cse);Ot!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var Kt=ne.current,on=Kt.props,Jn=Kt.state,Wt=ose(St,Ut,on.items,"Pass either item or index to getItemProps!"),$n=Wt[0],On=Wt[1],Bn=on.isItemDisabled($n,On),In="onClick",Oi=_t,ei=function(){G.isTouchEnd||On===Jn.highlightedIndex||(ae.current=!1,p({type:Qj,index:On,disabled:Bn}))},Kn=function(){p({type:w8,index:On})},je=function(re){return re.preventDefault()};return zu((lt={},lt[Ke]=ux(Re,function(de){de&&(j.current[J.getItemId(On)]=de)}),lt["aria-disabled"]=Bn,lt["aria-selected"]=On===Jn.highlightedIndex,lt.id=J.getItemId(On),lt.role="option",lt),!Bn&&(kt={},kt[In]=S0(Oi,Kn),kt),{onMouseMove:S0(He,ei),onMouseDown:S0(bt,je)},qt)},[p,J,ne,G,ae]),Se=Nt.useCallback(function(tt){var lt,kt=tt===void 0?{}:tt,gt=kt.onClick;kt.onPress;var St=kt.refKey,Ut=St===void 0?"ref":St,Fe=kt.ref,Ke=ax(kt,_se),Re=ne.current.state,He=function(){p({type:Yj})};return zu((lt={},lt[Ut]=ux(Fe,function(bt){Y.current=bt}),lt["aria-controls"]=J.menuId,lt["aria-expanded"]=Re.isOpen,lt.id=J.toggleButtonId,lt.tabIndex=-1,lt),!Ke.disabled&&zu({},{onClick:S0(gt,He)}),Ke)},[p,ne,J]),Ve=Nt.useCallback(function(tt,lt){var kt,gt=tt===void 0?{}:tt,St=gt.onKeyDown,Ut=gt.onChange,Fe=gt.onInput,Ke=gt.onBlur;gt.onChangeText;var Re=gt.onClick,He=gt.refKey,bt=He===void 0?"ref":He,_t=gt.ref,Ot=ax(gt,bse),qt=lt===void 0?{}:lt;qt.suppressRefError;var Kt=ne.current.state,on=function(ei){var Kn=$ae(ei);Kn&&ge[Kn]&&ge[Kn](ei)},Jn=function(ei){p({type:x8,inputValue:ei.target.value})},Wt=function(ei){if(r!=null&&r.document&&Kt.isOpen&&!G.isMouseDown){var Kn=ei.relatedTarget===null&&r.document.activeElement!==r.document.body;p({type:w3,selectItem:!Kn})}},$n=function(){p({type:M8})},On="onChange",Bn={};if(!Ot.disabled){var In;Bn=(In={},In[On]=S0(Ut,Fe,Jn),In.onKeyDown=S0(St,on),In.onBlur=S0(Ke,Wt),In.onClick=S0(Re,$n),In)}return zu((kt={},kt[bt]=ux(_t,function(Oi){W.current=Oi}),kt["aria-activedescendant"]=Kt.isOpen&&Kt.highlightedIndex>-1?J.getItemId(Kt.highlightedIndex):"",kt["aria-autocomplete"]="list",kt["aria-controls"]=J.menuId,kt["aria-expanded"]=Kt.isOpen,kt["aria-labelledby"]=Ot&&Ot["aria-label"]?void 0:J.labelId,kt.autoComplete="off",kt.id=J.inputId,kt.role="combobox",kt.value=Kt.inputValue,kt),Bn,Ot)},[p,J,r,ge,ne,G,ce]),xe=Nt.useCallback(function(){p({type:qj})},[p]),ze=Nt.useCallback(function(){p({type:Vj})},[p]),st=Nt.useCallback(function(){p({type:Hj})},[p]),Ct=Nt.useCallback(function(tt){p({type:$j,highlightedIndex:tt})},[p]),nt=Nt.useCallback(function(tt){p({type:S8,selectedItem:tt})},[p]),be=Nt.useCallback(function(tt){p({type:Zj,inputValue:tt})},[p]),Ne=Nt.useCallback(function(){p({type:Xj})},[p]);return{getItemProps:Oe,getLabelProps:ye,getMenuProps:we,getInputProps:Ve,getToggleButtonProps:Se,toggleMenu:xe,openMenu:st,closeMenu:ze,setHighlightedIndex:Ct,setInputValue:be,selectItem:nt,reset:Ne,highlightedIndex:w,isOpen:C,selectedItem:O,inputValue:U}}Ox.stateReducer,Ox.itemToKey,Ox.environment,Vr.array,Vr.array,Vr.array,Vr.func,Vr.number,Vr.number,Vr.number,Vr.func,Vr.func,Vr.string,Vr.string;l_.itemToKey,l_.stateReducer,l_.environment;function Li(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="73020a5a2032027cc342d42db613082f6da43a81",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:13,column:28},end:{line:13,column:55}},2:{start:{line:14,column:18},end:{line:14,column:36}},3:{start:{line:15,column:36},end:{line:15,column:62}},4:{start:{line:16,column:24},end:{line:19,column:22}},5:{start:{line:17,column:15},end:{line:17,column:34}},6:{start:{line:18,column:4},end:{line:18,column:72}},7:{start:{line:18,column:36},end:{line:18,column:70}},8:{start:{line:20,column:24},end:{line:25,column:8}},9:{start:{line:21,column:4},end:{line:24,column:5}},10:{start:{line:22,column:20},end:{line:22,column:84}},11:{start:{line:23,column:6},end:{line:23,column:48}},12:{start:{line:33,column:6},end:{line:55,column:4}},13:{start:{line:36,column:28},end:{line:36,column:47}},14:{start:{line:38,column:6},end:{line:40,column:7}},15:{start:{line:39,column:8},end:{line:39,column:51}},16:{start:{line:41,column:6},end:{line:41,column:28}},17:{start:{line:44,column:16},end:{line:44,column:51}},18:{start:{line:45,column:6},end:{line:45,column:18}},19:{start:{line:46,column:6},end:{line:46,column:56}},20:{start:{line:49,column:6},end:{line:53,column:7}},21:{start:{line:50,column:8},end:{line:50,column:20}},22:{start:{line:51,column:8},end:{line:51,column:40}},23:{start:{line:52,column:8},end:{line:52,column:19}},24:{start:{line:56,column:2},end:{line:60,column:30}},25:{start:{line:57,column:4},end:{line:59,column:5}},26:{start:{line:58,column:6},end:{line:58,column:22}},27:{start:{line:61,column:2},end:{line:64,column:22}},28:{start:{line:62,column:4},end:{line:62,column:53}},29:{start:{line:63,column:4},end:{line:63,column:69}},30:{start:{line:63,column:17},end:{line:63,column:68}},31:{start:{line:65,column:2},end:{line:67,column:14}},32:{start:{line:66,column:4},end:{line:66,column:26}},33:{start:{line:68,column:2},end:{line:103,column:7}},34:{start:{line:76,column:25},end:{line:76,column:35}},35:{start:{line:87,column:79},end:{line:100,column:9}}},fnMap:{0:{name:"InputAutocomplete",decl:{start:{line:6,column:24},end:{line:6,column:41}},loc:{start:{line:12,column:3},end:{line:104,column:1}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:9,column:13},end:{line:9,column:14}},loc:{start:{line:9,column:19},end:{line:10,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:16,column:38},end:{line:16,column:39}},loc:{start:{line:16,column:44},end:{line:19,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:18,column:26},end:{line:18,column:27}},loc:{start:{line:18,column:36},end:{line:18,column:70}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:42},end:{line:20,column:43}},loc:{start:{line:20,column:48},end:{line:25,column:3}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:36,column:47}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:18},end:{line:37,column:19}},loc:{start:{line:37,column:38},end:{line:42,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:43,column:26},end:{line:43,column:27}},loc:{start:{line:43,column:48},end:{line:47,column:5}},line:43},8:{name:"(anonymous_8)",decl:{start:{line:48,column:24},end:{line:48,column:25}},loc:{start:{line:48,column:47},end:{line:54,column:5}},line:48},9:{name:"(anonymous_9)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:24},end:{line:60,column:3}},line:56},10:{name:"(anonymous_10)",decl:{start:{line:61,column:18},end:{line:61,column:19}},loc:{start:{line:61,column:24},end:{line:64,column:3}},line:61},11:{name:"(anonymous_11)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:17},end:{line:63,column:68}},line:63},12:{name:"(anonymous_12)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},13:{name:"(anonymous_13)",decl:{start:{line:76,column:19},end:{line:76,column:20}},loc:{start:{line:76,column:25},end:{line:76,column:35}},line:76},14:{name:"(anonymous_14)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:79},end:{line:100,column:9}},line:87}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:14}},type:"default-arg",locations:[{start:{line:8,column:12},end:{line:8,column:14}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:10,column:3}},type:"default-arg",locations:[{start:{line:9,column:13},end:{line:10,column:3}}],line:9},2:{loc:{start:{line:13,column:43},end:{line:13,column:54}},type:"binary-expr",locations:[{start:{line:13,column:43},end:{line:13,column:48}},{start:{line:13,column:52},end:{line:13,column:54}}],line:13},3:{loc:{start:{line:21,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:36,column:28},end:{line:36,column:47}},type:"cond-expr",locations:[{start:{line:36,column:35},end:{line:36,column:42}},{start:{line:36,column:45},end:{line:36,column:47}}],line:36},5:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},6:{loc:{start:{line:44,column:16},end:{line:44,column:51}},type:"cond-expr",locations:[{start:{line:44,column:31},end:{line:44,column:46}},{start:{line:44,column:49},end:{line:44,column:51}}],line:44},7:{loc:{start:{line:46,column:15},end:{line:46,column:54}},type:"cond-expr",locations:[{start:{line:46,column:30},end:{line:46,column:45}},{start:{line:46,column:48},end:{line:46,column:54}}],line:46},8:{loc:{start:{line:49,column:6},end:{line:53,column:7}},type:"if",locations:[{start:{line:49,column:6},end:{line:53,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},9:{loc:{start:{line:51,column:17},end:{line:51,column:38}},type:"cond-expr",locations:[{start:{line:51,column:28},end:{line:51,column:34}},{start:{line:51,column:37},end:{line:51,column:38}}],line:51},10:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:66,column:13},end:{line:66,column:24}},type:"binary-expr",locations:[{start:{line:66,column:13},end:{line:66,column:18}},{start:{line:66,column:22},end:{line:66,column:24}}],line:66},12:{loc:{start:{line:87,column:18},end:{line:100,column:10}},type:"binary-expr",locations:[{start:{line:87,column:18},end:{line:87,column:24}},{start:{line:87,column:28},end:{line:100,column:10}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0],1:[0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAkFI,SACE,KADF;AAlFJ,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,mBAAkB;AAE1B,MAAM,aAAa;AASnB,wBAAwB,kBAAkB;AAAA,EACxC;AAAA,EACA,UAAU,CAAC;AAAA,EACX,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,cAAc;AAChB,GAA2B;AACzB,QAAM,CAAC,OAAO,QAAQ,IAAI,MAAM,SAAS,SAAS,EAAE;AACpD,QAAM,UAAU,MAAM,OAAuB,IAAI;AACjD,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,UAAU;AAE3D,QAAM,gBAAgB,MAAM,QAAQ,MAAM;AACxC,UAAM,KAAK,MAAM,YAAY;AAC7B,WAAO,QAAQ,OAAO,CAAC,SAAS,KAAK,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;AAAA,EACpE,GAAG,CAAC,SAAS,KAAK,CAAC;AAEnB,QAAM,gBAAgB,MAAM,YAAY,MAAM;AAC5C,QAAI,QAAQ,SAAS;AACnB,YAAM,QAAQ,OAAO,cAAc,QAAQ,QAAQ,sBAAsB,EAAE;AAC3E,mBAAa,KAAK,IAAI,OAAO,UAAU,CAAC;AAAA,IAC1C;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,YAAY;AAAA,IACd,OAAO;AAAA,IACP,YAAY;AAAA,IACZ,cAAc,CAAC,SAAU,OAAO,KAAK,CAAC,IAAI;AAAA,IAC1C,cAAc,CAAC,QAAQ,WAAW;AAChC,UAAI,OAAO,SAAS,YAAY,iBAAiB,YAAY;AAC3D,eAAO,EAAC,GAAG,OAAO,SAAS,QAAQ,KAAI;AAAA,MACzC;AACA,aAAO,OAAO;AAAA,IAChB;AAAA,IACA,sBAAsB,CAAC,EAAC,aAAY,MAAM;AACxC,YAAM,IAAI,eAAe,aAAa,CAAC,IAAI;AAC3C,eAAS,CAAC;AACV,eAAS,eAAe,aAAa,CAAC,IAAI,MAAS;AAAA,IACrD;AAAA,IACA,oBAAoB,CAAC,EAAC,YAAY,EAAC,MAAM;AACvC,UAAI,OAAO,MAAM,UAAU;AACzB,iBAAS,CAAC;AACV,iBAAS,MAAM,KAAK,SAAY,CAAC;AACjC,iBAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,CAAC;AAED,QAAM,UAAU,MAAM;AACpB,QAAI,QAAQ;AACV,oBAAc;AAAA,IAChB;AAAA,EACF,GAAG,CAAC,QAAQ,aAAa,CAAC;AAE1B,QAAM,UAAU,MAAM;AACpB,WAAO,iBAAiB,UAAU,aAAa;AAC/C,WAAO,MAAM,OAAO,oBAAoB,UAAU,aAAa;AAAA,EACjE,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,UAAU,MAAM;AACpB,aAAS,SAAS,EAAE;AAAA,EACtB,GAAG,CAAC,KAAK,CAAC;AAEV,SACE,qBAAC,SAAI,WAAU,yBACb;AAAA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,cAAc;AAAA,UAChB,cAAc;AAAA,UACd,WAAW;AAAA,UACX,YAAY;AAAA,UACZ,SAAS,MAAM,SAAS;AAAA,QAC1B,CAAC;AAAA;AAAA,IACH;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACE,GAAG,aAAa,CAAC,GAAG,EAAC,kBAAkB,KAAI,CAAC;AAAA,QAC7C,KAAK;AAAA,QACL,OAAO,EAAC,UAAU,SAAS,UAAU,QAAQ,WAAW,QAAQ,IAAG;AAAA,QACnE,WAAU;AAAA,QAET,oBACC,cAAc,IAAI,CAAC,MAAM,UACvB;AAAA,UAAC;AAAA;AAAA,YAEE,GAAG,aAAa;AAAA,cACf;AAAA,cACA;AAAA,cACA,WAAW,WAAW,mCAAmC;AAAA,gBACvD,4CAA4C,qBAAqB;AAAA,cACnE,CAAC;AAAA,YACH,CAAC;AAAA,YAEA,eAAK,CAAC;AAAA;AAAA,UATF,KAAK,CAAC;AAAA,QAUb,CACD;AAAA;AAAA,IACL;AAAA,KACF;AAEJ;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73020a5a2032027cc342d42db613082f6da43a81"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Li=function(){return l},l}Li();const WT=(Li().s[0]++,140);function wb({value:n,options:e=(Li().b[0][0]++,[]),onChange:t=(Li().b[1][0]++,()=>{Li().f[1]++}),"aria-label":i}){Li().f[0]++;const[r,a]=(Li().s[1]++,ni.useState((Li().b[2][0]++,n||(Li().b[2][1]++,"")))),l=(Li().s[2]++,ni.useRef(null)),[o,p]=(Li().s[3]++,ni.useState(WT)),C=(Li().s[4]++,ni.useMemo(()=>{Li().f[2]++;const te=(Li().s[5]++,r.toLowerCase());return Li().s[6]++,e.filter(J=>(Li().f[3]++,Li().s[7]++,J[0].toLowerCase().includes(te)))},[e,r])),w=(Li().s[8]++,ni.useCallback(()=>{if(Li().f[4]++,Li().s[9]++,l.current){Li().b[3][0]++;const te=(Li().s[10]++,window.innerHeight-l.current.getBoundingClientRect().top);Li().s[11]++,p(Math.min(te,WT))}else Li().b[3][1]++},[])),{isOpen:O,getMenuProps:U,getInputProps:K,getItemProps:j,highlightedIndex:W,openMenu:Y}=(Li().s[12]++,gB({items:C,inputValue:r,itemToString:te=>(Li().f[5]++,Li().s[13]++,te?(Li().b[4][0]++,te[0]):(Li().b[4][1]++,"")),stateReducer:(te,J)=>(Li().f[6]++,Li().s[14]++,J.type===gB.stateChangeTypes.InputClick?(Li().b[5][0]++,Li().s[15]++,{...J.changes,isOpen:!0}):(Li().b[5][1]++,Li().s[16]++,J.changes)),onSelectedItemChange:({selectedItem:te})=>{Li().f[7]++;const J=(Li().s[17]++,te?(Li().b[6][0]++,te[0]):(Li().b[6][1]++,""));Li().s[18]++,a(J),Li().s[19]++,t(te?(Li().b[7][0]++,te[0]):(Li().b[7][1]++,void 0))},onInputValueChange:({inputValue:te})=>{Li().f[8]++,Li().s[20]++,typeof te=="string"?(Li().b[8][0]++,Li().s[21]++,a(te),Li().s[22]++,t(te===""?(Li().b[9][0]++,void 0):(Li().b[9][1]++,te)),Li().s[23]++,Y()):Li().b[8][1]++}}));return Li().s[24]++,ni.useEffect(()=>{Li().f[9]++,Li().s[25]++,O?(Li().b[10][0]++,Li().s[26]++,w()):Li().b[10][1]++},[O,w]),Li().s[27]++,ni.useEffect(()=>(Li().f[10]++,Li().s[28]++,window.addEventListener("resize",w),Li().s[29]++,()=>(Li().f[11]++,Li().s[30]++,window.removeEventListener("resize",w))),[w]),Li().s[31]++,ni.useEffect(()=>{Li().f[12]++,Li().s[32]++,a((Li().b[11][0]++,n||(Li().b[11][1]++,"")))},[n]),Li().s[33]++,Ae.jsxs("div",{className:"maputnik-autocomplete",children:[Ae.jsx("input",{...K({"aria-label":i,className:"maputnik-string",spellCheck:!1,onFocus:()=>(Li().f[13]++,Li().s[34]++,Y())})}),Ae.jsx("div",{...U({},{suppressRefError:!0}),ref:l,style:{position:"fixed",overflow:"auto",maxHeight:o,zIndex:998},className:"maputnik-autocomplete-menu",children:(Li().b[12][0]++,O&&(Li().b[12][1]++,C.map((te,J)=>(Li().f[14]++,Li().s[35]++,Ae.jsx("div",{...j({item:te,index:J,className:e0("maputnik-autocomplete-menu-item",{"maputnik-autocomplete-menu-item-selected":W===J})}),children:te[1]},te[0])))))})]})}function qp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="787db584cc9becf4089365283e16f9ba747f4840",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:6,column:28},end:{line:32,column:1}},1:{start:{line:15,column:2},end:{line:31,column:4}},2:{start:{line:27,column:43},end:{line:27,column:53}},3:{start:{line:33,column:20},end:{line:33,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:28},end:{line:6,column:29}},loc:{start:{line:14,column:6},end:{line:32,column:1}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:27,column:34},end:{line:27,column:35}},loc:{start:{line:27,column:43},end:{line:27,column:53}},line:27}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:16}},type:"default-arg",locations:[{start:{line:9,column:14},end:{line:9,column:16}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA8BM;AA5BN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAUtD,MAAM,sBAA0D,CAAC;AAAA,EAC/D,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,YAAY,CAAC;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,QAAQ;AAAA,MACjB,WAAW,OAAO,MAAM;AAAA,MACxB;AAAA,MACA,eAAa;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,WAAW,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,MAC7C;AAAA;AAAA,EACF;AAEJ;AAGA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"787db584cc9becf4089365283e16f9ba747f4840"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return qp=function(){return l},l}qp();qp().s[0]++;const xse=({onChange:n=(qp().b[0][0]++,()=>{qp().f[1]++}),sourceIds:e=(qp().b[1][0]++,[]),wdKey:t,value:i,error:r,t:a})=>(qp().f[0]++,qp().s[1]++,Ae.jsx(Us,{label:a("Source"),fieldSpec:oa.layer.source,error:r,"data-wd-key":t,children:Ae.jsx(wb,{value:i,onChange:n,options:e?.map(l=>(qp().f[2]++,qp().s[2]++,[l,l]))})})),eN=(qp().s[3]++,ls()(xse));function Hp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="61cb059654b456e27f782356448ebd0362f3cb6a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:6,column:33},end:{line:31,column:1}},1:{start:{line:14,column:2},end:{line:30,column:4}},2:{start:{line:26,column:46},end:{line:26,column:52}},3:{start:{line:32,column:25},end:{line:32,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:33},end:{line:6,column:34}},loc:{start:{line:13,column:6},end:{line:31,column:1}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:8,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:26,column:39},end:{line:26,column:40}},loc:{start:{line:26,column:46},end:{line:26,column:52}},line:26}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:8,column:3}},type:"default-arg",locations:[{start:{line:7,column:13},end:{line:8,column:3}}],line:7},1:{loc:{start:{line:9,column:2},end:{line:9,column:21}},type:"default-arg",locations:[{start:{line:9,column:19},end:{line:9,column:21}}],line:9}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0,2:0},b:{0:[0],1:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA4BM;AA1BN,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA+B,uBAAuB;AAStD,MAAM,2BAAoE,CAAC;AAAA,EACzE,WAAW,MAAM;AAAA,EAAC;AAAA,EAClB,iBAAiB,CAAC;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,cAAc;AAAA,MACvB,WAAW,OAAO,MAAM,cAAc;AAAA,MACtC,eAAY;AAAA,MACZ;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA,SAAS,gBAAgB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,MAC5C;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"61cb059654b456e27f782356448ebd0362f3cb6a"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Hp=function(){return l},l}Hp();Hp().s[0]++;const Mse=({onChange:n=(Hp().b[0][0]++,()=>{Hp().f[1]++}),sourceLayerIds:e=(Hp().b[1][0]++,[]),value:t,error:i,t:r})=>(Hp().f[0]++,Hp().s[1]++,Ae.jsx(Us,{label:r("Source Layer"),fieldSpec:$a.layer["source-layer"],"data-wd-key":"layer-source-layer",error:i,children:Ae.jsx(wb,{value:t,onChange:n,options:e?.map(a=>(Hp().f[2]++,Hp().s[2]++,[a,a]))})})),tN=(Hp().s[3]++,ls()(Mse));function B8(){var n="/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",e="674dcf7f1706a4f312a810bdf5e5997ddaf065e0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts",statementMap:{0:{start:{line:1,column:33},end:{line:1,column:97}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/non-source-layers.ts"],names:[],mappings:"AAAO,aAAM,oBAAoB,CAAC,cAAc,UAAU,aAAa,WAAW,cAAc;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"674dcf7f1706a4f312a810bdf5e5997ddaf065e0"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return B8=function(){return l},l}B8();const yB=(B8().s[0]++,["background","raster","hillshade","heatmap","color-relief"]);function zn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",e="b6524a07eed33c2f5207a7ced7cb94a66438bfb4",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx",statementMap:{0:{start:{line:12,column:13},end:{line:33,column:3}},1:{start:{line:13,column:4},end:{line:16,column:5}},2:{start:{line:13,column:38},end:{line:13,column:60}},3:{start:{line:14,column:6},end:{line:14,column:72}},4:{start:{line:15,column:6},end:{line:15,column:13}},5:{start:{line:17,column:26},end:{line:17,column:52}},6:{start:{line:18,column:18},end:{line:21,column:5}},7:{start:{line:22,column:4},end:{line:27,column:5}},8:{start:{line:23,column:6},end:{line:23,column:39}},9:{start:{line:24,column:6},end:{line:26,column:7}},10:{start:{line:25,column:8},end:{line:25,column:59}},11:{start:{line:28,column:4},end:{line:28,column:30}},12:{start:{line:29,column:4},end:{line:32,column:7}},13:{start:{line:30,column:6},end:{line:30,column:47}},14:{start:{line:31,column:6},end:{line:31,column:37}},15:{start:{line:35,column:4},end:{line:35,column:17}},16:{start:{line:36,column:18},end:{line:40,column:5}},17:{start:{line:41,column:4},end:{line:47,column:5}},18:{start:{line:42,column:6},end:{line:42,column:56}},19:{start:{line:43,column:27},end:{line:43,column:72}},20:{start:{line:44,column:6},end:{line:46,column:7}},21:{start:{line:45,column:8},end:{line:45,column:48}},22:{start:{line:48,column:4},end:{line:48,column:23}},23:{start:{line:51,column:20},end:{line:51,column:34}},24:{start:{line:52,column:20},end:{line:52,column:35}},25:{start:{line:53,column:32},end:{line:53,column:56}},26:{start:{line:54,column:32},end:{line:54,column:56}},27:{start:{line:55,column:4},end:{line:62,column:5}},28:{start:{line:59,column:6},end:{line:61,column:9}},29:{start:{line:65,column:22},end:{line:65,column:54}},30:{start:{line:66,column:4},end:{line:66,column:34}},31:{start:{line:69,column:4},end:{line:86,column:5}},32:{start:{line:71,column:8},end:{line:71,column:18}},33:{start:{line:74,column:8},end:{line:74,column:113}},34:{start:{line:74,column:69},end:{line:74,column:92}},35:{start:{line:74,column:110},end:{line:74,column:111}},36:{start:{line:76,column:8},end:{line:76,column:109}},37:{start:{line:76,column:69},end:{line:76,column:88}},38:{start:{line:76,column:106},end:{line:76,column:107}},39:{start:{line:83,column:8},end:{line:83,column:133}},40:{start:{line:83,column:69},end:{line:83,column:112}},41:{start:{line:83,column:130},end:{line:83,column:131}},42:{start:{line:85,column:8},end:{line:85,column:18}},43:{start:{line:89,column:14},end:{line:89,column:26}},44:{start:{line:90,column:20},end:{line:90,column:52}},45:{start:{line:91,column:19},end:{line:91,column:61}},46:{start:{line:93,column:4},end:{line:106,column:5}},47:{start:{line:94,column:6},end:{line:105,column:11}},48:{start:{line:100,column:27},end:{line:100,column:57}},49:{start:{line:107,column:4},end:{line:165,column:6}},50:{start:{line:124,column:18},end:{line:124,column:56}},51:{start:{line:133,column:33},end:{line:133,column:59}},52:{start:{line:142,column:33},end:{line:142,column:61}},53:{start:{line:150,column:33},end:{line:150,column:69}},54:{start:{line:168,column:17},end:{line:168,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:19},end:{line:33,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:38},end:{line:13,column:60}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:41},end:{line:32,column:5}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:49,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:44},end:{line:63,column:3}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:29},end:{line:67,column:3}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:19},end:{line:87,column:3}},line:68},7:{name:"(anonymous_7)",decl:{start:{line:74,column:57},end:{line:74,column:58}},loc:{start:{line:74,column:69},end:{line:74,column:92}},line:74},8:{name:"(anonymous_8)",decl:{start:{line:74,column:98},end:{line:74,column:99}},loc:{start:{line:74,column:110},end:{line:74,column:111}},line:74},9:{name:"(anonymous_9)",decl:{start:{line:76,column:57},end:{line:76,column:58}},loc:{start:{line:76,column:69},end:{line:76,column:88}},line:76},10:{name:"(anonymous_10)",decl:{start:{line:76,column:94},end:{line:76,column:95}},loc:{start:{line:76,column:106},end:{line:76,column:107}},line:76},11:{name:"(anonymous_11)",decl:{start:{line:83,column:57},end:{line:83,column:58}},loc:{start:{line:83,column:69},end:{line:83,column:112}},line:83},12:{name:"(anonymous_12)",decl:{start:{line:83,column:118},end:{line:83,column:119}},loc:{start:{line:83,column:130},end:{line:83,column:131}},line:83},13:{name:"(anonymous_13)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:166,column:3}},line:88},14:{name:"(anonymous_14)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:100,column:57}},line:100},15:{name:"(anonymous_15)",decl:{start:{line:123,column:26},end:{line:123,column:27}},loc:{start:{line:123,column:33},end:{line:125,column:17}},line:123},16:{name:"(anonymous_16)",decl:{start:{line:133,column:26},end:{line:133,column:27}},loc:{start:{line:133,column:33},end:{line:133,column:59}},line:133},17:{name:"(anonymous_17)",decl:{start:{line:142,column:26},end:{line:142,column:27}},loc:{start:{line:142,column:33},end:{line:142,column:61}},line:142},18:{name:"(anonymous_18)",decl:{start:{line:150,column:26},end:{line:150,column:27}},loc:{start:{line:150,column:33},end:{line:150,column:69}},line:150}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:16,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},2:{loc:{start:{line:24,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:24,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},3:{loc:{start:{line:24,column:10},end:{line:24,column:84}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:54}},{start:{line:24,column:58},end:{line:24,column:84}}],line:24},4:{loc:{start:{line:41,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:43,column:27},end:{line:43,column:72}},type:"binary-expr",locations:[{start:{line:43,column:27},end:{line:43,column:66}},{start:{line:43,column:70},end:{line:43,column:72}}],line:43},6:{loc:{start:{line:44,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:44,column:6},end:{line:46,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},7:{loc:{start:{line:55,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:57,column:6},end:{line:57,column:160}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:25}},{start:{line:57,column:29},end:{line:57,column:52}},{start:{line:57,column:56},end:{line:57,column:106}},{start:{line:57,column:110},end:{line:57,column:160}}],line:57},9:{loc:{start:{line:65,column:22},end:{line:65,column:54}},type:"binary-expr",locations:[{start:{line:65,column:22},end:{line:65,column:48}},{start:{line:65,column:52},end:{line:65,column:54}}],line:65},10:{loc:{start:{line:66,column:11},end:{line:66,column:33}},type:"binary-expr",locations:[{start:{line:66,column:11},end:{line:66,column:27}},{start:{line:66,column:31},end:{line:66,column:33}}],line:66},11:{loc:{start:{line:69,column:4},end:{line:86,column:5}},type:"switch",locations:[{start:{line:70,column:6},end:{line:71,column:18}},{start:{line:72,column:6},end:{line:72,column:23}},{start:{line:73,column:6},end:{line:74,column:113}},{start:{line:75,column:6},end:{line:76,column:109}},{start:{line:77,column:6},end:{line:77,column:21}},{start:{line:78,column:6},end:{line:78,column:20}},{start:{line:79,column:6},end:{line:79,column:18}},{start:{line:80,column:6},end:{line:80,column:28}},{start:{line:81,column:6},end:{line:81,column:18}},{start:{line:82,column:6},end:{line:83,column:133}},{start:{line:84,column:6},end:{line:85,column:18}}],line:69},12:{loc:{start:{line:83,column:69},end:{line:83,column:112}},type:"binary-expr",locations:[{start:{line:83,column:69},end:{line:83,column:88}},{start:{line:83,column:92},end:{line:83,column:112}}],line:83},13:{loc:{start:{line:93,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},14:{loc:{start:{line:136,column:12},end:{line:144,column:13}},type:"binary-expr",locations:[{start:{line:136,column:12},end:{line:136,column:44}},{start:{line:136,column:64},end:{line:144,column:13}}],line:136},15:{loc:{start:{line:145,column:12},end:{line:152,column:13}},type:"binary-expr",locations:[{start:{line:145,column:12},end:{line:145,column:56}},{start:{line:145,column:76},end:{line:152,column:13}}],line:145}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0,0,0],9:[0,0],10:[0,0],11:[0,0,0,0,0,0,0,0,0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalAdd.tsx"],names:[],mappings:"AAqIQ,SAEE,KAFF;AArIR,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAGtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB;AAmBlC,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,QAAI,KAAK,MAAM,OAAO,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,EAAE,GAAG;AACvD,WAAK,SAAS,EAAE,OAAO,KAAK,MAAM,EAAE,yBAAyB,EAAE,CAAC;AAChE;AAAA,IACF;AAEA,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,cAAc,GAAG;AAC7E,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAC9C,SAAK,SAAS,EAAE,OAAO,KAAK,GAAG,MAAM;AACnC,WAAK,MAAM,eAAe,aAAa;AACvC,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,IACT;AAEA,QAAG,OAAO,KAAK,MAAM,OAAO,EAAE,SAAS,GAAG;AACxC,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,eAAe,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE,UAAU,CAAC;AACjE,UAAI,aAAa,SAAS,GAAG;AAC3B,cAAM,cAAc,IAAI,aAAa,CAAC;AAAA,MACxC;AAAA,IACF;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAkC;AAE3C,YAAO,MAAM;AAAA,MACX,KAAK;AACH,eAAO,CAAC;AAAA,MACV,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACzG,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MACrG,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO,OAAO,QAAQ,KAAK,MAAM,OAAO,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,YAAY,EAAE,SAAS,SAAS,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC;AAAA,MAC7H;AACE,eAAO,CAAC;AAAA,IACZ;AAAA,EACF;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AACzD,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO;AACpB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ;AAAA,UAAC;AAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAS,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK,CAAC;AAAA,YAC5C,WAAU;AAAA,YACX;AAAA;AAAA,QAED;AAAA,SACF;AAAA,IAEJ;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAET;AAAA;AAAA,UACD,qBAAC,SAAI,WAAU,sBACb;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAc;AACvB,uBAAK,SAAS,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC;AAAA,gBACtC;AAAA;AAAA,YACF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM;AAAA,gBAClB,OAAM;AAAA,gBACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,YACxE;AAAA,YACC,KAAK,MAAM,SAAS,gBACvB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,OAAM;AAAA,gBACN,OAAO,KAAK,MAAM;AAAA,gBAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,YACtD;AAAA,YAEG,CAAC,kBAAkB,SAAS,KAAK,MAAM,IAAI,KAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,gBAAgB;AAAA,gBAChB,OAAO,KAAK,MAAM,cAAc;AAAA,gBAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,YAC9D;AAAA,YAEE;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,eAAY;AAAA,gBAEX,YAAE,WAAW;AAAA;AAAA,YAChB;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b6524a07eed33c2f5207a7ced7cb94a66438bfb4"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return zn=function(){return l},l}zn();class wse extends ni.Component{addLayer=(zn().s[0]++,()=>{if(zn().f[0]++,zn().s[1]++,this.props.layers.some(i=>(zn().f[1]++,zn().s[2]++,i.id===this.state.id))){zn().b[0][0]++,zn().s[3]++,this.setState({error:this.props.t("Layer ID already exists")}),zn().s[4]++;return}else zn().b[0][1]++;const e=(zn().s[5]++,this.props.layers.slice(0)),t=(zn().s[6]++,{id:this.state.id,type:this.state.type});zn().s[7]++,this.state.type!=="background"?(zn().b[1][0]++,zn().s[8]++,t.source=this.state.source,zn().s[9]++,zn().b[3][0]++,!yB.includes(this.state.type)&&(zn().b[3][1]++,this.state["source-layer"])?(zn().b[2][0]++,zn().s[10]++,t["source-layer"]=this.state["source-layer"]):zn().b[2][1]++):zn().b[1][1]++,zn().s[11]++,e.push(t),zn().s[12]++,this.setState({error:null},()=>{zn().f[2]++,zn().s[13]++,this.props.onLayersChange(e),zn().s[14]++,this.props.onOpenToggle(!1)})});constructor(e){zn().f[3]++,zn().s[15]++,super(e);const t=(zn().s[16]++,{type:"fill",id:"",error:null});if(zn().s[17]++,Object.keys(e.sources).length>0){zn().b[4][0]++,zn().s[18]++,t.source=Object.keys(this.props.sources)[0];const i=(zn().s[19]++,zn().b[5][0]++,this.props.sources[t.source].layers||(zn().b[5][1]++,[]));zn().s[20]++,i.length>0?(zn().b[6][0]++,zn().s[21]++,t["source-layer"]=i[0]):zn().b[6][1]++}else zn().b[4][1]++;zn().s[22]++,this.state=t}componentDidUpdate(e,t){zn().f[4]++;const i=(zn().s[23]++,t.type),r=(zn().s[24]++,this.state.type),a=(zn().s[25]++,this.getSources(i)),l=(zn().s[26]++,this.getSources(r));zn().s[27]++,zn().b[8][0]++,i!==r&&(zn().b[8][1]++,t.source!=="")&&(zn().b[8][2]++,a.indexOf(t.source)>-1)&&(zn().b[8][3]++,l.indexOf(this.state.source)<0)?(zn().b[7][0]++,zn().s[28]++,this.setState({source:""})):zn().b[7][1]++}getLayersForSource(e){zn().f[5]++;const t=(zn().s[29]++,zn().b[9][0]++,this.props.sources[e]||(zn().b[9][1]++,{}));return zn().s[30]++,zn().b[10][0]++,t.layers||(zn().b[10][1]++,[])}getSources(e){switch(zn().f[6]++,zn().s[31]++,e){case"background":return zn().b[11][0]++,zn().s[32]++,[];case"hillshade":zn().b[11][1]++;case"color-relief":return zn().b[11][2]++,zn().s[33]++,Object.entries(this.props.sources).filter(([t,i])=>(zn().f[7]++,zn().s[34]++,i.type==="raster-dem")).map(([t,i])=>(zn().f[8]++,zn().s[35]++,t));case"raster":return zn().b[11][3]++,zn().s[36]++,Object.entries(this.props.sources).filter(([t,i])=>(zn().f[9]++,zn().s[37]++,i.type==="raster")).map(([t,i])=>(zn().f[10]++,zn().s[38]++,t));case"heatmap":zn().b[11][4]++;case"circle":zn().b[11][5]++;case"fill":zn().b[11][6]++;case"fill-extrusion":zn().b[11][7]++;case"line":zn().b[11][8]++;case"symbol":return zn().b[11][9]++,zn().s[39]++,Object.entries(this.props.sources).filter(([t,i])=>(zn().f[11]++,zn().s[40]++,zn().b[12][0]++,i.type==="vector"||(zn().b[12][1]++,i.type==="geojson"))).map(([t,i])=>(zn().f[12]++,zn().s[41]++,t));default:return zn().b[11][10]++,zn().s[42]++,[]}}render(){zn().f[13]++;const e=(zn().s[43]++,this.props.t),t=(zn().s[44]++,this.getSources(this.state.type)),i=(zn().s[45]++,this.getLayersForSource(this.state.source));let r;return zn().s[46]++,this.state.error?(zn().b[13][0]++,zn().s[47]++,r=Ae.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,Ae.jsx("a",{href:"#",onClick:()=>(zn().f[14]++,zn().s[48]++,this.setState({error:null})),className:"maputnik-modal-error-close",children:""})]})):zn().b[13][1]++,zn().s[49]++,Ae.jsxs(jg,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:[r,Ae.jsxs("div",{className:"maputnik-add-layer",children:[Ae.jsx(Kj,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:a=>{zn().f[15]++,zn().s[50]++,this.setState({id:a,error:null})}}),Ae.jsx(Pj,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:a=>(zn().f[16]++,zn().s[51]++,this.setState({type:a}))}),(zn().b[14][0]++,this.state.type!=="background"&&(zn().b[14][1]++,Ae.jsx(eN,{sourceIds:t,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:a=>(zn().f[17]++,zn().s[52]++,this.setState({source:a}))}))),(zn().b[15][0]++,!yB.includes(this.state.type)&&(zn().b[15][1]++,Ae.jsx(tN,{sourceLayerIds:i,value:this.state["source-layer"],onChange:a=>(zn().f[18]++,zn().s[53]++,this.setState({"source-layer":a}))}))),Ae.jsx(nl,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:e("Add Layer")})]})]})}}const Sse=(zn().s[54]++,ls()(wse));function k1(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return k1=function(){return l},l}k1();let QT=(k1().s[0]++,0);function zv(n=(k1().b[0][0]++,"")){return k1().f[0]++,k1().s[1]++,QT++,k1().s[2]++,n+QT}function Nr(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Nr=function(){return l},l}Nr();function Ese(n,e){Nr().f[0]++;const t=(Nr().s[0]++,{...n.paint});Nr().s[1]++,Object.keys(t).forEach(r=>{Nr().f[1]++,Nr().s[2]++,r in $a["paint_"+e]?Nr().b[0][1]++:(Nr().b[0][0]++,Nr().s[3]++,delete t[r])});const i=(Nr().s[4]++,{...n.layout});return Nr().s[5]++,Object.keys(i).forEach(r=>{Nr().f[2]++,Nr().s[6]++,r in $a["layout_"+e]?Nr().b[1][1]++:(Nr().b[1][0]++,Nr().s[7]++,delete i[r])}),Nr().s[8]++,{...n,paint:t,layout:i,type:e}}function Bse(n,e,t,i){if(Nr().f[3]++,Nr().s[9]++,i===void 0)if(Nr().b[2][0]++,Nr().s[10]++,e){Nr().b[3][0]++;const r=(Nr().s[11]++,{...n,[e]:{...n[e]}});return Nr().s[12]++,delete r[e][t],Nr().s[13]++,Object.keys(r[e]).length<1?(Nr().b[4][0]++,Nr().s[14]++,delete r[e]):Nr().b[4][1]++,Nr().s[15]++,r}else{Nr().b[3][1]++;const r=(Nr().s[16]++,{...n});return Nr().s[17]++,delete r[t],Nr().s[18]++,r}else return Nr().b[2][1]++,Nr().s[19]++,e?(Nr().b[5][0]++,Nr().s[20]++,{...n,[e]:{...n[e],[t]:i}}):(Nr().b[5][1]++,Nr().s[21]++,{...n,[t]:i})}function dv(n){return Nr().f[4]++,Nr().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function Ose(n,e){Nr().f[5]++;const t=(Nr().s[23]++,dv(n[e].id));let i=(Nr().s[24]++,e);Nr().s[25]++;for(let r=(Nr().s[26]++,e);r>0;r--){const a=(Nr().s[27]++,dv(n[r-1].id));if(Nr().s[28]++,a===t)Nr().b[6][0]++,Nr().s[29]++,i=r-1;else return Nr().b[6][1]++,Nr().s[30]++,i}return Nr().s[31]++,i}function an(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="f68294db07afb93676beed55b7a9de47e3a7c779",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:23,column:24},end:{line:26,column:3}},1:{start:{line:30,column:4},end:{line:30,column:17}},2:{start:{line:31,column:4},end:{line:31,column:45}},3:{start:{line:32,column:4},end:{line:32,column:48}},4:{start:{line:33,column:4},end:{line:42,column:6}},5:{start:{line:45,column:4},end:{line:54,column:7}},6:{start:{line:56,column:17},end:{line:73,column:3}},7:{start:{line:57,column:14},end:{line:57,column:15}},8:{start:{line:58,column:22},end:{line:58,column:24}},9:{start:{line:59,column:4},end:{line:68,column:7}},10:{start:{line:60,column:26},end:{line:60,column:51}},11:{start:{line:61,column:24},end:{line:61,column:52}},12:{start:{line:62,column:6},end:{line:64,column:7}},13:{start:{line:63,column:8},end:{line:63,column:63}},14:{start:{line:65,column:6},end:{line:67,column:9}},15:{start:{line:66,column:8},end:{line:66,column:17}},16:{start:{line:69,column:4},end:{line:72,column:7}},17:{start:{line:75,column:19},end:{line:75,column:21}},18:{start:{line:76,column:41},end:{line:76,column:50}},19:{start:{line:77,column:4},end:{line:94,column:5}},20:{start:{line:77,column:17},end:{line:77,column:18}},21:{start:{line:78,column:24},end:{line:78,column:44}},22:{start:{line:79,column:28},end:{line:79,column:52}},23:{start:{line:80,column:6},end:{line:83,column:8}},24:{start:{line:84,column:20},end:{line:87,column:7}},25:{start:{line:88,column:6},end:{line:93,column:7}},26:{start:{line:89,column:26},end:{line:89,column:51}},27:{start:{line:90,column:8},end:{line:90,column:30}},28:{start:{line:92,column:8},end:{line:92,column:29}},29:{start:{line:95,column:4},end:{line:95,column:18}},30:{start:{line:98,column:22},end:{line:98,column:50}},31:{start:{line:99,column:22},end:{line:99,column:55}},32:{start:{line:100,column:4},end:{line:104,column:5}},33:{start:{line:101,column:6},end:{line:101,column:68}},34:{start:{line:103,column:6},end:{line:103,column:35}},35:{start:{line:105,column:4},end:{line:107,column:7}},36:{start:{line:110,column:22},end:{line:110,column:78}},37:{start:{line:111,column:4},end:{line:111,column:51}},38:{start:{line:114,column:4},end:{line:116,column:5}},39:{start:{line:115,column:6},end:{line:115,column:18}},40:{start:{line:118,column:18},end:{line:120,column:7}},41:{start:{line:121,column:6},end:{line:125,column:7}},42:{start:{line:122,column:8},end:{line:124,column:10}},43:{start:{line:126,column:6},end:{line:126,column:17}},44:{start:{line:128,column:24},end:{line:131,column:5}},45:{start:{line:133,column:18},end:{line:135,column:7}},46:{start:{line:136,column:6},end:{line:136,column:27}},47:{start:{line:137,column:6},end:{line:137,column:17}},48:{start:{line:139,column:23},end:{line:142,column:5}},49:{start:{line:143,column:25},end:{line:143,column:53}},50:{start:{line:144,column:4},end:{line:144,column:24}},51:{start:{line:147,column:4},end:{line:163,column:5}},52:{start:{line:148,column:31},end:{line:148,column:59}},53:{start:{line:149,column:6},end:{line:162,column:7}},54:{start:{line:150,column:23},end:{line:150,column:44}},55:{start:{line:151,column:24},end:{line:154,column:9}},56:{start:{line:155,column:25},end:{line:160,column:19}},57:{start:{line:156,column:10},end:{line:156,column:37}},58:{start:{line:157,column:10},end:{line:159,column:11}},59:{start:{line:158,column:12},end:{line:158,column:36}},60:{start:{line:161,column:8},end:{line:161,column:33}},61:{start:{line:166,column:22},end:{line:166,column:24}},62:{start:{line:167,column:14},end:{line:167,column:15}},63:{start:{line:168,column:26},end:{line:168,column:46}},64:{start:{line:169,column:4},end:{line:219,column:7}},65:{start:{line:170,column:26},end:{line:170,column:51}},66:{start:{line:171,column:6},end:{line:184,column:7}},67:{start:{line:172,column:36},end:{line:182,column:9}},68:{start:{line:176,column:47},end:{line:176,column:52}},69:{start:{line:183,column:8},end:{line:183,column:28}},70:{start:{line:185,column:6},end:{line:218,column:9}},71:{start:{line:186,column:25},end:{line:186,column:72}},72:{start:{line:187,column:27},end:{line:189,column:10}},73:{start:{line:188,column:10},end:{line:188,column:97}},74:{start:{line:190,column:32},end:{line:190,column:34}},75:{start:{line:191,column:8},end:{line:193,column:9}},76:{start:{line:192,column:10},end:{line:192,column:53}},77:{start:{line:194,column:41},end:{line:215,column:9}},78:{start:{line:216,column:8},end:{line:216,column:33}},79:{start:{line:217,column:8},end:{line:217,column:17}},80:{start:{line:220,column:14},end:{line:220,column:26}},81:{start:{line:221,column:4},end:{line:274,column:6}},82:{start:{line:277,column:27},end:{line:277,column:72}},83:{start:{line:278,column:18},end:{line:291,column:1}},84:{start:{line:279,column:18},end:{line:279,column:97}},85:{start:{line:280,column:24},end:{line:288,column:3}},86:{start:{line:281,column:29},end:{line:281,column:34}},87:{start:{line:282,column:4},end:{line:282,column:22}},88:{start:{line:282,column:15},end:{line:282,column:22}},89:{start:{line:283,column:21},end:{line:283,column:78}},90:{start:{line:283,column:55},end:{line:283,column:77}},91:{start:{line:284,column:21},end:{line:284,column:76}},92:{start:{line:284,column:55},end:{line:284,column:75}},93:{start:{line:285,column:4},end:{line:287,column:5}},94:{start:{line:286,column:6},end:{line:286,column:48}},95:{start:{line:289,column:19},end:{line:289,column:56}},96:{start:{line:289,column:47},end:{line:289,column:55}},97:{start:{line:290,column:2},end:{line:290,column:288}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:24,column:19},end:{line:24,column:20}},loc:{start:{line:24,column:25},end:{line:25,column:5}},line:24},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:21},end:{line:43,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:55,column:3}},line:44},3:{name:"(anonymous_3)",decl:{start:{line:56,column:17},end:{line:56,column:18}},loc:{start:{line:56,column:23},end:{line:73,column:3}},line:56},4:{name:"(anonymous_4)",decl:{start:{line:59,column:33},end:{line:59,column:34}},loc:{start:{line:59,column:45},end:{line:68,column:5}},line:59},5:{name:"(anonymous_5)",decl:{start:{line:65,column:21},end:{line:65,column:22}},loc:{start:{line:65,column:33},end:{line:67,column:7}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:18},end:{line:96,column:3}},line:74},7:{name:"(anonymous_7)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:37},end:{line:108,column:3}},line:97},8:{name:"(anonymous_8)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:32},end:{line:112,column:3}},line:109},9:{name:"(anonymous_9)",decl:{start:{line:113,column:2},end:{line:113,column:3}},loc:{start:{line:113,column:46},end:{line:145,column:3}},line:113},10:{name:"getRequiredProps",decl:{start:{line:117,column:13},end:{line:117,column:29}},loc:{start:{line:117,column:37},end:{line:127,column:5}},line:117},11:{name:"withoutLayers",decl:{start:{line:132,column:13},end:{line:132,column:26}},loc:{start:{line:132,column:34},end:{line:138,column:5}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:146,column:2},end:{line:146,column:3}},loc:{start:{line:146,column:32},end:{line:164,column:3}},line:146},13:{name:"(anonymous_13)",decl:{start:{line:155,column:50},end:{line:155,column:51}},loc:{start:{line:155,column:63},end:{line:160,column:9}},line:155},14:{name:"(anonymous_14)",decl:{start:{line:165,column:2},end:{line:165,column:3}},loc:{start:{line:165,column:11},end:{line:275,column:3}},line:165},15:{name:"(anonymous_15)",decl:{start:{line:169,column:26},end:{line:169,column:27}},loc:{start:{line:169,column:38},end:{line:219,column:5}},line:169},16:{name:"(anonymous_16)",decl:{start:{line:176,column:40},end:{line:176,column:41}},loc:{start:{line:176,column:47},end:{line:176,column:52}},line:176},17:{name:"(anonymous_17)",decl:{start:{line:185,column:21},end:{line:185,column:22}},loc:{start:{line:185,column:44},end:{line:218,column:7}},line:185},18:{name:"(anonymous_18)",decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:61},end:{line:189,column:9}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:278,column:18},end:{line:278,column:19}},loc:{start:{line:278,column:29},end:{line:291,column:1}},line:278},20:{name:"(anonymous_20)",decl:{start:{line:280,column:24},end:{line:280,column:25}},loc:{start:{line:280,column:35},end:{line:288,column:3}},line:280},21:{name:"(anonymous_21)",decl:{start:{line:283,column:44},end:{line:283,column:45}},loc:{start:{line:283,column:55},end:{line:283,column:77}},line:283},22:{name:"(anonymous_22)",decl:{start:{line:284,column:44},end:{line:284,column:45}},loc:{start:{line:284,column:55},end:{line:284,column:75}},line:284},23:{name:"(anonymous_23)",decl:{start:{line:289,column:36},end:{line:289,column:37}},loc:{start:{line:289,column:47},end:{line:289,column:55}},line:289}},branchMap:{0:{loc:{start:{line:62,column:6},end:{line:64,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:64,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},1:{loc:{start:{line:82,column:8},end:{line:82,column:79}},type:"cond-expr",locations:[{start:{line:82,column:41},end:{line:82,column:75}},{start:{line:82,column:78},end:{line:82,column:79}}],line:82},2:{loc:{start:{line:88,column:6},end:{line:93,column:7}},type:"if",locations:[{start:{line:88,column:6},end:{line:93,column:7}},{start:{line:91,column:13},end:{line:93,column:7}}],line:88},3:{loc:{start:{line:88,column:10},end:{line:88,column:81}},type:"binary-expr",locations:[{start:{line:88,column:10},end:{line:88,column:23}},{start:{line:88,column:27},end:{line:88,column:81}}],line:88},4:{loc:{start:{line:100,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:104,column:5}},{start:{line:102,column:11},end:{line:104,column:5}}],line:100},5:{loc:{start:{line:111,column:11},end:{line:111,column:50}},type:"cond-expr",locations:[{start:{line:111,column:34},end:{line:111,column:38}},{start:{line:111,column:41},end:{line:111,column:50}}],line:111},6:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},7:{loc:{start:{line:121,column:6},end:{line:125,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:125,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},8:{loc:{start:{line:143,column:27},end:{line:143,column:52}},type:"binary-expr",locations:[{start:{line:143,column:27},end:{line:143,column:38}},{start:{line:143,column:42},end:{line:143,column:52}}],line:143},9:{loc:{start:{line:147,column:4},end:{line:163,column:5}},type:"if",locations:[{start:{line:147,column:4},end:{line:163,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},10:{loc:{start:{line:149,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:162,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:149},11:{loc:{start:{line:149,column:10},end:{line:149,column:51}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:26}},{start:{line:149,column:30},end:{line:149,column:51}}],line:149},12:{loc:{start:{line:157,column:10},end:{line:159,column:11}},type:"if",locations:[{start:{line:157,column:10},end:{line:159,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},13:{loc:{start:{line:157,column:14},end:{line:157,column:68}},type:"binary-expr",locations:[{start:{line:157,column:14},end:{line:157,column:32}},{start:{line:157,column:36},end:{line:157,column:68}}],line:157},14:{loc:{start:{line:171,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:184,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:171},15:{loc:{start:{line:178,column:22},end:{line:178,column:98}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:57}},{start:{line:178,column:61},end:{line:178,column:98}}],line:178},16:{loc:{start:{line:188,column:17},end:{line:188,column:96}},type:"binary-expr",locations:[{start:{line:188,column:17},end:{line:188,column:29}},{start:{line:188,column:33},end:{line:188,column:62}},{start:{line:188,column:66},end:{line:188,column:96}}],line:188},17:{loc:{start:{line:191,column:8},end:{line:193,column:9}},type:"if",locations:[{start:{line:191,column:8},end:{line:193,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:191},18:{loc:{start:{line:198,column:52},end:{line:198,column:153}},type:"binary-expr",locations:[{start:{line:198,column:52},end:{line:198,column:69}},{start:{line:198,column:73},end:{line:198,column:112}},{start:{line:198,column:116},end:{line:198,column:153}}],line:198},19:{loc:{start:{line:199,column:53},end:{line:199,column:105}},type:"binary-expr",locations:[{start:{line:199,column:53},end:{line:199,column:84}},{start:{line:199,column:88},end:{line:199,column:105}}],line:199},20:{loc:{start:{line:206,column:25},end:{line:206,column:43}},type:"binary-expr",locations:[{start:{line:206,column:25},end:{line:206,column:37}},{start:{line:206,column:41},end:{line:206,column:43}}],line:206},21:{loc:{start:{line:251,column:26},end:{line:251,column:96}},type:"cond-expr",locations:[{start:{line:251,column:69},end:{line:251,column:82}},{start:{line:251,column:85},end:{line:251,column:96}}],line:251},22:{loc:{start:{line:282,column:4},end:{line:282,column:22}},type:"if",locations:[{start:{line:282,column:4},end:{line:282,column:22}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},23:{loc:{start:{line:285,column:4},end:{line:287,column:5}},type:"if",locations:[{start:{line:285,column:4},end:{line:287,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:285},24:{loc:{start:{line:285,column:8},end:{line:285,column:67}},type:"binary-expr",locations:[{start:{line:285,column:8},end:{line:285,column:23}},{start:{line:285,column:27},end:{line:285,column:42}},{start:{line:285,column:46},end:{line:285,column:67}}],line:285}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AA+NoB,cAoEd,YApEc;AA/NpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OAEK;AACP;AAAA,EACE;AAAA,EACA;AAAA,OACK;AAEP,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAGrB,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA+B,uBAAuB;AAwBtD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YAED,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAY;AAAA,QACZ,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AAMvE,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,UAAU,WAAW,UAAU,eAAe,EAAE,sBAAsB,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC;AAE9F,QAAM,gBAAgB,CAAC,UAAwB;AAC7C,UAAM,EAAC,QAAQ,KAAI,IAAI;AACvB,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,OAAO,EAAE;AACvE,UAAM,WAAW,MAAM,OAAO,UAAU,WAAS,MAAM,OAAO,KAAK,EAAE;AAErE,QAAI,aAAa,MAAM,aAAa,MAAM,aAAa,UAAU;AAC/D,YAAM,YAAY,EAAC,UAAU,SAAQ,CAAC;AAAA,IACxC;AAAA,EACF;AAEA,QAAM,WAAW,MAAM,OAAO,IAAI,WAAS,MAAM,EAAE;AAEnD,SACE,oBAAC,cAAW,SAAkB,oBAAoB,eAAe,WAAW,eAC1E,8BAAC,mBAAgB,OAAO,UAAU,UAAU,6BAC1C,8BAAC,sBAAoB,GAAG,OAAO,GACjC,GACF;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f68294db07afb93676beed55b7a9de47e3a7c779"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return an=function(){return l},l}an();class Ise extends ni.Component{static defaultProps=(an().s[0]++,{onLayerSelect:()=>{an().f[0]++}});selectedItemRef;scrollContainerRef;constructor(e){an().f[1]++,an().s[1]++,super(e),an().s[2]++,this.selectedItemRef=ni.createRef(),an().s[3]++,this.scrollContainerRef=ni.createRef(),an().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+zv()},isOpen:{add:!1}}}toggleModal(e){an().f[2]++,an().s[5]++,this.setState({keys:{...this.state.keys,[e]:+zv()},isOpen:{...this.state.isOpen,[e]:!this.state.isOpen[e]}})}toggleLayers=(an().s[6]++,()=>{an().f[3]++;let e=(an().s[7]++,0);const t=(an().s[8]++,{});an().s[9]++,this.groupedLayers().forEach(i=>{an().f[4]++;const r=(an().s[10]++,dv(i[0].id)),a=(an().s[11]++,[r,e].join("-"));an().s[12]++,i.length>1?(an().b[0][0]++,an().s[13]++,t[a]=this.state.areAllGroupsExpanded):an().b[0][1]++,an().s[14]++,i.forEach(l=>{an().f[5]++,an().s[15]++,e+=1})}),an().s[16]++,this.setState({collapsedGroups:t,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})});groupedLayers(){an().f[6]++;const e=(an().s[17]++,[]),t=(an().s[18]++,new Map);an().s[19]++;for(let i=(an().s[20]++,0);i<this.props.layers.length;i++){const r=(an().s[21]++,this.props.layers[i]),a=(an().s[22]++,this.props.layers[i-1]);an().s[23]++,t.set(r.id,t.has(r.id)?(an().b[1][0]++,t.get(r.id)+1):(an().b[1][1]++,0));const l=(an().s[24]++,{...r,key:`layers-list-${r.id}-${t.get(r.id)}`});if(an().s[25]++,an().b[3][0]++,a&&(an().b[3][1]++,dv(a.id)==dv(l.id))){an().b[2][0]++;const o=(an().s[26]++,e[e.length-1]);an().s[27]++,o.push(l)}else an().b[2][1]++,an().s[28]++,e.push([l])}return an().s[29]++,e}toggleLayerGroup(e,t){an().f[7]++;const i=(an().s[30]++,[e,t].join("-")),r=(an().s[31]++,{...this.state.collapsedGroups});an().s[32]++,i in this.state.collapsedGroups?(an().b[4][0]++,an().s[33]++,r[i]=!this.state.collapsedGroups[i]):(an().b[4][1]++,an().s[34]++,r[i]=!1),an().s[35]++,this.setState({collapsedGroups:r})}isCollapsed(e,t){an().f[8]++;const i=(an().s[36]++,this.state.collapsedGroups[[e,t].join("-")]);return an().s[37]++,i===void 0?(an().b[5][0]++,!0):(an().b[5][1]++,i)}shouldComponentUpdate(e,t){if(an().f[9]++,an().s[38]++,this.state!==t)return an().b[6][0]++,an().s[39]++,!0;an().b[6][1]++;function i(p){an().f[10]++;const C=(an().s[40]++,{id:p.id});return an().s[41]++,p.layout?(an().b[7][0]++,an().s[42]++,C.layout={visibility:p.layout.visibility}):an().b[7][1]++,an().s[43]++,C}const r=(an().s[44]++,l6.isEqual(e.layers.map(i),this.props.layers.map(i)));function a(p){an().f[11]++;const C=(an().s[45]++,{...p});return an().s[46]++,delete C.layers,an().s[47]++,C}const l=(an().s[48]++,l6.isEqual(a(this.props),a(e))),o=(an().s[49]++,an().b[8][0]++,!(r&&(an().b[8][1]++,l)));return an().s[50]++,o}componentDidUpdate(e){if(an().f[12]++,an().s[51]++,e.selectedLayerIndex!==this.props.selectedLayerIndex){an().b[9][0]++;const t=(an().s[52]++,this.selectedItemRef.current);if(an().s[53]++,an().b[11][0]++,t&&(an().b[11][1]++,t.node)){an().b[10][0]++;const i=(an().s[54]++,t.node),r=(an().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),a=(an().s[56]++,new IntersectionObserver(l=>{an().f[13]++,an().s[57]++,a.unobserve(i),an().s[58]++,an().b[13][0]++,l.length>0&&(an().b[13][1]++,l[0].intersectionRatio<1)?(an().b[12][0]++,an().s[59]++,i.scrollIntoView()):an().b[12][1]++},r));an().s[60]++,a.observe(i)}else an().b[10][1]++}else an().b[9][1]++}render(){an().f[14]++;const e=(an().s[61]++,[]);let t=(an().s[62]++,0);const i=(an().s[63]++,this.groupedLayers());an().s[64]++,i.forEach(a=>{an().f[15]++;const l=(an().s[65]++,dv(a[0].id));if(an().s[66]++,a.length>1){an().b[14][0]++;const o=(an().s[67]++,Ae.jsx(nae,{"data-wd-key":[l,t].join("-"),"aria-controls":a.map(p=>(an().f[16]++,an().s[68]++,p.key)).join(" "),title:l,isActive:(an().b[15][0]++,!this.isCollapsed(l,t)||(an().b[15][1]++,t===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,l,t)},`group-${l}-${t}`));an().s[69]++,e.push(o)}else an().b[14][1]++;an().s[70]++,a.forEach((o,p)=>{an().f[17]++;const C=(an().s[71]++,Ose(this.props.layers,t)),w=(an().s[72]++,this.props.errors.find(K=>(an().f[18]++,an().s[73]++,an().b[16][0]++,K.parsed&&(an().b[16][1]++,K.parsed.type==="layer")&&(an().b[16][2]++,K.parsed.data.index==t)))),O=(an().s[74]++,{});an().s[75]++,t===this.props.selectedLayerIndex?(an().b[17][0]++,an().s[76]++,O.ref=this.selectedItemRef):an().b[17][1]++;const U=(an().s[77]++,Ae.jsx(rae,{className:e0({"maputnik-layer-list-item-collapsed":(an().b[18][0]++,a.length>1&&(an().b[18][1]++,this.isCollapsed(l,C))&&(an().b[18][2]++,t!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(an().b[19][0]++,p==a.length-1&&(an().b[19][1]++,a.length>1)),"maputnik-layer-list-item--error":!!w}),id:o.key,layerId:o.id,layerIndex:t,layerType:o.type,visibility:(an().b[20][0]++,o.layout||(an().b[20][1]++,{})).visibility,isSelected:t===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:this.props.onLayerDestroy?.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...O},o.key));an().s[78]++,e.push(U),an().s[79]++,t+=1})});const r=(an().s[80]++,this.props.t);return an().s[81]++,Ae.jsxs("section",{className:"maputnik-layer-list","data-wd-key":"layer-list",role:"complementary","aria-label":r("Layers list"),ref:this.scrollContainerRef,children:[Ae.jsx(Sse,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),Ae.jsxs("header",{className:"maputnik-layer-list-header",children:[Ae.jsx("span",{className:"maputnik-layer-list-header-title",children:r("Layers")}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx("div",{className:"maputnik-default-property",children:Ae.jsx("div",{className:"maputnik-multibutton",children:Ae.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(an().b[21][0]++,r("Collapse")):(an().b[21][1]++,r("Expand"))})})}),Ae.jsx("div",{className:"maputnik-default-property",children:Ae.jsx("div",{className:"maputnik-multibutton",children:Ae.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:r("Add Layer")})})})]}),Ae.jsx("div",{role:"navigation","aria-label":r("Layers list"),children:Ae.jsx("ul",{className:"maputnik-layer-list-container",children:e})})]})}}const Tse=(an().s[82]++,ls()(Ise));an().s[83]++;const kse=n=>{an().f[19]++;const e=(an().s[84]++,Ore(Bre(A8,{activationConstraint:{distance:5}})));an().s[85]++;const t=r=>{an().f[20]++;const{active:a,over:l}=(an().s[86]++,r);if(an().s[87]++,l)an().b[22][1]++;else{an().b[22][0]++,an().s[88]++;return}const o=(an().s[89]++,n.layers.findIndex(C=>(an().f[21]++,an().s[90]++,C.id===a.id))),p=(an().s[91]++,n.layers.findIndex(C=>(an().f[22]++,an().s[92]++,C.id===l.id)));an().s[93]++,an().b[24][0]++,o!==-1&&(an().b[24][1]++,p!==-1)&&(an().b[24][2]++,o!==p)?(an().b[23][0]++,an().s[94]++,n.onMoveLayer({oldIndex:o,newIndex:p})):an().b[23][1]++},i=(an().s[95]++,n.layers.map(r=>(an().f[23]++,an().s[96]++,r.id)));return an().s[97]++,Ae.jsx(Doe,{sensors:e,collisionDetection:Rre,onDragEnd:t,children:Ae.jsx(Yoe,{items:i,strategy:Woe,children:Ae.jsx(Tse,{...n})})})};var I5,YT;function nN(){if(YT)return I5;YT=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(l,o){n[l]=o}function i(l){delete n[l]}function r(l,o){var p=n[l];if(!p)throw new Error("Cannot open "+e);p.openMenu(o)}function a(l,o){var p=n[l];if(!p)throw new Error("Cannot close "+e);p.closeMenu(o)}return I5={registerManager:t,unregisterManager:i,openMenu:r,closeMenu:a},I5}var T5,qT;function Dse(){if(qT)return T5;qT=1;function n(r){r=r||{};var a=r.keybindings||{};this._settings={keybindings:{next:a.next||{keyCode:40},prev:a.prev||{keyCode:38},first:a.first,last:a.last},wrap:r.wrap,stringSearch:r.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var l,o;for(l in this._settings.keybindings)o=this._settings.keybindings[l],o&&[].concat(o).forEach((function(p){p.metaKey=p.metaKey||!1,p.ctrlKey=p.ctrlKey||!1,p.altKey=p.altKey||!1,p.shiftKey=p.shiftKey||!1,this._keybindingsLookup.push({action:l,eventMatcher:p})}).bind(this));this._searchString="",this._members=[],r.members&&this.setMembers(r.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(r){var a=this._getActiveElementIndex();if(a!==-1){var l=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,r))switch(l=!0,r.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),l||this._handleUnboundKey(r)}},n.prototype.moveFocusForward=function(){var r=this._getActiveElementIndex(),a;return r<this._members.length-1?a=r+1:this._settings.wrap?a=0:a=r,this.focusNodeAtIndex(a),a},n.prototype.moveFocusBack=function(){var r=this._getActiveElementIndex(),a;return r>0?a=r-1:this._settings.wrap?a=this._members.length-1:a=r,this.focusNodeAtIndex(a),a},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(r){if(this._settings.stringSearch){if(this._searchString!==""&&(r.key===" "||r.keyCode===32))return r.preventDefault(),-1;if(!t(r.keyCode)||r.ctrlKey||r.metaKey||r.altKey)return-1;r.preventDefault(),this._addToSearchString(String.fromCharCode(r.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(r){this._searchString+=r.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var r=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){r._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(r){for(var a,l=0,o=this._members.length;l<o;l++)if(a=this._members[l],!!a.text&&a.text.indexOf(r)===0)return i(a.node)},n.prototype._findIndexOfNode=function(r){for(var a=0,l=this._members.length;a<l;a++)if(this._members[a].node===r)return a;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(r){var a=this._members[r];return a&&i(a.node),this},n.prototype.addMember=function(r,a){var l=r.node||r,o=r.text||l.getAttribute("data-focus-group-text")||l.textContent||"";this._checkNode(l);var p=o.replace(/[\W_]/g,"").toLowerCase(),C={node:l,text:p};return a!=null?this._members.splice(a,0,C):this._members.push(C),this},n.prototype.removeMember=function(r){var a=typeof r=="number"?r:this._findIndexOfNode(r);if(a!==-1)return this._members.splice(a,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(r){this.clearMembers();for(var a=0,l=r.length;a<l;a++)this.addMember(r[a]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(r){if(!r.nodeType||r.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return r};function e(r,a){for(var l in r)if(a[l]!==void 0&&r[l]!==a[l])return!1;return!0}function t(r){return r>=65&&r<=90}function i(r){!r||!r.focus||(r.focus(),r.tagName.toLowerCase()==="input"&&r.select())}return T5=function(a){return new n(a)},T5}var k5,HT;function Rse(){if(HT)return k5;HT=1;var n=Dse(),e=nN(),t={wrap:!0,stringSearch:!0},i={init:function(p){this.updateOptions(p),this.handleBlur=r.bind(this),this.handleSelection=a.bind(this),this.handleMenuKey=l.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(p){var C=this.options;this.options=p||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),C&&C.id&&C.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(p){this.focusGroup.focusNodeAtIndex(p)},addItem:function(p){this.focusGroup.addMember(p)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(p){this.focusGroup._handleUnboundKey(p)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(p){if(!this.isOpen&&(p=p||{},p.focusMenu===void 0&&(p.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),p.focusMenu)){var C=this;this.moveFocusTimer=setTimeout(function(){C.focusItem(0)},0)}},closeMenu:function(p){this.isOpen&&(p=p||{},this.isOpen=!1,this.update(),p.focusButton&&this.button.ref.current.focus())},toggleMenu:function(p,C){p=p||{},C=C||{},this.isOpen?this.closeMenu(p):this.openMenu(C)}};function r(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var p=o.button.ref.current;if(p){var C=p.ownerDocument.activeElement;if(!(p&&C===p)){var w=o.menu.ref.current;if(w===C){o.focusItem(0);return}w&&w.contains(C)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function a(o,p){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,p)}function l(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return k5=function(o){var p=Object.create(i);return p.init(o),p},k5}var D5,VT;function I2(){if(VT)return D5;VT=1;var n=Ol(),e=n.createContext();return D5=e,D5}var R5,$T;function T2(){if($T)return R5;$T=1;var n=G0();return R5={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},R5}var P5,ZT;function k2(){return ZT||(ZT=1,P5=function(n,e,t){t=t||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]||(n[i]=e[i]))}),P5}var K5,XT;function Pse(){if(XT)return K5;XT=1;function n(K,j){if(!(K instanceof j))throw new TypeError("Cannot call a class as a function")}function e(K,j){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:K}function t(K,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);K.prototype=Object.create(j&&j.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(K,j):K.__proto__=j)}var i=Ol(),r=G0(),a=Rse(),l=I2(),o=T2(),p=o.refType,C=k2(),w={children:r.node.isRequired,forwardedRef:p,onMenuToggle:r.func,onSelection:r.func,closeOnSelection:r.bool,closeOnBlur:r.bool,tag:r.string},O=function(j){return{onMenuToggle:j.onMenuToggle,onSelection:j.onSelection,closeOnSelection:j.closeOnSelection,closeOnBlur:j.closeOnBlur,id:j.id}},U=function(K){t(j,K);function j(W){n(this,j);var Y=e(this,K.call(this,W));return Y.manager=a(O(W)),Y}return j.prototype.componentDidUpdate=function(){this.manager.updateOptions(O(this.props))},j.prototype.render=function(){var Y={};return C(Y,this.props,w),i.createElement(l.Provider,{value:this.manager},i.createElement(this.props.tag,Y,this.props.children))},j}(i.Component);return U.propTypes=w,U.defaultProps={tag:"div"},K5=i.forwardRef(function(K,j){var W={forwardedRef:j};return C(W,K,{children:w.children,forwardedRef:w.forwardedRef}),C(W,{forwardedRef:j}),i.createElement(U,W,K.children)}),K5}var U5,JT;function Kse(){if(JT)return U5;JT=1;function n(U,K){if(!(U instanceof K))throw new TypeError("Cannot call a class as a function")}function e(U,K){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:U}function t(U,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);U.prototype=Object.create(K&&K.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(U,K):U.__proto__=K)}var i=Ol(),r=G0(),a=I2(),l=T2(),o=l.refType,p=k2(),C={ambManager:r.object.isRequired,children:r.node.isRequired,disabled:r.bool,forwardedRef:o,tag:r.string},w=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},O=function(U){t(K,U);function K(){var j,W,Y;n(this,K);for(var te=arguments.length,J=Array(te),oe=0;oe<te;oe++)J[oe]=arguments[oe];return Y=(j=(W=e(this,U.call.apply(U,[this].concat(J))),W),W.ref=i.createRef(),W.handleKeyDown=function(ne){if(!W.props.disabled){var $=W.props.ambManager;switch(ne.key){case"ArrowDown":ne.preventDefault(),$.isOpen?$.focusItem(0):$.openMenu();break;case"Enter":case" ":ne.preventDefault(),$.toggleMenu();break;case"Escape":$.handleMenuKey(ne);break;default:$.handleButtonNonArrowKey(ne)}}},W.handleClick=function(){W.props.disabled||W.props.ambManager.toggleMenu({},{focusMenu:!1})},W.setRef=function(ne){W.ref.current=ne,typeof W.props.forwardedRef=="function"?W.props.forwardedRef(ne):W.props.forwardedRef&&(W.props.forwardedRef.current=ne)},j),e(W,Y)}return K.prototype.componentDidMount=function(){this.props.ambManager.button=this},K.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},K.prototype.render=function(){var W=this.props,Y=this.props.ambManager,te={role:"button",tabIndex:W.disabled?"":"0","aria-haspopup":!0,"aria-expanded":Y.isOpen,"aria-disabled":W.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},J={};return p(J,C),w().indexOf(W.tag)>=0&&delete J.disabled,Y.options.closeOnBlur&&(te.onBlur=Y.handleBlur),p(te,W,J),p(te,{ref:this.setRef}),i.createElement(W.tag,te,W.children)},K}(i.Component);return O.propTypes=C,O.defaultProps={tag:"span"},U5=i.forwardRef(function(U,K){return i.createElement(a.Consumer,null,function(j){var W={ambManager:j,forwardedRef:K};return p(W,U,{ambManager:C.ambManager,children:C.children,forwardedRef:C.forwardedRef}),i.createElement(O,W,U.children)})}),U5}var L5,ek;function Use(){return ek||(ek=1,L5=function(e,t,i){var r=0,a=0,l=!1,o=!1,p=!1;e.addEventListener("click",C,i),e.addEventListener("touchstart",w,i);function C(Y){p||t(Y)}function w(Y){p=!0,!l&&(l=!0,e.addEventListener("touchmove",O,i),e.addEventListener("touchend",U,i),e.addEventListener("touchcancel",K,i),o=!1,r=Y.touches[0].clientX,a=Y.touches[0].clientY)}function O(Y){o||Math.abs(Y.touches[0].clientX-r)<=10&&Math.abs(Y.touches[0].clientY-a)<=10||(o=!0)}function U(Y){l=!1,j(),o||t(Y)}function K(){l=!1,o=!1,r=0,a=0}function j(){e.removeEventListener("touchmove",O,i),e.removeEventListener("touchend",U,i),e.removeEventListener("touchcancel",K,i)}function W(){e.removeEventListener("click",C,i),e.removeEventListener("touchstart",w,i),j()}return{remove:W}}),L5}var F5,tk;function Lse(){if(tk)return F5;tk=1;function n(U,K){if(!(U instanceof K))throw new TypeError("Cannot call a class as a function")}function e(U,K){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:U}function t(U,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);U.prototype=Object.create(K&&K.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(U,K):U.__proto__=K)}var i=Ol(),r=G0(),a=Use(),l=I2(),o=T2(),p=o.refType,C=k2(),w={ambManager:r.object.isRequired,children:r.oneOfType([r.func,r.node]).isRequired,forwardedRef:p,tag:r.string},O=function(U){t(K,U);function K(){var j,W,Y;n(this,K);for(var te=arguments.length,J=Array(te),oe=0;oe<te;oe++)J[oe]=arguments[oe];return Y=(j=(W=e(this,U.call.apply(U,[this].concat(J))),W),W.ref=i.createRef(),W.addTapListener=function(){var ne=W.ref.current;if(ne){var $=ne.ownerDocument;$&&(W.tapListener=a($.documentElement,W.handleTap))}},W.handleTap=function(ne){W.ref.current.contains(ne.target)||W.props.ambManager.button.ref.current.contains(ne.target)||W.props.ambManager.closeMenu()},W.setRef=function(ne){W.ref.current=ne,typeof W.props.forwardedRef=="function"?W.props.forwardedRef(ne):W.props.forwardedRef&&(W.props.forwardedRef.current=ne)},j),e(W,Y)}return K.prototype.componentDidMount=function(){this.props.ambManager.menu=this},K.prototype.componentDidUpdate=function(){var W=this.props.ambManager;W.options.closeOnBlur&&(W.isOpen&&!this.tapListener?this.addTapListener():!W.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),W.isOpen||W.clearItems())},K.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},K.prototype.render=function(){var W=this.props,Y=this.props.ambManager,te=function(){return typeof W.children=="function"?W.children({isOpen:Y.isOpen}):Y.isOpen?W.children:!1}();if(!te)return!1;var J={onKeyDown:Y.handleMenuKey,role:"menu",tabIndex:-1};return Y.options.closeOnBlur&&(J.onBlur=Y.handleBlur),C(J,W,w),C(J,{ref:this.setRef}),i.createElement(W.tag,J,te)},K}(i.Component);return O.propTypes=w,O.defaultProps={tag:"div"},F5=i.forwardRef(function(U,K){return i.createElement(l.Consumer,null,function(j){var W={ambManager:j,forwardedRef:K};return C(W,U,{ambManager:w.ambManager,children:w.children,forwardedRef:w.forwardedRef}),i.createElement(O,W,U.children)})}),F5}var z5,nk;function Fse(){if(nk)return z5;nk=1;function n(O,U){if(!(O instanceof U))throw new TypeError("Cannot call a class as a function")}function e(O,U){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:O}function t(O,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);O.prototype=Object.create(U&&U.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(O,U):O.__proto__=U)}var i=Ol(),r=G0(),a=I2(),l=T2(),o=l.refType,p=k2(),C={ambManager:r.object.isRequired,children:r.node.isRequired,forwardedRef:o,tag:r.string,text:r.string,value:r.any},w=function(O){t(U,O);function U(){var K,j,W;n(this,U);for(var Y=arguments.length,te=Array(Y),J=0;J<Y;J++)te[J]=arguments[J];return W=(K=(j=e(this,O.call.apply(O,[this].concat(te))),j),j.ref=i.createRef(),j.handleKeyDown=function(oe){oe.key!=="Enter"&&oe.key!==" "||j.props.tag==="a"&&j.props.href||(oe.preventDefault(),j.selectItem(oe))},j.selectItem=function(oe){var ne=typeof j.props.value<"u"?j.props.value:j.props.children;j.props.ambManager.handleSelection(ne,oe)},j.setRef=function(oe){j.ref.current=oe,typeof j.props.forwardedRef=="function"?j.props.forwardedRef(oe):j.props.forwardedRef&&(j.props.forwardedRef.current=oe)},K),e(j,W)}return U.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},U.prototype.render=function(){var j={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return p(j,this.props,C),i.createElement(this.props.tag,j,this.props.children)},U}(i.Component);return w.propTypes=C,w.defaultProps={tag:"div"},z5=i.forwardRef(function(O,U){return i.createElement(a.Consumer,null,function(K){var j={ambManager:K,forwardedRef:U};return p(j,O,{ambManager:C.ambManager,children:C.children,forwardedRef:C.forwardedRef}),i.createElement(w,j,O.children)})}),z5}var j5,ik;function zse(){if(ik)return j5;ik=1;var n=nN();return j5={Wrapper:Pse(),Button:Kse(),Menu:Lse(),MenuItem:Fse(),openMenu:n.openMenu,closeMenu:n.closeMenu},j5}var cx=zse();function rk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function vB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rk(Object(t),!0).forEach(function(i){tu(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rk(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function D2(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ok(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function R2(n,e,t){return e&&ok(n.prototype,e),t&&ok(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function tu(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function n0(){return n0=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},n0.apply(this,arguments)}function O8(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&CB(n,e)}function S3(n){return S3=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},S3(n)}function CB(n,e){return CB=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},CB(n,e)}function jse(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nse(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function P2(n,e){if(n==null)return{};var t=Nse(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Vp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Gse(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vp(n)}function I8(n){var e=jse();return function(){var i=S3(n),r;if(e){var a=S3(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return Gse(this,r)}}function Wse(n,e){return qse(n)||Vse(n,e)||iN(n,e)||Zse()}function Qse(n){return Yse(n)||Hse(n)||iN(n)||$se()}function Yse(n){if(Array.isArray(n))return _B(n)}function qse(n){if(Array.isArray(n))return n}function Hse(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Vse(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,a=!1,l,o;try{for(t=t.call(n);!(r=(l=t.next()).done)&&(i.push(l.value),!(e&&i.length===e));r=!0);}catch(p){a=!0,o=p}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw o}}return i}}function iN(n,e){if(n){if(typeof n=="string")return _B(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _B(n,e)}}function _B(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function $se(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Xse=R2(function n(e){var t=this,i=e.expanded,r=i===void 0?[]:i,a=e.allowMultipleExpanded,l=a===void 0?!1:a,o=e.allowZeroExpanded,p=o===void 0?!1:o;D2(this,n),tu(this,"expanded",void 0),tu(this,"allowMultipleExpanded",void 0),tu(this,"allowZeroExpanded",void 0),tu(this,"toggleExpanded",function(C){if(t.isItemDisabled(C))return t;var w=t.isItemExpanded(C);return w?t.augment({expanded:t.expanded.filter(function(O){return O!==C})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(Qse(t.expanded),[C]):[C]})}),tu(this,"isItemDisabled",function(C){var w=t.isItemExpanded(C),O=t.expanded.length===1;return!!(w&&!t.allowZeroExpanded&&O)}),tu(this,"isItemExpanded",function(C){return t.expanded.indexOf(C)!==-1}),tu(this,"getPanelAttributes",function(C,w){var O=w??t.isItemExpanded(C);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!O:void 0,"aria-labelledby":t.getButtonId(C),id:t.getPanelId(C),hidden:O?void 0:!0}}),tu(this,"getHeadingAttributes",function(){return{role:"heading"}}),tu(this,"getButtonAttributes",function(C,w){var O=w??t.isItemExpanded(C),U=t.isItemDisabled(C);return{id:t.getButtonId(C),"aria-disabled":U,"aria-expanded":O,"aria-controls":t.getPanelId(C),role:"button",tabIndex:0}}),tu(this,"getPanelId",function(C){return"accordion__panel-".concat(C)}),tu(this,"getButtonId",function(C){return"accordion__heading-".concat(C)}),tu(this,"augment",function(C){return new n(vB({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},C))}),this.expanded=r,this.allowMultipleExpanded=l,this.allowZeroExpanded=p}),rN=Nt.createContext(null),oN=function(n){O8(t,n);var e=I8(t);function t(){var i;D2(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a)),tu(Vp(i),"state",new Xse({expanded:i.props.preExpanded,allowMultipleExpanded:i.props.allowMultipleExpanded,allowZeroExpanded:i.props.allowZeroExpanded})),tu(Vp(i),"toggleExpanded",function(o){i.setState(function(p){return p.toggleExpanded(o)},function(){i.props.onChange&&i.props.onChange(i.state.expanded)})}),tu(Vp(i),"isItemDisabled",function(o){return i.state.isItemDisabled(o)}),tu(Vp(i),"isItemExpanded",function(o){return i.state.isItemExpanded(o)}),tu(Vp(i),"getPanelAttributes",function(o,p){return i.state.getPanelAttributes(o,p)}),tu(Vp(i),"getHeadingAttributes",function(){return i.state.getHeadingAttributes()}),tu(Vp(i),"getButtonAttributes",function(o,p){return i.state.getButtonAttributes(o,p)}),i}return R2(t,[{key:"render",value:function(){var r=this.state,a=r.allowZeroExpanded,l=r.allowMultipleExpanded;return Nt.createElement(rN.Provider,{value:{allowMultipleExpanded:l,allowZeroExpanded:a,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(Nt.PureComponent);tu(oN,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var aN=function(n){O8(t,n);var e=I8(t);function t(){var i;D2(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a)),tu(Vp(i),"renderChildren",function(o){return o?i.props.children(o):null}),i}return R2(t,[{key:"render",value:function(){return Nt.createElement(rN.Consumer,null,this.renderChildren)}}]),t}(Nt.PureComponent),Jse=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],ele=function(e){var t=e.className,i=t===void 0?"accordion":t,r=e.allowMultipleExpanded,a=e.allowZeroExpanded,l=e.onChange,o=e.preExpanded,p=P2(e,Jse);return Nt.createElement(oN,{preExpanded:o,allowMultipleExpanded:r,allowZeroExpanded:a,onChange:l},Nt.createElement("div",n0({"data-accordion-component":"Accordion",className:i},p)))},bB;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(bB||(bB={}));var sN=bB,N5=0;function tle(){var n=N5;return N5=N5+1,"raa-".concat(n)}var nle=Nt.useId||tle,ile=/[\u0009\u000a\u000c\u000d\u0020]/g;function j_(n){return n===""||ile.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var lN=Nt.createContext(null),rle=function(e){var t=e.children,i=e.uuid,r=e.accordionContext,a=e.dangerouslySetExpanded,l=function(){r.toggleExpanded(i)},o=function(C){var w=a??C.isItemExpanded(i),O=C.isItemDisabled(i),U=C.getPanelAttributes(i,a),K=C.getHeadingAttributes(i),j=C.getButtonAttributes(i,a);return Nt.createElement(lN.Provider,{value:{uuid:i,expanded:w,disabled:O,toggleExpanded:l,panelAttributes:U,headingAttributes:K,buttonAttributes:j}},t)};return Nt.createElement(aN,null,o)},ole=function(e){return Nt.createElement(aN,null,function(t){return Nt.createElement(rle,n0({},e,{accordionContext:t}))})},K2=function(e){var t=e.children,i=function(a){return a?t(a):null};return Nt.createElement(lN.Consumer,null,i)},ale=["uuid","dangerouslySetExpanded","className","activeClassName"],uN=function(e){var t=e.uuid,i=e.dangerouslySetExpanded,r=e.className,a=r===void 0?"accordion__item":r,l=e.activeClassName,o=P2(e,ale),p=Nt.useState(nle()),C=Wse(p,1),w=C[0],O=t??w,U=function(j){var W=j.expanded,Y=W&&l?l:a;return Nt.createElement("div",n0({"data-accordion-component":"AccordionItem",className:Y},o))};return j_(O.toString()),o.id&&j_(o.id),Nt.createElement(ole,{uuid:O,dangerouslySetExpanded:i},Nt.createElement(K2,null,U))};uN.displayName=sN.AccordionItem;function AN(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:AN(n.parentElement))}function U2(n){var e=AN(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function sle(n){var e=U2(n)||[],t=e[0];t&&t.focus()}function lle(n){var e=U2(n)||[],t=e[e.length-1];t&&t.focus()}function ule(n){var e=U2(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t+1];i&&i.focus()}}function Ale(n){var e=U2(n)||[],t=e.indexOf(n);if(t!==-1){var i=e[t-1];i&&i.focus()}}var E0={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},cle=["toggleExpanded","className"],hle=function(e){var t=e.toggleExpanded,i=e.className,r=i===void 0?"accordion__button":i,a=P2(e,cle),l=function(p){var C=p.key;if((C===E0.ENTER||C===E0.SPACE||C===E0.SPACE_DEPRECATED)&&(p.preventDefault(),t()),p.target instanceof HTMLElement)switch(C){case E0.HOME:{p.preventDefault(),sle(p.target);break}case E0.END:{p.preventDefault(),lle(p.target);break}case E0.LEFT:case E0.UP:{p.preventDefault(),Ale(p.target);break}case E0.RIGHT:case E0.DOWN:{p.preventDefault(),ule(p.target);break}}};return a.id&&j_(a.id),Nt.createElement("div",n0({className:r},a,{role:"button",tabIndex:0,onClick:t,onKeyDown:l,"data-accordion-component":"AccordionItemButton"}))},dle=function(e){return Nt.createElement(K2,null,function(t){var i=t.toggleExpanded,r=t.buttonAttributes;return Nt.createElement(hle,n0({toggleExpanded:i},e,r))})},fle={className:"accordion__heading","aria-level":3},ple=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,cN=function(n){O8(t,n);var e=I8(t);function t(){var i;D2(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a)),tu(Vp(i),"ref",void 0),tu(Vp(i),"setRef",function(o){i.ref=o}),i}return R2(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return Nt.createElement("div",n0({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(r){if(r===void 0)throw new Error("ref is undefined");if(!(r.childElementCount===1&&r.firstElementChild&&r.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(ple)}}]),t}(Nt.PureComponent);tu(cN,"defaultProps",fle);var hN=function(e){return Nt.createElement(K2,null,function(t){var i=t.headingAttributes;return e.id&&j_(e.id),Nt.createElement(cN,n0({},e,i))})};hN.displayName=sN.AccordionItemHeading;var mle=["className","region","id"],gle=function(e){var t=e.className,i=t===void 0?"accordion__panel":t,r=e.region,a=e.id,l=P2(e,mle),o=function(C){var w=C.panelAttributes;a&&j_(a);var O=vB(vB({},w),{},{"aria-labelledby":r?w["aria-labelledby"]:void 0});return Nt.createElement("div",n0({"data-accordion-component":"AccordionItemPanel",className:i},l,O,{role:r?"region":void 0}))};return Nt.createElement(K2,null,o)},Ix={exports:{}},yle=Ix.exports,ak;function L2(){return ak||(ak=1,function(n,e){(function(t,i){n.exports=i()})(yle,function(){var t=navigator.userAgent,i=navigator.platform,r=/gecko\/\d/i.test(t),a=/MSIE \d/.test(t),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),p=a||l||o,C=p&&(a?document.documentMode||6:+(o||l)[1]),w=!o&&/WebKit\//.test(t),O=w&&/Qt\/\d+\.\d+/.test(t),U=!o&&/Chrome\/(\d+)/.exec(t),K=U&&+U[1],j=/Opera\//.test(t),W=/Apple Computer/.test(navigator.vendor),Y=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),te=/PhantomJS/.test(t),J=W&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),oe=/Android/.test(t),ne=J||oe||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),$=J||/Mac/.test(i),ae=/\bCrOS\b/.test(t),G=/win/i.test(i),ce=j&&t.match(/Version\/(\d*\.\d*)/);ce&&(ce=Number(ce[1])),ce&&ce>=15&&(j=!1,w=!0);var ge=$&&(O||j&&(ce==null||ce<12.11)),ye=r||p&&C>=9;function we(d){return new RegExp("(^|\\s)"+d+"(?:$|\\s)\\s*")}var Oe=function(d,v){var B=d.className,E=we(v).exec(B);if(E){var F=B.slice(E.index+E[0].length);d.className=B.slice(0,E.index)+(F?E[1]+F:"")}};function Se(d){for(var v=d.childNodes.length;v>0;--v)d.removeChild(d.firstChild);return d}function Ve(d,v){return Se(d).appendChild(v)}function xe(d,v,B,E){var F=document.createElement(d);if(B&&(F.className=B),E&&(F.style.cssText=E),typeof v=="string")F.appendChild(document.createTextNode(v));else if(v)for(var Z=0;Z<v.length;++Z)F.appendChild(v[Z]);return F}function ze(d,v,B,E){var F=xe(d,v,B,E);return F.setAttribute("role","presentation"),F}var st;document.createRange?st=function(d,v,B,E){var F=document.createRange();return F.setEnd(E||d,B),F.setStart(d,v),F}:st=function(d,v,B){var E=document.body.createTextRange();try{E.moveToElementText(d.parentNode)}catch{return E}return E.collapse(!0),E.moveEnd("character",B),E.moveStart("character",v),E};function Ct(d,v){if(v.nodeType==3&&(v=v.parentNode),d.contains)return d.contains(v);do if(v.nodeType==11&&(v=v.host),v==d)return!0;while(v=v.parentNode)}function nt(d){var v=d.ownerDocument||d,B;try{B=d.activeElement}catch{B=v.body||null}for(;B&&B.shadowRoot&&B.shadowRoot.activeElement;)B=B.shadowRoot.activeElement;return B}function be(d,v){var B=d.className;we(v).test(B)||(d.className+=(B?" ":"")+v)}function Ne(d,v){for(var B=d.split(" "),E=0;E<B.length;E++)B[E]&&!we(B[E]).test(v)&&(v+=" "+B[E]);return v}var tt=function(d){d.select()};J?tt=function(d){d.selectionStart=0,d.selectionEnd=d.value.length}:p&&(tt=function(d){try{d.select()}catch{}});function lt(d){return d.display.wrapper.ownerDocument}function kt(d){return gt(d.display.wrapper)}function gt(d){return d.getRootNode?d.getRootNode():d.ownerDocument}function St(d){return lt(d).defaultView}function Ut(d){var v=Array.prototype.slice.call(arguments,1);return function(){return d.apply(null,v)}}function Fe(d,v,B){v||(v={});for(var E in d)d.hasOwnProperty(E)&&(B!==!1||!v.hasOwnProperty(E))&&(v[E]=d[E]);return v}function Ke(d,v,B,E,F){v==null&&(v=d.search(/[^\s\u00a0]/),v==-1&&(v=d.length));for(var Z=E||0,fe=F||0;;){var _e=d.indexOf("	",Z);if(_e<0||_e>=v)return fe+(v-Z);fe+=_e-Z,fe+=B-fe%B,Z=_e+1}}var Re=function(){this.id=null,this.f=null,this.time=0,this.handler=Ut(this.onTimeout,this)};Re.prototype.onTimeout=function(d){d.id=0,d.time<=+new Date?d.f():setTimeout(d.handler,d.time-+new Date)},Re.prototype.set=function(d,v){this.f=v;var B=+new Date+d;(!this.id||B<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,d),this.time=B)};function He(d,v){for(var B=0;B<d.length;++B)if(d[B]==v)return B;return-1}var bt=50,_t={toString:function(){return"CodeMirror.Pass"}},Ot={scroll:!1},qt={origin:"*mouse"},Kt={origin:"+move"};function on(d,v,B){for(var E=0,F=0;;){var Z=d.indexOf("	",E);Z==-1&&(Z=d.length);var fe=Z-E;if(Z==d.length||F+fe>=v)return E+Math.min(fe,v-F);if(F+=Z-E,F+=B-F%B,E=Z+1,F>=v)return E}}var Jn=[""];function Wt(d){for(;Jn.length<=d;)Jn.push($n(Jn)+" ");return Jn[d]}function $n(d){return d[d.length-1]}function On(d,v){for(var B=[],E=0;E<d.length;E++)B[E]=v(d[E],E);return B}function Bn(d,v,B){for(var E=0,F=B(v);E<d.length&&B(d[E])<=F;)E++;d.splice(E,0,v)}function In(){}function Oi(d,v){var B;return Object.create?B=Object.create(d):(In.prototype=d,B=new In),v&&Fe(v,B),B}var ei=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Kn(d){return/\w/.test(d)||d>""&&(d.toUpperCase()!=d.toLowerCase()||ei.test(d))}function je(d,v){return v?v.source.indexOf("\\w")>-1&&Kn(d)?!0:v.test(d):Kn(d)}function de(d){for(var v in d)if(d.hasOwnProperty(v)&&d[v])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function le(d){return d.charCodeAt(0)>=768&&re.test(d)}function pe(d,v,B){for(;(B<0?v>0:v<d.length)&&le(d.charAt(v));)v+=B;return v}function Te(d,v,B){for(var E=v>B?-1:1;;){if(v==B)return v;var F=(v+B)/2,Z=E<0?Math.ceil(F):Math.floor(F);if(Z==v)return d(Z)?v:B;d(Z)?B=Z:v=Z+E}}function We(d,v,B,E){if(!d)return E(v,B,"ltr",0);for(var F=!1,Z=0;Z<d.length;++Z){var fe=d[Z];(fe.from<B&&fe.to>v||v==B&&fe.to==v)&&(E(Math.max(fe.from,v),Math.min(fe.to,B),fe.level==1?"rtl":"ltr",Z),F=!0)}F||E(v,B,"ltr")}var dt=null;function Ye(d,v,B){var E;dt=null;for(var F=0;F<d.length;++F){var Z=d[F];if(Z.from<v&&Z.to>v)return F;Z.to==v&&(Z.from!=Z.to&&B=="before"?E=F:dt=F),Z.from==v&&(Z.from!=Z.to&&B!="before"?E=F:dt=F)}return E??dt}var De=function(){var d="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",v="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function B(Le){return Le<=247?d.charAt(Le):1424<=Le&&Le<=1524?"R":1536<=Le&&Le<=1785?v.charAt(Le-1536):1774<=Le&&Le<=2220?"r":8192<=Le&&Le<=8203?"w":Le==8204?"b":"L"}var E=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,F=/[stwN]/,Z=/[LRr]/,fe=/[Lb1n]/,_e=/[1n]/;function ke(Le,vt,It){this.level=Le,this.from=vt,this.to=It}return function(Le,vt){var It=vt=="ltr"?"L":"R";if(Le.length==0||vt=="ltr"&&!E.test(Le))return!1;for(var Jt=Le.length,Ht=[],_n=0;_n<Jt;++_n)Ht.push(B(Le.charCodeAt(_n)));for(var Rn=0,oi=It;Rn<Jt;++Rn){var mi=Ht[Rn];mi=="m"?Ht[Rn]=oi:oi=mi}for(var Ci=0,gi=It;Ci<Jt;++Ci){var Di=Ht[Ci];Di=="1"&&gi=="r"?Ht[Ci]="n":Z.test(Di)&&(gi=Di,Di=="r"&&(Ht[Ci]="R"))}for(var ar=1,Yi=Ht[0];ar<Jt-1;++ar){var Jr=Ht[ar];Jr=="+"&&Yi=="1"&&Ht[ar+1]=="1"?Ht[ar]="1":Jr==","&&Yi==Ht[ar+1]&&(Yi=="1"||Yi=="n")&&(Ht[ar]=Yi),Yi=Jr}for(var Mr=0;Mr<Jt;++Mr){var rs=Ht[Mr];if(rs==",")Ht[Mr]="N";else if(rs=="%"){var ca=void 0;for(ca=Mr+1;ca<Jt&&Ht[ca]=="%";++ca);for(var qr=Mr&&Ht[Mr-1]=="!"||ca<Jt&&Ht[ca]=="1"?"1":"N",vs=Mr;vs<ca;++vs)Ht[vs]=qr;Mr=ca-1}}for(var Cs=0,ha=It;Cs<Jt;++Cs){var Vl=Ht[Cs];ha=="L"&&Vl=="1"?Ht[Cs]="L":Z.test(Vl)&&(ha=Vl)}for(var Ts=0;Ts<Jt;++Ts)if(F.test(Ht[Ts])){var Ns=void 0;for(Ns=Ts+1;Ns<Jt&&F.test(Ht[Ns]);++Ns);for(var Or=(Ts?Ht[Ts-1]:It)=="L",Ea=(Ns<Jt?Ht[Ns]:It)=="L",$l=Or==Ea?Or?"L":"R":It,pc=Ts;pc<Ns;++pc)Ht[pc]=$l;Ts=Ns-1}for(var pu=[],oh,hs=0;hs<Jt;)if(fe.test(Ht[hs])){var wA=hs;for(++hs;hs<Jt&&fe.test(Ht[hs]);++hs);pu.push(new ke(0,wA,hs))}else{var Ml=hs,mc=pu.length,sl=vt=="rtl"?1:0;for(++hs;hs<Jt&&Ht[hs]!="L";++hs);for(var mu=Ml;mu<hs;)if(_e.test(Ht[mu])){Ml<mu&&(pu.splice(mc,0,new ke(1,Ml,mu)),mc+=sl);var $A=mu;for(++mu;mu<hs&&_e.test(Ht[mu]);++mu);pu.splice(mc,0,new ke(2,$A,mu)),mc+=sl,Ml=mu}else++mu;Ml<hs&&pu.splice(mc,0,new ke(1,Ml,hs))}return vt=="ltr"&&(pu[0].level==1&&(oh=Le.match(/^\s+/))&&(pu[0].from=oh[0].length,pu.unshift(new ke(0,0,oh[0].length))),$n(pu).level==1&&(oh=Le.match(/\s+$/))&&($n(pu).to-=oh[0].length,pu.push(new ke(0,Jt-oh[0].length,Jt)))),vt=="rtl"?pu.reverse():pu}}();function Ze(d,v){var B=d.order;return B==null&&(B=d.order=De(d.text,v)),B}var g=[],mt=function(d,v,B){if(d.addEventListener)d.addEventListener(v,B,!1);else if(d.attachEvent)d.attachEvent("on"+v,B);else{var E=d._handlers||(d._handlers={});E[v]=(E[v]||g).concat(B)}};function ht(d,v){return d._handlers&&d._handlers[v]||g}function Tt(d,v,B){if(d.removeEventListener)d.removeEventListener(v,B,!1);else if(d.detachEvent)d.detachEvent("on"+v,B);else{var E=d._handlers,F=E&&E[v];if(F){var Z=He(F,B);Z>-1&&(E[v]=F.slice(0,Z).concat(F.slice(Z+1)))}}}function it(d,v){var B=ht(d,v);if(B.length)for(var E=Array.prototype.slice.call(arguments,2),F=0;F<B.length;++F)B[F].apply(null,E)}function en(d,v,B){return typeof v=="string"&&(v={type:v,preventDefault:function(){this.defaultPrevented=!0}}),it(d,B||v.type,d,v),er(v)||v.codemirrorIgnore}function Dn(d){var v=d._handlers&&d._handlers.cursorActivity;if(v)for(var B=d.curOp.cursorActivityHandlers||(d.curOp.cursorActivityHandlers=[]),E=0;E<v.length;++E)He(B,v[E])==-1&&B.push(v[E])}function Mn(d,v){return ht(d,v).length>0}function ii(d){d.prototype.on=function(v,B){mt(this,v,B)},d.prototype.off=function(v,B){Tt(this,v,B)}}function Wn(d){d.preventDefault?d.preventDefault():d.returnValue=!1}function qi(d){d.stopPropagation?d.stopPropagation():d.cancelBubble=!0}function er(d){return d.defaultPrevented!=null?d.defaultPrevented:d.returnValue==!1}function Ei(d){Wn(d),qi(d)}function hi(d){return d.target||d.srcElement}function ti(d){var v=d.which;return v==null&&(d.button&1?v=1:d.button&2?v=3:d.button&4&&(v=2)),$&&d.ctrlKey&&v==1&&(v=3),v}var Wi=function(){if(p&&C<9)return!1;var d=xe("div");return"draggable"in d||"dragDrop"in d}(),wn;function uo(d){if(wn==null){var v=xe("span","");Ve(d,xe("span",[v,document.createTextNode("x")])),d.firstChild.offsetHeight!=0&&(wn=v.offsetWidth<=1&&v.offsetHeight>2&&!(p&&C<8))}var B=wn?xe("span",""):xe("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return B.setAttribute("cm-text",""),B}var Hi;function ma(d){if(Hi!=null)return Hi;var v=Ve(d,document.createTextNode("AA")),B=st(v,0,1).getBoundingClientRect(),E=st(v,1,2).getBoundingClientRect();return Se(d),!B||B.left==B.right?!1:Hi=E.right-B.right<3}var To=`

b`.split(/\n/).length!=3?function(d){for(var v=0,B=[],E=d.length;v<=E;){var F=d.indexOf(`
`,v);F==-1&&(F=d.length);var Z=d.slice(v,d.charAt(F-1)=="\r"?F-1:F),fe=Z.indexOf("\r");fe!=-1?(B.push(Z.slice(0,fe)),v+=fe+1):(B.push(Z),v=F+1)}return B}:function(d){return d.split(/\r\n?|\n/)},Zn=window.getSelection?function(d){try{return d.selectionStart!=d.selectionEnd}catch{return!1}}:function(d){var v;try{v=d.ownerDocument.selection.createRange()}catch{}return!v||v.parentElement()!=d?!1:v.compareEndPoints("StartToEnd",v)!=0},lr=function(){var d=xe("div");return"oncopy"in d?!0:(d.setAttribute("oncopy","return;"),typeof d.oncopy=="function")}(),zi=null;function vr(d){if(zi!=null)return zi;var v=Ve(d,xe("span","x")),B=v.getBoundingClientRect(),E=st(v,0,1).getBoundingClientRect();return zi=Math.abs(B.left-E.left)>1}var Fa={},Tr={};function ji(d,v){arguments.length>2&&(v.dependencies=Array.prototype.slice.call(arguments,2)),Fa[d]=v}function gl(d,v){Tr[d]=v}function ka(d){if(typeof d=="string"&&Tr.hasOwnProperty(d))d=Tr[d];else if(d&&typeof d.name=="string"&&Tr.hasOwnProperty(d.name)){var v=Tr[d.name];typeof v=="string"&&(v={name:v}),d=Oi(v,d),d.name=v.name}else{if(typeof d=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(d))return ka("application/xml");if(typeof d=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(d))return ka("application/json")}return typeof d=="string"?{name:d}:d||{name:"null"}}function wo(d,v){v=ka(v);var B=Fa[v.name];if(!B)return wo(d,"text/plain");var E=B(d,v);if(Xa.hasOwnProperty(v.name)){var F=Xa[v.name];for(var Z in F)F.hasOwnProperty(Z)&&(E.hasOwnProperty(Z)&&(E["_"+Z]=E[Z]),E[Z]=F[Z])}if(E.name=v.name,v.helperType&&(E.helperType=v.helperType),v.modeProps)for(var fe in v.modeProps)E[fe]=v.modeProps[fe];return E}var Xa={};function Il(d,v){var B=Xa.hasOwnProperty(d)?Xa[d]:Xa[d]={};Fe(v,B)}function Ao(d,v){if(v===!0)return v;if(d.copyState)return d.copyState(v);var B={};for(var E in v){var F=v[E];F instanceof Array&&(F=F.concat([])),B[E]=F}return B}function Wu(d,v){for(var B;d.innerMode&&(B=d.innerMode(v),!(!B||B.mode==d));)v=B.state,d=B.mode;return B||{mode:d,state:v}}function Da(d,v,B){return d.startState?d.startState(v,B):!0}var Vi=function(d,v,B){this.pos=this.start=0,this.string=d,this.tabSize=v||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=B};Vi.prototype.eol=function(){return this.pos>=this.string.length},Vi.prototype.sol=function(){return this.pos==this.lineStart},Vi.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Vi.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Vi.prototype.eat=function(d){var v=this.string.charAt(this.pos),B;if(typeof d=="string"?B=v==d:B=v&&(d.test?d.test(v):d(v)),B)return++this.pos,v},Vi.prototype.eatWhile=function(d){for(var v=this.pos;this.eat(d););return this.pos>v},Vi.prototype.eatSpace=function(){for(var d=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>d},Vi.prototype.skipToEnd=function(){this.pos=this.string.length},Vi.prototype.skipTo=function(d){var v=this.string.indexOf(d,this.pos);if(v>-1)return this.pos=v,!0},Vi.prototype.backUp=function(d){this.pos-=d},Vi.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ke(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ke(this.string,this.lineStart,this.tabSize):0)},Vi.prototype.indentation=function(){return Ke(this.string,null,this.tabSize)-(this.lineStart?Ke(this.string,this.lineStart,this.tabSize):0)},Vi.prototype.match=function(d,v,B){if(typeof d=="string"){var E=function(fe){return B?fe.toLowerCase():fe},F=this.string.substr(this.pos,d.length);if(E(F)==E(d))return v!==!1&&(this.pos+=d.length),!0}else{var Z=this.string.slice(this.pos).match(d);return Z&&Z.index>0?null:(Z&&v!==!1&&(this.pos+=Z[0].length),Z)}},Vi.prototype.current=function(){return this.string.slice(this.start,this.pos)},Vi.prototype.hideFirstChars=function(d,v){this.lineStart+=d;try{return v()}finally{this.lineStart-=d}},Vi.prototype.lookAhead=function(d){var v=this.lineOracle;return v&&v.lookAhead(d)},Vi.prototype.baseToken=function(){var d=this.lineOracle;return d&&d.baseToken(this.pos)};function Mi(d,v){if(v-=d.first,v<0||v>=d.size)throw new Error("There is no line "+(v+d.first)+" in the document.");for(var B=d;!B.lines;)for(var E=0;;++E){var F=B.children[E],Z=F.chunkSize();if(v<Z){B=F;break}v-=Z}return B.lines[v]}function us(d,v,B){var E=[],F=v.line;return d.iter(v.line,B.line+1,function(Z){var fe=Z.text;F==B.line&&(fe=fe.slice(0,B.ch)),F==v.line&&(fe=fe.slice(v.ch)),E.push(fe),++F}),E}function Ma(d,v,B){var E=[];return d.iter(v,B,function(F){E.push(F.text)}),E}function Vo(d,v){var B=v-d.height;if(B)for(var E=d;E;E=E.parent)E.height+=B}function $e(d){if(d.parent==null)return null;for(var v=d.parent,B=He(v.lines,d),E=v.parent;E;v=E,E=E.parent)for(var F=0;E.children[F]!=v;++F)B+=E.children[F].chunkSize();return B+v.first}function Et(d,v){var B=d.first;e:do{for(var E=0;E<d.children.length;++E){var F=d.children[E],Z=F.height;if(v<Z){d=F;continue e}v-=Z,B+=F.chunkSize()}return B}while(!d.lines);for(var fe=0;fe<d.lines.length;++fe){var _e=d.lines[fe],ke=_e.height;if(v<ke)break;v-=ke}return B+fe}function xn(d,v){return v>=d.first&&v<d.first+d.size}function Gn(d,v){return String(d.lineNumberFormatter(v+d.firstLineNumber))}function rn(d,v,B){if(B===void 0&&(B=null),!(this instanceof rn))return new rn(d,v,B);this.line=d,this.ch=v,this.sticky=B}function si(d,v){return d.line-v.line||d.ch-v.ch}function eo(d,v){return d.sticky==v.sticky&&si(d,v)==0}function So(d){return rn(d.line,d.ch)}function As(d,v){return si(d,v)<0?v:d}function Ls(d,v){return si(d,v)<0?d:v}function Qu(d,v){return Math.max(d.first,Math.min(v,d.first+d.size-1))}function Qi(d,v){if(v.line<d.first)return rn(d.first,0);var B=d.first+d.size-1;return v.line>B?rn(B,Mi(d,B).text.length):RA(v,Mi(d,v.line).text.length)}function RA(d,v){var B=d.ch;return B==null||B>v?rn(d.line,v):B<0?rn(d.line,0):d}function _u(d,v){for(var B=[],E=0;E<v.length;E++)B[E]=Qi(d,v[E]);return B}var yl=function(d,v){this.state=d,this.lookAhead=v},Ss=function(d,v,B,E){this.state=v,this.doc=d,this.line=B,this.maxLookAhead=E||0,this.baseTokens=null,this.baseTokenPos=1};Ss.prototype.lookAhead=function(d){var v=this.doc.getLine(this.line+d);return v!=null&&d>this.maxLookAhead&&(this.maxLookAhead=d),v},Ss.prototype.baseToken=function(d){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=d;)this.baseTokenPos+=2;var v=this.baseTokens[this.baseTokenPos+1];return{type:v&&v.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-d}},Ss.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ss.fromSaved=function(d,v,B){return v instanceof yl?new Ss(d,Ao(d.mode,v.state),B,v.lookAhead):new Ss(d,Ao(d.mode,v),B)},Ss.prototype.save=function(d){var v=d!==!1?Ao(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new yl(v,this.maxLookAhead):v};function xc(d,v,B,E){var F=[d.state.modeGen],Z={};xr(d,v.text,d.doc.mode,B,function(Le,vt){return F.push(Le,vt)},Z,E);for(var fe=B.state,_e=function(Le){B.baseTokens=F;var vt=d.state.overlays[Le],It=1,Jt=0;B.state=!0,xr(d,v.text,vt.mode,B,function(Ht,_n){for(var Rn=It;Jt<Ht;){var oi=F[It];oi>Ht&&F.splice(It,1,Ht,F[It+1],oi),It+=2,Jt=Math.min(Ht,oi)}if(_n)if(vt.opaque)F.splice(Rn,It-Rn,Ht,"overlay "+_n),It=Rn+2;else for(;Rn<It;Rn+=2){var mi=F[Rn+1];F[Rn+1]=(mi?mi+" ":"")+"overlay "+_n}},Z),B.state=fe,B.baseTokens=null,B.baseTokenPos=1},ke=0;ke<d.state.overlays.length;++ke)_e(ke);return{styles:F,classes:Z.bgClass||Z.textClass?Z:null}}function Ys(d,v,B){if(!v.styles||v.styles[0]!=d.state.modeGen){var E=$o(d,$e(v)),F=v.text.length>d.options.maxHighlightLength&&Ao(d.doc.mode,E.state),Z=xc(d,v,E);F&&(E.state=F),v.stateAfter=E.save(!F),v.styles=Z.styles,Z.classes?v.styleClasses=Z.classes:v.styleClasses&&(v.styleClasses=null),B===d.doc.highlightFrontier&&(d.doc.modeFrontier=Math.max(d.doc.modeFrontier,++d.doc.highlightFrontier))}return v.styles}function $o(d,v,B){var E=d.doc,F=d.display;if(!E.mode.startState)return new Ss(E,!0,v);var Z=iu(d,v,B),fe=Z>E.first&&Mi(E,Z-1).stateAfter,_e=fe?Ss.fromSaved(E,fe,Z):new Ss(E,Da(E.mode),Z);return E.iter(Z,v,function(ke){ko(d,ke.text,_e);var Le=_e.line;ke.stateAfter=Le==v-1||Le%5==0||Le>=F.viewFrom&&Le<F.viewTo?_e.save():null,_e.nextLine()}),B&&(E.modeFrontier=_e.line),_e}function ko(d,v,B,E){var F=d.doc.mode,Z=new Vi(v,d.options.tabSize,B);for(Z.start=Z.pos=E||0,v==""&&dr(F,B.state);!Z.eol();)Kl(F,Z,B.state),Z.start=Z.pos}function dr(d,v){if(d.blankLine)return d.blankLine(v);if(d.innerMode){var B=Wu(d,v);if(B.mode.blankLine)return B.mode.blankLine(B.state)}}function Kl(d,v,B,E){for(var F=0;F<10;F++){E&&(E[0]=Wu(d,B).mode);var Z=d.token(v,B);if(v.pos>v.start)return Z}throw new Error("Mode "+d.name+" failed to advance stream.")}var ga=function(d,v,B){this.start=d.start,this.end=d.pos,this.string=d.current(),this.type=v||null,this.state=B};function Ul(d,v,B,E){var F=d.doc,Z=F.mode,fe;v=Qi(F,v);var _e=Mi(F,v.line),ke=$o(d,v.line,B),Le=new Vi(_e.text,d.options.tabSize,ke),vt;for(E&&(vt=[]);(E||Le.pos<v.ch)&&!Le.eol();)Le.start=Le.pos,fe=Kl(Z,Le,ke.state),E&&vt.push(new ga(Le,fe,Ao(F.mode,ke.state)));return E?vt:new ga(Le,fe,ke.state)}function bu(d,v){if(d)for(;;){var B=d.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!B)break;d=d.slice(0,B.index)+d.slice(B.index+B[0].length);var E=B[1]?"bgClass":"textClass";v[E]==null?v[E]=B[2]:new RegExp("(?:^|\\s)"+B[2]+"(?:$|\\s)").test(v[E])||(v[E]+=" "+B[2])}return d}function xr(d,v,B,E,F,Z,fe){var _e=B.flattenSpans;_e==null&&(_e=d.options.flattenSpans);var ke=0,Le=null,vt=new Vi(v,d.options.tabSize,E),It,Jt=d.options.addModeClass&&[null];for(v==""&&bu(dr(B,E.state),Z);!vt.eol();){if(vt.pos>d.options.maxHighlightLength?(_e=!1,fe&&ko(d,v,E,vt.pos),vt.pos=v.length,It=null):It=bu(Kl(B,vt,E.state,Jt),Z),Jt){var Ht=Jt[0].name;Ht&&(It="m-"+(It?Ht+" "+It:Ht))}if(!_e||Le!=It){for(;ke<vt.start;)ke=Math.min(vt.start,ke+5e3),F(ke,Le);Le=It}vt.start=vt.pos}for(;ke<vt.pos;){var _n=Math.min(vt.pos,ke+5e3);F(_n,Le),ke=_n}}function iu(d,v,B){for(var E,F,Z=d.doc,fe=B?-1:v-(d.doc.mode.innerMode?1e3:100),_e=v;_e>fe;--_e){if(_e<=Z.first)return Z.first;var ke=Mi(Z,_e-1),Le=ke.stateAfter;if(Le&&(!B||_e+(Le instanceof yl?Le.lookAhead:0)<=Z.modeFrontier))return _e;var vt=Ke(ke.text,null,d.options.tabSize);(F==null||E>vt)&&(F=_e-1,E=vt)}return F}function cA(d,v){if(d.modeFrontier=Math.min(d.modeFrontier,v),!(d.highlightFrontier<v-10)){for(var B=d.first,E=v-1;E>B;E--){var F=Mi(d,E).stateAfter;if(F&&(!(F instanceof yl)||E+F.lookAhead<v)){B=E+1;break}}d.highlightFrontier=Math.min(d.highlightFrontier,B)}}var jo=!1,Eo=!1;function za(){jo=!0}function wa(){Eo=!0}function aa(d,v,B){this.marker=d,this.from=v,this.to=B}function Dr(d,v){if(d)for(var B=0;B<d.length;++B){var E=d[B];if(E.marker==v)return E}}function ru(d,v){for(var B,E=0;E<d.length;++E)d[E]!=v&&(B||(B=[])).push(d[E]);return B}function ja(d,v,B){var E=B&&window.WeakSet&&(B.markedSpans||(B.markedSpans=new WeakSet));E&&d.markedSpans&&E.has(d.markedSpans)?d.markedSpans.push(v):(d.markedSpans=d.markedSpans?d.markedSpans.concat([v]):[v],E&&E.add(d.markedSpans)),v.marker.attachLine(d)}function Ja(d,v,B){var E;if(d)for(var F=0;F<d.length;++F){var Z=d[F],fe=Z.marker,_e=Z.from==null||(fe.inclusiveLeft?Z.from<=v:Z.from<v);if(_e||Z.from==v&&fe.type=="bookmark"&&(!B||!Z.marker.insertLeft)){var ke=Z.to==null||(fe.inclusiveRight?Z.to>=v:Z.to>v);(E||(E=[])).push(new aa(fe,Z.from,ke?null:Z.to))}}return E}function ya(d,v,B){var E;if(d)for(var F=0;F<d.length;++F){var Z=d[F],fe=Z.marker,_e=Z.to==null||(fe.inclusiveRight?Z.to>=v:Z.to>v);if(_e||Z.from==v&&fe.type=="bookmark"&&(!B||Z.marker.insertLeft)){var ke=Z.from==null||(fe.inclusiveLeft?Z.from<=v:Z.from<v);(E||(E=[])).push(new aa(fe,ke?null:Z.from-v,Z.to==null?null:Z.to-v))}}return E}function Rr(d,v){if(v.full)return null;var B=xn(d,v.from.line)&&Mi(d,v.from.line).markedSpans,E=xn(d,v.to.line)&&Mi(d,v.to.line).markedSpans;if(!B&&!E)return null;var F=v.from.ch,Z=v.to.ch,fe=si(v.from,v.to)==0,_e=Ja(B,F,fe),ke=ya(E,Z,fe),Le=v.text.length==1,vt=$n(v.text).length+(Le?F:0);if(_e)for(var It=0;It<_e.length;++It){var Jt=_e[It];if(Jt.to==null){var Ht=Dr(ke,Jt.marker);Ht?Le&&(Jt.to=Ht.to==null?null:Ht.to+vt):Jt.to=F}}if(ke)for(var _n=0;_n<ke.length;++_n){var Rn=ke[_n];if(Rn.to!=null&&(Rn.to+=vt),Rn.from==null){var oi=Dr(_e,Rn.marker);oi||(Rn.from=vt,Le&&(_e||(_e=[])).push(Rn))}else Rn.from+=vt,Le&&(_e||(_e=[])).push(Rn)}_e&&(_e=vl(_e)),ke&&ke!=_e&&(ke=vl(ke));var mi=[_e];if(!Le){var Ci=v.text.length-2,gi;if(Ci>0&&_e)for(var Di=0;Di<_e.length;++Di)_e[Di].to==null&&(gi||(gi=[])).push(new aa(_e[Di].marker,null,null));for(var ar=0;ar<Ci;++ar)mi.push(gi);mi.push(ke)}return mi}function vl(d){for(var v=0;v<d.length;++v){var B=d[v];B.from!=null&&B.from==B.to&&B.marker.clearWhenEmpty!==!1&&d.splice(v--,1)}return d.length?d:null}function Zi(d,v,B){var E=null;if(d.iter(v.line,B.line+1,function(Ht){if(Ht.markedSpans)for(var _n=0;_n<Ht.markedSpans.length;++_n){var Rn=Ht.markedSpans[_n].marker;Rn.readOnly&&(!E||He(E,Rn)==-1)&&(E||(E=[])).push(Rn)}}),!E)return null;for(var F=[{from:v,to:B}],Z=0;Z<E.length;++Z)for(var fe=E[Z],_e=fe.find(0),ke=0;ke<F.length;++ke){var Le=F[ke];if(!(si(Le.to,_e.from)<0||si(Le.from,_e.to)>0)){var vt=[ke,1],It=si(Le.from,_e.from),Jt=si(Le.to,_e.to);(It<0||!fe.inclusiveLeft&&!It)&&vt.push({from:Le.from,to:_e.from}),(Jt>0||!fe.inclusiveRight&&!Jt)&&vt.push({from:_e.to,to:Le.to}),F.splice.apply(F,vt),ke+=vt.length-3}}return F}function wi(d){var v=d.markedSpans;if(v){for(var B=0;B<v.length;++B)v[B].marker.detachLine(d);d.markedSpans=null}}function Yr(d,v){if(v){for(var B=0;B<v.length;++B)v[B].marker.attachLine(d);d.markedSpans=v}}function ee(d){return d.inclusiveLeft?-1:0}function Be(d){return d.inclusiveRight?1:0}function at(d,v){var B=d.lines.length-v.lines.length;if(B!=0)return B;var E=d.find(),F=v.find(),Z=si(E.from,F.from)||ee(d)-ee(v);if(Z)return-Z;var fe=si(E.to,F.to)||Be(d)-Be(v);return fe||v.id-d.id}function Gt(d,v){var B=Eo&&d.markedSpans,E;if(B)for(var F=void 0,Z=0;Z<B.length;++Z)F=B[Z],F.marker.collapsed&&(v?F.from:F.to)==null&&(!E||at(E,F.marker)<0)&&(E=F.marker);return E}function Si(d){return Gt(d,!0)}function Xn(d){return Gt(d,!1)}function $i(d,v){var B=Eo&&d.markedSpans,E;if(B)for(var F=0;F<B.length;++F){var Z=B[F];Z.marker.collapsed&&(Z.from==null||Z.from<v)&&(Z.to==null||Z.to>v)&&(!E||at(E,Z.marker)<0)&&(E=Z.marker)}return E}function or(d,v,B,E,F){var Z=Mi(d,v),fe=Eo&&Z.markedSpans;if(fe)for(var _e=0;_e<fe.length;++_e){var ke=fe[_e];if(ke.marker.collapsed){var Le=ke.marker.find(0),vt=si(Le.from,B)||ee(ke.marker)-ee(F),It=si(Le.to,E)||Be(ke.marker)-Be(F);if(!(vt>=0&&It<=0||vt<=0&&It>=0)&&(vt<=0&&(ke.marker.inclusiveRight&&F.inclusiveLeft?si(Le.to,B)>=0:si(Le.to,B)>0)||vt>=0&&(ke.marker.inclusiveRight&&F.inclusiveLeft?si(Le.from,E)<=0:si(Le.from,E)<0)))return!0}}}function Ri(d){for(var v;v=Si(d);)d=v.find(-1,!0).line;return d}function Xi(d){for(var v;v=Xn(d);)d=v.find(1,!0).line;return d}function to(d){for(var v,B;v=Xn(d);)d=v.find(1,!0).line,(B||(B=[])).push(d);return B}function co(d,v){var B=Mi(d,v),E=Ri(B);return B==E?v:$e(E)}function Ar(d,v){if(v>d.lastLine())return v;var B=Mi(d,v),E;if(!mr(d,B))return v;for(;E=Xn(B);)B=E.find(1,!0).line;return $e(B)+1}function mr(d,v){var B=Eo&&v.markedSpans;if(B){for(var E=void 0,F=0;F<B.length;++F)if(E=B[F],!!E.marker.collapsed){if(E.from==null)return!0;if(!E.marker.widgetNode&&E.from==0&&E.marker.inclusiveLeft&&ho(d,v,E))return!0}}}function ho(d,v,B){if(B.to==null){var E=B.marker.find(1,!0);return ho(d,E.line,Dr(E.line.markedSpans,B.marker))}if(B.marker.inclusiveRight&&B.to==v.text.length)return!0;for(var F=void 0,Z=0;Z<v.markedSpans.length;++Z)if(F=v.markedSpans[Z],F.marker.collapsed&&!F.marker.widgetNode&&F.from==B.to&&(F.to==null||F.to!=B.from)&&(F.marker.inclusiveLeft||B.marker.inclusiveRight)&&ho(d,v,F))return!0}function No(d){d=Ri(d);for(var v=0,B=d.parent,E=0;E<B.lines.length;++E){var F=B.lines[E];if(F==d)break;v+=F.height}for(var Z=B.parent;Z;B=Z,Z=B.parent)for(var fe=0;fe<Z.children.length;++fe){var _e=Z.children[fe];if(_e==B)break;v+=_e.height}return v}function jr(d){if(d.height==0)return 0;for(var v=d.text.length,B,E=d;B=Si(E);){var F=B.find(0,!0);E=F.from.line,v+=F.from.ch-F.to.ch}for(E=d;B=Xn(E);){var Z=B.find(0,!0);v-=E.text.length-Z.from.ch,E=Z.to.line,v+=E.text.length-Z.to.ch}return v}function qs(d){var v=d.display,B=d.doc;v.maxLine=Mi(B,B.first),v.maxLineLength=jr(v.maxLine),v.maxLineChanged=!0,B.iter(function(E){var F=jr(E);F>v.maxLineLength&&(v.maxLineLength=F,v.maxLine=E)})}var Ll=function(d,v,B){this.text=d,Yr(this,v),this.height=B?B(this):1};Ll.prototype.lineNo=function(){return $e(this)},ii(Ll);function Yu(d,v,B,E){d.text=v,d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null),d.order!=null&&(d.order=null),wi(d),Yr(d,B);var F=E?E(d):1;F!=d.height&&Vo(d,F)}function ps(d){d.parent=null,wi(d)}var gd={},Ra={};function yd(d,v){if(!d||/^\s*$/.test(d))return null;var B=v.addModeClass?Ra:gd;return B[d]||(B[d]=d.replace(/\S+/g,"cm-$&"))}function PA(d,v){var B=ze("span",null,null,w?"padding-right: .1px":null),E={pre:ze("pre",[B],"CodeMirror-line"),content:B,col:0,pos:0,cm:d,trailingSpace:!1,splitSpaces:d.getOption("lineWrapping")};v.measure={};for(var F=0;F<=(v.rest?v.rest.length:0);F++){var Z=F?v.rest[F-1]:v.line,fe=void 0;E.pos=0,E.addToken=gh,ma(d.display.measure)&&(fe=Ze(Z,d.doc.direction))&&(E.addToken=po(E.addToken,fe)),E.map=[];var _e=v!=d.display.externalMeasured&&$e(Z);vd(Z,E,Ys(d,Z,_e)),Z.styleClasses&&(Z.styleClasses.bgClass&&(E.bgClass=Ne(Z.styleClasses.bgClass,E.bgClass||"")),Z.styleClasses.textClass&&(E.textClass=Ne(Z.styleClasses.textClass,E.textClass||""))),E.map.length==0&&E.map.push(0,0,E.content.appendChild(uo(d.display.measure))),F==0?(v.measure.map=E.map,v.measure.cache={}):((v.measure.maps||(v.measure.maps=[])).push(E.map),(v.measure.caches||(v.measure.caches=[])).push({}))}if(w){var ke=E.content.lastChild;(/\bcm-tab\b/.test(ke.className)||ke.querySelector&&ke.querySelector(".cm-tab"))&&(E.content.className="cm-tab-wrap-hack")}return it(d,"renderLine",d,v.line,E.pre),E.pre.className&&(E.textClass=Ne(E.pre.className,E.textClass||"")),E}function qu(d){var v=xe("span","","cm-invalidchar");return v.title="\\u"+d.charCodeAt(0).toString(16),v.setAttribute("aria-label",v.title),v}function gh(d,v,B,E,F,Z,fe){if(v){var _e=d.splitSpaces?jh(v,d.trailingSpace):v,ke=d.cm.state.specialChars,Le=!1,vt;if(!ke.test(v))d.col+=v.length,vt=document.createTextNode(_e),d.map.push(d.pos,d.pos+v.length,vt),p&&C<9&&(Le=!0),d.pos+=v.length;else{vt=document.createDocumentFragment();for(var It=0;;){ke.lastIndex=It;var Jt=ke.exec(v),Ht=Jt?Jt.index-It:v.length-It;if(Ht){var _n=document.createTextNode(_e.slice(It,It+Ht));p&&C<9?vt.appendChild(xe("span",[_n])):vt.appendChild(_n),d.map.push(d.pos,d.pos+Ht,_n),d.col+=Ht,d.pos+=Ht}if(!Jt)break;It+=Ht+1;var Rn=void 0;if(Jt[0]=="	"){var oi=d.cm.options.tabSize,mi=oi-d.col%oi;Rn=vt.appendChild(xe("span",Wt(mi),"cm-tab")),Rn.setAttribute("role","presentation"),Rn.setAttribute("cm-text","	"),d.col+=mi}else Jt[0]=="\r"||Jt[0]==`
`?(Rn=vt.appendChild(xe("span",Jt[0]=="\r"?"":"","cm-invalidchar")),Rn.setAttribute("cm-text",Jt[0]),d.col+=1):(Rn=d.cm.options.specialCharPlaceholder(Jt[0]),Rn.setAttribute("cm-text",Jt[0]),p&&C<9?vt.appendChild(xe("span",[Rn])):vt.appendChild(Rn),d.col+=1);d.map.push(d.pos,d.pos+1,Rn),d.pos++}}if(d.trailingSpace=_e.charCodeAt(v.length-1)==32,B||E||F||Le||Z||fe){var Ci=B||"";E&&(Ci+=E),F&&(Ci+=F);var gi=xe("span",[vt],Ci,Z);if(fe)for(var Di in fe)fe.hasOwnProperty(Di)&&Di!="style"&&Di!="class"&&gi.setAttribute(Di,fe[Di]);return d.content.appendChild(gi)}d.content.appendChild(vt)}}function jh(d,v){if(d.length>1&&!/  /.test(d))return d;for(var B=v,E="",F=0;F<d.length;F++){var Z=d.charAt(F);Z==" "&&B&&(F==d.length-1||d.charCodeAt(F+1)==32)&&(Z=""),E+=Z,B=Z==" "}return E}function po(d,v){return function(B,E,F,Z,fe,_e,ke){F=F?F+" cm-force-border":"cm-force-border";for(var Le=B.pos,vt=Le+E.length;;){for(var It=void 0,Jt=0;Jt<v.length&&(It=v[Jt],!(It.to>Le&&It.from<=Le));Jt++);if(It.to>=vt)return d(B,E,F,Z,fe,_e,ke);d(B,E.slice(0,It.to-Le),F,Z,null,_e,ke),Z=null,E=E.slice(It.to-Le),Le=It.to}}}function rc(d,v,B,E){var F=!E&&B.widgetNode;F&&d.map.push(d.pos,d.pos+v,F),!E&&d.cm.display.input.needsContentAttribute&&(F||(F=d.content.appendChild(document.createElement("span"))),F.setAttribute("cm-marker",B.id)),F&&(d.cm.display.input.setUneditable(F),d.content.appendChild(F)),d.pos+=v,d.trailingSpace=!1}function vd(d,v,B){var E=d.markedSpans,F=d.text,Z=0;if(!E){for(var fe=1;fe<B.length;fe+=2)v.addToken(v,F.slice(Z,Z=B[fe]),yd(B[fe+1],v.cm.options));return}for(var _e=F.length,ke=0,Le=1,vt="",It,Jt,Ht=0,_n,Rn,oi,mi,Ci;;){if(Ht==ke){_n=Rn=oi=Jt="",Ci=null,mi=null,Ht=1/0;for(var gi=[],Di=void 0,ar=0;ar<E.length;++ar){var Yi=E[ar],Jr=Yi.marker;if(Jr.type=="bookmark"&&Yi.from==ke&&Jr.widgetNode)gi.push(Jr);else if(Yi.from<=ke&&(Yi.to==null||Yi.to>ke||Jr.collapsed&&Yi.to==ke&&Yi.from==ke)){if(Yi.to!=null&&Yi.to!=ke&&Ht>Yi.to&&(Ht=Yi.to,Rn=""),Jr.className&&(_n+=" "+Jr.className),Jr.css&&(Jt=(Jt?Jt+";":"")+Jr.css),Jr.startStyle&&Yi.from==ke&&(oi+=" "+Jr.startStyle),Jr.endStyle&&Yi.to==Ht&&(Di||(Di=[])).push(Jr.endStyle,Yi.to),Jr.title&&((Ci||(Ci={})).title=Jr.title),Jr.attributes)for(var Mr in Jr.attributes)(Ci||(Ci={}))[Mr]=Jr.attributes[Mr];Jr.collapsed&&(!mi||at(mi.marker,Jr)<0)&&(mi=Yi)}else Yi.from>ke&&Ht>Yi.from&&(Ht=Yi.from)}if(Di)for(var rs=0;rs<Di.length;rs+=2)Di[rs+1]==Ht&&(Rn+=" "+Di[rs]);if(!mi||mi.from==ke)for(var ca=0;ca<gi.length;++ca)rc(v,0,gi[ca]);if(mi&&(mi.from||0)==ke){if(rc(v,(mi.to==null?_e+1:mi.to)-ke,mi.marker,mi.from==null),mi.to==null)return;mi.to==ke&&(mi=!1)}}if(ke>=_e)break;for(var qr=Math.min(_e,Ht);;){if(vt){var vs=ke+vt.length;if(!mi){var Cs=vs>qr?vt.slice(0,qr-ke):vt;v.addToken(v,Cs,It?It+_n:_n,oi,ke+Cs.length==Ht?Rn:"",Jt,Ci)}if(vs>=qr){vt=vt.slice(qr-ke),ke=qr;break}ke=vs,oi=""}vt=F.slice(Z,Z=B[Le++]),It=yd(B[Le++],v.cm.options)}}}function dm(d,v,B){this.line=v,this.rest=to(v),this.size=this.rest?$e($n(this.rest))-B+1:1,this.node=this.text=null,this.hidden=mr(d,v)}function yh(d,v,B){for(var E=[],F,Z=v;Z<B;Z=F){var fe=new dm(d.doc,Mi(d.doc,Z),Z);F=Z+fe.size,E.push(fe)}return E}var Cd=null;function r0(d){Cd?Cd.ops.push(d):d.ownsGroup=Cd={ops:[d],delayedCallbacks:[]}}function Tf(d){var v=d.delayedCallbacks,B=0;do{for(;B<v.length;B++)v[B].call(null);for(var E=0;E<d.ops.length;E++){var F=d.ops[E];if(F.cursorActivityHandlers)for(;F.cursorActivityCalled<F.cursorActivityHandlers.length;)F.cursorActivityHandlers[F.cursorActivityCalled++].call(null,F.cm)}}while(B<v.length)}function kf(d,v){var B=d.ownsGroup;if(B)try{Tf(B)}finally{Cd=null,v(B)}}var Hu=null;function es(d,v){var B=ht(d,v);if(B.length){var E=Array.prototype.slice.call(arguments,2),F;Cd?F=Cd.delayedCallbacks:Hu?F=Hu:(F=Hu=[],setTimeout(_d,0));for(var Z=function(_e){F.push(function(){return B[_e].apply(null,E)})},fe=0;fe<B.length;++fe)Z(fe)}}function _d(){var d=Hu;Hu=null;for(var v=0;v<d.length;++v)d[v]()}function Fl(d,v,B,E){for(var F=0;F<v.changes.length;F++){var Z=v.changes[F];Z=="text"?Gh(d,v):Z=="gutter"?vh(d,v,B,E):Z=="class"?Df(d,v):Z=="widget"&&Ch(d,v,E)}v.changes=null}function bd(d){return d.node==d.text&&(d.node=xe("div",null,null,"position: relative"),d.text.parentNode&&d.text.parentNode.replaceChild(d.node,d.text),d.node.appendChild(d.text),p&&C<8&&(d.node.style.zIndex=2)),d.node}function Nh(d,v){var B=v.bgClass?v.bgClass+" "+(v.line.bgClass||""):v.line.bgClass;if(B&&(B+=" CodeMirror-linebackground"),v.background)B?v.background.className=B:(v.background.parentNode.removeChild(v.background),v.background=null);else if(B){var E=bd(v);v.background=E.insertBefore(xe("div",null,B),E.firstChild),d.display.input.setUneditable(v.background)}}function qc(d,v){var B=d.display.externalMeasured;return B&&B.line==v.line?(d.display.externalMeasured=null,v.measure=B.measure,B.built):PA(d,v)}function Gh(d,v){var B=v.text.className,E=qc(d,v);v.text==v.node&&(v.node=E.pre),v.text.parentNode.replaceChild(E.pre,v.text),v.text=E.pre,E.bgClass!=v.bgClass||E.textClass!=v.textClass?(v.bgClass=E.bgClass,v.textClass=E.textClass,Df(d,v)):B&&(v.text.className=B)}function Df(d,v){Nh(d,v),v.line.wrapClass?bd(v).className=v.line.wrapClass:v.node!=v.text&&(v.node.className="");var B=v.textClass?v.textClass+" "+(v.line.textClass||""):v.line.textClass;v.text.className=B||""}function vh(d,v,B,E){if(v.gutter&&(v.node.removeChild(v.gutter),v.gutter=null),v.gutterBackground&&(v.node.removeChild(v.gutterBackground),v.gutterBackground=null),v.line.gutterClass){var F=bd(v);v.gutterBackground=xe("div",null,"CodeMirror-gutter-background "+v.line.gutterClass,"left: "+(d.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px; width: "+E.gutterTotalWidth+"px"),d.display.input.setUneditable(v.gutterBackground),F.insertBefore(v.gutterBackground,v.text)}var Z=v.line.gutterMarkers;if(d.options.lineNumbers||Z){var fe=bd(v),_e=v.gutter=xe("div",null,"CodeMirror-gutter-wrapper","left: "+(d.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px");if(_e.setAttribute("aria-hidden","true"),d.display.input.setUneditable(_e),fe.insertBefore(_e,v.text),v.line.gutterClass&&(_e.className+=" "+v.line.gutterClass),d.options.lineNumbers&&(!Z||!Z["CodeMirror-linenumbers"])&&(v.lineNumber=_e.appendChild(xe("div",Gn(d.options,B),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+E.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+d.display.lineNumInnerWidth+"px"))),Z)for(var ke=0;ke<d.display.gutterSpecs.length;++ke){var Le=d.display.gutterSpecs[ke].className,vt=Z.hasOwnProperty(Le)&&Z[Le];vt&&_e.appendChild(xe("div",[vt],"CodeMirror-gutter-elt","left: "+E.gutterLeft[Le]+"px; width: "+E.gutterWidth[Le]+"px"))}}}function Ch(d,v,B){v.alignable&&(v.alignable=null);for(var E=we("CodeMirror-linewidget"),F=v.node.firstChild,Z=void 0;F;F=Z)Z=F.nextSibling,E.test(F.className)&&v.node.removeChild(F);Rf(d,v,B)}function Wh(d,v,B,E){var F=qc(d,v);return v.text=v.node=F.pre,F.bgClass&&(v.bgClass=F.bgClass),F.textClass&&(v.textClass=F.textClass),Df(d,v),vh(d,v,B,E),Rf(d,v,E),v.node}function Rf(d,v,B){if(ou(d,v.line,v,B,!0),v.rest)for(var E=0;E<v.rest.length;E++)ou(d,v.rest[E],v,B,!1)}function ou(d,v,B,E,F){if(v.widgets)for(var Z=bd(B),fe=0,_e=v.widgets;fe<_e.length;++fe){var ke=_e[fe],Le=xe("div",[ke.node],"CodeMirror-linewidget"+(ke.className?" "+ke.className:""));ke.handleMouseEvents||Le.setAttribute("cm-ignore-events","true"),Pf(ke,Le,B,E),d.display.input.setUneditable(Le),F&&ke.above?Z.insertBefore(Le,B.gutter||B.text):Z.appendChild(Le),es(ke,"redraw")}}function Pf(d,v,B,E){if(d.noHScroll){(B.alignable||(B.alignable=[])).push(v);var F=E.wrapperWidth;v.style.left=E.fixedPos+"px",d.coverGutter||(F-=E.gutterTotalWidth,v.style.paddingLeft=E.gutterTotalWidth+"px"),v.style.width=F+"px"}d.coverGutter&&(v.style.zIndex=5,v.style.position="relative",d.noHScroll||(v.style.marginLeft=-E.gutterTotalWidth+"px"))}function oc(d){if(d.height!=null)return d.height;var v=d.doc.cm;if(!v)return 0;if(!Ct(document.body,d.node)){var B="position: relative;";d.coverGutter&&(B+="margin-left: -"+v.display.gutters.offsetWidth+"px;"),d.noHScroll&&(B+="width: "+v.display.wrapper.clientWidth+"px;"),Ve(v.display.measure,xe("div",[d.node],null,B))}return d.height=d.node.parentNode.offsetHeight}function au(d,v){for(var B=hi(v);B!=d.wrapper;B=B.parentNode)if(!B||B.nodeType==1&&B.getAttribute("cm-ignore-events")=="true"||B.parentNode==d.sizer&&B!=d.mover)return!0}function Mc(d){return d.lineSpace.offsetTop}function xd(d){return d.mover.offsetHeight-d.lineSpace.offsetHeight}function Md(d){if(d.cachedPaddingH)return d.cachedPaddingH;var v=Ve(d.measure,xe("pre","x","CodeMirror-line-like")),B=window.getComputedStyle?window.getComputedStyle(v):v.currentStyle,E={left:parseInt(B.paddingLeft),right:parseInt(B.paddingRight)};return!isNaN(E.left)&&!isNaN(E.right)&&(d.cachedPaddingH=E),E}function KA(d){return bt-d.display.nativeBarWidth}function Vu(d){return d.display.scroller.clientWidth-KA(d)-d.display.barWidth}function Qh(d){return d.display.scroller.clientHeight-KA(d)-d.display.barHeight}function wc(d,v,B){var E=d.options.lineWrapping,F=E&&Vu(d);if(!v.measure.heights||E&&v.measure.width!=F){var Z=v.measure.heights=[];if(E){v.measure.width=F;for(var fe=v.text.firstChild.getClientRects(),_e=0;_e<fe.length-1;_e++){var ke=fe[_e],Le=fe[_e+1];Math.abs(ke.bottom-Le.bottom)>2&&Z.push((ke.bottom+Le.top)/2-B.top)}}Z.push(B.bottom-B.top)}}function Yh(d,v,B){if(d.line==v)return{map:d.measure.map,cache:d.measure.cache};if(d.rest){for(var E=0;E<d.rest.length;E++)if(d.rest[E]==v)return{map:d.measure.maps[E],cache:d.measure.caches[E]};for(var F=0;F<d.rest.length;F++)if($e(d.rest[F])>B)return{map:d.measure.maps[F],cache:d.measure.caches[F],before:!0}}}function fm(d,v){v=Ri(v);var B=$e(v),E=d.display.externalMeasured=new dm(d.doc,v,B);E.lineN=B;var F=E.built=PA(d,E);return E.text=F.pre,Ve(d.display.lineMeasure,F.pre),E}function Hc(d,v,B,E){return $u(d,hA(d,v),B,E)}function Vd(d,v){if(v>=d.display.viewFrom&&v<d.display.viewTo)return d.display.view[Vs(d,v)];var B=d.display.externalMeasured;if(B&&v>=B.lineN&&v<B.lineN+B.size)return B}function hA(d,v){var B=$e(v),E=Vd(d,B);E&&!E.text?E=null:E&&E.changes&&(Fl(d,E,B,Tl(d)),d.curOp.forceUpdate=!0),E||(E=fm(d,v));var F=Yh(E,v,B);return{line:v,view:E,rect:null,map:F.map,cache:F.cache,before:F.before,hasHeights:!1}}function $u(d,v,B,E,F){v.before&&(B=-1);var Z=B+(E||""),fe;return v.cache.hasOwnProperty(Z)?fe=v.cache[Z]:(v.rect||(v.rect=v.view.text.getBoundingClientRect()),v.hasHeights||(wc(d,v.view,v.rect),v.hasHeights=!0),fe=ac(d,v,B,E),fe.bogus||(v.cache[Z]=fe)),{left:fe.left,right:fe.right,top:F?fe.rtop:fe.top,bottom:F?fe.rbottom:fe.bottom}}var Mp={left:0,right:0,top:0,bottom:0};function Kf(d,v,B){for(var E,F,Z,fe,_e,ke,Le=0;Le<d.length;Le+=3)if(_e=d[Le],ke=d[Le+1],v<_e?(F=0,Z=1,fe="left"):v<ke?(F=v-_e,Z=F+1):(Le==d.length-3||v==ke&&d[Le+3]>v)&&(Z=ke-_e,F=Z-1,v>=ke&&(fe="right")),F!=null){if(E=d[Le+2],_e==ke&&B==(E.insertLeft?"left":"right")&&(fe=B),B=="left"&&F==0)for(;Le&&d[Le-2]==d[Le-3]&&d[Le-1].insertLeft;)E=d[(Le-=3)+2],fe="left";if(B=="right"&&F==ke-_e)for(;Le<d.length-3&&d[Le+3]==d[Le+4]&&!d[Le+5].insertLeft;)E=d[(Le+=3)+2],fe="right";break}return{node:E,start:F,end:Z,collapse:fe,coverStart:_e,coverEnd:ke}}function xu(d,v){var B=Mp;if(v=="left")for(var E=0;E<d.length&&(B=d[E]).left==B.right;E++);else for(var F=d.length-1;F>=0&&(B=d[F]).left==B.right;F--);return B}function ac(d,v,B,E){var F=Kf(v.map,B,E),Z=F.node,fe=F.start,_e=F.end,ke=F.collapse,Le;if(Z.nodeType==3){for(var vt=0;vt<4;vt++){for(;fe&&le(v.line.text.charAt(F.coverStart+fe));)--fe;for(;F.coverStart+_e<F.coverEnd&&le(v.line.text.charAt(F.coverStart+_e));)++_e;if(p&&C<9&&fe==0&&_e==F.coverEnd-F.coverStart?Le=Z.parentNode.getBoundingClientRect():Le=xu(st(Z,fe,_e).getClientRects(),E),Le.left||Le.right||fe==0)break;_e=fe,fe=fe-1,ke="right"}p&&C<11&&(Le=Mu(d.display.measure,Le))}else{fe>0&&(ke=E="right");var It;d.options.lineWrapping&&(It=Z.getClientRects()).length>1?Le=It[E=="right"?It.length-1:0]:Le=Z.getBoundingClientRect()}if(p&&C<9&&!fe&&(!Le||!Le.left&&!Le.right)){var Jt=Z.parentNode.getClientRects()[0];Jt?Le={left:Jt.left,right:Jt.left+Su(d.display),top:Jt.top,bottom:Jt.bottom}:Le=Mp}for(var Ht=Le.top-v.rect.top,_n=Le.bottom-v.rect.top,Rn=(Ht+_n)/2,oi=v.view.measure.heights,mi=0;mi<oi.length-1&&!(Rn<oi[mi]);mi++);var Ci=mi?oi[mi-1]:0,gi=oi[mi],Di={left:(ke=="right"?Le.right:Le.left)-v.rect.left,right:(ke=="left"?Le.left:Le.right)-v.rect.left,top:Ci,bottom:gi};return!Le.left&&!Le.right&&(Di.bogus=!0),d.options.singleCursorHeightPerLine||(Di.rtop=Ht,Di.rbottom=_n),Di}function Mu(d,v){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!vr(d))return v;var B=screen.logicalXDPI/screen.deviceXDPI,E=screen.logicalYDPI/screen.deviceYDPI;return{left:v.left*B,right:v.right*B,top:v.top*E,bottom:v.bottom*E}}function UA(d){if(d.measure&&(d.measure.cache={},d.measure.heights=null,d.rest))for(var v=0;v<d.rest.length;v++)d.measure.caches[v]={}}function Bo(d){d.display.externalMeasure=null,Se(d.display.lineMeasure);for(var v=0;v<d.display.view.length;v++)UA(d.display.view[v])}function _h(d){Bo(d),d.display.cachedCharWidth=d.display.cachedTextHeight=d.display.cachedPaddingH=null,d.options.lineWrapping||(d.display.maxLineChanged=!0),d.display.lineNumChars=null}function wd(d){return U&&oe?-(d.body.getBoundingClientRect().left-parseInt(getComputedStyle(d.body).marginLeft)):d.defaultView.pageXOffset||(d.documentElement||d.body).scrollLeft}function wp(d){return U&&oe?-(d.body.getBoundingClientRect().top-parseInt(getComputedStyle(d.body).marginTop)):d.defaultView.pageYOffset||(d.documentElement||d.body).scrollTop}function Sc(d){var v=Ri(d),B=v.widgets,E=0;if(B)for(var F=0;F<B.length;++F)B[F].above&&(E+=oc(B[F]));return E}function zl(d,v,B,E,F){if(!F){var Z=Sc(v);B.top+=Z,B.bottom+=Z}if(E=="line")return B;E||(E="local");var fe=No(v);if(E=="local"?fe+=Mc(d.display):fe-=d.display.viewOffset,E=="page"||E=="window"){var _e=d.display.lineSpace.getBoundingClientRect();fe+=_e.top+(E=="window"?0:wp(lt(d)));var ke=_e.left+(E=="window"?0:wd(lt(d)));B.left+=ke,B.right+=ke}return B.top+=fe,B.bottom+=fe,B}function Zt(d,v,B){if(B=="div")return v;var E=v.left,F=v.top;if(B=="page")E-=wd(lt(d)),F-=wp(lt(d));else if(B=="local"||!B){var Z=d.display.sizer.getBoundingClientRect();E+=Z.left,F+=Z.top}var fe=d.display.lineSpace.getBoundingClientRect();return{left:E-fe.left,top:F-fe.top}}function Sn(d,v,B,E,F){return E||(E=Mi(d.doc,v.line)),zl(d,E,Hc(d,E,v.ch,F),B)}function vn(d,v,B,E,F,Z){E=E||Mi(d.doc,v.line),F||(F=hA(d,E));function fe(_n,Rn){var oi=$u(d,F,_n,Rn?"right":"left",Z);return Rn?oi.left=oi.right:oi.right=oi.left,zl(d,E,oi,B)}var _e=Ze(E,d.doc.direction),ke=v.ch,Le=v.sticky;if(ke>=E.text.length?(ke=E.text.length,Le="before"):ke<=0&&(ke=0,Le="after"),!_e)return fe(Le=="before"?ke-1:ke,Le=="before");function vt(_n,Rn,oi){var mi=_e[Rn],Ci=mi.level==1;return fe(oi?_n-1:_n,Ci!=oi)}var It=Ye(_e,ke,Le),Jt=dt,Ht=vt(ke,It,Le=="before");return Jt!=null&&(Ht.other=vt(ke,Jt,Le!="before")),Ht}function Ti(d,v){var B=0;v=Qi(d.doc,v),d.options.lineWrapping||(B=Su(d.display)*v.ch);var E=Mi(d.doc,v.line),F=No(E)+Mc(d.display);return{left:B,right:B,top:F,bottom:F+E.height}}function Sr(d,v,B,E,F){var Z=rn(d,v,B);return Z.xRel=F,E&&(Z.outside=E),Z}function Oo(d,v,B){var E=d.doc;if(B+=d.display.viewOffset,B<0)return Sr(E.first,0,null,-1,-1);var F=Et(E,B),Z=E.first+E.size-1;if(F>Z)return Sr(E.first+E.size-1,Mi(E,Z).text.length,null,1,1);v<0&&(v=0);for(var fe=Mi(E,F);;){var _e=$d(d,fe,F,v,B),ke=$i(fe,_e.ch+(_e.xRel>0||_e.outside>0?1:0));if(!ke)return _e;var Le=ke.find(1);if(Le.line==F)return Le;fe=Mi(E,F=Le.line)}}function Hs(d,v,B,E){E-=Sc(v);var F=v.text.length,Z=Te(function(fe){return $u(d,B,fe-1).bottom<=E},F,0);return F=Te(function(fe){return $u(d,B,fe).top>E},Z,F),{begin:Z,end:F}}function Do(d,v,B,E){B||(B=hA(d,v));var F=zl(d,v,$u(d,B,E),"line").top;return Hs(d,v,B,F)}function Vc(d,v,B,E){return d.bottom<=B?!1:d.top>B?!0:(E?d.left:d.right)>v}function $d(d,v,B,E,F){F-=No(v);var Z=hA(d,v),fe=Sc(v),_e=0,ke=v.text.length,Le=!0,vt=Ze(v,d.doc.direction);if(vt){var It=(d.options.lineWrapping?Sd:su)(d,v,B,Z,vt,E,F);Le=It.level!=1,_e=Le?It.from:It.to-1,ke=Le?It.to:It.from-1}var Jt=null,Ht=null,_n=Te(function(ar){var Yi=$u(d,Z,ar);return Yi.top+=fe,Yi.bottom+=fe,Vc(Yi,E,F,!1)?(Yi.top<=F&&Yi.left<=E&&(Jt=ar,Ht=Yi),!0):!1},_e,ke),Rn,oi,mi=!1;if(Ht){var Ci=E-Ht.left<Ht.right-E,gi=Ci==Le;_n=Jt+(gi?0:1),oi=gi?"after":"before",Rn=Ci?Ht.left:Ht.right}else{!Le&&(_n==ke||_n==_e)&&_n++,oi=_n==0?"after":_n==v.text.length?"before":$u(d,Z,_n-(Le?1:0)).bottom+fe<=F==Le?"after":"before";var Di=vn(d,rn(B,_n,oi),"line",v,Z);Rn=Di.left,mi=F<Di.top?-1:F>=Di.bottom?1:0}return _n=pe(v.text,_n,1),Sr(B,_n,oi,mi,E-Rn)}function su(d,v,B,E,F,Z,fe){var _e=Te(function(It){var Jt=F[It],Ht=Jt.level!=1;return Vc(vn(d,rn(B,Ht?Jt.to:Jt.from,Ht?"before":"after"),"line",v,E),Z,fe,!0)},0,F.length-1),ke=F[_e];if(_e>0){var Le=ke.level!=1,vt=vn(d,rn(B,Le?ke.from:ke.to,Le?"after":"before"),"line",v,E);Vc(vt,Z,fe,!0)&&vt.top>fe&&(ke=F[_e-1])}return ke}function Sd(d,v,B,E,F,Z,fe){var _e=Hs(d,v,E,fe),ke=_e.begin,Le=_e.end;/\s/.test(v.text.charAt(Le-1))&&Le--;for(var vt=null,It=null,Jt=0;Jt<F.length;Jt++){var Ht=F[Jt];if(!(Ht.from>=Le||Ht.to<=ke)){var _n=Ht.level!=1,Rn=$u(d,E,_n?Math.min(Le,Ht.to)-1:Math.max(ke,Ht.from)).right,oi=Rn<Z?Z-Rn+1e9:Rn-Z;(!vt||It>oi)&&(vt=Ht,It=oi)}}return vt||(vt=F[F.length-1]),vt.from<ke&&(vt={from:ke,to:vt.to,level:vt.level}),vt.to>Le&&(vt={from:vt.from,to:Le,level:vt.level}),vt}var dA;function wu(d){if(d.cachedTextHeight!=null)return d.cachedTextHeight;if(dA==null){dA=xe("pre",null,"CodeMirror-line-like");for(var v=0;v<49;++v)dA.appendChild(document.createTextNode("x")),dA.appendChild(xe("br"));dA.appendChild(document.createTextNode("x"))}Ve(d.measure,dA);var B=dA.offsetHeight/50;return B>3&&(d.cachedTextHeight=B),Se(d.measure),B||1}function Su(d){if(d.cachedCharWidth!=null)return d.cachedCharWidth;var v=xe("span","xxxxxxxxxx"),B=xe("pre",[v],"CodeMirror-line-like");Ve(d.measure,B);var E=v.getBoundingClientRect(),F=(E.right-E.left)/10;return F>2&&(d.cachedCharWidth=F),F||10}function Tl(d){for(var v=d.display,B={},E={},F=v.gutters.clientLeft,Z=v.gutters.firstChild,fe=0;Z;Z=Z.nextSibling,++fe){var _e=d.display.gutterSpecs[fe].className;B[_e]=Z.offsetLeft+Z.clientLeft+F,E[_e]=Z.clientWidth}return{fixedPos:Go(v),gutterTotalWidth:v.gutters.offsetWidth,gutterLeft:B,gutterWidth:E,wrapperWidth:v.wrapper.clientWidth}}function Go(d){return d.scroller.getBoundingClientRect().left-d.sizer.getBoundingClientRect().left}function fA(d){var v=wu(d.display),B=d.options.lineWrapping,E=B&&Math.max(5,d.display.scroller.clientWidth/Su(d.display)-3);return function(F){if(mr(d.doc,F))return 0;var Z=0;if(F.widgets)for(var fe=0;fe<F.widgets.length;fe++)F.widgets[fe].height&&(Z+=F.widgets[fe].height);return B?Z+(Math.ceil(F.text.length/E)||1)*v:Z+v}}function qh(d){var v=d.doc,B=fA(d);v.iter(function(E){var F=B(E);F!=E.height&&Vo(E,F)})}function Na(d,v,B,E){var F=d.display;if(!B&&hi(v).getAttribute("cm-not-content")=="true")return null;var Z,fe,_e=F.lineSpace.getBoundingClientRect();try{Z=v.clientX-_e.left,fe=v.clientY-_e.top}catch{return null}var ke=Oo(d,Z,fe),Le;if(E&&ke.xRel>0&&(Le=Mi(d.doc,ke.line).text).length==ke.ch){var vt=Ke(Le,Le.length,d.options.tabSize)-Le.length;ke=rn(ke.line,Math.max(0,Math.round((Z-Md(d.display).left)/Su(d.display))-vt))}return ke}function Vs(d,v){if(v>=d.display.viewTo||(v-=d.display.viewFrom,v<0))return null;for(var B=d.display.view,E=0;E<B.length;E++)if(v-=B[E].size,v<0)return E}function Es(d,v,B,E){v==null&&(v=d.doc.first),B==null&&(B=d.doc.first+d.doc.size),E||(E=0);var F=d.display;if(E&&B<F.viewTo&&(F.updateLineNumbers==null||F.updateLineNumbers>v)&&(F.updateLineNumbers=v),d.curOp.viewChanged=!0,v>=F.viewTo)Eo&&co(d.doc,v)<F.viewTo&&jl(d);else if(B<=F.viewFrom)Eo&&Ar(d.doc,B+E)>F.viewFrom?jl(d):(F.viewFrom+=E,F.viewTo+=E);else if(v<=F.viewFrom&&B>=F.viewTo)jl(d);else if(v<=F.viewFrom){var Z=Eu(d,B,B+E,1);Z?(F.view=F.view.slice(Z.index),F.viewFrom=Z.lineN,F.viewTo+=E):jl(d)}else if(B>=F.viewTo){var fe=Eu(d,v,v,-1);fe?(F.view=F.view.slice(0,fe.index),F.viewTo=fe.lineN):jl(d)}else{var _e=Eu(d,v,v,-1),ke=Eu(d,B,B+E,1);_e&&ke?(F.view=F.view.slice(0,_e.index).concat(yh(d,_e.lineN,ke.lineN)).concat(F.view.slice(ke.index)),F.viewTo+=E):jl(d)}var Le=F.externalMeasured;Le&&(B<Le.lineN?Le.lineN+=E:v<Le.lineN+Le.size&&(F.externalMeasured=null))}function Zu(d,v,B){d.curOp.viewChanged=!0;var E=d.display,F=d.display.externalMeasured;if(F&&v>=F.lineN&&v<F.lineN+F.size&&(E.externalMeasured=null),!(v<E.viewFrom||v>=E.viewTo)){var Z=E.view[Vs(d,v)];if(Z.node!=null){var fe=Z.changes||(Z.changes=[]);He(fe,B)==-1&&fe.push(B)}}}function jl(d){d.display.viewFrom=d.display.viewTo=d.doc.first,d.display.view=[],d.display.viewOffset=0}function Eu(d,v,B,E){var F=Vs(d,v),Z,fe=d.display.view;if(!Eo||B==d.doc.first+d.doc.size)return{index:F,lineN:B};for(var _e=d.display.viewFrom,ke=0;ke<F;ke++)_e+=fe[ke].size;if(_e!=v){if(E>0){if(F==fe.length-1)return null;Z=_e+fe[F].size-v,F++}else Z=_e-v;v+=Z,B+=Z}for(;co(d.doc,B)!=B;){if(F==(E<0?0:fe.length-1))return null;B+=E*fe[F-(E<0?1:0)].size,F+=E}return{index:F,lineN:B}}function sc(d,v,B){var E=d.display,F=E.view;F.length==0||v>=E.viewTo||B<=E.viewFrom?(E.view=yh(d,v,B),E.viewFrom=v):(E.viewFrom>v?E.view=yh(d,v,E.viewFrom).concat(E.view):E.viewFrom<v&&(E.view=E.view.slice(Vs(d,v))),E.viewFrom=v,E.viewTo<B?E.view=E.view.concat(yh(d,E.viewTo,B)):E.viewTo>B&&(E.view=E.view.slice(0,Vs(d,B)))),E.viewTo=B}function Bu(d){for(var v=d.display.view,B=0,E=0;E<v.length;E++){var F=v[E];!F.hidden&&(!F.node||F.changes)&&++B}return B}function Ec(d){d.display.input.showSelection(d.display.input.prepareSelection())}function bh(d,v){v===void 0&&(v=!0);var B=d.doc,E={},F=E.cursors=document.createDocumentFragment(),Z=E.selection=document.createDocumentFragment(),fe=d.options.$customCursor;fe&&(v=!0);for(var _e=0;_e<B.sel.ranges.length;_e++)if(!(!v&&_e==B.sel.primIndex)){var ke=B.sel.ranges[_e];if(!(ke.from().line>=d.display.viewTo||ke.to().line<d.display.viewFrom)){var Le=ke.empty();if(fe){var vt=fe(d,ke);vt&&kr(d,vt,F)}else(Le||d.options.showCursorWhenSelecting)&&kr(d,ke.head,F);Le||Xu(d,ke,Z)}}return E}function kr(d,v,B){var E=vn(d,v,"div",null,null,!d.options.singleCursorHeightPerLine),F=B.appendChild(xe("div","","CodeMirror-cursor"));if(F.style.left=E.left+"px",F.style.top=E.top+"px",F.style.height=Math.max(0,E.bottom-E.top)*d.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(d.getWrapperElement().className)){var Z=Sn(d,v,"div",null,null),fe=Z.right-Z.left;F.style.width=(fe>0?fe:d.defaultCharWidth())+"px"}if(E.other){var _e=B.appendChild(xe("div","","CodeMirror-cursor CodeMirror-secondarycursor"));_e.style.display="",_e.style.left=E.other.left+"px",_e.style.top=E.other.top+"px",_e.style.height=(E.other.bottom-E.other.top)*.85+"px"}}function lc(d,v){return d.top-v.top||d.left-v.left}function Xu(d,v,B){var E=d.display,F=d.doc,Z=document.createDocumentFragment(),fe=Md(d.display),_e=fe.left,ke=Math.max(E.sizerWidth,Vu(d)-E.sizer.offsetLeft)-fe.right,Le=F.direction=="ltr";function vt(gi,Di,ar,Yi){Di<0&&(Di=0),Di=Math.round(Di),Yi=Math.round(Yi),Z.appendChild(xe("div",null,"CodeMirror-selected","position: absolute; left: "+gi+`px;
                             top: `+Di+"px; width: "+(ar??ke-gi)+`px;
                             height: `+(Yi-Di)+"px"))}function It(gi,Di,ar){var Yi=Mi(F,gi),Jr=Yi.text.length,Mr,rs;function ca(Cs,ha){return Sn(d,rn(gi,Cs),"div",Yi,ha)}function qr(Cs,ha,Vl){var Ts=Do(d,Yi,null,Cs),Ns=ha=="ltr"==(Vl=="after")?"left":"right",Or=Vl=="after"?Ts.begin:Ts.end-(/\s/.test(Yi.text.charAt(Ts.end-1))?2:1);return ca(Or,Ns)[Ns]}var vs=Ze(Yi,F.direction);return We(vs,Di||0,ar??Jr,function(Cs,ha,Vl,Ts){var Ns=Vl=="ltr",Or=ca(Cs,Ns?"left":"right"),Ea=ca(ha-1,Ns?"right":"left"),$l=Di==null&&Cs==0,pc=ar==null&&ha==Jr,pu=Ts==0,oh=!vs||Ts==vs.length-1;if(Ea.top-Or.top<=3){var hs=(Le?$l:pc)&&pu,wA=(Le?pc:$l)&&oh,Ml=hs?_e:(Ns?Or:Ea).left,mc=wA?ke:(Ns?Ea:Or).right;vt(Ml,Or.top,mc-Ml,Or.bottom)}else{var sl,mu,$A,od;Ns?(sl=Le&&$l&&pu?_e:Or.left,mu=Le?ke:qr(Cs,Vl,"before"),$A=Le?_e:qr(ha,Vl,"after"),od=Le&&pc&&oh?ke:Ea.right):(sl=Le?qr(Cs,Vl,"before"):_e,mu=!Le&&$l&&pu?ke:Or.right,$A=!Le&&pc&&oh?_e:Ea.left,od=Le?qr(ha,Vl,"after"):ke),vt(sl,Or.top,mu-sl,Or.bottom),Or.bottom<Ea.top&&vt(_e,Or.bottom,null,Ea.top),vt($A,Ea.top,od-$A,Ea.bottom)}(!Mr||lc(Or,Mr)<0)&&(Mr=Or),lc(Ea,Mr)<0&&(Mr=Ea),(!rs||lc(Or,rs)<0)&&(rs=Or),lc(Ea,rs)<0&&(rs=Ea)}),{start:Mr,end:rs}}var Jt=v.from(),Ht=v.to();if(Jt.line==Ht.line)It(Jt.line,Jt.ch,Ht.ch);else{var _n=Mi(F,Jt.line),Rn=Mi(F,Ht.line),oi=Ri(_n)==Ri(Rn),mi=It(Jt.line,Jt.ch,oi?_n.text.length+1:null).end,Ci=It(Ht.line,oi?0:null,Ht.ch).start;oi&&(mi.top<Ci.top-2?(vt(mi.right,mi.top,null,mi.bottom),vt(_e,Ci.top,Ci.left,Ci.bottom)):vt(mi.right,mi.top,Ci.left-mi.right,mi.bottom)),mi.bottom<Ci.top&&vt(_e,mi.bottom,null,Ci.top)}B.appendChild(Z)}function Bc(d){if(d.state.focused){var v=d.display;clearInterval(v.blinker);var B=!0;v.cursorDiv.style.visibility="",d.options.cursorBlinkRate>0?v.blinker=setInterval(function(){d.hasFocus()||pA(d),v.cursorDiv.style.visibility=(B=!B)?"":"hidden"},d.options.cursorBlinkRate):d.options.cursorBlinkRate<0&&(v.cursorDiv.style.visibility="hidden")}}function Bs(d){d.hasFocus()||(d.display.input.focus(),d.state.focused||Ed(d))}function xh(d){d.state.delayingBlurEvent=!0,setTimeout(function(){d.state.delayingBlurEvent&&(d.state.delayingBlurEvent=!1,d.state.focused&&pA(d))},100)}function Ed(d,v){d.state.delayingBlurEvent&&!d.state.draggingText&&(d.state.delayingBlurEvent=!1),d.options.readOnly!="nocursor"&&(d.state.focused||(it(d,"focus",d,v),d.state.focused=!0,be(d.display.wrapper,"CodeMirror-focused"),!d.curOp&&d.display.selForContextMenu!=d.doc.sel&&(d.display.input.reset(),w&&setTimeout(function(){return d.display.input.reset(!0)},20)),d.display.input.receivedFocus()),Bc(d))}function pA(d,v){d.state.delayingBlurEvent||(d.state.focused&&(it(d,"blur",d,v),d.state.focused=!1,Oe(d.display.wrapper,"CodeMirror-focused")),clearInterval(d.display.blinker),setTimeout(function(){d.state.focused||(d.display.shift=!1)},150))}function Bd(d){for(var v=d.display,B=v.lineDiv.offsetTop,E=Math.max(0,v.scroller.getBoundingClientRect().top),F=v.lineDiv.getBoundingClientRect().top,Z=0,fe=0;fe<v.view.length;fe++){var _e=v.view[fe],ke=d.options.lineWrapping,Le=void 0,vt=0;if(!_e.hidden){if(F+=_e.line.height,p&&C<8){var It=_e.node.offsetTop+_e.node.offsetHeight;Le=It-B,B=It}else{var Jt=_e.node.getBoundingClientRect();Le=Jt.bottom-Jt.top,!ke&&_e.text.firstChild&&(vt=_e.text.firstChild.getBoundingClientRect().right-Jt.left-1)}var Ht=_e.line.height-Le;if((Ht>.005||Ht<-.005)&&(F<E&&(Z-=Ht),Vo(_e.line,Le),$c(_e.line),_e.rest))for(var _n=0;_n<_e.rest.length;_n++)$c(_e.rest[_n]);if(vt>d.display.sizerWidth){var Rn=Math.ceil(vt/Su(d.display));Rn>d.display.maxLineLength&&(d.display.maxLineLength=Rn,d.display.maxLine=_e.line,d.display.maxLineChanged=!0)}}}Math.abs(Z)>2&&(v.scroller.scrollTop+=Z)}function $c(d){if(d.widgets)for(var v=0;v<d.widgets.length;++v){var B=d.widgets[v],E=B.node.parentNode;E&&(B.height=E.offsetHeight)}}function Ou(d,v,B){var E=B&&B.top!=null?Math.max(0,B.top):d.scroller.scrollTop;E=Math.floor(E-Mc(d));var F=B&&B.bottom!=null?B.bottom:E+d.wrapper.clientHeight,Z=Et(v,E),fe=Et(v,F);if(B&&B.ensure){var _e=B.ensure.from.line,ke=B.ensure.to.line;_e<Z?(Z=_e,fe=Et(v,No(Mi(v,_e))+d.wrapper.clientHeight)):Math.min(ke,v.lastLine())>=fe&&(Z=Et(v,No(Mi(v,ke))-d.wrapper.clientHeight),fe=ke)}return{from:Z,to:Math.max(fe,Z+1)}}function LA(d,v){if(!en(d,"scrollCursorIntoView")){var B=d.display,E=B.sizer.getBoundingClientRect(),F=null,Z=B.wrapper.ownerDocument;if(v.top+E.top<0?F=!0:v.bottom+E.top>(Z.defaultView.innerHeight||Z.documentElement.clientHeight)&&(F=!1),F!=null&&!te){var fe=xe("div","",null,`position: absolute;
                         top: `+(v.top-B.viewOffset-Mc(d.display))+`px;
                         height: `+(v.bottom-v.top+KA(d)+B.barHeight)+`px;
                         left: `+v.left+"px; width: "+Math.max(2,v.right-v.left)+"px;");d.display.lineSpace.appendChild(fe),fe.scrollIntoView(F),d.display.lineSpace.removeChild(fe)}}}function Mh(d,v,B,E){E==null&&(E=0);var F;!d.options.lineWrapping&&v==B&&(B=v.sticky=="before"?rn(v.line,v.ch+1,"before"):v,v=v.ch?rn(v.line,v.sticky=="before"?v.ch-1:v.ch,"after"):v);for(var Z=0;Z<5;Z++){var fe=!1,_e=vn(d,v),ke=!B||B==v?_e:vn(d,B);F={left:Math.min(_e.left,ke.left),top:Math.min(_e.top,ke.top)-E,right:Math.max(_e.left,ke.left),bottom:Math.max(_e.bottom,ke.bottom)+E};var Le=Iu(d,F),vt=d.doc.scrollTop,It=d.doc.scrollLeft;if(Le.scrollTop!=null&&(Zc(d,Le.scrollTop),Math.abs(d.doc.scrollTop-vt)>1&&(fe=!0)),Le.scrollLeft!=null&&(va(d,Le.scrollLeft),Math.abs(d.doc.scrollLeft-It)>1&&(fe=!0)),!fe)break}return F}function Hh(d,v){var B=Iu(d,v);B.scrollTop!=null&&Zc(d,B.scrollTop),B.scrollLeft!=null&&va(d,B.scrollLeft)}function Iu(d,v){var B=d.display,E=wu(d.display);v.top<0&&(v.top=0);var F=d.curOp&&d.curOp.scrollTop!=null?d.curOp.scrollTop:B.scroller.scrollTop,Z=Qh(d),fe={};v.bottom-v.top>Z&&(v.bottom=v.top+Z);var _e=d.doc.height+xd(B),ke=v.top<E,Le=v.bottom>_e-E;if(v.top<F)fe.scrollTop=ke?0:v.top;else if(v.bottom>F+Z){var vt=Math.min(v.top,(Le?_e:v.bottom)-Z);vt!=F&&(fe.scrollTop=vt)}var It=d.options.fixedGutter?0:B.gutters.offsetWidth,Jt=d.curOp&&d.curOp.scrollLeft!=null?d.curOp.scrollLeft:B.scroller.scrollLeft-It,Ht=Vu(d)-B.gutters.offsetWidth,_n=v.right-v.left>Ht;return _n&&(v.right=v.left+Ht),v.left<10?fe.scrollLeft=0:v.left<Jt?fe.scrollLeft=Math.max(0,v.left+It-(_n?0:10)):v.right>Ht+Jt-3&&(fe.scrollLeft=v.right+(_n?0:10)-Ht),fe}function kl(d,v){v!=null&&(zA(d),d.curOp.scrollTop=(d.curOp.scrollTop==null?d.doc.scrollTop:d.curOp.scrollTop)+v)}function Wo(d){zA(d);var v=d.getCursor();d.curOp.scrollToPos={from:v,to:v,margin:d.options.cursorScrollMargin}}function sa(d,v,B){(v!=null||B!=null)&&zA(d),v!=null&&(d.curOp.scrollLeft=v),B!=null&&(d.curOp.scrollTop=B)}function FA(d,v){zA(d),d.curOp.scrollToPos=v}function zA(d){var v=d.curOp.scrollToPos;if(v){d.curOp.scrollToPos=null;var B=Ti(d,v.from),E=Ti(d,v.to);Oc(d,B,E,v.margin)}}function Oc(d,v,B,E){var F=Iu(d,{left:Math.min(v.left,B.left),top:Math.min(v.top,B.top)-E,right:Math.max(v.right,B.right),bottom:Math.max(v.bottom,B.bottom)+E});sa(d,F.scrollLeft,F.scrollTop)}function Zc(d,v){Math.abs(d.doc.scrollTop-v)<2||(r||ba(d,{top:v}),Xc(d,v,!0),r&&ba(d),eh(d,100))}function Xc(d,v,B){v=Math.max(0,Math.min(d.display.scroller.scrollHeight-d.display.scroller.clientHeight,v)),!(d.display.scroller.scrollTop==v&&!B)&&(d.doc.scrollTop=v,d.display.scrollbars.setScrollTop(v),d.display.scroller.scrollTop!=v&&(d.display.scroller.scrollTop=v))}function va(d,v,B,E){v=Math.max(0,Math.min(v,d.display.scroller.scrollWidth-d.display.scroller.clientWidth)),!((B?v==d.doc.scrollLeft:Math.abs(d.doc.scrollLeft-v)<2)&&!E)&&(d.doc.scrollLeft=v,ef(d),d.display.scroller.scrollLeft!=v&&(d.display.scroller.scrollLeft=v),d.display.scrollbars.setScrollLeft(v))}function _a(d){var v=d.display,B=v.gutters.offsetWidth,E=Math.round(d.doc.height+xd(d.display));return{clientHeight:v.scroller.clientHeight,viewHeight:v.wrapper.clientHeight,scrollWidth:v.scroller.scrollWidth,clientWidth:v.scroller.clientWidth,viewWidth:v.wrapper.clientWidth,barLeft:d.options.fixedGutter?B:0,docHeight:E,scrollHeight:E+KA(d)+v.barHeight,nativeBarWidth:v.nativeBarWidth,gutterWidth:B}}var Zr=function(d,v,B){this.cm=B;var E=this.vert=xe("div",[xe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),F=this.horiz=xe("div",[xe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");E.tabIndex=F.tabIndex=-1,d(E),d(F),mt(E,"scroll",function(){E.clientHeight&&v(E.scrollTop,"vertical")}),mt(F,"scroll",function(){F.clientWidth&&v(F.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&C<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Zr.prototype.update=function(d){var v=d.scrollWidth>d.clientWidth+1,B=d.scrollHeight>d.clientHeight+1,E=d.nativeBarWidth;if(B){this.vert.style.display="block",this.vert.style.bottom=v?E+"px":"0";var F=d.viewHeight-(v?E:0);this.vert.firstChild.style.height=Math.max(0,d.scrollHeight-d.clientHeight+F)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(v){this.horiz.style.display="block",this.horiz.style.right=B?E+"px":"0",this.horiz.style.left=d.barLeft+"px";var Z=d.viewWidth-d.barLeft-(B?E:0);this.horiz.firstChild.style.width=Math.max(0,d.scrollWidth-d.clientWidth+Z)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&d.clientHeight>0&&(E==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:B?E:0,bottom:v?E:0}},Zr.prototype.setScrollLeft=function(d){this.horiz.scrollLeft!=d&&(this.horiz.scrollLeft=d),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Zr.prototype.setScrollTop=function(d){this.vert.scrollTop!=d&&(this.vert.scrollTop=d),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Zr.prototype.zeroWidthHack=function(){var d=$&&!Y?"12px":"18px";this.horiz.style.height=this.vert.style.width=d,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Re,this.disableVert=new Re},Zr.prototype.enableZeroWidthBar=function(d,v,B){d.style.visibility="";function E(){var F=d.getBoundingClientRect(),Z=B=="vert"?document.elementFromPoint(F.right-1,(F.top+F.bottom)/2):document.elementFromPoint((F.right+F.left)/2,F.bottom-1);Z!=d?d.style.visibility="hidden":v.set(1e3,E)}v.set(1e3,E)},Zr.prototype.clear=function(){var d=this.horiz.parentNode;d.removeChild(this.horiz),d.removeChild(this.vert)};var lu=function(){};lu.prototype.update=function(){return{bottom:0,right:0}},lu.prototype.setScrollLeft=function(){},lu.prototype.setScrollTop=function(){},lu.prototype.clear=function(){};function Fs(d,v){v||(v=_a(d));var B=d.display.barWidth,E=d.display.barHeight;Jc(d,v);for(var F=0;F<4&&B!=d.display.barWidth||E!=d.display.barHeight;F++)B!=d.display.barWidth&&d.options.lineWrapping&&Bd(d),Jc(d,_a(d)),B=d.display.barWidth,E=d.display.barHeight}function Jc(d,v){var B=d.display,E=B.scrollbars.update(v);B.sizer.style.paddingRight=(B.barWidth=E.right)+"px",B.sizer.style.paddingBottom=(B.barHeight=E.bottom)+"px",B.heightForcer.style.borderBottom=E.bottom+"px solid transparent",E.right&&E.bottom?(B.scrollbarFiller.style.display="block",B.scrollbarFiller.style.height=E.bottom+"px",B.scrollbarFiller.style.width=E.right+"px"):B.scrollbarFiller.style.display="",E.bottom&&d.options.coverGutterNextToScrollbar&&d.options.fixedGutter?(B.gutterFiller.style.display="block",B.gutterFiller.style.height=E.bottom+"px",B.gutterFiller.style.width=v.gutterWidth+"px"):B.gutterFiller.style.display=""}var mA={native:Zr,null:lu};function Zd(d){d.display.scrollbars&&(d.display.scrollbars.clear(),d.display.scrollbars.addClass&&Oe(d.display.wrapper,d.display.scrollbars.addClass)),d.display.scrollbars=new mA[d.options.scrollbarStyle](function(v){d.display.wrapper.insertBefore(v,d.display.scrollbarFiller),mt(v,"mousedown",function(){d.state.focused&&setTimeout(function(){return d.display.input.focus()},0)}),v.setAttribute("cm-not-content","true")},function(v,B){B=="horizontal"?va(d,v):Zc(d,v)},d),d.display.scrollbars.addClass&&be(d.display.wrapper,d.display.scrollbars.addClass)}var ms=0;function rl(d){d.curOp={cm:d,viewChanged:!1,startHeight:d.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ms,markArrays:null},r0(d.curOp)}function zs(d){var v=d.curOp;v&&kf(v,function(B){for(var E=0;E<B.ops.length;E++)B.ops[E].cm.curOp=null;Xd(B)})}function Xd(d){for(var v=d.ops,B=0;B<v.length;B++)jA(v[B]);for(var E=0;E<v.length;E++)wh(v[E]);for(var F=0;F<v.length;F++)Ju(v[F]);for(var Z=0;Z<v.length;Z++)rt(v[Z]);for(var fe=0;fe<v.length;fe++)$s(v[fe])}function jA(d){var v=d.cm,B=v.display;th(v),d.updateMaxLine&&qs(v),d.mustUpdate=d.viewChanged||d.forceUpdate||d.scrollTop!=null||d.scrollToPos&&(d.scrollToPos.from.line<B.viewFrom||d.scrollToPos.to.line>=B.viewTo)||B.maxLineChanged&&v.options.lineWrapping,d.update=d.mustUpdate&&new Ro(v,d.mustUpdate&&{top:d.scrollTop,ensure:d.scrollToPos},d.forceUpdate)}function wh(d){d.updatedDisplay=d.mustUpdate&&Jd(d.cm,d.update)}function Ju(d){var v=d.cm,B=v.display;d.updatedDisplay&&Bd(v),d.barMeasure=_a(v),B.maxLineChanged&&!v.options.lineWrapping&&(d.adjustWidthTo=Hc(v,B.maxLine,B.maxLine.text.length).left+3,v.display.sizerWidth=d.adjustWidthTo,d.barMeasure.scrollWidth=Math.max(B.scroller.clientWidth,B.sizer.offsetLeft+d.adjustWidthTo+KA(v)+v.display.barWidth),d.maxScrollLeft=Math.max(0,B.sizer.offsetLeft+d.adjustWidthTo-Vu(v))),(d.updatedDisplay||d.selectionChanged)&&(d.preparedSelection=B.input.prepareSelection())}function rt(d){var v=d.cm;d.adjustWidthTo!=null&&(v.display.sizer.style.minWidth=d.adjustWidthTo+"px",d.maxScrollLeft<v.doc.scrollLeft&&va(v,Math.min(v.display.scroller.scrollLeft,d.maxScrollLeft),!0),v.display.maxLineChanged=!1);var B=d.focus&&d.focus==nt(kt(v));d.preparedSelection&&v.display.input.showSelection(d.preparedSelection,B),(d.updatedDisplay||d.startHeight!=v.doc.height)&&Fs(v,d.barMeasure),d.updatedDisplay&&NA(v,d.barMeasure),d.selectionChanged&&Bc(v),v.state.focused&&d.updateInput&&v.display.input.reset(d.typing),B&&Bs(d.cm)}function $s(d){var v=d.cm,B=v.display,E=v.doc;if(d.updatedDisplay&&Sp(v,d.update),B.wheelStartX!=null&&(d.scrollTop!=null||d.scrollLeft!=null||d.scrollToPos)&&(B.wheelStartX=B.wheelStartY=null),d.scrollTop!=null&&Xc(v,d.scrollTop,d.forceScroll),d.scrollLeft!=null&&va(v,d.scrollLeft,!0,!0),d.scrollToPos){var F=Mh(v,Qi(E,d.scrollToPos.from),Qi(E,d.scrollToPos.to),d.scrollToPos.margin);LA(v,F)}var Z=d.maybeHiddenMarkers,fe=d.maybeUnhiddenMarkers;if(Z)for(var _e=0;_e<Z.length;++_e)Z[_e].lines.length||it(Z[_e],"hide");if(fe)for(var ke=0;ke<fe.length;++ke)fe[ke].lines.length&&it(fe[ke],"unhide");B.wrapper.offsetHeight&&(E.scrollTop=v.display.scroller.scrollTop),d.changeObjs&&it(v,"changes",v,d.changeObjs),d.update&&d.update.finish()}function Ga(d,v){if(d.curOp)return v();rl(d);try{return v()}finally{zs(d)}}function Zo(d,v){return function(){if(d.curOp)return v.apply(d,arguments);rl(d);try{return v.apply(d,arguments)}finally{zs(d)}}}function gr(d){return function(){if(this.curOp)return d.apply(this,arguments);rl(this);try{return d.apply(this,arguments)}finally{zs(this)}}}function gs(d){return function(){var v=this.cm;if(!v||v.curOp)return d.apply(this,arguments);rl(v);try{return d.apply(this,arguments)}finally{zs(v)}}}function eh(d,v){d.doc.highlightFrontier<d.display.viewTo&&d.state.highlight.set(v,Ut(Sh,d))}function Sh(d){var v=d.doc;if(!(v.highlightFrontier>=d.display.viewTo)){var B=+new Date+d.options.workTime,E=$o(d,v.highlightFrontier),F=[];v.iter(E.line,Math.min(v.first+v.size,d.display.viewTo+500),function(Z){if(E.line>=d.display.viewFrom){var fe=Z.styles,_e=Z.text.length>d.options.maxHighlightLength?Ao(v.mode,E.state):null,ke=xc(d,Z,E,!0);_e&&(E.state=_e),Z.styles=ke.styles;var Le=Z.styleClasses,vt=ke.classes;vt?Z.styleClasses=vt:Le&&(Z.styleClasses=null);for(var It=!fe||fe.length!=Z.styles.length||Le!=vt&&(!Le||!vt||Le.bgClass!=vt.bgClass||Le.textClass!=vt.textClass),Jt=0;!It&&Jt<fe.length;++Jt)It=fe[Jt]!=Z.styles[Jt];It&&F.push(E.line),Z.stateAfter=E.save(),E.nextLine()}else Z.text.length<=d.options.maxHighlightLength&&ko(d,Z.text,E),Z.stateAfter=E.line%5==0?E.save():null,E.nextLine();if(+new Date>B)return eh(d,d.options.workDelay),!0}),v.highlightFrontier=E.line,v.modeFrontier=Math.max(v.modeFrontier,E.line),F.length&&Ga(d,function(){for(var Z=0;Z<F.length;Z++)Zu(d,F[Z],"text")})}}var Ro=function(d,v,B){var E=d.display;this.viewport=v,this.visible=Ou(E,d.doc,v),this.editorIsHidden=!E.wrapper.offsetWidth,this.wrapperHeight=E.wrapper.clientHeight,this.wrapperWidth=E.wrapper.clientWidth,this.oldDisplayWidth=Vu(d),this.force=B,this.dims=Tl(d),this.events=[]};Ro.prototype.signal=function(d,v){Mn(d,v)&&this.events.push(arguments)},Ro.prototype.finish=function(){for(var d=0;d<this.events.length;d++)it.apply(null,this.events[d])};function th(d){var v=d.display;!v.scrollbarsClipped&&v.scroller.offsetWidth&&(v.nativeBarWidth=v.scroller.offsetWidth-v.scroller.clientWidth,v.heightForcer.style.height=KA(d)+"px",v.sizer.style.marginBottom=-v.nativeBarWidth+"px",v.sizer.style.borderRightWidth=KA(d)+"px",v.scrollbarsClipped=!0)}function Tu(d){if(d.hasFocus())return null;var v=nt(kt(d));if(!v||!Ct(d.display.lineDiv,v))return null;var B={activeElt:v};if(window.getSelection){var E=St(d).getSelection();E.anchorNode&&E.extend&&Ct(d.display.lineDiv,E.anchorNode)&&(B.anchorNode=E.anchorNode,B.anchorOffset=E.anchorOffset,B.focusNode=E.focusNode,B.focusOffset=E.focusOffset)}return B}function Od(d){if(!(!d||!d.activeElt||d.activeElt==nt(gt(d.activeElt)))&&(d.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(d.activeElt.nodeName)&&d.anchorNode&&Ct(document.body,d.anchorNode)&&Ct(document.body,d.focusNode))){var v=d.activeElt.ownerDocument,B=v.defaultView.getSelection(),E=v.createRange();E.setEnd(d.anchorNode,d.anchorOffset),E.collapse(!1),B.removeAllRanges(),B.addRange(E),B.extend(d.focusNode,d.focusOffset)}}function Jd(d,v){var B=d.display,E=d.doc;if(v.editorIsHidden)return jl(d),!1;if(!v.force&&v.visible.from>=B.viewFrom&&v.visible.to<=B.viewTo&&(B.updateLineNumbers==null||B.updateLineNumbers>=B.viewTo)&&B.renderedView==B.view&&Bu(d)==0)return!1;ol(d)&&(jl(d),v.dims=Tl(d));var F=E.first+E.size,Z=Math.max(v.visible.from-d.options.viewportMargin,E.first),fe=Math.min(F,v.visible.to+d.options.viewportMargin);B.viewFrom<Z&&Z-B.viewFrom<20&&(Z=Math.max(E.first,B.viewFrom)),B.viewTo>fe&&B.viewTo-fe<20&&(fe=Math.min(F,B.viewTo)),Eo&&(Z=co(d.doc,Z),fe=Ar(d.doc,fe));var _e=Z!=B.viewFrom||fe!=B.viewTo||B.lastWrapHeight!=v.wrapperHeight||B.lastWrapWidth!=v.wrapperWidth;sc(d,Z,fe),B.viewOffset=No(Mi(d.doc,B.viewFrom)),d.display.mover.style.top=B.viewOffset+"px";var ke=Bu(d);if(!_e&&ke==0&&!v.force&&B.renderedView==B.view&&(B.updateLineNumbers==null||B.updateLineNumbers>=B.viewTo))return!1;var Le=Tu(d);return ke>4&&(B.lineDiv.style.display="none"),Eh(d,B.updateLineNumbers,v.dims),ke>4&&(B.lineDiv.style.display=""),B.renderedView=B.view,Od(Le),Se(B.cursorDiv),Se(B.selectionDiv),B.gutters.style.height=B.sizer.style.minHeight=0,_e&&(B.lastWrapHeight=v.wrapperHeight,B.lastWrapWidth=v.wrapperWidth,eh(d,400)),B.updateLineNumbers=null,!0}function Sp(d,v){for(var B=v.viewport,E=!0;;E=!1){if(!E||!d.options.lineWrapping||v.oldDisplayWidth==Vu(d)){if(B&&B.top!=null&&(B={top:Math.min(d.doc.height+xd(d.display)-Qh(d),B.top)}),v.visible=Ou(d.display,d.doc,B),v.visible.from>=d.display.viewFrom&&v.visible.to<=d.display.viewTo)break}else E&&(v.visible=Ou(d.display,d.doc,B));if(!Jd(d,v))break;Bd(d);var F=_a(d);Ec(d),Fs(d,F),NA(d,F),v.force=!1}v.signal(d,"update",d),(d.display.viewFrom!=d.display.reportedViewFrom||d.display.viewTo!=d.display.reportedViewTo)&&(v.signal(d,"viewportChange",d,d.display.viewFrom,d.display.viewTo),d.display.reportedViewFrom=d.display.viewFrom,d.display.reportedViewTo=d.display.viewTo)}function ba(d,v){var B=new Ro(d,v);if(Jd(d,B)){Bd(d),Sp(d,B);var E=_a(d);Ec(d),Fs(d,E),NA(d,E),B.finish()}}function Eh(d,v,B){var E=d.display,F=d.options.lineNumbers,Z=E.lineDiv,fe=Z.firstChild;function _e(_n){var Rn=_n.nextSibling;return w&&$&&d.display.currentWheelTarget==_n?_n.style.display="none":_n.parentNode.removeChild(_n),Rn}for(var ke=E.view,Le=E.viewFrom,vt=0;vt<ke.length;vt++){var It=ke[vt];if(!It.hidden)if(!It.node||It.node.parentNode!=Z){var Jt=Wh(d,It,Le,B);Z.insertBefore(Jt,fe)}else{for(;fe!=It.node;)fe=_e(fe);var Ht=F&&v!=null&&v<=Le&&It.lineNumber;It.changes&&(He(It.changes,"gutter")>-1&&(Ht=!1),Fl(d,It,Le,B)),Ht&&(Se(It.lineNumber),It.lineNumber.appendChild(document.createTextNode(Gn(d.options,Le)))),fe=It.node.nextSibling}Le+=It.size}for(;fe;)fe=_e(fe)}function nh(d){var v=d.gutters.offsetWidth;d.sizer.style.marginLeft=v+"px",es(d,"gutterChanged",d)}function NA(d,v){d.display.sizer.style.minHeight=v.docHeight+"px",d.display.heightForcer.style.top=v.docHeight+"px",d.display.gutters.style.height=v.docHeight+d.display.barHeight+KA(d)+"px"}function ef(d){var v=d.display,B=v.view;if(!(!v.alignWidgets&&(!v.gutters.firstChild||!d.options.fixedGutter))){for(var E=Go(v)-v.scroller.scrollLeft+d.doc.scrollLeft,F=v.gutters.offsetWidth,Z=E+"px",fe=0;fe<B.length;fe++)if(!B[fe].hidden){d.options.fixedGutter&&(B[fe].gutter&&(B[fe].gutter.style.left=Z),B[fe].gutterBackground&&(B[fe].gutterBackground.style.left=Z));var _e=B[fe].alignable;if(_e)for(var ke=0;ke<_e.length;ke++)_e[ke].style.left=Z}d.options.fixedGutter&&(v.gutters.style.left=E+F+"px")}}function ol(d){if(!d.options.lineNumbers)return!1;var v=d.doc,B=Gn(d.options,v.first+v.size-1),E=d.display;if(B.length!=E.lineNumChars){var F=E.measure.appendChild(xe("div",[xe("div",B)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Z=F.firstChild.offsetWidth,fe=F.offsetWidth-Z;return E.lineGutter.style.width="",E.lineNumInnerWidth=Math.max(Z,E.lineGutter.offsetWidth-fe)+1,E.lineNumWidth=E.lineNumInnerWidth+fe,E.lineNumChars=E.lineNumInnerWidth?B.length:-1,E.lineGutter.style.width=E.lineNumWidth+"px",nh(d.display),!0}return!1}function ts(d,v){for(var B=[],E=!1,F=0;F<d.length;F++){var Z=d[F],fe=null;if(typeof Z!="string"&&(fe=Z.style,Z=Z.className),Z=="CodeMirror-linenumbers")if(v)E=!0;else continue;B.push({className:Z,style:fe})}return v&&!E&&B.push({className:"CodeMirror-linenumbers",style:null}),B}function Vh(d){var v=d.gutters,B=d.gutterSpecs;Se(v),d.lineGutter=null;for(var E=0;E<B.length;++E){var F=B[E],Z=F.className,fe=F.style,_e=v.appendChild(xe("div",null,"CodeMirror-gutter "+Z));fe&&(_e.style.cssText=fe),Z=="CodeMirror-linenumbers"&&(d.lineGutter=_e,_e.style.width=(d.lineNumWidth||1)+"px")}v.style.display=B.length?"":"none",nh(d)}function uu(d){Vh(d.display),Es(d),ef(d)}function Id(d,v,B,E){var F=this;this.input=B,F.scrollbarFiller=xe("div",null,"CodeMirror-scrollbar-filler"),F.scrollbarFiller.setAttribute("cm-not-content","true"),F.gutterFiller=xe("div",null,"CodeMirror-gutter-filler"),F.gutterFiller.setAttribute("cm-not-content","true"),F.lineDiv=ze("div",null,"CodeMirror-code"),F.selectionDiv=xe("div",null,null,"position: relative; z-index: 1"),F.cursorDiv=xe("div",null,"CodeMirror-cursors"),F.measure=xe("div",null,"CodeMirror-measure"),F.lineMeasure=xe("div",null,"CodeMirror-measure"),F.lineSpace=ze("div",[F.measure,F.lineMeasure,F.selectionDiv,F.cursorDiv,F.lineDiv],null,"position: relative; outline: none");var Z=ze("div",[F.lineSpace],"CodeMirror-lines");F.mover=xe("div",[Z],null,"position: relative"),F.sizer=xe("div",[F.mover],"CodeMirror-sizer"),F.sizerWidth=null,F.heightForcer=xe("div",null,null,"position: absolute; height: "+bt+"px; width: 1px;"),F.gutters=xe("div",null,"CodeMirror-gutters"),F.lineGutter=null,F.scroller=xe("div",[F.sizer,F.heightForcer,F.gutters],"CodeMirror-scroll"),F.scroller.setAttribute("tabIndex","-1"),F.wrapper=xe("div",[F.scrollbarFiller,F.gutterFiller,F.scroller],"CodeMirror"),U&&K===105&&(F.wrapper.style.clipPath="inset(0px)"),F.wrapper.setAttribute("translate","no"),p&&C<8&&(F.gutters.style.zIndex=-1,F.scroller.style.paddingRight=0),!w&&!(r&&ne)&&(F.scroller.draggable=!0),d&&(d.appendChild?d.appendChild(F.wrapper):d(F.wrapper)),F.viewFrom=F.viewTo=v.first,F.reportedViewFrom=F.reportedViewTo=v.first,F.view=[],F.renderedView=null,F.externalMeasured=null,F.viewOffset=0,F.lastWrapHeight=F.lastWrapWidth=0,F.updateLineNumbers=null,F.nativeBarWidth=F.barHeight=F.barWidth=0,F.scrollbarsClipped=!1,F.lineNumWidth=F.lineNumInnerWidth=F.lineNumChars=null,F.alignWidgets=!1,F.cachedCharWidth=F.cachedTextHeight=F.cachedPaddingH=null,F.maxLine=null,F.maxLineLength=0,F.maxLineChanged=!1,F.wheelDX=F.wheelDY=F.wheelStartX=F.wheelStartY=null,F.shift=!1,F.selForContextMenu=null,F.activeTouch=null,F.gutterSpecs=ts(E.gutters,E.lineNumbers),Vh(F),B.init(F)}var tf=0,Cl=null;p?Cl=-.53:r?Cl=15:U?Cl=-.7:W&&(Cl=-1/3);function Ic(d){var v=d.wheelDeltaX,B=d.wheelDeltaY;return v==null&&d.detail&&d.axis==d.HORIZONTAL_AXIS&&(v=d.detail),B==null&&d.detail&&d.axis==d.VERTICAL_AXIS?B=d.detail:B==null&&(B=d.wheelDelta),{x:v,y:B}}function Uf(d){var v=Ic(d);return v.x*=Cl,v.y*=Cl,v}function $h(d,v){U&&K==102&&(d.display.chromeScrollHack==null?d.display.sizer.style.pointerEvents="none":clearTimeout(d.display.chromeScrollHack),d.display.chromeScrollHack=setTimeout(function(){d.display.chromeScrollHack=null,d.display.sizer.style.pointerEvents=""},100));var B=Ic(v),E=B.x,F=B.y,Z=Cl;v.deltaMode===0&&(E=v.deltaX,F=v.deltaY,Z=1);var fe=d.display,_e=fe.scroller,ke=_e.scrollWidth>_e.clientWidth,Le=_e.scrollHeight>_e.clientHeight;if(E&&ke||F&&Le){if(F&&$&&w){e:for(var vt=v.target,It=fe.view;vt!=_e;vt=vt.parentNode)for(var Jt=0;Jt<It.length;Jt++)if(It[Jt].node==vt){d.display.currentWheelTarget=vt;break e}}if(E&&!r&&!j&&Z!=null){F&&Le&&Zc(d,Math.max(0,_e.scrollTop+F*Z)),va(d,Math.max(0,_e.scrollLeft+E*Z)),(!F||F&&Le)&&Wn(v),fe.wheelStartX=null;return}if(F&&Z!=null){var Ht=F*Z,_n=d.doc.scrollTop,Rn=_n+fe.wrapper.clientHeight;Ht<0?_n=Math.max(0,_n+Ht-50):Rn=Math.min(d.doc.height,Rn+Ht+50),ba(d,{top:_n,bottom:Rn})}tf<20&&v.deltaMode!==0&&(fe.wheelStartX==null?(fe.wheelStartX=_e.scrollLeft,fe.wheelStartY=_e.scrollTop,fe.wheelDX=E,fe.wheelDY=F,setTimeout(function(){if(fe.wheelStartX!=null){var oi=_e.scrollLeft-fe.wheelStartX,mi=_e.scrollTop-fe.wheelStartY,Ci=mi&&fe.wheelDY&&mi/fe.wheelDY||oi&&fe.wheelDX&&oi/fe.wheelDX;fe.wheelStartX=fe.wheelStartY=null,Ci&&(Cl=(Cl*tf+Ci)/(tf+1),++tf)}},200)):(fe.wheelDX+=E,fe.wheelDY+=F))}}var Ca=function(d,v){this.ranges=d,this.primIndex=v};Ca.prototype.primary=function(){return this.ranges[this.primIndex]},Ca.prototype.equals=function(d){if(d==this)return!0;if(d.primIndex!=this.primIndex||d.ranges.length!=this.ranges.length)return!1;for(var v=0;v<this.ranges.length;v++){var B=this.ranges[v],E=d.ranges[v];if(!eo(B.anchor,E.anchor)||!eo(B.head,E.head))return!1}return!0},Ca.prototype.deepCopy=function(){for(var d=[],v=0;v<this.ranges.length;v++)d[v]=new Xr(So(this.ranges[v].anchor),So(this.ranges[v].head));return new Ca(d,this.primIndex)},Ca.prototype.somethingSelected=function(){for(var d=0;d<this.ranges.length;d++)if(!this.ranges[d].empty())return!0;return!1},Ca.prototype.contains=function(d,v){v||(v=d);for(var B=0;B<this.ranges.length;B++){var E=this.ranges[B];if(si(v,E.from())>=0&&si(d,E.to())<=0)return B}return-1};var Xr=function(d,v){this.anchor=d,this.head=v};Xr.prototype.from=function(){return Ls(this.anchor,this.head)},Xr.prototype.to=function(){return As(this.anchor,this.head)},Xr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function ci(d,v,B){var E=d&&d.options.selectionsMayTouch,F=v[B];v.sort(function(Jt,Ht){return si(Jt.from(),Ht.from())}),B=He(v,F);for(var Z=1;Z<v.length;Z++){var fe=v[Z],_e=v[Z-1],ke=si(_e.to(),fe.from());if(E&&!fe.empty()?ke>0:ke>=0){var Le=Ls(_e.from(),fe.from()),vt=As(_e.to(),fe.to()),It=_e.empty()?fe.from()==fe.head:_e.from()==_e.head;Z<=B&&--B,v.splice(--Z,2,new Xr(It?vt:Le,It?Le:vt))}}return new Ca(v,B)}function GA(d,v){return new Ca([new Xr(d,v||d)],0)}function WA(d){return d.text?rn(d.from.line+d.text.length-1,$n(d.text).length+(d.text.length==1?d.from.ch:0)):d.to}function Zh(d,v){if(si(d,v.from)<0)return d;if(si(d,v.to)<=0)return WA(v);var B=d.line+v.text.length-(v.to.line-v.from.line)-1,E=d.ch;return d.line==v.to.line&&(E+=WA(v).ch-v.to.ch),rn(B,E)}function Tc(d,v){for(var B=[],E=0;E<d.sel.ranges.length;E++){var F=d.sel.ranges[E];B.push(new Xr(Zh(F.anchor,v),Zh(F.head,v)))}return ci(d.cm,B,d.sel.primIndex)}function gA(d,v,B){return d.line==v.line?rn(B.line,d.ch-v.ch+B.ch):rn(B.line+(d.line-v.line),d.ch)}function nf(d,v,B){for(var E=[],F=rn(d.first,0),Z=F,fe=0;fe<v.length;fe++){var _e=v[fe],ke=gA(_e.from,F,Z),Le=gA(WA(_e),F,Z);if(F=_e.to,Z=Le,B=="around"){var vt=d.sel.ranges[fe],It=si(vt.head,vt.anchor)<0;E[fe]=new Xr(It?Le:ke,It?ke:Le)}else E[fe]=new Xr(ke,ke)}return new Ca(E,d.sel.primIndex)}function no(d){d.doc.mode=wo(d.options,d.doc.modeOption),Nl(d)}function Nl(d){d.doc.iter(function(v){v.stateAfter&&(v.stateAfter=null),v.styles&&(v.styles=null)}),d.doc.modeFrontier=d.doc.highlightFrontier=d.doc.first,eh(d,100),d.state.modeGen++,d.curOp&&Es(d)}function Bh(d,v){return v.from.ch==0&&v.to.ch==0&&$n(v.text)==""&&(!d.cm||d.cm.options.wholeLineUpdateBefore)}function uc(d,v,B,E){function F(Ci){return B?B[Ci]:null}function Z(Ci,gi,Di){Yu(Ci,gi,Di,E),es(Ci,"change",Ci,v)}function fe(Ci,gi){for(var Di=[],ar=Ci;ar<gi;++ar)Di.push(new Ll(Le[ar],F(ar),E));return Di}var _e=v.from,ke=v.to,Le=v.text,vt=Mi(d,_e.line),It=Mi(d,ke.line),Jt=$n(Le),Ht=F(Le.length-1),_n=ke.line-_e.line;if(v.full)d.insert(0,fe(0,Le.length)),d.remove(Le.length,d.size-Le.length);else if(Bh(d,v)){var Rn=fe(0,Le.length-1);Z(It,It.text,Ht),_n&&d.remove(_e.line,_n),Rn.length&&d.insert(_e.line,Rn)}else if(vt==It)if(Le.length==1)Z(vt,vt.text.slice(0,_e.ch)+Jt+vt.text.slice(ke.ch),Ht);else{var oi=fe(1,Le.length-1);oi.push(new Ll(Jt+vt.text.slice(ke.ch),Ht,E)),Z(vt,vt.text.slice(0,_e.ch)+Le[0],F(0)),d.insert(_e.line+1,oi)}else if(Le.length==1)Z(vt,vt.text.slice(0,_e.ch)+Le[0]+It.text.slice(ke.ch),F(0)),d.remove(_e.line+1,_n);else{Z(vt,vt.text.slice(0,_e.ch)+Le[0],F(0)),Z(It,Jt+It.text.slice(ke.ch),Ht);var mi=fe(1,Le.length-1);_n>1&&d.remove(_e.line+1,_n-1),d.insert(_e.line+1,mi)}es(d,"change",d,v)}function ku(d,v,B){function E(F,Z,fe){if(F.linked)for(var _e=0;_e<F.linked.length;++_e){var ke=F.linked[_e];if(ke.doc!=Z){var Le=fe&&ke.sharedHist;B&&!Le||(v(ke.doc,Le),E(ke.doc,F,Le))}}}E(d,null,!0)}function Ac(d,v){if(v.cm)throw new Error("This document is already in use.");d.doc=v,v.cm=d,qh(d),no(d),Oh(d),d.options.direction=v.direction,d.options.lineWrapping||qs(d),d.options.mode=v.modeOption,Es(d)}function Oh(d){(d.doc.direction=="rtl"?be:Oe)(d.display.lineDiv,"CodeMirror-rtl")}function yA(d){Ga(d,function(){Oh(d),Es(d)})}function ih(d){this.done=[],this.undone=[],this.undoDepth=d?d.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=d?d.maxGeneration:1}function eA(d,v){var B={from:So(v.from),to:WA(v),text:us(d,v.from,v.to)};return Xh(d,B,v.from.line,v.to.line+1),ku(d,function(E){return Xh(E,B,v.from.line,v.to.line+1)},!0),B}function _l(d){for(;d.length;){var v=$n(d);if(v.ranges)d.pop();else break}}function Ep(d,v){if(v)return _l(d.done),$n(d.done);if(d.done.length&&!$n(d.done).ranges)return $n(d.done);if(d.done.length>1&&!d.done[d.done.length-2].ranges)return d.done.pop(),$n(d.done)}function rf(d,v,B,E){var F=d.history;F.undone.length=0;var Z=+new Date,fe,_e;if((F.lastOp==E||F.lastOrigin==v.origin&&v.origin&&(v.origin.charAt(0)=="+"&&F.lastModTime>Z-(d.cm?d.cm.options.historyEventDelay:500)||v.origin.charAt(0)=="*"))&&(fe=Ep(F,F.lastOp==E)))_e=$n(fe.changes),si(v.from,v.to)==0&&si(v.from,_e.to)==0?_e.to=WA(v):fe.changes.push(eA(d,v));else{var ke=$n(F.done);for((!ke||!ke.ranges)&&Wl(d.sel,F.done),fe={changes:[eA(d,v)],generation:F.generation},F.done.push(fe);F.done.length>F.undoDepth;)F.done.shift(),F.done[0].ranges||F.done.shift()}F.done.push(B),F.generation=++F.maxGeneration,F.lastModTime=F.lastSelTime=Z,F.lastOp=F.lastSelOp=E,F.lastOrigin=F.lastSelOrigin=v.origin,_e||it(d,"historyAdded")}function Gl(d,v,B,E){var F=v.charAt(0);return F=="*"||F=="+"&&B.ranges.length==E.ranges.length&&B.somethingSelected()==E.somethingSelected()&&new Date-d.history.lastSelTime<=(d.cm?d.cm.options.historyEventDelay:500)}function Po(d,v,B,E){var F=d.history,Z=E&&E.origin;B==F.lastSelOp||Z&&F.lastSelOrigin==Z&&(F.lastModTime==F.lastSelTime&&F.lastOrigin==Z||Gl(d,Z,$n(F.done),v))?F.done[F.done.length-1]=v:Wl(v,F.done),F.lastSelTime=+new Date,F.lastSelOrigin=Z,F.lastSelOp=B,E&&E.clearRedo!==!1&&_l(F.undone)}function Wl(d,v){var B=$n(v);B&&B.ranges&&B.equals(d)||v.push(d)}function Xh(d,v,B,E){var F=v["spans_"+d.id],Z=0;d.iter(Math.max(d.first,B),Math.min(d.first+d.size,E),function(fe){fe.markedSpans&&((F||(F=v["spans_"+d.id]={}))[Z]=fe.markedSpans),++Z})}function Lf(d){if(!d)return null;for(var v,B=0;B<d.length;++B)d[B].marker.explicitlyCleared?v||(v=d.slice(0,B)):v&&v.push(d[B]);return v?v.length?v:null:d}function vA(d,v){var B=v["spans_"+d.id];if(!B)return null;for(var E=[],F=0;F<v.text.length;++F)E.push(Lf(B[F]));return E}function io(d,v){var B=vA(d,v),E=Rr(d,v);if(!B)return E;if(!E)return B;for(var F=0;F<B.length;++F){var Z=B[F],fe=E[F];if(Z&&fe)e:for(var _e=0;_e<fe.length;++_e){for(var ke=fe[_e],Le=0;Le<Z.length;++Le)if(Z[Le].marker==ke.marker)continue e;Z.push(ke)}else fe&&(B[F]=fe)}return B}function Ko(d,v,B){for(var E=[],F=0;F<d.length;++F){var Z=d[F];if(Z.ranges){E.push(B?Ca.prototype.deepCopy.call(Z):Z);continue}var fe=Z.changes,_e=[];E.push({changes:_e});for(var ke=0;ke<fe.length;++ke){var Le=fe[ke],vt=void 0;if(_e.push({from:Le.from,to:Le.to,text:Le.text}),v)for(var It in Le)(vt=It.match(/^spans_(\d+)$/))&&He(v,Number(vt[1]))>-1&&($n(_e)[It]=Le[It],delete Le[It])}}return E}function Pr(d,v,B,E){if(E){var F=d.anchor;if(B){var Z=si(v,F)<0;Z!=si(B,F)<0?(F=v,v=B):Z!=si(v,B)<0&&(v=B)}return new Xr(F,v)}else return new Xr(B||v,v)}function QA(d,v,B,E,F){F==null&&(F=d.cm&&(d.cm.display.shift||d.extend)),la(d,new Ca([Pr(d.sel.primary(),v,B,F)],0),E)}function Ii(d,v,B){for(var E=[],F=d.cm&&(d.cm.display.shift||d.extend),Z=0;Z<d.sel.ranges.length;Z++)E[Z]=Pr(d.sel.ranges[Z],v[Z],null,F);var fe=ci(d.cm,E,d.sel.primIndex);la(d,fe,B)}function ki(d,v,B,E){var F=d.sel.ranges.slice(0);F[v]=B,la(d,ci(d.cm,F,d.sel.primIndex),E)}function kc(d,v,B,E){la(d,GA(v,B),E)}function Du(d,v,B){var E={ranges:v.ranges,update:function(F){this.ranges=[];for(var Z=0;Z<F.length;Z++)this.ranges[Z]=new Xr(Qi(d,F[Z].anchor),Qi(d,F[Z].head))},origin:B&&B.origin};return it(d,"beforeSelectionChange",d,E),d.cm&&it(d.cm,"beforeSelectionChange",d.cm,E),E.ranges!=v.ranges?ci(d.cm,E.ranges,E.ranges.length-1):v}function Au(d,v,B){var E=d.history.done,F=$n(E);F&&F.ranges?(E[E.length-1]=v,mo(d,v,B)):la(d,v,B)}function la(d,v,B){mo(d,v,B),Po(d,d.sel,d.cm?d.cm.curOp.id:NaN,B)}function mo(d,v,B){(Mn(d,"beforeSelectionChange")||d.cm&&Mn(d.cm,"beforeSelectionChange"))&&(v=Du(d,v,B));var E=B&&B.bias||(si(v.primary().head,d.sel.primary().head)<0?-1:1);Ql(d,Jh(d,v,E,!0)),!(B&&B.scroll===!1)&&d.cm&&d.cm.getOption("readOnly")!="nocursor"&&Wo(d.cm)}function Ql(d,v){v.equals(d.sel)||(d.sel=v,d.cm&&(d.cm.curOp.updateInput=1,d.cm.curOp.selectionChanged=!0,Dn(d.cm)),es(d,"cursorActivity",d))}function Ff(d){Ql(d,Jh(d,d.sel,null,!1))}function Jh(d,v,B,E){for(var F,Z=0;Z<v.ranges.length;Z++){var fe=v.ranges[Z],_e=v.ranges.length==d.sel.ranges.length&&d.sel.ranges[Z],ke=Wa(d,fe.anchor,_e&&_e.anchor,B,E),Le=fe.head==fe.anchor?ke:Wa(d,fe.head,_e&&_e.head,B,E);(F||ke!=fe.anchor||Le!=fe.head)&&(F||(F=v.ranges.slice(0,Z)),F[Z]=new Xr(ke,Le))}return F?ci(d.cm,F,v.primIndex):v}function Uo(d,v,B,E,F){var Z=Mi(d,v.line);if(Z.markedSpans)for(var fe=0;fe<Z.markedSpans.length;++fe){var _e=Z.markedSpans[fe],ke=_e.marker,Le="selectLeft"in ke?!ke.selectLeft:ke.inclusiveLeft,vt="selectRight"in ke?!ke.selectRight:ke.inclusiveRight;if((_e.from==null||(Le?_e.from<=v.ch:_e.from<v.ch))&&(_e.to==null||(vt?_e.to>=v.ch:_e.to>v.ch))){if(F&&(it(ke,"beforeCursorEnter"),ke.explicitlyCleared))if(Z.markedSpans){--fe;continue}else break;if(!ke.atomic)continue;if(B){var It=ke.find(E<0?1:-1),Jt=void 0;if((E<0?vt:Le)&&(It=ed(d,It,-E,It&&It.line==v.line?Z:null)),It&&It.line==v.line&&(Jt=si(It,B))&&(E<0?Jt<0:Jt>0))return Uo(d,It,v,E,F)}var Ht=ke.find(E<0?-1:1);return(E<0?Le:vt)&&(Ht=ed(d,Ht,E,Ht.line==v.line?Z:null)),Ht?Uo(d,Ht,v,E,F):null}}return v}function Wa(d,v,B,E,F){var Z=E||1,fe=Uo(d,v,B,Z,F)||!F&&Uo(d,v,B,Z,!0)||Uo(d,v,B,-Z,F)||!F&&Uo(d,v,B,-Z,!0);return fe||(d.cantEdit=!0,rn(d.first,0))}function ed(d,v,B,E){return B<0&&v.ch==0?v.line>d.first?Qi(d,rn(v.line-1)):null:B>0&&v.ch==(E||Mi(d,v.line)).text.length?v.line<d.first+d.size-1?rn(v.line+1,0):null:new rn(v.line,v.ch+B)}function CA(d){d.setSelection(rn(d.firstLine(),0),rn(d.lastLine()),Ot)}function Dc(d,v,B){var E={canceled:!1,from:v.from,to:v.to,text:v.text,origin:v.origin,cancel:function(){return E.canceled=!0}};return B&&(E.update=function(F,Z,fe,_e){F&&(E.from=Qi(d,F)),Z&&(E.to=Qi(d,Z)),fe&&(E.text=fe),_e!==void 0&&(E.origin=_e)}),it(d,"beforeChange",d,E),d.cm&&it(d.cm,"beforeChange",d.cm,E),E.canceled?(d.cm&&(d.cm.curOp.updateInput=2),null):{from:E.from,to:E.to,text:E.text,origin:E.origin}}function Zs(d,v,B){if(d.cm){if(!d.cm.curOp)return Zo(d.cm,Zs)(d,v,B);if(d.cm.state.suppressEdits)return}if(!((Mn(d,"beforeChange")||d.cm&&Mn(d.cm,"beforeChange"))&&(v=Dc(d,v,!0),!v))){var E=jo&&!B&&Zi(d,v.from,v.to);if(E)for(var F=E.length-1;F>=0;--F)ns(d,{from:E[F].from,to:E[F].to,text:F?[""]:v.text,origin:v.origin});else ns(d,v)}}function ns(d,v){if(!(v.text.length==1&&v.text[0]==""&&si(v.from,v.to)==0)){var B=Tc(d,v);rf(d,v,B,d.cm?d.cm.curOp.id:NaN),cc(d,v,B,Rr(d,v));var E=[];ku(d,function(F,Z){!Z&&He(E,F.history)==-1&&(Td(F.history,v),E.push(F.history)),cc(F,v,null,Rr(F,v))})}}function cu(d,v,B){var E=d.cm&&d.cm.state.suppressEdits;if(!(E&&!B)){for(var F=d.history,Z,fe=d.sel,_e=v=="undo"?F.done:F.undone,ke=v=="undo"?F.undone:F.done,Le=0;Le<_e.length&&(Z=_e[Le],!(B?Z.ranges&&!Z.equals(d.sel):!Z.ranges));Le++);if(Le!=_e.length){for(F.lastOrigin=F.lastSelOrigin=null;;)if(Z=_e.pop(),Z.ranges){if(Wl(Z,ke),B&&!Z.equals(d.sel)){la(d,Z,{clearRedo:!1});return}fe=Z}else if(E){_e.push(Z);return}else break;var vt=[];Wl(fe,ke),ke.push({changes:vt,generation:F.generation}),F.generation=Z.generation||++F.maxGeneration;for(var It=Mn(d,"beforeChange")||d.cm&&Mn(d.cm,"beforeChange"),Jt=function(Rn){var oi=Z.changes[Rn];if(oi.origin=v,It&&!Dc(d,oi,!1))return _e.length=0,{};vt.push(eA(d,oi));var mi=Rn?Tc(d,oi):$n(_e);cc(d,oi,mi,io(d,oi)),!Rn&&d.cm&&d.cm.scrollIntoView({from:oi.from,to:WA(oi)});var Ci=[];ku(d,function(gi,Di){!Di&&He(Ci,gi.history)==-1&&(Td(gi.history,oi),Ci.push(gi.history)),cc(gi,oi,null,io(gi,oi))})},Ht=Z.changes.length-1;Ht>=0;--Ht){var _n=Jt(Ht);if(_n)return _n.v}}}}function Rc(d,v){if(v!=0&&(d.first+=v,d.sel=new Ca(On(d.sel.ranges,function(F){return new Xr(rn(F.anchor.line+v,F.anchor.ch),rn(F.head.line+v,F.head.ch))}),d.sel.primIndex),d.cm)){Es(d.cm,d.first,d.first-v,v);for(var B=d.cm.display,E=B.viewFrom;E<B.viewTo;E++)Zu(d.cm,E,"gutter")}}function cc(d,v,B,E){if(d.cm&&!d.cm.curOp)return Zo(d.cm,cc)(d,v,B,E);if(v.to.line<d.first){Rc(d,v.text.length-1-(v.to.line-v.from.line));return}if(!(v.from.line>d.lastLine())){if(v.from.line<d.first){var F=v.text.length-1-(d.first-v.from.line);Rc(d,F),v={from:rn(d.first,0),to:rn(v.to.line+F,v.to.ch),text:[$n(v.text)],origin:v.origin}}var Z=d.lastLine();v.to.line>Z&&(v={from:v.from,to:rn(Z,Mi(d,Z).text.length),text:[v.text[0]],origin:v.origin}),v.removed=us(d,v.from,v.to),B||(B=Tc(d,v)),d.cm?hc(d.cm,v,E):uc(d,v,E),mo(d,B,Ot),d.cantEdit&&Wa(d,rn(d.firstLine(),0))&&(d.cantEdit=!1)}}function hc(d,v,B){var E=d.doc,F=d.display,Z=v.from,fe=v.to,_e=!1,ke=Z.line;d.options.lineWrapping||(ke=$e(Ri(Mi(E,Z.line))),E.iter(ke,fe.line+1,function(Ht){if(Ht==F.maxLine)return _e=!0,!0})),E.sel.contains(v.from,v.to)>-1&&Dn(d),uc(E,v,B,fA(d)),d.options.lineWrapping||(E.iter(ke,Z.line+v.text.length,function(Ht){var _n=jr(Ht);_n>F.maxLineLength&&(F.maxLine=Ht,F.maxLineLength=_n,F.maxLineChanged=!0,_e=!1)}),_e&&(d.curOp.updateMaxLine=!0)),cA(E,Z.line),eh(d,400);var Le=v.text.length-(fe.line-Z.line)-1;v.full?Es(d):Z.line==fe.line&&v.text.length==1&&!Bh(d.doc,v)?Zu(d,Z.line,"text"):Es(d,Z.line,fe.line+1,Le);var vt=Mn(d,"changes"),It=Mn(d,"change");if(It||vt){var Jt={from:Z,to:fe,text:v.text,removed:v.removed,origin:v.origin};It&&es(d,"change",d,Jt),vt&&(d.curOp.changeObjs||(d.curOp.changeObjs=[])).push(Jt)}d.display.selForContextMenu=null}function Yl(d,v,B,E,F){var Z;E||(E=B),si(E,B)<0&&(Z=[E,B],B=Z[0],E=Z[1]),typeof v=="string"&&(v=d.splitLines(v)),Zs(d,{from:B,to:E,text:v,origin:F})}function td(d,v,B,E){B<d.line?d.line+=E:v<d.line&&(d.line=v,d.ch=0)}function nd(d,v,B,E){for(var F=0;F<d.length;++F){var Z=d[F],fe=!0;if(Z.ranges){Z.copied||(Z=d[F]=Z.deepCopy(),Z.copied=!0);for(var _e=0;_e<Z.ranges.length;_e++)td(Z.ranges[_e].anchor,v,B,E),td(Z.ranges[_e].head,v,B,E);continue}for(var ke=0;ke<Z.changes.length;++ke){var Le=Z.changes[ke];if(B<Le.from.line)Le.from=rn(Le.from.line+E,Le.from.ch),Le.to=rn(Le.to.line+E,Le.to.ch);else if(v<=Le.to.line){fe=!1;break}}fe||(d.splice(0,F+1),F=0)}}function Td(d,v){var B=v.from.line,E=v.to.line,F=v.text.length-(E-B)-1;nd(d.done,B,E,F),nd(d.undone,B,E,F)}function I(d,v,B,E){var F=v,Z=v;return typeof v=="number"?Z=Mi(d,Qu(d,v)):F=$e(v),F==null?null:(E(Z,F)&&d.cm&&Zu(d.cm,F,B),Z)}function s(d){this.lines=d,this.parent=null;for(var v=0,B=0;B<d.length;++B)d[B].parent=this,v+=d[B].height;this.height=v}s.prototype={chunkSize:function(){return this.lines.length},removeInner:function(d,v){for(var B=d,E=d+v;B<E;++B){var F=this.lines[B];this.height-=F.height,ps(F),es(F,"delete")}this.lines.splice(d,v)},collapse:function(d){d.push.apply(d,this.lines)},insertInner:function(d,v,B){this.height+=B,this.lines=this.lines.slice(0,d).concat(v).concat(this.lines.slice(d));for(var E=0;E<v.length;++E)v[E].parent=this},iterN:function(d,v,B){for(var E=d+v;d<E;++d)if(B(this.lines[d]))return!0}};function f(d){this.children=d;for(var v=0,B=0,E=0;E<d.length;++E){var F=d[E];v+=F.chunkSize(),B+=F.height,F.parent=this}this.size=v,this.height=B,this.parent=null}f.prototype={chunkSize:function(){return this.size},removeInner:function(d,v){this.size-=v;for(var B=0;B<this.children.length;++B){var E=this.children[B],F=E.chunkSize();if(d<F){var Z=Math.min(v,F-d),fe=E.height;if(E.removeInner(d,Z),this.height-=fe-E.height,F==Z&&(this.children.splice(B--,1),E.parent=null),(v-=Z)==0)break;d=0}else d-=F}if(this.size-v<25&&(this.children.length>1||!(this.children[0]instanceof s))){var _e=[];this.collapse(_e),this.children=[new s(_e)],this.children[0].parent=this}},collapse:function(d){for(var v=0;v<this.children.length;++v)this.children[v].collapse(d)},insertInner:function(d,v,B){this.size+=v.length,this.height+=B;for(var E=0;E<this.children.length;++E){var F=this.children[E],Z=F.chunkSize();if(d<=Z){if(F.insertInner(d,v,B),F.lines&&F.lines.length>50){for(var fe=F.lines.length%25+25,_e=fe;_e<F.lines.length;){var ke=new s(F.lines.slice(_e,_e+=25));F.height-=ke.height,this.children.splice(++E,0,ke),ke.parent=this}F.lines=F.lines.slice(0,fe),this.maybeSpill()}break}d-=Z}},maybeSpill:function(){if(!(this.children.length<=10)){var d=this;do{var v=d.children.splice(d.children.length-5,5),B=new f(v);if(d.parent){d.size-=B.size,d.height-=B.height;var F=He(d.parent.children,d);d.parent.children.splice(F+1,0,B)}else{var E=new f(d.children);E.parent=d,d.children=[E,B],d=E}B.parent=d.parent}while(d.children.length>10);d.parent.maybeSpill()}},iterN:function(d,v,B){for(var E=0;E<this.children.length;++E){var F=this.children[E],Z=F.chunkSize();if(d<Z){var fe=Math.min(v,Z-d);if(F.iterN(d,fe,B))return!0;if((v-=fe)==0)break;d=0}else d-=Z}}};var _=function(d,v,B){if(B)for(var E in B)B.hasOwnProperty(E)&&(this[E]=B[E]);this.doc=d,this.node=v};_.prototype.clear=function(){var d=this.doc.cm,v=this.line.widgets,B=this.line,E=$e(B);if(!(E==null||!v)){for(var F=0;F<v.length;++F)v[F]==this&&v.splice(F--,1);v.length||(B.widgets=null);var Z=oc(this);Vo(B,Math.max(0,B.height-Z)),d&&(Ga(d,function(){S(d,B,-Z),Zu(d,E,"widget")}),es(d,"lineWidgetCleared",d,this,E))}},_.prototype.changed=function(){var d=this,v=this.height,B=this.doc.cm,E=this.line;this.height=null;var F=oc(this)-v;F&&(mr(this.doc,E)||Vo(E,E.height+F),B&&Ga(B,function(){B.curOp.forceUpdate=!0,S(B,E,F),es(B,"lineWidgetChanged",B,d,$e(E))}))},ii(_);function S(d,v,B){No(v)<(d.curOp&&d.curOp.scrollTop||d.doc.scrollTop)&&kl(d,B)}function k(d,v,B,E){var F=new _(d,B,E),Z=d.cm;return Z&&F.noHScroll&&(Z.display.alignWidgets=!0),I(d,v,"widget",function(fe){var _e=fe.widgets||(fe.widgets=[]);if(F.insertAt==null?_e.push(F):_e.splice(Math.min(_e.length,Math.max(0,F.insertAt)),0,F),F.line=fe,Z&&!mr(d,fe)){var ke=No(fe)<d.scrollTop;Vo(fe,fe.height+oc(F)),ke&&kl(Z,F.height),Z.curOp.forceUpdate=!0}return!0}),Z&&es(Z,"lineWidgetAdded",Z,F,typeof v=="number"?v:$e(v)),F}var z=0,q=function(d,v){this.lines=[],this.type=v,this.doc=d,this.id=++z};q.prototype.clear=function(){if(!this.explicitlyCleared){var d=this.doc.cm,v=d&&!d.curOp;if(v&&rl(d),Mn(this,"clear")){var B=this.find();B&&es(this,"clear",B.from,B.to)}for(var E=null,F=null,Z=0;Z<this.lines.length;++Z){var fe=this.lines[Z],_e=Dr(fe.markedSpans,this);d&&!this.collapsed?Zu(d,$e(fe),"text"):d&&(_e.to!=null&&(F=$e(fe)),_e.from!=null&&(E=$e(fe))),fe.markedSpans=ru(fe.markedSpans,_e),_e.from==null&&this.collapsed&&!mr(this.doc,fe)&&d&&Vo(fe,wu(d.display))}if(d&&this.collapsed&&!d.options.lineWrapping)for(var ke=0;ke<this.lines.length;++ke){var Le=Ri(this.lines[ke]),vt=jr(Le);vt>d.display.maxLineLength&&(d.display.maxLine=Le,d.display.maxLineLength=vt,d.display.maxLineChanged=!0)}E!=null&&d&&this.collapsed&&Es(d,E,F+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,d&&Ff(d.doc)),d&&es(d,"markerCleared",d,this,E,F),v&&zs(d),this.parent&&this.parent.clear()}},q.prototype.find=function(d,v){d==null&&this.type=="bookmark"&&(d=1);for(var B,E,F=0;F<this.lines.length;++F){var Z=this.lines[F],fe=Dr(Z.markedSpans,this);if(fe.from!=null&&(B=rn(v?Z:$e(Z),fe.from),d==-1))return B;if(fe.to!=null&&(E=rn(v?Z:$e(Z),fe.to),d==1))return E}return B&&{from:B,to:E}},q.prototype.changed=function(){var d=this,v=this.find(-1,!0),B=this,E=this.doc.cm;!v||!E||Ga(E,function(){var F=v.line,Z=$e(v.line),fe=Vd(E,Z);if(fe&&(UA(fe),E.curOp.selectionChanged=E.curOp.forceUpdate=!0),E.curOp.updateMaxLine=!0,!mr(B.doc,F)&&B.height!=null){var _e=B.height;B.height=null;var ke=oc(B)-_e;ke&&Vo(F,F.height+ke)}es(E,"markerChanged",E,d)})},q.prototype.attachLine=function(d){if(!this.lines.length&&this.doc.cm){var v=this.doc.cm.curOp;(!v.maybeHiddenMarkers||He(v.maybeHiddenMarkers,this)==-1)&&(v.maybeUnhiddenMarkers||(v.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(d)},q.prototype.detachLine=function(d){if(this.lines.splice(He(this.lines,d),1),!this.lines.length&&this.doc.cm){var v=this.doc.cm.curOp;(v.maybeHiddenMarkers||(v.maybeHiddenMarkers=[])).push(this)}},ii(q);function X(d,v,B,E,F){if(E&&E.shared)return me(d,v,B,E,F);if(d.cm&&!d.cm.curOp)return Zo(d.cm,X)(d,v,B,E,F);var Z=new q(d,F),fe=si(v,B);if(E&&Fe(E,Z,!1),fe>0||fe==0&&Z.clearWhenEmpty!==!1)return Z;if(Z.replacedWith&&(Z.collapsed=!0,Z.widgetNode=ze("span",[Z.replacedWith],"CodeMirror-widget"),E.handleMouseEvents||Z.widgetNode.setAttribute("cm-ignore-events","true"),E.insertLeft&&(Z.widgetNode.insertLeft=!0)),Z.collapsed){if(or(d,v.line,v,B,Z)||v.line!=B.line&&or(d,B.line,v,B,Z))throw new Error("Inserting collapsed marker partially overlapping an existing one");wa()}Z.addToHistory&&rf(d,{from:v,to:B,origin:"markText"},d.sel,NaN);var _e=v.line,ke=d.cm,Le;if(d.iter(_e,B.line+1,function(It){ke&&Z.collapsed&&!ke.options.lineWrapping&&Ri(It)==ke.display.maxLine&&(Le=!0),Z.collapsed&&_e!=v.line&&Vo(It,0),ja(It,new aa(Z,_e==v.line?v.ch:null,_e==B.line?B.ch:null),d.cm&&d.cm.curOp),++_e}),Z.collapsed&&d.iter(v.line,B.line+1,function(It){mr(d,It)&&Vo(It,0)}),Z.clearOnEnter&&mt(Z,"beforeCursorEnter",function(){return Z.clear()}),Z.readOnly&&(za(),(d.history.done.length||d.history.undone.length)&&d.clearHistory()),Z.collapsed&&(Z.id=++z,Z.atomic=!0),ke){if(Le&&(ke.curOp.updateMaxLine=!0),Z.collapsed)Es(ke,v.line,B.line+1);else if(Z.className||Z.startStyle||Z.endStyle||Z.css||Z.attributes||Z.title)for(var vt=v.line;vt<=B.line;vt++)Zu(ke,vt,"text");Z.atomic&&Ff(ke.doc),es(ke,"markerAdded",ke,Z)}return Z}var he=function(d,v){this.markers=d,this.primary=v;for(var B=0;B<d.length;++B)d[B].parent=this};he.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var d=0;d<this.markers.length;++d)this.markers[d].clear();es(this,"clear")}},he.prototype.find=function(d,v){return this.primary.find(d,v)},ii(he);function me(d,v,B,E,F){E=Fe(E),E.shared=!1;var Z=[X(d,v,B,E,F)],fe=Z[0],_e=E.widgetNode;return ku(d,function(ke){_e&&(E.widgetNode=_e.cloneNode(!0)),Z.push(X(ke,Qi(ke,v),Qi(ke,B),E,F));for(var Le=0;Le<ke.linked.length;++Le)if(ke.linked[Le].isParent)return;fe=$n(Z)}),new he(Z,fe)}function Ee(d){return d.findMarks(rn(d.first,0),d.clipPos(rn(d.lastLine())),function(v){return v.parent})}function Me(d,v){for(var B=0;B<v.length;B++){var E=v[B],F=E.find(),Z=d.clipPos(F.from),fe=d.clipPos(F.to);if(si(Z,fe)){var _e=X(d,Z,fe,E.primary,E.primary.type);E.markers.push(_e),_e.parent=E}}}function Ue(d){for(var v=function(E){var F=d[E],Z=[F.primary.doc];ku(F.primary.doc,function(ke){return Z.push(ke)});for(var fe=0;fe<F.markers.length;fe++){var _e=F.markers[fe];He(Z,_e.doc)==-1&&(_e.parent=null,F.markers.splice(fe--,1))}},B=0;B<d.length;B++)v(B)}var Xe=0,ut=function(d,v,B,E,F){if(!(this instanceof ut))return new ut(d,v,B,E,F);B==null&&(B=0),f.call(this,[new s([new Ll("",null)])]),this.first=B,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=B;var Z=rn(B,0);this.sel=GA(Z),this.history=new ih(null),this.id=++Xe,this.modeOption=v,this.lineSep=E,this.direction=F=="rtl"?"rtl":"ltr",this.extend=!1,typeof d=="string"&&(d=this.splitLines(d)),uc(this,{from:Z,to:Z,text:d}),la(this,GA(Z),Ot)};ut.prototype=Oi(f.prototype,{constructor:ut,iter:function(d,v,B){B?this.iterN(d-this.first,v-d,B):this.iterN(this.first,this.first+this.size,d)},insert:function(d,v){for(var B=0,E=0;E<v.length;++E)B+=v[E].height;this.insertInner(d-this.first,v,B)},remove:function(d,v){this.removeInner(d-this.first,v)},getValue:function(d){var v=Ma(this,this.first,this.first+this.size);return d===!1?v:v.join(d||this.lineSeparator())},setValue:gs(function(d){var v=rn(this.first,0),B=this.first+this.size-1;Zs(this,{from:v,to:rn(B,Mi(this,B).text.length),text:this.splitLines(d),origin:"setValue",full:!0},!0),this.cm&&sa(this.cm,0,0),la(this,GA(v),Ot)}),replaceRange:function(d,v,B,E){v=Qi(this,v),B=B?Qi(this,B):v,Yl(this,d,v,B,E)},getRange:function(d,v,B){var E=us(this,Qi(this,d),Qi(this,v));return B===!1?E:B===""?E.join(""):E.join(B||this.lineSeparator())},getLine:function(d){var v=this.getLineHandle(d);return v&&v.text},getLineHandle:function(d){if(xn(this,d))return Mi(this,d)},getLineNumber:function(d){return $e(d)},getLineHandleVisualStart:function(d){return typeof d=="number"&&(d=Mi(this,d)),Ri(d)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(d){return Qi(this,d)},getCursor:function(d){var v=this.sel.primary(),B;return d==null||d=="head"?B=v.head:d=="anchor"?B=v.anchor:d=="end"||d=="to"||d===!1?B=v.to():B=v.from(),B},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:gs(function(d,v,B){kc(this,Qi(this,typeof d=="number"?rn(d,v||0):d),null,B)}),setSelection:gs(function(d,v,B){kc(this,Qi(this,d),Qi(this,v||d),B)}),extendSelection:gs(function(d,v,B){QA(this,Qi(this,d),v&&Qi(this,v),B)}),extendSelections:gs(function(d,v){Ii(this,_u(this,d),v)}),extendSelectionsBy:gs(function(d,v){var B=On(this.sel.ranges,d);Ii(this,_u(this,B),v)}),setSelections:gs(function(d,v,B){if(d.length){for(var E=[],F=0;F<d.length;F++)E[F]=new Xr(Qi(this,d[F].anchor),Qi(this,d[F].head||d[F].anchor));v==null&&(v=Math.min(d.length-1,this.sel.primIndex)),la(this,ci(this.cm,E,v),B)}}),addSelection:gs(function(d,v,B){var E=this.sel.ranges.slice(0);E.push(new Xr(Qi(this,d),Qi(this,v||d))),la(this,ci(this.cm,E,E.length-1),B)}),getSelection:function(d){for(var v=this.sel.ranges,B,E=0;E<v.length;E++){var F=us(this,v[E].from(),v[E].to());B=B?B.concat(F):F}return d===!1?B:B.join(d||this.lineSeparator())},getSelections:function(d){for(var v=[],B=this.sel.ranges,E=0;E<B.length;E++){var F=us(this,B[E].from(),B[E].to());d!==!1&&(F=F.join(d||this.lineSeparator())),v[E]=F}return v},replaceSelection:function(d,v,B){for(var E=[],F=0;F<this.sel.ranges.length;F++)E[F]=d;this.replaceSelections(E,v,B||"+input")},replaceSelections:gs(function(d,v,B){for(var E=[],F=this.sel,Z=0;Z<F.ranges.length;Z++){var fe=F.ranges[Z];E[Z]={from:fe.from(),to:fe.to(),text:this.splitLines(d[Z]),origin:B}}for(var _e=v&&v!="end"&&nf(this,E,v),ke=E.length-1;ke>=0;ke--)Zs(this,E[ke]);_e?Au(this,_e):this.cm&&Wo(this.cm)}),undo:gs(function(){cu(this,"undo")}),redo:gs(function(){cu(this,"redo")}),undoSelection:gs(function(){cu(this,"undo",!0)}),redoSelection:gs(function(){cu(this,"redo",!0)}),setExtending:function(d){this.extend=d},getExtending:function(){return this.extend},historySize:function(){for(var d=this.history,v=0,B=0,E=0;E<d.done.length;E++)d.done[E].ranges||++v;for(var F=0;F<d.undone.length;F++)d.undone[F].ranges||++B;return{undo:v,redo:B}},clearHistory:function(){var d=this;this.history=new ih(this.history),ku(this,function(v){return v.history=d.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(d){return d&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(d){return this.history.generation==(d||this.cleanGeneration)},getHistory:function(){return{done:Ko(this.history.done),undone:Ko(this.history.undone)}},setHistory:function(d){var v=this.history=new ih(this.history);v.done=Ko(d.done.slice(0),null,!0),v.undone=Ko(d.undone.slice(0),null,!0)},setGutterMarker:gs(function(d,v,B){return I(this,d,"gutter",function(E){var F=E.gutterMarkers||(E.gutterMarkers={});return F[v]=B,!B&&de(F)&&(E.gutterMarkers=null),!0})}),clearGutter:gs(function(d){var v=this;this.iter(function(B){B.gutterMarkers&&B.gutterMarkers[d]&&I(v,B,"gutter",function(){return B.gutterMarkers[d]=null,de(B.gutterMarkers)&&(B.gutterMarkers=null),!0})})}),lineInfo:function(d){var v;if(typeof d=="number"){if(!xn(this,d)||(v=d,d=Mi(this,d),!d))return null}else if(v=$e(d),v==null)return null;return{line:v,handle:d,text:d.text,gutterMarkers:d.gutterMarkers,textClass:d.textClass,bgClass:d.bgClass,wrapClass:d.wrapClass,widgets:d.widgets}},addLineClass:gs(function(d,v,B){return I(this,d,v=="gutter"?"gutter":"class",function(E){var F=v=="text"?"textClass":v=="background"?"bgClass":v=="gutter"?"gutterClass":"wrapClass";if(!E[F])E[F]=B;else{if(we(B).test(E[F]))return!1;E[F]+=" "+B}return!0})}),removeLineClass:gs(function(d,v,B){return I(this,d,v=="gutter"?"gutter":"class",function(E){var F=v=="text"?"textClass":v=="background"?"bgClass":v=="gutter"?"gutterClass":"wrapClass",Z=E[F];if(Z)if(B==null)E[F]=null;else{var fe=Z.match(we(B));if(!fe)return!1;var _e=fe.index+fe[0].length;E[F]=Z.slice(0,fe.index)+(!fe.index||_e==Z.length?"":" ")+Z.slice(_e)||null}else return!1;return!0})}),addLineWidget:gs(function(d,v,B){return k(this,d,v,B)}),removeLineWidget:function(d){d.clear()},markText:function(d,v,B){return X(this,Qi(this,d),Qi(this,v),B,B&&B.type||"range")},setBookmark:function(d,v){var B={replacedWith:v&&(v.nodeType==null?v.widget:v),insertLeft:v&&v.insertLeft,clearWhenEmpty:!1,shared:v&&v.shared,handleMouseEvents:v&&v.handleMouseEvents};return d=Qi(this,d),X(this,d,d,B,"bookmark")},findMarksAt:function(d){d=Qi(this,d);var v=[],B=Mi(this,d.line).markedSpans;if(B)for(var E=0;E<B.length;++E){var F=B[E];(F.from==null||F.from<=d.ch)&&(F.to==null||F.to>=d.ch)&&v.push(F.marker.parent||F.marker)}return v},findMarks:function(d,v,B){d=Qi(this,d),v=Qi(this,v);var E=[],F=d.line;return this.iter(d.line,v.line+1,function(Z){var fe=Z.markedSpans;if(fe)for(var _e=0;_e<fe.length;_e++){var ke=fe[_e];!(ke.to!=null&&F==d.line&&d.ch>=ke.to||ke.from==null&&F!=d.line||ke.from!=null&&F==v.line&&ke.from>=v.ch)&&(!B||B(ke.marker))&&E.push(ke.marker.parent||ke.marker)}++F}),E},getAllMarks:function(){var d=[];return this.iter(function(v){var B=v.markedSpans;if(B)for(var E=0;E<B.length;++E)B[E].from!=null&&d.push(B[E].marker)}),d},posFromIndex:function(d){var v,B=this.first,E=this.lineSeparator().length;return this.iter(function(F){var Z=F.text.length+E;if(Z>d)return v=d,!0;d-=Z,++B}),Qi(this,rn(B,v))},indexFromPos:function(d){d=Qi(this,d);var v=d.ch;if(d.line<this.first||d.ch<0)return 0;var B=this.lineSeparator().length;return this.iter(this.first,d.line,function(E){v+=E.text.length+B}),v},copy:function(d){var v=new ut(Ma(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return v.scrollTop=this.scrollTop,v.scrollLeft=this.scrollLeft,v.sel=this.sel,v.extend=!1,d&&(v.history.undoDepth=this.history.undoDepth,v.setHistory(this.getHistory())),v},linkedDoc:function(d){d||(d={});var v=this.first,B=this.first+this.size;d.from!=null&&d.from>v&&(v=d.from),d.to!=null&&d.to<B&&(B=d.to);var E=new ut(Ma(this,v,B),d.mode||this.modeOption,v,this.lineSep,this.direction);return d.sharedHist&&(E.history=this.history),(this.linked||(this.linked=[])).push({doc:E,sharedHist:d.sharedHist}),E.linked=[{doc:this,isParent:!0,sharedHist:d.sharedHist}],Me(E,Ee(this)),E},unlinkDoc:function(d){if(d instanceof Jo&&(d=d.doc),this.linked)for(var v=0;v<this.linked.length;++v){var B=this.linked[v];if(B.doc==d){this.linked.splice(v,1),d.unlinkDoc(this),Ue(Ee(this));break}}if(d.history==this.history){var E=[d.id];ku(d,function(F){return E.push(F.id)},!0),d.history=new ih(null),d.history.done=Ko(this.history.done,E),d.history.undone=Ko(this.history.undone,E)}},iterLinkedDocs:function(d){ku(this,d)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(d){return this.lineSep?d.split(this.lineSep):To(d)},lineSeparator:function(){return this.lineSep||`
`},setDirection:gs(function(d){d!="rtl"&&(d="ltr"),d!=this.direction&&(this.direction=d,this.iter(function(v){return v.order=null}),this.cm&&yA(this.cm))})}),ut.prototype.eachLine=ut.prototype.iter;var ct=0;function ft(d){var v=this;if(wt(v),!(en(v,d)||au(v.display,d))){Wn(d),p&&(ct=+new Date);var B=Na(v,d,!0),E=d.dataTransfer.files;if(!(!B||v.isReadOnly()))if(E&&E.length&&window.FileReader&&window.File)for(var F=E.length,Z=Array(F),fe=0,_e=function(){++fe==F&&Zo(v,function(){B=Qi(v.doc,B);var Ht={from:B,to:B,text:v.doc.splitLines(Z.filter(function(_n){return _n!=null}).join(v.doc.lineSeparator())),origin:"paste"};Zs(v.doc,Ht),Au(v.doc,GA(Qi(v.doc,B),Qi(v.doc,WA(Ht))))})()},ke=function(Ht,_n){if(v.options.allowDropFileTypes&&He(v.options.allowDropFileTypes,Ht.type)==-1){_e();return}var Rn=new FileReader;Rn.onerror=function(){return _e()},Rn.onload=function(){var oi=Rn.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(oi)){_e();return}Z[_n]=oi,_e()},Rn.readAsText(Ht)},Le=0;Le<E.length;Le++)ke(E[Le],Le);else{if(v.state.draggingText&&v.doc.sel.contains(B)>-1){v.state.draggingText(d),setTimeout(function(){return v.display.input.focus()},20);return}try{var vt=d.dataTransfer.getData("Text");if(vt){var It;if(v.state.draggingText&&!v.state.draggingText.copy&&(It=v.listSelections()),mo(v.doc,GA(B,B)),It)for(var Jt=0;Jt<It.length;++Jt)Yl(v.doc,"",It[Jt].anchor,It[Jt].head,"drag");v.replaceSelection(vt,"around","paste"),v.display.input.focus()}}catch{}}}}function xt(d,v){if(p&&(!d.state.draggingText||+new Date-ct<100)){Ei(v);return}if(!(en(d,v)||au(d.display,v))&&(v.dataTransfer.setData("Text",d.getSelection()),v.dataTransfer.effectAllowed="copyMove",v.dataTransfer.setDragImage&&!W)){var B=xe("img",null,null,"position: fixed; left: 0; top: 0;");B.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",j&&(B.width=B.height=1,d.display.wrapper.appendChild(B),B._top=B.offsetTop),v.dataTransfer.setDragImage(B,0,0),j&&B.parentNode.removeChild(B)}}function yt(d,v){var B=Na(d,v);if(B){var E=document.createDocumentFragment();kr(d,B,E),d.display.dragCursor||(d.display.dragCursor=xe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),d.display.lineSpace.insertBefore(d.display.dragCursor,d.display.cursorDiv)),Ve(d.display.dragCursor,E)}}function wt(d){d.display.dragCursor&&(d.display.lineSpace.removeChild(d.display.dragCursor),d.display.dragCursor=null)}function Pt(d){if(document.getElementsByClassName){for(var v=document.getElementsByClassName("CodeMirror"),B=[],E=0;E<v.length;E++){var F=v[E].CodeMirror;F&&B.push(F)}B.length&&B[0].operation(function(){for(var Z=0;Z<B.length;Z++)d(B[Z])})}}var Ft=!1;function Bt(){Ft||(Yt(),Ft=!0)}function Yt(){var d;mt(window,"resize",function(){d==null&&(d=setTimeout(function(){d=null,Pt(dn)},100))}),mt(window,"blur",function(){return Pt(pA)})}function dn(d){var v=d.display;v.cachedCharWidth=v.cachedTextHeight=v.cachedPaddingH=null,v.scrollbarsClipped=!1,d.setSize()}for(var Xt={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},nn=0;nn<10;nn++)Xt[nn+48]=Xt[nn+96]=String(nn);for(var un=65;un<=90;un++)Xt[un]=String.fromCharCode(un);for(var qn=1;qn<=12;qn++)Xt[qn+111]=Xt[qn+63235]="F"+qn;var Qn={};Qn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Qn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Qn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Qn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Qn.default=$?Qn.macDefault:Qn.pcDefault;function Tn(d){var v=d.split(/-(?!$)/);d=v[v.length-1];for(var B,E,F,Z,fe=0;fe<v.length-1;fe++){var _e=v[fe];if(/^(cmd|meta|m)$/i.test(_e))Z=!0;else if(/^a(lt)?$/i.test(_e))B=!0;else if(/^(c|ctrl|control)$/i.test(_e))E=!0;else if(/^s(hift)?$/i.test(_e))F=!0;else throw new Error("Unrecognized modifier name: "+_e)}return B&&(d="Alt-"+d),E&&(d="Ctrl-"+d),Z&&(d="Cmd-"+d),F&&(d="Shift-"+d),d}function xi(d){var v={};for(var B in d)if(d.hasOwnProperty(B)){var E=d[B];if(/^(name|fallthrough|(de|at)tach)$/.test(B))continue;if(E=="..."){delete d[B];continue}for(var F=On(B.split(" "),Tn),Z=0;Z<F.length;Z++){var fe=void 0,_e=void 0;Z==F.length-1?(_e=F.join(" "),fe=E):(_e=F.slice(0,Z+1).join(" "),fe="...");var ke=v[_e];if(!ke)v[_e]=fe;else if(ke!=fe)throw new Error("Inconsistent bindings for "+_e)}delete d[B]}for(var Le in v)d[Le]=v[Le];return d}function cr(d,v,B,E){v=Pa(v);var F=v.call?v.call(d,E):v[d];if(F===!1)return"nothing";if(F==="...")return"multi";if(F!=null&&B(F))return"handled";if(v.fallthrough){if(Object.prototype.toString.call(v.fallthrough)!="[object Array]")return cr(d,v.fallthrough,B,E);for(var Z=0;Z<v.fallthrough.length;Z++){var fe=cr(d,v.fallthrough[Z],B,E);if(fe)return fe}}}function Co(d){var v=typeof d=="string"?d:Xt[d.keyCode];return v=="Ctrl"||v=="Alt"||v=="Shift"||v=="Mod"}function ua(d,v,B){var E=d;return v.altKey&&E!="Alt"&&(d="Alt-"+d),(ge?v.metaKey:v.ctrlKey)&&E!="Ctrl"&&(d="Ctrl-"+d),(ge?v.ctrlKey:v.metaKey)&&E!="Mod"&&(d="Cmd-"+d),!B&&v.shiftKey&&E!="Shift"&&(d="Shift-"+d),d}function Lo(d,v){if(j&&d.keyCode==34&&d.char)return!1;var B=Xt[d.keyCode];return B==null||d.altGraphKey?!1:(d.keyCode==3&&d.code&&(B=d.code),ua(B,d,v))}function Pa(d){return typeof d=="string"?Qn[d]:d}function Aa(d,v){for(var B=d.doc.sel.ranges,E=[],F=0;F<B.length;F++){for(var Z=v(B[F]);E.length&&si(Z.from,$n(E).to)<=0;){var fe=E.pop();if(si(fe.from,Z.from)<0){Z.from=fe.from;break}}E.push(Z)}Ga(d,function(){for(var _e=E.length-1;_e>=0;_e--)Yl(d.doc,"",E[_e].from,E[_e].to,"+delete");Wo(d)})}function Br(d,v,B){var E=pe(d.text,v+B,B);return E<0||E>d.text.length?null:E}function Qo(d,v,B){var E=Br(d,v.ch,B);return E==null?null:new rn(v.line,E,B<0?"after":"before")}function is(d,v,B,E,F){if(d){v.doc.direction=="rtl"&&(F=-F);var Z=Ze(B,v.doc.direction);if(Z){var fe=F<0?$n(Z):Z[0],_e=F<0==(fe.level==1),ke=_e?"after":"before",Le;if(fe.level>0||v.doc.direction=="rtl"){var vt=hA(v,B);Le=F<0?B.text.length-1:0;var It=$u(v,vt,Le).top;Le=Te(function(Jt){return $u(v,vt,Jt).top==It},F<0==(fe.level==1)?fe.from:fe.to-1,Le),ke=="before"&&(Le=Br(B,Le,1))}else Le=F<0?fe.to:fe.from;return new rn(E,Le,ke)}}return new rn(E,F<0?B.text.length:0,F<0?"before":"after")}function Qa(d,v,B,E){var F=Ze(v,d.doc.direction);if(!F)return Qo(v,B,E);B.ch>=v.text.length?(B.ch=v.text.length,B.sticky="before"):B.ch<=0&&(B.ch=0,B.sticky="after");var Z=Ye(F,B.ch,B.sticky),fe=F[Z];if(d.doc.direction=="ltr"&&fe.level%2==0&&(E>0?fe.to>B.ch:fe.from<B.ch))return Qo(v,B,E);var _e=function(mi,Ci){return Br(v,mi instanceof rn?mi.ch:mi,Ci)},ke,Le=function(mi){return d.options.lineWrapping?(ke=ke||hA(d,v),Do(d,v,ke,mi)):{begin:0,end:v.text.length}},vt=Le(B.sticky=="before"?_e(B,-1):B.ch);if(d.doc.direction=="rtl"||fe.level==1){var It=fe.level==1==E<0,Jt=_e(B,It?1:-1);if(Jt!=null&&(It?Jt<=fe.to&&Jt<=vt.end:Jt>=fe.from&&Jt>=vt.begin)){var Ht=It?"before":"after";return new rn(B.line,Jt,Ht)}}var _n=function(mi,Ci,gi){for(var Di=function(Mr,rs){return rs?new rn(B.line,_e(Mr,1),"before"):new rn(B.line,Mr,"after")};mi>=0&&mi<F.length;mi+=Ci){var ar=F[mi],Yi=Ci>0==(ar.level!=1),Jr=Yi?gi.begin:_e(gi.end,-1);if(ar.from<=Jr&&Jr<ar.to||(Jr=Yi?ar.from:_e(ar.to,-1),gi.begin<=Jr&&Jr<gi.end))return Di(Jr,Yi)}},Rn=_n(Z+E,E,vt);if(Rn)return Rn;var oi=E>0?vt.end:_e(vt.begin,-1);return oi!=null&&!(E>0&&oi==v.text.length)&&(Rn=_n(E>0?0:F.length-1,E,Le(oi)),Rn)?Rn:null}var Os={selectAll:CA,singleSelection:function(d){return d.setSelection(d.getCursor("anchor"),d.getCursor("head"),Ot)},killLine:function(d){return Aa(d,function(v){if(v.empty()){var B=Mi(d.doc,v.head.line).text.length;return v.head.ch==B&&v.head.line<d.lastLine()?{from:v.head,to:rn(v.head.line+1,0)}:{from:v.head,to:rn(v.head.line,B)}}else return{from:v.from(),to:v.to()}})},deleteLine:function(d){return Aa(d,function(v){return{from:rn(v.from().line,0),to:Qi(d.doc,rn(v.to().line+1,0))}})},delLineLeft:function(d){return Aa(d,function(v){return{from:rn(v.from().line,0),to:v.from()}})},delWrappedLineLeft:function(d){return Aa(d,function(v){var B=d.charCoords(v.head,"div").top+5,E=d.coordsChar({left:0,top:B},"div");return{from:E,to:v.from()}})},delWrappedLineRight:function(d){return Aa(d,function(v){var B=d.charCoords(v.head,"div").top+5,E=d.coordsChar({left:d.display.lineDiv.offsetWidth+100,top:B},"div");return{from:v.from(),to:E}})},undo:function(d){return d.undo()},redo:function(d){return d.redo()},undoSelection:function(d){return d.undoSelection()},redoSelection:function(d){return d.redoSelection()},goDocStart:function(d){return d.extendSelection(rn(d.firstLine(),0))},goDocEnd:function(d){return d.extendSelection(rn(d.lastLine()))},goLineStart:function(d){return d.extendSelectionsBy(function(v){return Is(d,v.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(d){return d.extendSelectionsBy(function(v){return dc(d,v.head)},{origin:"+move",bias:1})},goLineEnd:function(d){return d.extendSelectionsBy(function(v){return YA(d,v.head.line)},{origin:"+move",bias:-1})},goLineRight:function(d){return d.extendSelectionsBy(function(v){var B=d.cursorCoords(v.head,"div").top+5;return d.coordsChar({left:d.display.lineDiv.offsetWidth+100,top:B},"div")},Kt)},goLineLeft:function(d){return d.extendSelectionsBy(function(v){var B=d.cursorCoords(v.head,"div").top+5;return d.coordsChar({left:0,top:B},"div")},Kt)},goLineLeftSmart:function(d){return d.extendSelectionsBy(function(v){var B=d.cursorCoords(v.head,"div").top+5,E=d.coordsChar({left:0,top:B},"div");return E.ch<d.getLine(E.line).search(/\S/)?dc(d,v.head):E},Kt)},goLineUp:function(d){return d.moveV(-1,"line")},goLineDown:function(d){return d.moveV(1,"line")},goPageUp:function(d){return d.moveV(-1,"page")},goPageDown:function(d){return d.moveV(1,"page")},goCharLeft:function(d){return d.moveH(-1,"char")},goCharRight:function(d){return d.moveH(1,"char")},goColumnLeft:function(d){return d.moveH(-1,"column")},goColumnRight:function(d){return d.moveH(1,"column")},goWordLeft:function(d){return d.moveH(-1,"word")},goGroupRight:function(d){return d.moveH(1,"group")},goGroupLeft:function(d){return d.moveH(-1,"group")},goWordRight:function(d){return d.moveH(1,"word")},delCharBefore:function(d){return d.deleteH(-1,"codepoint")},delCharAfter:function(d){return d.deleteH(1,"char")},delWordBefore:function(d){return d.deleteH(-1,"word")},delWordAfter:function(d){return d.deleteH(1,"word")},delGroupBefore:function(d){return d.deleteH(-1,"group")},delGroupAfter:function(d){return d.deleteH(1,"group")},indentAuto:function(d){return d.indentSelection("smart")},indentMore:function(d){return d.indentSelection("add")},indentLess:function(d){return d.indentSelection("subtract")},insertTab:function(d){return d.replaceSelection("	")},insertSoftTab:function(d){for(var v=[],B=d.listSelections(),E=d.options.tabSize,F=0;F<B.length;F++){var Z=B[F].from(),fe=Ke(d.getLine(Z.line),Z.ch,E);v.push(Wt(E-fe%E))}d.replaceSelections(v)},defaultTab:function(d){d.somethingSelected()?d.indentSelection("add"):d.execCommand("insertTab")},transposeChars:function(d){return Ga(d,function(){for(var v=d.listSelections(),B=[],E=0;E<v.length;E++)if(v[E].empty()){var F=v[E].head,Z=Mi(d.doc,F.line).text;if(Z){if(F.ch==Z.length&&(F=new rn(F.line,F.ch-1)),F.ch>0)F=new rn(F.line,F.ch+1),d.replaceRange(Z.charAt(F.ch-1)+Z.charAt(F.ch-2),rn(F.line,F.ch-2),F,"+transpose");else if(F.line>d.doc.first){var fe=Mi(d.doc,F.line-1).text;fe&&(F=new rn(F.line,1),d.replaceRange(Z.charAt(0)+d.doc.lineSeparator()+fe.charAt(fe.length-1),rn(F.line-1,fe.length-1),F,"+transpose"))}}B.push(new Xr(F,F))}d.setSelections(B)})},newlineAndIndent:function(d){return Ga(d,function(){for(var v=d.listSelections(),B=v.length-1;B>=0;B--)d.replaceRange(d.doc.lineSeparator(),v[B].anchor,v[B].head,"+input");v=d.listSelections();for(var E=0;E<v.length;E++)d.indentLine(v[E].from().line,null,!0);Wo(d)})},openLine:function(d){return d.replaceSelection(`
`,"start")},toggleOverwrite:function(d){return d.toggleOverwrite()}};function Is(d,v){var B=Mi(d.doc,v),E=Ri(B);return E!=B&&(v=$e(E)),is(!0,d,E,v,1)}function YA(d,v){var B=Mi(d.doc,v),E=Xi(B);return E!=B&&(v=$e(E)),is(!0,d,B,v,-1)}function dc(d,v){var B=Is(d,v.line),E=Mi(d.doc,B.line),F=Ze(E,d.doc.direction);if(!F||F[0].level==0){var Z=Math.max(B.ch,E.text.search(/\S/)),fe=v.line==B.line&&v.ch<=Z&&v.ch;return rn(B.line,fe?0:Z,B.sticky)}return B}function ql(d,v,B){if(typeof v=="string"&&(v=Os[v],!v))return!1;d.display.input.ensurePolled();var E=d.display.shift,F=!1;try{d.isReadOnly()&&(d.state.suppressEdits=!0),B&&(d.display.shift=!1),F=v(d)!=_t}finally{d.display.shift=E,d.state.suppressEdits=!1}return F}function Ih(d,v,B){for(var E=0;E<d.state.keyMaps.length;E++){var F=cr(v,d.state.keyMaps[E],B,d);if(F)return F}return d.options.extraKeys&&cr(v,d.options.extraKeys,B,d)||cr(v,d.options.keyMap,B,d)}var rh=new Re;function qA(d,v,B,E){var F=d.state.keySeq;if(F){if(Co(v))return"handled";if(/\'$/.test(v)?d.state.keySeq=null:rh.set(50,function(){d.state.keySeq==F&&(d.state.keySeq=null,d.display.input.reset())}),Pc(d,F+" "+v,B,E))return!0}return Pc(d,v,B,E)}function Pc(d,v,B,E){var F=Ih(d,v,E);return F=="multi"&&(d.state.keySeq=v),F=="handled"&&es(d,"keyHandled",d,v,B),(F=="handled"||F=="multi")&&(Wn(B),Bc(d)),!!F}function bl(d,v){var B=Lo(v,!0);return B?v.shiftKey&&!d.state.keySeq?qA(d,"Shift-"+B,v,function(E){return ql(d,E,!0)})||qA(d,B,v,function(E){if(typeof E=="string"?/^go[A-Z]/.test(E):E.motion)return ql(d,E)}):qA(d,B,v,function(E){return ql(d,E)}):!1}function HA(d,v,B){return qA(d,"'"+B+"'",v,function(E){return ql(d,E,!0)})}var xl=null;function Kc(d){var v=this;if(!(d.target&&d.target!=v.display.input.getField())&&(v.curOp.focus=nt(kt(v)),!en(v,d))){p&&C<11&&d.keyCode==27&&(d.returnValue=!1);var B=d.keyCode;v.display.shift=B==16||d.shiftKey;var E=bl(v,d);j&&(xl=E?B:null,!E&&B==88&&!lr&&($?d.metaKey:d.ctrlKey)&&v.replaceSelection("",null,"cut")),r&&!$&&!E&&B==46&&d.shiftKey&&!d.ctrlKey&&document.execCommand&&document.execCommand("cut"),B==18&&!/\bCodeMirror-crosshair\b/.test(v.display.lineDiv.className)&&_o(v)}}function _o(d){var v=d.display.lineDiv;be(v,"CodeMirror-crosshair");function B(E){(E.keyCode==18||!E.altKey)&&(Oe(v,"CodeMirror-crosshair"),Tt(document,"keyup",B),Tt(document,"mouseover",B))}mt(document,"keyup",B),mt(document,"mouseover",B)}function Xo(d){d.keyCode==16&&(this.doc.sel.shift=!1),en(this,d)}function hu(d){var v=this;if(!(d.target&&d.target!=v.display.input.getField())&&!(au(v.display,d)||en(v,d)||d.ctrlKey&&!d.altKey||$&&d.metaKey)){var B=d.keyCode,E=d.charCode;if(j&&B==xl){xl=null,Wn(d);return}if(!(j&&(!d.which||d.which<10)&&bl(v,d))){var F=String.fromCharCode(E??B);F!="\b"&&(HA(v,d,F)||v.display.input.onKeyPress(d))}}}var ys=400,_A=function(d,v,B){this.time=d,this.pos=v,this.button=B};_A.prototype.compare=function(d,v,B){return this.time+ys>d&&si(v,this.pos)==0&&B==this.button};var du,Ru;function Hl(d,v){var B=+new Date;return Ru&&Ru.compare(B,d,v)?(du=Ru=null,"triple"):du&&du.compare(B,d,v)?(Ru=new _A(B,d,v),du=null,"double"):(du=new _A(B,d,v),Ru=null,"single")}function Uc(d){var v=this,B=v.display;if(!(en(v,d)||B.activeTouch&&B.input.supportsTouch())){if(B.input.ensurePolled(),B.shift=d.shiftKey,au(B,d)){w||(B.scroller.draggable=!1,setTimeout(function(){return B.scroller.draggable=!0},100));return}if(!id(v,d)){var E=Na(v,d),F=ti(d),Z=E?Hl(E,F):"single";St(v).focus(),F==1&&v.state.selectingText&&v.state.selectingText(d),!(E&&tA(v,F,E,Z,d))&&(F==1?E?bA(v,E,Z,d):hi(d)==B.scroller&&Wn(d):F==2?(E&&QA(v.doc,E),setTimeout(function(){return B.input.focus()},20)):F==3&&(ye?v.display.input.onContextMenu(d):xh(v)))}}}function tA(d,v,B,E,F){var Z="Click";return E=="double"?Z="Double"+Z:E=="triple"&&(Z="Triple"+Z),Z=(v==1?"Left":v==2?"Middle":"Right")+Z,qA(d,ua(Z,F),F,function(fe){if(typeof fe=="string"&&(fe=Os[fe]),!fe)return!1;var _e=!1;try{d.isReadOnly()&&(d.state.suppressEdits=!0),_e=fe(d,B)!=_t}finally{d.state.suppressEdits=!1}return _e})}function Ya(d,v,B){var E=d.getOption("configureMouse"),F=E?E(d,v,B):{};if(F.unit==null){var Z=ae?B.shiftKey&&B.metaKey:B.altKey;F.unit=Z?"rectangle":v=="single"?"char":v=="double"?"word":"line"}return(F.extend==null||d.doc.extend)&&(F.extend=d.doc.extend||B.shiftKey),F.addNew==null&&(F.addNew=$?B.metaKey:B.ctrlKey),F.moveOnDrag==null&&(F.moveOnDrag=!($?B.altKey:B.ctrlKey)),F}function bA(d,v,B,E){p?setTimeout(Ut(Bs,d),0):d.curOp.focus=nt(kt(d));var F=Ya(d,B,E),Z=d.doc.sel,fe;d.options.dragDrop&&Wi&&!d.isReadOnly()&&B=="single"&&(fe=Z.contains(v))>-1&&(si((fe=Z.ranges[fe]).from(),v)<0||v.xRel>0)&&(si(fe.to(),v)>0||v.xRel<0)?zf(d,E,v,F):MA(d,E,v,F)}function zf(d,v,B,E){var F=d.display,Z=!1,fe=Zo(d,function(Le){w&&(F.scroller.draggable=!1),d.state.draggingText=!1,d.state.delayingBlurEvent&&(d.hasFocus()?d.state.delayingBlurEvent=!1:xh(d)),Tt(F.wrapper.ownerDocument,"mouseup",fe),Tt(F.wrapper.ownerDocument,"mousemove",_e),Tt(F.scroller,"dragstart",ke),Tt(F.scroller,"drop",fe),Z||(Wn(Le),E.addNew||QA(d.doc,B,null,null,E.extend),w&&!W||p&&C==9?setTimeout(function(){F.wrapper.ownerDocument.body.focus({preventScroll:!0}),F.input.focus()},20):F.input.focus())}),_e=function(Le){Z=Z||Math.abs(v.clientX-Le.clientX)+Math.abs(v.clientY-Le.clientY)>=10},ke=function(){return Z=!0};w&&(F.scroller.draggable=!0),d.state.draggingText=fe,fe.copy=!E.moveOnDrag,mt(F.wrapper.ownerDocument,"mouseup",fe),mt(F.wrapper.ownerDocument,"mousemove",_e),mt(F.scroller,"dragstart",ke),mt(F.scroller,"drop",fe),d.state.delayingBlurEvent=!0,setTimeout(function(){return F.input.focus()},20),F.scroller.dragDrop&&F.scroller.dragDrop()}function xA(d,v,B){if(B=="char")return new Xr(v,v);if(B=="word")return d.findWordAt(v);if(B=="line")return new Xr(rn(v.line,0),Qi(d.doc,rn(v.line+1,0)));var E=B(d,v);return new Xr(E.from,E.to)}function MA(d,v,B,E){p&&xh(d);var F=d.display,Z=d.doc;Wn(v);var fe,_e,ke=Z.sel,Le=ke.ranges;if(E.addNew&&!E.extend?(_e=Z.sel.contains(B),_e>-1?fe=Le[_e]:fe=new Xr(B,B)):(fe=Z.sel.primary(),_e=Z.sel.primIndex),E.unit=="rectangle")E.addNew||(fe=new Xr(B,B)),B=Na(d,v,!0,!0),_e=-1;else{var vt=xA(d,B,E.unit);E.extend?fe=Pr(fe,vt.anchor,vt.head,E.extend):fe=vt}E.addNew?_e==-1?(_e=Le.length,la(Z,ci(d,Le.concat([fe]),_e),{scroll:!1,origin:"*mouse"})):Le.length>1&&Le[_e].empty()&&E.unit=="char"&&!E.extend?(la(Z,ci(d,Le.slice(0,_e).concat(Le.slice(_e+1)),0),{scroll:!1,origin:"*mouse"}),ke=Z.sel):ki(Z,_e,fe,qt):(_e=0,la(Z,new Ca([fe],0),qt),ke=Z.sel);var It=B;function Jt(gi){if(si(It,gi)!=0)if(It=gi,E.unit=="rectangle"){for(var Di=[],ar=d.options.tabSize,Yi=Ke(Mi(Z,B.line).text,B.ch,ar),Jr=Ke(Mi(Z,gi.line).text,gi.ch,ar),Mr=Math.min(Yi,Jr),rs=Math.max(Yi,Jr),ca=Math.min(B.line,gi.line),qr=Math.min(d.lastLine(),Math.max(B.line,gi.line));ca<=qr;ca++){var vs=Mi(Z,ca).text,Cs=on(vs,Mr,ar);Mr==rs?Di.push(new Xr(rn(ca,Cs),rn(ca,Cs))):vs.length>Cs&&Di.push(new Xr(rn(ca,Cs),rn(ca,on(vs,rs,ar))))}Di.length||Di.push(new Xr(B,B)),la(Z,ci(d,ke.ranges.slice(0,_e).concat(Di),_e),{origin:"*mouse",scroll:!1}),d.scrollIntoView(gi)}else{var ha=fe,Vl=xA(d,gi,E.unit),Ts=ha.anchor,Ns;si(Vl.anchor,Ts)>0?(Ns=Vl.head,Ts=Ls(ha.from(),Vl.anchor)):(Ns=Vl.anchor,Ts=As(ha.to(),Vl.head));var Or=ke.ranges.slice(0);Or[_e]=Sa(d,new Xr(Qi(Z,Ts),Ns)),la(Z,ci(d,Or,_e),qt)}}var Ht=F.wrapper.getBoundingClientRect(),_n=0;function Rn(gi){var Di=++_n,ar=Na(d,gi,!0,E.unit=="rectangle");if(ar)if(si(ar,It)!=0){d.curOp.focus=nt(kt(d)),Jt(ar);var Yi=Ou(F,Z);(ar.line>=Yi.to||ar.line<Yi.from)&&setTimeout(Zo(d,function(){_n==Di&&Rn(gi)}),150)}else{var Jr=gi.clientY<Ht.top?-20:gi.clientY>Ht.bottom?20:0;Jr&&setTimeout(Zo(d,function(){_n==Di&&(F.scroller.scrollTop+=Jr,Rn(gi))}),50)}}function oi(gi){d.state.selectingText=!1,_n=1/0,gi&&(Wn(gi),F.input.focus()),Tt(F.wrapper.ownerDocument,"mousemove",mi),Tt(F.wrapper.ownerDocument,"mouseup",Ci),Z.history.lastSelOrigin=null}var mi=Zo(d,function(gi){gi.buttons===0||!ti(gi)?oi(gi):Rn(gi)}),Ci=Zo(d,oi);d.state.selectingText=Ci,mt(F.wrapper.ownerDocument,"mousemove",mi),mt(F.wrapper.ownerDocument,"mouseup",Ci)}function Sa(d,v){var B=v.anchor,E=v.head,F=Mi(d.doc,B.line);if(si(B,E)==0&&B.sticky==E.sticky)return v;var Z=Ze(F);if(!Z)return v;var fe=Ye(Z,B.ch,B.sticky),_e=Z[fe];if(_e.from!=B.ch&&_e.to!=B.ch)return v;var ke=fe+(_e.from==B.ch==(_e.level!=1)?0:1);if(ke==0||ke==Z.length)return v;var Le;if(E.line!=B.line)Le=(E.line-B.line)*(d.doc.direction=="ltr"?1:-1)>0;else{var vt=Ye(Z,E.ch,E.sticky),It=vt-fe||(E.ch-B.ch)*(_e.level==1?-1:1);vt==ke-1||vt==ke?Le=It<0:Le=It>0}var Jt=Z[ke+(Le?-1:0)],Ht=Le==(Jt.level==1),_n=Ht?Jt.from:Jt.to,Rn=Ht?"after":"before";return B.ch==_n&&B.sticky==Rn?v:new Xr(new rn(B.line,_n,Rn),E)}function nA(d,v,B,E){var F,Z;if(v.touches)F=v.touches[0].clientX,Z=v.touches[0].clientY;else try{F=v.clientX,Z=v.clientY}catch{return!1}if(F>=Math.floor(d.display.gutters.getBoundingClientRect().right))return!1;E&&Wn(v);var fe=d.display,_e=fe.lineDiv.getBoundingClientRect();if(Z>_e.bottom||!Mn(d,B))return er(v);Z-=_e.top-fe.viewOffset;for(var ke=0;ke<d.display.gutterSpecs.length;++ke){var Le=fe.gutters.childNodes[ke];if(Le&&Le.getBoundingClientRect().right>=F){var vt=Et(d.doc,Z),It=d.display.gutterSpecs[ke];return it(d,B,d,vt,It.className,v),er(v)}}}function id(d,v){return nA(d,v,"gutterClick",!0)}function jf(d,v){au(d.display,v)||of(d,v)||en(d,v,"contextmenu")||ye||d.display.input.onContextMenu(v)}function of(d,v){return Mn(d,"gutterContextMenu")?nA(d,v,"gutterContextMenu",!1):!1}function pm(d){d.display.wrapper.className=d.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+d.options.theme.replace(/(^|\s)\s*/g," cm-s-"),_h(d)}var fc={toString:function(){return"CodeMirror.Init"}},rd={},Nf={};function Gf(d){var v=d.optionHandlers;function B(E,F,Z,fe){d.defaults[E]=F,Z&&(v[E]=fe?function(_e,ke,Le){Le!=fc&&Z(_e,ke,Le)}:Z)}d.defineOption=B,d.Init=fc,B("value","",function(E,F){return E.setValue(F)},!0),B("mode",null,function(E,F){E.doc.modeOption=F,no(E)},!0),B("indentUnit",2,no,!0),B("indentWithTabs",!1),B("smartIndent",!0),B("tabSize",4,function(E){Nl(E),_h(E),Es(E)},!0),B("lineSeparator",null,function(E,F){if(E.doc.lineSep=F,!!F){var Z=[],fe=E.doc.first;E.doc.iter(function(ke){for(var Le=0;;){var vt=ke.text.indexOf(F,Le);if(vt==-1)break;Le=vt+F.length,Z.push(rn(fe,vt))}fe++});for(var _e=Z.length-1;_e>=0;_e--)Yl(E.doc,F,Z[_e],rn(Z[_e].line,Z[_e].ch+F.length))}}),B("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(E,F,Z){E.state.specialChars=new RegExp(F.source+(F.test("	")?"":"|	"),"g"),Z!=fc&&E.refresh()}),B("specialCharPlaceholder",qu,function(E){return E.refresh()},!0),B("electricChars",!0),B("inputStyle",ne?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),B("spellcheck",!1,function(E,F){return E.getInputField().spellcheck=F},!0),B("autocorrect",!1,function(E,F){return E.getInputField().autocorrect=F},!0),B("autocapitalize",!1,function(E,F){return E.getInputField().autocapitalize=F},!0),B("rtlMoveVisually",!G),B("wholeLineUpdateBefore",!0),B("theme","default",function(E){pm(E),uu(E)},!0),B("keyMap","default",function(E,F,Z){var fe=Pa(F),_e=Z!=fc&&Pa(Z);_e&&_e.detach&&_e.detach(E,fe),fe.attach&&fe.attach(E,_e||null)}),B("extraKeys",null),B("configureMouse",null),B("lineWrapping",!1,af,!0),B("gutters",[],function(E,F){E.display.gutterSpecs=ts(F,E.options.lineNumbers),uu(E)},!0),B("fixedGutter",!0,function(E,F){E.display.gutters.style.left=F?Go(E.display)+"px":"0",E.refresh()},!0),B("coverGutterNextToScrollbar",!1,function(E){return Fs(E)},!0),B("scrollbarStyle","native",function(E){Zd(E),Fs(E),E.display.scrollbars.setScrollTop(E.doc.scrollTop),E.display.scrollbars.setScrollLeft(E.doc.scrollLeft)},!0),B("lineNumbers",!1,function(E,F){E.display.gutterSpecs=ts(E.options.gutters,F),uu(E)},!0),B("firstLineNumber",1,uu,!0),B("lineNumberFormatter",function(E){return E},uu,!0),B("showCursorWhenSelecting",!1,Ec,!0),B("resetSelectionOnContextMenu",!0),B("lineWiseCopyCut",!0),B("pasteLinesPerSelection",!0),B("selectionsMayTouch",!1),B("readOnly",!1,function(E,F){F=="nocursor"&&(pA(E),E.display.input.blur()),E.display.input.readOnlyChanged(F)}),B("screenReaderLabel",null,function(E,F){F=F===""?null:F,E.display.input.screenReaderLabelChanged(F)}),B("disableInput",!1,function(E,F){F||E.display.input.reset()},!0),B("dragDrop",!0,W0),B("allowDropFileTypes",null),B("cursorBlinkRate",530),B("cursorScrollMargin",0),B("cursorHeight",1,Ec,!0),B("singleCursorHeightPerLine",!0,Ec,!0),B("workTime",100),B("workDelay",100),B("flattenSpans",!0,Nl,!0),B("addModeClass",!1,Nl,!0),B("pollInterval",100),B("undoDepth",200,function(E,F){return E.doc.history.undoDepth=F}),B("historyEventDelay",1250),B("viewportMargin",10,function(E){return E.refresh()},!0),B("maxHighlightLength",1e4,Nl,!0),B("moveInputWithCursor",!0,function(E,F){F||E.display.input.resetPosition()}),B("tabindex",null,function(E,F){return E.display.input.getField().tabIndex=F||""}),B("autofocus",null),B("direction","ltr",function(E,F){return E.doc.setDirection(F)},!0),B("phrases",null)}function W0(d,v,B){var E=B&&B!=fc;if(!v!=!E){var F=d.display.dragFunctions,Z=v?mt:Tt;Z(d.display.scroller,"dragstart",F.start),Z(d.display.scroller,"dragenter",F.enter),Z(d.display.scroller,"dragover",F.over),Z(d.display.scroller,"dragleave",F.leave),Z(d.display.scroller,"drop",F.drop)}}function af(d){d.options.lineWrapping?(be(d.display.wrapper,"CodeMirror-wrap"),d.display.sizer.style.minWidth="",d.display.sizerWidth=null):(Oe(d.display.wrapper,"CodeMirror-wrap"),qs(d)),qh(d),Es(d),_h(d),setTimeout(function(){return Fs(d)},100)}function Jo(d,v){var B=this;if(!(this instanceof Jo))return new Jo(d,v);this.options=v=v?Fe(v):{},Fe(rd,v,!1);var E=v.value;typeof E=="string"?E=new ut(E,v.mode,null,v.lineSeparator,v.direction):v.mode&&(E.modeOption=v.mode),this.doc=E;var F=new Jo.inputStyles[v.inputStyle](this),Z=this.display=new Id(d,E,F,v);Z.wrapper.CodeMirror=this,pm(this),v.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Zd(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Re,keySeq:null,specialChars:null},v.autofocus&&!ne&&Z.input.focus(),p&&C<11&&setTimeout(function(){return B.display.input.reset(!0)},20),Bp(this),Bt(),rl(this),this.curOp.forceUpdate=!0,Ac(this,E),v.autofocus&&!ne||this.hasFocus()?setTimeout(function(){B.hasFocus()&&!B.state.focused&&Ed(B)},20):pA(this);for(var fe in Nf)Nf.hasOwnProperty(fe)&&Nf[fe](this,v[fe],fc);ol(this),v.finishInit&&v.finishInit(this);for(var _e=0;_e<Th.length;++_e)Th[_e](this);zs(this),w&&v.lineWrapping&&getComputedStyle(Z.lineDiv).textRendering=="optimizelegibility"&&(Z.lineDiv.style.textRendering="auto")}Jo.defaults=rd,Jo.optionHandlers=Nf;function Bp(d){var v=d.display;mt(v.scroller,"mousedown",Zo(d,Uc)),p&&C<11?mt(v.scroller,"dblclick",Zo(d,function(ke){if(!en(d,ke)){var Le=Na(d,ke);if(!(!Le||id(d,ke)||au(d.display,ke))){Wn(ke);var vt=d.findWordAt(Le);QA(d.doc,vt.anchor,vt.head)}}})):mt(v.scroller,"dblclick",function(ke){return en(d,ke)||Wn(ke)}),mt(v.scroller,"contextmenu",function(ke){return jf(d,ke)}),mt(v.input.getField(),"contextmenu",function(ke){v.scroller.contains(ke.target)||jf(d,ke)});var B,E={end:0};function F(){v.activeTouch&&(B=setTimeout(function(){return v.activeTouch=null},1e3),E=v.activeTouch,E.end=+new Date)}function Z(ke){if(ke.touches.length!=1)return!1;var Le=ke.touches[0];return Le.radiusX<=1&&Le.radiusY<=1}function fe(ke,Le){if(Le.left==null)return!0;var vt=Le.left-ke.left,It=Le.top-ke.top;return vt*vt+It*It>20*20}mt(v.scroller,"touchstart",function(ke){if(!en(d,ke)&&!Z(ke)&&!id(d,ke)){v.input.ensurePolled(),clearTimeout(B);var Le=+new Date;v.activeTouch={start:Le,moved:!1,prev:Le-E.end<=300?E:null},ke.touches.length==1&&(v.activeTouch.left=ke.touches[0].pageX,v.activeTouch.top=ke.touches[0].pageY)}}),mt(v.scroller,"touchmove",function(){v.activeTouch&&(v.activeTouch.moved=!0)}),mt(v.scroller,"touchend",function(ke){var Le=v.activeTouch;if(Le&&!au(v,ke)&&Le.left!=null&&!Le.moved&&new Date-Le.start<300){var vt=d.coordsChar(v.activeTouch,"page"),It;!Le.prev||fe(Le,Le.prev)?It=new Xr(vt,vt):!Le.prev.prev||fe(Le,Le.prev.prev)?It=d.findWordAt(vt):It=new Xr(rn(vt.line,0),Qi(d.doc,rn(vt.line+1,0))),d.setSelection(It.anchor,It.head),d.focus(),Wn(ke)}F()}),mt(v.scroller,"touchcancel",F),mt(v.scroller,"scroll",function(){v.scroller.clientHeight&&(Zc(d,v.scroller.scrollTop),va(d,v.scroller.scrollLeft,!0),it(d,"scroll",d))}),mt(v.scroller,"mousewheel",function(ke){return $h(d,ke)}),mt(v.scroller,"DOMMouseScroll",function(ke){return $h(d,ke)}),mt(v.wrapper,"scroll",function(){return v.wrapper.scrollTop=v.wrapper.scrollLeft=0}),v.dragFunctions={enter:function(ke){en(d,ke)||Ei(ke)},over:function(ke){en(d,ke)||(yt(d,ke),Ei(ke))},start:function(ke){return xt(d,ke)},drop:Zo(d,ft),leave:function(ke){en(d,ke)||wt(d)}};var _e=v.input.getField();mt(_e,"keyup",function(ke){return Xo.call(d,ke)}),mt(_e,"keydown",Zo(d,Kc)),mt(_e,"keypress",Zo(d,hu)),mt(_e,"focus",function(ke){return Ed(d,ke)}),mt(_e,"blur",function(ke){return pA(d,ke)})}var Th=[];Jo.defineInitHook=function(d){return Th.push(d)};function Wf(d,v,B,E){var F=d.doc,Z;B==null&&(B="add"),B=="smart"&&(F.mode.indent?Z=$o(d,v).state:B="prev");var fe=d.options.tabSize,_e=Mi(F,v),ke=Ke(_e.text,null,fe);_e.stateAfter&&(_e.stateAfter=null);var Le=_e.text.match(/^\s*/)[0],vt;if(!E&&!/\S/.test(_e.text))vt=0,B="not";else if(B=="smart"&&(vt=F.mode.indent(Z,_e.text.slice(Le.length),_e.text),vt==_t||vt>150)){if(!E)return;B="prev"}B=="prev"?v>F.first?vt=Ke(Mi(F,v-1).text,null,fe):vt=0:B=="add"?vt=ke+d.options.indentUnit:B=="subtract"?vt=ke-d.options.indentUnit:typeof B=="number"&&(vt=ke+B),vt=Math.max(0,vt);var It="",Jt=0;if(d.options.indentWithTabs)for(var Ht=Math.floor(vt/fe);Ht;--Ht)Jt+=fe,It+="	";if(Jt<vt&&(It+=Wt(vt-Jt)),It!=Le)return Yl(F,It,rn(v,0),rn(v,Le.length),"+input"),_e.stateAfter=null,!0;for(var _n=0;_n<F.sel.ranges.length;_n++){var Rn=F.sel.ranges[_n];if(Rn.head.line==v&&Rn.head.ch<Le.length){var oi=rn(v,Le.length);ki(F,_n,new Xr(oi,oi));break}}}var iA=null;function kd(d){iA=d}function Xs(d,v,B,E,F){var Z=d.doc;d.display.shift=!1,E||(E=Z.sel);var fe=+new Date-200,_e=F=="paste"||d.state.pasteIncoming>fe,ke=To(v),Le=null;if(_e&&E.ranges.length>1)if(iA&&iA.text.join(`
`)==v){if(E.ranges.length%iA.text.length==0){Le=[];for(var vt=0;vt<iA.text.length;vt++)Le.push(Z.splitLines(iA.text[vt]))}}else ke.length==E.ranges.length&&d.options.pasteLinesPerSelection&&(Le=On(ke,function(mi){return[mi]}));for(var It=d.curOp.updateInput,Jt=E.ranges.length-1;Jt>=0;Jt--){var Ht=E.ranges[Jt],_n=Ht.from(),Rn=Ht.to();Ht.empty()&&(B&&B>0?_n=rn(_n.line,_n.ch-B):d.state.overwrite&&!_e?Rn=rn(Rn.line,Math.min(Mi(Z,Rn.line).text.length,Rn.ch+$n(ke).length)):_e&&iA&&iA.lineWise&&iA.text.join(`
`)==ke.join(`
`)&&(_n=Rn=rn(_n.line,0)));var oi={from:_n,to:Rn,text:Le?Le[Jt%Le.length]:ke,origin:F||(_e?"paste":d.state.cutIncoming>fe?"cut":"+input")};Zs(d.doc,oi),es(d,"inputRead",d,oi)}v&&!_e&&Qf(d,v),Wo(d),d.curOp.updateInput<2&&(d.curOp.updateInput=It),d.curOp.typing=!0,d.state.pasteIncoming=d.state.cutIncoming=-1}function cs(d,v){var B=d.clipboardData&&d.clipboardData.getData("Text");if(B)return d.preventDefault(),!v.isReadOnly()&&!v.options.disableInput&&v.hasFocus()&&Ga(v,function(){return Xs(v,B,0,null,"paste")}),!0}function Qf(d,v){if(!(!d.options.electricChars||!d.options.smartIndent))for(var B=d.doc.sel,E=B.ranges.length-1;E>=0;E--){var F=B.ranges[E];if(!(F.head.ch>100||E&&B.ranges[E-1].head.line==F.head.line)){var Z=d.getModeAt(F.head),fe=!1;if(Z.electricChars){for(var _e=0;_e<Z.electricChars.length;_e++)if(v.indexOf(Z.electricChars.charAt(_e))>-1){fe=Wf(d,F.head.line,"smart");break}}else Z.electricInput&&Z.electricInput.test(Mi(d.doc,F.head.line).text.slice(0,F.head.ch))&&(fe=Wf(d,F.head.line,"smart"));fe&&es(d,"electricInput",d,F.head.line)}}}function Op(d){for(var v=[],B=[],E=0;E<d.doc.sel.ranges.length;E++){var F=d.doc.sel.ranges[E].head.line,Z={anchor:rn(F,0),head:rn(F+1,0)};B.push(Z),v.push(d.getRange(Z.anchor,Z.head))}return{text:v,ranges:B}}function Yf(d,v,B,E){d.setAttribute("autocorrect",B?"on":"off"),d.setAttribute("autocapitalize",E?"on":"off"),d.setAttribute("spellcheck",!!v)}function sf(){var d=xe("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),v=xe("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return w?d.style.width="1000px":d.setAttribute("wrap","off"),J&&(d.style.border="1px solid black"),v}function Dd(d){var v=d.optionHandlers,B=d.helpers={};d.prototype={constructor:d,focus:function(){St(this).focus(),this.display.input.focus()},setOption:function(E,F){var Z=this.options,fe=Z[E];Z[E]==F&&E!="mode"||(Z[E]=F,v.hasOwnProperty(E)&&Zo(this,v[E])(this,F,fe),it(this,"optionChange",this,E))},getOption:function(E){return this.options[E]},getDoc:function(){return this.doc},addKeyMap:function(E,F){this.state.keyMaps[F?"push":"unshift"](Pa(E))},removeKeyMap:function(E){for(var F=this.state.keyMaps,Z=0;Z<F.length;++Z)if(F[Z]==E||F[Z].name==E)return F.splice(Z,1),!0},addOverlay:gr(function(E,F){var Z=E.token?E:d.getMode(this.options,E);if(Z.startState)throw new Error("Overlays may not be stateful.");Bn(this.state.overlays,{mode:Z,modeSpec:E,opaque:F&&F.opaque,priority:F&&F.priority||0},function(fe){return fe.priority}),this.state.modeGen++,Es(this)}),removeOverlay:gr(function(E){for(var F=this.state.overlays,Z=0;Z<F.length;++Z){var fe=F[Z].modeSpec;if(fe==E||typeof E=="string"&&fe.name==E){F.splice(Z,1),this.state.modeGen++,Es(this);return}}}),indentLine:gr(function(E,F,Z){typeof F!="string"&&typeof F!="number"&&(F==null?F=this.options.smartIndent?"smart":"prev":F=F?"add":"subtract"),xn(this.doc,E)&&Wf(this,E,F,Z)}),indentSelection:gr(function(E){for(var F=this.doc.sel.ranges,Z=-1,fe=0;fe<F.length;fe++){var _e=F[fe];if(_e.empty())_e.head.line>Z&&(Wf(this,_e.head.line,E,!0),Z=_e.head.line,fe==this.doc.sel.primIndex&&Wo(this));else{var ke=_e.from(),Le=_e.to(),vt=Math.max(Z,ke.line);Z=Math.min(this.lastLine(),Le.line-(Le.ch?0:1))+1;for(var It=vt;It<Z;++It)Wf(this,It,E);var Jt=this.doc.sel.ranges;ke.ch==0&&F.length==Jt.length&&Jt[fe].from().ch>0&&ki(this.doc,fe,new Xr(ke,Jt[fe].to()),Ot)}}}),getTokenAt:function(E,F){return Ul(this,E,F)},getLineTokens:function(E,F){return Ul(this,rn(E),F,!0)},getTokenTypeAt:function(E){E=Qi(this.doc,E);var F=Ys(this,Mi(this.doc,E.line)),Z=0,fe=(F.length-1)/2,_e=E.ch,ke;if(_e==0)ke=F[2];else for(;;){var Le=Z+fe>>1;if((Le?F[Le*2-1]:0)>=_e)fe=Le;else if(F[Le*2+1]<_e)Z=Le+1;else{ke=F[Le*2+2];break}}var vt=ke?ke.indexOf("overlay "):-1;return vt<0?ke:vt==0?null:ke.slice(0,vt-1)},getModeAt:function(E){var F=this.doc.mode;return F.innerMode?d.innerMode(F,this.getTokenAt(E).state).mode:F},getHelper:function(E,F){return this.getHelpers(E,F)[0]},getHelpers:function(E,F){var Z=[];if(!B.hasOwnProperty(F))return Z;var fe=B[F],_e=this.getModeAt(E);if(typeof _e[F]=="string")fe[_e[F]]&&Z.push(fe[_e[F]]);else if(_e[F])for(var ke=0;ke<_e[F].length;ke++){var Le=fe[_e[F][ke]];Le&&Z.push(Le)}else _e.helperType&&fe[_e.helperType]?Z.push(fe[_e.helperType]):fe[_e.name]&&Z.push(fe[_e.name]);for(var vt=0;vt<fe._global.length;vt++){var It=fe._global[vt];It.pred(_e,this)&&He(Z,It.val)==-1&&Z.push(It.val)}return Z},getStateAfter:function(E,F){var Z=this.doc;return E=Qu(Z,E??Z.first+Z.size-1),$o(this,E+1,F).state},cursorCoords:function(E,F){var Z,fe=this.doc.sel.primary();return E==null?Z=fe.head:typeof E=="object"?Z=Qi(this.doc,E):Z=E?fe.from():fe.to(),vn(this,Z,F||"page")},charCoords:function(E,F){return Sn(this,Qi(this.doc,E),F||"page")},coordsChar:function(E,F){return E=Zt(this,E,F||"page"),Oo(this,E.left,E.top)},lineAtHeight:function(E,F){return E=Zt(this,{top:E,left:0},F||"page").top,Et(this.doc,E+this.display.viewOffset)},heightAtLine:function(E,F,Z){var fe=!1,_e;if(typeof E=="number"){var ke=this.doc.first+this.doc.size-1;E<this.doc.first?E=this.doc.first:E>ke&&(E=ke,fe=!0),_e=Mi(this.doc,E)}else _e=E;return zl(this,_e,{top:0,left:0},F||"page",Z||fe).top+(fe?this.doc.height-No(_e):0)},defaultTextHeight:function(){return wu(this.display)},defaultCharWidth:function(){return Su(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(E,F,Z,fe,_e){var ke=this.display;E=vn(this,Qi(this.doc,E));var Le=E.bottom,vt=E.left;if(F.style.position="absolute",F.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(F),ke.sizer.appendChild(F),fe=="over")Le=E.top;else if(fe=="above"||fe=="near"){var It=Math.max(ke.wrapper.clientHeight,this.doc.height),Jt=Math.max(ke.sizer.clientWidth,ke.lineSpace.clientWidth);(fe=="above"||E.bottom+F.offsetHeight>It)&&E.top>F.offsetHeight?Le=E.top-F.offsetHeight:E.bottom+F.offsetHeight<=It&&(Le=E.bottom),vt+F.offsetWidth>Jt&&(vt=Jt-F.offsetWidth)}F.style.top=Le+"px",F.style.left=F.style.right="",_e=="right"?(vt=ke.sizer.clientWidth-F.offsetWidth,F.style.right="0px"):(_e=="left"?vt=0:_e=="middle"&&(vt=(ke.sizer.clientWidth-F.offsetWidth)/2),F.style.left=vt+"px"),Z&&Hh(this,{left:vt,top:Le,right:vt+F.offsetWidth,bottom:Le+F.offsetHeight})},triggerOnKeyDown:gr(Kc),triggerOnKeyPress:gr(hu),triggerOnKeyUp:Xo,triggerOnMouseDown:gr(Uc),execCommand:function(E){if(Os.hasOwnProperty(E))return Os[E].call(null,this)},triggerElectric:gr(function(E){Qf(this,E)}),findPosH:function(E,F,Z,fe){var _e=1;F<0&&(_e=-1,F=-F);for(var ke=Qi(this.doc,E),Le=0;Le<F&&(ke=pr(this.doc,ke,_e,Z,fe),!ke.hitSide);++Le);return ke},moveH:gr(function(E,F){var Z=this;this.extendSelectionsBy(function(fe){return Z.display.shift||Z.doc.extend||fe.empty()?pr(Z.doc,fe.head,E,F,Z.options.rtlMoveVisually):E<0?fe.from():fe.to()},Kt)}),deleteH:gr(function(E,F){var Z=this.doc.sel,fe=this.doc;Z.somethingSelected()?fe.replaceSelection("",null,"+delete"):Aa(this,function(_e){var ke=pr(fe,_e.head,E,F,!1);return E<0?{from:ke,to:_e.head}:{from:_e.head,to:ke}})}),findPosV:function(E,F,Z,fe){var _e=1,ke=fe;F<0&&(_e=-1,F=-F);for(var Le=Qi(this.doc,E),vt=0;vt<F;++vt){var It=vn(this,Le,"div");if(ke==null?ke=It.left:It.left=ke,Le=lf(this,It,_e,Z),Le.hitSide)break}return Le},moveV:gr(function(E,F){var Z=this,fe=this.doc,_e=[],ke=!this.display.shift&&!fe.extend&&fe.sel.somethingSelected();if(fe.extendSelectionsBy(function(vt){if(ke)return E<0?vt.from():vt.to();var It=vn(Z,vt.head,"div");vt.goalColumn!=null&&(It.left=vt.goalColumn),_e.push(It.left);var Jt=lf(Z,It,E,F);return F=="page"&&vt==fe.sel.primary()&&kl(Z,Sn(Z,Jt,"div").top-It.top),Jt},Kt),_e.length)for(var Le=0;Le<fe.sel.ranges.length;Le++)fe.sel.ranges[Le].goalColumn=_e[Le]}),findWordAt:function(E){var F=this.doc,Z=Mi(F,E.line).text,fe=E.ch,_e=E.ch;if(Z){var ke=this.getHelper(E,"wordChars");(E.sticky=="before"||_e==Z.length)&&fe?--fe:++_e;for(var Le=Z.charAt(fe),vt=je(Le,ke)?function(It){return je(It,ke)}:/\s/.test(Le)?function(It){return/\s/.test(It)}:function(It){return!/\s/.test(It)&&!je(It)};fe>0&&vt(Z.charAt(fe-1));)--fe;for(;_e<Z.length&&vt(Z.charAt(_e));)++_e}return new Xr(rn(E.line,fe),rn(E.line,_e))},toggleOverwrite:function(E){E!=null&&E==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?be(this.display.cursorDiv,"CodeMirror-overwrite"):Oe(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==nt(kt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:gr(function(E,F){sa(this,E,F)}),getScrollInfo:function(){var E=this.display.scroller;return{left:E.scrollLeft,top:E.scrollTop,height:E.scrollHeight-KA(this)-this.display.barHeight,width:E.scrollWidth-KA(this)-this.display.barWidth,clientHeight:Qh(this),clientWidth:Vu(this)}},scrollIntoView:gr(function(E,F){E==null?(E={from:this.doc.sel.primary().head,to:null},F==null&&(F=this.options.cursorScrollMargin)):typeof E=="number"?E={from:rn(E,0),to:null}:E.from==null&&(E={from:E,to:null}),E.to||(E.to=E.from),E.margin=F||0,E.from.line!=null?FA(this,E):Oc(this,E.from,E.to,E.margin)}),setSize:gr(function(E,F){var Z=this,fe=function(ke){return typeof ke=="number"||/^\d+$/.test(String(ke))?ke+"px":ke};E!=null&&(this.display.wrapper.style.width=fe(E)),F!=null&&(this.display.wrapper.style.height=fe(F)),this.options.lineWrapping&&Bo(this);var _e=this.display.viewFrom;this.doc.iter(_e,this.display.viewTo,function(ke){if(ke.widgets){for(var Le=0;Le<ke.widgets.length;Le++)if(ke.widgets[Le].noHScroll){Zu(Z,_e,"widget");break}}++_e}),this.curOp.forceUpdate=!0,it(this,"refresh",this)}),operation:function(E){return Ga(this,E)},startOperation:function(){return rl(this)},endOperation:function(){return zs(this)},refresh:gr(function(){var E=this.display.cachedTextHeight;Es(this),this.curOp.forceUpdate=!0,_h(this),sa(this,this.doc.scrollLeft,this.doc.scrollTop),nh(this.display),(E==null||Math.abs(E-wu(this.display))>.5||this.options.lineWrapping)&&qh(this),it(this,"refresh",this)}),swapDoc:gr(function(E){var F=this.doc;return F.cm=null,this.state.selectingText&&this.state.selectingText(),Ac(this,E),_h(this),this.display.input.reset(),sa(this,E.scrollLeft,E.scrollTop),this.curOp.forceScroll=!0,es(this,"swapDoc",this,F),F}),phrase:function(E){var F=this.options.phrases;return F&&Object.prototype.hasOwnProperty.call(F,E)?F[E]:E},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ii(d),d.registerHelper=function(E,F,Z){B.hasOwnProperty(E)||(B[E]=d[E]={_global:[]}),B[E][F]=Z},d.registerGlobalHelper=function(E,F,Z,fe){d.registerHelper(E,F,fe),B[E]._global.push({pred:Z,val:fe})}}function pr(d,v,B,E,F){var Z=v,fe=B,_e=Mi(d,v.line),ke=F&&d.direction=="rtl"?-B:B;function Le(){var Ci=v.line+ke;return Ci<d.first||Ci>=d.first+d.size?!1:(v=new rn(Ci,v.ch,v.sticky),_e=Mi(d,Ci))}function vt(Ci){var gi;if(E=="codepoint"){var Di=_e.text.charCodeAt(v.ch+(B>0?0:-1));if(isNaN(Di))gi=null;else{var ar=B>0?Di>=55296&&Di<56320:Di>=56320&&Di<57343;gi=new rn(v.line,Math.max(0,Math.min(_e.text.length,v.ch+B*(ar?2:1))),-B)}}else F?gi=Qa(d.cm,_e,v,B):gi=Qo(_e,v,B);if(gi==null)if(!Ci&&Le())v=is(F,d.cm,_e,v.line,ke);else return!1;else v=gi;return!0}if(E=="char"||E=="codepoint")vt();else if(E=="column")vt(!0);else if(E=="word"||E=="group")for(var It=null,Jt=E=="group",Ht=d.cm&&d.cm.getHelper(v,"wordChars"),_n=!0;!(B<0&&!vt(!_n));_n=!1){var Rn=_e.text.charAt(v.ch)||`
`,oi=je(Rn,Ht)?"w":Jt&&Rn==`
`?"n":!Jt||/\s/.test(Rn)?null:"p";if(Jt&&!_n&&!oi&&(oi="s"),It&&It!=oi){B<0&&(B=1,vt(),v.sticky="after");break}if(oi&&(It=oi),B>0&&!vt(!_n))break}var mi=Wa(d,v,Z,fe,!0);return eo(Z,mi)&&(mi.hitSide=!0),mi}function lf(d,v,B,E){var F=d.doc,Z=v.left,fe;if(E=="page"){var _e=Math.min(d.display.wrapper.clientHeight,St(d).innerHeight||F(d).documentElement.clientHeight),ke=Math.max(_e-.5*wu(d.display),3);fe=(B>0?v.bottom:v.top)+B*ke}else E=="line"&&(fe=B>0?v.bottom+3:v.top-3);for(var Le;Le=Oo(d,Z,fe),!!Le.outside;){if(B<0?fe<=0:fe>=F.height){Le.hitSide=!0;break}fe+=B*5}return Le}var ea=function(d){this.cm=d,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Re,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};ea.prototype.init=function(d){var v=this,B=this,E=B.cm,F=B.div=d.lineDiv;F.contentEditable=!0,Yf(F,E.options.spellcheck,E.options.autocorrect,E.options.autocapitalize);function Z(_e){for(var ke=_e.target;ke;ke=ke.parentNode){if(ke==F)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(ke.className))break}return!1}mt(F,"paste",function(_e){!Z(_e)||en(E,_e)||cs(_e,E)||C<=11&&setTimeout(Zo(E,function(){return v.updateFromDOM()}),20)}),mt(F,"compositionstart",function(_e){v.composing={data:_e.data,done:!1}}),mt(F,"compositionupdate",function(_e){v.composing||(v.composing={data:_e.data,done:!1})}),mt(F,"compositionend",function(_e){v.composing&&(_e.data!=v.composing.data&&v.readFromDOMSoon(),v.composing.done=!0)}),mt(F,"touchstart",function(){return B.forceCompositionEnd()}),mt(F,"input",function(){v.composing||v.readFromDOMSoon()});function fe(_e){if(!(!Z(_e)||en(E,_e))){if(E.somethingSelected())kd({lineWise:!1,text:E.getSelections()}),_e.type=="cut"&&E.replaceSelection("",null,"cut");else if(E.options.lineWiseCopyCut){var ke=Op(E);kd({lineWise:!0,text:ke.text}),_e.type=="cut"&&E.operation(function(){E.setSelections(ke.ranges,0,Ot),E.replaceSelection("",null,"cut")})}else return;if(_e.clipboardData){_e.clipboardData.clearData();var Le=iA.text.join(`
`);if(_e.clipboardData.setData("Text",Le),_e.clipboardData.getData("Text")==Le){_e.preventDefault();return}}var vt=sf(),It=vt.firstChild;Yf(It),E.display.lineSpace.insertBefore(vt,E.display.lineSpace.firstChild),It.value=iA.text.join(`
`);var Jt=nt(gt(F));tt(It),setTimeout(function(){E.display.lineSpace.removeChild(vt),Jt.focus(),Jt==F&&B.showPrimarySelection()},50)}}mt(F,"copy",fe),mt(F,"cut",fe)},ea.prototype.screenReaderLabelChanged=function(d){d?this.div.setAttribute("aria-label",d):this.div.removeAttribute("aria-label")},ea.prototype.prepareSelection=function(){var d=bh(this.cm,!1);return d.focus=nt(gt(this.div))==this.div,d},ea.prototype.showSelection=function(d,v){!d||!this.cm.display.view.length||((d.focus||v)&&this.showPrimarySelection(),this.showMultipleSelections(d))},ea.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ea.prototype.showPrimarySelection=function(){var d=this.getSelection(),v=this.cm,B=v.doc.sel.primary(),E=B.from(),F=B.to();if(v.display.viewTo==v.display.viewFrom||E.line>=v.display.viewTo||F.line<v.display.viewFrom){d.removeAllRanges();return}var Z=al(v,d.anchorNode,d.anchorOffset),fe=al(v,d.focusNode,d.focusOffset);if(!(Z&&!Z.bad&&fe&&!fe.bad&&si(Ls(Z,fe),E)==0&&si(As(Z,fe),F)==0)){var _e=v.display.view,ke=E.line>=v.display.viewFrom&&kh(v,E)||{node:_e[0].measure.map[2],offset:0},Le=F.line<v.display.viewTo&&kh(v,F);if(!Le){var vt=_e[_e.length-1].measure,It=vt.maps?vt.maps[vt.maps.length-1]:vt.map;Le={node:It[It.length-1],offset:It[It.length-2]-It[It.length-3]}}if(!ke||!Le){d.removeAllRanges();return}var Jt=d.rangeCount&&d.getRangeAt(0),Ht;try{Ht=st(ke.node,ke.offset,Le.offset,Le.node)}catch{}Ht&&(!r&&v.state.focused?(d.collapse(ke.node,ke.offset),Ht.collapsed||(d.removeAllRanges(),d.addRange(Ht))):(d.removeAllRanges(),d.addRange(Ht)),Jt&&d.anchorNode==null?d.addRange(Jt):r&&this.startGracePeriod()),this.rememberSelection()}},ea.prototype.startGracePeriod=function(){var d=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){d.gracePeriod=!1,d.selectionChanged()&&d.cm.operation(function(){return d.cm.curOp.selectionChanged=!0})},20)},ea.prototype.showMultipleSelections=function(d){Ve(this.cm.display.cursorDiv,d.cursors),Ve(this.cm.display.selectionDiv,d.selection)},ea.prototype.rememberSelection=function(){var d=this.getSelection();this.lastAnchorNode=d.anchorNode,this.lastAnchorOffset=d.anchorOffset,this.lastFocusNode=d.focusNode,this.lastFocusOffset=d.focusOffset},ea.prototype.selectionInEditor=function(){var d=this.getSelection();if(!d.rangeCount)return!1;var v=d.getRangeAt(0).commonAncestorContainer;return Ct(this.div,v)},ea.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||nt(gt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},ea.prototype.blur=function(){this.div.blur()},ea.prototype.getField=function(){return this.div},ea.prototype.supportsTouch=function(){return!0},ea.prototype.receivedFocus=function(){var d=this,v=this;this.selectionInEditor()?setTimeout(function(){return d.pollSelection()},20):Ga(this.cm,function(){return v.cm.curOp.selectionChanged=!0});function B(){v.cm.state.focused&&(v.pollSelection(),v.polling.set(v.cm.options.pollInterval,B))}this.polling.set(this.cm.options.pollInterval,B)},ea.prototype.selectionChanged=function(){var d=this.getSelection();return d.anchorNode!=this.lastAnchorNode||d.anchorOffset!=this.lastAnchorOffset||d.focusNode!=this.lastFocusNode||d.focusOffset!=this.lastFocusOffset},ea.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var d=this.getSelection(),v=this.cm;if(oe&&U&&this.cm.display.gutterSpecs.length&&mm(d.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var B=al(v,d.anchorNode,d.anchorOffset),E=al(v,d.focusNode,d.focusOffset);B&&E&&Ga(v,function(){la(v.doc,GA(B,E),Ot),(B.bad||E.bad)&&(v.curOp.selectionChanged=!0)})}}},ea.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var d=this.cm,v=d.display,B=d.doc.sel.primary(),E=B.from(),F=B.to();if(E.ch==0&&E.line>d.firstLine()&&(E=rn(E.line-1,Mi(d.doc,E.line-1).length)),F.ch==Mi(d.doc,F.line).text.length&&F.line<d.lastLine()&&(F=rn(F.line+1,0)),E.line<v.viewFrom||F.line>v.viewTo-1)return!1;var Z,fe,_e;E.line==v.viewFrom||(Z=Vs(d,E.line))==0?(fe=$e(v.view[0].line),_e=v.view[0].node):(fe=$e(v.view[Z].line),_e=v.view[Z-1].node.nextSibling);var ke=Vs(d,F.line),Le,vt;if(ke==v.view.length-1?(Le=v.viewTo-1,vt=v.lineDiv.lastChild):(Le=$e(v.view[ke+1].line)-1,vt=v.view[ke+1].node.previousSibling),!_e)return!1;for(var It=d.doc.splitLines(fu(d,_e,vt,fe,Le)),Jt=us(d.doc,rn(fe,0),rn(Le,Mi(d.doc,Le).text.length));It.length>1&&Jt.length>1;)if($n(It)==$n(Jt))It.pop(),Jt.pop(),Le--;else if(It[0]==Jt[0])It.shift(),Jt.shift(),fe++;else break;for(var Ht=0,_n=0,Rn=It[0],oi=Jt[0],mi=Math.min(Rn.length,oi.length);Ht<mi&&Rn.charCodeAt(Ht)==oi.charCodeAt(Ht);)++Ht;for(var Ci=$n(It),gi=$n(Jt),Di=Math.min(Ci.length-(It.length==1?Ht:0),gi.length-(Jt.length==1?Ht:0));_n<Di&&Ci.charCodeAt(Ci.length-_n-1)==gi.charCodeAt(gi.length-_n-1);)++_n;if(It.length==1&&Jt.length==1&&fe==E.line)for(;Ht&&Ht>E.ch&&Ci.charCodeAt(Ci.length-_n-1)==gi.charCodeAt(gi.length-_n-1);)Ht--,_n++;It[It.length-1]=Ci.slice(0,Ci.length-_n).replace(/^\u200b+/,""),It[0]=It[0].slice(Ht).replace(/\u200b+$/,"");var ar=rn(fe,Ht),Yi=rn(Le,Jt.length?$n(Jt).length-_n:0);if(It.length>1||It[0]||si(ar,Yi))return Yl(d.doc,It,ar,Yi,"+input"),!0},ea.prototype.ensurePolled=function(){this.forceCompositionEnd()},ea.prototype.reset=function(){this.forceCompositionEnd()},ea.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ea.prototype.readFromDOMSoon=function(){var d=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(d.readDOMTimeout=null,d.composing)if(d.composing.done)d.composing=null;else return;d.updateFromDOM()},80))},ea.prototype.updateFromDOM=function(){var d=this;(this.cm.isReadOnly()||!this.pollContent())&&Ga(this.cm,function(){return Es(d.cm)})},ea.prototype.setUneditable=function(d){d.contentEditable="false"},ea.prototype.onKeyPress=function(d){d.charCode==0||this.composing||(d.preventDefault(),this.cm.isReadOnly()||Zo(this.cm,Xs)(this.cm,String.fromCharCode(d.charCode==null?d.keyCode:d.charCode),0))},ea.prototype.readOnlyChanged=function(d){this.div.contentEditable=String(d!="nocursor")},ea.prototype.onContextMenu=function(){},ea.prototype.resetPosition=function(){},ea.prototype.needsContentAttribute=!0;function kh(d,v){var B=Vd(d,v.line);if(!B||B.hidden)return null;var E=Mi(d.doc,v.line),F=Yh(B,E,v.line),Z=Ze(E,d.doc.direction),fe="left";if(Z){var _e=Ye(Z,v.ch);fe=_e%2?"right":"left"}var ke=Kf(F.map,v.ch,fe);return ke.offset=ke.collapse=="right"?ke.end:ke.start,ke}function mm(d){for(var v=d;v;v=v.parentNode)if(/CodeMirror-gutter-wrapper/.test(v.className))return!0;return!1}function VA(d,v){return v&&(d.bad=!0),d}function fu(d,v,B,E,F){var Z="",fe=!1,_e=d.doc.lineSeparator(),ke=!1;function Le(Ht){return function(_n){return _n.id==Ht}}function vt(){fe&&(Z+=_e,ke&&(Z+=_e),fe=ke=!1)}function It(Ht){Ht&&(vt(),Z+=Ht)}function Jt(Ht){if(Ht.nodeType==1){var _n=Ht.getAttribute("cm-text");if(_n){It(_n);return}var Rn=Ht.getAttribute("cm-marker"),oi;if(Rn){var mi=d.findMarks(rn(E,0),rn(F+1,0),Le(+Rn));mi.length&&(oi=mi[0].find(0))&&It(us(d.doc,oi.from,oi.to).join(_e));return}if(Ht.getAttribute("contenteditable")=="false")return;var Ci=/^(pre|div|p|li|table|br)$/i.test(Ht.nodeName);if(!/^br$/i.test(Ht.nodeName)&&Ht.textContent.length==0)return;Ci&&vt();for(var gi=0;gi<Ht.childNodes.length;gi++)Jt(Ht.childNodes[gi]);/^(pre|p)$/i.test(Ht.nodeName)&&(ke=!0),Ci&&(fe=!0)}else Ht.nodeType==3&&It(Ht.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Jt(v),v!=B;)v=v.nextSibling,ke=!1;return Z}function al(d,v,B){var E;if(v==d.display.lineDiv){if(E=d.display.lineDiv.childNodes[B],!E)return VA(d.clipPos(rn(d.display.viewTo-1)),!0);v=null,B=0}else for(E=v;;E=E.parentNode){if(!E||E==d.display.lineDiv)return null;if(E.parentNode&&E.parentNode==d.display.lineDiv)break}for(var F=0;F<d.display.view.length;F++){var Z=d.display.view[F];if(Z.node==E)return gm(Z,v,B)}}function gm(d,v,B){var E=d.text.firstChild,F=!1;if(!v||!Ct(E,v))return VA(rn($e(d.line),0),!0);if(v==E&&(F=!0,v=E.childNodes[B],B=0,!v)){var Z=d.rest?$n(d.rest):d.line;return VA(rn($e(Z),Z.text.length),F)}var fe=v.nodeType==3?v:null,_e=v;for(!fe&&v.childNodes.length==1&&v.firstChild.nodeType==3&&(fe=v.firstChild,B&&(B=fe.nodeValue.length));_e.parentNode!=E;)_e=_e.parentNode;var ke=d.measure,Le=ke.maps;function vt(oi,mi,Ci){for(var gi=-1;gi<(Le?Le.length:0);gi++)for(var Di=gi<0?ke.map:Le[gi],ar=0;ar<Di.length;ar+=3){var Yi=Di[ar+2];if(Yi==oi||Yi==mi){var Jr=$e(gi<0?d.line:d.rest[gi]),Mr=Di[ar]+Ci;return(Ci<0||Yi!=oi)&&(Mr=Di[ar+(Ci?1:0)]),rn(Jr,Mr)}}}var It=vt(fe,_e,B);if(It)return VA(It,F);for(var Jt=_e.nextSibling,Ht=fe?fe.nodeValue.length-B:0;Jt;Jt=Jt.nextSibling){if(It=vt(Jt,Jt.firstChild,0),It)return VA(rn(It.line,It.ch-Ht),F);Ht+=Jt.textContent.length}for(var _n=_e.previousSibling,Rn=B;_n;_n=_n.previousSibling){if(It=vt(_n,_n.firstChild,-1),It)return VA(rn(It.line,It.ch+Rn),F);Rn+=_n.textContent.length}}var js=function(d){this.cm=d,this.prevInput="",this.pollingFast=!1,this.polling=new Re,this.hasSelection=!1,this.composing=null,this.resetting=!1};js.prototype.init=function(d){var v=this,B=this,E=this.cm;this.createField(d);var F=this.textarea;d.wrapper.insertBefore(this.wrapper,d.wrapper.firstChild),J&&(F.style.width="0px"),mt(F,"input",function(){p&&C>=9&&v.hasSelection&&(v.hasSelection=null),B.poll()}),mt(F,"paste",function(fe){en(E,fe)||cs(fe,E)||(E.state.pasteIncoming=+new Date,B.fastPoll())});function Z(fe){if(!en(E,fe)){if(E.somethingSelected())kd({lineWise:!1,text:E.getSelections()});else if(E.options.lineWiseCopyCut){var _e=Op(E);kd({lineWise:!0,text:_e.text}),fe.type=="cut"?E.setSelections(_e.ranges,null,Ot):(B.prevInput="",F.value=_e.text.join(`
`),tt(F))}else return;fe.type=="cut"&&(E.state.cutIncoming=+new Date)}}mt(F,"cut",Z),mt(F,"copy",Z),mt(d.scroller,"paste",function(fe){if(!(au(d,fe)||en(E,fe))){if(!F.dispatchEvent){E.state.pasteIncoming=+new Date,B.focus();return}var _e=new Event("paste");_e.clipboardData=fe.clipboardData,F.dispatchEvent(_e)}}),mt(d.lineSpace,"selectstart",function(fe){au(d,fe)||Wn(fe)}),mt(F,"compositionstart",function(){var fe=E.getCursor("from");B.composing&&B.composing.range.clear(),B.composing={start:fe,range:E.markText(fe,E.getCursor("to"),{className:"CodeMirror-composing"})}}),mt(F,"compositionend",function(){B.composing&&(B.poll(),B.composing.range.clear(),B.composing=null)})},js.prototype.createField=function(d){this.wrapper=sf(),this.textarea=this.wrapper.firstChild;var v=this.cm.options;Yf(this.textarea,v.spellcheck,v.autocorrect,v.autocapitalize)},js.prototype.screenReaderLabelChanged=function(d){d?this.textarea.setAttribute("aria-label",d):this.textarea.removeAttribute("aria-label")},js.prototype.prepareSelection=function(){var d=this.cm,v=d.display,B=d.doc,E=bh(d);if(d.options.moveInputWithCursor){var F=vn(d,B.sel.primary().head,"div"),Z=v.wrapper.getBoundingClientRect(),fe=v.lineDiv.getBoundingClientRect();E.teTop=Math.max(0,Math.min(v.wrapper.clientHeight-10,F.top+fe.top-Z.top)),E.teLeft=Math.max(0,Math.min(v.wrapper.clientWidth-10,F.left+fe.left-Z.left))}return E},js.prototype.showSelection=function(d){var v=this.cm,B=v.display;Ve(B.cursorDiv,d.cursors),Ve(B.selectionDiv,d.selection),d.teTop!=null&&(this.wrapper.style.top=d.teTop+"px",this.wrapper.style.left=d.teLeft+"px")},js.prototype.reset=function(d){if(!(this.contextMenuPending||this.composing&&d)){var v=this.cm;if(this.resetting=!0,v.somethingSelected()){this.prevInput="";var B=v.getSelection();this.textarea.value=B,v.state.focused&&tt(this.textarea),p&&C>=9&&(this.hasSelection=B)}else d||(this.prevInput=this.textarea.value="",p&&C>=9&&(this.hasSelection=null));this.resetting=!1}},js.prototype.getField=function(){return this.textarea},js.prototype.supportsTouch=function(){return!1},js.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!ne||nt(gt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},js.prototype.blur=function(){this.textarea.blur()},js.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},js.prototype.receivedFocus=function(){this.slowPoll()},js.prototype.slowPoll=function(){var d=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){d.poll(),d.cm.state.focused&&d.slowPoll()})},js.prototype.fastPoll=function(){var d=!1,v=this;v.pollingFast=!0;function B(){var E=v.poll();!E&&!d?(d=!0,v.polling.set(60,B)):(v.pollingFast=!1,v.slowPoll())}v.polling.set(20,B)},js.prototype.poll=function(){var d=this,v=this.cm,B=this.textarea,E=this.prevInput;if(this.contextMenuPending||this.resetting||!v.state.focused||Zn(B)&&!E&&!this.composing||v.isReadOnly()||v.options.disableInput||v.state.keySeq)return!1;var F=B.value;if(F==E&&!v.somethingSelected())return!1;if(p&&C>=9&&this.hasSelection===F||$&&/[\uf700-\uf7ff]/.test(F))return v.display.input.reset(),!1;if(v.doc.sel==v.display.selForContextMenu){var Z=F.charCodeAt(0);if(Z==8203&&!E&&(E=""),Z==8666)return this.reset(),this.cm.execCommand("undo")}for(var fe=0,_e=Math.min(E.length,F.length);fe<_e&&E.charCodeAt(fe)==F.charCodeAt(fe);)++fe;return Ga(v,function(){Xs(v,F.slice(fe),E.length-fe,null,d.composing?"*compose":null),F.length>1e3||F.indexOf(`
`)>-1?B.value=d.prevInput="":d.prevInput=F,d.composing&&(d.composing.range.clear(),d.composing.range=v.markText(d.composing.start,v.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},js.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},js.prototype.onKeyPress=function(){p&&C>=9&&(this.hasSelection=null),this.fastPoll()},js.prototype.onContextMenu=function(d){var v=this,B=v.cm,E=B.display,F=v.textarea;v.contextMenuPending&&v.contextMenuPending();var Z=Na(B,d),fe=E.scroller.scrollTop;if(!Z||j)return;var _e=B.options.resetSelectionOnContextMenu;_e&&B.doc.sel.contains(Z)==-1&&Zo(B,la)(B.doc,GA(Z),Ot);var ke=F.style.cssText,Le=v.wrapper.style.cssText,vt=v.wrapper.offsetParent.getBoundingClientRect();v.wrapper.style.cssText="position: static",F.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(d.clientY-vt.top-5)+"px; left: "+(d.clientX-vt.left-5)+`px;
      z-index: 1000; background: `+(p?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var It;w&&(It=F.ownerDocument.defaultView.scrollY),E.input.focus(),w&&F.ownerDocument.defaultView.scrollTo(null,It),E.input.reset(),B.somethingSelected()||(F.value=v.prevInput=" "),v.contextMenuPending=Ht,E.selForContextMenu=B.doc.sel,clearTimeout(E.detectingSelectAll);function Jt(){if(F.selectionStart!=null){var Rn=B.somethingSelected(),oi=""+(Rn?F.value:"");F.value="",F.value=oi,v.prevInput=Rn?"":"",F.selectionStart=1,F.selectionEnd=oi.length,E.selForContextMenu=B.doc.sel}}function Ht(){if(v.contextMenuPending==Ht&&(v.contextMenuPending=!1,v.wrapper.style.cssText=Le,F.style.cssText=ke,p&&C<9&&E.scrollbars.setScrollTop(E.scroller.scrollTop=fe),F.selectionStart!=null)){(!p||p&&C<9)&&Jt();var Rn=0,oi=function(){E.selForContextMenu==B.doc.sel&&F.selectionStart==0&&F.selectionEnd>0&&v.prevInput==""?Zo(B,CA)(B):Rn++<10?E.detectingSelectAll=setTimeout(oi,500):(E.selForContextMenu=null,E.input.reset())};E.detectingSelectAll=setTimeout(oi,200)}}if(p&&C>=9&&Jt(),ye){Ei(d);var _n=function(){Tt(window,"mouseup",_n),setTimeout(Ht,20)};mt(window,"mouseup",_n)}else setTimeout(Ht,50)},js.prototype.readOnlyChanged=function(d){d||this.reset(),this.textarea.disabled=d=="nocursor",this.textarea.readOnly=!!d},js.prototype.setUneditable=function(){},js.prototype.needsContentAttribute=!1;function qf(d,v){if(v=v?Fe(v):{},v.value=d.value,!v.tabindex&&d.tabIndex&&(v.tabindex=d.tabIndex),!v.placeholder&&d.placeholder&&(v.placeholder=d.placeholder),v.autofocus==null){var B=nt(gt(d));v.autofocus=B==d||d.getAttribute("autofocus")!=null&&B==document.body}function E(){d.value=_e.getValue()}var F;if(d.form&&(mt(d.form,"submit",E),!v.leaveSubmitMethodAlone)){var Z=d.form;F=Z.submit;try{var fe=Z.submit=function(){E(),Z.submit=F,Z.submit(),Z.submit=fe}}catch{}}v.finishInit=function(ke){ke.save=E,ke.getTextArea=function(){return d},ke.toTextArea=function(){ke.toTextArea=isNaN,E(),d.parentNode.removeChild(ke.getWrapperElement()),d.style.display="",d.form&&(Tt(d.form,"submit",E),!v.leaveSubmitMethodAlone&&typeof d.form.submit=="function"&&(d.form.submit=F))}},d.style.display="none";var _e=Jo(function(ke){return d.parentNode.insertBefore(ke,d.nextSibling)},v);return _e}function o0(d){d.off=Tt,d.on=mt,d.wheelEventPixels=Uf,d.Doc=ut,d.splitLines=To,d.countColumn=Ke,d.findColumn=on,d.isWordChar=Kn,d.Pass=_t,d.signal=it,d.Line=Ll,d.changeEnd=WA,d.scrollbarModel=mA,d.Pos=rn,d.cmpPos=si,d.modes=Fa,d.mimeModes=Tr,d.resolveMode=ka,d.getMode=wo,d.modeExtensions=Xa,d.extendMode=Il,d.copyState=Ao,d.startState=Da,d.innerMode=Wu,d.commands=Os,d.keyMap=Qn,d.keyName=Lo,d.isModifierKey=Co,d.lookupKey=cr,d.normalizeKeyMap=xi,d.StringStream=Vi,d.SharedTextMarker=he,d.TextMarker=q,d.LineWidget=_,d.e_preventDefault=Wn,d.e_stopPropagation=qi,d.e_stop=Ei,d.addClass=be,d.contains=Ct,d.rmClass=Oe,d.keyNames=Xt}Gf(Jo),Dd(Jo);var a0="iter insert remove copy getEditor constructor".split(" ");for(var uf in ut.prototype)ut.prototype.hasOwnProperty(uf)&&He(a0,uf)<0&&(Jo.prototype[uf]=function(d){return function(){return d.apply(this.doc,arguments)}}(ut.prototype[uf]));return ii(ut),Jo.inputStyles={textarea:js,contenteditable:ea},Jo.defineMode=function(d){!Jo.defaults.mode&&d!="null"&&(Jo.defaults.mode=d),ji.apply(this,arguments)},Jo.defineMIME=gl,Jo.defineMode("null",function(){return{token:function(d){return d.skipToEnd()}}}),Jo.defineMIME("text/plain","null"),Jo.defineExtension=function(d,v){Jo.prototype[d]=v},Jo.defineDocExtension=function(d,v){ut.prototype[d]=v},Jo.fromTextArea=qf,o0(Jo),Jo.version="5.65.20",Jo})}(Ix)),Ix.exports}var vle=L2();const tm=AA(vle);var sk={exports:{}},lk;function Cle(){return lk||(lk=1,function(n,e){(function(t){t(L2())})(function(t){t.defineMode("javascript",function(i,r){var a=i.indentUnit,l=r.statementIndent,o=r.jsonld,p=r.json||o,C=r.trackScope!==!1,w=r.typescript,O=r.wordCharacters||/[\w$\xa1-\uffff]/,U=function(){function $e(So){return{type:So,style:"keyword"}}var Et=$e("keyword a"),xn=$e("keyword b"),Gn=$e("keyword c"),rn=$e("keyword d"),si=$e("operator"),eo={type:"atom",style:"atom"};return{if:$e("if"),while:Et,with:Et,else:xn,do:xn,try:xn,finally:xn,return:rn,break:rn,continue:rn,new:$e("new"),delete:Gn,void:Gn,throw:Gn,debugger:$e("debugger"),var:$e("var"),const:$e("var"),let:$e("var"),function:$e("function"),catch:$e("catch"),for:$e("for"),switch:$e("switch"),case:$e("case"),default:$e("default"),in:si,typeof:si,instanceof:si,true:eo,false:eo,null:eo,undefined:eo,NaN:eo,Infinity:eo,this:$e("this"),class:$e("class"),super:$e("atom"),yield:Gn,export:$e("export"),import:$e("import"),extends:Gn,await:Gn}}(),K=/[+\-*&%=<>!?|~^@]/,j=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function W($e){for(var Et=!1,xn,Gn=!1;(xn=$e.next())!=null;){if(!Et){if(xn=="/"&&!Gn)return;xn=="["?Gn=!0:Gn&&xn=="]"&&(Gn=!1)}Et=!Et&&xn=="\\"}}var Y,te;function J($e,Et,xn){return Y=$e,te=xn,Et}function oe($e,Et){var xn=$e.next();if(xn=='"'||xn=="'")return Et.tokenize=ne(xn),Et.tokenize($e,Et);if(xn=="."&&$e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return J("number","number");if(xn=="."&&$e.match(".."))return J("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(xn))return J(xn);if(xn=="="&&$e.eat(">"))return J("=>","operator");if(xn=="0"&&$e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return J("number","number");if(/\d/.test(xn))return $e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),J("number","number");if(xn=="/")return $e.eat("*")?(Et.tokenize=$,$($e,Et)):$e.eat("/")?($e.skipToEnd(),J("comment","comment")):Vo($e,Et,1)?(W($e),$e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),J("regexp","string-2")):($e.eat("="),J("operator","operator",$e.current()));if(xn=="`")return Et.tokenize=ae,ae($e,Et);if(xn=="#"&&$e.peek()=="!")return $e.skipToEnd(),J("meta","meta");if(xn=="#"&&$e.eatWhile(O))return J("variable","property");if(xn=="<"&&$e.match("!--")||xn=="-"&&$e.match("->")&&!/\S/.test($e.string.slice(0,$e.start)))return $e.skipToEnd(),J("comment","comment");if(K.test(xn))return(xn!=">"||!Et.lexical||Et.lexical.type!=">")&&($e.eat("=")?(xn=="!"||xn=="=")&&$e.eat("="):/[<>*+\-|&?]/.test(xn)&&($e.eat(xn),xn==">"&&$e.eat(xn))),xn=="?"&&$e.eat(".")?J("."):J("operator","operator",$e.current());if(O.test(xn)){$e.eatWhile(O);var Gn=$e.current();if(Et.lastType!="."){if(U.propertyIsEnumerable(Gn)){var rn=U[Gn];return J(rn.type,rn.style,Gn)}if(Gn=="async"&&$e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return J("async","keyword",Gn)}return J("variable","variable",Gn)}}function ne($e){return function(Et,xn){var Gn=!1,rn;if(o&&Et.peek()=="@"&&Et.match(j))return xn.tokenize=oe,J("jsonld-keyword","meta");for(;(rn=Et.next())!=null&&!(rn==$e&&!Gn);)Gn=!Gn&&rn=="\\";return Gn||(xn.tokenize=oe),J("string","string")}}function $($e,Et){for(var xn=!1,Gn;Gn=$e.next();){if(Gn=="/"&&xn){Et.tokenize=oe;break}xn=Gn=="*"}return J("comment","comment")}function ae($e,Et){for(var xn=!1,Gn;(Gn=$e.next())!=null;){if(!xn&&(Gn=="`"||Gn=="$"&&$e.eat("{"))){Et.tokenize=oe;break}xn=!xn&&Gn=="\\"}return J("quasi","string-2",$e.current())}var G="([{}])";function ce($e,Et){Et.fatArrowAt&&(Et.fatArrowAt=null);var xn=$e.string.indexOf("=>",$e.start);if(!(xn<0)){if(w){var Gn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec($e.string.slice($e.start,xn));Gn&&(xn=Gn.index)}for(var rn=0,si=!1,eo=xn-1;eo>=0;--eo){var So=$e.string.charAt(eo),As=G.indexOf(So);if(As>=0&&As<3){if(!rn){++eo;break}if(--rn==0){So=="("&&(si=!0);break}}else if(As>=3&&As<6)++rn;else if(O.test(So))si=!0;else if(/["'\/`]/.test(So))for(;;--eo){if(eo==0)return;var Ls=$e.string.charAt(eo-1);if(Ls==So&&$e.string.charAt(eo-2)!="\\"){eo--;break}}else if(si&&!rn){++eo;break}}si&&!rn&&(Et.fatArrowAt=eo)}}var ge={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ye($e,Et,xn,Gn,rn,si){this.indented=$e,this.column=Et,this.type=xn,this.prev=rn,this.info=si,Gn!=null&&(this.align=Gn)}function we($e,Et){if(!C)return!1;for(var xn=$e.localVars;xn;xn=xn.next)if(xn.name==Et)return!0;for(var Gn=$e.context;Gn;Gn=Gn.prev)for(var xn=Gn.vars;xn;xn=xn.next)if(xn.name==Et)return!0}function Oe($e,Et,xn,Gn,rn){var si=$e.cc;for(Se.state=$e,Se.stream=rn,Se.marked=null,Se.cc=si,Se.style=Et,$e.lexical.hasOwnProperty("align")||($e.lexical.align=!0);;){var eo=si.length?si.pop():p?He:Ke;if(eo(xn,Gn)){for(;si.length&&si[si.length-1].lex;)si.pop()();return Se.marked?Se.marked:xn=="variable"&&we($e,Gn)?"variable-2":Et}}}var Se={state:null,marked:null,cc:null};function Ve(){for(var $e=arguments.length-1;$e>=0;$e--)Se.cc.push(arguments[$e])}function xe(){return Ve.apply(null,arguments),!0}function ze($e,Et){for(var xn=Et;xn;xn=xn.next)if(xn.name==$e)return!0;return!1}function st($e){var Et=Se.state;if(Se.marked="def",!!C){if(Et.context){if(Et.lexical.info=="var"&&Et.context&&Et.context.block){var xn=Ct($e,Et.context);if(xn!=null){Et.context=xn;return}}else if(!ze($e,Et.localVars)){Et.localVars=new Ne($e,Et.localVars);return}}r.globalVars&&!ze($e,Et.globalVars)&&(Et.globalVars=new Ne($e,Et.globalVars))}}function Ct($e,Et){if(Et)if(Et.block){var xn=Ct($e,Et.prev);return xn?xn==Et.prev?Et:new be(xn,Et.vars,!0):null}else return ze($e,Et.vars)?Et:new be(Et.prev,new Ne($e,Et.vars),!1);else return null}function nt($e){return $e=="public"||$e=="private"||$e=="protected"||$e=="abstract"||$e=="readonly"}function be($e,Et,xn){this.prev=$e,this.vars=Et,this.block=xn}function Ne($e,Et){this.name=$e,this.next=Et}var tt=new Ne("this",new Ne("arguments",null));function lt(){Se.state.context=new be(Se.state.context,Se.state.localVars,!1),Se.state.localVars=tt}function kt(){Se.state.context=new be(Se.state.context,Se.state.localVars,!0),Se.state.localVars=null}lt.lex=kt.lex=!0;function gt(){Se.state.localVars=Se.state.context.vars,Se.state.context=Se.state.context.prev}gt.lex=!0;function St($e,Et){var xn=function(){var Gn=Se.state,rn=Gn.indented;if(Gn.lexical.type=="stat")rn=Gn.lexical.indented;else for(var si=Gn.lexical;si&&si.type==")"&&si.align;si=si.prev)rn=si.indented;Gn.lexical=new ye(rn,Se.stream.column(),$e,null,Gn.lexical,Et)};return xn.lex=!0,xn}function Ut(){var $e=Se.state;$e.lexical.prev&&($e.lexical.type==")"&&($e.indented=$e.lexical.indented),$e.lexical=$e.lexical.prev)}Ut.lex=!0;function Fe($e){function Et(xn){return xn==$e?xe():$e==";"||xn=="}"||xn==")"||xn=="]"?Ve():xe(Et)}return Et}function Ke($e,Et){return $e=="var"?xe(St("vardef",Et),qi,Fe(";"),Ut):$e=="keyword a"?xe(St("form"),_t,Ke,Ut):$e=="keyword b"?xe(St("form"),Ke,Ut):$e=="keyword d"?Se.stream.match(/^\s*$/,!1)?xe():xe(St("stat"),qt,Fe(";"),Ut):$e=="debugger"?xe(Fe(";")):$e=="{"?xe(St("}"),kt,Te,Ut,gt):$e==";"?xe():$e=="if"?(Se.state.lexical.info=="else"&&Se.state.cc[Se.state.cc.length-1]==Ut&&Se.state.cc.pop()(),xe(St("form"),_t,Ke,Ut,wn)):$e=="function"?xe(To):$e=="for"?xe(St("form"),kt,uo,Ke,gt,Ut):$e=="class"||w&&Et=="interface"?(Se.marked="keyword",xe(St("form",$e=="class"?$e:Et),Fa,Ut)):$e=="variable"?w&&Et=="declare"?(Se.marked="keyword",xe(Ke)):w&&(Et=="module"||Et=="enum"||Et=="type")&&Se.stream.match(/^\s*\w/,!1)?(Se.marked="keyword",Et=="enum"?xe(Mi):Et=="type"?xe(lr,Fe("operator"),Ze,Fe(";")):xe(St("form"),er,Fe("{"),St("}"),Te,Ut,Ut)):w&&Et=="namespace"?(Se.marked="keyword",xe(St("form"),He,Ke,Ut)):w&&Et=="abstract"?(Se.marked="keyword",xe(Ke)):xe(St("stat"),ei):$e=="switch"?xe(St("form"),_t,Fe("{"),St("}","switch"),kt,Te,Ut,Ut,gt):$e=="case"?xe(He,Fe(":")):$e=="default"?xe(Fe(":")):$e=="catch"?xe(St("form"),lt,Re,Ke,Ut,gt):$e=="export"?xe(St("stat"),ka,Ut):$e=="import"?xe(St("stat"),Xa,Ut):$e=="async"?xe(Ke):Et=="@"?xe(He,Ke):Ve(St("stat"),He,Fe(";"),Ut)}function Re($e){if($e=="(")return xe(zi,Fe(")"))}function He($e,Et){return Ot($e,Et,!1)}function bt($e,Et){return Ot($e,Et,!0)}function _t($e){return $e!="("?Ve():xe(St(")"),qt,Fe(")"),Ut)}function Ot($e,Et,xn){if(Se.state.fatArrowAt==Se.stream.start){var Gn=xn?On:$n;if($e=="(")return xe(lt,St(")"),le(zi,")"),Ut,Fe("=>"),Gn,gt);if($e=="variable")return Ve(lt,er,Fe("=>"),Gn,gt)}var rn=xn?on:Kt;return ge.hasOwnProperty($e)?xe(rn):$e=="function"?xe(To,rn):$e=="class"||w&&Et=="interface"?(Se.marked="keyword",xe(St("form"),vr,Ut)):$e=="keyword c"||$e=="async"?xe(xn?bt:He):$e=="("?xe(St(")"),qt,Fe(")"),Ut,rn):$e=="operator"||$e=="spread"?xe(xn?bt:He):$e=="["?xe(St("]"),Vi,Ut,rn):$e=="{"?pe(je,"}",null,rn):$e=="quasi"?Ve(Jn,rn):$e=="new"?xe(Bn(xn)):xe()}function qt($e){return $e.match(/[;\}\)\],]/)?Ve():Ve(He)}function Kt($e,Et){return $e==","?xe(qt):on($e,Et,!1)}function on($e,Et,xn){var Gn=xn==!1?Kt:on,rn=xn==!1?He:bt;if($e=="=>")return xe(lt,xn?On:$n,gt);if($e=="operator")return/\+\+|--/.test(Et)||w&&Et=="!"?xe(Gn):w&&Et=="<"&&Se.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?xe(St(">"),le(Ze,">"),Ut,Gn):Et=="?"?xe(He,Fe(":"),rn):xe(rn);if($e=="quasi")return Ve(Jn,Gn);if($e!=";"){if($e=="(")return pe(bt,")","call",Gn);if($e==".")return xe(Kn,Gn);if($e=="[")return xe(St("]"),qt,Fe("]"),Ut,Gn);if(w&&Et=="as")return Se.marked="keyword",xe(Ze,Gn);if($e=="regexp")return Se.state.lastType=Se.marked="operator",Se.stream.backUp(Se.stream.pos-Se.stream.start-1),xe(rn)}}function Jn($e,Et){return $e!="quasi"?Ve():Et.slice(Et.length-2)!="${"?xe(Jn):xe(qt,Wt)}function Wt($e){if($e=="}")return Se.marked="string-2",Se.state.tokenize=ae,xe(Jn)}function $n($e){return ce(Se.stream,Se.state),Ve($e=="{"?Ke:He)}function On($e){return ce(Se.stream,Se.state),Ve($e=="{"?Ke:bt)}function Bn($e){return function(Et){return Et=="."?xe($e?Oi:In):Et=="variable"&&w?xe(Mn,$e?on:Kt):Ve($e?bt:He)}}function In($e,Et){if(Et=="target")return Se.marked="keyword",xe(Kt)}function Oi($e,Et){if(Et=="target")return Se.marked="keyword",xe(on)}function ei($e){return $e==":"?xe(Ut,Ke):Ve(Kt,Fe(";"),Ut)}function Kn($e){if($e=="variable")return Se.marked="property",xe()}function je($e,Et){if($e=="async")return Se.marked="property",xe(je);if($e=="variable"||Se.style=="keyword"){if(Se.marked="property",Et=="get"||Et=="set")return xe(de);var xn;return w&&Se.state.fatArrowAt==Se.stream.start&&(xn=Se.stream.match(/^\s*:\s*/,!1))&&(Se.state.fatArrowAt=Se.stream.pos+xn[0].length),xe(re)}else{if($e=="number"||$e=="string")return Se.marked=o?"property":Se.style+" property",xe(re);if($e=="jsonld-keyword")return xe(re);if(w&&nt(Et))return Se.marked="keyword",xe(je);if($e=="[")return xe(He,We,Fe("]"),re);if($e=="spread")return xe(bt,re);if(Et=="*")return Se.marked="keyword",xe(je);if($e==":")return Ve(re)}}function de($e){return $e!="variable"?Ve(re):(Se.marked="property",xe(To))}function re($e){if($e==":")return xe(bt);if($e=="(")return Ve(To)}function le($e,Et,xn){function Gn(rn,si){if(xn?xn.indexOf(rn)>-1:rn==","){var eo=Se.state.lexical;return eo.info=="call"&&(eo.pos=(eo.pos||0)+1),xe(function(So,As){return So==Et||As==Et?Ve():Ve($e)},Gn)}return rn==Et||si==Et?xe():xn&&xn.indexOf(";")>-1?Ve($e):xe(Fe(Et))}return function(rn,si){return rn==Et||si==Et?xe():Ve($e,Gn)}}function pe($e,Et,xn){for(var Gn=3;Gn<arguments.length;Gn++)Se.cc.push(arguments[Gn]);return xe(St(Et,xn),le($e,Et),Ut)}function Te($e){return $e=="}"?xe():Ve(Ke,Te)}function We($e,Et){if(w){if($e==":")return xe(Ze);if(Et=="?")return xe(We)}}function dt($e,Et){if(w&&($e==":"||Et=="in"))return xe(Ze)}function Ye($e){if(w&&$e==":")return Se.stream.match(/^\s*\w+\s+is\b/,!1)?xe(He,De,Ze):xe(Ze)}function De($e,Et){if(Et=="is")return Se.marked="keyword",xe()}function Ze($e,Et){if(Et=="keyof"||Et=="typeof"||Et=="infer"||Et=="readonly")return Se.marked="keyword",xe(Et=="typeof"?bt:Ze);if($e=="variable"||Et=="void")return Se.marked="type",xe(Dn);if(Et=="|"||Et=="&")return xe(Ze);if($e=="string"||$e=="number"||$e=="atom")return xe(Dn);if($e=="[")return xe(St("]"),le(Ze,"]",","),Ut,Dn);if($e=="{")return xe(St("}"),mt,Ut,Dn);if($e=="(")return xe(le(en,")"),g,Dn);if($e=="<")return xe(le(Ze,">"),Ze);if($e=="quasi")return Ve(Tt,Dn)}function g($e){if($e=="=>")return xe(Ze)}function mt($e){return $e.match(/[\}\)\]]/)?xe():$e==","||$e==";"?xe(mt):Ve(ht,mt)}function ht($e,Et){if($e=="variable"||Se.style=="keyword")return Se.marked="property",xe(ht);if(Et=="?"||$e=="number"||$e=="string")return xe(ht);if($e==":")return xe(Ze);if($e=="[")return xe(Fe("variable"),dt,Fe("]"),ht);if($e=="(")return Ve(Zn,ht);if(!$e.match(/[;\}\)\],]/))return xe()}function Tt($e,Et){return $e!="quasi"?Ve():Et.slice(Et.length-2)!="${"?xe(Tt):xe(Ze,it)}function it($e){if($e=="}")return Se.marked="string-2",Se.state.tokenize=ae,xe(Tt)}function en($e,Et){return $e=="variable"&&Se.stream.match(/^\s*[?:]/,!1)||Et=="?"?xe(en):$e==":"?xe(Ze):$e=="spread"?xe(en):Ve(Ze)}function Dn($e,Et){if(Et=="<")return xe(St(">"),le(Ze,">"),Ut,Dn);if(Et=="|"||$e=="."||Et=="&")return xe(Ze);if($e=="[")return xe(Ze,Fe("]"),Dn);if(Et=="extends"||Et=="implements")return Se.marked="keyword",xe(Ze);if(Et=="?")return xe(Ze,Fe(":"),Ze)}function Mn($e,Et){if(Et=="<")return xe(St(">"),le(Ze,">"),Ut,Dn)}function ii(){return Ve(Ze,Wn)}function Wn($e,Et){if(Et=="=")return xe(Ze)}function qi($e,Et){return Et=="enum"?(Se.marked="keyword",xe(Mi)):Ve(er,We,ti,Wi)}function er($e,Et){if(w&&nt(Et))return Se.marked="keyword",xe(er);if($e=="variable")return st(Et),xe();if($e=="spread")return xe(er);if($e=="[")return pe(hi,"]");if($e=="{")return pe(Ei,"}")}function Ei($e,Et){return $e=="variable"&&!Se.stream.match(/^\s*:/,!1)?(st(Et),xe(ti)):($e=="variable"&&(Se.marked="property"),$e=="spread"?xe(er):$e=="}"?Ve():$e=="["?xe(He,Fe("]"),Fe(":"),Ei):xe(Fe(":"),er,ti))}function hi(){return Ve(er,ti)}function ti($e,Et){if(Et=="=")return xe(bt)}function Wi($e){if($e==",")return xe(qi)}function wn($e,Et){if($e=="keyword b"&&Et=="else")return xe(St("form","else"),Ke,Ut)}function uo($e,Et){if(Et=="await")return xe(uo);if($e=="(")return xe(St(")"),Hi,Ut)}function Hi($e){return $e=="var"?xe(qi,ma):$e=="variable"?xe(ma):Ve(ma)}function ma($e,Et){return $e==")"?xe():$e==";"?xe(ma):Et=="in"||Et=="of"?(Se.marked="keyword",xe(He,ma)):Ve(He,ma)}function To($e,Et){if(Et=="*")return Se.marked="keyword",xe(To);if($e=="variable")return st(Et),xe(To);if($e=="(")return xe(lt,St(")"),le(zi,")"),Ut,Ye,Ke,gt);if(w&&Et=="<")return xe(St(">"),le(ii,">"),Ut,To)}function Zn($e,Et){if(Et=="*")return Se.marked="keyword",xe(Zn);if($e=="variable")return st(Et),xe(Zn);if($e=="(")return xe(lt,St(")"),le(zi,")"),Ut,Ye,gt);if(w&&Et=="<")return xe(St(">"),le(ii,">"),Ut,Zn)}function lr($e,Et){if($e=="keyword"||$e=="variable")return Se.marked="type",xe(lr);if(Et=="<")return xe(St(">"),le(ii,">"),Ut)}function zi($e,Et){return Et=="@"&&xe(He,zi),$e=="spread"?xe(zi):w&&nt(Et)?(Se.marked="keyword",xe(zi)):w&&$e=="this"?xe(We,ti):Ve(er,We,ti)}function vr($e,Et){return $e=="variable"?Fa($e,Et):Tr($e,Et)}function Fa($e,Et){if($e=="variable")return st(Et),xe(Tr)}function Tr($e,Et){if(Et=="<")return xe(St(">"),le(ii,">"),Ut,Tr);if(Et=="extends"||Et=="implements"||w&&$e==",")return Et=="implements"&&(Se.marked="keyword"),xe(w?Ze:He,Tr);if($e=="{")return xe(St("}"),ji,Ut)}function ji($e,Et){if($e=="async"||$e=="variable"&&(Et=="static"||Et=="get"||Et=="set"||w&&nt(Et))&&Se.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return Se.marked="keyword",xe(ji);if($e=="variable"||Se.style=="keyword")return Se.marked="property",xe(gl,ji);if($e=="number"||$e=="string")return xe(gl,ji);if($e=="[")return xe(He,We,Fe("]"),gl,ji);if(Et=="*")return Se.marked="keyword",xe(ji);if(w&&$e=="(")return Ve(Zn,ji);if($e==";"||$e==",")return xe(ji);if($e=="}")return xe();if(Et=="@")return xe(He,ji)}function gl($e,Et){if(Et=="!"||Et=="?")return xe(gl);if($e==":")return xe(Ze,ti);if(Et=="=")return xe(bt);var xn=Se.state.lexical.prev,Gn=xn&&xn.info=="interface";return Ve(Gn?Zn:To)}function ka($e,Et){return Et=="*"?(Se.marked="keyword",xe(Da,Fe(";"))):Et=="default"?(Se.marked="keyword",xe(He,Fe(";"))):$e=="{"?xe(le(wo,"}"),Da,Fe(";")):Ve(Ke)}function wo($e,Et){if(Et=="as")return Se.marked="keyword",xe(Fe("variable"));if($e=="variable")return Ve(bt,wo)}function Xa($e){return $e=="string"?xe():$e=="("?Ve(He):$e=="."?Ve(Kt):Ve(Il,Ao,Da)}function Il($e,Et){return $e=="{"?pe(Il,"}"):($e=="variable"&&st(Et),Et=="*"&&(Se.marked="keyword"),xe(Wu))}function Ao($e){if($e==",")return xe(Il,Ao)}function Wu($e,Et){if(Et=="as")return Se.marked="keyword",xe(Il)}function Da($e,Et){if(Et=="from")return Se.marked="keyword",xe(He)}function Vi($e){return $e=="]"?xe():Ve(le(bt,"]"))}function Mi(){return Ve(St("form"),er,Fe("{"),St("}"),le(us,"}"),Ut,Ut)}function us(){return Ve(er,ti)}function Ma($e,Et){return $e.lastType=="operator"||$e.lastType==","||K.test(Et.charAt(0))||/[,.]/.test(Et.charAt(0))}function Vo($e,Et,xn){return Et.tokenize==oe&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Et.lastType)||Et.lastType=="quasi"&&/\{\s*$/.test($e.string.slice(0,$e.pos-(xn||0)))}return{startState:function($e){var Et={tokenize:oe,lastType:"sof",cc:[],lexical:new ye(($e||0)-a,0,"block",!1),localVars:r.localVars,context:r.localVars&&new be(null,null,!1),indented:$e||0};return r.globalVars&&typeof r.globalVars=="object"&&(Et.globalVars=r.globalVars),Et},token:function($e,Et){if($e.sol()&&(Et.lexical.hasOwnProperty("align")||(Et.lexical.align=!1),Et.indented=$e.indentation(),ce($e,Et)),Et.tokenize!=$&&$e.eatSpace())return null;var xn=Et.tokenize($e,Et);return Y=="comment"?xn:(Et.lastType=Y=="operator"&&(te=="++"||te=="--")?"incdec":Y,Oe(Et,xn,Y,te,$e))},indent:function($e,Et){if($e.tokenize==$||$e.tokenize==ae)return t.Pass;if($e.tokenize!=oe)return 0;var xn=Et&&Et.charAt(0),Gn=$e.lexical,rn;if(!/^\s*else\b/.test(Et))for(var si=$e.cc.length-1;si>=0;--si){var eo=$e.cc[si];if(eo==Ut)Gn=Gn.prev;else if(eo!=wn&&eo!=gt)break}for(;(Gn.type=="stat"||Gn.type=="form")&&(xn=="}"||(rn=$e.cc[$e.cc.length-1])&&(rn==Kt||rn==on)&&!/^[,\.=+\-*:?[\(]/.test(Et));)Gn=Gn.prev;l&&Gn.type==")"&&Gn.prev.type=="stat"&&(Gn=Gn.prev);var So=Gn.type,As=xn==So;return So=="vardef"?Gn.indented+($e.lastType=="operator"||$e.lastType==","?Gn.info.length+1:0):So=="form"&&xn=="{"?Gn.indented:So=="form"?Gn.indented+a:So=="stat"?Gn.indented+(Ma($e,Et)?l||a:0):Gn.info=="switch"&&!As&&r.doubleIndentSwitch!=!1?Gn.indented+(/^(?:case|default)\b/.test(Et)?a:2*a):Gn.align?Gn.column+(As?0:1):Gn.indented+(As?0:a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:p?null:"/*",blockCommentEnd:p?null:"*/",blockCommentContinue:p?null:" * ",lineComment:p?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:p?"json":"javascript",jsonldMode:o,jsonMode:p,expressionAllowed:Vo,skipExpression:function($e){Oe($e,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),sk.exports}Cle();var uk={exports:{}},Ak;function _le(){return Ak||(Ak=1,function(n,e){(function(t){t(L2())})(function(t){var i="CodeMirror-lint-markers",r="CodeMirror-lint-line-";function a(G,ce,ge){var ye=document.createElement("div");ye.className="CodeMirror-lint-tooltip cm-s-"+G.options.theme,ye.appendChild(ge.cloneNode(!0)),G.state.lint.options.selfContain?G.getWrapperElement().appendChild(ye):document.body.appendChild(ye);function we(Oe){if(!ye.parentNode)return t.off(document,"mousemove",we);var Se=Math.max(0,Oe.clientY-ye.offsetHeight-5),Ve=Math.max(0,Math.min(Oe.clientX+5,ye.ownerDocument.defaultView.innerWidth-ye.offsetWidth));ye.style.top=Se+"px",ye.style.left=Ve+"px"}return t.on(document,"mousemove",we),we(ce),ye.style.opacity!=null&&(ye.style.opacity=1),ye}function l(G){G.parentNode&&G.parentNode.removeChild(G)}function o(G){G.parentNode&&(G.style.opacity==null&&l(G),G.style.opacity=0,setTimeout(function(){l(G)},600))}function p(G,ce,ge,ye){var we=a(G,ce,ge);function Oe(){t.off(ye,"mouseout",Oe),we&&(o(we),we=null)}var Se=setInterval(function(){if(we)for(var Ve=ye;;Ve=Ve.parentNode){if(Ve&&Ve.nodeType==11&&(Ve=Ve.host),Ve==document.body)return;if(!Ve){Oe();break}}if(!we)return clearInterval(Se)},400);t.on(ye,"mouseout",Oe)}function C(G,ce,ge){this.marked=[],ce instanceof Function&&(ce={getAnnotations:ce}),(!ce||ce===!0)&&(ce={}),this.options={},this.linterOptions=ce.options||{};for(var ye in w)this.options[ye]=w[ye];for(var ye in ce)w.hasOwnProperty(ye)?ce[ye]!=null&&(this.options[ye]=ce[ye]):ce.options||(this.linterOptions[ye]=ce[ye]);this.timeout=null,this.hasGutter=ge,this.onMouseOver=function(we){ae(G,we)},this.waitingFor=0}var w={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function O(G){var ce=G.state.lint;ce.hasGutter&&G.clearGutter(i),ce.options.highlightLines&&U(G);for(var ge=0;ge<ce.marked.length;++ge)ce.marked[ge].clear();ce.marked.length=0}function U(G){G.eachLine(function(ce){var ge=ce.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(ce.wrapClass);ge&&G.removeLineClass(ce,"wrap",ge[0])})}function K(G,ce,ge,ye,we){var Oe=document.createElement("div"),Se=Oe;return Oe.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+ge,ye&&(Se=Oe.appendChild(document.createElement("div")),Se.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),we!=!1&&t.on(Se,"mouseover",function(Ve){p(G,Ve,ce,Se)}),Oe}function j(G,ce){return G=="error"?G:ce}function W(G){for(var ce=[],ge=0;ge<G.length;++ge){var ye=G[ge],we=ye.from.line;(ce[we]||(ce[we]=[])).push(ye)}return ce}function Y(G){var ce=G.severity;ce||(ce="error");var ge=document.createElement("div");return ge.className="CodeMirror-lint-message CodeMirror-lint-message-"+ce,typeof G.messageHTML<"u"?ge.innerHTML=G.messageHTML:ge.appendChild(document.createTextNode(G.message)),ge}function te(G,ce){var ge=G.state.lint,ye=++ge.waitingFor;function we(){ye=-1,G.off("change",we)}G.on("change",we),ce(G.getValue(),function(Oe,Se){G.off("change",we),ge.waitingFor==ye&&(Se&&Oe instanceof t&&(Oe=Se),G.operation(function(){oe(G,Oe)}))},ge.linterOptions,G)}function J(G){var ce=G.state.lint;if(ce){var ge=ce.options,ye=ge.getAnnotations||G.getHelper(t.Pos(0,0),"lint");if(ye)if(ge.async||ye.async)te(G,ye);else{var we=ye(G.getValue(),ce.linterOptions,G);if(!we)return;we.then?we.then(function(Oe){G.operation(function(){oe(G,Oe)})}):G.operation(function(){oe(G,we)})}}}function oe(G,ce){var ge=G.state.lint;if(ge){var ye=ge.options;O(G);for(var we=W(ce),Oe=0;Oe<we.length;++Oe){var Se=we[Oe];if(Se){for(var Ve=null,xe=ge.hasGutter&&document.createDocumentFragment(),ze=0;ze<Se.length;++ze){var st=Se[ze],Ct=st.severity;Ct||(Ct="error"),Ve=j(Ve,Ct),ye.formatAnnotation&&(st=ye.formatAnnotation(st)),ge.hasGutter&&xe.appendChild(Y(st)),st.to&&ge.marked.push(G.markText(st.from,st.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+Ct,__annotation:st}))}ge.hasGutter&&G.setGutterMarker(Oe,i,K(G,xe,Ve,Se.length>1,ye.tooltips)),ye.highlightLines&&G.addLineClass(Oe,"wrap",r+Ve)}}ye.onUpdateLinting&&ye.onUpdateLinting(ce,we,G)}}function ne(G){var ce=G.state.lint;ce&&(clearTimeout(ce.timeout),ce.timeout=setTimeout(function(){J(G)},ce.options.delay))}function $(G,ce,ge){for(var ye=ge.target||ge.srcElement,we=document.createDocumentFragment(),Oe=0;Oe<ce.length;Oe++){var Se=ce[Oe];we.appendChild(Y(Se))}p(G,ge,we,ye)}function ae(G,ce){var ge=ce.target||ce.srcElement;if(/\bCodeMirror-lint-mark-/.test(ge.className)){for(var ye=ge.getBoundingClientRect(),we=(ye.left+ye.right)/2,Oe=(ye.top+ye.bottom)/2,Se=G.findMarksAt(G.coordsChar({left:we,top:Oe},"client")),Ve=[],xe=0;xe<Se.length;++xe){var ze=Se[xe].__annotation;ze&&Ve.push(ze)}Ve.length&&$(G,Ve,ce)}}t.defineOption("lint",!1,function(G,ce,ge){if(ge&&ge!=t.Init&&(O(G),G.state.lint.options.lintOnChange!==!1&&G.off("change",ne),t.off(G.getWrapperElement(),"mouseover",G.state.lint.onMouseOver),clearTimeout(G.state.lint.timeout),delete G.state.lint),ce){for(var ye=G.getOption("gutters"),we=!1,Oe=0;Oe<ye.length;++Oe)ye[Oe]==i&&(we=!0);var Se=G.state.lint=new C(G,ce,we);Se.options.lintOnChange&&G.on("change",ne),Se.options.tooltips!=!1&&Se.options.tooltips!="gutter"&&t.on(G.getWrapperElement(),"mouseover",Se.onMouseOver),J(G)}}),t.defineExtension("performLint",function(){J(this)})})}()),uk.exports}_le();var ck={exports:{}},hk;function ble(){return hk||(hk=1,function(n,e){(function(t){t(L2())})(function(t){var i=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),r=t.Pos,a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function l(U){return U&&U.bracketRegex||/[(){}[\]]/}function o(U,K,j){var W=U.getLineHandle(K.line),Y=K.ch-1,te=j&&j.afterCursor;te==null&&(te=/(^| )cm-fat-cursor($| )/.test(U.getWrapperElement().className));var J=l(j),oe=!te&&Y>=0&&J.test(W.text.charAt(Y))&&a[W.text.charAt(Y)]||J.test(W.text.charAt(Y+1))&&a[W.text.charAt(++Y)];if(!oe)return null;var ne=oe.charAt(1)==">"?1:-1;if(j&&j.strict&&ne>0!=(Y==K.ch))return null;var $=U.getTokenTypeAt(r(K.line,Y+1)),ae=p(U,r(K.line,Y+(ne>0?1:0)),ne,$,j);return ae==null?null:{from:r(K.line,Y),to:ae&&ae.pos,match:ae&&ae.ch==oe.charAt(0),forward:ne>0}}function p(U,K,j,W,Y){for(var te=Y&&Y.maxScanLineLength||1e4,J=Y&&Y.maxScanLines||1e3,oe=[],ne=l(Y),$=j>0?Math.min(K.line+J,U.lastLine()+1):Math.max(U.firstLine()-1,K.line-J),ae=K.line;ae!=$;ae+=j){var G=U.getLine(ae);if(G){var ce=j>0?0:G.length-1,ge=j>0?G.length:-1;if(!(G.length>te))for(ae==K.line&&(ce=K.ch-(j<0?1:0));ce!=ge;ce+=j){var ye=G.charAt(ce);if(ne.test(ye)&&(W===void 0||(U.getTokenTypeAt(r(ae,ce+1))||"")==(W||""))){var we=a[ye];if(we&&we.charAt(1)==">"==j>0)oe.push(ye);else if(oe.length)oe.pop();else return{pos:r(ae,ce),ch:ye}}}}}return ae-j==(j>0?U.lastLine():U.firstLine())?!1:null}function C(U,K,j){for(var W=U.state.matchBrackets.maxHighlightLineLength||1e3,Y=j&&j.highlightNonMatching,te=[],J=U.listSelections(),oe=0;oe<J.length;oe++){var ne=J[oe].empty()&&o(U,J[oe].head,j);if(ne&&(ne.match||Y!==!1)&&U.getLine(ne.from.line).length<=W){var $=ne.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";te.push(U.markText(ne.from,r(ne.from.line,ne.from.ch+1),{className:$})),ne.to&&U.getLine(ne.to.line).length<=W&&te.push(U.markText(ne.to,r(ne.to.line,ne.to.ch+1),{className:$}))}}if(te.length){i&&U.state.focused&&U.focus();var ae=function(){U.operation(function(){for(var G=0;G<te.length;G++)te[G].clear()})};if(K)setTimeout(ae,800);else return ae}}function w(U){U.operation(function(){U.state.matchBrackets.currentlyHighlighted&&(U.state.matchBrackets.currentlyHighlighted(),U.state.matchBrackets.currentlyHighlighted=null),U.state.matchBrackets.currentlyHighlighted=C(U,!1,U.state.matchBrackets)})}function O(U){U.state.matchBrackets&&U.state.matchBrackets.currentlyHighlighted&&(U.state.matchBrackets.currentlyHighlighted(),U.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(U,K,j){j&&j!=t.Init&&(U.off("cursorActivity",w),U.off("focus",w),U.off("blur",O),O(U)),K&&(U.state.matchBrackets=typeof K=="object"?K:{},U.on("cursorActivity",w),U.on("focus",w),U.on("blur",O))}),t.defineExtension("matchBrackets",function(){C(this,!0)}),t.defineExtension("findMatchingBracket",function(U,K,j){return(j||typeof K=="boolean")&&(j?(j.strict=K,K=j):K=K?{strict:!0}:null),o(this,U,K)}),t.defineExtension("scanForBracket",function(U,K,j,W){return p(this,U,K,j,W)})})}()),ck.exports}ble();const xle=/("(?:[^\\"]|\\.)*")|[:,]/g;function dN(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return function a(l,o,p){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const C=JSON.stringify(l,r);if(C===void 0)return C;const w=i-o.length-p;if(C.length<=w){const O=C.replace(xle,(U,K)=>K||`${U} `);if(O.length<=w)return O}if(r!=null&&(l=JSON.parse(C),r=void 0),typeof l=="object"&&l!==null){const O=o+t,U=[];let K=0,j,W;if(Array.isArray(l)){j="[",W="]";const{length:Y}=l;for(;K<Y;K++)U.push(a(l[K],O,K===Y-1?0:1)||"null")}else{j="{",W="}";const Y=Object.keys(l),{length:te}=Y;for(;K<te;K++){const J=Y[K],oe=`${JSON.stringify(J)}: `,ne=a(l[J],O,oe.length+(K===te-1?0:1));ne!==void 0&&U.push(oe+ne)}}if(U.length>0)return[j,t+U.join(`,
${O}`),W].join(`
${o}`)}return C}(n,"",0)}var jC={exports:{}},Mle=jC.exports,dk;function wle(){return dk||(dk=1,function(n,e){(function(t,i){i(e)})(Mle,function(t){const i={isWhiteSpace:function(be){return be===" "||be===""||be==="\uFEFF"||be>="	"&&be<="\r"||be===""||be>=""&&be<=""||be==="\u2028"||be==="\u2029"||be===""||be===""||be===""},isWhiteSpaceJSON:function(be){return be===" "||be==="	"||be===`
`||be==="\r"},isLineTerminator:function(be){return be===`
`||be==="\r"||be==="\u2028"||be==="\u2029"},isLineTerminatorJSON:function(be){return be===`
`||be==="\r"},isIdentifierStart:function(be){return be==="$"||be==="_"||be>="A"&&be<="Z"||be>="a"&&be<="z"||be>=""&&i.NonAsciiIdentifierStart.test(be)},isIdentifierPart:function(be){return be==="$"||be==="_"||be>="A"&&be<="Z"||be>="a"&&be<="z"||be>="0"&&be<="9"||be>=""&&i.NonAsciiIdentifierPart.test(be)},NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function r(nt){return nt>="0"&&nt<="9"||nt>="A"&&nt<="F"||nt>="a"&&nt<="f"}function a(nt){return nt>="0"&&nt<="7"}function l(nt){return nt>="0"&&nt<="9"}function o(nt){return nt.charCodeAt(0)===65279}const p={"'":"'",'"':'"',"\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","/":"/"},C=Object.hasOwn,w={};function O(nt,be){(typeof nt!="string"||!(nt instanceof String))&&(nt=String(nt));const Ne=be.mode==="json5",tt=be.ignoreBOM,lt=be.ignoreComments||be.mode==="cjson"||Ne,kt=be.ignoreTrailingCommas||Ne,gt=be.ignoreProtoKey,St=be.ignorePrototypeKeys,Ut=be.allowSingleQuotedStrings||Ne,Fe=be.allowDuplicateObjectKeys,Ke=be.reviver,Re=be.tokenize,He=be.rawTokens,bt=be.tokenLocations,_t=be.tokenPaths,Ot=Ne?i.isLineTerminator:i.isLineTerminatorJSON,qt=Ne?i.isWhiteSpace:i.isWhiteSpaceJSON,Kt=nt.length;let on=0,Jn=0,Wt=0;const $n=[];let On,Bn,In;if(Re){let ht=null,Tt,it;On=function(){if(ht!==null)throw Error("internal error, token overlap");Tt=on+1,it=Wt-Jn+1,ht=Wt},Bn=function(en,Dn){if(ht!==Wt){const Mn={type:en};He&&(Mn.raw=nt.substr(ht,Wt-ht)),Dn!==void 0&&(Mn.value=Dn),bt&&(Mn.location={start:{column:it,line:Tt,offset:ht}}),_t&&(Mn.path=In.slice()),$n.push(Mn)}return ht=null,Dn},_t&&(In=[])}function Oi(){let ht;return Wt<Kt?ht=`Unexpected token ${JSON.stringify(nt[Wt])}`:ht="Unexpected end of input",ht}function ei(ht){const Tt=Wt-Jn+1;++on;const it=we(ht,nt,Wt,on,Tt),en=SyntaxError(it.message);return en.reason=ht,en.excerpt=it.excerpt,en.pointer=it.pointer,en.location={start:{column:Tt,line:on,offset:Wt}},en}function Kn(ht){throw ht||(ht=Oi()),ei(ht)}function je(ht){ht==="\r"&&nt[Wt]===`
`&&++Wt,Jn=Wt,++on}function de(){if(Wt<Kt){On?.();const ht=nt[Wt++];if(ht==='"'||ht==="'"&&Ut){const Tt=g(ht);return Bn?.("literal",Tt),Tt}if(ht==="{")return Bn?.("symbol","{"),dt();if(ht==="[")return Bn?.("symbol","["),Ye();if(ht==="-"||ht==="."||l(ht)||Ne&&(ht==="+"||ht==="I"||ht==="N")){const Tt=De();return Bn?.("literal",Tt),Tt}if(ht==="n")return We("null"),Bn?.("literal",null),null;if(ht==="t")return We("true"),Bn?.("literal",!0),!0;if(ht==="f")return We("false"),Bn?.("literal",!1),!1;--Wt,Bn?.();return}}function re(){let ht;if(Wt<Kt){On?.();const Tt=nt[Wt++];if(Tt==='"'||Tt==="'"&&Ut){const it=g(Tt);return Bn?.("literal",it),it}if(Tt==="{")return Bn?.("symbol","{"),dt();if(Tt==="[")return Bn?.("symbol","["),Ye();if(Tt==="."||l(Tt)){const it=De();return Bn?.("literal",it),it}if(Ne&&i.isIdentifierStart(Tt)||Tt==="\\"&&nt[Wt]==="u"){const it=Wt-1;if(ht=Ze(),ht===void 0){Wt=it,Bn?.();return}return Bn?.("literal",ht),ht}--Wt,Bn?.();return}}function le(){o(nt)&&(On?.(),++Wt,Bn?.("bom"))}function pe(){let ht;function Tt(){ht||(ht=!0,--Wt,On(),++Wt)}function it(){ht&&(ht=!1,Bn("whitespace"))}for(;Wt<Kt;){const en=nt[Wt++];if(Ot(en))On&&Tt(),je(en);else if(qt(en))On&&Tt();else if(en==="/"&&lt&&(nt[Wt]==="/"||nt[Wt]==="*"))On&&(--Wt,it(),On(),++Wt),Te(nt[Wt++]==="*"),Bn?.("comment");else{--Wt;break}}Bn&&it()}function Te(ht){for(;Wt<Kt;){const Tt=nt[Wt++];if(Ot(Tt)){if(!ht){--Wt;return}je(Tt)}else if(Tt==="*"&&ht&&nt[Wt]==="/"){++Wt;return}}ht&&Kn("Unclosed multiline comment")}function We(ht){const Tt=Wt;for(let it=1,en=ht.length;it<en;++it)(Wt>=Kt||ht[it]!==nt[Wt])&&(Wt=Tt-1,Kn()),++Wt}function dt(){let ht={},Tt=!1;for(;Wt<Kt;){pe();const it=re();Fe===!1&&C(ht,it)&&Kn(`Duplicate key: "${it}"`),pe(),On?.();let en=nt[Wt++];if(Bn?.("symbol",en),en==="}"&&it===void 0)return!kt&&Tt&&(--Wt,Kn("Trailing comma in object")),ht;if(en===":"&&it!==void 0){pe(),In?.push(it);let Dn=de();if(In?.pop(),Dn===void 0&&Kn(`No value found for key "${it}"`),typeof it!="string"&&(!Ne||typeof it!="number")&&Kn(`Wrong key type: "${it}"`),St&&(it in w||w[it]!=null)||gt&&it==="__proto__"||(Ke&&(Dn=Ke(it,Dn)),Dn!==void 0&&(Tt=!0,it==="__proto__"?ht=Object.assign(JSON.parse(`{"__proto__":${JSON.stringify(Dn)}}`),ht):ht[it]=Dn)),pe(),On?.(),en=nt[Wt++],Bn?.("symbol",en),en!==","){if(en==="}")return ht;Kn()}}else--Wt,Kn()}Kn()}function Ye(){const ht=[];for(;Wt<Kt;){pe(),In?.push(ht.length);let Tt=de();In?.pop(),pe(),On?.();const it=nt[Wt++];if(Bn?.("symbol",it),Tt!==void 0&&(Ke&&(Tt=Ke(String(ht.length),Tt)),Tt===void 0?(++ht.length,Tt=!0):ht.push(Tt)),it===",")Tt===void 0&&Kn("Elisions are not supported");else{if(it==="]")return!kt&&Tt===void 0&&ht.length&&(--Wt,Kn("Trailing comma in array")),ht;--Wt,Kn()}}}function De(){--Wt;let ht=Wt,Tt=nt[Wt++];const it=function(en){const Dn=nt.substr(ht,Wt-ht);let Mn;if(en?Mn=Number.parseInt(Dn.replace(/^0o?/,""),8):Mn=Number(Dn),Number.isNaN(Mn))--Wt,Kn(`Bad numeric literal - "${nt.substr(ht,Wt-ht+1)}"`);else if(!Ne&&!Dn.match(/^-?(0|[1-9][0-9]*)(\.[0-9]+)?(e[+-]?[0-9]+)?$/i))--Wt,Kn(`Non-json numeric literal - "${nt.substr(ht,Wt-ht+1)}"`);else return Mn};if((Tt==="-"||Tt==="+"&&Ne)&&(Tt=nt[Wt++]),Tt==="N"&&Ne)return We("NaN"),Number.NaN;if(Tt==="I"&&Ne)return We("Infinity"),it();if(Tt>="1"&&Tt<="9"){for(;Wt<Kt&&l(nt[Wt]);)++Wt;Tt=nt[Wt++]}if(Tt==="0"){Tt=nt[Wt++];const en=Tt==="o"||Tt==="O"||a(Tt),Dn=Tt==="x"||Tt==="X";if(Ne&&(en||Dn)){for(;Wt<Kt&&(Dn?r:a)(nt[Wt]);)++Wt;let Mn=1;return nt[ht]==="-"?(Mn=-1,++ht):nt[ht]==="+"&&++ht,Mn*it(en)}}if(Tt==="."){for(;Wt<Kt&&l(nt[Wt]);)++Wt;Tt=nt[Wt++]}if(Tt==="e"||Tt==="E"){for(Tt=nt[Wt++],(Tt==="-"||Tt==="+")&&++Wt;Wt<Kt&&l(nt[Wt]);)++Wt;Tt=nt[Wt++]}return--Wt,it()}function Ze(){--Wt;let ht="";for(;Wt<Kt;){let Tt=nt[Wt++];if(Tt==="\\"&&nt[Wt]==="u"&&r(nt[Wt+1])&&r(nt[Wt+2])&&r(nt[Wt+3])&&r(nt[Wt+4])&&(Tt=String.fromCharCode(Number.parseInt(nt.substr(Wt+1,4),16)),Wt+=5),ht.length)if(i.isIdentifierPart(Tt))ht+=Tt;else return--Wt,ht;else if(i.isIdentifierStart(Tt))ht+=Tt;else return}Kn()}function g(ht){let Tt="";for(;Wt<Kt;){let it=nt[Wt++];if(it===ht)return Tt;if(it==="\\")if(Wt>=Kt&&Kn(),it=nt[Wt++],p[it]&&(Ne||it!=="v"&&(it!=="'"||Ut)))Tt+=p[it];else if(Ne&&Ot(it))je(it);else if(it==="u"||it==="x"&&Ne){const en=it==="u"?4:2;for(let Dn=0;Dn<en;++Dn)Wt>=Kt&&Kn(),r(nt[Wt])||Kn("Bad escape sequence"),Wt++;Tt+=String.fromCharCode(Number.parseInt(nt.substr(Wt-en,en),16))}else if(Ne&&a(it)){let en;it<"4"&&a(nt[Wt])&&a(nt[Wt+1])?en=3:a(nt[Wt])?en=2:en=1,Wt+=en-1,Tt+=String.fromCharCode(Number.parseInt(nt.substr(Wt-en,en),8))}else Ne?Tt+=it:(--Wt,Kn());else Ot(it)?Kn():(!Ne&&it.charCodeAt(0)<32&&(--Wt,Kn("Unexpected control character")),Tt+=it)}Kn()}tt&&le(),pe();let mt=de();if(mt!==void 0||Wt<Kt){if(pe(),Wt>=Kt)return Ke&&(mt=Ke("",mt)),Re?$n:mt;Kn()}else Kn(Wt?"No data, only a whitespace":"No data, empty input")}function U(nt,be){return typeof be=="function"?be={reviver:be}:be||(be={}),O(nt,be)}function K(nt,be){be||(be={});const Ne=be.tokenize;be.tokenize=!0;const tt=O(nt,be);return be.tokenize=Ne,tt}function j(nt){return nt.toString().replace(/~/g,"~0").replace(/\//g,"~1")}function W(nt){return nt.length===0?"":`/${nt.map(j).join("/")}`}function Y(nt){return nt.replace(/~1/g,"/").replace(/~0/g,"~")}function te(nt){if(nt==="")return[];if(nt[0]!=="/")throw new Error('Missing initial "/" in the reference');return nt.substr(1).split("/").map(Y)}function J(nt,be){const Ne=nt.substr(0,be).split(/\r?\n/),tt=Ne.length,lt=Ne[tt-1].length+1;return{line:tt,column:lt}}function oe(nt,be,Ne){if(be>1){const tt=/\r?\n/g;let lt;for(;lt=tt.exec(nt);)if(--be===1)return lt.index+Ne}return Ne-1}function ne(nt,be){const Ne=Math.max(0,be-20),tt=nt.substr(Ne,be-Ne);return(be>20?"...":"")+tt.replace(/\r?\n/g,"")}function $(nt,be){let Ne=Math.max(0,be-20);Ne+=be-Ne;const tt=nt.length-Ne;return nt.substr(Ne,Math.min(20,tt)).replace(/\r?\n/g,"")+(tt>20?"...":"")}function ae(nt,be){const Ne=ne(nt,be),tt=$(nt,be),lt=`${new Array(Ne.length+1).join("-")}^`;return{excerpt:Ne+tt,pointer:lt}}function G(nt){let be=nt.message.replace("JSON.parse: ","").replace("JSON Parse error: ","");const Ne=be.charAt(0);return Ne>="a"&&(be=Ne.toUpperCase()+be.substr(1)),be}function ce(nt,be){const Ne=/ in JSON at position (\d+)$/.exec(be);if(Ne){const tt=+Ne[1],lt=J(nt,tt);return{offset:tt,line:lt.line,column:lt.column,reason:be.substr(0,Ne.index)}}}function ge(nt,be){const Ne=/ end of JSON input$/.exec(be);if(Ne){const tt=nt.length,lt=J(nt,tt);return{offset:tt,line:lt.line,column:lt.column,reason:be.substr(0,Ne.index+4)}}}function ye(nt,be){const Ne=/ at line (\d+) column (\d+) of the JSON data$/.exec(be);if(Ne){const tt=+Ne[1],lt=+Ne[2];return{offset:oe(nt,tt,lt),line:tt,column:lt,reason:be.substr(0,Ne.index)}}}function we(nt,be,Ne,tt,lt){const kt=ae(be,Ne),gt=kt.excerpt;let St,Ut;return typeof tt=="number"?(Ut=kt.pointer,St=`Parse error on line ${tt}, column ${lt}:
${gt}
${Ut}
${nt}`):St=`Parse error in JSON input:
${gt}
${nt}`,{message:St,excerpt:gt,pointer:Ut}}function Oe(nt,be){let Ne=G(be);const tt=ce(nt,Ne)||ge(nt,Ne)||ye(nt,Ne);let lt,kt,gt;tt?(lt=tt.offset,kt=tt.line,gt=tt.column,Ne=tt.reason):lt=0,be.reason=Ne;const St=we(Ne,nt,lt,kt,gt);return be.message=St.message,be.excerpt=St.excerpt,St.pointer&&(be.pointer=St.pointer,be.location={start:{column:gt,line:kt,offset:lt}}),be}function Se(nt,be){try{return JSON.parse(nt,be)}catch(Ne){const tt=Oe(nt,Ne);if(Ne.location)throw tt;return U(nt,be)}}const Ve=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),xe=typeof process<"u"&&process.version.startsWith("v4.");function ze(nt){return nt.ignoreBOM||nt.ignoreComments||nt.ignoreTrailingCommas||nt.allowSingleQuotedStrings||nt.allowDuplicateObjectKeys===!1||nt.ignoreProtoKey||nt.ignorePrototypeKeys||nt.mode==="cjson"||nt.mode==="json5"||Ve||xe}function st(nt){if(typeof nt=="function")return nt;if(nt)return nt.reviver}function Ct(nt,be){return be||(be={}),ze(be)?U(nt,be):Se(nt,st(be))}t.parse=Ct,t.tokenize=K,t.pathToPointer=W,t.pointerToPath=te,t.parseNative=Se,t.parseCustom=U,t.getErrorTexts=we,Object.defineProperty(t,"__esModule",{value:!0})})}(jC,jC.exports)),jC.exports}var Sle=wle(),Tx={exports:{}},Ele=Tx.exports,fk;function Ble(){return fk||(fk=1,function(n,e){(function(t,i){n.exports=i()})(Ele,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function i(Ke,Re){return Re={exports:{}},Ke(Re,Re.exports),Re.exports}var r=i(function(Ke){function Re(){var He=0,bt=1,_t=2,Ot=3,qt=4,Kt=5,on=6,Jn=7,Wt=8,$n=9,On=10,Bn=11,In=12,Oi=13,ei=14,Kn=15,je=16,de=17,re=0,le=1,pe=2,Te=3,We=4;function dt(g,mt){return 55296<=g.charCodeAt(mt)&&g.charCodeAt(mt)<=56319&&56320<=g.charCodeAt(mt+1)&&g.charCodeAt(mt+1)<=57343}function Ye(g,mt){mt===void 0&&(mt=0);var ht=g.charCodeAt(mt);if(55296<=ht&&ht<=56319&&mt<g.length-1){var Tt=ht,it=g.charCodeAt(mt+1);return 56320<=it&&it<=57343?(Tt-55296)*1024+(it-56320)+65536:Tt}if(56320<=ht&&ht<=57343&&mt>=1){var Tt=g.charCodeAt(mt-1),it=ht;return 55296<=Tt&&Tt<=56319?(Tt-55296)*1024+(it-56320)+65536:it}return ht}function De(g,mt,ht){var Tt=[g].concat(mt).concat([ht]),it=Tt[Tt.length-2],en=ht,Dn=Tt.lastIndexOf(ei);if(Dn>1&&Tt.slice(1,Dn).every(function(Wn){return Wn==Ot})&&[Ot,Oi,de].indexOf(g)==-1)return pe;var Mn=Tt.lastIndexOf(qt);if(Mn>0&&Tt.slice(1,Mn).every(function(Wn){return Wn==qt})&&[In,qt].indexOf(it)==-1)return Tt.filter(function(Wn){return Wn==qt}).length%2==1?Te:We;if(it==He&&en==bt)return re;if(it==_t||it==He||it==bt)return en==ei&&mt.every(function(Wn){return Wn==Ot})?pe:le;if(en==_t||en==He||en==bt)return le;if(it==on&&(en==on||en==Jn||en==$n||en==On))return re;if((it==$n||it==Jn)&&(en==Jn||en==Wt))return re;if((it==On||it==Wt)&&en==Wt)return re;if(en==Ot||en==Kn)return re;if(en==Kt)return re;if(it==In)return re;var ii=Tt.indexOf(Ot)!=-1?Tt.lastIndexOf(Ot)-1:Tt.length-2;return[Oi,de].indexOf(Tt[ii])!=-1&&Tt.slice(ii+1,-1).every(function(Wn){return Wn==Ot})&&en==ei||it==Kn&&[je,de].indexOf(en)!=-1?re:mt.indexOf(qt)!=-1?pe:it==qt&&en==qt?re:le}this.nextBreak=function(g,mt){if(mt===void 0&&(mt=0),mt<0)return 0;if(mt>=g.length-1)return g.length;for(var ht=Ze(Ye(g,mt)),Tt=[],it=mt+1;it<g.length;it++)if(!dt(g,it-1)){var en=Ze(Ye(g,it));if(De(ht,Tt,en))return it;Tt.push(en)}return g.length},this.splitGraphemes=function(g){for(var mt=[],ht=0,Tt;(Tt=this.nextBreak(g,ht))<g.length;)mt.push(g.slice(ht,Tt)),ht=Tt;return ht<g.length&&mt.push(g.slice(ht)),mt},this.iterateGraphemes=function(g){var mt=0,ht={next:(function(){var Tt,it;return(it=this.nextBreak(g,mt))<g.length?(Tt=g.slice(mt,it),mt=it,{value:Tt,done:!1}):mt<g.length?(Tt=g.slice(mt),mt=g.length,{value:Tt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(ht[Symbol.iterator]=function(){return ht}),ht},this.countGraphemes=function(g){for(var mt=0,ht=0,Tt;(Tt=this.nextBreak(g,ht))<g.length;)ht=Tt,mt++;return ht<g.length&&mt++,mt};function Ze(g){return 1536<=g&&g<=1541||g==1757||g==1807||g==2274||g==3406||g==69821||70082<=g&&g<=70083||g==72250||72326<=g&&g<=72329||g==73030?In:g==13?He:g==10?bt:0<=g&&g<=9||11<=g&&g<=12||14<=g&&g<=31||127<=g&&g<=159||g==173||g==1564||g==6158||g==8203||8206<=g&&g<=8207||g==8232||g==8233||8234<=g&&g<=8238||8288<=g&&g<=8292||g==8293||8294<=g&&g<=8303||55296<=g&&g<=57343||g==65279||65520<=g&&g<=65528||65529<=g&&g<=65531||113824<=g&&g<=113827||119155<=g&&g<=119162||g==917504||g==917505||917506<=g&&g<=917535||917632<=g&&g<=917759||918e3<=g&&g<=921599?_t:768<=g&&g<=879||1155<=g&&g<=1159||1160<=g&&g<=1161||1425<=g&&g<=1469||g==1471||1473<=g&&g<=1474||1476<=g&&g<=1477||g==1479||1552<=g&&g<=1562||1611<=g&&g<=1631||g==1648||1750<=g&&g<=1756||1759<=g&&g<=1764||1767<=g&&g<=1768||1770<=g&&g<=1773||g==1809||1840<=g&&g<=1866||1958<=g&&g<=1968||2027<=g&&g<=2035||2070<=g&&g<=2073||2075<=g&&g<=2083||2085<=g&&g<=2087||2089<=g&&g<=2093||2137<=g&&g<=2139||2260<=g&&g<=2273||2275<=g&&g<=2306||g==2362||g==2364||2369<=g&&g<=2376||g==2381||2385<=g&&g<=2391||2402<=g&&g<=2403||g==2433||g==2492||g==2494||2497<=g&&g<=2500||g==2509||g==2519||2530<=g&&g<=2531||2561<=g&&g<=2562||g==2620||2625<=g&&g<=2626||2631<=g&&g<=2632||2635<=g&&g<=2637||g==2641||2672<=g&&g<=2673||g==2677||2689<=g&&g<=2690||g==2748||2753<=g&&g<=2757||2759<=g&&g<=2760||g==2765||2786<=g&&g<=2787||2810<=g&&g<=2815||g==2817||g==2876||g==2878||g==2879||2881<=g&&g<=2884||g==2893||g==2902||g==2903||2914<=g&&g<=2915||g==2946||g==3006||g==3008||g==3021||g==3031||g==3072||3134<=g&&g<=3136||3142<=g&&g<=3144||3146<=g&&g<=3149||3157<=g&&g<=3158||3170<=g&&g<=3171||g==3201||g==3260||g==3263||g==3266||g==3270||3276<=g&&g<=3277||3285<=g&&g<=3286||3298<=g&&g<=3299||3328<=g&&g<=3329||3387<=g&&g<=3388||g==3390||3393<=g&&g<=3396||g==3405||g==3415||3426<=g&&g<=3427||g==3530||g==3535||3538<=g&&g<=3540||g==3542||g==3551||g==3633||3636<=g&&g<=3642||3655<=g&&g<=3662||g==3761||3764<=g&&g<=3769||3771<=g&&g<=3772||3784<=g&&g<=3789||3864<=g&&g<=3865||g==3893||g==3895||g==3897||3953<=g&&g<=3966||3968<=g&&g<=3972||3974<=g&&g<=3975||3981<=g&&g<=3991||3993<=g&&g<=4028||g==4038||4141<=g&&g<=4144||4146<=g&&g<=4151||4153<=g&&g<=4154||4157<=g&&g<=4158||4184<=g&&g<=4185||4190<=g&&g<=4192||4209<=g&&g<=4212||g==4226||4229<=g&&g<=4230||g==4237||g==4253||4957<=g&&g<=4959||5906<=g&&g<=5908||5938<=g&&g<=5940||5970<=g&&g<=5971||6002<=g&&g<=6003||6068<=g&&g<=6069||6071<=g&&g<=6077||g==6086||6089<=g&&g<=6099||g==6109||6155<=g&&g<=6157||6277<=g&&g<=6278||g==6313||6432<=g&&g<=6434||6439<=g&&g<=6440||g==6450||6457<=g&&g<=6459||6679<=g&&g<=6680||g==6683||g==6742||6744<=g&&g<=6750||g==6752||g==6754||6757<=g&&g<=6764||6771<=g&&g<=6780||g==6783||6832<=g&&g<=6845||g==6846||6912<=g&&g<=6915||g==6964||6966<=g&&g<=6970||g==6972||g==6978||7019<=g&&g<=7027||7040<=g&&g<=7041||7074<=g&&g<=7077||7080<=g&&g<=7081||7083<=g&&g<=7085||g==7142||7144<=g&&g<=7145||g==7149||7151<=g&&g<=7153||7212<=g&&g<=7219||7222<=g&&g<=7223||7376<=g&&g<=7378||7380<=g&&g<=7392||7394<=g&&g<=7400||g==7405||g==7412||7416<=g&&g<=7417||7616<=g&&g<=7673||7675<=g&&g<=7679||g==8204||8400<=g&&g<=8412||8413<=g&&g<=8416||g==8417||8418<=g&&g<=8420||8421<=g&&g<=8432||11503<=g&&g<=11505||g==11647||11744<=g&&g<=11775||12330<=g&&g<=12333||12334<=g&&g<=12335||12441<=g&&g<=12442||g==42607||42608<=g&&g<=42610||42612<=g&&g<=42621||42654<=g&&g<=42655||42736<=g&&g<=42737||g==43010||g==43014||g==43019||43045<=g&&g<=43046||43204<=g&&g<=43205||43232<=g&&g<=43249||43302<=g&&g<=43309||43335<=g&&g<=43345||43392<=g&&g<=43394||g==43443||43446<=g&&g<=43449||g==43452||g==43493||43561<=g&&g<=43566||43569<=g&&g<=43570||43573<=g&&g<=43574||g==43587||g==43596||g==43644||g==43696||43698<=g&&g<=43700||43703<=g&&g<=43704||43710<=g&&g<=43711||g==43713||43756<=g&&g<=43757||g==43766||g==44005||g==44008||g==44013||g==64286||65024<=g&&g<=65039||65056<=g&&g<=65071||65438<=g&&g<=65439||g==66045||g==66272||66422<=g&&g<=66426||68097<=g&&g<=68099||68101<=g&&g<=68102||68108<=g&&g<=68111||68152<=g&&g<=68154||g==68159||68325<=g&&g<=68326||g==69633||69688<=g&&g<=69702||69759<=g&&g<=69761||69811<=g&&g<=69814||69817<=g&&g<=69818||69888<=g&&g<=69890||69927<=g&&g<=69931||69933<=g&&g<=69940||g==70003||70016<=g&&g<=70017||70070<=g&&g<=70078||70090<=g&&g<=70092||70191<=g&&g<=70193||g==70196||70198<=g&&g<=70199||g==70206||g==70367||70371<=g&&g<=70378||70400<=g&&g<=70401||g==70460||g==70462||g==70464||g==70487||70502<=g&&g<=70508||70512<=g&&g<=70516||70712<=g&&g<=70719||70722<=g&&g<=70724||g==70726||g==70832||70835<=g&&g<=70840||g==70842||g==70845||70847<=g&&g<=70848||70850<=g&&g<=70851||g==71087||71090<=g&&g<=71093||71100<=g&&g<=71101||71103<=g&&g<=71104||71132<=g&&g<=71133||71219<=g&&g<=71226||g==71229||71231<=g&&g<=71232||g==71339||g==71341||71344<=g&&g<=71349||g==71351||71453<=g&&g<=71455||71458<=g&&g<=71461||71463<=g&&g<=71467||72193<=g&&g<=72198||72201<=g&&g<=72202||72243<=g&&g<=72248||72251<=g&&g<=72254||g==72263||72273<=g&&g<=72278||72281<=g&&g<=72283||72330<=g&&g<=72342||72344<=g&&g<=72345||72752<=g&&g<=72758||72760<=g&&g<=72765||g==72767||72850<=g&&g<=72871||72874<=g&&g<=72880||72882<=g&&g<=72883||72885<=g&&g<=72886||73009<=g&&g<=73014||g==73018||73020<=g&&g<=73021||73023<=g&&g<=73029||g==73031||92912<=g&&g<=92916||92976<=g&&g<=92982||94095<=g&&g<=94098||113821<=g&&g<=113822||g==119141||119143<=g&&g<=119145||119150<=g&&g<=119154||119163<=g&&g<=119170||119173<=g&&g<=119179||119210<=g&&g<=119213||119362<=g&&g<=119364||121344<=g&&g<=121398||121403<=g&&g<=121452||g==121461||g==121476||121499<=g&&g<=121503||121505<=g&&g<=121519||122880<=g&&g<=122886||122888<=g&&g<=122904||122907<=g&&g<=122913||122915<=g&&g<=122916||122918<=g&&g<=122922||125136<=g&&g<=125142||125252<=g&&g<=125258||917536<=g&&g<=917631||917760<=g&&g<=917999?Ot:127462<=g&&g<=127487?qt:g==2307||g==2363||2366<=g&&g<=2368||2377<=g&&g<=2380||2382<=g&&g<=2383||2434<=g&&g<=2435||2495<=g&&g<=2496||2503<=g&&g<=2504||2507<=g&&g<=2508||g==2563||2622<=g&&g<=2624||g==2691||2750<=g&&g<=2752||g==2761||2763<=g&&g<=2764||2818<=g&&g<=2819||g==2880||2887<=g&&g<=2888||2891<=g&&g<=2892||g==3007||3009<=g&&g<=3010||3014<=g&&g<=3016||3018<=g&&g<=3020||3073<=g&&g<=3075||3137<=g&&g<=3140||3202<=g&&g<=3203||g==3262||3264<=g&&g<=3265||3267<=g&&g<=3268||3271<=g&&g<=3272||3274<=g&&g<=3275||3330<=g&&g<=3331||3391<=g&&g<=3392||3398<=g&&g<=3400||3402<=g&&g<=3404||3458<=g&&g<=3459||3536<=g&&g<=3537||3544<=g&&g<=3550||3570<=g&&g<=3571||g==3635||g==3763||3902<=g&&g<=3903||g==3967||g==4145||4155<=g&&g<=4156||4182<=g&&g<=4183||g==4228||g==6070||6078<=g&&g<=6085||6087<=g&&g<=6088||6435<=g&&g<=6438||6441<=g&&g<=6443||6448<=g&&g<=6449||6451<=g&&g<=6456||6681<=g&&g<=6682||g==6741||g==6743||6765<=g&&g<=6770||g==6916||g==6965||g==6971||6973<=g&&g<=6977||6979<=g&&g<=6980||g==7042||g==7073||7078<=g&&g<=7079||g==7082||g==7143||7146<=g&&g<=7148||g==7150||7154<=g&&g<=7155||7204<=g&&g<=7211||7220<=g&&g<=7221||g==7393||7410<=g&&g<=7411||g==7415||43043<=g&&g<=43044||g==43047||43136<=g&&g<=43137||43188<=g&&g<=43203||43346<=g&&g<=43347||g==43395||43444<=g&&g<=43445||43450<=g&&g<=43451||43453<=g&&g<=43456||43567<=g&&g<=43568||43571<=g&&g<=43572||g==43597||g==43755||43758<=g&&g<=43759||g==43765||44003<=g&&g<=44004||44006<=g&&g<=44007||44009<=g&&g<=44010||g==44012||g==69632||g==69634||g==69762||69808<=g&&g<=69810||69815<=g&&g<=69816||g==69932||g==70018||70067<=g&&g<=70069||70079<=g&&g<=70080||70188<=g&&g<=70190||70194<=g&&g<=70195||g==70197||70368<=g&&g<=70370||70402<=g&&g<=70403||g==70463||70465<=g&&g<=70468||70471<=g&&g<=70472||70475<=g&&g<=70477||70498<=g&&g<=70499||70709<=g&&g<=70711||70720<=g&&g<=70721||g==70725||70833<=g&&g<=70834||g==70841||70843<=g&&g<=70844||g==70846||g==70849||71088<=g&&g<=71089||71096<=g&&g<=71099||g==71102||71216<=g&&g<=71218||71227<=g&&g<=71228||g==71230||g==71340||71342<=g&&g<=71343||g==71350||71456<=g&&g<=71457||g==71462||72199<=g&&g<=72200||g==72249||72279<=g&&g<=72280||g==72343||g==72751||g==72766||g==72873||g==72881||g==72884||94033<=g&&g<=94078||g==119142||g==119149?Kt:4352<=g&&g<=4447||43360<=g&&g<=43388?on:4448<=g&&g<=4519||55216<=g&&g<=55238?Jn:4520<=g&&g<=4607||55243<=g&&g<=55291?Wt:g==44032||g==44060||g==44088||g==44116||g==44144||g==44172||g==44200||g==44228||g==44256||g==44284||g==44312||g==44340||g==44368||g==44396||g==44424||g==44452||g==44480||g==44508||g==44536||g==44564||g==44592||g==44620||g==44648||g==44676||g==44704||g==44732||g==44760||g==44788||g==44816||g==44844||g==44872||g==44900||g==44928||g==44956||g==44984||g==45012||g==45040||g==45068||g==45096||g==45124||g==45152||g==45180||g==45208||g==45236||g==45264||g==45292||g==45320||g==45348||g==45376||g==45404||g==45432||g==45460||g==45488||g==45516||g==45544||g==45572||g==45600||g==45628||g==45656||g==45684||g==45712||g==45740||g==45768||g==45796||g==45824||g==45852||g==45880||g==45908||g==45936||g==45964||g==45992||g==46020||g==46048||g==46076||g==46104||g==46132||g==46160||g==46188||g==46216||g==46244||g==46272||g==46300||g==46328||g==46356||g==46384||g==46412||g==46440||g==46468||g==46496||g==46524||g==46552||g==46580||g==46608||g==46636||g==46664||g==46692||g==46720||g==46748||g==46776||g==46804||g==46832||g==46860||g==46888||g==46916||g==46944||g==46972||g==47e3||g==47028||g==47056||g==47084||g==47112||g==47140||g==47168||g==47196||g==47224||g==47252||g==47280||g==47308||g==47336||g==47364||g==47392||g==47420||g==47448||g==47476||g==47504||g==47532||g==47560||g==47588||g==47616||g==47644||g==47672||g==47700||g==47728||g==47756||g==47784||g==47812||g==47840||g==47868||g==47896||g==47924||g==47952||g==47980||g==48008||g==48036||g==48064||g==48092||g==48120||g==48148||g==48176||g==48204||g==48232||g==48260||g==48288||g==48316||g==48344||g==48372||g==48400||g==48428||g==48456||g==48484||g==48512||g==48540||g==48568||g==48596||g==48624||g==48652||g==48680||g==48708||g==48736||g==48764||g==48792||g==48820||g==48848||g==48876||g==48904||g==48932||g==48960||g==48988||g==49016||g==49044||g==49072||g==49100||g==49128||g==49156||g==49184||g==49212||g==49240||g==49268||g==49296||g==49324||g==49352||g==49380||g==49408||g==49436||g==49464||g==49492||g==49520||g==49548||g==49576||g==49604||g==49632||g==49660||g==49688||g==49716||g==49744||g==49772||g==49800||g==49828||g==49856||g==49884||g==49912||g==49940||g==49968||g==49996||g==50024||g==50052||g==50080||g==50108||g==50136||g==50164||g==50192||g==50220||g==50248||g==50276||g==50304||g==50332||g==50360||g==50388||g==50416||g==50444||g==50472||g==50500||g==50528||g==50556||g==50584||g==50612||g==50640||g==50668||g==50696||g==50724||g==50752||g==50780||g==50808||g==50836||g==50864||g==50892||g==50920||g==50948||g==50976||g==51004||g==51032||g==51060||g==51088||g==51116||g==51144||g==51172||g==51200||g==51228||g==51256||g==51284||g==51312||g==51340||g==51368||g==51396||g==51424||g==51452||g==51480||g==51508||g==51536||g==51564||g==51592||g==51620||g==51648||g==51676||g==51704||g==51732||g==51760||g==51788||g==51816||g==51844||g==51872||g==51900||g==51928||g==51956||g==51984||g==52012||g==52040||g==52068||g==52096||g==52124||g==52152||g==52180||g==52208||g==52236||g==52264||g==52292||g==52320||g==52348||g==52376||g==52404||g==52432||g==52460||g==52488||g==52516||g==52544||g==52572||g==52600||g==52628||g==52656||g==52684||g==52712||g==52740||g==52768||g==52796||g==52824||g==52852||g==52880||g==52908||g==52936||g==52964||g==52992||g==53020||g==53048||g==53076||g==53104||g==53132||g==53160||g==53188||g==53216||g==53244||g==53272||g==53300||g==53328||g==53356||g==53384||g==53412||g==53440||g==53468||g==53496||g==53524||g==53552||g==53580||g==53608||g==53636||g==53664||g==53692||g==53720||g==53748||g==53776||g==53804||g==53832||g==53860||g==53888||g==53916||g==53944||g==53972||g==54e3||g==54028||g==54056||g==54084||g==54112||g==54140||g==54168||g==54196||g==54224||g==54252||g==54280||g==54308||g==54336||g==54364||g==54392||g==54420||g==54448||g==54476||g==54504||g==54532||g==54560||g==54588||g==54616||g==54644||g==54672||g==54700||g==54728||g==54756||g==54784||g==54812||g==54840||g==54868||g==54896||g==54924||g==54952||g==54980||g==55008||g==55036||g==55064||g==55092||g==55120||g==55148||g==55176?$n:44033<=g&&g<=44059||44061<=g&&g<=44087||44089<=g&&g<=44115||44117<=g&&g<=44143||44145<=g&&g<=44171||44173<=g&&g<=44199||44201<=g&&g<=44227||44229<=g&&g<=44255||44257<=g&&g<=44283||44285<=g&&g<=44311||44313<=g&&g<=44339||44341<=g&&g<=44367||44369<=g&&g<=44395||44397<=g&&g<=44423||44425<=g&&g<=44451||44453<=g&&g<=44479||44481<=g&&g<=44507||44509<=g&&g<=44535||44537<=g&&g<=44563||44565<=g&&g<=44591||44593<=g&&g<=44619||44621<=g&&g<=44647||44649<=g&&g<=44675||44677<=g&&g<=44703||44705<=g&&g<=44731||44733<=g&&g<=44759||44761<=g&&g<=44787||44789<=g&&g<=44815||44817<=g&&g<=44843||44845<=g&&g<=44871||44873<=g&&g<=44899||44901<=g&&g<=44927||44929<=g&&g<=44955||44957<=g&&g<=44983||44985<=g&&g<=45011||45013<=g&&g<=45039||45041<=g&&g<=45067||45069<=g&&g<=45095||45097<=g&&g<=45123||45125<=g&&g<=45151||45153<=g&&g<=45179||45181<=g&&g<=45207||45209<=g&&g<=45235||45237<=g&&g<=45263||45265<=g&&g<=45291||45293<=g&&g<=45319||45321<=g&&g<=45347||45349<=g&&g<=45375||45377<=g&&g<=45403||45405<=g&&g<=45431||45433<=g&&g<=45459||45461<=g&&g<=45487||45489<=g&&g<=45515||45517<=g&&g<=45543||45545<=g&&g<=45571||45573<=g&&g<=45599||45601<=g&&g<=45627||45629<=g&&g<=45655||45657<=g&&g<=45683||45685<=g&&g<=45711||45713<=g&&g<=45739||45741<=g&&g<=45767||45769<=g&&g<=45795||45797<=g&&g<=45823||45825<=g&&g<=45851||45853<=g&&g<=45879||45881<=g&&g<=45907||45909<=g&&g<=45935||45937<=g&&g<=45963||45965<=g&&g<=45991||45993<=g&&g<=46019||46021<=g&&g<=46047||46049<=g&&g<=46075||46077<=g&&g<=46103||46105<=g&&g<=46131||46133<=g&&g<=46159||46161<=g&&g<=46187||46189<=g&&g<=46215||46217<=g&&g<=46243||46245<=g&&g<=46271||46273<=g&&g<=46299||46301<=g&&g<=46327||46329<=g&&g<=46355||46357<=g&&g<=46383||46385<=g&&g<=46411||46413<=g&&g<=46439||46441<=g&&g<=46467||46469<=g&&g<=46495||46497<=g&&g<=46523||46525<=g&&g<=46551||46553<=g&&g<=46579||46581<=g&&g<=46607||46609<=g&&g<=46635||46637<=g&&g<=46663||46665<=g&&g<=46691||46693<=g&&g<=46719||46721<=g&&g<=46747||46749<=g&&g<=46775||46777<=g&&g<=46803||46805<=g&&g<=46831||46833<=g&&g<=46859||46861<=g&&g<=46887||46889<=g&&g<=46915||46917<=g&&g<=46943||46945<=g&&g<=46971||46973<=g&&g<=46999||47001<=g&&g<=47027||47029<=g&&g<=47055||47057<=g&&g<=47083||47085<=g&&g<=47111||47113<=g&&g<=47139||47141<=g&&g<=47167||47169<=g&&g<=47195||47197<=g&&g<=47223||47225<=g&&g<=47251||47253<=g&&g<=47279||47281<=g&&g<=47307||47309<=g&&g<=47335||47337<=g&&g<=47363||47365<=g&&g<=47391||47393<=g&&g<=47419||47421<=g&&g<=47447||47449<=g&&g<=47475||47477<=g&&g<=47503||47505<=g&&g<=47531||47533<=g&&g<=47559||47561<=g&&g<=47587||47589<=g&&g<=47615||47617<=g&&g<=47643||47645<=g&&g<=47671||47673<=g&&g<=47699||47701<=g&&g<=47727||47729<=g&&g<=47755||47757<=g&&g<=47783||47785<=g&&g<=47811||47813<=g&&g<=47839||47841<=g&&g<=47867||47869<=g&&g<=47895||47897<=g&&g<=47923||47925<=g&&g<=47951||47953<=g&&g<=47979||47981<=g&&g<=48007||48009<=g&&g<=48035||48037<=g&&g<=48063||48065<=g&&g<=48091||48093<=g&&g<=48119||48121<=g&&g<=48147||48149<=g&&g<=48175||48177<=g&&g<=48203||48205<=g&&g<=48231||48233<=g&&g<=48259||48261<=g&&g<=48287||48289<=g&&g<=48315||48317<=g&&g<=48343||48345<=g&&g<=48371||48373<=g&&g<=48399||48401<=g&&g<=48427||48429<=g&&g<=48455||48457<=g&&g<=48483||48485<=g&&g<=48511||48513<=g&&g<=48539||48541<=g&&g<=48567||48569<=g&&g<=48595||48597<=g&&g<=48623||48625<=g&&g<=48651||48653<=g&&g<=48679||48681<=g&&g<=48707||48709<=g&&g<=48735||48737<=g&&g<=48763||48765<=g&&g<=48791||48793<=g&&g<=48819||48821<=g&&g<=48847||48849<=g&&g<=48875||48877<=g&&g<=48903||48905<=g&&g<=48931||48933<=g&&g<=48959||48961<=g&&g<=48987||48989<=g&&g<=49015||49017<=g&&g<=49043||49045<=g&&g<=49071||49073<=g&&g<=49099||49101<=g&&g<=49127||49129<=g&&g<=49155||49157<=g&&g<=49183||49185<=g&&g<=49211||49213<=g&&g<=49239||49241<=g&&g<=49267||49269<=g&&g<=49295||49297<=g&&g<=49323||49325<=g&&g<=49351||49353<=g&&g<=49379||49381<=g&&g<=49407||49409<=g&&g<=49435||49437<=g&&g<=49463||49465<=g&&g<=49491||49493<=g&&g<=49519||49521<=g&&g<=49547||49549<=g&&g<=49575||49577<=g&&g<=49603||49605<=g&&g<=49631||49633<=g&&g<=49659||49661<=g&&g<=49687||49689<=g&&g<=49715||49717<=g&&g<=49743||49745<=g&&g<=49771||49773<=g&&g<=49799||49801<=g&&g<=49827||49829<=g&&g<=49855||49857<=g&&g<=49883||49885<=g&&g<=49911||49913<=g&&g<=49939||49941<=g&&g<=49967||49969<=g&&g<=49995||49997<=g&&g<=50023||50025<=g&&g<=50051||50053<=g&&g<=50079||50081<=g&&g<=50107||50109<=g&&g<=50135||50137<=g&&g<=50163||50165<=g&&g<=50191||50193<=g&&g<=50219||50221<=g&&g<=50247||50249<=g&&g<=50275||50277<=g&&g<=50303||50305<=g&&g<=50331||50333<=g&&g<=50359||50361<=g&&g<=50387||50389<=g&&g<=50415||50417<=g&&g<=50443||50445<=g&&g<=50471||50473<=g&&g<=50499||50501<=g&&g<=50527||50529<=g&&g<=50555||50557<=g&&g<=50583||50585<=g&&g<=50611||50613<=g&&g<=50639||50641<=g&&g<=50667||50669<=g&&g<=50695||50697<=g&&g<=50723||50725<=g&&g<=50751||50753<=g&&g<=50779||50781<=g&&g<=50807||50809<=g&&g<=50835||50837<=g&&g<=50863||50865<=g&&g<=50891||50893<=g&&g<=50919||50921<=g&&g<=50947||50949<=g&&g<=50975||50977<=g&&g<=51003||51005<=g&&g<=51031||51033<=g&&g<=51059||51061<=g&&g<=51087||51089<=g&&g<=51115||51117<=g&&g<=51143||51145<=g&&g<=51171||51173<=g&&g<=51199||51201<=g&&g<=51227||51229<=g&&g<=51255||51257<=g&&g<=51283||51285<=g&&g<=51311||51313<=g&&g<=51339||51341<=g&&g<=51367||51369<=g&&g<=51395||51397<=g&&g<=51423||51425<=g&&g<=51451||51453<=g&&g<=51479||51481<=g&&g<=51507||51509<=g&&g<=51535||51537<=g&&g<=51563||51565<=g&&g<=51591||51593<=g&&g<=51619||51621<=g&&g<=51647||51649<=g&&g<=51675||51677<=g&&g<=51703||51705<=g&&g<=51731||51733<=g&&g<=51759||51761<=g&&g<=51787||51789<=g&&g<=51815||51817<=g&&g<=51843||51845<=g&&g<=51871||51873<=g&&g<=51899||51901<=g&&g<=51927||51929<=g&&g<=51955||51957<=g&&g<=51983||51985<=g&&g<=52011||52013<=g&&g<=52039||52041<=g&&g<=52067||52069<=g&&g<=52095||52097<=g&&g<=52123||52125<=g&&g<=52151||52153<=g&&g<=52179||52181<=g&&g<=52207||52209<=g&&g<=52235||52237<=g&&g<=52263||52265<=g&&g<=52291||52293<=g&&g<=52319||52321<=g&&g<=52347||52349<=g&&g<=52375||52377<=g&&g<=52403||52405<=g&&g<=52431||52433<=g&&g<=52459||52461<=g&&g<=52487||52489<=g&&g<=52515||52517<=g&&g<=52543||52545<=g&&g<=52571||52573<=g&&g<=52599||52601<=g&&g<=52627||52629<=g&&g<=52655||52657<=g&&g<=52683||52685<=g&&g<=52711||52713<=g&&g<=52739||52741<=g&&g<=52767||52769<=g&&g<=52795||52797<=g&&g<=52823||52825<=g&&g<=52851||52853<=g&&g<=52879||52881<=g&&g<=52907||52909<=g&&g<=52935||52937<=g&&g<=52963||52965<=g&&g<=52991||52993<=g&&g<=53019||53021<=g&&g<=53047||53049<=g&&g<=53075||53077<=g&&g<=53103||53105<=g&&g<=53131||53133<=g&&g<=53159||53161<=g&&g<=53187||53189<=g&&g<=53215||53217<=g&&g<=53243||53245<=g&&g<=53271||53273<=g&&g<=53299||53301<=g&&g<=53327||53329<=g&&g<=53355||53357<=g&&g<=53383||53385<=g&&g<=53411||53413<=g&&g<=53439||53441<=g&&g<=53467||53469<=g&&g<=53495||53497<=g&&g<=53523||53525<=g&&g<=53551||53553<=g&&g<=53579||53581<=g&&g<=53607||53609<=g&&g<=53635||53637<=g&&g<=53663||53665<=g&&g<=53691||53693<=g&&g<=53719||53721<=g&&g<=53747||53749<=g&&g<=53775||53777<=g&&g<=53803||53805<=g&&g<=53831||53833<=g&&g<=53859||53861<=g&&g<=53887||53889<=g&&g<=53915||53917<=g&&g<=53943||53945<=g&&g<=53971||53973<=g&&g<=53999||54001<=g&&g<=54027||54029<=g&&g<=54055||54057<=g&&g<=54083||54085<=g&&g<=54111||54113<=g&&g<=54139||54141<=g&&g<=54167||54169<=g&&g<=54195||54197<=g&&g<=54223||54225<=g&&g<=54251||54253<=g&&g<=54279||54281<=g&&g<=54307||54309<=g&&g<=54335||54337<=g&&g<=54363||54365<=g&&g<=54391||54393<=g&&g<=54419||54421<=g&&g<=54447||54449<=g&&g<=54475||54477<=g&&g<=54503||54505<=g&&g<=54531||54533<=g&&g<=54559||54561<=g&&g<=54587||54589<=g&&g<=54615||54617<=g&&g<=54643||54645<=g&&g<=54671||54673<=g&&g<=54699||54701<=g&&g<=54727||54729<=g&&g<=54755||54757<=g&&g<=54783||54785<=g&&g<=54811||54813<=g&&g<=54839||54841<=g&&g<=54867||54869<=g&&g<=54895||54897<=g&&g<=54923||54925<=g&&g<=54951||54953<=g&&g<=54979||54981<=g&&g<=55007||55009<=g&&g<=55035||55037<=g&&g<=55063||55065<=g&&g<=55091||55093<=g&&g<=55119||55121<=g&&g<=55147||55149<=g&&g<=55175||55177<=g&&g<=55203?On:g==9757||g==9977||9994<=g&&g<=9997||g==127877||127938<=g&&g<=127940||g==127943||127946<=g&&g<=127948||128066<=g&&g<=128067||128070<=g&&g<=128080||g==128110||128112<=g&&g<=128120||g==128124||128129<=g&&g<=128131||128133<=g&&g<=128135||g==128170||128372<=g&&g<=128373||g==128378||g==128400||128405<=g&&g<=128406||128581<=g&&g<=128583||128587<=g&&g<=128591||g==128675||128692<=g&&g<=128694||g==128704||g==128716||129304<=g&&g<=129308||129310<=g&&g<=129311||g==129318||129328<=g&&g<=129337||129341<=g&&g<=129342||129489<=g&&g<=129501?Oi:127995<=g&&g<=127999?ei:g==8205?Kn:g==9792||g==9794||9877<=g&&g<=9878||g==9992||g==10084||g==127752||g==127806||g==127859||g==127891||g==127908||g==127912||g==127979||g==127981||g==128139||128187<=g&&g<=128188||g==128295||g==128300||g==128488||g==128640||g==128658?je:128102<=g&&g<=128105?de:Bn}return this}Ke.exports&&(Ke.exports=Re)}),a=new r,l=function(Re,He,bt){for(var _t=a.iterateGraphemes(Re.substring(He)),Ot="",qt=0;qt<bt-He;qt++){var Kt=_t.next();if(Ot+=Kt.value,Kt.done)break}return Ot},o=function(Ke,Re,He,bt,_t,Ot,qt){return{start:{line:Ke,column:Re,offset:He},end:{line:bt,column:_t,offset:Ot},source:qt||null}},p=i(function(Ke,Re){(function(He,bt){Ke.exports=bt()})(t,function(){var He="",bt,_t=Ot;function Ot(On,Bn){if(typeof On!="string")throw new TypeError("expected a string");if(Bn===1)return On;if(Bn===2)return On+On;var In=On.length*Bn;if(bt!==On||typeof bt>"u")bt=On,He="";else if(He.length>=In)return He.substr(0,In);for(;In>He.length&&Bn>1;)Bn&1&&(He+=On),Bn>>=1,On+=On;return He+=On,He=He.substr(0,In),He}var qt=function(Bn,In,Oi){if(Bn==null||In==null)return Bn;var ei=String(Bn),Kn=typeof In=="number"?In:parseInt(In,10);if(isNaN(Kn)||!isFinite(Kn))return ei;var je=ei.length;if(je>=Kn)return ei;var de=String(Oi);de===""&&(de=" ");for(var re=Kn-je;de.length<re;)de+=de;var le=de.length>re?de.substr(0,re):de;return le+ei},Kt=Object.assign||function(On){for(var Bn=1;Bn<arguments.length;Bn++){var In=arguments[Bn];for(var Oi in In)Object.prototype.hasOwnProperty.call(In,Oi)&&(On[Oi]=In[Oi])}return On};function on(On,Bn,In,Oi){var ei=String(Bn),Kn=qt(ei,In," "),je=_t(" ",Oi.tabSize);return Kn+" | "+On.replace(/\t/g,je)}function Jn(On,Bn,In,Oi,ei){return On.slice(Bn,In).map(function(Kn,je){return on(Kn,Bn+je+1,Oi,ei)}).join(`
`)}var Wt={extraLines:2,tabSize:4},$n=function(Bn,In,Oi,ei){ei=Kt({},Wt,ei);var Kn=Bn.split(/\r\n?|\n|\f/),je=Math.max(1,In-ei.extraLines)-1,de=Math.min(In+ei.extraLines,Kn.length),re=String(de).length,le=Jn(Kn,je,In,re,ei),pe=on(Kn[In-1].substring(0,Oi-1),In,re,ei),Te=_t(" ",pe.length)+"^",We=Jn(Kn,In,de,re,ei);return[le,Te,We].filter(Boolean).join(`
`)};return $n})}),C=new Error().stack,w=function(Ke){var Re=Object.create(SyntaxError.prototype);return Object.assign(Re,Ke,{name:"SyntaxError"}),Object.defineProperty(Re,"stack",{get:function(){return C?C.replace(/^(.+\n){1,3}/,String(Re)+`
`):""}}),Re},O=function(Ke,Re,He,bt,_t){throw w({message:bt?Ke+`
`+p(Re,bt,_t):Ke,rawMessage:Ke,source:He,line:bt,column:_t})},U={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Re){for(var He=arguments.length,bt=Array(He>1?He-1:0),_t=1;_t<He;_t++)bt[_t-1]=arguments[_t];return"Unexpected token <"+Re+"> at "+bt.filter(Boolean).join(":")}},K={unexpectedSymbol:function(Re){for(var He=arguments.length,bt=Array(He>1?He-1:0),_t=1;_t<He;_t++)bt[_t-1]=arguments[_t];return"Unexpected symbol <"+Re+"> at "+bt.filter(Boolean).join(":")}},j={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},W={"{":j.LEFT_BRACE,"}":j.RIGHT_BRACE,"[":j.LEFT_BRACKET,"]":j.RIGHT_BRACKET,":":j.COLON,",":j.COMMA},Y={true:j.TRUE,false:j.FALSE,null:j.NULL},te={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},J={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},oe={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function ne(Ke){return Ke>="1"&&Ke<="9"}function $(Ke){return Ke>="0"&&Ke<="9"}function ae(Ke){return $(Ke)||Ke>="a"&&Ke<="f"||Ke>="A"&&Ke<="F"}function G(Ke){return Ke==="e"||Ke==="E"}function ce(Ke,Re,He,bt){var _t=Ke.charAt(Re);if(_t==="\r")Re++,He++,bt=1,Ke.charAt(Re)===`
`&&Re++;else if(_t===`
`)Re++,He++,bt=1;else if(_t==="	"||_t===" ")Re++,bt++;else return null;return{index:Re,line:He,column:bt}}function ge(Ke,Re,He,bt){var _t=Ke.charAt(Re);return _t in W?{type:W[_t],line:He,column:bt+1,index:Re+1,value:null}:null}function ye(Ke,Re,He,bt){for(var _t in Y)if(Y.hasOwnProperty(_t)&&Ke.substr(Re,_t.length)===_t)return{type:Y[_t],line:He,column:bt+_t.length,index:Re+_t.length,value:_t};return null}function we(Ke,Re,He,bt){for(var _t=Re,Ot=te._START_;Re<Ke.length;){var qt=Ke.charAt(Re);switch(Ot){case te._START_:{if(qt==='"')Re++,Ot=te.START_QUOTE_OR_CHAR;else return null;break}case te.START_QUOTE_OR_CHAR:{if(qt==="\\")Re++,Ot=te.ESCAPE;else{if(qt==='"')return Re++,{type:j.STRING,line:He,column:bt+Re-_t,index:Re,value:Ke.slice(_t,Re)};Re++}break}case te.ESCAPE:{if(qt in J){if(Re++,qt==="u")for(var Kt=0;Kt<4;Kt++){var on=Ke.charAt(Re);if(on&&ae(on))Re++;else return null}Ot=te.START_QUOTE_OR_CHAR}else return null;break}}}}function Oe(Ke,Re,He,bt){var _t=Re,Ot=Re,qt=oe._START_;e:for(;Re<Ke.length;){var Kt=Ke.charAt(Re);switch(qt){case oe._START_:{if(Kt==="-")qt=oe.MINUS;else if(Kt==="0")Ot=Re+1,qt=oe.ZERO;else if(ne(Kt))Ot=Re+1,qt=oe.DIGIT;else return null;break}case oe.MINUS:{if(Kt==="0")Ot=Re+1,qt=oe.ZERO;else if(ne(Kt))Ot=Re+1,qt=oe.DIGIT;else return null;break}case oe.ZERO:{if(Kt===".")qt=oe.POINT;else if(G(Kt))qt=oe.EXP;else break e;break}case oe.DIGIT:{if($(Kt))Ot=Re+1;else if(Kt===".")qt=oe.POINT;else if(G(Kt))qt=oe.EXP;else break e;break}case oe.POINT:{if($(Kt))Ot=Re+1,qt=oe.DIGIT_FRACTION;else break e;break}case oe.DIGIT_FRACTION:{if($(Kt))Ot=Re+1;else if(G(Kt))qt=oe.EXP;else break e;break}case oe.EXP:{if(Kt==="+"||Kt==="-")qt=oe.EXP_DIGIT_OR_SIGN;else if($(Kt))Ot=Re+1,qt=oe.EXP_DIGIT_OR_SIGN;else break e;break}case oe.EXP_DIGIT_OR_SIGN:{if($(Kt))Ot=Re+1;else break e;break}}Re++}return Ot>0?{type:j.NUMBER,line:He,column:bt+Ot-_t,index:Ot,value:Ke.slice(_t,Ot)}:null}var Se=function(Re,He){for(var bt=1,_t=1,Ot=0,qt=[];Ot<Re.length;){var Kt=[Re,Ot,bt,_t],on=ce.apply(void 0,Kt);if(on){Ot=on.index,bt=on.line,_t=on.column;continue}var Jn=ge.apply(void 0,Kt)||ye.apply(void 0,Kt)||we.apply(void 0,Kt)||Oe.apply(void 0,Kt);if(Jn){var Wt={type:Jn.type,value:Jn.value,loc:o(bt,_t,Ot,Jn.line,Jn.column,Jn.index,He.source)};qt.push(Wt),Ot=Jn.index,bt=Jn.line,_t=Jn.column}else O(K.unexpectedSymbol(l(Re,Ot,Ot+1),He.source,bt,_t),Re,He.source,bt,_t)}return qt},Ve={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},xe={_START_:0,KEY:1,COLON:2},ze={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},st={loc:!0,source:null};function Ct(Ke,Re,He){var bt=Re.length>0?Re[Re.length-1].loc.end:{line:1,column:1};O(U.unexpectedEnd(),Ke,He.source,bt.line,bt.column)}function nt(Ke){for(var Re=0,He=0;He<4;He++)Re=Re*16+parseInt(Ke[He],16);return String.fromCharCode(Re)}var be={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Ne=['"',"\\","/"];function tt(Ke){for(var Re="",He=0;He<Ke.length;He++){var bt=Ke.charAt(He);if(bt==="\\"){He++;var _t=Ke.charAt(He);if(_t==="u")Re+=nt(Ke.substr(He+1,4)),He+=4;else if(Ne.indexOf(_t)!==-1)Re+=_t;else if(_t in be)Re+=be[_t];else break}else Re+=bt}return Re}function lt(Ke,Re,He,bt){for(var _t=void 0,Ot={type:"Object",children:[]},qt=Ve._START_;He<Re.length;){var Kt=Re[He];switch(qt){case Ve._START_:{if(Kt.type===j.LEFT_BRACE)_t=Kt,qt=Ve.OPEN_OBJECT,He++;else return null;break}case Ve.OPEN_OBJECT:{if(Kt.type===j.RIGHT_BRACE)return bt.loc&&(Ot.loc=o(_t.loc.start.line,_t.loc.start.column,_t.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,bt.source)),{value:Ot,index:He+1};var on=kt(Ke,Re,He,bt);Ot.children.push(on.value),qt=Ve.PROPERTY,He=on.index;break}case Ve.PROPERTY:{if(Kt.type===j.RIGHT_BRACE)return bt.loc&&(Ot.loc=o(_t.loc.start.line,_t.loc.start.column,_t.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,bt.source)),{value:Ot,index:He+1};Kt.type===j.COMMA?(qt=Ve.COMMA,He++):O(U.unexpectedToken(l(Ke,Kt.loc.start.offset,Kt.loc.end.offset),bt.source,Kt.loc.start.line,Kt.loc.start.column),Ke,bt.source,Kt.loc.start.line,Kt.loc.start.column);break}case Ve.COMMA:{var Jn=kt(Ke,Re,He,bt);Jn?(He=Jn.index,Ot.children.push(Jn.value),qt=Ve.PROPERTY):O(U.unexpectedToken(l(Ke,Kt.loc.start.offset,Kt.loc.end.offset),bt.source,Kt.loc.start.line,Kt.loc.start.column),Ke,bt.source,Kt.loc.start.line,Kt.loc.start.column);break}}}Ct(Ke,Re,bt)}function kt(Ke,Re,He,bt){for(var _t=void 0,Ot={type:"Property",key:null,value:null},qt=xe._START_;He<Re.length;){var Kt=Re[He];switch(qt){case xe._START_:{if(Kt.type===j.STRING){var on={type:"Identifier",value:tt(Ke.slice(Kt.loc.start.offset+1,Kt.loc.end.offset-1)),raw:Kt.value};bt.loc&&(on.loc=Kt.loc),_t=Kt,Ot.key=on,qt=xe.KEY,He++}else return null;break}case xe.KEY:{Kt.type===j.COLON?(qt=xe.COLON,He++):O(U.unexpectedToken(l(Ke,Kt.loc.start.offset,Kt.loc.end.offset),bt.source,Kt.loc.start.line,Kt.loc.start.column),Ke,bt.source,Kt.loc.start.line,Kt.loc.start.column);break}case xe.COLON:{var Jn=Ut(Ke,Re,He,bt);return Ot.value=Jn.value,bt.loc&&(Ot.loc=o(_t.loc.start.line,_t.loc.start.column,_t.loc.start.offset,Jn.value.loc.end.line,Jn.value.loc.end.column,Jn.value.loc.end.offset,bt.source)),{value:Ot,index:Jn.index}}}}}function gt(Ke,Re,He,bt){for(var _t=void 0,Ot={type:"Array",children:[]},qt=ze._START_,Kt=void 0;He<Re.length;)switch(Kt=Re[He],qt){case ze._START_:{if(Kt.type===j.LEFT_BRACKET)_t=Kt,qt=ze.OPEN_ARRAY,He++;else return null;break}case ze.OPEN_ARRAY:{if(Kt.type===j.RIGHT_BRACKET)return bt.loc&&(Ot.loc=o(_t.loc.start.line,_t.loc.start.column,_t.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,bt.source)),{value:Ot,index:He+1};var on=Ut(Ke,Re,He,bt);He=on.index,Ot.children.push(on.value),qt=ze.VALUE;break}case ze.VALUE:{if(Kt.type===j.RIGHT_BRACKET)return bt.loc&&(Ot.loc=o(_t.loc.start.line,_t.loc.start.column,_t.loc.start.offset,Kt.loc.end.line,Kt.loc.end.column,Kt.loc.end.offset,bt.source)),{value:Ot,index:He+1};Kt.type===j.COMMA?(qt=ze.COMMA,He++):O(U.unexpectedToken(l(Ke,Kt.loc.start.offset,Kt.loc.end.offset),bt.source,Kt.loc.start.line,Kt.loc.start.column),Ke,bt.source,Kt.loc.start.line,Kt.loc.start.column);break}case ze.COMMA:{var Jn=Ut(Ke,Re,He,bt);He=Jn.index,Ot.children.push(Jn.value),qt=ze.VALUE;break}}Ct(Ke,Re,bt)}function St(Ke,Re,He,bt){var _t=Re[He],Ot=null;switch(_t.type){case j.STRING:{Ot=tt(Ke.slice(_t.loc.start.offset+1,_t.loc.end.offset-1));break}case j.NUMBER:{Ot=Number(_t.value);break}case j.TRUE:{Ot=!0;break}case j.FALSE:{Ot=!1;break}case j.NULL:{Ot=null;break}default:return null}var qt={type:"Literal",value:Ot,raw:_t.value};return bt.loc&&(qt.loc=_t.loc),{value:qt,index:He+1}}function Ut(Ke,Re,He,bt){var _t=Re[He],Ot=St.apply(void 0,arguments)||lt.apply(void 0,arguments)||gt.apply(void 0,arguments);if(Ot)return Ot;O(U.unexpectedToken(l(Ke,_t.loc.start.offset,_t.loc.end.offset),bt.source,_t.loc.start.line,_t.loc.start.column),Ke,bt.source,_t.loc.start.line,_t.loc.start.column)}var Fe=function(Ke,Re){Re=Object.assign({},st,Re);var He=Se(Ke,Re);He.length===0&&Ct(Ke,He,Re);var bt=Ut(Ke,He,0,Re);if(bt.index===He.length)return bt.value;var _t=He[bt.index];O(U.unexpectedToken(l(Ke,_t.loc.start.offset,_t.loc.end.offset),Re.source,_t.loc.start.line,_t.loc.start.column),Ke,Re.source,_t.loc.start.line,_t.loc.start.column)};return Fe})}(Tx)),Tx.exports}var Ole=Ble();const Ile=AA(Ole);function li(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="799818f2992b2f8307763d856702ede3cf326f4d",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:12,column:16},end:{line:12,column:18}},3:{start:{line:13,column:2},end:{line:30,column:3}},4:{start:{line:14,column:4},end:{line:14,column:16}},5:{start:{line:16,column:23},end:{line:16,column:71}},6:{start:{line:17,column:4},end:{line:29,column:5}},7:{start:{line:18,column:18},end:{line:23,column:7}},8:{start:{line:24,column:6},end:{line:28,column:9}},9:{start:{line:31,column:2},end:{line:31,column:15}},10:{start:{line:33,column:0},end:{line:35,column:3}},11:{start:{line:34,column:2},end:{line:34,column:26}},12:{start:{line:36,column:0},end:{line:130,column:3}},13:{start:{line:37,column:16},end:{line:37,column:32}},14:{start:{line:38,column:22},end:{line:38,column:26}},15:{start:{line:39,column:2},end:{line:41,column:3}},16:{start:{line:40,column:4},end:{line:40,column:17}},17:{start:{line:42,column:14},end:{line:42,column:29}},18:{start:{line:43,column:16},end:{line:43,column:32}},19:{start:{line:45,column:4},end:{line:65,column:5}},20:{start:{line:46,column:6},end:{line:46,column:20}},21:{start:{line:47,column:11},end:{line:65,column:5}},22:{start:{line:48,column:6},end:{line:48,column:18}},23:{start:{line:49,column:11},end:{line:65,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:52,column:18},end:{line:52,column:25}},26:{start:{line:54,column:6},end:{line:63,column:7}},27:{start:{line:55,column:8},end:{line:55,column:41}},28:{start:{line:57,column:8},end:{line:59,column:11}},29:{start:{line:58,column:10},end:{line:58,column:101}},30:{start:{line:60,column:8},end:{line:62,column:9}},31:{start:{line:61,column:10},end:{line:61,column:34}},32:{start:{line:64,column:6},end:{line:64,column:63}},33:{start:{line:67,column:12},end:{line:67,column:16}},34:{start:{line:68,column:2},end:{line:99,column:3}},35:{start:{line:69,column:19},end:{line:79,column:6}},36:{start:{line:80,column:4},end:{line:94,column:5}},37:{start:{line:81,column:6},end:{line:93,column:8}},38:{start:{line:84,column:10},end:{line:84,column:76}},39:{start:{line:86,column:34},end:{line:86,column:85}},40:{start:{line:87,column:10},end:{line:91,column:12}},41:{start:{line:95,column:9},end:{line:99,column:3}},42:{start:{line:96,column:4},end:{line:96,column:56}},43:{start:{line:98,column:4},end:{line:98,column:50}},44:{start:{line:100,column:2},end:{line:128,column:3}},45:{start:{line:101,column:19},end:{line:101,column:28}},46:{start:{line:102,column:4},end:{line:127,column:7}},47:{start:{line:103,column:31},end:{line:103,column:36}},48:{start:{line:104,column:6},end:{line:126,column:7}},49:{start:{line:105,column:31},end:{line:105,column:64}},50:{start:{line:106,column:20},end:{line:110,column:9}},51:{start:{line:111,column:8},end:{line:111,column:24}},52:{start:{line:112,column:13},end:{line:126,column:7}},53:{start:{line:113,column:21},end:{line:113,column:83}},54:{start:{line:114,column:28},end:{line:114,column:64}},55:{start:{line:115,column:8},end:{line:118,column:9}},56:{start:{line:116,column:10},end:{line:116,column:69}},57:{start:{line:117,column:10},end:{line:117,column:17}},58:{start:{line:119,column:24},end:{line:119,column:35}},59:{start:{line:120,column:31},end:{line:120,column:34}},60:{start:{line:121,column:8},end:{line:125,column:11}},61:{start:{line:129,column:2},end:{line:129,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"tryToParse",decl:{start:{line:11,column:9},end:{line:11,column:19}},loc:{start:{line:11,column:26},end:{line:32,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:33,column:42},end:{line:33,column:43}},loc:{start:{line:33,column:52},end:{line:35,column:1}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:36,column:41},end:{line:36,column:42}},loc:{start:{line:36,column:62},end:{line:130,column:1}},line:36},4:{name:"getArrayPositionalFromAst",decl:{start:{line:44,column:11},end:{line:44,column:36}},loc:{start:{line:44,column:49},end:{line:66,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:52},end:{line:59,column:9}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:38},end:{line:85,column:9}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:85,column:15},end:{line:85,column:16}},loc:{start:{line:85,column:24},end:{line:92,column:9}},line:85},8:{name:"(anonymous_8)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:127,column:5}},line:102}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:29,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:39,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:65,column:5}},{start:{line:47,column:11},end:{line:65,column:5}}],line:45},3:{loc:{start:{line:47,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:65,column:5}},{start:{line:49,column:11},end:{line:65,column:5}}],line:47},4:{loc:{start:{line:49,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:49,column:11},end:{line:65,column:5}},{start:{line:51,column:11},end:{line:65,column:5}}],line:49},5:{loc:{start:{line:54,column:6},end:{line:63,column:7}},type:"if",locations:[{start:{line:54,column:6},end:{line:63,column:7}},{start:{line:56,column:13},end:{line:63,column:7}}],line:54},6:{loc:{start:{line:58,column:17},end:{line:58,column:100}},type:"binary-expr",locations:[{start:{line:58,column:17},end:{line:58,column:30}},{start:{line:58,column:34},end:{line:58,column:69}},{start:{line:58,column:73},end:{line:58,column:100}}],line:58},7:{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},8:{loc:{start:{line:68,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:99,column:3}},{start:{line:95,column:9},end:{line:99,column:3}}],line:68},9:{loc:{start:{line:80,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},10:{loc:{start:{line:95,column:9},end:{line:99,column:3}},type:"if",locations:[{start:{line:95,column:9},end:{line:99,column:3}},{start:{line:97,column:9},end:{line:99,column:3}}],line:95},11:{loc:{start:{line:100,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:100,column:2},end:{line:128,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:104,column:6},end:{line:126,column:7}},type:"if",locations:[{start:{line:104,column:6},end:{line:126,column:7}},{start:{line:112,column:13},end:{line:126,column:7}}],line:104},13:{loc:{start:{line:112,column:13},end:{line:126,column:7}},type:"if",locations:[{start:{line:112,column:13},end:{line:126,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},14:{loc:{start:{line:115,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:118,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:115}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AAAA,SAAQ,aAAY;AACpB,OAAO,gBAAsC;AAC7C,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAGD,SAAS,WAAW,MAAc;AAEhC,QAAM,QAAkC,CAAC;AACzC,MAAI;AACF,UAAM,IAAI;AAAA,EACZ,SACM,KAAU;AAEd,UAAM,aAAa,IAAI,SAAS,EAAE,MAAM,0BAA0B;AAClE,QAAI,YAAY;AACd,YAAM,MAAM;AAAA,QACV,YAAY,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACtC,cAAc,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACxC,WAAW,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACrC,aAAa,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,MACzC;AAGA,YAAM,KAAK;AAAA,QACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,QACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,QACrD,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,SAAO,WAAW,IAAI;AACxB,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAE9E,QAAM,QAAkC,WAAW,IAAI;AAEvD,QAAM,EAAC,QAAO,IAAI;AAElB,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"799818f2992b2f8307763d856702ede3cf326f4d"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return li=function(){return l},l}li();li().s[0]++;tm.defineMode("mgl",(n,e)=>(li().f[0]++,li().s[1]++,tm.modes.javascript({...n,json:!0},e)));function fN(n){li().f[1]++;const e=(li().s[2]++,[]);li().s[3]++;try{li().s[4]++,Sle.parse(n)}catch(t){const i=(li().s[5]++,t.toString().match(/line (\d+), column (\d+)/));if(li().s[6]++,i){li().b[0][0]++;const r=(li().s[7]++,{first_line:parseInt(i[1],10),first_column:parseInt(i[2],10),last_line:parseInt(i[1],10),last_column:parseInt(i[2],10)});li().s[8]++,e.push({from:tm.Pos(r.first_line-1,r.first_column),to:tm.Pos(r.last_line-1,r.last_column),message:t})}else li().b[0][1]++}return li().s[9]++,e}li().s[10]++;tm.registerHelper("lint","json",n=>(li().f[2]++,li().s[11]++,fN(n)));li().s[12]++;tm.registerHelper("lint","mgl",(n,e,t)=>{li().f[3]++;const i=(li().s[13]++,fN(n)),{context:r}=(li().s[14]++,e);if(li().s[15]++,i.length>0)return li().b[1][0]++,li().s[16]++,i;li().b[1][1]++;const a=(li().s[17]++,Ile(n)),l=(li().s[18]++,JSON.parse(n));function o(C,w){if(li().f[4]++,li().s[19]++,C){if(li().b[2][1]++,li().s[21]++,w.length<1)return li().b[3][0]++,li().s[22]++,C;if(li().b[3][1]++,li().s[23]++,C.children){li().b[4][1]++;const O=(li().s[25]++,w[0]);let U;return li().s[26]++,O.match(/^[0-9]+$/)?(li().b[5][0]++,li().s[27]++,U=C.children[w[0]]):(li().b[5][1]++,li().s[28]++,U=C.children.find(K=>(li().f[5]++,li().s[29]++,li().b[6][0]++,K.key&&(li().b[6][1]++,K.key.type==="Identifier")&&(li().b[6][2]++,K.key.value===O))),li().s[30]++,U?(li().b[7][0]++,li().s[31]++,U=U.value):li().b[7][1]++),li().s[32]++,o(U,w.slice(1))}else{li().b[4][0]++,li().s[24]++;return}}else{li().b[2][0]++,li().s[20]++;return}}let p=(li().s[33]++,null);if(li().s[34]++,r==="layer"){li().b[8][0]++;const C=(li().s[35]++,Of({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[l]}));li().s[36]++,C?(li().b[9][0]++,li().s[37]++,p={result:"error",value:C.filter(w=>(li().f[6]++,li().s[38]++,!w.message.match(/^layers\[0\]: source ".*" not found$/))).map(w=>{li().f[7]++;const O=(li().s[39]++,w.message.replace(/^layers\[0\]./,"").split(":"));return li().s[40]++,{name:"",key:O[0],message:O[1]}})}):li().b[9][1]++}else if(li().b[8][1]++,li().s[41]++,r==="expression")li().b[10][0]++,li().s[42]++,p=dV.createExpression(l,e.spec);else throw li().b[10][1]++,li().s[43]++,new Error(`Invalid context ${r}`);if(li().s[44]++,p?.result==="error"){li().b[11][0]++;const C=(li().s[45]++,p.value);li().s[46]++,C.forEach(w=>{li().f[8]++;const{key:O,message:U}=(li().s[47]++,w);if(li().s[48]++,O)if(li().b[12][1]++,li().s[52]++,O){li().b[13][0]++;const K=(li().s[53]++,O.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),j=(li().s[54]++,o(a,K));if(li().s[55]++,j)li().b[14][1]++;else{li().b[14][0]++,li().s[56]++,console.warn("Something went wrong parsing error:",w),li().s[57]++;return}const{loc:W}=(li().s[58]++,j),{start:Y,end:te}=(li().s[59]++,W);li().s[60]++,i.push({from:tm.Pos(Y.line-1,Y.column),to:tm.Pos(te.line-1,te.column),message:U})}else li().b[13][1]++;else{li().b[12][0]++;const K=(li().s[49]++,t.getLineHandle(t.lastLine())),j=(li().s[50]++,{from:tm.Pos(t.firstLine(),0),to:tm.Pos(t.lastLine(),K.text.length),message:U});li().s[51]++,i.push(j)}})}else li().b[11][1]++;return li().s[61]++,i});function yi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="5100029c5bc3e8b6981ab23ce8d4ba04e7ce73ec",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:147,column:9}},52:{start:{line:142,column:12},end:{line:142,column:26}},53:{start:{line:150,column:18},end:{line:150,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:148,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:143,column:11}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AA0KQ,SACQ,KADR;AA1KR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAAmC;AAC1C,SAAS,OAA6B,uBAAuB;AAE7D,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA4BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO;AAAC,iBAAK,MAAM;AAAA,UAAG;AAAA,UAC5B;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5100029c5bc3e8b6981ab23ce8d4ba04e7ce73ec"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return yi=function(){return l},l}yi();class Tle extends ni.Component{static defaultProps=(yi().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:e=>(yi().f[0]++,yi().s[1]++,dN(e,{indent:2,maxLength:40})),onFocus:()=>{yi().f[1]++},onBlur:()=>{yi().f[2]++},onJSONInvalid:()=>{yi().f[3]++},onJSONValid:()=>{yi().f[4]++}});_keyEvent;_doc;_el=(yi().s[2]++,null);_cancelNextChange=(yi().s[3]++,!1);constructor(e){yi().f[5]++,yi().s[4]++,super(e),yi().s[5]++,this._keyEvent="keyboard",yi().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){yi().f[6]++,yi().s[7]++,this._doc=tm(this._el,{value:this.props.getValue(this.props.layer),mode:(yi().b[0][0]++,this.props.mode||(yi().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(yi().b[1][0]++,this.props.lint||(yi().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),yi().s[8]++,this._doc.on("change",this.onChange),yi().s[9]++,this._doc.on("focus",this.onFocus),yi().s[10]++,this._doc.on("blur",this.onBlur)}onPointerDown=(yi().s[11]++,()=>{yi().f[7]++,yi().s[12]++,this._keyEvent="pointer"});onFocus=(yi().s[13]++,()=>{yi().f[8]++,yi().s[14]++,this.props.onFocus?(yi().b[2][0]++,yi().s[15]++,this.props.onFocus()):yi().b[2][1]++,yi().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})});onBlur=(yi().s[17]++,()=>{yi().f[9]++,yi().s[18]++,this._keyEvent="keyboard",yi().s[19]++,this.props.onBlur?(yi().b[3][0]++,yi().s[20]++,this.props.onBlur()):yi().b[3][1]++,yi().s[21]++,this.setState({isEditing:!1,showMessage:!1})});componentWillUnMount(){yi().f[10]++,yi().s[22]++,this._doc.off("change",this.onChange),yi().s[23]++,this._doc.off("focus",this.onFocus),yi().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(e){yi().f[11]++,yi().s[25]++,yi().b[5][0]++,!this.state.isEditing&&(yi().b[5][1]++,e.layer!==this.props.layer)?(yi().b[4][0]++,yi().s[26]++,this._cancelNextChange=!0,yi().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):yi().b[4][1]++}onChange=(yi().s[28]++,e=>{if(yi().f[12]++,yi().s[29]++,this._cancelNextChange){yi().b[6][0]++,yi().s[30]++,this._cancelNextChange=!1,yi().s[31]++,this.setState({prevValue:this._doc.getValue()}),yi().s[32]++;return}else yi().b[6][1]++;const t=(yi().s[33]++,this._doc.getValue());if(yi().s[34]++,this.state.prevValue!==t){yi().b[7][0]++;let i,r;yi().s[35]++;try{yi().s[36]++,i=JSON.parse(t)}catch(a){yi().s[37]++,r=a,yi().s[38]++,console.warn(a)}yi().s[39]++,yi().b[9][0]++,r&&(yi().b[9][1]++,this.props.onJSONInvalid)?(yi().b[8][0]++,yi().s[40]++,this.props.onJSONInvalid()):(yi().b[8][1]++,yi().s[41]++,this.props.onChange?(yi().b[10][0]++,yi().s[42]++,this.props.onChange(i)):yi().b[10][1]++,yi().s[43]++,this.props.onJSONValid?(yi().b[11][0]++,yi().s[44]++,this.props.onJSONValid()):yi().b[11][1]++)}else yi().b[7][1]++;yi().s[45]++,this.setState({prevValue:t})});render(){yi().f[13]++;const e=(yi().s[46]++,this.props.t),{showMessage:t}=(yi().s[47]++,this.state),i=(yi().s[48]++,{});return yi().s[49]++,this.props.maxHeight?(yi().b[12][0]++,yi().s[50]++,i.maxHeight=this.props.maxHeight):yi().b[12][1]++,yi().s[51]++,Ae.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[Ae.jsx("div",{className:e0("JSONEditor__message",{"JSONEditor__message--on":t}),children:Ae.jsxs(Ig,{t:e,children:["Press ",Ae.jsx("kbd",{children:"ESC"})," to lose focus"]})}),Ae.jsx("div",{className:e0("codemirror-container",this.props.className),ref:r=>{yi().f[14]++,yi().s[52]++,this._el=r},style:i})]})}}const kle=(yi().s[53]++,ls()(Tle));function N_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="ee4be309accf3b6f15b0a988cbdadd67c7132608",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:3,column:18},end:{line:5,column:1}},1:{start:{line:4,column:2},end:{line:4,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:3,column:18},end:{line:3,column:19}},loc:{start:{line:3,column:29},end:{line:5,column:1}},line:3}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AAOS;AAPT,OAAO,eAAsC;AAM7C,MAAM,YAAsC,CAAC,UAAU;AACrD,SAAO,oBAAC,aAAW,GAAG,OAAO;AAC/B;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee4be309accf3b6f15b0a988cbdadd67c7132608"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return N_=function(){return l},l}N_();N_().s[0]++;const T8=n=>(N_().f[0]++,N_().s[1]++,Ae.jsx(kle,{...n}));function G_(n){return La({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 19a2 2 0 0 0 2 2c2 0 2 -4 3 -9s1 -9 3 -9a2 2 0 0 1 2 2"},child:[]},{tag:"path",attr:{d:"M5 12h6"},child:[]},{tag:"path",attr:{d:"M15 12l6 6"},child:[]},{tag:"path",attr:{d:"M15 18l6 -6"},child:[]}]})(n)}function k8(n){return La({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,76H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm104,40H40a12,12,0,0,0,0,24H144a12,12,0,0,0,0-24Zm88,0H220V168a12,12,0,0,0-24,0v12H184a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V204h12a12,12,0,0,0,0-24Z"},child:[]}]})(n)}function F1(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return F1=function(){return l},l}F1();const D8=(F1().s[0]++,["all","any","none"]);F1().s[1]++;const Dle=(F1().s[2]++,Object.keys(oa.filter_operator.values).filter(n=>(F1().f[0]++,F1().s[3]++,D8.indexOf(n)<0)));function br(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return br=function(){return l},l}br();function Rle(n){return br().f[0]++,br().s[0]++,n===""?(br().b[0][0]++,br().s[1]++,n):(br().b[0][1]++,br().s[2]++,isNaN(n)?(br().b[1][0]++,br().s[3]++,n):(br().b[1][1]++,br().s[4]++,parseFloat(n)))}function Ple(n){br().f[1]++;const e=(br().s[5]++,typeof n=="string");if(br().s[6]++,e)br().b[2][1]++;else return br().b[2][0]++,br().s[7]++,n;return br().s[8]++,n.match(/^\s*true\s*$/)?(br().b[3][0]++,br().s[9]++,!0):(br().b[3][1]++,br().s[10]++,n.match(/^\s*false\s*$/)?(br().b[4][0]++,br().s[11]++,!1):(br().b[4][1]++,br().s[12]++,n))}function Kle(n){return br().f[2]++,br().s[13]++,n=Rle(n),br().s[14]++,n=Ple(n),br().s[15]++,n}class Ule extends ni.Component{static defaultProps=(br().s[16]++,{properties:{}});onFilterPartChanged(e,t,i){br().f[3]++;let r=(br().s[17]++,[e,t,...i.map(Kle)]);br().s[18]++,br().b[6][0]++,e==="has"||(br().b[6][1]++,e==="!has")?(br().b[5][0]++,br().s[19]++,r=[e,t]):(br().b[5][1]++,br().s[20]++,i.length===0?(br().b[7][0]++,br().s[21]++,r=[e,t,""]):br().b[7][1]++),br().s[22]++,this.props.onChange(r)}render(){br().f[4]++;const e=(br().s[23]++,this.props.filter),t=(br().s[24]++,e[0]),i=(br().s[25]++,e[1]),r=(br().s[26]++,e.slice(2));return br().s[27]++,Ae.jsxs("div",{className:"maputnik-filter-editor-single",children:[Ae.jsx("div",{className:"maputnik-filter-editor-property",children:Ae.jsx(wb,{"aria-label":"key",value:i,options:Object.keys(this.props.properties).map(a=>(br().f[5]++,br().s[28]++,[a,a])),onChange:a=>(br().f[6]++,br().s[29]++,this.onFilterPartChanged(t,a,r))})}),Ae.jsx("div",{className:"maputnik-filter-editor-operator",children:Ae.jsx(ty,{"aria-label":"function",value:t,onChange:a=>(br().f[7]++,br().s[30]++,this.onFilterPartChanged(a,i,r)),options:Dle})}),(br().b[8][0]++,r.length>0&&(br().b[8][1]++,Ae.jsx("div",{className:"maputnik-filter-editor-args",children:Ae.jsx(am,{"aria-label":"value",value:r.join(","),onChange:a=>(br().f[8]++,br().s[31]++,this.onFilterPartChanged(t,i,a.split(",")))})})))]})}}function bv(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="1beba484bbe354357d7ce4f43a423306cbd22032",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAuC;AAC9C,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAMtD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1beba484bbe354357d7ce4f43a423306cbd22032"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return bv=function(){return l},l}bv();class Lle extends ni.Component{render(){bv().f[0]++;const e=(bv().s[0]++,this.props.t);return bv().s[1]++,Ae.jsxs("div",{className:"maputnik-filter-editor-block",children:[Ae.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),Ae.jsx("div",{className:"maputnik-filter-editor-block-action",children:Ae.jsx(nl,{className:"maputnik-icon-button",onClick:this.props.onDelete,title:e("Delete filter block"),children:Ae.jsx(Yv,{})})})]})}}const Fle=(bv().s[2]++,ls()(Lle));var G5,pk;function zle(){if(pk)return G5;pk=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",r="\\ufe0e\\ufe0f",a="["+e+"]",l="["+t+i+"]",o="\\ud83c[\\udffb-\\udfff]",p="(?:"+l+"|"+o+")",C="[^"+e+"]",w="(?:\\ud83c[\\udde6-\\uddff]){2}",O="[\\ud800-\\udbff][\\udc00-\\udfff]",U="\\u200d",K=p+"?",j="["+r+"]?",W="(?:"+U+"(?:"+[C,w,O].join("|")+")"+j+K+")*",Y=j+K+W,te="(?:"+[C+l+"?",l,w,O,a].join("|")+")",J=RegExp(o+"(?="+o+")|"+te+Y,"g"),oe=RegExp("["+U+e+t+i+r+"]"),ne=typeof window=="object"&&window&&window.Object===Object&&window,$=typeof self=="object"&&self&&self.Object===Object&&self,ae=ne||$||Function("return this")();function G(gt){return gt.split("")}function ce(gt){return oe.test(gt)}function ge(gt){return ce(gt)?ye(gt):G(gt)}function ye(gt){return gt.match(J)||[]}var we=Object.prototype,Oe=we.toString,Se=ae.Symbol,Ve=Se?Se.prototype:void 0,xe=Ve?Ve.toString:void 0;function ze(gt,St,Ut){var Fe=-1,Ke=gt.length;St<0&&(St=-St>Ke?0:Ke+St),Ut=Ut>Ke?Ke:Ut,Ut<0&&(Ut+=Ke),Ke=St>Ut?0:Ut-St>>>0,St>>>=0;for(var Re=Array(Ke);++Fe<Ke;)Re[Fe]=gt[Fe+St];return Re}function st(gt){if(typeof gt=="string")return gt;if(Ne(gt))return xe?xe.call(gt):"";var St=gt+"";return St=="0"&&1/gt==-1/0?"-0":St}function Ct(gt,St,Ut){var Fe=gt.length;return Ut=Ut===void 0?Fe:Ut,!St&&Ut>=Fe?gt:ze(gt,St,Ut)}function nt(gt){return function(St){St=tt(St);var Ut=ce(St)?ge(St):void 0,Fe=Ut?Ut[0]:St.charAt(0),Ke=Ut?Ct(Ut,1).join(""):St.slice(1);return Fe[gt]()+Ke}}function be(gt){return!!gt&&typeof gt=="object"}function Ne(gt){return typeof gt=="symbol"||be(gt)&&Oe.call(gt)==n}function tt(gt){return gt==null?"":st(gt)}function lt(gt){return kt(tt(gt).toLowerCase())}var kt=nt("toUpperCase");return G5=lt,G5}var jle=zle();const R8=AA(jle);function Um(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Um=function(){return l},l}Um();function F2(n){Um().f[0]++;let e;const t=(Um().s[0]++,n.split("-"));return Um().s[1]++,t.length>1?(Um().b[0][0]++,Um().s[2]++,e=n.split("-").slice(1).join(" ")):(Um().b[0][1]++,Um().s[3]++,e=n),Um().s[4]++,R8(e)}function bo(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="ae2b7dfa9369164c20e9fa45958548bc328a0068",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ae2b7dfa9369164c20e9fa45958548bc328a0068"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return bo=function(){return l},l}bo();class Nle extends ni.Component{static defaultProps=(bo().s[0]++,{errors:{},onFocus:()=>{bo().f[0]++},onBlur:()=>{bo().f[1]++}});constructor(e){bo().f[2]++,bo().s[1]++,super(e),bo().s[2]++,this.state={jsonError:!1}}onJSONInvalid=(bo().s[3]++,e=>{bo().f[3]++,bo().s[4]++,this.setState({jsonError:!0})});onJSONValid=(bo().s[5]++,()=>{bo().f[4]++,bo().s[6]++,this.setState({jsonError:!1})});render(){bo().f[5]++;const{t:e,errors:t,fieldName:i,fieldType:r,value:a,canUndo:l}=(bo().s[7]++,this.props),{jsonError:o}=(bo().s[8]++,this.state),p=(bo().s[9]++,l?(bo().b[0][0]++,!l()):(bo().b[0][1]++,!0)),C=(bo().s[10]++,Ae.jsxs(Ae.Fragment,{children:[(bo().b[1][0]++,this.props.onUndo&&(bo().b[1][1]++,Ae.jsx(nl,{onClick:this.props.onUndo,disabled:p,className:"maputnik-delete-stop",title:e("Revert from expression"),children:Ae.jsx(N$,{})},"undo_action"))),Ae.jsx(nl,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:e("Delete expression"),children:Ae.jsx(Yv,{})},"delete_action")]})),w=(bo().s[11]++,r===void 0?(bo().b[2][0]++,i):(bo().b[2][1]++,`${r}.${i}`)),O=(bo().s[12]++,t[w]),U=(bo().s[13]++,`${w}[`),K=(bo().s[14]++,[]);function j(W){return bo().f[6]++,bo().s[15]++,dN(W,{indent:2,maxLength:38})}return bo().s[16]++,o?(bo().b[3][0]++,bo().s[17]++,K.push({message:"Invalid JSON"})):(bo().b[3][1]++,bo().s[18]++,Object.entries(t).filter(([W,Y])=>(bo().f[7]++,bo().s[19]++,W.startsWith(U))).forEach(([W,Y])=>(bo().f[8]++,bo().s[20]++,K.push(Y))),bo().s[21]++,O?(bo().b[4][0]++,bo().s[22]++,K.push(O)):bo().b[4][1]++),bo().s[23]++,Ae.jsx(Us,{error:K,fieldSpec:this.props.fieldSpec,label:e(F2(this.props.fieldName)),action:C,wideMode:!0,children:Ae.jsx(T8,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:a,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:j,onChange:this.props.onChange})})}}const pN=(bo().s[24]++,ls()(Nle));function Pn(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="206fb987d284979cc37af4d291535ae617ff8412",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:270,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:270,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:239,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:241,column:25},end:{line:241,column:35}},67:{start:{line:242,column:6},end:{line:269,column:11}},68:{start:{line:247,column:14},end:{line:247,column:59}},69:{start:{line:248,column:14},end:{line:248,column:49}},70:{start:{line:273,column:21},end:{line:273,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:271,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:246,column:22},end:{line:246,column:23}},loc:{start:{line:246,column:28},end:{line:249,column:13}},line:246}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:270,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:270,column:5}},{start:{line:161,column:11},end:{line:270,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:270,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:270,column:5}},{start:{line:240,column:11},end:{line:270,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:234,column:30},end:{line:234,column:62}},type:"cond-expr",locations:[{start:{line:234,column:51},end:{line:234,column:53}},{start:{line:234,column:56},end:{line:234,column:62}}],line:234},15:{loc:{start:{line:257,column:8},end:{line:268,column:12}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:38}},{start:{line:257,column:58},end:{line:268,column:12}}],line:257}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAiMQ,SAkDA,UAlDA,KAGA,YAHA;AAjMR,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAE7C,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA+B,uBAAuB;AAItD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAuF;AACpH,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,kBAAe;AAAA,cACf,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,kBAAe;AAAA;AAAA,MAClB,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,kBACxD,EAAE,YAAY;AAAA;AAAA;AAAA,YACjB;AAAA;AAAA,UAVI;AAAA,QAWN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"206fb987d284979cc37af4d291535ae617ff8412"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Pn=function(){return l},l}Pn();function fg(n){Pn().f[0]++;const e=(Pn().s[0]++,Pn().b[0][0]++,n.filter||(Pn().b[0][1]++,["all"]));if(Pn().s[1]++,Array.isArray(e))Pn().b[1][1]++;else return Pn().b[1][0]++,Pn().s[2]++,e;let t=(Pn().s[3]++,e[0]),i=(Pn().s[4]++,e.slice(1));return Pn().s[5]++,D8.indexOf(t)<0?(Pn().b[2][0]++,Pn().s[6]++,t="all",Pn().s[7]++,i=[e.slice(0)]):Pn().b[2][1]++,Pn().s[8]++,[t,...i]}function Gle(n){return Pn().f[1]++,Pn().s[9]++,hV(Wle(n)).layers[0].filter}function Wle(n){return Pn().f[2]++,Pn().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const Qle=(Pn().s[11]++,["all","any","none"]);function mk(n){if(Pn().f[3]++,Pn().s[12]++,Pn().b[4][0]++,n.length===1&&(Pn().b[4][1]++,Qle.includes(n[0])))return Pn().b[3][0]++,Pn().s[13]++,!0;Pn().b[3][1]++;const e=(Pn().s[14]++,XC(n));return Pn().s[15]++,!eb.isEqual(e,n)}function gk(n){return Pn().f[4]++,Pn().s[16]++,D8.indexOf(n[0])>=0}function Yle(n){return Pn().f[5]++,Pn().s[17]++,gk(n)?(Pn().b[5][0]++,Pn().s[18]++,n.slice(1).map(e=>(Pn().f[6]++,Pn().s[19]++,gk(e))).filter(e=>(Pn().f[7]++,Pn().s[20]++,e==!0)).length>0):(Pn().b[5][1]++,Pn().s[21]++,!1)}class qle extends ni.Component{static defaultProps=(Pn().s[22]++,{filter:["all"]});constructor(e){Pn().f[8]++,Pn().s[23]++,super(e),Pn().s[24]++,this.state={showDoc:!1,displaySimpleFilter:mk(fg(e))}}onFilterPartChanged(e,t){Pn().f[9]++;const i=(Pn().s[25]++,fg(this.props).slice(0));Pn().s[26]++,i[e]=t,Pn().s[27]++,this.props.onChange(i)}deleteFilterItem(e){Pn().f[10]++;const t=(Pn().s[28]++,fg(this.props).slice(0));Pn().s[29]++,t.splice(e+1,1),Pn().s[30]++,this.props.onChange(t)}addFilterItem=(Pn().s[31]++,()=>{Pn().f[11]++;const e=(Pn().s[32]++,fg(this.props).slice(0));Pn().s[33]++,e.push(["==","name",""]),Pn().s[34]++,this.props.onChange(e)});onToggleDoc=(Pn().s[35]++,e=>{Pn().f[12]++,Pn().s[36]++,this.setState({showDoc:e})});makeFilter=(Pn().s[37]++,()=>{Pn().f[13]++,Pn().s[38]++,this.setState({displaySimpleFilter:!0})});makeExpression=(Pn().s[39]++,()=>{Pn().f[14]++;const e=(Pn().s[40]++,fg(this.props));Pn().s[41]++,this.props.onChange(Gle(e)),Pn().s[42]++,this.setState({displaySimpleFilter:!1})});static getDerivedStateFromProps(e,t){Pn().f[15]++;const i=(Pn().s[43]++,mk(fg(e)));return Pn().s[44]++,Pn().b[7][0]++,!i&&(Pn().b[7][1]++,t.displaySimpleFilter===!0)?(Pn().b[6][0]++,Pn().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Pn().b[6][1]++,Pn().s[46]++,Pn().b[9][0]++,i&&(Pn().b[9][1]++,t.displaySimpleFilter===!1)?(Pn().b[8][0]++,Pn().s[47]++,{valueIsSimpleFilter:!0}):(Pn().b[8][1]++,Pn().s[48]++,{valueIsSimpleFilter:!1}))}render(){Pn().f[16]++;const{errors:e,t}=(Pn().s[49]++,this.props),{displaySimpleFilter:i}=(Pn().s[50]++,this.state),r=(Pn().s[51]++,{doc:$a.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),a=(Pn().s[52]++,["all"]),l=(Pn().s[53]++,Pn().b[10][0]++,i&&(Pn().b[10][1]++,Yle(fg(this.props))));if(Pn().s[54]++,l)return Pn().b[11][0]++,Pn().s[55]++,Ae.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[Ae.jsx("p",{children:t("Nested filters are not supported.")}),Ae.jsxs(nl,{onClick:this.makeExpression,title:t("Convert to expression"),children:[Ae.jsx(G_,{}),t("Upgrade to expression")]})]});if(Pn().b[11][1]++,Pn().s[56]++,i){Pn().b[12][0]++;const o=(Pn().s[57]++,fg(this.props)),p=(Pn().s[58]++,o[0]),C=(Pn().s[59]++,o.slice(1)),w=(Pn().s[60]++,Ae.jsx("div",{children:Ae.jsx(nl,{onClick:this.makeExpression,title:t("Convert to expression"),className:"maputnik-make-zoom-function",children:Ae.jsx(G_,{})})})),O=(Pn().s[61]++,C.map((U,K)=>{Pn().f[17]++;const j=(Pn().s[62]++,e[`filter[${K+1}]`]);return Pn().s[63]++,Ae.jsxs("div",{children:[Ae.jsx(Fle,{onDelete:this.deleteFilterItem.bind(this,K),children:Ae.jsx(Ule,{properties:this.props.properties,filter:U,onChange:this.onFilterPartChanged.bind(this,K+1)})},K),(Pn().b[13][0]++,j&&(Pn().b[13][1]++,Ae.jsx("div",{className:"maputnik-inline-error",children:j.message},"error")))]},`block-${K}`)}));return Pn().s[64]++,Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(Us,{fieldSpec:r,label:t("Filter"),action:w,children:Ae.jsx(ty,{value:p,onChange:U=>(Pn().f[18]++,Pn().s[65]++,this.onFilterPartChanged(0,U)),options:[["all",t("every filter matches")],["none",t("no filter matches")],["any",t("any filter matches")]]})},"top"),O,Ae.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:Ae.jsxs(nl,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[Ae.jsx(k8,{style:{verticalAlign:"text-bottom"}}),t("Add filter")]})},"buttons"),Ae.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Pn().b[14][0]++,""):(Pn().b[14][1]++,"none")},children:Ae.jsx(h8,{fieldSpec:r})},"doc")]})}else{Pn().b[12][1]++;const{filter:o}=(Pn().s[66]++,this.props);return Pn().s[67]++,Ae.jsxs(Ae.Fragment,{children:[Ae.jsx(pN,{onDelete:()=>{Pn().f[19]++,Pn().s[68]++,this.setState({displaySimpleFilter:!0}),Pn().s[69]++,this.props.onChange(a)},fieldName:"filter",fieldSpec:r,value:o,errors:e,onChange:this.props.onChange}),(Pn().b[15][0]++,this.state.valueIsSimpleFilter&&(Pn().b[15][1]++,Ae.jsxs("div",{className:"maputnik-expr-infobox",children:[t("You've entered an old style filter.")," ",Ae.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:t("Switch to filter editor.")})]})))]})}}}const Hle=(Pn().s[70]++,ls()(qle));var Ly={},zd={},Fy={},W5,yk;function mN(){if(yk)return W5;yk=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return W5=n,W5}var Q5,vk;function cm(){if(vk)return Q5;vk=1;var n=mN(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return Q5=t,Q5}var Y5,Ck;function Sb(){if(Ck)return Y5;Ck=1;var n=cm(),e=n.Symbol;return Y5=e,Y5}var q5,_k;function Vle(){if(_k)return q5;_k=1;var n=Sb(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function a(l){var o=t.call(l,r),p=l[r];try{l[r]=void 0;var C=!0}catch{}var w=i.call(l);return C&&(o?l[r]=p:delete l[r]),w}return q5=a,q5}var H5,bk;function $le(){if(bk)return H5;bk=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return H5=t,H5}var V5,xk;function ny(){if(xk)return V5;xk=1;var n=Sb(),e=Vle(),t=$le(),i="[object Null]",r="[object Undefined]",a=n?n.toStringTag:void 0;function l(o){return o==null?o===void 0?r:i:a&&a in Object(o)?e(o):t(o)}return V5=l,V5}var $5,Mk;function If(){if(Mk)return $5;Mk=1;var n=Array.isArray;return $5=n,$5}var Z5,wk;function i0(){if(wk)return Z5;wk=1;function n(e){return e!=null&&typeof e=="object"}return Z5=n,Z5}var X5,Sk;function Zle(){if(Sk)return X5;Sk=1;var n=ny(),e=If(),t=i0(),i="[object String]";function r(a){return typeof a=="string"||!e(a)&&t(a)&&n(a)==i}return X5=r,X5}var J5,Ek;function Xle(){if(Ek)return J5;Ek=1;function n(e){return function(t,i,r){for(var a=-1,l=Object(t),o=r(t),p=o.length;p--;){var C=o[e?p:++a];if(i(l[C],C,l)===!1)break}return t}}return J5=n,J5}var eM,Bk;function gN(){if(Bk)return eM;Bk=1;var n=Xle(),e=n();return eM=e,eM}var tM,Ok;function Jle(){if(Ok)return tM;Ok=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return tM=n,tM}var nM,Ik;function eue(){if(Ik)return nM;Ik=1;var n=ny(),e=i0(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return nM=i,nM}var iM,Tk;function P8(){if(Tk)return iM;Tk=1;var n=eue(),e=i0(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,a=n(function(){return arguments}())?n:function(l){return e(l)&&i.call(l,"callee")&&!r.call(l,"callee")};return iM=a,iM}var NC={exports:{}},rM,kk;function tue(){if(kk)return rM;kk=1;function n(){return!1}return rM=n,rM}NC.exports;var Dk;function z2(){return Dk||(Dk=1,function(n,e){var t=cm(),i=tue(),r=e&&!e.nodeType&&e,a=r&&!0&&n&&!n.nodeType&&n,l=a&&a.exports===r,o=l?t.Buffer:void 0,p=o?o.isBuffer:void 0,C=p||i;n.exports=C}(NC,NC.exports)),NC.exports}var oM,Rk;function K8(){if(Rk)return oM;Rk=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var a=typeof i;return r=r??n,!!r&&(a=="number"||a!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return oM=t,oM}var aM,Pk;function U8(){if(Pk)return aM;Pk=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return aM=e,aM}var sM,Kk;function nue(){if(Kk)return sM;Kk=1;var n=ny(),e=U8(),t=i0(),i="[object Arguments]",r="[object Array]",a="[object Boolean]",l="[object Date]",o="[object Error]",p="[object Function]",C="[object Map]",w="[object Number]",O="[object Object]",U="[object RegExp]",K="[object Set]",j="[object String]",W="[object WeakMap]",Y="[object ArrayBuffer]",te="[object DataView]",J="[object Float32Array]",oe="[object Float64Array]",ne="[object Int8Array]",$="[object Int16Array]",ae="[object Int32Array]",G="[object Uint8Array]",ce="[object Uint8ClampedArray]",ge="[object Uint16Array]",ye="[object Uint32Array]",we={};we[J]=we[oe]=we[ne]=we[$]=we[ae]=we[G]=we[ce]=we[ge]=we[ye]=!0,we[i]=we[r]=we[Y]=we[a]=we[te]=we[l]=we[o]=we[p]=we[C]=we[w]=we[O]=we[U]=we[K]=we[j]=we[W]=!1;function Oe(Se){return t(Se)&&e(Se.length)&&!!we[n(Se)]}return sM=Oe,sM}var lM,Uk;function L8(){if(Uk)return lM;Uk=1;function n(e){return function(t){return e(t)}}return lM=n,lM}var GC={exports:{}};GC.exports;var Lk;function F8(){return Lk||(Lk=1,function(n,e){var t=mN(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,a=r&&r.exports===i,l=a&&t.process,o=function(){try{var p=r&&r.require&&r.require("util").types;return p||l&&l.binding&&l.binding("util")}catch{}}();n.exports=o}(GC,GC.exports)),GC.exports}var uM,Fk;function z8(){if(Fk)return uM;Fk=1;var n=nue(),e=L8(),t=F8(),i=t&&t.isTypedArray,r=i?e(i):n;return uM=r,uM}var AM,zk;function yN(){if(zk)return AM;zk=1;var n=Jle(),e=P8(),t=If(),i=z2(),r=K8(),a=z8(),l=Object.prototype,o=l.hasOwnProperty;function p(C,w){var O=t(C),U=!O&&e(C),K=!O&&!U&&i(C),j=!O&&!U&&!K&&a(C),W=O||U||K||j,Y=W?n(C.length,String):[],te=Y.length;for(var J in C)(w||o.call(C,J))&&!(W&&(J=="length"||K&&(J=="offset"||J=="parent")||j&&(J=="buffer"||J=="byteLength"||J=="byteOffset")||r(J,te)))&&Y.push(J);return Y}return AM=p,AM}var cM,jk;function j8(){if(jk)return cM;jk=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return cM=e,cM}var hM,Nk;function vN(){if(Nk)return hM;Nk=1;function n(e,t){return function(i){return e(t(i))}}return hM=n,hM}var dM,Gk;function iue(){if(Gk)return dM;Gk=1;var n=vN(),e=n(Object.keys,Object);return dM=e,dM}var fM,Wk;function rue(){if(Wk)return fM;Wk=1;var n=j8(),e=iue(),t=Object.prototype,i=t.hasOwnProperty;function r(a){if(!n(a))return e(a);var l=[];for(var o in Object(a))i.call(a,o)&&o!="constructor"&&l.push(o);return l}return fM=r,fM}var pM,Qk;function xp(){if(Qk)return pM;Qk=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return pM=n,pM}var mM,Yk;function N8(){if(Yk)return mM;Yk=1;var n=ny(),e=xp(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",a="[object Proxy]";function l(o){if(!e(o))return!1;var p=n(o);return p==i||p==r||p==t||p==a}return mM=l,mM}var gM,qk;function tC(){if(qk)return gM;qk=1;var n=N8(),e=U8();function t(i){return i!=null&&e(i.length)&&!n(i)}return gM=t,gM}var yM,Hk;function Eb(){if(Hk)return yM;Hk=1;var n=yN(),e=rue(),t=tC();function i(r){return t(r)?n(r):e(r)}return yM=i,yM}var vM,Vk;function CN(){if(Vk)return vM;Vk=1;var n=gN(),e=Eb();function t(i,r){return i&&n(i,r,e)}return vM=t,vM}var CM,$k;function j2(){if($k)return CM;$k=1;function n(e){return e}return CM=n,CM}var _M,Zk;function _N(){if(Zk)return _M;Zk=1;var n=j2();function e(t){return typeof t=="function"?t:n}return _M=e,_M}var bM,Xk;function G8(){if(Xk)return bM;Xk=1;var n=CN(),e=_N();function t(i,r){return i&&n(i,e(r))}return bM=t,bM}var xM,Jk;function W8(){if(Jk)return xM;Jk=1;var n=vN(),e=n(Object.getPrototypeOf,Object);return xM=e,xM}var MM,eD;function bN(){if(eD)return MM;eD=1;var n=ny(),e=W8(),t=i0(),i="[object Object]",r=Function.prototype,a=Object.prototype,l=r.toString,o=a.hasOwnProperty,p=l.call(Object);function C(w){if(!t(w)||n(w)!=i)return!1;var O=e(w);if(O===null)return!0;var U=o.call(O,"constructor")&&O.constructor;return typeof U=="function"&&U instanceof U&&l.call(U)==p}return MM=C,MM}var wM,tD;function xN(){if(tD)return wM;tD=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,a=Array(r);++i<r;)a[i]=t(e[i],i,e);return a}return wM=n,wM}var SM,nD;function oue(){if(nD)return SM;nD=1;function n(){this.__data__=[],this.size=0}return SM=n,SM}var EM,iD;function Bb(){if(iD)return EM;iD=1;function n(e,t){return e===t||e!==e&&t!==t}return EM=n,EM}var BM,rD;function N2(){if(rD)return BM;rD=1;var n=Bb();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return BM=e,BM}var OM,oD;function aue(){if(oD)return OM;oD=1;var n=N2(),e=Array.prototype,t=e.splice;function i(r){var a=this.__data__,l=n(a,r);if(l<0)return!1;var o=a.length-1;return l==o?a.pop():t.call(a,l,1),--this.size,!0}return OM=i,OM}var IM,aD;function sue(){if(aD)return IM;aD=1;var n=N2();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return IM=e,IM}var TM,sD;function lue(){if(sD)return TM;sD=1;var n=N2();function e(t){return n(this.__data__,t)>-1}return TM=e,TM}var kM,lD;function uue(){if(lD)return kM;lD=1;var n=N2();function e(t,i){var r=this.__data__,a=n(r,t);return a<0?(++this.size,r.push([t,i])):r[a][1]=i,this}return kM=e,kM}var DM,uD;function G2(){if(uD)return DM;uD=1;var n=oue(),e=aue(),t=sue(),i=lue(),r=uue();function a(l){var o=-1,p=l==null?0:l.length;for(this.clear();++o<p;){var C=l[o];this.set(C[0],C[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=i,a.prototype.set=r,DM=a,DM}var RM,AD;function Aue(){if(AD)return RM;AD=1;var n=G2();function e(){this.__data__=new n,this.size=0}return RM=e,RM}var PM,cD;function cue(){if(cD)return PM;cD=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return PM=n,PM}var KM,hD;function hue(){if(hD)return KM;hD=1;function n(e){return this.__data__.get(e)}return KM=n,KM}var UM,dD;function due(){if(dD)return UM;dD=1;function n(e){return this.__data__.has(e)}return UM=n,UM}var LM,fD;function fue(){if(fD)return LM;fD=1;var n=cm(),e=n["__core-js_shared__"];return LM=e,LM}var FM,pD;function pue(){if(pD)return FM;pD=1;var n=fue(),e=function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function t(i){return!!e&&e in i}return FM=t,FM}var zM,mD;function MN(){if(mD)return zM;mD=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return zM=t,zM}var jM,gD;function mue(){if(gD)return jM;gD=1;var n=N8(),e=pue(),t=xp(),i=MN(),r=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,p=l.toString,C=o.hasOwnProperty,w=RegExp("^"+p.call(C).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function O(U){if(!t(U)||e(U))return!1;var K=n(U)?w:a;return K.test(i(U))}return jM=O,jM}var NM,yD;function gue(){if(yD)return NM;yD=1;function n(e,t){return e?.[t]}return NM=n,NM}var GM,vD;function iy(){if(vD)return GM;vD=1;var n=mue(),e=gue();function t(i,r){var a=e(i,r);return n(a)?a:void 0}return GM=t,GM}var WM,CD;function Q8(){if(CD)return WM;CD=1;var n=iy(),e=cm(),t=n(e,"Map");return WM=t,WM}var QM,_D;function W2(){if(_D)return QM;_D=1;var n=iy(),e=n(Object,"create");return QM=e,QM}var YM,bD;function yue(){if(bD)return YM;bD=1;var n=W2();function e(){this.__data__=n?n(null):{},this.size=0}return YM=e,YM}var qM,xD;function vue(){if(xD)return qM;xD=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return qM=n,qM}var HM,MD;function Cue(){if(MD)return HM;MD=1;var n=W2(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(a){var l=this.__data__;if(n){var o=l[a];return o===e?void 0:o}return i.call(l,a)?l[a]:void 0}return HM=r,HM}var VM,wD;function _ue(){if(wD)return VM;wD=1;var n=W2(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var a=this.__data__;return n?a[r]!==void 0:t.call(a,r)}return VM=i,VM}var $M,SD;function bue(){if(SD)return $M;SD=1;var n=W2(),e="__lodash_hash_undefined__";function t(i,r){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=n&&r===void 0?e:r,this}return $M=t,$M}var ZM,ED;function xue(){if(ED)return ZM;ED=1;var n=yue(),e=vue(),t=Cue(),i=_ue(),r=bue();function a(l){var o=-1,p=l==null?0:l.length;for(this.clear();++o<p;){var C=l[o];this.set(C[0],C[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=i,a.prototype.set=r,ZM=a,ZM}var XM,BD;function Mue(){if(BD)return XM;BD=1;var n=xue(),e=G2(),t=Q8();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return XM=i,XM}var JM,OD;function wue(){if(OD)return JM;OD=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return JM=n,JM}var ew,ID;function Q2(){if(ID)return ew;ID=1;var n=wue();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return ew=e,ew}var tw,TD;function Sue(){if(TD)return tw;TD=1;var n=Q2();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return tw=e,tw}var nw,kD;function Eue(){if(kD)return nw;kD=1;var n=Q2();function e(t){return n(this,t).get(t)}return nw=e,nw}var iw,DD;function Bue(){if(DD)return iw;DD=1;var n=Q2();function e(t){return n(this,t).has(t)}return iw=e,iw}var rw,RD;function Oue(){if(RD)return rw;RD=1;var n=Q2();function e(t,i){var r=n(this,t),a=r.size;return r.set(t,i),this.size+=r.size==a?0:1,this}return rw=e,rw}var ow,PD;function Y8(){if(PD)return ow;PD=1;var n=Mue(),e=Sue(),t=Eue(),i=Bue(),r=Oue();function a(l){var o=-1,p=l==null?0:l.length;for(this.clear();++o<p;){var C=l[o];this.set(C[0],C[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=i,a.prototype.set=r,ow=a,ow}var aw,KD;function Iue(){if(KD)return aw;KD=1;var n=G2(),e=Q8(),t=Y8(),i=200;function r(a,l){var o=this.__data__;if(o instanceof n){var p=o.__data__;if(!e||p.length<i-1)return p.push([a,l]),this.size=++o.size,this;o=this.__data__=new t(p)}return o.set(a,l),this.size=o.size,this}return aw=r,aw}var sw,UD;function Y2(){if(UD)return sw;UD=1;var n=G2(),e=Aue(),t=cue(),i=hue(),r=due(),a=Iue();function l(o){var p=this.__data__=new n(o);this.size=p.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=i,l.prototype.has=r,l.prototype.set=a,sw=l,sw}var lw,LD;function Tue(){if(LD)return lw;LD=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return lw=e,lw}var uw,FD;function kue(){if(FD)return uw;FD=1;function n(e){return this.__data__.has(e)}return uw=n,uw}var Aw,zD;function Due(){if(zD)return Aw;zD=1;var n=Y8(),e=Tue(),t=kue();function i(r){var a=-1,l=r==null?0:r.length;for(this.__data__=new n;++a<l;)this.add(r[a])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,Aw=i,Aw}var cw,jD;function Rue(){if(jD)return cw;jD=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return cw=n,cw}var hw,ND;function Pue(){if(ND)return hw;ND=1;function n(e,t){return e.has(t)}return hw=n,hw}var dw,GD;function wN(){if(GD)return dw;GD=1;var n=Due(),e=Rue(),t=Pue(),i=1,r=2;function a(l,o,p,C,w,O){var U=p&i,K=l.length,j=o.length;if(K!=j&&!(U&&j>K))return!1;var W=O.get(l),Y=O.get(o);if(W&&Y)return W==o&&Y==l;var te=-1,J=!0,oe=p&r?new n:void 0;for(O.set(l,o),O.set(o,l);++te<K;){var ne=l[te],$=o[te];if(C)var ae=U?C($,ne,te,o,l,O):C(ne,$,te,l,o,O);if(ae!==void 0){if(ae)continue;J=!1;break}if(oe){if(!e(o,function(G,ce){if(!t(oe,ce)&&(ne===G||w(ne,G,p,C,O)))return oe.push(ce)})){J=!1;break}}else if(!(ne===$||w(ne,$,p,C,O))){J=!1;break}}return O.delete(l),O.delete(o),J}return dw=a,dw}var fw,WD;function SN(){if(WD)return fw;WD=1;var n=cm(),e=n.Uint8Array;return fw=e,fw}var pw,QD;function Kue(){if(QD)return pw;QD=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,a){i[++t]=[a,r]}),i}return pw=n,pw}var mw,YD;function Uue(){if(YD)return mw;YD=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return mw=n,mw}var gw,qD;function Lue(){if(qD)return gw;qD=1;var n=Sb(),e=SN(),t=Bb(),i=wN(),r=Kue(),a=Uue(),l=1,o=2,p="[object Boolean]",C="[object Date]",w="[object Error]",O="[object Map]",U="[object Number]",K="[object RegExp]",j="[object Set]",W="[object String]",Y="[object Symbol]",te="[object ArrayBuffer]",J="[object DataView]",oe=n?n.prototype:void 0,ne=oe?oe.valueOf:void 0;function $(ae,G,ce,ge,ye,we,Oe){switch(ce){case J:if(ae.byteLength!=G.byteLength||ae.byteOffset!=G.byteOffset)return!1;ae=ae.buffer,G=G.buffer;case te:return!(ae.byteLength!=G.byteLength||!we(new e(ae),new e(G)));case p:case C:case U:return t(+ae,+G);case w:return ae.name==G.name&&ae.message==G.message;case K:case W:return ae==G+"";case O:var Se=r;case j:var Ve=ge&l;if(Se||(Se=a),ae.size!=G.size&&!Ve)return!1;var xe=Oe.get(ae);if(xe)return xe==G;ge|=o,Oe.set(ae,G);var ze=i(Se(ae),Se(G),ge,ye,we,Oe);return Oe.delete(ae),ze;case Y:if(ne)return ne.call(ae)==ne.call(G)}return!1}return gw=$,gw}var yw,HD;function EN(){if(HD)return yw;HD=1;function n(e,t){for(var i=-1,r=t.length,a=e.length;++i<r;)e[a+i]=t[i];return e}return yw=n,yw}var vw,VD;function BN(){if(VD)return vw;VD=1;var n=EN(),e=If();function t(i,r,a){var l=r(i);return e(i)?l:n(l,a(i))}return vw=t,vw}var Cw,$D;function Fue(){if($D)return Cw;$D=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,a=0,l=[];++i<r;){var o=e[i];t(o,i,e)&&(l[a++]=o)}return l}return Cw=n,Cw}var _w,ZD;function ON(){if(ZD)return _w;ZD=1;function n(){return[]}return _w=n,_w}var bw,XD;function q8(){if(XD)return bw;XD=1;var n=Fue(),e=ON(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,a=r?function(l){return l==null?[]:(l=Object(l),n(r(l),function(o){return i.call(l,o)}))}:e;return bw=a,bw}var xw,JD;function IN(){if(JD)return xw;JD=1;var n=BN(),e=q8(),t=Eb();function i(r){return n(r,t,e)}return xw=i,xw}var Mw,eR;function zue(){if(eR)return Mw;eR=1;var n=IN(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(a,l,o,p,C,w){var O=o&e,U=n(a),K=U.length,j=n(l),W=j.length;if(K!=W&&!O)return!1;for(var Y=K;Y--;){var te=U[Y];if(!(O?te in l:i.call(l,te)))return!1}var J=w.get(a),oe=w.get(l);if(J&&oe)return J==l&&oe==a;var ne=!0;w.set(a,l),w.set(l,a);for(var $=O;++Y<K;){te=U[Y];var ae=a[te],G=l[te];if(p)var ce=O?p(G,ae,te,l,a,w):p(ae,G,te,a,l,w);if(!(ce===void 0?ae===G||C(ae,G,o,p,w):ce)){ne=!1;break}$||($=te=="constructor")}if(ne&&!$){var ge=a.constructor,ye=l.constructor;ge!=ye&&"constructor"in a&&"constructor"in l&&!(typeof ge=="function"&&ge instanceof ge&&typeof ye=="function"&&ye instanceof ye)&&(ne=!1)}return w.delete(a),w.delete(l),ne}return Mw=r,Mw}var ww,tR;function jue(){if(tR)return ww;tR=1;var n=iy(),e=cm(),t=n(e,"DataView");return ww=t,ww}var Sw,nR;function Nue(){if(nR)return Sw;nR=1;var n=iy(),e=cm(),t=n(e,"Promise");return Sw=t,Sw}var Ew,iR;function Gue(){if(iR)return Ew;iR=1;var n=iy(),e=cm(),t=n(e,"Set");return Ew=t,Ew}var Bw,rR;function Wue(){if(rR)return Bw;rR=1;var n=iy(),e=cm(),t=n(e,"WeakMap");return Bw=t,Bw}var Ow,oR;function q2(){if(oR)return Ow;oR=1;var n=jue(),e=Q8(),t=Nue(),i=Gue(),r=Wue(),a=ny(),l=MN(),o="[object Map]",p="[object Object]",C="[object Promise]",w="[object Set]",O="[object WeakMap]",U="[object DataView]",K=l(n),j=l(e),W=l(t),Y=l(i),te=l(r),J=a;return(n&&J(new n(new ArrayBuffer(1)))!=U||e&&J(new e)!=o||t&&J(t.resolve())!=C||i&&J(new i)!=w||r&&J(new r)!=O)&&(J=function(oe){var ne=a(oe),$=ne==p?oe.constructor:void 0,ae=$?l($):"";if(ae)switch(ae){case K:return U;case j:return o;case W:return C;case Y:return w;case te:return O}return ne}),Ow=J,Ow}var Iw,aR;function Que(){if(aR)return Iw;aR=1;var n=Y2(),e=wN(),t=Lue(),i=zue(),r=q2(),a=If(),l=z2(),o=z8(),p=1,C="[object Arguments]",w="[object Array]",O="[object Object]",U=Object.prototype,K=U.hasOwnProperty;function j(W,Y,te,J,oe,ne){var $=a(W),ae=a(Y),G=$?w:r(W),ce=ae?w:r(Y);G=G==C?O:G,ce=ce==C?O:ce;var ge=G==O,ye=ce==O,we=G==ce;if(we&&l(W)){if(!l(Y))return!1;$=!0,ge=!1}if(we&&!ge)return ne||(ne=new n),$||o(W)?e(W,Y,te,J,oe,ne):t(W,Y,G,te,J,oe,ne);if(!(te&p)){var Oe=ge&&K.call(W,"__wrapped__"),Se=ye&&K.call(Y,"__wrapped__");if(Oe||Se){var Ve=Oe?W.value():W,xe=Se?Y.value():Y;return ne||(ne=new n),oe(Ve,xe,te,J,ne)}}return we?(ne||(ne=new n),i(W,Y,te,J,oe,ne)):!1}return Iw=j,Iw}var Tw,sR;function TN(){if(sR)return Tw;sR=1;var n=Que(),e=i0();function t(i,r,a,l,o){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,a,l,t,o)}return Tw=t,Tw}var kw,lR;function Yue(){if(lR)return kw;lR=1;var n=Y2(),e=TN(),t=1,i=2;function r(a,l,o,p){var C=o.length,w=C,O=!p;if(a==null)return!w;for(a=Object(a);C--;){var U=o[C];if(O&&U[2]?U[1]!==a[U[0]]:!(U[0]in a))return!1}for(;++C<w;){U=o[C];var K=U[0],j=a[K],W=U[1];if(O&&U[2]){if(j===void 0&&!(K in a))return!1}else{var Y=new n;if(p)var te=p(j,W,K,a,l,Y);if(!(te===void 0?e(W,j,t|i,p,Y):te))return!1}}return!0}return kw=r,kw}var Dw,uR;function kN(){if(uR)return Dw;uR=1;var n=xp();function e(t){return t===t&&!n(t)}return Dw=e,Dw}var Rw,AR;function que(){if(AR)return Rw;AR=1;var n=kN(),e=Eb();function t(i){for(var r=e(i),a=r.length;a--;){var l=r[a],o=i[l];r[a]=[l,o,n(o)]}return r}return Rw=t,Rw}var Pw,cR;function DN(){if(cR)return Pw;cR=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return Pw=n,Pw}var Kw,hR;function Hue(){if(hR)return Kw;hR=1;var n=Yue(),e=que(),t=DN();function i(r){var a=e(r);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(l){return l===r||n(l,r,a)}}return Kw=i,Kw}var Uw,dR;function H2(){if(dR)return Uw;dR=1;var n=ny(),e=i0(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return Uw=i,Uw}var Lw,fR;function H8(){if(fR)return Lw;fR=1;var n=If(),e=H2(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(a,l){if(n(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:i.test(a)||!t.test(a)||l!=null&&a in Object(l)}return Lw=r,Lw}var Fw,pR;function Vue(){if(pR)return Fw;pR=1;var n=Y8(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var a=function(){var l=arguments,o=r?r.apply(this,l):l[0],p=a.cache;if(p.has(o))return p.get(o);var C=i.apply(this,l);return a.cache=p.set(o,C)||p,C};return a.cache=new(t.Cache||n),a}return t.Cache=n,Fw=t,Fw}var zw,mR;function $ue(){if(mR)return zw;mR=1;var n=Vue(),e=500;function t(i){var r=n(i,function(l){return a.size===e&&a.clear(),l}),a=r.cache;return r}return zw=t,zw}var jw,gR;function Zue(){if(gR)return jw;gR=1;var n=$ue(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var a=[];return r.charCodeAt(0)===46&&a.push(""),r.replace(e,function(l,o,p,C){a.push(p?C.replace(t,"$1"):o||l)}),a});return jw=i,jw}var Nw,yR;function Xue(){if(yR)return Nw;yR=1;var n=Sb(),e=xN(),t=If(),i=H2(),r=n?n.prototype:void 0,a=r?r.toString:void 0;function l(o){if(typeof o=="string")return o;if(t(o))return e(o,l)+"";if(i(o))return a?a.call(o):"";var p=o+"";return p=="0"&&1/o==-1/0?"-0":p}return Nw=l,Nw}var Gw,vR;function Jue(){if(vR)return Gw;vR=1;var n=Xue();function e(t){return t==null?"":n(t)}return Gw=e,Gw}var Ww,CR;function RN(){if(CR)return Ww;CR=1;var n=If(),e=H8(),t=Zue(),i=Jue();function r(a,l){return n(a)?a:e(a,l)?[a]:t(i(a))}return Ww=r,Ww}var Qw,_R;function V2(){if(_R)return Qw;_R=1;var n=H2();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return Qw=e,Qw}var Yw,bR;function PN(){if(bR)return Yw;bR=1;var n=RN(),e=V2();function t(i,r){r=n(r,i);for(var a=0,l=r.length;i!=null&&a<l;)i=i[e(r[a++])];return a&&a==l?i:void 0}return Yw=t,Yw}var qw,xR;function eAe(){if(xR)return qw;xR=1;var n=PN();function e(t,i,r){var a=t==null?void 0:n(t,i);return a===void 0?r:a}return qw=e,qw}var Hw,MR;function tAe(){if(MR)return Hw;MR=1;function n(e,t){return e!=null&&t in Object(e)}return Hw=n,Hw}var Vw,wR;function nAe(){if(wR)return Vw;wR=1;var n=RN(),e=P8(),t=If(),i=K8(),r=U8(),a=V2();function l(o,p,C){p=n(p,o);for(var w=-1,O=p.length,U=!1;++w<O;){var K=a(p[w]);if(!(U=o!=null&&C(o,K)))break;o=o[K]}return U||++w!=O?U:(O=o==null?0:o.length,!!O&&r(O)&&i(K,O)&&(t(o)||e(o)))}return Vw=l,Vw}var $w,SR;function iAe(){if(SR)return $w;SR=1;var n=tAe(),e=nAe();function t(i,r){return i!=null&&e(i,r,n)}return $w=t,$w}var Zw,ER;function rAe(){if(ER)return Zw;ER=1;var n=TN(),e=eAe(),t=iAe(),i=H8(),r=kN(),a=DN(),l=V2(),o=1,p=2;function C(w,O){return i(w)&&r(O)?a(l(w),O):function(U){var K=e(U,w);return K===void 0&&K===O?t(U,w):n(O,K,o|p)}}return Zw=C,Zw}var Xw,BR;function oAe(){if(BR)return Xw;BR=1;function n(e){return function(t){return t?.[e]}}return Xw=n,Xw}var Jw,OR;function aAe(){if(OR)return Jw;OR=1;var n=PN();function e(t){return function(i){return n(i,t)}}return Jw=e,Jw}var eS,IR;function sAe(){if(IR)return eS;IR=1;var n=oAe(),e=aAe(),t=H8(),i=V2();function r(a){return t(a)?n(i(a)):e(a)}return eS=r,eS}var tS,TR;function lAe(){if(TR)return tS;TR=1;var n=Hue(),e=rAe(),t=j2(),i=If(),r=sAe();function a(l){return typeof l=="function"?l:l==null?t:typeof l=="object"?i(l)?e(l[0],l[1]):n(l):r(l)}return tS=a,tS}var nS,kR;function uAe(){if(kR)return nS;kR=1;var n=tC();function e(t,i){return function(r,a){if(r==null)return r;if(!n(r))return t(r,a);for(var l=r.length,o=i?l:-1,p=Object(r);(i?o--:++o<l)&&a(p[o],o,p)!==!1;);return r}}return nS=e,nS}var iS,DR;function KN(){if(DR)return iS;DR=1;var n=CN(),e=uAe(),t=e(n);return iS=t,iS}var rS,RR;function AAe(){if(RR)return rS;RR=1;var n=KN(),e=tC();function t(i,r){var a=-1,l=e(i)?Array(i.length):[];return n(i,function(o,p,C){l[++a]=r(o,p,C)}),l}return rS=t,rS}var oS,PR;function cAe(){if(PR)return oS;PR=1;var n=xN(),e=lAe(),t=AAe(),i=If();function r(a,l){var o=i(a)?n:t;return o(a,e(l,3))}return oS=r,oS}var KR;function hAe(){if(KR)return Fy;KR=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.flattenNames=void 0;var n=Zle(),e=p(n),t=G8(),i=p(t),r=bN(),a=p(r),l=cAe(),o=p(l);function p(w){return w&&w.__esModule?w:{default:w}}var C=Fy.flattenNames=function w(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],U=[];return(0,o.default)(O,function(K){Array.isArray(K)?w(K).map(function(j){return U.push(j)}):(0,a.default)(K)?(0,i.default)(K,function(j,W){j===!0&&U.push(W),U.push(W+"-"+j)}):(0,e.default)(K)&&U.push(K)}),U};return Fy.default=C,Fy}var zy={},aS,UR;function UN(){if(UR)return aS;UR=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return aS=n,aS}var sS,LR;function LN(){if(LR)return sS;LR=1;var n=iy(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return sS=e,sS}var lS,FR;function V8(){if(FR)return lS;FR=1;var n=LN();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return lS=e,lS}var uS,zR;function FN(){if(zR)return uS;zR=1;var n=V8(),e=Bb(),t=Object.prototype,i=t.hasOwnProperty;function r(a,l,o){var p=a[l];(!(i.call(a,l)&&e(p,o))||o===void 0&&!(l in a))&&n(a,l,o)}return uS=r,uS}var AS,jR;function Ob(){if(jR)return AS;jR=1;var n=FN(),e=V8();function t(i,r,a,l){var o=!a;a||(a={});for(var p=-1,C=r.length;++p<C;){var w=r[p],O=l?l(a[w],i[w],w,a,i):void 0;O===void 0&&(O=i[w]),o?e(a,w,O):n(a,w,O)}return a}return AS=t,AS}var cS,NR;function dAe(){if(NR)return cS;NR=1;var n=Ob(),e=Eb();function t(i,r){return i&&n(r,e(r),i)}return cS=t,cS}var hS,GR;function fAe(){if(GR)return hS;GR=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return hS=n,hS}var dS,WR;function pAe(){if(WR)return dS;WR=1;var n=xp(),e=j8(),t=fAe(),i=Object.prototype,r=i.hasOwnProperty;function a(l){if(!n(l))return t(l);var o=e(l),p=[];for(var C in l)C=="constructor"&&(o||!r.call(l,C))||p.push(C);return p}return dS=a,dS}var fS,QR;function Ib(){if(QR)return fS;QR=1;var n=yN(),e=pAe(),t=tC();function i(r){return t(r)?n(r,!0):e(r)}return fS=i,fS}var pS,YR;function mAe(){if(YR)return pS;YR=1;var n=Ob(),e=Ib();function t(i,r){return i&&n(r,e(r),i)}return pS=t,pS}var WC={exports:{}};WC.exports;var qR;function zN(){return qR||(qR=1,function(n,e){var t=cm(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,a=r&&r.exports===i,l=a?t.Buffer:void 0,o=l?l.allocUnsafe:void 0;function p(C,w){if(w)return C.slice();var O=C.length,U=o?o(O):new C.constructor(O);return C.copy(U),U}n.exports=p}(WC,WC.exports)),WC.exports}var mS,HR;function jN(){if(HR)return mS;HR=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return mS=n,mS}var gS,VR;function gAe(){if(VR)return gS;VR=1;var n=Ob(),e=q8();function t(i,r){return n(i,e(i),r)}return gS=t,gS}var yS,$R;function NN(){if($R)return yS;$R=1;var n=EN(),e=W8(),t=q8(),i=ON(),r=Object.getOwnPropertySymbols,a=r?function(l){for(var o=[];l;)n(o,t(l)),l=e(l);return o}:i;return yS=a,yS}var vS,ZR;function yAe(){if(ZR)return vS;ZR=1;var n=Ob(),e=NN();function t(i,r){return n(i,e(i),r)}return vS=t,vS}var CS,XR;function vAe(){if(XR)return CS;XR=1;var n=BN(),e=NN(),t=Ib();function i(r){return n(r,t,e)}return CS=i,CS}var _S,JR;function CAe(){if(JR)return _S;JR=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,a=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(a.index=i.index,a.input=i.input),a}return _S=t,_S}var bS,eP;function $8(){if(eP)return bS;eP=1;var n=SN();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return bS=e,bS}var xS,tP;function _Ae(){if(tP)return xS;tP=1;var n=$8();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return xS=e,xS}var MS,nP;function bAe(){if(nP)return MS;nP=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return MS=e,MS}var wS,iP;function xAe(){if(iP)return wS;iP=1;var n=Sb(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return wS=i,wS}var SS,rP;function GN(){if(rP)return SS;rP=1;var n=$8();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return SS=e,SS}var ES,oP;function MAe(){if(oP)return ES;oP=1;var n=$8(),e=_Ae(),t=bAe(),i=xAe(),r=GN(),a="[object Boolean]",l="[object Date]",o="[object Map]",p="[object Number]",C="[object RegExp]",w="[object Set]",O="[object String]",U="[object Symbol]",K="[object ArrayBuffer]",j="[object DataView]",W="[object Float32Array]",Y="[object Float64Array]",te="[object Int8Array]",J="[object Int16Array]",oe="[object Int32Array]",ne="[object Uint8Array]",$="[object Uint8ClampedArray]",ae="[object Uint16Array]",G="[object Uint32Array]";function ce(ge,ye,we){var Oe=ge.constructor;switch(ye){case K:return n(ge);case a:case l:return new Oe(+ge);case j:return e(ge,we);case W:case Y:case te:case J:case oe:case ne:case $:case ae:case G:return r(ge,we);case o:return new Oe;case p:case O:return new Oe(ge);case C:return t(ge);case w:return new Oe;case U:return i(ge)}}return ES=ce,ES}var BS,aP;function wAe(){if(aP)return BS;aP=1;var n=xp(),e=Object.create,t=function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var a=new i;return i.prototype=void 0,a}}();return BS=t,BS}var OS,sP;function WN(){if(sP)return OS;sP=1;var n=wAe(),e=W8(),t=j8();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return OS=i,OS}var IS,lP;function SAe(){if(lP)return IS;lP=1;var n=q2(),e=i0(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return IS=i,IS}var TS,uP;function EAe(){if(uP)return TS;uP=1;var n=SAe(),e=L8(),t=F8(),i=t&&t.isMap,r=i?e(i):n;return TS=r,TS}var kS,AP;function BAe(){if(AP)return kS;AP=1;var n=q2(),e=i0(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return kS=i,kS}var DS,cP;function OAe(){if(cP)return DS;cP=1;var n=BAe(),e=L8(),t=F8(),i=t&&t.isSet,r=i?e(i):n;return DS=r,DS}var RS,hP;function IAe(){if(hP)return RS;hP=1;var n=Y2(),e=UN(),t=FN(),i=dAe(),r=mAe(),a=zN(),l=jN(),o=gAe(),p=yAe(),C=IN(),w=vAe(),O=q2(),U=CAe(),K=MAe(),j=WN(),W=If(),Y=z2(),te=EAe(),J=xp(),oe=OAe(),ne=Eb(),$=Ib(),ae=1,G=2,ce=4,ge="[object Arguments]",ye="[object Array]",we="[object Boolean]",Oe="[object Date]",Se="[object Error]",Ve="[object Function]",xe="[object GeneratorFunction]",ze="[object Map]",st="[object Number]",Ct="[object Object]",nt="[object RegExp]",be="[object Set]",Ne="[object String]",tt="[object Symbol]",lt="[object WeakMap]",kt="[object ArrayBuffer]",gt="[object DataView]",St="[object Float32Array]",Ut="[object Float64Array]",Fe="[object Int8Array]",Ke="[object Int16Array]",Re="[object Int32Array]",He="[object Uint8Array]",bt="[object Uint8ClampedArray]",_t="[object Uint16Array]",Ot="[object Uint32Array]",qt={};qt[ge]=qt[ye]=qt[kt]=qt[gt]=qt[we]=qt[Oe]=qt[St]=qt[Ut]=qt[Fe]=qt[Ke]=qt[Re]=qt[ze]=qt[st]=qt[Ct]=qt[nt]=qt[be]=qt[Ne]=qt[tt]=qt[He]=qt[bt]=qt[_t]=qt[Ot]=!0,qt[Se]=qt[Ve]=qt[lt]=!1;function Kt(on,Jn,Wt,$n,On,Bn){var In,Oi=Jn&ae,ei=Jn&G,Kn=Jn&ce;if(Wt&&(In=On?Wt(on,$n,On,Bn):Wt(on)),In!==void 0)return In;if(!J(on))return on;var je=W(on);if(je){if(In=U(on),!Oi)return l(on,In)}else{var de=O(on),re=de==Ve||de==xe;if(Y(on))return a(on,Oi);if(de==Ct||de==ge||re&&!On){if(In=ei||re?{}:j(on),!Oi)return ei?p(on,r(In,on)):o(on,i(In,on))}else{if(!qt[de])return On?on:{};In=K(on,de,Oi)}}Bn||(Bn=new n);var le=Bn.get(on);if(le)return le;Bn.set(on,In),oe(on)?on.forEach(function(We){In.add(Kt(We,Jn,Wt,We,on,Bn))}):te(on)&&on.forEach(function(We,dt){In.set(dt,Kt(We,Jn,Wt,dt,on,Bn))});var pe=Kn?ei?w:C:ei?$:ne,Te=je?void 0:pe(on);return e(Te||on,function(We,dt){Te&&(dt=We,We=on[dt]),t(In,dt,Kt(We,Jn,Wt,dt,on,Bn))}),In}return RS=Kt,RS}var PS,dP;function TAe(){if(dP)return PS;dP=1;var n=IAe(),e=1,t=4;function i(r){return n(r,e|t)}return PS=i,PS}var fP;function kAe(){if(fP)return zy;fP=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.mergeClasses=void 0;var n=G8(),e=a(n),t=TAe(),i=a(t),r=Object.assign||function(o){for(var p=1;p<arguments.length;p++){var C=arguments[p];for(var w in C)Object.prototype.hasOwnProperty.call(C,w)&&(o[w]=C[w])}return o};function a(o){return o&&o.__esModule?o:{default:o}}var l=zy.mergeClasses=function(p){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],w=p.default&&(0,i.default)(p.default)||{};return C.map(function(O){var U=p[O];return U&&(0,e.default)(U,function(K,j){w[j]||(w[j]={}),w[j]=r({},w[j],U[j])}),O}),w};return zy.default=l,zy}var jy={},pP;function DAe(){if(pP)return jy;pP=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.autoprefix=void 0;var n=G8(),e=i(n),t=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var p=arguments[o];for(var C in p)Object.prototype.hasOwnProperty.call(p,C)&&(l[C]=p[C])}return l};function i(l){return l&&l.__esModule?l:{default:l}}var r={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var p=o&&o.split(" ");return{position:"absolute",top:p&&p[0],right:p&&p[1],bottom:p&&p[2],left:p&&p[3]}},extend:function(o,p){var C=p[o];return C||{extend:o}}},a=jy.autoprefix=function(o){var p={};return(0,e.default)(o,function(C,w){var O={};(0,e.default)(C,function(U,K){var j=r[K];j?O=t({},O,j(U)):O[K]=U}),p[w]=O}),p};return jy.default=a,jy}var Ny={},mP;function RAe(){if(mP)return Ny;mP=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.hover=void 0;var n=Object.assign||function(p){for(var C=1;C<arguments.length;C++){var w=arguments[C];for(var O in w)Object.prototype.hasOwnProperty.call(w,O)&&(p[O]=w[O])}return p},e=Ol(),t=i(e);function i(p){return p&&p.__esModule?p:{default:p}}function r(p,C){if(!(p instanceof C))throw new TypeError("Cannot call a class as a function")}function a(p,C){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:p}function l(p,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);p.prototype=Object.create(C&&C.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(p,C):p.__proto__=C)}var o=Ny.hover=function(C){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(O){l(U,O);function U(){var K,j,W,Y;r(this,U);for(var te=arguments.length,J=Array(te),oe=0;oe<te;oe++)J[oe]=arguments[oe];return Y=(j=(W=a(this,(K=U.__proto__||Object.getPrototypeOf(U)).call.apply(K,[this].concat(J))),W),W.state={hover:!1},W.handleMouseOver=function(){return W.setState({hover:!0})},W.handleMouseOut=function(){return W.setState({hover:!1})},W.render=function(){return t.default.createElement(w,{onMouseOver:W.handleMouseOver,onMouseOut:W.handleMouseOut},t.default.createElement(C,n({},W.props,W.state)))},j),a(W,Y)}return U}(t.default.Component)};return Ny.default=o,Ny}var Gy={},gP;function PAe(){if(gP)return Gy;gP=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.active=void 0;var n=Object.assign||function(p){for(var C=1;C<arguments.length;C++){var w=arguments[C];for(var O in w)Object.prototype.hasOwnProperty.call(w,O)&&(p[O]=w[O])}return p},e=Ol(),t=i(e);function i(p){return p&&p.__esModule?p:{default:p}}function r(p,C){if(!(p instanceof C))throw new TypeError("Cannot call a class as a function")}function a(p,C){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:p}function l(p,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);p.prototype=Object.create(C&&C.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(p,C):p.__proto__=C)}var o=Gy.active=function(C){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(O){l(U,O);function U(){var K,j,W,Y;r(this,U);for(var te=arguments.length,J=Array(te),oe=0;oe<te;oe++)J[oe]=arguments[oe];return Y=(j=(W=a(this,(K=U.__proto__||Object.getPrototypeOf(U)).call.apply(K,[this].concat(J))),W),W.state={active:!1},W.handleMouseDown=function(){return W.setState({active:!0})},W.handleMouseUp=function(){return W.setState({active:!1})},W.render=function(){return t.default.createElement(w,{onMouseDown:W.handleMouseDown,onMouseUp:W.handleMouseUp},t.default.createElement(C,n({},W.props,W.state)))},j),a(W,Y)}return U}(t.default.Component)};return Gy.default=o,Gy}var hx={},yP;function KAe(){if(yP)return hx;yP=1,Object.defineProperty(hx,"__esModule",{value:!0});var n=function(t,i){var r={},a=function(o){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[o]=p};return t===0&&a("first-child"),t===i-1&&a("last-child"),(t===0||t%2===0)&&a("even"),Math.abs(t%2)===1&&a("odd"),a("nth-child",t),r};return hx.default=n,hx}var vP;function hm(){if(vP)return zd;vP=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.ReactCSS=zd.loop=zd.handleActive=zd.handleHover=zd.hover=void 0;var n=hAe(),e=U(n),t=kAe(),i=U(t),r=DAe(),a=U(r),l=RAe(),o=U(l),p=PAe(),C=U(p),w=KAe(),O=U(w);function U(j){return j&&j.__esModule?j:{default:j}}zd.hover=o.default,zd.handleHover=o.default,zd.handleActive=C.default,zd.loop=O.default;var K=zd.ReactCSS=function(W){for(var Y=arguments.length,te=Array(Y>1?Y-1:0),J=1;J<Y;J++)te[J-1]=arguments[J];var oe=(0,e.default)(te),ne=(0,i.default)(W,oe);return(0,a.default)(ne)};return zd.default=K,zd}var KS,CP;function QN(){if(CP)return KS;CP=1;var n=V8(),e=Bb();function t(i,r,a){(a!==void 0&&!e(i[r],a)||a===void 0&&!(r in i))&&n(i,r,a)}return KS=t,KS}var US,_P;function UAe(){if(_P)return US;_P=1;var n=tC(),e=i0();function t(i){return e(i)&&n(i)}return US=t,US}var LS,bP;function YN(){if(bP)return LS;bP=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return LS=n,LS}var FS,xP;function LAe(){if(xP)return FS;xP=1;var n=Ob(),e=Ib();function t(i){return n(i,e(i))}return FS=t,FS}var zS,MP;function FAe(){if(MP)return zS;MP=1;var n=QN(),e=zN(),t=GN(),i=jN(),r=WN(),a=P8(),l=If(),o=UAe(),p=z2(),C=N8(),w=xp(),O=bN(),U=z8(),K=YN(),j=LAe();function W(Y,te,J,oe,ne,$,ae){var G=K(Y,J),ce=K(te,J),ge=ae.get(ce);if(ge){n(Y,J,ge);return}var ye=$?$(G,ce,J+"",Y,te,ae):void 0,we=ye===void 0;if(we){var Oe=l(ce),Se=!Oe&&p(ce),Ve=!Oe&&!Se&&U(ce);ye=ce,Oe||Se||Ve?l(G)?ye=G:o(G)?ye=i(G):Se?(we=!1,ye=e(ce,!0)):Ve?(we=!1,ye=t(ce,!0)):ye=[]:O(ce)||a(ce)?(ye=G,a(G)?ye=j(G):(!w(G)||C(G))&&(ye=r(ce))):we=!1}we&&(ae.set(ce,ye),ne(ye,ce,oe,$,ae),ae.delete(ce)),n(Y,J,ye)}return zS=W,zS}var jS,wP;function zAe(){if(wP)return jS;wP=1;var n=Y2(),e=QN(),t=gN(),i=FAe(),r=xp(),a=Ib(),l=YN();function o(p,C,w,O,U){p!==C&&t(C,function(K,j){if(U||(U=new n),r(K))i(p,C,j,w,o,O,U);else{var W=O?O(l(p,j),K,j+"",p,C,U):void 0;W===void 0&&(W=K),e(p,j,W)}},a)}return jS=o,jS}var NS,SP;function jAe(){if(SP)return NS;SP=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return NS=n,NS}var GS,EP;function NAe(){if(EP)return GS;EP=1;var n=jAe(),e=Math.max;function t(i,r,a){return r=e(r===void 0?i.length-1:r,0),function(){for(var l=arguments,o=-1,p=e(l.length-r,0),C=Array(p);++o<p;)C[o]=l[r+o];o=-1;for(var w=Array(r+1);++o<r;)w[o]=l[o];return w[r]=a(C),n(i,this,w)}}return GS=t,GS}var WS,BP;function GAe(){if(BP)return WS;BP=1;function n(e){return function(){return e}}return WS=n,WS}var QS,OP;function WAe(){if(OP)return QS;OP=1;var n=GAe(),e=LN(),t=j2(),i=e?function(r,a){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(a),writable:!0})}:t;return QS=i,QS}var YS,IP;function QAe(){if(IP)return YS;IP=1;var n=800,e=16,t=Date.now;function i(r){var a=0,l=0;return function(){var o=t(),p=e-(o-l);if(l=o,p>0){if(++a>=n)return arguments[0]}else a=0;return r.apply(void 0,arguments)}}return YS=i,YS}var qS,TP;function YAe(){if(TP)return qS;TP=1;var n=WAe(),e=QAe(),t=e(n);return qS=t,qS}var HS,kP;function qAe(){if(kP)return HS;kP=1;var n=j2(),e=NAe(),t=YAe();function i(r,a){return t(e(r,a,n),r+"")}return HS=i,HS}var VS,DP;function HAe(){if(DP)return VS;DP=1;var n=Bb(),e=tC(),t=K8(),i=xp();function r(a,l,o){if(!i(o))return!1;var p=typeof l;return(p=="number"?e(o)&&t(l,o.length):p=="string"&&l in o)?n(o[l],a):!1}return VS=r,VS}var $S,RP;function VAe(){if(RP)return $S;RP=1;var n=qAe(),e=HAe();function t(i){return n(function(r,a){var l=-1,o=a.length,p=o>1?a[o-1]:void 0,C=o>2?a[2]:void 0;for(p=i.length>3&&typeof p=="function"?(o--,p):void 0,C&&e(a[0],a[1],C)&&(p=o<3?void 0:p,o=1),r=Object(r);++l<o;){var w=a[l];w&&i(r,w,l,p)}return r})}return $S=t,$S}var ZS,PP;function qN(){if(PP)return ZS;PP=1;var n=zAe(),e=VAe(),t=e(function(i,r,a){n(i,r,a)});return ZS=t,ZS}var XS={},Wy={},dx={},KP;function $Ae(){return KP||(KP=1,Object.defineProperty(dx,"__esModule",{value:!0}),dx.calculateChange=function(e,t,i,r,a){var l=a.clientWidth,o=a.clientHeight,p=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,C=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,w=p-(a.getBoundingClientRect().left+window.pageXOffset),O=C-(a.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var U=void 0;if(O<0?U=0:O>o?U=1:U=Math.round(O*100/o)/100,t.a!==U)return{h:t.h,s:t.s,l:t.l,a:U,source:"rgb"}}else{var K=void 0;if(w<0?K=0:w>l?K=1:K=Math.round(w*100/l)/100,r!==K)return{h:t.h,s:t.s,l:t.l,a:K,source:"rgb"}}return null}),dx}var Qy={},SC={},UP;function ZAe(){if(UP)return SC;UP=1,Object.defineProperty(SC,"__esModule",{value:!0});var n={},e=SC.render=function(i,r,a,l){if(typeof document>"u"&&!l)return null;var o=l?new l:document.createElement("canvas");o.width=a*2,o.height=a*2;var p=o.getContext("2d");return p?(p.fillStyle=i,p.fillRect(0,0,o.width,o.height),p.fillStyle=r,p.fillRect(0,0,a,a),p.translate(a,a),p.fillRect(0,0,a,a),o.toDataURL()):null};return SC.get=function(i,r,a,l){var o=i+"-"+r+"-"+a+(l?"-server":"");if(n[o])return n[o];var p=e(i,r,a,l);return n[o]=p,p},SC}var LP;function Z8(){if(LP)return Qy;LP=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.Checkboard=void 0;var n=Object.assign||function(w){for(var O=1;O<arguments.length;O++){var U=arguments[O];for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&(w[K]=U[K])}return w},e=Ol(),t=p(e),i=hm(),r=p(i),a=ZAe(),l=o(a);function o(w){if(w&&w.__esModule)return w;var O={};if(w!=null)for(var U in w)Object.prototype.hasOwnProperty.call(w,U)&&(O[U]=w[U]);return O.default=w,O}function p(w){return w&&w.__esModule?w:{default:w}}var C=Qy.Checkboard=function(O){var U=O.white,K=O.grey,j=O.size,W=O.renderers,Y=O.borderRadius,te=O.boxShadow,J=O.children,oe=(0,r.default)({default:{grid:{borderRadius:Y,boxShadow:te,absolute:"0px 0px 0px 0px",background:"url("+l.get(U,K,j,W.canvas)+") center left"}}});return(0,e.isValidElement)(J)?t.default.cloneElement(J,n({},J.props,{style:n({},J.props.style,oe.grid)})):t.default.createElement("div",{style:oe.grid})};return C.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},Qy.default=C,Qy}var FP;function XAe(){if(FP)return Wy;FP=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.Alpha=void 0;var n=Object.assign||function(Y){for(var te=1;te<arguments.length;te++){var J=arguments[te];for(var oe in J)Object.prototype.hasOwnProperty.call(J,oe)&&(Y[oe]=J[oe])}return Y},e=function(){function Y(te,J){for(var oe=0;oe<J.length;oe++){var ne=J[oe];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(te,ne.key,ne)}}return function(te,J,oe){return J&&Y(te.prototype,J),oe&&Y(te,oe),te}}(),t=Ol(),i=O(t),r=hm(),a=O(r),l=$Ae(),o=w(l),p=Z8(),C=O(p);function w(Y){if(Y&&Y.__esModule)return Y;var te={};if(Y!=null)for(var J in Y)Object.prototype.hasOwnProperty.call(Y,J)&&(te[J]=Y[J]);return te.default=Y,te}function O(Y){return Y&&Y.__esModule?Y:{default:Y}}function U(Y,te){if(!(Y instanceof te))throw new TypeError("Cannot call a class as a function")}function K(Y,te){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:Y}function j(Y,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);Y.prototype=Object.create(te&&te.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,te):Y.__proto__=te)}var W=Wy.Alpha=function(Y){j(te,Y);function te(){var J,oe,ne,$;U(this,te);for(var ae=arguments.length,G=Array(ae),ce=0;ce<ae;ce++)G[ce]=arguments[ce];return $=(oe=(ne=K(this,(J=te.__proto__||Object.getPrototypeOf(te)).call.apply(J,[this].concat(G))),ne),ne.handleChange=function(ge){var ye=o.calculateChange(ge,ne.props.hsl,ne.props.direction,ne.props.a,ne.container);ye&&typeof ne.props.onChange=="function"&&ne.props.onChange(ye,ge)},ne.handleMouseDown=function(ge){ne.handleChange(ge),window.addEventListener("mousemove",ne.handleChange),window.addEventListener("mouseup",ne.handleMouseUp)},ne.handleMouseUp=function(){ne.unbindEventListeners()},ne.unbindEventListeners=function(){window.removeEventListener("mousemove",ne.handleChange),window.removeEventListener("mouseup",ne.handleMouseUp)},oe),K(ne,$)}return e(te,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var oe=this,ne=this.props.rgb,$=(0,a.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+ne.r+","+ne.g+","+ne.b+`, 0) 0%,
           rgba(`+ne.r+","+ne.g+","+ne.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:ne.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+ne.r+","+ne.g+","+ne.b+`, 0) 0%,
           rgba(`+ne.r+","+ne.g+","+ne.b+", 1) 100%)"},pointer:{left:0,top:ne.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return i.default.createElement("div",{style:$.alpha},i.default.createElement("div",{style:$.checkboard},i.default.createElement(C.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:$.gradient}),i.default.createElement("div",{style:$.container,ref:function(G){return oe.container=G},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:$.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:$.slider}))))}}]),te}(t.PureComponent||t.Component);return Wy.default=W,Wy}var Yy={},zP;function JAe(){if(zP)return Yy;zP=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.EditableInput=void 0;var n=function(){function J(oe,ne){for(var $=0;$<ne.length;$++){var ae=ne[$];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(oe,ae.key,ae)}}return function(oe,ne,$){return ne&&J(oe.prototype,ne),$&&J(oe,$),oe}}(),e=Ol(),t=a(e),i=hm(),r=a(i);function a(J){return J&&J.__esModule?J:{default:J}}function l(J,oe,ne){return oe in J?Object.defineProperty(J,oe,{value:ne,enumerable:!0,configurable:!0,writable:!0}):J[oe]=ne,J}function o(J,oe){if(!(J instanceof oe))throw new TypeError("Cannot call a class as a function")}function p(J,oe){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:J}function C(J,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);J.prototype=Object.create(oe&&oe.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(J,oe):J.__proto__=oe)}var w=1,O=38,U=40,K=[O,U],j=function(oe){return K.indexOf(oe)>-1},W=function(oe){return Number(String(oe).replace(/%/g,""))},Y=1,te=Yy.EditableInput=function(J){C(oe,J);function oe(ne){o(this,oe);var $=p(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this));return $.handleBlur=function(){$.state.blurValue&&$.setState({value:$.state.blurValue,blurValue:null})},$.handleChange=function(ae){$.setUpdatedValue(ae.target.value,ae)},$.handleKeyDown=function(ae){var G=W(ae.target.value);if(!isNaN(G)&&j(ae.keyCode)){var ce=$.getArrowOffset(),ge=ae.keyCode===O?G+ce:G-ce;$.setUpdatedValue(ge,ae)}},$.handleDrag=function(ae){if($.props.dragLabel){var G=Math.round($.props.value+ae.movementX);G>=0&&G<=$.props.dragMax&&$.props.onChange&&$.props.onChange($.getValueObjectWithLabel(G),ae)}},$.handleMouseDown=function(ae){$.props.dragLabel&&(ae.preventDefault(),$.handleDrag(ae),window.addEventListener("mousemove",$.handleDrag),window.addEventListener("mouseup",$.handleMouseUp))},$.handleMouseUp=function(){$.unbindEventListeners()},$.unbindEventListeners=function(){window.removeEventListener("mousemove",$.handleDrag),window.removeEventListener("mouseup",$.handleMouseUp)},$.state={value:String(ne.value).toUpperCase(),blurValue:String(ne.value).toUpperCase()},$.inputId="rc-editable-input-"+Y++,$}return n(oe,[{key:"componentDidUpdate",value:function($,ae){this.props.value!==this.state.value&&($.value!==this.props.value||ae.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function($){return l({},this.props.label,$)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||w}},{key:"setUpdatedValue",value:function($,ae){var G=this.props.label?this.getValueObjectWithLabel($):$;this.props.onChange&&this.props.onChange(G,ae),this.setState({value:$})}},{key:"render",value:function(){var $=this,ae=(0,r.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:ae.wrap},t.default.createElement("input",{id:this.inputId,style:ae.input,ref:function(ce){return $.input=ce},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:ae.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),oe}(e.PureComponent||e.Component);return Yy.default=te,Yy}var qy={},fx={},jP;function ece(){return jP||(jP=1,Object.defineProperty(fx,"__esModule",{value:!0}),fx.calculateChange=function(e,t,i,r){var a=r.clientWidth,l=r.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,p=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,C=o-(r.getBoundingClientRect().left+window.pageXOffset),w=p-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var O=void 0;if(w<0)O=359;else if(w>l)O=0;else{var U=-(w*100/l)+100;O=360*U/100}if(i.h!==O)return{h:O,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var K=void 0;if(C<0)K=0;else if(C>a)K=359;else{var j=C*100/a;K=360*j/100}if(i.h!==K)return{h:K,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null}),fx}var NP;function tce(){if(NP)return qy;NP=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.Hue=void 0;var n=function(){function K(j,W){for(var Y=0;Y<W.length;Y++){var te=W[Y];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(j,te.key,te)}}return function(j,W,Y){return W&&K(j.prototype,W),Y&&K(j,Y),j}}(),e=Ol(),t=p(e),i=hm(),r=p(i),a=ece(),l=o(a);function o(K){if(K&&K.__esModule)return K;var j={};if(K!=null)for(var W in K)Object.prototype.hasOwnProperty.call(K,W)&&(j[W]=K[W]);return j.default=K,j}function p(K){return K&&K.__esModule?K:{default:K}}function C(K,j){if(!(K instanceof j))throw new TypeError("Cannot call a class as a function")}function w(K,j){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:K}function O(K,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);K.prototype=Object.create(j&&j.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(K,j):K.__proto__=j)}var U=qy.Hue=function(K){O(j,K);function j(){var W,Y,te,J;C(this,j);for(var oe=arguments.length,ne=Array(oe),$=0;$<oe;$++)ne[$]=arguments[$];return J=(Y=(te=w(this,(W=j.__proto__||Object.getPrototypeOf(j)).call.apply(W,[this].concat(ne))),te),te.handleChange=function(ae){var G=l.calculateChange(ae,te.props.direction,te.props.hsl,te.container);G&&typeof te.props.onChange=="function"&&te.props.onChange(G,ae)},te.handleMouseDown=function(ae){te.handleChange(ae),window.addEventListener("mousemove",te.handleChange),window.addEventListener("mouseup",te.handleMouseUp)},te.handleMouseUp=function(){te.unbindEventListeners()},Y),w(te,J)}return n(j,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Y=this,te=this.props.direction,J=te===void 0?"horizontal":te,oe=(0,r.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:J==="vertical"});return t.default.createElement("div",{style:oe.hue},t.default.createElement("div",{className:"hue-"+J,style:oe.container,ref:function($){return Y.container=$},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:oe.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:oe.slider}))))}}]),j}(e.PureComponent||e.Component);return qy.default=U,qy}var Hy={},GP;function nce(){if(GP)return Hy;GP=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.Raised=void 0;var n=Ol(),e=p(n),t=G0(),i=p(t),r=hm(),a=p(r),l=qN(),o=p(l);function p(w){return w&&w.__esModule?w:{default:w}}var C=Hy.Raised=function(O){var U=O.zDepth,K=O.radius,j=O.background,W=O.children,Y=O.styles,te=Y===void 0?{}:Y,J=(0,a.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+U+"px "+U*4+"px rgba(0,0,0,.24)",borderRadius:K,background:j}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},te),{"zDepth-1":U===1});return e.default.createElement("div",{style:J.wrap},e.default.createElement("div",{style:J.bg}),e.default.createElement("div",{style:J.content},W))};return C.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},C.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},Hy.default=C,Hy}var Vy={},JS,WP;function ice(){if(WP)return JS;WP=1;var n=cm(),e=function(){return n.Date.now()};return JS=e,JS}var eE,QP;function rce(){if(QP)return eE;QP=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return eE=e,eE}var tE,YP;function oce(){if(YP)return tE;YP=1;var n=rce(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return tE=t,tE}var nE,qP;function ace(){if(qP)return nE;qP=1;var n=oce(),e=xp(),t=H2(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;function p(C){if(typeof C=="number")return C;if(t(C))return i;if(e(C)){var w=typeof C.valueOf=="function"?C.valueOf():C;C=e(w)?w+"":w}if(typeof C!="string")return C===0?C:+C;C=n(C);var O=a.test(C);return O||l.test(C)?o(C.slice(2),O?2:8):r.test(C)?i:+C}return nE=p,nE}var iE,HP;function HN(){if(HP)return iE;HP=1;var n=xp(),e=ice(),t=ace(),i="Expected a function",r=Math.max,a=Math.min;function l(o,p,C){var w,O,U,K,j,W,Y=0,te=!1,J=!1,oe=!0;if(typeof o!="function")throw new TypeError(i);p=t(p)||0,n(C)&&(te=!!C.leading,J="maxWait"in C,U=J?r(t(C.maxWait)||0,p):U,oe="trailing"in C?!!C.trailing:oe);function ne(Se){var Ve=w,xe=O;return w=O=void 0,Y=Se,K=o.apply(xe,Ve),K}function $(Se){return Y=Se,j=setTimeout(ce,p),te?ne(Se):K}function ae(Se){var Ve=Se-W,xe=Se-Y,ze=p-Ve;return J?a(ze,U-xe):ze}function G(Se){var Ve=Se-W,xe=Se-Y;return W===void 0||Ve>=p||Ve<0||J&&xe>=U}function ce(){var Se=e();if(G(Se))return ge(Se);j=setTimeout(ce,ae(Se))}function ge(Se){return j=void 0,oe&&w?ne(Se):(w=O=void 0,K)}function ye(){j!==void 0&&clearTimeout(j),Y=0,w=W=O=j=void 0}function we(){return j===void 0?K:ge(e())}function Oe(){var Se=e(),Ve=G(Se);if(w=arguments,O=this,W=Se,Ve){if(j===void 0)return $(W);if(J)return clearTimeout(j),j=setTimeout(ce,p),ne(W)}return j===void 0&&(j=setTimeout(ce,p)),K}return Oe.cancel=ye,Oe.flush=we,Oe}return iE=l,iE}var rE,VP;function sce(){if(VP)return rE;VP=1;var n=HN(),e=xp(),t="Expected a function";function i(r,a,l){var o=!0,p=!0;if(typeof r!="function")throw new TypeError(t);return e(l)&&(o="leading"in l?!!l.leading:o,p="trailing"in l?!!l.trailing:p),n(r,a,{leading:o,maxWait:a,trailing:p})}return rE=i,rE}var px={},$P;function lce(){return $P||($P=1,Object.defineProperty(px,"__esModule",{value:!0}),px.calculateChange=function(e,t,i){var r=i.getBoundingClientRect(),a=r.width,l=r.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,p=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,C=o-(i.getBoundingClientRect().left+window.pageXOffset),w=p-(i.getBoundingClientRect().top+window.pageYOffset);C<0?C=0:C>a&&(C=a),w<0?w=0:w>l&&(w=l);var O=C/a,U=1-w/l;return{h:t.h,s:O,v:U,a:t.a,source:"hsv"}}),px}var ZP;function uce(){if(ZP)return Vy;ZP=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.Saturation=void 0;var n=function(){function W(Y,te){for(var J=0;J<te.length;J++){var oe=te[J];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Y,oe.key,oe)}}return function(Y,te,J){return te&&W(Y.prototype,te),J&&W(Y,J),Y}}(),e=Ol(),t=w(e),i=hm(),r=w(i),a=sce(),l=w(a),o=lce(),p=C(o);function C(W){if(W&&W.__esModule)return W;var Y={};if(W!=null)for(var te in W)Object.prototype.hasOwnProperty.call(W,te)&&(Y[te]=W[te]);return Y.default=W,Y}function w(W){return W&&W.__esModule?W:{default:W}}function O(W,Y){if(!(W instanceof Y))throw new TypeError("Cannot call a class as a function")}function U(W,Y){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:W}function K(W,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);W.prototype=Object.create(Y&&Y.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(W,Y):W.__proto__=Y)}var j=Vy.Saturation=function(W){K(Y,W);function Y(te){O(this,Y);var J=U(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,te));return J.handleChange=function(oe){typeof J.props.onChange=="function"&&J.throttle(J.props.onChange,p.calculateChange(oe,J.props.hsl,J.container),oe)},J.handleMouseDown=function(oe){J.handleChange(oe);var ne=J.getContainerRenderWindow();ne.addEventListener("mousemove",J.handleChange),ne.addEventListener("mouseup",J.handleMouseUp)},J.handleMouseUp=function(){J.unbindEventListeners()},J.throttle=(0,l.default)(function(oe,ne,$){oe(ne,$)},50),J}return n(Y,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var J=this.container,oe=window;!oe.document.contains(J)&&oe.parent!==oe;)oe=oe.parent;return oe}},{key:"unbindEventListeners",value:function(){var J=this.getContainerRenderWindow();J.removeEventListener("mousemove",this.handleChange),J.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var J=this,oe=this.props.style||{},ne=oe.color,$=oe.white,ae=oe.black,G=oe.pointer,ce=oe.circle,ge=(0,r.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:ne,white:$,black:ae,pointer:G,circle:ce}},{custom:!!this.props.style});return t.default.createElement("div",{style:ge.color,ref:function(we){return J.container=we},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:ge.white,className:"saturation-white"},t.default.createElement("div",{style:ge.black,className:"saturation-black"}),t.default.createElement("div",{style:ge.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:ge.circle}))))}}]),Y}(e.PureComponent||e.Component);return Vy.default=j,Vy}var $y={},cd={},oE,XP;function Ace(){if(XP)return oE;XP=1;var n=UN(),e=KN(),t=_N(),i=If();function r(a,l){var o=i(a)?n:e;return o(a,t(l))}return oE=r,oE}var aE,JP;function cce(){return JP||(JP=1,aE=Ace()),aE}var kx={exports:{}},hce=kx.exports,eK;function dce(){return eK||(eK=1,function(n,e){(function(t,i){n.exports=i()})(hce,function(){function t(Fe){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ke){return typeof Ke}:function(Ke){return Ke&&typeof Symbol=="function"&&Ke.constructor===Symbol&&Ke!==Symbol.prototype?"symbol":typeof Ke},t(Fe)}var i=/^\s+/,r=/\s+$/;function a(Fe,Ke){if(Fe=Fe||"",Ke=Ke||{},Fe instanceof a)return Fe;if(!(this instanceof a))return new a(Fe,Ke);var Re=l(Fe);this._originalInput=Fe,this._r=Re.r,this._g=Re.g,this._b=Re.b,this._a=Re.a,this._roundA=Math.round(100*this._a)/100,this._format=Ke.format||Re.format,this._gradientType=Ke.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Re.ok}a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Ke=this.toRgb();return(Ke.r*299+Ke.g*587+Ke.b*114)/1e3},getLuminance:function(){var Ke=this.toRgb(),Re,He,bt,_t,Ot,qt;return Re=Ke.r/255,He=Ke.g/255,bt=Ke.b/255,Re<=.03928?_t=Re/12.92:_t=Math.pow((Re+.055)/1.055,2.4),He<=.03928?Ot=He/12.92:Ot=Math.pow((He+.055)/1.055,2.4),bt<=.03928?qt=bt/12.92:qt=Math.pow((bt+.055)/1.055,2.4),.2126*_t+.7152*Ot+.0722*qt},setAlpha:function(Ke){return this._a=Ve(Ke),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Ke=w(this._r,this._g,this._b);return{h:Ke.h*360,s:Ke.s,v:Ke.v,a:this._a}},toHsvString:function(){var Ke=w(this._r,this._g,this._b),Re=Math.round(Ke.h*360),He=Math.round(Ke.s*100),bt=Math.round(Ke.v*100);return this._a==1?"hsv("+Re+", "+He+"%, "+bt+"%)":"hsva("+Re+", "+He+"%, "+bt+"%, "+this._roundA+")"},toHsl:function(){var Ke=p(this._r,this._g,this._b);return{h:Ke.h*360,s:Ke.s,l:Ke.l,a:this._a}},toHslString:function(){var Ke=p(this._r,this._g,this._b),Re=Math.round(Ke.h*360),He=Math.round(Ke.s*100),bt=Math.round(Ke.l*100);return this._a==1?"hsl("+Re+", "+He+"%, "+bt+"%)":"hsla("+Re+", "+He+"%, "+bt+"%, "+this._roundA+")"},toHex:function(Ke){return U(this._r,this._g,this._b,Ke)},toHexString:function(Ke){return"#"+this.toHex(Ke)},toHex8:function(Ke){return K(this._r,this._g,this._b,this._a,Ke)},toHex8String:function(Ke){return"#"+this.toHex8(Ke)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(xe(this._r,255)*100)+"%",g:Math.round(xe(this._g,255)*100)+"%",b:Math.round(xe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(xe(this._r,255)*100)+"%, "+Math.round(xe(this._g,255)*100)+"%, "+Math.round(xe(this._b,255)*100)+"%)":"rgba("+Math.round(xe(this._r,255)*100)+"%, "+Math.round(xe(this._g,255)*100)+"%, "+Math.round(xe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Oe[U(this._r,this._g,this._b,!0)]||!1},toFilter:function(Ke){var Re="#"+j(this._r,this._g,this._b,this._a),He=Re,bt=this._gradientType?"GradientType = 1, ":"";if(Ke){var _t=a(Ke);He="#"+j(_t._r,_t._g,_t._b,_t._a)}return"progid:DXImageTransform.Microsoft.gradient("+bt+"startColorstr="+Re+",endColorstr="+He+")"},toString:function(Ke){var Re=!!Ke;Ke=Ke||this._format;var He=!1,bt=this._a<1&&this._a>=0,_t=!Re&&bt&&(Ke==="hex"||Ke==="hex6"||Ke==="hex3"||Ke==="hex4"||Ke==="hex8"||Ke==="name");return _t?Ke==="name"&&this._a===0?this.toName():this.toRgbString():(Ke==="rgb"&&(He=this.toRgbString()),Ke==="prgb"&&(He=this.toPercentageRgbString()),(Ke==="hex"||Ke==="hex6")&&(He=this.toHexString()),Ke==="hex3"&&(He=this.toHexString(!0)),Ke==="hex4"&&(He=this.toHex8String(!0)),Ke==="hex8"&&(He=this.toHex8String()),Ke==="name"&&(He=this.toName()),Ke==="hsl"&&(He=this.toHslString()),Ke==="hsv"&&(He=this.toHsvString()),He||this.toHexString())},clone:function(){return a(this.toString())},_applyModification:function(Ke,Re){var He=Ke.apply(null,[this].concat([].slice.call(Re)));return this._r=He._r,this._g=He._g,this._b=He._b,this.setAlpha(He._a),this},lighten:function(){return this._applyModification(J,arguments)},brighten:function(){return this._applyModification(oe,arguments)},darken:function(){return this._applyModification(ne,arguments)},desaturate:function(){return this._applyModification(W,arguments)},saturate:function(){return this._applyModification(Y,arguments)},greyscale:function(){return this._applyModification(te,arguments)},spin:function(){return this._applyModification($,arguments)},_applyCombination:function(Ke,Re){return Ke.apply(null,[this].concat([].slice.call(Re)))},analogous:function(){return this._applyCombination(ge,arguments)},complement:function(){return this._applyCombination(ae,arguments)},monochromatic:function(){return this._applyCombination(ye,arguments)},splitcomplement:function(){return this._applyCombination(ce,arguments)},triad:function(){return this._applyCombination(G,[3])},tetrad:function(){return this._applyCombination(G,[4])}},a.fromRatio=function(Fe,Ke){if(t(Fe)=="object"){var Re={};for(var He in Fe)Fe.hasOwnProperty(He)&&(He==="a"?Re[He]=Fe[He]:Re[He]=Ne(Fe[He]));Fe=Re}return a(Fe,Ke)};function l(Fe){var Ke={r:0,g:0,b:0},Re=1,He=null,bt=null,_t=null,Ot=!1,qt=!1;return typeof Fe=="string"&&(Fe=St(Fe)),t(Fe)=="object"&&(gt(Fe.r)&&gt(Fe.g)&&gt(Fe.b)?(Ke=o(Fe.r,Fe.g,Fe.b),Ot=!0,qt=String(Fe.r).substr(-1)==="%"?"prgb":"rgb"):gt(Fe.h)&&gt(Fe.s)&&gt(Fe.v)?(He=Ne(Fe.s),bt=Ne(Fe.v),Ke=O(Fe.h,He,bt),Ot=!0,qt="hsv"):gt(Fe.h)&&gt(Fe.s)&&gt(Fe.l)&&(He=Ne(Fe.s),_t=Ne(Fe.l),Ke=C(Fe.h,He,_t),Ot=!0,qt="hsl"),Fe.hasOwnProperty("a")&&(Re=Fe.a)),Re=Ve(Re),{ok:Ot,format:Fe.format||qt,r:Math.min(255,Math.max(Ke.r,0)),g:Math.min(255,Math.max(Ke.g,0)),b:Math.min(255,Math.max(Ke.b,0)),a:Re}}function o(Fe,Ke,Re){return{r:xe(Fe,255)*255,g:xe(Ke,255)*255,b:xe(Re,255)*255}}function p(Fe,Ke,Re){Fe=xe(Fe,255),Ke=xe(Ke,255),Re=xe(Re,255);var He=Math.max(Fe,Ke,Re),bt=Math.min(Fe,Ke,Re),_t,Ot,qt=(He+bt)/2;if(He==bt)_t=Ot=0;else{var Kt=He-bt;switch(Ot=qt>.5?Kt/(2-He-bt):Kt/(He+bt),He){case Fe:_t=(Ke-Re)/Kt+(Ke<Re?6:0);break;case Ke:_t=(Re-Fe)/Kt+2;break;case Re:_t=(Fe-Ke)/Kt+4;break}_t/=6}return{h:_t,s:Ot,l:qt}}function C(Fe,Ke,Re){var He,bt,_t;Fe=xe(Fe,360),Ke=xe(Ke,100),Re=xe(Re,100);function Ot(on,Jn,Wt){return Wt<0&&(Wt+=1),Wt>1&&(Wt-=1),Wt<1/6?on+(Jn-on)*6*Wt:Wt<1/2?Jn:Wt<2/3?on+(Jn-on)*(2/3-Wt)*6:on}if(Ke===0)He=bt=_t=Re;else{var qt=Re<.5?Re*(1+Ke):Re+Ke-Re*Ke,Kt=2*Re-qt;He=Ot(Kt,qt,Fe+1/3),bt=Ot(Kt,qt,Fe),_t=Ot(Kt,qt,Fe-1/3)}return{r:He*255,g:bt*255,b:_t*255}}function w(Fe,Ke,Re){Fe=xe(Fe,255),Ke=xe(Ke,255),Re=xe(Re,255);var He=Math.max(Fe,Ke,Re),bt=Math.min(Fe,Ke,Re),_t,Ot,qt=He,Kt=He-bt;if(Ot=He===0?0:Kt/He,He==bt)_t=0;else{switch(He){case Fe:_t=(Ke-Re)/Kt+(Ke<Re?6:0);break;case Ke:_t=(Re-Fe)/Kt+2;break;case Re:_t=(Fe-Ke)/Kt+4;break}_t/=6}return{h:_t,s:Ot,v:qt}}function O(Fe,Ke,Re){Fe=xe(Fe,360)*6,Ke=xe(Ke,100),Re=xe(Re,100);var He=Math.floor(Fe),bt=Fe-He,_t=Re*(1-Ke),Ot=Re*(1-bt*Ke),qt=Re*(1-(1-bt)*Ke),Kt=He%6,on=[Re,Ot,_t,_t,qt,Re][Kt],Jn=[qt,Re,Re,Ot,_t,_t][Kt],Wt=[_t,_t,qt,Re,Re,Ot][Kt];return{r:on*255,g:Jn*255,b:Wt*255}}function U(Fe,Ke,Re,He){var bt=[be(Math.round(Fe).toString(16)),be(Math.round(Ke).toString(16)),be(Math.round(Re).toString(16))];return He&&bt[0].charAt(0)==bt[0].charAt(1)&&bt[1].charAt(0)==bt[1].charAt(1)&&bt[2].charAt(0)==bt[2].charAt(1)?bt[0].charAt(0)+bt[1].charAt(0)+bt[2].charAt(0):bt.join("")}function K(Fe,Ke,Re,He,bt){var _t=[be(Math.round(Fe).toString(16)),be(Math.round(Ke).toString(16)),be(Math.round(Re).toString(16)),be(tt(He))];return bt&&_t[0].charAt(0)==_t[0].charAt(1)&&_t[1].charAt(0)==_t[1].charAt(1)&&_t[2].charAt(0)==_t[2].charAt(1)&&_t[3].charAt(0)==_t[3].charAt(1)?_t[0].charAt(0)+_t[1].charAt(0)+_t[2].charAt(0)+_t[3].charAt(0):_t.join("")}function j(Fe,Ke,Re,He){var bt=[be(tt(He)),be(Math.round(Fe).toString(16)),be(Math.round(Ke).toString(16)),be(Math.round(Re).toString(16))];return bt.join("")}a.equals=function(Fe,Ke){return!Fe||!Ke?!1:a(Fe).toRgbString()==a(Ke).toRgbString()},a.random=function(){return a.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function W(Fe,Ke){Ke=Ke===0?0:Ke||10;var Re=a(Fe).toHsl();return Re.s-=Ke/100,Re.s=ze(Re.s),a(Re)}function Y(Fe,Ke){Ke=Ke===0?0:Ke||10;var Re=a(Fe).toHsl();return Re.s+=Ke/100,Re.s=ze(Re.s),a(Re)}function te(Fe){return a(Fe).desaturate(100)}function J(Fe,Ke){Ke=Ke===0?0:Ke||10;var Re=a(Fe).toHsl();return Re.l+=Ke/100,Re.l=ze(Re.l),a(Re)}function oe(Fe,Ke){Ke=Ke===0?0:Ke||10;var Re=a(Fe).toRgb();return Re.r=Math.max(0,Math.min(255,Re.r-Math.round(255*-(Ke/100)))),Re.g=Math.max(0,Math.min(255,Re.g-Math.round(255*-(Ke/100)))),Re.b=Math.max(0,Math.min(255,Re.b-Math.round(255*-(Ke/100)))),a(Re)}function ne(Fe,Ke){Ke=Ke===0?0:Ke||10;var Re=a(Fe).toHsl();return Re.l-=Ke/100,Re.l=ze(Re.l),a(Re)}function $(Fe,Ke){var Re=a(Fe).toHsl(),He=(Re.h+Ke)%360;return Re.h=He<0?360+He:He,a(Re)}function ae(Fe){var Ke=a(Fe).toHsl();return Ke.h=(Ke.h+180)%360,a(Ke)}function G(Fe,Ke){if(isNaN(Ke)||Ke<=0)throw new Error("Argument to polyad must be a positive number");for(var Re=a(Fe).toHsl(),He=[a(Fe)],bt=360/Ke,_t=1;_t<Ke;_t++)He.push(a({h:(Re.h+_t*bt)%360,s:Re.s,l:Re.l}));return He}function ce(Fe){var Ke=a(Fe).toHsl(),Re=Ke.h;return[a(Fe),a({h:(Re+72)%360,s:Ke.s,l:Ke.l}),a({h:(Re+216)%360,s:Ke.s,l:Ke.l})]}function ge(Fe,Ke,Re){Ke=Ke||6,Re=Re||30;var He=a(Fe).toHsl(),bt=360/Re,_t=[a(Fe)];for(He.h=(He.h-(bt*Ke>>1)+720)%360;--Ke;)He.h=(He.h+bt)%360,_t.push(a(He));return _t}function ye(Fe,Ke){Ke=Ke||6;for(var Re=a(Fe).toHsv(),He=Re.h,bt=Re.s,_t=Re.v,Ot=[],qt=1/Ke;Ke--;)Ot.push(a({h:He,s:bt,v:_t})),_t=(_t+qt)%1;return Ot}a.mix=function(Fe,Ke,Re){Re=Re===0?0:Re||50;var He=a(Fe).toRgb(),bt=a(Ke).toRgb(),_t=Re/100,Ot={r:(bt.r-He.r)*_t+He.r,g:(bt.g-He.g)*_t+He.g,b:(bt.b-He.b)*_t+He.b,a:(bt.a-He.a)*_t+He.a};return a(Ot)},a.readability=function(Fe,Ke){var Re=a(Fe),He=a(Ke);return(Math.max(Re.getLuminance(),He.getLuminance())+.05)/(Math.min(Re.getLuminance(),He.getLuminance())+.05)},a.isReadable=function(Fe,Ke,Re){var He=a.readability(Fe,Ke),bt,_t;switch(_t=!1,bt=Ut(Re),bt.level+bt.size){case"AAsmall":case"AAAlarge":_t=He>=4.5;break;case"AAlarge":_t=He>=3;break;case"AAAsmall":_t=He>=7;break}return _t},a.mostReadable=function(Fe,Ke,Re){var He=null,bt=0,_t,Ot,qt,Kt;Re=Re||{},Ot=Re.includeFallbackColors,qt=Re.level,Kt=Re.size;for(var on=0;on<Ke.length;on++)_t=a.readability(Fe,Ke[on]),_t>bt&&(bt=_t,He=a(Ke[on]));return a.isReadable(Fe,He,{level:qt,size:Kt})||!Ot?He:(Re.includeFallbackColors=!1,a.mostReadable(Fe,["#fff","#000"],Re))};var we=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Oe=a.hexNames=Se(we);function Se(Fe){var Ke={};for(var Re in Fe)Fe.hasOwnProperty(Re)&&(Ke[Fe[Re]]=Re);return Ke}function Ve(Fe){return Fe=parseFloat(Fe),(isNaN(Fe)||Fe<0||Fe>1)&&(Fe=1),Fe}function xe(Fe,Ke){Ct(Fe)&&(Fe="100%");var Re=nt(Fe);return Fe=Math.min(Ke,Math.max(0,parseFloat(Fe))),Re&&(Fe=parseInt(Fe*Ke,10)/100),Math.abs(Fe-Ke)<1e-6?1:Fe%Ke/parseFloat(Ke)}function ze(Fe){return Math.min(1,Math.max(0,Fe))}function st(Fe){return parseInt(Fe,16)}function Ct(Fe){return typeof Fe=="string"&&Fe.indexOf(".")!=-1&&parseFloat(Fe)===1}function nt(Fe){return typeof Fe=="string"&&Fe.indexOf("%")!=-1}function be(Fe){return Fe.length==1?"0"+Fe:""+Fe}function Ne(Fe){return Fe<=1&&(Fe=Fe*100+"%"),Fe}function tt(Fe){return Math.round(parseFloat(Fe)*255).toString(16)}function lt(Fe){return st(Fe)/255}var kt=function(){var Fe="[-\\+]?\\d+%?",Ke="[-\\+]?\\d*\\.\\d+%?",Re="(?:"+Ke+")|(?:"+Fe+")",He="[\\s|\\(]+("+Re+")[,|\\s]+("+Re+")[,|\\s]+("+Re+")\\s*\\)?",bt="[\\s|\\(]+("+Re+")[,|\\s]+("+Re+")[,|\\s]+("+Re+")[,|\\s]+("+Re+")\\s*\\)?";return{CSS_UNIT:new RegExp(Re),rgb:new RegExp("rgb"+He),rgba:new RegExp("rgba"+bt),hsl:new RegExp("hsl"+He),hsla:new RegExp("hsla"+bt),hsv:new RegExp("hsv"+He),hsva:new RegExp("hsva"+bt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function gt(Fe){return!!kt.CSS_UNIT.exec(Fe)}function St(Fe){Fe=Fe.replace(i,"").replace(r,"").toLowerCase();var Ke=!1;if(we[Fe])Fe=we[Fe],Ke=!0;else if(Fe=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Re;return(Re=kt.rgb.exec(Fe))?{r:Re[1],g:Re[2],b:Re[3]}:(Re=kt.rgba.exec(Fe))?{r:Re[1],g:Re[2],b:Re[3],a:Re[4]}:(Re=kt.hsl.exec(Fe))?{h:Re[1],s:Re[2],l:Re[3]}:(Re=kt.hsla.exec(Fe))?{h:Re[1],s:Re[2],l:Re[3],a:Re[4]}:(Re=kt.hsv.exec(Fe))?{h:Re[1],s:Re[2],v:Re[3]}:(Re=kt.hsva.exec(Fe))?{h:Re[1],s:Re[2],v:Re[3],a:Re[4]}:(Re=kt.hex8.exec(Fe))?{r:st(Re[1]),g:st(Re[2]),b:st(Re[3]),a:lt(Re[4]),format:Ke?"name":"hex8"}:(Re=kt.hex6.exec(Fe))?{r:st(Re[1]),g:st(Re[2]),b:st(Re[3]),format:Ke?"name":"hex"}:(Re=kt.hex4.exec(Fe))?{r:st(Re[1]+""+Re[1]),g:st(Re[2]+""+Re[2]),b:st(Re[3]+""+Re[3]),a:lt(Re[4]+""+Re[4]),format:Ke?"name":"hex8"}:(Re=kt.hex3.exec(Fe))?{r:st(Re[1]+""+Re[1]),g:st(Re[2]+""+Re[2]),b:st(Re[3]+""+Re[3]),format:Ke?"name":"hex"}:!1}function Ut(Fe){var Ke,Re;return Fe=Fe||{level:"AA",size:"small"},Ke=(Fe.level||"AA").toUpperCase(),Re=(Fe.size||"small").toLowerCase(),Ke!=="AA"&&Ke!=="AAA"&&(Ke="AA"),Re!=="small"&&Re!=="large"&&(Re="small"),{level:Ke,size:Re}}return a})}(kx)),kx.exports}var tK;function VN(){if(tK)return cd;tK=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.isvalidColorString=cd.red=cd.getContrastingColor=cd.isValidHex=cd.toState=cd.simpleCheckForValidColor=void 0;var n=cce(),e=r(n),t=dce(),i=r(t);function r(l){return l&&l.__esModule?l:{default:l}}cd.simpleCheckForValidColor=function(o){var p=["r","g","b","a","h","s","l","v"],C=0,w=0;return(0,e.default)(p,function(O){if(o[O]&&(C+=1,isNaN(o[O])||(w+=1),O==="s"||O==="l")){var U=/^\d+%$/;U.test(o[O])&&(w+=1)}}),C===w?o:!1};var a=cd.toState=function(o,p){var C=o.hex?(0,i.default)(o.hex):(0,i.default)(o),w=C.toHsl(),O=C.toHsv(),U=C.toRgb(),K=C.toHex();w.s===0&&(w.h=p||0,O.h=p||0);var j=K==="000000"&&U.a===0;return{hsl:w,hex:j?"transparent":"#"+K,rgb:U,hsv:O,oldHue:o.h||p||w.h,source:o.source}};return cd.isValidHex=function(o){if(o==="transparent")return!0;var p=String(o).charAt(0)==="#"?1:0;return o.length!==4+p&&o.length<7+p&&(0,i.default)(o).isValid()},cd.getContrastingColor=function(o){if(!o)return"#fff";var p=a(o);if(p.hex==="transparent")return"rgba(0,0,0,0.4)";var C=(p.rgb.r*299+p.rgb.g*587+p.rgb.b*114)/1e3;return C>=128?"#000":"#fff"},cd.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},cd.isvalidColorString=function(o,p){var C=o.replace("","");return(0,i.default)(p+" ("+C+")")._ok},cd}var nK;function fce(){if(nK)return $y;nK=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.ColorWrap=void 0;var n=Object.assign||function(j){for(var W=1;W<arguments.length;W++){var Y=arguments[W];for(var te in Y)Object.prototype.hasOwnProperty.call(Y,te)&&(j[te]=Y[te])}return j},e=function(){function j(W,Y){for(var te=0;te<Y.length;te++){var J=Y[te];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(W,J.key,J)}}return function(W,Y,te){return Y&&j(W.prototype,Y),te&&j(W,te),W}}(),t=Ol(),i=C(t),r=HN(),a=C(r),l=VN(),o=p(l);function p(j){if(j&&j.__esModule)return j;var W={};if(j!=null)for(var Y in j)Object.prototype.hasOwnProperty.call(j,Y)&&(W[Y]=j[Y]);return W.default=j,W}function C(j){return j&&j.__esModule?j:{default:j}}function w(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")}function O(j,W){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:j}function U(j,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);j.prototype=Object.create(W&&W.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(j,W):j.__proto__=W)}var K=$y.ColorWrap=function(W){var Y=function(te){U(J,te);function J(oe){w(this,J);var ne=O(this,(J.__proto__||Object.getPrototypeOf(J)).call(this));return ne.handleChange=function($,ae){var G=o.simpleCheckForValidColor($);if(G){var ce=o.toState($,$.h||ne.state.oldHue);ne.setState(ce),ne.props.onChangeComplete&&ne.debounce(ne.props.onChangeComplete,ce,ae),ne.props.onChange&&ne.props.onChange(ce,ae)}},ne.handleSwatchHover=function($,ae){var G=o.simpleCheckForValidColor($);if(G){var ce=o.toState($,$.h||ne.state.oldHue);ne.props.onSwatchHover&&ne.props.onSwatchHover(ce,ae)}},ne.state=n({},o.toState(oe.color,0)),ne.debounce=(0,a.default)(function($,ae,G){$(ae,G)},100),ne}return e(J,[{key:"render",value:function(){var ne={};return this.props.onSwatchHover&&(ne.onSwatchHover=this.handleSwatchHover),i.default.createElement(W,n({},this.props,this.state,{onChange:this.handleChange},ne))}}],[{key:"getDerivedStateFromProps",value:function(ne,$){return n({},o.toState(ne.color,$.oldHue))}}]),J}(t.PureComponent||t.Component);return Y.propTypes=n({},W.propTypes),Y.defaultProps=n({},W.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),Y};return $y.default=K,$y}var Zy={},EC={},iK;function pce(){if(iK)return EC;iK=1,Object.defineProperty(EC,"__esModule",{value:!0}),EC.handleFocus=void 0;var n=Object.assign||function(p){for(var C=1;C<arguments.length;C++){var w=arguments[C];for(var O in w)Object.prototype.hasOwnProperty.call(w,O)&&(p[O]=w[O])}return p},e=function(){function p(C,w){for(var O=0;O<w.length;O++){var U=w[O];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(C,U.key,U)}}return function(C,w,O){return w&&p(C.prototype,w),O&&p(C,O),C}}(),t=Ol(),i=r(t);function r(p){return p&&p.__esModule?p:{default:p}}function a(p,C){if(!(p instanceof C))throw new TypeError("Cannot call a class as a function")}function l(p,C){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:p}function o(p,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);p.prototype=Object.create(C&&C.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(p,C):p.__proto__=C)}return EC.handleFocus=function(C){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(O){o(U,O);function U(){var K,j,W,Y;a(this,U);for(var te=arguments.length,J=Array(te),oe=0;oe<te;oe++)J[oe]=arguments[oe];return Y=(j=(W=l(this,(K=U.__proto__||Object.getPrototypeOf(U)).call.apply(K,[this].concat(J))),W),W.state={focus:!1},W.handleFocus=function(){return W.setState({focus:!0})},W.handleBlur=function(){return W.setState({focus:!1})},j),l(W,Y)}return e(U,[{key:"render",value:function(){return i.default.createElement(w,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(C,n({},this.props,this.state)))}}]),U}(i.default.Component)},EC}var rK;function mce(){if(rK)return Zy;rK=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.Swatch=void 0;var n=Object.assign||function(O){for(var U=1;U<arguments.length;U++){var K=arguments[U];for(var j in K)Object.prototype.hasOwnProperty.call(K,j)&&(O[j]=K[j])}return O},e=Ol(),t=p(e),i=hm(),r=p(i),a=pce(),l=Z8(),o=p(l);function p(O){return O&&O.__esModule?O:{default:O}}var C=13,w=Zy.Swatch=function(U){var K=U.color,j=U.style,W=U.onClick,Y=W===void 0?function(){}:W,te=U.onHover,J=U.title,oe=J===void 0?K:J,ne=U.children,$=U.focus,ae=U.focusStyle,G=ae===void 0?{}:ae,ce=K==="transparent",ge=(0,r.default)({default:{swatch:n({background:K,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},j,$?G:{})}}),ye=function(xe){return Y(K,xe)},we=function(xe){return xe.keyCode===C&&Y(K,xe)},Oe=function(xe){return te(K,xe)},Se={};return te&&(Se.onMouseOver=Oe),t.default.createElement("div",n({style:ge.swatch,onClick:ye,title:oe,tabIndex:0,onKeyDown:we},Se),ne,ce&&t.default.createElement(o.default,{borderRadius:ge.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return Zy.default=(0,a.handleFocus)(w),Zy}var oK;function $N(){return oK||(oK=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=XAe();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return C(e).default}});var t=Z8();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return C(t).default}});var i=JAe();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return C(i).default}});var r=tce();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return C(r).default}});var a=nce();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return C(a).default}});var l=uce();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return C(l).default}});var o=fce();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return C(o).default}});var p=mce();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return C(p).default}});function C(w){return w&&w.__esModule?w:{default:w}}}(XS)),XS}var Xy={},sE,aK;function gce(){if(aK)return sE;aK=1;function n(e){return e===void 0}return sE=n,sE}var mx={},sK;function yce(){if(sK)return mx;sK=1,Object.defineProperty(mx,"__esModule",{value:!0});var n=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var p=arguments[o];for(var C in p)Object.prototype.hasOwnProperty.call(p,C)&&(l[C]=p[C])}return l},e=Ol(),t=i(e);function i(l){return l&&l.__esModule?l:{default:l}}function r(l,o){var p={};for(var C in l)o.indexOf(C)>=0||Object.prototype.hasOwnProperty.call(l,C)&&(p[C]=l[C]);return p}var a=24;return mx.default=function(l){var o=l.fill,p=o===void 0?"currentColor":o,C=l.width,w=C===void 0?a:C,O=l.height,U=O===void 0?a:O,K=l.style,j=K===void 0?{}:K,W=r(l,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+a+" "+a,style:n({fill:p,width:w,height:U},j)},W),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},mx}var lK;function vce(){if(lK)return Xy;lK=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.ChromeFields=void 0;var n=function(){function J(oe,ne){for(var $=0;$<ne.length;$++){var ae=ne[$];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(oe,ae.key,ae)}}return function(oe,ne,$){return ne&&J(oe.prototype,ne),$&&J(oe,$),oe}}(),e=Ol(),t=K(e),i=hm(),r=K(i),a=VN(),l=U(a),o=gce(),p=K(o),C=$N(),w=yce(),O=K(w);function U(J){if(J&&J.__esModule)return J;var oe={};if(J!=null)for(var ne in J)Object.prototype.hasOwnProperty.call(J,ne)&&(oe[ne]=J[ne]);return oe.default=J,oe}function K(J){return J&&J.__esModule?J:{default:J}}function j(J,oe){if(!(J instanceof oe))throw new TypeError("Cannot call a class as a function")}function W(J,oe){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:J}function Y(J,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);J.prototype=Object.create(oe&&oe.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(J,oe):J.__proto__=oe)}var te=Xy.ChromeFields=function(J){Y(oe,J);function oe(ne){j(this,oe);var $=W(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this));return $.toggleViews=function(){$.state.view==="hex"?$.setState({view:"rgb"}):$.state.view==="rgb"?$.setState({view:"hsl"}):$.state.view==="hsl"&&($.props.hsl.a===1?$.setState({view:"hex"}):$.setState({view:"rgb"}))},$.handleChange=function(ae,G){ae.hex?l.isValidHex(ae.hex)&&$.props.onChange({hex:ae.hex,source:"hex"},G):ae.r||ae.g||ae.b?$.props.onChange({r:ae.r||$.props.rgb.r,g:ae.g||$.props.rgb.g,b:ae.b||$.props.rgb.b,source:"rgb"},G):ae.a?(ae.a<0?ae.a=0:ae.a>1&&(ae.a=1),$.props.onChange({h:$.props.hsl.h,s:$.props.hsl.s,l:$.props.hsl.l,a:Math.round(ae.a*100)/100,source:"rgb"},G)):(ae.h||ae.s||ae.l)&&(typeof ae.s=="string"&&ae.s.includes("%")&&(ae.s=ae.s.replace("%","")),typeof ae.l=="string"&&ae.l.includes("%")&&(ae.l=ae.l.replace("%","")),ae.s==1?ae.s=.01:ae.l==1&&(ae.l=.01),$.props.onChange({h:ae.h||$.props.hsl.h,s:Number((0,p.default)(ae.s)?$.props.hsl.s:ae.s),l:Number((0,p.default)(ae.l)?$.props.hsl.l:ae.l),source:"hsl"},G))},$.showHighlight=function(ae){ae.currentTarget.style.background="#eee"},$.hideHighlight=function(ae){ae.currentTarget.style.background="transparent"},ne.hsl.a!==1&&ne.view==="hex"?$.state={view:"rgb"}:$.state={view:ne.view},$}return n(oe,[{key:"render",value:function(){var $=this,ae=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),G=void 0;return this.state.view==="hex"?G=t.default.createElement("div",{style:ae.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ae.field},t.default.createElement(C.EditableInput,{style:{input:ae.input,label:ae.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?G=t.default.createElement("div",{style:ae.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ae.field},t.default.createElement(C.EditableInput,{style:{input:ae.input,label:ae.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:ae.field},t.default.createElement(C.EditableInput,{style:{input:ae.input,label:ae.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:ae.field},t.default.createElement(C.EditableInput,{style:{input:ae.input,label:ae.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:ae.alpha},t.default.createElement(C.EditableInput,{style:{input:ae.input,label:ae.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(G=t.default.createElement("div",{style:ae.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ae.field},t.default.createElement(C.EditableInput,{style:{input:ae.input,label:ae.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:ae.field},t.default.createElement(C.EditableInput,{style:{input:ae.input,label:ae.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ae.field},t.default.createElement(C.EditableInput,{style:{input:ae.input,label:ae.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ae.alpha},t.default.createElement(C.EditableInput,{style:{input:ae.input,label:ae.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:ae.wrap,className:"flexbox-fix"},G,t.default.createElement("div",{style:ae.toggle},t.default.createElement("div",{style:ae.icon,onClick:this.toggleViews,ref:function(ge){return $.icon=ge}},t.default.createElement(O.default,{style:ae.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function($,ae){return $.hsl.a!==1&&ae.view==="hex"?{view:"rgb"}:null}}]),oe}(t.default.Component);return te.defaultProps={view:"hex"},Xy.default=te,Xy}var Jy={},uK;function Cce(){if(uK)return Jy;uK=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.ChromePointer=void 0;var n=Ol(),e=r(n),t=hm(),i=r(t);function r(l){return l&&l.__esModule?l:{default:l}}var a=Jy.ChromePointer=function(){var o=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return Jy.default=a,Jy}var ev={},AK;function _ce(){if(AK)return ev;AK=1,Object.defineProperty(ev,"__esModule",{value:!0}),ev.ChromePointerCircle=void 0;var n=Ol(),e=r(n),t=hm(),i=r(t);function r(l){return l&&l.__esModule?l:{default:l}}var a=ev.ChromePointerCircle=function(){var o=(0,i.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return ev.default=a,ev}var cK;function bce(){if(cK)return Ly;cK=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.Chrome=void 0;var n=Ol(),e=W(n),t=G0(),i=W(t),r=hm(),a=W(r),l=qN(),o=W(l),p=$N(),C=vce(),w=W(C),O=Cce(),U=W(O),K=_ce(),j=W(K);function W(te){return te&&te.__esModule?te:{default:te}}var Y=Ly.Chrome=function(J){var oe=J.width,ne=J.onChange,$=J.disableAlpha,ae=J.rgb,G=J.hsl,ce=J.hsv,ge=J.hex,ye=J.renderers,we=J.styles,Oe=we===void 0?{}:we,Se=J.className,Ve=Se===void 0?"":Se,xe=J.defaultView,ze=(0,a.default)((0,o.default)({default:{picker:{width:oe,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+ae.r+", "+ae.g+", "+ae.b+", "+ae.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Oe),{disableAlpha:$});return e.default.createElement("div",{style:ze.picker,className:"chrome-picker "+Ve},e.default.createElement("div",{style:ze.saturation},e.default.createElement(p.Saturation,{style:ze.Saturation,hsl:G,hsv:ce,pointer:j.default,onChange:ne})),e.default.createElement("div",{style:ze.body},e.default.createElement("div",{style:ze.controls,className:"flexbox-fix"},e.default.createElement("div",{style:ze.color},e.default.createElement("div",{style:ze.swatch},e.default.createElement("div",{style:ze.active}),e.default.createElement(p.Checkboard,{renderers:ye}))),e.default.createElement("div",{style:ze.toggles},e.default.createElement("div",{style:ze.hue},e.default.createElement(p.Hue,{style:ze.Hue,hsl:G,pointer:U.default,onChange:ne})),e.default.createElement("div",{style:ze.alpha},e.default.createElement(p.Alpha,{style:ze.Alpha,rgb:ae,hsl:G,pointer:U.default,renderers:ye,onChange:ne})))),e.default.createElement(w.default,{rgb:ae,hsl:G,hex:ge,view:xe,onChange:ne,disableAlpha:$})))};return Y.propTypes={width:i.default.oneOfType([i.default.string,i.default.number]),disableAlpha:i.default.bool,styles:i.default.object,defaultView:i.default.oneOf(["hex","rgb","hsl"])},Y.defaultProps={width:225,disableAlpha:!1,styles:{}},Ly.default=(0,p.ColorWrap)(Y),Ly}var xce=bce();const Mce=AA(xce);function so(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="04cff10f573f4461c1718b34a830d9c914f6fa95",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:124,column:9}},27:{start:{line:114,column:12},end:{line:114,column:36}},28:{start:{line:121,column:27},end:{line:121,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:125,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:115,column:11}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:121,column:20},end:{line:121,column:21}},loc:{start:{line:121,column:27},end:{line:121,column:56}},line:121}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:120,column:17},end:{line:120,column:57}},type:"cond-expr",locations:[{start:{line:120,column:36},end:{line:120,column:52}},{start:{line:120,column:55},end:{line:120,column:57}}],line:120}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU;AAAC,iBAAK,aAAa;AAAA,UAAM;AAAA,UACzC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04cff10f573f4461c1718b34a830d9c914f6fa95"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return so=function(){return l},l}so();function wce(n){so().f[0]++;const e=(so().s[0]++,n.rgb);return so().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class X8 extends ni.Component{state=(so().s[2]++,{pickerOpened:!1});colorInput=(so().s[3]++,null);constructor(e){so().f[1]++,so().s[4]++,super(e),so().s[5]++,this.onChangeNoCheck=l6.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(e){so().f[2]++,so().s[6]++,this.props.onChange(e)}calcPickerOffset=(so().s[7]++,()=>{so().f[3]++;const e=(so().s[8]++,this.colorInput);if(so().s[9]++,e){so().b[0][0]++;const t=(so().s[10]++,e.getBoundingClientRect());return so().s[11]++,{top:t.top,left:t.left+196}}else return so().b[0][1]++,so().s[12]++,{top:160,left:555}});togglePicker=(so().s[13]++,()=>{so().f[4]++,so().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})});get color(){so().f[5]++,so().s[15]++;try{return so().s[16]++,ec(this.props.value).rgb()}catch(e){return so().s[17]++,console.warn("Error parsing color: ",e),so().s[18]++,ec("rgb(255,255,255)")}}onChange(e){so().f[6]++,so().s[19]++,this.props.onChange(e===""?(so().b[1][0]++,void 0):(so().b[1][1]++,e))}render(){so().f[7]++;const e=(so().s[20]++,this.calcPickerOffset()),t=(so().s[21]++,this.color.object()),i=(so().s[22]++,{r:t.r,g:t.g,b:t.b,a:t.alpha}),r=(so().s[23]++,Ae.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:e.left,top:e.top},children:[Ae.jsx(Mce,{color:i,onChange:l=>(so().f[8]++,so().s[24]++,this.onChangeNoCheck(wce(l)))}),Ae.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),a=(so().s[25]++,{backgroundColor:this.props.value});return so().s[26]++,Ae.jsxs("div",{className:"maputnik-color-wrapper",children:[(so().b[2][0]++,this.state.pickerOpened&&(so().b[2][1]++,r)),Ae.jsx("div",{className:"maputnik-color-swatch",style:a}),Ae.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:l=>{so().f[9]++,so().s[27]++,this.colorInput=l},onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(so().b[3][0]++,this.props.value):(so().b[3][1]++,""),onChange:l=>(so().f[10]++,so().s[28]++,this.onChange(l.target.value))})]})}}function yn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="4f1ef08718bb93faa62aae09b5e3576a9aa3bb04",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAwC;AAC/C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f1ef08718bb93faa62aae09b5e3576a9aa3bb04"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return yn=function(){return l},l}yn();class F0 extends ni.Component{static defaultProps=(yn().s[0]++,{rangeStep:1});_keyboardEvent=(yn().s[1]++,!1);constructor(e){yn().f[0]++,yn().s[2]++,super(e),yn().s[3]++,this.state={uuid:+zv(),editing:!1,value:e.value,dirtyValue:e.value}}static getDerivedStateFromProps(e,t){return yn().f[1]++,yn().s[4]++,yn().b[1][0]++,!t.editing&&(yn().b[1][1]++,e.value!==t.value)?(yn().b[0][0]++,yn().s[5]++,{value:e.value,dirtyValue:e.value}):(yn().b[0][1]++,yn().s[6]++,null)}changeValue(e){yn().f[2]++;const t=(yn().s[7]++,yn().b[3][0]++,e===""||(yn().b[3][1]++,e===void 0)?(yn().b[2][0]++,void 0):(yn().b[2][1]++,+e)),i=(yn().s[8]++,this.props.value!==t);yn().s[9]++,yn().b[5][0]++,this.isValid(t)&&(yn().b[5][1]++,i)?(yn().b[4][0]++,yn().s[10]++,this.props.onChange?(yn().b[6][0]++,yn().s[11]++,this.props.onChange(t)):yn().b[6][1]++,yn().s[12]++,this.setState({value:t})):(yn().b[4][1]++,yn().s[13]++,yn().b[8][0]++,!this.isValid(t)&&(yn().b[8][1]++,i)?(yn().b[7][0]++,yn().s[14]++,this.setState({value:void 0})):yn().b[7][1]++),yn().s[15]++,this.setState({dirtyValue:e===""?(yn().b[9][0]++,void 0):(yn().b[9][1]++,e)})}isValid(e){if(yn().f[3]++,yn().s[16]++,e===void 0)return yn().b[10][0]++,yn().s[17]++,!0;yn().b[10][1]++;const t=(yn().s[18]++,+e);return yn().s[19]++,isNaN(t)?(yn().b[11][0]++,yn().s[20]++,!1):(yn().b[11][1]++,yn().s[21]++,yn().b[13][0]++,!isNaN(this.props.min)&&(yn().b[13][1]++,t<this.props.min)?(yn().b[12][0]++,yn().s[22]++,!1):(yn().b[12][1]++,yn().s[23]++,yn().b[15][0]++,!isNaN(this.props.max)&&(yn().b[15][1]++,t>this.props.max)?(yn().b[14][0]++,yn().s[24]++,!1):(yn().b[14][1]++,yn().s[25]++,!0)))}resetValue=(yn().s[26]++,()=>{if(yn().f[4]++,yn().s[27]++,this.setState({editing:!1}),yn().s[28]++,this.state.value)yn().b[16][1]++;else{yn().b[16][0]++,yn().s[29]++;return}yn().s[30]++,this.isValid(this.state.value)?yn().b[17][1]++:(yn().b[17][0]++,yn().s[31]++,this.isValid(this.props.value)?(yn().b[18][0]++,yn().s[32]++,this.changeValue(this.props.value),yn().s[33]++,this.setState({dirtyValue:this.props.value})):(yn().b[18][1]++,yn().s[34]++,this.changeValue(void 0),yn().s[35]++,this.setState({dirtyValue:void 0})))});onChangeRange=(yn().s[36]++,e=>{yn().f[5]++;let t=(yn().s[37]++,parseFloat(e.target.value));const i=(yn().s[38]++,this.props.rangeStep);let r=(yn().s[39]++,t);if(yn().s[40]++,i){yn().b[19][0]++;const a=(yn().s[41]++,t%i);yn().s[42]++,this._keyboardEvent?(yn().b[20][0]++,yn().s[43]++,t<+this.state.dirtyValue?(yn().b[21][0]++,yn().s[44]++,t=this.state.value-i):(yn().b[21][1]++,yn().s[45]++,t=this.state.value+i),yn().s[46]++,r=t):(yn().b[20][1]++,yn().s[47]++,a<i/2?(yn().b[22][0]++,yn().s[48]++,t=t-a):(yn().b[22][1]++,yn().s[49]++,t=t+(i-a)))}else yn().b[19][1]++;yn().s[50]++,this._keyboardEvent=!1,yn().s[51]++,t=Math.max(this.props.min,Math.min(this.props.max,t)),yn().s[52]++,this.setState({value:t,dirtyValue:r}),yn().s[53]++,this.props.onChange?(yn().b[23][0]++,yn().s[54]++,this.props.onChange(t)):yn().b[23][1]++});render(){if(yn().f[6]++,yn().s[55]++,yn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(yn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(yn().b[25][2]++,this.props.min!==void 0)&&(yn().b[25][3]++,this.props.max!==void 0)&&(yn().b[25][4]++,this.props.allowRange)){yn().b[24][0]++;const e=(yn().s[56]++,this.state.editing?(yn().b[26][0]++,this.state.dirtyValue):(yn().b[26][1]++,this.state.value)),t=(yn().s[57]++,this.props.default===void 0?(yn().b[27][0]++,""):(yn().b[27][1]++,this.props.default));let i;return yn().s[58]++,this.state.editingRange?(yn().b[28][0]++,yn().s[59]++,i=this.state.value):(yn().b[28][1]++,yn().s[60]++,i=e),yn().s[61]++,Ae.jsxs("div",{className:"maputnik-number-container",children:[Ae.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:e===void 0?(yn().b[29][0]++,t):(yn().b[29][1]++,e),onChange:this.onChangeRange,onKeyDown:()=>{yn().f[7]++,yn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{yn().f[8]++,yn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{yn().f[9]++,yn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{yn().f[10]++,yn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),Ae.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:i===void 0?(yn().b[30][0]++,""):(yn().b[30][1]++,i),onFocus:r=>{yn().f[11]++,yn().s[66]++,this.setState({editing:!0})},onChange:r=>{yn().f[12]++,yn().s[67]++,this.changeValue(r.target.value)},onBlur:r=>{yn().f[13]++,yn().s[68]++,this.setState({editing:!1}),yn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{yn().b[24][1]++;const e=(yn().s[70]++,this.state.editing?(yn().b[31][0]++,this.state.dirtyValue):(yn().b[31][1]++,this.state.value));return yn().s[71]++,Ae.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:this.props.default?.toString(),value:e===void 0?(yn().b[32][0]++,""):(yn().b[32][1]++,e),onChange:t=>(yn().f[14]++,yn().s[72]++,this.changeValue(t.target.value)),onFocus:()=>{yn().f[15]++,yn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}function Lm(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Lm=function(){return l},l}Lm();class ZN extends ni.Component{static defaultProps=(Lm().s[0]++,{value:!1});onChange=(Lm().s[1]++,()=>{Lm().f[0]++,Lm().s[2]++,this.props.onChange(!this.props.value)});render(){return Lm().f[1]++,Lm().s[3]++,Ae.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[Ae.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),Ae.jsx("div",{className:"maputnik-checkbox-box",children:Ae.jsx("svg",{style:{display:this.props.value?(Lm().b[0][0]++,"inline"):(Lm().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:Ae.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}function Gi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Gi=function(){return l},l}Gi();class xB extends ni.Component{static defaultProps=(Gi().s[0]++,{value:[],default:[]});constructor(e){Gi().f[0]++,Gi().s[1]++,super(e),Gi().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){Gi().f[1]++;const i=(Gi().s[3]++,[]),r=(Gi().s[4]++,t.initialPropsValue.slice(0));return Gi().s[5]++,Array(e.length).fill(null).map((a,l)=>{Gi().f[2]++,Gi().s[6]++,e.value[l]===t.initialPropsValue[l]?(Gi().b[0][0]++,Gi().s[7]++,i[l]=t.value[l]):(Gi().b[0][1]++,Gi().s[8]++,i[l]=t.value[l],Gi().s[9]++,r[l]=t.value[l])}),Gi().s[10]++,{value:i,initialPropsValue:r}}isComplete(e){return Gi().f[3]++,Gi().s[11]++,Array(this.props.length).fill(null).every((t,i)=>{Gi().f[4]++;const r=(Gi().s[12]++,e[i]);return Gi().s[13]++,Gi().b[1][0]++,!(r===void 0||(Gi().b[1][1]++,r===""))})}changeValue(e,t){Gi().f[5]++;const i=(Gi().s[14]++,this.state.value.slice(0));Gi().s[15]++,i[e]=t,Gi().s[16]++,this.setState({value:i},()=>{Gi().f[6]++,Gi().s[17]++,Gi().b[3][0]++,this.isComplete(i)&&(Gi().b[3][1]++,this.props.onChange)?(Gi().b[2][0]++,Gi().s[18]++,this.props.onChange(i)):(Gi().b[2][1]++,Gi().s[19]++,this.props.onChange?(Gi().b[4][0]++,Gi().s[20]++,this.props.onChange(void 0)):Gi().b[4][1]++)})}render(){Gi().f[7]++;const{value:e}=(Gi().s[21]++,this.state),t=(Gi().s[22]++,Gi().b[5][0]++,e.length>0&&(Gi().b[5][1]++,!e.every(r=>(Gi().f[8]++,Gi().s[23]++,Gi().b[6][0]++,r===""||(Gi().b[6][1]++,r===void 0))))),i=(Gi().s[24]++,Array(this.props.length).fill(null).map((r,a)=>(Gi().f[9]++,Gi().s[25]++,this.props.type==="number"?(Gi().b[7][0]++,Gi().s[26]++,Ae.jsx(F0,{default:(Gi().b[9][0]++,t||(Gi().b[9][1]++,!this.props.default)?(Gi().b[8][0]++,void 0):(Gi().b[8][1]++,this.props.default[a])),value:e[a],required:t?(Gi().b[10][0]++,!0):(Gi().b[10][1]++,!1),onChange:l=>(Gi().f[10]++,Gi().s[27]++,this.changeValue(a,l)),"aria-label":(Gi().b[11][0]++,this.props["aria-label"]||(Gi().b[11][1]++,this.props.label))},a)):(Gi().b[7][1]++,Gi().s[28]++,Ae.jsx(am,{default:(Gi().b[13][0]++,t||(Gi().b[13][1]++,!this.props.default)?(Gi().b[12][0]++,void 0):(Gi().b[12][1]++,this.props.default[a])),value:e[a],required:t?(Gi().b[14][0]++,!0):(Gi().b[14][1]++,!1),onChange:this.changeValue.bind(this,a),"aria-label":(Gi().b[15][0]++,this.props["aria-label"]||(Gi().b[15][1]++,this.props.label))},a)))));return Gi().s[29]++,Ae.jsx("div",{className:"maputnik-array",children:i})}}function TA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="bdd7d8430a2c43402b1b125b74a343e39aea6a6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,mBAAmB,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAExH;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdd7d8430a2c43402b1b125b74a343e39aea6a6c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return TA=function(){return l},l}TA();class Sce extends ni.Component{render(){TA().f[0]++;let e=(TA().s[0]++,this.props.options);TA().s[1]++,TA().b[1][0]++,e.length>0&&(TA().b[1][1]++,!Array.isArray(e[0]))?(TA().b[0][0]++,TA().s[2]++,e=e.map(r=>(TA().f[1]++,TA().s[3]++,[r,r]))):TA().b[0][1]++;const t=(TA().s[4]++,TA().b[2][0]++,this.props.value||(TA().b[2][1]++,e[0][0])),i=(TA().s[5]++,e.map(([r,a])=>(TA().f[2]++,TA().s[6]++,Ae.jsxs("label",{className:e0("maputnik-button","maputnik-radio-as-button",{"maputnik-button-selected":r===t}),children:[Ae.jsx("input",{type:"radio",name:this.props.name,onChange:l=>(TA().f[3]++,TA().s[7]++,this.props.onChange(r)),value:r,checked:r===t}),a]},r))));return TA().s[8]++,Ae.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:i})}}function eu(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return eu=function(){return l},l}eu();function Ece(n){eu().f[0]++;let e=(eu().s[0]++,0);return eu().s[1]++,n.forEach(([t,i])=>{eu().f[1]++,eu().s[2]++,e+=i.length}),eu().s[3]++,e}class J8 extends ni.Component{render(){eu().f[2]++;const{options:e,value:t,onChange:i,name:r,label:a}=(eu().s[4]++,this.props);return eu().s[5]++,eu().b[1][0]++,e.length<=3&&(eu().b[1][1]++,Ece(e)<=20)?(eu().b[0][0]++,eu().s[6]++,Ae.jsx(Sce,{name:r,options:e,value:(eu().b[2][0]++,t||(eu().b[2][1]++,this.props.default)),onChange:i,"aria-label":(eu().b[3][0]++,this.props["aria-label"]||(eu().b[3][1]++,a))})):(eu().b[0][1]++,eu().s[7]++,Ae.jsx(ty,{options:e,value:(eu().b[4][0]++,t||(eu().b[4][1]++,this.props.default)),onChange:i,"aria-label":(eu().b[5][0]++,this.props["aria-label"]||(eu().b[5][1]++,a))}))}}function xv(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AACtD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f693e5bbe9d7e0de15b6fd90f13b77a5ebfddf0e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return xv=function(){return l},l}xv();class Bce extends ni.Component{render(){xv().f[0]++;const e=(xv().s[0]++,this.props.t);return xv().s[1]++,Ae.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const lE=(xv().s[2]++,ls()(Bce));function lo(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="447f54dcea7174dfde20df5fd4ad658ec6e8baa0",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAyB;AAChC,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAA6B,uBAAuB;AAG7D,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"447f54dcea7174dfde20df5fd4ad658ec6e8baa0"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return lo=function(){return l},l}lo();function uE(n,e){if(lo().f[0]++,lo().s[0]++,n===""){lo().b[0][0]++,lo().s[1]++;return}else lo().b[0][1]++;let t;lo().s[2]++;const i=l=>{lo().f[1]++,lo().s[3]++;try{const o=(lo().s[4]++,new URL(l));return lo().s[5]++,o.protocol}catch{lo().s[6]++;return}},r=(lo().s[7]++,i(n)),a=(lo().s[8]++,window.location.protocol==="https:");return lo().s[9]++,r?(lo().b[1][1]++,lo().s[13]++,lo().b[4][0]++,r&&(lo().b[4][1]++,r==="http:")&&(lo().b[4][2]++,window.location.protocol==="https:")?(lo().b[3][0]++,lo().s[14]++,t=Ae.jsx(lE,{children:Ae.jsxs(Ig,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",Ae.jsx("code",{children:"https://"})," domain"]})})):lo().b[3][1]++):(lo().b[1][0]++,lo().s[10]++,a?(lo().b[2][0]++,lo().s[11]++,t=Ae.jsx(lE,{children:Ae.jsxs(Ig,{t:e,children:["Must provide protocol: ",Ae.jsx("code",{children:"https://"})]})})):(lo().b[2][1]++,lo().s[12]++,t=Ae.jsx(lE,{children:Ae.jsxs(Ig,{t:e,children:["Must provide protocol: ",Ae.jsx("code",{children:"http://"})," or ",Ae.jsx("code",{children:"https://"})]})}))),lo().s[15]++,t}class Oce extends ni.Component{static defaultProps=(lo().s[16]++,{onInput:()=>{lo().f[2]++}});constructor(e){lo().f[3]++,lo().s[17]++,super(e),lo().s[18]++,this.state={error:uE(e.value,e.t)}}onInput=(lo().s[19]++,e=>{lo().f[4]++,lo().s[20]++,this.setState({error:uE(e,this.props.t)}),lo().s[21]++,this.props.onInput?(lo().b[5][0]++,lo().s[22]++,this.props.onInput(e)):lo().b[5][1]++});onChange=(lo().s[23]++,e=>{lo().f[5]++,lo().s[24]++,this.setState({error:uE(e,this.props.t)}),lo().s[25]++,this.props.onChange(e)});render(){return lo().f[6]++,lo().s[26]++,Ae.jsxs("div",{children:[Ae.jsx(am,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}const e7=(lo().s[27]++,ls()(Oce));function bi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:15,column:19},end:{line:15,column:39}},1:{start:{line:16,column:4},end:{line:16,column:27}},2:{start:{line:17,column:4},end:{line:17,column:57}},3:{start:{line:17,column:29},end:{line:17,column:57}},4:{start:{line:20,column:4},end:{line:20,column:56}},5:{start:{line:22,column:13},end:{line:38,column:3}},6:{start:{line:23,column:19},end:{line:23,column:39}},7:{start:{line:24,column:4},end:{line:36,column:5}},8:{start:{line:25,column:6},end:{line:25,column:21}},9:{start:{line:26,column:11},end:{line:36,column:5}},10:{start:{line:27,column:6},end:{line:27,column:22}},11:{start:{line:28,column:11},end:{line:36,column:5}},12:{start:{line:29,column:28},end:{line:29,column:38}},13:{start:{line:30,column:27},end:{line:30,column:59}},14:{start:{line:31,column:6},end:{line:31,column:32}},15:{start:{line:32,column:11},end:{line:36,column:5}},16:{start:{line:33,column:6},end:{line:33,column:29}},17:{start:{line:35,column:6},end:{line:35,column:22}},18:{start:{line:37,column:4},end:{line:37,column:57}},19:{start:{line:37,column:29},end:{line:37,column:57}},20:{start:{line:40,column:19},end:{line:40,column:39}},21:{start:{line:41,column:4},end:{line:41,column:31}},22:{start:{line:42,column:4},end:{line:42,column:86}},23:{start:{line:42,column:29},end:{line:42,column:86}},24:{start:{line:45,column:14},end:{line:45,column:26}},25:{start:{line:46,column:22},end:{line:46,column:77}},26:{start:{line:47,column:19},end:{line:116,column:6}},27:{start:{line:48,column:45},end:{line:54,column:7}},28:{start:{line:56,column:6},end:{line:103,column:7}},29:{start:{line:57,column:8},end:{line:64,column:10}},30:{start:{line:65,column:13},end:{line:103,column:7}},31:{start:{line:66,column:8},end:{line:73,column:10}},32:{start:{line:74,column:13},end:{line:103,column:7}},33:{start:{line:75,column:24},end:{line:75,column:99}},34:{start:{line:75,column:78},end:{line:75,column:98}},35:{start:{line:76,column:8},end:{line:84,column:10}},36:{start:{line:85,column:13},end:{line:103,column:7}},37:{start:{line:86,column:8},end:{line:93,column:10}},38:{start:{line:95,column:8},end:{line:102,column:10}},39:{start:{line:104,column:6},end:{line:115,column:8}},40:{start:{line:117,column:4},end:{line:127,column:9}},41:{start:{line:130,column:26},end:{line:130,column:70}},42:{start:{line:134,column:14},end:{line:134,column:26}},43:{start:{line:135,column:4},end:{line:148,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:29},end:{line:18,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:15},end:{line:21,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:22,column:13},end:{line:22,column:14}},loc:{start:{line:22,column:19},end:{line:38,column:3}},line:22},3:{name:"(anonymous_3)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:24},end:{line:43,column:3}},line:39},4:{name:"(anonymous_4)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:11},end:{line:128,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:47,column:35},end:{line:47,column:36}},loc:{start:{line:47,column:45},end:{line:116,column:5}},line:47},6:{name:"(anonymous_6)",decl:{start:{line:75,column:70},end:{line:75,column:71}},loc:{start:{line:75,column:78},end:{line:75,column:98}},line:75},7:{name:"(anonymous_7)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:11},end:{line:149,column:3}},line:133}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:17,column:57}},type:"if",locations:[{start:{line:17,column:4},end:{line:17,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:11},end:{line:20,column:55}},type:"binary-expr",locations:[{start:{line:20,column:11},end:{line:20,column:27}},{start:{line:20,column:31},end:{line:20,column:49}},{start:{line:20,column:53},end:{line:20,column:55}}],line:20},2:{loc:{start:{line:24,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:24},3:{loc:{start:{line:26,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:26,column:11},end:{line:36,column:5}},{start:{line:28,column:11},end:{line:36,column:5}}],line:26},4:{loc:{start:{line:28,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:28,column:11},end:{line:36,column:5}},{start:{line:32,column:11},end:{line:36,column:5}}],line:28},5:{loc:{start:{line:32,column:11},end:{line:36,column:5}},type:"if",locations:[{start:{line:32,column:11},end:{line:36,column:5}},{start:{line:34,column:11},end:{line:36,column:5}}],line:32},6:{loc:{start:{line:37,column:4},end:{line:37,column:57}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},7:{loc:{start:{line:42,column:4},end:{line:42,column:86}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},8:{loc:{start:{line:42,column:49},end:{line:42,column:84}},type:"cond-expr",locations:[{start:{line:42,column:69},end:{line:42,column:75}},{start:{line:42,column:78},end:{line:42,column:84}}],line:42},9:{loc:{start:{line:56,column:6},end:{line:103,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:103,column:7}},{start:{line:65,column:13},end:{line:103,column:7}}],line:56},10:{loc:{start:{line:62,column:26},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:26},end:{line:62,column:50}},{start:{line:62,column:54},end:{line:62,column:70}}],line:62},11:{loc:{start:{line:65,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:65,column:13},end:{line:103,column:7}},{start:{line:74,column:13},end:{line:103,column:7}}],line:65},12:{loc:{start:{line:71,column:26},end:{line:71,column:70}},type:"binary-expr",locations:[{start:{line:71,column:26},end:{line:71,column:50}},{start:{line:71,column:54},end:{line:71,column:70}}],line:71},13:{loc:{start:{line:74,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:74,column:13},end:{line:103,column:7}},{start:{line:85,column:13},end:{line:103,column:7}}],line:74},14:{loc:{start:{line:82,column:26},end:{line:82,column:70}},type:"binary-expr",locations:[{start:{line:82,column:26},end:{line:82,column:50}},{start:{line:82,column:54},end:{line:82,column:70}}],line:82},15:{loc:{start:{line:85,column:13},end:{line:103,column:7}},type:"if",locations:[{start:{line:85,column:13},end:{line:103,column:7}},{start:{line:94,column:13},end:{line:103,column:7}}],line:85},16:{loc:{start:{line:91,column:26},end:{line:91,column:70}},type:"binary-expr",locations:[{start:{line:91,column:26},end:{line:91,column:50}},{start:{line:91,column:54},end:{line:91,column:70}}],line:91},17:{loc:{start:{line:100,column:26},end:{line:100,column:70}},type:"binary-expr",locations:[{start:{line:100,column:26},end:{line:100,column:50}},{start:{line:100,column:54},end:{line:100,column:70}}],line:100}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAwE4B,cA2Cf,YA3Ce;AAxE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AAkBvB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,WAAW,KAAK,MAAM,SAAS,SAAS;AACtC,aAAO,KAAK,SAAS;AAAA,IACvB,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,SAAS;AACpC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"705ac9c8c3dcb0aff320a53fac9b80bc280b1cbf"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return bi=function(){return l},l}bi();class Ice extends ni.Component{changeValue(e,t){bi().f[0]++;const i=(bi().s[0]++,this.values.slice(0));bi().s[1]++,i[e]=t,bi().s[2]++,this.props.onChange?(bi().b[0][0]++,bi().s[3]++,this.props.onChange(i)):bi().b[0][1]++}get values(){return bi().f[1]++,bi().s[4]++,bi().b[1][0]++,this.props.value||(bi().b[1][1]++,this.props.default)||(bi().b[1][2]++,[])}addValue=(bi().s[5]++,()=>{bi().f[2]++;const e=(bi().s[6]++,this.values.slice(0));if(bi().s[7]++,this.props.type==="number")bi().b[2][0]++,bi().s[8]++,e.push(0);else if(bi().b[2][1]++,bi().s[9]++,this.props.type==="url")bi().b[3][0]++,bi().s[10]++,e.push("");else if(bi().b[3][1]++,bi().s[11]++,this.props.type==="enum"){bi().b[4][0]++;const{fieldSpec:t}=(bi().s[12]++,this.props),i=(bi().s[13]++,Object.keys(t.values)[0]);bi().s[14]++,e.push(i)}else bi().b[4][1]++,bi().s[15]++,this.props.type==="color"?(bi().b[5][0]++,bi().s[16]++,e.push("#000000")):(bi().b[5][1]++,bi().s[17]++,e.push(""));bi().s[18]++,this.props.onChange?(bi().b[6][0]++,bi().s[19]++,this.props.onChange(e)):bi().b[6][1]++});deleteValue(e){bi().f[3]++;const t=(bi().s[20]++,this.values.slice(0));bi().s[21]++,t.splice(e,1),bi().s[22]++,this.props.onChange?(bi().b[7][0]++,bi().s[23]++,this.props.onChange(t.length>0?(bi().b[8][0]++,t):(bi().b[8][1]++,void 0))):bi().b[7][1]++}render(){bi().f[4]++;const e=(bi().s[24]++,this.props.t),t=(bi().s[25]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(bi().s[26]++,this.values.map((r,a)=>{bi().f[5]++;const l=(bi().s[27]++,Ae.jsx(Tce,{onClick:this.deleteValue.bind(this,a),...t}));let o;if(bi().s[28]++,this.props.type==="url")bi().b[9][0]++,bi().s[29]++,o=Ae.jsx(e7,{value:r,onChange:this.changeValue.bind(this,a),"aria-label":(bi().b[10][0]++,this.props["aria-label"]||(bi().b[10][1]++,this.props.label))});else if(bi().b[9][1]++,bi().s[30]++,this.props.type==="number")bi().b[11][0]++,bi().s[31]++,o=Ae.jsx(F0,{value:r,onChange:this.changeValue.bind(this,a),"aria-label":(bi().b[12][0]++,this.props["aria-label"]||(bi().b[12][1]++,this.props.label))});else if(bi().b[11][1]++,bi().s[32]++,this.props.type==="enum"){bi().b[13][0]++;const p=(bi().s[33]++,Object.keys(this.props.fieldSpec?.values).map(C=>(bi().f[6]++,bi().s[34]++,[C,R8(C)])));bi().s[35]++,o=Ae.jsx(J8,{options:p,value:r,onChange:this.changeValue.bind(this,a),"aria-label":(bi().b[14][0]++,this.props["aria-label"]||(bi().b[14][1]++,this.props.label))})}else bi().b[13][1]++,bi().s[36]++,this.props.type==="color"?(bi().b[15][0]++,bi().s[37]++,o=Ae.jsx(X8,{value:r,onChange:this.changeValue.bind(this,a),"aria-label":(bi().b[16][0]++,this.props["aria-label"]||(bi().b[16][1]++,this.props.label))})):(bi().b[15][1]++,bi().s[38]++,o=Ae.jsx(am,{value:r,onChange:this.changeValue.bind(this,a),"aria-label":(bi().b[17][0]++,this.props["aria-label"]||(bi().b[17][1]++,this.props.label))}));return bi().s[39]++,Ae.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[Ae.jsx("div",{className:"maputnik-array-block-action",children:l}),Ae.jsx("div",{className:"maputnik-array-block-content",children:o})]},a)}));return bi().s[40]++,Ae.jsxs("div",{className:"maputnik-array",children:[i,Ae.jsx(nl,{className:"maputnik-array-add-value",onClick:this.addValue,children:e("Add value")})]})}}const Dx=(bi().s[41]++,ls()(Ice));class Tce extends ni.Component{render(){bi().f[7]++;const e=(bi().s[42]++,this.props.t);return bi().s[43]++,Ae.jsx(nl,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:Ae.jsx(c8,{label:Ae.jsx(Yv,{})})})}}function Rs(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Rs=function(){return l},l}Rs();class kce extends ni.Component{static defaultProps=(Rs().s[0]++,{fonts:[]});get values(){Rs().f[0]++;const e=(Rs().s[1]++,Rs().b[0][0]++,this.props.value||(Rs().b[0][1]++,this.props.default)||(Rs().b[0][2]++,[]));return Rs().s[2]++,e[e.length-1]!==""?(Rs().b[1][0]++,Rs().s[3]++,e.concat("")):(Rs().b[1][1]++,Rs().s[4]++,e)}changeFont(e,t){Rs().f[1]++;const i=(Rs().s[5]++,this.values.slice(0));Rs().s[6]++,i[e]=t;const r=(Rs().s[7]++,i.filter(a=>(Rs().f[2]++,Rs().s[8]++,a!==void 0)).filter(a=>(Rs().f[3]++,Rs().s[9]++,a!=="")));Rs().s[10]++,this.props.onChange(r)}render(){Rs().f[4]++;const e=(Rs().s[11]++,this.values.map((t,i)=>(Rs().f[5]++,Rs().s[12]++,Ae.jsx("li",{children:Ae.jsx(wb,{"aria-label":(Rs().b[2][0]++,this.props["aria-label"]||(Rs().b[2][1]++,this.props.name)),value:t,options:this.props.fonts?.map(r=>(Rs().f[6]++,Rs().s[13]++,[r,r])),onChange:this.changeFont.bind(this,i)})},i))));return Rs().s[14]++,Ae.jsx("ul",{className:"maputnik-font",children:e})}}function Cr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="a1e962ecc1e2255c0f5dbda1129d42c7f0d3da46",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:146,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:122,column:10}},21:{start:{line:124,column:8},end:{line:132,column:10}},22:{start:{line:134,column:8},end:{line:142,column:10}},23:{start:{line:144,column:8},end:{line:144,column:110}},24:{start:{line:145,column:8},end:{line:145,column:20}},25:{start:{line:149,column:4},end:{line:149,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:147,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:148,column:2},end:{line:148,column:3}},loc:{start:{line:148,column:11},end:{line:150,column:3}},line:148}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:146,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:122,column:10}},{start:{line:123,column:6},end:{line:132,column:10}},{start:{line:133,column:6},end:{line:142,column:10}},{start:{line:143,column:6},end:{line:145,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93},6:{loc:{start:{line:120,column:19},end:{line:120,column:90}},type:"cond-expr",locations:[{start:{line:120,column:53},end:{line:120,column:69}},{start:{line:120,column:72},end:{line:120,column:90}}],line:120},7:{loc:{start:{line:130,column:19},end:{line:130,column:90}},type:"cond-expr",locations:[{start:{line:130,column:53},end:{line:130,column:69}},{start:{line:130,column:72},end:{line:130,column:90}}],line:130},8:{loc:{start:{line:139,column:19},end:{line:139,column:90}},type:"cond-expr",locations:[{start:{line:139,column:53},end:{line:139,column:69}},{start:{line:139,column:72},end:{line:139,column:90}}],line:139}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AA2DQ;AA3DR,OAAO,WAAkC;AAEzC,OAAO,gBAA0C;AACjD,OAAO,iBAA4C;AACnD,OAAO,mBAAgD;AACvD,OAAO,iBAA4C;AACnD,OAAO,gBAA0C;AACjD,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,uBAAwD;AAC/D,OAAO,eAAwC;AAC/C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA4BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACjC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF,KAAK;AAAe,eAClB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAc,eACjB;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,WAAW,KAAK,MAAM;AAAA,YACtB,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA;AAAA,QAChF;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,MAAK;AAAA,YACL,OAAQ,MAAM,QAAQ,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,QAAQ,CAAC,KAAK,MAAM,KAAK;AAAA,YAC9E,QAAQ;AAAA;AAAA,QACV;AAAA,MAEF;AACE,gBAAQ,KAAK,6BAA6B,KAAK,MAAM,SAAS,UAAU,KAAK,MAAM,WAAW,IAAI,EAAE;AACpG,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1e962ecc1e2255c0f5dbda1129d42c7f0d3da46"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Cr=function(){return l},l}Cr();const Dce=(Cr().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);class Mv extends ni.Component{childNodes(){Cr().f[0]++;const e=(Cr().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:this.props.fieldSpec?.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:t=>(Cr().f[1]++,Cr().s[2]++,this.props.onChange(this.props.fieldName,t)),"aria-label":this.props["aria-label"]});switch(Cr().s[3]++,this.props.fieldSpec?.type){case"number":return Cr().b[0][0]++,Cr().s[4]++,Ae.jsx(F0,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":Cr().b[0][1]++;{const t=(Cr().s[5]++,Object.keys((Cr().b[1][0]++,this.props.fieldSpec.values||(Cr().b[1][1]++,[]))).map(i=>(Cr().f[2]++,Cr().s[6]++,[i,R8(i)])));return Cr().s[7]++,Ae.jsx(J8,{...e,options:t})}case"resolvedImage":Cr().b[0][2]++;case"formatted":Cr().b[0][3]++;case"string":if(Cr().b[0][4]++,Cr().s[8]++,Dce.indexOf(this.props.fieldName)>=0){Cr().b[2][0]++;const t=(Cr().s[9]++,Cr().b[3][0]++,this.props.fieldSpec.values||(Cr().b[3][1]++,[]));return Cr().s[10]++,Ae.jsx(wb,{...e,options:t.map(i=>(Cr().f[3]++,Cr().s[11]++,[i,i]))})}else return Cr().b[2][1]++,Cr().s[12]++,Ae.jsx(am,{...e});case"color":return Cr().b[0][5]++,Cr().s[13]++,Ae.jsx(X8,{...e});case"boolean":return Cr().b[0][6]++,Cr().s[14]++,Ae.jsx(ZN,{...e});case"array":return Cr().b[0][7]++,Cr().s[15]++,this.props.fieldName==="text-font"?(Cr().b[4][0]++,Cr().s[16]++,Ae.jsx(kce,{...e,fonts:this.props.fieldSpec.values})):(Cr().b[4][1]++,Cr().s[17]++,this.props.fieldSpec.length?(Cr().b[5][0]++,Cr().s[18]++,Ae.jsx(xB,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(Cr().b[5][1]++,Cr().s[19]++,Ae.jsx(Dx,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));case"numberArray":return Cr().b[0][8]++,Cr().s[20]++,Ae.jsx(Dx,{...e,fieldSpec:this.props.fieldSpec,type:"number",value:Array.isArray(this.props.value)?(Cr().b[6][0]++,this.props.value):(Cr().b[6][1]++,[this.props.value])});case"colorArray":return Cr().b[0][9]++,Cr().s[21]++,Ae.jsx(Dx,{...e,fieldSpec:this.props.fieldSpec,type:"color",value:Array.isArray(this.props.value)?(Cr().b[7][0]++,this.props.value):(Cr().b[7][1]++,[this.props.value])});case"padding":return Cr().b[0][10]++,Cr().s[22]++,Ae.jsx(xB,{...e,type:"number",value:Array.isArray(this.props.value)?(Cr().b[8][0]++,this.props.value):(Cr().b[8][1]++,[this.props.value]),length:4});default:return Cr().b[0][11]++,Cr().s[23]++,console.warn(`No proper field input for ${this.props.fieldName} type: ${this.props.fieldSpec?.type}`),Cr().s[24]++,null}}render(){return Cr().f[4]++,Cr().s[25]++,Ae.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}}function Nc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="21895ee567bb7d4ce23a53c6b107fb6ae51ac232",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:6,column:17},end:{line:26,column:1}},1:{start:{line:7,column:32},end:{line:7,column:53}},2:{start:{line:8,column:18},end:{line:8,column:67}},3:{start:{line:9,column:22},end:{line:11,column:3}},4:{start:{line:10,column:4},end:{line:10,column:20}},5:{start:{line:12,column:2},end:{line:25,column:7}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:28},end:{line:26,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:9,column:22},end:{line:9,column:23}},loc:{start:{line:9,column:31},end:{line:11,column:3}},line:9}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:20,column:8}},type:"binary-expr",locations:[{start:{line:13,column:4},end:{line:13,column:19}},{start:{line:13,column:39},end:{line:20,column:8}}],line:13},1:{loc:{start:{line:21,column:4},end:{line:21,column:118}},type:"binary-expr",locations:[{start:{line:21,column:4},end:{line:21,column:20}},{start:{line:21,column:40},end:{line:21,column:118}}],line:21},2:{loc:{start:{line:24,column:4},end:{line:24,column:198}},type:"binary-expr",locations:[{start:{line:24,column:4},end:{line:24,column:19}},{start:{line:24,column:39},end:{line:24,column:198}}],line:24},3:{loc:{start:{line:24,column:104},end:{line:24,column:125}},type:"cond-expr",locations:[{start:{line:24,column:114},end:{line:24,column:116}},{start:{line:24,column:119},end:{line:24,column:125}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAqBI,SAGM,KAHN;AArBJ,OAAO,WAA0D;AACjE,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAS7B,MAAM,WAAoC,CAAC,UAAU;AACnD,QAAM,CAAC,SAAS,UAAU,IAAI,MAAM,SAAS,KAAK;AAClD,QAAM,UAAU,MAAM,OAAO,iBAAiB,iBAAiB,CAAC;AAEhE,QAAM,cAAc,CAAC,QAAiB;AACpC,eAAW,GAAG;AAAA,EAChB;AAEA,SACE,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,QAAQ,SACzE;AAAA,UAAM,aACL,oBAAC,SAAI,WAAU,8BACb;AAAA,MAAC;AAAA;AAAA,QACC,OAAO,MAAM;AAAA,QACb;AAAA,QACA,WAAW,MAAM;AAAA;AAAA,IACnB,GACF;AAAA,IAED,CAAC,MAAM,aACN,oBAAC,SAAI,WAAU,8BACZ,gBAAM,OACT;AAAA,IAEF,oBAAC,SAAI,WAAU,+BAA+B,gBAAM,QAAO;AAAA,IAC3D,oBAAC,SAAI,WAAU,gCAAgC,gBAAM,UAAS;AAAA,IAC7D,MAAM,aACL,oBAAC,SAAI,WAAU,uBAAsB,OAAO,EAAE,SAAS,UAAU,KAAK,OAAO,GAC3E,8BAAC,OAAI,WAAW,MAAM,WAAW,GACnC;AAAA,KAEJ;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"21895ee567bb7d4ce23a53c6b107fb6ae51ac232"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Nc=function(){return l},l}Nc();Nc().s[0]++;const Cg=n=>{Nc().f[0]++;const[e,t]=(Nc().s[1]++,ni.useState(!1)),i=(Nc().s[2]++,ni.useRef(zv("fieldset_label_")));Nc().s[3]++;const r=a=>{Nc().f[1]++,Nc().s[4]++,t(a)};return Nc().s[5]++,Ae.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":i.current,children:[(Nc().b[0][0]++,n.fieldSpec&&(Nc().b[0][1]++,Ae.jsx("div",{className:"maputnik-input-block-label",children:Ae.jsx(c8,{label:n.label,onToggleDoc:r,fieldSpec:n.fieldSpec})}))),(Nc().b[1][0]++,!n.fieldSpec&&(Nc().b[1][1]++,Ae.jsx("div",{className:"maputnik-input-block-label",children:n.label}))),Ae.jsx("div",{className:"maputnik-input-block-action",children:n.action}),Ae.jsx("div",{className:"maputnik-input-block-content",children:n.children}),(Nc().b[2][0]++,n.fieldSpec&&(Nc().b[2][1]++,Ae.jsx("div",{className:"maputnik-doc-inline",style:{display:e?(Nc().b[3][0]++,""):(Nc().b[3][1]++,"none")},children:Ae.jsx(h8,{fieldSpec:n.fieldSpec})})))]})};function Ta(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",e="d8e70c971ccf4bd59962b2256e6a83edef254599",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx",statementMap:{0:{start:{line:6,column:2},end:{line:34,column:3}},1:{start:{line:8,column:6},end:{line:8,column:19}},2:{start:{line:10,column:6},end:{line:10,column:74}},3:{start:{line:12,column:6},end:{line:12,column:19}},4:{start:{line:14,column:6},end:{line:14,column:22}},5:{start:{line:16,column:6},end:{line:16,column:19}},6:{start:{line:18,column:6},end:{line:18,column:19}},7:{start:{line:20,column:6},end:{line:20,column:19}},8:{start:{line:22,column:6},end:{line:22,column:19}},9:{start:{line:24,column:6},end:{line:24,column:19}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:28,column:6},end:{line:28,column:22}},12:{start:{line:30,column:6},end:{line:30,column:22}},13:{start:{line:32,column:6},end:{line:32,column:58}},14:{start:{line:33,column:6},end:{line:33,column:19}},15:{start:{line:36,column:18},end:{line:39,column:1}},16:{start:{line:37,column:20},end:{line:37,column:55}},17:{start:{line:38,column:2},end:{line:38,column:170}}},fnMap:{0:{name:"getElementFromType",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:39},end:{line:35,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:29},end:{line:39,column:1}},line:36}},branchMap:{0:{loc:{start:{line:6,column:2},end:{line:34,column:3}},type:"switch",locations:[{start:{line:7,column:4},end:{line:8,column:19}},{start:{line:9,column:4},end:{line:10,column:74}},{start:{line:11,column:4},end:{line:12,column:19}},{start:{line:13,column:4},end:{line:14,column:22}},{start:{line:15,column:4},end:{line:16,column:19}},{start:{line:17,column:4},end:{line:18,column:19}},{start:{line:19,column:4},end:{line:20,column:19}},{start:{line:21,column:4},end:{line:22,column:19}},{start:{line:23,column:4},end:{line:24,column:19}},{start:{line:25,column:4},end:{line:26,column:22}},{start:{line:27,column:4},end:{line:28,column:22}},{start:{line:29,column:4},end:{line:30,column:22}},{start:{line:31,column:4},end:{line:33,column:19}}],line:6},1:{loc:{start:{line:10,column:13},end:{line:10,column:73}},type:"cond-expr",locations:[{start:{line:10,column:57},end:{line:10,column:65}},{start:{line:10,column:68},end:{line:10,column:73}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},f:{0:0,1:0},b:{0:[0,0,0,0,0,0,0,0,0,0,0,0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSpec.tsx"],names:[],mappings:"AA6CM;AA7CN,OAAO,WAAW;AAClB,OAAO,eAA4D;AACnE,OAAO,cAAc;AAErB,SAAS,mBAAmB,WAAyF;AACnH,UAAO,UAAU,MAAM;AAAA,IACrB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAQ,OAAO,KAAK,UAAU,MAAO,EAAE,UAAU,IAAI,WAAW;AAAA,IAClE,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,cAAQ,KAAK,uBAAuB,UAAU,IAAI;AAClD,aAAO;AAAA,EACX;AACF;AAMA,MAAM,YAAsC,CAAC,UAAU;AACrD,QAAM,YAAY,mBAAmB,MAAM,SAAU;AAErD,SACE,oBAAC,aAAU,OAAO,MAAM,OAAO,QAAQ,MAAM,QAAQ,WAAW,MAAM,WACpE,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d8e70c971ccf4bd59962b2256e6a83edef254599"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ta=function(){return l},l}Ta();function Rce(n){switch(Ta().f[0]++,Ta().s[0]++,n.type){case"color":return Ta().b[0][0]++,Ta().s[1]++,Us;case"enum":return Ta().b[0][1]++,Ta().s[2]++,Object.keys(n.values).length<=3?(Ta().b[1][0]++,Cg):(Ta().b[1][1]++,Us);case"boolean":return Ta().b[0][2]++,Ta().s[3]++,Us;case"array":return Ta().b[0][3]++,Ta().s[4]++,Cg;case"resolvedImage":return Ta().b[0][4]++,Ta().s[5]++,Us;case"number":return Ta().b[0][5]++,Ta().s[6]++,Us;case"string":return Ta().b[0][6]++,Ta().s[7]++,Us;case"formatted":return Ta().b[0][7]++,Ta().s[8]++,Us;case"padding":return Ta().b[0][8]++,Ta().s[9]++,Us;case"numberArray":return Ta().b[0][9]++,Ta().s[10]++,Cg;case"colorArray":return Ta().b[0][10]++,Ta().s[11]++,Cg;case"variableAnchorOffsetCollection":return Ta().b[0][11]++,Ta().s[12]++,Cg;default:return Ta().b[0][12]++,Ta().s[13]++,console.warn("No such type for: "+n.type),Ta().s[14]++,Us}}Ta().s[15]++;const Pce=n=>{Ta().f[1]++;const e=(Ta().s[16]++,Rce(n.fieldSpec));return Ta().s[17]++,Ae.jsx(e,{label:n.label,action:n.action,fieldSpec:n.fieldSpec,children:Ae.jsx(Mv,{...n})})};function kA(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="8e77c8fbe0fbc5796ba925837fc7526418b4854b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:60,column:5}},2:{start:{line:11,column:52},end:{line:19,column:7}},3:{start:{line:20,column:50},end:{line:28,column:7}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:46,column:11},end:{line:60,column:5}},8:{start:{line:47,column:51},end:{line:56,column:7}},9:{start:{line:57,column:6},end:{line:57,column:76}},10:{start:{line:59,column:6},end:{line:59,column:44}},11:{start:{line:63,column:29},end:{line:63,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:61,column:3}},line:8}},branchMap:{0:{loc:{start:{line:10,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:60,column:5}},{start:{line:46,column:11},end:{line:60,column:5}}],line:10},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30},2:{loc:{start:{line:46,column:11},end:{line:60,column:5}},type:"if",locations:[{start:{line:46,column:11},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:46}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA0BU,cAsBG,YAtBH;AA1BV,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAS,sBAAsB;AAC/B,SAA+B,uBAAuB;AAUtD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,MAAM,GAAG;AAChE,YAAM,wBACJ;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,kBAAe;AAAA;AAAA,MAClB;AAGF,YAAM,sBAAsB;AAAA,QAAC;AAAA;AAAA,UAC3B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI;AACJ,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,WAAW,KAAK,MAAM,UAAU,YAAY,WAAW,SAAS,WAAW,GAAG;AAC5E,YAAM,uBAAuB;AAAA,QAAC;AAAA;AAAA,UAC5B,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,4CAA4C;AAAA,UACrD,eAAY;AAAA,UAEZ,8BAAC,eAAY;AAAA;AAAA,MACf;AACA,aAAO,oBAAC,SAAK,gCAAqB;AAAA,IACpC,OAAO;AACL,aAAO,oBAAC,SAAI;AAAA,IACd;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8e77c8fbe0fbc5796ba925837fc7526418b4854b"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return kA=function(){return l},l}kA();class Kce extends ni.Component{render(){kA().f[0]++;const e=(kA().s[0]++,this.props.t);if(kA().s[1]++,this.props.fieldSpec.expression?.parameters.includes("zoom")){kA().b[0][0]++;const t=(kA().s[2]++,Ae.jsx(nl,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:Ae.jsx(G_,{})})),i=(kA().s[3]++,Ae.jsx(nl,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:Ae.jsx(II,{})}));let r;return kA().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(kA().b[1][0]++,kA().s[5]++,r=Ae.jsx(nl,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:Ae.jsx(W$,{})})):kA().b[1][1]++,kA().s[6]++,Ae.jsxs("div",{children:[t,r,i]})}else if(kA().b[0][1]++,kA().s[7]++,this.props.fieldSpec.expression?.parameters.includes("elevation")){kA().b[2][0]++;const t=(kA().s[8]++,Ae.jsx(nl,{className:"maputnik-make-elevation-function",onClick:this.props.onElevationClick,title:e("Convert property into a elevation function"),"data-wd-key":"make-elevation-function",children:Ae.jsx(II,{})}));return kA().s[9]++,Ae.jsx("div",{children:t})}else return kA().b[2][1]++,kA().s[10]++,Ae.jsx("div",{})}}const Uce=(kA().s[11]++,ls()(Kce));function Fm(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:21,column:5}},3:{start:{line:22,column:18},end:{line:22,column:53}},4:{start:{line:23,column:4},end:{line:32,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:33,column:3}},line:10}},branchMap:{0:{loc:{start:{line:29,column:34},end:{line:29,column:60}},type:"binary-expr",locations:[{start:{line:29,column:34},end:{line:29,column:54}},{start:{line:29,column:58},end:{line:29,column:60}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA6BwB;AA7BxB,OAAO,WAAW;AAElB,OAAO,eAAsC;AAC7C,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAgB/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA,QAC9B,kBAAkB,KAAK,MAAM;AAAA;AAAA,IAC/B;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3e6c7200aa37e60f3f49ecaa91bce3a63befeb7e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Fm=function(){return l},l}Fm();class Lce extends ni.Component{static defaultProps=(Fm().s[0]++,{errors:{}});render(){Fm().f[0]++;const{errors:e,fieldName:t,fieldType:i}=(Fm().s[1]++,this.props),r=(Fm().s[2]++,Ae.jsx(Uce,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick,onElevationClick:this.props.onElevationClick})),a=(Fm().s[3]++,e[i+"."+t]);return Fm().s[4]++,Ae.jsx(Pce,{...this.props,error:a,fieldSpec:this.props.fieldSpec,label:F2((Fm().b[0][0]++,this.props.fieldName||(Fm().b[0][1]++,""))),action:r})}}function jd(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return jd=function(){return l},l}jd();function XN(n,e){jd().f[0]++;const t=(jd().s[0]++,+n),i=(jd().s[1]++,+e);return jd().s[2]++,t<i?(jd().b[0][0]++,jd().s[3]++,-1):(jd().b[0][1]++,jd().s[4]++,t>i?(jd().b[1][0]++,jd().s[5]++,1):(jd().b[1][1]++,jd().s[6]++,0))}function Yp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Yp=function(){return l},l}Yp();function Ap(n){if(Yp().f[0]++,Yp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return Yp().b[0][0]++,Yp().s[1]++,n.default;Yp().b[0][1]++;const e=(Yp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return Yp().s[3]++,Yp().b[1][0]++,e[n.type]||(Yp().b[1][1]++,"")}function wv(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="03de18cded5f486201afd886787bbdda710eafe3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA+B,uBAAuB;AAQtD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"03de18cded5f486201afd886787bbdda710eafe3"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return wv=function(){return l},l}wv();class Fce extends ni.Component{render(){wv().f[0]++;const e=(wv().s[0]++,this.props.t);return wv().s[1]++,Ae.jsx(nl,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:Ae.jsx(Yv,{})})}}const JN=(wv().s[2]++,ls()(Fce));function gn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="92a0f25bb6f30b0d81f12eb12e4e1cc53eee11f9",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:29,column:3}},1:{start:{line:21,column:4},end:{line:28,column:7}},2:{start:{line:22,column:6},end:{line:27,column:7}},3:{start:{line:23,column:8},end:{line:25,column:9}},4:{start:{line:24,column:10},end:{line:24,column:33}},5:{start:{line:26,column:8},end:{line:26,column:39}},6:{start:{line:30,column:2},end:{line:30,column:17}},7:{start:{line:33,column:10},end:{line:35,column:3}},8:{start:{line:37,column:20},end:{line:37,column:55}},9:{start:{line:38,column:4},end:{line:42,column:5}},10:{start:{line:39,column:6},end:{line:41,column:9}},11:{start:{line:45,column:20},end:{line:45,column:45}},12:{start:{line:46,column:4},end:{line:50,column:5}},13:{start:{line:47,column:6},end:{line:49,column:8}},14:{start:{line:51,column:4},end:{line:51,column:16}},15:{start:{line:54,column:4},end:{line:56,column:5}},16:{start:{line:55,column:6},end:{line:55,column:27}},17:{start:{line:57,column:4},end:{line:59,column:5}},18:{start:{line:58,column:6},end:{line:58,column:24}},19:{start:{line:60,column:4},end:{line:60,column:25}},20:{start:{line:63,column:4},end:{line:67,column:5}},21:{start:{line:64,column:6},end:{line:64,column:83}},22:{start:{line:66,column:6},end:{line:66,column:53}},23:{start:{line:71,column:26},end:{line:76,column:70}},24:{start:{line:72,column:6},end:{line:75,column:8}},25:{start:{line:76,column:22},end:{line:76,column:69}},26:{start:{line:77,column:20},end:{line:77,column:22}},27:{start:{line:78,column:4},end:{line:80,column:7}},28:{start:{line:79,column:6},end:{line:79,column:30}},29:{start:{line:81,column:4},end:{line:83,column:7}},30:{start:{line:84,column:4},end:{line:84,column:50}},31:{start:{line:84,column:39},end:{line:84,column:48}},32:{start:{line:86,column:13},end:{line:106,column:3}},33:{start:{line:87,column:4},end:{line:104,column:5}},34:{start:{line:88,column:6},end:{line:91,column:8}},35:{start:{line:93,column:24},end:{line:93,column:61}},36:{start:{line:94,column:6},end:{line:103,column:8}},37:{start:{line:105,column:4},end:{line:105,column:42}},38:{start:{line:108,column:18},end:{line:108,column:56}},39:{start:{line:109,column:4},end:{line:115,column:6}},40:{start:{line:116,column:25},end:{line:116,column:53}},41:{start:{line:117,column:25},end:{line:120,column:5}},42:{start:{line:121,column:4},end:{line:121,column:54}},43:{start:{line:124,column:25},end:{line:127,column:5}},44:{start:{line:128,column:4},end:{line:130,column:5}},45:{start:{line:129,column:6},end:{line:129,column:34}},46:{start:{line:131,column:4},end:{line:131,column:60}},47:{start:{line:134,column:4},end:{line:141,column:5}},48:{start:{line:135,column:6},end:{line:135,column:42}},49:{start:{line:137,column:6},end:{line:140,column:9}},50:{start:{line:144,column:4},end:{line:148,column:5}},51:{start:{line:145,column:6},end:{line:145,column:43}},52:{start:{line:147,column:6},end:{line:147,column:40}},53:{start:{line:149,column:4},end:{line:149,column:58}},54:{start:{line:152,column:14},end:{line:152,column:26}},55:{start:{line:153,column:4},end:{line:155,column:5}},56:{start:{line:154,column:6},end:{line:154,column:78}},57:{start:{line:157,column:4},end:{line:205,column:5}},58:{start:{line:158,column:6},end:{line:204,column:9}},59:{start:{line:159,column:26},end:{line:159,column:77}},60:{start:{line:160,column:20},end:{line:160,column:40}},61:{start:{line:161,column:26},end:{line:161,column:79}},62:{start:{line:162,column:22},end:{line:162,column:29}},63:{start:{line:163,column:46},end:{line:163,column:122}},64:{start:{line:164,column:26},end:{line:169,column:9}},65:{start:{line:168,column:33},end:{line:168,column:97}},66:{start:{line:171,column:8},end:{line:175,column:9}},67:{start:{line:172,column:10},end:{line:172,column:73}},68:{start:{line:174,column:10},end:{line:174,column:73}},69:{start:{line:176,column:24},end:{line:176,column:28}},70:{start:{line:177,column:8},end:{line:188,column:9}},71:{start:{line:178,column:10},end:{line:187,column:15}},72:{start:{line:183,column:37},end:{line:183,column:101}},73:{start:{line:189,column:8},end:{line:203,column:18}},74:{start:{line:199,column:41},end:{line:199,column:110}},75:{start:{line:206,column:4},end:{line:306,column:12}},76:{start:{line:217,column:39},end:{line:217,column:67}},77:{start:{line:235,column:43},end:{line:235,column:68}},78:{start:{line:250,column:39},end:{line:250,column:83}},79:{start:{line:266,column:42},end:{line:266,column:85}},80:{start:{line:309,column:21},end:{line:309,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:18,column:9},end:{line:18,column:20}},loc:{start:{line:18,column:35},end:{line:31,column:1}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:30},end:{line:21,column:31}},loc:{start:{line:21,column:45},end:{line:28,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:22},end:{line:43,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:48},end:{line:52,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:34},end:{line:61,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:34},end:{line:68,column:3}},line:62},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:26},end:{line:85,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:51},end:{line:76,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:76,column:12},end:{line:76,column:13}},loc:{start:{line:76,column:22},end:{line:76,column:69}},line:76},9:{name:"(anonymous_9)",decl:{start:{line:78,column:26},end:{line:78,column:27}},loc:{start:{line:78,column:41},end:{line:80,column:5}},line:78},10:{name:"(anonymous_10)",decl:{start:{line:84,column:29},end:{line:84,column:30}},loc:{start:{line:84,column:39},end:{line:84,column:48}},line:84},11:{name:"(anonymous_11)",decl:{start:{line:86,column:13},end:{line:86,column:14}},loc:{start:{line:86,column:35},end:{line:106,column:3}},line:86},12:{name:"(anonymous_12)",decl:{start:{line:107,column:2},end:{line:107,column:3}},loc:{start:{line:107,column:41},end:{line:122,column:3}},line:107},13:{name:"(anonymous_13)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:23},end:{line:132,column:3}},line:123},14:{name:"(anonymous_14)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:26},end:{line:142,column:3}},line:133},15:{name:"(anonymous_15)",decl:{start:{line:143,column:2},end:{line:143,column:3}},loc:{start:{line:143,column:40},end:{line:150,column:3}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:151,column:2},end:{line:151,column:3}},loc:{start:{line:151,column:11},end:{line:307,column:3}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:158,column:46},end:{line:158,column:47}},loc:{start:{line:158,column:61},end:{line:204,column:7}},line:158},18:{name:"(anonymous_18)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:33},end:{line:168,column:97}},line:168},19:{name:"(anonymous_19)",decl:{start:{line:183,column:24},end:{line:183,column:25}},loc:{start:{line:183,column:37},end:{line:183,column:101}},line:183},20:{name:"(anonymous_20)",decl:{start:{line:199,column:24},end:{line:199,column:25}},loc:{start:{line:199,column:41},end:{line:199,column:110}},line:199},21:{name:"(anonymous_21)",decl:{start:{line:217,column:26},end:{line:217,column:27}},loc:{start:{line:217,column:39},end:{line:217,column:67}},line:217},22:{name:"(anonymous_22)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:43},end:{line:235,column:68}},line:235},23:{name:"(anonymous_23)",decl:{start:{line:250,column:26},end:{line:250,column:27}},loc:{start:{line:250,column:39},end:{line:250,column:83}},line:250},24:{name:"(anonymous_24)",decl:{start:{line:266,column:26},end:{line:266,column:27}},loc:{start:{line:266,column:42},end:{line:266,column:85}},line:266}},branchMap:{0:{loc:{start:{line:20,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},1:{loc:{start:{line:20,column:6},end:{line:20,column:38}},type:"binary-expr",locations:[{start:{line:20,column:6},end:{line:20,column:17}},{start:{line:20,column:21},end:{line:20,column:38}}],line:20},2:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},3:{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:38,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},5:{loc:{start:{line:46,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:54,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:56,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},7:{loc:{start:{line:57,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:57,column:4},end:{line:59,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},8:{loc:{start:{line:63,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:67,column:5}},{start:{line:65,column:11},end:{line:67,column:5}}],line:63},9:{loc:{start:{line:87,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:104,column:5}},{start:{line:92,column:11},end:{line:104,column:5}}],line:87},10:{loc:{start:{line:93,column:24},end:{line:93,column:61}},type:"cond-expr",locations:[{start:{line:93,column:55},end:{line:93,column:57}},{start:{line:93,column:60},end:{line:93,column:61}}],line:93},11:{loc:{start:{line:108,column:18},end:{line:108,column:56}},type:"binary-expr",locations:[{start:{line:108,column:18},end:{line:108,column:50}},{start:{line:108,column:54},end:{line:108,column:56}}],line:108},12:{loc:{start:{line:112,column:14},end:{line:112,column:58}},type:"cond-expr",locations:[{start:{line:112,column:41},end:{line:112,column:42}},{start:{line:112,column:45},end:{line:112,column:58}}],line:112},13:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128},14:{loc:{start:{line:134,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:141,column:5}},{start:{line:136,column:11},end:{line:141,column:5}}],line:134},15:{loc:{start:{line:134,column:8},end:{line:134,column:70}},type:"binary-expr",locations:[{start:{line:134,column:8},end:{line:134,column:33}},{start:{line:134,column:37},end:{line:134,column:70}}],line:134},16:{loc:{start:{line:144,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:144,column:4},end:{line:148,column:5}},{start:{line:146,column:11},end:{line:148,column:5}}],line:144},17:{loc:{start:{line:153,column:4},end:{line:155,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:155,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:153},18:{loc:{start:{line:157,column:4},end:{line:205,column:5}},type:"if",locations:[{start:{line:157,column:4},end:{line:205,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},19:{loc:{start:{line:159,column:26},end:{line:159,column:77}},type:"cond-expr",locations:[{start:{line:159,column:56},end:{line:159,column:68}},{start:{line:159,column:71},end:{line:159,column:77}}],line:159},20:{loc:{start:{line:161,column:26},end:{line:161,column:79}},type:"cond-expr",locations:[{start:{line:161,column:56},end:{line:161,column:69}},{start:{line:161,column:72},end:{line:161,column:79}}],line:161},21:{loc:{start:{line:171,column:8},end:{line:175,column:9}},type:"if",locations:[{start:{line:171,column:8},end:{line:175,column:9}},{start:{line:173,column:15},end:{line:175,column:9}}],line:171},22:{loc:{start:{line:177,column:8},end:{line:188,column:9}},type:"if",locations:[{start:{line:177,column:8},end:{line:188,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:177},23:{loc:{start:{line:225,column:8},end:{line:240,column:9}},type:"binary-expr",locations:[{start:{line:225,column:8},end:{line:225,column:45}},{start:{line:225,column:65},end:{line:240,column:9}}],line:225},24:{loc:{start:{line:256,column:8},end:{line:271,column:9}},type:"binary-expr",locations:[{start:{line:256,column:8},end:{line:256,column:18}},{start:{line:256,column:38},end:{line:271,column:9}}],line:256},25:{loc:{start:{line:272,column:8},end:{line:280,column:15}},type:"binary-expr",locations:[{start:{line:272,column:8},end:{line:272,column:18}},{start:{line:272,column:38},end:{line:280,column:15}}],line:272},26:{loc:{start:{line:282,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:282,column:10},end:{line:282,column:20}},{start:{line:282,column:40},end:{line:292,column:11}}],line:282}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAsO8B,cA8Bf,YA9Be;AAtO9B,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAC7B,SAAQ,sBAAqB;AAC7B,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA+B,uBAAuB;AAEtD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"92a0f25bb6f30b0d81f12eb12e4e1cc53eee11f9"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return gn=function(){return l},l}gn();function hK(n,e){gn().f[0]++;let t;return gn().s[0]++,gn().b[1][0]++,n.value&&(gn().b[1][1]++,n.value.stops)?(gn().b[0][0]++,gn().s[1]++,n.value.stops.forEach((i,r)=>{gn().f[1]++,gn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,r)?gn().b[2][1]++:(gn().b[2][0]++,gn().s[3]++,t?gn().b[3][1]++:(gn().b[3][0]++,gn().s[4]++,t={...e}),gn().s[5]++,t[r]=zv("stop-"))})):gn().b[0][1]++,gn().s[6]++,t}class zce extends ni.Component{state=(gn().s[7]++,{refs:{}});componentDidMount(){gn().f[2]++;const e=(gn().s[8]++,hK(this.props,this.state));gn().s[9]++,e?(gn().b[4][0]++,gn().s[10]++,this.setState({refs:e})):gn().b[4][1]++}static getDerivedStateFromProps(e,t){gn().f[3]++;const i=(gn().s[11]++,hK(e,t));return gn().s[12]++,i?(gn().b[5][0]++,gn().s[13]++,{refs:i}):(gn().b[5][1]++,gn().s[14]++,null)}getFieldFunctionType(e){return gn().f[4]++,gn().s[15]++,e.expression.interpolated?(gn().b[6][0]++,gn().s[16]++,"exponential"):(gn().b[6][1]++,gn().s[17]++,e.type==="number"?(gn().b[7][0]++,gn().s[18]++,"interval"):(gn().b[7][1]++,gn().s[19]++,"categorical"))}getDataFunctionTypes(e){return gn().f[5]++,gn().s[20]++,e.expression.interpolated?(gn().b[8][0]++,gn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(gn().b[8][1]++,gn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(e){gn().f[6]++;const t=(gn().s[23]++,e.map((r,a)=>(gn().f[7]++,gn().s[24]++,{ref:this.state.refs[a],data:r})).sort((r,a)=>(gn().f[8]++,gn().s[25]++,XN(r.data[0].zoom,a.data[0].zoom)))),i=(gn().s[26]++,{});return gn().s[27]++,t.forEach((r,a)=>{gn().f[9]++,gn().s[28]++,i[a]=r.ref}),gn().s[29]++,this.setState({refs:i}),gn().s[30]++,t.map(r=>(gn().f[10]++,gn().s[31]++,r.data))}onChange=(gn().s[32]++,(e,t)=>{if(gn().f[11]++,gn().s[33]++,t.type==="identity")gn().b[9][0]++,gn().s[34]++,t={type:t.type,property:t.property};else{gn().b[9][1]++;const i=(gn().s[35]++,t.type==="categorical"?(gn().b[10][0]++,""):(gn().b[10][1]++,0));gn().s[36]++,t={property:"",type:t.type,stops:[[{zoom:6,value:i},Ap(this.props.fieldSpec)],[{zoom:10,value:i},Ap(this.props.fieldSpec)]],...t}}gn().s[37]++,this.props.onChange(e,t)});changeStop(e,t,i){gn().f[12]++;const r=(gn().s[38]++,gn().b[11][0]++,this.props.value?.stops.slice(0)||(gn().b[11][1]++,[]));gn().s[39]++,r[e]=[{value:t.value,zoom:t.zoom===void 0?(gn().b[12][0]++,0):(gn().b[12][1]++,t.zoom)},i];const a=(gn().s[40]++,this.orderStopsByZoom(r)),l=(gn().s[41]++,{...this.props.value,stops:a});gn().s[42]++,this.onChange(this.props.fieldName,l)}changeBase(e){gn().f[13]++;const t=(gn().s[43]++,{...this.props.value,base:e});gn().s[44]++,t.base===void 0?(gn().b[13][0]++,gn().s[45]++,delete t.base):gn().b[13][1]++,gn().s[46]++,this.props.onChange(this.props.fieldName,t)}changeDataType(e){gn().f[14]++,gn().s[47]++,gn().b[15][0]++,e==="interpolate"&&(gn().b[15][1]++,this.props.onChangeToZoomFunction)?(gn().b[14][0]++,gn().s[48]++,this.props.onChangeToZoomFunction()):(gn().b[14][1]++,gn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:e}))}changeDataProperty(e,t){gn().f[15]++,gn().s[50]++,t?(gn().b[16][0]++,gn().s[51]++,this.props.value[e]=t):(gn().b[16][1]++,gn().s[52]++,delete this.props.value[e]),gn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){gn().f[16]++;const e=(gn().s[54]++,this.props.t);gn().s[55]++,typeof this.props.value?.type>"u"?(gn().b[17][0]++,gn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):gn().b[17][1]++;let t;return gn().s[57]++,this.props.value?.stops?(gn().b[18][0]++,gn().s[58]++,t=this.props.value.stops.map((i,r)=>{gn().f[17]++;const a=(gn().s[59]++,typeof i[0]=="object"?(gn().b[19][0]++,i[0].zoom):(gn().b[19][1]++,void 0)),l=(gn().s[60]++,this.state.refs[r]),o=(gn().s[61]++,typeof i[0]=="object"?(gn().b[20][0]++,i[0].value):(gn().b[20][1]++,i[0])),p=(gn().s[62]++,i[1]),C=(gn().s[63]++,Ae.jsx(JN,{onClick:this.props.onDeleteStop?.bind(this,r)})),w=(gn().s[64]++,{"aria-label":e("Input value"),label:e("Data value"),value:o,onChange:K=>(gn().f[18]++,gn().s[65]++,this.changeStop(r,{zoom:a,value:K},p))});let O;gn().s[66]++,this.props.value?.type==="categorical"?(gn().b[21][0]++,gn().s[67]++,O=Ae.jsx(am,{...w})):(gn().b[21][1]++,gn().s[68]++,O=Ae.jsx(F0,{...w}));let U=(gn().s[69]++,null);return gn().s[70]++,a!==void 0?(gn().b[22][0]++,gn().s[71]++,U=Ae.jsx("div",{children:Ae.jsx(F0,{"aria-label":"Zoom",value:a,onChange:K=>(gn().f[19]++,gn().s[72]++,this.changeStop(r,{zoom:K,value:o},p)),min:0,max:22})})):gn().b[22][1]++,gn().s[73]++,Ae.jsxs("tr",{children:[Ae.jsx("td",{children:U}),Ae.jsx("td",{children:O}),Ae.jsx("td",{children:Ae.jsx(Mv,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:p,onChange:(K,j)=>(gn().f[20]++,gn().s[74]++,this.changeStop(r,{zoom:a,value:o},j))})}),Ae.jsx("td",{children:C})]},l)})):gn().b[18][1]++,gn().s[75]++,Ae.jsx("div",{className:"maputnik-data-spec-block",children:Ae.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[Ae.jsx("legend",{children:F2(this.props.fieldName)}),Ae.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[Ae.jsx(Us,{label:e("Function"),children:Ae.jsx("div",{className:"maputnik-data-spec-property-input",children:Ae.jsx(ty,{value:this.props.value.type,onChange:i=>(gn().f[21]++,gn().s[76]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(gn().b[23][0]++,this.props.value?.type!=="identity"&&(gn().b[23][1]++,Ae.jsx(Us,{label:e("Base"),children:Ae.jsx("div",{className:"maputnik-data-spec-property-input",children:Ae.jsx(Mv,{fieldName:"base",fieldSpec:oa.function.base,value:this.props.value?.base,onChange:(i,r)=>(gn().f[22]++,gn().s[77]++,this.changeBase(r))})})},"base"))),Ae.jsx(Us,{label:"Property",children:Ae.jsx("div",{className:"maputnik-data-spec-property-input",children:Ae.jsx(am,{value:this.props.value?.property,title:e("Input a data property to base styles off of."),onChange:i=>(gn().f[23]++,gn().s[78]++,this.changeDataProperty("property",i))})})},"property"),(gn().b[24][0]++,t&&(gn().b[24][1]++,Ae.jsx(Us,{label:e("Default"),children:Ae.jsx(Mv,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value?.default,onChange:(i,r)=>(gn().f[24]++,gn().s[79]++,this.changeDataProperty("default",r))})},"default"))),(gn().b[25][0]++,t&&(gn().b[25][1]++,Ae.jsx("div",{className:"maputnik-function-stop",children:Ae.jsxs("table",{className:"maputnik-function-stop-table",children:[Ae.jsx("caption",{children:e("Stops")}),Ae.jsx("thead",{children:Ae.jsxs("tr",{children:[Ae.jsx("th",{children:e("Zoom")}),Ae.jsx("th",{children:e("Input value")}),Ae.jsx("th",{rowSpan:2,children:e("Output value")})]})}),Ae.jsx("tbody",{children:t})]})}))),Ae.jsxs("div",{className:"maputnik-toolbox",children:[(gn().b[26][0]++,t&&(gn().b[26][1]++,Ae.jsxs(nl,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[Ae.jsx(k8,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}))),Ae.jsxs(nl,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[Ae.jsx(G_,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}}const jce=(gn().s[80]++,ls()(zce));function vi(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="69307d1c2ebb16a8d89a3ff2534654d41dc25d82",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:17,column:16},end:{line:17,column:18}},1:{start:{line:18,column:2},end:{line:29,column:3}},2:{start:{line:19,column:4},end:{line:28,column:7}},3:{start:{line:20,column:6},end:{line:27,column:7}},4:{start:{line:21,column:8},end:{line:23,column:9}},5:{start:{line:22,column:10},end:{line:22,column:33}},6:{start:{line:24,column:8},end:{line:24,column:39}},7:{start:{line:26,column:8},end:{line:26,column:39}},8:{start:{line:30,column:2},end:{line:30,column:17}},9:{start:{line:33,column:24},end:{line:35,column:3}},10:{start:{line:36,column:10},end:{line:38,column:3}},11:{start:{line:40,column:20},end:{line:40,column:55}},12:{start:{line:41,column:4},end:{line:45,column:5}},13:{start:{line:42,column:6},end:{line:44,column:9}},14:{start:{line:48,column:20},end:{line:48,column:45}},15:{start:{line:49,column:4},end:{line:53,column:5}},16:{start:{line:50,column:6},end:{line:52,column:8}},17:{start:{line:54,column:4},end:{line:54,column:16}},18:{start:{line:58,column:26},end:{line:63,column:60}},19:{start:{line:59,column:6},end:{line:62,column:8}},20:{start:{line:63,column:22},end:{line:63,column:59}},21:{start:{line:64,column:20},end:{line:64,column:22}},22:{start:{line:65,column:4},end:{line:67,column:7}},23:{start:{line:66,column:6},end:{line:66,column:30}},24:{start:{line:68,column:4},end:{line:70,column:7}},25:{start:{line:71,column:4},end:{line:71,column:50}},26:{start:{line:71,column:39},end:{line:71,column:48}},27:{start:{line:74,column:18},end:{line:74,column:49}},28:{start:{line:75,column:4},end:{line:75,column:41}},29:{start:{line:76,column:25},end:{line:76,column:53}},30:{start:{line:77,column:25},end:{line:80,column:5}},31:{start:{line:81,column:4},end:{line:81,column:60}},32:{start:{line:84,column:25},end:{line:87,column:5}},33:{start:{line:88,column:4},end:{line:90,column:5}},34:{start:{line:89,column:6},end:{line:89,column:34}},35:{start:{line:91,column:4},end:{line:91,column:60}},36:{start:{line:93,column:19},end:{line:97,column:3}},37:{start:{line:94,column:4},end:{line:96,column:5}},38:{start:{line:95,column:6},end:{line:95,column:46}},39:{start:{line:99,column:14},end:{line:99,column:26}},40:{start:{line:100,column:23},end:{line:133,column:6}},41:{start:{line:101,column:24},end:{line:101,column:31}},42:{start:{line:102,column:20},end:{line:102,column:27}},43:{start:{line:103,column:44},end:{line:103,column:120}},44:{start:{line:104,column:6},end:{line:132,column:8}},45:{start:{line:113,column:43},end:{line:113,column:87}},46:{start:{line:125,column:43},end:{line:125,column:88}},47:{start:{line:134,column:4},end:{line:200,column:12}},48:{start:{line:145,column:39},end:{line:145,column:67}},49:{start:{line:162,column:43},end:{line:162,column:68}},50:{start:{line:203,column:4},end:{line:207,column:5}},51:{start:{line:204,column:6},end:{line:204,column:83}},52:{start:{line:206,column:6},end:{line:206,column:29}},53:{start:{line:210,column:21},end:{line:210,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:35},end:{line:31,column:1}},line:16},1:{name:"(anonymous_1)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:45},end:{line:28,column:5}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:22},end:{line:46,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:48},end:{line:55,column:3}},line:47},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:26},end:{line:72,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:58,column:36},end:{line:58,column:37}},loc:{start:{line:58,column:51},end:{line:63,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:63,column:12},end:{line:63,column:13}},loc:{start:{line:63,column:22},end:{line:63,column:59}},line:63},7:{name:"(anonymous_7)",decl:{start:{line:65,column:26},end:{line:65,column:27}},loc:{start:{line:65,column:41},end:{line:67,column:5}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:71,column:29},end:{line:71,column:30}},loc:{start:{line:71,column:39},end:{line:71,column:48}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:73,column:2},end:{line:73,column:3}},loc:{start:{line:73,column:45},end:{line:82,column:3}},line:73},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:92,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:93,column:19},end:{line:93,column:20}},loc:{start:{line:93,column:29},end:{line:97,column:3}},line:93},12:{name:"(anonymous_12)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:11},end:{line:201,column:3}},line:98},13:{name:"(anonymous_13)",decl:{start:{line:100,column:51},end:{line:100,column:52}},loc:{start:{line:100,column:66},end:{line:133,column:5}},line:100},14:{name:"(anonymous_14)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:43},end:{line:113,column:87}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:125,column:26},end:{line:125,column:27}},loc:{start:{line:125,column:43},end:{line:125,column:88}},line:125},16:{name:"(anonymous_16)",decl:{start:{line:145,column:26},end:{line:145,column:27}},loc:{start:{line:145,column:39},end:{line:145,column:67}},line:145},17:{name:"(anonymous_17)",decl:{start:{line:162,column:26},end:{line:162,column:27}},loc:{start:{line:162,column:43},end:{line:162,column:68}},line:162},18:{name:"(anonymous_18)",decl:{start:{line:202,column:2},end:{line:202,column:3}},loc:{start:{line:202,column:34},end:{line:208,column:3}},line:202}},branchMap:{0:{loc:{start:{line:18,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:18,column:6},end:{line:18,column:38}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:17}},{start:{line:18,column:21},end:{line:18,column:38}}],line:18},2:{loc:{start:{line:20,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:27,column:7}},{start:{line:25,column:13},end:{line:27,column:7}}],line:20},3:{loc:{start:{line:21,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:21,column:8},end:{line:23,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},4:{loc:{start:{line:41,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},5:{loc:{start:{line:49,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:53,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},6:{loc:{start:{line:88,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:88,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:88},7:{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:67}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:30}},{start:{line:94,column:34},end:{line:94,column:67}}],line:94},9:{loc:{start:{line:203,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:203,column:4},end:{line:207,column:5}},{start:{line:205,column:11},end:{line:207,column:5}}],line:203}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AAgK4B,cACf,YADe;AAhK5B,OAAO,WAAW;AAClB,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,OAAO,YAAY;AACnB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,UAAU;AAAA;AAAA;AAAA,UACf;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,kBAAe,OAAO,EAAE,eAAe,cAAc,GAAG;AAAA,gBACxD,EAAE,uBAAuB;AAAA;AAAA;AAAA,UAC5B;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"69307d1c2ebb16a8d89a3ff2534654d41dc25d82"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return vi=function(){return l},l}vi();function dK(n,e){vi().f[0]++;let t=(vi().s[0]++,{});return vi().s[1]++,vi().b[1][0]++,n.value&&(vi().b[1][1]++,n.value.stops)?(vi().b[0][0]++,vi().s[2]++,n.value.stops.forEach((i,r)=>{vi().f[1]++,vi().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,r)?(vi().b[2][0]++,vi().s[4]++,t?vi().b[3][1]++:(vi().b[3][0]++,vi().s[5]++,t={...e}),vi().s[6]++,t[r]=zv("stop-")):(vi().b[2][1]++,vi().s[7]++,t[r]=e.refs[r])})):vi().b[0][1]++,vi().s[8]++,t}class Nce extends ni.Component{static defaultProps=(vi().s[9]++,{errors:{}});state=(vi().s[10]++,{refs:{}});componentDidMount(){vi().f[2]++;const e=(vi().s[11]++,dK(this.props,this.state));vi().s[12]++,e?(vi().b[4][0]++,vi().s[13]++,this.setState({refs:e})):vi().b[4][1]++}static getDerivedStateFromProps(e,t){vi().f[3]++;const i=(vi().s[14]++,dK(e,t));return vi().s[15]++,i?(vi().b[5][0]++,vi().s[16]++,{refs:i}):(vi().b[5][1]++,vi().s[17]++,null)}orderStopsByZoom(e){vi().f[4]++;const t=(vi().s[18]++,e.map((r,a)=>(vi().f[5]++,vi().s[19]++,{ref:this.state.refs[a],data:r})).sort((r,a)=>(vi().f[6]++,vi().s[20]++,XN(r.data[0],a.data[0])))),i=(vi().s[21]++,{});return vi().s[22]++,t.forEach((r,a)=>{vi().f[7]++,vi().s[23]++,i[a]=r.ref}),vi().s[24]++,this.setState({refs:i}),vi().s[25]++,t.map(r=>(vi().f[8]++,vi().s[26]++,r.data))}changeZoomStop(e,t,i){vi().f[9]++;const r=(vi().s[27]++,this.props.value.stops.slice(0));vi().s[28]++,r[e]=[t,i];const a=(vi().s[29]++,this.orderStopsByZoom(r)),l=(vi().s[30]++,{...this.props.value,stops:a});vi().s[31]++,this.props.onChange(this.props.fieldName,l)}changeBase(e){vi().f[10]++;const t=(vi().s[32]++,{...this.props.value,base:e});vi().s[33]++,t.base===void 0?(vi().b[6][0]++,vi().s[34]++,delete t.base):vi().b[6][1]++,vi().s[35]++,this.props.onChange(this.props.fieldName,t)}changeDataType=(vi().s[36]++,e=>{vi().f[11]++,vi().s[37]++,vi().b[8][0]++,e!=="interpolate"&&(vi().b[8][1]++,this.props.onChangeToDataFunction)?(vi().b[7][0]++,vi().s[38]++,this.props.onChangeToDataFunction(e)):vi().b[7][1]++});render(){vi().f[12]++;const e=(vi().s[39]++,this.props.t),t=(vi().s[40]++,this.props.value?.stops.map((i,r)=>{vi().f[13]++;const a=(vi().s[41]++,i[0]),l=(vi().s[42]++,i[1]),o=(vi().s[43]++,Ae.jsx(JN,{onClick:this.props.onDeleteStop?.bind(this,r)}));return vi().s[44]++,Ae.jsxs("tr",{children:[Ae.jsx("td",{children:Ae.jsx(F0,{"aria-label":e("Zoom"),value:a,onChange:p=>(vi().f[14]++,vi().s[45]++,this.changeZoomStop(r,p,l)),min:0,max:22})}),Ae.jsx("td",{children:Ae.jsx(Mv,{"aria-label":e("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:l,onChange:(p,C)=>(vi().f[15]++,vi().s[46]++,this.changeZoomStop(r,a,C))})}),Ae.jsx("td",{children:o})]},`${i[0]}-${i[1]}`)}));return vi().s[47]++,Ae.jsx("div",{className:"maputnik-data-spec-block",children:Ae.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[Ae.jsx("legend",{children:F2(this.props.fieldName)}),Ae.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[Ae.jsx(Us,{label:e("Function"),children:Ae.jsx("div",{className:"maputnik-data-spec-property-input",children:Ae.jsx(ty,{value:"interpolate",onChange:i=>(vi().f[16]++,vi().s[48]++,this.changeDataType(i)),title:e("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),Ae.jsx(Us,{label:e("Base"),children:Ae.jsx("div",{className:"maputnik-data-spec-property-input",children:Ae.jsx(Mv,{fieldName:"base",fieldSpec:oa.function.base,value:this.props.value?.base,onChange:(i,r)=>(vi().f[17]++,vi().s[49]++,this.changeBase(r))})})}),Ae.jsx("div",{className:"maputnik-function-stop",children:Ae.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[Ae.jsx("caption",{children:e("Stops")}),Ae.jsx("thead",{children:Ae.jsxs("tr",{children:[Ae.jsx("th",{children:e("Zoom")}),Ae.jsx("th",{rowSpan:2,children:e("Output value")})]})}),Ae.jsx("tbody",{children:t})]})}),Ae.jsxs("div",{className:"maputnik-toolbox",children:[Ae.jsxs(nl,{className:"maputnik-add-stop",onClick:this.props.onAddStop?.bind(this),children:[Ae.jsx(k8,{style:{verticalAlign:"text-bottom"}}),e("Add stop")]}),Ae.jsxs(nl,{className:"maputnik-add-stop",onClick:this.props.onExpressionClick?.bind(this),children:[Ae.jsx(G_,{style:{verticalAlign:"text-bottom"}}),e("Convert to expression")]})]})]})]})})}getDataFunctionTypes(e){return vi().f[18]++,vi().s[50]++,e["property-type"]==="data-driven"?(vi().b[9][0]++,vi().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(vi().b[9][1]++,vi().s[52]++,["interpolate"])}}const Gce=(vi().s[53]++,ls()(Nce));function Rt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="8af312f4150f971fc405b0f70117d18d2c2d94dd",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:62,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:62,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:62,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:62,column:3}},20:{start:{line:49,column:4},end:{line:49,column:19}},21:{start:{line:50,column:9},end:{line:62,column:3}},22:{start:{line:51,column:4},end:{line:51,column:19}},23:{start:{line:52,column:9},end:{line:62,column:3}},24:{start:{line:53,column:4},end:{line:53,column:19}},25:{start:{line:54,column:9},end:{line:62,column:3}},26:{start:{line:55,column:4},end:{line:55,column:19}},27:{start:{line:56,column:9},end:{line:62,column:3}},28:{start:{line:57,column:4},end:{line:57,column:27}},29:{start:{line:58,column:9},end:{line:62,column:3}},30:{start:{line:59,column:4},end:{line:59,column:27}},31:{start:{line:61,column:4},end:{line:61,column:24}},32:{start:{line:64,column:22},end:{line:302,column:1}},33:{start:{line:65,column:34},end:{line:67,column:3}},34:{start:{line:68,column:36},end:{line:68,column:57}},35:{start:{line:69,column:2},end:{line:73,column:48}},36:{start:{line:70,column:4},end:{line:72,column:5}},37:{start:{line:71,column:6},end:{line:71,column:61}},38:{start:{line:74,column:31},end:{line:82,column:3}},39:{start:{line:75,column:4},end:{line:77,column:5}},40:{start:{line:76,column:6},end:{line:76,column:27}},41:{start:{line:78,column:4},end:{line:80,column:5}},42:{start:{line:79,column:6},end:{line:79,column:24}},43:{start:{line:81,column:4},end:{line:81,column:25}},44:{start:{line:83,column:18},end:{line:99,column:3}},45:{start:{line:84,column:18},end:{line:84,column:44}},46:{start:{line:85,column:21},end:{line:85,column:44}},47:{start:{line:86,column:4},end:{line:93,column:5}},48:{start:{line:87,column:6},end:{line:90,column:9}},49:{start:{line:92,column:6},end:{line:92,column:49}},50:{start:{line:94,column:25},end:{line:97,column:5}},51:{start:{line:98,column:4},end:{line:98,column:50}},52:{start:{line:100,column:27},end:{line:104,column:3}},53:{start:{line:101,column:37},end:{line:101,column:42}},54:{start:{line:102,column:4},end:{line:102,column:49}},55:{start:{line:103,column:4},end:{line:103,column:25}},56:{start:{line:105,column:21},end:{line:116,column:3}},57:{start:{line:106,column:18},end:{line:106,column:44}},58:{start:{line:107,column:4},end:{line:107,column:29}},59:{start:{line:108,column:23},end:{line:111,column:5}},60:{start:{line:112,column:4},end:{line:114,column:5}},61:{start:{line:113,column:6},end:{line:113,column:33}},62:{start:{line:115,column:4},end:{line:115,column:50}},63:{start:{line:117,column:27},end:{line:146,column:3}},64:{start:{line:118,column:22},end:{line:118,column:27}},65:{start:{line:120,column:4},end:{line:144,column:5}},66:{start:{line:121,column:6},end:{line:136,column:7}},67:{start:{line:122,column:8},end:{line:127,column:10}},68:{start:{line:125,column:12},end:{line:125,column:83}},69:{start:{line:129,column:8},end:{line:135,column:10}},70:{start:{line:138,column:6},end:{line:143,column:8}},71:{start:{line:145,column:4},end:{line:145,column:46}},72:{start:{line:147,column:25},end:{line:159,column:3}},73:{start:{line:148,column:33},end:{line:148,column:38}},74:{start:{line:149,column:4},end:{line:158,column:5}},75:{start:{line:150,column:6},end:{line:153,column:9}},76:{start:{line:154,column:6},end:{line:154,column:27}},77:{start:{line:155,column:11},end:{line:158,column:5}},78:{start:{line:156,column:6},end:{line:156,column:42}},79:{start:{line:157,column:6},end:{line:157,column:27}},80:{start:{line:160,column:18},end:{line:163,column:3}},81:{start:{line:161,column:33},end:{line:161,column:38}},82:{start:{line:162,column:4},end:{line:162,column:140}},83:{start:{line:164,column:25},end:{line:175,column:3}},84:{start:{line:165,column:33},end:{line:165,column:38}},85:{start:{line:167,column:4},end:{line:173,column:5}},86:{start:{line:168,column:6},end:{line:168,column:67}},87:{start:{line:169,column:11},end:{line:173,column:5}},88:{start:{line:170,column:6},end:{line:170,column:43}},89:{start:{line:172,column:6},end:{line:172,column:65}},90:{start:{line:174,column:4},end:{line:174,column:48}},91:{start:{line:176,column:27},end:{line:214,column:3}},92:{start:{line:177,column:25},end:{line:177,column:62}},93:{start:{line:178,column:22},end:{line:178,column:61}},94:{start:{line:179,column:22},end:{line:179,column:27}},95:{start:{line:181,column:4},end:{line:212,column:5}},96:{start:{line:182,column:6},end:{line:201,column:7}},97:{start:{line:183,column:8},end:{line:190,column:10}},98:{start:{line:188,column:12},end:{line:188,column:106}},99:{start:{line:192,column:8},end:{line:200,column:10}},100:{start:{line:203,column:6},end:{line:211,column:8}},101:{start:{line:213,column:4},end:{line:213,column:46}},102:{start:{line:215,column:32},end:{line:226,column:3}},103:{start:{line:216,column:23},end:{line:224,column:5}},104:{start:{line:225,column:4},end:{line:225,column:48}},105:{start:{line:227,column:24},end:{line:229,column:3}},106:{start:{line:228,column:4},end:{line:228,column:23}},107:{start:{line:230,column:26},end:{line:232,column:3}},108:{start:{line:231,column:4},end:{line:231,column:24}},109:{start:{line:233,column:20},end:{line:233,column:120}},110:{start:{line:235,column:2},end:{line:300,column:3}},111:{start:{line:236,column:4},end:{line:251,column:6}},112:{start:{line:252,column:9},end:{line:300,column:3}},113:{start:{line:253,column:4},end:{line:267,column:6}},114:{start:{line:268,column:9},end:{line:300,column:3}},115:{start:{line:269,column:4},end:{line:283,column:6}},116:{start:{line:285,column:4},end:{line:299,column:6}},117:{start:{line:301,column:2},end:{line:301,column:141}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:63,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:33},end:{line:302,column:1}},line:64},12:{name:"(anonymous_12)",decl:{start:{line:69,column:18},end:{line:69,column:19}},loc:{start:{line:69,column:24},end:{line:73,column:3}},line:69},13:{name:"(anonymous_13)",decl:{start:{line:74,column:31},end:{line:74,column:32}},loc:{start:{line:74,column:46},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:18},end:{line:83,column:19}},loc:{start:{line:83,column:24},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:27},end:{line:100,column:28}},loc:{start:{line:100,column:33},end:{line:104,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:34},end:{line:116,column:3}},line:105},17:{name:"(anonymous_17)",decl:{start:{line:117,column:27},end:{line:117,column:28}},loc:{start:{line:117,column:33},end:{line:146,column:3}},line:117},18:{name:"(anonymous_18)",decl:{start:{line:124,column:33},end:{line:124,column:34}},loc:{start:{line:124,column:43},end:{line:126,column:11}},line:124},19:{name:"(anonymous_19)",decl:{start:{line:147,column:25},end:{line:147,column:26}},loc:{start:{line:147,column:31},end:{line:159,column:3}},line:147},20:{name:"(anonymous_20)",decl:{start:{line:160,column:18},end:{line:160,column:19}},loc:{start:{line:160,column:24},end:{line:163,column:3}},line:160},21:{name:"(anonymous_21)",decl:{start:{line:164,column:25},end:{line:164,column:26}},loc:{start:{line:164,column:31},end:{line:175,column:3}},line:164},22:{name:"(anonymous_22)",decl:{start:{line:176,column:27},end:{line:176,column:28}},loc:{start:{line:176,column:33},end:{line:214,column:3}},line:176},23:{name:"(anonymous_23)",decl:{start:{line:187,column:33},end:{line:187,column:34}},loc:{start:{line:187,column:43},end:{line:189,column:11}},line:187},24:{name:"(anonymous_24)",decl:{start:{line:215,column:32},end:{line:215,column:33}},loc:{start:{line:215,column:38},end:{line:226,column:3}},line:215},25:{name:"(anonymous_25)",decl:{start:{line:227,column:24},end:{line:227,column:25}},loc:{start:{line:227,column:30},end:{line:229,column:3}},line:227},26:{name:"(anonymous_26)",decl:{start:{line:230,column:26},end:{line:230,column:27}},loc:{start:{line:230,column:32},end:{line:232,column:3}},line:230}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:62,column:3}},{start:{line:44,column:9},end:{line:62,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:62,column:3}},{start:{line:46,column:9},end:{line:62,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:62,column:3}},{start:{line:48,column:9},end:{line:62,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:62,column:3}},{start:{line:50,column:9},end:{line:62,column:3}}],line:48},15:{loc:{start:{line:48,column:13},end:{line:48,column:75}},type:"binary-expr",locations:[{start:{line:48,column:13},end:{line:48,column:45}},{start:{line:48,column:49},end:{line:48,column:75}}],line:48},16:{loc:{start:{line:50,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:62,column:3}},{start:{line:52,column:9},end:{line:62,column:3}}],line:50},17:{loc:{start:{line:52,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:52,column:9},end:{line:62,column:3}},{start:{line:54,column:9},end:{line:62,column:3}}],line:52},18:{loc:{start:{line:54,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:54,column:9},end:{line:62,column:3}},{start:{line:56,column:9},end:{line:62,column:3}}],line:54},19:{loc:{start:{line:56,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:56,column:9},end:{line:62,column:3}},{start:{line:58,column:9},end:{line:62,column:3}}],line:56},20:{loc:{start:{line:58,column:9},end:{line:62,column:3}},type:"if",locations:[{start:{line:58,column:9},end:{line:62,column:3}},{start:{line:60,column:9},end:{line:62,column:3}}],line:58},21:{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:70},22:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},23:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},24:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},25:{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},26:{loc:{start:{line:120,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:120,column:4},end:{line:144,column:5}},{start:{line:137,column:11},end:{line:144,column:5}}],line:120},27:{loc:{start:{line:121,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:136,column:7}},{start:{line:128,column:13},end:{line:136,column:7}}],line:121},28:{loc:{start:{line:125,column:34},end:{line:125,column:81}},type:"binary-expr",locations:[{start:{line:125,column:34},end:{line:125,column:41}},{start:{line:125,column:45},end:{line:125,column:81}}],line:125},29:{loc:{start:{line:140,column:14},end:{line:140,column:59}},type:"binary-expr",locations:[{start:{line:140,column:14},end:{line:140,column:19}},{start:{line:140,column:23},end:{line:140,column:59}}],line:140},30:{loc:{start:{line:141,column:15},end:{line:141,column:60}},type:"binary-expr",locations:[{start:{line:141,column:15},end:{line:141,column:20}},{start:{line:141,column:24},end:{line:141,column:60}}],line:141},31:{loc:{start:{line:149,column:4},end:{line:158,column:5}},type:"if",locations:[{start:{line:149,column:4},end:{line:158,column:5}},{start:{line:155,column:11},end:{line:158,column:5}}],line:149},32:{loc:{start:{line:155,column:11},end:{line:158,column:5}},type:"if",locations:[{start:{line:155,column:11},end:{line:158,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:155},33:{loc:{start:{line:162,column:11},end:{line:162,column:139}},type:"binary-expr",locations:[{start:{line:162,column:11},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:63}},{start:{line:162,column:67},end:{line:162,column:85}},{start:{line:162,column:89},end:{line:162,column:109}},{start:{line:162,column:113},end:{line:162,column:139}}],line:162},34:{loc:{start:{line:167,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:167,column:4},end:{line:173,column:5}},{start:{line:169,column:11},end:{line:173,column:5}}],line:167},35:{loc:{start:{line:167,column:8},end:{line:167,column:53}},type:"binary-expr",locations:[{start:{line:167,column:8},end:{line:167,column:33}},{start:{line:167,column:37},end:{line:167,column:53}}],line:167},36:{loc:{start:{line:169,column:11},end:{line:173,column:5}},type:"if",locations:[{start:{line:169,column:11},end:{line:173,column:5}},{start:{line:171,column:11},end:{line:173,column:5}}],line:169},37:{loc:{start:{line:172,column:31},end:{line:172,column:63}},type:"binary-expr",locations:[{start:{line:172,column:31},end:{line:172,column:36}},{start:{line:172,column:40},end:{line:172,column:63}}],line:172},38:{loc:{start:{line:178,column:22},end:{line:178,column:61}},type:"cond-expr",locations:[{start:{line:178,column:55},end:{line:178,column:57}},{start:{line:178,column:60},end:{line:178,column:61}}],line:178},39:{loc:{start:{line:181,column:4},end:{line:212,column:5}},type:"if",locations:[{start:{line:181,column:4},end:{line:212,column:5}},{start:{line:202,column:11},end:{line:212,column:5}}],line:181},40:{loc:{start:{line:182,column:6},end:{line:201,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:201,column:7}},{start:{line:191,column:13},end:{line:201,column:7}}],line:182},41:{loc:{start:{line:188,column:57},end:{line:188,column:104}},type:"binary-expr",locations:[{start:{line:188,column:57},end:{line:188,column:64}},{start:{line:188,column:68},end:{line:188,column:104}}],line:188},42:{loc:{start:{line:208,column:42},end:{line:208,column:93}},type:"binary-expr",locations:[{start:{line:208,column:42},end:{line:208,column:53}},{start:{line:208,column:57},end:{line:208,column:93}}],line:208},43:{loc:{start:{line:209,column:43},end:{line:209,column:94}},type:"binary-expr",locations:[{start:{line:209,column:43},end:{line:209,column:54}},{start:{line:209,column:58},end:{line:209,column:94}}],line:209},44:{loc:{start:{line:233,column:20},end:{line:233,column:120}},type:"cond-expr",locations:[{start:{line:233,column:62},end:{line:233,column:89}},{start:{line:233,column:92},end:{line:233,column:120}}],line:233},45:{loc:{start:{line:235,column:2},end:{line:300,column:3}},type:"if",locations:[{start:{line:235,column:2},end:{line:300,column:3}},{start:{line:252,column:9},end:{line:300,column:3}}],line:235},46:{loc:{start:{line:252,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:252,column:9},end:{line:300,column:3}},{start:{line:268,column:9},end:{line:300,column:3}}],line:252},47:{loc:{start:{line:268,column:9},end:{line:300,column:3}},type:"if",locations:[{start:{line:268,column:9},end:{line:300,column:3}},{start:{line:284,column:9},end:{line:300,column:3}}],line:268}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0,0,0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAgVM;AAhVN,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAAiC;AACxC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,iBAAiB,oBAAoB,KAAK,GAAG;AACvE,WAAO;AAAA,EACT,WACS,UAAU,SAAS,cAAc;AACxC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW;AACrC,WAAO;AAAA,EACT,WACS,UAAU,SAAS,kCAAkC;AAC5D,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAgBA,MAAM,gBAA8C,CAAC,UAAU;AAC7D,QAAM,CAAC,UAAU,WAAW,IAAI,MAAM;AAAA,IACpC,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,EAC1C;AACA,QAAM,CAAC,WAAW,YAAY,IAAI,MAAM,SAAS,KAAK;AAEtD,QAAM,UAAU,MAAM;AACpB,QAAI,CAAC,WAAW;AACd,kBAAY,YAAY,MAAM,OAAO,MAAM,SAAS,CAAC;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,MAAM,OAAO,MAAM,WAAW,SAAS,CAAC;AAE5C,QAAM,uBAAuB,CAAC,cAAmB;AAC/C,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAE,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAM;AAAA,QACvD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OAAO;AACL,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,WAAW,UAAU,IAAI;AACjC,UAAM,SAAS,WAAW,UAAU,OAAO;AAC3C,gBAAY,OAAO;AAAA,EACrB;AAEA,QAAM,aAAa,CAAC,YAAoB;AACtC,UAAM,QAAQ,MAAM,MAAM,MAAM,MAAM,CAAC;AACvC,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAoB;AAAA,MACtB,GAAG,MAAM;AAAA,MACT;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,UAAM,SAAS,MAAM,WAAW,YAAY;AAAA,EAC9C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,EAAE,MAAM,IAAI;AAElB,QAAI;AACJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACxC,CAAC,IAAI,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACjD,CAAC,IAAI,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACpD;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAE7B,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,SAAS,WAAW;AAAA,QACxB,MAAM;AAAA,QACN,UAAU,MAAM,CAAC;AAAA,MACnB,CAAC;AACD,kBAAY,OAAO;AAAA,IACrB,WAAW,oBAAoB,KAAK,GAAG;AACrC,YAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AAClC,kBAAY,OAAO;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAEA,QAAM,iBAAiB,MAAM;AAC3B,UAAM,EAAE,OAAO,UAAU,IAAI;AAC7B,QAAI;AAEJ,QAAI,OAAO,UAAU,YAAY,WAAW,OAAO;AACjD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WAAW,mBAAmB,KAAK,GAAG;AACpC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OAAO;AACL,mBAAa,CAAC,WAAW,SAAS,MAAM,UAAU,OAAO;AAAA,IAC3D;AACA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,mBAAmB,MAAM;AAC7B,UAAM,eAAe,qBAAqB,MAAM,SAAS;AACzD,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAE,MAAM,IAAI;AAClB,QAAI;AAEJ,QAAI,OAAO,UAAU,UAAU;AAC7B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAE,MAAM,KAAK,CAAC,GAAG,OAAO,UAAU,GAAG,KAAK,CAAC,KAAK,oBAAoB,MAAM,SAAS,CAAC;AAAA,UAC9F,CAAC;AAAA,QACH;AAAA,MACF,OAAO;AACL,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,YACpE,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACvE;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAE,MAAM,GAAG,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,UACnF,CAAC,EAAE,MAAM,IAAI,OAAO,UAAU,GAAG,MAAM,SAAS,oBAAoB,MAAM,SAAS,CAAC;AAAA,QACtF;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,QAAQ;AAAA,EAC1C;AAEA,QAAM,wBAAwB,MAAM;AAClC,UAAM,aAAa;AAAA,MACjB;AAAA,MACA,CAAC,QAAQ;AAAA,MACT,CAAC,WAAW;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,UAAM,SAAS,MAAM,WAAW,UAAU;AAAA,EAC5C;AAEA,QAAM,gBAAgB,MAAM;AAC1B,iBAAa,IAAI;AAAA,EACnB;AAEA,QAAM,kBAAkB,MAAM;AAC5B,iBAAa,KAAK;AAAA,EACpB;AAEA,QAAM,YACJ,MAAM,UAAU,YAAY,MAAM,QAAQ,8BAA8B;AAE1E,MAAI;AAEJ,MAAI,aAAa,cAAc;AAC7B,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,MAAM,MAAM,SAAS;AAAA,QACnD;AAAA,QACA,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,SAAS;AAAA,QACT,QAAQ;AAAA;AAAA,IACV;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,WAAW,aAAa,iBAAiB;AACvC,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,cAAc;AAAA,QACd,WAAW;AAAA,QACX,wBAAwB;AAAA,QACxB,mBAAmB;AAAA;AAAA,IACrB;AAAA,EAEJ,OAAO;AACL,gBACE;AAAA,MAAC;AAAA;AAAA,QACC,QAAQ,MAAM;AAAA,QACd,UAAU,MAAM,SAAS,KAAK,IAAI;AAAA,QAClC,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,WAAW,MAAM;AAAA,QACjB,OAAO,MAAM;AAAA,QACb,aAAa;AAAA,QACb,aAAa;AAAA,QACb,mBAAmB;AAAA,QACnB,kBAAkB;AAAA;AAAA,IACpB;AAAA,EAEJ;AAEA,SACE,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAA0B,MAAM,WACrE,qBACH;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8af312f4150f971fc405b0f70117d18d2c2d94dd"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Rt=function(){return l},l}Rt();function fK(n){return Rt().f[0]++,Rt().s[0]++,Rt().b[0][0]++,Array.isArray(n)&&(Rt().b[0][1]++,n.length===2)&&(Rt().b[0][2]++,n[0]==="literal")}function pK(n){return Rt().f[1]++,Rt().s[1]++,Rt().b[1][0]++,Array.isArray(n)&&(Rt().b[1][1]++,n.length===2)&&(Rt().b[1][2]++,n[0]==="get")}function Wce(n){return Rt().f[2]++,Rt().s[2]++,Rt().b[2][0]++,typeof n=="object"&&(Rt().b[2][1]++,n.stops)&&(Rt().b[2][2]++,typeof n.property>"u")&&(Rt().b[2][3]++,Array.isArray(n.stops))&&(Rt().b[2][4]++,n.stops.length>1)&&(Rt().b[2][5]++,n.stops.every(e=>(Rt().f[3]++,Rt().s[3]++,Rt().b[3][0]++,Array.isArray(e)&&(Rt().b[3][1]++,e.length===2))))}function eG(n){return Rt().f[4]++,Rt().s[4]++,Rt().b[4][0]++,typeof n=="object"&&(Rt().b[4][1]++,n.type==="identity")&&(Rt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function Qce(n){return Rt().f[5]++,Rt().s[5]++,Rt().b[5][0]++,typeof n=="object"&&(Rt().b[5][1]++,n.stops)&&(Rt().b[5][2]++,typeof n.property<"u")&&(Rt().b[5][3]++,n.stops.length>1)&&(Rt().b[5][4]++,Array.isArray(n.stops))&&(Rt().b[5][5]++,n.stops.every(e=>(Rt().f[6]++,Rt().s[6]++,Rt().b[6][0]++,Array.isArray(e)&&(Rt().b[6][1]++,e.length===2)&&(Rt().b[6][2]++,typeof e[0]=="object"))))}function Yce(n){return Rt().f[7]++,Rt().s[7]++,Rt().b[7][0]++,eG(n)||(Rt().b[7][1]++,Qce(n))}function t7(n){Rt().f[8]++;const e=(Rt().s[8]++,["string","boolean","number"]);return Rt().s[9]++,e.includes(typeof n)}function mK(n){return Rt().f[9]++,Rt().s[10]++,Array.isArray(n)?(Rt().b[8][0]++,Rt().s[11]++,n.every(t7)):(Rt().b[8][1]++,Rt().s[12]++,!1)}function gK(n,e=(Rt().b[9][0]++,{})){return Rt().f[10]++,Rt().s[13]++,n===void 0?(Rt().b[10][0]++,Rt().s[14]++,"value"):(Rt().b[10][1]++,Rt().s[15]++,t7(n)?(Rt().b[11][0]++,Rt().s[16]++,"value"):(Rt().b[11][1]++,Rt().s[17]++,Rt().b[13][0]++,e.type==="array"&&(Rt().b[13][1]++,mK(n))?(Rt().b[12][0]++,Rt().s[18]++,"value"):(Rt().b[12][1]++,Rt().s[19]++,Rt().b[15][0]++,e.type==="numberArray"&&(Rt().b[15][1]++,mK(n))?(Rt().b[14][0]++,Rt().s[20]++,"value"):(Rt().b[14][1]++,Rt().s[21]++,e.type==="colorArray"?(Rt().b[16][0]++,Rt().s[22]++,"value"):(Rt().b[16][1]++,Rt().s[23]++,e.type==="padding"?(Rt().b[17][0]++,Rt().s[24]++,"value"):(Rt().b[17][1]++,Rt().s[25]++,e.type==="variableAnchorOffsetCollection"?(Rt().b[18][0]++,Rt().s[26]++,"value"):(Rt().b[18][1]++,Rt().s[27]++,Wce(n)?(Rt().b[19][0]++,Rt().s[28]++,"zoom_function"):(Rt().b[19][1]++,Rt().s[29]++,Yce(n)?(Rt().b[20][0]++,Rt().s[30]++,"data_function"):(Rt().b[20][1]++,Rt().s[31]++,"expression")))))))))}Rt().s[32]++;const qce=n=>{Rt().f[11]++;const[e,t]=(Rt().s[33]++,ni.useState(gK(n.value,n.fieldSpec))),[i,r]=(Rt().s[34]++,ni.useState(!1));Rt().s[35]++,ni.useEffect(()=>{Rt().f[12]++,Rt().s[36]++,i?Rt().b[21][1]++:(Rt().b[21][0]++,Rt().s[37]++,t(gK(n.value,n.fieldSpec)))},[n.value,n.fieldSpec,i]),Rt().s[38]++;const a=oe=>(Rt().f[13]++,Rt().s[39]++,oe.expression.interpolated?(Rt().b[22][0]++,Rt().s[40]++,"exponential"):(Rt().b[22][1]++,Rt().s[41]++,oe.type==="number"?(Rt().b[23][0]++,Rt().s[42]++,"interval"):(Rt().b[23][1]++,Rt().s[43]++,"categorical")));Rt().s[44]++;const l=()=>{Rt().f[14]++;const oe=(Rt().s[45]++,n.value.stops.slice(0)),ne=(Rt().s[46]++,oe[oe.length-1]);Rt().s[47]++,typeof ne[0]=="object"?(Rt().b[24][0]++,Rt().s[48]++,oe.push([{zoom:ne[0].zoom+1,value:ne[0].value},ne[1]])):(Rt().b[24][1]++,Rt().s[49]++,oe.push([ne[0]+1,ne[1]]));const $=(Rt().s[50]++,{...n.value,stops:oe});Rt().s[51]++,n.onChange(n.fieldName,$)};Rt().s[52]++;const o=()=>{Rt().f[15]++;const{fieldSpec:oe,fieldName:ne}=(Rt().s[53]++,n);Rt().s[54]++,n.onChange(ne,oe.default),Rt().s[55]++,t("value")};Rt().s[56]++;const p=oe=>{Rt().f[16]++;const ne=(Rt().s[57]++,n.value.stops.slice(0));Rt().s[58]++,ne.splice(oe,1);let $=(Rt().s[59]++,{...n.value,stops:ne});Rt().s[60]++,ne.length===1?(Rt().b[25][0]++,Rt().s[61]++,$=ne[0][1]):Rt().b[25][1]++,Rt().s[62]++,n.onChange(n.fieldName,$)};Rt().s[63]++;const C=()=>{Rt().f[17]++;const{value:oe}=(Rt().s[64]++,n);let ne;Rt().s[65]++,typeof oe=="object"?(Rt().b[26][0]++,Rt().s[66]++,oe.stops?(Rt().b[27][0]++,Rt().s[67]++,ne={base:oe.base,stops:oe.stops.map($=>(Rt().f[18]++,Rt().s[68]++,[$[0].zoom,(Rt().b[28][0]++,$[1]||(Rt().b[28][1]++,Ap(n.fieldSpec)))]))}):(Rt().b[27][1]++,Rt().s[69]++,ne={base:oe.base,stops:[[6,Ap(n.fieldSpec)],[10,Ap(n.fieldSpec)]]})):(Rt().b[26][1]++,Rt().s[70]++,ne={stops:[[6,(Rt().b[29][0]++,oe||(Rt().b[29][1]++,Ap(n.fieldSpec)))],[10,(Rt().b[30][0]++,oe||(Rt().b[30][1]++,Ap(n.fieldSpec)))]]}),Rt().s[71]++,n.onChange(n.fieldName,ne)};Rt().s[72]++;const w=()=>{Rt().f[19]++;const{value:oe,fieldName:ne}=(Rt().s[73]++,n);Rt().s[74]++,pK(oe)?(Rt().b[31][0]++,Rt().s[75]++,n.onChange(ne,{type:"identity",property:oe[1]}),Rt().s[76]++,t("value")):(Rt().b[31][1]++,Rt().s[77]++,fK(oe)?(Rt().b[32][0]++,Rt().s[78]++,n.onChange(ne,oe[1]),Rt().s[79]++,t("value")):Rt().b[32][1]++)};Rt().s[80]++;const O=()=>{Rt().f[20]++;const{value:oe,fieldSpec:ne}=(Rt().s[81]++,n);return Rt().s[82]++,Rt().b[33][0]++,pK(oe)||(Rt().b[33][1]++,fK(oe))||(Rt().b[33][2]++,t7(oe))||(Rt().b[33][3]++,Array.isArray(oe)&&(Rt().b[33][4]++,ne.type==="array"))};Rt().s[83]++;const U=()=>{Rt().f[21]++;const{value:oe,fieldSpec:ne}=(Rt().s[84]++,n);let $;Rt().s[85]++,Rt().b[35][0]++,typeof oe=="object"&&(Rt().b[35][1]++,"stops"in oe)?(Rt().b[34][0]++,Rt().s[86]++,$=fV.convertFunction(oe,ne)):(Rt().b[34][1]++,Rt().s[87]++,eG(oe)?(Rt().b[36][0]++,Rt().s[88]++,$=["get",oe.property]):(Rt().b[36][1]++,Rt().s[89]++,$=["literal",(Rt().b[37][0]++,oe||(Rt().b[37][1]++,n.fieldSpec.default))])),Rt().s[90]++,n.onChange(n.fieldName,$)};Rt().s[91]++;const K=()=>{Rt().f[22]++;const oe=(Rt().s[92]++,a(n.fieldSpec)),ne=(Rt().s[93]++,oe==="categorical"?(Rt().b[38][0]++,""):(Rt().b[38][1]++,0)),{value:$}=(Rt().s[94]++,n);let ae;Rt().s[95]++,typeof $=="object"?(Rt().b[39][0]++,Rt().s[96]++,$.stops?(Rt().b[40][0]++,Rt().s[97]++,ae={property:"",type:oe,base:$.base,stops:$.stops.map(G=>(Rt().f[23]++,Rt().s[98]++,[{zoom:G[0],value:ne},(Rt().b[41][0]++,G[1]||(Rt().b[41][1]++,Ap(n.fieldSpec)))]))}):(Rt().b[40][1]++,Rt().s[99]++,ae={property:"",type:oe,base:$.base,stops:[[{zoom:6,value:ne},Ap(n.fieldSpec)],[{zoom:10,value:ne},Ap(n.fieldSpec)]]})):(Rt().b[39][1]++,Rt().s[100]++,ae={property:"",type:oe,base:$.base,stops:[[{zoom:6,value:ne},(Rt().b[42][0]++,n.value||(Rt().b[42][1]++,Ap(n.fieldSpec)))],[{zoom:10,value:ne},(Rt().b[43][0]++,n.value||(Rt().b[43][1]++,Ap(n.fieldSpec)))]]}),Rt().s[101]++,n.onChange(n.fieldName,ae)};Rt().s[102]++;const j=()=>{Rt().f[24]++;const oe=(Rt().s[103]++,["interpolate",["linear"],["elevation"],0,"black",2e3,"white"]);Rt().s[104]++,n.onChange(n.fieldName,oe)};Rt().s[105]++;const W=()=>{Rt().f[25]++,Rt().s[106]++,r(!0)};Rt().s[107]++;const Y=()=>{Rt().f[26]++,Rt().s[108]++,r(!1)},te=(Rt().s[109]++,n.fieldSpec.default===n.value?(Rt().b[44][0]++,"maputnik-default-property"):(Rt().b[44][1]++,"maputnik-modified-property"));let J;return Rt().s[110]++,e==="expression"?(Rt().b[45][0]++,Rt().s[111]++,J=Ae.jsx(pN,{errors:n.errors,onChange:n.onChange.bind(null,n.fieldName),canUndo:O,onUndo:w,onDelete:o,fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onFocus:W,onBlur:Y})):(Rt().b[45][1]++,Rt().s[112]++,e==="zoom_function"?(Rt().b[46][0]++,Rt().s[113]++,J=Ae.jsx(Gce,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:p,onAddStop:l,onChangeToDataFunction:K,onExpressionClick:U})):(Rt().b[46][1]++,Rt().s[114]++,e==="data_function"?(Rt().b[47][0]++,Rt().s[115]++,J=Ae.jsx(jce,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onDeleteStop:p,onAddStop:l,onChangeToZoomFunction:C,onExpressionClick:U})):(Rt().b[47][1]++,Rt().s[116]++,J=Ae.jsx(Lce,{errors:n.errors,onChange:n.onChange.bind(null),fieldType:n.fieldType,fieldName:n.fieldName,fieldSpec:n.fieldSpec,value:n.value,onZoomClick:C,onDataClick:K,onExpressionClick:U,onElevationClick:j})))),Rt().s[117]++,Ae.jsx("div",{className:te,"data-wd-key":"spec-field-container:"+n.fieldName,children:J})};function xo(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="fe80e35e875cae71c13eae54df22ccc17091c0d5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:25,column:49}},11:{start:{line:28,column:21},end:{line:31,column:3}},12:{start:{line:29,column:18},end:{line:29,column:80}},13:{start:{line:30,column:4},end:{line:30,column:51}},14:{start:{line:33,column:23},end:{line:33,column:33}},15:{start:{line:34,column:19},end:{line:52,column:6}},16:{start:{line:35,column:24},end:{line:35,column:87}},17:{start:{line:36,column:20},end:{line:36,column:48}},18:{start:{line:37,column:21},end:{line:37,column:50}},19:{start:{line:38,column:25},end:{line:38,column:82}},20:{start:{line:39,column:24},end:{line:39,column:63}},21:{start:{line:40,column:6},end:{line:51,column:8}},22:{start:{line:53,column:4},end:{line:53,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:26,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:28,column:21},end:{line:28,column:22}},loc:{start:{line:28,column:45},end:{line:31,column:3}},line:28},3:{name:"(anonymous_3)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:11},end:{line:54,column:3}},line:32},4:{name:"(anonymous_4)",decl:{start:{line:34,column:46},end:{line:34,column:47}},loc:{start:{line:34,column:61},end:{line:52,column:5}},line:34}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:9},end:{line:25,column:48}},type:"cond-expr",locations:[{start:{line:25,column:30},end:{line:25,column:37}},{start:{line:25,column:40},end:{line:25,column:48}}],line:25},4:{loc:{start:{line:36,column:20},end:{line:36,column:48}},type:"binary-expr",locations:[{start:{line:36,column:20},end:{line:36,column:42}},{start:{line:36,column:46},end:{line:36,column:48}}],line:36},5:{loc:{start:{line:37,column:21},end:{line:37,column:50}},type:"binary-expr",locations:[{start:{line:37,column:21},end:{line:37,column:44}},{start:{line:37,column:48},end:{line:37,column:50}}],line:37},6:{loc:{start:{line:38,column:25},end:{line:38,column:82}},type:"cond-expr",locations:[{start:{line:38,column:46},end:{line:38,column:62}},{start:{line:38,column:65},end:{line:38,column:82}}],line:38},7:{loc:{start:{line:39,column:24},end:{line:39,column:63}},type:"cond-expr",locations:[{start:{line:39,column:45},end:{line:39,column:52}},{start:{line:39,column:55},end:{line:39,column:63}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA2Da;AA3Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAuC;AAC7G,QAAM,QAAQ,KAAK,WAAW,SAAS,KAAK,CAAC;AAC7C,SAAQ,aAAa,QAAS,UAAU;AAC1C;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fe80e35e875cae71c13eae54df22ccc17091c0d5"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return xo=function(){return l},l}xo();const Hce=(xo().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function Vce(n,e,t){xo().f[0]++;const i=(xo().s[1]++,tG(n,e,t)),r=(xo().s[2]++,n[i+"_"+e]),a=(xo().s[3]++,r[t]);return xo().s[4]++,Hce.indexOf(t)>=0?(xo().b[0][0]++,xo().s[5]++,{...a,values:n.$root.sprite.values}):(xo().b[0][1]++,xo().s[6]++,t==="text-font"?(xo().b[1][0]++,xo().s[7]++,{...a,values:n.$root.glyphs.values}):(xo().b[1][1]++,xo().s[8]++,a))}function tG(n,e,t){xo().f[1]++;const i=(xo().s[9]++,xo().b[2][0]++,n["paint_"+e]||(xo().b[2][1]++,{}));return xo().s[10]++,t in i?(xo().b[3][0]++,"paint"):(xo().b[3][1]++,"layout")}class $ce extends ni.Component{onPropertyChange=(xo().s[11]++,(e,t)=>{xo().f[2]++;const i=(xo().s[12]++,tG(this.props.spec,this.props.layer.type,e));xo().s[13]++,this.props.onChange(i,e,t)});render(){xo().f[3]++;const{errors:e}=(xo().s[14]++,this.props),t=(xo().s[15]++,this.props.groupFields.map(i=>{xo().f[4]++;const r=(xo().s[16]++,Vce(this.props.spec,this.props.layer.type,i)),a=(xo().s[17]++,xo().b[4][0]++,this.props.layer.paint||(xo().b[4][1]++,{})),l=(xo().s[18]++,xo().b[5][0]++,this.props.layer.layout||(xo().b[5][1]++,{})),o=(xo().s[19]++,i in a?(xo().b[6][0]++,a[i]):(xo().b[6][1]++,l[i])),p=(xo().s[20]++,i in a?(xo().b[7][0]++,"paint"):(xo().b[7][1]++,"layout"));return xo().s[21]++,Ae.jsx(qce,{errors:e,onChange:this.onPropertyChange,fieldName:i,value:o,fieldType:p,fieldSpec:r},i)}));return xo().s[22]++,Ae.jsx("div",{className:"maputnik-property-group",children:t})}}function fv(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:12,column:4},end:{line:27,column:9}},1:{start:{line:18,column:27},end:{line:18,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:11},end:{line:28,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:18,column:74}},line:18}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA2BQ,SACE,KADF;AA3BR,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAC7C;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,GAAG,cAAc,SAAQ,GAAI,eAAK,MAAM,OAAM;AAAA,YACtE,oBAAC,iBAAc,MAAM,OAAO,WAAU,2FAA0F;AAAA,YAChI,oBAAC,mBAAgB,MAAM,OAAO,WAAU,6FAA4F;AAAA,aACtI;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c9e07ebeb2e5c7112c0b70e483a0c61cf0ea981"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return fv=function(){return l},l}fv();class Zce extends ni.Component{render(){return fv().f[0]++,fv().s[0]++,Ae.jsxs(uN,{uuid:this.props.id,children:[Ae.jsx(hN,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(fv().f[1]++,fv().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:Ae.jsxs(dle,{className:"maputnik-layer-editor-group__button",children:[Ae.jsx("span",{style:{flexGrow:1,alignContent:"center"},children:this.props.title}),Ae.jsx(rF,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),Ae.jsx(iF,{size:"2em",className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),Ae.jsx(gle,{children:this.props.children})]})}}function z1(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="331998a9ac6b18663bcbca1301c32952f465e1af",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"331998a9ac6b18663bcbca1301c32952f465e1af"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return z1=function(){return l},l}z1();z1().s[0]++;const Xce=n=>{z1().f[0]++;const e=(z1().s[1]++,n.t);return z1().s[2]++,Ae.jsx(Us,{label:e("Min Zoom"),fieldSpec:oa.layer.minzoom,error:n.error,"data-wd-key":"min-zoom",children:Ae.jsx(F0,{allowRange:!0,value:n.value,onChange:n.onChange,min:oa.layer.minzoom.minimum,max:oa.layer.minzoom.maximum,default:oa.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})},Jce=(z1().s[3]++,ls()(Xce));function j1(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="030101242d82e9c9c34c00cb0f1ee3a368ba29e3",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:6,column:29},end:{line:29,column:1}},1:{start:{line:7,column:12},end:{line:7,column:19}},2:{start:{line:8,column:2},end:{line:28,column:4}},3:{start:{line:30,column:21},end:{line:30,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:29},end:{line:6,column:30}},loc:{start:{line:6,column:40},end:{line:29,column:1}},line:6}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AAlBN,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,SACE;AAAA,IAAC;AAAA;AAAA,MAAM,OAAO,EAAE,UAAU;AAAA,MAAG,WAAW,OAAO,MAAM;AAAA,MACnD,OAAO,MAAM;AAAA,MACb,eAAY;AAAA,MAEZ;AAAA,QAAC;AAAA;AAAA,UACC,YAAY;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,UAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,UAC9B,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"030101242d82e9c9c34c00cb0f1ee3a368ba29e3"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return j1=function(){return l},l}j1();j1().s[0]++;const ehe=n=>{j1().f[0]++;const e=(j1().s[1]++,n.t);return j1().s[2]++,Ae.jsx(Us,{label:e("Max Zoom"),fieldSpec:oa.layer.maxzoom,error:n.error,"data-wd-key":"max-zoom",children:Ae.jsx(F0,{allowRange:!0,value:n.value,onChange:n.onChange,min:oa.layer.maxzoom.minimum,max:oa.layer.maxzoom.maximum,default:oa.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})},the=(j1().s[3]++,ls()(ehe));function Og(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="bbd273b6557a5df907fed987aa83b7e8030607a2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:5,column:29},end:{line:31,column:1}},1:{start:{line:6,column:12},end:{line:6,column:19}},2:{start:{line:7,column:20},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:30,column:4}},4:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:40},end:{line:31,column:1}},line:5}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AA2BM;AAzBN,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA+B,uBAAuB;AAQtD,MAAM,uBAA4D,CAAC,UAAU;AAC3E,QAAM,IAAI,MAAM;AAChB,QAAM,YAAY;AAAA,IAChB,KAAK;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,EAAE,UAAU;AAAA,MACnB;AAAA,MACA,eAAY;AAAA,MACZ,OAAO,MAAM;AAAA,MAEb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO;AAAA,UACP,OAAO,MAAM;AAAA,UACb,UAAU,MAAM;AAAA,UAChB,SAAS,EAAE,YAAY;AAAA,UACvB,eAAY;AAAA;AAAA,MACd;AAAA;AAAA,EACF;AAEJ;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bbd273b6557a5df907fed987aa83b7e8030607a2"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Og=function(){return l},l}Og();Og().s[0]++;const nhe=n=>{Og().f[0]++;const e=(Og().s[1]++,n.t),t=(Og().s[2]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return Og().s[3]++,Ae.jsx(Us,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:n.error,children:Ae.jsx(am,{multi:!0,value:n.value,onChange:n.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})},ihe=(Og().s[4]++,ls()(nhe));function pv(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return pv=function(){return l},l}pv();function nG(n){return pv().f[0]++,pv().s[0]++,n===""?(pv().b[0][0]++,"[empty_string]"):(pv().b[0][1]++,`'${n}'`)}function mn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="b18e7132cbe74e9874e1799489adb7288f110d90",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:24,column:17},end:{line:24,column:19}},1:{start:{line:25,column:2},end:{line:30,column:5}},2:{start:{line:29,column:59},end:{line:29,column:82}},3:{start:{line:31,column:2},end:{line:36,column:5}},4:{start:{line:35,column:59},end:{line:35,column:80}},5:{start:{line:37,column:2},end:{line:42,column:5}},6:{start:{line:41,column:59},end:{line:41,column:80}},7:{start:{line:43,column:2},end:{line:48,column:5}},8:{start:{line:47,column:58},end:{line:47,column:79}},9:{start:{line:49,column:2},end:{line:54,column:5}},10:{start:{line:53,column:58},end:{line:53,column:79}},11:{start:{line:55,column:2},end:{line:55,column:16}},12:{start:{line:58,column:2},end:{line:60,column:3}},13:{start:{line:59,column:4},end:{line:59,column:14}},14:{start:{line:61,column:2},end:{line:63,column:3}},15:{start:{line:62,column:4},end:{line:62,column:37}},16:{start:{line:64,column:17},end:{line:64,column:19}},17:{start:{line:65,column:2},end:{line:72,column:3}},18:{start:{line:66,column:4},end:{line:71,column:7}},19:{start:{line:73,column:2},end:{line:80,column:3}},20:{start:{line:74,column:4},end:{line:79,column:7}},21:{start:{line:81,column:2},end:{line:81,column:16}},22:{start:{line:84,column:21},end:{line:88,column:3}},23:{start:{line:89,column:22},end:{line:93,column:3}},24:{start:{line:94,column:22},end:{line:98,column:3}},25:{start:{line:99,column:2},end:{line:99,column:96}},26:{start:{line:102,column:24},end:{line:109,column:3}},27:{start:{line:111,column:4},end:{line:111,column:17}},28:{start:{line:112,column:25},end:{line:112,column:27}},29:{start:{line:113,column:4},end:{line:115,column:5}},30:{start:{line:114,column:6},end:{line:114,column:39}},31:{start:{line:116,column:4},end:{line:116,column:34}},32:{start:{line:119,column:29},end:{line:119,column:54}},33:{start:{line:120,column:4},end:{line:124,column:5}},34:{start:{line:121,column:6},end:{line:123,column:7}},35:{start:{line:122,column:8},end:{line:122,column:45}},36:{start:{line:125,column:4},end:{line:127,column:6}},37:{start:{line:130,column:4},end:{line:133,column:6}},38:{start:{line:136,column:32},end:{line:139,column:5}},39:{start:{line:140,column:4},end:{line:142,column:7}},40:{start:{line:145,column:18},end:{line:145,column:20}},41:{start:{line:146,column:4},end:{line:148,column:5}},42:{start:{line:147,column:6},end:{line:147,column:62}},43:{start:{line:149,column:35},end:{line:149,column:45}},44:{start:{line:150,column:22},end:{line:150,column:24}},45:{start:{line:151,column:4},end:{line:157,column:7}},46:{start:{line:152,column:6},end:{line:156,column:7}},47:{start:{line:153,column:8},end:{line:155,column:10}},48:{start:{line:159,column:18},end:{line:159,column:34}},49:{start:{line:160,column:4},end:{line:162,column:5}},50:{start:{line:161,column:6},end:{line:161,column:63}},51:{start:{line:163,column:4},end:{line:266,column:5}},52:{start:{line:165,column:8},end:{line:229,column:13}},53:{start:{line:172,column:35},end:{line:172,column:112}},54:{start:{line:181,column:37},end:{line:184,column:15}},55:{start:{line:193,column:31},end:{line:193,column:69}},56:{start:{line:202,column:31},end:{line:202,column:75}},57:{start:{line:210,column:31},end:{line:210,column:70}},58:{start:{line:218,column:31},end:{line:218,column:70}},59:{start:{line:226,column:31},end:{line:226,column:104}},60:{start:{line:231,column:8},end:{line:239,column:16}},61:{start:{line:237,column:29},end:{line:237,column:67}},62:{start:{line:241,column:8},end:{line:250,column:10}},63:{start:{line:252,column:8},end:{line:263,column:10}},64:{start:{line:257,column:14},end:{line:260,column:16}},65:{start:{line:265,column:8},end:{line:265,column:49}},66:{start:{line:269,column:4},end:{line:272,column:7}},67:{start:{line:275,column:14},end:{line:275,column:26}},68:{start:{line:276,column:21},end:{line:276,column:23}},69:{start:{line:277,column:22},end:{line:277,column:43}},70:{start:{line:278,column:19},end:{line:295,column:6}},71:{start:{line:279,column:6},end:{line:279,column:70}},72:{start:{line:281,column:22},end:{line:281,column:30}},73:{start:{line:282,column:6},end:{line:282,column:29}},74:{start:{line:283,column:6},end:{line:294,column:8}},75:{start:{line:296,column:19},end:{line:296,column:48}},76:{start:{line:297,column:18},end:{line:325,column:5}},77:{start:{line:300,column:23},end:{line:300,column:71}},78:{start:{line:305,column:23},end:{line:305,column:68}},79:{start:{line:310,column:23},end:{line:310,column:80}},80:{start:{line:316,column:23},end:{line:316,column:41}},81:{start:{line:322,column:23},end:{line:322,column:40}},82:{start:{line:327,column:6},end:{line:327,column:30}},83:{start:{line:328,column:6},end:{line:328,column:26}},84:{start:{line:330,column:4},end:{line:376,column:9}},85:{start:{line:358,column:33},end:{line:358,column:42}},86:{start:{line:359,column:20},end:{line:359,column:201}},87:{start:{line:379,column:20},end:{line:379,column:58}}},fnMap:{0:{name:"getLayoutForSymbolType",decl:{start:{line:23,column:9},end:{line:23,column:31}},loc:{start:{line:23,column:35},end:{line:56,column:1}},line:23},1:{name:"(anonymous_1)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:82}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:35,column:59},end:{line:35,column:80}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:41,column:52},end:{line:41,column:53}},loc:{start:{line:41,column:59},end:{line:41,column:80}},line:41},4:{name:"(anonymous_4)",decl:{start:{line:47,column:51},end:{line:47,column:52}},loc:{start:{line:47,column:58},end:{line:47,column:79}},line:47},5:{name:"(anonymous_5)",decl:{start:{line:53,column:51},end:{line:53,column:52}},loc:{start:{line:53,column:58},end:{line:53,column:79}},line:53},6:{name:"getLayoutForType",decl:{start:{line:57,column:9},end:{line:57,column:25}},loc:{start:{line:57,column:35},end:{line:82,column:1}},line:57},7:{name:"layoutGroups",decl:{start:{line:83,column:9},end:{line:83,column:21}},loc:{start:{line:83,column:36},end:{line:100,column:1}},line:83},8:{name:"(anonymous_8)",decl:{start:{line:103,column:20},end:{line:103,column:21}},loc:{start:{line:103,column:26},end:{line:104,column:5}},line:103},9:{name:"(anonymous_9)",decl:{start:{line:105,column:21},end:{line:105,column:22}},loc:{start:{line:105,column:27},end:{line:106,column:5}},line:105},10:{name:"(anonymous_10)",decl:{start:{line:107,column:22},end:{line:107,column:23}},loc:{start:{line:107,column:28},end:{line:108,column:5}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:21},end:{line:117,column:3}},line:110},12:{name:"(anonymous_12)",decl:{start:{line:118,column:2},end:{line:118,column:3}},loc:{start:{line:118,column:48},end:{line:128,column:3}},line:118},13:{name:"(anonymous_13)",decl:{start:{line:129,column:2},end:{line:129,column:3}},loc:{start:{line:129,column:44},end:{line:134,column:3}},line:129},14:{name:"(anonymous_14)",decl:{start:{line:135,column:2},end:{line:135,column:3}},loc:{start:{line:135,column:36},end:{line:143,column:3}},line:135},15:{name:"(anonymous_15)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:32},end:{line:267,column:3}},line:144},16:{name:"(anonymous_16)",decl:{start:{line:151,column:19},end:{line:151,column:20}},loc:{start:{line:151,column:30},end:{line:157,column:5}},line:151},17:{name:"(anonymous_17)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:35},end:{line:172,column:112}},line:172},18:{name:"(anonymous_18)",decl:{start:{line:181,column:24},end:{line:181,column:25}},loc:{start:{line:181,column:37},end:{line:184,column:15}},line:181},19:{name:"(anonymous_19)",decl:{start:{line:193,column:24},end:{line:193,column:25}},loc:{start:{line:193,column:31},end:{line:193,column:69}},line:193},20:{name:"(anonymous_20)",decl:{start:{line:202,column:24},end:{line:202,column:25}},loc:{start:{line:202,column:31},end:{line:202,column:75}},line:202},21:{name:"(anonymous_21)",decl:{start:{line:210,column:24},end:{line:210,column:25}},loc:{start:{line:210,column:31},end:{line:210,column:70}},line:210},22:{name:"(anonymous_22)",decl:{start:{line:218,column:24},end:{line:218,column:25}},loc:{start:{line:218,column:31},end:{line:218,column:70}},line:218},23:{name:"(anonymous_23)",decl:{start:{line:226,column:24},end:{line:226,column:25}},loc:{start:{line:226,column:31},end:{line:226,column:104}},line:226},24:{name:"(anonymous_24)",decl:{start:{line:237,column:22},end:{line:237,column:23}},loc:{start:{line:237,column:29},end:{line:237,column:67}},line:237},25:{name:"(anonymous_25)",decl:{start:{line:256,column:22},end:{line:256,column:23}},loc:{start:{line:256,column:34},end:{line:261,column:13}},line:256},26:{name:"(anonymous_26)",decl:{start:{line:268,column:2},end:{line:268,column:3}},loc:{start:{line:268,column:20},end:{line:273,column:3}},line:268},27:{name:"(anonymous_27)",decl:{start:{line:274,column:2},end:{line:274,column:3}},loc:{start:{line:274,column:11},end:{line:377,column:3}},line:274},28:{name:"(anonymous_28)",decl:{start:{line:278,column:53},end:{line:278,column:54}},loc:{start:{line:278,column:64},end:{line:280,column:5}},line:278},29:{name:"(anonymous_29)",decl:{start:{line:280,column:11},end:{line:280,column:12}},loc:{start:{line:280,column:22},end:{line:295,column:5}},line:280},30:{name:"(anonymous_30)",decl:{start:{line:300,column:17},end:{line:300,column:18}},loc:{start:{line:300,column:23},end:{line:300,column:71}},line:300},31:{name:"(anonymous_31)",decl:{start:{line:305,column:17},end:{line:305,column:18}},loc:{start:{line:305,column:23},end:{line:305,column:68}},line:305},32:{name:"(anonymous_32)",decl:{start:{line:310,column:17},end:{line:310,column:18}},loc:{start:{line:310,column:23},end:{line:310,column:80}},line:310},33:{name:"(anonymous_33)",decl:{start:{line:316,column:17},end:{line:316,column:18}},loc:{start:{line:316,column:23},end:{line:316,column:41}},line:316},34:{name:"(anonymous_34)",decl:{start:{line:322,column:17},end:{line:322,column:18}},loc:{start:{line:322,column:23},end:{line:322,column:40}},line:322},35:{name:"handleSelection",decl:{start:{line:326,column:13},end:{line:326,column:28}},loc:{start:{line:326,column:40},end:{line:329,column:5}},line:326},36:{name:"(anonymous_36)",decl:{start:{line:357,column:147},end:{line:357,column:148}},loc:{start:{line:357,column:155},end:{line:360,column:19}},line:357}},branchMap:{0:{loc:{start:{line:58,column:2},end:{line:60,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:60,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:58},1:{loc:{start:{line:61,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:2},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},2:{loc:{start:{line:65,column:2},end:{line:72,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:72,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},3:{loc:{start:{line:73,column:2},end:{line:80,column:3}},type:"if",locations:[{start:{line:73,column:2},end:{line:80,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:73},4:{loc:{start:{line:121,column:6},end:{line:123,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:123,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:121},5:{loc:{start:{line:146,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:148,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},6:{loc:{start:{line:152,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:152,column:6},end:{line:156,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},7:{loc:{start:{line:152,column:10},end:{line:152,column:96}},type:"binary-expr",locations:[{start:{line:152,column:10},end:{line:152,column:22}},{start:{line:152,column:26},end:{line:152,column:55}},{start:{line:152,column:59},end:{line:152,column:96}}],line:152},8:{loc:{start:{line:160,column:4},end:{line:162,column:5}},type:"if",locations:[{start:{line:160,column:4},end:{line:162,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160},9:{loc:{start:{line:163,column:4},end:{line:266,column:5}},type:"switch",locations:[{start:{line:164,column:6},end:{line:229,column:13}},{start:{line:230,column:6},end:{line:239,column:16}},{start:{line:240,column:6},end:{line:250,column:10}},{start:{line:251,column:6},end:{line:263,column:10}},{start:{line:264,column:6},end:{line:265,column:49}}],line:163},10:{loc:{start:{line:187,column:10},end:{line:195,column:11}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:48}},{start:{line:187,column:68},end:{line:195,column:11}}],line:187},11:{loc:{start:{line:196,column:10},end:{line:204,column:11}},type:"binary-expr",locations:[{start:{line:196,column:10},end:{line:196,column:60}},{start:{line:196,column:80},end:{line:204,column:11}}],line:196},12:{loc:{start:{line:226,column:83},end:{line:226,column:103}},type:"cond-expr",locations:[{start:{line:226,column:93},end:{line:226,column:99}},{start:{line:226,column:102},end:{line:226,column:103}}],line:226},13:{loc:{start:{line:279,column:15},end:{line:279,column:68}},type:"binary-expr",locations:[{start:{line:279,column:15},end:{line:279,column:41}},{start:{line:279,column:45},end:{line:279,column:68}}],line:279},14:{loc:{start:{line:296,column:19},end:{line:296,column:48}},type:"binary-expr",locations:[{start:{line:296,column:19},end:{line:296,column:42}},{start:{line:296,column:46},end:{line:296,column:48}}],line:296},15:{loc:{start:{line:309,column:14},end:{line:309,column:66}},type:"cond-expr",locations:[{start:{line:309,column:45},end:{line:309,column:54}},{start:{line:309,column:57},end:{line:309,column:66}}],line:309}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0],8:[0,0],9:[0,0,0,0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer"],mappings:"AAuN2B,SA2EL,UA1Ed,KADmB;AAvN3B,OAAO,WAAuB;AAC9B,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AACzB,SAAS,mBAAmB;AAE5B,SAAQ,UAAS;AAEjB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,SAAQ,qBAAoB;AAC5B,SAA+B,uBAAuB;AAEtD,SAAS,yBAAyB;AAUlC,SAAS,uBAAuB,GAAqC;AACnE,QAAM,SAAgC,CAAC;AACvC,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,2BAA2B;AAAA,IACpC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,SAAS,CAAC;AAAA,EAC9E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,wBAAwB;AAAA,IACjC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,eAAe,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC5E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO,KAAK;AAAA,IACV,OAAO,EAAE,uBAAuB;AAAA,IAChC,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,QAAQ,OAAO,KAAK,GAAG,cAAc,CAAC,EAAE,OAAO,OAAK,EAAE,WAAW,OAAO,CAAC;AAAA,EAC3E,CAAC;AACD,SAAO;AACT;AAEA,SAAS,iBAAiB,MAAkC,GAAqC;AAC/F,MAAI,OAAO,KAAK,GAAG,MAAM,KAAK,MAAM,EAAE,QAAQ,IAAI,IAAI,GAAG;AACvD,WAAO,CAAC;AAAA,EACV;AACA,MAAI,SAAS,UAAU;AACrB,WAAO,uBAAuB,CAAC;AAAA,EACjC;AACA,QAAM,SAAgC,CAAC;AACvC,MAAI,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC,EAAE,SAAS,GAAG;AAC/C,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,kBAAkB;AAAA,MAC3B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,WAAW,IAAI,CAAC;AAAA,IACzC,CAAC;AAAA,EACH;AACA,MAAI,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC,EAAE,SAAS,GAAG;AAChD,WAAO,KAAK;AAAA,MACV,OAAO,EAAE,mBAAmB;AAAA,MAC5B,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,OAAO,KAAK,GAAG,YAAY,IAAI,CAAC;AAAA,IAC1C,CAAC;AAAA,EACH;AACA,SAAO;AACT;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,CAAC,EACrC,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAEX,UAAM,eAAyC,CAAC;AAChD,eAAW,SAAS,aAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAChE,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B;AAEA,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,eAAW,SAAS,iBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,GAAG;AAC/D,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF;AAEA,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAGA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAiB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAE;AAAA,IACpD;AAEA,YAAO,MAAM;AAAA,MACX,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,kBAAkB,SAAS,KAAK,MAAM,MAAM,IAAI,KAClD;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAKD;AAAA,MACH,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,QAC9D,OAAO;AAAA,MACT;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,QAC3D,OAAO;AAAA,MACT;AAAA,MACA,MAAM;AAAA,QACJ,MAAO,OAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,QACvE,OAAO;AAAA,MACT;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA,QACvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA,QACzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,QAChC,OAAO;AAAA,MACT;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,QAAQ,OAAO,UAAS,GACjE;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACjB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAC5B,eAAY;AAAA,QAEZ;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAAwB,eAAa,KAAK,OACtE,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b18e7132cbe74e9874e1799489adb7288f110d90"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return mn=function(){return l},l}mn();function rhe(n){mn().f[0]++;const e=(mn().s[0]++,[]);return mn().s[1]++,e.push({title:n("General layout properties"),id:"General_layout_properties",type:"properties",fields:Object.keys(xf.layout_symbol).filter(t=>(mn().f[1]++,mn().s[2]++,t.startsWith("symbol-")))}),mn().s[3]++,e.push({title:n("Text layout properties"),id:"Text_layout_properties",type:"properties",fields:Object.keys(xf.layout_symbol).filter(t=>(mn().f[2]++,mn().s[4]++,t.startsWith("text-")))}),mn().s[5]++,e.push({title:n("Icon layout properties"),id:"Icon_layout_properties",type:"properties",fields:Object.keys(xf.layout_symbol).filter(t=>(mn().f[3]++,mn().s[6]++,t.startsWith("icon-")))}),mn().s[7]++,e.push({title:n("Text paint properties"),id:"Text_paint_properties",type:"properties",fields:Object.keys(xf.paint_symbol).filter(t=>(mn().f[4]++,mn().s[8]++,t.startsWith("text-")))}),mn().s[9]++,e.push({title:n("Icon paint properties"),id:"Icon_paint_properties",type:"properties",fields:Object.keys(xf.paint_symbol).filter(t=>(mn().f[5]++,mn().s[10]++,t.startsWith("icon-")))}),mn().s[11]++,e}function iG(n,e){if(mn().f[6]++,mn().s[12]++,Object.keys(xf.layer.type.values).indexOf(n)<0)return mn().b[0][0]++,mn().s[13]++,[];if(mn().b[0][1]++,mn().s[14]++,n==="symbol")return mn().b[1][0]++,mn().s[15]++,rhe(e);mn().b[1][1]++;const t=(mn().s[16]++,[]);return mn().s[17]++,Object.keys(xf["paint_"+n]).length>0?(mn().b[2][0]++,mn().s[18]++,t.push({title:e("Paint properties"),id:"Paint_properties",type:"properties",fields:Object.keys(xf["paint_"+n])})):mn().b[2][1]++,mn().s[19]++,Object.keys(xf["layout_"+n]).length>0?(mn().b[3][0]++,mn().s[20]++,t.push({title:e("Layout properties"),id:"Layout_properties",type:"properties",fields:Object.keys(xf["layout_"+n])})):mn().b[3][1]++,mn().s[21]++,t}function yK(n,e){mn().f[7]++;const t=(mn().s[22]++,{id:"layer",title:e("Layer"),type:"layer"}),i=(mn().s[23]++,{id:"filter",title:e("Filter"),type:"filter"}),r=(mn().s[24]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return mn().s[25]++,[t,i].concat(iG(n,e)).concat([r])}class ohe extends ni.Component{static defaultProps=(mn().s[26]++,{onLayerChanged:()=>{mn().f[8]++},onLayerIdChange:()=>{mn().f[9]++},onLayerDestroyed:()=>{mn().f[10]++}});constructor(e){mn().f[11]++,mn().s[27]++,super(e);const t=(mn().s[28]++,{});mn().s[29]++;for(const i of yK(this.props.layer.type,e.t))mn().s[30]++,t[i.title]=!0;mn().s[31]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){mn().f[12]++;const i=(mn().s[32]++,{...t.editorGroups});mn().s[33]++;for(const r of iG(e.layer.type,e.t))mn().s[34]++,r.title in i?mn().b[4][1]++:(mn().b[4][0]++,mn().s[35]++,i[r.title]=!0);return mn().s[36]++,{editorGroups:i}}changeProperty(e,t,i){mn().f[13]++,mn().s[37]++,this.props.onLayerChanged(this.props.layerIndex,Bse(this.props.layer,e,t,i))}onGroupToggle(e,t){mn().f[14]++;const i=(mn().s[38]++,{...this.state.editorGroups,[e]:t});mn().s[39]++,this.setState({editorGroups:i})}renderGroupType(e,t){mn().f[15]++;let i=(mn().s[40]++,"");mn().s[41]++,this.props.layer.metadata?(mn().b[5][0]++,mn().s[42]++,i=this.props.layer.metadata["maputnik:comment"]):mn().b[5][1]++;const{errors:r,layerIndex:a}=(mn().s[43]++,this.props),l=(mn().s[44]++,{});mn().s[45]++,r.forEach(C=>{mn().f[16]++,mn().s[46]++,mn().b[7][0]++,C.parsed&&(mn().b[7][1]++,C.parsed.type==="layer")&&(mn().b[7][2]++,C.parsed.data.index==a)?(mn().b[6][0]++,mn().s[47]++,l[C.parsed.data.key]={message:C.parsed.data.message}):mn().b[6][1]++});let o;const p=(mn().s[48]++,this.props.layer);switch(mn().s[49]++,Object.prototype.hasOwnProperty.call(this.props.sources,p.source)?(mn().b[8][0]++,mn().s[50]++,o=this.props.sources[p.source].layers):mn().b[8][1]++,mn().s[51]++,e){case"layer":return mn().b[9][0]++,mn().s[52]++,Ae.jsxs("div",{children:[Ae.jsx(Kj,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:l.id,onChange:C=>(mn().f[17]++,mn().s[53]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,C))}),Ae.jsx(Pj,{disabled:!0,error:l.type,value:this.props.layer.type,onChange:C=>(mn().f[18]++,mn().s[54]++,this.props.onLayerChanged(this.props.layerIndex,Ese(this.props.layer,C)))}),(mn().b[10][0]++,this.props.layer.type!=="background"&&(mn().b[10][1]++,Ae.jsx(eN,{error:l.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:C=>(mn().f[19]++,mn().s[55]++,this.changeProperty(null,"source",C))}))),(mn().b[11][0]++,!yB.includes(this.props.layer.type)&&(mn().b[11][1]++,Ae.jsx(tN,{error:l["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:C=>(mn().f[20]++,mn().s[56]++,this.changeProperty(null,"source-layer",C))}))),Ae.jsx(Jce,{error:l.minzoom,value:this.props.layer.minzoom,onChange:C=>(mn().f[21]++,mn().s[57]++,this.changeProperty(null,"minzoom",C))}),Ae.jsx(the,{error:l.maxzoom,value:this.props.layer.maxzoom,onChange:C=>(mn().f[22]++,mn().s[58]++,this.changeProperty(null,"maxzoom",C))}),Ae.jsx(ihe,{error:l.comment,value:i,onChange:C=>(mn().f[23]++,mn().s[59]++,this.changeProperty("metadata","maputnik:comment",C==""?(mn().b[12][0]++,void 0):(mn().b[12][1]++,C)))})]});case"filter":return mn().b[9][1]++,mn().s[60]++,Ae.jsx("div",{children:Ae.jsx("div",{className:"maputnik-filter-editor-wrapper",children:Ae.jsx(Hle,{errors:l,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:C=>(mn().f[24]++,mn().s[61]++,this.changeProperty(null,"filter",C))})})});case"properties":return mn().b[9][2]++,mn().s[62]++,Ae.jsx($ce,{errors:l,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return mn().b[9][3]++,mn().s[63]++,Ae.jsx(T8,{layer:this.props.layer,onChange:C=>{mn().f[25]++,mn().s[64]++,this.props.onLayerChanged(this.props.layerIndex,C)}});default:return mn().b[9][4]++,mn().s[65]++,Ae.jsx(Ae.Fragment,{})}}moveLayer(e){mn().f[26]++,mn().s[66]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){mn().f[27]++;const e=(mn().s[67]++,this.props.t),t=(mn().s[68]++,[]),i=(mn().s[69]++,this.props.layer.type),r=(mn().s[70]++,yK(i,e).filter(p=>(mn().f[28]++,mn().s[71]++,mn().b[13][0]++,!(i==="background"&&(mn().b[13][1]++,p.type==="source")))).map(p=>{mn().f[29]++;const C=(mn().s[72]++,p.id);return mn().s[73]++,t.push(C),mn().s[74]++,Ae.jsx(Zce,{"data-wd-key":p.title,id:C,title:p.title,isActive:this.state.editorGroups[p.title],onActiveToggle:this.onGroupToggle.bind(this,p.title),children:this.renderGroupType(p.type,p.fields)},C)})),a=(mn().s[75]++,mn().b[14][0]++,this.props.layer.layout||(mn().b[14][1]++,{})),l=(mn().s[76]++,{delete:{text:e("Delete"),handler:()=>(mn().f[30]++,mn().s[77]++,this.props.onLayerDestroy(this.props.layerIndex)),wdKey:"menu-delete-layer"},duplicate:{text:e("Duplicate"),handler:()=>(mn().f[31]++,mn().s[78]++,this.props.onLayerCopy(this.props.layerIndex)),wdKey:"menu-duplicate-layer"},hide:{text:a.visibility==="none"?(mn().b[15][0]++,e("Show")):(mn().b[15][1]++,e("Hide")),handler:()=>(mn().f[32]++,mn().s[79]++,this.props.onLayerVisibilityToggle(this.props.layerIndex)),wdKey:"menu-hide-layer"},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(mn().f[33]++,mn().s[80]++,this.moveLayer(-1)),wdKey:"menu-move-layer-up"},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(mn().f[34]++,mn().s[81]++,this.moveLayer(1)),wdKey:"menu-move-layer-down"}});function o(p,C){mn().f[35]++,mn().s[82]++,C.stopPropagation(),mn().s[83]++,l[p].handler()}return mn().s[84]++,Ae.jsx(Sv.Provider,{value:{size:"14px",color:"#8e8e8e"},children:Ae.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),"data-wd-key":"layer-editor",children:[Ae.jsx("header",{children:Ae.jsxs("div",{className:"layer-header",children:[Ae.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:nG(this.props.layer.id)})}),Ae.jsx("div",{className:"layer-header__info",children:Ae.jsxs(cx.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[Ae.jsx(cx.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:Ae.jsx(Z$,{className:"more-menu__button__svg"})}),Ae.jsx(cx.Menu,{children:Ae.jsx("ul",{className:"more-menu__menu",children:Object.keys(l).map(p=>{mn().f[36]++;const C=(mn().s[85]++,l[p]);return mn().s[86]++,Ae.jsx("li",{children:Ae.jsx(cx.MenuItem,{value:p,className:"more-menu__menu__item","data-wd-key":C.wdKey,children:C.text})},p)})})})]})})]})}),Ae.jsx(ele,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:r})]})})}}const ahe=(mn().s[87]++,ls()(ohe));var vK=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return n.concat(a||Array.prototype.slice.call(e))},she=function(){function n(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return n}(),lhe=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),uhe=function(){function n(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"}return n}(),Ahe=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),che=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),hhe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,dhe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,CK=3,fhe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",hhe]],_K=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function phe(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new che:typeof navigator<"u"?ghe(navigator.userAgent):vhe()}function mhe(n){return n!==""&&fhe.reduce(function(e,t){var i=t[0],r=t[1];if(e)return e;var a=r.exec(n);return!!a&&[i,a]},!1)}function ghe(n){var e=mhe(n);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new Ahe;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<CK&&(r=vK(vK([],r,!0),Che(CK-r.length),!0)):r=[];var a=r.join("."),l=yhe(n),o=dhe.exec(n);return o&&o[1]?new uhe(t,a,l,o[1]):new she(t,a,l)}function yhe(n){for(var e=0,t=_K.length;e<t;e++){var i=_K[e],r=i[0],a=i[1],l=a.exec(n);if(l)return r}return null}function vhe(){var n=typeof process<"u"&&process.version;return n?new lhe(process.version.slice(1)):null}function Che(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const _he="maputnik",bhe="3.0.0",bK={name:_he,version:bhe},xhe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Wr(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="923dac9d31e5df2499b855e0873c425e5d77065b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AAgCW,cAyLG,YAzLH;AAhCX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAA6C;AACtD,SAAS,0BAA0B;AAInC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"923dac9d31e5df2499b855e0873c425e5d77065b"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Wr=function(){return l},l}Wr();const Mhe=(Wr().s[0]++,phe()),gx=(Wr().s[1]++,["chrome","firefox"].indexOf(Mhe.name)>-1);class v1 extends ni.Component{render(){return Wr().f[0]++,Wr().s[2]++,Ae.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class whe extends ni.Component{render(){return Wr().f[1]++,Wr().s[3]++,Ae.jsx("a",{className:e0("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class xK extends ni.Component{render(){return Wr().f[2]++,Wr().s[4]++,Ae.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class yx extends ni.Component{render(){return Wr().f[3]++,Wr().s[5]++,Ae.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class She extends ni.Component{state=(Wr().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}});handleSelection(e){Wr().f[4]++,Wr().s[7]++,this.props.onSetMapState(e)}handleLanguageChange(e){Wr().f[5]++,Wr().s[8]++,this.props.i18n.changeLanguage(e)}onSkip=(Wr().s[9]++,e=>{if(Wr().f[6]++,Wr().s[10]++,e==="map")Wr().b[0][0]++,Wr().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Wr().b[0][1]++;const t=(Wr().s[12]++,document.querySelector("#skip-target-"+e));Wr().s[13]++,t.focus()}});render(){Wr().f[7]++;const e=(Wr().s[14]++,this.props.t),t=(Wr().s[15]++,[{id:"map",group:"general",title:e("Map")},{id:"inspect",group:"general",title:e("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:e("Deuteranopia filter"),disabled:!gx},{id:"filter-protanopia",group:"color-accessibility",title:e("Protanopia filter"),disabled:!gx},{id:"filter-tritanopia",group:"color-accessibility",title:e("Tritanopia filter"),disabled:!gx},{id:"filter-achromatopsia",group:"color-accessibility",title:e("Achromatopsia filter"),disabled:!gx}]),i=(Wr().s[16]++,t.find(r=>(Wr().f[8]++,Wr().s[17]++,r.id===this.props.mapState)));return Wr().s[18]++,Ae.jsx("nav",{className:"maputnik-toolbar",children:Ae.jsxs("div",{className:"maputnik-toolbar__inner",children:[Ae.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[Ae.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:r=>(Wr().f[9]++,Wr().s[19]++,this.onSkip("layer-list")),children:e("Layers list")}),Ae.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:r=>(Wr().f[10]++,Wr().s[20]++,this.onSkip("layer-editor")),children:e("Layer editor")}),Ae.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:r=>(Wr().f[11]++,Wr().s[21]++,this.onSkip("map")),children:e("Map view")}),Ae.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[Ae.jsx("img",{src:xhe,alt:e("Maputnik on GitHub")}),Ae.jsxs("h1",{children:[Ae.jsx("span",{className:"maputnik-toolbar-name",children:bK.name}),Ae.jsxs("span",{className:"maputnik-toolbar-version",children:["v",bK.version]})]})]})]}),Ae.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[Ae.jsxs(yx,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[Ae.jsx(U$,{}),Ae.jsx(v1,{children:e("Open")})]}),Ae.jsxs(yx,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[Ae.jsx(E6,{}),Ae.jsx(v1,{children:e("Save")})]}),Ae.jsxs(yx,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[Ae.jsx(q$,{}),Ae.jsx(v1,{children:e("Data Sources")})]}),Ae.jsxs(yx,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[Ae.jsx(L$,{}),Ae.jsx(v1,{children:e("Style Settings")})]}),Ae.jsxs(xK,{wdKey:"nav:inspect",children:[Ae.jsx(k$,{}),Ae.jsxs(v1,{children:[e("View"),Ae.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:r=>(Wr().f[12]++,Wr().s[22]++,this.handleSelection(r.target.value)),value:i?.id,children:[t.filter(r=>(Wr().f[13]++,Wr().s[23]++,r.group==="general")).map(r=>(Wr().f[14]++,Wr().s[24]++,Ae.jsx("option",{value:r.id,disabled:r.disabled,"data-wd-key":r.id,children:r.title},r.id))),Ae.jsx("optgroup",{label:e("Color accessibility"),children:t.filter(r=>(Wr().f[15]++,Wr().s[25]++,r.group==="color-accessibility")).map(r=>(Wr().f[16]++,Wr().s[26]++,Ae.jsx("option",{value:r.id,disabled:r.disabled,children:r.title},r.id)))})]})]})]}),Ae.jsxs(xK,{wdKey:"nav:language",children:[Ae.jsx(K$,{}),Ae.jsxs(v1,{children:["Language",Ae.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:r=>(Wr().f[17]++,Wr().s[27]++,this.handleLanguageChange(r.target.value)),value:this.props.i18n.language,children:Object.entries(VU).map(([r,a])=>(Wr().f[18]++,Wr().s[28]++,Ae.jsx("option",{value:r,children:a},r)))})]})]}),Ae.jsxs(whe,{href:"https://github.com/maplibre/maputnik/wiki",children:[Ae.jsx(D$,{}),Ae.jsx(v1,{children:e("Help")})]})]})]})})}}const Ehe=(Wr().s[29]++,ls()(She));function E3(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return E3=function(){return l},l}E3();class Bhe extends ni.Component{render(){return E3().f[0]++,E3().s[0]++,Ae.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function _g(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="ec06363f2da84c6363ddcdeb1250703aa92f5205",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:46}},1:{start:{line:9,column:4},end:{line:18,column:12}},2:{start:{line:21,column:18},end:{line:21,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:19,column:3}},line:7}},branchMap:{0:{loc:{start:{line:16,column:6},end:{line:16,column:123}},type:"binary-expr",locations:[{start:{line:16,column:6},end:{line:16,column:23}},{start:{line:16,column:43},end:{line:16,column:123}}],line:16}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AAsBQ,SACE,KADF;AAtBR,OAAO,WAAW;AAClB,OAAO,qBAAqB;AAC5B,SAA+B,uBAAuB;AACtD,SAAS,mBAAmB;AAW5B,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EAEtE,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,oBAAC,YAAY,UAAZ,EAAqB,OAAO,EAAC,MAAM,OAAM,GAC/C,+BAAC,SAAI,WAAU,mBACZ;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd,GACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ec06363f2da84c6363ddcdeb1250703aa92f5205"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return _g=function(){return l},l}_g();class Ohe extends ni.Component{render(){return _g().f[0]++,_g().s[0]++,document.body.dir=this.props.i18n.dir(),_g().s[1]++,Ae.jsx(Sv.Provider,{value:{size:"14px"},children:Ae.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,Ae.jsxs("div",{className:"maputnik-layout-main",children:[Ae.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),Ae.jsx("div",{className:"maputnik-layout-drawer",children:Ae.jsx(Bhe,{children:this.props.layerEditor})}),this.props.map]}),(_g().b[0][0]++,this.props.bottom&&(_g().b[0][1]++,Ae.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})})}}const Ihe=(_g().s[2]++,ls()(Ohe));function El(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="ad9bc0415023edf2846d3f9c9715e3e183d1ba9e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAA6B,uBAAuB;AAW7D,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ad9bc0415023edf2846d3f9c9715e3e183d1ba9e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return El=function(){return l},l}El();class The extends ni.Component{static defaultProps=(El().s[0]++,{onLayerSelect:()=>{El().f[0]++}});render(){El().f[1]++;const{t:e,selectedLayerIndex:t}=(El().s[1]++,this.props),i=(El().s[2]++,this.props.errors?.map((a,l)=>{El().f[2]++;let o;if(El().s[3]++,El().b[1][0]++,a.parsed&&(El().b[1][1]++,a.parsed.type==="layer")){El().b[0][0]++;const{parsed:p}=(El().s[4]++,a),C=(El().s[5]++,this.props.mapStyle?.layers[p.data.index].id);El().s[6]++,o=Ae.jsxs(Ae.Fragment,{children:[Ae.jsxs(Ig,{t:e,children:["Layer ",Ae.jsx("span",{children:nG(C)}),": ",p.data.message]}),(El().b[2][0]++,t!==p.data.index&&(El().b[2][1]++,Ae.jsxs(Ae.Fragment,{children:["",Ae.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(El().f[3]++,El().s[7]++,this.props.onLayerSelect(p.data.index)),children:e("switch to layer")})]})))]})}else El().b[0][1]++,El().s[8]++,o=a.message;return El().s[9]++,Ae.jsx("p",{className:"maputnik-message-panel-error",children:o},"error-"+l)})),r=(El().s[10]++,this.props.infos?.map((a,l)=>(El().f[4]++,El().s[11]++,Ae.jsx("p",{children:a},"info-"+l))));return El().s[12]++,Ae.jsxs("div",{className:"maputnik-message-panel",children:[i,r]})}}const khe=(El().s[13]++,ls()(The));function W_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="6904abccc922d01222214bca1ee3bdee75077020",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:148}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,gBAA0C;AACjD,OAAO,cAAc;AASrB,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6904abccc922d01222214bca1ee3bdee75077020"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return W_=function(){return l},l}W_();W_().s[0]++;const B3=n=>(W_().f[0]++,W_().s[1]++,Ae.jsx(Cg,{label:n.label,fieldSpec:n.fieldSpec,children:Ae.jsx(xB,{...n})}));function Q_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4d2523cd21b202fb5e80e08624becdbab30e967f",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,iBAA0C;AACjD,OAAO,WAAW;AAWlB,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d2523cd21b202fb5e80e08624becdbab30e967f"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Q_=function(){return l},l}Q_();Q_().s[0]++;const $p=n=>(Q_().f[0]++,Q_().s[1]++,Ae.jsx(Us,{label:n.label,fieldSpec:n.fieldSpec,children:Ae.jsx(F0,{...n})}));function Y_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="5d41bf44c48c380a773c8c6219651c4348518afa",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAUjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d41bf44c48c380a773c8c6219651c4348518afa"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Y_=function(){return l},l}Y_();Y_().s[0]++;const fp=n=>(Y_().f[0]++,Y_().s[1]++,Ae.jsx(Us,{label:n.label,fieldSpec:n.fieldSpec,children:Ae.jsx(am,{...n})}));function q_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="6e4f23f735ab05a9622545421c68df85e4603d43",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:4,column:17},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:143}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:28},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,cAAqD;AAC5D,OAAO,WAAW;AAWlB,MAAM,WAAoC,CAAC,UAAU;AACnD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,YAAU,GAAG,OAAO,GACvB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6e4f23f735ab05a9622545421c68df85e4603d43"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return q_=function(){return l},l}q_();q_().s[0]++;const jv=n=>(q_().f[0]++,q_().s[1]++,Ae.jsx(Us,{label:n.label,fieldSpec:n.fieldSpec,children:Ae.jsx(e7,{...n})}));function H_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="245ef066962174fcd1012332d28af93e7b97872c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:4,column:20},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:146}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:31},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,iBAA0C;AAWjD,MAAM,cAA0C,CAAC,UAAU;AACzD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,eAAa,GAAG,OAAO,GAC1B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"245ef066962174fcd1012332d28af93e7b97872c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return H_=function(){return l},l}H_();H_().s[0]++;const $2=n=>(H_().f[0]++,H_().s[1]++,Ae.jsx(Us,{label:n.label,fieldSpec:n.fieldSpec,children:Ae.jsx(ty,{...n})}));function V_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="c3637509a0af6618b52e814bed4254c2e3fa3b7a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:4,column:18},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:147}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:29},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,eAAsC;AAC7C,OAAO,cAAc;AAWrB,MAAM,YAAsC,CAAC,UAAU;AACrD,SACE,oBAAC,YAAS,OAAO,MAAM,OAAO,WAAW,MAAM,WAC7C,8BAAC,aAAW,GAAG,OAAO,GACxB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c3637509a0af6618b52e814bed4254c2e3fa3b7a"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return V_=function(){return l},l}V_();V_().s[0]++;const Dhe=n=>(V_().f[0]++,V_().s[1]++,Ae.jsx(Cg,{label:n.label,fieldSpec:n.fieldSpec,children:Ae.jsx(J8,{...n})}));function $_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="81b03af9ad032d255df7823d843b73e8fa5e3f61",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:4,column:19},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:145}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:30},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,gBAAwC;AAW/C,MAAM,aAAwC,CAAC,UAAU;AACvD,SACE,oBAAC,SAAM,OAAO,MAAM,OAAO,WAAW,MAAM,WAC1C,8BAAC,cAAY,GAAG,OAAO,GACzB;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81b03af9ad032d255df7823d843b73e8fa5e3f61"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return $_=function(){return l},l}$_();$_().s[0]++;const Rhe=n=>($_().f[0]++,$_().s[1]++,Ae.jsx(Us,{label:n.label,fieldSpec:n.fieldSpec,children:Ae.jsx(X8,{...n})}));function Z_(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3fd72cd1ec4be346f0d6d854a97e371e1b9c2997",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:32,column:2}},1:{start:{line:1,column:21},end:{line:32,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:32,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,yBAAyB;AAAA,MACvB,OAAO,EAAE,yBAAyB;AAAA,MAClC,KAAK,EAAE,8CAA8C;AAAA,MACrD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3fd72cd1ec4be346f0d6d854a97e371e1b9c2997"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Z_=function(){return l},l}Z_();Z_().s[0]++;const rG=n=>(Z_().f[0]++,Z_().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},locationiq_access_token:{label:n("LocationIQ Access Token"),doc:n("Public access token for LocationIQ services."),docUrl:"https://docs.locationiq.com/docs/maps",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function zr(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",e="dd14009bdb801dc3d8a1c0723e160e2e8147edb2",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:305,column:6}},27:{start:{line:308,column:22},end:{line:308,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:306,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:170,column:21},end:{line:170,column:42}},type:"binary-expr",locations:[{start:{line:170,column:21},end:{line:170,column:36}},{start:{line:170,column:40},end:{line:170,column:42}}],line:170},9:{loc:{start:{line:299,column:21},end:{line:299,column:62}},type:"binary-expr",locations:[{start:{line:299,column:21},end:{line:299,column:50}},{start:{line:299,column:54},end:{line:299,column:62}}],line:299}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSettings.tsx"],names:[],mappings:"AAgHM,SACE,KADF;AAhHN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAWhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,cAC5C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,kCAAkC;AAAA,cAClD,UAAU,yBAAyB,KAAK,MAAM,kCAAkC;AAAA;AAAA,UAClF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dd14009bdb801dc3d8a1c0723e160e2e8147edb2"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return zr=function(){return l},l}zr();class Phe extends ni.Component{changeTransitionProperty(e,t){zr().f[0]++;const i=(zr().s[0]++,{...this.props.mapStyle.transition});zr().s[1]++,t===void 0?(zr().b[0][0]++,zr().s[2]++,delete i[e]):(zr().b[0][1]++,zr().s[3]++,i[e]=t),zr().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:i})}changeLightProperty(e,t){zr().f[1]++;const i=(zr().s[5]++,{...this.props.mapStyle.light});zr().s[6]++,t===void 0?(zr().b[1][0]++,zr().s[7]++,delete i[e]):(zr().b[1][1]++,zr().s[8]++,i[e]=t),zr().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:i})}changeTerrainProperty(e,t){zr().f[2]++;const i=(zr().s[10]++,{...this.props.mapStyle.terrain});zr().s[11]++,t===void 0?(zr().b[2][0]++,zr().s[12]++,delete i[e]):(zr().b[2][1]++,zr().s[13]++,i[e]=t),zr().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:i})}changeStyleProperty(e,t){zr().f[3]++;const i=(zr().s[15]++,{...this.props.mapStyle});zr().s[16]++,t===void 0?(zr().b[3][0]++,zr().s[17]++,delete i[e]):(zr().b[3][1]++,zr().s[18]++,i[e]=t),zr().s[19]++,this.props.onStyleChanged(i)}render(){zr().f[4]++;const e=(zr().s[20]++,zr().b[4][0]++,this.props.mapStyle.metadata||(zr().b[4][1]++,{})),{t,onChangeMetadataProperty:i,mapStyle:r}=(zr().s[21]++,this.props),a=(zr().s[22]++,rG(t)),l=(zr().s[23]++,zr().b[5][0]++,this.props.mapStyle.light||(zr().b[5][1]++,{})),o=(zr().s[24]++,zr().b[6][0]++,this.props.mapStyle.transition||(zr().b[6][1]++,{})),p=(zr().s[25]++,zr().b[7][0]++,this.props.mapStyle.terrain||(zr().b[7][1]++,{}));return zr().s[26]++,Ae.jsx(jg,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:Ae.jsxs("div",{className:"modal:settings",children:[Ae.jsx(fp,{label:t("Name"),fieldSpec:oa.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),Ae.jsx(fp,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),Ae.jsx(jv,{fieldSpec:oa.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),Ae.jsx(jv,{label:t("Glyphs URL"),fieldSpec:oa.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),Ae.jsx(fp,{label:a.maputnik.maptiler_access_token.label,fieldSpec:a.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:i.bind(this,"maputnik:openmaptiles_access_token")}),Ae.jsx(fp,{label:a.maputnik.thunderforest_access_token.label,fieldSpec:a.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:i.bind(this,"maputnik:thunderforest_access_token")}),Ae.jsx(fp,{label:a.maputnik.stadia_access_token.label,fieldSpec:a.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:i.bind(this,"maputnik:stadia_access_token")}),Ae.jsx(fp,{label:a.maputnik.locationiq_access_token.label,fieldSpec:a.maputnik.locationiq_access_token,"data-wd-key":"modal:settings.maputnik:locationiq_access_token",value:e["maputnik:locationiq_access_token"],onChange:i.bind(this,"maputnik:locationiq_access_token")}),Ae.jsx(B3,{label:t("Center"),fieldSpec:oa.$root.center,length:2,type:"number",value:(zr().b[8][0]++,r.center||(zr().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),Ae.jsx($p,{label:t("Zoom"),fieldSpec:oa.$root.zoom,value:r.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),Ae.jsx($p,{label:t("Bearing"),fieldSpec:oa.$root.bearing,value:r.bearing,default:oa.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),Ae.jsx($p,{label:t("Pitch"),fieldSpec:oa.$root.pitch,value:r.pitch,default:oa.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),Ae.jsx(Dhe,{label:t("Light anchor"),fieldSpec:oa.light.anchor,name:"light-anchor",value:l.anchor,options:Object.keys(oa.light.anchor.values),default:oa.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),Ae.jsx(Rhe,{label:t("Light color"),fieldSpec:oa.light.color,value:l.color,default:oa.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),Ae.jsx($p,{label:t("Light intensity"),fieldSpec:oa.light.intensity,value:l.intensity,default:oa.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),Ae.jsx(B3,{label:t("Light position"),fieldSpec:oa.light.position,type:"number",length:oa.light.position.length,value:l.position,default:oa.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),Ae.jsx(fp,{label:t("Terrain source"),fieldSpec:oa.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:p.source,onChange:this.changeTerrainProperty.bind(this,"source")}),Ae.jsx($p,{label:t("Terrain exaggeration"),fieldSpec:oa.terrain.exaggeration,value:p.exaggeration,default:oa.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),Ae.jsx($p,{label:t("Transition delay"),fieldSpec:oa.transition.delay,value:o.delay,default:oa.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),Ae.jsx($p,{label:t("Transition duration"),fieldSpec:oa.transition.duration,value:o.duration,default:oa.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),Ae.jsx($2,{label:a.maputnik.style_renderer.label,fieldSpec:a.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(zr().b[9][0]++,e["maputnik:renderer"]||(zr().b[9][1]++,"mlgljs")),onChange:i.bind(this,"maputnik:renderer")})]})})}}const Khe=(zr().s[27]++,ls()(Phe));var Rx={exports:{}},Uhe=Rx.exports,MK;function Lhe(){return MK||(MK=1,function(n,e){(function(t,i,r){n.exports=r(),n.exports.default=r()})("slugify",Uhe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function r(a,l){if(typeof a!="string")throw new Error("slugify: string argument expected");l=typeof l=="string"?{replacement:l}:l||{};var o=i[l.locale]||{},p=l.replacement===void 0?"-":l.replacement,C=l.trim===void 0?!0:l.trim,w=a.normalize().split("").reduce(function(O,U){var K=o[U];return K===void 0&&(K=t[U]),K===void 0&&(K=U),K===p&&(K=" "),O+K.replace(l.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return l.strict&&(w=w.replace(/[^A-Za-z0-9\s]/g,"")),C&&(w=w.trim()),w=w.replace(/\s+/g,p),l.lower&&(w=w.toLowerCase()),w}return r.extend=function(a){Object.assign(t,a)},r})}(Rx)),Rx.exports}var Fhe=Lhe();const zhe=AA(Fhe);var Px={exports:{}},jhe=Px.exports,wK;function Nhe(){return wK||(wK=1,function(n,e){(function(t,i){i()})(jhe,function(){function t(C,w){return typeof w>"u"?w={autoBom:!1}:typeof w!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),w={autoBom:!w}),w.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(C.type)?new Blob(["\uFEFF",C],{type:C.type}):C}function i(C,w,O){var U=new XMLHttpRequest;U.open("GET",C),U.responseType="blob",U.onload=function(){p(U.response,w,O)},U.onerror=function(){console.error("could not download file")},U.send()}function r(C){var w=new XMLHttpRequest;w.open("HEAD",C,!1);try{w.send()}catch{}return 200<=w.status&&299>=w.status}function a(C){try{C.dispatchEvent(new MouseEvent("click"))}catch{var w=document.createEvent("MouseEvents");w.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),C.dispatchEvent(w)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(C,w,O){var U=l.URL||l.webkitURL,K=document.createElement("a");w=w||C.name||"download",K.download=w,K.rel="noopener",typeof C=="string"?(K.href=C,K.origin===location.origin?a(K):r(K.href)?i(C,w,O):a(K,K.target="_blank")):(K.href=U.createObjectURL(C),setTimeout(function(){U.revokeObjectURL(K.href)},4e4),setTimeout(function(){a(K)},0))}:"msSaveOrOpenBlob"in navigator?function(C,w,O){if(w=w||C.name||"download",typeof C!="string")navigator.msSaveOrOpenBlob(t(C,O),w);else if(r(C))i(C,w,O);else{var U=document.createElement("a");U.href=C,U.target="_blank",setTimeout(function(){a(U)})}}:function(C,w,O,U){if(U=U||open("","_blank"),U&&(U.document.title=U.document.body.innerText="downloading..."),typeof C=="string")return i(C,w,O);var K=C.type==="application/octet-stream",j=/constructor/i.test(l.HTMLElement)||l.safari,W=/CriOS\/[\d]+/.test(navigator.userAgent);if((W||K&&j||o)&&typeof FileReader<"u"){var Y=new FileReader;Y.onloadend=function(){var oe=Y.result;oe=W?oe:oe.replace(/^data:[^;]*;/,"data:attachment/file;"),U?U.location.href=oe:location=oe,U=null},Y.readAsDataURL(C)}else{var te=l.URL||l.webkitURL,J=te.createObjectURL(C);U?U.location=J:location.href=J,U=null,setTimeout(function(){te.revokeObjectURL(J)},4e4)}});l.saveAs=p.saveAs=p,n.exports=p})}(Px)),Px.exports}var SK=Nhe();const Ghe="5.7.1",Whe="get_your_own_OpIi9ZULNHzrESv6T2vL",Qhe="b71f7f0ba4064f5eb9e903859a9cf5c6",Yhe="pk.put_your_api_key_here7bb23dffeb4",oG={openmaptiles:Whe,thunderforest:Qhe,locationiq:Yhe};function Vn(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="16e079a55cdd4175ffeada8708d6c49d219f1229",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:14,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:15,column:2},end:{line:15,column:15}},5:{start:{line:18,column:24},end:{line:22,column:4}},6:{start:{line:19,column:25},end:{line:19,column:37}},7:{start:{line:20,column:4},end:{line:20,column:36}},8:{start:{line:21,column:4},end:{line:21,column:24}},9:{start:{line:23,column:2},end:{line:26,column:4}},10:{start:{line:29,column:2},end:{line:32,column:4}},11:{start:{line:35,column:2},end:{line:35,column:69}},12:{start:{line:38,column:2},end:{line:42,column:3}},13:{start:{line:38,column:15},end:{line:38,column:16}},14:{start:{line:39,column:4},end:{line:41,column:5}},15:{start:{line:40,column:6},end:{line:40,column:15}},16:{start:{line:43,column:2},end:{line:43,column:14}},17:{start:{line:46,column:19},end:{line:46,column:42}},18:{start:{line:47,column:20},end:{line:47,column:67}},19:{start:{line:48,column:2},end:{line:50,column:3}},20:{start:{line:49,column:4},end:{line:49,column:37}},21:{start:{line:51,column:2},end:{line:51,column:21}},22:{start:{line:54,column:17},end:{line:54,column:45}},23:{start:{line:55,column:2},end:{line:55,column:31}},24:{start:{line:55,column:15},end:{line:55,column:31}},25:{start:{line:56,column:2},end:{line:56,column:57}},26:{start:{line:56,column:41},end:{line:56,column:57}},27:{start:{line:57,column:23},end:{line:57,column:33}},28:{start:{line:58,column:2},end:{line:64,column:3}},29:{start:{line:59,column:4},end:{line:59,column:37}},30:{start:{line:60,column:9},end:{line:64,column:3}},31:{start:{line:61,column:4},end:{line:61,column:30}},32:{start:{line:62,column:9},end:{line:64,column:3}},33:{start:{line:63,column:4},end:{line:63,column:34}},34:{start:{line:65,column:22},end:{line:65,column:68}},35:{start:{line:66,column:2},end:{line:68,column:3}},36:{start:{line:67,column:4},end:{line:67,column:20}},37:{start:{line:70,column:2},end:{line:74,column:3}},38:{start:{line:71,column:4},end:{line:71,column:55}},39:{start:{line:73,column:4},end:{line:73,column:57}},40:{start:{line:75,column:25},end:{line:81,column:3}},41:{start:{line:82,column:23},end:{line:85,column:3}},42:{start:{line:86,column:2},end:{line:86,column:22}},43:{start:{line:89,column:21},end:{line:89,column:29}},44:{start:{line:90,column:2},end:{line:92,column:5}},45:{start:{line:91,column:4},end:{line:91,column:76}},46:{start:{line:93,column:2},end:{line:101,column:3}},47:{start:{line:94,column:27},end:{line:94,column:73}},48:{start:{line:95,column:4},end:{line:100,column:5}},49:{start:{line:96,column:6},end:{line:99,column:8}},50:{start:{line:102,column:2},end:{line:102,column:22}},51:{start:{line:105,column:26},end:{line:107,column:3}},52:{start:{line:108,column:2},end:{line:108,column:63}},53:{start:{line:109,column:2},end:{line:109,column:64}},54:{start:{line:110,column:2},end:{line:110,column:57}},55:{start:{line:111,column:2},end:{line:111,column:61}},56:{start:{line:112,column:2},end:{line:115,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:16,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:17,column:9},end:{line:17,column:31}},loc:{start:{line:17,column:39},end:{line:27,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:41},end:{line:18,column:42}},loc:{start:{line:18,column:52},end:{line:22,column:3}},line:18},4:{name:"ensureHasNoRefs",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:32},end:{line:33,column:1}},line:28},5:{name:"ensureStyleValidity",decl:{start:{line:34,column:9},end:{line:34,column:28}},loc:{start:{line:34,column:36},end:{line:36,column:1}},line:34},6:{name:"indexOfLayer",decl:{start:{line:37,column:9},end:{line:37,column:21}},loc:{start:{line:37,column:39},end:{line:44,column:1}},line:37},7:{name:"getAccessToken",decl:{start:{line:45,column:9},end:{line:45,column:23}},loc:{start:{line:45,column:52},end:{line:52,column:1}},line:45},8:{name:"replaceSourceAccessToken",decl:{start:{line:53,column:9},end:{line:53,column:33}},loc:{start:{line:53,column:67},end:{line:87,column:1}},line:53},9:{name:"replaceAccessTokens",decl:{start:{line:88,column:9},end:{line:88,column:28}},loc:{start:{line:88,column:50},end:{line:103,column:1}},line:88},10:{name:"(anonymous_10)",decl:{start:{line:90,column:40},end:{line:90,column:41}},loc:{start:{line:90,column:56},end:{line:92,column:3}},line:90},11:{name:"stripAccessTokens",decl:{start:{line:104,column:9},end:{line:104,column:26}},loc:{start:{line:104,column:37},end:{line:116,column:1}},line:104}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},3:{loc:{start:{line:46,column:19},end:{line:46,column:42}},type:"binary-expr",locations:[{start:{line:46,column:19},end:{line:46,column:36}},{start:{line:46,column:40},end:{line:46,column:42}}],line:46},4:{loc:{start:{line:48,column:2},end:{line:50,column:3}},type:"if",locations:[{start:{line:48,column:2},end:{line:50,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:48,column:6},end:{line:48,column:40}},type:"binary-expr",locations:[{start:{line:48,column:6},end:{line:48,column:24}},{start:{line:48,column:28},end:{line:48,column:40}}],line:48},6:{loc:{start:{line:53,column:56},end:{line:53,column:65}},type:"default-arg",locations:[{start:{line:53,column:63},end:{line:53,column:65}}],line:53},7:{loc:{start:{line:55,column:2},end:{line:55,column:31}},type:"if",locations:[{start:{line:55,column:2},end:{line:55,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},8:{loc:{start:{line:56,column:2},end:{line:56,column:57}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:56,column:6},end:{line:56,column:39}},type:"binary-expr",locations:[{start:{line:56,column:6},end:{line:56,column:24}},{start:{line:56,column:28},end:{line:56,column:39}}],line:56},10:{loc:{start:{line:58,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:58,column:2},end:{line:64,column:3}},{start:{line:60,column:9},end:{line:64,column:3}}],line:58},11:{loc:{start:{line:58,column:6},end:{line:58,column:89}},type:"binary-expr",locations:[{start:{line:58,column:6},end:{line:58,column:46}},{start:{line:58,column:50},end:{line:58,column:89}}],line:58},12:{loc:{start:{line:60,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:60,column:9},end:{line:64,column:3}},{start:{line:62,column:9},end:{line:64,column:3}}],line:60},13:{loc:{start:{line:60,column:13},end:{line:60,column:70}},type:"binary-expr",locations:[{start:{line:60,column:13},end:{line:60,column:28}},{start:{line:60,column:32},end:{line:60,column:70}}],line:60},14:{loc:{start:{line:62,column:9},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:9},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},15:{loc:{start:{line:62,column:13},end:{line:62,column:70}},type:"binary-expr",locations:[{start:{line:62,column:13},end:{line:62,column:28}},{start:{line:62,column:32},end:{line:62,column:70}}],line:62},16:{loc:{start:{line:66,column:2},end:{line:68,column:3}},type:"if",locations:[{start:{line:66,column:2},end:{line:68,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66},17:{loc:{start:{line:70,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:70,column:2},end:{line:74,column:3}},{start:{line:72,column:9},end:{line:74,column:3}}],line:70},18:{loc:{start:{line:88,column:39},end:{line:88,column:48}},type:"default-arg",locations:[{start:{line:88,column:46},end:{line:88,column:48}}],line:88},19:{loc:{start:{line:93,column:2},end:{line:101,column:3}},type:"if",locations:[{start:{line:93,column:2},end:{line:101,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},20:{loc:{start:{line:93,column:6},end:{line:93,column:114}},type:"binary-expr",locations:[{start:{line:93,column:6},end:{line:93,column:21}},{start:{line:93,column:26},end:{line:93,column:69}},{start:{line:93,column:73},end:{line:93,column:113}}],line:93},21:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0],19:[0,0],20:[0,0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAInB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAuE;AAC1F,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AAAA,EACxB;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAAiC;AAC/D,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAAiC;AACxD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAqD;AAChF,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AACpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO,gBAAgB,kCAAkC;AACzD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16e079a55cdd4175ffeada8708d6c49d219f1229"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Vn=function(){return l},l}Vn();const qhe=(Vn().s[0]++,sG({version:8,sources:{},layers:[]}));function aG(){return Vn().f[0]++,Vn().s[1]++,Math.random().toString(36).substring(2,9)}function Hhe(n){return Vn().f[1]++,Vn().s[2]++,Vn().b[1][0]++,!("id"in n)||(Vn().b[1][1]++,!n.id)?(Vn().b[0][0]++,Vn().s[3]++,n.id=aG()):Vn().b[0][1]++,Vn().s[4]++,n}function Vhe(n){Vn().f[2]++;const e=(Vn().s[5]++,n.layers.map(t=>{Vn().f[3]++;const i=(Vn().s[6]++,{...t});return Vn().s[7]++,delete i.interactive,Vn().s[8]++,i}));return Vn().s[9]++,{...n,layers:e}}function $he(n){return Vn().f[4]++,Vn().s[10]++,{...n,layers:DB(n.layers)}}function sG(n){return Vn().f[5]++,Vn().s[11]++,Vhe($he(Hhe(n)))}function Zhe(n,e){Vn().f[6]++,Vn().s[12]++;for(let t=(Vn().s[13]++,0);t<n.length;t++){if(Vn().s[14]++,n[t].id===e)return Vn().b[2][0]++,Vn().s[15]++,t;Vn().b[2][1]++}return Vn().s[16]++,null}function n7(n,e,t){Vn().f[7]++;const i=(Vn().s[17]++,Vn().b[3][0]++,e.metadata||(Vn().b[3][1]++,{}));let r=(Vn().s[18]++,i[`maputnik:${n}_access_token`]);return Vn().s[19]++,Vn().b[5][0]++,t.allowFallback&&(Vn().b[5][1]++,!r)?(Vn().b[4][0]++,Vn().s[20]++,r=oG[n]):Vn().b[4][1]++,Vn().s[21]++,r}function Xhe(n,e,t=(Vn().b[6][0]++,{})){Vn().f[8]++;const i=(Vn().s[22]++,n.sources[e]);if(Vn().s[23]++,i)Vn().b[7][1]++;else return Vn().b[7][0]++,Vn().s[24]++,n;if(Vn().s[25]++,Vn().b[9][0]++,!("url"in i)||(Vn().b[9][1]++,!i.url))return Vn().b[8][0]++,Vn().s[26]++,n;Vn().b[8][1]++;let r=(Vn().s[27]++,e);Vn().s[28]++,Vn().b[11][0]++,e==="thunderforest_transport"||(Vn().b[11][1]++,e==="thunderforest_outdoors")?(Vn().b[10][0]++,Vn().s[29]++,r="thunderforest"):(Vn().b[10][1]++,Vn().s[30]++,Vn().b[13][0]++,"url"in i&&(Vn().b[13][1]++,i.url?.match(/\.stadiamaps\.com/))?(Vn().b[12][0]++,Vn().s[31]++,r="stadia"):(Vn().b[12][1]++,Vn().s[32]++,Vn().b[15][0]++,"url"in i&&(Vn().b[15][1]++,i.url?.match(/\.locationiq\.com/))?(Vn().b[14][0]++,Vn().s[33]++,r="locationiq"):Vn().b[14][1]++));const a=(Vn().s[34]++,n7(r,n,t));if(Vn().s[35]++,a)Vn().b[16][1]++;else return Vn().b[16][0]++,Vn().s[36]++,n;let l;Vn().s[37]++,r=="stadia"?(Vn().b[17][0]++,Vn().s[38]++,l=`${i.url}?api_key=${a}`):(Vn().b[17][1]++,Vn().s[39]++,l=i.url.replace("{key}",a));const o=(Vn().s[40]++,{...n.sources,[e]:{...i,url:l}}),p=(Vn().s[41]++,{...n,sources:o});return Vn().s[42]++,p}function Jhe(n,e=(Vn().b[18][0]++,{})){Vn().f[9]++;let t=(Vn().s[43]++,n);if(Vn().s[44]++,Object.keys(n.sources).forEach(i=>{Vn().f[10]++,Vn().s[45]++,t=Xhe(t,i,e)}),Vn().s[46]++,Vn().b[20][0]++,n.glyphs&&(Vn().b[20][1]++,n.glyphs.match(/\.tilehosting\.com/)||(Vn().b[20][2]++,n.glyphs.match(/\.maptiler\.com/)))){Vn().b[19][0]++;const i=(Vn().s[47]++,n7("openmaptiles",n,e));Vn().s[48]++,i?(Vn().b[21][0]++,Vn().s[49]++,t={...t,glyphs:n.glyphs.replace("{key}",i)}):Vn().b[21][1]++}else Vn().b[19][1]++;return Vn().s[50]++,t}function ede(n){Vn().f[11]++;const e=(Vn().s[51]++,{...n.metadata});return Vn().s[52]++,delete e["maputnik:openmaptiles_access_token"],Vn().s[53]++,delete e["maputnik:thunderforest_access_token"],Vn().s[54]++,delete e["maputnik:stadia_access_token"],Vn().s[55]++,delete e["maputnik:locationiq_access_token"],Vn().s[56]++,{...n,metadata:e}}const qd={ensureStyleValidity:sG,emptyStyle:qhe,indexOfLayer:Zhe,generateId:aG,getAccessToken:n7,replaceAccessTokens:Jhe,stripAccessTokens:ede};function Ki(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",e="0479ae849bf143a83f826f9fdcad7b323ec1b109",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:188,column:6}},46:{start:{line:191,column:20},end:{line:191,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:189,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:167,column:24},end:{line:167,column:58}},type:"binary-expr",locations:[{start:{line:167,column:24},end:{line:167,column:52}},{start:{line:167,column:56},end:{line:167,column:58}}],line:167},10:{loc:{start:{line:177,column:12},end:{line:180,column:16}},type:"binary-expr",locations:[{start:{line:177,column:12},end:{line:177,column:39}},{start:{line:177,column:59},end:{line:180,column:16}}],line:177}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AACrB,SAAQ,OAAO,cAAa;AAC5B,SAA8B,uBAAsB;AAEpD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAIhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,wBAAwB;AAAA,gBAC5C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,kCAAkC;AAAA,gBACrF,UAAU,KAAK,uBAAuB,KAAK,MAAM,kCAAkC;AAAA;AAAA,YACrF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0479ae849bf143a83f826f9fdcad7b323ec1b109"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ki=function(){return l},l}Ki();const EK=(Ki().s[0]++,Ghe),BK=(Ki().s[1]++,typeof window.showSaveFilePicker=="function");class tde extends ni.Component{tokenizedStyle(){return Ki().f[0]++,Ki().s[2]++,aV(qd.stripAccessTokens(qd.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Ki().f[1]++,Ki().s[3]++,this.props.mapStyle.name?(Ki().b[0][0]++,Ki().s[4]++,zhe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Ki().b[0][1]++,Ki().s[5]++,this.props.mapStyle.id)}createHtml(){Ki().f[2]++;const e=(Ki().s[6]++,this.tokenizedStyle()),t=(Ki().s[7]++,Ki().b[1][0]++,this.props.mapStyle.name||(Ki().b[1][1]++,this.props.t("Map"))),i=(Ki().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${EK}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${EK}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),r=(Ki().s[9]++,new Blob([i],{type:"text/html;charset=utf-8"})),a=(Ki().s[10]++,this.exportName());Ki().s[11]++,SK.saveAs(r,a+".html")}async saveStyle(){Ki().f[3]++;const e=(Ki().s[12]++,this.tokenizedStyle());if(Ki().s[13]++,BK)Ki().b[2][1]++;else{Ki().b[2][0]++;const r=(Ki().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),a=(Ki().s[15]++,this.exportName());Ki().s[16]++,SK.saveAs(r,a+".json"),Ki().s[17]++;return}let t=(Ki().s[18]++,this.props.fileHandle);if(Ki().s[19]++,t==null)if(Ki().b[3][0]++,Ki().s[20]++,t=await this.createFileHandle(),Ki().s[21]++,this.props.onSetFileHandle(t),Ki().s[22]++,t==null){Ki().b[4][0]++,Ki().s[23]++;return}else Ki().b[4][1]++;else Ki().b[3][1]++;const i=(Ki().s[24]++,await t.createWritable());Ki().s[25]++,await i.write(e),Ki().s[26]++,await i.close(),Ki().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Ki().f[4]++;const e=(Ki().s[28]++,this.tokenizedStyle()),t=(Ki().s[29]++,await this.createFileHandle());if(Ki().s[30]++,this.props.onSetFileHandle(t),Ki().s[31]++,t==null){Ki().b[5][0]++,Ki().s[32]++;return}else Ki().b[5][1]++;const i=(Ki().s[33]++,await t.createWritable());Ki().s[34]++,await i.write(e),Ki().s[35]++,await i.close(),Ki().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Ki().f[5]++;const e=(Ki().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Ki().s[38]++,await window.showSaveFilePicker(e));return Ki().s[39]++,this.props.onSetFileHandle(t),Ki().s[40]++,t}changeMetadataProperty(e,t){Ki().f[6]++;const i=(Ki().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Ki().s[42]++,this.props.onStyleChanged(i)}render(){Ki().f[7]++;const e=(Ki().s[43]++,this.props.t),t=(Ki().s[44]++,rG(e));return Ki().s[45]++,Ae.jsx(jg,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:e("Save Style")}),Ae.jsx("p",{children:e("Save the JSON style to your computer.")}),Ae.jsxs("div",{children:[Ae.jsx(fp,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Ki().b[6][0]++,this.props.mapStyle.metadata||(Ki().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),Ae.jsx(fp,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Ki().b[7][0]++,this.props.mapStyle.metadata||(Ki().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),Ae.jsx(fp,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Ki().b[8][0]++,this.props.mapStyle.metadata||(Ki().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")}),Ae.jsx(fp,{label:t.maputnik.locationiq_access_token.label,fieldSpec:t.maputnik.locationiq_access_token,value:(Ki().b[9][0]++,this.props.mapStyle.metadata||(Ki().b[9][1]++,{}))["maputnik:locationiq_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:locationiq_access_token")})]}),Ae.jsxs("div",{className:"maputnik-modal-export-buttons",children:[Ae.jsxs(nl,{onClick:this.saveStyle.bind(this),children:[Ae.jsx(E6,{}),e("Save")]}),(Ki().b[10][0]++,BK&&(Ki().b[10][1]++,Ae.jsxs(nl,{onClick:this.saveStyleAs.bind(this),children:[Ae.jsx(E6,{}),e("Save as")]}))),Ae.jsxs(nl,{onClick:this.createHtml.bind(this),children:[Ae.jsx(V$,{}),e("Create HTML")]})]})]})})}}const nde=(Ki().s[46]++,ls()(tde));function X_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="d4204cb1114c57682afd09034f9cc8268e27db52",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:4,column:26},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:127}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:26},end:{line:4,column:27}},loc:{start:{line:4,column:37},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAUM;AAVN,OAAO,uBAAsD;AAC7D,OAAO,cAAc;AAMrB,MAAM,oBAAsD,CAAC,UAAU;AACrE,SACE,oBAAC,YAAS,OAAO,MAAM,OACrB,8BAAC,qBAAmB,GAAG,OAAO,GAChC;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4204cb1114c57682afd09034f9cc8268e27db52"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return X_=function(){return l},l}X_();X_().s[0]++;const lG=n=>(X_().f[0]++,X_().s[1]++,Ae.jsx(Cg,{label:n.label,children:Ae.jsx(Dx,{...n})}));function J_(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="10be4a5b6db1d1fa2555f9b6247244050c0b65b8",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:4,column:22},end:{line:6,column:1}},1:{start:{line:5,column:2},end:{line:5,column:120}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:22},end:{line:4,column:23}},loc:{start:{line:4,column:33},end:{line:6,column:1}},line:4}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAYM;AAZN,OAAO,WAAW;AAClB,OAAO,mBAA8C;AAQrD,MAAM,gBAA8C,CAAC,UAAU;AAC7D,SACE,oBAAC,SAAM,OAAO,MAAM,OAClB,8BAAC,iBAAe,GAAG,OAAO,GAC5B;AAEJ;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10be4a5b6db1d1fa2555f9b6247244050c0b65b8"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return J_=function(){return l},l}J_();J_().s[0]++;const ide=n=>(J_().f[0]++,J_().s[1]++,Ae.jsx(Us,{label:n.label,children:Ae.jsx(ZN,{...n})}));function jn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",e="1f220127d89aec18a8d03a025096d2965f87dac7",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:4},end:{line:268,column:9}},41:{start:{line:261,column:29},end:{line:264,column:12}},42:{start:{line:273,column:14},end:{line:273,column:26}},43:{start:{line:274,column:24},end:{line:280,column:5}},44:{start:{line:281,column:4},end:{line:345,column:5}},45:{start:{line:283,column:8},end:{line:283,column:79}},46:{start:{line:285,column:8},end:{line:285,column:85}},47:{start:{line:287,column:8},end:{line:287,column:77}},48:{start:{line:289,column:8},end:{line:289,column:76}},49:{start:{line:291,column:8},end:{line:291,column:77}},50:{start:{line:293,column:8},end:{line:305,column:13}},51:{start:{line:298,column:36},end:{line:301,column:14}},52:{start:{line:307,column:8},end:{line:307,column:77}},53:{start:{line:309,column:8},end:{line:336,column:13}},54:{start:{line:315,column:38},end:{line:318,column:16}},55:{start:{line:329,column:38},end:{line:332,column:16}},56:{start:{line:338,column:8},end:{line:338,column:76}},57:{start:{line:340,column:8},end:{line:340,column:74}},58:{start:{line:342,column:8},end:{line:342,column:74}},59:{start:{line:344,column:8},end:{line:344,column:20}},60:{start:{line:348,column:31},end:{line:348,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:269,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:261,column:20},end:{line:261,column:21}},loc:{start:{line:261,column:29},end:{line:264,column:12}},line:261},26:{name:"(anonymous_26)",decl:{start:{line:272,column:2},end:{line:272,column:3}},loc:{start:{line:272,column:11},end:{line:346,column:3}},line:272},27:{name:"(anonymous_27)",decl:{start:{line:298,column:22},end:{line:298,column:23}},loc:{start:{line:298,column:36},end:{line:301,column:14}},line:298},28:{name:"(anonymous_28)",decl:{start:{line:315,column:24},end:{line:315,column:25}},loc:{start:{line:315,column:38},end:{line:318,column:16}},line:315},29:{name:"(anonymous_29)",decl:{start:{line:329,column:24},end:{line:329,column:25}},loc:{start:{line:329,column:38},end:{line:332,column:16}},line:329}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:263,column:17},end:{line:263,column:72}},type:"cond-expr",locations:[{start:{line:263,column:48},end:{line:263,column:51}},{start:{line:263,column:54},end:{line:263,column:72}}],line:263},4:{loc:{start:{line:281,column:4},end:{line:345,column:5}},type:"switch",locations:[{start:{line:282,column:6},end:{line:283,column:79}},{start:{line:284,column:6},end:{line:285,column:85}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:289,column:76}},{start:{line:290,column:6},end:{line:291,column:77}},{start:{line:292,column:6},end:{line:305,column:13}},{start:{line:306,column:6},end:{line:307,column:77}},{start:{line:308,column:6},end:{line:336,column:13}},{start:{line:337,column:6},end:{line:338,column:76}},{start:{line:339,column:6},end:{line:340,column:74}},{start:{line:341,column:6},end:{line:342,column:74}},{start:{line:343,column:6},end:{line:344,column:20}}],line:281},5:{loc:{start:{line:302,column:19},end:{line:302,column:86}},type:"binary-expr",locations:[{start:{line:302,column:19},end:{line:302,column:45}},{start:{line:302,column:49},end:{line:302,column:86}}],line:302},6:{loc:{start:{line:319,column:21},end:{line:319,column:92}},type:"binary-expr",locations:[{start:{line:319,column:21},end:{line:319,column:47}},{start:{line:319,column:51},end:{line:319,column:92}}],line:319},7:{loc:{start:{line:333,column:21},end:{line:333,column:92}},type:"binary-expr",locations:[{start:{line:333,column:21},end:{line:333,column:47}},{start:{line:333,column:51},end:{line:333,column:92}}],line:333}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA6BW,SACL,KADK;AA7BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,SAA+B,uBAAuB;AAGtD,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAc1B,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACtB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAClB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1f220127d89aec18a8d03a025096d2965f87dac7"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return jn=function(){return l},l}jn();class AE extends ni.Component{render(){jn().f[0]++;const e=(jn().s[0]++,this.props.t);return jn().s[1]++,Ae.jsxs("div",{children:[Ae.jsx(jv,{label:e("TileJSON URL"),fieldSpec:$a.source_vector.url,value:this.props.source.url,onChange:t=>(jn().f[1]++,jn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class cE extends ni.Component{changeTileUrls(e){jn().f[2]++,jn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){jn().f[3]++;const e=(jn().s[4]++,jn().b[0][0]++,this.props.source.tiles||(jn().b[0][1]++,[]));return jn().s[5]++,Ae.jsx(lG,{label:this.props.t("Tile URL"),fieldSpec:$a.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){jn().f[4]++;const e=(jn().s[6]++,this.props.t);return jn().s[7]++,Ae.jsxs("div",{children:[this.renderTileUrls(),Ae.jsx($2,{label:e("Scheme Type"),fieldSpec:$a.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(jn().f[5]++,jn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),Ae.jsx($p,{label:e("Min Zoom"),fieldSpec:$a.source_vector.minzoom,value:(jn().b[1][0]++,this.props.source.minzoom||(jn().b[1][1]++,0)),onChange:t=>(jn().f[6]++,jn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),Ae.jsx($p,{label:e("Max Zoom"),fieldSpec:$a.source_vector.maxzoom,value:(jn().b[2][0]++,this.props.source.maxzoom||(jn().b[2][1]++,22)),onChange:t=>(jn().f[7]++,jn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}jn().s[11]++;const uG=n=>(jn().f[8]++,jn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class rde extends ni.Component{render(){jn().f[9]++;const e=(jn().s[13]++,this.props.t);jn().s[14]++;const t=(i,r)=>{jn().f[10]++;const a=(jn().s[15]++,this.props.source.coordinates.slice(0));jn().s[16]++,a[i]=r,jn().s[17]++,this.props.onChange({...this.props.source,coordinates:a})};return jn().s[18]++,Ae.jsxs("div",{children:[Ae.jsx(jv,{label:e("Image URL"),fieldSpec:$a.source_image.url,value:this.props.source.url,onChange:i=>(jn().f[11]++,jn().s[19]++,this.props.onChange({...this.props.source,url:i}))}),uG(e).map(({label:i,key:r},a)=>(jn().f[12]++,jn().s[20]++,Ae.jsx(B3,{label:i,length:2,type:"number",value:this.props.source.coordinates[a],default:[0,0],onChange:l=>(jn().f[13]++,jn().s[21]++,t(a,l))},r)))]})}}class ode extends ni.Component{render(){jn().f[14]++;const e=(jn().s[22]++,this.props.t);jn().s[23]++;const t=(r,a)=>{jn().f[15]++;const l=(jn().s[24]++,this.props.source.coordinates.slice(0));jn().s[25]++,l[r]=a,jn().s[26]++,this.props.onChange({...this.props.source,coordinates:l})};jn().s[27]++;const i=r=>{jn().f[16]++,jn().s[28]++,this.props.onChange({...this.props.source,urls:r})};return jn().s[29]++,Ae.jsxs("div",{children:[Ae.jsx(lG,{label:e("Video URL"),fieldSpec:$a.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:i}),uG(e).map(({label:r,key:a},l)=>(jn().f[17]++,jn().s[30]++,Ae.jsx(B3,{label:r,length:2,type:"number",value:this.props.source.coordinates[l],default:[0,0],onChange:o=>(jn().f[18]++,jn().s[31]++,t(l,o))},a)))]})}}class ade extends ni.Component{render(){jn().f[19]++;const e=(jn().s[32]++,this.props.t);return jn().s[33]++,Ae.jsx(jv,{label:e("GeoJSON URL"),fieldSpec:$a.source_geojson.data,value:this.props.source.data,onChange:t=>(jn().f[20]++,jn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class sde extends ni.Component{render(){jn().f[21]++;const e=(jn().s[35]++,this.props.t);return jn().s[36]++,Ae.jsxs("div",{children:[Ae.jsx(Us,{label:e("GeoJSON"),fieldSpec:$a.source_geojson.data,children:Ae.jsx(T8,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{jn().f[22]++,jn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),Ae.jsx(ide,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{jn().f[23]++,jn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class lde extends ni.Component{render(){jn().f[24]++;const e=(jn().s[39]++,this.props.t);return jn().s[40]++,Ae.jsxs("div",{children:[Ae.jsx(jv,{label:e("PMTiles URL"),fieldSpec:$a.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(jn().f[25]++,jn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(jn().b[3][0]++,t):(jn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class ude extends ni.Component{render(){jn().f[26]++;const e=(jn().s[42]++,this.props.t),t=(jn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(jn().s[44]++,this.props.mode){case"geojson_url":return jn().b[4][0]++,jn().s[45]++,Ae.jsx(ade,{...t});case"geojson_json":return jn().b[4][1]++,jn().s[46]++,Ae.jsx(sde,{...t});case"tilejson_vector":return jn().b[4][2]++,jn().s[47]++,Ae.jsx(AE,{...t});case"tile_vector":return jn().b[4][3]++,jn().s[48]++,Ae.jsx(cE,{...t});case"tilejson_raster":return jn().b[4][4]++,jn().s[49]++,Ae.jsx(AE,{...t});case"tile_raster":return jn().b[4][5]++,jn().s[50]++,Ae.jsx(cE,{...t,children:Ae.jsx($p,{label:e("Tile Size"),fieldSpec:$a.source_raster.tileSize,onChange:i=>(jn().f[27]++,jn().s[51]++,this.props.onChange({...this.props.source,tileSize:i})),value:(jn().b[5][0]++,this.props.source.tileSize||(jn().b[5][1]++,$a.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return jn().b[4][6]++,jn().s[52]++,Ae.jsx(AE,{...t});case"tilexyz_raster-dem":return jn().b[4][7]++,jn().s[53]++,Ae.jsxs(cE,{...t,children:[Ae.jsx($p,{label:e("Tile Size"),fieldSpec:$a.source_raster_dem.tileSize,onChange:i=>(jn().f[28]++,jn().s[54]++,this.props.onChange({...this.props.source,tileSize:i})),value:(jn().b[6][0]++,this.props.source.tileSize||(jn().b[6][1]++,$a.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),Ae.jsx($2,{label:e("Encoding"),fieldSpec:$a.source_raster_dem.encoding,options:Object.keys($a.source_raster_dem.encoding.values),onChange:i=>(jn().f[29]++,jn().s[55]++,this.props.onChange({...this.props.source,encoding:i})),value:(jn().b[7][0]++,this.props.source.encoding||(jn().b[7][1]++,$a.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return jn().b[4][8]++,jn().s[56]++,Ae.jsx(lde,{...t});case"image":return jn().b[4][9]++,jn().s[57]++,Ae.jsx(rde,{...t});case"video":return jn().b[4][10]++,jn().s[58]++,Ae.jsx(ode,{...t});default:return jn().b[4][11]++,jn().s[59]++,null}}}const AG=(jn().s[60]++,ls()(ude));function nm(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="871503159abbdc3b3ae7b24cdaefb6478172c58b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAGO,gBAAS,aAAa,UAAoC,UAAkB;AACjF,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAAoC,UAAkB,QAA6B;AAC3G,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAAoC,UAAkB,QAA6B;AAC9G,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"871503159abbdc3b3ae7b24cdaefb6478172c58b"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return nm=function(){return l},l}nm();function Ade(n,e){nm().f[0]++;const t=(nm().s[0]++,{...n.sources});return nm().s[1]++,delete t[e],nm().s[2]++,{...n,sources:t}}function OK(n,e,t){return nm().f[1]++,nm().s[3]++,cG(n,e,t)}function cG(n,e,t){nm().f[2]++;const i=(nm().s[4]++,{...n.sources,[e]:t});return nm().s[5]++,{...n,sources:i}}const cde={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},hde={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},dde={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},fde={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},pde={type:"vector",url:"https://tiles.locationiq.com/v3/pbf/tiles.json?key={key}",title:"LocationIQ"},IK={openmaptiles:cde,thunderforest_transport:hde,thunderforest_outdoors:dde,open_zoomstack:fde,locationiq:pde};function cn(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",e="30dc2f79b5d8eab063b35a7a783386d299d39465",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalSources.tsx"],names:[],mappings:"AAiCU,cACA,YADA;AAjCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA+B,uBAAuB;AAEtD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAAiD;AAExD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAW1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACX,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACnB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"30dc2f79b5d8eab063b35a7a783386d299d39465"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return cn=function(){return l},l}cn();class mde extends ni.Component{render(){return cn().f[0]++,cn().s[0]++,Ae.jsx("div",{className:"maputnik-public-source",children:Ae.jsxs(nl,{className:"maputnik-public-source-select",onClick:()=>(cn().f[1]++,cn().s[1]++,this.props.onSelect(this.props.id)),children:[Ae.jsxs("div",{className:"maputnik-public-source-info",children:[Ae.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),Ae.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx(nF,{})]})})}}function gde(n){return cn().f[2]++,cn().s[2]++,n.type==="raster"?(cn().b[0][0]++,cn().s[3]++,n.tiles?(cn().b[1][0]++,cn().s[4]++,"tile_raster"):(cn().b[1][1]++,cn().s[5]++,"tilejson_raster")):(cn().b[0][1]++,cn().s[6]++,n.type==="raster-dem"?(cn().b[2][0]++,cn().s[7]++,n.tiles?(cn().b[3][0]++,cn().s[8]++,"tilexyz_raster-dem"):(cn().b[3][1]++,cn().s[9]++,"tilejson_raster-dem")):(cn().b[2][1]++,cn().s[10]++,n.type==="vector"?(cn().b[4][0]++,cn().s[11]++,n.tiles?(cn().b[5][0]++,cn().s[12]++,"tile_vector"):(cn().b[5][1]++,cn().s[13]++,cn().b[7][0]++,n.url&&(cn().b[7][1]++,n.url.startsWith("pmtiles://"))?(cn().b[6][0]++,cn().s[14]++,"pmtiles_vector"):(cn().b[6][1]++,cn().s[15]++,"tilejson_vector"))):(cn().b[4][1]++,cn().s[16]++,n.type==="geojson"?(cn().b[8][0]++,cn().s[17]++,typeof n.data=="string"?(cn().b[9][0]++,cn().s[18]++,"geojson_url"):(cn().b[9][1]++,cn().s[19]++,"geojson_json")):(cn().b[8][1]++,cn().s[20]++,n.type==="image"?(cn().b[10][0]++,cn().s[21]++,"image"):(cn().b[10][1]++,cn().s[22]++,n.type==="video"?(cn().b[11][0]++,cn().s[23]++,"video"):(cn().b[11][1]++,cn().s[24]++,null))))))}class yde extends ni.Component{render(){cn().f[3]++;const e=(cn().s[25]++,this.props.t);return cn().s[26]++,Ae.jsxs("div",{className:"maputnik-active-source-type-editor",children:[Ae.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[Ae.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx(nl,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(cn().f[4]++,cn().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:Ae.jsx(Yv,{})})]}),Ae.jsx("div",{className:"maputnik-active-source-type-editor-content",children:Ae.jsx(AG,{onChange:this.props.onChange,mode:gde(this.props.source),source:this.props.source})})]})}}class vde extends ni.Component{constructor(e){cn().f[5]++,cn().s[28]++,super(e),cn().s[29]++,this.state={mode:"tilejson_vector",sourceId:qd.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(e){cn().f[6]++;const t=(cn().s[30]++,cn().b[12][0]++,(cn().b[13][0]++,this.state||(cn().b[13][1]++,{})).source||(cn().b[12][1]++,{})),{protocol:i}=(cn().s[31]++,window.location);switch(cn().s[32]++,e){case"pmtiles_vector":return cn().b[14][0]++,cn().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return cn().b[14][1]++,cn().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return cn().b[14][2]++,cn().s[35]++,{type:"geojson",cluster:(cn().b[15][0]++,t.cluster||(cn().b[15][1]++,!1)),data:""};case"tilejson_vector":return cn().b[14][3]++,cn().s[36]++,{type:"vector",url:(cn().b[16][0]++,t.url||(cn().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return cn().b[14][4]++,cn().s[37]++,{type:"vector",tiles:(cn().b[17][0]++,t.tiles||(cn().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(cn().b[18][0]++,t.minzoom||(cn().b[18][1]++,0)),maxzoom:(cn().b[19][0]++,t.maxzoom||(cn().b[19][1]++,14)),scheme:(cn().b[20][0]++,t.scheme||(cn().b[20][1]++,"xyz"))};case"tilejson_raster":return cn().b[14][5]++,cn().s[38]++,{type:"raster",url:(cn().b[21][0]++,t.url||(cn().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return cn().b[14][6]++,cn().s[39]++,{type:"raster",tiles:(cn().b[22][0]++,t.tiles||(cn().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(cn().b[23][0]++,t.minzoom||(cn().b[23][1]++,0)),maxzoom:(cn().b[24][0]++,t.maxzoom||(cn().b[24][1]++,14)),scheme:(cn().b[25][0]++,t.scheme||(cn().b[25][1]++,"xyz")),tileSize:(cn().b[26][0]++,t.tileSize||(cn().b[26][1]++,512))};case"tilejson_raster-dem":return cn().b[14][7]++,cn().s[40]++,{type:"raster-dem",url:(cn().b[27][0]++,t.url||(cn().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return cn().b[14][8]++,cn().s[41]++,{type:"raster-dem",tiles:(cn().b[28][0]++,t.tiles||(cn().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(cn().b[29][0]++,t.minzoom||(cn().b[29][1]++,0)),maxzoom:(cn().b[30][0]++,t.maxzoom||(cn().b[30][1]++,14)),tileSize:(cn().b[31][0]++,t.tileSize||(cn().b[31][1]++,512))};case"image":return cn().b[14][9]++,cn().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return cn().b[14][10]++,cn().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return cn().b[14][11]++,cn().s[44]++,{}}}onAdd=(cn().s[45]++,()=>{cn().f[7]++;const{source:e,sourceId:t}=(cn().s[46]++,this.state);cn().s[47]++,this.props.onAdd(t,e)});onChangeSource=(cn().s[48]++,e=>{cn().f[8]++,cn().s[49]++,this.setState({source:e})});render(){cn().f[9]++;const e=(cn().s[50]++,this.props.t),t=(cn().s[51]++,{doc:oa.source_vector.type.doc});return cn().s[52]++,Ae.jsxs("div",{className:"maputnik-add-source",children:[Ae.jsx(fp,{label:e("Source ID"),fieldSpec:{doc:e("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(cn().f[10]++,cn().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),Ae.jsx($2,{label:e("Source Type"),fieldSpec:t,options:[["geojson_json",e("GeoJSON (JSON)")],["geojson_url",e("GeoJSON (URL)")],["tilejson_vector",e("Vector (TileJSON URL)")],["tile_vector",e("Vector (Tile URLs)")],["tilejson_raster",e("Raster (TileJSON URL)")],["tile_raster",e("Raster (Tile URLs)")],["tilejson_raster-dem",e("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",e("Raster DEM (XYZ URLs)")],["pmtiles_vector",e("Vector (PMTiles)")],["image",e("Image")],["video",e("Video")]],onChange:i=>(cn().f[11]++,cn().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),Ae.jsx(AG,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),Ae.jsx(nl,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:e("Add Source")})]})}}class Cde extends ni.Component{stripTitle(e){cn().f[12]++;const t=(cn().s[55]++,{...e});return cn().s[56]++,delete t.title,cn().s[57]++,t}render(){cn().f[13]++;const{t:e,mapStyle:t}=(cn().s[58]++,this.props),i=(cn().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),r=(cn().s[60]++,Object.keys(t.sources).map(l=>{cn().f[14]++;const o=(cn().s[61]++,t.sources[l]);return cn().s[62]++,Ae.jsx(yde,{sourceId:l,source:o,onChange:p=>(cn().f[15]++,cn().s[63]++,this.props.onStyleChanged(cG(t,l,p))),onDelete:()=>(cn().f[16]++,cn().s[64]++,this.props.onStyleChanged(Ade(t,l))),...i},l)})),a=(cn().s[65]++,Object.keys(IK).filter(l=>(cn().f[17]++,cn().s[66]++,!(l in t.sources))).map(l=>{cn().f[18]++;const o=(cn().s[67]++,IK[l]);return cn().s[68]++,Ae.jsx(mde,{id:l,type:o.type,title:o.title,onSelect:()=>(cn().f[19]++,cn().s[69]++,this.props.onStyleChanged(OK(t,l,this.stripTitle(o))))},l)}));return cn().s[70]++,Ae.jsxs(jg,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:e("Active Sources")}),r]}),Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:e("Choose Public Source")}),Ae.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),Ae.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:a})]}),Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:e("Add New Source")}),Ae.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),Ae.jsx(vde,{onAdd:(l,o)=>(cn().f[20]++,cn().s[71]++,this.props.onStyleChanged(OK(t,l,o))),...i})]})]})}}const _de=(cn().s[72]++,ls()(Cde));var vx={},TK;function bde(){if(TK)return vx;TK=1,Object.defineProperty(vx,"__esModule",{value:!0});var n=Object.assign||function(j){for(var W=1;W<arguments.length;W++){var Y=arguments[W];for(var te in Y)Object.prototype.hasOwnProperty.call(Y,te)&&(j[te]=Y[te])}return j},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},t=function(){function j(W,Y){for(var te=0;te<Y.length;te++){var J=Y[te];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(W,J.key,J)}}return function(W,Y,te){return Y&&j(W.prototype,Y),te&&j(W,te),W}}(),i=Ol(),r=p(i),a=O3(),l=o(a);function o(j){return j&&j.__esModule?j:{default:j}}function p(j){if(j&&j.__esModule)return j;var W={};if(j!=null)for(var Y in j)Object.prototype.hasOwnProperty.call(j,Y)&&(W[Y]=j[Y]);return W.default=j,W}function C(j,W){var Y={};for(var te in j)W.indexOf(te)>=0||Object.prototype.hasOwnProperty.call(j,te)&&(Y[te]=j[te]);return Y}function w(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")}function O(j,W){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:j}function U(j,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);j.prototype=Object.create(W&&W.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(j,W):j.__proto__=W)}var K=function(j){U(W,j);function W(Y){w(this,W);var te=O(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,Y));te.handleChange=function(oe){var ne=Array.prototype.slice.call(oe.target.files),$=(te.props.as||"url").toLowerCase();Promise.all(ne.map(function(ae){return new Promise(function(G,ce){var ge=new FileReader;switch(ge.onload=function(ye){G([ye,ae])},$){case"binary":{ge.readAsBinaryString(ae);break}case"buffer":{ge.readAsArrayBuffer(ae);break}case"text":{ge.readAsText(ae);break}case"url":{ge.readAsDataURL(ae);break}}})})).then(function(ae){te.props.onChange(oe,ae)})},te.triggerInput=function(){var oe=l.default.findDOMNode(te._reactFileReaderInput);oe&&oe.click()};var J=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!J.File||!J.FileReader||!J.FileList||!J.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),te}return t(W,[{key:"render",value:function(){var te=this,J=this.props;J.as;var oe=J.children,ne=J.style,$=C(J,["as","children","style"]),ae=oe?{position:"absolute",top:"-9999px"}:{};return r.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:ne},r.createElement("input",n({},$,{type:"file",ref:function(ce){te._reactFileReaderInput=ce},onChange:this.handleChange,onClick:function(){te._reactFileReaderInput.value=null},style:ae})),oe)}}]),W}(r.Component);return vx.default=K,vx}var xde=bde();const Mde=AA(xde);function zm(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",e="14882741b03cd24dba8e21fe7c0f0c38039a7560",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:22,column:6}},2:{start:{line:16,column:28},end:{line:16,column:49}},3:{start:{line:19,column:137},end:{line:19,column:159}},4:{start:{line:25,column:21},end:{line:25,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:23,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:16,column:22},end:{line:16,column:23}},loc:{start:{line:16,column:28},end:{line:16,column:49}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:130},end:{line:19,column:131}},loc:{start:{line:19,column:137},end:{line:19,column:159}},line:19}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalLoading.tsx"],names:[],mappings:"AAkBW,SAOL,KAPK;AAlBX,OAAO,WAAW;AAClB,SAA+B,uBAAuB;AAEtD,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAWlB,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"14882741b03cd24dba8e21fe7c0f0c38039a7560"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return zm=function(){return l},l}zm();class wde extends ni.Component{render(){zm().f[0]++;const e=(zm().s[0]++,this.props.t);return zm().s[1]++,Ae.jsxs(jg,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,title:this.props.title,onOpenToggle:()=>(zm().f[1]++,zm().s[2]++,this.props.onCancel()),children:[Ae.jsx("p",{children:this.props.message}),Ae.jsx("p",{className:"maputnik-dialog__buttons",children:Ae.jsx(nl,{onClick:t=>(zm().f[2]++,zm().s[3]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const Sde=(zm().s[4]++,ls()(wde)),hG=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"aws-hybrid",title:"AWS Hybrid",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Hybrid/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-hybrid.jpg"},{id:"aws-standard",title:"AWS Standard",url:"https://maps.geo.eu-west-1.amazonaws.com/v2/styles/Standard/descriptor?key=v1.public.eyJqdGkiOiJiOTNkYjBlZi04OWUzLTQxMGUtODFhMC0zYjZjZjVmZWZmMDgifYtukap0NBaJpcrS6Vit9j03GJgK9Bn-RSu5UCe3jkdSql2kKp3IEgLPtyLssbmKUdVO11sXddjK3ZOZy8V6QG0olv0K_1tOxyMIe4DAO3IV6H4VzHWiaXlbSakGiEgFLuHBdcfLDeMotye7N6rSRxuZb0CN9ytH9VjLly6-NEBRZezO_qPQyvdTFdeZsARIpL0f9YVpxPxPVvUcAWYCk5LpaPseRCDPrY5SlCdA1ZKqUA4F9RzxSTxB73Fel_SoNDkCNaux1VposBu791-uUpDzUpr7leKckrPXrpZ2hwnFbafVxFV9vq4fLTpB5KoBksuLfGNIwAx1RLLxWuMhE4c.ZGQzZDY2OGQtMWQxMy00ZTEwLWIyZGUtOGVjYzUzMjU3OGE4&color-scheme=Light",thumbnail:"https://maputnik.s3.eu-west-1.amazonaws.com/thumbnails/aws-standard.jpg"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"locationiq-streets",title:"LocationIQ Streets",url:"https://tiles.locationiq.com/v3/streets/vector.json?key={key}",thumbnail:"https://static-assets.locationiq.com/maputnik/locationiq-streets.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function ri(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",e="4894d4bc5e14f1cec6f3dd742c248014b9e1821b",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA+B;AACtC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAsC;AAC7C,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4894d4bc5e14f1cec6f3dd742c248014b9e1821b"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return ri=function(){return l},l}ri();class Ede extends ni.Component{render(){return ri().f[0]++,ri().s[0]++,Ae.jsx("div",{className:"maputnik-public-style",children:Ae.jsxs(nl,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(ri().f[1]++,ri().s[1]++,this.props.onSelect(this.props.url)),children:[Ae.jsxs("div",{className:"maputnik-public-style-header",children:[Ae.jsx("div",{children:this.props.title}),Ae.jsx("span",{className:"maputnik-space"}),Ae.jsx(nF,{})]}),Ae.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class Bde extends ni.Component{constructor(e){ri().f[2]++,ri().s[2]++,super(e),ri().s[3]++,this.state={styleUrl:""}}clearError(){ri().f[3]++,ri().s[4]++,this.setState({error:null})}onCancelActiveRequest(e){ri().f[4]++,ri().s[5]++,e?(ri().b[0][0]++,ri().s[6]++,e.stopPropagation()):ri().b[0][1]++,ri().s[7]++,this.state.activeRequest?(ri().b[1][0]++,ri().s[8]++,this.state.activeRequest.abort(),ri().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):ri().b[1][1]++}onStyleSelect=(ri().s[10]++,e=>{ri().f[5]++,ri().s[11]++,this.clearError();let t=(ri().s[12]++,!1);ri().s[13]++,fetch(e,{mode:"cors",credentials:"same-origin"}).then(function(i){return ri().f[6]++,ri().s[14]++,i.json()}).then(i=>{if(ri().f[7]++,ri().s[15]++,t){ri().b[2][0]++,ri().s[16]++;return}else ri().b[2][1]++;ri().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const r=(ri().s[18]++,qd.ensureStyleValidity(i));ri().s[19]++,console.log("Loaded style ",r.id),ri().s[20]++,this.props.onStyleOpen(r),ri().s[21]++,this.onOpenToggle()}).catch(i=>{ri().f[8]++,ri().s[22]++,this.setState({error:`Failed to load: '${e}'`,activeRequest:null,activeRequestUrl:null}),ri().s[23]++,console.error(i),ri().s[24]++,console.warn("Could not open the style URL",e)}),ri().s[25]++,this.setState({activeRequest:{abort:function(){ri().f[9]++,ri().s[26]++,t=!0}},activeRequestUrl:e})});onSubmitUrl=(ri().s[27]++,e=>{ri().f[10]++,ri().s[28]++,e.preventDefault(),ri().s[29]++,this.onStyleSelect(this.state.styleUrl)});onOpenFile=(ri().s[30]++,async()=>{ri().f[11]++,ri().s[31]++,this.clearError();const e=(ri().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[t]=(ri().s[33]++,await window.showOpenFilePicker(e)),i=(ri().s[34]++,await t.getFile()),r=(ri().s[35]++,await i.text());let a;ri().s[36]++;try{ri().s[37]++,a=JSON.parse(r)}catch(l){ri().s[38]++,this.setState({error:l.toString()}),ri().s[39]++;return}return ri().s[40]++,a=qd.ensureStyleValidity(a),ri().s[41]++,this.props.onStyleOpen(a,t),ri().s[42]++,this.onOpenToggle(),ri().s[43]++,i});onFileChanged=(ri().s[44]++,async(e,t)=>{ri().f[12]++;const[,i]=(ri().s[45]++,t[0]),r=(ri().s[46]++,new FileReader);ri().s[47]++,this.clearError(),ri().s[48]++,r.readAsText(i,"UTF-8"),ri().s[49]++,r.onload=a=>{ri().f[13]++;let l;ri().s[50]++;try{ri().s[51]++,l=JSON.parse(a.target?.result)}catch(o){ri().s[52]++,this.setState({error:o.toString()}),ri().s[53]++;return}ri().s[54]++,l=qd.ensureStyleValidity(l),ri().s[55]++,this.props.onStyleOpen(l),ri().s[56]++,this.onOpenToggle()},ri().s[57]++,r.onerror=a=>(ri().f[14]++,ri().s[58]++,console.log(a.target))});onOpenToggle(){ri().f[15]++,ri().s[59]++,this.setState({styleUrl:""}),ri().s[60]++,this.clearError(),ri().s[61]++,this.props.onOpenToggle()}onChangeUrl=(ri().s[62]++,e=>{ri().f[16]++,ri().s[63]++,this.setState({styleUrl:e})});render(){ri().f[17]++;const e=(ri().s[64]++,this.props.t),t=(ri().s[65]++,hG.map(r=>(ri().f[18]++,ri().s[66]++,Ae.jsx(Ede,{url:r.url,title:r.title,thumbnailUrl:r.thumbnail,onSelect:this.onStyleSelect},r.id))));let i;return ri().s[67]++,this.state.error?(ri().b[3][0]++,ri().s[68]++,i=Ae.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,Ae.jsx("a",{href:"#",onClick:()=>(ri().f[19]++,ri().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):ri().b[3][1]++,ri().s[70]++,Ae.jsxs("div",{children:[Ae.jsxs(jg,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(ri().f[20]++,ri().s[71]++,this.onOpenToggle()),title:e("Open Style"),children:[i,Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:e("Open local Style")}),Ae.jsx("p",{children:e("Open a local JSON style from your computer.")}),Ae.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(ri().b[4][0]++,Ae.jsxs(nl,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[Ae.jsx(TI,{})," ",e("Open Style")]})):(ri().b[4][1]++,Ae.jsx(Mde,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":e("Open Style"),children:Ae.jsxs(nl,{className:"maputnik-upload-button",children:[Ae.jsx(TI,{})," ",e("Open Style")]})}))})]}),Ae.jsx("section",{className:"maputnik-modal-section",children:Ae.jsxs("form",{onSubmit:this.onSubmitUrl,children:[Ae.jsx("h1",{children:e("Load from URL")}),Ae.jsx("p",{children:Ae.jsxs(Ig,{t:e,children:["Load from a URL. Note that the URL must have ",Ae.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),Ae.jsx(e7,{"aria-label":e("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:e("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),Ae.jsx("div",{children:Ae.jsx(nl,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),Ae.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[Ae.jsx("h1",{children:e("Gallery Styles")}),Ae.jsx("p",{children:e("Open one of the publicly available styles to start from.")}),Ae.jsx("div",{className:"maputnik-style-gallery-container",children:t})]})]}),Ae.jsx(Sde,{isOpen:!!this.state.activeRequest,title:e("Loading style"),onCancel:r=>(ri().f[21]++,ri().s[72]++,this.onCancelActiveRequest(r)),message:e("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const Ode=(ri().s[73]++,ls()(Bde));function hp(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",e="56c3984d0ef3534e088a574117d91f5af2db0afb",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"56c3984d0ef3534e088a574117d91f5af2db0afb"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return hp=function(){return l},l}hp();class Ide extends ni.Component{render(){hp().f[0]++;const e=(hp().s[0]++,this.props.t),t=(hp().s[1]++,[{key:Ae.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:Ae.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:Ae.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:Ae.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:Ae.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:Ae.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:Ae.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:Ae.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),i=(hp().s[2]++,[{key:Ae.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:Ae.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:Ae.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:Ae.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:Ae.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:Ae.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("kbd",{children:"Shift"})," + ",Ae.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return hp().s[3]++,Ae.jsx(jg,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:Ae.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[Ae.jsx("p",{children:Ae.jsxs(Ig,{t:e,children:["Press ",Ae.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),Ae.jsx("dl",{children:t.map((r,a)=>(hp().f[1]++,hp().s[4]++,Ae.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[Ae.jsx("dt",{children:r.key},"dt"+a),Ae.jsx("dd",{children:r.text},"dd"+a)]},a)))}),Ae.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),Ae.jsx("ul",{children:i.map((r,a)=>(hp().f[2]++,hp().s[5]++,Ae.jsxs("li",{children:[Ae.jsx("span",{children:r.key})," ",r.text]},a)))})]})})}}const Tde=(hp().s[6]++,ls()(Ide));function DA(){var n="/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",e="c09f0bfde95742e69af0d091b2de9baefbfef43a",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/modals/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAClB,SAAS,OAA6B,uBAAuB;AAE7D,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,OAAO,GAAE;AAAA,YAChB,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c09f0bfde95742e69af0d091b2de9baefbfef43a"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return DA=function(){return l},l}DA();class kde extends ni.Component{render(){DA().f[0]++;const{t:e,mapView:t}=(DA().s[0]++,this.props),i=(DA().s[1]++,Math.round(t.zoom)+1),r=(DA().s[2]++,+t.center.lng.toFixed(5)),a=(DA().s[3]++,+t.center.lat.toFixed(5));return DA().s[4]++,Ae.jsxs(jg,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[Ae.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[Ae.jsx("h1",{children:e("Options")}),(DA().b[0][0]++,this.props.renderer==="mlgljs"&&(DA().b[0][1]++,Ae.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([l,o])=>(DA().f[1]++,DA().s[5]++,Ae.jsx("li",{children:Ae.jsxs("label",{children:[Ae.jsx("input",{type:"checkbox",checked:o,onChange:p=>(DA().f[2]++,DA().s[6]++,this.props.onChangeMaplibreGlDebug(l,p.target.checked))})," ",l]})},l)))}))),(DA().b[1][0]++,this.props.renderer==="ol"&&(DA().b[1][1]++,Ae.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([l,o])=>(DA().f[3]++,DA().s[7]++,Ae.jsx("li",{children:Ae.jsxs("label",{children:[Ae.jsx("input",{type:"checkbox",checked:o,onChange:p=>(DA().f[4]++,DA().s[8]++,this.props.onChangeOpenlayersDebug(l,p.target.checked))})," ",l]})},l)))})))]}),Ae.jsxs("section",{className:"maputnik-modal-section",children:[Ae.jsx("h1",{children:e("Links")}),Ae.jsx("p",{children:Ae.jsxs(Ig,{t:e,children:[Ae.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${i}/${a}/${r}`,children:"Open in OSM"}),". Opens the current view on openstreetmap.org"]})})]})]})}}const Dde=(DA().s[9]++,ls()(kde));var C1={},QC={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var Rde=QC.exports,kK;function Pde(){return kK||(kK=1,function(n,e){(function(t){var i=e&&!e.nodeType&&e,r=n&&!n.nodeType&&n,a=typeof window=="object"&&window;(a.global===a||a.window===a||a.self===a)&&(t=a);var l,o=2147483647,p=36,C=1,w=26,O=38,U=700,K=72,j=128,W="-",Y=/^xn--/,te=/[^\x20-\x7E]/,J=/[\x2E\u3002\uFF0E\uFF61]/g,oe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ne=p-C,$=Math.floor,ae=String.fromCharCode,G;function ce(be){throw new RangeError(oe[be])}function ge(be,Ne){for(var tt=be.length,lt=[];tt--;)lt[tt]=Ne(be[tt]);return lt}function ye(be,Ne){var tt=be.split("@"),lt="";tt.length>1&&(lt=tt[0]+"@",be=tt[1]),be=be.replace(J,".");var kt=be.split("."),gt=ge(kt,Ne).join(".");return lt+gt}function we(be){for(var Ne=[],tt=0,lt=be.length,kt,gt;tt<lt;)kt=be.charCodeAt(tt++),kt>=55296&&kt<=56319&&tt<lt?(gt=be.charCodeAt(tt++),(gt&64512)==56320?Ne.push(((kt&1023)<<10)+(gt&1023)+65536):(Ne.push(kt),tt--)):Ne.push(kt);return Ne}function Oe(be){return ge(be,function(Ne){var tt="";return Ne>65535&&(Ne-=65536,tt+=ae(Ne>>>10&1023|55296),Ne=56320|Ne&1023),tt+=ae(Ne),tt}).join("")}function Se(be){return be-48<10?be-22:be-65<26?be-65:be-97<26?be-97:p}function Ve(be,Ne){return be+22+75*(be<26)-((Ne!=0)<<5)}function xe(be,Ne,tt){var lt=0;for(be=tt?$(be/U):be>>1,be+=$(be/Ne);be>ne*w>>1;lt+=p)be=$(be/ne);return $(lt+(ne+1)*be/(be+O))}function ze(be){var Ne=[],tt=be.length,lt,kt=0,gt=j,St=K,Ut,Fe,Ke,Re,He,bt,_t,Ot,qt;for(Ut=be.lastIndexOf(W),Ut<0&&(Ut=0),Fe=0;Fe<Ut;++Fe)be.charCodeAt(Fe)>=128&&ce("not-basic"),Ne.push(be.charCodeAt(Fe));for(Ke=Ut>0?Ut+1:0;Ke<tt;){for(Re=kt,He=1,bt=p;Ke>=tt&&ce("invalid-input"),_t=Se(be.charCodeAt(Ke++)),(_t>=p||_t>$((o-kt)/He))&&ce("overflow"),kt+=_t*He,Ot=bt<=St?C:bt>=St+w?w:bt-St,!(_t<Ot);bt+=p)qt=p-Ot,He>$(o/qt)&&ce("overflow"),He*=qt;lt=Ne.length+1,St=xe(kt-Re,lt,Re==0),$(kt/lt)>o-gt&&ce("overflow"),gt+=$(kt/lt),kt%=lt,Ne.splice(kt++,0,gt)}return Oe(Ne)}function st(be){var Ne,tt,lt,kt,gt,St,Ut,Fe,Ke,Re,He,bt=[],_t,Ot,qt,Kt;for(be=we(be),_t=be.length,Ne=j,tt=0,gt=K,St=0;St<_t;++St)He=be[St],He<128&&bt.push(ae(He));for(lt=kt=bt.length,kt&&bt.push(W);lt<_t;){for(Ut=o,St=0;St<_t;++St)He=be[St],He>=Ne&&He<Ut&&(Ut=He);for(Ot=lt+1,Ut-Ne>$((o-tt)/Ot)&&ce("overflow"),tt+=(Ut-Ne)*Ot,Ne=Ut,St=0;St<_t;++St)if(He=be[St],He<Ne&&++tt>o&&ce("overflow"),He==Ne){for(Fe=tt,Ke=p;Re=Ke<=gt?C:Ke>=gt+w?w:Ke-gt,!(Fe<Re);Ke+=p)Kt=Fe-Re,qt=p-Re,bt.push(ae(Ve(Re+Kt%qt,0))),Fe=$(Kt/qt);bt.push(ae(Ve(Fe,0))),gt=xe(tt,Ot,lt==kt),tt=0,++lt}++tt,++Ne}return bt.join("")}function Ct(be){return ye(be,function(Ne){return Y.test(Ne)?ze(Ne.slice(4).toLowerCase()):Ne})}function nt(be){return ye(be,function(Ne){return te.test(Ne)?"xn--"+st(Ne):Ne})}if(l={version:"1.4.1",ucs2:{decode:we,encode:Oe},decode:ze,encode:st,toASCII:nt,toUnicode:Ct},i&&r)if(n.exports==i)r.exports=l;else for(G in l)l.hasOwnProperty(G)&&(i[G]=l[G]);else t.punycode=l})(Rde)}(QC,QC.exports)),QC.exports}var hE,DK;function nC(){return DK||(DK=1,hE=TypeError),hE}const Kde={},Ude=Object.freeze(Object.defineProperty({__proto__:null,default:Kde},Symbol.toStringTag,{value:"Module"})),Lde=SB(Ude);var dE,RK;function Z2(){if(RK)return dE;RK=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,i=n&&Map.prototype.forEach,r=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=r&&a&&typeof a.get=="function"?a.get:null,o=r&&Set.prototype.forEach,p=typeof WeakMap=="function"&&WeakMap.prototype,C=p?WeakMap.prototype.has:null,w=typeof WeakSet=="function"&&WeakSet.prototype,O=w?WeakSet.prototype.has:null,U=typeof WeakRef=="function"&&WeakRef.prototype,K=U?WeakRef.prototype.deref:null,j=Boolean.prototype.valueOf,W=Object.prototype.toString,Y=Function.prototype.toString,te=String.prototype.match,J=String.prototype.slice,oe=String.prototype.replace,ne=String.prototype.toUpperCase,$=String.prototype.toLowerCase,ae=RegExp.prototype.test,G=Array.prototype.concat,ce=Array.prototype.join,ge=Array.prototype.slice,ye=Math.floor,we=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Oe=Object.getOwnPropertySymbols,Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="object",xe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ve||!0)?Symbol.toStringTag:null,ze=Object.prototype.propertyIsEnumerable,st=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ye){return Ye.__proto__}:null);function Ct(Ye,De){if(Ye===1/0||Ye===-1/0||Ye!==Ye||Ye&&Ye>-1e3&&Ye<1e3||ae.call(/e/,De))return De;var Ze=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Ye=="number"){var g=Ye<0?-ye(-Ye):ye(Ye);if(g!==Ye){var mt=String(g),ht=J.call(De,mt.length+1);return oe.call(mt,Ze,"$&_")+"."+oe.call(oe.call(ht,/([0-9]{3})/g,"$&_"),/_$/,"")}}return oe.call(De,Ze,"$&_")}var nt=Lde,be=nt.custom,Ne=_t(be)?be:null,tt={__proto__:null,double:'"',single:"'"},lt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};dE=function Ye(De,Ze,g,mt){var ht=Ze||{};if(Kt(ht,"quoteStyle")&&!Kt(tt,ht.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Kt(ht,"maxStringLength")&&(typeof ht.maxStringLength=="number"?ht.maxStringLength<0&&ht.maxStringLength!==1/0:ht.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Tt=Kt(ht,"customInspect")?ht.customInspect:!0;if(typeof Tt!="boolean"&&Tt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Kt(ht,"indent")&&ht.indent!==null&&ht.indent!=="	"&&!(parseInt(ht.indent,10)===ht.indent&&ht.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Kt(ht,"numericSeparator")&&typeof ht.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var it=ht.numericSeparator;if(typeof De>"u")return"undefined";if(De===null)return"null";if(typeof De=="boolean")return De?"true":"false";if(typeof De=="string")return Kn(De,ht);if(typeof De=="number"){if(De===0)return 1/0/De>0?"0":"-0";var en=String(De);return it?Ct(De,en):en}if(typeof De=="bigint"){var Dn=String(De)+"n";return it?Ct(De,Dn):Dn}var Mn=typeof ht.depth>"u"?5:ht.depth;if(typeof g>"u"&&(g=0),g>=Mn&&Mn>0&&typeof De=="object")return St(De)?"[Array]":"[Object]";var ii=Te(ht,g);if(typeof mt>"u")mt=[];else if(Wt(mt,De)>=0)return"[Circular]";function Wn(Tr,ji,gl){if(ji&&(mt=ge.call(mt),mt.push(ji)),gl){var ka={depth:ht.depth};return Kt(ht,"quoteStyle")&&(ka.quoteStyle=ht.quoteStyle),Ye(Tr,ka,g+1,mt)}return Ye(Tr,ht,g+1,mt)}if(typeof De=="function"&&!Fe(De)){var qi=Jn(De),er=dt(De,Wn);return"[Function"+(qi?": "+qi:" (anonymous)")+"]"+(er.length>0?" { "+ce.call(er,", ")+" }":"")}if(_t(De)){var Ei=Ve?oe.call(String(De),/^(Symbol\(.*\))_[^)]*$/,"$1"):Se.call(De);return typeof De=="object"&&!Ve?de(Ei):Ei}if(ei(De)){for(var hi="<"+$.call(String(De.nodeName)),ti=De.attributes||[],Wi=0;Wi<ti.length;Wi++)hi+=" "+ti[Wi].name+"="+kt(gt(ti[Wi].value),"double",ht);return hi+=">",De.childNodes&&De.childNodes.length&&(hi+="..."),hi+="</"+$.call(String(De.nodeName))+">",hi}if(St(De)){if(De.length===0)return"[]";var wn=dt(De,Wn);return ii&&!pe(wn)?"["+We(wn,ii)+"]":"[ "+ce.call(wn,", ")+" ]"}if(Ke(De)){var uo=dt(De,Wn);return!("cause"in Error.prototype)&&"cause"in De&&!ze.call(De,"cause")?"{ ["+String(De)+"] "+ce.call(G.call("[cause]: "+Wn(De.cause),uo),", ")+" }":uo.length===0?"["+String(De)+"]":"{ ["+String(De)+"] "+ce.call(uo,", ")+" }"}if(typeof De=="object"&&Tt){if(Ne&&typeof De[Ne]=="function"&&nt)return nt(De,{depth:Mn-g});if(Tt!=="symbol"&&typeof De.inspect=="function")return De.inspect()}if($n(De)){var Hi=[];return i&&i.call(De,function(Tr,ji){Hi.push(Wn(ji,De,!0)+" => "+Wn(Tr,De))}),le("Map",t.call(De),Hi,ii)}if(In(De)){var ma=[];return o&&o.call(De,function(Tr){ma.push(Wn(Tr,De))}),le("Set",l.call(De),ma,ii)}if(On(De))return re("WeakMap");if(Oi(De))return re("WeakSet");if(Bn(De))return re("WeakRef");if(He(De))return de(Wn(Number(De)));if(Ot(De))return de(Wn(we.call(De)));if(bt(De))return de(j.call(De));if(Re(De))return de(Wn(String(De)));if(typeof window<"u"&&De===window)return"{ [object Window] }";if(typeof globalThis<"u"&&De===globalThis||typeof window<"u"&&De===window)return"{ [object globalThis] }";if(!Ut(De)&&!Fe(De)){var To=dt(De,Wn),Zn=st?st(De)===Object.prototype:De instanceof Object||De.constructor===Object,lr=De instanceof Object?"":"null prototype",zi=!Zn&&xe&&Object(De)===De&&xe in De?J.call(on(De),8,-1):lr?"Object":"",vr=Zn||typeof De.constructor!="function"?"":De.constructor.name?De.constructor.name+" ":"",Fa=vr+(zi||lr?"["+ce.call(G.call([],zi||[],lr||[]),": ")+"] ":"");return To.length===0?Fa+"{}":ii?Fa+"{"+We(To,ii)+"}":Fa+"{ "+ce.call(To,", ")+" }"}return String(De)};function kt(Ye,De,Ze){var g=Ze.quoteStyle||De,mt=tt[g];return mt+Ye+mt}function gt(Ye){return oe.call(String(Ye),/"/g,"&quot;")}function St(Ye){return on(Ye)==="[object Array]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function Ut(Ye){return on(Ye)==="[object Date]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function Fe(Ye){return on(Ye)==="[object RegExp]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function Ke(Ye){return on(Ye)==="[object Error]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function Re(Ye){return on(Ye)==="[object String]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function He(Ye){return on(Ye)==="[object Number]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function bt(Ye){return on(Ye)==="[object Boolean]"&&(!xe||!(typeof Ye=="object"&&xe in Ye))}function _t(Ye){if(Ve)return Ye&&typeof Ye=="object"&&Ye instanceof Symbol;if(typeof Ye=="symbol")return!0;if(!Ye||typeof Ye!="object"||!Se)return!1;try{return Se.call(Ye),!0}catch{}return!1}function Ot(Ye){if(!Ye||typeof Ye!="object"||!we)return!1;try{return we.call(Ye),!0}catch{}return!1}var qt=Object.prototype.hasOwnProperty||function(Ye){return Ye in this};function Kt(Ye,De){return qt.call(Ye,De)}function on(Ye){return W.call(Ye)}function Jn(Ye){if(Ye.name)return Ye.name;var De=te.call(Y.call(Ye),/^function\s*([\w$]+)/);return De?De[1]:null}function Wt(Ye,De){if(Ye.indexOf)return Ye.indexOf(De);for(var Ze=0,g=Ye.length;Ze<g;Ze++)if(Ye[Ze]===De)return Ze;return-1}function $n(Ye){if(!t||!Ye||typeof Ye!="object")return!1;try{t.call(Ye);try{l.call(Ye)}catch{return!0}return Ye instanceof Map}catch{}return!1}function On(Ye){if(!C||!Ye||typeof Ye!="object")return!1;try{C.call(Ye,C);try{O.call(Ye,O)}catch{return!0}return Ye instanceof WeakMap}catch{}return!1}function Bn(Ye){if(!K||!Ye||typeof Ye!="object")return!1;try{return K.call(Ye),!0}catch{}return!1}function In(Ye){if(!l||!Ye||typeof Ye!="object")return!1;try{l.call(Ye);try{t.call(Ye)}catch{return!0}return Ye instanceof Set}catch{}return!1}function Oi(Ye){if(!O||!Ye||typeof Ye!="object")return!1;try{O.call(Ye,O);try{C.call(Ye,C)}catch{return!0}return Ye instanceof WeakSet}catch{}return!1}function ei(Ye){return!Ye||typeof Ye!="object"?!1:typeof HTMLElement<"u"&&Ye instanceof HTMLElement?!0:typeof Ye.nodeName=="string"&&typeof Ye.getAttribute=="function"}function Kn(Ye,De){if(Ye.length>De.maxStringLength){var Ze=Ye.length-De.maxStringLength,g="... "+Ze+" more character"+(Ze>1?"s":"");return Kn(J.call(Ye,0,De.maxStringLength),De)+g}var mt=lt[De.quoteStyle||"single"];mt.lastIndex=0;var ht=oe.call(oe.call(Ye,mt,"\\$1"),/[\x00-\x1f]/g,je);return kt(ht,"single",De)}function je(Ye){var De=Ye.charCodeAt(0),Ze={8:"b",9:"t",10:"n",12:"f",13:"r"}[De];return Ze?"\\"+Ze:"\\x"+(De<16?"0":"")+ne.call(De.toString(16))}function de(Ye){return"Object("+Ye+")"}function re(Ye){return Ye+" { ? }"}function le(Ye,De,Ze,g){var mt=g?We(Ze,g):ce.call(Ze,", ");return Ye+" ("+De+") {"+mt+"}"}function pe(Ye){for(var De=0;De<Ye.length;De++)if(Wt(Ye[De],`
`)>=0)return!1;return!0}function Te(Ye,De){var Ze;if(Ye.indent==="	")Ze="	";else if(typeof Ye.indent=="number"&&Ye.indent>0)Ze=ce.call(Array(Ye.indent+1)," ");else return null;return{base:Ze,prev:ce.call(Array(De+1),Ze)}}function We(Ye,De){if(Ye.length===0)return"";var Ze=`
`+De.prev+De.base;return Ze+ce.call(Ye,","+Ze)+`
`+De.prev}function dt(Ye,De){var Ze=St(Ye),g=[];if(Ze){g.length=Ye.length;for(var mt=0;mt<Ye.length;mt++)g[mt]=Kt(Ye,mt)?De(Ye[mt],Ye):""}var ht=typeof Oe=="function"?Oe(Ye):[],Tt;if(Ve){Tt={};for(var it=0;it<ht.length;it++)Tt["$"+ht[it]]=ht[it]}for(var en in Ye)Kt(Ye,en)&&(Ze&&String(Number(en))===en&&en<Ye.length||Ve&&Tt["$"+en]instanceof Symbol||(ae.call(/[^\w$]/,en)?g.push(De(en,Ye)+": "+De(Ye[en],Ye)):g.push(en+": "+De(Ye[en],Ye))));if(typeof Oe=="function")for(var Dn=0;Dn<ht.length;Dn++)ze.call(Ye,ht[Dn])&&g.push("["+De(ht[Dn])+"]: "+De(Ye[ht[Dn]],Ye));return g}return dE}var fE,PK;function Fde(){if(PK)return fE;PK=1;var n=Z2(),e=nC(),t=function(o,p,C){for(var w=o,O;(O=w.next)!=null;w=O)if(O.key===p)return w.next=O.next,C||(O.next=o.next,o.next=O),O},i=function(o,p){if(o){var C=t(o,p);return C&&C.value}},r=function(o,p,C){var w=t(o,p);w?w.value=C:o.next={key:p,next:o.next,value:C}},a=function(o,p){return o?!!t(o,p):!1},l=function(o,p){if(o)return t(o,p,!0)};return fE=function(){var p,C={assert:function(w){if(!C.has(w))throw new e("Side channel does not contain "+n(w))},delete:function(w){var O=p&&p.next,U=l(p,w);return U&&O&&O===U&&(p=void 0),!!U},get:function(w){return i(p,w)},has:function(w){return a(p,w)},set:function(w,O){p||(p={next:void 0}),r(p,w,O)}};return C},fE}var pE,KK;function dG(){return KK||(KK=1,pE=Object),pE}var mE,UK;function zde(){return UK||(UK=1,mE=Error),mE}var gE,LK;function jde(){return LK||(LK=1,gE=EvalError),gE}var yE,FK;function Nde(){return FK||(FK=1,yE=RangeError),yE}var vE,zK;function Gde(){return zK||(zK=1,vE=ReferenceError),vE}var CE,jK;function Wde(){return jK||(jK=1,CE=SyntaxError),CE}var _E,NK;function Qde(){return NK||(NK=1,_E=URIError),_E}var bE,GK;function Yde(){return GK||(GK=1,bE=Math.abs),bE}var xE,WK;function qde(){return WK||(WK=1,xE=Math.floor),xE}var ME,QK;function Hde(){return QK||(QK=1,ME=Math.max),ME}var wE,YK;function Vde(){return YK||(YK=1,wE=Math.min),wE}var SE,qK;function $de(){return qK||(qK=1,SE=Math.pow),SE}var EE,HK;function Zde(){return HK||(HK=1,EE=Math.round),EE}var BE,VK;function Xde(){return VK||(VK=1,BE=Number.isNaN||function(e){return e!==e}),BE}var OE,$K;function Jde(){if($K)return OE;$K=1;var n=Xde();return OE=function(t){return n(t)||t===0?t:t<0?-1:1},OE}var IE,ZK;function efe(){return ZK||(ZK=1,IE=Object.getOwnPropertyDescriptor),IE}var TE,XK;function fG(){if(XK)return TE;XK=1;var n=efe();if(n)try{n([],"length")}catch{n=null}return TE=n,TE}var kE,JK;function tfe(){if(JK)return kE;JK=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return kE=n,kE}var DE,eU;function nfe(){return eU||(eU=1,DE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==r||o.enumerable!==!0)return!1}return!0}),DE}var RE,tU;function ife(){if(tU)return RE;tU=1;var n=typeof Symbol<"u"&&Symbol,e=nfe();return RE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},RE}var PE,nU;function pG(){return nU||(nU=1,PE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),PE}var KE,iU;function mG(){if(iU)return KE;iU=1;var n=dG();return KE=n.getPrototypeOf||null,KE}var UE,rU;function rfe(){if(rU)return UE;rU=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",r=function(p,C){for(var w=[],O=0;O<p.length;O+=1)w[O]=p[O];for(var U=0;U<C.length;U+=1)w[U+p.length]=C[U];return w},a=function(p,C){for(var w=[],O=C,U=0;O<p.length;O+=1,U+=1)w[U]=p[O];return w},l=function(o,p){for(var C="",w=0;w<o.length;w+=1)C+=o[w],w+1<o.length&&(C+=p);return C};return UE=function(p){var C=this;if(typeof C!="function"||e.apply(C)!==i)throw new TypeError(n+C);for(var w=a(arguments,1),O,U=function(){if(this instanceof O){var te=C.apply(this,r(w,arguments));return Object(te)===te?te:this}return C.apply(p,r(w,arguments))},K=t(0,C.length-w.length),j=[],W=0;W<K;W++)j[W]="$"+W;if(O=Function("binder","return function ("+l(j,",")+"){ return binder.apply(this,arguments); }")(U),C.prototype){var Y=function(){};Y.prototype=C.prototype,O.prototype=new Y,Y.prototype=null}return O},UE}var LE,oU;function X2(){if(oU)return LE;oU=1;var n=rfe();return LE=Function.prototype.bind||n,LE}var FE,aU;function i7(){return aU||(aU=1,FE=Function.prototype.call),FE}var zE,sU;function gG(){return sU||(sU=1,zE=Function.prototype.apply),zE}var jE,lU;function ofe(){return lU||(lU=1,jE=typeof Reflect<"u"&&Reflect&&Reflect.apply),jE}var NE,uU;function afe(){if(uU)return NE;uU=1;var n=X2(),e=gG(),t=i7(),i=ofe();return NE=i||n.call(t,e),NE}var GE,AU;function yG(){if(AU)return GE;AU=1;var n=X2(),e=nC(),t=i7(),i=afe();return GE=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return i(n,t,a)},GE}var WE,cU;function sfe(){if(cU)return WE;cU=1;var n=yG(),e=fG(),t;try{t=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var i=!!t&&e&&e(Object.prototype,"__proto__"),r=Object,a=r.getPrototypeOf;return WE=i&&typeof i.get=="function"?n([i.get]):typeof a=="function"?function(o){return a(o==null?o:r(o))}:!1,WE}var QE,hU;function lfe(){if(hU)return QE;hU=1;var n=pG(),e=mG(),t=sfe();return QE=n?function(r){return n(r)}:e?function(r){if(!r||typeof r!="object"&&typeof r!="function")throw new TypeError("getProto: not an object");return e(r)}:t?function(r){return t(r)}:null,QE}var YE,dU;function ufe(){if(dU)return YE;dU=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=X2();return YE=t.call(n,e),YE}var qE,fU;function r7(){if(fU)return qE;fU=1;var n,e=dG(),t=zde(),i=jde(),r=Nde(),a=Gde(),l=Wde(),o=nC(),p=Qde(),C=Yde(),w=qde(),O=Hde(),U=Vde(),K=$de(),j=Zde(),W=Jde(),Y=Function,te=function(Ke){try{return Y('"use strict"; return ('+Ke+").constructor;")()}catch{}},J=fG(),oe=tfe(),ne=function(){throw new o},$=J?function(){try{return arguments.callee,ne}catch{try{return J(arguments,"callee").get}catch{return ne}}}():ne,ae=ife()(),G=lfe(),ce=mG(),ge=pG(),ye=gG(),we=i7(),Oe={},Se=typeof Uint8Array>"u"||!G?n:G(Uint8Array),Ve={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":ae&&G?G([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":Oe,"%AsyncGenerator%":Oe,"%AsyncGeneratorFunction%":Oe,"%AsyncIteratorPrototype%":Oe,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":Y,"%GeneratorFunction%":Oe,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ae&&G?G(G([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ae||!G?n:G(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":J,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":r,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ae||!G?n:G(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ae&&G?G(""[Symbol.iterator]()):n,"%Symbol%":ae?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":$,"%TypedArray%":Se,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":we,"%Function.prototype.apply%":ye,"%Object.defineProperty%":oe,"%Object.getPrototypeOf%":ce,"%Math.abs%":C,"%Math.floor%":w,"%Math.max%":O,"%Math.min%":U,"%Math.pow%":K,"%Math.round%":j,"%Math.sign%":W,"%Reflect.getPrototypeOf%":ge};if(G)try{null.error}catch(Ke){var xe=G(G(Ke));Ve["%Error.prototype%"]=xe}var ze=function Ke(Re){var He;if(Re==="%AsyncFunction%")He=te("async function () {}");else if(Re==="%GeneratorFunction%")He=te("function* () {}");else if(Re==="%AsyncGeneratorFunction%")He=te("async function* () {}");else if(Re==="%AsyncGenerator%"){var bt=Ke("%AsyncGeneratorFunction%");bt&&(He=bt.prototype)}else if(Re==="%AsyncIteratorPrototype%"){var _t=Ke("%AsyncGenerator%");_t&&G&&(He=G(_t.prototype))}return Ve[Re]=He,He},st={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ct=X2(),nt=ufe(),be=Ct.call(we,Array.prototype.concat),Ne=Ct.call(ye,Array.prototype.splice),tt=Ct.call(we,String.prototype.replace),lt=Ct.call(we,String.prototype.slice),kt=Ct.call(we,RegExp.prototype.exec),gt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,St=/\\(\\)?/g,Ut=function(Re){var He=lt(Re,0,1),bt=lt(Re,-1);if(He==="%"&&bt!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(bt==="%"&&He!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var _t=[];return tt(Re,gt,function(Ot,qt,Kt,on){_t[_t.length]=Kt?tt(on,St,"$1"):qt||Ot}),_t},Fe=function(Re,He){var bt=Re,_t;if(nt(st,bt)&&(_t=st[bt],bt="%"+_t[0]+"%"),nt(Ve,bt)){var Ot=Ve[bt];if(Ot===Oe&&(Ot=ze(bt)),typeof Ot>"u"&&!He)throw new o("intrinsic "+Re+" exists, but is not available. Please file an issue!");return{alias:_t,name:bt,value:Ot}}throw new l("intrinsic "+Re+" does not exist!")};return qE=function(Re,He){if(typeof Re!="string"||Re.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof He!="boolean")throw new o('"allowMissing" argument must be a boolean');if(kt(/^%?[^%]*%?$/,Re)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var bt=Ut(Re),_t=bt.length>0?bt[0]:"",Ot=Fe("%"+_t+"%",He),qt=Ot.name,Kt=Ot.value,on=!1,Jn=Ot.alias;Jn&&(_t=Jn[0],Ne(bt,be([0,1],Jn)));for(var Wt=1,$n=!0;Wt<bt.length;Wt+=1){var On=bt[Wt],Bn=lt(On,0,1),In=lt(On,-1);if((Bn==='"'||Bn==="'"||Bn==="`"||In==='"'||In==="'"||In==="`")&&Bn!==In)throw new l("property names with quotes must have matching quotes");if((On==="constructor"||!$n)&&(on=!0),_t+="."+On,qt="%"+_t+"%",nt(Ve,qt))Kt=Ve[qt];else if(Kt!=null){if(!(On in Kt)){if(!He)throw new o("base intrinsic for "+Re+" exists, but the property is not available.");return}if(J&&Wt+1>=bt.length){var Oi=J(Kt,On);$n=!!Oi,$n&&"get"in Oi&&!("originalValue"in Oi.get)?Kt=Oi.get:Kt=Kt[On]}else $n=nt(Kt,On),Kt=Kt[On];$n&&!on&&(Ve[qt]=Kt)}}return Kt},qE}var HE,pU;function vG(){if(pU)return HE;pU=1;var n=r7(),e=yG(),t=e([n("%String.prototype.indexOf%")]);return HE=function(r,a){var l=n(r,!!a);return typeof l=="function"&&t(r,".prototype.")>-1?e([l]):l},HE}var VE,mU;function CG(){if(mU)return VE;mU=1;var n=r7(),e=vG(),t=Z2(),i=nC(),r=n("%Map%",!0),a=e("Map.prototype.get",!0),l=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),p=e("Map.prototype.delete",!0),C=e("Map.prototype.size",!0);return VE=!!r&&function(){var O,U={assert:function(K){if(!U.has(K))throw new i("Side channel does not contain "+t(K))},delete:function(K){if(O){var j=p(O,K);return C(O)===0&&(O=void 0),j}return!1},get:function(K){if(O)return a(O,K)},has:function(K){return O?o(O,K):!1},set:function(K,j){O||(O=new r),l(O,K,j)}};return U},VE}var $E,gU;function Afe(){if(gU)return $E;gU=1;var n=r7(),e=vG(),t=Z2(),i=CG(),r=nC(),a=n("%WeakMap%",!0),l=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),p=e("WeakMap.prototype.has",!0),C=e("WeakMap.prototype.delete",!0);return $E=a?function(){var O,U,K={assert:function(j){if(!K.has(j))throw new r("Side channel does not contain "+t(j))},delete:function(j){if(a&&j&&(typeof j=="object"||typeof j=="function")){if(O)return C(O,j)}else if(i&&U)return U.delete(j);return!1},get:function(j){return a&&j&&(typeof j=="object"||typeof j=="function")&&O?l(O,j):U&&U.get(j)},has:function(j){return a&&j&&(typeof j=="object"||typeof j=="function")&&O?p(O,j):!!U&&U.has(j)},set:function(j,W){a&&j&&(typeof j=="object"||typeof j=="function")?(O||(O=new a),o(O,j,W)):i&&(U||(U=i()),U.set(j,W))}};return K}:i,$E}var ZE,yU;function cfe(){if(yU)return ZE;yU=1;var n=nC(),e=Z2(),t=Fde(),i=CG(),r=Afe(),a=r||i||t;return ZE=function(){var o,p={assert:function(C){if(!p.has(C))throw new n("Side channel does not contain "+e(C))},delete:function(C){return!!o&&o.delete(C)},get:function(C){return o&&o.get(C)},has:function(C){return!!o&&o.has(C)},set:function(C,w){o||(o=a()),o.set(C,w)}};return p},ZE}var XE,vU;function o7(){if(vU)return XE;vU=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return XE={default:t.RFC3986,formatters:{RFC1738:function(i){return n.call(i,e,"+")},RFC3986:function(i){return String(i)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},XE}var JE,CU;function _G(){if(CU)return JE;CU=1;var n=o7(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i=function(){for(var Y=[],te=0;te<256;++te)Y.push("%"+((te<16?"0":"")+te.toString(16)).toUpperCase());return Y}(),r=function(te){for(;te.length>1;){var J=te.pop(),oe=J.obj[J.prop];if(t(oe)){for(var ne=[],$=0;$<oe.length;++$)typeof oe[$]<"u"&&ne.push(oe[$]);J.obj[J.prop]=ne}}},a=function(te,J){for(var oe=J&&J.plainObjects?{__proto__:null}:{},ne=0;ne<te.length;++ne)typeof te[ne]<"u"&&(oe[ne]=te[ne]);return oe},l=function Y(te,J,oe){if(!J)return te;if(typeof J!="object"&&typeof J!="function"){if(t(te))te.push(J);else if(te&&typeof te=="object")(oe&&(oe.plainObjects||oe.allowPrototypes)||!e.call(Object.prototype,J))&&(te[J]=!0);else return[te,J];return te}if(!te||typeof te!="object")return[te].concat(J);var ne=te;return t(te)&&!t(J)&&(ne=a(te,oe)),t(te)&&t(J)?(J.forEach(function($,ae){if(e.call(te,ae)){var G=te[ae];G&&typeof G=="object"&&$&&typeof $=="object"?te[ae]=Y(G,$,oe):te.push($)}else te[ae]=$}),te):Object.keys(J).reduce(function($,ae){var G=J[ae];return e.call($,ae)?$[ae]=Y($[ae],G,oe):$[ae]=G,$},ne)},o=function(te,J){return Object.keys(J).reduce(function(oe,ne){return oe[ne]=J[ne],oe},te)},p=function(Y,te,J){var oe=Y.replace(/\+/g," ");if(J==="iso-8859-1")return oe.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(oe)}catch{return oe}},C=1024,w=function(te,J,oe,ne,$){if(te.length===0)return te;var ae=te;if(typeof te=="symbol"?ae=Symbol.prototype.toString.call(te):typeof te!="string"&&(ae=String(te)),oe==="iso-8859-1")return escape(ae).replace(/%u[0-9a-f]{4}/gi,function(Se){return"%26%23"+parseInt(Se.slice(2),16)+"%3B"});for(var G="",ce=0;ce<ae.length;ce+=C){for(var ge=ae.length>=C?ae.slice(ce,ce+C):ae,ye=[],we=0;we<ge.length;++we){var Oe=ge.charCodeAt(we);if(Oe===45||Oe===46||Oe===95||Oe===126||Oe>=48&&Oe<=57||Oe>=65&&Oe<=90||Oe>=97&&Oe<=122||$===n.RFC1738&&(Oe===40||Oe===41)){ye[ye.length]=ge.charAt(we);continue}if(Oe<128){ye[ye.length]=i[Oe];continue}if(Oe<2048){ye[ye.length]=i[192|Oe>>6]+i[128|Oe&63];continue}if(Oe<55296||Oe>=57344){ye[ye.length]=i[224|Oe>>12]+i[128|Oe>>6&63]+i[128|Oe&63];continue}we+=1,Oe=65536+((Oe&1023)<<10|ge.charCodeAt(we)&1023),ye[ye.length]=i[240|Oe>>18]+i[128|Oe>>12&63]+i[128|Oe>>6&63]+i[128|Oe&63]}G+=ye.join("")}return G},O=function(te){for(var J=[{obj:{o:te},prop:"o"}],oe=[],ne=0;ne<J.length;++ne)for(var $=J[ne],ae=$.obj[$.prop],G=Object.keys(ae),ce=0;ce<G.length;++ce){var ge=G[ce],ye=ae[ge];typeof ye=="object"&&ye!==null&&oe.indexOf(ye)===-1&&(J.push({obj:ae,prop:ge}),oe.push(ye))}return r(J),te},U=function(te){return Object.prototype.toString.call(te)==="[object RegExp]"},K=function(te){return!te||typeof te!="object"?!1:!!(te.constructor&&te.constructor.isBuffer&&te.constructor.isBuffer(te))},j=function(te,J){return[].concat(te,J)},W=function(te,J){if(t(te)){for(var oe=[],ne=0;ne<te.length;ne+=1)oe.push(J(te[ne]));return oe}return J(te)};return JE={arrayToObject:a,assign:o,combine:j,compact:O,decode:p,encode:w,isBuffer:K,isRegExp:U,maybeMap:W,merge:l},JE}var e6,_U;function hfe(){if(_U)return e6;_U=1;var n=cfe(),e=_G(),t=o7(),i=Object.prototype.hasOwnProperty,r={brackets:function(Y){return Y+"[]"},comma:"comma",indices:function(Y,te){return Y+"["+te+"]"},repeat:function(Y){return Y}},a=Array.isArray,l=Array.prototype.push,o=function(W,Y){l.apply(W,a(Y)?Y:[Y])},p=Date.prototype.toISOString,C=t.default,w={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:C,formatter:t.formatters[C],indices:!1,serializeDate:function(Y){return p.call(Y)},skipNulls:!1,strictNullHandling:!1},O=function(Y){return typeof Y=="string"||typeof Y=="number"||typeof Y=="boolean"||typeof Y=="symbol"||typeof Y=="bigint"},U={},K=function W(Y,te,J,oe,ne,$,ae,G,ce,ge,ye,we,Oe,Se,Ve,xe,ze,st){for(var Ct=Y,nt=st,be=0,Ne=!1;(nt=nt.get(U))!==void 0&&!Ne;){var tt=nt.get(Y);if(be+=1,typeof tt<"u"){if(tt===be)throw new RangeError("Cyclic object value");Ne=!0}typeof nt.get(U)>"u"&&(be=0)}if(typeof ge=="function"?Ct=ge(te,Ct):Ct instanceof Date?Ct=Oe(Ct):J==="comma"&&a(Ct)&&(Ct=e.maybeMap(Ct,function(qt){return qt instanceof Date?Oe(qt):qt})),Ct===null){if($)return ce&&!xe?ce(te,w.encoder,ze,"key",Se):te;Ct=""}if(O(Ct)||e.isBuffer(Ct)){if(ce){var lt=xe?te:ce(te,w.encoder,ze,"key",Se);return[Ve(lt)+"="+Ve(ce(Ct,w.encoder,ze,"value",Se))]}return[Ve(te)+"="+Ve(String(Ct))]}var kt=[];if(typeof Ct>"u")return kt;var gt;if(J==="comma"&&a(Ct))xe&&ce&&(Ct=e.maybeMap(Ct,ce)),gt=[{value:Ct.length>0?Ct.join(",")||null:void 0}];else if(a(ge))gt=ge;else{var St=Object.keys(Ct);gt=ye?St.sort(ye):St}var Ut=G?String(te).replace(/\./g,"%2E"):String(te),Fe=oe&&a(Ct)&&Ct.length===1?Ut+"[]":Ut;if(ne&&a(Ct)&&Ct.length===0)return Fe+"[]";for(var Ke=0;Ke<gt.length;++Ke){var Re=gt[Ke],He=typeof Re=="object"&&Re&&typeof Re.value<"u"?Re.value:Ct[Re];if(!(ae&&He===null)){var bt=we&&G?String(Re).replace(/\./g,"%2E"):String(Re),_t=a(Ct)?typeof J=="function"?J(Fe,bt):Fe:Fe+(we?"."+bt:"["+bt+"]");st.set(Y,be);var Ot=n();Ot.set(U,st),o(kt,W(He,_t,J,oe,ne,$,ae,G,J==="comma"&&xe&&a(Ct)?null:ce,ge,ye,we,Oe,Se,Ve,xe,ze,Ot))}}return kt},j=function(Y){if(!Y)return w;if(typeof Y.allowEmptyArrays<"u"&&typeof Y.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof Y.encodeDotInKeys<"u"&&typeof Y.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(Y.encoder!==null&&typeof Y.encoder<"u"&&typeof Y.encoder!="function")throw new TypeError("Encoder has to be a function.");var te=Y.charset||w.charset;if(typeof Y.charset<"u"&&Y.charset!=="utf-8"&&Y.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var J=t.default;if(typeof Y.format<"u"){if(!i.call(t.formatters,Y.format))throw new TypeError("Unknown format option provided.");J=Y.format}var oe=t.formatters[J],ne=w.filter;(typeof Y.filter=="function"||a(Y.filter))&&(ne=Y.filter);var $;if(Y.arrayFormat in r?$=Y.arrayFormat:"indices"in Y?$=Y.indices?"indices":"repeat":$=w.arrayFormat,"commaRoundTrip"in Y&&typeof Y.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var ae=typeof Y.allowDots>"u"?Y.encodeDotInKeys===!0?!0:w.allowDots:!!Y.allowDots;return{addQueryPrefix:typeof Y.addQueryPrefix=="boolean"?Y.addQueryPrefix:w.addQueryPrefix,allowDots:ae,allowEmptyArrays:typeof Y.allowEmptyArrays=="boolean"?!!Y.allowEmptyArrays:w.allowEmptyArrays,arrayFormat:$,charset:te,charsetSentinel:typeof Y.charsetSentinel=="boolean"?Y.charsetSentinel:w.charsetSentinel,commaRoundTrip:!!Y.commaRoundTrip,delimiter:typeof Y.delimiter>"u"?w.delimiter:Y.delimiter,encode:typeof Y.encode=="boolean"?Y.encode:w.encode,encodeDotInKeys:typeof Y.encodeDotInKeys=="boolean"?Y.encodeDotInKeys:w.encodeDotInKeys,encoder:typeof Y.encoder=="function"?Y.encoder:w.encoder,encodeValuesOnly:typeof Y.encodeValuesOnly=="boolean"?Y.encodeValuesOnly:w.encodeValuesOnly,filter:ne,format:J,formatter:oe,serializeDate:typeof Y.serializeDate=="function"?Y.serializeDate:w.serializeDate,skipNulls:typeof Y.skipNulls=="boolean"?Y.skipNulls:w.skipNulls,sort:typeof Y.sort=="function"?Y.sort:null,strictNullHandling:typeof Y.strictNullHandling=="boolean"?Y.strictNullHandling:w.strictNullHandling}};return e6=function(W,Y){var te=W,J=j(Y),oe,ne;typeof J.filter=="function"?(ne=J.filter,te=ne("",te)):a(J.filter)&&(ne=J.filter,oe=ne);var $=[];if(typeof te!="object"||te===null)return"";var ae=r[J.arrayFormat],G=ae==="comma"&&J.commaRoundTrip;oe||(oe=Object.keys(te)),J.sort&&oe.sort(J.sort);for(var ce=n(),ge=0;ge<oe.length;++ge){var ye=oe[ge],we=te[ye];J.skipNulls&&we===null||o($,K(we,ye,ae,G,J.allowEmptyArrays,J.strictNullHandling,J.skipNulls,J.encodeDotInKeys,J.encode?J.encoder:null,J.filter,J.sort,J.allowDots,J.serializeDate,J.format,J.formatter,J.encodeValuesOnly,J.charset,ce))}var Oe=$.join(J.delimiter),Se=J.addQueryPrefix===!0?"?":"";return J.charsetSentinel&&(J.charset==="iso-8859-1"?Se+="utf8=%26%2310003%3B&":Se+="utf8=%E2%9C%93&"),Oe.length>0?Se+Oe:""},e6}var t6,bU;function dfe(){if(bU)return t6;bU=1;var n=_G(),e=Object.prototype.hasOwnProperty,t=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},r=function(U){return U.replace(/&#(\d+);/g,function(K,j){return String.fromCharCode(parseInt(j,10))})},a=function(U,K,j){if(U&&typeof U=="string"&&K.comma&&U.indexOf(",")>-1)return U.split(",");if(K.throwOnLimitExceeded&&j>=K.arrayLimit)throw new RangeError("Array limit exceeded. Only "+K.arrayLimit+" element"+(K.arrayLimit===1?"":"s")+" allowed in an array.");return U},l="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",p=function(K,j){var W={__proto__:null},Y=j.ignoreQueryPrefix?K.replace(/^\?/,""):K;Y=Y.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var te=j.parameterLimit===1/0?void 0:j.parameterLimit,J=Y.split(j.delimiter,j.throwOnLimitExceeded?te+1:te);if(j.throwOnLimitExceeded&&J.length>te)throw new RangeError("Parameter limit exceeded. Only "+te+" parameter"+(te===1?"":"s")+" allowed.");var oe=-1,ne,$=j.charset;if(j.charsetSentinel)for(ne=0;ne<J.length;++ne)J[ne].indexOf("utf8=")===0&&(J[ne]===o?$="utf-8":J[ne]===l&&($="iso-8859-1"),oe=ne,ne=J.length);for(ne=0;ne<J.length;++ne)if(ne!==oe){var ae=J[ne],G=ae.indexOf("]="),ce=G===-1?ae.indexOf("="):G+1,ge,ye;ce===-1?(ge=j.decoder(ae,i.decoder,$,"key"),ye=j.strictNullHandling?null:""):(ge=j.decoder(ae.slice(0,ce),i.decoder,$,"key"),ye=n.maybeMap(a(ae.slice(ce+1),j,t(W[ge])?W[ge].length:0),function(Oe){return j.decoder(Oe,i.decoder,$,"value")})),ye&&j.interpretNumericEntities&&$==="iso-8859-1"&&(ye=r(String(ye))),ae.indexOf("[]=")>-1&&(ye=t(ye)?[ye]:ye);var we=e.call(W,ge);we&&j.duplicates==="combine"?W[ge]=n.combine(W[ge],ye):(!we||j.duplicates==="last")&&(W[ge]=ye)}return W},C=function(U,K,j,W){var Y=0;if(U.length>0&&U[U.length-1]==="[]"){var te=U.slice(0,-1).join("");Y=Array.isArray(K)&&K[te]?K[te].length:0}for(var J=W?K:a(K,j,Y),oe=U.length-1;oe>=0;--oe){var ne,$=U[oe];if($==="[]"&&j.parseArrays)ne=j.allowEmptyArrays&&(J===""||j.strictNullHandling&&J===null)?[]:n.combine([],J);else{ne=j.plainObjects?{__proto__:null}:{};var ae=$.charAt(0)==="["&&$.charAt($.length-1)==="]"?$.slice(1,-1):$,G=j.decodeDotInKeys?ae.replace(/%2E/g,"."):ae,ce=parseInt(G,10);!j.parseArrays&&G===""?ne={0:J}:!isNaN(ce)&&$!==G&&String(ce)===G&&ce>=0&&j.parseArrays&&ce<=j.arrayLimit?(ne=[],ne[ce]=J):G!=="__proto__"&&(ne[G]=J)}J=ne}return J},w=function(K,j,W,Y){if(K){var te=W.allowDots?K.replace(/\.([^.[]+)/g,"[$1]"):K,J=/(\[[^[\]]*])/,oe=/(\[[^[\]]*])/g,ne=W.depth>0&&J.exec(te),$=ne?te.slice(0,ne.index):te,ae=[];if($){if(!W.plainObjects&&e.call(Object.prototype,$)&&!W.allowPrototypes)return;ae.push($)}for(var G=0;W.depth>0&&(ne=oe.exec(te))!==null&&G<W.depth;){if(G+=1,!W.plainObjects&&e.call(Object.prototype,ne[1].slice(1,-1))&&!W.allowPrototypes)return;ae.push(ne[1])}if(ne){if(W.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+W.depth+" and strictDepth is true");ae.push("["+te.slice(ne.index)+"]")}return C(ae,j,W,Y)}},O=function(K){if(!K)return i;if(typeof K.allowEmptyArrays<"u"&&typeof K.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof K.decodeDotInKeys<"u"&&typeof K.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(K.decoder!==null&&typeof K.decoder<"u"&&typeof K.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof K.charset<"u"&&K.charset!=="utf-8"&&K.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof K.throwOnLimitExceeded<"u"&&typeof K.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var j=typeof K.charset>"u"?i.charset:K.charset,W=typeof K.duplicates>"u"?i.duplicates:K.duplicates;if(W!=="combine"&&W!=="first"&&W!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var Y=typeof K.allowDots>"u"?K.decodeDotInKeys===!0?!0:i.allowDots:!!K.allowDots;return{allowDots:Y,allowEmptyArrays:typeof K.allowEmptyArrays=="boolean"?!!K.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:typeof K.allowPrototypes=="boolean"?K.allowPrototypes:i.allowPrototypes,allowSparse:typeof K.allowSparse=="boolean"?K.allowSparse:i.allowSparse,arrayLimit:typeof K.arrayLimit=="number"?K.arrayLimit:i.arrayLimit,charset:j,charsetSentinel:typeof K.charsetSentinel=="boolean"?K.charsetSentinel:i.charsetSentinel,comma:typeof K.comma=="boolean"?K.comma:i.comma,decodeDotInKeys:typeof K.decodeDotInKeys=="boolean"?K.decodeDotInKeys:i.decodeDotInKeys,decoder:typeof K.decoder=="function"?K.decoder:i.decoder,delimiter:typeof K.delimiter=="string"||n.isRegExp(K.delimiter)?K.delimiter:i.delimiter,depth:typeof K.depth=="number"||K.depth===!1?+K.depth:i.depth,duplicates:W,ignoreQueryPrefix:K.ignoreQueryPrefix===!0,interpretNumericEntities:typeof K.interpretNumericEntities=="boolean"?K.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof K.parameterLimit=="number"?K.parameterLimit:i.parameterLimit,parseArrays:K.parseArrays!==!1,plainObjects:typeof K.plainObjects=="boolean"?K.plainObjects:i.plainObjects,strictDepth:typeof K.strictDepth=="boolean"?!!K.strictDepth:i.strictDepth,strictNullHandling:typeof K.strictNullHandling=="boolean"?K.strictNullHandling:i.strictNullHandling,throwOnLimitExceeded:typeof K.throwOnLimitExceeded=="boolean"?K.throwOnLimitExceeded:!1}};return t6=function(U,K){var j=O(K);if(U===""||U===null||typeof U>"u")return j.plainObjects?{__proto__:null}:{};for(var W=typeof U=="string"?p(U,j):U,Y=j.plainObjects?{__proto__:null}:{},te=Object.keys(W),J=0;J<te.length;++J){var oe=te[J],ne=w(oe,W[oe],j,typeof U=="string");Y=n.merge(Y,ne,j)}return j.allowSparse===!0?Y:n.compact(Y)},t6}var n6,xU;function ffe(){if(xU)return n6;xU=1;var n=hfe(),e=dfe(),t=o7();return n6={formats:t,parse:e,stringify:n},n6}var MU;function pfe(){if(MU)return C1;MU=1;var n=Pde();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r",`
`,"	"],l=["{","}","|","\\","^","`"].concat(a),o=["'"].concat(l),p=["%","/","?",";","#"].concat(o),C=["/","?","#"],w=255,O=/^[+a-z0-9A-Z_-]{0,63}$/,U=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,K={javascript:!0,"javascript:":!0},j={javascript:!0,"javascript:":!0},W={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Y=ffe();function te($,ae,G){if($&&typeof $=="object"&&$ instanceof e)return $;var ce=new e;return ce.parse($,ae,G),ce}e.prototype.parse=function($,ae,G){if(typeof $!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof $);var ce=$.indexOf("?"),ge=ce!==-1&&ce<$.indexOf("#")?"?":"#",ye=$.split(ge),we=/\\/g;ye[0]=ye[0].replace(we,"/"),$=ye.join(ge);var Oe=$;if(Oe=Oe.trim(),!G&&$.split("#").length===1){var Se=r.exec(Oe);if(Se)return this.path=Oe,this.href=Oe,this.pathname=Se[1],Se[2]?(this.search=Se[2],ae?this.query=Y.parse(this.search.substr(1)):this.query=this.search.substr(1)):ae&&(this.search="",this.query={}),this}var Ve=t.exec(Oe);if(Ve){Ve=Ve[0];var xe=Ve.toLowerCase();this.protocol=xe,Oe=Oe.substr(Ve.length)}if(G||Ve||Oe.match(/^\/\/[^@/]+@[^@/]+/)){var ze=Oe.substr(0,2)==="//";ze&&!(Ve&&j[Ve])&&(Oe=Oe.substr(2),this.slashes=!0)}if(!j[Ve]&&(ze||Ve&&!W[Ve])){for(var st=-1,Ct=0;Ct<C.length;Ct++){var nt=Oe.indexOf(C[Ct]);nt!==-1&&(st===-1||nt<st)&&(st=nt)}var be,Ne;st===-1?Ne=Oe.lastIndexOf("@"):Ne=Oe.lastIndexOf("@",st),Ne!==-1&&(be=Oe.slice(0,Ne),Oe=Oe.slice(Ne+1),this.auth=decodeURIComponent(be)),st=-1;for(var Ct=0;Ct<p.length;Ct++){var nt=Oe.indexOf(p[Ct]);nt!==-1&&(st===-1||nt<st)&&(st=nt)}st===-1&&(st=Oe.length),this.host=Oe.slice(0,st),Oe=Oe.slice(st),this.parseHost(),this.hostname=this.hostname||"";var tt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!tt)for(var lt=this.hostname.split(/\./),Ct=0,kt=lt.length;Ct<kt;Ct++){var gt=lt[Ct];if(gt&&!gt.match(O)){for(var St="",Ut=0,Fe=gt.length;Ut<Fe;Ut++)gt.charCodeAt(Ut)>127?St+="x":St+=gt[Ut];if(!St.match(O)){var Ke=lt.slice(0,Ct),Re=lt.slice(Ct+1),He=gt.match(U);He&&(Ke.push(He[1]),Re.unshift(He[2])),Re.length&&(Oe="/"+Re.join(".")+Oe),this.hostname=Ke.join(".");break}}}this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),tt||(this.hostname=n.toASCII(this.hostname));var bt=this.port?":"+this.port:"",_t=this.hostname||"";this.host=_t+bt,this.href+=this.host,tt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),Oe[0]!=="/"&&(Oe="/"+Oe))}if(!K[xe])for(var Ct=0,kt=o.length;Ct<kt;Ct++){var Ot=o[Ct];if(Oe.indexOf(Ot)!==-1){var qt=encodeURIComponent(Ot);qt===Ot&&(qt=escape(Ot)),Oe=Oe.split(Ot).join(qt)}}var Kt=Oe.indexOf("#");Kt!==-1&&(this.hash=Oe.substr(Kt),Oe=Oe.slice(0,Kt));var on=Oe.indexOf("?");if(on!==-1?(this.search=Oe.substr(on),this.query=Oe.substr(on+1),ae&&(this.query=Y.parse(this.query)),Oe=Oe.slice(0,on)):ae&&(this.search="",this.query={}),Oe&&(this.pathname=Oe),W[xe]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var bt=this.pathname||"",Jn=this.search||"";this.path=bt+Jn}return this.href=this.format(),this};function J($){return typeof $=="string"&&($=te($)),$ instanceof e?$.format():e.prototype.format.call($)}e.prototype.format=function(){var $=this.auth||"";$&&($=encodeURIComponent($),$=$.replace(/%3A/i,":"),$+="@");var ae=this.protocol||"",G=this.pathname||"",ce=this.hash||"",ge=!1,ye="";this.host?ge=$+this.host:this.hostname&&(ge=$+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(ge+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(ye=Y.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var we=this.search||ye&&"?"+ye||"";return ae&&ae.substr(-1)!==":"&&(ae+=":"),this.slashes||(!ae||W[ae])&&ge!==!1?(ge="//"+(ge||""),G&&G.charAt(0)!=="/"&&(G="/"+G)):ge||(ge=""),ce&&ce.charAt(0)!=="#"&&(ce="#"+ce),we&&we.charAt(0)!=="?"&&(we="?"+we),G=G.replace(/[?#]/g,function(Oe){return encodeURIComponent(Oe)}),we=we.replace("#","%23"),ae+ge+G+we+ce};function oe($,ae){return te($,!1,!0).resolve(ae)}e.prototype.resolve=function($){return this.resolveObject(te($,!1,!0)).format()};function ne($,ae){return $?te($,!1,!0).resolveObject(ae):ae}return e.prototype.resolveObject=function($){if(typeof $=="string"){var ae=new e;ae.parse($,!1,!0),$=ae}for(var G=new e,ce=Object.keys(this),ge=0;ge<ce.length;ge++){var ye=ce[ge];G[ye]=this[ye]}if(G.hash=$.hash,$.href==="")return G.href=G.format(),G;if($.slashes&&!$.protocol){for(var we=Object.keys($),Oe=0;Oe<we.length;Oe++){var Se=we[Oe];Se!=="protocol"&&(G[Se]=$[Se])}return W[G.protocol]&&G.hostname&&!G.pathname&&(G.pathname="/",G.path=G.pathname),G.href=G.format(),G}if($.protocol&&$.protocol!==G.protocol){if(!W[$.protocol]){for(var Ve=Object.keys($),xe=0;xe<Ve.length;xe++){var ze=Ve[xe];G[ze]=$[ze]}return G.href=G.format(),G}if(G.protocol=$.protocol,!$.host&&!j[$.protocol]){for(var kt=($.pathname||"").split("/");kt.length&&!($.host=kt.shift()););$.host||($.host=""),$.hostname||($.hostname=""),kt[0]!==""&&kt.unshift(""),kt.length<2&&kt.unshift(""),G.pathname=kt.join("/")}else G.pathname=$.pathname;if(G.search=$.search,G.query=$.query,G.host=$.host||"",G.auth=$.auth,G.hostname=$.hostname||$.host,G.port=$.port,G.pathname||G.search){var st=G.pathname||"",Ct=G.search||"";G.path=st+Ct}return G.slashes=G.slashes||$.slashes,G.href=G.format(),G}var nt=G.pathname&&G.pathname.charAt(0)==="/",be=$.host||$.pathname&&$.pathname.charAt(0)==="/",Ne=be||nt||G.host&&$.pathname,tt=Ne,lt=G.pathname&&G.pathname.split("/")||[],kt=$.pathname&&$.pathname.split("/")||[],gt=G.protocol&&!W[G.protocol];if(gt&&(G.hostname="",G.port=null,G.host&&(lt[0]===""?lt[0]=G.host:lt.unshift(G.host)),G.host="",$.protocol&&($.hostname=null,$.port=null,$.host&&(kt[0]===""?kt[0]=$.host:kt.unshift($.host)),$.host=null),Ne=Ne&&(kt[0]===""||lt[0]==="")),be)G.host=$.host||$.host===""?$.host:G.host,G.hostname=$.hostname||$.hostname===""?$.hostname:G.hostname,G.search=$.search,G.query=$.query,lt=kt;else if(kt.length)lt||(lt=[]),lt.pop(),lt=lt.concat(kt),G.search=$.search,G.query=$.query;else if($.search!=null){if(gt){G.host=lt.shift(),G.hostname=G.host;var St=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;St&&(G.auth=St.shift(),G.hostname=St.shift(),G.host=G.hostname)}return G.search=$.search,G.query=$.query,(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.href=G.format(),G}if(!lt.length)return G.pathname=null,G.search?G.path="/"+G.search:G.path=null,G.href=G.format(),G;for(var Ut=lt.slice(-1)[0],Fe=(G.host||$.host||lt.length>1)&&(Ut==="."||Ut==="..")||Ut==="",Ke=0,Re=lt.length;Re>=0;Re--)Ut=lt[Re],Ut==="."?lt.splice(Re,1):Ut===".."?(lt.splice(Re,1),Ke++):Ke&&(lt.splice(Re,1),Ke--);if(!Ne&&!tt)for(;Ke--;Ke)lt.unshift("..");Ne&&lt[0]!==""&&(!lt[0]||lt[0].charAt(0)!=="/")&&lt.unshift(""),Fe&&lt.join("/").substr(-1)!=="/"&&lt.push("");var He=lt[0]===""||lt[0]&&lt[0].charAt(0)==="/";if(gt){G.hostname=He?"":lt.length?lt.shift():"",G.host=G.hostname;var St=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;St&&(G.auth=St.shift(),G.hostname=St.shift(),G.host=G.hostname)}return Ne=Ne||G.host&&lt.length,Ne&&!He&&lt.unshift(""),lt.length>0?G.pathname=lt.join("/"):(G.pathname=null,G.path=null),(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.auth=$.auth||G.auth,G.slashes=G.slashes||$.slashes,G.href=G.format(),G},e.prototype.parseHost=function(){var $=this.host,ae=i.exec($);ae&&(ae=ae[0],ae!==":"&&(this.port=ae.substr(1)),$=$.substr(0,$.length-ae.length)),$&&(this.hostname=$)},C1.parse=te,C1.resolve=oe,C1.resolveObject=ne,C1.format=J,C1.Url=e,C1}var mfe=pfe();const wU=AA(mfe);function xa(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return xa=function(){return l},l}xa();function bG(n,e,t){xa().f[0]++,xa().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(i=>{if(xa().f[1]++,xa().s[1]++,i.ok)xa().b[0][1]++;else throw xa().b[0][0]++,xa().s[2]++,new Error("Failed to load metadata for "+n);return xa().s[3]++,i.json()}).then(i=>{xa().f[2]++,xa().s[4]++,t(i)}).catch(()=>{xa().f[3]++,xa().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),xa().s[6]++,t(e)})}function gfe(n,e){if(xa().f[4]++,xa().s[7]++,n)xa().b[1][1]++;else return xa().b[1][0]++,xa().s[8]++,e([]);const t=(xa().s[9]++,wU.parse(n)),i=(xa().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");xa().s[11]++,t.pathname===i?(xa().b[2][0]++,xa().s[12]++,t.pathname="/fontstacks.json"):(xa().b[2][1]++,xa().s[13]++,t.pathname=t.pathname.replace(i,".json"));const r=(xa().s[14]++,wU.format(t));xa().s[15]++,bG(r,[],e)}function yfe(n,e){if(xa().f[5]++,xa().s[16]++,n)xa().b[3][1]++;else return xa().b[3][0]++,xa().s[17]++,e([]);const t=(xa().s[18]++,n+".json");xa().s[19]++,bG(t,{},i=>(xa().f[6]++,xa().s[20]++,e(Object.keys(i))))}function fd(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return fd=function(){return l},l}fd();function xG(n,e){fd().f[0]++;const t=(fd().s[0]++,Aq(n,e));return fd().s[1]++,t.map(i=>(fd().f[1]++,fd().s[2]++,i.command+" "+i.args.join(" ")))}function vfe(n,e){return fd().f[2]++,fd().s[3]++,xG(n,e).map(t=>(fd().f[3]++,fd().s[4]++,"Undo "+t))}function Cfe(n,e){return fd().f[4]++,fd().s[5]++,xG(n,e).map(t=>(fd().f[5]++,fd().s[6]++,"Redo "+t))}function Cc(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="d72dae9738057e855ea98626011f8090b99877cc",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:19},end:{line:4,column:55}},2:{start:{line:5,column:2},end:{line:8,column:3}},3:{start:{line:6,column:4},end:{line:6,column:44}},4:{start:{line:7,column:4},end:{line:7,column:75}},5:{start:{line:9,column:2},end:{line:9,column:18}},6:{start:{line:12,column:2},end:{line:12,column:41}},7:{start:{line:13,column:2},end:{line:23,column:3}},8:{start:{line:14,column:21},end:{line:17,column:6}},9:{start:{line:18,column:17},end:{line:18,column:38}},10:{start:{line:19,column:4},end:{line:19,column:43}},11:{start:{line:21,column:4},end:{line:21,column:63}},12:{start:{line:22,column:4},end:{line:22,column:28}}},fnMap:{0:{name:"getStyleUrlFromAddressbarAndRemoveItIfNeeded",decl:{start:{line:2,column:16},end:{line:2,column:60}},loc:{start:{line:2,column:63},end:{line:10,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:11,column:22},end:{line:11,column:34}},loc:{start:{line:11,column:45},end:{line:24,column:1}},line:11}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAGX,gBAAS,+CAA8D;AAC5E,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,QAAM,WAAW,WAAW,aAAa,IAAI,OAAO;AACpD,MAAI,UAAU;AACZ,eAAW,aAAa,OAAO,OAAO;AACtC,WAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AAAA,EACvE;AACA,SAAO;AACT;AAEA,sBAAsB,aAAa,UAAqD;AACtF,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,MAAI;AACF,UAAM,WAAW,MAAM,MAAM,UAAU;AAAA,MACrC,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,MAAM,oBAAoB,IAAI;AAAA,EACvC,QAAQ;AACN,YAAQ,KAAK,oCAAoC,QAAQ;AACzD,WAAO,MAAM;AAAA,EACf;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d72dae9738057e855ea98626011f8090b99877cc"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Cc=function(){return l},l}Cc();function _fe(){Cc().f[0]++;const n=(Cc().s[0]++,new URL(window.location.href)),e=(Cc().s[1]++,n.searchParams.get("style"));return Cc().s[2]++,e?(Cc().b[0][0]++,Cc().s[3]++,n.searchParams.delete("style"),Cc().s[4]++,window.history.replaceState({},document.title,n.toString())):Cc().b[0][1]++,Cc().s[5]++,e}async function MG(n){Cc().f[1]++,Cc().s[6]++,console.log("Loading style",n),Cc().s[7]++;try{const e=(Cc().s[8]++,await fetch(n,{mode:"cors",credentials:"same-origin"})),t=(Cc().s[9]++,await e.json());return Cc().s[10]++,qd.ensureStyleValidity(t)}catch{return Cc().s[11]++,console.warn("Could not fetch default style: "+n),Cc().s[12]++,qd.emptyStyle}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var MB=function(n,e){return MB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])},MB(n,e)};function wG(n,e){MB(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function bfe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function xfe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,a=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(o){l={error:o}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return a}function Mfe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(xfe(arguments[e]));return n}var SG=function(){function n(e,t){this.target=t,this.type=e}return n}(),wfe=function(n){wG(e,n);function e(t,i){var r=n.call(this,"error",i)||this;return r.message=t.message,r.error=t,r}return e}(SG),Sfe=function(n){wG(e,n);function e(t,i,r){t===void 0&&(t=1e3),i===void 0&&(i="");var a=n.call(this,"close",r)||this;return a.wasClean=!0,a.code=t,a.reason=i,a}return e}(SG);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var Efe=function(){if(typeof WebSocket<"u")return WebSocket},Bfe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},_1={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0};(function(){function n(e,t,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(a){r._debug("open event");var l=r._options.minUptime,o=l===void 0?_1.minUptime:l;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},o),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(p){return r._ws.send(p)}),r._messageQueue=[],r.onopen&&r.onopen(a),r._listeners.open.forEach(function(p){return r._callEventListener(a,p)})},this._handleMessage=function(a){r._debug("message event"),r.onmessage&&r.onmessage(a),r._listeners.message.forEach(function(l){return r._callEventListener(a,l)})},this._handleError=function(a){r._debug("error event",a.message),r._disconnect(void 0,a.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(a),r._debug("exec error listeners"),r._listeners.error.forEach(function(l){return r._callEventListener(a,l)}),r._connect()},this._handleClose=function(a){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(a),r._listeners.close.forEach(function(l){return r._callEventListener(a,l)})},this._url=e,this._protocols=t,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,i){return typeof i=="string"?t+=i.length:i instanceof Blob?t+=i.size:t+=i.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,i=t===void 0?_1.maxEnqueuedMessages:t;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,i,r=this._listeners[e.type];if(r)try{for(var a=bfe(r),l=a.next();!l.done;l=a.next()){var o=l.value;this._callEventListener(e,o)}}catch(p){t={error:p}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,Mfe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,i=t===void 0?_1.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,a=r===void 0?_1.minReconnectionDelay:r,l=e.maxReconnectionDelay,o=l===void 0?_1.maxReconnectionDelay:l,p=0;return this._retryCount>0&&(p=a*Math.pow(i,this._retryCount-1),p>o&&(p=o)),this._debug("next delay",p),p},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,i=t.maxRetries,r=i===void 0?_1.maxRetries:i,a=t.connectionTimeout,l=a===void 0?_1.connectionTimeout:a,o=t.WebSocket,p=o===void 0?Efe():o;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!Bfe(p))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(C){e._closeCalled||(e._debug("connect",{url:C,protocols:e._protocols}),e._ws=e._protocols?new p(C,e._protocols):new p(C),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},l))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new wfe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new Sfe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n})();function EG(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",e="511b7cd31edca7d05c4852901896ddb82085d1f5",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:37}},3:{start:{line:13,column:17},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:27,column:5}},8:{start:{line:20,column:23},end:{line:20,column:79}},9:{start:{line:21,column:19},end:{line:21,column:40}},10:{start:{line:22,column:23},end:{line:22,column:27}},11:{start:{line:23,column:6},end:{line:23,column:39}},12:{start:{line:24,column:6},end:{line:24,column:32}},13:{start:{line:26,column:6},end:{line:26,column:54}},14:{start:{line:30,column:23},end:{line:30,column:67}},15:{start:{line:31,column:4},end:{line:42,column:6}},16:{start:{line:32,column:6},end:{line:32,column:26}},17:{start:{line:32,column:19},end:{line:32,column:26}},18:{start:{line:33,column:6},end:{line:33,column:52}},19:{start:{line:34,column:24},end:{line:34,column:40}},20:{start:{line:35,column:6},end:{line:39,column:7}},21:{start:{line:36,column:8},end:{line:36,column:41}},22:{start:{line:38,column:8},end:{line:38,column:27}},23:{start:{line:40,column:27},end:{line:40,column:65}},24:{start:{line:41,column:6},end:{line:41,column:44}},25:{start:{line:45,column:4},end:{line:53,column:5}},26:{start:{line:46,column:23},end:{line:48,column:8}},27:{start:{line:49,column:19},end:{line:49,column:40}},28:{start:{line:50,column:6},end:{line:50,column:45}},29:{start:{line:52,column:6},end:{line:52,column:92}},30:{start:{line:57,column:22},end:{line:61,column:5}},31:{start:{line:62,column:15},end:{line:62,column:26}},32:{start:{line:63,column:4},end:{line:72,column:7}},33:{start:{line:71,column:6},end:{line:71,column:38}},34:{start:{line:71,column:17},end:{line:71,column:38}},35:{start:{line:73,column:4},end:{line:73,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:28,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:23},end:{line:43,column:3}},line:29},4:{name:"(anonymous_4)",decl:{start:{line:31,column:27},end:{line:31,column:28}},loc:{start:{line:31,column:34},end:{line:42,column:5}},line:31},5:{name:"(anonymous_5)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:25},end:{line:54,column:3}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:17},end:{line:74,column:3}},line:56},7:{name:"(anonymous_7)",decl:{start:{line:70,column:13},end:{line:70,column:14}},loc:{start:{line:70,column:29},end:{line:72,column:5}},line:70}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:32,column:6},end:{line:32,column:26}},type:"if",locations:[{start:{line:32,column:6},end:{line:32,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},2:{loc:{start:{line:45,column:4},end:{line:53,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:53,column:5}},{start:{line:51,column:11},end:{line:53,column:5}}],line:45},3:{loc:{start:{line:71,column:6},end:{line:71,column:38}},type:"if",locations:[{start:{line:71,column:6},end:{line:71,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:71}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,2BAA2B;AAO3B,aAAM,cAAqC;AAAA,EAEhD;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,OAAO,SAAS;AAC7B,UAAM,OAAO;AACb,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,MAAM,OAAsB;AAC1B,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,WAAW,EAAC,MAAM,OAAM,CAAC;AACtE,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AAAA,IAC1B,QAAQ;AACN,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAAA,EACF;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,MAAM,iBAAoD;AACxD,QAAG,KAAK,eAAe;AACrB,YAAM,WAAW,MAAM,MAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QAC5E,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,aAAO,MAAM,oBAAoB,IAAI;AAAA,IACvC,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511b7cd31edca7d05c4852901896ddb82085d1f5"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return EG=function(){return l},l}EG();function Fi(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",e="1506dd6f3469e4801b7fd940c02682bf4ad7b098",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:39}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:51,column:4},end:{line:56,column:5}},22:{start:{line:51,column:17},end:{line:51,column:18}},23:{start:{line:52,column:18},end:{line:52,column:44}},24:{start:{line:53,column:6},end:{line:55,column:7}},25:{start:{line:54,column:8},end:{line:54,column:44}},26:{start:{line:60,column:4},end:{line:62,column:5}},27:{start:{line:61,column:6},end:{line:61,column:32}},28:{start:{line:63,column:20},end:{line:63,column:67}},29:{start:{line:64,column:22},end:{line:64,column:68}},30:{start:{line:65,column:4},end:{line:67,column:5}},31:{start:{line:66,column:6},end:{line:66,column:35}},32:{start:{line:68,column:4},end:{line:68,column:30}},33:{start:{line:72,column:4},end:{line:72,column:51}},34:{start:{line:73,column:16},end:{line:73,column:37}},35:{start:{line:74,column:19},end:{line:77,column:5}},36:{start:{line:75,column:6},end:{line:75,column:65}},37:{start:{line:76,column:6},end:{line:76,column:67}},38:{start:{line:78,column:4},end:{line:89,column:5}},39:{start:{line:79,column:6},end:{line:79,column:15}},40:{start:{line:81,column:6},end:{line:88,column:7}},41:{start:{line:84,column:8},end:{line:84,column:21}},42:{start:{line:85,column:8},end:{line:85,column:17}},43:{start:{line:87,column:8},end:{line:87,column:16}},44:{start:{line:90,column:4},end:{line:90,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:35},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:50,column:2},end:{line:50,column:3}},loc:{start:{line:50,column:10},end:{line:57,column:3}},line:50},7:{name:"(anonymous_7)",decl:{start:{line:59,column:2},end:{line:59,column:3}},loc:{start:{line:59,column:25},end:{line:69,column:3}},line:59},8:{name:"(anonymous_8)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:17},end:{line:91,column:3}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:74,column:19},end:{line:74,column:20}},loc:{start:{line:74,column:25},end:{line:77,column:5}},line:74}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:53,column:6},end:{line:55,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:55,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},4:{loc:{start:{line:60,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:62,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},5:{loc:{start:{line:65,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:67,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},6:{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:86,column:13},end:{line:88,column:7}}],line:81},7:{loc:{start:{line:81,column:10},end:{line:83,column:81}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:35}},{start:{line:81,column:40},end:{line:81,column:53}},{start:{line:82,column:6},end:{line:82,column:21}},{start:{line:83,column:6},end:{line:83,column:37}},{start:{line:83,column:41},end:{line:83,column:80}}],line:81}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,mBAAsD;AACpE,SAAO,aAAa,eAAe;AACrC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAkC;AAAA;AAAA;AAAA;AAAA,EAI7C;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,MAAM,iBAAoD;AACxD,QAAG,KAAK,UAAU,WAAW,GAAG;AAC9B,aAAO,iBAAiB;AAAA,IAC1B;AACA,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAI,WAAW;AACb,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AACA,WAAO,iBAAiB;AAAA,EAC1B;AAAA;AAAA,EAGA,KAAK,UAAoC;AACvC,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAEhC,UAAM,SAAS,MAAM;AACnB,aAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,aAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAAA,IAC7D;AAEA,QAAI;AACF,aAAO;AAAA,IACT,SAAS,GAAG;AAEV,UAAI,aAAa,iBACf,EAAE,SAAS;AAAA,MACX,EAAE,SAAS;AAAA,MACX,EAAE,SAAS,wBACX,EAAE,SAAS,+BACV;AACD,aAAK,MAAM;AACX,eAAO;AAAA,MACT,OAAO;AACL,cAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1506dd6f3469e4801b7fd940c02682bf4ad7b098"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Fi=function(){return l},l}Fi();const J2=(Fi().s[0]++,"maputnik"),BG=(Fi().s[1]++,"style"),SU=(Fi().s[2]++,{latest:[J2,"latest_style"].join(":")}),Ofe=(Fi().s[3]++,hG[0].url);function EU(){return Fi().f[0]++,Fi().s[4]++,MG(Ofe)}function Ife(){Fi().f[1]++;const n=(Fi().s[5]++,[]);Fi().s[6]++;for(let e=(Fi().s[7]++,0);e<window.localStorage.length;e++){const t=(Fi().s[8]++,window.localStorage.key(e));Fi().s[9]++,OG(t)?(Fi().b[0][0]++,Fi().s[10]++,n.push(Tfe(t))):Fi().b[0][1]++}return Fi().s[11]++,n}function OG(n){Fi().f[2]++;const e=(Fi().s[12]++,n.split(":"));return Fi().s[13]++,Fi().b[1][0]++,e.length===3&&(Fi().b[1][1]++,e[0]===J2)&&(Fi().b[1][2]++,e[1]===BG)}function Tfe(n){if(Fi().f[3]++,Fi().s[14]++,OG(n))Fi().b[2][1]++;else throw Fi().b[2][0]++,Fi().s[15]++,"Key is not a valid style key";const e=(Fi().s[16]++,n.split(":")),t=(Fi().s[17]++,e[2]);return Fi().s[18]++,t}function BU(n){return Fi().f[4]++,Fi().s[19]++,[J2,BG,n].join(":")}class kfe{mapStyles;constructor(){Fi().f[5]++,Fi().s[20]++,this.mapStyles=Ife()}purge(){Fi().f[6]++,Fi().s[21]++;for(let e=(Fi().s[22]++,0);e<window.localStorage.length;e++){const t=(Fi().s[23]++,window.localStorage.key(e));Fi().s[24]++,t.startsWith(J2)?(Fi().b[3][0]++,Fi().s[25]++,window.localStorage.removeItem(t)):Fi().b[3][1]++}}async getLatestStyle(){if(Fi().f[7]++,Fi().s[26]++,this.mapStyles.length===0)return Fi().b[4][0]++,Fi().s[27]++,EU();Fi().b[4][1]++;const e=(Fi().s[28]++,window.localStorage.getItem(SU.latest)),t=(Fi().s[29]++,window.localStorage.getItem(BU(e)));return Fi().s[30]++,t?(Fi().b[5][0]++,Fi().s[31]++,JSON.parse(t)):(Fi().b[5][1]++,Fi().s[32]++,EU())}save(e){Fi().f[8]++,Fi().s[33]++,e=qd.ensureStyleValidity(e);const t=(Fi().s[34]++,BU(e.id));Fi().s[35]++;const i=()=>{Fi().f[9]++,Fi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),Fi().s[37]++,window.localStorage.setItem(SU.latest,e.id)};Fi().s[38]++;try{Fi().s[39]++,i()}catch(r){if(Fi().s[40]++,Fi().b[7][0]++,r instanceof DOMException&&(Fi().b[7][1]++,r.code===22||(Fi().b[7][2]++,r.code===1014)||(Fi().b[7][3]++,r.name==="QuotaExceededError")||(Fi().b[7][4]++,r.name==="NS_ERROR_DOM_QUOTA_REACHED")))Fi().b[6][0]++,Fi().s[41]++,this.purge(),Fi().s[42]++,i();else throw Fi().b[6][1]++,Fi().s[43]++,r}return Fi().s[44]++,e}}function hd(){var n="/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",e="2de8d55bfe17551e08818e39ce7b23b7139f970e",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:65}},1:{start:{line:6,column:22},end:{line:6,column:118}},2:{start:{line:8,column:2},end:{line:20,column:3}},3:{start:{line:9,column:26},end:{line:11,column:6}},4:{start:{line:10,column:40},end:{line:10,column:81}},5:{start:{line:12,column:4},end:{line:17,column:5}},6:{start:{line:13,column:6},end:{line:13,column:33}},7:{start:{line:14,column:6},end:{line:14,column:33}},8:{start:{line:16,column:6},end:{line:16,column:36}},9:{start:{line:19,column:4},end:{line:19,column:34}},10:{start:{line:21,column:22},end:{line:21,column:100}},11:{start:{line:22,column:2},end:{line:22,column:66}},12:{start:{line:23,column:2},end:{line:23,column:20}}},fnMap:{0:{name:"createStyleStore",decl:{start:{line:4,column:22},end:{line:4,column:38}},loc:{start:{line:4,column:55},end:{line:24,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:10,column:26},end:{line:10,column:27}},loc:{start:{line:10,column:40},end:{line:10,column:81}},line:10}},branchMap:{0:{loc:{start:{line:6,column:22},end:{line:6,column:118}},type:"binary-expr",locations:[{start:{line:6,column:22},end:{line:6,column:30}},{start:{line:6,column:34},end:{line:6,column:118}}],line:6},1:{loc:{start:{line:8,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:8,column:2},end:{line:20,column:3}},{start:{line:18,column:9},end:{line:20,column:3}}],line:8},2:{loc:{start:{line:21,column:22},end:{line:21,column:100}},type:"cond-expr",locations:[{start:{line:21,column:36},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:100}}],line:21}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/store/style-store-factory.ts"],names:[],mappings:"AAEA,SAAS,8CAA8C,oBAAoB;AAC3E,SAAS,qBAAqB;AAC9B,SAAS,kBAAkB;AAE3B,sBAAsB,iBAAiB,gBAA8D;AACnG,QAAM,WAAW,6CAA6C;AAC9D,QAAM,cAAc,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B;AACnH,MAAI;AACJ,MAAI,OAAoD;AACtD,UAAM,gBAAgB,IAAI,cAAc;AAAA,MACtC,oBAAoB,CAAA,aAAY,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,IACxE,CAAC;AACD,QAAI;AACF,YAAM,cAAc,KAAK;AACzB,mBAAa;AAAA,IACf,QAAQ;AACN,mBAAa,IAAI,WAAW;AAAA,IAC9B;AAAA,EACF,OAAO;AACL,iBAAa,IAAI,WAAW;AAAA,EAC9B;AACA,QAAM,cAAc,cAAc,MAAM,aAAa,QAAQ,IAAI,MAAM,WAAW,eAAe;AACjG,iBAAe,aAAa,EAAC,aAAa,MAAM,MAAM,MAAK,CAAC;AAC5D,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2de8d55bfe17551e08818e39ce7b23b7139f970e"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return hd=function(){return l},l}hd();async function Dfe(n){hd().f[0]++;const e=(hd().s[0]++,_fe()),t=(hd().s[1]++,hd().b[0][0]++,e&&(hd().b[0][1]++,window.confirm("Load style from URL: "+e+" and discard current changes?")));let i;hd().s[2]++,hd().b[1][1]++,hd().s[9]++,i=new kfe;const r=(hd().s[10]++,t?(hd().b[2][0]++,await MG(e)):(hd().b[2][1]++,await i.getLatestStyle()));return hd().s[11]++,n(r,{initialLoad:!0,save:!1}),hd().s[12]++,i}function Pl(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAAoC;AAG9C,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2443d70bd38cc3b176918d5f84a8a7d35a1ef2fe"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Pl=function(){return l},l}Pl();class Rfe{revisions;currentIdx;constructor(e=(Pl().b[0][0]++,[])){Pl().f[0]++,Pl().s[0]++,this.revisions=e,Pl().s[1]++,this.currentIdx=e.length-1}get latest(){return Pl().f[1]++,Pl().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Pl().f[2]++,Pl().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Pl().f[3]++,Pl().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Pl().s[5]++,this.revisions.push(e),Pl().s[6]++,this.currentIdx++}undo(){return Pl().f[4]++,Pl().s[7]++,this.currentIdx>0?(Pl().b[1][0]++,Pl().s[8]++,this.currentIdx--):Pl().b[1][1]++,Pl().s[9]++,this.current}redo(){return Pl().f[5]++,Pl().s[10]++,this.currentIdx<this.revisions.length-1?(Pl().b[2][0]++,Pl().s[11]++,this.currentIdx++):Pl().b[2][1]++,Pl().s[12]++,this.current}}var i6,OU;function Pfe(){if(OU)return i6;OU=1;var n="Expected a function",e=NaN,t="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,p=typeof window=="object"&&window&&window.Object===Object&&window,C=typeof self=="object"&&self&&self.Object===Object&&self,w=p||C||Function("return this")(),O=Object.prototype,U=O.toString,K=Math.max,j=Math.min,W=function(){return w.Date.now()};function Y(ae,G,ce){var ge,ye,we,Oe,Se,Ve,xe=0,ze=!1,st=!1,Ct=!0;if(typeof ae!="function")throw new TypeError(n);G=$(G)||0,J(ce)&&(ze=!!ce.leading,st="maxWait"in ce,we=st?K($(ce.maxWait)||0,G):we,Ct="trailing"in ce?!!ce.trailing:Ct);function nt(Fe){var Ke=ge,Re=ye;return ge=ye=void 0,xe=Fe,Oe=ae.apply(Re,Ke),Oe}function be(Fe){return xe=Fe,Se=setTimeout(lt,G),ze?nt(Fe):Oe}function Ne(Fe){var Ke=Fe-Ve,Re=Fe-xe,He=G-Ke;return st?j(He,we-Re):He}function tt(Fe){var Ke=Fe-Ve,Re=Fe-xe;return Ve===void 0||Ke>=G||Ke<0||st&&Re>=we}function lt(){var Fe=W();if(tt(Fe))return kt(Fe);Se=setTimeout(lt,Ne(Fe))}function kt(Fe){return Se=void 0,Ct&&ge?nt(Fe):(ge=ye=void 0,Oe)}function gt(){Se!==void 0&&clearTimeout(Se),xe=0,ge=Ve=ye=Se=void 0}function St(){return Se===void 0?Oe:kt(W())}function Ut(){var Fe=W(),Ke=tt(Fe);if(ge=arguments,ye=this,Ve=Fe,Ke){if(Se===void 0)return be(Ve);if(st)return Se=setTimeout(lt,G),nt(Ve)}return Se===void 0&&(Se=setTimeout(lt,G)),Oe}return Ut.cancel=gt,Ut.flush=St,Ut}function te(ae,G,ce){var ge=!0,ye=!0;if(typeof ae!="function")throw new TypeError(n);return J(ce)&&(ge="leading"in ce?!!ce.leading:ge,ye="trailing"in ce?!!ce.trailing:ye),Y(ae,G,{leading:ge,maxWait:G,trailing:ye})}function J(ae){var G=typeof ae;return!!ae&&(G=="object"||G=="function")}function oe(ae){return!!ae&&typeof ae=="object"}function ne(ae){return typeof ae=="symbol"||oe(ae)&&U.call(ae)==t}function $(ae){if(typeof ae=="number")return ae;if(ne(ae))return e;if(J(ae)){var G=typeof ae.valueOf=="function"?ae.valueOf():ae;ae=J(G)?G+"":G}if(typeof ae!="string")return ae===0?ae:+ae;ae=ae.replace(i,"");var ce=a.test(ae);return ce||l.test(ae)?o(ae.slice(2),ce?2:8):r.test(ae)?e:+ae}return i6=te,i6}var Kfe=Pfe();const Ufe=AA(Kfe);var YC={exports:{}};YC.exports;var IU;function Lfe(){return IU||(IU=1,function(n,e){var t=200,i="__lodash_hash_undefined__",r=1,a=2,l=9007199254740991,o="[object Arguments]",p="[object Array]",C="[object AsyncFunction]",w="[object Boolean]",O="[object Date]",U="[object Error]",K="[object Function]",j="[object GeneratorFunction]",W="[object Map]",Y="[object Number]",te="[object Null]",J="[object Object]",oe="[object Promise]",ne="[object Proxy]",$="[object RegExp]",ae="[object Set]",G="[object String]",ce="[object Symbol]",ge="[object Undefined]",ye="[object WeakMap]",we="[object ArrayBuffer]",Oe="[object DataView]",Se="[object Float32Array]",Ve="[object Float64Array]",xe="[object Int8Array]",ze="[object Int16Array]",st="[object Int32Array]",Ct="[object Uint8Array]",nt="[object Uint8ClampedArray]",be="[object Uint16Array]",Ne="[object Uint32Array]",tt=/[\\^$.*+?()[\]{}|]/g,lt=/^\[object .+?Constructor\]$/,kt=/^(?:0|[1-9]\d*)$/,gt={};gt[Se]=gt[Ve]=gt[xe]=gt[ze]=gt[st]=gt[Ct]=gt[nt]=gt[be]=gt[Ne]=!0,gt[o]=gt[p]=gt[we]=gt[w]=gt[Oe]=gt[O]=gt[U]=gt[K]=gt[W]=gt[Y]=gt[J]=gt[$]=gt[ae]=gt[G]=gt[ye]=!1;var St=typeof window=="object"&&window&&window.Object===Object&&window,Ut=typeof self=="object"&&self&&self.Object===Object&&self,Fe=St||Ut||Function("return this")(),Ke=e&&!e.nodeType&&e,Re=Ke&&!0&&n&&!n.nodeType&&n,He=Re&&Re.exports===Ke,bt=He&&St.process,_t=function(){try{return bt&&bt.binding&&bt.binding("util")}catch{}}(),Ot=_t&&_t.isTypedArray;function qt(ee,Be){for(var at=-1,Gt=ee==null?0:ee.length,Si=0,Xn=[];++at<Gt;){var $i=ee[at];Be($i,at,ee)&&(Xn[Si++]=$i)}return Xn}function Kt(ee,Be){for(var at=-1,Gt=Be.length,Si=ee.length;++at<Gt;)ee[Si+at]=Be[at];return ee}function on(ee,Be){for(var at=-1,Gt=ee==null?0:ee.length;++at<Gt;)if(Be(ee[at],at,ee))return!0;return!1}function Jn(ee,Be){for(var at=-1,Gt=Array(ee);++at<ee;)Gt[at]=Be(at);return Gt}function Wt(ee){return function(Be){return ee(Be)}}function $n(ee,Be){return ee.has(Be)}function On(ee,Be){return ee?.[Be]}function Bn(ee){var Be=-1,at=Array(ee.size);return ee.forEach(function(Gt,Si){at[++Be]=[Si,Gt]}),at}function In(ee,Be){return function(at){return ee(Be(at))}}function Oi(ee){var Be=-1,at=Array(ee.size);return ee.forEach(function(Gt){at[++Be]=Gt}),at}var ei=Array.prototype,Kn=Function.prototype,je=Object.prototype,de=Fe["__core-js_shared__"],re=Kn.toString,le=je.hasOwnProperty,pe=function(){var ee=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Te=je.toString,We=RegExp("^"+re.call(le).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=He?Fe.Buffer:void 0,Ye=Fe.Symbol,De=Fe.Uint8Array,Ze=je.propertyIsEnumerable,g=ei.splice,mt=Ye?Ye.toStringTag:void 0,ht=Object.getOwnPropertySymbols,Tt=dt?dt.isBuffer:void 0,it=In(Object.keys,Object),en=ko(Fe,"DataView"),Dn=ko(Fe,"Map"),Mn=ko(Fe,"Promise"),ii=ko(Fe,"Set"),Wn=ko(Fe,"WeakMap"),qi=ko(Object,"create"),er=jo(en),Ei=jo(Dn),hi=jo(Mn),ti=jo(ii),Wi=jo(Wn),wn=Ye?Ye.prototype:void 0,uo=wn?wn.valueOf:void 0;function Hi(ee){var Be=-1,at=ee==null?0:ee.length;for(this.clear();++Be<at;){var Gt=ee[Be];this.set(Gt[0],Gt[1])}}function ma(){this.__data__=qi?qi(null):{},this.size=0}function To(ee){var Be=this.has(ee)&&delete this.__data__[ee];return this.size-=Be?1:0,Be}function Zn(ee){var Be=this.__data__;if(qi){var at=Be[ee];return at===i?void 0:at}return le.call(Be,ee)?Be[ee]:void 0}function lr(ee){var Be=this.__data__;return qi?Be[ee]!==void 0:le.call(Be,ee)}function zi(ee,Be){var at=this.__data__;return this.size+=this.has(ee)?0:1,at[ee]=qi&&Be===void 0?i:Be,this}Hi.prototype.clear=ma,Hi.prototype.delete=To,Hi.prototype.get=Zn,Hi.prototype.has=lr,Hi.prototype.set=zi;function vr(ee){var Be=-1,at=ee==null?0:ee.length;for(this.clear();++Be<at;){var Gt=ee[Be];this.set(Gt[0],Gt[1])}}function Fa(){this.__data__=[],this.size=0}function Tr(ee){var Be=this.__data__,at=si(Be,ee);if(at<0)return!1;var Gt=Be.length-1;return at==Gt?Be.pop():g.call(Be,at,1),--this.size,!0}function ji(ee){var Be=this.__data__,at=si(Be,ee);return at<0?void 0:Be[at][1]}function gl(ee){return si(this.__data__,ee)>-1}function ka(ee,Be){var at=this.__data__,Gt=si(at,ee);return Gt<0?(++this.size,at.push([ee,Be])):at[Gt][1]=Be,this}vr.prototype.clear=Fa,vr.prototype.delete=Tr,vr.prototype.get=ji,vr.prototype.has=gl,vr.prototype.set=ka;function wo(ee){var Be=-1,at=ee==null?0:ee.length;for(this.clear();++Be<at;){var Gt=ee[Be];this.set(Gt[0],Gt[1])}}function Xa(){this.size=0,this.__data__={hash:new Hi,map:new(Dn||vr),string:new Hi}}function Il(ee){var Be=$o(this,ee).delete(ee);return this.size-=Be?1:0,Be}function Ao(ee){return $o(this,ee).get(ee)}function Wu(ee){return $o(this,ee).has(ee)}function Da(ee,Be){var at=$o(this,ee),Gt=at.size;return at.set(ee,Be),this.size+=at.size==Gt?0:1,this}wo.prototype.clear=Xa,wo.prototype.delete=Il,wo.prototype.get=Ao,wo.prototype.has=Wu,wo.prototype.set=Da;function Vi(ee){var Be=-1,at=ee==null?0:ee.length;for(this.__data__=new wo;++Be<at;)this.add(ee[Be])}function Mi(ee){return this.__data__.set(ee,i),this}function us(ee){return this.__data__.has(ee)}Vi.prototype.add=Vi.prototype.push=Mi,Vi.prototype.has=us;function Ma(ee){var Be=this.__data__=new vr(ee);this.size=Be.size}function Vo(){this.__data__=new vr,this.size=0}function $e(ee){var Be=this.__data__,at=Be.delete(ee);return this.size=Be.size,at}function Et(ee){return this.__data__.get(ee)}function xn(ee){return this.__data__.has(ee)}function Gn(ee,Be){var at=this.__data__;if(at instanceof vr){var Gt=at.__data__;if(!Dn||Gt.length<t-1)return Gt.push([ee,Be]),this.size=++at.size,this;at=this.__data__=new wo(Gt)}return at.set(ee,Be),this.size=at.size,this}Ma.prototype.clear=Vo,Ma.prototype.delete=$e,Ma.prototype.get=Et,Ma.prototype.has=xn,Ma.prototype.set=Gn;function rn(ee,Be){var at=wa(ee),Gt=!at&&za(ee),Si=!at&&!Gt&&Dr(ee),Xn=!at&&!Gt&&!Si&&vl(ee),$i=at||Gt||Si||Xn,or=$i?Jn(ee.length,String):[],Ri=or.length;for(var Xi in ee)le.call(ee,Xi)&&!($i&&(Xi=="length"||Si&&(Xi=="offset"||Xi=="parent")||Xn&&(Xi=="buffer"||Xi=="byteLength"||Xi=="byteOffset")||Ul(Xi,Ri)))&&or.push(Xi);return or}function si(ee,Be){for(var at=ee.length;at--;)if(Eo(ee[at][0],Be))return at;return-1}function eo(ee,Be,at){var Gt=Be(ee);return wa(ee)?Gt:Kt(Gt,at(ee))}function So(ee){return ee==null?ee===void 0?ge:te:mt&&mt in Object(ee)?dr(ee):cA(ee)}function As(ee){return Rr(ee)&&So(ee)==o}function Ls(ee,Be,at,Gt,Si){return ee===Be?!0:ee==null||Be==null||!Rr(ee)&&!Rr(Be)?ee!==ee&&Be!==Be:Qu(ee,Be,at,Gt,Ls,Si)}function Qu(ee,Be,at,Gt,Si,Xn){var $i=wa(ee),or=wa(Be),Ri=$i?p:ga(ee),Xi=or?p:ga(Be);Ri=Ri==o?J:Ri,Xi=Xi==o?J:Xi;var to=Ri==J,co=Xi==J,Ar=Ri==Xi;if(Ar&&Dr(ee)){if(!Dr(Be))return!1;$i=!0,to=!1}if(Ar&&!to)return Xn||(Xn=new Ma),$i||vl(ee)?yl(ee,Be,at,Gt,Si,Xn):Ss(ee,Be,Ri,at,Gt,Si,Xn);if(!(at&r)){var mr=to&&le.call(ee,"__wrapped__"),ho=co&&le.call(Be,"__wrapped__");if(mr||ho){var No=mr?ee.value():ee,jr=ho?Be.value():Be;return Xn||(Xn=new Ma),Si(No,jr,at,Gt,Xn)}}return Ar?(Xn||(Xn=new Ma),xc(ee,Be,at,Gt,Si,Xn)):!1}function Qi(ee){if(!ya(ee)||xr(ee))return!1;var Be=ja(ee)?We:lt;return Be.test(jo(ee))}function RA(ee){return Rr(ee)&&Ja(ee.length)&&!!gt[So(ee)]}function _u(ee){if(!iu(ee))return it(ee);var Be=[];for(var at in Object(ee))le.call(ee,at)&&at!="constructor"&&Be.push(at);return Be}function yl(ee,Be,at,Gt,Si,Xn){var $i=at&r,or=ee.length,Ri=Be.length;if(or!=Ri&&!($i&&Ri>or))return!1;var Xi=Xn.get(ee);if(Xi&&Xn.get(Be))return Xi==Be;var to=-1,co=!0,Ar=at&a?new Vi:void 0;for(Xn.set(ee,Be),Xn.set(Be,ee);++to<or;){var mr=ee[to],ho=Be[to];if(Gt)var No=$i?Gt(ho,mr,to,Be,ee,Xn):Gt(mr,ho,to,ee,Be,Xn);if(No!==void 0){if(No)continue;co=!1;break}if(Ar){if(!on(Be,function(jr,qs){if(!$n(Ar,qs)&&(mr===jr||Si(mr,jr,at,Gt,Xn)))return Ar.push(qs)})){co=!1;break}}else if(!(mr===ho||Si(mr,ho,at,Gt,Xn))){co=!1;break}}return Xn.delete(ee),Xn.delete(Be),co}function Ss(ee,Be,at,Gt,Si,Xn,$i){switch(at){case Oe:if(ee.byteLength!=Be.byteLength||ee.byteOffset!=Be.byteOffset)return!1;ee=ee.buffer,Be=Be.buffer;case we:return!(ee.byteLength!=Be.byteLength||!Xn(new De(ee),new De(Be)));case w:case O:case Y:return Eo(+ee,+Be);case U:return ee.name==Be.name&&ee.message==Be.message;case $:case G:return ee==Be+"";case W:var or=Bn;case ae:var Ri=Gt&r;if(or||(or=Oi),ee.size!=Be.size&&!Ri)return!1;var Xi=$i.get(ee);if(Xi)return Xi==Be;Gt|=a,$i.set(ee,Be);var to=yl(or(ee),or(Be),Gt,Si,Xn,$i);return $i.delete(ee),to;case ce:if(uo)return uo.call(ee)==uo.call(Be)}return!1}function xc(ee,Be,at,Gt,Si,Xn){var $i=at&r,or=Ys(ee),Ri=or.length,Xi=Ys(Be),to=Xi.length;if(Ri!=to&&!$i)return!1;for(var co=Ri;co--;){var Ar=or[co];if(!($i?Ar in Be:le.call(Be,Ar)))return!1}var mr=Xn.get(ee);if(mr&&Xn.get(Be))return mr==Be;var ho=!0;Xn.set(ee,Be),Xn.set(Be,ee);for(var No=$i;++co<Ri;){Ar=or[co];var jr=ee[Ar],qs=Be[Ar];if(Gt)var Ll=$i?Gt(qs,jr,Ar,Be,ee,Xn):Gt(jr,qs,Ar,ee,Be,Xn);if(!(Ll===void 0?jr===qs||Si(jr,qs,at,Gt,Xn):Ll)){ho=!1;break}No||(No=Ar=="constructor")}if(ho&&!No){var Yu=ee.constructor,ps=Be.constructor;Yu!=ps&&"constructor"in ee&&"constructor"in Be&&!(typeof Yu=="function"&&Yu instanceof Yu&&typeof ps=="function"&&ps instanceof ps)&&(ho=!1)}return Xn.delete(ee),Xn.delete(Be),ho}function Ys(ee){return eo(ee,Zi,Kl)}function $o(ee,Be){var at=ee.__data__;return bu(Be)?at[typeof Be=="string"?"string":"hash"]:at.map}function ko(ee,Be){var at=On(ee,Be);return Qi(at)?at:void 0}function dr(ee){var Be=le.call(ee,mt),at=ee[mt];try{ee[mt]=void 0;var Gt=!0}catch{}var Si=Te.call(ee);return Gt&&(Be?ee[mt]=at:delete ee[mt]),Si}var Kl=ht?function(ee){return ee==null?[]:(ee=Object(ee),qt(ht(ee),function(Be){return Ze.call(ee,Be)}))}:wi,ga=So;(en&&ga(new en(new ArrayBuffer(1)))!=Oe||Dn&&ga(new Dn)!=W||Mn&&ga(Mn.resolve())!=oe||ii&&ga(new ii)!=ae||Wn&&ga(new Wn)!=ye)&&(ga=function(ee){var Be=So(ee),at=Be==J?ee.constructor:void 0,Gt=at?jo(at):"";if(Gt)switch(Gt){case er:return Oe;case Ei:return W;case hi:return oe;case ti:return ae;case Wi:return ye}return Be});function Ul(ee,Be){return Be=Be??l,!!Be&&(typeof ee=="number"||kt.test(ee))&&ee>-1&&ee%1==0&&ee<Be}function bu(ee){var Be=typeof ee;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?ee!=="__proto__":ee===null}function xr(ee){return!!pe&&pe in ee}function iu(ee){var Be=ee&&ee.constructor,at=typeof Be=="function"&&Be.prototype||je;return ee===at}function cA(ee){return Te.call(ee)}function jo(ee){if(ee!=null){try{return re.call(ee)}catch{}try{return ee+""}catch{}}return""}function Eo(ee,Be){return ee===Be||ee!==ee&&Be!==Be}var za=As(function(){return arguments}())?As:function(ee){return Rr(ee)&&le.call(ee,"callee")&&!Ze.call(ee,"callee")},wa=Array.isArray;function aa(ee){return ee!=null&&Ja(ee.length)&&!ja(ee)}var Dr=Tt||Yr;function ru(ee,Be){return Ls(ee,Be)}function ja(ee){if(!ya(ee))return!1;var Be=So(ee);return Be==K||Be==j||Be==C||Be==ne}function Ja(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=l}function ya(ee){var Be=typeof ee;return ee!=null&&(Be=="object"||Be=="function")}function Rr(ee){return ee!=null&&typeof ee=="object"}var vl=Ot?Wt(Ot):RA;function Zi(ee){return aa(ee)?rn(ee):_u(ee)}function wi(){return[]}function Yr(){return!1}n.exports=ru}(YC,YC.exports)),YC.exports}var Ffe=Lfe();const wB=AA(Ffe);function Fr(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Fr=function(){return l},l}Fr();class zfe{onSourcesChange;onVectorLayersChange;throttledAnalyzeVectorLayerFields;_sources;_vectorLayers;constructor(e=(Fr().b[0][0]++,{})){Fr().f[0]++,Fr().s[0]++,this.onSourcesChange=(Fr().b[1][0]++,e.onSourcesChange||(Fr().b[1][1]++,()=>{Fr().f[1]++})),Fr().s[1]++,this.onVectorLayersChange=(Fr().b[2][0]++,e.onVectorLayersChange||(Fr().b[2][1]++,()=>{Fr().f[2]++})),Fr().s[2]++,this._sources={},Fr().s[3]++,this._vectorLayers={},Fr().s[4]++,this.throttledAnalyzeVectorLayerFields=Ufe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Fr().f[3]++;const t=(Fr().s[5]++,{...this._sources});Fr().s[6]++,Object.keys(e.style.sourceCaches).forEach(i=>{Fr().f[4]++,Fr().s[7]++,this._sources[i]=e.style.sourceCaches[i]._source.vectorLayerIds}),Fr().s[8]++,wB(t,this._sources)?Fr().b[3][1]++:(Fr().b[3][0]++,Fr().s[9]++,this.onSourcesChange(this._sources)),Fr().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Fr().f[5]++;const t=(Fr().s[11]++,{...this._vectorLayers});Fr().s[12]++,Object.keys(this._sources).forEach(i=>{Fr().f[6]++,Fr().s[13]++,(Fr().b[4][0]++,this._sources[i]||(Fr().b[4][1]++,[])).forEach(r=>{Fr().f[7]++;const a=(Fr().s[14]++,Fr().b[5][0]++,this._vectorLayers[r]||(Fr().b[5][1]++,{})),l=(Fr().s[15]++,{sourceLayer:r});Fr().s[16]++,e.querySourceFeatures(i,l).forEach(o=>{Fr().f[8]++,Fr().s[17]++,Object.keys(o.properties).forEach(p=>{Fr().f[9]++;const C=(Fr().s[18]++,Fr().b[6][0]++,a[p]||(Fr().b[6][1]++,{}));Fr().s[19]++,C[o.properties[p]]={},Fr().s[20]++,a[p]=C})}),Fr().s[21]++,this._vectorLayers[r]=a})}),Fr().s[22]++,wB(t,this._vectorLayers)?Fr().b[7][1]++:(Fr().b[7][0]++,Fr().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Fr().f[10]++,Fr().s[24]++,this._sources}get vectorLayers(){return Fr().f[11]++,Fr().s[25]++,this._vectorLayers}}function Ie(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="c7efcbe06d81163d005fc4370dd80582d4d6cf68",t=globalThis,i="__coverage__",r={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:34,column:0},end:{line:34,column:30}},1:{start:{line:36,column:29},end:{line:36,column:60}},2:{start:{line:37,column:26},end:{line:37,column:54}},3:{start:{line:38,column:31},end:{line:38,column:64}},4:{start:{line:39,column:28},end:{line:39,column:58}},5:{start:{line:40,column:2},end:{line:57,column:3}},6:{start:{line:41,column:24},end:{line:41,column:95}},7:{start:{line:42,column:4},end:{line:44,column:5}},8:{start:{line:43,column:6},end:{line:43,column:47}},9:{start:{line:45,column:9},end:{line:57,column:3}},10:{start:{line:46,column:24},end:{line:46,column:96}},11:{start:{line:47,column:4},end:{line:49,column:5}},12:{start:{line:48,column:6},end:{line:48,column:47}},13:{start:{line:50,column:9},end:{line:57,column:3}},14:{start:{line:51,column:24},end:{line:51,column:93}},15:{start:{line:52,column:4},end:{line:54,column:5}},16:{start:{line:53,column:6},end:{line:53,column:47}},17:{start:{line:56,column:4},end:{line:56,column:15}},18:{start:{line:60,column:2},end:{line:69,column:4}},19:{start:{line:73,column:15},end:{line:73,column:19}},20:{start:{line:76,column:4},end:{line:76,column:17}},21:{start:{line:77,column:4},end:{line:77,column:45}},22:{start:{line:78,column:4},end:{line:78,column:38}},23:{start:{line:79,column:4},end:{line:112,column:6}},24:{start:{line:113,column:4},end:{line:115,column:7}},25:{start:{line:114,column:35},end:{line:114,column:69}},26:{start:{line:117,column:31},end:{line:184,column:3}},27:{start:{line:118,column:22},end:{line:169,column:5}},28:{start:{line:122,column:10},end:{line:122,column:40}},29:{start:{line:128,column:10},end:{line:128,column:35}},30:{start:{line:134,column:10},end:{line:134,column:37}},31:{start:{line:140,column:10},end:{line:140,column:38}},32:{start:{line:146,column:10},end:{line:146,column:39}},33:{start:{line:152,column:10},end:{line:154,column:12}},34:{start:{line:160,column:10},end:{line:160,column:63}},35:{start:{line:166,column:10},end:{line:166,column:36}},36:{start:{line:170,column:4},end:{line:183,column:7}},37:{start:{line:171,column:6},end:{line:182,column:7}},38:{start:{line:172,column:8},end:{line:172,column:24}},39:{start:{line:173,column:8},end:{line:173,column:30}},40:{start:{line:174,column:13},end:{line:182,column:7}},41:{start:{line:175,column:25},end:{line:177,column:10}},42:{start:{line:176,column:10},end:{line:176,column:41}},43:{start:{line:178,column:8},end:{line:181,column:9}},44:{start:{line:179,column:10},end:{line:179,column:44}},45:{start:{line:180,column:10},end:{line:180,column:29}},46:{start:{line:185,column:19},end:{line:203,column:3}},47:{start:{line:186,column:4},end:{line:202,column:5}},48:{start:{line:187,column:6},end:{line:193,column:7}},49:{start:{line:188,column:8},end:{line:188,column:27}},50:{start:{line:189,column:8},end:{line:189,column:22}},51:{start:{line:190,column:13},end:{line:193,column:7}},52:{start:{line:191,column:8},end:{line:191,column:27}},53:{start:{line:192,column:8},end:{line:192,column:22}},54:{start:{line:195,column:6},end:{line:201,column:7}},55:{start:{line:196,column:8},end:{line:196,column:27}},56:{start:{line:197,column:8},end:{line:197,column:22}},57:{start:{line:198,column:13},end:{line:201,column:7}},58:{start:{line:199,column:8},end:{line:199,column:27}},59:{start:{line:200,column:8},end:{line:200,column:22}},60:{start:{line:205,column:4},end:{line:205,column:102}},61:{start:{line:205,column:65},end:{line:205,column:100}},62:{start:{line:206,column:4},end:{line:206,column:60}},63:{start:{line:209,column:4},end:{line:209,column:63}},64:{start:{line:212,column:4},end:{line:212,column:41}},65:{start:{line:215,column:21},end:{line:215,column:55}},66:{start:{line:216,column:24},end:{line:216,column:93}},67:{start:{line:217,column:21},end:{line:217,column:110}},68:{start:{line:218,column:4},end:{line:220,column:7}},69:{start:{line:219,column:6},end:{line:219,column:80}},70:{start:{line:223,column:4},end:{line:225,column:7}},71:{start:{line:224,column:6},end:{line:224,column:80}},72:{start:{line:227,column:29},end:{line:241,column:3}},73:{start:{line:228,column:4},end:{line:232,column:5}},74:{start:{line:229,column:6},end:{line:231,column:9}},75:{start:{line:233,column:25},end:{line:239,column:5}},76:{start:{line:240,column:4},end:{line:240,column:38}},77:{start:{line:242,column:19},end:{line:365,column:3}},78:{start:{line:243,column:4},end:{line:248,column:6}},79:{start:{line:249,column:4},end:{line:251,column:5}},80:{start:{line:250,column:6},end:{line:250,column:71}},81:{start:{line:252,column:4},end:{line:254,column:5}},82:{start:{line:253,column:6},end:{line:253,column:71}},83:{start:{line:255,column:4},end:{line:259,column:5}},84:{start:{line:256,column:6},end:{line:258,column:7}},85:{start:{line:257,column:8},end:{line:257,column:63}},86:{start:{line:260,column:4},end:{line:262,column:5}},87:{start:{line:261,column:6},end:{line:261,column:44}},88:{start:{line:263,column:19},end:{line:263,column:51}},89:{start:{line:264,column:24},end:{line:264,column:26}},90:{start:{line:265,column:4},end:{line:276,column:5}},91:{start:{line:266,column:26},end:{line:266,column:42}},92:{start:{line:267,column:6},end:{line:275,column:9}},93:{start:{line:268,column:8},end:{line:273,column:9}},94:{start:{line:269,column:24},end:{line:271,column:11}},95:{start:{line:272,column:10},end:{line:272,column:34}},96:{start:{line:274,column:8},end:{line:274,column:40}},97:{start:{line:277,column:25},end:{line:328,column:6}},98:{start:{line:278,column:23},end:{line:278,column:109}},99:{start:{line:279,column:6},end:{line:292,column:7}},100:{start:{line:280,column:35},end:{line:280,column:43}},101:{start:{line:281,column:8},end:{line:291,column:10}},102:{start:{line:293,column:33},end:{line:293,column:100}},103:{start:{line:294,column:6},end:{line:307,column:7}},104:{start:{line:295,column:35},end:{line:295,column:53}},105:{start:{line:296,column:8},end:{line:306,column:10}},106:{start:{line:308,column:25},end:{line:308,column:88}},107:{start:{line:309,column:6},end:{line:327,column:7}},108:{start:{line:310,column:52},end:{line:310,column:62}},109:{start:{line:311,column:20},end:{line:311,column:78}},110:{start:{line:312,column:8},end:{line:322,column:10}},111:{start:{line:324,column:8},end:{line:326,column:10}},112:{start:{line:329,column:24},end:{line:329,column:30}},113:{start:{line:330,column:4},end:{line:344,column:5}},114:{start:{line:331,column:6},end:{line:331,column:42}},115:{start:{line:332,column:6},end:{line:343,column:7}},116:{start:{line:333,column:28},end:{line:333,column:33}},117:{start:{line:334,column:8},end:{line:342,column:9}},118:{start:{line:335,column:10},end:{line:341,column:11}},119:{start:{line:336,column:28},end:{line:336,column:49}},120:{start:{line:337,column:30},end:{line:337,column:69}},121:{start:{line:338,column:12},end:{line:338,column:44}},122:{start:{line:340,column:12},end:{line:340,column:46}},123:{start:{line:345,column:4},end:{line:347,column:5}},124:{start:{line:346,column:6},end:{line:346,column:40}},125:{start:{line:348,column:4},end:{line:350,column:5}},126:{start:{line:349,column:6},end:{line:349,column:40}},127:{start:{line:351,column:4},end:{line:353,column:5}},128:{start:{line:352,column:6},end:{line:352,column:47}},129:{start:{line:354,column:4},end:{line:356,column:5}},130:{start:{line:355,column:6},end:{line:355,column:31}},131:{start:{line:357,column:4},end:{line:364,column:7}},132:{start:{line:362,column:6},end:{line:362,column:26}},133:{start:{line:363,column:6},end:{line:363,column:27}},134:{start:{line:366,column:11},end:{line:373,column:3}},135:{start:{line:367,column:24},end:{line:367,column:49}},136:{start:{line:368,column:21},end:{line:368,column:67}},137:{start:{line:369,column:4},end:{line:369,column:61}},138:{start:{line:370,column:4},end:{line:372,column:7}},139:{start:{line:374,column:11},end:{line:381,column:3}},140:{start:{line:375,column:24},end:{line:375,column:49}},141:{start:{line:376,column:21},end:{line:376,column:67}},142:{start:{line:377,column:4},end:{line:377,column:61}},143:{start:{line:378,column:4},end:{line:380,column:7}},144:{start:{line:382,column:16},end:{line:396,column:3}},145:{start:{line:383,column:33},end:{line:383,column:37}},146:{start:{line:384,column:17},end:{line:384,column:43}},147:{start:{line:385,column:4},end:{line:385,column:53}},148:{start:{line:386,column:4},end:{line:386,column:53}},149:{start:{line:387,column:4},end:{line:387,column:38}},150:{start:{line:387,column:31},end:{line:387,column:38}},151:{start:{line:388,column:4},end:{line:392,column:5}},152:{start:{line:389,column:6},end:{line:391,column:9}},153:{start:{line:393,column:4},end:{line:393,column:29}},154:{start:{line:394,column:4},end:{line:394,column:49}},155:{start:{line:395,column:4},end:{line:395,column:32}},156:{start:{line:397,column:19},end:{line:403,column:3}},157:{start:{line:398,column:25},end:{line:401,column:5}},158:{start:{line:402,column:4},end:{line:402,column:38}},159:{start:{line:404,column:19},end:{line:409,column:3}},160:{start:{line:405,column:19},end:{line:405,column:45}},161:{start:{line:406,column:28},end:{line:406,column:43}},162:{start:{line:407,column:4},end:{line:407,column:37}},163:{start:{line:408,column:4},end:{line:408,column:41}},164:{start:{line:410,column:16},end:{line:417,column:3}},165:{start:{line:411,column:19},end:{line:411,column:45}},166:{start:{line:412,column:26},end:{line:412,column:41}},167:{start:{line:413,column:24},end:{line:413,column:55}},168:{start:{line:414,column:4},end:{line:414,column:46}},169:{start:{line:415,column:4},end:{line:415,column:48}},170:{start:{line:416,column:4},end:{line:416,column:39}},171:{start:{line:418,column:28},end:{line:427,column:3}},172:{start:{line:419,column:19},end:{line:419,column:45}},173:{start:{line:420,column:26},end:{line:420,column:41}},174:{start:{line:421,column:18},end:{line:421,column:45}},175:{start:{line:422,column:26},end:{line:422,column:70}},176:{start:{line:423,column:4},end:{line:423,column:88}},177:{start:{line:424,column:4},end:{line:424,column:33}},178:{start:{line:425,column:4},end:{line:425,column:33}},179:{start:{line:426,column:4},end:{line:426,column:39}},180:{start:{line:428,column:20},end:{line:435,column:3}},181:{start:{line:429,column:26},end:{line:429,column:61}},182:{start:{line:430,column:4},end:{line:433,column:6}},183:{start:{line:434,column:4},end:{line:434,column:39}},184:{start:{line:436,column:19},end:{line:440,column:3}},185:{start:{line:437,column:26},end:{line:437,column:61}},186:{start:{line:438,column:4},end:{line:438,column:33}},187:{start:{line:439,column:4},end:{line:439,column:39}},188:{start:{line:441,column:16},end:{line:445,column:3}},189:{start:{line:442,column:4},end:{line:444,column:27}},190:{start:{line:446,column:21},end:{line:460,column:3}},191:{start:{line:447,column:21},end:{line:447,column:44}},192:{start:{line:448,column:4},end:{line:459,column:5}},193:{start:{line:449,column:27},end:{line:455,column:7}},194:{start:{line:456,column:6},end:{line:456,column:26}},195:{start:{line:458,column:6},end:{line:458,column:22}},196:{start:{line:461,column:14},end:{line:465,column:3}},197:{start:{line:462,column:4},end:{line:462,column:34}},198:{start:{line:463,column:4},end:{line:463,column:47}},199:{start:{line:464,column:4},end:{line:464,column:34}},200:{start:{line:467,column:23},end:{line:467,column:25}},201:{start:{line:468,column:4},end:{line:507,column:5}},202:{start:{line:469,column:21},end:{line:469,column:53}},203:{start:{line:470,column:6},end:{line:506,column:7}},204:{start:{line:471,column:8},end:{line:471,column:93}},205:{start:{line:472,column:8},end:{line:474,column:9}},206:{start:{line:473,column:10},end:{line:473,column:38}},207:{start:{line:476,column:8},end:{line:479,column:10}},208:{start:{line:480,column:18},end:{line:480,column:28}},209:{start:{line:481,column:8},end:{line:485,column:9}},210:{start:{line:482,column:10},end:{line:482,column:62}},211:{start:{line:484,column:10},end:{line:484,column:63}},212:{start:{line:486,column:32},end:{line:493,column:9}},213:{start:{line:487,column:10},end:{line:489,column:11}},214:{start:{line:488,column:12},end:{line:488,column:19}},215:{start:{line:490,column:10},end:{line:492,column:11}},216:{start:{line:491,column:12},end:{line:491,column:50}},217:{start:{line:494,column:8},end:{line:505,column:9}},218:{start:{line:495,column:10},end:{line:502,column:11}},219:{start:{line:496,column:25},end:{line:496,column:77}},220:{start:{line:497,column:12},end:{line:497,column:34}},221:{start:{line:499,column:29},end:{line:499,column:63}},222:{start:{line:500,column:25},end:{line:500,column:46}},223:{start:{line:501,column:12},end:{line:501,column:34}},224:{start:{line:504,column:10},end:{line:504,column:78}},225:{start:{line:508,column:4},end:{line:513,column:5}},226:{start:{line:509,column:6},end:{line:509,column:51}},227:{start:{line:510,column:6},end:{line:512,column:9}},228:{start:{line:516,column:21},end:{line:516,column:55}},229:{start:{line:517,column:4},end:{line:517,column:53}},230:{start:{line:519,column:16},end:{line:523,column:3}},231:{start:{line:520,column:4},end:{line:522,column:7}},232:{start:{line:525,column:40},end:{line:525,column:50}},233:{start:{line:526,column:21},end:{line:537,column:5}},234:{start:{line:529,column:8},end:{line:531,column:11}},235:{start:{line:534,column:8},end:{line:534,column:44}},236:{start:{line:535,column:8},end:{line:535,column:28}},237:{start:{line:538,column:21},end:{line:538,column:40}},238:{start:{line:540,column:4},end:{line:562,column:5}},239:{start:{line:541,column:6},end:{line:549,column:8}},240:{start:{line:547,column:38},end:{line:547,column:66}},241:{start:{line:551,column:6},end:{line:561,column:8}},242:{start:{line:564,column:4},end:{line:566,column:5}},243:{start:{line:565,column:6},end:{line:565,column:63}},244:{start:{line:567,column:25},end:{line:567,column:27}},245:{start:{line:568,column:4},end:{line:570,column:5}},246:{start:{line:569,column:6},end:{line:569,column:52}},247:{start:{line:571,column:4},end:{line:571,column:160}},248:{start:{line:573,column:18},end:{line:591,column:3}},249:{start:{line:574,column:43},end:{line:574,column:53}},250:{start:{line:575,column:35},end:{line:575,column:45}},251:{start:{line:576,column:16},end:{line:576,column:38}},252:{start:{line:577,column:20},end:{line:577,column:50}},253:{start:{line:578,column:4},end:{line:578,column:70}},254:{start:{line:579,column:23},end:{line:579,column:122}},255:{start:{line:579,column:66},end:{line:579,column:91}},256:{start:{line:579,column:109},end:{line:579,column:121}},257:{start:{line:580,column:4},end:{line:584,column:5}},258:{start:{line:581,column:6},end:{line:581,column:58}},259:{start:{line:583,column:6},end:{line:583,column:39}},260:{start:{line:585,column:4},end:{line:589,column:5}},261:{start:{line:586,column:6},end:{line:586,column:38}},262:{start:{line:587,column:11},end:{line:589,column:5}},263:{start:{line:588,column:6},end:{line:588,column:46}},264:{start:{line:590,column:4},end:{line:590,column:71}},265:{start:{line:592,column:27},end:{line:637,column:3}},266:{start:{line:593,column:16},end:{line:593,column:38}},267:{start:{line:594,column:23},end:{line:594,column:52}},268:{start:{line:595,column:4},end:{line:607,column:5}},269:{start:{line:596,column:21},end:{line:596,column:42}},270:{start:{line:597,column:23},end:{line:597,column:25}},271:{start:{line:598,column:6},end:{line:600,column:9}},272:{start:{line:599,column:8},end:{line:599,column:35}},273:{start:{line:601,column:6},end:{line:606,column:9}},274:{start:{line:608,column:17},end:{line:608,column:45}},275:{start:{line:609,column:4},end:{line:611,column:5}},276:{start:{line:610,column:6},end:{line:610,column:29}},277:{start:{line:612,column:17},end:{line:612,column:46}},278:{start:{line:613,column:4},end:{line:636,column:5}},279:{start:{line:614,column:6},end:{line:635,column:7}},280:{start:{line:615,column:22},end:{line:615,column:37}},281:{start:{line:616,column:46},end:{line:619,column:9}},282:{start:{line:620,column:20},end:{line:620,column:24}},283:{start:{line:621,column:8},end:{line:626,column:9}},284:{start:{line:622,column:33},end:{line:622,column:63}},285:{start:{line:623,column:10},end:{line:625,column:11}},286:{start:{line:624,column:12},end:{line:624,column:26}},287:{start:{line:627,column:8},end:{line:632,column:9}},288:{start:{line:628,column:10},end:{line:631,column:13}},289:{start:{line:634,column:8},end:{line:634,column:26}},290:{start:{line:638,column:18},end:{line:643,column:3}},291:{start:{line:639,column:4},end:{line:642,column:27}},292:{start:{line:645,column:4},end:{line:650,column:27}},293:{start:{line:653,column:4},end:{line:653,column:60}},294:{start:{line:655,column:20},end:{line:657,column:3}},295:{start:{line:656,column:4},end:{line:656,column:34}},296:{start:{line:658,column:28},end:{line:665,column:3}},297:{start:{line:659,column:4},end:{line:664,column:7}},298:{start:{line:666,column:28},end:{line:673,column:3}},299:{start:{line:667,column:4},end:{line:672,column:7}},300:{start:{line:675,column:19},end:{line:675,column:51}},301:{start:{line:676,column:26},end:{line:676,column:92}},302:{start:{line:677,column:36},end:{line:690,column:5}},303:{start:{line:691,column:38},end:{line:705,column:5}},304:{start:{line:706,column:24},end:{line:725,column:14}},305:{start:{line:726,column:24},end:{line:736,column:14}},306:{start:{line:737,column:35},end:{line:797,column:8}},307:{start:{line:798,column:4},end:{line:808,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:44},end:{line:58,column:1}},line:35},1:{name:"updateRootSpec",decl:{start:{line:59,column:9},end:{line:59,column:23}},loc:{start:{line:59,column:52},end:{line:70,column:1}},line:59},2:{name:"(anonymous_2)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:21},end:{line:116,column:3}},line:75},3:{name:"(anonymous_3)",decl:{start:{line:114,column:28},end:{line:114,column:29}},loc:{start:{line:114,column:35},end:{line:114,column:69}},line:114},4:{name:"(anonymous_4)",decl:{start:{line:117,column:31},end:{line:117,column:32}},loc:{start:{line:117,column:37},end:{line:184,column:3}},line:117},5:{name:"(anonymous_5)",decl:{start:{line:121,column:17},end:{line:121,column:18}},loc:{start:{line:121,column:23},end:{line:123,column:9}},line:121},6:{name:"(anonymous_6)",decl:{start:{line:127,column:17},end:{line:127,column:18}},loc:{start:{line:127,column:23},end:{line:129,column:9}},line:127},7:{name:"(anonymous_7)",decl:{start:{line:133,column:17},end:{line:133,column:18}},loc:{start:{line:133,column:23},end:{line:135,column:9}},line:133},8:{name:"(anonymous_8)",decl:{start:{line:139,column:17},end:{line:139,column:18}},loc:{start:{line:139,column:23},end:{line:141,column:9}},line:139},9:{name:"(anonymous_9)",decl:{start:{line:145,column:17},end:{line:145,column:18}},loc:{start:{line:145,column:23},end:{line:147,column:9}},line:145},10:{name:"(anonymous_10)",decl:{start:{line:151,column:17},end:{line:151,column:18}},loc:{start:{line:151,column:23},end:{line:155,column:9}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:159,column:17},end:{line:159,column:18}},loc:{start:{line:159,column:23},end:{line:161,column:9}},line:159},12:{name:"(anonymous_12)",decl:{start:{line:165,column:17},end:{line:165,column:18}},loc:{start:{line:165,column:23},end:{line:167,column:9}},line:165},13:{name:"(anonymous_13)",decl:{start:{line:170,column:44},end:{line:170,column:45}},loc:{start:{line:170,column:51},end:{line:183,column:5}},line:170},14:{name:"(anonymous_14)",decl:{start:{line:175,column:40},end:{line:175,column:41}},loc:{start:{line:175,column:55},end:{line:177,column:9}},line:175},15:{name:"(anonymous_15)",decl:{start:{line:185,column:19},end:{line:185,column:20}},loc:{start:{line:185,column:26},end:{line:203,column:3}},line:185},16:{name:"(anonymous_16)",decl:{start:{line:204,column:2},end:{line:204,column:3}},loc:{start:{line:204,column:28},end:{line:207,column:3}},line:204},17:{name:"(anonymous_17)",decl:{start:{line:205,column:45},end:{line:205,column:46}},loc:{start:{line:205,column:65},end:{line:205,column:100}},line:205},18:{name:"(anonymous_18)",decl:{start:{line:208,column:2},end:{line:208,column:3}},loc:{start:{line:208,column:25},end:{line:210,column:3}},line:208},19:{name:"(anonymous_19)",decl:{start:{line:211,column:2},end:{line:211,column:3}},loc:{start:{line:211,column:27},end:{line:213,column:3}},line:211},20:{name:"(anonymous_20)",decl:{start:{line:214,column:2},end:{line:214,column:3}},loc:{start:{line:214,column:27},end:{line:221,column:3}},line:214},21:{name:"(anonymous_21)",decl:{start:{line:218,column:37},end:{line:218,column:38}},loc:{start:{line:218,column:48},end:{line:220,column:5}},line:218},22:{name:"(anonymous_22)",decl:{start:{line:222,column:2},end:{line:222,column:3}},loc:{start:{line:222,column:23},end:{line:226,column:3}},line:222},23:{name:"(anonymous_23)",decl:{start:{line:223,column:36},end:{line:223,column:37}},loc:{start:{line:223,column:47},end:{line:225,column:5}},line:223},24:{name:"(anonymous_24)",decl:{start:{line:227,column:29},end:{line:227,column:30}},loc:{start:{line:227,column:50},end:{line:241,column:3}},line:227},25:{name:"(anonymous_25)",decl:{start:{line:242,column:19},end:{line:242,column:20}},loc:{start:{line:242,column:44},end:{line:365,column:3}},line:242},26:{name:"(anonymous_26)",decl:{start:{line:267,column:30},end:{line:267,column:31}},loc:{start:{line:267,column:48},end:{line:275,column:7}},line:267},27:{name:"(anonymous_27)",decl:{start:{line:277,column:56},end:{line:277,column:57}},loc:{start:{line:277,column:67},end:{line:328,column:5}},line:277},28:{name:"(anonymous_28)",decl:{start:{line:361,column:7},end:{line:361,column:8}},loc:{start:{line:361,column:13},end:{line:364,column:5}},line:361},29:{name:"(anonymous_29)",decl:{start:{line:366,column:11},end:{line:366,column:12}},loc:{start:{line:366,column:17},end:{line:373,column:3}},line:366},30:{name:"(anonymous_30)",decl:{start:{line:374,column:11},end:{line:374,column:12}},loc:{start:{line:374,column:17},end:{line:381,column:3}},line:374},31:{name:"(anonymous_31)",decl:{start:{line:382,column:16},end:{line:382,column:17}},loc:{start:{line:382,column:26},end:{line:396,column:3}},line:382},32:{name:"(anonymous_32)",decl:{start:{line:397,column:19},end:{line:397,column:20}},loc:{start:{line:397,column:38},end:{line:403,column:3}},line:397},33:{name:"(anonymous_33)",decl:{start:{line:404,column:19},end:{line:404,column:20}},loc:{start:{line:404,column:30},end:{line:409,column:3}},line:404},34:{name:"(anonymous_34)",decl:{start:{line:410,column:16},end:{line:410,column:17}},loc:{start:{line:410,column:27},end:{line:417,column:3}},line:410},35:{name:"(anonymous_35)",decl:{start:{line:418,column:28},end:{line:418,column:29}},loc:{start:{line:418,column:39},end:{line:427,column:3}},line:418},36:{name:"(anonymous_36)",decl:{start:{line:428,column:20},end:{line:428,column:21}},loc:{start:{line:428,column:46},end:{line:435,column:3}},line:428},37:{name:"(anonymous_37)",decl:{start:{line:436,column:19},end:{line:436,column:20}},loc:{start:{line:436,column:37},end:{line:440,column:3}},line:436},38:{name:"(anonymous_38)",decl:{start:{line:441,column:16},end:{line:441,column:17}},loc:{start:{line:441,column:30},end:{line:445,column:3}},line:441},39:{name:"(anonymous_39)",decl:{start:{line:446,column:21},end:{line:446,column:22}},loc:{start:{line:446,column:35},end:{line:460,column:3}},line:446},40:{name:"(anonymous_40)",decl:{start:{line:461,column:14},end:{line:461,column:15}},loc:{start:{line:461,column:40},end:{line:465,column:3}},line:461},41:{name:"(anonymous_41)",decl:{start:{line:466,column:2},end:{line:466,column:3}},loc:{start:{line:466,column:23},end:{line:514,column:3}},line:466},42:{name:"(anonymous_42)",decl:{start:{line:486,column:32},end:{line:486,column:33}},loc:{start:{line:486,column:42},end:{line:493,column:9}},line:486},43:{name:"(anonymous_43)",decl:{start:{line:515,column:2},end:{line:515,column:3}},loc:{start:{line:515,column:17},end:{line:518,column:3}},line:515},44:{name:"(anonymous_44)",decl:{start:{line:519,column:16},end:{line:519,column:17}},loc:{start:{line:519,column:29},end:{line:523,column:3}},line:519},45:{name:"(anonymous_45)",decl:{start:{line:524,column:2},end:{line:524,column:3}},loc:{start:{line:524,column:16},end:{line:572,column:3}},line:524},46:{name:"(anonymous_46)",decl:{start:{line:528,column:27},end:{line:528,column:28}},loc:{start:{line:528,column:42},end:{line:532,column:7}},line:528},47:{name:"(anonymous_47)",decl:{start:{line:533,column:20},end:{line:533,column:21}},loc:{start:{line:533,column:27},end:{line:536,column:7}},line:533},48:{name:"(anonymous_48)",decl:{start:{line:547,column:25},end:{line:547,column:26}},loc:{start:{line:547,column:38},end:{line:547,column:66}},line:547},49:{name:"(anonymous_49)",decl:{start:{line:573,column:18},end:{line:573,column:19}},loc:{start:{line:573,column:24},end:{line:591,column:3}},line:573},50:{name:"(anonymous_50)",decl:{start:{line:579,column:50},end:{line:579,column:51}},loc:{start:{line:579,column:66},end:{line:579,column:91}},line:579},51:{name:"(anonymous_51)",decl:{start:{line:579,column:100},end:{line:579,column:101}},loc:{start:{line:579,column:109},end:{line:579,column:121}},line:579},52:{name:"(anonymous_52)",decl:{start:{line:592,column:27},end:{line:592,column:28}},loc:{start:{line:592,column:41},end:{line:637,column:3}},line:592},53:{name:"(anonymous_53)",decl:{start:{line:598,column:21},end:{line:598,column:22}},loc:{start:{line:598,column:36},end:{line:600,column:7}},line:598},54:{name:"(anonymous_54)",decl:{start:{line:638,column:18},end:{line:638,column:19}},loc:{start:{line:638,column:29},end:{line:643,column:3}},line:638},55:{name:"(anonymous_55)",decl:{start:{line:644,column:2},end:{line:644,column:3}},loc:{start:{line:644,column:29},end:{line:651,column:3}},line:644},56:{name:"(anonymous_56)",decl:{start:{line:652,column:2},end:{line:652,column:3}},loc:{start:{line:652,column:25},end:{line:654,column:3}},line:652},57:{name:"(anonymous_57)",decl:{start:{line:655,column:20},end:{line:655,column:21}},loc:{start:{line:655,column:36},end:{line:657,column:3}},line:655},58:{name:"(anonymous_58)",decl:{start:{line:658,column:28},end:{line:658,column:29}},loc:{start:{line:658,column:44},end:{line:665,column:3}},line:658},59:{name:"(anonymous_59)",decl:{start:{line:666,column:28},end:{line:666,column:29}},loc:{start:{line:666,column:44},end:{line:673,column:3}},line:666},60:{name:"(anonymous_60)",decl:{start:{line:674,column:2},end:{line:674,column:3}},loc:{start:{line:674,column:11},end:{line:809,column:3}},line:674}},branchMap:{0:{loc:{start:{line:40,column:2},end:{line:57,column:3}},type:"if",locations:[{start:{line:40,column:2},end:{line:57,column:3}},{start:{line:45,column:9},end:{line:57,column:3}}],line:40},1:{loc:{start:{line:40,column:6},end:{line:40,column:43}},type:"binary-expr",locations:[{start:{line:40,column:6},end:{line:40,column:24}},{start:{line:40,column:28},end:{line:40,column:43}}],line:40},2:{loc:{start:{line:42,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:42,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:45,column:9},end:{line:57,column:3}},type:"if",locations:[{start:{line:45,column:9},end:{line:57,column:3}},{start:{line:50,column:9},end:{line:57,column:3}}],line:45},4:{loc:{start:{line:47,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},5:{loc:{start:{line:50,column:9},end:{line:57,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:57,column:3}},{start:{line:55,column:9},end:{line:57,column:3}}],line:50},6:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},7:{loc:{start:{line:153,column:12},end:{line:153,column:61}},type:"cond-expr",locations:[{start:{line:153,column:44},end:{line:153,column:53}},{start:{line:153,column:56},end:{line:153,column:61}}],line:153},8:{loc:{start:{line:171,column:6},end:{line:182,column:7}},type:"if",locations:[{start:{line:171,column:6},end:{line:182,column:7}},{start:{line:174,column:13},end:{line:182,column:7}}],line:171},9:{loc:{start:{line:174,column:13},end:{line:182,column:7}},type:"if",locations:[{start:{line:174,column:13},end:{line:182,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:174},10:{loc:{start:{line:174,column:17},end:{line:174,column:88}},type:"binary-expr",locations:[{start:{line:174,column:17},end:{line:174,column:44}},{start:{line:174,column:48},end:{line:174,column:88}}],line:174},11:{loc:{start:{line:178,column:8},end:{line:181,column:9}},type:"if",locations:[{start:{line:178,column:8},end:{line:181,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:178},12:{loc:{start:{line:186,column:4},end:{line:202,column:5}},type:"if",locations:[{start:{line:186,column:4},end:{line:202,column:5}},{start:{line:194,column:11},end:{line:202,column:5}}],line:186},13:{loc:{start:{line:187,column:6},end:{line:193,column:7}},type:"if",locations:[{start:{line:187,column:6},end:{line:193,column:7}},{start:{line:190,column:13},end:{line:193,column:7}}],line:187},14:{loc:{start:{line:187,column:10},end:{line:187,column:53}},type:"binary-expr",locations:[{start:{line:187,column:10},end:{line:187,column:19}},{start:{line:187,column:23},end:{line:187,column:33}},{start:{line:187,column:37},end:{line:187,column:53}}],line:187},15:{loc:{start:{line:190,column:13},end:{line:193,column:7}},type:"if",locations:[{start:{line:190,column:13},end:{line:193,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:190},16:{loc:{start:{line:190,column:17},end:{line:190,column:46}},type:"binary-expr",locations:[{start:{line:190,column:17},end:{line:190,column:26}},{start:{line:190,column:30},end:{line:190,column:46}}],line:190},17:{loc:{start:{line:195,column:6},end:{line:201,column:7}},type:"if",locations:[{start:{line:195,column:6},end:{line:201,column:7}},{start:{line:198,column:13},end:{line:201,column:7}}],line:195},18:{loc:{start:{line:195,column:10},end:{line:195,column:39}},type:"binary-expr",locations:[{start:{line:195,column:10},end:{line:195,column:19}},{start:{line:195,column:23},end:{line:195,column:39}}],line:195},19:{loc:{start:{line:198,column:13},end:{line:201,column:7}},type:"if",locations:[{start:{line:198,column:13},end:{line:201,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:198},20:{loc:{start:{line:198,column:17},end:{line:198,column:46}},type:"binary-expr",locations:[{start:{line:198,column:17},end:{line:198,column:26}},{start:{line:198,column:30},end:{line:198,column:46}}],line:198},21:{loc:{start:{line:215,column:21},end:{line:215,column:55}},type:"binary-expr",locations:[{start:{line:215,column:21},end:{line:215,column:49}},{start:{line:215,column:53},end:{line:215,column:55}}],line:215},22:{loc:{start:{line:216,column:24},end:{line:216,column:93}},type:"binary-expr",locations:[{start:{line:216,column:24},end:{line:216,column:70}},{start:{line:216,column:74},end:{line:216,column:93}}],line:216},23:{loc:{start:{line:217,column:21},end:{line:217,column:110}},type:"cond-expr",locations:[{start:{line:217,column:55},end:{line:217,column:96}},{start:{line:217,column:99},end:{line:217,column:110}}],line:217},24:{loc:{start:{line:228,column:4},end:{line:232,column:5}},type:"if",locations:[{start:{line:228,column:4},end:{line:232,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:228},25:{loc:{start:{line:228,column:8},end:{line:228,column:123}},type:"binary-expr",locations:[{start:{line:228,column:8},end:{line:228,column:40}},{start:{line:228,column:44},end:{line:228,column:123}}],line:228},26:{loc:{start:{line:242,column:30},end:{line:242,column:39}},type:"default-arg",locations:[{start:{line:242,column:37},end:{line:242,column:39}}],line:242},27:{loc:{start:{line:249,column:4},end:{line:251,column:5}},type:"if",locations:[{start:{line:249,column:4},end:{line:251,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:249},28:{loc:{start:{line:249,column:8},end:{line:249,column:62}},type:"binary-expr",locations:[{start:{line:249,column:8},end:{line:249,column:23}},{start:{line:249,column:27},end:{line:249,column:62}}],line:249},29:{loc:{start:{line:252,column:4},end:{line:254,column:5}},type:"if",locations:[{start:{line:252,column:4},end:{line:254,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:252},30:{loc:{start:{line:252,column:8},end:{line:252,column:62}},type:"binary-expr",locations:[{start:{line:252,column:8},end:{line:252,column:23}},{start:{line:252,column:27},end:{line:252,column:62}}],line:252},31:{loc:{start:{line:256,column:6},end:{line:258,column:7}},type:"if",locations:[{start:{line:256,column:6},end:{line:258,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:256},32:{loc:{start:{line:256,column:10},end:{line:256,column:69}},type:"binary-expr",locations:[{start:{line:256,column:10},end:{line:256,column:16}},{start:{line:256,column:20},end:{line:256,column:35}},{start:{line:256,column:39},end:{line:256,column:69}}],line:256},33:{loc:{start:{line:260,column:4},end:{line:262,column:5}},type:"if",locations:[{start:{line:260,column:4},end:{line:262,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:260},34:{loc:{start:{line:263,column:19},end:{line:263,column:51}},type:"binary-expr",locations:[{start:{line:263,column:19},end:{line:263,column:45}},{start:{line:263,column:49},end:{line:263,column:51}}],line:263},35:{loc:{start:{line:265,column:4},end:{line:276,column:5}},type:"if",locations:[{start:{line:265,column:4},end:{line:276,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:265},36:{loc:{start:{line:265,column:8},end:{line:265,column:35}},type:"binary-expr",locations:[{start:{line:265,column:8},end:{line:265,column:16}},{start:{line:265,column:20},end:{line:265,column:35}}],line:265},37:{loc:{start:{line:268,column:8},end:{line:273,column:9}},type:"if",locations:[{start:{line:268,column:8},end:{line:273,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:268},38:{loc:{start:{line:268,column:12},end:{line:268,column:56}},type:"binary-expr",locations:[{start:{line:268,column:12},end:{line:268,column:27}},{start:{line:268,column:31},end:{line:268,column:56}}],line:268},39:{loc:{start:{line:279,column:6},end:{line:292,column:7}},type:"if",locations:[{start:{line:279,column:6},end:{line:292,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:279},40:{loc:{start:{line:294,column:6},end:{line:307,column:7}},type:"if",locations:[{start:{line:294,column:6},end:{line:307,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:294},41:{loc:{start:{line:309,column:6},end:{line:327,column:7}},type:"if",locations:[{start:{line:309,column:6},end:{line:327,column:7}},{start:{line:323,column:13},end:{line:327,column:7}}],line:309},42:{loc:{start:{line:311,column:20},end:{line:311,column:78}},type:"cond-expr",locations:[{start:{line:311,column:40},end:{line:311,column:67}},{start:{line:311,column:70},end:{line:311,column:78}}],line:311},43:{loc:{start:{line:311,column:20},end:{line:311,column:37}},type:"binary-expr",locations:[{start:{line:311,column:20},end:{line:311,column:25}},{start:{line:311,column:29},end:{line:311,column:37}}],line:311},44:{loc:{start:{line:330,column:4},end:{line:344,column:5}},type:"if",locations:[{start:{line:330,column:4},end:{line:344,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:330},45:{loc:{start:{line:334,column:8},end:{line:342,column:9}},type:"if",locations:[{start:{line:334,column:8},end:{line:342,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:334},46:{loc:{start:{line:345,column:4},end:{line:347,column:5}},type:"if",locations:[{start:{line:345,column:4},end:{line:347,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:345},47:{loc:{start:{line:348,column:4},end:{line:350,column:5}},type:"if",locations:[{start:{line:348,column:4},end:{line:350,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:348},48:{loc:{start:{line:351,column:4},end:{line:353,column:5}},type:"if",locations:[{start:{line:351,column:4},end:{line:353,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:351},49:{loc:{start:{line:354,column:4},end:{line:356,column:5}},type:"if",locations:[{start:{line:354,column:4},end:{line:356,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:354},50:{loc:{start:{line:387,column:4},end:{line:387,column:38}},type:"if",locations:[{start:{line:387,column:4},end:{line:387,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:387},51:{loc:{start:{line:388,column:4},end:{line:392,column:5}},type:"if",locations:[{start:{line:388,column:4},end:{line:392,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:388},52:{loc:{start:{line:422,column:26},end:{line:422,column:70}},type:"cond-expr",locations:[{start:{line:422,column:46},end:{line:422,column:65}},{start:{line:422,column:68},end:{line:422,column:70}}],line:422},53:{loc:{start:{line:423,column:31},end:{line:423,column:87}},type:"cond-expr",locations:[{start:{line:423,column:69},end:{line:423,column:78}},{start:{line:423,column:81},end:{line:423,column:87}}],line:423},54:{loc:{start:{line:447,column:21},end:{line:447,column:44}},type:"binary-expr",locations:[{start:{line:447,column:21},end:{line:447,column:38}},{start:{line:447,column:42},end:{line:447,column:44}}],line:447},55:{loc:{start:{line:448,column:4},end:{line:459,column:5}},type:"if",locations:[{start:{line:448,column:4},end:{line:459,column:5}},{start:{line:457,column:11},end:{line:459,column:5}}],line:448},56:{loc:{start:{line:470,column:6},end:{line:506,column:7}},type:"if",locations:[{start:{line:470,column:6},end:{line:506,column:7}},{start:{line:475,column:13},end:{line:506,column:7}}],line:470},57:{loc:{start:{line:470,column:10},end:{line:470,column:56}},type:"binary-expr",locations:[{start:{line:470,column:10},end:{line:470,column:34}},{start:{line:470,column:38},end:{line:470,column:56}}],line:470},58:{loc:{start:{line:471,column:26},end:{line:471,column:92}},type:"binary-expr",locations:[{start:{line:471,column:26},end:{line:471,column:49}},{start:{line:471,column:53},end:{line:471,column:92}}],line:471},59:{loc:{start:{line:472,column:8},end:{line:474,column:9}},type:"if",locations:[{start:{line:472,column:8},end:{line:474,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:472},60:{loc:{start:{line:487,column:10},end:{line:489,column:11}},type:"if",locations:[{start:{line:487,column:10},end:{line:489,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:487},61:{loc:{start:{line:495,column:10},end:{line:502,column:11}},type:"if",locations:[{start:{line:495,column:10},end:{line:502,column:11}},{start:{line:498,column:17},end:{line:502,column:11}}],line:495},62:{loc:{start:{line:508,column:4},end:{line:513,column:5}},type:"if",locations:[{start:{line:508,column:4},end:{line:513,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:508},63:{loc:{start:{line:516,column:21},end:{line:516,column:55}},type:"binary-expr",locations:[{start:{line:516,column:21},end:{line:516,column:49}},{start:{line:516,column:53},end:{line:516,column:55}}],line:516},64:{loc:{start:{line:517,column:11},end:{line:517,column:52}},type:"binary-expr",locations:[{start:{line:517,column:11},end:{line:517,column:40}},{start:{line:517,column:44},end:{line:517,column:52}}],line:517},65:{loc:{start:{line:527,column:16},end:{line:527,column:41}},type:"binary-expr",locations:[{start:{line:527,column:16},end:{line:527,column:29}},{start:{line:527,column:33},end:{line:527,column:41}}],line:527},66:{loc:{start:{line:540,column:4},end:{line:562,column:5}},type:"if",locations:[{start:{line:540,column:4},end:{line:562,column:5}},{start:{line:550,column:11},end:{line:562,column:5}}],line:540},67:{loc:{start:{line:564,column:4},end:{line:566,column:5}},type:"if",locations:[{start:{line:564,column:4},end:{line:566,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:564},68:{loc:{start:{line:568,column:4},end:{line:570,column:5}},type:"if",locations:[{start:{line:568,column:4},end:{line:570,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:568},69:{loc:{start:{line:579,column:66},end:{line:579,column:91}},type:"cond-expr",locations:[{start:{line:579,column:81},end:{line:579,column:84}},{start:{line:579,column:87},end:{line:579,column:91}}],line:579},70:{loc:{start:{line:580,column:4},end:{line:584,column:5}},type:"if",locations:[{start:{line:580,column:4},end:{line:584,column:5}},{start:{line:582,column:11},end:{line:584,column:5}}],line:580},71:{loc:{start:{line:585,column:4},end:{line:589,column:5}},type:"if",locations:[{start:{line:585,column:4},end:{line:589,column:5}},{start:{line:587,column:11},end:{line:589,column:5}}],line:585},72:{loc:{start:{line:587,column:11},end:{line:589,column:5}},type:"if",locations:[{start:{line:587,column:11},end:{line:589,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:587},73:{loc:{start:{line:595,column:4},end:{line:607,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:607,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:595},74:{loc:{start:{line:595,column:8},end:{line:595,column:39}},type:"binary-expr",locations:[{start:{line:595,column:8},end:{line:595,column:18}},{start:{line:595,column:22},end:{line:595,column:39}}],line:595},75:{loc:{start:{line:609,column:4},end:{line:611,column:5}},type:"if",locations:[{start:{line:609,column:4},end:{line:611,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:609},76:{loc:{start:{line:609,column:8},end:{line:609,column:27}},type:"binary-expr",locations:[{start:{line:609,column:8},end:{line:609,column:12}},{start:{line:609,column:16},end:{line:609,column:27}}],line:609},77:{loc:{start:{line:613,column:4},end:{line:636,column:5}},type:"if",locations:[{start:{line:613,column:4},end:{line:636,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:613},78:{loc:{start:{line:621,column:8},end:{line:626,column:9}},type:"if",locations:[{start:{line:621,column:8},end:{line:626,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:621},79:{loc:{start:{line:623,column:10},end:{line:625,column:11}},type:"if",locations:[{start:{line:623,column:10},end:{line:625,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:623},80:{loc:{start:{line:627,column:8},end:{line:632,column:9}},type:"if",locations:[{start:{line:627,column:8},end:{line:632,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:627},81:{loc:{start:{line:675,column:19},end:{line:675,column:51}},type:"binary-expr",locations:[{start:{line:675,column:19},end:{line:675,column:45}},{start:{line:675,column:49},end:{line:675,column:51}}],line:675},82:{loc:{start:{line:676,column:26},end:{line:676,column:92}},type:"cond-expr",locations:[{start:{line:676,column:46},end:{line:676,column:83}},{start:{line:676,column:86},end:{line:676,column:92}}],line:676},83:{loc:{start:{line:706,column:24},end:{line:725,column:14}},type:"cond-expr",locations:[{start:{line:706,column:56},end:{line:725,column:5}},{start:{line:725,column:8},end:{line:725,column:14}}],line:706},84:{loc:{start:{line:726,column:24},end:{line:736,column:14}},type:"cond-expr",locations:[{start:{line:726,column:97},end:{line:736,column:5}},{start:{line:736,column:8},end:{line:736,column:14}}],line:726}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AAurBmB,SAAA,KAkNA,YAlNA;AAvrBnB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,wBAAuB;AAC/B,OAAO,YAAY;AAEnB,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAAmC;AAC1C,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,cAAc,oBAAoB;AAC3C,SAAS,wBAA0C;AACnD,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AAKpB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AACtE,QAAM,qBAAqB,IAAI,MAAM,oBAAoB;AACzD,QAAM,kBAAkB,IAAI,MAAM,iBAAiB;AACnD,QAAM,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,QAAM,oBAAoB,IAAI,MAAM,mBAAmB;AACvD,MAAI,sBAAsB,iBAAiB;AACzC,UAAM,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AAC7B,UAAM,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,mBAAmB;AAC1B,UAAM,cAAc,MAAM,eAAe,cAAc,UAAU,EAAC,eAAe,KAAI,CAAC;AACtF,QAAI,aAAa;AACf,aAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AACpE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAmDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA,aAAiC;AAAA,EACjC;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AAEX,SAAK,gBAAgB,IAAI,cAAc;AACvC,SAAK,2BAA2B;AAEhC,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEA,SAAK,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAA,MAAK,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,6BAA6B,MAAM;AACjC,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC7C,UAAG,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AAC5C,iBAAQA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACX,eAAK,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,oBAAoB;AACxB,SAAK,aAAa,MAAM,iBAAiB,CAAC,UAAU,SAAS,KAAK,eAAe,UAAU,IAAI,CAAC;AAChG,WAAO,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACrB,WAAO,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAyC;AACjD,SAAK,YAAY,KAAK,aAAa;AAAA,EACrC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAE7E,UAAM,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAA,UAAS;AACxC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAA,UAAS;AACvC,WAAK,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAoC,OAAyB,CAAC,MAAY;AAC1F,WAAO;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,eAAW,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAGjE,UAAM,cAA2C,CAAC;AAClD,QAAI,YAAY,SAAS,QAAQ;AAC/B,YAAM,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACA,oBAAY,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAA,UAAS;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AAC3B,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AAC5C,cAAM,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AAChE,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACH,eAAO;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AACpD,QAAI,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,iBAAW,SAAS,QAAQ;AAC1B,cAAM,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACX,cAAI;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,UAAU,MAAM,GAAG;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AACjD,WAAK,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAAQ;AAAA,IACzB;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,UAAM,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAA+C;AAC5D,QAAI,EAAE,UAAU,SAAS,IAAI;AAC7B,QAAI,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAE1B,QAAI,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAEA,aAAS,OAAO,MAAM,CAAC;AACvB,qBAAiB,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAClC,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,kBAAkB,OAAO,MAAM,CAAC;AACtC,oBAAgB,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AAC/B,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AAClD,gBAAY,KAAK,YAAY,KAAK;AAClC,kBAAc,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AAC3C,UAAM,SAAS,KAAK,MAAM,SAAS;AACnC,UAAM,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AACxC,UAAM,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAuC;AACzD,UAAM,WAAoC,SAAS,YAAY,CAAC;AAChE,QAAG,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACA,aAAO;AAAA,IACT,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAAoC,eAA4C;AAC3F,SAAK,SAAS,EAAC,WAAsB,CAAC;AACtC,eAAW,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAe;AACnB,UAAM,aAAwE,CAAC;AAC/E,eAAU,OAAO,OAAO,KAAK,KAAK,MAAM,SAAS,OAAO,GAAG;AACzD,YAAM,SAAS,KAAK,MAAM,SAAS,QAAQ,GAAG;AAC9C,UAAG,OAAO,SAAS,YAAY,EAAE,SAAS,SAAS;AACjD,mBAAW,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,EAAC,GAAG,KAAK,MAAM,SAAS,QAAQ,GAAG,EAAC;AACjF,YAAI,WAAW,GAAG,EAAE,WAAW,QAAW;AACxC,qBAAW,GAAG,EAAE,SAAS,CAAC;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,OAAO;AAAA,UACb,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,OAAO;AAEjB,YAAI;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACX,kBAAQ,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAEA,qBAAU,SAAS,KAAK,eAAe;AACrC,uBAAW,GAAG,EAAE,OAAO,KAAK,MAAM,EAAE;AAAA,UACtC;AAAA,QACF;AAEA,YAAI;AACF,cAAI,IAAK,WAAW,YAAY,GAAG;AACjC,kBAAM,OAAO,MAAO,IAAI,QAAQ,IAAK,UAAU,EAAE,CAAC,EAAG,YAAY,EAAE;AACnE,4BAAgB,IAAI;AAAA,UACtB,OAAO;AACL,kBAAM,WAAW,MAAM,MAAM,KAAM,EAAE,MAAM,OAAO,CAAC;AACnD,kBAAM,OAAO,MAAM,SAAS,KAAK;AACjC,4BAAgB,IAAI;AAAA,UACtB;AAAA,QACF,SAAQ,KAAK;AACX,kBAAQ,MAAM,sCAAsC,GAAG,MAAM,GAAG,EAAE;AAAA,QACpE;AAAA,MACF;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,mBAAmB,UAAU;AAC3C,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC1E,WAAO,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AACrD,eAAO,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC/B,aAAK,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,WAAW,KAAK,aAAa;AAEnC,QAAI;AAGJ,QAAG,aAAa,MAAM;AACpB,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,CAAC,YAAY,KAAK,cAAc,CAAC,OAAO;AAAA,QAAA;AAAA,MACzD;AAAA,IACF,OAAO;AAEL,mBAAa;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEA,QAAI;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACd,mBAAa,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEA,WAAO,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UAAA,WAAA,CACH;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AAC1C,UAAM,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAE7B,QAAI,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACH,UAAI,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AACtB,UAAI,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC/B,UAAI,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE/C,QAAI,cAAc,eAAe,IAAI;AACnC,YAAM,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAA,cAAa;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACxC,QAAI,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACR,UAAI;AACF,cAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,cAAM,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AAC5C,oBAAQ;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,kBAAkB,CAAC,eAA4C;AAC7D,SAAK,SAAS,EAAE,WAAW,CAAC;AAAA,EAC9B;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AAC9C,UAAM,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEL,UAAM,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGL,UAAM,8BAAU,OAAA,EACd,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IAAA,EAAA,CACF;AAEA,WAAO;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c7efcbe06d81163d005fc4370dd80582d4d6cf68"},a=t[i]||(t[i]={});(!a[n]||a[n].hash!==e)&&(a[n]=r);var l=a[n];return Ie=function(){return l},l}Ie();Ie().s[0]++;window.Buffer=TQ.Buffer;function Cx(n,e){Ie().f[0]++;const t=(Ie().s[1]++,n.match(/\.tilehosting\.com/)),i=(Ie().s[2]++,n.match(/\.maptiler\.com/)),r=(Ie().s[3]++,n.match(/\.thunderforest\.com/)),a=(Ie().s[4]++,n.match(/\.locationiq\.com/));if(Ie().s[5]++,Ie().b[1][0]++,t||(Ie().b[1][1]++,i)){Ie().b[0][0]++;const l=(Ie().s[6]++,qd.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(Ie().s[7]++,l)return Ie().b[2][0]++,Ie().s[8]++,n.replace("{key}",l);Ie().b[2][1]++}else if(Ie().b[0][1]++,Ie().s[9]++,r){Ie().b[3][0]++;const l=(Ie().s[10]++,qd.getAccessToken("thunderforest",e,{allowFallback:!0}));if(Ie().s[11]++,l)return Ie().b[4][0]++,Ie().s[12]++,n.replace("{key}",l);Ie().b[4][1]++}else if(Ie().b[3][1]++,Ie().s[13]++,a){Ie().b[5][0]++;const l=(Ie().s[14]++,qd.getAccessToken("locationiq",e,{allowFallback:!0}));if(Ie().s[15]++,l)return Ie().b[6][0]++,Ie().s[16]++,n.replace("{key}",l);Ie().b[6][1]++}else return Ie().b[5][1]++,Ie().s[17]++,n}function TU(n,e,t){return Ie().f[1]++,Ie().s[18]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class jfe extends ni.Component{revisionStore;styleStore=(Ie().s[19]++,null);layerWatcher;constructor(e){Ie().f[2]++,Ie().s[20]++,super(e),Ie().s[21]++,this.revisionStore=new Rfe,Ie().s[22]++,this.configureKeyboardShortcuts(),Ie().s[23]++,this.state={errors:[],infos:[],mapStyle:qd.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:oa,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},Ie().s[24]++,this.layerWatcher=new zfe({onVectorLayersChange:t=>(Ie().f[3]++,Ie().s[25]++,this.setState({vectorLayers:t}))})}configureKeyboardShortcuts=(Ie().s[26]++,()=>{Ie().f[4]++;const e=(Ie().s[27]++,[{key:"?",handler:()=>{Ie().f[5]++,Ie().s[28]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{Ie().f[6]++,Ie().s[29]++,this.toggleModal("open")}},{key:"e",handler:()=>{Ie().f[7]++,Ie().s[30]++,this.toggleModal("export")}},{key:"d",handler:()=>{Ie().f[8]++,Ie().s[31]++,this.toggleModal("sources")}},{key:"s",handler:()=>{Ie().f[9]++,Ie().s[32]++,this.toggleModal("settings")}},{key:"i",handler:()=>{Ie().f[10]++,Ie().s[33]++,this.setMapState(this.state.mapState==="map"?(Ie().b[7][0]++,"inspect"):(Ie().b[7][1]++,"map"))}},{key:"m",handler:()=>{Ie().f[11]++,Ie().s[34]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{Ie().f[12]++,Ie().s[35]++,this.toggleModal("debug")}}]);Ie().s[36]++,document.body.addEventListener("keyup",t=>{if(Ie().f[13]++,Ie().s[37]++,t.key==="Escape")Ie().b[8][0]++,Ie().s[38]++,t.target.blur(),Ie().s[39]++,document.body.focus();else if(Ie().b[8][1]++,Ie().s[40]++,Ie().b[10][0]++,this.state.isOpen.shortcuts||(Ie().b[10][1]++,document.activeElement===document.body)){Ie().b[9][0]++;const i=(Ie().s[41]++,e.find(r=>(Ie().f[14]++,Ie().s[42]++,r.key===t.key)));Ie().s[43]++,i?(Ie().b[11][0]++,Ie().s[44]++,this.setModal("shortcuts",!1),Ie().s[45]++,i.handler()):Ie().b[11][1]++}else Ie().b[9][1]++})});handleKeyPress=(Ie().s[46]++,e=>{Ie().f[15]++,Ie().s[47]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(Ie().b[12][0]++,Ie().s[48]++,Ie().b[14][0]++,e.metaKey&&(Ie().b[14][1]++,e.shiftKey)&&(Ie().b[14][2]++,e.keyCode===90)?(Ie().b[13][0]++,Ie().s[49]++,e.preventDefault(),Ie().s[50]++,this.onRedo()):(Ie().b[13][1]++,Ie().s[51]++,Ie().b[16][0]++,e.metaKey&&(Ie().b[16][1]++,e.keyCode===90)?(Ie().b[15][0]++,Ie().s[52]++,e.preventDefault(),Ie().s[53]++,this.onUndo()):Ie().b[15][1]++)):(Ie().b[12][1]++,Ie().s[54]++,Ie().b[18][0]++,e.ctrlKey&&(Ie().b[18][1]++,e.keyCode===90)?(Ie().b[17][0]++,Ie().s[55]++,e.preventDefault(),Ie().s[56]++,this.onUndo()):(Ie().b[17][1]++,Ie().s[57]++,Ie().b[20][0]++,e.ctrlKey&&(Ie().b[20][1]++,e.keyCode===89)?(Ie().b[19][0]++,Ie().s[58]++,e.preventDefault(),Ie().s[59]++,this.onRedo()):Ie().b[19][1]++))});async componentDidMount(){Ie().f[16]++,Ie().s[60]++,this.styleStore=await Dfe((e,t)=>(Ie().f[17]++,Ie().s[61]++,this.onStyleChanged(e,t))),Ie().s[62]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){Ie().f[18]++,Ie().s[63]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(e){Ie().f[19]++,Ie().s[64]++,this.styleStore?.save(e)}updateFonts(e){Ie().f[20]++;const t=(Ie().s[65]++,Ie().b[21][0]++,this.state.mapStyle.metadata||(Ie().b[21][1]++,{})),i=(Ie().s[66]++,Ie().b[22][0]++,t["maputnik:openmaptiles_access_token"]||(Ie().b[22][1]++,oG.openmaptiles)),r=(Ie().s[67]++,typeof e=="string"?(Ie().b[23][0]++,e.replace("{key}",i)):(Ie().b[23][1]++,e));Ie().s[68]++,gfe(r,a=>{Ie().f[21]++,Ie().s[69]++,this.setState({spec:TU(this.state.spec,"glyphs",a)})})}updateIcons(e){Ie().f[22]++,Ie().s[70]++,yfe(e,t=>{Ie().f[23]++,Ie().s[71]++,this.setState({spec:TU(this.state.spec,"sprite",t)})})}onChangeMetadataProperty=(Ie().s[72]++,(e,t)=>{Ie().f[24]++,Ie().s[73]++,Ie().b[25][0]++,e==="maputnik:renderer"&&(Ie().b[25][1]++,t!==RQ(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(Ie().b[24][0]++,Ie().s[74]++,this.setState({mapState:"map"})):Ie().b[24][1]++;const i=(Ie().s[75]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[e]:t}});Ie().s[76]++,this.onStyleChanged(i)});onStyleChanged=(Ie().s[77]++,(e,t=(Ie().b[26][0]++,{}))=>{Ie().f[25]++,Ie().s[78]++,t={save:!0,addRevision:!0,initialLoad:!1,...t},Ie().s[79]++,Ie().b[28][0]++,e.glyphs&&(Ie().b[28][1]++,typeof e.glyphs=="string")?(Ie().b[27][0]++,Ie().s[80]++,e.glyphs=Cx(e.glyphs,e)):Ie().b[27][1]++,Ie().s[81]++,Ie().b[30][0]++,e.sprite&&(Ie().b[30][1]++,typeof e.sprite=="string")?(Ie().b[29][0]++,Ie().s[82]++,e.sprite=Cx(e.sprite,e)):Ie().b[29][1]++,Ie().s[83]++;for(const[o,p]of Object.entries(e.sources))Ie().s[84]++,Ie().b[32][0]++,p&&(Ie().b[32][1]++,"url"in p)&&(Ie().b[32][2]++,typeof p.url=="string")?(Ie().b[31][0]++,Ie().s[85]++,p.url=Cx(p.url,e)):Ie().b[31][1]++;Ie().s[86]++,t.initialLoad?(Ie().b[33][0]++,Ie().s[87]++,this.getInitialStateFromUrl(e)):Ie().b[33][1]++;const i=(Ie().s[88]++,Ie().b[34][0]++,Of(e)||(Ie().b[34][1]++,[])),r=(Ie().s[89]++,[]);if(Ie().s[90]++,Ie().b[36][0]++,e&&(Ie().b[36][1]++,e.layers)){Ie().b[35][0]++;const o=(Ie().s[91]++,new window.Map);Ie().s[92]++,e.layers.forEach((p,C)=>{if(Ie().f[26]++,Ie().s[93]++,Ie().b[38][0]++,p.id===""&&(Ie().b[38][1]++,o.has(p.id))){Ie().b[37][0]++;const w=(Ie().s[94]++,new Error(`layers[${C}]: duplicate layer id [empty_string], previously used`));Ie().s[95]++,r.push(w)}else Ie().b[37][1]++;Ie().s[96]++,o.set(p.id,!0)})}else Ie().b[35][1]++;const a=(Ie().s[97]++,r.concat(i).map(o=>{Ie().f[27]++;const p=(Ie().s[98]++,o.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(Ie().s[99]++,p){Ie().b[39][0]++;const[,O,U]=(Ie().s[100]++,p);return Ie().s[101]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:"id",message:U}}}}else Ie().b[39][1]++;const C=(Ie().s[102]++,o.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(Ie().s[103]++,C){Ie().b[40][0]++;const[,O,U]=(Ie().s[104]++,C);return Ie().s[105]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:"source",message:U}}}}else Ie().b[40][1]++;const w=(Ie().s[106]++,o.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(Ie().s[107]++,w){Ie().b[41][0]++;const[,O,U,K,j]=(Ie().s[108]++,w),W=(Ie().s[109]++,Ie().b[43][0]++,U&&(Ie().b[43][1]++,K)?(Ie().b[42][0]++,[U,K].join(".")):(Ie().b[42][1]++,K));return Ie().s[110]++,{message:o.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:W,message:j}}}}else return Ie().b[41][1]++,Ie().s[111]++,{message:o.message}}));let l=(Ie().s[112]++,void 0);if(Ie().s[113]++,i.length>0){Ie().b[44][0]++,Ie().s[114]++,l=N7(e),Ie().s[115]++;for(const o of i){const{message:p}=(Ie().s[116]++,o);if(Ie().s[117]++,p){Ie().b[45][0]++,Ie().s[118]++;try{const C=(Ie().s[119]++,p.split(":")[0]),w=(Ie().s[120]++,C.match(/^\S+?\[\d+\]\.[^[]+/)[0]);Ie().s[121]++,eb.unset(l,w)}catch(C){Ie().s[122]++,console.warn(p+" "+C)}}else Ie().b[45][1]++}}else Ie().b[44][1]++;Ie().s[123]++,e.glyphs!==this.state.mapStyle.glyphs?(Ie().b[46][0]++,Ie().s[124]++,this.updateFonts(e.glyphs)):Ie().b[46][1]++,Ie().s[125]++,e.sprite!==this.state.mapStyle.sprite?(Ie().b[47][0]++,Ie().s[126]++,this.updateIcons(e.sprite)):Ie().b[47][1]++,Ie().s[127]++,t.addRevision?(Ie().b[48][0]++,Ie().s[128]++,this.revisionStore.addRevision(e)):Ie().b[48][1]++,Ie().s[129]++,t.save?(Ie().b[49][0]++,Ie().s[130]++,this.saveStyle(e)):Ie().b[49][1]++,Ie().s[131]++,this.setState({mapStyle:e,dirtyMapStyle:l,errors:a},()=>{Ie().f[28]++,Ie().s[132]++,this.fetchSources(),Ie().s[133]++,this.setStateInUrl()})});onUndo=(Ie().s[134]++,()=>{Ie().f[29]++;const e=(Ie().s[135]++,this.revisionStore.undo()),t=(Ie().s[136]++,vfe(this.state.mapStyle,e));Ie().s[137]++,this.onStyleChanged(e,{addRevision:!1}),Ie().s[138]++,this.setState({infos:t})});onRedo=(Ie().s[139]++,()=>{Ie().f[30]++;const e=(Ie().s[140]++,this.revisionStore.redo()),t=(Ie().s[141]++,Cfe(this.state.mapStyle,e));Ie().s[142]++,this.onStyleChanged(e,{addRevision:!1}),Ie().s[143]++,this.setState({infos:t})});onMoveLayer=(Ie().s[144]++,e=>{Ie().f[31]++;let{oldIndex:t,newIndex:i}=(Ie().s[145]++,e),r=(Ie().s[146]++,this.state.mapStyle.layers);if(Ie().s[147]++,t=W7(t,0,r.length-1),Ie().s[148]++,i=W7(i,0,r.length-1),Ie().s[149]++,t===i){Ie().b[50][0]++,Ie().s[150]++;return}else Ie().b[50][1]++;Ie().s[151]++,t===this.state.selectedLayerIndex?(Ie().b[51][0]++,Ie().s[152]++,this.setState({selectedLayerIndex:i})):Ie().b[51][1]++,Ie().s[153]++,r=r.slice(0),Ie().s[154]++,UQ(r,t,i),Ie().s[155]++,this.onLayersChange(r)});onLayersChange=(Ie().s[156]++,e=>{Ie().f[32]++;const t=(Ie().s[157]++,{...this.state.mapStyle,layers:e});Ie().s[158]++,this.onStyleChanged(t)});onLayerDestroy=(Ie().s[159]++,e=>{Ie().f[33]++;const t=(Ie().s[160]++,this.state.mapStyle.layers),i=(Ie().s[161]++,t.slice(0));Ie().s[162]++,i.splice(e,1),Ie().s[163]++,this.onLayersChange(i)});onLayerCopy=(Ie().s[164]++,e=>{Ie().f[34]++;const t=(Ie().s[165]++,this.state.mapStyle.layers),i=(Ie().s[166]++,t.slice(0)),r=(Ie().s[167]++,N7(i[e]));Ie().s[168]++,r.id=r.id+"-copy",Ie().s[169]++,i.splice(e,0,r),Ie().s[170]++,this.onLayersChange(i)});onLayerVisibilityToggle=(Ie().s[171]++,e=>{Ie().f[35]++;const t=(Ie().s[172]++,this.state.mapStyle.layers),i=(Ie().s[173]++,t.slice(0)),r=(Ie().s[174]++,{...i[e]}),a=(Ie().s[175]++,"layout"in r?(Ie().b[52][0]++,{...r.layout}):(Ie().b[52][1]++,{}));Ie().s[176]++,a.visibility=a.visibility==="none"?(Ie().b[53][0]++,"visible"):(Ie().b[53][1]++,"none"),Ie().s[177]++,r.layout=a,Ie().s[178]++,i[e]=r,Ie().s[179]++,this.onLayersChange(i)});onLayerIdChange=(Ie().s[180]++,(e,t,i)=>{Ie().f[36]++;const r=(Ie().s[181]++,this.state.mapStyle.layers.slice(0));Ie().s[182]++,r[e]={...r[e],id:i},Ie().s[183]++,this.onLayersChange(r)});onLayerChanged=(Ie().s[184]++,(e,t)=>{Ie().f[37]++;const i=(Ie().s[185]++,this.state.mapStyle.layers.slice(0));Ie().s[186]++,i[e]=t,Ie().s[187]++,this.onLayersChange(i)});setMapState=(Ie().s[188]++,e=>{Ie().f[38]++,Ie().s[189]++,this.setState({mapState:e},this.setStateInUrl)});setDefaultValues=(Ie().s[190]++,e=>{Ie().f[39]++;const t=(Ie().s[191]++,Ie().b[54][0]++,e.metadata||(Ie().b[54][1]++,{}));if(Ie().s[192]++,t["maputnik:renderer"]===void 0){Ie().b[55][0]++;const i=(Ie().s[193]++,{...e,metadata:{...e.metadata,"maputnik:renderer":"mlgljs"}});return Ie().s[194]++,i}else return Ie().b[55][1]++,Ie().s[195]++,e});openStyle=(Ie().s[196]++,(e,t)=>{Ie().f[40]++,Ie().s[197]++,this.setState({fileHandle:t}),Ie().s[198]++,e=this.setDefaultValues(e),Ie().s[199]++,this.onStyleChanged(e)});async fetchSources(){Ie().f[41]++;const e=(Ie().s[200]++,{});Ie().s[201]++;for(const t of Object.keys(this.state.mapStyle.sources)){const i=(Ie().s[202]++,this.state.mapStyle.sources[t]);if(Ie().s[203]++,Ie().b[57][0]++,i.type!=="vector"||(Ie().b[57][1]++,!("url"in i)))Ie().b[56][0]++,Ie().s[204]++,e[t]=(Ie().b[58][0]++,this.state.sources[t]||(Ie().b[58][1]++,{...this.state.mapStyle.sources[t]})),Ie().s[205]++,e[t].layers===void 0?(Ie().b[59][0]++,Ie().s[206]++,e[t].layers=[]):Ie().b[59][1]++;else{Ie().b[56][1]++,Ie().s[207]++,e[t]={type:i.type,layers:[]};let r=(Ie().s[208]++,i.url);Ie().s[209]++;try{Ie().s[210]++,r=Cx(r,this.state.mapStyle)}catch(l){Ie().s[211]++,console.warn("Failed to setFetchAccessToken: ",l)}Ie().s[212]++;const a=l=>{if(Ie().f[42]++,Ie().s[213]++,Object.prototype.hasOwnProperty.call(l,"vector_layers"))Ie().b[60][1]++;else{Ie().b[60][0]++,Ie().s[214]++;return}Ie().s[215]++;for(const o of l.vector_layers)Ie().s[216]++,e[t].layers.push(o.id)};Ie().s[217]++;try{if(Ie().s[218]++,r.startsWith("pmtiles://")){Ie().b[61][0]++;const l=(Ie().s[219]++,await new c6(r.substring(10)).getTileJson(""));Ie().s[220]++,a(l)}else{Ie().b[61][1]++;const l=(Ie().s[221]++,await fetch(r,{mode:"cors"})),o=(Ie().s[222]++,await l.json());Ie().s[223]++,a(o)}}catch(l){Ie().s[224]++,console.error(`Failed to process source for url: '${r}', ${l}`)}}}Ie().s[225]++,wB(this.state.sources,e)?Ie().b[62][1]++:(Ie().b[62][0]++,Ie().s[226]++,console.debug("Setting sources",e),Ie().s[227]++,this.setState({sources:e}))}_getRenderer(){Ie().f[43]++;const e=(Ie().s[228]++,Ie().b[63][0]++,this.state.mapStyle.metadata||(Ie().b[63][1]++,{}));return Ie().s[229]++,Ie().b[64][0]++,e["maputnik:renderer"]||(Ie().b[64][1]++,"mlgljs")}onMapChange=(Ie().s[230]++,e=>{Ie().f[44]++,Ie().s[231]++,this.setState({mapView:e})});mapRenderer(){Ie().f[45]++;const{mapStyle:e,dirtyMapStyle:t}=(Ie().s[232]++,this.state),i=(Ie().s[233]++,{mapStyle:(Ie().b[65][0]++,t||(Ie().b[65][1]++,e)),replaceAccessTokens:p=>(Ie().f[46]++,Ie().s[234]++,qd.replaceAccessTokens(p,{allowFallback:!0})),onDataChange:p=>{Ie().f[47]++,Ie().s[235]++,this.layerWatcher.analyzeMap(p.map),Ie().s[236]++,this.fetchSources()}}),r=(Ie().s[237]++,this._getRenderer());let a;Ie().s[238]++,r==="ol"?(Ie().b[66][0]++,Ie().s[239]++,a=Ae.jsx(cre,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:p=>(Ie().f[48]++,Ie().s[240]++,this.onLayerSelect(+p))})):(Ie().b[66][1]++,Ie().s[241]++,a=Ae.jsx(QZ,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let l;Ie().s[242]++,this.state.mapState.match(/^filter-/)?(Ie().b[67][0]++,Ie().s[243]++,l=this.state.mapState.replace(/^filter-/,"")):Ie().b[67][1]++;const o=(Ie().s[244]++,{});return Ie().s[245]++,l?(Ie().b[68][0]++,Ie().s[246]++,o.filter=`url('#${l}')`):Ie().b[68][1]++,Ie().s[247]++,Ae.jsx("div",{style:o,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:a})}setStateInUrl=(Ie().s[248]++,()=>{Ie().f[49]++;const{mapState:e,mapStyle:t,isOpen:i}=(Ie().s[249]++,this.state),{selectedLayerIndex:r}=(Ie().s[250]++,this.state),a=(Ie().s[251]++,new URL(location.href)),l=(Ie().s[252]++,Z7(JSON.stringify(t)));Ie().s[253]++,a.searchParams.set("layer",`${l}~${r}`);const o=(Ie().s[254]++,Object.entries(i).map(([p,C])=>(Ie().f[50]++,Ie().s[255]++,C===!0?(Ie().b[69][0]++,p):(Ie().b[69][1]++,null))).filter(p=>(Ie().f[51]++,Ie().s[256]++,p!==null)));Ie().s[257]++,o.length>0?(Ie().b[70][0]++,Ie().s[258]++,a.searchParams.set("modal",o.join(","))):(Ie().b[70][1]++,Ie().s[259]++,a.searchParams.delete("modal")),Ie().s[260]++,e==="map"?(Ie().b[71][0]++,Ie().s[261]++,a.searchParams.delete("view")):(Ie().b[71][1]++,Ie().s[262]++,e==="inspect"?(Ie().b[72][0]++,Ie().s[263]++,a.searchParams.set("view","inspect")):Ie().b[72][1]++),Ie().s[264]++,history.replaceState({selectedLayerIndex:r},"Maputnik",a.href)});getInitialStateFromUrl=(Ie().s[265]++,e=>{Ie().f[52]++;const t=(Ie().s[266]++,new URL(location.href)),i=(Ie().s[267]++,t.searchParams.get("modal"));if(Ie().s[268]++,Ie().b[74][0]++,i&&(Ie().b[74][1]++,i!=="")){Ie().b[73][0]++;const l=(Ie().s[269]++,i.split(",")),o=(Ie().s[270]++,{});Ie().s[271]++,l.forEach(p=>{Ie().f[53]++,Ie().s[272]++,o[p]=!0}),Ie().s[273]++,this.setState({isOpen:{...this.state.isOpen,...o}})}else Ie().b[73][1]++;const r=(Ie().s[274]++,t.searchParams.get("view"));Ie().s[275]++,Ie().b[76][0]++,r&&(Ie().b[76][1]++,r!=="")?(Ie().b[75][0]++,Ie().s[276]++,this.setMapState(r)):Ie().b[75][1]++;const a=(Ie().s[277]++,t.searchParams.get("layer"));if(Ie().s[278]++,a){Ie().b[77][0]++,Ie().s[279]++;try{const l=(Ie().s[280]++,a.split("~")),[o,p]=(Ie().s[281]++,[l[0],parseInt(l[1],10)]);let C=(Ie().s[282]++,!0);if(Ie().s[283]++,o!=="-"){Ie().b[78][0]++;const w=(Ie().s[284]++,Z7(JSON.stringify(e)));Ie().s[285]++,w!==parseInt(o,10)?(Ie().b[79][0]++,Ie().s[286]++,C=!1):Ie().b[79][1]++}else Ie().b[78][1]++;Ie().s[287]++,C?(Ie().b[80][0]++,Ie().s[288]++,this.setState({selectedLayerIndex:p,selectedLayerOriginalId:e.layers[p].id})):Ie().b[80][1]++}catch(l){Ie().s[289]++,console.warn(l)}}else Ie().b[77][1]++});onLayerSelect=(Ie().s[290]++,e=>{Ie().f[54]++,Ie().s[291]++,this.setState({selectedLayerIndex:e,selectedLayerOriginalId:this.state.mapStyle.layers[e].id},this.setStateInUrl)});setModal(e,t){Ie().f[55]++,Ie().s[292]++,this.setState({isOpen:{...this.state.isOpen,[e]:t}},this.setStateInUrl)}toggleModal(e){Ie().f[56]++,Ie().s[293]++,this.setModal(e,!this.state.isOpen[e])}onSetFileHandle=(Ie().s[294]++,e=>{Ie().f[57]++,Ie().s[295]++,this.setState({fileHandle:e})});onChangeOpenlayersDebug=(Ie().s[296]++,(e,t)=>{Ie().f[58]++,Ie().s[297]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[e]:t}})});onChangeMaplibreGlDebug=(Ie().s[298]++,(e,t)=>{Ie().f[59]++,Ie().s[299]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[e]:t}})});render(){Ie().f[60]++;const e=(Ie().s[300]++,Ie().b[81][0]++,this.state.mapStyle.layers||(Ie().b[81][1]++,[])),t=(Ie().s[301]++,e.length>0?(Ie().b[82][0]++,e[this.state.selectedLayerIndex]):(Ie().b[82][1]++,void 0)),i=(Ie().s[302]++,Ae.jsx(Ehe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),r=(Ie().s[303]++,Ae.jsx(kse,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:e,sources:this.state.sources,errors:this.state.errors})),a=(Ie().s[304]++,t?(Ie().b[83][0]++,Ae.jsx(ahe,{layer:t,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(Ie().b[83][1]++,void 0)),l=(Ie().s[305]++,this.state.errors.length+this.state.infos.length>0?(Ie().b[84][0]++,Ae.jsx(khe,{currentLayer:t,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(Ie().b[84][1]++,void 0)),o=(Ie().s[306]++,Ae.jsxs("div",{children:[Ae.jsx(Dde,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),Ae.jsx(Tde,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),Ae.jsx(Khe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),Ae.jsx(nde,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),Ae.jsx(Ode,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),Ae.jsx(_de,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return Ie().s[307]++,Ae.jsx(Ihe,{toolbar:i,layerList:r,layerEditor:a,map:this.mapRenderer(),bottom:l,modals:o})}}const Nfe=RU.createRoot(document.querySelector("#app"));Nfe.render(Ae.jsx(Sv.Provider,{value:{className:"react-icons"},children:Ae.jsx(jfe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index--khXh1ZU.js.map
